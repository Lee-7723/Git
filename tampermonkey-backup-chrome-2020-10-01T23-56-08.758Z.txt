{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"网盘助手","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["newday.me","likestyle.cn"],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://pan.baidu.com/*","*://yun.baidu.com/*","*://*.weiyun.com/*","*://*.lanzous.com/*","*://*.lanzoux.com/*","*://cloud.189.cn/*","*://*.newday.me/*","*://*.likestyle.cn/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"$config":"o{\"uid\":\"2k8hedhk5qus33a7oig6boxw79qgq87e\",\"share_list\":{\"b00nm2rte\":{\"share_id\":\"b00nm2rte\",\"share_pwd\":\"0\",\"share_link\":\"https://lanzous.com/b00nm2rte\",\"share_source\":\"lanzous\",\"share_time\":1591774331659},\"b04y98kcd\":{\"share_id\":\"b04y98kcd\",\"share_pwd\":\"0\",\"share_link\":\"https://www.lanzous.com/b04y98kcd\",\"share_source\":\"lanzous\",\"share_time\":1590310216473},\"7zNkftjwu2ZVpcqQE7F-Hw\":{\"share_id\":\"7zNkftjwu2ZVpcqQE7F-Hw\",\"share_pwd\":\"siq5\",\"share_link\":\"https://pan.baidu.com/share/init?surl=7zNkftjwu2ZVpcqQE7F-Hw\",\"share_source\":\"baidu\",\"share_time\":1590583667216},\"b03aws0uj\":{\"share_id\":\"b03aws0uj\",\"share_pwd\":\"0\",\"share_link\":\"https://carrot.lanzous.com/b03aws0uj\",\"share_source\":\"lanzous\",\"share_time\":1591492166260},\"g3ydMVmI50L4shLLnS3WXQ\":{\"share_id\":\"g3ydMVmI50L4shLLnS3WXQ\",\"share_pwd\":\"bcox\",\"share_link\":\"https://pan.baidu.com/share/init?surl=g3ydMVmI50L4shLLnS3WXQ\",\"share_source\":\"baidu\",\"share_time\":1591792973394},\"b0gwopzc\":{\"share_id\":\"b0gwopzc\",\"share_pwd\":\"0\",\"share_link\":\"https://carrotchou.lanzous.com/b0gwopzc\",\"share_source\":\"lanzous\",\"share_time\":1594185504074},\"_ZNYHexEzd79d-VbgrOpvQ\":{\"share_id\":\"_ZNYHexEzd79d-VbgrOpvQ\",\"share_pwd\":\"8888\",\"share_link\":\"https://pan.baidu.com/share/init?surl=_ZNYHexEzd79d-VbgrOpvQ\",\"share_source\":\"baidu\",\"share_time\":1596023051567},\"a3bUK6aRfwh1efP4QAP0Ug\":{\"share_id\":\"a3bUK6aRfwh1efP4QAP0Ug\",\"share_pwd\":\"n47q\",\"share_link\":\"https://pan.baidu.com/share/init?surl=a3bUK6aRfwh1efP4QAP0Ug\",\"share_source\":\"baidu\",\"share_time\":1596368639166},\"b06jopyd\":{\"share_id\":\"b06jopyd\",\"share_pwd\":\"0\",\"share_link\":\"https://www.lanzoux.com/b06jopyd\",\"share_source\":\"lanzous\",\"share_time\":1596621240279},\"kmlpySctJF8J8CawRX3p_Q\":{\"share_id\":\"kmlpySctJF8J8CawRX3p_Q\",\"share_pwd\":\"q4h5\",\"share_link\":\"https://pan.baidu.com/share/init?surl=kmlpySctJF8J8CawRX3p_Q\",\"share_source\":\"baidu\",\"share_time\":1596688102691},\"vabp-HuDiSBQCqQOu9b0DA\":{\"share_id\":\"vabp-HuDiSBQCqQOu9b0DA\",\"share_pwd\":\"GZYS\",\"share_link\":\"https://pan.baidu.com/share/init?surl=vabp-HuDiSBQCqQOu9b0DA\",\"share_source\":\"baidu\",\"share_time\":1596936801945},\"b00taofti\":{\"share_id\":\"b00taofti\",\"share_pwd\":\"0\",\"share_link\":\"https://www.lanzous.com/b00taofti\",\"share_source\":\"lanzous\",\"share_time\":1597489965958}}}","$storage":"o{\"version_date\":\"20200822\",\"version_payload\":{\"version\":\"0.4.2\"},\"version_latest\":\"0.4.2\"}","config_json":"s{\"wpzs_version_date\":\"20200521\",\"wpzs_version_latest\":\"0.2.2\"}","uid":"saktjjzsgqa3ugi42mjum2l9v415t3a99"},"ts":1598055334430},"enabled":true,"position":1,"file_url":"https://greasyfork.org/scripts/378301-%E7%BD%91%E7%9B%98%E5%8A%A9%E6%89%8B/code/%E7%BD%91%E7%9B%98%E5%8A%A9%E6%89%8B.user.js","uuid":"3245716b-5d41-4f61-bbbb-bd51c0e2c39b","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDnvZHnm5jliqnmiYsKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vZ28ubmV3ZGF5Lm1lL3MvcGFuLWhvbWUKLy8gQHZlcnNpb24gICAgICAwLjQuNAovLyBAaWNvbiAgICAgICAgIGh0dHA6Ly9jZG4ubmV3ZGF5Lm1lL2FkZG9uL3Bhbi9mYXZpY29uLmljbwovLyBAYXV0aG9yICAgICAgIOWTqeWRtQovLyBAZGVzY3JpcHRpb24gIOWkp+amguaYr+acgOS8mOmbheWlveeUqOeahOe9keebmOWKqeaJi+S6hu+8m+aPkuS7tuS4u+imgeWKn+iDveacie+8mlsxXeeZvuW6pue9keebmOOAgeiFvuiur+W+ruS6keOAgeiTneWlj+S6keOAgeWkqee/vOS6keebmOS4h+iDvemSpeWMmSBbMl3nmb7luqbnvZHnm5jnlJ/miJDlubblsZXnpLrkuIvovb3pk77mjqUgWzNd55m+5bqm572R55uY5YiG5Lqr5pe26Ieq5a6a5LmJ5o+Q5Y+W56CBCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi53ZWl5dW4uY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5sYW56b3VzLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubGFuem91eC5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly9jbG91ZC4xODkuY24vKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLm5ld2RheS5tZS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubGlrZXN0eWxlLmNuLyoKLy8gQGNvbm5lY3QgICAgICBuZXdkYXkubWUKLy8gQGNvbm5lY3QgICAgICBsaWtlc3R5bGUuY24KLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5zdGF0aWNmaWxlLm9yZy9qcXVlcnkvMy41LjAvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2RvbXB1cmlmeS8yLjAuMTAvcHVyaWZ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL3NuYXAuc3ZnLzAuNS4xL3NuYXAuc3ZnLW1pbi5qcwovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBncmFudCAgICAgICAgR01fbGlzdFZhbHVlcwovLyBAZ3JhbnQgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgIEdNX25vdGlmaWNhdGlvbgovLyBAZ3JhbnQgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0Ci8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICB2YXIgbWFuaWZlc3QgPSB7CiAgICAgICAgIm5hbWUiOiAid3B6cyIsCiAgICAgICAgInVybHMiOiB7fSwKICAgICAgICAiYXBpcyI6IHsKICAgICAgICAgICAgInZlcnNpb24iOiAiaHR0cHM6Ly9hcGkubmV3ZGF5Lm1lL3NoYXJlL2Rpc2svdmVyc2lvbiIsCiAgICAgICAgICAgICJvcmlnaW4iOiAiaHR0cHM6Ly9hcGkubmV3ZGF5Lm1lL3NoYXJlL2Rpc2svb3JpZ2luIiwKICAgICAgICAgICAgInF1ZXJ5IjogImh0dHBzOi8vYXBpLm5ld2RheS5tZS9zaGFyZS9kaXNrL3F1ZXJ5IiwKICAgICAgICAgICAgInN0b3JlIjogImh0dHBzOi8vYXBpLm5ld2RheS5tZS9zaGFyZS9kaXNrL3N0b3JlIiwKICAgICAgICAgICAgImxpc3RzIjogImh0dHBzOi8vYXBpLm5ld2RheS5tZS9zaGFyZS9kaXNrL2xpc3RzIiwKICAgICAgICAgICAgImRlbGV0ZSI6ICJodHRwczovL2FwaS5uZXdkYXkubWUvc2hhcmUvZGlzay9kZWxldGUiCiAgICAgICAgfSwKICAgICAgICAibG9nZ2VyX2xldmVsIjogMywKICAgICAgICAib3B0aW9uc19wYWdlIjogImh0dHA6Ly9nby5uZXdkYXkubWUvcy9wYW4tb3B0aW9uIgogICAgfTsKCiAgICB2YXIgY29udGFpbmVyID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBkZWZpbmVzOiB7fSwKICAgICAgICAgICAgbW9kdWxlczoge30KICAgICAgICB9OwoKICAgICAgICBvYmouZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIHJlcXVpcmVzLCBjYWxsYmFjaykgewogICAgICAgICAgICBuYW1lID0gb2JqLnByb2Nlc3NOYW1lKG5hbWUpOwogICAgICAgICAgICBvYmouZGVmaW5lc1tuYW1lXSA9IHsKICAgICAgICAgICAgICAgIHJlcXVpcmVzOiByZXF1aXJlcywKICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjawogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5yZXF1aXJlID0gZnVuY3Rpb24gKG5hbWUsIGNhY2hlKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FjaGUgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgIGNhY2hlID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmFtZSA9IG9iai5wcm9jZXNzTmFtZShuYW1lKTsKICAgICAgICAgICAgaWYgKGNhY2hlICYmIG9iai5tb2R1bGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLm1vZHVsZXNbbmFtZV07CiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLmRlZmluZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgICAgIHZhciByZXF1aXJlcyA9IG9iai5kZWZpbmVzW25hbWVdLnJlcXVpcmVzOwogICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gb2JqLmRlZmluZXNbbmFtZV0uY2FsbGJhY2s7CgogICAgICAgICAgICAgICAgdmFyIG1vZHVsZSA9IG9iai51c2UocmVxdWlyZXMsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIGNhY2hlICYmIG9iai5yZWdpc3RlcihuYW1lLCBtb2R1bGUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai51c2UgPSBmdW5jdGlvbiAocmVxdWlyZXMsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBtb2R1bGUgPSB7CiAgICAgICAgICAgICAgICBleHBvcnRzOiB1bmRlZmluZWQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIHBhcmFtcyA9IG9iai5idWlsZFBhcmFtcyhyZXF1aXJlcywgbW9kdWxlKTsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrLmFwcGx5KHRoaXMsIHBhcmFtcyk7CiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIG1vZHVsZSkgewogICAgICAgICAgICBuYW1lID0gb2JqLnByb2Nlc3NOYW1lKG5hbWUpOwogICAgICAgICAgICBvYmoubW9kdWxlc1tuYW1lXSA9IG1vZHVsZTsKICAgICAgICB9OwoKICAgICAgICBvYmouYnVpbGRQYXJhbXMgPSBmdW5jdGlvbiAocmVxdWlyZXMsIG1vZHVsZSkgewogICAgICAgICAgICB2YXIgcGFyYW1zID0gW107CiAgICAgICAgICAgIHJlcXVpcmVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKG9iai5yZXF1aXJlKG5hbWUpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHBhcmFtcy5wdXNoKG9iai5yZXF1aXJlKTsKICAgICAgICAgICAgcGFyYW1zLnB1c2gobW9kdWxlLmV4cG9ydHMpOwogICAgICAgICAgICBwYXJhbXMucHVzaChtb2R1bGUpOwogICAgICAgICAgICByZXR1cm4gcGFyYW1zOwogICAgICAgIH07CgogICAgICAgIG9iai5wcm9jZXNzTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGVmaW5lOiBvYmouZGVmaW5lLAogICAgICAgICAgICB1c2U6IG9iai51c2UsCiAgICAgICAgICAgIHJlZ2lzdGVyOiBvYmoucmVnaXN0ZXIsCiAgICAgICAgICAgIG1vZHVsZXM6IG9iai5tb2R1bGVzCiAgICAgICAgfTsKICAgIH0pKCk7CgogICAgY29udGFpbmVyLmRlZmluZSgiZ20iLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnJlYWR5ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgR01fZ2V0VmFsdWUgIT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmoucmVhZHkoY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICAvKiogY29tbW9uICoqLwogICAgY29udGFpbmVyLmRlZmluZSgiZ21EYW8iLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGl0ZW1zOiB7fQogICAgICAgIH07CgogICAgICAgIG9iai5nZXQgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gR01fZ2V0VmFsdWUobmFtZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEJhdGNoID0gZnVuY3Rpb24gKG5hbWVzKSB7CiAgICAgICAgICAgIHZhciBpdGVtcyA9IHt9OwogICAgICAgICAgICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICBpdGVtc1tuYW1lXSA9IG9iai5nZXQobmFtZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaXRlbXM7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRCYXRjaChHTV9saXN0VmFsdWVzKCkpOwogICAgICAgIH07CgogICAgICAgIG9iai5zZXQgPSBmdW5jdGlvbiAobmFtZSwgaXRlbSkgewogICAgICAgICAgICBHTV9zZXRWYWx1ZShuYW1lLCBpdGVtKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0QmF0Y2ggPSBmdW5jdGlvbiAoaXRlbXMpIHsKICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpdGVtcykgewogICAgICAgICAgICAgICAgb2JqLnNldChuYW1lLCBpdGVtc1tuYW1lXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouc2V0QWxsID0gZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICAgICAgICAgIHZhciBuYW1lcyA9IEdNX2xpc3RWYWx1ZXMoKTsKICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgaWYgKCFpdGVtcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgewogICAgICAgICAgICAgICAgICAgIG9iai5yZW1vdmUobmFtZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvYmouc2V0QmF0Y2goaXRlbXMpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZW1vdmUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICBHTV9kZWxldGVWYWx1ZShuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVtb3ZlQmF0Y2ggPSBmdW5jdGlvbiAobmFtZXMpIHsKICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgb2JqLnJlbW92ZShuYW1lKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlbW92ZUJhdGNoKEdNX2xpc3RWYWx1ZXMoKSk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIlNjb3BlRGFvIiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhbywgc2NvcGUpIHsKICAgICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgICAgIGl0ZW1zOiB7fQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldCA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLml0ZW1zW25hbWVdOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldEJhdGNoID0gZnVuY3Rpb24gKG5hbWVzKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSB7fTsKICAgICAgICAgICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob2JqLml0ZW1zLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW25hbWVdID0gb2JqLml0ZW1zW25hbWVdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1zOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldEFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouaXRlbXM7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmouc2V0ID0gZnVuY3Rpb24gKG5hbWUsIGl0ZW0pIHsKICAgICAgICAgICAgICAgIG9iai5pdGVtc1tuYW1lXSA9IGl0ZW07CgogICAgICAgICAgICAgICAgb2JqLnN5bmMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5zZXRCYXRjaCA9IGZ1bmN0aW9uIChpdGVtcykgewogICAgICAgICAgICAgICAgb2JqLml0ZW1zID0gT2JqZWN0LmFzc2lnbihvYmouaXRlbXMsIGl0ZW1zKTsKCiAgICAgICAgICAgICAgICBvYmouc3luYygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnNldEFsbCA9IGZ1bmN0aW9uIChpdGVtcykgewogICAgICAgICAgICAgICAgb2JqLml0ZW1zID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbXMpOwoKICAgICAgICAgICAgICAgIG9iai5zeW5jKCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmoucmVtb3ZlID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmouaXRlbXNbbmFtZV07CgogICAgICAgICAgICAgICAgb2JqLnN5bmMoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIG9iai5yZW1vdmVCYXRjaCA9IGZ1bmN0aW9uIChuYW1lcykgewogICAgICAgICAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmouaXRlbXNbbmFtZV07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBvYmouc3luYygpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG9iai5pdGVtcyA9IHt9OwoKICAgICAgICAgICAgICAgIG9iai5nZXREYW8oKS5yZW1vdmUob2JqLmdldFNjb3BlKCkpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBvYmouZ2V0RGFvKCkuZ2V0KG9iai5nZXRTY29wZSgpKTsKICAgICAgICAgICAgICAgIGlmIChpdGVtcyBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgICAgIG9iai5pdGVtcyA9IGl0ZW1zOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLnN5bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBvYmouZ2V0RGFvKCkuc2V0KG9iai5nZXRTY29wZSgpLCBvYmouaXRlbXMpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgb2JqLmdldERhbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkYW87CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBvYmouZ2V0U2NvcGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICByZXR1cm4gb2JqLmluaXQoKSwgb2JqOwogICAgICAgIH07CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJjb25maWciLCBbImZhY3RvcnkiXSwgZnVuY3Rpb24gKGZhY3RvcnkpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5nZXRDb25maWcgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygpLmdldChuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0Q29uZmlnID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIG9iai5nZXREYW8oKS5zZXQobmFtZSwgdmFsdWUpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0RGFvKCkuZ2V0QWxsKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldERhbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkuZ2V0Q29uZmlnRGFvKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInN0b3JhZ2UiLCBbImZhY3RvcnkiXSwgZnVuY3Rpb24gKGZhY3RvcnkpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0RGFvKCkuZ2V0KG5hbWUpOwogICAgICAgIH07CgogICAgICAgIG9iai5zZXRWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICAgICAgICBvYmouZ2V0RGFvKCkuc2V0KG5hbWUsIHZhbHVlKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygpLmdldEFsbCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXREYW8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5LmdldFN0b3JhZ2VEYW8oKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgib3B0aW9uIiwgWyJjb25maWciLCAiY29uc3RhbnQiXSwgZnVuY3Rpb24gKGNvbmZpZywgY29uc3RhbnQpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBuYW1lOiAib3B0aW9uIiwKICAgICAgICAgICAgY29uc3RhbnQ6IGNvbnN0YW50Lm9wdGlvbgogICAgICAgIH07CgogICAgICAgIG9iai5pc09wdGlvbkFjdGl2ZSA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgICAgICB2YXIgb3B0aW9uID0gb2JqLmdldE9wdGlvbigpOwogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmluZGV4T2YobmFtZSkgPj0gMCA/IHRydWUgOiBmYWxzZTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0T3B0aW9uQWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgdmFyIG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvYmouZ2V0T3B0aW9uKCk7CiAgICAgICAgICAgIGlmIChvcHRpb24uaW5kZXhPZihuYW1lKSA8IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5wdXNoKG5hbWUpOwogICAgICAgICAgICAgICAgb2JqLnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldE9wdGlvblVuQWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgdmFyIG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvYmouZ2V0T3B0aW9uKCk7CiAgICAgICAgICAgIHZhciBpbmRleCA9IG9wdGlvbi5pbmRleE9mKG5hbWUpOwogICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbltpbmRleF07CiAgICAgICAgICAgICAgICBvYmouc2V0T3B0aW9uKG9wdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0T3B0aW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgb3B0aW9uID0gW107CiAgICAgICAgICAgIHZhciBvcHRpb25MaXN0ID0gb2JqLmdldE9wdGlvbkxpc3QoKTsKICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhvYmouY29uc3RhbnQpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHZhciBuYW1lID0gaXRlbS5uYW1lOwogICAgICAgICAgICAgICAgaWYgKG9wdGlvbkxpc3QuaGFzT3duUHJvcGVydHkobmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uTGlzdFtuYW1lXSAhPSAibm8iKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5wdXNoKG5hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0udmFsdWUgIT0gIm5vIikgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5wdXNoKG5hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbjsKICAgICAgICB9OwoKICAgICAgICBvYmouc2V0T3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgICB2YXIgb3B0aW9uTGlzdCA9IHt9OwogICAgICAgICAgICBPYmplY3QudmFsdWVzKG9iai5jb25zdGFudCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmluZGV4T2YobmFtZSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbkxpc3RbbmFtZV0gPSAieWVzIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uTGlzdFtuYW1lXSA9ICJubyI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBvYmouc2V0T3B0aW9uTGlzdChvcHRpb25MaXN0KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0T3B0aW9uTGlzdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG9wdGlvbkxpc3QgPSBjb25maWcuZ2V0Q29uZmlnKG9iai5uYW1lKTsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbkxpc3QgPyBvcHRpb25MaXN0IDoge307CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldE9wdGlvbkxpc3QgPSBmdW5jdGlvbiAob3B0aW9uTGlzdCkgewogICAgICAgICAgICBjb25maWcuc2V0Q29uZmlnKG9iai5uYW1lLCBvcHRpb25MaXN0KTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgibWFuaWZlc3QiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIG1hbmlmZXN0OiBtYW5pZmVzdAogICAgICAgIH07CgogICAgICAgIG9iai5nZXRJdGVtID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5tYW5pZmVzdFtuYW1lXTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0TWFuaWZlc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWFuaWZlc3Q7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0SXRlbSgibmFtZSIpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRBcHBOYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldEl0ZW0oImFwcF9uYW1lIik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFVybCA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHZhciB1cmxzID0gb2JqLmdldEl0ZW0oInVybHMiKTsKICAgICAgICAgICAgKHVybHMgaW5zdGFuY2VvZiBPYmplY3QpIHx8ICh1cmxzID0ge30pOwogICAgICAgICAgICByZXR1cm4gdXJsc1tuYW1lXTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QXBpID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgdmFyIGFwaXMgPSBvYmouZ2V0SXRlbSgiYXBpcyIpOwogICAgICAgICAgICAoYXBpcyBpbnN0YW5jZW9mIE9iamVjdCkgfHwgKGFwaXMgPSB7fSk7CiAgICAgICAgICAgIHJldHVybiBhcGlzW25hbWVdOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRPcHRpb25zUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKEdNX2luZm8uc2NyaXB0Lm9wdGlvblVybCkgewogICAgICAgICAgICAgICAgcmV0dXJuIEdNX2luZm8uc2NyaXB0Lm9wdGlvblVybDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouZ2V0SXRlbSgib3B0aW9uc19wYWdlIik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiZW52IiwgWyJjb25maWciLCAibWFuaWZlc3QiXSwgZnVuY3Rpb24gKGNvbmZpZywgbWFuaWZlc3QpIHsKICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBtb2RlczogewogICAgICAgICAgICAgICAgQURET046ICJhZGRvbiIsCiAgICAgICAgICAgICAgICBTQ1JJUFQ6ICJzY3JpcHQiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJyb3dzZXJzOiB7CiAgICAgICAgICAgICAgICBGSVJFRk9YOiAiZmlyZWZveCIsCiAgICAgICAgICAgICAgICBFREc6ICJlZGciLAogICAgICAgICAgICAgICAgRURHRTogImVkZ2UiLAogICAgICAgICAgICAgICAgQkFJRFU6ICJiYWlkdSIsCiAgICAgICAgICAgICAgICBMSUVCQU86ICJsaWViYW8iLAogICAgICAgICAgICAgICAgVUM6ICJ1YyIsCiAgICAgICAgICAgICAgICBRUTogInFxIiwKICAgICAgICAgICAgICAgIFNPR09VOiAic29nb3UiLAogICAgICAgICAgICAgICAgT1BFUkE6ICJvcGVyYSIsCiAgICAgICAgICAgICAgICBNQVhUSE9OOiAibWF4dGhvbiIsCiAgICAgICAgICAgICAgICBJRTIzNDU6ICIyMzQ1IiwKICAgICAgICAgICAgICAgIFNFMzYwOiAiMzYwIiwKICAgICAgICAgICAgICAgIENIUk9NRTogImNocm9tZSIsCiAgICAgICAgICAgICAgICBTQUZJUkk6ICJzYWZhcmkiLAogICAgICAgICAgICAgICAgT1RIRVI6ICJvdGhlciIKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXROYW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbWFuaWZlc3QuZ2V0TmFtZSgpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRNb2RlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoR01faW5mby5tb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gR01faW5mby5tb2RlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5tb2Rlcy5TQ1JJUFQ7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QWlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoR01faW5mby5zY3JpcHRIYW5kbGVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gR01faW5mby5zY3JpcHRIYW5kbGVyLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gInVua25vd24iOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFVpZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHVpZCA9IGNvbmZpZy5nZXRDb25maWcoInVpZCIpOwogICAgICAgICAgICBpZiAoIXVpZCkgewogICAgICAgICAgICAgICAgdWlkID0gb2JqLnJhbmRTdHJpbmcoMzIpOwogICAgICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZygidWlkIiwgdWlkKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdWlkOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRCcm93c2VyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIW9iai5fYnJvd3NlcikgewogICAgICAgICAgICAgICAgb2JqLl9icm93c2VyID0gb2JqLm1hdGNoQnJvd3NlclR5cGUobmF2aWdhdG9yLnVzZXJBZ2VudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5fYnJvd3NlcjsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIEdNX2luZm8uc2NyaXB0LnZlcnNpb247CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEVkaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBHTV9pbmZvLnZlcnNpb247CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldEluZm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBtb2RlOiBvYmouZ2V0TW9kZSgpLAogICAgICAgICAgICAgICAgYWlkOiBvYmouZ2V0QWlkKCksCiAgICAgICAgICAgICAgICB1aWQ6IG9iai5nZXRVaWQoKSwKICAgICAgICAgICAgICAgIGJyb3dzZXI6IG9iai5nZXRCcm93c2VyKCksCiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBvYmouZ2V0VmVyc2lvbigpLAogICAgICAgICAgICAgICAgZWRpdGlvbjogb2JqLmdldEVkaXRpb24oKQogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5tYXRjaEJyb3dzZXJUeXBlID0gZnVuY3Rpb24gKHVzZXJBZ2VudCkgewogICAgICAgICAgICB2YXIgYnJvd3NlciA9IG9iai5icm93c2Vycy5PVEhFUjsKICAgICAgICAgICAgdXNlckFnZW50ID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmICh1c2VyQWdlbnQubWF0Y2goL2ZpcmVmb3gvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkZJUkVGT1g7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9lZGdlLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5FREdFOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvZWRnLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5FREc7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9iaWR1YnJvd3Nlci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuQkFJRFU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9sYmJyb3dzZXIvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkxJRUJBTzsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL3Vicm93c2VyLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5VQzsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL3FxYnJvd3NlLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgYnJvd3NlciA9IG9iai5icm93c2Vycy5RUTsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL21ldGFzci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuU09HT1U7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50Lm1hdGNoKC9vcHIvKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLk9QRVJBOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvbWF4dGhvbi8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuTUFYVEhPTjsKICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goLzIzNDVleHBsb3Jlci8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuSUUyMzQ1OwogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5tYXRjaCgvY2hyb21lLykgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci5taW1lVHlwZXMubGVuZ3RoID4gMTApIHsKICAgICAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLlNFMzYwOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBicm93c2VyID0gb2JqLmJyb3dzZXJzLkNIUk9NRTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyQWdlbnQubWF0Y2goL3NhZmFyaS8pICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGJyb3dzZXIgPSBvYmouYnJvd3NlcnMuU0FGSVJJOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBicm93c2VyOwogICAgICAgIH07CgogICAgICAgIG9iai5yYW5kU3RyaW5nID0gZnVuY3Rpb24gKGxlbmd0aCkgewogICAgICAgICAgICB2YXIgcG9zc2libGUgPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5IjsKICAgICAgICAgICAgdmFyIHRleHQgPSAiIjsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGV4dCArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImh0dHAiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLmFqYXggPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgICAgIHZhciBkZXRhaWxzID0gewogICAgICAgICAgICAgICAgbWV0aG9kOiBvcHRpb24udHlwZSwKICAgICAgICAgICAgICAgIHVybDogb3B0aW9uLnVybCwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogb3B0aW9uLmRhdGFUeXBlLAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3RhdHVzIHx8IHBhcnNlSW50KHJlc3VsdC5zdGF0dXMgLyAxMDApID09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnN1Y2Nlc3MgJiYgb3B0aW9uLnN1Y2Nlc3MocmVzdWx0LnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5lcnJvciAmJiBvcHRpb24uZXJyb3IoIiIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLmVycm9yICYmIG9wdGlvbi5lcnJvcihyZXN1bHQuZXJyb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8g5o+Q5Lqk5pWw5o2uCiAgICAgICAgICAgIGlmIChvcHRpb24uZGF0YSBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5kYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpIHsKICAgICAgICAgICAgICAgICAgICBkZXRhaWxzLmRhdGEgPSBvcHRpb24uZGF0YTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9uLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGksIG9wdGlvbi5kYXRhW2ldKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5kYXRhID0gZm9ybURhdGE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOiHquWumuS5ieWktAogICAgICAgICAgICBpZiAob3B0aW9uLmhlYWRlcnMpIHsKICAgICAgICAgICAgICAgIGRldGFpbHMuaGVhZGVycyA9IG9wdGlvbi5oZWFkZXJzOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDotoXml7YKICAgICAgICAgICAgaWYgKG9wdGlvbi50aW1lb3V0KSB7CiAgICAgICAgICAgICAgICBkZXRhaWxzLnRpbWVvdXQgPSBvcHRpb24udGltZW91dDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoZGV0YWlscyk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInJvdXRlciIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouZ2V0VXJsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbG9jYXRpb24uaHJlZjsKICAgICAgICB9OwoKICAgICAgICBvYmouZ29VcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm9wZW5VcmwgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm9wZW5UYWIgPSBmdW5jdGlvbiAodXJsLCBhY3RpdmUpIHsKICAgICAgICAgICAgR01fb3BlbkluVGFiKHVybCwgIWFjdGl2ZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmp1bXBMaW5rID0gZnVuY3Rpb24gKGp1bXBVcmwsIGp1bXBNb2RlKSB7CiAgICAgICAgICAgIHN3aXRjaCAoanVtcE1vZGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAvLyBzZWxmCiAgICAgICAgICAgICAgICAgICAgb2JqLmdvVXJsKGp1bXBVcmwpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgIC8vIG5ldwogICAgICAgICAgICAgICAgICAgIG9iai5vcGVuVXJsKGp1bXBVcmwpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIC8vIG5ldyAmIG5vdCBhY3RpdmUKICAgICAgICAgICAgICAgICAgICBvYmoub3BlblRhYihqdW1wVXJsLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgLy8gbmV3ICYgYWN0aXZlCiAgICAgICAgICAgICAgICAgICAgb2JqLm9wZW5UYWIoanVtcFVybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VXJsUGFyYW0gPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICB2YXIgcGFyYW0gPSBvYmoucGFyc2VVcmxQYXJhbShvYmouZ2V0VXJsKCkpOwogICAgICAgICAgICBpZiAobmFtZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmhhc093blByb3BlcnR5KG5hbWUpID8gcGFyYW1bbmFtZV0gOiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnBhcnNlVXJsUGFyYW0gPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiPyIpKSB7CiAgICAgICAgICAgICAgICB1cmwgPSB1cmwuc3BsaXQoIj8iKVsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcmVnID0gLyhbXj0mXHNdKylbPVxzXSooW149JlxzXSopL2c7CiAgICAgICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICAgICAgd2hpbGUgKHJlZy5leGVjKHVybCkpIHsKICAgICAgICAgICAgICAgIG9ialtSZWdFeHAuJDFdID0gUmVnRXhwLiQyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImxvZ2dlciIsIFsiZW52IiwgIm1hbmlmZXN0Il0sIGZ1bmN0aW9uIChlbnYsIG1hbmlmZXN0KSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgY29uc3RhbnQ6IHsKICAgICAgICAgICAgICAgIERFQlVHOiAwLAogICAgICAgICAgICAgICAgSU5GTzogMSwKICAgICAgICAgICAgICAgIFdBUk46IDIsCiAgICAgICAgICAgICAgICBFUlJPUjogMywKICAgICAgICAgICAgICAgIE5PTkU6IDQKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5kZWJ1ZyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgICAgIG9iai5sb2cobWVzc2FnZSwgb2JqLmNvbnN0YW50LkRFQlVHKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5mbyA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgICAgIG9iai5sb2cobWVzc2FnZSwgb2JqLmNvbnN0YW50LklORk8pOwogICAgICAgIH07CgogICAgICAgIG9iai53YXJuID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICAgICAgb2JqLmxvZyhtZXNzYWdlLCBvYmouY29uc3RhbnQuV0FSTik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICAgICAgb2JqLmxvZyhtZXNzYWdlLCBvYmouY29uc3RhbnQuRVJST1IpOwogICAgICAgIH07CgogICAgICAgIG9iai5sb2cgPSBmdW5jdGlvbiAobWVzc2FnZSwgbGV2ZWwpIHsKICAgICAgICAgICAgaWYgKGxldmVsIDwgbWFuaWZlc3QuZ2V0SXRlbSgibG9nZ2VyX2xldmVsIikpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5ncm91cCgiWyIgKyBlbnYuZ2V0TmFtZSgpICsgIl0iICsgZW52LmdldE1vZGUoKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpOwogICAgICAgICAgICBjb25zb2xlLmdyb3VwRW5kKCk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIm1ldGEiLCBbImVudiIsICIkIl0sIGZ1bmN0aW9uIChlbnYsICQpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5leGlzdE1ldGEgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICBuYW1lID0gb2JqLnByb2Nlc3NOYW1lKG5hbWUpOwogICAgICAgICAgICBpZiAoJCgibWV0YVtuYW1lPSciICsgbmFtZSArICInXSIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouYXBwZW5kTWV0YSA9IGZ1bmN0aW9uIChuYW1lLCBjb250ZW50KSB7CiAgICAgICAgICAgIG5hbWUgPSBvYmoucHJvY2Vzc05hbWUobmFtZSk7CiAgICAgICAgICAgIGNvbnRlbnQgfHwgKGNvbnRlbnQgPSAib24iKTsKICAgICAgICAgICAgJCgnPG1ldGEgbmFtZT0iJyArIG5hbWUgKyAnIiBjb250ZW50PSJvbiI+JykuYXBwZW5kVG8oJCgiaGVhZCIpKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucHJvY2Vzc05hbWUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gZW52LmdldE5hbWUoKSArICI6OiIgKyBuYW1lOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJ1bnNhZmVXaW5kb3ciLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0eXBlb2YgdW5zYWZlV2luZG93ID09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3c7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gdW5zYWZlV2luZG93OwogICAgICAgIH0KICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInN2Z0NyeXB0IiwgWyJTbmFwIl0sIGZ1bmN0aW9uIChTbmFwKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouZ2V0UmVxRGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHJlcVRpbWUgPSBNYXRoLnJvdW5kKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7CiAgICAgICAgICAgIHZhciByZXFQb2ludCA9IG9iai5nZXRTdHJQb2ludCgidGltZXN0YW1wOiIgKyByZXFUaW1lKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHJlcV90aW1lOiByZXFUaW1lLAogICAgICAgICAgICAgICAgcmVxX3BvaW50OiByZXFQb2ludAogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTdHJQb2ludCA9IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIjA6MCI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBwYXRoID0gIiI7CiAgICAgICAgICAgIHZhciBjdXJyZW50LCBsYXN0ID0gc3RyWzBdLmNoYXJDb2RlQXQoKTsKICAgICAgICAgICAgdmFyIHN1bSA9IGxhc3Q7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50ID0gc3RyW2ldLmNoYXJDb2RlQXQoKTsKICAgICAgICAgICAgICAgIGlmIChpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGF0aCArICJNIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhdGggKyAiIEwiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGF0aCA9IHBhdGggKyBjdXJyZW50ICsgIiAiICsgbGFzdDsKICAgICAgICAgICAgICAgIGxhc3QgPSBjdXJyZW50OwogICAgICAgICAgICAgICAgc3VtID0gc3VtICsgY3VycmVudDsKICAgICAgICAgICAgfQogICAgICAgICAgICBwYXRoID0gcGF0aCArICIgWiI7CiAgICAgICAgICAgIHZhciBpbmRleCA9IHN1bSAlIHN0ci5sZW5ndGg7CiAgICAgICAgICAgIHZhciBkYXRhID0gU25hcC5wYXRoLmdldFBvaW50QXRMZW5ndGgocGF0aCwgc3RyW2luZGV4XS5jaGFyQ29kZUF0KCkpOwogICAgICAgICAgICByZXR1cm4gZGF0YS5tLnggKyAiOiIgKyBkYXRhLm4ueTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiY2FsZW5kYXIiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLmdldFRpbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiAobmV3IERhdGUoKSkuZ2V0VGltZSgpOwogICAgICAgIH07CgogICAgICAgIG9iai5mb3JtYXRUaW1lID0gZnVuY3Rpb24gKGZvcm1hdCwgdGltZXN0YW1wKSB7CiAgICAgICAgICAgIGZvcm1hdCB8fCAoZm9ybWF0ID0gIlktbS1kIEg6aTpzIik7CiAgICAgICAgICAgIHRpbWVzdGFtcCB8fCAodGltZXN0YW1wID0gb2JqLmdldFRpbWUoKSk7CiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTsKICAgICAgICAgICAgdmFyIHllYXIgPSAxOTAwICsgZGF0ZS5nZXRZZWFyKCk7CiAgICAgICAgICAgIHZhciBtb250aCA9ICIwIiArIChkYXRlLmdldE1vbnRoKCkgKyAxKTsKICAgICAgICAgICAgdmFyIGRheSA9ICIwIiArIGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICB2YXIgaG91ciA9ICIwIiArIGRhdGUuZ2V0SG91cnMoKTsKICAgICAgICAgICAgdmFyIG1pbnV0ZSA9ICIwIiArIGRhdGUuZ2V0TWludXRlcygpOwogICAgICAgICAgICB2YXIgc2Vjb25kID0gIjAiICsgZGF0ZS5nZXRTZWNvbmRzKCk7CiAgICAgICAgICAgIHZhciB2YXJzID0gewogICAgICAgICAgICAgICAgIlkiOiB5ZWFyLAogICAgICAgICAgICAgICAgIm0iOiBtb250aC5zdWJzdHJpbmcobW9udGgubGVuZ3RoIC0gMiwgbW9udGgubGVuZ3RoKSwKICAgICAgICAgICAgICAgICJkIjogZGF5LnN1YnN0cmluZyhkYXkubGVuZ3RoIC0gMiwgZGF5Lmxlbmd0aCksCiAgICAgICAgICAgICAgICAiSCI6IGhvdXIuc3Vic3RyaW5nKGhvdXIubGVuZ3RoIC0gMiwgaG91ci5sZW5ndGgpLAogICAgICAgICAgICAgICAgImkiOiBtaW51dGUuc3Vic3RyaW5nKG1pbnV0ZS5sZW5ndGggLSAyLCBtaW51dGUubGVuZ3RoKSwKICAgICAgICAgICAgICAgICJzIjogc2Vjb25kLnN1YnN0cmluZyhzZWNvbmQubGVuZ3RoIC0gMiwgc2Vjb25kLmxlbmd0aCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIG9iai5yZXBsYWNlVmFycyh2YXJzLCBmb3JtYXQpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZXBsYWNlVmFycyA9IGZ1bmN0aW9uICh2YXJzLCB2YWx1ZSkgewogICAgICAgICAgICBPYmplY3Qua2V5cyh2YXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShrZXksIHZhcnNba2V5XSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoIm9uZURhdGEiLCBbImVudiIsICJodHRwIl0sIGZ1bmN0aW9uIChlbnYsIGh0dHApIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5yZXF1ZXN0T25lQXBpID0gZnVuY3Rpb24gKHVybCwgZGF0YSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgaHR0cC5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJwb3N0IiwKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICAgICAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24oZW52LmdldEluZm8oKSwgZGF0YSksCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCIkZXh0ZW5kIiwgWyIkIiwgIkRPTVB1cmlmeSIsICJsb2dnZXIiXSwgZnVuY3Rpb24gKCQsIERPTVB1cmlmeSwgbG9nZ2VyKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmouaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKERPTVB1cmlmeSAmJiBET01QdXJpZnkgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgICAgICAgdmFyIGRvbVB1cmlmeSA9IERPTVB1cmlmeSh3aW5kb3cpOwogICAgICAgICAgICAgICAgJC5mbi5zYWZlSHRtbCA9IGZ1bmN0aW9uIChodG1sKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5odG1sKGRvbVB1cmlmeS5zYW5pdGl6ZShodG1sKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICQuZm4uc2FmZUh0bWwgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaHRtbChodG1sKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqLmluaXQoKSwgb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwUnVubmVyIiwgWyJyb3V0ZXIiLCAibG9nZ2VyIiwgIm1ldGEiLCAiJCJdLCBmdW5jdGlvbiAocm91dGVyLCBsb2dnZXIsIG1ldGEsICQsIHJlcXVpcmUpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoYXBwTGlzdCkgewogICAgICAgICAgICB2YXIgbWV0YU5hbWUgPSAic3RhdHVzIjsKICAgICAgICAgICAgaWYgKG1ldGEuZXhpc3RNZXRhKG1ldGFOYW1lKSkgewogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oInNldHVwIGFscmVhZHkiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIOa3u+WKoG1ldGEKICAgICAgICAgICAgICAgIG1ldGEuYXBwZW5kTWV0YShtZXRhTmFtZSk7CgogICAgICAgICAgICAgICAgLy8g6L+Q6KGM5bqU55SoCiAgICAgICAgICAgICAgICAkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmoucnVuQXBwTGlzdChhcHBMaXN0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJ1bkFwcExpc3QgPSBmdW5jdGlvbiAoYXBwTGlzdCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBmb3IgKHZhciBpIGluIGFwcExpc3QpIHsKICAgICAgICAgICAgICAgIHZhciBhcHAgPSBhcHBMaXN0W2ldOwoKICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG9iai5tYXRjaEFwcCh1cmwsIGFwcCk7CiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxdWlyZShhcHAubmFtZSkucnVuKCkgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLm1hdGNoQXBwID0gZnVuY3Rpb24gKHVybCwgYXBwKSB7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOwogICAgICAgICAgICBhcHAubWF0Y2hzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZihpdGVtKSA+IDAgfHwgaXRlbSA9PSAiKiIpIHsKICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIC8qKiBjdXN0b20gKiovCiAgICBjb250YWluZXIuZGVmaW5lKCJmYWN0b3J5IiwgWyJnbURhbyIsICJTY29wZURhbyJdLCBmdW5jdGlvbiAoZ21EYW8sIFNjb3BlRGFvKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgZGFvczoge30KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0Q29uZmlnRGFvID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLmdldERhbygiY29uZmlnIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFNjb3BlRGFvKGdtRGFvLCAiJGNvbmZpZyIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U3RvcmFnZURhbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9iai5nZXREYW8oInN0b3JhZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gU2NvcGVEYW8oZ21EYW8sICIkc3RvcmFnZSIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RGFvID0gZnVuY3Rpb24gKGtleSwgY3JlYXRlRnVuYykgewogICAgICAgICAgICBpZiAoIW9iai5kYW9zLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICAgIG9iai5kYW9zW2tleV0gPSBjcmVhdGVGdW5jKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5kYW9zW2tleV07CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImNvbnN0YW50IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzb3VyY2U6IHsKICAgICAgICAgICAgICAgIGJhaWR1OiAiYmFpZHUiLAogICAgICAgICAgICAgICAgd2VpeXVuOiAid2VpeXVuIiwKICAgICAgICAgICAgICAgIGxhbnpvdXM6ICJsYW56b3VzIiwKICAgICAgICAgICAgICAgIHR5MTg5OiAiMTg5IgogICAgICAgICAgICB9LAogICAgICAgICAgICBvcHRpb246IHsKICAgICAgICAgICAgICAgIGJhaWR1X3BhZ2VfaG9tZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9wYWdlX2hvbWUiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X3BhZ2Vfc2hhcmU6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYmFpZHVfcGFnZV9zaGFyZSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYmFpZHVfcGFnZV92ZXJpZnk6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYmFpZHVfcGFnZV92ZXJpZnkiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X3NoYXJlX3N0YXR1czogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9zaGFyZV9zdGF0dXMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X2N1c3RvbV9wYXNzd29yZDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJiYWlkdV9jdXN0b21fcGFzc3dvcmQiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJhaWR1X3Nob3dfb3JpZ2luOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImJhaWR1X3Nob3dfb3JpZ2luIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBiYWlkdV9hdXRvX2p1bXA6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiYmFpZHVfYXV0b19qdW1wIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdlaXl1bl9wYWdlX2hvbWU6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAid2VpeXVuX3BhZ2VfaG9tZSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2VpeXVuX3BhZ2Vfc2hhcmU6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAid2VpeXVuX3BhZ2Vfc2hhcmUiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdlaXl1bl9wYWdlX3ZlcmlmeTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3ZWl5dW5fcGFnZV92ZXJpZnkiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHdlaXl1bl9zaGFyZV9zdGF0dXM6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAid2VpeXVuX3NoYXJlX3N0YXR1cyIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgd2VpeXVuX2F1dG9fanVtcDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3ZWl5dW5fYXV0b19qdW1wIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxhbnpvdXNfcGFnZV92ZXJpZnk6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAibGFuem91c19wYWdlX3ZlcmlmeSIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJ5ZXMiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbGFuem91c19zaGFyZV9zdGF0dXM6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAibGFuem91c19zaGFyZV9zdGF0dXMiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxhbnpvdXNfYXV0b19qdW1wOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImxhbnpvdXNfYXV0b19qdW1wIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIm5vIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR5MTg5X3BhZ2VfaG9tZTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICIxODlfcGFnZV9ob21lIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0eTE4OV9wYWdlX3NoYXJlOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIjE4OV9wYWdlX3NoYXJlIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0eTE4OV9wYWdlX3ZlcmlmeTogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICIxODlfcGFnZV92ZXJpZnkiLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAieWVzIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHR5MTg5X3NoYXJlX3N0YXR1czogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICIxODlfc2hhcmVfc3RhdHVzIiwKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInllcyIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0eTE4OV9hdXRvX2p1bXA6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiMTg5X2F1dG9fanVtcCIsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJubyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJhcGkiLCBbIm1hbmlmZXN0IiwgIm9uZURhdGEiLCAic3ZnQ3J5cHQiXSwgZnVuY3Rpb24gKG1hbmlmZXN0LCBvbmVEYXRhLCBzdmdDcnlwdCkgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnZlcnNpb25RdWVyeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgICBvbmVEYXRhLnJlcXVlc3RPbmVBcGkobWFuaWZlc3QuZ2V0QXBpKCJ2ZXJzaW9uIiksIHt9LCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnF1ZXJ5U2hhcmVPcmlnaW4gPSBmdW5jdGlvbiAoc2hhcmVTb3VyY2UsIHNoYXJlSWQsIHNoYXJlTGluaywgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBzaGFyZV9pZDogc2hhcmVJZCwKICAgICAgICAgICAgICAgIHNoYXJlX3NvdXJjZTogc2hhcmVTb3VyY2UsCiAgICAgICAgICAgICAgICBzaGFyZV9wb2ludDogc3ZnQ3J5cHQuZ2V0U3RyUG9pbnQoc2hhcmVJZCksCiAgICAgICAgICAgICAgICBzaGFyZV9saW5rOiBzaGFyZUxpbmsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb25lRGF0YS5yZXF1ZXN0T25lQXBpKG1hbmlmZXN0LmdldEFwaSgib3JpZ2luIiksIGRhdGEsIGNhbGxiYWNrKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucXVlcnlTaGFyZVB3ZCA9IGZ1bmN0aW9uIChzaGFyZVNvdXJjZSwgc2hhcmVJZCwgc2hhcmVMaW5rLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgc2hhcmVfc291cmNlOiBzaGFyZVNvdXJjZSwKICAgICAgICAgICAgICAgIHNoYXJlX3BvaW50OiBzdmdDcnlwdC5nZXRTdHJQb2ludChzaGFyZUlkKSwKICAgICAgICAgICAgICAgIHNoYXJlX2xpbms6IHNoYXJlTGluawogICAgICAgICAgICB9OwogICAgICAgICAgICBvbmVEYXRhLnJlcXVlc3RPbmVBcGkobWFuaWZlc3QuZ2V0QXBpKCJxdWVyeSIpLCBkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnN0b3JlU2hhcmVQd2QgPSBmdW5jdGlvbiAoc2hhcmVJZCwgc2hhcmVQd2QsIHNoYXJlTGluaywgc2hhcmVTb3VyY2UsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgc2hhcmVfaWQ6IHNoYXJlSWQsCiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IHNoYXJlUHdkLAogICAgICAgICAgICAgICAgc2hhcmVfc291cmNlOiBzaGFyZVNvdXJjZSwKICAgICAgICAgICAgICAgIHNoYXJlX3BvaW50OiBzdmdDcnlwdC5nZXRTdHJQb2ludChzaGFyZUlkKSwKICAgICAgICAgICAgICAgIHNoYXJlX2xpbms6IHNoYXJlTGluawogICAgICAgICAgICB9OwogICAgICAgICAgICBvbmVEYXRhLnJlcXVlc3RPbmVBcGkobWFuaWZlc3QuZ2V0QXBpKCJzdG9yZSIpLCBkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnF1ZXJ5U2hhcmVMaXN0ID0gZnVuY3Rpb24gKHNoYXJlU291cmNlLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX3NvdXJjZTogc2hhcmVTb3VyY2UKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb25lRGF0YS5yZXF1ZXN0T25lQXBpKG1hbmlmZXN0LmdldEFwaSgibGlzdHMiKSwgZGF0YSwgY2FsbGJhY2spOwogICAgICAgIH07CgogICAgICAgIG9iai5kZWxldGVTaGFyZSA9IGZ1bmN0aW9uIChzaGFyZUlkLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgc2hhcmVfcG9pbnQ6IHN2Z0NyeXB0LmdldFN0clBvaW50KHNoYXJlSWQpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG9uZURhdGEucmVxdWVzdE9uZUFwaShtYW5pZmVzdC5nZXRBcGkoImRlbGV0ZSIpLCBkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoInNoYXJlTG9nIiwgWyJjb25maWciLCAiY2FsZW5kYXIiLCAiY29uc3RhbnQiLCAiYXBpIl0sIGZ1bmN0aW9uIChjb25maWcsIGNhbGVuZGFyLCBjb25zdGFudCwgYXBpKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgbmFtZTogInNoYXJlX2xpc3QiLAogICAgICAgICAgICBtb2RlczogewogICAgICAgICAgICAgICAgTE9DQUw6ICJsb2NhbCIsCiAgICAgICAgICAgICAgICBPTkxJTkU6ICJvbmxpbmUiCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVNb2RlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hhcmVNb2RlID0gY29uZmlnLmdldENvbmZpZygic2hhcmVfbW9kZSIpOwogICAgICAgICAgICByZXR1cm4gc2hhcmVNb2RlID09IG9iai5tb2Rlcy5MT0NBTCA/IG9iai5tb2Rlcy5MT0NBTCA6IG9iai5tb2Rlcy5PTkxJTkU7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldFNoYXJlTW9kZSA9IGZ1bmN0aW9uIChzaGFyZU1vZGUpIHsKICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZygic2hhcmVfbW9kZSIsIHNoYXJlTW9kZSA9PSBvYmoubW9kZXMuTE9DQUwgPyBvYmoubW9kZXMuTE9DQUwgOiBvYmoubW9kZXMuT05MSU5FKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVMb2dMaXN0ID0gZnVuY3Rpb24gKHNoYXJlU291cmNlLCBjYWxsYmFjaykgewogICAgICAgICAgICBpZiAob2JqLmdldFNoYXJlTW9kZSgpID09IG9iai5tb2Rlcy5MT0NBTCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2sob2JqLmdldExvY2FsU2hhcmVMb2dMaXN0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgb2JqLmdldE9ubGluZVNoYXJlTG9nTGlzdChzaGFyZVNvdXJjZSwgY2FsbGJhY2spOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE9ubGluZVNoYXJlTG9nTGlzdCA9IGZ1bmN0aW9uIChzaGFyZVNvdXJjZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgYXBpLnF1ZXJ5U2hhcmVMaXN0KHNoYXJlU291cmNlLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIE9iamVjdCAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZS5kYXRhLmxpc3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soW10pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0TG9jYWxTaGFyZUxvZ0xpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUxpc3QgPSBjb25maWcuZ2V0Q29uZmlnKG9iai5uYW1lKTsKICAgICAgICAgICAgcmV0dXJuIHNoYXJlTGlzdCA/IHNoYXJlTGlzdCA6IHt9OwogICAgICAgIH07CgogICAgICAgIG9iai5hZGRTaGFyZUxvZyA9IGZ1bmN0aW9uIChzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBzaGFyZVNvdXJjZSkgewogICAgICAgICAgICBhcGkuc3RvcmVTaGFyZVB3ZChzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBzaGFyZVNvdXJjZSk7CgogICAgICAgICAgICB2YXIgc2hhcmVMaXN0ID0gb2JqLmdldExvY2FsU2hhcmVMb2dMaXN0KCk7CiAgICAgICAgICAgIHNoYXJlTGlzdFtzaGFyZUlkXSA9IHsKICAgICAgICAgICAgICAgIHNoYXJlX2lkOiBzaGFyZUlkLAogICAgICAgICAgICAgICAgc2hhcmVfcHdkOiBzaGFyZVB3ZCwKICAgICAgICAgICAgICAgIHNoYXJlX2xpbms6IHNoYXJlTGluaywKICAgICAgICAgICAgICAgIHNoYXJlX3NvdXJjZTogc2hhcmVTb3VyY2UsCiAgICAgICAgICAgICAgICBzaGFyZV90aW1lOiAobmV3IERhdGUoKSkuZ2V0VGltZSgpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcob2JqLm5hbWUsIHNoYXJlTGlzdCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlbW92ZVNoYXJlTG9nID0gZnVuY3Rpb24gKHNoYXJlSWQsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUxpc3QgPSBvYmouZ2V0TG9jYWxTaGFyZUxvZ0xpc3QoKTsKICAgICAgICAgICAgZGVsZXRlIHNoYXJlTGlzdFtzaGFyZUlkXTsKICAgICAgICAgICAgY29uZmlnLnNldENvbmZpZyhvYmoubmFtZSwgc2hhcmVMaXN0KTsKCiAgICAgICAgICAgIGFwaS5kZWxldGVTaGFyZShzaGFyZUlkLCBjYWxsYmFjayk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmJ1aWxkU2hhcmVMaW5rID0gZnVuY3Rpb24gKHNoYXJlSWQsIHNoYXJlU291cmNlLCBzaGFyZUxpbmspIHsKICAgICAgICAgICAgaWYgKHNoYXJlU291cmNlID09IGNvbnN0YW50LnNvdXJjZS5iYWlkdSkgewogICAgICAgICAgICAgICAgc2hhcmVMaW5rID0gImh0dHBzOi8vcGFuLmJhaWR1LmNvbS9zLzEiICsgc2hhcmVJZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChzaGFyZVNvdXJjZSA9PSBjb25zdGFudC5zb3VyY2UuYmFpZHUpIHsKICAgICAgICAgICAgICAgIHNoYXJlTGluayA9ICJodHRwczovL3NoYXJlLndlaXl1bi5jb20vIiArIHNoYXJlSWQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hhcmVTb3VyY2UgPT0gY29uc3RhbnQuc291cmNlLmJhaWR1KSB7CiAgICAgICAgICAgICAgICBzaGFyZUxpbmsgPSAiaHR0cHM6Ly93d3cubGFuem91cy5jb20vIiArIHNoYXJlSWQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hhcmVTb3VyY2UgPT0gY29uc3RhbnQuc291cmNlLnR5MTg5KSB7CiAgICAgICAgICAgICAgICBzaGFyZUxpbmsgPSAiaHR0cHM6Ly9jbG91ZC4xODkuY24vdC8iICsgc2hhcmVJZDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc2hhcmVMaW5rOwogICAgICAgIH07CgogICAgICAgIG9iai5idWlsZFNoYXJlVGltZSA9IGZ1bmN0aW9uIChzaGFyZVRpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLmZvcm1hdFRpbWUoIlktbS1kIEg6aTpzIiwgc2hhcmVUaW1lKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgicnVudGltZSIsIFsicm91dGVyIiwgIm1hbmlmZXN0IiwgImNhbGVuZGFyIiwgInN0b3JhZ2UiLCAiYXBpIl0sIGZ1bmN0aW9uIChyb3V0ZXIsIG1hbmlmZXN0LCBjYWxlbmRhciwgc3RvcmFnZSwgYXBpKSB7CiAgICAgICAgdmFyIG9iaiA9IHt9OwoKICAgICAgICBvYmoub3Blbk9wdGlvbnNQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByb3V0ZXIub3BlblRhYihtYW5pZmVzdC5nZXRPcHRpb25zUGFnZSgpLCB0cnVlKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB2ZXJzaW9uRGF0ZSA9IHBhcnNlSW50KHN0b3JhZ2UuZ2V0VmFsdWUoInZlcnNpb25fZGF0ZSIpKTsKICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gY2FsZW5kYXIuZm9ybWF0VGltZSgiWW1kIik7CiAgICAgICAgICAgIGlmICghdmVyc2lvbkRhdGUgfHwgdmVyc2lvbkRhdGUgPCBjdXJyZW50RGF0ZSkgewogICAgICAgICAgICAgICAgYXBpLnZlcnNpb25RdWVyeShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKCJ2ZXJzaW9uX2RhdGUiLCBjdXJyZW50RGF0ZSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEgJiYgcmVzcG9uc2UuZGF0YSBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVyc2lvblBheWxvYWQgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldFZhbHVlKCJ2ZXJzaW9uX3BheWxvYWQiLCB2ZXJzaW9uUGF5bG9hZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2V0VmFsdWUoInZlcnNpb25fbGF0ZXN0IiwgdmVyc2lvblBheWxvYWQudmVyc2lvbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFJ1bnRpbWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5pbml0VmVyc2lvbigpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJjb3JlIiwgWyJydW50aW1lIiwgIiRleHRlbmQiXSwgZnVuY3Rpb24gKHJ1bnRpbWUpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5yZWFkeSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgICAgICBydW50aW1lLmluaXRSdW50aW1lKCk7CgogICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICAvKiogYXBwICoqLwogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX2JhaWR1IiwgWyJjb25maWciLCAib3B0aW9uIiwgInJvdXRlciIsICJsb2dnZXIiLCAidW5zYWZlV2luZG93IiwgImNvbnN0YW50IiwgInJ1bnRpbWUiLCAiYXBpIiwgInNoYXJlTG9nIiwgIiQiXSwgZnVuY3Rpb24gKGNvbmZpZywgb3B0aW9uLCByb3V0ZXIsIGxvZ2dlciwgdW5zYWZlV2luZG93LCBjb25zdGFudCwgcnVudGltZSwgYXBpLCBzaGFyZUxvZywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIGFwcF9pZDogNzc4NzUwLAogICAgICAgICAgICB0ZW1wX3BhdGg6ICIvb25ldG1wIiwKICAgICAgICAgICAgeXVuX2RhdGE6IG51bGwsCiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzZXRQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBiYWNrdXBQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICByZXN0b3JlUHdkOiBudWxsLAogICAgICAgICAgICAgICAgc3VibWl0X3B3ZDogbnVsbAogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHVybCA9IHJvdXRlci5nZXRVcmwoKTsKICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCIuYmFpZHUuY29tL3MvIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X3BhZ2Vfc2hhcmUpICYmIG9iai5pbml0U2hhcmVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigiLmJhaWR1LmNvbS9kaXNrL2hvbWUiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfcGFnZV9ob21lKSAmJiBvYmouaW5pdEhvbWVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZigiLmJhaWR1LmNvbS9kaXNrL3RpbWVsaW5lIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X3BhZ2VfaG9tZSkgJiYgb2JqLmluaXRUaW1lTGluZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHVybC5pbmRleE9mKCIuYmFpZHUuY29tL3NoYXJlL2luaXQiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfcGFnZV92ZXJpZnkpICYmIG9iai5pbml0VmVyaWZ5UGFnZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFNoYXJlUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlbW92ZVZpZGVvTGltaXQoKTsKCiAgICAgICAgICAgIG9iai5wcmV0dHlTaW5nbGVTaGFyZVBhZ2UoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uU2hhcmUoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uRXZlbnQoKTsKCiAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmJhaWR1X3Nob3dfb3JpZ2luKSkgewogICAgICAgICAgICAgICAgb2JqLnNob3dTaGFyZU9yaWdpbigpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRIb21lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlZ2lzdGVyQ3VzdG9tU2hhcmVQd2QoKTsKCiAgICAgICAgICAgIG9iai5pbml0QnV0dG9uSG9tZSgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25FdmVudCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VGltZUxpbmVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmoucmVnaXN0ZXJDdXN0b21TaGFyZVB3ZCgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25UaW1lTGluZSgpOwoKICAgICAgICAgICAgb2JqLmluaXRCdXR0b25FdmVudCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCgpOwoKICAgICAgICAgICAgaWYgKG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoKSkgewogICAgICAgICAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QoKTsKCiAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICB2YXIgJHB3ZCA9ICQoIi5pbnB1dC1hcmVhIGlucHV0Iik7CiAgICAgICAgICAgIGlmIChzaGFyZUlkICYmICRwd2QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAvLyDorr7nva7mj5Dlj5bnoIEKICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zZXRQd2QgPSBmdW5jdGlvbiAocHdkKSB7CiAgICAgICAgICAgICAgICAgICAgJHB3ZC52YWwocHdkKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8g5aSH5Lu95o+Q5Y+W56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2UuYmFja3VwUHdkID0gZnVuY3Rpb24gKHB3ZCkgewogICAgICAgICAgICAgICAgICAgICRwd2QuYXR0cigiZGF0YS1wd2QiLCBwd2QpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDov5jljp/mj5Dlj5bnoIEKICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5yZXN0b3JlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICRwd2QudmFsKCRwd2QuYXR0cigiZGF0YS1wd2QiKSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOaPkOS6pOaPkOWPlueggQogICAgICAgICAgICAgICAgdmFyICRidXR0b24gPSAkKCIuaW5wdXQtYXJlYSAuZy1idXR0b24tcmlnaHQiKTsKICAgICAgICAgICAgICAgIGlmICgkYnV0dG9uLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAkYnV0dG9uLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5hdXRvUGFkZGluZ1NoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgIHZhciBzaGFyZUxpbmsgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGFwaS5xdWVyeVNoYXJlUHdkKGNvbnN0YW50LnNvdXJjZS5iYWlkdSwgc2hhcmVJZCwgc2hhcmVMaW5rLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSByZXNwb25zZS5kYXRhLnNoYXJlX3B3ZDsKICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkID0gc2hhcmVQd2Q7CiAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNldFB3ZChzaGFyZVB3ZCk7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXBTdWNjZXNzKCLloavlhYXmj5Dlj5bnoIHmiJDlip8iKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfYXV0b19qdW1wKSkgewogICAgICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc3VibWl0X3B3ZCAmJiBvYmoudmVyaWZ5X3BhZ2Uuc3VibWl0X3B3ZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwRXJyb3IoIuaaguaXoOS6uuWIhuS6q+aPkOWPlueggSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5re75Yqg5byA5YWzCiAgICAgICAgICAgICQoIi5waWNrcHciKS5hZnRlcignPGRsIGNsYXNzPSJjbGVhcmZpeCI+PGR0PuaPkOWPlueggeWIhuS6q+iuvue9rjxzcGFuIHN0eWxlPSJmbG9hdDpyaWdodCI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkIGlkPSJuZC1zaGFyZS1jaGVjayIgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Ij4gPGEgY2xhc3M9Im5kLW9wZW4tcGFnZS1vcHRpb24iIGhyZWY9ImphdmFzY3JpcHQ6OyIgdGl0bGU9IueCueWHu+afpeeci+abtOWkmuiEmuacrOmFjee9riI+5YWx5Lqr5o+Q5Y+W56CBPC9hPjwvc3Bhbj48L2R0PjwvZGw+Jyk7CiAgICAgICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbigpIHx8ICQoIiNuZC1zaGFyZS1jaGVjayIpLnJlbW92ZUF0dHIoImNoZWNrZWQiKTsKCiAgICAgICAgICAgIC8vIOW8gOWFsy3kuovku7YKICAgICAgICAgICAgJCgiI25kLXNoYXJlLWNoZWNrIikub24oImNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfc2hhcmVfc3RhdHVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRPcHRpb25VbkFjdGl2ZShvcHRpb24uY29uc3RhbnQuYmFpZHVfc2hhcmVfc3RhdHVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDmiZPlvIDphY3nva7pobUKICAgICAgICAgICAgJCgiLm5kLW9wZW4tcGFnZS1vcHRpb24iKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBydW50aW1lLm9wZW5PcHRpb25zUGFnZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSBvcHRpb25zLnVybDsKICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0VXJsLmluZGV4T2YoIi9zaGFyZS92ZXJpZnkiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gb3B0aW9ucy5kYXRhLm1hdGNoKC9wd2Q9KFthLXowLTldKykvaSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBub3QgbWF0Y2giKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIOaLkue7nSrlj7cKICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnZlcmlmeV9wYWdlLmJhY2t1cFB3ZCkgewogICAgICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2UuYmFja3VwUHdkKG1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChvYmoudmVyaWZ5X3BhZ2UucmVzdG9yZVB3ZCwgNTAwKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHhoci5yZXNwb25zZUpTT047CiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJybm8gPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IG1hdGNoWzFdOwogICAgICAgICAgICAgICAgICAgIGlmIChzaGFyZVB3ZCA9PSBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghb2JqLmlzUHdkU2hhcmVPcGVuKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgY2xvc2VkIik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlTGluayA9IHJvdXRlci5nZXRVcmwoKTsKICAgICAgICAgICAgICAgICAgICBzaGFyZUxvZy5hZGRTaGFyZUxvZyhzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBjb25zdGFudC5zb3VyY2UuYmFpZHUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVnaXN0ZXJDdXN0b21TaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8g5Yqf6IO95byA5YWzCiAgICAgICAgICAgIGlmICghb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5iYWlkdV9jdXN0b21fcGFzc3dvcmQpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG9iai5sb2FkUGx1Z2luKCLnvZHnm5jliIbkuqsiLCAiY29tLmJhaWR1LnBhbiIpOwoKICAgICAgICAgICAgb2JqLm9uTW9kdWxlUmVhZHkoImZ1bmN0aW9uLXdpZGdldC0xOnNoYXJlL3V0aWwvc2hhcmVEaWFsb2cuanMiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyDliIbkuqvkuovku7YKICAgICAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6c2hhcmUvdXRpbC9zaGFyZURpYWxvZy5qcyIsIGZ1bmN0aW9uIChzaGFyZURpYWxvZykgewogICAgICAgICAgICAgICAgICAgIHNoYXJlRGlhbG9nLnByb3RvdHlwZS5vblZpc2liaWxpdHlDaGFuZ2VPcmlnaW4gPSBzaGFyZURpYWxvZy5wcm90b3R5cGUub25WaXNpYmlsaXR5Q2hhbmdlOwogICAgICAgICAgICAgICAgICAgIHNoYXJlRGlhbG9nLnByb3RvdHlwZS5vblZpc2liaWxpdHlDaGFuZ2UgPSBmdW5jdGlvbiAoc3RhdHVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCIubmQtaW5wdXQtc2hhcmUtcHdkIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IGNvbmZpZy5nZXRDb25maWcoInNoYXJlX3B3ZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPHRyPjx0ZCBjbGFzcz0iZmlyc3QtY2hpbGQiPjxsYWJlbD7mj5Dlj5bnoIE8L2xhYmVsPjwvdGQ+PHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0ibmQtaW5wdXQtc2hhcmUtcHdkIiB2YWx1ZT0iJyArIChzaGFyZVB3ZCA/IHNoYXJlUHdkIDogIiIpICsgJyIgcGxhY2Vob2xkZXI9IuS4uuepuuWImemaj+acuuWbm+S9jSIgc3R5bGU9InBhZGRpbmc6IDZweDsgd2lkdGg6IDEwMHB4O2JvcmRlcjogMXB4IHNvbGlkICNlOWU5ZTk7Ij48L3RkPjwvdHI+JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIiNzaGFyZSAuZGlhbG9nLWJvZHkgdGFibGUiKS5hcHBlbmQoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblZpc2liaWxpdHlDaGFuZ2VPcmlnaW4oc3RhdHVzKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8g55Sf5oiQ5o+Q5Y+W56CBCiAgICAgICAgICAgICAgICBvYmouYXN5bmMoImZ1bmN0aW9uLXdpZGdldC0xOnNoYXJlL3V0aWwvc2hhcmVGcmllbmQvY3JlYXRlTGlua1NoYXJlLmpzIiwgZnVuY3Rpb24gKHNoYXJlTGluaykgewogICAgICAgICAgICAgICAgICAgIHNoYXJlTGluay5wcm90b3R5cGUubWFrZVByaXZhdGVQYXNzd29yZE9yaWdpbiA9IHNoYXJlTGluay5wcm90b3R5cGUubWFrZVByaXZhdGVQYXNzd29yZDsKICAgICAgICAgICAgICAgICAgICBzaGFyZUxpbmsucHJvdG90eXBlLm1ha2VQcml2YXRlUGFzc3dvcmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IGNvbmZpZy5nZXRDb25maWcoInNoYXJlX3B3ZCIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hhcmVQd2QgPyBzaGFyZVB3ZCA6IHRoaXMubWFrZVByaXZhdGVQYXNzd29yZE9yaWdpbigpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyDmj5Dlj5bnoIHmm7TmlLnkuovku7YKICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjaGFuZ2UiLCAiLm5kLWlucHV0LXNoYXJlLXB3ZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAhdmFsdWUubWF0Y2goL15bMC05YS16XXs0fSQvaSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXBFcnJvcigi5o+Q5Y+W56CB5Y+q6IO95piv5Zub5L2N5pWw5a2X5oiW5a2X5q+NIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcoInNoYXJlX3B3ZCIsIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubG9hZFBsdWdpbiA9IGZ1bmN0aW9uIChuYW1lLCBncm91cCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFyIHBsdWdpbiA9IG9iai5yZXF1aXJlKCJzeXN0ZW0tY29yZTpwbHVnaW5IdWIvZGF0YS9SZWdpc3RyeS5qcyIpLmdldFBsdWdpbkJ5TmFtZUFuZEdyb3VwKG5hbWUsIGdyb3VwKTsKICAgICAgICAgICAgICAgIG9iai5yZXF1aXJlKCJzeXN0ZW0tY29yZTpwbHVnaW5IdWIvaW52b2tlci9sb2FkUGx1Z2luQXNzZXRzLmpzIikocGx1Z2luKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IH0KICAgICAgICB9OwoKICAgICAgICBvYmoub25Nb2R1bGVSZWFkeSA9IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb2JqLnJlcXVpcmUobmFtZSk7CiAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG9iai5vbk1vZHVsZVJlYWR5KG5hbWUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucmVtb3ZlVmlkZW9MaW1pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBvYmouZ2V0U3lzdGVtQ29udGV4dCgpLm1lc3NhZ2U7CiAgICAgICAgICAgIGlmIChtZXNzYWdlKSB7CiAgICAgICAgICAgICAgICBtZXNzYWdlLmNhbGxTeXN0ZW0oInNoYXJlLXZpZGVvLWFmdGVyLXRyYW5zZmVyIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBsb2dnZXIud2Fybigid2FpdCByZW1vdmVWaWRlb0xpbWl0Li4uIik7CiAgICAgICAgICAgICAgICBvYmouc2V0VGltZW91dChvYmoucmVtb3ZlVmlkZW9MaW1pdCwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5wcmV0dHlTaW5nbGVTaGFyZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICghb2JqLmlzU2hhcmVQYWdlTXVsdGkoKSkgewogICAgICAgICAgICAgICAgJCgiI2xheW91dE1haW4iKS5jc3MoewogICAgICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJhdXRvIiwKICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIjogIjExODBweCIsCiAgICAgICAgICAgICAgICAgICAgIm1hcmdpbiI6ICI4OHB4IDMwcHgiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5zaG93U2hhcmVPcmlnaW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGFwaS5xdWVyeVNoYXJlT3JpZ2luKGNvbnN0YW50LnNvdXJjZS5iYWlkdSwgb2JqLmdldFNoYXJlSWQoKSwgcm91dGVyLmdldFVybCgpLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGlzdCAmJiBkYXRhLmxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDEwcHggNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Y2ZjZmNjsgbGluZS1oZWlnaHQ6IDMwcHg7Ij4nOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRhdGEubGlzdFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8cD7liIbkuqvmnaXmupDvvJo8YSB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iJyArIGl0ZW0udXJsICsgJyI+JyArIGl0ZW0udGl0bGUgKyAnPC9hPiBbPGEgY2xhc3M9InNob3ctb3JpZ2luLWRpYWxvZyIgaHJlZj0iamF2YXNjcmlwdDo7IiBzdHlsZT0iY29sb3I6I2ZmMDAwMDsiPiDmn6XnnIvmm7TlpJogPC9hPl08L3A+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwPuWIhuS6q+adpea6kO+8mjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSInICsgaXRlbS51cmwgKyAnIj4nICsgaXRlbS50aXRsZSArICc8L2E+PC9wPic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiLm1vZHVsZS1zaGFyZS1oZWFkZXIiKS5hZnRlcihodG1sKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIuc2hvdy1vcmlnaW4tZGlhbG9nIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gIuWIhuS6q+adpea6kCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9keSA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiAyMHB4IDIwcHg7bWluLWhlaWdodDogMTIwcHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyI+JzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8cD4nICsgKCsraW5kZXgpICsgJ++8mjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSInICsgaXRlbS51cmwgKyAnIj4nICsgaXRlbS50aXRsZSArICc8L2E+PC9wPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvb3RlciA9IG9iai5yZW5kZXJGb290ZXJBcHBJZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JqLnNob3dUaXBFcnJvcigi5pqC5pyq5p+l6K+i5Yiw5YiG5Lqr55qE5p2l5rqQIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdEJ1dHRvblNoYXJlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoJCgiLngtYnV0dG9uLWJveCIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGEgY2xhc3M9ImctYnV0dG9uIG5kLWJ1dHRvbi1idWlsZCI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kaXNrIiB0aXRsZT0i5LiL6L29Ij48L2VtPjxzcGFuIGNsYXNzPSJ0ZXh0Ij7nlJ/miJDpk77mjqU8L3NwYW4+PC9zcGFuPjwvYT4nOwogICAgICAgICAgICAgICAgJCgiLngtYnV0dG9uLWJveCIpLmFwcGVuZChodG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJ3YWl0IGluaXRCdXR0b25TaGFyZS4uLiIpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChvYmouaW5pdEJ1dHRvblNoYXJlLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRCdXR0b25Ib21lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbGlzdFRvb2xzID0gb2JqLmdldFN5c3RlbUNvbnRleHQoKS5Ccm9rZXIuZ2V0QnV0dG9uQnJva2VyKCJsaXN0VG9vbHMiKTsKICAgICAgICAgICAgaWYgKGxpc3RUb29scyAmJiBsaXN0VG9vbHMuJGJveCkgewogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGEgY2xhc3M9ImctYnV0dG9uIG5kLWJ1dHRvbi1idWlsZCI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kaXNrIiB0aXRsZT0i5LiL6L29Ij48L2VtPjxzcGFuIGNsYXNzPSJ0ZXh0Ij7nlJ/miJDpk77mjqU8L3NwYW4+PC9zcGFuPjwvYT4nOwogICAgICAgICAgICAgICAgJChsaXN0VG9vbHMuJGJveCkucHJlcGVuZChodG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJ3YWl0IGluaXRCdXR0b25Ib21lLi4uIik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9iai5pbml0QnV0dG9uSG9tZSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0QnV0dG9uVGltZUxpbmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICgkKCIubW9kdWxlLW9wZXJhdGVCdG4gLmdyb3VwLWJ1dHRvbiIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPHNwYW4gY2xhc3M9ImJ1dHRvbiI+PGEgY2xhc3M9Imctdi1idXR0b24gZy12LWJ1dHRvbi1taWRkbGUgbmQtYnV0dG9uLWJ1aWxkIj48c3BhbiBjbGFzcz0iZy12LWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tZGlzayI+PC9lbT48c3BhbiBjbGFzcz0idGV4dCI+55Sf5oiQ6ZO+5o6lPC9zcGFuPjwvc3Bhbj48L2E+PC9zcGFuPic7CiAgICAgICAgICAgICAgICAkKCIubW9kdWxlLW9wZXJhdGVCdG4gLmdyb3VwLWJ1dHRvbiIpLnByZXBlbmQoaHRtbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBsb2dnZXIud2Fybigid2FpdCBpbml0QnV0dG9uVGltZUxpbmUuLi4iKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQob2JqLmluaXRCdXR0b25UaW1lTGluZSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0QnV0dG9uRXZlbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC8vIOeUn+aIkOmTvuaOpQogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLWJ1dHRvbi1idWlsZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgICAgIGlmICh5dW5EYXRhLk1ZVUsgfHwgb2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVTdGF0ID0gb2JqLmdldEZpbGVMaXN0U3RhdChmaWxlTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoID4gMSAmJiBmaWxlU3RhdC5maWxlX251bSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZFNlbGVjdChmaWxlTGlzdCwgZmlsZVN0YXQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbGVTdGF0LmZpbGVfbnVtID09IDEgJiYgIW9iai5pc0hvbWVQYWdlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRTaW5nbGUoZmlsZUxpc3QsIGZpbGVTdGF0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYWNrID0gZmlsZVN0YXQuZmlsZV9udW0gPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZShmaWxlTGlzdCwgcGFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb1NoYXJlT2ZmaWNhbChmaWxlTGlzdCwgcGFjayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwRXJyb3IoIuivt+iHs+WwkemAieaLqeS4gOS4quaWh+S7tuaIluaWh+S7tuWkuSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93TG9naW4oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDljovnvKnljIUKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5uZC1idXR0b24tcGFjayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CiAgICAgICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZShmaWxlTGlzdCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb1NoYXJlT2ZmaWNhbChmaWxlTGlzdCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5aSa5paH5Lu2CiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIubmQtYnV0dG9uLW11bHRpIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QoKTsKCiAgICAgICAgICAgICAgICAvLyDov4fmu6Tmlofku7blpLkKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gb2JqLmZpbHRlckZpbGVMaXN0RGlyKGZpbGVMaXN0KTsKCiAgICAgICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvSG9tZShmaWxlTGlzdCwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9TaGFyZU9mZmljYWwoZmlsZUxpc3QsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyDovazlrZjlpJrmlofku7YKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5uZC1idXR0b24tZGlzayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CgogICAgICAgICAgICAgICAgLy8g6L+H5ruk5paH5Lu25aS5CiAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG9iai5maWx0ZXJGaWxlTGlzdERpcihmaWxlTGlzdCk7CgogICAgICAgICAgICAgICAgaWYgKG9iai5pc0hvbWVQYWdlKCkpIHsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb0hvbWUoZmlsZUxpc3QsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRJbmZvU2hhcmVUcmFuc2ZlcihmaWxlTGlzdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5bqU55SoSUQKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5uZC1jaGFuZ2UtYXBwLWlkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgb2JqLnNob3dBcHBJZENoYW5nZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJChkb2N1bWVudCkub24oImNoYW5nZSIsICIubmQtaW5wdXQtYXBwLWlkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgb2JqLnNldEFwcElkKHRoaXMudmFsdWUpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOaJk+W8gOmFjee9rumhtQogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLW9wZW4tcGFnZS1vcHRpb24iLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBydW50aW1lLm9wZW5PcHRpb25zUGFnZSgpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOaJk+W8gOS4tOaXtumhtemdogogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLm5kLW9wZW4tcGFnZS10ZW1wIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcm91dGVyLm9wZW5UYWIoImh0dHBzOi8vcGFuLmJhaWR1LmNvbS9kaXNrL2hvbWUjL2FsbD92bW9kZT1saXN0JnBhdGg9IiArIGVuY29kZVVSSUNvbXBvbmVudChvYmouZ2V0VGVtcFBhdGgoKSksIHRydWUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0xvZ2luID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkoIltub2RlLXR5cGU9J2hlYWRlci1sb2dpbi1idG4nXSIpLmNsaWNrKCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9TaGFyZVRyYW5zZmVyID0gZnVuY3Rpb24gKGZpbGVMaXN0KSB7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGZpbGVMaXN0KTsKICAgICAgICAgICAgb2JqLmFwcGx5VHJhbnNmZXJGaWxlKGZpbGVMaXN0LCBvYmouZ2V0VGVtcFBhdGgoKSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXh0cmEgJiYgcmVzcG9uc2UuZXh0cmEubGlzdCkgewogICAgICAgICAgICAgICAgICAgIHZhciBsaXN0TWFwID0ge307CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZXh0cmEubGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RNYXBbaXRlbS5mcm9tX2ZzX2lkXSA9IGl0ZW07CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHZhciBkb3duTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RNYXAuaGFzT3duUHJvcGVydHkoaXRlbS5mc19pZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZGxpbmsgPSBvYmouYnVpbGREb3dubG9hZFVybChsaXN0TWFwW2l0ZW0uZnNfaWRdLnRvLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3duTGlzdC5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtGaWxlKGRvd25MaXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEb3dubG9hZEluZm9TaGFyZU9mZmljYWwgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2spIHsKICAgICAgICAgICAgb2JqLmdldERvd25sb2FkU2hhcmUoZmlsZUxpc3QsIHBhY2ssIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgb2JqLmhpZGVUaXAoKTsKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UubGlzdCAmJiByZXNwb25zZS5saXN0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIC8vIOaWh+S7tgogICAgICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRMaW5rRmlsZShyZXNwb25zZS5saXN0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLmRsaW5rKSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5Y6L57yp5YyFCiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtQYWNrKGZpbGVMaXN0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRsaW5rOiByZXNwb25zZS5kbGluawogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuWCiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEaWFsb2dVbktub3duUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkSW5mb0hvbWUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2spIHsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oZmlsZUxpc3QpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb2JqLmdldERvd25sb2FkSG9tZShmaWxlTGlzdCwgcGFjaywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmhpZGVUaXAoKTsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhyZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChwYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kbGluayAmJiB0eXBlb2YgcmVzcG9uc2UuZGxpbmsgPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWOi+e8qeWMhQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEb3dubG9hZExpbmtQYWNrKGZpbGVMaXN0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGxpbms6IHJlc3BvbnNlLmRsaW5rCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7lgogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dEaWFsb2dVbktub3duUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGxpbmsgaW5zdGFuY2VvZiBBcnJheSAmJiByZXNwb25zZS5kbGluay5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkbGlua01hcHBpbmcgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRsaW5rLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbGlua01hcHBpbmdbaXRlbS5mc19pZF0gPSBpdGVtLmRsaW5rOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5kbGluayA9IGRsaW5rTWFwcGluZ1tpdGVtLmZzX2lkXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmRsaW5rQXBpID0gb2JqLmJ1aWxkRG93bmxvYWRVcmwoaXRlbS5wYXRoLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmRsaW5rID0gb2JqLmJ1aWxkRG93bmxvYWRVcmwoaXRlbS5wYXRoLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua0ZpbGUoZmlsZUxpc3QpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLmRsaW5rID0gb2JqLmJ1aWxkRG93bmxvYWRVcmwoaXRlbS5wYXRoLCBpdGVtLnNlcnZlcl9maWxlbmFtZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9iai5zaG93RG93bmxvYWRMaW5rRmlsZShmaWxlTGlzdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua0ZpbGUgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuaWh+S7tuS4i+i9vSI7CiAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHggMjBweDttaW4taGVpZ2h0OiAxMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87ICI+JzsKCiAgICAgICAgICAgIHZhciByb3dTdHlsZSA9ICJkaXNwbGF5OmJsb2NrOyBvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiOwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTBweDsiPic7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2PicgKyAoaW5kZXggKyAxKSArICfvvJonICsgaXRlbS5zZXJ2ZXJfZmlsZW5hbWUgKyAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmRsaW5rQXBpKSB7CiAgICAgICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdj48YSBocmVmPSInICsgaXRlbS5kbGluayArICcmZmlsZW5hbWU9JyArIGVuY29kZVVSSUNvbXBvbmVudChpdGVtLnNlcnZlcl9maWxlbmFtZSkgKyAnIiB0aXRsZT0iJyArIGl0ZW0uZGxpbmsgKyAnIiBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+5a6Y5pa577yaJyArIGl0ZW0uZGxpbmsgKyAnPC9hPjwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdj48YSBocmVmPSInICsgaXRlbS5kbGlua0FwaSArICcmZmlsZW5hbWU9JyArIGVuY29kZVVSSUNvbXBvbmVudChpdGVtLnNlcnZlcl9maWxlbmFtZSkgKyAnIiB0aXRsZT0iJyArIGl0ZW0uZGxpbmtBcGkgKyAnIiBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+55u06ZO+77yaJyArIGl0ZW0uZGxpbmtBcGkgKyAnPC9hPjwvZGl2Pic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8ZGl2PjxhIGhyZWY9IicgKyBpdGVtLmRsaW5rICsgJyZmaWxlbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGl0ZW0uc2VydmVyX2ZpbGVuYW1lKSArICciIHRpdGxlPSInICsgaXRlbS5kbGluayArICciIHN0eWxlPSInICsgcm93U3R5bGUgKyAnIj4nICsgaXRlbS5kbGluayArICc8L2E+PC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgYm9keSArPSAnPC9kaXY+JzsKICAgICAgICAgICAgdmFyIGZvb3RlciA9IG9iai5yZW5kZXJGb290ZXJBcHBJZCgpOwogICAgICAgICAgICBvYmouc2hvd0RpYWxvZyh0aXRsZSwgYm9keSwgZm9vdGVyKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkTGlua1BhY2sgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIGRhdGEpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuaWh+S7tuS4i+i9vSI7CiAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHggMjBweDttaW4taGVpZ2h0OiAxMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87ICI+JzsKCiAgICAgICAgICAgIHZhciBwYWNrTmFtZSA9IG9iai5nZXREb3dubG9hZFBhY2tOYW1lKGZpbGVMaXN0KTsKICAgICAgICAgICAgYm9keSArPSAnPGRpdj4nICsgcGFja05hbWUgKyAnPC9kaXY+PGRpdj48YSBocmVmPSInICsgZGF0YS5kbGluayArICcmemlwbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhY2tOYW1lKSArICciIHRpdGxlPSInICsgZGF0YS5kbGluayArICciIHN0eWxlPSJkaXNwbGF5OmJsb2NrOyBvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiPicgKyBkYXRhLmRsaW5rICsgJzwvYT48L2Rpdj4nOwoKICAgICAgICAgICAgYm9keSArPSAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTVweDsiPuaJk+WMheeahOaWh+S7ti/mlofku7blpLnliJfooag8L2Rpdj4nOwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGRpdiB0aXRsZT0iJyArIGl0ZW0ucGF0aCArICciIHN0eWxlPSJjb2xvcjogJyArIChpdGVtLmlzZGlyID8gImJsdWUiIDogImluaGVyaXQiKSArICc7Ij5bJyArIChpbmRleCArIDEpICsgJ10gJyArIGl0ZW0uc2VydmVyX2ZpbGVuYW1lICsgJzwvZGl2Pic7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgYm9keSArPSAnPC9kaXY+JzsKICAgICAgICAgICAgdmFyIGZvb3RlciA9IG9iai5yZW5kZXJGb290ZXJBcHBJZCgpOwogICAgICAgICAgICBvYmouc2hvd0RpYWxvZyh0aXRsZSwgYm9keSwgZm9vdGVyKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RG93bmxvYWRQYWNrTmFtZSA9IGZ1bmN0aW9uIChmaWxlTGlzdCkgewogICAgICAgICAgICByZXR1cm4gZmlsZUxpc3RbMF0uc2VydmVyX2ZpbGVuYW1lICsgIiDnrYkiICsgZmlsZUxpc3QubGVuZ3RoICsgIuS4quaWh+S7ti56aXAiOwogICAgICAgIH07CgogICAgICAgIG9iai5idWlsZERvd25sb2FkVXJsID0gZnVuY3Rpb24gKHBhdGgsIG5hbWUpIHsKICAgICAgICAgICAgcmV0dXJuICJodHRwczovL3Bjcy5iYWlkdS5jb20vcmVzdC8yLjAvcGNzL2ZpbGU/bWV0aG9kPWRvd25sb2FkJmFwcF9pZD0iICsgb2JqLmdldEFwcElkKCkgKyAiJmZpbGVuYW1lPSIgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAiJnBhdGg9IiArIGVuY29kZVVSSUNvbXBvbmVudChwYXRoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0Rvd25sb2FkU2luZ2xlID0gZnVuY3Rpb24gKGZpbGVMaXN0LCBmaWxlU3RhdCkgewogICAgICAgICAgICB2YXIgdGl0bGUgPSAi6ZO+5o6l57G75Z6LIjsKICAgICAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogNDBweCAyMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsiPic7CgogICAgICAgICAgICBib2R5ICs9ICc8ZGl2IGNsYXNzPSJub3JtYWxCdG5Cb3ggZy1jZW50ZXIiPic7CiAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1tdWx0aSIgdGl0bGU9Iuiwg+eUqOWumOaWueaOpeWPo+eUn+aIkOmTvuaOpSI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1kb3dubG9hZCI+PC9lbT4g5a6Y5pa56ZO+5o6lPC9zcGFuPjwvYT4nOwogICAgICAgICAgICBib2R5ICs9ICc8YSBjbGFzcz0iZy1idXR0b24gZy1idXR0b24tbGFyZ2UgZy1idXR0b24tZ3JheS1sYXJnZSBuZC1idXR0b24tZGlzayIgc3R5bGU9Im1hcmdpbi1sZWZ0OjUwcHg7IiB0aXRsZT0i6L2s5a2Y5paH5Lu254S25ZCO55Sf5oiQ5paH5Lu255u06ZO+Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLXNhdmUtZGlzayI+PC9lbT4g6L2s5a2Y55u06ZO+PC9zcGFuPjwvYT4nOwogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwoKICAgICAgICAgICAgaWYgKGZpbGVTdGF0LmRpcl9udW0pIHsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7IHBhZGRpbmctdG9wOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAtMjBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEMERGRTc7Ij48cCBjbGFzcz0iZy1jZW50ZXIiPumAieaLqSBb5aSa5paH5Lu2XSDkvJrov4fmu6TlvZPliY3pgInkuK3nmoQgPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQiPicgKyBmaWxlU3RhdC5kaXJfbnVtICsgJzwvc3Bhbj4g5Liq5paH5Lu25aS5PC9wPic7CgogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gMTsKICAgICAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc2RpcikgewogICAgICAgICAgICAgICAgICAgICAgICBib2R5ICs9ICc8cCB0aXRsZT0iJyArIGl0ZW0ucGF0aCArICciIHN0eWxlPSJjb2xvcjogYmx1ZTsiPlsnICsgaW5kZXggKyAnXSAnICsgaXRlbS5zZXJ2ZXJfZmlsZW5hbWUgKyAnPC9wPic7CiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB2YXIgZm9vdGVyID0gb2JqLnJlbmRlckZvb3RlckFwcElkKCk7CiAgICAgICAgICAgIG9iai5zaG93RGlhbG9nKHRpdGxlLCBib2R5LCBmb290ZXIpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWRTZWxlY3QgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIGZpbGVTdGF0KSB7CiAgICAgICAgICAgIHZhciB0aXRsZSA9ICLpk77mjqXnsbvlnosiOwogICAgICAgICAgICB2YXIgYm9keSA9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiA0MHB4IDIwcHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyI+JzsKCiAgICAgICAgICAgIGJvZHkgKz0gJzxkaXYgY2xhc3M9Im5vcm1hbEJ0bkJveCBnLWNlbnRlciI+JzsKICAgICAgICAgICAgaWYgKG9iai5pc0hvbWVQYWdlKCkpIHsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1kaXNrIiB0aXRsZT0i5ZCI5bm25a6Y5pa56ZO+5o6l5ZKM5paH5Lu255u06ZO+Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLXNhdmUtZGlzayI+PC9lbT4g5aSa5paH5Lu2PC9zcGFuPjwvYT4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgYm9keSArPSAnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWxhcmdlIGctYnV0dG9uLWdyYXktbGFyZ2UgbmQtYnV0dG9uLW11bHRpIj48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiIHRpdGxlPSLosIPnlKjlrpjmlrnmjqXlj6PnlJ/miJDmlofku7bpk77mjqUiPjxlbSBjbGFzcz0iaWNvbiBpY29uLWRvd25sb2FkIj48L2VtPiDlrpjmlrnlpJrmlofku7Y8L3NwYW4+PC9hPic7CiAgICAgICAgICAgICAgICBib2R5ICs9ICc8YSBjbGFzcz0iZy1idXR0b24gZy1idXR0b24tbGFyZ2UgZy1idXR0b24tZ3JheS1sYXJnZSBuZC1idXR0b24tZGlzayIgc3R5bGU9Im1hcmdpbi1sZWZ0OjUwcHg7IiB0aXRsZT0i6L2s5a2Y5paH5Lu254S25ZCO55Sf5oiQ5paH5Lu255u06ZO+Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxlbSBjbGFzcz0iaWNvbiBpY29uLXNhdmUtZGlzayI+PC9lbT4g6L2s5a2Y5aSa5paH5Lu2PC9zcGFuPjwvYT4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkgKz0gJzxhIGNsYXNzPSJnLWJ1dHRvbiBnLWJ1dHRvbi1sYXJnZSBnLWJ1dHRvbi1ncmF5LWxhcmdlIG5kLWJ1dHRvbi1wYWNrIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NTBweDsiIHRpdGxlPSLosIPnlKjlrpjmlrnmjqXlj6PnlJ/miJDljovnvKnljIXpk77mjqUiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PGVtIGNsYXNzPSJpY29uIGljb24tcG9seSI+PC9lbT4g5Y6L57yp5YyFPC9zcGFuPjwvYT4nOwogICAgICAgICAgICBib2R5ICs9ICc8L2Rpdj4nOwoKICAgICAgICAgICAgaWYgKGZpbGVTdGF0LmRpcl9udW0pIHsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDQwcHg7IHBhZGRpbmctdG9wOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAtMjBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEMERGRTc7Ij48cCBjbGFzcz0iZy1jZW50ZXIiPumAieaLqSBb5aSa5paH5Lu2XSDkvJrov4fmu6TlvZPliY3pgInkuK3nmoQgPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQiPicgKyBmaWxlU3RhdC5kaXJfbnVtICsgJzwvc3Bhbj4g5Liq5paH5Lu25aS5PC9wPic7CiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAxOwogICAgICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzZGlyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgKz0gJzxwIHRpdGxlPSInICsgaXRlbS5wYXRoICsgJyIgc3R5bGU9ImNvbG9yOiBibHVlOyI+WycgKyBpbmRleCArICddICcgKyBpdGVtLnNlcnZlcl9maWxlbmFtZSArICc8L3A+JzsKICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvZHkgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIHZhciBmb290ZXIgPSBvYmoucmVuZGVyRm9vdGVyQXBwSWQoKTsKICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dBcHBJZENoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuW6lOeUqElEIjsKICAgICAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogNjBweCAyMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsiPjxkaXYgY2xhc3M9ImctY2VudGVyIiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMTBweDsiPuW9k+WJjeW6lOeUqElE77yaPGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJuZC1pbnB1dC1hcHAtaWQiIHN0eWxlPSJib3JkZXI6IDFweCBzb2xpZCAjZjJmMmYyOyBwYWRkaW5nOiA0cHggNXB4OyIgdmFsdWU9IicgKyBvYmouZ2V0QXBwSWQoKSArICciPjwvZGl2PjxkaXYgY2xhc3M9ImctY2VudGVyIj48cD7nlKjkuo7mnoTpgKDkuKrkurrnvZHnm5jmlofku7bnmoTkuIvovb3nm7Tpk77vvIzmm7TlpJrlupTnlKhJROivt+afpeecizxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwOi8vZ28ubmV3ZGF5Lm1lL3MvcGFuLXNjcmlwdCI+IOiEmuacrOS4u+mhtSA8L2E+PC9wPjwvZGl2PjwvZGl2Pic7CiAgICAgICAgICAgIHZhciBmb290ZXIgPSAnJzsKICAgICAgICAgICAgb2JqLnNob3dEaWFsb2codGl0bGUsIGJvZHksIGZvb3Rlcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dEaWFsb2dVbktub3duUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgdmFyIHRpdGxlID0gIuacquefpee7k+aenCI7CiAgICAgICAgICAgIHZhciBib2R5ID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHggMjBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij48cHJlIHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IHdvcmQtd3JhcDogYnJlYWstd29yZDsgd29yZC1icmVhazogYnJlYWstYWxsOyI+JyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLCBudWxsLCA0KSArICc8L3ByZT48L2Rpdj4nOwogICAgICAgICAgICB2YXIgZm9vdGVyID0gb2JqLnJlbmRlckZvb3RlckFwcElkKCk7CiAgICAgICAgICAgIG9iai5zaG93RGlhbG9nKHRpdGxlLCBib2R5LCBmb290ZXIpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZW5kZXJGb290ZXJBcHBJZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICc8cCBzdHlsZT0icGFkZGluZy10b3A6IDEwcHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjRDBERkU3OyI+5bqU55SoSUTvvJonICsgb2JqLmdldEFwcElkKCkgKyAnIDxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgY2xhc3M9Im5kLWNoYW5nZS1hcHAtaWQiPuS/ruaUuTwvYT7vvIzlhbbku5bpobXpnaLvvJogPGEgY2xhc3M9Im5kLW9wZW4tcGFnZS1vcHRpb24iIGhyZWY9ImphdmFzY3JpcHQ6OyI+6YWN572u6aG16Z2iPC9hPiDjgIE8YSBjbGFzcz0ibmQtb3Blbi1wYWdlLXRlbXAiIGhyZWY9ImphdmFzY3JpcHQ6OyI+5Li05pe25paH5Lu2PC9hPjwvcD4nOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RGlhbG9nID0gZnVuY3Rpb24gKHRpdGxlLCBib2R5LCBmb290ZXIpIHsKICAgICAgICAgICAgdmFyIGRpYWxvZyA9IG9iai5yZXF1aXJlKCJzeXN0ZW0tY29yZTpzeXN0ZW0vdWlTZXJ2aWNlL2RpYWxvZy9kaWFsb2cuanMiKS52ZXJpZnkoewogICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAgICAgICAgaW1nOiAiaW1nIiwKICAgICAgICAgICAgICAgIHZjb2RlOiAidmNvZGUiCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5YaF5a65CiAgICAgICAgICAgICQoZGlhbG9nLiRkaWFsb2cpLmZpbmQoIi5kaWFsb2ctYm9keSIpLnNhZmVIdG1sKGJvZHkpOwoKICAgICAgICAgICAgLy8g5bqV6YOoCiAgICAgICAgICAgICQoZGlhbG9nLiRkaWFsb2cpLmZpbmQoIi5kaWFsb2ctZm9vdGVyIikuc2FmZUh0bWwoZm9vdGVyKTsKCiAgICAgICAgICAgIGRpYWxvZy5zaG93KCk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXBTdWNjZXNzID0gZnVuY3Rpb24gKG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSkgewogICAgICAgICAgICBvYmouc2hvd1RpcCgic3VjY2VzcyIsIG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXBFcnJvciA9IGZ1bmN0aW9uIChtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpIHsKICAgICAgICAgICAgb2JqLnNob3dUaXAoImZhaWx1cmUiLCBtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwTG9hZGluZyA9IGZ1bmN0aW9uIChtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpIHsKICAgICAgICAgICAgb2JqLnNob3dUaXAoImxvYWRpbmciLCBtc2csIGhhc0Nsb3NlLCBhdXRvQ2xvc2UpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwID0gZnVuY3Rpb24gKG1vZGUsIG1zZywgaGFzQ2xvc2UsIGF1dG9DbG9zZSkgewogICAgICAgICAgICB2YXIgb3B0aW9uID0gewogICAgICAgICAgICAgICAgbW9kZTogbW9kZSwKICAgICAgICAgICAgICAgIG1zZzogbXNnCiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyDlhbPpl63mjInpkq4KICAgICAgICAgICAgaWYgKHR5cGVvZiBoYXNDbG9zZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgb3B0aW9uLmhhc0Nsb3NlID0gaGFzQ2xvc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOiHquWKqOWFs+mXrQogICAgICAgICAgICBpZiAodHlwZW9mIGF1dG9DbG9zZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgICAgb3B0aW9uLmF1dG9DbG9zZSA9IGF1dG9DbG9zZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOnN5c3RlbS91aVNlcnZpY2UvdGlwL3RpcC5qcyIpLnNob3cob3B0aW9uKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaGlkZVRpcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOnN5c3RlbS91aVNlcnZpY2UvdGlwL3RpcC5qcyIpLmhpZGUoewogICAgICAgICAgICAgICAgaGlkZVRpcHNBbmltYXRpb25GbGFnOiAxCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5pc0hvbWVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIi5iYWlkdS5jb20vZGlzayIpID4gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaXNUaW1lbGluZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiLmJhaWR1LmNvbS9kaXNrL3RpbWVsaW5lIikgPiAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pc1NoYXJlUGFnZU11bHRpID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgeXVuRGF0YSA9IG9iai5nZXRZdW5EYXRhKCk7CiAgICAgICAgICAgIGlmICh5dW5EYXRhLlNIQVJFUEFHRVRZUEUgPT0gInNpbmdsZV9maWxlX3BhZ2UiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAob2JqLmlzSG9tZVBhZ2UoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0SG9tZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0U2hhcmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0SG9tZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKG9iai5pc1RpbWVsaW5lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoInBhbi10aW1lbGluZTp3aWRnZXQvc3RvcmUvaW5kZXguanMiKS5nZXR0ZXJzLmdldENob29zZWRJdGVtQXJyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai5yZXF1aXJlKCdzeXN0ZW0tY29yZTpjb250ZXh0L2NvbnRleHQuanMnKS5pbnN0YW5jZUZvclN5c3RlbS5saXN0LmdldFNlbGVjdGVkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2VsZWN0ZWRGaWxlTGlzdFNoYXJlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoJ3N5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcycpLmluc3RhbmNlRm9yU3lzdGVtLmxpc3QuZ2V0U2VsZWN0ZWQoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RmlsZUxpc3RTdGF0ID0gZnVuY3Rpb24gKGZpbGVMaXN0KSB7CiAgICAgICAgICAgIHZhciBmaWxlU3RhdCA9IHsKICAgICAgICAgICAgICAgIGZpbGVfbnVtOiAwLAogICAgICAgICAgICAgICAgZGlyX251bTogMAogICAgICAgICAgICB9OwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc2RpciA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZVN0YXQuZmlsZV9udW0rKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbGVTdGF0LmRpcl9udW0rKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBmaWxlU3RhdDsKICAgICAgICB9OwoKICAgICAgICBvYmouZmlsdGVyRmlsZUxpc3REaXIgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgdmFyIGZpbGVMaXN0RmlsdGVyID0gW107CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzZGlyID09IDApIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdEZpbHRlci5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpbGVMaXN0RmlsdGVyOwogICAgICAgIH07CgogICAgICAgIG9iai5wYXJzZUZpZExpc3QgPSBmdW5jdGlvbiAoZmlsZUxpc3QpIHsKICAgICAgICAgICAgdmFyIGZpZExpc3QgPSBbXTsKICAgICAgICAgICAgZmlsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgZmlkTGlzdC5wdXNoKGl0ZW0uZnNfaWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZpZExpc3Q7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldERvd25sb2FkU2hhcmUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2ssIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9iai5zaG93VGlwTG9hZGluZygi55Sf5oiQ6ZO+5o6l5Lit77yM6K+356iN562JLi4uIik7CiAgICAgICAgICAgIG9iai5pbml0V2lkZ2V0Q29udGV4dCgiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvdXRpbC9jb250ZXh0LmpzIik7CiAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvc2VydmljZS9kbGlua1NlcnZpY2UuanMiLCBmdW5jdGlvbiAoZGwpIHsKICAgICAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIGxpc3Q6IGZpbGVMaXN0LAogICAgICAgICAgICAgICAgICAgIHNoYXJlX3VrOiB5dW5EYXRhLlNIQVJFX1VLLAogICAgICAgICAgICAgICAgICAgIHNoYXJlX2lkOiB5dW5EYXRhLlNIQVJFX0lELAogICAgICAgICAgICAgICAgICAgIHNpZ246IHl1bkRhdGEuU0lHTiwKICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHl1bkRhdGEuVElNRVNUQU1QLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhY2sgPyAiYmF0Y2giIDogIm5vbGltaXQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZGwuZ2V0RGxpbmtTaGFyZShkYXRhLCBjYWxsYmFjayk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXREb3dubG9hZEhvbWUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhY2ssIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIG9iai5zaG93VGlwTG9hZGluZygi55Sf5oiQ6ZO+5o6l5Lit77yM6K+356iN562JLi4uIik7CiAgICAgICAgICAgIG9iai5pbml0V2lkZ2V0Q29udGV4dCgiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvdXRpbC9jb250ZXh0LmpzIik7CiAgICAgICAgICAgIG9iai5hc3luYygiZnVuY3Rpb24td2lkZ2V0LTE6ZG93bmxvYWQvc2VydmljZS9kbGlua1NlcnZpY2UuanMiLCBmdW5jdGlvbiAoZGwpIHsKICAgICAgICAgICAgICAgIHZhciBmaWRMaXN0ID0gb2JqLnBhcnNlRmlkTGlzdChmaWxlTGlzdCk7CiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IHBhY2sgPyAiYmF0Y2giIDogIm5vbGltaXQiOwogICAgICAgICAgICAgICAgZGwuZ2V0RGxpbmtQYW4oSlNPTi5zdHJpbmdpZnkoZmlkTGlzdCksIHR5cGUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmFwcGx5VHJhbnNmZXJGaWxlID0gZnVuY3Rpb24gKGZpbGVMaXN0LCBwYXRoLCBjYWxsYmFjaykgewogICAgICAgICAgICBvYmoubGlzdERpcihwYXRoLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5lcnJubyA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnRyYW5zZmVyRmlsZShmaWxlTGlzdCwgcGF0aCwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBvYmouY3JlYXRlRGlyKHBhdGgsIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuZXJybm8gPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnRyYW5zZmVyRmlsZShmaWxlTGlzdCwgcmVzcG9uc2UucGF0aCwgY2FsbGJhY2spOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soIiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai50cmFuc2ZlckZpbGUgPSBmdW5jdGlvbiAoZmlsZUxpc3QsIHBhdGgsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciB5dW5EYXRhID0gb2JqLmdldFl1bkRhdGEoKTsKICAgICAgICAgICAgdmFyIGZpZExpc3QgPSBvYmoucGFyc2VGaWRMaXN0KGZpbGVMaXN0KTsKICAgICAgICAgICAgdmFyIHVybCA9ICIvc2hhcmUvdHJhbnNmZXI/b25kdXA9bmV3Y29weSZhc3luYz0xJnNoYXJlaWQ9IiArIHl1bkRhdGEuU0hBUkVfSUQgKyAiJmZyb209IiArIHl1bkRhdGEuU0hBUkVfVUs7CiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZnNpZGxpc3Q6ICJbIiArIGZpZExpc3Quam9pbigiLCIpICsgIl0iLAogICAgICAgICAgICAgICAgcGF0aDogcGF0aAogICAgICAgICAgICB9OwogICAgICAgICAgICBvYmouYWpheCh7CiAgICAgICAgICAgICAgICB0eXBlOiAicG9zdCIsCiAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICAgICAgdGltZW91dDogMWU1LAogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygiIik7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubGlzdERpciA9IGZ1bmN0aW9uIChwYXRoLCBjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgdXJsID0gIi9hcGkvbGlzdCI7CiAgICAgICAgICAgIG9iai5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJnZXQiLAogICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICJuYW1lIiwKICAgICAgICAgICAgICAgICAgICBkZXNjOiAwLAogICAgICAgICAgICAgICAgICAgIHNob3dlbXB0eTogMCwKICAgICAgICAgICAgICAgICAgICB3ZWI6IDEsCiAgICAgICAgICAgICAgICAgICAgcGFnZTogMSwKICAgICAgICAgICAgICAgICAgICBudW06IDEwLAogICAgICAgICAgICAgICAgICAgIGRpcjogcGF0aAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAxZTUsCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5jcmVhdGVEaXIgPSBmdW5jdGlvbiAocGF0aCwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHVybCA9ICIvYXBpL2NyZWF0ZT9hPWNvbW1pdCI7CiAgICAgICAgICAgIG9iai5hamF4KHsKICAgICAgICAgICAgICAgIHR5cGU6ICJwb3N0IiwKICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgsCiAgICAgICAgICAgICAgICAgICAgaXNkaXI6IDEsCiAgICAgICAgICAgICAgICAgICAgYmxvY2tfbGlzdDogIltdIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAxZTUsCiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWF0Y2g7CgogICAgICAgICAgICBtYXRjaCA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL3NoYXJlXC9pbml0XD9zdXJsPShbYS16MC05LV9dKykvaSk7CiAgICAgICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzFdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtYXRjaCA9IGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9cL3NcLzEoW2EtejAtOS1fXSspL2kpOwogICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFsxXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmlzUHdkU2hhcmVPcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5iYWlkdV9zaGFyZV9zdGF0dXMpOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRZdW5EYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIW9iai55dW5fZGF0YSkgewogICAgICAgICAgICAgICAgb2JqLnl1bl9kYXRhID0gdW5zYWZlV2luZG93Lnl1bkRhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai55dW5fZGF0YTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0VGVtcFBhdGggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ZW1wUGF0aCA9IGNvbmZpZy5nZXRDb25maWcoInRlbXBfcGF0aCIpOwogICAgICAgICAgICBpZiAodGVtcFBhdGgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wUGF0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmoudGVtcF9wYXRoOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldFRlbXBQYXRoID0gZnVuY3Rpb24gKHRlbXBQYXRoKSB7CiAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcoInRlbXBfcGF0aCIsIHRlbXBQYXRoKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QXBwSWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBhcHBJZCA9IGNvbmZpZy5nZXRDb25maWcoImFwcF9pZCIpOwogICAgICAgICAgICBpZiAoYXBwSWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhcHBJZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouYXBwX2lkOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNldEFwcElkID0gZnVuY3Rpb24gKGFwcElkKSB7CiAgICAgICAgICAgIGNvbmZpZy5zZXRDb25maWcoImFwcF9pZCIsIGFwcElkKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFdpZGdldENvbnRleHQgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgb2JqLmFzeW5jKG5hbWUsIGZ1bmN0aW9uICh3aWRnZXQpIHsKICAgICAgICAgICAgICAgICAgICB3aWRnZXQuc2V0Q29udGV4dChvYmouZ2V0U3lzdGVtQ29udGV4dCgpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlcnIpIHsgfQogICAgICAgIH07CgogICAgICAgIG9iai5hamF4ID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgICBvYmouZ2V0SnF1ZXJ5KCkuYWpheChvcHRpb24pOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTeXN0ZW1Db250ZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLnJlcXVpcmUoInN5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcyIpLmluc3RhbmNlRm9yU3lzdGVtOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRKcXVlcnkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoucmVxdWlyZSgiYmFzZTp3aWRnZXQvbGlicy9qcXVlcnlwYWNrZXQuanMiKTsKICAgICAgICB9OwoKICAgICAgICBvYmoucmVxdWlyZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiB1bnNhZmVXaW5kb3cucmVxdWlyZShuYW1lKTsKICAgICAgICB9OwoKICAgICAgICBvYmouYXN5bmMgPSBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LnJlcXVpcmUuYXN5bmMobmFtZSwgY2FsbGJhY2spOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJhcHBfd2VpeXVuIiwgWyJyb3V0ZXIiLCAib3B0aW9uIiwgImxvZ2dlciIsICJ1bnNhZmVXaW5kb3ciLCAiY29uc3RhbnQiLCAicnVudGltZSIsICJhcGkiLCAic2hhcmVMb2ciLCAiJCJdLCBmdW5jdGlvbiAocm91dGVyLCBvcHRpb24sIGxvZ2dlciwgdW5zYWZlV2luZG93LCBjb25zdGFudCwgcnVudGltZSwgYXBpLCBzaGFyZUxvZywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIG1vZHVsZXM6IHt9LAogICAgICAgICAgICB3ZWJwYWNrX3JlcXVpcmU6IG51bGwsCiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzZXRQd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwsCiAgICAgICAgICAgICAgICBzdWJtaXRfcHdkOiBudWxsCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucnVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzayIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC53ZWl5dW5fcGFnZV9ob21lKSAmJiBvYmouaW5pdEhvbWVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigic2hhcmUud2VpeXVuLmNvbSIpID4gMCkgewogICAgICAgICAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0SG9tZVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5pbml0V2VicGFja1JlcXVpcmUoKTsKCiAgICAgICAgICAgIHNldEludGVydmFsKG9iai5pbml0SG9tZVBhZ2VFbGVtZW50LCAxMDAwKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdEhvbWVQYWdlRWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxkaXYgY2xhc3M9ImFjdGlvbi1pdGVtIG1vZC1hY3Rpb24td3JhcC1saW5rIj48ZGl2IGNsYXNzPSJhY3Rpb24taXRlbS1jb24iPjxpIGNsYXNzPSJpY29uIGljb24tbGluayI+PC9pPjxzcGFuIGNsYXNzPSJhY3QtdHh0Ij7mmL7npLrpk77mjqU8L3NwYW4+PC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1tZW51Om5vdCgubmQtc2hvdy1saW5rLWFscmVhZHkpIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpOwogICAgICAgICAgICAgICAgaWYgKCR0aGlzLmZpbmQoIi5pY29uLWRvd25sb2FkIikpIHsKICAgICAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygibmQtc2hvdy1saW5rLWFscmVhZHkiKTsKCiAgICAgICAgICAgICAgICAgICAgJHRoaXMucHJlcGVuZCh0ZW1wbGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dIb21lRG93bmxvYWQoKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvYmouaW5pdFdlYnBhY2tSZXF1aXJlKCk7CgogICAgICAgICAgICBpZiAob3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC53ZWl5dW5fcGFnZV92ZXJpZnkpKSB7CiAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkKCk7CgogICAgICAgICAgICAgICAgb2JqLmluaXRWZXJpZnlQYWdlRWxlbWVudChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QoKTsKICAgICAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9wYWdlX3NoYXJlKSAmJiB1bnNhZmVXaW5kb3cuc3luY0RhdGEuc2hhcmVJbmZvLm5vdGVfbGlzdC5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgb2JqLmluaXRTaGFyZVBhZ2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5pbml0U2hhcmVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoJCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9Im1vZC1hY3Rpb24td3JhcCBtb2QtYWN0aW9uLXdyYXAtbWVudSBtb2QtYWN0aW9uLXdyYXAtbGluayBjbGVhcmZpeCI+PGRpdiBjbGFzcz0iYWN0aW9uLWl0ZW0iPjxkaXYgY2xhc3M9ImFjdGlvbi1pdGVtLWNvbiI+PGkgY2xhc3M9Imljb24gaWNvbi1saW5rIj48L2k+PHNwYW4gY2xhc3M9ImFjdC10eHQiPuaYvuekuumTvuaOpTwvc3Bhbj48L2Rpdj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1jb2RlIikuYWZ0ZXIoaHRtbCk7CgogICAgICAgICAgICAgICAgJCgiLm1vZC1hY3Rpb24td3JhcC1saW5rIikuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIG9iai5zaG93U2hhcmVEb3dubG9hZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2V0VGltZW91dChvYmouaW5pdFNoYXJlUGFnZSwgNTAwKTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyICRwd2QgPSAkKCIuY2FyZC1pbm5lciAuaW5wdXQtdHh0W3R5cGU9J3Bhc3N3b3JkJ10iKTsKICAgICAgICAgICAgdmFyICRidXR0b24gPSAkKCIuY2FyZC1pbm5lciAuYnRuLW1haW4iKTsKICAgICAgICAgICAgaWYgKHNoYXJlSWQgJiYgJHB3ZC5sZW5ndGggJiYgJGJ1dHRvbi5sZW5ndGgpIHsKCiAgICAgICAgICAgICAgICAvLyDmmL7npLrliIbkuqvlr4bnoIEKICAgICAgICAgICAgICAgICRwd2QuYXR0cigidHlwZSIsICJ0ZXh0Iik7CgogICAgICAgICAgICAgICAgLy8g6K6+572u5YiG5Lqr5a+G56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2V0UHdkID0gZnVuY3Rpb24gKHB3ZCkgewogICAgICAgICAgICAgICAgICAgICRwd2QudmFsKHB3ZCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOmHjemAoOaMiemSrgogICAgICAgICAgICAgICAgdmFyICRpdGVtQnV0dG9uID0gJGJ1dHRvbi5wYXJlbnQoKTsKICAgICAgICAgICAgICAgICRpdGVtQnV0dG9uLnNhZmVIdG1sKCRidXR0b24ucHJvcCgib3V0ZXJIVE1MIikpOwogICAgICAgICAgICAgICAgJGJ1dHRvbiA9ICRpdGVtQnV0dG9uLmZpbmQoIi5idG4tbWFpbiIpOwoKICAgICAgICAgICAgICAgIC8vIOaMiemSruS6i+S7tgogICAgICAgICAgICAgICAgJGJ1dHRvbi5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLmdldFN0b3JlKCkgJiYgb2JqLmdldFN0b3JlKCkuZGlzcGF0Y2goInNoYXJlSW5mby9sb2FkU2hhcmVJbmZvV2l0aG91dExvZ2luIiwgJHB3ZC52YWwoKSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyDmj5DkuqTlr4bnoIEKICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICRidXR0b24uY2xpY2soKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoY2FsbGJhY2spOwogICAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5hdXRvUGFkZGluZ1NoYXJlUHdkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgIHZhciBzaGFyZUxpbmsgPSBvYmouZ2V0U2hhcmVMaW5rKCk7CiAgICAgICAgICAgIGFwaS5xdWVyeVNoYXJlUHdkKGNvbnN0YW50LnNvdXJjZS53ZWl5dW4sIHNoYXJlSWQsIHNoYXJlTGluaywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY29kZSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlUHdkID0gcmVzcG9uc2UuZGF0YS5zaGFyZV9wd2Q7CiAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNoYXJlX3B3ZCA9IHNoYXJlUHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zZXRQd2Qoc2hhcmVQd2QpOwogICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwU3VjY2Vzcygi5aGr5YWF5a+G56CB5oiQ5YqfIik7CgogICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9hdXRvX2p1bXApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkICYmIG9iai52ZXJpZnlfcGFnZS5zdWJtaXRfcHdkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXBFcnJvcigi5pqC5peg5Lq65YiG5Lqr5a+G56CBIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAvLyDmt7vliqDlvIDlhbMKICAgICAgICAgICAgJCgiLmNhcmQtaW5uZXIgLmZvcm0taXRlbS1sYWJlbCAuZm9ybS1pdGVtLXRpdCIpLnNhZmVIdG1sKCc8c3BhbiBjbGFzcz0iZm9ybS1pdGVtLXRpdCI+6K+36L6T5YWl5YiG5Lqr5a+G56CBPHNwYW4gc3R5bGU9Im1hcmdpbi1sZWZ0OiA0NXB4OyI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkIGlkPSJuZC1zaGFyZS1jaGVjayIgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Ij4gPGEgY2xhc3M9Im5kLW9wZW4tcGFnZS1vcHRpb24iIGhyZWY9ImphdmFzY3JpcHQ6OyIgdGl0bGU9IueCueWHu+afpeeci+abtOWkmuiEmuacrOmFjee9riI+5YWx5Lqr5a+G56CBPC9hPjwvc3Bhbj48L3NwYW4+Jyk7CiAgICAgICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbigpIHx8ICQoIiNuZC1zaGFyZS1jaGVjayIpLnJlbW92ZUF0dHIoImNoZWNrZWQiKTsKCiAgICAgICAgICAgIC8vIOW8gOWFsy3kuovku7YKICAgICAgICAgICAgJCgiI25kLXNoYXJlLWNoZWNrIikub24oImNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQud2VpeXVuX3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0T3B0aW9uVW5BY3RpdmUob3B0aW9uLmNvbnN0YW50LndlaXl1bl9zaGFyZV9zdGF0dXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIOaJk+W8gOmFjee9rumhtQogICAgICAgICAgICAkKCIubmQtb3Blbi1wYWdlLW9wdGlvbiIpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJ1bnRpbWUub3Blbk9wdGlvbnNQYWdlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclN0b3JlU2hhcmVQd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5hZGRSZXNwb25zZUludGVyY2VwdG9yKGZ1bmN0aW9uIChyZXF1ZXN0LCByZXNwb25zZSkgewogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RVcmwgPSByZXF1ZXN0LnJlc3BvbnNlVVJMOwogICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RVcmwuaW5kZXhPZigid2VpeXVuU2hhcmVOb0xvZ2luL1dlaXl1blNoYXJlVmlldyIpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmRhdGEucnNwX2hlYWRlci5yZXRjb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gcmVzcG9uc2UuY29uZmlnLmRhdGEubWF0Y2goL1xcInNoYXJlX3B3ZFxcIjpcXCIoW1x3XSspXFwiLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBtYXRjaCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSBtYXRjaFsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoYXJlUHdkID09IG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBjaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmouaXNQd2RTaGFyZU9wZW4oKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgY2xvc2VkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlTGluayA9IG9iai5nZXRTaGFyZUxpbmsoKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVMb2cuYWRkU2hhcmVMb2coc2hhcmVJZCwgc2hhcmVQd2QsIHNoYXJlTGluaywgY29uc3RhbnQuc291cmNlLndlaXl1bik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBlcnJvciIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmFkZFJlc3BvbnNlSW50ZXJjZXB0b3IgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzcG9uc2UucmVxdWVzdCwgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb2JqLmdldEF4aW9zKCkgJiYgb2JqLmdldEF4aW9zKCkuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShzdWNjZXNzLCBlcnJvcik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dCb3ggPSBmdW5jdGlvbiAoYm9keSkgewogICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz0ibW9kYWwgbW9kYWwtc2hvdyIgaWQ9ImZpbGUtbW9kYWwiPjxiIGNsYXNzPSJtb2RhbC1tYXNrIj48L2I+PGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nIG1vZGFsLWRpYWxvZy02ODAiPjxkaXYgY2xhc3M9Im1vZGFsLWRpYWxvZy1oZCBjbGVhcmZpeCI+PGg0IGNsYXNzPSJtb2RhbC1kaWFsb2ctdGl0bGUiPuaWh+S7tuS4i+i9vTwvaDQ+PGJ1dHRvbiBjbGFzcz0iYnRuLWljb24gaWNvbiBpY29uLXBvcC1jbG9zZSI+PC9idXR0b24+PC9kaXY+PGRpdiBjbGFzcz0ibW9kYWwtZGlhbG9nLWJkIG1vZGFsLWJvZHkiPjwvZGl2PjwvZGl2PjwvZGl2Pic7CiAgICAgICAgICAgIGlmICgkKCIjZmlsZS1tb2RhbCIpLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAkKCJib2R5IikuYXBwZW5kKHRlbXBsYXRlKTsKICAgICAgICAgICAgICAgICQoIiNmaWxlLW1vZGFsIC5pY29uLXBvcC1jbG9zZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjZmlsZS1tb2RhbCIpLmhpZGUoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgICQoIiNmaWxlLW1vZGFsIikuc2hvdygpOwogICAgICAgICAgICAkKCIjZmlsZS1tb2RhbCAubW9kYWwtYm9keSIpLnNhZmVIdG1sKGJvZHkpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93U2hhcmVEb3dubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGZpbGVEYXRhID0gb2JqLmdldFNlbGVjdGVkU2hhcmVGaWxlRGF0YSgpOwogICAgICAgICAgICBpZiAoZmlsZURhdGEubm9kZV9saXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnNob3dUaXBFcnJvcigi6K+36YCJ5oup6Iez5bCR5LiA5Liq5paH5Lu2L+aWh+S7tuWkuSIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBvYmoucmVxdWVzdFNoYXJlRG93bmxvYWQoZmlsZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBvYmouc2hvd1NoYXJlRG93bmxvYWRCb3goZmlsZURhdGEsIHJlc3BvbnNlKTsKICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBvYmouc2hvd1RpcEVycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93SG9tZURvd25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZURhdGEgPSBvYmouZ2V0U2VsZWN0ZWRTaGFyZUZpbGVEYXRhKCk7CiAgICAgICAgICAgIGlmIChmaWxlRGF0YS5ub2RlX2xpc3QubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiBvYmouc2hvd1RpcEVycm9yKCLor7fpgInmi6noh7PlsJHkuIDkuKrmlofku7Yv5paH5Lu25aS5Iik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG9iai5yZXF1ZXN0SG9tZURvd25sb2FkKGZpbGVEYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgb2JqLnNob3dTaGFyZURvd25sb2FkQm94KGZpbGVEYXRhLCByZXNwb25zZSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgb2JqLnNob3dUaXBFcnJvcihyZXNwb25zZS5tc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoucGFyc2VEb3duRmlsZSA9IGZ1bmN0aW9uIChmaWxlRGF0YSkgewogICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSAiIiwgcGFja05hbWUgPSAiIjsKICAgICAgICAgICAgaWYgKGZpbGVEYXRhLmRpcl9saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGlmIChmaWxlRGF0YS5maWxlX2xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHBhY2tOYW1lID0gZmlsZURhdGEuZGlyX2xpc3RbMF0uZmlsZW5hbWUgKyAiIOetiSIgKyAoZmlsZURhdGEuZGlyX2xpc3QubGVuZ3RoICsgZmlsZURhdGEuZmlsZV9saXN0Lmxlbmd0aCkgKyAi5Liq5paH5Lu2IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBhY2tOYW1lID0gZmlsZURhdGEuZGlyX2xpc3RbMF0uZmlsZW5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IHBhY2tOYW1lICsgIi56aXAiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGZpbGVEYXRhLmZpbGVfbGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgcGFja05hbWUgPSBmaWxlRGF0YS5ub2RlX2xpc3RbMF0uZ2V0TmFtZU5vRXh0KCkgKyAiIOetiSIgKyBmaWxlRGF0YS5maWxlX2xpc3QubGVuZ3RoICsgIuS4quaWh+S7tiI7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBwYWNrTmFtZSArICIuemlwIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gZmlsZURhdGEuZmlsZV9saXN0WzBdLmZpbGVuYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBmaWxlX25hbWU6IGZpbGVOYW1lLAogICAgICAgICAgICAgICAgcGFja19uYW1lOiBwYWNrTmFtZQogICAgICAgICAgICB9OwogICAgICAgIH07CgogICAgICAgIG9iai5yZXF1ZXN0SG9tZURvd25sb2FkID0gZnVuY3Rpb24gKGZpbGVEYXRhKSB7CiAgICAgICAgICAgIHZhciBiYXNlUmVxdWVzdCA9IG9iai5nZXRCYXNlUmVxdWVzdCgpOwogICAgICAgICAgICB2YXIgZG93bkZpbGUgPSBvYmoucGFyc2VEb3duRmlsZShmaWxlRGF0YSk7CiAgICAgICAgICAgIGlmIChiYXNlUmVxdWVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGRvd25GaWxlLnBhY2tfbmFtZSA/IGJhc2VSZXF1ZXN0LmdldFBhY2tVcmwoZmlsZURhdGEubm9kZV9saXN0LCB7fSkgOiBiYXNlUmVxdWVzdC5nZXRTaW5nbGVVcmwoZmlsZURhdGEubm9kZV9saXN0LCB7fSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgIHJlamVjdCh7IHJldGNvZGU6IC0xLCBtc2c6ICLnlJ/miJDpk77mjqXlpLHotKUiIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmoucmVxdWVzdFNoYXJlRG93bmxvYWQgPSBmdW5jdGlvbiAoZmlsZURhdGEpIHsKICAgICAgICAgICAgdmFyIHNoYXJlRmlsZSA9IG9iai5nZXRTaGFyZUZpbGUoKSwgZG93bmxvYWRSZXF1ZXN0ID0gb2JqLmdldERvd25sb2FkUmVxdWVzdCgpOwogICAgICAgICAgICB2YXIgZG93bkZpbGUgPSBvYmoucGFyc2VEb3duRmlsZShmaWxlRGF0YSk7CiAgICAgICAgICAgIGlmIChzaGFyZUZpbGUgJiYgZG93bmxvYWRSZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICB2YXIgZGV0YWlsID0gewogICAgICAgICAgICAgICAgICAgIHNoYXJlS2V5OiBzaGFyZUZpbGUuc2hhcmVLZXksCiAgICAgICAgICAgICAgICAgICAgc2hhcmVQd2Q6IHNoYXJlRmlsZS5zaGFyZVB3ZCwKICAgICAgICAgICAgICAgICAgICBmaWxlT3duZXI6IHNoYXJlRmlsZS5zaGFyZU93bmVyLAogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkVHlwZTogMCwKICAgICAgICAgICAgICAgICAgICBwYWNrTmFtZTogZG93bkZpbGUucGFja19uYW1lLAogICAgICAgICAgICAgICAgICAgIHBkaXJLZXk6ICIiLAogICAgICAgICAgICAgICAgICAgIGRpckxpc3Q6IGZpbGVEYXRhLmRpcl9saXN0LAogICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0OiBmaWxlRGF0YS5maWxlX2xpc3QKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gZG93bkZpbGUucGFja19uYW1lID8gZG93bmxvYWRSZXF1ZXN0LnNoYXJlUGFydERvd25sb2FkKGRldGFpbCkgOiBkb3dubG9hZFJlcXVlc3Quc2hhcmVCYXRjaERvd25sb2FkKGRldGFpbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgIHJlamVjdCh7IHJldGNvZGU6IC0xLCBtc2c6ICLnlJ/miJDpk77mjqXlpLHotKUiIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd1NoYXJlRG93bmxvYWRCb3ggPSBmdW5jdGlvbiAoZmlsZURhdGEsIHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHZhciBkb3duRmlsZSA9IG9iai5wYXJzZURvd25GaWxlKGZpbGVEYXRhKTsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRvd25sb2FkX3VybCkgewogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkb3duRmlsZSwgcmVzcG9uc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkb3duRmlsZSwgcmVzcG9uc2UuZmlsZV9saXN0WzBdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBzdHlsZT0icGFkZGluZzogMjBweDsgb3ZlcmZsb3cteTogYXV0bzsiPic7CiAgICAgICAgICAgIHZhciByb3dTdHlsZSA9ICJtYXJnaW46MTBweCAwcHg7b3ZlcmZsb3c6aGlkZGVuOyB3aGl0ZS1zcGFjZTpub3dyYXA7IHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7IjsKICAgICAgICAgICAgaHRtbCArPSAnPHA+JyArIGRvd25GaWxlLmZpbGVfbmFtZSArICc8L3A+JzsKICAgICAgICAgICAgaHRtbCArPSAnPHAgc3R5bGU9IicgKyByb3dTdHlsZSArICciPjxhIHRpdGxlPSInICsgZG93bkZpbGUuZG93bmxvYWRfdXJsICsgJyIgaHJlZj0iJyArIGRvd25GaWxlLmRvd25sb2FkX3VybCArICciIHN0eWxlPSJjb2xvcjogYmx1ZTsiPicgKyBkb3duRmlsZS5kb3dubG9hZF91cmwgKyAnPC9hPjwvcD4nOwogICAgICAgICAgICBodG1sICs9ICc8ZGl2Pic7CiAgICAgICAgICAgIG9iai5zaG93Qm94KGh0bWwpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwU3VjY2VzcyA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgb2JqLmdldE1vZGFsKCkgJiYgb2JqLmdldE1vZGFsKCkuc3VjY2Vzcyhtc2cpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwRXJyb3IgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIG9iai5nZXRNb2RhbCgpICYmIG9iai5nZXRNb2RhbCgpLmVycm9yKG1zZyk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlSWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIHZhciBtYXRjaCA9IHVybC5tYXRjaCgvc2hhcmUud2VpeXVuLmNvbVwvKFswLTlhLXpdKykvaSk7CiAgICAgICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2hhcmVMaW5rID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcm91dGVyLmdldFVybCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5pc0hvbWVQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAocm91dGVyLmdldFVybCgpLmluZGV4T2YoIndlaXl1bi5jb20vZGlzayIpID49IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmlzUHdkU2hhcmVPcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC53ZWl5dW5fc2hhcmVfc3RhdHVzKTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2VsZWN0ZWRTaGFyZUZpbGVEYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZURhdGEgPSB7CiAgICAgICAgICAgICAgICBub2RlX2xpc3Q6IG9iai5nZXRTZWxlY3RlZEZpbGVOb2RlcygpLAogICAgICAgICAgICAgICAgZGlyX2xpc3Q6IFtdLAogICAgICAgICAgICAgICAgZmlsZV9saXN0OiBbXQogICAgICAgICAgICB9OwogICAgICAgICAgICBmaWxlRGF0YS5ub2RlX2xpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0uZ2V0U2l6ZSkgewogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2lkOiBpdGVtLmdldElkKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHBkaXJfa2V5OiBpdGVtLmdldFBkaXJLZXkoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGl0ZW0uZ2V0TmFtZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlX3NpemU6IGl0ZW0uZ2V0U2l6ZSgpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pc0RpcigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEYXRhLmRpcl9saXN0LnB1c2goZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlRGF0YS5maWxlX2xpc3QucHVzaChmaWxlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmlsZURhdGE7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZU5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZU5vZGVzID0gW107CiAgICAgICAgICAgIGlmIChvYmouaXNIb21lUGFnZSgpKSB7CiAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBvYmouZ2V0SG9tZUZpbGVOb2RlcygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHNoYXJlRmlsZSA9IG9iai5nZXRTaGFyZUZpbGUoKTsKICAgICAgICAgICAgICAgIGlmIChzaGFyZUZpbGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc2hhcmVGaWxlLmlzU2luZ2xlRmlsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBzaGFyZUZpbGUuY2hpbGROb2RlczsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHNoYXJlRmlsZS5zZWxlY3RlZE5vZGVzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmlsZU5vZGVzOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRIb21lRmlsZU5vZGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZU5vZGVzID0gW107CiAgICAgICAgICAgIHZhciBzdG9yZSA9IG9iai5nZXRTdG9yZSgpOwogICAgICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5pc1NlbGVjdGVkKCkgPyAxIDogMDsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHN0b3JlIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzay9kb2MiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUuZG9jLmN1ckNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3Bob3RvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLnBob3RvLmN1ckNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3ZpZGVvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLnZpZGVvLmNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL2F1aWRvIikgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLmF1ZGlvLmNhdGVOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3RpbWUiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUudGltZS5yb290Tm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodXJsLmluZGV4T2YoIndlaXl1bi5jb20vZGlzay9zaGFyZWRpciIpID49IDApIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTm9kZXMgPSBzdG9yZS5zdGF0ZS5zaGFyZWRpci5jdXJOb2RlLmdldEtpZE5vZGVzKCkuZmlsdGVyKGZpbHRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3JlY2VudCIpID49IDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIga2lkRmVlZHMgPSBzdG9yZS5zdGF0ZS5yZWNlbnQucm9vdE5vZGUuZ2V0S2lkRmVlZHMoKTsKICAgICAgICAgICAgICAgICAgICBraWRGZWVkcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWVkLmlzU2VsZWN0ZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gZmlsZU5vZGVzLmNvbmNhdChmZWVkLmdldEtpZE5vZGVzKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigid2VpeXVuLmNvbS9kaXNrL3JlY3ljbGUiKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5vZGVzID0gc3RvcmUuc3RhdGUucmVjeWNsZS5yb290Tm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RvcmUuc3RhdGUuZGlzaykgewogICAgICAgICAgICAgICAgICAgIGZpbGVOb2RlcyA9IHN0b3JlLnN0YXRlLmRpc2suY3VyTm9kZS5nZXRLaWROb2RlcygpLmZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmaWxlTm9kZXM7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlRmlsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHN0b3JlID0gb2JqLmdldFN0b3JlKCk7CiAgICAgICAgICAgIGlmIChzdG9yZSBpbnN0YW5jZW9mIE9iamVjdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLnNoYXJlZmlsZS5zaGFyZUZpbGU7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QmFzZVJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlKCJiYXNlX3JlcXVlc3QiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5nZXRTaW5nbGVVcmwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0RG93bmxvYWRSZXF1ZXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgiZG93bmxvYWRfcmVxdWVzdCIsIGZ1bmN0aW9uIChtb2R1bGUsIG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLkRvd25sb2FkUmVxdWVzdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbW9kdWxlLkRvd25sb2FkUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0QXhpb3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlKCJheGlvcyIsIGZ1bmN0aW9uIChtb2R1bGUsIG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChtb2R1bGUgJiYgbW9kdWxlLkF4aW9zKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldE1vZGFsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgibW9kYWwiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5jb25maXJtICYmIG1vZHVsZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFN0b3JlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gb2JqLm1hdGNoV2VicGFja01vZHVsZSgic3RvcmUiLCBmdW5jdGlvbiAobW9kdWxlLCBuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAobW9kdWxlICYmIG1vZHVsZS5kZWZhdWx0ICYmIG1vZHVsZS5kZWZhdWx0Ll9tb2R1bGVzTmFtZXNwYWNlTWFwKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZS5kZWZhdWx0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmoubWF0Y2hXZWJwYWNrTW9kdWxlID0gZnVuY3Rpb24gKG5hbWUsIG1hdGNoRnVuYykgewogICAgICAgICAgICBpZiAoIW9iai5tb2R1bGVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqLndlYnBhY2tfcmVxdWlyZS5jKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbWF0Y2hGdW5jKG9iai53ZWJwYWNrX3JlcXVpcmUoa2V5KSwga2V5KTsKICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLm1vZHVsZXNbbmFtZV0gPSBtYXRjaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG9iai5tb2R1bGVzW25hbWVdOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0V2VicGFja1JlcXVpcmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBpbmplY3ROYW1lID0gIl9uZF9pbmplY3RfIjsKICAgICAgICAgICAgdmFyIG1vcmVNb2R1bGVzID0ge307CiAgICAgICAgICAgIG1vcmVNb2R1bGVzW2luamVjdE5hbWVdID0gZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewogICAgICAgICAgICAgICAgb2JqLndlYnBhY2tfcmVxdWlyZSA9IF9fd2VicGFja19yZXF1aXJlX187CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHVuc2FmZVdpbmRvdy53ZWJwYWNrSnNvbnAoW2luamVjdE5hbWVdLCBtb3JlTW9kdWxlcywgW2luamVjdE5hbWVdKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX2xhbnpvdXMiLCBbInJvdXRlciIsICJvcHRpb24iLCAibG9nZ2VyIiwgInVuc2FmZVdpbmRvdyIsICJjb25zdGFudCIsICJydW50aW1lIiwgImFwaSIsICJzaGFyZUxvZyIsICIkIl0sIGZ1bmN0aW9uIChyb3V0ZXIsIG9wdGlvbiwgbG9nZ2VyLCB1bnNhZmVXaW5kb3csIGNvbnN0YW50LCBydW50aW1lLCBhcGksIHNoYXJlTG9nLCAkKSB7CiAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgdmVyaWZ5X3BhZ2U6IHsKICAgICAgICAgICAgICAgIHNldFB3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHNoYXJlX3B3ZDogbnVsbCwKICAgICAgICAgICAgICAgIHN1Ym1pdF9wd2Q6IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigibGFuem91cy5jb20iKSA+IDAgfHwgdXJsLmluZGV4T2YoImxhbnpvdXguY29tIikgPiAwKSB7CiAgICAgICAgICAgICAgICBvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LmxhbnpvdXNfcGFnZV92ZXJpZnkpICYmIG9iai5pbml0VmVyaWZ5UGFnZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5yZWdpc3RlclN0b3JlU2hhcmVQd2QoKTsKCiAgICAgICAgICAgIG9iai5pbml0VmVyaWZ5UGFnZUVsZW1lbnQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QoKTsKCiAgICAgICAgICAgICAgICBvYmoucmVnaXN0ZXJQd2RTaGFyZVN3aXRjaCgpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyICRwd2QgPSAkKCIjcHdkIik7CiAgICAgICAgICAgIGlmIChzaGFyZUlkICYmICRwd2QubGVuZ3RoKSB7CgogICAgICAgICAgICAgICAgLy8g6K6+572u5YiG5Lqr5a+G56CBCiAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2V0UHdkID0gZnVuY3Rpb24gKHB3ZCkgewogICAgICAgICAgICAgICAgICAgICRwd2QudmFsKHB3ZCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIOaPkOS6pOWvhueggQogICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiI3N1YiIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2VFbGVtZW50KGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouYXV0b1BhZGRpbmdTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHNoYXJlSWQgPSBvYmouZ2V0U2hhcmVJZCgpOwogICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICBhcGkucXVlcnlTaGFyZVB3ZChjb25zdGFudC5zb3VyY2UubGFuem91cywgc2hhcmVJZCwgc2hhcmVMaW5rLCBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jb2RlID09IDEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVQd2QgPSByZXNwb25zZS5kYXRhLnNoYXJlX3B3ZDsKICAgICAgICAgICAgICAgICAgICBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkID0gc2hhcmVQd2Q7CiAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnNldFB3ZChzaGFyZVB3ZCk7CiAgICAgICAgICAgICAgICAgICAgb2JqLnNob3dUaXAoMSwgIuWhq+WFheWvhueggeaIkOWKnyIsIDIwMDApOwoKICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC5sYW56b3VzX2F1dG9fanVtcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QgJiYgb2JqLnZlcmlmeV9wYWdlLnN1Ym1pdF9wd2QoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd1RpcCgwLCAi5pqC5peg5Lq65YiG5Lqr5a+G56CBIiwgMjAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaHRtbCA9ICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDEwcHg7Ij7liIbkuqvorr7nva4gPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkIGlkPSJuZC1zaGFyZS1jaGVjayIgc3R5bGU9InZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IiA+IDxhIHN0eWxlPSJjdXJzb3I6IHBvaW50ZXI7IiBjbGFzcz0ibmQtb3Blbi1wYWdlLW9wdGlvbiIgaHJlZj0iamF2YXNjcmlwdDo7IiB0aXRsZT0i54K55Ye75p+l55yL5pu05aSa6ISa5pys6YWN572uIj7lhbHkuqvlr4bnoIE8L2E+PC9kaXY+JzsKICAgICAgICAgICAgaWYgKCQoIi5vZmYiKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICQoIi5vZmYiKS5hZnRlcihodG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICQoIi5wYXNzd2RkaXYtdXNlciIpLmFmdGVyKGh0bWwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbigpIHx8ICQoIiNuZC1zaGFyZS1jaGVjayIpLnJlbW92ZUF0dHIoImNoZWNrZWQiKTsKCiAgICAgICAgICAgIC8vIOW8gOWFsy3kuovku7YKICAgICAgICAgICAgJCgiI25kLXNoYXJlLWNoZWNrIikub24oImNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQubGFuem91c19zaGFyZV9zdGF0dXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNldE9wdGlvblVuQWN0aXZlKG9wdGlvbi5jb25zdGFudC5sYW56b3VzX3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5omT5byA6YWN572u6aG1CiAgICAgICAgICAgICQoIi5uZC1vcGVuLXBhZ2Utb3B0aW9uIikuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcnVudGltZS5vcGVuT3B0aW9uc1BhZ2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gb3B0aW9ucy5kYXRhLm1hdGNoKC9wd2Q9KFx3KykvKTsKICAgICAgICAgICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG9wdGlvbnMuZGF0YS5tYXRjaCgvcD0oXHcrKS8pOwogICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgbm90IG1hdGNoIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IG1hdGNoWzFdOwoKICAgICAgICAgICAgICAgIGlmIChzaGFyZVB3ZCA9PSBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci53YXJuKCJwd2Qgc2hhcmUgbm90IGNoYW5nZSIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghb2JqLmlzUHdkU2hhcmVPcGVuKCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBjbG9zZWQiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICB2YXIgc2hhcmVMaW5rID0gb2JqLmdldFNoYXJlTGluaygpOwogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gb2JqLnBhcnNlSnNvbih4aHIucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnp0ID09IDEgJiYgc2hhcmVQd2QpIHsKICAgICAgICAgICAgICAgICAgICBzaGFyZUxvZy5hZGRTaGFyZUxvZyhzaGFyZUlkLCBzaGFyZVB3ZCwgc2hhcmVMaW5rLCBjb25zdGFudC5zb3VyY2UubGFuem91cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybigicHdkIHNoYXJlIGVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93VGlwID0gZnVuY3Rpb24gKGNvZGUsIG1zZywgdGltZW91dCkgewogICAgICAgICAgICBpZiAodW5zYWZlV2luZG93LnNtcykgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LnNtcyhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yOwogICAgICAgICAgICAgICAgaWYgKCQoIi5vZmYiKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9ICIjcHdkZXJyIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gIiNpbmZvIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgJChzZWxlY3Rvcikuc2FmZUh0bWwoJzxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW47Ij4nICsgbXNnICsgJzwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICQoc2VsZWN0b3IpLnNhZmVIdG1sKCc8c3BhbiBzdHlsZT0iY29sb3I6IHJlZDsiPicgKyBtc2cgKyAnPC9zcGFuPicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgJChzZWxlY3RvcikudGV4dCgiIik7CiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbWF0Y2g7CgogICAgICAgICAgICBtYXRjaCA9IC9sYW56b3VzLmNvbVwvKFtcd10rKVwvKFthLXowLTktXyVdezQsfSkvZ2kuZXhlYyhsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV0gKyAiLyIgKyBtYXRjaFsyXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWF0Y2ggPSAvbGFuem91cy5jb21cLyhbYS16MC05LV9dezQsfSkvZ2kuZXhlYyhsb2NhdGlvbi5ocmVmKTsKICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hbMV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5wYXRobmFtZS5zdWJzdHIoMSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNoYXJlTGluayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRvcC5sb2NhdGlvbi5ocmVmOwogICAgICAgIH07CgogICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQubGFuem91c19zaGFyZV9zdGF0dXMpOwogICAgICAgIH07CgogICAgICAgIG9iai5wYXJzZUpzb24gPSBmdW5jdGlvbiAoanNvblN0cikgewogICAgICAgICAgICB2YXIganNvbk9iamVjdCA9IHt9OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKGpzb25TdHIpIHsKICAgICAgICAgICAgICAgICAgICBqc29uT2JqZWN0ID0gSlNPTi5wYXJzZShqc29uU3RyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZSkgeyB9CiAgICAgICAgICAgIHJldHVybiBqc29uT2JqZWN0OwogICAgICAgIH07CgogICAgICAgIHJldHVybiBvYmo7CiAgICB9KTsKCiAgICBjb250YWluZXIuZGVmaW5lKCJhcHBfMTg5IiwgWyJyb3V0ZXIiLCAib3B0aW9uIiwgImxvZ2dlciIsICJjb25zdGFudCIsICJhcGkiLCAic2hhcmVMb2ciLCAicnVudGltZSIsICJ1bnNhZmVXaW5kb3ciLCAiJCJdLCBmdW5jdGlvbiAocm91dGVyLCBvcHRpb24sIGxvZ2dlciwgY29uc3RhbnQsIGFwaSwgc2hhcmVMb2csIHJ1bnRpbWUsIHVuc2FmZVdpbmRvdywgJCkgewogICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgIHZlcmlmeV9wYWdlOiB7CiAgICAgICAgICAgICAgICBzaGFyZV9wd2Q6IG51bGwKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSByb3V0ZXIuZ2V0VXJsKCk7CiAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZigiY2xvdWQuMTg5LmNuL3QiKSA+IDApIHsKICAgICAgICAgICAgICAgIG9iai5pbml0U2hhcmVQYWdlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1cmwuaW5kZXhPZigiY2xvdWQuMTg5LmNuL21haW4iKSA+IDAgfHwgdXJsLmluZGV4T2YoImNsb3VkLjE4OS5jbi9waG90byIpID4gMCkgewogICAgICAgICAgICAgICAgb3B0aW9uLmlzT3B0aW9uQWN0aXZlKG9wdGlvbi5jb25zdGFudC50eTE4OV9wYWdlX2hvbWUpICYmIG9iai5pbml0SG9tZVBhZ2UoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmluaXRIb21lUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIiNKX0NyZWF0ZSIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgJCgiI0pfQ3JlYXRlIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGNvbG9yOiAjZmZmOyBjdXJzb3I6IHBvaW50ZXIiPuaYvuekuumTvuaOpTwvYT4nKTsKICAgICAgICAgICAgICAgICQoIi5idG4tc2hvdy1saW5rIikub24oImNsaWNrIiwgb2JqLnNob3dEb3dubG9hZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoJCgiLkpDX1JlZnJlc2giKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICQoIi5KQ19SZWZyZXNoIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGNvbG9yOiAjZmZmOyBjdXJzb3I6IHBvaW50ZXIiPuaYvuekuumTvuaOpTwvYT4nKTsKICAgICAgICAgICAgICAgICQoIi5idG4tc2hvdy1saW5rIikub24oImNsaWNrIiwgb2JqLnNob3dEb3dubG9hZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9iai5pbml0SG9tZVBhZ2UsIDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFNoYXJlUGFnZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIi5jb2RlLXBhbmVsIikubGVuZ3RoICYmIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfcGFnZV92ZXJpZnkpKSB7CiAgICAgICAgICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfcGFnZV9zaGFyZSkpIHsKICAgICAgICAgICAgICAgIG9iai5pbml0RG93bmxvYWRQYWdlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouaW5pdFZlcmlmeVBhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoKCk7CgogICAgICAgICAgICBvYmoucmVnaXN0ZXJTdG9yZVNoYXJlUHdkKCk7CgogICAgICAgICAgICBvYmouYXV0b1BhZGRpbmdTaGFyZVB3ZCgpOwogICAgICAgIH07CgogICAgICAgIG9iai5yZWdpc3RlclB3ZFNoYXJlU3dpdGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgaHRtbCA9ICc8c3BhbiBzdHlsZT0iZmxvYXQ6cmlnaHQiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZCBpZD0ibmQtc2hhcmUtY2hlY2siIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyI+IDxhIGNsYXNzPSJuZC1vcGVuLXBhZ2Utb3B0aW9uIG9uZS1wYW4tbGluay1tYXJrIiB0aXRsZT0i54K55Ye75p+l55yL5pu05aSa6ISa5pys6YWN572uIiBzdHlsZT0iY3Vyc29yOiBwb2ludGVyOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsiPuWFseS6q+aPkOWPlueggTwvYT48L3NwYW4+JzsKICAgICAgICAgICAgJCgiLmNvZGUtcGFuZWwgLnRpdGxlIikuYXBwZW5kKGh0bWwpOwogICAgICAgICAgICBvYmouaXNQd2RTaGFyZU9wZW4oKSB8fCAkKCIjbmQtc2hhcmUtY2hlY2siKS5yZW1vdmVBdHRyKCJjaGVja2VkIik7CgogICAgICAgICAgICAvLyDlvIDlhbMt5LqL5Lu2CiAgICAgICAgICAgICQoIiNuZC1zaGFyZS1jaGVjayIpLm9uKCJjaGFuZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkgewogICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LnR5MTg5X3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2V0T3B0aW9uVW5BY3RpdmUob3B0aW9uLmNvbnN0YW50LnR5MTg5X3NoYXJlX3N0YXR1cyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8g5omT5byA6YWN572u6aG1CiAgICAgICAgICAgICQoIi5uZC1vcGVuLXBhZ2Utb3B0aW9uIikuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcnVudGltZS5vcGVuT3B0aW9uc1BhZ2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnJlZ2lzdGVyU3RvcmVTaGFyZVB3ZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdW5zYWZlV2luZG93LiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbiAoZXZlbnQsIHhociwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlSlNPTjsKICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnVybC5pbmRleE9mKCJzaGFyZUZpbGVWZXJpZnlQYXNzLmFjdGlvbiIpID4gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIE9iamVjdCAmJiByZXNwb25zZS5zaGFyZUlkICYmIHJlc3BvbnNlLmFjY2Vzc0NvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYXJlUHdkID0gcmVzcG9uc2UuYWNjZXNzQ29kZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGFyZVB3ZCA9PSBvYmoudmVyaWZ5X3BhZ2Uuc2hhcmVfcHdkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VyLndhcm4oInB3ZCBzaGFyZSBub3QgY2hhbmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2JqLmlzUHdkU2hhcmVPcGVuKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZXIud2FybigicHdkIHNoYXJlIGNsb3NlZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhcmVJZCA9IG9iai5nZXRTaGFyZUlkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZUxpbmsgPSBvYmouZ2V0U2hhcmVMaW5rKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlTG9nLmFkZFNoYXJlTG9nKHNoYXJlSWQsIHNoYXJlUHdkLCBzaGFyZUxpbmssIGNvbnN0YW50LnNvdXJjZS50eTE4OSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybigicHdkIHNoYXJlIG5vdCBtYXRjaCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmF1dG9QYWRkaW5nU2hhcmVQd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBzaGFyZUlkID0gb2JqLmdldFNoYXJlSWQoKTsKICAgICAgICAgICAgdmFyIHNoYXJlTGluayA9IG9iai5nZXRTaGFyZUxpbmsoKTsKICAgICAgICAgICAgYXBpLnF1ZXJ5U2hhcmVQd2QoY29uc3RhbnQuc291cmNlLnR5MTg5LCBzaGFyZUlkLCBzaGFyZUxpbmssIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNvZGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIHZhciBzaGFyZVB3ZCA9IHJlc3BvbnNlLmRhdGEuc2hhcmVfcHdkOwogICAgICAgICAgICAgICAgICAgIG9iai52ZXJpZnlfcGFnZS5zaGFyZV9wd2QgPSBzaGFyZVB3ZDsKCiAgICAgICAgICAgICAgICAgICAgJCgiI2NvZGVfdHh0IikudmFsKHNoYXJlUHdkKTsKICAgICAgICAgICAgICAgICAgICBvYmouc2hvd1RpcCgxLCAi5aGr5YWF6K6/6Zeu56CB5oiQ5YqfIiwgMjAwMCk7CgogICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24uaXNPcHRpb25BY3RpdmUob3B0aW9uLmNvbnN0YW50LnR5MTg5X2F1dG9fanVtcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuJCgiLmJ0bi52aXNpdCIpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG9iai5zaG93VGlwKDAsICLmmoLml6DkurrliIbkuqvorr/pl67noIEiLCAyMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLnNob3dUaXAgPSBmdW5jdGlvbiAoY29kZSwgbXNnLCB0aW1lb3V0KSB7CiAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQoIi52aXNpdF9lcnJvciIpOwogICAgICAgICAgICBpZiAoY29kZSkgewogICAgICAgICAgICAgICAgJGVsZW1lbnQuc2FmZUh0bWwoJzxzcGFuIHN0eWxlPSJjb2xvcjogZ3JlZW47Ij4nICsgbXNnICsgJzwvc3Bhbj4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICRlbGVtZW50LnNhZmVIdG1sKCc8c3BhbiBzdHlsZT0iY29sb3I6IHJlZDsiPicgKyBtc2cgKyAnPC9zcGFuPicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRlbGVtZW50LnNob3coKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkZWxlbWVudC5oaWRlKCk7CiAgICAgICAgICAgIH0sIHRpbWVvdXQpOwogICAgICAgIH07CgogICAgICAgIG9iai5pbml0RG93bmxvYWRQYWdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAkKCIuYnRuLWRvd25sb2FkIikuYWZ0ZXIoJzxhIGNsYXNzPSJidG4gYnRuLXNob3ctbGluayIgc3R5bGU9ImJhY2tncm91bmQ6ICMyYjg5ZWE7IGN1cnNvcjogcG9pbnRlciI+5pi+56S66ZO+5o6lPC9hPicpOwogICAgICAgICAgICAkKCIuYnRuLXNob3ctbGluayIpLm9uKCJjbGljayIsIG9iai5zaG93RG93bmxvYWQpOwogICAgICAgIH07CgogICAgICAgIG9iai5zaG93RG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgc3R5bGU9InBhZGRpbmc6IDIwcHg7IGhlaWdodDogNDEwcHg7IG92ZXJmbG93LXk6IGF1dG87Ij4nOwogICAgICAgICAgICB2YXIgcm93U3R5bGUgPSAibWFyZ2luOjEwcHggMHB4OyBvdmVyZmxvdzpoaWRkZW47IHdoaXRlLXNwYWNlOm5vd3JhcDsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsiOwoKICAgICAgICAgICAgdmFyIGZpbGVJZHMgPSBvYmouZ2V0U2VsZWN0ZWRGaWxlSWRzKCksCiAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG9iai5nZXRTZWxlY3RlZEZpbGVMaXN0KCk7CgogICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgdmFyIHBhY2thZ2VVcmwgPSBvYmouYnVpbGRQYWNrYWdlVXJsKGZpbGVJZHMsICLmiZPljIXkuIvovb0uemlwIik7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cD7ljovnvKnljIU8L3A+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwIHN0eWxlPSInICsgcm93U3R5bGUgKyAnIj48YSB0aXRsZT0iJyArIHBhY2thZ2VVcmwgKyAnIiBocmVmPSInICsgcGFja2FnZVVybCArICciIHN0eWxlPSJjb2xvcjogYmx1ZTsiPicgKyBwYWNrYWdlVXJsICsgJzwvYT48L3A+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxwPiZuYnNwOzwvcD4nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBpdGVtLmF0dHJpYnV0ZXM7CiAgICAgICAgICAgICAgICBpZiAoZmlsZS5pc0ZvbGRlcikgewogICAgICAgICAgICAgICAgICAgIGZpbGUuZG93bmxvYWRVcmwgPSBvYmouYnVpbGRQYWNrYWdlVXJsKGZpbGUuZmlsZUlkLCBmaWxlLmZpbGVOYW1lICsgIi56aXAiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbGUuZG93bmxvYWRVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIGZpbGUuZG93bmxvYWRVcmw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cD4nICsgKCsraW5kZXgpICsgJ++8micgKyAoZmlsZS5maWxlTmFtZSA/IGZpbGUuZmlsZU5hbWUgOiBmaWxlLmZpbGVJZCkgKyAnPC9wPic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8cCBzdHlsZT0iJyArIHJvd1N0eWxlICsgJyI+PGEgdGl0bGU9IicgKyBmaWxlLmRvd25sb2FkVXJsICsgJyIgaHJlZj0iJyArIGZpbGUuZG93bmxvYWRVcmwgKyAnIiBzdHlsZT0iY29sb3I6IGJsdWU7Ij4nICsgZmlsZS5kb3dubG9hZFVybCArICc8L2E+PC9wPic7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaHRtbCArPSAnPGRpdj4nOwogICAgICAgICAgICBvYmouc2hvd0JveChodG1sKTsKICAgICAgICB9OwoKICAgICAgICBvYmouc2hvd0JveCA9IGZ1bmN0aW9uIChib2R5KSB7CiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGlkPSJKX0ZpbGVNb2RhbCIgY2xhc3M9InRyZWVCb3gtbW9kYWwgbW9kYWwgaW4iIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48ZGl2IGNsYXNzPSJtb2RhbC1kaWFsb2ciPjxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+PGEgY2xhc3M9ImNsb3NlIj7DlzwvYT48aDM+5paH5Lu25LiL6L29PC9oMz48L2Rpdj48ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij48L2Rpdj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICBpZiAoJCgiI0pfRmlsZU1vZGFsIikubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICQoImJvZHkiKS5hcHBlbmQodGVtcGxhdGUpOwogICAgICAgICAgICAgICAgJCgiI0pfRmlsZU1vZGFsIC5jbG9zZSIpLm9uKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAkKCIjSl9GaWxlTW9kYWwiKS5oaWRlKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkKCIjSl9GaWxlTW9kYWwiKS5zaG93KCk7CiAgICAgICAgICAgICQoIiNKX0ZpbGVNb2RhbCAubW9kYWwtYm9keSIpLnNhZmVIdG1sKGJvZHkpOwogICAgICAgIH07CgogICAgICAgIG9iai5idWlsZFBhY2thZ2VVcmwgPSBmdW5jdGlvbiAoZmlsZUlkcywgZmlsZU5hbWUpIHsKICAgICAgICAgICAgdmFyIGRvd25sb2FkVXJsID0gdW5zYWZlV2luZG93LmVkcml2ZS5kb3dubG9hZFVybCwKICAgICAgICAgICAgICAgIHNlc3Npb25LZXkgPSB1bnNhZmVXaW5kb3cuZWRyaXZlLnNlc3Npb25LZXk7CiAgICAgICAgICAgIGZpbGVOYW1lIHx8IChmaWxlTmFtZSA9ICIiKTsKICAgICAgICAgICAgaWYgKHVuc2FmZVdpbmRvdy5fc2hhcmVJZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnByb3RvY29sICsgZG93bmxvYWRVcmwgKyAiP3Nlc3Npb25LZXk9IiArIHNlc3Npb25LZXkgKyAiJmZpbGVJZFM9IiArIGZpbGVJZHMgKyAiJmRvd25sb2FkVHlwZT0zJnNoYXJlSWQ9IiArIHVuc2FmZVdpbmRvdy5fc2hhcmVJZCArICImZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wgKyBkb3dubG9hZFVybCArICI/c2Vzc2lvbktleT0iICsgc2Vzc2lvbktleSArICImZmlsZUlkUz0iICsgZmlsZUlkcyArICImZG93bmxvYWRUeXBlPTEmZmlsZW5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBvYmouZ2V0U2VsZWN0ZWRGaWxlSWRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZmlsZUlkTGlzdCA9IFtdOwogICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBvYmouZ2V0U2VsZWN0ZWRGaWxlTGlzdCgpOwogICAgICAgICAgICBmaWxlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBmaWxlSWRMaXN0LnB1c2goaXRlbS5hdHRyaWJ1dGVzLmZpbGVJZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gZmlsZUlkTGlzdC5qb2luKCIsIik7CiAgICAgICAgfTsKCiAgICAgICAgb2JqLmdldFNlbGVjdGVkRmlsZUxpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBtYWluVmlldyA9IG51bGwsIGZpbGVMaXN0ID0gW107CiAgICAgICAgICAgIGlmICh1bnNhZmVXaW5kb3cuZG93bmxvYWRVcmwpIHsKICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogdW5zYWZlV2luZG93CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh1bnNhZmVXaW5kb3cuX3NoYXJlSWQpIHsKICAgICAgICAgICAgICAgIG1haW5WaWV3ID0gdW5zYWZlV2luZG93LmFwcFJvdXRlci5tYWluVmlldzsKICAgICAgICAgICAgICAgIGlmIChtYWluVmlldyBpbnN0YW5jZW9mIE9iamVjdCAmJiBtYWluVmlldy5maWxlTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gbWFpblZpZXcuZmlsZUxpc3Q7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0LnNlbGVjdGVkKCkubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0ID0gZmlsZUxpc3Quc2VsZWN0ZWQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodW5zYWZlV2luZG93Lm1haW5WaWV3KSB7CiAgICAgICAgICAgICAgICBtYWluVmlldyA9IHVuc2FmZVdpbmRvdy5tYWluVmlldzsKICAgICAgICAgICAgICAgIGlmIChtYWluVmlldy5maWxlTGlzdFRhYk9iaiAmJiBtYWluVmlldy5maWxlTGlzdFRhYk9ialttYWluVmlldy5vcHRpb25zLmZpbGVJZF0pIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG1haW5WaWV3LmZpbGVMaXN0VGFiT2JqW21haW5WaWV3Lm9wdGlvbnMuZmlsZUlkXS5maWxlTGlzdC5zZWxlY3RlZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAobWFpblZpZXcuZ2V0U2VsZWN0ZWRNb2RlbHMpIHsKICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdCA9IG1haW5WaWV3LmdldFNlbGVjdGVkTW9kZWxzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZpbGVMaXN0ID0gW107CiAgICAgICAgICAgIGZpbGVMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLmF0dHJpYnV0ZXMuZmlsZUlkID4gMCkgewogICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsZUxpc3QucHVzaChpdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEZpbGVMaXN0OwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUlkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdXJsID0gcm91dGVyLmdldFVybCgpOwogICAgICAgICAgICB2YXIgbWF0Y2ggPSB1cmwubWF0Y2goL2Nsb3VkXC4xODlcLmNuXC90XC8oWzAtOWEtel0rKS9pKTsKICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsOwogICAgICAgIH07CgogICAgICAgIG9iai5nZXRTaGFyZUxpbmsgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmOwogICAgICAgIH07CgogICAgICAgIG9iai5pc1B3ZFNoYXJlT3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5pc09wdGlvbkFjdGl2ZShvcHRpb24uY29uc3RhbnQudHkxODlfc2hhcmVfc3RhdHVzKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgY29udGFpbmVyLmRlZmluZSgiYXBwX21hbmFnZSIsIFsibWV0YSIsICJ1bnNhZmVXaW5kb3ciXSwgZnVuY3Rpb24gKG1ldGEsIHVuc2FmZVdpbmRvdykgewogICAgICAgIHZhciBvYmogPSB7fTsKCiAgICAgICAgb2JqLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKG1ldGEuZXhpc3RNZXRhKCJtYW5hZ2UiKSkgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93Lk9uZVBhbiA9IGNvbnRhaW5lcjsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0pOwoKICAgIGNvbnRhaW5lci5kZWZpbmUoImFwcCIsIFsiYXBwUnVubmVyIl0sIGZ1bmN0aW9uIChhcHBSdW5uZXIpIHsKICAgICAgICB2YXIgb2JqID0ge307CgogICAgICAgIG9iai5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGFwcFJ1bm5lci5ydW4oWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfYmFpZHUiLAogICAgICAgICAgICAgICAgICAgIG1hdGNoczogWwogICAgICAgICAgICAgICAgICAgICAgICAiYmFpZHUuY29tIgogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogImFwcF93ZWl5dW4iLAogICAgICAgICAgICAgICAgICAgIG1hdGNoczogWwogICAgICAgICAgICAgICAgICAgICAgICAid2VpeXVuLmNvbSIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfbGFuem91cyIsCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICJsYW56b3VzLmNvbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJsYW56b3V4LmNvbSIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfMTg5IiwKICAgICAgICAgICAgICAgICAgICBtYXRjaHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgImNsb3VkLjE4OS5jbiIKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJhcHBfbWFuYWdlIiwKICAgICAgICAgICAgICAgICAgICBtYXRjaHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgIioiCiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdKTsKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gb2JqOwogICAgfSk7CgogICAgLyoqIGxpYiAqKi8KICAgIGNvbnRhaW5lci5kZWZpbmUoIiQiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB3aW5kb3cuJDsKICAgIH0pOwogICAgY29udGFpbmVyLmRlZmluZSgiU25hcCIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHR5cGVvZiBTbmFwICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHJldHVybiBTbmFwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5TbmFwOwogICAgICAgIH0KICAgIH0pOwogICAgY29udGFpbmVyLmRlZmluZSgiRE9NUHVyaWZ5IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodHlwZW9mIERPTVB1cmlmeSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICByZXR1cm4gRE9NUHVyaWZ5OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5ET01QdXJpZnk7CiAgICAgICAgfQogICAgfSk7CgogICAgY29udGFpbmVyLnVzZShbImdtIiwgImNvcmUiLCAiYXBwIl0sIGZ1bmN0aW9uIChnbSwgY29yZSwgYXBwKSB7CiAgICAgICAgZ20ucmVhZHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb3JlLnJlYWR5KGFwcC5ydW4pOwogICAgICAgIH0pOwogICAgfSk7Cn0pKCk7","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.staticfile.org/jquery/3.5.0/jquery.min.js","ts":1599486166732,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My41LjAgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKEMsZSl7InVzZSBzdHJpY3QiO3ZhciB0PVtdLHI9T2JqZWN0LmdldFByb3RvdHlwZU9mLHM9dC5zbGljZSxnPXQuZmxhdD9mdW5jdGlvbihlKXtyZXR1cm4gdC5mbGF0LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbmNhdC5hcHBseShbXSxlKX0sdT10LnB1c2gsaT10LmluZGV4T2Ysbj17fSxvPW4udG9TdHJpbmcsdj1uLmhhc093blByb3BlcnR5LGE9di50b1N0cmluZyxsPWEuY2FsbChPYmplY3QpLHk9e30sbT1mdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmIm51bWJlciIhPXR5cGVvZiBlLm5vZGVUeXBlfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT09ZS53aW5kb3d9LEU9Qy5kb2N1bWVudCxjPXt0eXBlOiEwLHNyYzohMCxub25jZTohMCxub01vZHVsZTohMH07ZnVuY3Rpb24gYihlLHQsbil7dmFyIHIsaSxvPShuPW58fEUpLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKG8udGV4dD1lLHQpZm9yKHIgaW4gYykoaT10W3JdfHx0LmdldEF0dHJpYnV0ZSYmdC5nZXRBdHRyaWJ1dGUocikpJiZvLnNldEF0dHJpYnV0ZShyLGkpO24uaGVhZC5hcHBlbmRDaGlsZChvKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIG51bGw9PWU/ZSsiIjoib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlP25bby5jYWxsKGUpXXx8Im9iamVjdCI6dHlwZW9mIGV9dmFyIGY9IjMuNS4wIixTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBTLmZuLmluaXQoZSx0KX07ZnVuY3Rpb24gcChlKXt2YXIgdD0hIWUmJiJsZW5ndGgiaW4gZSYmZS5sZW5ndGgsbj13KGUpO3JldHVybiFtKGUpJiYheChlKSYmKCJhcnJheSI9PT1ufHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiYwPHQmJnQtMSBpbiBlKX1TLmZuPVMucHJvdG90eXBlPXtqcXVlcnk6Zixjb25zdHJ1Y3RvcjpTLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gcy5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/cy5jYWxsKHRoaXMpOmU8MD90aGlzW2UrdGhpcy5sZW5ndGhdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD1TLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdH0sZWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gUy5lYWNoKHRoaXMsZSl9LG1hcDpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5tYXAodGhpcyxmdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0LGUpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGV2ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4odCsxKSUyfSkpfSxvZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCUyfSkpfSxlcTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCxuPStlKyhlPDA/dDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soMDw9biYmbjx0P1t0aGlzW25dXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDp1LHNvcnQ6dC5zb3J0LHNwbGljZTp0LnNwbGljZX0sUy5leHRlbmQ9Uy5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8sYT1hcmd1bWVudHNbMF18fHt9LHM9MSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgYSYmKGw9YSxhPWFyZ3VtZW50c1tzXXx8e30scysrKSwib2JqZWN0Ij09dHlwZW9mIGF8fG0oYSl8fChhPXt9KSxzPT09dSYmKGE9dGhpcyxzLS0pO3M8dTtzKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW3NdKSlmb3IodCBpbiBlKXI9ZVt0XSwiX19wcm90b19fIiE9PXQmJmEhPT1yJiYobCYmciYmKFMuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhuPWFbdF0sbz1pJiYhQXJyYXkuaXNBcnJheShuKT9bXTppfHxTLmlzUGxhaW5PYmplY3Qobik/bjp7fSxpPSExLGFbdF09Uy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LFMuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1vLmNhbGwoZSkpJiYoISh0PXIoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj12LmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJmEuY2FsbChuKT09PWwpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSx0LG4pe2IoZSx7bm9uY2U6dCYmdC5ub25jZX0sbil9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYocChlKSl7Zm9yKG49ZS5sZW5ndGg7cjxuO3IrKylpZighMT09PXQuY2FsbChlW3JdLHIsZVtyXSkpYnJlYWt9ZWxzZSBmb3IociBpbiBlKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVhaztyZXR1cm4gZX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUmJihwKE9iamVjdChlKSk/Uy5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6dS5jYWxsKG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOmkuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxyPTAsaT1lLmxlbmd0aDtyPG47cisrKWVbaSsrXT10W3JdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPTAsbz1lLmxlbmd0aCxhPSFuO2k8bztpKyspIXQoZVtpXSxpKSE9PWEmJnIucHVzaChlW2ldKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89MCxhPVtdO2lmKHAoZSkpZm9yKHI9ZS5sZW5ndGg7bzxyO28rKyludWxsIT0oaT10KGVbb10sbyxuKSkmJmEucHVzaChpKTtlbHNlIGZvcihvIGluIGUpbnVsbCE9KGk9dChlW29dLG8sbikpJiZhLnB1c2goaSk7cmV0dXJuIGcoYSl9LGd1aWQ6MSxzdXBwb3J0Onl9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoUy5mbltTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSksUy5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe25bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIGQ9ZnVuY3Rpb24obil7dmFyIGUsZCxiLG8saSxoLGYsZyx3LHUsbCxULEMsYSxFLHYscyxjLHksUz0ic2l6emxlIisxKm5ldyBEYXRlLHA9bi5kb2N1bWVudCxrPTAscj0wLG09dWUoKSx4PXVlKCksQT11ZSgpLE49dWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYobD0hMCksMH0saj17fS5oYXNPd25Qcm9wZXJ0eSx0PVtdLHE9dC5wb3AsTD10LnB1c2gsSD10LnB1c2gsTz10LnNsaWNlLFA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFI9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixJPSIoPzpcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcW15cXHJcXG5cXGZdfFtcXHctXXxbXlwwLVxceDdmXSkrIixXPSJcXFsiK00rIiooIitJKyIpKD86IitNKyIqKFsqXiR8IX5dPz0pIitNKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrSSsiKSl8KSIrTSsiKlxcXSIsRj0iOigiK0krIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1crIikqKXwuKilcXCl8KSIsQj1uZXcgUmVnRXhwKE0rIisiLCJnIiksJD1uZXcgUmVnRXhwKCJeIitNKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00rIiskIiwiZyIpLF89bmV3IFJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSx6PW5ldyBSZWdFeHAoIl4iK00rIiooWz4rfl18IitNKyIpIitNKyIqIiksVT1uZXcgUmVnRXhwKE0rInw+IiksWD1uZXcgUmVnRXhwKEYpLFY9bmV3IFJlZ0V4cCgiXiIrSSsiJCIpLEc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrSSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitJKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitJKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrVyksUFNFVURPOm5ldyBSZWdFeHAoIl4iK0YpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L0hUTUwkL2ksUT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLEo9L15oXGQkL2ksSz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGVlPS9bK35dLyx0ZT1uZXcgUmVnRXhwKCJcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcKFteXFxyXFxuXFxmXSkiLCJnIiksbmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0iMHgiK2Uuc2xpY2UoMSktNjU1MzY7cmV0dXJuIHR8fChuPDA/U3RyaW5nLmZyb21DaGFyQ29kZShuKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKG4+PjEwfDU1Mjk2LDEwMjMmbnw1NjMyMCkpfSxyZT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0PyJcMCI9PT1lPyJcdWZmZmQiOmUuc2xpY2UoMCwtMSkrIlxcIitlLmNoYXJDb2RlQXQoZS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2V9LG9lPWZ1bmN0aW9uKCl7VCgpfSxhZT1iZShmdW5jdGlvbihlKXtyZXR1cm4hMD09PWUuZGlzYWJsZWQmJiJmaWVsZHNldCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LHtkaXI6InBhcmVudE5vZGUiLG5leHQ6ImxlZ2VuZCJ9KTt0cnl7SC5hcHBseSh0PU8uY2FsbChwLmNoaWxkTm9kZXMpLHAuY2hpbGROb2RlcyksdFtwLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlKXtIPXthcHBseTp0Lmxlbmd0aD9mdW5jdGlvbihlLHQpe0wuYXBwbHkoZSxPLmNhbGwodCkpfTpmdW5jdGlvbihlLHQpe3ZhciBuPWUubGVuZ3RoLHI9MDt3aGlsZShlW24rK109dFtyKytdKTtlLmxlbmd0aD1uLTF9fX1mdW5jdGlvbiBzZSh0LGUsbixyKXt2YXIgaSxvLGEscyx1LGwsYyxmPWUmJmUub3duZXJEb2N1bWVudCxwPWU/ZS5ub2RlVHlwZTo5O2lmKG49bnx8W10sInN0cmluZyIhPXR5cGVvZiB0fHwhdHx8MSE9PXAmJjkhPT1wJiYxMSE9PXApcmV0dXJuIG47aWYoIXImJihUKGUpLGU9ZXx8QyxFKSl7aWYoMTEhPT1wJiYodT1aLmV4ZWModCkpKWlmKGk9dVsxXSl7aWYoOT09PXApe2lmKCEoYT1lLmdldEVsZW1lbnRCeUlkKGkpKSlyZXR1cm4gbjtpZihhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZSBpZihmJiYoYT1mLmdldEVsZW1lbnRCeUlkKGkpKSYmeShlLGEpJiZhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZXtpZih1WzJdKXJldHVybiBILmFwcGx5KG4sZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSksbjtpZigoaT11WzNdKSYmZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkobixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaSkpLG59aWYoZC5xc2EmJiFOW3QrIiAiXSYmKCF2fHwhdi50ZXN0KHQpKSYmKDEhPT1wfHwib2JqZWN0IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpe2lmKGM9dCxmPWUsMT09PXAmJihVLnRlc3QodCl8fHoudGVzdCh0KSkpeyhmPWVlLnRlc3QodCkmJnllKGUucGFyZW50Tm9kZSl8fGUpPT09ZSYmZC5zY29wZXx8KChzPWUuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXMucmVwbGFjZShyZSxpZSk6ZS5zZXRBdHRyaWJ1dGUoImlkIixzPVMpKSxvPShsPWgodCkpLmxlbmd0aDt3aGlsZShvLS0pbFtvXT0ocz8iIyIrczoiOnNjb3BlIikrIiAiK3hlKGxbb10pO2M9bC5qb2luKCIsIil9dHJ5e3JldHVybiBILmFwcGx5KG4sZi5xdWVyeVNlbGVjdG9yQWxsKGMpKSxufWNhdGNoKGUpe04odCwhMCl9ZmluYWxseXtzPT09UyYmZS5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gZyh0LnJlcGxhY2UoJCwiJDEiKSxlLG4scil9ZnVuY3Rpb24gdWUoKXt2YXIgcj1bXTtyZXR1cm4gZnVuY3Rpb24gZSh0LG4pe3JldHVybiByLnB1c2godCsiICIpPmIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Iuc2hpZnQoKV0sZVt0KyIgIl09bn19ZnVuY3Rpb24gbGUoZSl7cmV0dXJuIGVbU109ITAsZX1mdW5jdGlvbiBjZShlKXt2YXIgdD1DLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChlKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gZmUoZSx0KXt2YXIgbj1lLnNwbGl0KCJ8Iikscj1uLmxlbmd0aDt3aGlsZShyLS0pYi5hdHRySGFuZGxlW25bcl1dPXR9ZnVuY3Rpb24gcGUoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGRlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnR5cGU9PT10fX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09dHx8ImJ1dHRvbiI9PT10KSYmZS50eXBlPT09bn19ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiJmb3JtImluIGU/ZS5wYXJlbnROb2RlJiYhMT09PWUuZGlzYWJsZWQ/ImxhYmVsImluIGU/ImxhYmVsImluIGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT10OmUuZGlzYWJsZWQ9PT10OmUuaXNEaXNhYmxlZD09PXR8fGUuaXNEaXNhYmxlZCE9PSF0JiZhZShlKT09PXQ6ZS5kaXNhYmxlZD09PXQ6ImxhYmVsImluIGUmJmUuZGlzYWJsZWQ9PT10fX1mdW5jdGlvbiB2ZShhKXtyZXR1cm4gbGUoZnVuY3Rpb24obyl7cmV0dXJuIG89K28sbGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoW10sZS5sZW5ndGgsbyksaT1yLmxlbmd0aDt3aGlsZShpLS0pZVtuPXJbaV1dJiYoZVtuXT0hKHRbbl09ZVtuXSkpfSl9KX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZlfWZvcihlIGluIGQ9c2Uuc3VwcG9ydD17fSxpPXNlLmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZXNwYWNlVVJJLG49KGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFZLnRlc3QodHx8biYmbi5ub2RlTmFtZXx8IkhUTUwiKX0sVD1zZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6cDtyZXR1cm4gciE9QyYmOT09PXIubm9kZVR5cGUmJnIuZG9jdW1lbnRFbGVtZW50JiYoYT0oQz1yKS5kb2N1bWVudEVsZW1lbnQsRT0haShDKSxwIT1DJiYobj1DLmRlZmF1bHRWaWV3KSYmbi50b3AhPT1uJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixvZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLG9lKSksZC5zY29wZT1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChDLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwidW5kZWZpbmVkIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCYmIWUucXVlcnlTZWxlY3RvckFsbCgiOnNjb3BlIGZpZWxkc2V0IGRpdiIpLmxlbmd0aH0pLGQuYXR0cmlidXRlcz1jZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxkLmdldEVsZW1lbnRzQnlUYWdOYW1lPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPUsudGVzdChDLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGQuZ2V0QnlJZD1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5pZD1TLCFDLmdldEVsZW1lbnRzQnlOYW1lfHwhQy5nZXRFbGVtZW50c0J5TmFtZShTKS5sZW5ndGh9KSxkLmdldEJ5SWQ/KGIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSh0ZSxuZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJkUpe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/W25dOltdfX0pOihiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgbj1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiB0JiZ0LnZhbHVlPT09bn19LGIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRSl7dmFyIG4scixpLG89dC5nZXRFbGVtZW50QnlJZChlKTtpZihvKXtpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb107aT10LmdldEVsZW1lbnRzQnlOYW1lKGUpLHI9MDt3aGlsZShvPWlbcisrXSlpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb119cmV0dXJuW119fSksYi5maW5kLlRBRz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsdCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6ZC5xc2E/dC5xdWVyeVNlbGVjdG9yQWxsKGUpOnZvaWQgMH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30sYi5maW5kLkNMQVNTPWQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmRSlyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxzPVtdLHY9W10sKGQucXNhPUsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGNlKGZ1bmN0aW9uKGUpe3ZhciB0O2EuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPSI8YSBpZD0nIitTKyInPjwvYT48c2VsZWN0IGlkPSciK1MrIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmdi5wdXNoKCJbKl4kXT0iK00rIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIiooPzp2YWx1ZXwiK1IrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IitTKyItXSIpLmxlbmd0aHx8di5wdXNoKCJ+PSIpLCh0PUMuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkuc2V0QXR0cmlidXRlKCJuYW1lIiwiIiksZS5hcHBlbmRDaGlsZCh0KSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPScnXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIipuYW1lIitNKyIqPSIrTSsiKig/OicnfFwiXCIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8di5wdXNoKCI6Y2hlY2tlZCIpLGUucXVlcnlTZWxlY3RvckFsbCgiYSMiK1MrIisqIikubGVuZ3RofHx2LnB1c2goIi4jLitbK35dIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJcXFxmIiksdi5wdXNoKCJbXFxyXFxuXFxmXSIpfSksY2UoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+PHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PiI7dmFyIHQ9Qy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmdi5wdXNoKCJuYW1lIitNKyIqWypeJHwhfl0/PSIpLDIhPT1lLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoJiZ2LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZD0hMCwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGgmJnYucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSx2LnB1c2goIiwuKjoiKX0pKSwoZC5tYXRjaGVzU2VsZWN0b3I9Sy50ZXN0KGM9YS5tYXRjaGVzfHxhLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tc01hdGNoZXNTZWxlY3RvcikpJiZjZShmdW5jdGlvbihlKXtkLmRpc2Nvbm5lY3RlZE1hdGNoPWMuY2FsbChlLCIqIiksYy5jYWxsKGUsIltzIT0nJ106eCIpLHMucHVzaCgiIT0iLEYpfSksdj12Lmxlbmd0aCYmbmV3IFJlZ0V4cCh2LmpvaW4oInwiKSkscz1zLmxlbmd0aCYmbmV3IFJlZ0V4cChzLmpvaW4oInwiKSksdD1LLnRlc3QoYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikseT10fHxLLnRlc3QoYS5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxEPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBufHwoMSYobj0oZS5vd25lckRvY3VtZW50fHxlKT09KHQub3duZXJEb2N1bWVudHx8dCk/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KToxKXx8IWQuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09bj9lPT1DfHxlLm93bmVyRG9jdW1lbnQ9PXAmJnkocCxlKT8tMTp0PT1DfHx0Lm93bmVyRG9jdW1lbnQ9PXAmJnkocCx0KT8xOnU/UCh1LGUpLVAodSx0KTowOjQmbj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PUM/LTE6dD09Qz8xOmk/LTE6bz8xOnU/UCh1LGUpLVAodSx0KTowO2lmKGk9PT1vKXJldHVybiBwZShlLHQpO249ZTt3aGlsZShuPW4ucGFyZW50Tm9kZSlhLnVuc2hpZnQobik7bj10O3doaWxlKG49bi5wYXJlbnROb2RlKXMudW5zaGlmdChuKTt3aGlsZShhW3JdPT09c1tyXSlyKys7cmV0dXJuIHI/cGUoYVtyXSxzW3JdKTphW3JdPT1wPy0xOnNbcl09PXA/MTowfSksQ30sc2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBzZShlLG51bGwsbnVsbCx0KX0sc2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoVChlKSxkLm1hdGNoZXNTZWxlY3RvciYmRSYmIU5bdCsiICJdJiYoIXN8fCFzLnRlc3QodCkpJiYoIXZ8fCF2LnRlc3QodCkpKXRyeXt2YXIgbj1jLmNhbGwoZSx0KTtpZihufHxkLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goZSl7Tih0LCEwKX1yZXR1cm4gMDxzZSh0LEMsbnVsbCxbZV0pLmxlbmd0aH0sc2UuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKSx5KGUsdCl9LHNlLmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKTt2YXIgbj1iLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxyPW4mJmouY2FsbChiLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9uKGUsdCwhRSk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1yP3I6ZC5hdHRyaWJ1dGVzfHwhRT9lLmdldEF0dHJpYnV0ZSh0KToocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOm51bGx9LHNlLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZSsiIikucmVwbGFjZShyZSxpZSl9LHNlLmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sc2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MCxpPTA7aWYobD0hZC5kZXRlY3REdXBsaWNhdGVzLHU9IWQuc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksbCl7d2hpbGUodD1lW2krK10pdD09PWVbaV0mJihyPW4ucHVzaChpKSk7d2hpbGUoci0tKWUuc3BsaWNlKG5bcl0sMSl9cmV0dXJuIHU9bnVsbCxlfSxvPXNlLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2Ugd2hpbGUodD1lW3IrK10pbis9byh0KTtyZXR1cm4gbn0sKGI9c2Uuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86bGUsbWF0Y2g6RyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKHRlLG5lKSxlWzNdPShlWzNdfHxlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh0ZSxuZSksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHNlLmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnNlLmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXT9lWzJdPWVbNF18fGVbNV18fCIiOm4mJlgudGVzdChuKSYmKHQ9aChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodGUsbmUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PW1bZSsiICJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2UrIigiK00rInwkKSIpKSYmbShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXNlLmF0dHIoZSxuKTtyZXR1cm4gbnVsbD09dD8iIT0iPT09cjohcnx8KHQrPSIiLCI9Ij09PXI/dD09PWk6IiE9Ij09PXI/dCE9PWk6Il49Ij09PXI/aSYmMD09PXQuaW5kZXhPZihpKToiKj0iPT09cj9pJiYtMTx0LmluZGV4T2YoaSk6IiQ9Ij09PXI/aSYmdC5zbGljZSgtaS5sZW5ndGgpPT09aToifj0iPT09cj8tMTwoIiAiK3QucmVwbGFjZShCLCIgIikrIiAiKS5pbmRleE9mKGkpOiJ8PSI9PT1yJiYodD09PWl8fHQuc2xpY2UoMCxpLmxlbmd0aCsxKT09PWkrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihoLGUsdCxnLHYpe3ZhciB5PSJudGgiIT09aC5zbGljZSgwLDMpLG09Imxhc3QiIT09aC5zbGljZSgtNCkseD0ib2YtdHlwZSI9PT1lO3JldHVybiAxPT09ZyYmMD09PXY/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbD15IT09bT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLGM9ZS5wYXJlbnROb2RlLGY9eCYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHA9IW4mJiF4LGQ9ITE7aWYoYyl7aWYoeSl7d2hpbGUobCl7YT1lO3doaWxlKGE9YVtsXSlpZih4P2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWY6MT09PWEubm9kZVR5cGUpcmV0dXJuITE7dT1sPSJvbmx5Ij09PWgmJiF1JiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKHU9W20/Yy5maXJzdENoaWxkOmMubGFzdENoaWxkXSxtJiZwKXtkPShzPShyPShpPShvPShhPWMpW1NdfHwoYVtTXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdfHxbXSlbMF09PT1rJiZyWzFdKSYmclsyXSxhPXMmJmMuY2hpbGROb2Rlc1tzXTt3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigxPT09YS5ub2RlVHlwZSYmKytkJiZhPT09ZSl7aVtoXT1bayxzLGRdO2JyZWFrfX1lbHNlIGlmKHAmJihkPXM9KHI9KGk9KG89KGE9ZSlbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF18fFtdKVswXT09PWsmJnJbMV0pLCExPT09ZCl3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigoeD9hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1mOjE9PT1hLm5vZGVUeXBlKSYmKytkJiYocCYmKChpPShvPWFbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF09W2ssZF0pLGE9PT1lKSlicmVhaztyZXR1cm4oZC09dik9PT1nfHxkJWc9PTAmJjA8PWQvZ319fSxQU0VVRE86ZnVuY3Rpb24oZSxvKXt2YXIgdCxhPWIucHNldWRvc1tlXXx8Yi5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIGFbU10/YShvKToxPGEubGVuZ3RoPyh0PVtlLGUsIiIsb10sYi5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/bGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoZSxvKSxpPXIubGVuZ3RoO3doaWxlKGktLSllW249UChlLHJbaV0pXT0hKHRbbl09cltpXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gYShlLDAsdCl9KTphfX0scHNldWRvczp7bm90OmxlKGZ1bmN0aW9uKGUpe3ZhciByPVtdLGk9W10scz1mKGUucmVwbGFjZSgkLCIkMSIpKTtyZXR1cm4gc1tTXT9sZShmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvPXMoZSxudWxsLHIsW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShpPW9bYV0pJiYoZVthXT0hKHRbYV09aSkpfSk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByWzBdPWUscyhyLG51bGwsbixpKSxyWzBdPW51bGwsIWkucG9wKCl9fSksaGFzOmxlKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gMDxzZSh0LGUpLmxlbmd0aH19KSxjb250YWluczpsZShmdW5jdGlvbih0KXtyZXR1cm4gdD10LnJlcGxhY2UodGUsbmUpLGZ1bmN0aW9uKGUpe3JldHVybi0xPChlLnRleHRDb250ZW50fHxvKGUpKS5pbmRleE9mKHQpfX0pLGxhbmc6bGUoZnVuY3Rpb24obil7cmV0dXJuIFYudGVzdChufHwiIil8fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK24pLG49bi5yZXBsYWNlKHRlLG5lKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGUpe3ZhciB0O2Rve2lmKHQ9RT9lLmxhbmc6ZS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGUuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuKHQ9dC50b0xvd2VyQ2FzZSgpKT09PW58fDA9PT10LmluZGV4T2YobisiLSIpfXdoaWxlKChlPWUucGFyZW50Tm9kZSkmJjE9PT1lLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bi5sb2NhdGlvbiYmbi5sb2NhdGlvbi5oYXNoO3JldHVybiB0JiZ0LnNsaWNlKDEpPT09ZS5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWF9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Qy5hY3RpdmVFbGVtZW50JiYoIUMuaGFzRm9jdXN8fEMuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6Z2UoITEpLGRpc2FibGVkOmdlKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmISFlLmNoZWNrZWR8fCJvcHRpb24iPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwhMD09PWUuc2VsZWN0ZWR9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hYi5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEoudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09dC50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6dmUoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnZlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTp2ZShmdW5jdGlvbihlLHQsbil7cmV0dXJuW248MD9uK3Q6bl19KSxldmVuOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTE7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksbHQ6dmUoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0OnQ8bj90Om47MDw9LS1yOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDp2ZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjsrK3I8dDspZS5wdXNoKHIpO3JldHVybiBlfSl9fSkucHNldWRvcy5udGg9Yi5wc2V1ZG9zLmVxLHtyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSliLnBzZXVkb3NbZV09ZGUoZSk7Zm9yKGUgaW57c3VibWl0OiEwLHJlc2V0OiEwfSliLnBzZXVkb3NbZV09aGUoZSk7ZnVuY3Rpb24gbWUoKXt9ZnVuY3Rpb24geGUoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxyPSIiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBiZShzLGUsdCl7dmFyIHU9ZS5kaXIsbD1lLm5leHQsYz1sfHx1LGY9dCYmInBhcmVudE5vZGUiPT09YyxwPXIrKztyZXR1cm4gZS5maXJzdD9mdW5jdGlvbihlLHQsbil7d2hpbGUoZT1lW3VdKWlmKDE9PT1lLm5vZGVUeXBlfHxmKXJldHVybiBzKGUsdCxuKTtyZXR1cm4hMX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPVtrLHBdO2lmKG4pe3doaWxlKGU9ZVt1XSlpZigoMT09PWUubm9kZVR5cGV8fGYpJiZzKGUsdCxuKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGU9ZVt1XSlpZigxPT09ZS5ub2RlVHlwZXx8ZilpZihpPShvPWVbU118fChlW1NdPXt9KSlbZS51bmlxdWVJRF18fChvW2UudW5pcXVlSURdPXt9KSxsJiZsPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWU9ZVt1XXx8ZTtlbHNle2lmKChyPWlbY10pJiZyWzBdPT09ayYmclsxXT09PXApcmV0dXJuIGFbMl09clsyXTtpZigoaVtjXT1hKVsyXT1zKGUsdCxuKSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24gd2UoaSl7cmV0dXJuIDE8aS5sZW5ndGg/ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkubGVuZ3RoO3doaWxlKHItLSlpZighaVtyXShlLHQsbikpcmV0dXJuITE7cmV0dXJuITB9OmlbMF19ZnVuY3Rpb24gVGUoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBDZShkLGgsZyx2LHksZSl7cmV0dXJuIHYmJiF2W1NdJiYodj1DZSh2KSkseSYmIXlbU10mJih5PUNlKHksZSkpLGxlKGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVtdLHU9W10sbD10Lmxlbmd0aCxjPWV8fGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspc2UoZSx0W3JdLG4pO3JldHVybiBufShofHwiKiIsbi5ub2RlVHlwZT9bbl06bixbXSksZj0hZHx8IWUmJmg/YzpUZShjLHMsZCxuLHIpLHA9Zz95fHwoZT9kOmx8fHYpP1tdOnQ6ZjtpZihnJiZnKGYscCxuLHIpLHYpe2k9VGUocCx1KSx2KGksW10sbixyKSxvPWkubGVuZ3RoO3doaWxlKG8tLSkoYT1pW29dKSYmKHBbdVtvXV09IShmW3Vbb11dPWEpKX1pZihlKXtpZih5fHxkKXtpZih5KXtpPVtdLG89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiZpLnB1c2goZltvXT1hKTt5KG51bGwscD1bXSxpLHIpfW89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiYtMTwoaT15P1AoZSxhKTpzW29dKSYmKGVbaV09ISh0W2ldPWEpKX19ZWxzZSBwPVRlKHA9PT10P3Auc3BsaWNlKGwscC5sZW5ndGgpOnApLHk/eShudWxsLHQscCxyKTpILmFwcGx5KHQscCl9KX1mdW5jdGlvbiBFZShlKXtmb3IodmFyIGksdCxuLHI9ZS5sZW5ndGgsbz1iLnJlbGF0aXZlW2VbMF0udHlwZV0sYT1vfHxiLnJlbGF0aXZlWyIgIl0scz1vPzE6MCx1PWJlKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09aX0sYSwhMCksbD1iZShmdW5jdGlvbihlKXtyZXR1cm4tMTxQKGksZSl9LGEsITApLGM9W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj0hbyYmKG58fHQhPT13KXx8KChpPXQpLm5vZGVUeXBlP3UoZSx0LG4pOmwoZSx0LG4pKTtyZXR1cm4gaT1udWxsLHJ9XTtzPHI7cysrKWlmKHQ9Yi5yZWxhdGl2ZVtlW3NdLnR5cGVdKWM9W2JlKHdlKGMpLHQpXTtlbHNle2lmKCh0PWIuZmlsdGVyW2Vbc10udHlwZV0uYXBwbHkobnVsbCxlW3NdLm1hdGNoZXMpKVtTXSl7Zm9yKG49KytzO248cjtuKyspaWYoYi5yZWxhdGl2ZVtlW25dLnR5cGVdKWJyZWFrO3JldHVybiBDZSgxPHMmJndlKGMpLDE8cyYmeGUoZS5zbGljZSgwLHMtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW3MtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZSgkLCIkMSIpLHQsczxuJiZFZShlLnNsaWNlKHMsbikpLG48ciYmRWUoZT1lLnNsaWNlKG4pKSxuPHImJnhlKGUpKX1jLnB1c2godCl9cmV0dXJuIHdlKGMpfXJldHVybiBtZS5wcm90b3R5cGU9Yi5maWx0ZXJzPWIucHNldWRvcyxiLnNldEZpbHRlcnM9bmV3IG1lLGg9c2UudG9rZW5pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsPXhbZSsiICJdO2lmKGwpcmV0dXJuIHQ/MDpsLnNsaWNlKDApO2E9ZSxzPVtdLHU9Yi5wcmVGaWx0ZXI7d2hpbGUoYSl7Zm9yKG8gaW4gbiYmIShyPV8uZXhlYyhhKSl8fChyJiYoYT1hLnNsaWNlKHJbMF0ubGVuZ3RoKXx8YSkscy5wdXNoKGk9W10pKSxuPSExLChyPXouZXhlYyhhKSkmJihuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpyWzBdLnJlcGxhY2UoJCwiICIpfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSksYi5maWx0ZXIpIShyPUdbb10uZXhlYyhhKSl8fHVbb10mJiEocj11W29dKHIpKXx8KG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOm8sbWF0Y2hlczpyfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/YS5sZW5ndGg6YT9zZS5lcnJvcihlKTp4KGUscykuc2xpY2UoMCl9LGY9c2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHYseSxtLHgscixpPVtdLG89W10sYT1BW2UrIiAiXTtpZighYSl7dHx8KHQ9aChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pKGE9RWUodFtuXSkpW1NdP2kucHVzaChhKTpvLnB1c2goYSk7KGE9QShlLCh2PW8sbT0wPCh5PWkpLmxlbmd0aCx4PTA8di5sZW5ndGgscj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1PTAsbD0iMCIsYz1lJiZbXSxmPVtdLHA9dyxkPWV8fHgmJmIuZmluZC5UQUcoIioiLGkpLGg9ays9bnVsbD09cD8xOk1hdGgucmFuZG9tKCl8fC4xLGc9ZC5sZW5ndGg7Zm9yKGkmJih3PXQ9PUN8fHR8fGkpO2whPT1nJiZudWxsIT0obz1kW2xdKTtsKyspe2lmKHgmJm8pe2E9MCx0fHxvLm93bmVyRG9jdW1lbnQ9PUN8fChUKG8pLG49IUUpO3doaWxlKHM9dlthKytdKWlmKHMobyx0fHxDLG4pKXtyLnB1c2gobyk7YnJlYWt9aSYmKGs9aCl9bSYmKChvPSFzJiZvKSYmdS0tLGUmJmMucHVzaChvKSl9aWYodSs9bCxtJiZsIT09dSl7YT0wO3doaWxlKHM9eVthKytdKXMoYyxmLHQsbik7aWYoZSl7aWYoMDx1KXdoaWxlKGwtLSljW2xdfHxmW2xdfHwoZltsXT1xLmNhbGwocikpO2Y9VGUoZil9SC5hcHBseShyLGYpLGkmJiFlJiYwPGYubGVuZ3RoJiYxPHUreS5sZW5ndGgmJnNlLnVuaXF1ZVNvcnQocil9cmV0dXJuIGkmJihrPWgsdz1wKSxjfSxtP2xlKHIpOnIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gYX0sZz1zZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLGM9IXImJmgoZT1sLnNlbGVjdG9yfHxlKTtpZihuPW58fFtdLDE9PT1jLmxlbmd0aCl7aWYoMjwobz1jWzBdPWNbMF0uc2xpY2UoMCkpLmxlbmd0aCYmIklEIj09PShhPW9bMF0pLnR5cGUmJjk9PT10Lm5vZGVUeXBlJiZFJiZiLnJlbGF0aXZlW29bMV0udHlwZV0pe2lmKCEodD0oYi5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtsJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShvLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPUcubmVlZHNDb250ZXh0LnRlc3QoZSk/MDpvLmxlbmd0aDt3aGlsZShpLS0pe2lmKGE9b1tpXSxiLnJlbGF0aXZlW3M9YS50eXBlXSlicmVhaztpZigodT1iLmZpbmRbc10pJiYocj11KGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSxlZS50ZXN0KG9bMF0udHlwZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpKSl7aWYoby5zcGxpY2UoaSwxKSwhKGU9ci5sZW5ndGgmJnhlKG8pKSlyZXR1cm4gSC5hcHBseShuLHIpLG47YnJlYWt9fX1yZXR1cm4obHx8ZihlLGMpKShyLHQsIUUsbiwhdHx8ZWUudGVzdChlKSYmeWUodC5wYXJlbnROb2RlKXx8dCksbn0sZC5zb3J0U3RhYmxlPVMuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1TLGQuZGV0ZWN0RHVwbGljYXRlcz0hIWwsVCgpLGQuc29ydERldGFjaGVkPWNlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQy5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGZlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxkLmF0dHJpYnV0ZXMmJmNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGZlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxmZShSLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLHNlfShDKTtTLmZpbmQ9ZCxTLmV4cHI9ZC5zZWxlY3RvcnMsUy5leHByWyI6Il09Uy5leHByLnBzZXVkb3MsUy51bmlxdWVTb3J0PVMudW5pcXVlPWQudW5pcXVlU29ydCxTLnRleHQ9ZC5nZXRUZXh0LFMuaXNYTUxEb2M9ZC5pc1hNTCxTLmNvbnRhaW5zPWQuY29udGFpbnMsUy5lc2NhcGVTZWxlY3Rvcj1kLmVzY2FwZTt2YXIgaD1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmUyhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LGs9Uy5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgTj0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBEKGUsbixyKXtyZXR1cm4gbShuKT9TLmdyZXAoZSxmdW5jdGlvbihlLHQpe3JldHVybiEhbi5jYWxsKGUsdCxlKSE9PXJ9KTpuLm5vZGVUeXBlP1MuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09biE9PXJ9KToic3RyaW5nIiE9dHlwZW9mIG4/Uy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuLTE8aS5jYWxsKG4sZSkhPT1yfSk6Uy5maWx0ZXIobixlLHIpfVMuZmlsdGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP1MuZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106Uy5maW5kLm1hdGNoZXMoZSxTLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LFMuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmxlbmd0aCxpPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhTKGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZihTLmNvbnRhaW5zKGlbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKG49dGhpcy5wdXNoU3RhY2soW10pLHQ9MDt0PHI7dCsrKVMuZmluZChlLGlbdF0sbik7cmV0dXJuIDE8cj9TLnVuaXF1ZVNvcnQobik6bn0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFEKHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZrLnRlc3QoZSk/UyhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBqLHE9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLzsoUy5mbi5pbml0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKCFlKXJldHVybiB0aGlzO2lmKG49bnx8aiwic3RyaW5nIj09dHlwZW9mIGUpe2lmKCEocj0iPCI9PT1lWzBdJiYiPiI9PT1lW2UubGVuZ3RoLTFdJiYzPD1lLmxlbmd0aD9bbnVsbCxlLG51bGxdOnEuZXhlYyhlKSl8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgUz90WzBdOnQsUy5tZXJnZSh0aGlzLFMucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6RSwhMCkpLE4udGVzdChyWzFdKSYmUy5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpbSh0aGlzW3JdKT90aGlzW3JdKHRbcl0pOnRoaXMuYXR0cihyLHRbcl0pO3JldHVybiB0aGlzfXJldHVybihpPUUuZ2V0RWxlbWVudEJ5SWQoclsyXSkpJiYodGhpc1swXT1pLHRoaXMubGVuZ3RoPTEpLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0oZSk/dm9pZCAwIT09bi5yZWFkeT9uLnJlYWR5KGUpOmUoUyk6Uy5tYWtlQXJyYXkoZSx0aGlzKX0pLnByb3RvdHlwZT1TLmZuLGo9UyhFKTt2YXIgTD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxIPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2Z1bmN0aW9uIE8oZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfVMuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9UyhlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxuO2UrKylpZihTLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT0ic3RyaW5nIiE9dHlwZW9mIGUmJlMoZSk7aWYoIWsudGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT8tMTxhLmluZGV4KG4pOjE9PT1uLm5vZGVUeXBlJiZTLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKDE8by5sZW5ndGg/Uy51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/aS5jYWxsKFMoZSksdGhpc1swXSk6aS5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnB1c2hTdGFjayhTLnVuaXF1ZVNvcnQoUy5tZXJnZSh0aGlzLmdldCgpLFMoZSx0KSkpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksUy5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gaChlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gTyhlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBPKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGgoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGgoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBoKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBUKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gVChlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5jb250ZW50RG9jdW1lbnQmJnIoZS5jb250ZW50RG9jdW1lbnQpP2UuY29udGVudERvY3VtZW50OihBKGUsInRlbXBsYXRlIikmJihlPWUuY29udGVudHx8ZSksUy5tZXJnZShbXSxlLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKHIsaSl7Uy5mbltyXT1mdW5jdGlvbihlLHQpe3ZhciBuPVMubWFwKHRoaXMsaSxlKTtyZXR1cm4iVW50aWwiIT09ci5zbGljZSgtNSkmJih0PWUpLHQmJiJzdHJpbmciPT10eXBlb2YgdCYmKG49Uy5maWx0ZXIodCxuKSksMTx0aGlzLmxlbmd0aCYmKEhbcl18fFMudW5pcXVlU29ydChuKSxMLnRlc3QocikmJm4ucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgUD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIFIoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gTShlKXt0aHJvdyBlfWZ1bmN0aW9uIEkoZSx0LG4scil7dmFyIGk7dHJ5e2UmJm0oaT1lLnByb21pc2UpP2kuY2FsbChlKS5kb25lKHQpLmZhaWwobik6ZSYmbShpPWUudGhlbik/aS5jYWxsKGUsdCxuKTp0LmFwcGx5KHZvaWQgMCxbZV0uc2xpY2UocikpfWNhdGNoKGUpe24uYXBwbHkodm9pZCAwLFtlXSl9fVMuQ2FsbGJhY2tzPWZ1bmN0aW9uKHIpe3ZhciBlLG47cj0ic3RyaW5nIj09dHlwZW9mIHI/KGU9cixuPXt9LFMuZWFjaChlLm1hdGNoKFApfHxbXSxmdW5jdGlvbihlLHQpe25bdF09ITB9KSxuKTpTLmV4dGVuZCh7fSxyKTt2YXIgaSx0LG8sYSxzPVtdLHU9W10sbD0tMSxjPWZ1bmN0aW9uKCl7Zm9yKGE9YXx8ci5vbmNlLG89aT0hMDt1Lmxlbmd0aDtsPS0xKXt0PXUuc2hpZnQoKTt3aGlsZSgrK2w8cy5sZW5ndGgpITE9PT1zW2xdLmFwcGx5KHRbMF0sdFsxXSkmJnIuc3RvcE9uRmFsc2UmJihsPXMubGVuZ3RoLHQ9ITEpfXIubWVtb3J5fHwodD0hMSksaT0hMSxhJiYocz10P1tdOiIiKX0sZj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIHMmJih0JiYhaSYmKGw9cy5sZW5ndGgtMSx1LnB1c2godCkpLGZ1bmN0aW9uIG4oZSl7Uy5lYWNoKGUsZnVuY3Rpb24oZSx0KXttKHQpP3IudW5pcXVlJiZmLmhhcyh0KXx8cy5wdXNoKHQpOnQmJnQubGVuZ3RoJiYic3RyaW5nIiE9PXcodCkmJm4odCl9KX0oYXJndW1lbnRzKSx0JiYhaSYmYygpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKC0xPChuPVMuaW5BcnJheSh0LHMsbikpKXMuc3BsaWNlKG4sMSksbjw9bCYmbC0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlPy0xPFMuaW5BcnJheShlLHMpOjA8cy5sZW5ndGh9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHMmJihzPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT1bXSxzPXQ9IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sbG9jazpmdW5jdGlvbigpe3JldHVybiBhPXU9W10sdHx8aXx8KHM9dD0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFhfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiBhfHwodD1bZSwodD10fHxbXSkuc2xpY2U/dC5zbGljZSgpOnRdLHUucHVzaCh0KSxpfHxjKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gZn0sUy5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciBvPVtbIm5vdGlmeSIsInByb2dyZXNzIixTLkNhbGxiYWNrcygibWVtb3J5IiksUy5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxpPSJwZW5kaW5nIixhPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBpfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzO3JldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKHIpe1MuZWFjaChvLGZ1bmN0aW9uKGUsdCl7dmFyIG49bShpW3RbNF1dKSYmaVt0WzRdXTtzW3RbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9biYmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmbShlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHIubm90aWZ5KS5kb25lKHIucmVzb2x2ZSkuZmFpbChyLnJlamVjdCk6clt0WzBdKyJXaXRoIl0odGhpcyxuP1tlXTphcmd1bWVudHMpfSl9KSxpPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxuLHIpe3ZhciB1PTA7ZnVuY3Rpb24gbChpLG8sYSxzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLGU9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCEoaTx1KSl7aWYoKGU9YS5hcHBseShuLHIpKT09PW8ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO3Q9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sbSh0KT9zP3QuY2FsbChlLGwodSxvLFIscyksbCh1LG8sTSxzKSk6KHUrKyx0LmNhbGwoZSxsKHUsbyxSLHMpLGwodSxvLE0scyksbCh1LG8sUixvLm5vdGlmeVdpdGgpKSk6KGEhPT1SJiYobj12b2lkIDAscj1bZV0pLChzfHxvLnJlc29sdmVXaXRoKShuLHIpKX19LHQ9cz9lOmZ1bmN0aW9uKCl7dHJ5e2UoKX1jYXRjaChlKXtTLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJlMuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHQuc3RhY2tUcmFjZSksdTw9aSsxJiYoYSE9PU0mJihuPXZvaWQgMCxyPVtlXSksby5yZWplY3RXaXRoKG4scikpfX07aT90KCk6KFMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYodC5zdGFja1RyYWNlPVMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLEMuc2V0VGltZW91dCh0KSl9fXJldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKGUpe29bMF1bM10uYWRkKGwoMCxlLG0ocik/cjpSLGUubm90aWZ5V2l0aCkpLG9bMV1bM10uYWRkKGwoMCxlLG0odCk/dDpSKSksb1syXVszXS5hZGQobCgwLGUsbShuKT9uOk0pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9TLmV4dGVuZChlLGEpOmF9fSxzPXt9O3JldHVybiBTLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPXRbMl0scj10WzVdO2FbdFsxXV09bi5hZGQsciYmbi5hZGQoZnVuY3Rpb24oKXtpPXJ9LG9bMy1lXVsyXS5kaXNhYmxlLG9bMy1lXVszXS5kaXNhYmxlLG9bMF1bMl0ubG9jayxvWzBdWzNdLmxvY2spLG4uYWRkKHRbM10uZmlyZSksc1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBzW3RbMF0rIldpdGgiXSh0aGlzPT09cz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LHNbdFswXSsiV2l0aCJdPW4uZmlyZVdpdGh9KSxhLnByb21pc2UocyksZSYmZS5jYWxsKHMscyksc30sd2hlbjpmdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHQ9bixyPUFycmF5KHQpLGk9cy5jYWxsKGFyZ3VtZW50cyksbz1TLkRlZmVycmVkKCksYT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7clt0XT10aGlzLGlbdF09MTxhcmd1bWVudHMubGVuZ3RoP3MuY2FsbChhcmd1bWVudHMpOmUsLS1ufHxvLnJlc29sdmVXaXRoKHIsaSl9fTtpZihuPD0xJiYoSShlLG8uZG9uZShhKHQpKS5yZXNvbHZlLG8ucmVqZWN0LCFuKSwicGVuZGluZyI9PT1vLnN0YXRlKCl8fG0oaVt0XSYmaVt0XS50aGVuKSkpcmV0dXJuIG8udGhlbigpO3doaWxlKHQtLSlJKGlbdF0sYSh0KSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZSgpfX0pO3ZhciBXPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO1MuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlLHQpe0MuY29uc29sZSYmQy5jb25zb2xlLndhcm4mJmUmJlcudGVzdChlLm5hbWUpJiZDLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UsZS5zdGFjayx0KX0sUy5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlKXtDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9O3ZhciBGPVMuRGVmZXJyZWQoKTtmdW5jdGlvbiBCKCl7RS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixCKSxDLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLEIpLFMucmVhZHkoKX1TLmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7Uy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LFMuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS1TLnJlYWR5V2FpdDpTLmlzUmVhZHkpfHwoUy5pc1JlYWR5PSEwKSE9PWUmJjA8LS1TLnJlYWR5V2FpdHx8Ri5yZXNvbHZlV2l0aChFLFtTXSl9fSksUy5yZWFkeS50aGVuPUYudGhlbiwiY29tcGxldGUiPT09RS5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1FLnJlYWR5U3RhdGUmJiFFLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9DLnNldFRpbWVvdXQoUy5yZWFkeSk6KEUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQiksQy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixCKSk7dmFyICQ9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXcobikpZm9yKHMgaW4gaT0hMCxuKSQoZSx0LHMsbltzXSwhMCxvLGEpO2Vsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsbShyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbChTKGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LF89L14tbXMtLyx6PS8tKFthLXpdKS9nO2Z1bmN0aW9uIFUoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIFgoZSl7cmV0dXJuIGUucmVwbGFjZShfLCJtcy0iKS5yZXBsYWNlKHosVSl9dmFyIFY9ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfHw5PT09ZS5ub2RlVHlwZXx8IStlLm5vZGVUeXBlfTtmdW5jdGlvbiBHKCl7dGhpcy5leHBhbmRvPVMuZXhwYW5kbytHLnVpZCsrfUcudWlkPTEsRy5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdHx8KHQ9T2JqZWN0LmNyZWF0ZShudWxsKSxWKGUpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dDpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLmV4cGFuZG8se3ZhbHVlOnQsY29uZmlndXJhYmxlOiEwfSkpKSx0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9dGhpcy5jYWNoZShlKTtpZigic3RyaW5nIj09dHlwZW9mIHQpaVtYKHQpXT1uO2Vsc2UgZm9yKHIgaW4gdClpW1gocildPXRbcl07cmV0dXJuIGl9LGdldDpmdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3RoaXMuY2FjaGUoZSk6ZVt0aGlzLmV4cGFuZG9dJiZlW3RoaXMuZXhwYW5kb11bWCh0KV19LGFjY2VzczpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PXR8fHQmJiJzdHJpbmciPT10eXBlb2YgdCYmdm9pZCAwPT09bj90aGlzLmdldChlLHQpOih0aGlzLnNldChlLHQsbiksdm9pZCAwIT09bj9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWVbdGhpcy5leHBhbmRvXTtpZih2b2lkIDAhPT1yKXtpZih2b2lkIDAhPT10KXtuPSh0PUFycmF5LmlzQXJyYXkodCk/dC5tYXAoWCk6KHQ9WCh0KSlpbiByP1t0XTp0Lm1hdGNoKFApfHxbXSkubGVuZ3RoO3doaWxlKG4tLSlkZWxldGUgclt0W25dXX0odm9pZCAwPT09dHx8Uy5pc0VtcHR5T2JqZWN0KHIpKSYmKGUubm9kZVR5cGU/ZVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgZVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT10JiYhUy5pc0VtcHR5T2JqZWN0KHQpfX07dmFyIFk9bmV3IEcsUT1uZXcgRyxKPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sSz0vW0EtWl0vZztmdW5jdGlvbiBaKGUsdCxuKXt2YXIgcixpO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoSywiLSQmIikudG9Mb3dlckNhc2UoKSwic3RyaW5nIj09dHlwZW9mKG49ZS5nZXRBdHRyaWJ1dGUocikpKXt0cnl7bj0idHJ1ZSI9PT0oaT1uKXx8ImZhbHNlIiE9PWkmJigibnVsbCI9PT1pP251bGw6aT09PStpKyIiPytpOkoudGVzdChpKT9KU09OLnBhcnNlKGkpOmkpfWNhdGNoKGUpe31RLnNldChlLHQsbil9ZWxzZSBuPXZvaWQgMDtyZXR1cm4gbn1TLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gUS5oYXNEYXRhKGUpfHxZLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBRLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtRLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFkuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtZLnJlbW92ZShlLHQpfX0pLFMuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKG4sZSl7dmFyIHQscixpLG89dGhpc1swXSxhPW8mJm8uYXR0cmlidXRlcztpZih2b2lkIDA9PT1uKXtpZih0aGlzLmxlbmd0aCYmKGk9US5nZXQobyksMT09PW8ubm9kZVR5cGUmJiFZLmdldChvLCJoYXNEYXRhQXR0cnMiKSkpe3Q9YS5sZW5ndGg7d2hpbGUodC0tKWFbdF0mJjA9PT0ocj1hW3RdLm5hbWUpLmluZGV4T2YoImRhdGEtIikmJihyPVgoci5zbGljZSg1KSksWihvLHIsaVtyXSkpO1kuc2V0KG8sImhhc0RhdGFBdHRycyIsITApfXJldHVybiBpfXJldHVybiJvYmplY3QiPT10eXBlb2Ygbj90aGlzLmVhY2goZnVuY3Rpb24oKXtRLnNldCh0aGlzLG4pfSk6JCh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0O2lmKG8mJnZvaWQgMD09PWUpcmV0dXJuIHZvaWQgMCE9PSh0PVEuZ2V0KG8sbikpP3Q6dm9pZCAwIT09KHQ9WihvLG4pKT90OnZvaWQgMDt0aGlzLmVhY2goZnVuY3Rpb24oKXtRLnNldCh0aGlzLG4sZSl9KX0sbnVsbCxlLDE8YXJndW1lbnRzLmxlbmd0aCxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5yZW1vdmUodGhpcyxlKX0pfX0pLFMuZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoZSlyZXR1cm4gdD0odHx8ImZ4IikrInF1ZXVlIixyPVkuZ2V0KGUsdCksbiYmKCFyfHxBcnJheS5pc0FycmF5KG4pP3I9WS5hY2Nlc3MoZSx0LFMubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdfSxkZXF1ZXVlOmZ1bmN0aW9uKGUsdCl7dD10fHwiZngiO3ZhciBuPVMucXVldWUoZSx0KSxyPW4ubGVuZ3RoLGk9bi5zaGlmdCgpLG89Uy5fcXVldWVIb29rcyhlLHQpOyJpbnByb2dyZXNzIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxmdW5jdGlvbigpe1MuZGVxdWV1ZShlLHQpfSxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBZLmdldChlLG4pfHxZLmFjY2VzcyhlLG4se2VtcHR5OlMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1kucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLFMuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbih0LG4pe3ZhciBlPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiB0JiYobj10LHQ9ImZ4IixlLS0pLGFyZ3VtZW50cy5sZW5ndGg8ZT9TLnF1ZXVlKHRoaXNbMF0sdCk6dm9pZCAwPT09bj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPVMucXVldWUodGhpcyx0LG4pO1MuX3F1ZXVlSG9va3ModGhpcyx0KSwiZngiPT09dCYmImlucHJvZ3Jlc3MiIT09ZVswXSYmUy5kZXF1ZXVlKHRoaXMsdCl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5kZXF1ZXVlKHRoaXMsZSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MSxpPVMuRGVmZXJyZWQoKSxvPXRoaXMsYT10aGlzLmxlbmd0aCxzPWZ1bmN0aW9uKCl7LS1yfHxpLnJlc29sdmVXaXRoKG8sW29dKX07InN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSxlPWV8fCJmeCI7d2hpbGUoYS0tKShuPVkuZ2V0KG9bYV0sZSsicXVldWVIb29rcyIpKSYmbi5lbXB0eSYmKHIrKyxuLmVtcHR5LmFkZChzKSk7cmV0dXJuIHMoKSxpLnByb21pc2UodCl9fSk7dmFyIGVlPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHRlPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIitlZSsiKShbYS16JV0qKSQiLCJpIiksbmU9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxyZT1FLmRvY3VtZW50RWxlbWVudCxpZT1mdW5jdGlvbihlKXtyZXR1cm4gUy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9LG9lPXtjb21wb3NlZDohMH07cmUuZ2V0Um9vdE5vZGUmJihpZT1mdW5jdGlvbihlKXtyZXR1cm4gUy5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl8fGUuZ2V0Um9vdE5vZGUob2UpPT09ZS5vd25lckRvY3VtZW50fSk7dmFyIGFlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm5vbmUiPT09KGU9dHx8ZSkuc3R5bGUuZGlzcGxheXx8IiI9PT1lLnN0eWxlLmRpc3BsYXkmJmllKGUpJiYibm9uZSI9PT1TLmNzcyhlLCJkaXNwbGF5Iil9O2Z1bmN0aW9uIHNlKGUsdCxuLHIpe3ZhciBpLG8sYT0yMCxzPXI/ZnVuY3Rpb24oKXtyZXR1cm4gci5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gUy5jc3MoZSx0LCIiKX0sdT1zKCksbD1uJiZuWzNdfHwoUy5jc3NOdW1iZXJbdF0/IiI6InB4IiksYz1lLm5vZGVUeXBlJiYoUy5jc3NOdW1iZXJbdF18fCJweCIhPT1sJiYrdSkmJnRlLmV4ZWMoUy5jc3MoZSx0KSk7aWYoYyYmY1szXSE9PWwpe3UvPTIsbD1sfHxjWzNdLGM9K3V8fDE7d2hpbGUoYS0tKVMuc3R5bGUoZSx0LGMrbCksKDEtbykqKDEtKG89cygpL3V8fC41KSk8PTAmJihhPTApLGMvPW87Yyo9MixTLnN0eWxlKGUsdCxjK2wpLG49bnx8W119cmV0dXJuIG4mJihjPStjfHwrdXx8MCxpPW5bMV0/YysoblsxXSsxKSpuWzJdOituWzJdLHImJihyLnVuaXQ9bCxyLnN0YXJ0PWMsci5lbmQ9aSkpLGl9dmFyIHVlPXt9O2Z1bmN0aW9uIGxlKGUsdCl7Zm9yKHZhciBuLHIsaSxvLGEscyx1LGw9W10sYz0wLGY9ZS5sZW5ndGg7YzxmO2MrKykocj1lW2NdKS5zdHlsZSYmKG49ci5zdHlsZS5kaXNwbGF5LHQ/KCJub25lIj09PW4mJihsW2NdPVkuZ2V0KHIsImRpc3BsYXkiKXx8bnVsbCxsW2NdfHwoci5zdHlsZS5kaXNwbGF5PSIiKSksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJmFlKHIpJiYobFtjXT0odT1hPW89dm9pZCAwLGE9KGk9cikub3duZXJEb2N1bWVudCxzPWkubm9kZU5hbWUsKHU9dWVbc10pfHwobz1hLmJvZHkuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KHMpKSx1PVMuY3NzKG8sImRpc3BsYXkiKSxvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobyksIm5vbmUiPT09dSYmKHU9ImJsb2NrIiksdWVbc109dSkpKSk6Im5vbmUiIT09biYmKGxbY109Im5vbmUiLFkuc2V0KHIsImRpc3BsYXkiLG4pKSk7Zm9yKGM9MDtjPGY7YysrKW51bGwhPWxbY10mJihlW2NdLnN0eWxlLmRpc3BsYXk9bFtjXSk7cmV0dXJuIGV9Uy5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gbGUodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gbGUodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7YWUodGhpcyk/Uyh0aGlzKS5zaG93KCk6Uyh0aGlzKS5oaWRlKCl9KX19KTt2YXIgY2UsZmUscGU9L14oPzpjaGVja2JveHxyYWRpbykkL2ksZGU9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopL2ksaGU9L14kfF5tb2R1bGUkfFwvKD86amF2YXxlY21hKXNjcmlwdC9pO2NlPUUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLmFwcGVuZENoaWxkKEUuY3JlYXRlRWxlbWVudCgiZGl2IikpLChmZT1FLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksZmUuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLGZlLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxjZS5hcHBlbmRDaGlsZChmZSkseS5jaGVja0Nsb25lPWNlLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxjZS5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLHkubm9DbG9uZUNoZWNrZWQ9ISFjZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsY2UuaW5uZXJIVE1MPSI8b3B0aW9uPjwvb3B0aW9uPiIseS5vcHRpb249ISFjZS5sYXN0Q2hpbGQ7dmFyIGdlPXt0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07ZnVuY3Rpb24gdmUoZSx0KXt2YXIgbjtyZXR1cm4gbj0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsP2UucXVlcnlTZWxlY3RvckFsbCh0fHwiKiIpOltdLHZvaWQgMD09PXR8fHQmJkEoZSx0KT9TLm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIHllKGUsdCl7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKVkuc2V0KGVbbl0sImdsb2JhbEV2YWwiLCF0fHxZLmdldCh0W25dLCJnbG9iYWxFdmFsIikpfWdlLnRib2R5PWdlLnRmb290PWdlLmNvbGdyb3VwPWdlLmNhcHRpb249Z2UudGhlYWQsZ2UudGg9Z2UudGQseS5vcHRpb258fChnZS5vcHRncm91cD1nZS5vcHRpb249WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSk7dmFyIG1lPS88fCYjP1x3KzsvO2Z1bmN0aW9uIHhlKGUsdCxuLHIsaSl7Zm9yKHZhciBvLGEscyx1LGwsYyxmPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLHA9W10sZD0wLGg9ZS5sZW5ndGg7ZDxoO2QrKylpZigobz1lW2RdKXx8MD09PW8paWYoIm9iamVjdCI9PT13KG8pKVMubWVyZ2UocCxvLm5vZGVUeXBlP1tvXTpvKTtlbHNlIGlmKG1lLnRlc3Qobykpe2E9YXx8Zi5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPShkZS5leGVjKG8pfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLHU9Z2Vbc118fGdlLl9kZWZhdWx0LGEuaW5uZXJIVE1MPXVbMV0rUy5odG1sUHJlZmlsdGVyKG8pK3VbMl0sYz11WzBdO3doaWxlKGMtLSlhPWEubGFzdENoaWxkO1MubWVyZ2UocCxhLmNoaWxkTm9kZXMpLChhPWYuZmlyc3RDaGlsZCkudGV4dENvbnRlbnQ9IiJ9ZWxzZSBwLnB1c2godC5jcmVhdGVUZXh0Tm9kZShvKSk7Zi50ZXh0Q29udGVudD0iIixkPTA7d2hpbGUobz1wW2QrK10paWYociYmLTE8Uy5pbkFycmF5KG8scikpaSYmaS5wdXNoKG8pO2Vsc2UgaWYobD1pZShvKSxhPXZlKGYuYXBwZW5kQ2hpbGQobyksInNjcmlwdCIpLGwmJnllKGEpLG4pe2M9MDt3aGlsZShvPWFbYysrXSloZS50ZXN0KG8udHlwZXx8IiIpJiZuLnB1c2gobyl9cmV0dXJuIGZ9dmFyIGJlPS9ea2V5Lyx3ZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sVGU9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIENlKCl7cmV0dXJuITB9ZnVuY3Rpb24gRWUoKXtyZXR1cm4hMX1mdW5jdGlvbiBTZShlLHQpe3JldHVybiBlPT09ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIEUuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fSgpPT0oImZvY3VzIj09PXQpfWZ1bmN0aW9uIGtlKGUsdCxuLHIsaSxvKXt2YXIgYSxzO2lmKCJvYmplY3QiPT10eXBlb2YgdCl7Zm9yKHMgaW4ic3RyaW5nIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj12b2lkIDApLHQpa2UoZSxzLG4scix0W3NdLG8pO3JldHVybiBlfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dm9pZCAwKTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiBuPyhpPXIscj12b2lkIDApOihpPXIscj1uLG49dm9pZCAwKSksITE9PT1pKWk9RWU7ZWxzZSBpZighaSlyZXR1cm4gZTtyZXR1cm4gMT09PW8mJihhPWksKGk9ZnVuY3Rpb24oZSl7cmV0dXJuIFMoKS5vZmYoZSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5ndWlkPWEuZ3VpZHx8KGEuZ3VpZD1TLmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe1MuZXZlbnQuYWRkKHRoaXMsdCxpLHIsbil9KX1mdW5jdGlvbiBBZShlLGksbyl7bz8oWS5zZXQoZSxpLCExKSxTLmV2ZW50LmFkZChlLGkse25hbWVzcGFjZTohMSxoYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1ZLmdldCh0aGlzLGkpO2lmKDEmZS5pc1RyaWdnZXImJnRoaXNbaV0pe2lmKHIubGVuZ3RoKShTLmV2ZW50LnNwZWNpYWxbaV18fHt9KS5kZWxlZ2F0ZVR5cGUmJmUuc3RvcFByb3BhZ2F0aW9uKCk7ZWxzZSBpZihyPXMuY2FsbChhcmd1bWVudHMpLFkuc2V0KHRoaXMsaSxyKSx0PW8odGhpcyxpKSx0aGlzW2ldKCksciE9PShuPVkuZ2V0KHRoaXMsaSkpfHx0P1kuc2V0KHRoaXMsaSwhMSk6bj17fSxyIT09bilyZXR1cm4gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksbi52YWx1ZX1lbHNlIHIubGVuZ3RoJiYoWS5zZXQodGhpcyxpLHt2YWx1ZTpTLmV2ZW50LnRyaWdnZXIoUy5leHRlbmQoclswXSxTLkV2ZW50LnByb3RvdHlwZSksci5zbGljZSgxKSx0aGlzKX0pLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfX0pKTp2b2lkIDA9PT1ZLmdldChlLGkpJiZTLmV2ZW50LmFkZChlLGksQ2UpfVMuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9WS5nZXQodCk7aWYoVih0KSl7bi5oYW5kbGVyJiYobj0obz1uKS5oYW5kbGVyLGk9by5zZWxlY3RvciksaSYmUy5maW5kLm1hdGNoZXNTZWxlY3RvcihyZSxpKSxuLmd1aWR8fChuLmd1aWQ9Uy5ndWlkKyspLCh1PXYuZXZlbnRzKXx8KHU9di5ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKSksKGE9di5oYW5kbGUpfHwoYT12LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIFMmJlMuZXZlbnQudHJpZ2dlcmVkIT09ZS50eXBlP1MuZXZlbnQuZGlzcGF0Y2guYXBwbHkodCxhcmd1bWVudHMpOnZvaWQgMH0pLGw9KGU9KGV8fCIiKS5tYXRjaChQKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlkPWc9KHM9VGUuZXhlYyhlW2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkJiYoZj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KGk/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGQsZj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LGM9Uy5leHRlbmQoe3R5cGU6ZCxvcmlnVHlwZTpnLGRhdGE6cixoYW5kbGVyOm4sZ3VpZDpuLmd1aWQsc2VsZWN0b3I6aSxuZWVkc0NvbnRleHQ6aSYmUy5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGkpLG5hbWVzcGFjZTpoLmpvaW4oIi4iKX0sbyksKHA9dVtkXSl8fCgocD11W2RdPVtdKS5kZWxlZ2F0ZUNvdW50PTAsZi5zZXR1cCYmITEhPT1mLnNldHVwLmNhbGwodCxyLGgsYSl8fHQuYWRkRXZlbnRMaXN0ZW5lciYmdC5hZGRFdmVudExpc3RlbmVyKGQsYSkpLGYuYWRkJiYoZi5hZGQuY2FsbCh0LGMpLGMuaGFuZGxlci5ndWlkfHwoYy5oYW5kbGVyLmd1aWQ9bi5ndWlkKSksaT9wLnNwbGljZShwLmRlbGVnYXRlQ291bnQrKywwLGMpOnAucHVzaChjKSxTLmV2ZW50Lmdsb2JhbFtkXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9WS5oYXNEYXRhKGUpJiZZLmdldChlKTtpZih2JiYodT12LmV2ZW50cykpe2w9KHQ9KHR8fCIiKS5tYXRjaChQKXx8WyIiXSkubGVuZ3RoO3doaWxlKGwtLSlpZihkPWc9KHM9VGUuZXhlYyh0W2xdKXx8W10pWzFdLGg9KHNbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkKXtmPVMuZXZlbnQuc3BlY2lhbFtkXXx8e30scD11W2Q9KHI/Zi5kZWxlZ2F0ZVR5cGU6Zi5iaW5kVHlwZSl8fGRdfHxbXSxzPXNbMl0mJm5ldyBSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIiksYT1vPXAubGVuZ3RoO3doaWxlKG8tLSljPXBbb10sIWkmJmchPT1jLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1jLmd1aWR8fHMmJiFzLnRlc3QoYy5uYW1lc3BhY2UpfHxyJiZyIT09Yy5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYy5zZWxlY3Rvcil8fChwLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJnAuZGVsZWdhdGVDb3VudC0tLGYucmVtb3ZlJiZmLnJlbW92ZS5jYWxsKGUsYykpO2EmJiFwLmxlbmd0aCYmKGYudGVhcmRvd24mJiExIT09Zi50ZWFyZG93bi5jYWxsKGUsaCx2LmhhbmRsZSl8fFMucmVtb3ZlRXZlbnQoZSxkLHYuaGFuZGxlKSxkZWxldGUgdVtkXSl9ZWxzZSBmb3IoZCBpbiB1KVMuZXZlbnQucmVtb3ZlKGUsZCt0W2xdLG4sciwhMCk7Uy5pc0VtcHR5T2JqZWN0KHUpJiZZLnJlbW92ZShlLCJoYW5kbGUgZXZlbnRzIil9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscz1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksdT1TLmV2ZW50LmZpeChlKSxsPShZLmdldCh0aGlzLCJldmVudHMiKXx8T2JqZWN0LmNyZWF0ZShudWxsKSlbdS50eXBlXXx8W10sYz1TLmV2ZW50LnNwZWNpYWxbdS50eXBlXXx8e307Zm9yKHNbMF09dSx0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKylzW3RdPWFyZ3VtZW50c1t0XTtpZih1LmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fCExIT09Yy5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsdSkpe2E9Uy5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsdSxsKSx0PTA7d2hpbGUoKGk9YVt0KytdKSYmIXUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7dS5jdXJyZW50VGFyZ2V0PWkuZWxlbSxuPTA7d2hpbGUoKG89aS5oYW5kbGVyc1tuKytdKSYmIXUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSl1LnJuYW1lc3BhY2UmJiExIT09by5uYW1lc3BhY2UmJiF1LnJuYW1lc3BhY2UudGVzdChvLm5hbWVzcGFjZSl8fCh1LmhhbmRsZU9iaj1vLHUuZGF0YT1vLmRhdGEsdm9pZCAwIT09KHI9KChTLmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLHMpKSYmITE9PT0odS5yZXN1bHQ9cikmJih1LnByZXZlbnREZWZhdWx0KCksdS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBjLnBvc3REaXNwYXRjaCYmYy5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLHUpLHUucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHM9W10sdT10LmRlbGVnYXRlQ291bnQsbD1lLnRhcmdldDtpZih1JiZsLm5vZGVUeXBlJiYhKCJjbGljayI9PT1lLnR5cGUmJjE8PWUuYnV0dG9uKSlmb3IoO2whPT10aGlzO2w9bC5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1sLm5vZGVUeXBlJiYoImNsaWNrIiE9PWUudHlwZXx8ITAhPT1sLmRpc2FibGVkKSl7Zm9yKG89W10sYT17fSxuPTA7bjx1O24rKyl2b2lkIDA9PT1hW2k9KHI9dFtuXSkuc2VsZWN0b3IrIiAiXSYmKGFbaV09ci5uZWVkc0NvbnRleHQ/LTE8UyhpLHRoaXMpLmluZGV4KGwpOlMuZmluZChpLHRoaXMsbnVsbCxbbF0pLmxlbmd0aCksYVtpXSYmby5wdXNoKHIpO28ubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczpvfSl9cmV0dXJuIGw9dGhpcyx1PHQubGVuZ3RoJiZzLnB1c2goe2VsZW06bCxoYW5kbGVyczp0LnNsaWNlKHUpfSksc30sYWRkUHJvcDpmdW5jdGlvbih0LGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShTLkV2ZW50LnByb3RvdHlwZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6bShlKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gZSh0aGlzLm9yaWdpbmFsRXZlbnQpfTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudClyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50W3RdfSxzZXQ6ZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6ZX0pfX0pfSxmaXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbUy5leHBhbmRvXT9lOm5ldyBTLkV2ZW50KGUpfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sY2xpY2s6e3NldHVwOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXN8fGU7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZBZSh0LCJjbGljayIsQ2UpLCExfSx0cmlnZ2VyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXN8fGU7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZBZSh0LCJjbGljayIpLCEwfSxfZGVmYXVsdDpmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldDtyZXR1cm4gcGUudGVzdCh0LnR5cGUpJiZ0LmNsaWNrJiZBKHQsImlucHV0IikmJlkuZ2V0KHQsImNsaWNrIil8fEEodCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5yZXN1bHQmJmUub3JpZ2luYWxFdmVudCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX19LFMucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbil9LFMuRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBTLkV2ZW50KSlyZXR1cm4gbmV3IFMuRXZlbnQoZSx0KTtlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1lLmRlZmF1bHRQcmV2ZW50ZWQmJiExPT09ZS5yZXR1cm5WYWx1ZT9DZTpFZSx0aGlzLnRhcmdldD1lLnRhcmdldCYmMz09PWUudGFyZ2V0Lm5vZGVUeXBlP2UudGFyZ2V0LnBhcmVudE5vZGU6ZS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWUuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9ZS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9ZSx0JiZTLmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHxEYXRlLm5vdygpLHRoaXNbUy5leHBhbmRvXT0hMH0sUy5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlMuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOkVlLGlzUHJvcGFnYXRpb25TdG9wcGVkOkVlLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOkVlLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPUNlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPUNlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1DZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sUy5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjb2RlOiEwLGNoYXJDb2RlOiEwLGtleTohMCxrZXlDb2RlOiEwLGJ1dHRvbjohMCxidXR0b25zOiEwLGNsaWVudFg6ITAsY2xpZW50WTohMCxvZmZzZXRYOiEwLG9mZnNldFk6ITAscG9pbnRlcklkOiEwLHBvaW50ZXJUeXBlOiEwLHNjcmVlblg6ITAsc2NyZWVuWTohMCx0YXJnZXRUb3VjaGVzOiEwLHRvRWxlbWVudDohMCx0b3VjaGVzOiEwLHdoaWNoOmZ1bmN0aW9uKGUpe3ZhciB0PWUuYnV0dG9uO3JldHVybiBudWxsPT1lLndoaWNoJiZiZS50ZXN0KGUudHlwZSk/bnVsbCE9ZS5jaGFyQ29kZT9lLmNoYXJDb2RlOmUua2V5Q29kZTohZS53aGljaCYmdm9pZCAwIT09dCYmd2UudGVzdChlLnR5cGUpPzEmdD8xOjImdD8zOjQmdD8yOjA6ZS53aGljaH19LFMuZXZlbnQuYWRkUHJvcCksUy5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihlLHQpe1MuZXZlbnQuc3BlY2lhbFtlXT17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gQWUodGhpcyxlLFNlKSwhMX0sdHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBBZSh0aGlzLGUpLCEwfSxkZWxlZ2F0ZVR5cGU6dH19KSxTLmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKGUsaSl7Uy5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6aSxiaW5kVHlwZTppLGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgdCxuPWUucmVsYXRlZFRhcmdldCxyPWUuaGFuZGxlT2JqO3JldHVybiBuJiYobj09PXRoaXN8fFMuY29udGFpbnModGhpcyxuKSl8fChlLnR5cGU9ci5vcmlnVHlwZSx0PXIuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPWkpLHR9fX0pLFMuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4ga2UodGhpcyxlLHQsbixyKX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBrZSh0aGlzLGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gcj1lLmhhbmRsZU9iaixTKGUuZGVsZWdhdGVUYXJnZXQpLm9mZihyLm5hbWVzcGFjZT9yLm9yaWdUeXBlKyIuIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKGkgaW4gZSl0aGlzLm9mZihpLHQsZVtpXSk7cmV0dXJuIHRoaXN9cmV0dXJuITEhPT10JiYiZnVuY3Rpb24iIT10eXBlb2YgdHx8KG49dCx0PXZvaWQgMCksITE9PT1uJiYobj1FZSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX19KTt2YXIgTmU9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksRGU9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksamU9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nO2Z1bmN0aW9uIHFlKGUsdCl7cmV0dXJuIEEoZSwidGFibGUiKSYmQSgxMSE9PXQubm9kZVR5cGU/dDp0LmZpcnN0Q2hpbGQsInRyIikmJlMoZSkuY2hpbGRyZW4oInRib2R5IilbMF18fGV9ZnVuY3Rpb24gTGUoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBIZShlKXtyZXR1cm4idHJ1ZS8iPT09KGUudHlwZXx8IiIpLnNsaWNlKDAsNSk/ZS50eXBlPWUudHlwZS5zbGljZSg1KTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gT2UoZSx0KXt2YXIgbixyLGksbyxhLHM7aWYoMT09PXQubm9kZVR5cGUpe2lmKFkuaGFzRGF0YShlKSYmKHM9WS5nZXQoZSkuZXZlbnRzKSlmb3IoaSBpbiBZLnJlbW92ZSh0LCJoYW5kbGUgZXZlbnRzIikscylmb3Iobj0wLHI9c1tpXS5sZW5ndGg7bjxyO24rKylTLmV2ZW50LmFkZCh0LGksc1tpXVtuXSk7US5oYXNEYXRhKGUpJiYobz1RLmFjY2VzcyhlKSxhPVMuZXh0ZW5kKHt9LG8pLFEuc2V0KHQsYSkpfX1mdW5jdGlvbiBQZShuLHIsaSxvKXtyPWcocik7dmFyIGUsdCxhLHMsdSxsLGM9MCxmPW4ubGVuZ3RoLHA9Zi0xLGQ9clswXSxoPW0oZCk7aWYoaHx8MTxmJiYic3RyaW5nIj09dHlwZW9mIGQmJiF5LmNoZWNrQ2xvbmUmJkRlLnRlc3QoZCkpcmV0dXJuIG4uZWFjaChmdW5jdGlvbihlKXt2YXIgdD1uLmVxKGUpO2gmJihyWzBdPWQuY2FsbCh0aGlzLGUsdC5odG1sKCkpKSxQZSh0LHIsaSxvKX0pO2lmKGYmJih0PShlPXhlKHIsblswXS5vd25lckRvY3VtZW50LCExLG4sbykpLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPXQpLHR8fG8pKXtmb3Iocz0oYT1TLm1hcCh2ZShlLCJzY3JpcHQiKSxMZSkpLmxlbmd0aDtjPGY7YysrKXU9ZSxjIT09cCYmKHU9Uy5jbG9uZSh1LCEwLCEwKSxzJiZTLm1lcmdlKGEsdmUodSwic2NyaXB0IikpKSxpLmNhbGwobltjXSx1LGMpO2lmKHMpZm9yKGw9YVthLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LFMubWFwKGEsSGUpLGM9MDtjPHM7YysrKXU9YVtjXSxoZS50ZXN0KHUudHlwZXx8IiIpJiYhWS5hY2Nlc3ModSwiZ2xvYmFsRXZhbCIpJiZTLmNvbnRhaW5zKGwsdSkmJih1LnNyYyYmIm1vZHVsZSIhPT0odS50eXBlfHwiIikudG9Mb3dlckNhc2UoKT9TLl9ldmFsVXJsJiYhdS5ub01vZHVsZSYmUy5fZXZhbFVybCh1LnNyYyx7bm9uY2U6dS5ub25jZXx8dS5nZXRBdHRyaWJ1dGUoIm5vbmNlIil9LGwpOmIodS50ZXh0Q29udGVudC5yZXBsYWNlKGplLCIiKSx1LGwpKX1yZXR1cm4gbn1mdW5jdGlvbiBSZShlLHQsbil7Zm9yKHZhciByLGk9dD9TLmZpbHRlcih0LGUpOmUsbz0wO251bGwhPShyPWlbb10pO28rKylufHwxIT09ci5ub2RlVHlwZXx8Uy5jbGVhbkRhdGEodmUocikpLHIucGFyZW50Tm9kZSYmKG4mJmllKHIpJiZ5ZSh2ZShyLCJzY3JpcHQiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX1TLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sY2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGM9ZS5jbG9uZU5vZGUoITApLGY9aWUoZSk7aWYoISh5Lm5vQ2xvbmVDaGVja2VkfHwxIT09ZS5ub2RlVHlwZSYmMTEhPT1lLm5vZGVUeXBlfHxTLmlzWE1MRG9jKGUpKSlmb3IoYT12ZShjKSxyPTAsaT0obz12ZShlKSkubGVuZ3RoO3I8aTtyKyspcz1vW3JdLHU9YVtyXSx2b2lkIDAsImlucHV0Ij09PShsPXUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnBlLnRlc3Qocy50eXBlKT91LmNoZWNrZWQ9cy5jaGVja2VkOiJpbnB1dCIhPT1sJiYidGV4dGFyZWEiIT09bHx8KHUuZGVmYXVsdFZhbHVlPXMuZGVmYXVsdFZhbHVlKTtpZih0KWlmKG4pZm9yKG89b3x8dmUoZSksYT1hfHx2ZShjKSxyPTAsaT1vLmxlbmd0aDtyPGk7cisrKU9lKG9bcl0sYVtyXSk7ZWxzZSBPZShlLGMpO3JldHVybiAwPChhPXZlKGMsInNjcmlwdCIpKS5sZW5ndGgmJnllKGEsIWYmJnZlKGUsInNjcmlwdCIpKSxjfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4scixpPVMuZXZlbnQuc3BlY2lhbCxvPTA7dm9pZCAwIT09KG49ZVtvXSk7bysrKWlmKFYobikpe2lmKHQ9bltZLmV4cGFuZG9dKXtpZih0LmV2ZW50cylmb3IociBpbiB0LmV2ZW50cylpW3JdP1MuZXZlbnQucmVtb3ZlKG4scik6Uy5yZW1vdmVFdmVudChuLHIsdC5oYW5kbGUpO25bWS5leHBhbmRvXT12b2lkIDB9bltRLmV4cGFuZG9dJiYobltRLmV4cGFuZG9dPXZvaWQgMCl9fX0pLFMuZm4uZXh0ZW5kKHtkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIFJlKHRoaXMsZSwhMCl9LHJlbW92ZTpmdW5jdGlvbihlKXtyZXR1cm4gUmUodGhpcyxlKX0sdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP1MudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1lKX0pfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8cWUodGhpcyxlKS5hcHBlbmRDaGlsZChlKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1xZSh0aGlzLGUpO3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDtudWxsIT0oZT10aGlzW3RdKTt0KyspMT09PWUubm9kZVR5cGUmJihTLmNsZWFuRGF0YSh2ZShlLCExKSksZS50ZXh0Q29udGVudD0iIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbCE9ZSYmZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIFMuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlKXt2YXIgdD10aGlzWzBdfHx7fSxuPTAscj10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1lJiYxPT09dC5ub2RlVHlwZSlyZXR1cm4gdC5pbm5lckhUTUw7aWYoInN0cmluZyI9PXR5cGVvZiBlJiYhTmUudGVzdChlKSYmIWdlWyhkZS5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1TLmh0bWxQcmVmaWx0ZXIoZSk7dHJ5e2Zvcig7bjxyO24rKykxPT09KHQ9dGhpc1tuXXx8e30pLm5vZGVUeXBlJiYoUy5jbGVhbkRhdGEodmUodCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChlKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgbj1bXTtyZXR1cm4gUGUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wYXJlbnROb2RlO1MuaW5BcnJheSh0aGlzLG4pPDAmJihTLmNsZWFuRGF0YSh2ZSh0aGlzKSksdCYmdC5yZXBsYWNlQ2hpbGQoZSx0aGlzKSl9LG4pfX0pLFMuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsYSl7Uy5mbltlXT1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxyPVMoZSksaT1yLmxlbmd0aC0xLG89MDtvPD1pO28rKyl0PW89PT1pP3RoaXM6dGhpcy5jbG9uZSghMCksUyhyW29dKVthXSh0KSx1LmFwcGx5KG4sdC5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4pfX0pO3ZhciBNZT1uZXcgUmVnRXhwKCJeKCIrZWUrIikoPyFweClbYS16JV0rJCIsImkiKSxJZT1mdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIHQmJnQub3BlbmVyfHwodD1DKSx0LmdldENvbXB1dGVkU3R5bGUoZSl9LFdlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e307Zm9yKGkgaW4gdClvW2ldPWUuc3R5bGVbaV0sZS5zdHlsZVtpXT10W2ldO2ZvcihpIGluIHI9bi5jYWxsKGUpLHQpZS5zdHlsZVtpXT1vW2ldO3JldHVybiByfSxGZT1uZXcgUmVnRXhwKG5lLmpvaW4oInwiKSwiaSIpO2Z1bmN0aW9uIEJlKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuc3R5bGU7cmV0dXJuKG49bnx8SWUoZSkpJiYoIiIhPT0oYT1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pfHxpZShlKXx8KGE9Uy5zdHlsZShlLHQpKSwheS5waXhlbEJveFN0eWxlcygpJiZNZS50ZXN0KGEpJiZGZS50ZXN0KHQpJiYocj1zLndpZHRoLGk9cy5taW5XaWR0aCxvPXMubWF4V2lkdGgscy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9YSxhPW4ud2lkdGgscy53aWR0aD1yLHMubWluV2lkdGg9aSxzLm1heFdpZHRoPW8pKSx2b2lkIDAhPT1hP2ErIiI6YX1mdW5jdGlvbiAkZShlLHQpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZighZSgpKXJldHVybih0aGlzLmdldD10KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuZ2V0fX19IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2lmKGwpe3Uuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O21hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MCIsbC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo2MCU7dG9wOjElIixyZS5hcHBlbmRDaGlsZCh1KS5hcHBlbmRDaGlsZChsKTt2YXIgZT1DLmdldENvbXB1dGVkU3R5bGUobCk7bj0iMSUiIT09ZS50b3Ascz0xMj09PXQoZS5tYXJnaW5MZWZ0KSxsLnN0eWxlLnJpZ2h0PSI2MCUiLG89MzY9PT10KGUucmlnaHQpLHI9MzY9PT10KGUud2lkdGgpLGwuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixpPTEyPT09dChsLm9mZnNldFdpZHRoLzMpLHJlLnJlbW92ZUNoaWxkKHUpLGw9bnVsbH19ZnVuY3Rpb24gdChlKXtyZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKX12YXIgbixyLGksbyxhLHMsdT1FLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGw9RS5jcmVhdGVFbGVtZW50KCJkaXYiKTtsLnN0eWxlJiYobC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGwuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix5LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09bC5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxTLmV4dGVuZCh5LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBlKCkscn0scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG99LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLG59LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBlKCksc30sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe3JldHVybiBlKCksaX0scmVsaWFibGVUckRpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scjtyZXR1cm4gbnVsbD09YSYmKGU9RS5jcmVhdGVFbGVtZW50KCJ0YWJsZSIpLHQ9RS5jcmVhdGVFbGVtZW50KCJ0ciIpLG49RS5jcmVhdGVFbGVtZW50KCJkaXYiKSxlLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHgiLHQuc3R5bGUuaGVpZ2h0PSIxcHgiLG4uc3R5bGUuaGVpZ2h0PSI5cHgiLHJlLmFwcGVuZENoaWxkKGUpLmFwcGVuZENoaWxkKHQpLmFwcGVuZENoaWxkKG4pLHI9Qy5nZXRDb21wdXRlZFN0eWxlKHQpLGE9MzxwYXJzZUludChyLmhlaWdodCkscmUucmVtb3ZlQ2hpbGQoZSkpLGF9fSkpfSgpO3ZhciBfZT1bIldlYmtpdCIsIk1veiIsIm1zIl0semU9RS5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSxVZT17fTtmdW5jdGlvbiBYZShlKXt2YXIgdD1TLmNzc1Byb3BzW2VdfHxVZVtlXTtyZXR1cm4gdHx8KGUgaW4gemU/ZTpVZVtlXT1mdW5jdGlvbihlKXt2YXIgdD1lWzBdLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPV9lLmxlbmd0aDt3aGlsZShuLS0paWYoKGU9X2Vbbl0rdClpbiB6ZSlyZXR1cm4gZX0oZSl8fGUpfXZhciBWZT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sR2U9L14tLS8sWWU9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LFFlPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifTtmdW5jdGlvbiBKZShlLHQsbil7dmFyIHI9dGUuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMl0tKG58fDApKSsoclszXXx8InB4Iik6dH1mdW5jdGlvbiBLZShlLHQsbixyLGksbyl7dmFyIGE9IndpZHRoIj09PXQ/MTowLHM9MCx1PTA7aWYobj09PShyPyJib3JkZXIiOiJjb250ZW50IikpcmV0dXJuIDA7Zm9yKDthPDQ7YSs9MikibWFyZ2luIj09PW4mJih1Kz1TLmNzcyhlLG4rbmVbYV0sITAsaSkpLHI/KCJjb250ZW50Ij09PW4mJih1LT1TLmNzcyhlLCJwYWRkaW5nIituZVthXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYodS09Uy5jc3MoZSwiYm9yZGVyIituZVthXSsiV2lkdGgiLCEwLGkpKSk6KHUrPVMuY3NzKGUsInBhZGRpbmciK25lW2FdLCEwLGkpLCJwYWRkaW5nIiE9PW4/dSs9Uy5jc3MoZSwiYm9yZGVyIituZVthXSsiV2lkdGgiLCEwLGkpOnMrPVMuY3NzKGUsImJvcmRlciIrbmVbYV0rIldpZHRoIiwhMCxpKSk7cmV0dXJuIXImJjA8PW8mJih1Kz1NYXRoLm1heCgwLE1hdGguY2VpbChlWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXS1vLXUtcy0uNSkpfHwwKSx1fWZ1bmN0aW9uIFplKGUsdCxuKXt2YXIgcj1JZShlKSxpPSgheS5ib3hTaXppbmdSZWxpYWJsZSgpfHxuKSYmImJvcmRlci1ib3giPT09Uy5jc3MoZSwiYm94U2l6aW5nIiwhMSxyKSxvPWksYT1CZShlLHQscikscz0ib2Zmc2V0Iit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTtpZihNZS50ZXN0KGEpKXtpZighbilyZXR1cm4gYTthPSJhdXRvIn1yZXR1cm4oIXkuYm94U2l6aW5nUmVsaWFibGUoKSYmaXx8IXkucmVsaWFibGVUckRpbWVuc2lvbnMoKSYmQShlLCJ0ciIpfHwiYXV0byI9PT1hfHwhcGFyc2VGbG9hdChhKSYmImlubGluZSI9PT1TLmNzcyhlLCJkaXNwbGF5IiwhMSxyKSkmJmUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJihpPSJib3JkZXItYm94Ij09PVMuY3NzKGUsImJveFNpemluZyIsITEsciksKG89cyBpbiBlKSYmKGE9ZVtzXSkpLChhPXBhcnNlRmxvYXQoYSl8fDApK0tlKGUsdCxufHwoaT8iYm9yZGVyIjoiY29udGVudCIpLG8scixhKSsicHgifWZ1bmN0aW9uIGV0KGUsdCxuLHIsaSl7cmV0dXJuIG5ldyBldC5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfVMuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49QmUoZSwib3BhY2l0eSIpO3JldHVybiIiPT09bj8iMSI6bn19fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsZ3JpZEFyZWE6ITAsZ3JpZENvbHVtbjohMCxncmlkQ29sdW1uRW5kOiEwLGdyaWRDb2x1bW5TdGFydDohMCxncmlkUm93OiEwLGdyaWRSb3dFbmQ6ITAsZ3JpZFJvd1N0YXJ0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e30sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLGEscz1YKHQpLHU9R2UudGVzdCh0KSxsPWUuc3R5bGU7aWYodXx8KHQ9WGUocykpLGE9Uy5jc3NIb29rc1t0XXx8Uy5jc3NIb29rc1tzXSx2b2lkIDA9PT1uKXJldHVybiBhJiYiZ2V0ImluIGEmJnZvaWQgMCE9PShpPWEuZ2V0KGUsITEscikpP2k6bFt0XTsic3RyaW5nIj09PShvPXR5cGVvZiBuKSYmKGk9dGUuZXhlYyhuKSkmJmlbMV0mJihuPXNlKGUsdCxpKSxvPSJudW1iZXIiKSxudWxsIT1uJiZuPT1uJiYoIm51bWJlciIhPT1vfHx1fHwobis9aSYmaVszXXx8KFMuY3NzTnVtYmVyW3NdPyIiOiJweCIpKSx5LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fChsW3RdPSJpbmhlcml0IiksYSYmInNldCJpbiBhJiZ2b2lkIDA9PT0obj1hLnNldChlLG4scikpfHwodT9sLnNldFByb3BlcnR5KHQsbik6bFt0XT1uKSl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHM9WCh0KTtyZXR1cm4gR2UudGVzdCh0KXx8KHQ9WGUocykpLChhPVMuY3NzSG9va3NbdF18fFMuY3NzSG9va3Nbc10pJiYiZ2V0ImluIGEmJihpPWEuZ2V0KGUsITAsbikpLHZvaWQgMD09PWkmJihpPUJlKGUsdCxyKSksIm5vcm1hbCI9PT1pJiZ0IGluIFFlJiYoaT1RZVt0XSksIiI9PT1ufHxuPyhvPXBhcnNlRmxvYXQoaSksITA9PT1ufHxpc0Zpbml0ZShvKT9vfHwwOmkpOml9fSksUy5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHUpe1MuY3NzSG9va3NbdV09e2dldDpmdW5jdGlvbihlLHQsbil7aWYodClyZXR1cm4hVmUudGVzdChTLmNzcyhlLCJkaXNwbGF5IikpfHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiZlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoP1plKGUsdSxuKTpXZShlLFllLGZ1bmN0aW9uKCl7cmV0dXJuIFplKGUsdSxuKX0pfSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9SWUoZSksbz0heS5zY3JvbGxib3hTaXplKCkmJiJhYnNvbHV0ZSI9PT1pLnBvc2l0aW9uLGE9KG98fG4pJiYiYm9yZGVyLWJveCI9PT1TLmNzcyhlLCJib3hTaXppbmciLCExLGkpLHM9bj9LZShlLHUsbixhLGkpOjA7cmV0dXJuIGEmJm8mJihzLT1NYXRoLmNlaWwoZVsib2Zmc2V0Iit1WzBdLnRvVXBwZXJDYXNlKCkrdS5zbGljZSgxKV0tcGFyc2VGbG9hdChpW3VdKS1LZShlLHUsImJvcmRlciIsITEsaSktLjUpKSxzJiYocj10ZS5leGVjKHQpKSYmInB4IiE9PShyWzNdfHwicHgiKSYmKGUuc3R5bGVbdV09dCx0PVMuY3NzKGUsdSkpLEplKDAsdCxzKX19fSksUy5jc3NIb29rcy5tYXJnaW5MZWZ0PSRlKHkucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4ocGFyc2VGbG9hdChCZShlLCJtYXJnaW5MZWZ0IikpfHxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtV2UoZSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrInB4In0pLFMuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKGksbyl7Uy5jc3NIb29rc1tpK29dPXtleHBhbmQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj17fSxyPSJzdHJpbmciPT10eXBlb2YgZT9lLnNwbGl0KCIgIik6W2VdO3Q8NDt0KyspbltpK25lW3RdK29dPXJbdF18fHJbdC0yXXx8clswXTtyZXR1cm4gbn19LCJtYXJnaW4iIT09aSYmKFMuY3NzSG9va3NbaStvXS5zZXQ9SmUpfSksUy5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxhPTA7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHI9SWUoZSksaT10Lmxlbmd0aDthPGk7YSsrKW9bdFthXV09Uy5jc3MoZSx0W2FdLCExLHIpO3JldHVybiBvfXJldHVybiB2b2lkIDAhPT1uP1Muc3R5bGUoZSx0LG4pOlMuY3NzKGUsdCl9LGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfX0pLCgoUy5Ud2Vlbj1ldCkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpldCxpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxvKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHxTLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KFMuY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1ldC5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6ZXQucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZXQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PVMuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpldC5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSkuaW5pdC5wcm90b3R5cGU9ZXQucHJvdG90eXBlLChldC5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIDEhPT1lLmVsZW0ubm9kZVR5cGV8fG51bGwhPWUuZWxlbVtlLnByb3BdJiZudWxsPT1lLmVsZW0uc3R5bGVbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXToodD1TLmNzcyhlLmVsZW0sZS5wcm9wLCIiKSkmJiJhdXRvIiE9PXQ/dDowfSxzZXQ6ZnVuY3Rpb24oZSl7Uy5meC5zdGVwW2UucHJvcF0/Uy5meC5zdGVwW2UucHJvcF0oZSk6MSE9PWUuZWxlbS5ub2RlVHlwZXx8IVMuY3NzSG9va3NbZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW1hlKGUucHJvcCldP2UuZWxlbVtlLnByb3BdPWUubm93OlMuc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpfX19KS5zY3JvbGxUb3A9ZXQucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0sUy5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxTLmZ4PWV0LnByb3RvdHlwZS5pbml0LFMuZnguc3RlcD17fTt2YXIgdHQsbnQscnQsaXQsb3Q9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGF0PS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gc3QoKXtudCYmKCExPT09RS5oaWRkZW4mJkMucmVxdWVzdEFuaW1hdGlvbkZyYW1lP0MucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0KTpDLnNldFRpbWVvdXQoc3QsUy5meC5pbnRlcnZhbCksUy5meC50aWNrKCkpfWZ1bmN0aW9uIHV0KCl7cmV0dXJuIEMuc2V0VGltZW91dChmdW5jdGlvbigpe3R0PXZvaWQgMH0pLHR0PURhdGUubm93KCl9ZnVuY3Rpb24gbHQoZSx0KXt2YXIgbixyPTAsaT17aGVpZ2h0OmV9O2Zvcih0PXQ/MTowO3I8NDtyKz0yLXQpaVsibWFyZ2luIisobj1uZVtyXSldPWlbInBhZGRpbmciK25dPWU7cmV0dXJuIHQmJihpLm9wYWNpdHk9aS53aWR0aD1lKSxpfWZ1bmN0aW9uIGN0KGUsdCxuKXtmb3IodmFyIHIsaT0oZnQudHdlZW5lcnNbdF18fFtdKS5jb25jYXQoZnQudHdlZW5lcnNbIioiXSksbz0wLGE9aS5sZW5ndGg7bzxhO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gZnQobyxlLHQpe3ZhciBuLGEscj0wLGk9ZnQucHJlZmlsdGVycy5sZW5ndGgscz1TLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIHUuZWxlbX0pLHU9ZnVuY3Rpb24oKXtpZihhKXJldHVybiExO2Zvcih2YXIgZT10dHx8dXQoKSx0PU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi1lKSxuPTEtKHQvbC5kdXJhdGlvbnx8MCkscj0wLGk9bC50d2VlbnMubGVuZ3RoO3I8aTtyKyspbC50d2VlbnNbcl0ucnVuKG4pO3JldHVybiBzLm5vdGlmeVdpdGgobyxbbCxuLHRdKSxuPDEmJmk/dDooaXx8cy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsXSksITEpfSxsPXMucHJvbWlzZSh7ZWxlbTpvLHByb3BzOlMuZXh0ZW5kKHt9LGUpLG9wdHM6Uy5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e30sZWFzaW5nOlMuZWFzaW5nLl9kZWZhdWx0fSx0KSxvcmlnaW5hbFByb3BlcnRpZXM6ZSxvcmlnaW5hbE9wdGlvbnM6dCxzdGFydFRpbWU6dHR8fHV0KCksZHVyYXRpb246dC5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oZSx0KXt2YXIgbj1TLlR3ZWVuKG8sbC5vcHRzLGUsdCxsLm9wdHMuc3BlY2lhbEVhc2luZ1tlXXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gobiksbn0sc3RvcDpmdW5jdGlvbihlKXt2YXIgdD0wLG49ZT9sLnR3ZWVucy5sZW5ndGg6MDtpZihhKXJldHVybiB0aGlzO2ZvcihhPSEwO3Q8bjt0KyspbC50d2VlbnNbdF0ucnVuKDEpO3JldHVybiBlPyhzLm5vdGlmeVdpdGgobyxbbCwxLDBdKSxzLnJlc29sdmVXaXRoKG8sW2wsZV0pKTpzLnJlamVjdFdpdGgobyxbbCxlXSksdGhpc319KSxjPWwucHJvcHM7Zm9yKCFmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGE7Zm9yKG4gaW4gZSlpZihpPXRbcj1YKG4pXSxvPWVbbl0sQXJyYXkuaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLChhPVMuY3NzSG9va3Nbcl0pJiYiZXhwYW5kImluIGEpZm9yKG4gaW4gbz1hLmV4cGFuZChvKSxkZWxldGUgZVtyXSxvKW4gaW4gZXx8KGVbbl09b1tuXSx0W25dPWkpO2Vsc2UgdFtyXT1pfShjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtyPGk7cisrKWlmKG49ZnQucHJlZmlsdGVyc1tyXS5jYWxsKGwsbyxjLGwub3B0cykpcmV0dXJuIG0obi5zdG9wKSYmKFMuX3F1ZXVlSG9va3MobC5lbGVtLGwub3B0cy5xdWV1ZSkuc3RvcD1uLnN0b3AuYmluZChuKSksbjtyZXR1cm4gUy5tYXAoYyxjdCxsKSxtKGwub3B0cy5zdGFydCkmJmwub3B0cy5zdGFydC5jYWxsKG8sbCksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyksUy5meC50aW1lcihTLmV4dGVuZCh1LHtlbGVtOm8sYW5pbTpsLHF1ZXVlOmwub3B0cy5xdWV1ZX0pKSxsfVMuQW5pbWF0aW9uPVMuZXh0ZW5kKGZ0LHt0d2VlbmVyczp7IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KTtyZXR1cm4gc2Uobi5lbGVtLGUsdGUuZXhlYyh0KSxuKSxufV19LHR3ZWVuZXI6ZnVuY3Rpb24oZSx0KXttKGUpPyh0PWUsZT1bIioiXSk6ZT1lLm1hdGNoKFApO2Zvcih2YXIgbixyPTAsaT1lLmxlbmd0aDtyPGk7cisrKW49ZVtyXSxmdC50d2VlbmVyc1tuXT1mdC50d2VlbmVyc1tuXXx8W10sZnQudHdlZW5lcnNbbl0udW5zaGlmdCh0KX0scHJlZmlsdGVyczpbZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsLGMsZj0id2lkdGgiaW4gdHx8ImhlaWdodCJpbiB0LHA9dGhpcyxkPXt9LGg9ZS5zdHlsZSxnPWUubm9kZVR5cGUmJmFlKGUpLHY9WS5nZXQoZSwiZnhzaG93Iik7Zm9yKHIgaW4gbi5xdWV1ZXx8KG51bGw9PShhPVMuX3F1ZXVlSG9va3MoZSwiZngiKSkudW5xdWV1ZWQmJihhLnVucXVldWVkPTAscz1hLmVtcHR5LmZpcmUsYS5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7YS51bnF1ZXVlZHx8cygpfSksYS51bnF1ZXVlZCsrLHAuYWx3YXlzKGZ1bmN0aW9uKCl7cC5hbHdheXMoZnVuY3Rpb24oKXthLnVucXVldWVkLS0sUy5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8YS5lbXB0eS5maXJlKCl9KX0pKSx0KWlmKGk9dFtyXSxvdC50ZXN0KGkpKXtpZihkZWxldGUgdFtyXSxvPW98fCJ0b2dnbGUiPT09aSxpPT09KGc/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCF2fHx2b2lkIDA9PT12W3JdKWNvbnRpbnVlO2c9ITB9ZFtyXT12JiZ2W3JdfHxTLnN0eWxlKGUscil9aWYoKHU9IVMuaXNFbXB0eU9iamVjdCh0KSl8fCFTLmlzRW1wdHlPYmplY3QoZCkpZm9yKHIgaW4gZiYmMT09PWUubm9kZVR5cGUmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSxudWxsPT0obD12JiZ2LmRpc3BsYXkpJiYobD1ZLmdldChlLCJkaXNwbGF5IikpLCJub25lIj09PShjPVMuY3NzKGUsImRpc3BsYXkiKSkmJihsP2M9bDoobGUoW2VdLCEwKSxsPWUuc3R5bGUuZGlzcGxheXx8bCxjPVMuY3NzKGUsImRpc3BsYXkiKSxsZShbZV0pKSksKCJpbmxpbmUiPT09Y3x8ImlubGluZS1ibG9jayI9PT1jJiZudWxsIT1sKSYmIm5vbmUiPT09Uy5jc3MoZSwiZmxvYXQiKSYmKHV8fChwLmRvbmUoZnVuY3Rpb24oKXtoLmRpc3BsYXk9bH0pLG51bGw9PWwmJihjPWguZGlzcGxheSxsPSJub25lIj09PWM/IiI6YykpLGguZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihoLm92ZXJmbG93PSJoaWRkZW4iLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSx1PSExLGQpdXx8KHY/ImhpZGRlbiJpbiB2JiYoZz12LmhpZGRlbik6dj1ZLmFjY2VzcyhlLCJmeHNob3ciLHtkaXNwbGF5Omx9KSxvJiYodi5oaWRkZW49IWcpLGcmJmxlKFtlXSwhMCkscC5kb25lKGZ1bmN0aW9uKCl7Zm9yKHIgaW4gZ3x8bGUoW2VdKSxZLnJlbW92ZShlLCJmeHNob3ciKSxkKVMuc3R5bGUoZSxyLGRbcl0pfSkpLHU9Y3QoZz92W3JdOjAscixwKSxyIGluIHZ8fCh2W3JdPXUuc3RhcnQsZyYmKHUuZW5kPXUuc3RhcnQsdS5zdGFydD0wKSl9XSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P2Z0LnByZWZpbHRlcnMudW5zaGlmdChlKTpmdC5wcmVmaWx0ZXJzLnB1c2goZSl9fSksUy5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmIm9iamVjdCI9PXR5cGVvZiBlP1MuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8bShlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYhbSh0KSYmdH07cmV0dXJuIFMuZngub2ZmP3IuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIHIuZHVyYXRpb24mJihyLmR1cmF0aW9uIGluIFMuZnguc3BlZWRzP3IuZHVyYXRpb249Uy5meC5zcGVlZHNbci5kdXJhdGlvbl06ci5kdXJhdGlvbj1TLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ci5xdWV1ZSYmITAhPT1yLnF1ZXVlfHwoci5xdWV1ZT0iZngiKSxyLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXttKHIub2xkKSYmci5vbGQuY2FsbCh0aGlzKSxyLnF1ZXVlJiZTLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0sUy5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoYWUpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBpPVMuaXNFbXB0eU9iamVjdCh0KSxvPVMuc3BlZWQoZSxuLHIpLGE9ZnVuY3Rpb24oKXt2YXIgZT1mdCh0aGlzLFMuZXh0ZW5kKHt9LHQpLG8pOyhpfHxZLmdldCh0aGlzLCJmaW5pc2giKSkmJmUuc3RvcCghMCl9O3JldHVybiBhLmZpbmlzaD1hLGl8fCExPT09by5xdWV1ZT90aGlzLmVhY2goYSk6dGhpcy5xdWV1ZShvLnF1ZXVlLGEpfSxzdG9wOmZ1bmN0aW9uKGksZSxvKXt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0b3A7ZGVsZXRlIGUuc3RvcCx0KG8pfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGkmJihvPWUsZT1pLGk9dm9pZCAwKSxlJiZ0aGlzLnF1ZXVlKGl8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPSEwLHQ9bnVsbCE9aSYmaSsicXVldWVIb29rcyIsbj1TLnRpbWVycyxyPVkuZ2V0KHRoaXMpO2lmKHQpclt0XSYmclt0XS5zdG9wJiZhKHJbdF0pO2Vsc2UgZm9yKHQgaW4gcilyW3RdJiZyW3RdLnN0b3AmJmF0LnRlc3QodCkmJmEoclt0XSk7Zm9yKHQ9bi5sZW5ndGg7dC0tOyluW3RdLmVsZW0hPT10aGlzfHxudWxsIT1pJiZuW3RdLnF1ZXVlIT09aXx8KG5bdF0uYW5pbS5zdG9wKG8pLGU9ITEsbi5zcGxpY2UodCwxKSk7IWUmJm98fFMuZGVxdWV1ZSh0aGlzLGkpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4hMSE9PWEmJihhPWF8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQ9WS5nZXQodGhpcyksbj10W2ErInF1ZXVlIl0scj10W2ErInF1ZXVlSG9va3MiXSxpPVMudGltZXJzLG89bj9uLmxlbmd0aDowO2Zvcih0LmZpbmlzaD0hMCxTLnF1ZXVlKHRoaXMsYSxbXSksciYmci5zdG9wJiZyLnN0b3AuY2FsbCh0aGlzLCEwKSxlPWkubGVuZ3RoO2UtLTspaVtlXS5lbGVtPT09dGhpcyYmaVtlXS5xdWV1ZT09PWEmJihpW2VdLmFuaW0uc3RvcCghMCksaS5zcGxpY2UoZSwxKSk7Zm9yKGU9MDtlPG87ZSsrKW5bZV0mJm5bZV0uZmluaXNoJiZuW2VdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSB0LmZpbmlzaH0pfX0pLFMuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSxyKXt2YXIgaT1TLmZuW3JdO1MuZm5bcl09ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP2kuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShsdChyLCEwKSxlLHQsbil9fSksUy5lYWNoKHtzbGlkZURvd246bHQoInNob3ciKSxzbGlkZVVwOmx0KCJoaWRlIiksc2xpZGVUb2dnbGU6bHQoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSxyKXtTLmZuW2VdPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5hbmltYXRlKHIsZSx0LG4pfX0pLFMudGltZXJzPVtdLFMuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9MCxuPVMudGltZXJzO2Zvcih0dD1EYXRlLm5vdygpO3Q8bi5sZW5ndGg7dCsrKShlPW5bdF0pKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fFMuZnguc3RvcCgpLHR0PXZvaWQgMH0sUy5meC50aW1lcj1mdW5jdGlvbihlKXtTLnRpbWVycy5wdXNoKGUpLFMuZnguc3RhcnQoKX0sUy5meC5pbnRlcnZhbD0xMyxTLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7bnR8fChudD0hMCxzdCgpKX0sUy5meC5zdG9wPWZ1bmN0aW9uKCl7bnQ9bnVsbH0sUy5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sUy5mbi5kZWxheT1mdW5jdGlvbihyLGUpe3JldHVybiByPVMuZngmJlMuZnguc3BlZWRzW3JdfHxyLGU9ZXx8ImZ4Iix0aGlzLnF1ZXVlKGUsZnVuY3Rpb24oZSx0KXt2YXIgbj1DLnNldFRpbWVvdXQoZSxyKTt0LnN0b3A9ZnVuY3Rpb24oKXtDLmNsZWFyVGltZW91dChuKX19KX0scnQ9RS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGl0PUUuY3JlYXRlRWxlbWVudCgic2VsZWN0IikuYXBwZW5kQ2hpbGQoRS5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSkscnQudHlwZT0iY2hlY2tib3giLHkuY2hlY2tPbj0iIiE9PXJ0LnZhbHVlLHkub3B0U2VsZWN0ZWQ9aXQuc2VsZWN0ZWQsKHJ0PUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkudmFsdWU9InQiLHJ0LnR5cGU9InJhZGlvIix5LnJhZGlvVmFsdWU9InQiPT09cnQudmFsdWU7dmFyIHB0LGR0PVMuZXhwci5hdHRySGFuZGxlO1MuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuICQodGhpcyxTLmF0dHIsZSx0LDE8YXJndW1lbnRzLmxlbmd0aCl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1MucmVtb3ZlQXR0cih0aGlzLGUpfSl9fSksUy5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlLmdldEF0dHJpYnV0ZT9TLnByb3AoZSx0LG4pOigxPT09byYmUy5pc1hNTERvYyhlKXx8KGk9Uy5hdHRySG9va3NbdC50b0xvd2VyQ2FzZSgpXXx8KFMuZXhwci5tYXRjaC5ib29sLnRlc3QodCk/cHQ6dm9pZCAwKSksdm9pZCAwIT09bj9udWxsPT09bj92b2lkIFMucmVtb3ZlQXR0cihlLHQpOmkmJiJzZXQiaW4gaSYmdm9pZCAwIT09KHI9aS5zZXQoZSxuLHQpKT9yOihlLnNldEF0dHJpYnV0ZSh0LG4rIiIpLG4pOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6bnVsbD09KHI9Uy5maW5kLmF0dHIoZSx0KSk/dm9pZCAwOnIpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlLHQpe2lmKCF5LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZBKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dCYmdC5tYXRjaChQKTtpZihpJiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPWlbcisrXSllLnJlbW92ZUF0dHJpYnV0ZShuKX19KSxwdD17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hMT09PXQ/Uy5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0sUy5lYWNoKFMuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGUsdCl7dmFyIGE9ZHRbdF18fFMuZmluZC5hdHRyO2R0W3RdPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89dC50b0xvd2VyQ2FzZSgpO3JldHVybiBufHwoaT1kdFtvXSxkdFtvXT1yLHI9bnVsbCE9YShlLHQsbik/bzpudWxsLGR0W29dPWkpLHJ9fSk7dmFyIGh0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksZ3Q9L14oPzphfGFyZWEpJC9pO2Z1bmN0aW9uIHZ0KGUpe3JldHVybihlLm1hdGNoKFApfHxbXSkuam9pbigiICIpfWZ1bmN0aW9uIHl0KGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifWZ1bmN0aW9uIG10KGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP2U6InN0cmluZyI9PXR5cGVvZiBlJiZlLm1hdGNoKFApfHxbXX1TLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsUy5wcm9wLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tTLnByb3BGaXhbZV18fGVdfSl9fSksUy5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuIDE9PT1vJiZTLmlzWE1MRG9jKGUpfHwodD1TLnByb3BGaXhbdF18fHQsaT1TLnByb3BIb29rc1t0XSksdm9pZCAwIT09bj9pJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Uy5maW5kLmF0dHIoZSwidGFiaW5kZXgiKTtyZXR1cm4gdD9wYXJzZUludCh0LDEwKTpodC50ZXN0KGUubm9kZU5hbWUpfHxndC50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSx5Lm9wdFNlbGVjdGVkfHwoUy5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTt0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLFMuZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7Uy5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLFMuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvLGEscyx1PTA7aWYobSh0KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykuYWRkQ2xhc3ModC5jYWxsKHRoaXMsZSx5dCh0aGlzKSkpfSk7aWYoKGU9bXQodCkpLmxlbmd0aCl3aGlsZShuPXRoaXNbdSsrXSlpZihpPXl0KG4pLHI9MT09PW4ubm9kZVR5cGUmJiIgIit2dChpKSsiICIpe2E9MDt3aGlsZShvPWVbYSsrXSlyLmluZGV4T2YoIiAiK28rIiAiKTwwJiYocis9bysiICIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHQpe3ZhciBlLG4scixpLG8sYSxzLHU9MDtpZihtKHQpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7Uyh0aGlzKS5yZW1vdmVDbGFzcyh0LmNhbGwodGhpcyxlLHl0KHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKChlPW10KHQpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT15dChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrdnQoaSkrIiAiKXthPTA7d2hpbGUobz1lW2ErK10pd2hpbGUoLTE8ci5pbmRleE9mKCIgIitvKyIgIikpcj1yLnJlcGxhY2UoIiAiK28rIiAiLCIgIik7aSE9PShzPXZ0KHIpKSYmbi5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oaSx0KXt2YXIgbz10eXBlb2YgaSxhPSJzdHJpbmciPT09b3x8QXJyYXkuaXNBcnJheShpKTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiZhP3Q/dGhpcy5hZGRDbGFzcyhpKTp0aGlzLnJlbW92ZUNsYXNzKGkpOm0oaSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykudG9nZ2xlQ2xhc3MoaS5jYWxsKHRoaXMsZSx5dCh0aGlzKSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQsbixyO2lmKGEpe3Q9MCxuPVModGhpcykscj1tdChpKTt3aGlsZShlPXJbdCsrXSluLmhhc0NsYXNzKGUpP24ucmVtb3ZlQ2xhc3MoZSk6bi5hZGRDbGFzcyhlKX1lbHNlIHZvaWQgMCE9PWkmJiJib29sZWFuIiE9PW98fCgoZT15dCh0aGlzKSkmJlkuc2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iLGUpLHRoaXMuc2V0QXR0cmlidXRlJiZ0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGV8fCExPT09aT8iIjpZLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPTA7dD0iICIrZSsiICI7d2hpbGUobj10aGlzW3IrK10paWYoMT09PW4ubm9kZVR5cGUmJi0xPCgiICIrdnQoeXQobikpKyIgIikuaW5kZXhPZih0KSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgeHQ9L1xyL2c7Uy5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihuKXt2YXIgcixlLGksdD10aGlzWzBdO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPW0obiksdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0OzE9PT10aGlzLm5vZGVUeXBlJiYobnVsbD09KHQ9aT9uLmNhbGwodGhpcyxlLFModGhpcykudmFsKCkpOm4pP3Q9IiI6Im51bWJlciI9PXR5cGVvZiB0P3QrPSIiOkFycmF5LmlzQXJyYXkodCkmJih0PVMubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSwocj1TLnZhbEhvb2tzW3RoaXMudHlwZV18fFMudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJzZXQiaW4gciYmdm9pZCAwIT09ci5zZXQodGhpcyx0LCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT10KSl9KSk6dD8ocj1TLnZhbEhvb2tzW3QudHlwZV18fFMudmFsSG9va3NbdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJnZXQiaW4gciYmdm9pZCAwIT09KGU9ci5nZXQodCwidmFsdWUiKSk/ZToic3RyaW5nIj09dHlwZW9mKGU9dC52YWx1ZSk/ZS5yZXBsYWNlKHh0LCIiKTpudWxsPT1lPyIiOmU6dm9pZCAwfX0pLFMuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Uy5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90OnZ0KFMudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLm9wdGlvbnMsbz1lLnNlbGVjdGVkSW5kZXgsYT0ic2VsZWN0LW9uZSI9PT1lLnR5cGUscz1hP251bGw6W10sdT1hP28rMTppLmxlbmd0aDtmb3Iocj1vPDA/dTphP286MDtyPHU7cisrKWlmKCgobj1pW3JdKS5zZWxlY3RlZHx8cj09PW8pJiYhbi5kaXNhYmxlZCYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFBKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9UyhuKS52YWwoKSxhKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPVMubWFrZUFycmF5KHQpLGE9aS5sZW5ndGg7d2hpbGUoYS0tKSgocj1pW2FdKS5zZWxlY3RlZD0tMTxTLmluQXJyYXkoUy52YWxIb29rcy5vcHRpb24uZ2V0KHIpLG8pKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19fSksUy5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7Uy52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPS0xPFMuaW5BcnJheShTKGUpLnZhbCgpLHQpfX0seS5jaGVja09ufHwoUy52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pLHkuZm9jdXNpbj0ib25mb2N1c2luImluIEM7dmFyIGJ0PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyx3dD1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpfTtTLmV4dGVuZChTLmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbCxjLGYscD1bbnx8RV0sZD12LmNhbGwoZSwidHlwZSIpP2UudHlwZTplLGg9di5jYWxsKGUsIm5hbWVzcGFjZSIpP2UubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYobz1mPWE9bj1ufHxFLDMhPT1uLm5vZGVUeXBlJiY4IT09bi5ub2RlVHlwZSYmIWJ0LnRlc3QoZCtTLmV2ZW50LnRyaWdnZXJlZCkmJigtMTxkLmluZGV4T2YoIi4iKSYmKGQ9KGg9ZC5zcGxpdCgiLiIpKS5zaGlmdCgpLGguc29ydCgpKSx1PWQuaW5kZXhPZigiOiIpPDAmJiJvbiIrZCwoZT1lW1MuZXhwYW5kb10/ZTpuZXcgUy5FdmVudChkLCJvYmplY3QiPT10eXBlb2YgZSYmZSkpLmlzVHJpZ2dlcj1yPzI6MyxlLm5hbWVzcGFjZT1oLmpvaW4oIi4iKSxlLnJuYW1lc3BhY2U9ZS5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGUucmVzdWx0PXZvaWQgMCxlLnRhcmdldHx8KGUudGFyZ2V0PW4pLHQ9bnVsbD09dD9bZV06Uy5tYWtlQXJyYXkodCxbZV0pLGM9Uy5ldmVudC5zcGVjaWFsW2RdfHx7fSxyfHwhYy50cmlnZ2VyfHwhMSE9PWMudHJpZ2dlci5hcHBseShuLHQpKSl7aWYoIXImJiFjLm5vQnViYmxlJiYheChuKSl7Zm9yKHM9Yy5kZWxlZ2F0ZVR5cGV8fGQsYnQudGVzdChzK2QpfHwobz1vLnBhcmVudE5vZGUpO287bz1vLnBhcmVudE5vZGUpcC5wdXNoKG8pLGE9bzthPT09KG4ub3duZXJEb2N1bWVudHx8RSkmJnAucHVzaChhLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvd3x8Qyl9aT0wO3doaWxlKChvPXBbaSsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpZj1vLGUudHlwZT0xPGk/czpjLmJpbmRUeXBlfHxkLChsPShZLmdldChvLCJldmVudHMiKXx8T2JqZWN0LmNyZWF0ZShudWxsKSlbZS50eXBlXSYmWS5nZXQobywiaGFuZGxlIikpJiZsLmFwcGx5KG8sdCksKGw9dSYmb1t1XSkmJmwuYXBwbHkmJlYobykmJihlLnJlc3VsdD1sLmFwcGx5KG8sdCksITE9PT1lLnJlc3VsdCYmZS5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gZS50eXBlPWQscnx8ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Yy5fZGVmYXVsdCYmITEhPT1jLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksdCl8fCFWKG4pfHx1JiZtKG5bZF0pJiYheChuKSYmKChhPW5bdV0pJiYoblt1XT1udWxsKSxTLmV2ZW50LnRyaWdnZXJlZD1kLGUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSYmZi5hZGRFdmVudExpc3RlbmVyKGQsd3QpLG5bZF0oKSxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYucmVtb3ZlRXZlbnRMaXN0ZW5lcihkLHd0KSxTLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsYSYmKG5bdV09YSkpLGUucmVzdWx0fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVMuZXh0ZW5kKG5ldyBTLkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMH0pO1MuZXZlbnQudHJpZ2dlcihyLG51bGwsdCl9fSksUy5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uy5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXNbMF07aWYobilyZXR1cm4gUy5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKX19KSx5LmZvY3VzaW58fFMuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24obixyKXt2YXIgaT1mdW5jdGlvbihlKXtTLmV2ZW50LnNpbXVsYXRlKHIsZS50YXJnZXQsUy5ldmVudC5maXgoZSkpfTtTLmV2ZW50LnNwZWNpYWxbcl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLmRvY3VtZW50fHx0aGlzLHQ9WS5hY2Nlc3MoZSxyKTt0fHxlLmFkZEV2ZW50TGlzdGVuZXIobixpLCEwKSxZLmFjY2VzcyhlLHIsKHR8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcy5kb2N1bWVudHx8dGhpcyx0PVkuYWNjZXNzKGUsciktMTt0P1kuYWNjZXNzKGUscix0KTooZS5yZW1vdmVFdmVudExpc3RlbmVyKG4saSwhMCksWS5yZW1vdmUoZSxyKSl9fX0pO3ZhciBUdD1DLmxvY2F0aW9uLEN0PXtndWlkOkRhdGUubm93KCl9LEV0PS9cPy87Uy5wYXJzZVhNTD1mdW5jdGlvbihlKXt2YXIgdDtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsO3RyeXt0PShuZXcgQy5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCJ0ZXh0L3htbCIpfWNhdGNoKGUpe3Q9dm9pZCAwfXJldHVybiB0JiYhdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fFMuZXJyb3IoIkludmFsaWQgWE1MOiAiK2UpLHR9O3ZhciBTdD0vXFtcXSQvLGt0PS9ccj9cbi9nLEF0PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxOdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gRHQobixlLHIsaSl7dmFyIHQ7aWYoQXJyYXkuaXNBcnJheShlKSlTLmVhY2goZSxmdW5jdGlvbihlLHQpe3J8fFN0LnRlc3Qobik/aShuLHQpOkR0KG4rIlsiKygib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPXQ/ZToiIikrIl0iLHQscixpKX0pO2Vsc2UgaWYocnx8Im9iamVjdCIhPT13KGUpKWkobixlKTtlbHNlIGZvcih0IGluIGUpRHQobisiWyIrdCsiXSIsZVt0XSxyLGkpfVMucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1tKHQpP3QoKTp0O3Jbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG51bGw9PW4/IiI6bil9O2lmKG51bGw9PWUpcmV0dXJuIiI7aWYoQXJyYXkuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFTLmlzUGxhaW5PYmplY3QoZSkpUy5lYWNoKGUsZnVuY3Rpb24oKXtpKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKG4gaW4gZSlEdChuLGVbbl0sdCxpKTtyZXR1cm4gci5qb2luKCImIil9LFMuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPVMucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP1MubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIVModGhpcykuaXMoIjpkaXNhYmxlZCIpJiZOdC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhQXQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IXBlLnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49Uyh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOkFycmF5LmlzQXJyYXkobik/Uy5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKGt0LCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShrdCwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBqdD0vJTIwL2cscXQ9LyMuKiQvLEx0PS8oWz8mXSlfPVteJl0qLyxIdD0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLE90PS9eKD86R0VUfEhFQUQpJC8sUHQ9L15cL1wvLyxSdD17fSxNdD17fSxJdD0iKi8iLmNvbmNhdCgiKiIpLFd0PUUuY3JlYXRlRWxlbWVudCgiYSIpO2Z1bmN0aW9uIEZ0KG8pe3JldHVybiBmdW5jdGlvbihlLHQpeyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPSIqIik7dmFyIG4scj0wLGk9ZS50b0xvd2VyQ2FzZSgpLm1hdGNoKFApfHxbXTtpZihtKHQpKXdoaWxlKG49aVtyKytdKSIrIj09PW5bMF0/KG49bi5zbGljZSgxKXx8IioiLChvW25dPW9bbl18fFtdKS51bnNoaWZ0KHQpKToob1tuXT1vW25dfHxbXSkucHVzaCh0KX19ZnVuY3Rpb24gQnQodCxpLG8sYSl7dmFyIHM9e30sdT10PT09TXQ7ZnVuY3Rpb24gbChlKXt2YXIgcjtyZXR1cm4gc1tlXT0hMCxTLmVhY2godFtlXXx8W10sZnVuY3Rpb24oZSx0KXt2YXIgbj10KGksbyxhKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIG58fHV8fHNbbl0/dT8hKHI9bik6dm9pZCAwOihpLmRhdGFUeXBlcy51bnNoaWZ0KG4pLGwobiksITEpfSkscn1yZXR1cm4gbChpLmRhdGFUeXBlc1swXSl8fCFzWyIqIl0mJmwoIioiKX1mdW5jdGlvbiAkdChlLHQpe3ZhciBuLHIsaT1TLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl2b2lkIDAhPT10W25dJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZTLmV4dGVuZCghMCxlLHIpLGV9V3QuaHJlZj1UdC5ocmVmLFMuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpUdC5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDovXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLy50ZXN0KFR0LnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOkl0LHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjpTLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8kdCgkdChlLFMuYWpheFNldHRpbmdzKSx0KTokdChTLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpGdChSdCksYWpheFRyYW5zcG9ydDpGdChNdCksYWpheDpmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksdD10fHx7fTt2YXIgYyxmLHAsbixkLHIsaCxnLGksbyx2PVMuYWpheFNldHVwKHt9LHQpLHk9di5jb250ZXh0fHx2LG09di5jb250ZXh0JiYoeS5ub2RlVHlwZXx8eS5qcXVlcnkpP1MoeSk6Uy5ldmVudCx4PVMuRGVmZXJyZWQoKSxiPVMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHc9di5zdGF0dXNDb2RlfHx7fSxhPXt9LHM9e30sdT0iY2FuY2VsZWQiLFQ9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihoKXtpZighbil7bj17fTt3aGlsZSh0PUh0LmV4ZWMocCkpblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXT0oblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXXx8W10pLmNvbmNhdCh0WzJdKX10PW5bZS50b0xvd2VyQ2FzZSgpKyIgIl19cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmpvaW4oIiwgIil9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiBoP3A6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1oJiYoZT1zW2UudG9Mb3dlckNhc2UoKV09c1tlLnRvTG93ZXJDYXNlKCldfHxlLGFbZV09dCksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09aCYmKHYubWltZVR5cGU9ZSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihlKXt2YXIgdDtpZihlKWlmKGgpVC5hbHdheXMoZVtULnN0YXR1c10pO2Vsc2UgZm9yKHQgaW4gZSl3W3RdPVt3W3RdLGVbdF1dO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHx1O3JldHVybiBjJiZjLmFib3J0KHQpLGwoMCx0KSx0aGlzfX07aWYoeC5wcm9taXNlKFQpLHYudXJsPSgoZXx8di51cmx8fFR0LmhyZWYpKyIiKS5yZXBsYWNlKFB0LFR0LnByb3RvY29sKyIvLyIpLHYudHlwZT10Lm1ldGhvZHx8dC50eXBlfHx2Lm1ldGhvZHx8di50eXBlLHYuZGF0YVR5cGVzPSh2LmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goUCl8fFsiIl0sbnVsbD09di5jcm9zc0RvbWFpbil7cj1FLmNyZWF0ZUVsZW1lbnQoImEiKTt0cnl7ci5ocmVmPXYudXJsLHIuaHJlZj1yLmhyZWYsdi5jcm9zc0RvbWFpbj1XdC5wcm90b2NvbCsiLy8iK1d0Lmhvc3QhPXIucHJvdG9jb2wrIi8vIityLmhvc3R9Y2F0Y2goZSl7di5jcm9zc0RvbWFpbj0hMH19aWYodi5kYXRhJiZ2LnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIHYuZGF0YSYmKHYuZGF0YT1TLnBhcmFtKHYuZGF0YSx2LnRyYWRpdGlvbmFsKSksQnQoUnQsdix0LFQpLGgpcmV0dXJuIFQ7Zm9yKGkgaW4oZz1TLmV2ZW50JiZ2Lmdsb2JhbCkmJjA9PVMuYWN0aXZlKysmJlMuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iiksdi50eXBlPXYudHlwZS50b1VwcGVyQ2FzZSgpLHYuaGFzQ29udGVudD0hT3QudGVzdCh2LnR5cGUpLGY9di51cmwucmVwbGFjZShxdCwiIiksdi5oYXNDb250ZW50P3YuZGF0YSYmdi5wcm9jZXNzRGF0YSYmMD09PSh2LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJih2LmRhdGE9di5kYXRhLnJlcGxhY2UoanQsIisiKSk6KG89di51cmwuc2xpY2UoZi5sZW5ndGgpLHYuZGF0YSYmKHYucHJvY2Vzc0RhdGF8fCJzdHJpbmciPT10eXBlb2Ygdi5kYXRhKSYmKGYrPShFdC50ZXN0KGYpPyImIjoiPyIpK3YuZGF0YSxkZWxldGUgdi5kYXRhKSwhMT09PXYuY2FjaGUmJihmPWYucmVwbGFjZShMdCwiJDEiKSxvPShFdC50ZXN0KGYpPyImIjoiPyIpKyJfPSIrQ3QuZ3VpZCsrK28pLHYudXJsPWYrbyksdi5pZk1vZGlmaWVkJiYoUy5sYXN0TW9kaWZpZWRbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLFMubGFzdE1vZGlmaWVkW2ZdKSxTLmV0YWdbZl0mJlQuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsUy5ldGFnW2ZdKSksKHYuZGF0YSYmdi5oYXNDb250ZW50JiYhMSE9PXYuY29udGVudFR5cGV8fHQuY29udGVudFR5cGUpJiZULnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsdi5jb250ZW50VHlwZSksVC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLHYuZGF0YVR5cGVzWzBdJiZ2LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dP3YuYWNjZXB0c1t2LmRhdGFUeXBlc1swXV0rKCIqIiE9PXYuZGF0YVR5cGVzWzBdPyIsICIrSXQrIjsgcT0wLjAxIjoiIik6di5hY2NlcHRzWyIqIl0pLHYuaGVhZGVycylULnNldFJlcXVlc3RIZWFkZXIoaSx2LmhlYWRlcnNbaV0pO2lmKHYuYmVmb3JlU2VuZCYmKCExPT09di5iZWZvcmVTZW5kLmNhbGwoeSxULHYpfHxoKSlyZXR1cm4gVC5hYm9ydCgpO2lmKHU9ImFib3J0IixiLmFkZCh2LmNvbXBsZXRlKSxULmRvbmUodi5zdWNjZXNzKSxULmZhaWwodi5lcnJvciksYz1CdChNdCx2LHQsVCkpe2lmKFQucmVhZHlTdGF0ZT0xLGcmJm0udHJpZ2dlcigiYWpheFNlbmQiLFtULHZdKSxoKXJldHVybiBUO3YuYXN5bmMmJjA8di50aW1lb3V0JiYoZD1DLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtULmFib3J0KCJ0aW1lb3V0Iil9LHYudGltZW91dCkpO3RyeXtoPSExLGMuc2VuZChhLGwpfWNhdGNoKGUpe2lmKGgpdGhyb3cgZTtsKC0xLGUpfX1lbHNlIGwoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGwoZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPXQ7aHx8KGg9ITAsZCYmQy5jbGVhclRpbWVvdXQoZCksYz12b2lkIDAscD1yfHwiIixULnJlYWR5U3RhdGU9MDxlPzQ6MCxpPTIwMDw9ZSYmZTwzMDB8fDMwND09PWUsbiYmKHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHM9ZS5jb250ZW50cyx1PWUuZGF0YVR5cGVzO3doaWxlKCIqIj09PXVbMF0pdS5zaGlmdCgpLHZvaWQgMD09PXImJihyPWUubWltZVR5cGV8fHQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihyKWZvcihpIGluIHMpaWYoc1tpXSYmc1tpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pbz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpKyIgIit1WzBdXSl7bz1pO2JyZWFrfWF8fChhPWkpfW89b3x8YX1pZihvKXJldHVybiBvIT09dVswXSYmdS51bnNoaWZ0KG8pLG5bb119KHYsVCxuKSksIWkmJi0xPFMuaW5BcnJheSgic2NyaXB0Iix2LmRhdGFUeXBlcykmJih2LmNvbnZlcnRlcnNbInRleHQgc2NyaXB0Il09ZnVuY3Rpb24oKXt9KSxzPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IoYSBpbiBlLmNvbnZlcnRlcnMpbFthLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1thXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoIioiPT09bylvPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09byl7aWYoIShhPWxbdSsiICIrb118fGxbIiogIitvXSkpZm9yKGkgaW4gbClpZigocz1pLnNwbGl0KCIgIikpWzFdPT09byYmKGE9bFt1KyIgIitzWzBdXXx8bFsiKiAiK3NbMF1dKSl7ITA9PT1hP2E9bFtpXTohMCE9PWxbaV0mJihvPXNbMF0sYy51bnNoaWZ0KHNbMV0pKTticmVha31pZighMCE9PWEpaWYoYSYmZVsidGhyb3dzIl0pdD1hKHQpO2Vsc2UgdHJ5e3Q9YSh0KX1jYXRjaChlKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjphP2U6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK299fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19KHYscyxULGkpLGk/KHYuaWZNb2RpZmllZCYmKCh1PVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSkmJihTLmxhc3RNb2RpZmllZFtmXT11KSwodT1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIikpJiYoUy5ldGFnW2ZdPXUpKSwyMDQ9PT1lfHwiSEVBRCI9PT12LnR5cGU/bD0ibm9jb250ZW50IjozMDQ9PT1lP2w9Im5vdG1vZGlmaWVkIjoobD1zLnN0YXRlLG89cy5kYXRhLGk9IShhPXMuZXJyb3IpKSk6KGE9bCwhZSYmbHx8KGw9ImVycm9yIixlPDAmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fGwpKyIiLGk/eC5yZXNvbHZlV2l0aCh5LFtvLGwsVF0pOngucmVqZWN0V2l0aCh5LFtULGwsYV0pLFQuc3RhdHVzQ29kZSh3KSx3PXZvaWQgMCxnJiZtLnRyaWdnZXIoaT8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULHYsaT9vOmFdKSxiLmZpcmVXaXRoKHksW1QsbF0pLGcmJihtLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1Qsdl0pLC0tUy5hY3RpdmV8fFMuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUy5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFMuZ2V0KGUsdm9pZCAwLHQsInNjcmlwdCIpfX0pLFMuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLGkpe1NbaV09ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIG0odCkmJihyPXJ8fG4sbj10LHQ9dm9pZCAwKSxTLmFqYXgoUy5leHRlbmQoe3VybDplLHR5cGU6aSxkYXRhVHlwZTpyLGRhdGE6dCxzdWNjZXNzOm59LFMuaXNQbGFpbk9iamVjdChlKSYmZSkpfX0pLFMuYWpheFByZWZpbHRlcihmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlLmhlYWRlcnMpImNvbnRlbnQtdHlwZSI9PT10LnRvTG93ZXJDYXNlKCkmJihlLmNvbnRlbnRUeXBlPWUuaGVhZGVyc1t0XXx8IiIpfSksUy5fZXZhbFVybD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIFMuYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTohMCxhc3luYzohMSxnbG9iYWw6ITEsY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbigpe319LGRhdGFGaWx0ZXI6ZnVuY3Rpb24oZSl7Uy5nbG9iYWxFdmFsKGUsdCxuKX19KX0sUy5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXNbMF0mJihtKGUpJiYoZT1lLmNhbGwodGhpc1swXSkpLHQ9UyhlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24obil7cmV0dXJuIG0obik/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykud3JhcElubmVyKG4uY2FsbCh0aGlzLGUpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPVModGhpcyksdD1lLmNvbnRlbnRzKCk7dC5sZW5ndGg/dC53cmFwQWxsKG4pOmUuYXBwZW5kKG4pfSl9LHdyYXA6ZnVuY3Rpb24odCl7dmFyIG49bSh0KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykud3JhcEFsbChuP3QuY2FsbCh0aGlzLGUpOnQpfSl9LHVud3JhcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wYXJlbnQoZSkubm90KCJib2R5IikuZWFjaChmdW5jdGlvbigpe1ModGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLHRoaXN9fSksUy5leHByLnBzZXVkb3MuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiFTLmV4cHIucHNldWRvcy52aXNpYmxlKGUpfSxTLmV4cHIucHNldWRvcy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiEhKGUub2Zmc2V0V2lkdGh8fGUub2Zmc2V0SGVpZ2h0fHxlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKX0sUy5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgQy5YTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgX3Q9ezA6MjAwLDEyMjM6MjA0fSx6dD1TLmFqYXhTZXR0aW5ncy54aHIoKTt5LmNvcnM9ISF6dCYmIndpdGhDcmVkZW50aWFscyJpbiB6dCx5LmFqYXg9enQ9ISF6dCxTLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oaSl7dmFyIG8sYTtpZih5LmNvcnN8fHp0JiYhaS5jcm9zc0RvbWFpbilyZXR1cm57c2VuZDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS54aHIoKTtpZihyLm9wZW4oaS50eXBlLGkudXJsLGkuYXN5bmMsaS51c2VybmFtZSxpLnBhc3N3b3JkKSxpLnhockZpZWxkcylmb3IobiBpbiBpLnhockZpZWxkcylyW25dPWkueGhyRmllbGRzW25dO2ZvcihuIGluIGkubWltZVR5cGUmJnIub3ZlcnJpZGVNaW1lVHlwZSYmci5vdmVycmlkZU1pbWVUeXBlKGkubWltZVR5cGUpLGkuY3Jvc3NEb21haW58fGVbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGVbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKSxlKXIuc2V0UmVxdWVzdEhlYWRlcihuLGVbbl0pO289ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7byYmKG89YT1yLm9ubG9hZD1yLm9uZXJyb3I9ci5vbmFib3J0PXIub250aW1lb3V0PXIub25yZWFkeXN0YXRlY2hhbmdlPW51bGwsImFib3J0Ij09PWU/ci5hYm9ydCgpOiJlcnJvciI9PT1lPyJudW1iZXIiIT10eXBlb2Ygci5zdGF0dXM/dCgwLCJlcnJvciIpOnQoci5zdGF0dXMsci5zdGF0dXNUZXh0KTp0KF90W3Iuc3RhdHVzXXx8ci5zdGF0dXMsci5zdGF0dXNUZXh0LCJ0ZXh0IiE9PShyLnJlc3BvbnNlVHlwZXx8InRleHQiKXx8InN0cmluZyIhPXR5cGVvZiByLnJlc3BvbnNlVGV4dD97YmluYXJ5OnIucmVzcG9uc2V9Ont0ZXh0OnIucmVzcG9uc2VUZXh0fSxyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxyLm9ubG9hZD1vKCksYT1yLm9uZXJyb3I9ci5vbnRpbWVvdXQ9bygiZXJyb3IiKSx2b2lkIDAhPT1yLm9uYWJvcnQ/ci5vbmFib3J0PWE6ci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09ci5yZWFkeVN0YXRlJiZDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtvJiZhKCl9KX0sbz1vKCJhYm9ydCIpO3RyeXtyLnNlbmQoaS5oYXNDb250ZW50JiZpLmRhdGF8fG51bGwpfWNhdGNoKGUpe2lmKG8pdGhyb3cgZX19LGFib3J0OmZ1bmN0aW9uKCl7byYmbygpfX19KSxTLmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7ZS5jcm9zc0RvbWFpbiYmKGUuY29udGVudHMuc2NyaXB0PSExKX0pLFMuYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGUpe3JldHVybiBTLmdsb2JhbEV2YWwoZSksZX19fSksUy5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLFMuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihuKXt2YXIgcixpO2lmKG4uY3Jvc3NEb21haW58fG4uc2NyaXB0QXR0cnMpcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSx0KXtyPVMoIjxzY3JpcHQ+IikuYXR0cihuLnNjcmlwdEF0dHJzfHx7fSkucHJvcCh7Y2hhcnNldDpuLnNjcmlwdENoYXJzZXQsc3JjOm4udXJsfSkub24oImxvYWQgZXJyb3IiLGk9ZnVuY3Rpb24oZSl7ci5yZW1vdmUoKSxpPW51bGwsZSYmdCgiZXJyb3IiPT09ZS50eXBlPzQwNDoyMDAsZS50eXBlKX0pLEUuaGVhZC5hcHBlbmRDaGlsZChyWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtpJiZpKCl9fX0pO3ZhciBVdCxYdD1bXSxWdD0vKD0pXD8oPz0mfCQpfFw/XD8vO1MuYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1YdC5wb3AoKXx8Uy5leHBhbmRvKyJfIitDdC5ndWlkKys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSxTLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT0hMSE9PWUuanNvbnAmJihWdC50ZXN0KGUudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIGUuZGF0YSYmMD09PShlLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJlZ0LnRlc3QoZS5kYXRhKSYmImRhdGEiKTtpZihhfHwianNvbnAiPT09ZS5kYXRhVHlwZXNbMF0pcmV0dXJuIHI9ZS5qc29ucENhbGxiYWNrPW0oZS5qc29ucENhbGxiYWNrKT9lLmpzb25wQ2FsbGJhY2soKTplLmpzb25wQ2FsbGJhY2ssYT9lW2FdPWVbYV0ucmVwbGFjZShWdCwiJDEiK3IpOiExIT09ZS5qc29ucCYmKGUudXJsKz0oRXQudGVzdChlLnVybCk/IiYiOiI/IikrZS5qc29ucCsiPSIrciksZS5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIG98fFMuZXJyb3IocisiIHdhcyBub3QgY2FsbGVkIiksb1swXX0sZS5kYXRhVHlwZXNbMF09Impzb24iLGk9Q1tyXSxDW3JdPWZ1bmN0aW9uKCl7bz1hcmd1bWVudHN9LG4uYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09aT9TKEMpLnJlbW92ZVByb3Aocik6Q1tyXT1pLGVbcl0mJihlLmpzb25wQ2FsbGJhY2s9dC5qc29ucENhbGxiYWNrLFh0LnB1c2gocikpLG8mJm0oaSkmJmkob1swXSksbz1pPXZvaWQgMH0pLCJzY3JpcHQifSkseS5jcmVhdGVIVE1MRG9jdW1lbnQ9KChVdD1FLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keSkuaW5uZXJIVE1MPSI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPiIsMj09PVV0LmNoaWxkTm9kZXMubGVuZ3RoKSxTLnBhcnNlSFRNTD1mdW5jdGlvbihlLHQsbil7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlP1tdOigiYm9vbGVhbiI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHR8fCh5LmNyZWF0ZUhUTUxEb2N1bWVudD8oKHI9KHQ9RS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKS5jcmVhdGVFbGVtZW50KCJiYXNlIikpLmhyZWY9RS5sb2NhdGlvbi5ocmVmLHQuaGVhZC5hcHBlbmRDaGlsZChyKSk6dD1FKSxvPSFuJiZbXSwoaT1OLmV4ZWMoZSkpP1t0LmNyZWF0ZUVsZW1lbnQoaVsxXSldOihpPXhlKFtlXSx0LG8pLG8mJm8ubGVuZ3RoJiZTKG8pLnJlbW92ZSgpLFMubWVyZ2UoW10saS5jaGlsZE5vZGVzKSkpO3ZhciByLGksb30sUy5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT10aGlzLHM9ZS5pbmRleE9mKCIgIik7cmV0dXJuLTE8cyYmKHI9dnQoZS5zbGljZShzKSksZT1lLnNsaWNlKDAscykpLG0odCk/KG49dCx0PXZvaWQgMCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLDA8YS5sZW5ndGgmJlMuYWpheCh7dXJsOmUsdHlwZTppfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTp0fSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxhLmh0bWwocj9TKCI8ZGl2PiIpLmFwcGVuZChTLnBhcnNlSFRNTChlKSkuZmluZChyKTplKX0pLmFsd2F5cyhuJiZmdW5jdGlvbihlLHQpe2EuZWFjaChmdW5jdGlvbigpe24uYXBwbHkodGhpcyxvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KX0pLHRoaXN9LFMuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKHQpe3JldHVybiBTLmdyZXAoUy50aW1lcnMsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9PT1lLmVsZW19KS5sZW5ndGh9LFMub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsPVMuY3NzKGUsInBvc2l0aW9uIiksYz1TKGUpLGY9e307InN0YXRpYyI9PT1sJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxzPWMub2Zmc2V0KCksbz1TLmNzcyhlLCJ0b3AiKSx1PVMuY3NzKGUsImxlZnQiKSwoImFic29sdXRlIj09PWx8fCJmaXhlZCI9PT1sKSYmLTE8KG8rdSkuaW5kZXhPZigiYXV0byIpPyhhPShyPWMucG9zaXRpb24oKSkudG9wLGk9ci5sZWZ0KTooYT1wYXJzZUZsb2F0KG8pfHwwLGk9cGFyc2VGbG9hdCh1KXx8MCksbSh0KSYmKHQ9dC5jYWxsKGUsbixTLmV4dGVuZCh7fSxzKSkpLG51bGwhPXQudG9wJiYoZi50b3A9dC50b3Atcy50b3ArYSksbnVsbCE9dC5sZWZ0JiYoZi5sZWZ0PXQubGVmdC1zLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6KCJudW1iZXIiPT10eXBlb2YgZi50b3AmJihmLnRvcCs9InB4IiksIm51bWJlciI9PXR5cGVvZiBmLmxlZnQmJihmLmxlZnQrPSJweCIpLGMuY3NzKGYpKX19LFMuZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24odCl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09dD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihlKXtTLm9mZnNldC5zZXRPZmZzZXQodGhpcyx0LGUpfSk7dmFyIGUsbixyPXRoaXNbMF07cmV0dXJuIHI/ci5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ci5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LHt0b3A6ZS50b3Arbi5wYWdlWU9mZnNldCxsZWZ0OmUubGVmdCtuLnBhZ2VYT2Zmc2V0fSk6e3RvcDowLGxlZnQ6MH06dm9pZCAwfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBlLHQsbixyPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfTtpZigiZml4ZWQiPT09Uy5jc3MociwicG9zaXRpb24iKSl0PXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZXt0PXRoaXMub2Zmc2V0KCksbj1yLm93bmVyRG9jdW1lbnQsZT1yLm9mZnNldFBhcmVudHx8bi5kb2N1bWVudEVsZW1lbnQ7d2hpbGUoZSYmKGU9PT1uLmJvZHl8fGU9PT1uLmRvY3VtZW50RWxlbWVudCkmJiJzdGF0aWMiPT09Uy5jc3MoZSwicG9zaXRpb24iKSllPWUucGFyZW50Tm9kZTtlJiZlIT09ciYmMT09PWUubm9kZVR5cGUmJigoaT1TKGUpLm9mZnNldCgpKS50b3ArPVMuY3NzKGUsImJvcmRlclRvcFdpZHRoIiwhMCksaS5sZWZ0Kz1TLmNzcyhlLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSl9cmV0dXJue3RvcDp0LnRvcC1pLnRvcC1TLmNzcyhyLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1pLmxlZnQtUy5jc3MociwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50O3doaWxlKGUmJiJzdGF0aWMiPT09Uy5jc3MoZSwicG9zaXRpb24iKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxyZX0pfX0pLFMuZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbih0LGkpe3ZhciBvPSJwYWdlWU9mZnNldCI9PT1pO1MuZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoeChlKT9yPWU6OT09PWUubm9kZVR5cGUmJihyPWUuZGVmYXVsdFZpZXcpLHZvaWQgMD09PW4pcmV0dXJuIHI/cltpXTplW3RdO3I/ci5zY3JvbGxUbyhvP3IucGFnZVhPZmZzZXQ6bixvP246ci5wYWdlWU9mZnNldCk6ZVt0XT1ufSx0LGUsYXJndW1lbnRzLmxlbmd0aCl9fSksUy5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsbil7Uy5jc3NIb29rc1tuXT0kZSh5LnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSx0KXtpZih0KXJldHVybiB0PUJlKGUsbiksTWUudGVzdCh0KT9TKGUpLnBvc2l0aW9uKClbbl0rInB4Ijp0fSl9KSxTLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLHMpe1MuZWFjaCh7cGFkZGluZzoiaW5uZXIiK2EsY29udGVudDpzLCIiOiJvdXRlciIrYX0sZnVuY3Rpb24ocixvKXtTLmZuW29dPWZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aCYmKHJ8fCJib29sZWFuIiE9dHlwZW9mIGUpLGk9cnx8KCEwPT09ZXx8ITA9PT10PyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4geChlKT8wPT09by5pbmRleE9mKCJvdXRlciIpP2VbImlubmVyIithXTplLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IithXTo5PT09ZS5ub2RlVHlwZT8ocj1lLmRvY3VtZW50RWxlbWVudCxNYXRoLm1heChlLmJvZHlbInNjcm9sbCIrYV0sclsic2Nyb2xsIithXSxlLmJvZHlbIm9mZnNldCIrYV0sclsib2Zmc2V0IithXSxyWyJjbGllbnQiK2FdKSk6dm9pZCAwPT09bj9TLmNzcyhlLHQsaSk6Uy5zdHlsZShlLHQsbixpKX0scyxuP2U6dm9pZCAwLG4pfX0pfSksUy5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXtTLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9uKHQsZSl9fSksUy5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLm9uKGUsbnVsbCx0LG4pfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5vZmYoZSxudWxsLHQpfSxkZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbih0LGUsbixyKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGUsIioqIik6dGhpcy5vZmYodCxlfHwiKioiLG4pfSxob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX19KSxTLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCByZXNpemUgc2Nyb2xsIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSxuKXtTLmZuW25dPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDA8YXJndW1lbnRzLmxlbmd0aD90aGlzLm9uKG4sbnVsbCxlLHQpOnRoaXMudHJpZ2dlcihuKX19KTt2YXIgR3Q9L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO1MucHJveHk9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7aWYoInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLG0oZSkpcmV0dXJuIHI9cy5jYWxsKGFyZ3VtZW50cywyKSwoaT1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHR8fHRoaXMsci5jb25jYXQocy5jYWxsKGFyZ3VtZW50cykpKX0pLmd1aWQ9ZS5ndWlkPWUuZ3VpZHx8Uy5ndWlkKyssaX0sUy5ob2xkUmVhZHk9ZnVuY3Rpb24oZSl7ZT9TLnJlYWR5V2FpdCsrOlMucmVhZHkoITApfSxTLmlzQXJyYXk9QXJyYXkuaXNBcnJheSxTLnBhcnNlSlNPTj1KU09OLnBhcnNlLFMubm9kZU5hbWU9QSxTLmlzRnVuY3Rpb249bSxTLmlzV2luZG93PXgsUy5jYW1lbENhc2U9WCxTLnR5cGU9dyxTLm5vdz1EYXRlLm5vdyxTLmlzTnVtZXJpYz1mdW5jdGlvbihlKXt2YXIgdD1TLnR5cGUoZSk7cmV0dXJuKCJudW1iZXIiPT09dHx8InN0cmluZyI9PT10KSYmIWlzTmFOKGUtcGFyc2VGbG9hdChlKSl9LFMudHJpbT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjooZSsiIikucmVwbGFjZShHdCwiIil9LCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiBTfSk7dmFyIFl0PUMualF1ZXJ5LFF0PUMuJDtyZXR1cm4gUy5ub0NvbmZsaWN0PWZ1bmN0aW9uKGUpe3JldHVybiBDLiQ9PT1TJiYoQy4kPVF0KSxlJiZDLmpRdWVyeT09PVMmJihDLmpRdWVyeT1ZdCksU30sInVuZGVmaW5lZCI9PXR5cGVvZiBlJiYoQy5qUXVlcnk9Qy4kPVMpLFN9KTsK"},{"meta":{"name":"purify.min.js","url":"https://cdn.staticfile.org/dompurify/2.0.10/purify.min.js","ts":1599486166717,"mimetype":"text/javascript"},"source":"LyohIEBsaWNlbnNlIERPTVB1cmlmeSB8IChjKSBDdXJlNTMgYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyB8IFJlbGVhc2VkIHVuZGVyIHRoZSBBcGFjaGUgbGljZW5zZSAyLjAgYW5kIE1vemlsbGEgUHVibGljIExpY2Vuc2UgMi4wIHwgZ2l0aHViLmNvbS9jdXJlNTMvRE9NUHVyaWZ5L2Jsb2IvMi4wLjgvTElDRU5TRSAqLwohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTooZT1lfHxzZWxmKS5ET01QdXJpZnk9dCgpfSh0aGlzLChmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuaGFzT3duUHJvcGVydHksdD1PYmplY3Quc2V0UHJvdG90eXBlT2Ysbj1PYmplY3QuaXNGcm96ZW4scj1PYmplY3Qua2V5cyxvPU9iamVjdC5mcmVlemUsaT1PYmplY3Quc2VhbCxhPSJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmUmVmbGVjdCxsPWEuYXBwbHksYz1hLmNvbnN0cnVjdDtsfHwobD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGUuYXBwbHkodCxuKX0pLG98fChvPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksaXx8KGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSxjfHwoYz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZSxbbnVsbF0uY29uY2F0KGZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD0wLG49QXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKW5bdF09ZVt0XTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbShlKX0odCkpKSl9KTt2YXIgcz1TKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSx1PVMoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpLGQ9UyhBcnJheS5wcm90b3R5cGUuam9pbiksZj1TKEFycmF5LnByb3RvdHlwZS5wb3ApLHA9UyhBcnJheS5wcm90b3R5cGUucHVzaCksbT1TKEFycmF5LnByb3RvdHlwZS5zbGljZSkseT1TKFN0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2UpLGc9UyhTdHJpbmcucHJvdG90eXBlLm1hdGNoKSxoPVMoU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKSx2PVMoU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mKSxiPVMoU3RyaW5nLnByb3RvdHlwZS50cmltKSxUPVMoUmVnRXhwLnByb3RvdHlwZS50ZXN0KSxBPWsoUmVnRXhwKSx4PWsoVHlwZUVycm9yKTtmdW5jdGlvbiBTKGUpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KG4+MT9uLTE6MCksbz0xO288bjtvKyspcltvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gbChlLHQscil9fWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheSh0KSxyPTA7cjx0O3IrKyluW3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gYyhlLG4pfX1mdW5jdGlvbiBMKGUscil7dCYmdChlLG51bGwpO2Zvcih2YXIgbz1yLmxlbmd0aDtvLS07KXt2YXIgaT1yW29dO2lmKCJzdHJpbmciPT10eXBlb2YgaSl7dmFyIGE9eShpKTthIT09aSYmKG4ocil8fChyW29dPWEpLGk9YSl9ZVtpXT0hMH1yZXR1cm4gZX1mdW5jdGlvbiBFKHQpe3ZhciBuPXt9LHI9dm9pZCAwO2ZvcihyIGluIHQpbChlLHQsW3JdKSYmKG5bcl09dFtyXSk7cmV0dXJuIG59dmFyIE09byhbImEiLCJhYmJyIiwiYWNyb255bSIsImFkZHJlc3MiLCJhcmVhIiwiYXJ0aWNsZSIsImFzaWRlIiwiYXVkaW8iLCJiIiwiYmRpIiwiYmRvIiwiYmlnIiwiYmxpbmsiLCJibG9ja3F1b3RlIiwiYm9keSIsImJyIiwiYnV0dG9uIiwiY2FudmFzIiwiY2FwdGlvbiIsImNlbnRlciIsImNpdGUiLCJjb2RlIiwiY29sIiwiY29sZ3JvdXAiLCJjb250ZW50IiwiZGF0YSIsImRhdGFsaXN0IiwiZGQiLCJkZWNvcmF0b3IiLCJkZWwiLCJkZXRhaWxzIiwiZGZuIiwiZGlyIiwiZGl2IiwiZGwiLCJkdCIsImVsZW1lbnQiLCJlbSIsImZpZWxkc2V0IiwiZmlnY2FwdGlvbiIsImZpZ3VyZSIsImZvbnQiLCJmb290ZXIiLCJmb3JtIiwiaDEiLCJoMiIsImgzIiwiaDQiLCJoNSIsImg2IiwiaGVhZCIsImhlYWRlciIsImhncm91cCIsImhyIiwiaHRtbCIsImkiLCJpbWciLCJpbnB1dCIsImlucyIsImtiZCIsImxhYmVsIiwibGVnZW5kIiwibGkiLCJtYWluIiwibWFwIiwibWFyayIsIm1hcnF1ZWUiLCJtZW51IiwibWVudWl0ZW0iLCJtZXRlciIsIm5hdiIsIm5vYnIiLCJvbCIsIm9wdGdyb3VwIiwib3B0aW9uIiwib3V0cHV0IiwicCIsInBpY3R1cmUiLCJwcmUiLCJwcm9ncmVzcyIsInEiLCJycCIsInJ0IiwicnVieSIsInMiLCJzYW1wIiwic2VjdGlvbiIsInNlbGVjdCIsInNoYWRvdyIsInNtYWxsIiwic291cmNlIiwic3BhY2VyIiwic3BhbiIsInN0cmlrZSIsInN0cm9uZyIsInN0eWxlIiwic3ViIiwic3VtbWFyeSIsInN1cCIsInRhYmxlIiwidGJvZHkiLCJ0ZCIsInRlbXBsYXRlIiwidGV4dGFyZWEiLCJ0Zm9vdCIsInRoIiwidGhlYWQiLCJ0aW1lIiwidHIiLCJ0cmFjayIsInR0IiwidSIsInVsIiwidmFyIiwidmlkZW8iLCJ3YnIiXSksXz1vKFsic3ZnIiwiYSIsImFsdGdseXBoIiwiYWx0Z2x5cGhkZWYiLCJhbHRnbHlwaGl0ZW0iLCJhbmltYXRlY29sb3IiLCJhbmltYXRlbW90aW9uIiwiYW5pbWF0ZXRyYW5zZm9ybSIsImF1ZGlvIiwiY2FudmFzIiwiY2lyY2xlIiwiY2xpcHBhdGgiLCJkZWZzIiwiZGVzYyIsImVsbGlwc2UiLCJmaWx0ZXIiLCJmb250IiwiZyIsImdseXBoIiwiZ2x5cGhyZWYiLCJoa2VybiIsImltYWdlIiwibGluZSIsImxpbmVhcmdyYWRpZW50IiwibWFya2VyIiwibWFzayIsIm1ldGFkYXRhIiwibXBhdGgiLCJwYXRoIiwicGF0dGVybiIsInBvbHlnb24iLCJwb2x5bGluZSIsInJhZGlhbGdyYWRpZW50IiwicmVjdCIsInN0b3AiLCJzdHlsZSIsInN3aXRjaCIsInN5bWJvbCIsInRleHQiLCJ0ZXh0cGF0aCIsInRpdGxlIiwidHJlZiIsInRzcGFuIiwidmlkZW8iLCJ2aWV3Iiwidmtlcm4iXSksTj1vKFsiZmVCbGVuZCIsImZlQ29sb3JNYXRyaXgiLCJmZUNvbXBvbmVudFRyYW5zZmVyIiwiZmVDb21wb3NpdGUiLCJmZUNvbnZvbHZlTWF0cml4IiwiZmVEaWZmdXNlTGlnaHRpbmciLCJmZURpc3BsYWNlbWVudE1hcCIsImZlRGlzdGFudExpZ2h0IiwiZmVGbG9vZCIsImZlRnVuY0EiLCJmZUZ1bmNCIiwiZmVGdW5jRyIsImZlRnVuY1IiLCJmZUdhdXNzaWFuQmx1ciIsImZlTWVyZ2UiLCJmZU1lcmdlTm9kZSIsImZlTW9ycGhvbG9neSIsImZlT2Zmc2V0IiwiZmVQb2ludExpZ2h0IiwiZmVTcGVjdWxhckxpZ2h0aW5nIiwiZmVTcG90TGlnaHQiLCJmZVRpbGUiLCJmZVR1cmJ1bGVuY2UiXSksTz1vKFsibWF0aCIsIm1lbmNsb3NlIiwibWVycm9yIiwibWZlbmNlZCIsIm1mcmFjIiwibWdseXBoIiwibWkiLCJtbGFiZWxlZHRyIiwibW11bHRpc2NyaXB0cyIsIm1uIiwibW8iLCJtb3ZlciIsIm1wYWRkZWQiLCJtcGhhbnRvbSIsIm1yb290IiwibXJvdyIsIm1zIiwibXNwYWNlIiwibXNxcnQiLCJtc3R5bGUiLCJtc3ViIiwibXN1cCIsIm1zdWJzdXAiLCJtdGFibGUiLCJtdGQiLCJtdGV4dCIsIm10ciIsIm11bmRlciIsIm11bmRlcm92ZXIiXSksdz1vKFsiI3RleHQiXSksRD1vKFsiYWNjZXB0IiwiYWN0aW9uIiwiYWxpZ24iLCJhbHQiLCJhdXRvY2FwaXRhbGl6ZSIsImF1dG9jb21wbGV0ZSIsImF1dG9waWN0dXJlaW5waWN0dXJlIiwiYXV0b3BsYXkiLCJiYWNrZ3JvdW5kIiwiYmdjb2xvciIsImJvcmRlciIsImNhcHR1cmUiLCJjZWxscGFkZGluZyIsImNlbGxzcGFjaW5nIiwiY2hlY2tlZCIsImNpdGUiLCJjbGFzcyIsImNsZWFyIiwiY29sb3IiLCJjb2xzIiwiY29sc3BhbiIsImNvbnRyb2xzIiwiY29udHJvbHNsaXN0IiwiY29vcmRzIiwiY3Jvc3NvcmlnaW4iLCJkYXRldGltZSIsImRlY29kaW5nIiwiZGVmYXVsdCIsImRpciIsImRpc2FibGVkIiwiZGlzYWJsZXBpY3R1cmVpbnBpY3R1cmUiLCJkaXNhYmxlcmVtb3RlcGxheWJhY2siLCJkb3dubG9hZCIsImRyYWdnYWJsZSIsImVuY3R5cGUiLCJlbnRlcmtleWhpbnQiLCJmYWNlIiwiZm9yIiwiaGVhZGVycyIsImhlaWdodCIsImhpZGRlbiIsImhpZ2giLCJocmVmIiwiaHJlZmxhbmciLCJpZCIsImlucHV0bW9kZSIsImludGVncml0eSIsImlzbWFwIiwia2luZCIsImxhYmVsIiwibGFuZyIsImxpc3QiLCJsb2FkaW5nIiwibG9vcCIsImxvdyIsIm1heCIsIm1heGxlbmd0aCIsIm1lZGlhIiwibWV0aG9kIiwibWluIiwibWlubGVuZ3RoIiwibXVsdGlwbGUiLCJtdXRlZCIsIm5hbWUiLCJub3NoYWRlIiwibm92YWxpZGF0ZSIsIm5vd3JhcCIsIm9wZW4iLCJvcHRpbXVtIiwicGF0dGVybiIsInBsYWNlaG9sZGVyIiwicGxheXNpbmxpbmUiLCJwb3N0ZXIiLCJwcmVsb2FkIiwicHViZGF0ZSIsInJhZGlvZ3JvdXAiLCJyZWFkb25seSIsInJlbCIsInJlcXVpcmVkIiwicmV2IiwicmV2ZXJzZWQiLCJyb2xlIiwicm93cyIsInJvd3NwYW4iLCJzcGVsbGNoZWNrIiwic2NvcGUiLCJzZWxlY3RlZCIsInNoYXBlIiwic2l6ZSIsInNpemVzIiwic3BhbiIsInNyY2xhbmciLCJzdGFydCIsInNyYyIsInNyY3NldCIsInN0ZXAiLCJzdHlsZSIsInN1bW1hcnkiLCJ0YWJpbmRleCIsInRpdGxlIiwidHJhbnNsYXRlIiwidHlwZSIsInVzZW1hcCIsInZhbGlnbiIsInZhbHVlIiwid2lkdGgiLCJ4bWxucyJdKSxSPW8oWyJhY2NlbnQtaGVpZ2h0IiwiYWNjdW11bGF0ZSIsImFkZGl0aXZlIiwiYWxpZ25tZW50LWJhc2VsaW5lIiwiYXNjZW50IiwiYXR0cmlidXRlbmFtZSIsImF0dHJpYnV0ZXR5cGUiLCJhemltdXRoIiwiYmFzZWZyZXF1ZW5jeSIsImJhc2VsaW5lLXNoaWZ0IiwiYmVnaW4iLCJiaWFzIiwiYnkiLCJjbGFzcyIsImNsaXAiLCJjbGlwLXBhdGgiLCJjbGlwLXJ1bGUiLCJjb2xvciIsImNvbG9yLWludGVycG9sYXRpb24iLCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMiLCJjb2xvci1wcm9maWxlIiwiY29sb3ItcmVuZGVyaW5nIiwiY3giLCJjeSIsImQiLCJkeCIsImR5IiwiZGlmZnVzZWNvbnN0YW50IiwiZGlyZWN0aW9uIiwiZGlzcGxheSIsImRpdmlzb3IiLCJkdXIiLCJlZGdlbW9kZSIsImVsZXZhdGlvbiIsImVuZCIsImZpbGwiLCJmaWxsLW9wYWNpdHkiLCJmaWxsLXJ1bGUiLCJmaWx0ZXIiLCJmaWx0ZXJ1bml0cyIsImZsb29kLWNvbG9yIiwiZmxvb2Qtb3BhY2l0eSIsImZvbnQtZmFtaWx5IiwiZm9udC1zaXplIiwiZm9udC1zaXplLWFkanVzdCIsImZvbnQtc3RyZXRjaCIsImZvbnQtc3R5bGUiLCJmb250LXZhcmlhbnQiLCJmb250LXdlaWdodCIsImZ4IiwiZnkiLCJnMSIsImcyIiwiZ2x5cGgtbmFtZSIsImdseXBocmVmIiwiZ3JhZGllbnR1bml0cyIsImdyYWRpZW50dHJhbnNmb3JtIiwiaGVpZ2h0IiwiaHJlZiIsImlkIiwiaW1hZ2UtcmVuZGVyaW5nIiwiaW4iLCJpbjIiLCJrIiwiazEiLCJrMiIsImszIiwiazQiLCJrZXJuaW5nIiwia2V5cG9pbnRzIiwia2V5c3BsaW5lcyIsImtleXRpbWVzIiwibGFuZyIsImxlbmd0aGFkanVzdCIsImxldHRlci1zcGFjaW5nIiwia2VybmVsbWF0cml4Iiwia2VybmVsdW5pdGxlbmd0aCIsImxpZ2h0aW5nLWNvbG9yIiwibG9jYWwiLCJtYXJrZXItZW5kIiwibWFya2VyLW1pZCIsIm1hcmtlci1zdGFydCIsIm1hcmtlcmhlaWdodCIsIm1hcmtlcnVuaXRzIiwibWFya2Vyd2lkdGgiLCJtYXNrY29udGVudHVuaXRzIiwibWFza3VuaXRzIiwibWF4IiwibWFzayIsIm1lZGlhIiwibWV0aG9kIiwibW9kZSIsIm1pbiIsIm5hbWUiLCJudW1vY3RhdmVzIiwib2Zmc2V0Iiwib3BlcmF0b3IiLCJvcGFjaXR5Iiwib3JkZXIiLCJvcmllbnQiLCJvcmllbnRhdGlvbiIsIm9yaWdpbiIsIm92ZXJmbG93IiwicGFpbnQtb3JkZXIiLCJwYXRoIiwicGF0aGxlbmd0aCIsInBhdHRlcm5jb250ZW50dW5pdHMiLCJwYXR0ZXJudHJhbnNmb3JtIiwicGF0dGVybnVuaXRzIiwicG9pbnRzIiwicHJlc2VydmVhbHBoYSIsInByZXNlcnZlYXNwZWN0cmF0aW8iLCJwcmltaXRpdmV1bml0cyIsInIiLCJyeCIsInJ5IiwicmFkaXVzIiwicmVmeCIsInJlZnkiLCJyZXBlYXRjb3VudCIsInJlcGVhdGR1ciIsInJlc3RhcnQiLCJyZXN1bHQiLCJyb3RhdGUiLCJzY2FsZSIsInNlZWQiLCJzaGFwZS1yZW5kZXJpbmciLCJzcGVjdWxhcmNvbnN0YW50Iiwic3BlY3VsYXJleHBvbmVudCIsInNwcmVhZG1ldGhvZCIsInN0YXJ0b2Zmc2V0Iiwic3RkZGV2aWF0aW9uIiwic3RpdGNodGlsZXMiLCJzdG9wLWNvbG9yIiwic3RvcC1vcGFjaXR5Iiwic3Ryb2tlLWRhc2hhcnJheSIsInN0cm9rZS1kYXNob2Zmc2V0Iiwic3Ryb2tlLWxpbmVjYXAiLCJzdHJva2UtbGluZWpvaW4iLCJzdHJva2UtbWl0ZXJsaW1pdCIsInN0cm9rZS1vcGFjaXR5Iiwic3Ryb2tlIiwic3Ryb2tlLXdpZHRoIiwic3R5bGUiLCJzdXJmYWNlc2NhbGUiLCJ0YWJpbmRleCIsInRhcmdldHgiLCJ0YXJnZXR5IiwidHJhbnNmb3JtIiwidGV4dC1hbmNob3IiLCJ0ZXh0LWRlY29yYXRpb24iLCJ0ZXh0LXJlbmRlcmluZyIsInRleHRsZW5ndGgiLCJ0eXBlIiwidTEiLCJ1MiIsInVuaWNvZGUiLCJ2YWx1ZXMiLCJ2aWV3Ym94IiwidmlzaWJpbGl0eSIsInZlcnNpb24iLCJ2ZXJ0LWFkdi15IiwidmVydC1vcmlnaW4teCIsInZlcnQtb3JpZ2luLXkiLCJ3aWR0aCIsIndvcmQtc3BhY2luZyIsIndyYXAiLCJ3cml0aW5nLW1vZGUiLCJ4Y2hhbm5lbHNlbGVjdG9yIiwieWNoYW5uZWxzZWxlY3RvciIsIngiLCJ4MSIsIngyIiwieG1sbnMiLCJ5IiwieTEiLCJ5MiIsInoiLCJ6b29tYW5kcGFuIl0pLEg9byhbImFjY2VudCIsImFjY2VudHVuZGVyIiwiYWxpZ24iLCJiZXZlbGxlZCIsImNsb3NlIiwiY29sdW1uc2FsaWduIiwiY29sdW1ubGluZXMiLCJjb2x1bW5zcGFuIiwiZGVub21hbGlnbiIsImRlcHRoIiwiZGlyIiwiZGlzcGxheSIsImRpc3BsYXlzdHlsZSIsImVuY29kaW5nIiwiZmVuY2UiLCJmcmFtZSIsImhlaWdodCIsImhyZWYiLCJpZCIsImxhcmdlb3AiLCJsZW5ndGgiLCJsaW5ldGhpY2tuZXNzIiwibHNwYWNlIiwibHF1b3RlIiwibWF0aGJhY2tncm91bmQiLCJtYXRoY29sb3IiLCJtYXRoc2l6ZSIsIm1hdGh2YXJpYW50IiwibWF4c2l6ZSIsIm1pbnNpemUiLCJtb3ZhYmxlbGltaXRzIiwibm90YXRpb24iLCJudW1hbGlnbiIsIm9wZW4iLCJyb3dhbGlnbiIsInJvd2xpbmVzIiwicm93c3BhY2luZyIsInJvd3NwYW4iLCJyc3BhY2UiLCJycXVvdGUiLCJzY3JpcHRsZXZlbCIsInNjcmlwdG1pbnNpemUiLCJzY3JpcHRzaXplbXVsdGlwbGllciIsInNlbGVjdGlvbiIsInNlcGFyYXRvciIsInNlcGFyYXRvcnMiLCJzdHJldGNoeSIsInN1YnNjcmlwdHNoaWZ0Iiwic3Vwc2NyaXB0c2hpZnQiLCJzeW1tZXRyaWMiLCJ2b2Zmc2V0Iiwid2lkdGgiLCJ4bWxucyJdKSxDPW8oWyJ4bGluazpocmVmIiwieG1sOmlkIiwieGxpbms6dGl0bGUiLCJ4bWw6c3BhY2UiLCJ4bWxuczp4bGluayJdKSxGPWkoL1x7XHtbXHNcU10qfFtcc1xTXSpcfVx9L2dtKSx6PWkoLzwlW1xzXFNdKnxbXHNcU10qJT4vZ20pLEk9aSgvXmRhdGEtW1wtXHcuXHUwMEI3LVx1RkZGRl0vKSxqPWkoL15hcmlhLVtcLVx3XSskLyksVT1pKC9eKD86KD86KD86ZnxodCl0cHM/fG1haWx0b3x0ZWx8Y2FsbHRvfGNpZHx4bXBwKTp8W15hLXpdfFthLXorLlwtXSsoPzpbXmEteisuXC06XXwkKSkvaSksUD1pKC9eKD86XHcrc2NyaXB0fGRhdGEpOi9pKSxXPWkoL1tcdTAwMDAtXHUwMDIwXHUwMEEwXHUxNjgwXHUxODBFXHUyMDAwLVx1MjAyOVx1MjA1Zlx1MzAwMF0vZyksQj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgZX07ZnVuY3Rpb24gRyhlKXtpZihBcnJheS5pc0FycmF5KGUpKXtmb3IodmFyIHQ9MCxuPUFycmF5KGUubGVuZ3RoKTt0PGUubGVuZ3RoO3QrKyluW3RdPWVbdF07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20oZSl9dmFyIHE9ZnVuY3Rpb24oKXtyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz9udWxsOndpbmRvd30sSz1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiIT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6QihlKSl8fCJmdW5jdGlvbiIhPXR5cGVvZiBlLmNyZWF0ZVBvbGljeSlyZXR1cm4gbnVsbDt2YXIgbj1udWxsO3QuY3VycmVudFNjcmlwdCYmdC5jdXJyZW50U2NyaXB0Lmhhc0F0dHJpYnV0ZSgiZGF0YS10dC1wb2xpY3ktc3VmZml4IikmJihuPXQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoImRhdGEtdHQtcG9saWN5LXN1ZmZpeCIpKTt2YXIgcj0iZG9tcHVyaWZ5Iisobj8iIyIrbjoiIik7dHJ5e3JldHVybiBlLmNyZWF0ZVBvbGljeShyLHtjcmVhdGVIVE1MOmZ1bmN0aW9uKGUpe3JldHVybiBlfX0pfWNhdGNoKGUpe3JldHVybiBjb25zb2xlLndhcm4oIlRydXN0ZWRUeXBlcyBwb2xpY3kgIityKyIgY291bGQgbm90IGJlIGNyZWF0ZWQuIiksbnVsbH19O3JldHVybiBmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnEoKSxuPWZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfTtpZihuLnZlcnNpb249IjIuMC4xMCIsbi5yZW1vdmVkPVtdLCF0fHwhdC5kb2N1bWVudHx8OSE9PXQuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG4uaXNTdXBwb3J0ZWQ9ITEsbjt2YXIgaT10LmRvY3VtZW50LGE9ITEsbD10LmRvY3VtZW50LGM9dC5Eb2N1bWVudEZyYWdtZW50LFM9dC5IVE1MVGVtcGxhdGVFbGVtZW50LGs9dC5Ob2RlLFY9dC5Ob2RlRmlsdGVyLFk9dC5OYW1lZE5vZGVNYXAsWD12b2lkIDA9PT1ZP3QuTmFtZWROb2RlTWFwfHx0Lk1vek5hbWVkQXR0ck1hcDpZLCQ9dC5UZXh0LEo9dC5Db21tZW50LFE9dC5ET01QYXJzZXIsWj10LnRydXN0ZWRUeXBlcztpZigiZnVuY3Rpb24iPT10eXBlb2YgUyl7dmFyIGVlPWwuY3JlYXRlRWxlbWVudCgidGVtcGxhdGUiKTtlZS5jb250ZW50JiZlZS5jb250ZW50Lm93bmVyRG9jdW1lbnQmJihsPWVlLmNvbnRlbnQub3duZXJEb2N1bWVudCl9dmFyIHRlPUsoWixpKSxuZT10ZT90ZS5jcmVhdGVIVE1MKCIiKToiIixyZT1sLG9lPXJlLmltcGxlbWVudGF0aW9uLGllPXJlLmNyZWF0ZU5vZGVJdGVyYXRvcixhZT1yZS5nZXRFbGVtZW50c0J5VGFnTmFtZSxsZT1yZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50LGNlPWkuaW1wb3J0Tm9kZSxzZT17fTtuLmlzU3VwcG9ydGVkPW9lJiZ2b2lkIDAhPT1vZS5jcmVhdGVIVE1MRG9jdW1lbnQmJjkhPT1sLmRvY3VtZW50TW9kZTt2YXIgdWU9RixkZT16LGZlPUkscGU9aixtZT1QLHllPVcsZ2U9VSxoZT1udWxsLHZlPUwoe30sW10uY29uY2F0KEcoTSksRyhfKSxHKE4pLEcoTyksRyh3KSkpLGJlPW51bGwsVGU9TCh7fSxbXS5jb25jYXQoRyhEKSxHKFIpLEcoSCksRyhDKSkpLEFlPW51bGwseGU9bnVsbCxTZT0hMCxrZT0hMCxMZT0hMSxFZT0hMSxNZT0hMSxfZT0hMSxOZT0hMSxPZT0hMSx3ZT0hMSxEZT0hMSxSZT0hMSxIZT0hMSxDZT0hMCxGZT0hMCx6ZT0hMSxJZT17fSxqZT1MKHt9LFsiYW5ub3RhdGlvbi14bWwiLCJhdWRpbyIsImNvbGdyb3VwIiwiZGVzYyIsImZvcmVpZ25vYmplY3QiLCJoZWFkIiwiaWZyYW1lIiwibWF0aCIsIm1pIiwibW4iLCJtbyIsIm1zIiwibXRleHQiLCJub2VtYmVkIiwibm9mcmFtZXMiLCJwbGFpbnRleHQiLCJzY3JpcHQiLCJzdHlsZSIsInN2ZyIsInRlbXBsYXRlIiwidGhlYWQiLCJ0aXRsZSIsInZpZGVvIiwieG1wIl0pLFVlPUwoe30sWyJhdWRpbyIsInZpZGVvIiwiaW1nIiwic291cmNlIiwiaW1hZ2UiLCJ0cmFjayJdKSxQZT1udWxsLFdlPUwoe30sWyJhbHQiLCJjbGFzcyIsImZvciIsImlkIiwibGFiZWwiLCJuYW1lIiwicGF0dGVybiIsInBsYWNlaG9sZGVyIiwic3VtbWFyeSIsInRpdGxlIiwidmFsdWUiLCJzdHlsZSIsInhtbG5zIl0pLEJlPW51bGwsR2U9bC5jcmVhdGVFbGVtZW50KCJmb3JtIikscWU9ZnVuY3Rpb24oZSl7QmUmJkJlPT09ZXx8KGUmJiJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6QihlKSl8fChlPXt9KSxoZT0iQUxMT1dFRF9UQUdTImluIGU/TCh7fSxlLkFMTE9XRURfVEFHUyk6dmUsYmU9IkFMTE9XRURfQVRUUiJpbiBlP0woe30sZS5BTExPV0VEX0FUVFIpOlRlLFBlPSJBRERfVVJJX1NBRkVfQVRUUiJpbiBlP0woRShXZSksZS5BRERfVVJJX1NBRkVfQVRUUik6V2UsQWU9IkZPUkJJRF9UQUdTImluIGU/TCh7fSxlLkZPUkJJRF9UQUdTKTp7fSx4ZT0iRk9SQklEX0FUVFIiaW4gZT9MKHt9LGUuRk9SQklEX0FUVFIpOnt9LEllPSJVU0VfUFJPRklMRVMiaW4gZSYmZS5VU0VfUFJPRklMRVMsU2U9ITEhPT1lLkFMTE9XX0FSSUFfQVRUUixrZT0hMSE9PWUuQUxMT1dfREFUQV9BVFRSLExlPWUuQUxMT1dfVU5LTk9XTl9QUk9UT0NPTFN8fCExLEVlPWUuU0FGRV9GT1JfSlFVRVJZfHwhMSxNZT1lLlNBRkVfRk9SX1RFTVBMQVRFU3x8ITEsX2U9ZS5XSE9MRV9ET0NVTUVOVHx8ITEsd2U9ZS5SRVRVUk5fRE9NfHwhMSxEZT1lLlJFVFVSTl9ET01fRlJBR01FTlR8fCExLFJlPWUuUkVUVVJOX0RPTV9JTVBPUlR8fCExLEhlPWUuUkVUVVJOX1RSVVNURURfVFlQRXx8ITEsT2U9ZS5GT1JDRV9CT0RZfHwhMSxDZT0hMSE9PWUuU0FOSVRJWkVfRE9NLEZlPSExIT09ZS5LRUVQX0NPTlRFTlQsemU9ZS5JTl9QTEFDRXx8ITEsZ2U9ZS5BTExPV0VEX1VSSV9SRUdFWFB8fGdlLE1lJiYoa2U9ITEpLERlJiYod2U9ITApLEllJiYoaGU9TCh7fSxbXS5jb25jYXQoRyh3KSkpLGJlPVtdLCEwPT09SWUuaHRtbCYmKEwoaGUsTSksTChiZSxEKSksITA9PT1JZS5zdmcmJihMKGhlLF8pLEwoYmUsUiksTChiZSxDKSksITA9PT1JZS5zdmdGaWx0ZXJzJiYoTChoZSxOKSxMKGJlLFIpLEwoYmUsQykpLCEwPT09SWUubWF0aE1sJiYoTChoZSxPKSxMKGJlLEgpLEwoYmUsQykpKSxlLkFERF9UQUdTJiYoaGU9PT12ZSYmKGhlPUUoaGUpKSxMKGhlLGUuQUREX1RBR1MpKSxlLkFERF9BVFRSJiYoYmU9PT1UZSYmKGJlPUUoYmUpKSxMKGJlLGUuQUREX0FUVFIpKSxlLkFERF9VUklfU0FGRV9BVFRSJiZMKFBlLGUuQUREX1VSSV9TQUZFX0FUVFIpLEZlJiYoaGVbIiN0ZXh0Il09ITApLF9lJiZMKGhlLFsiaHRtbCIsImhlYWQiLCJib2R5Il0pLGhlLnRhYmxlJiYoTChoZSxbInRib2R5Il0pLGRlbGV0ZSBBZS50Ym9keSksbyYmbyhlKSxCZT1lKX0sS2U9ZnVuY3Rpb24oZSl7cChuLnJlbW92ZWQse2VsZW1lbnQ6ZX0pO3RyeXtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9Y2F0Y2godCl7ZS5vdXRlckhUTUw9bmV9fSxWZT1mdW5jdGlvbihlLHQpe3RyeXtwKG4ucmVtb3ZlZCx7YXR0cmlidXRlOnQuZ2V0QXR0cmlidXRlTm9kZShlKSxmcm9tOnR9KX1jYXRjaChlKXtwKG4ucmVtb3ZlZCx7YXR0cmlidXRlOm51bGwsZnJvbTp0fSl9dC5yZW1vdmVBdHRyaWJ1dGUoZSl9LFllPWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMCxuPXZvaWQgMDtpZihPZSllPSI8cmVtb3ZlPjwvcmVtb3ZlPiIrZTtlbHNle3ZhciByPWcoZSwvXltcc10rLyk7bj1yJiZyWzBdfXZhciBvPXRlP3RlLmNyZWF0ZUhUTUwoZSk6ZTt0cnl7dD0obmV3IFEpLnBhcnNlRnJvbVN0cmluZyhvLCJ0ZXh0L2h0bWwiKX1jYXRjaChlKXt9aWYoYSYmTChBZSxbInRpdGxlIl0pLCF0fHwhdC5kb2N1bWVudEVsZW1lbnQpe3ZhciBpPSh0PW9lLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikpLmJvZHk7aS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkucGFyZW50Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCksaS5vdXRlckhUTUw9b31yZXR1cm4gZSYmbiYmdC5ib2R5Lmluc2VydEJlZm9yZShsLmNyZWF0ZVRleHROb2RlKG4pLHQuYm9keS5jaGlsZE5vZGVzWzBdfHxudWxsKSxhZS5jYWxsKHQsX2U/Imh0bWwiOiJib2R5IilbMF19O24uaXNTdXBwb3J0ZWQmJmZ1bmN0aW9uKCl7dHJ5e3ZhciBlPVllKCI8eC8+PHRpdGxlPiZsdDsvdGl0bGUmZ3Q7Jmx0O2ltZyZndDsiKTtUKC88XC90aXRsZS8sZS5xdWVyeVNlbGVjdG9yKCJ0aXRsZSIpLmlubmVySFRNTCkmJihhPSEwKX1jYXRjaChlKXt9fSgpO3ZhciBYZT1mdW5jdGlvbihlKXtyZXR1cm4gaWUuY2FsbChlLm93bmVyRG9jdW1lbnR8fGUsZSxWLlNIT1dfRUxFTUVOVHxWLlNIT1dfQ09NTUVOVHxWLlNIT1dfVEVYVCwoZnVuY3Rpb24oKXtyZXR1cm4gVi5GSUxURVJfQUNDRVBUfSksITEpfSwkZT1mdW5jdGlvbihlKXtyZXR1cm4hKGUgaW5zdGFuY2VvZiAkfHxlIGluc3RhbmNlb2YgSikmJiEoInN0cmluZyI9PXR5cGVvZiBlLm5vZGVOYW1lJiYic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnJlbW92ZUNoaWxkJiZlLmF0dHJpYnV0ZXMgaW5zdGFuY2VvZiBYJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5yZW1vdmVBdHRyaWJ1dGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnNldEF0dHJpYnV0ZSYmInN0cmluZyI9PXR5cGVvZiBlLm5hbWVzcGFjZVVSSSl9LEplPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT09KHZvaWQgMD09PWs/InVuZGVmaW5lZCI6QihrKSk/ZSBpbnN0YW5jZW9mIGs6ZSYmIm9iamVjdCI9PT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjpCKGUpKSYmIm51bWJlciI9PXR5cGVvZiBlLm5vZGVUeXBlJiYic3RyaW5nIj09dHlwZW9mIGUubm9kZU5hbWV9LFFlPWZ1bmN0aW9uKGUsdCxyKXtzZVtlXSYmcyhzZVtlXSwoZnVuY3Rpb24oZSl7ZS5jYWxsKG4sdCxyLEJlKX0pKX0sWmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwO2lmKFFlKCJiZWZvcmVTYW5pdGl6ZUVsZW1lbnRzIixlLG51bGwpLCRlKGUpKXJldHVybiBLZShlKSwhMDt2YXIgcj15KGUubm9kZU5hbWUpO2lmKFFlKCJ1cG9uU2FuaXRpemVFbGVtZW50IixlLHt0YWdOYW1lOnIsYWxsb3dlZFRhZ3M6aGV9KSwoInN2ZyI9PT1yfHwibWF0aCI9PT1yKSYmMCE9PWUucXVlcnlTZWxlY3RvckFsbCgicCwgYnIiKS5sZW5ndGgpcmV0dXJuIEtlKGUpLCEwO2lmKCFoZVtyXXx8QWVbcl0pe2lmKEZlJiYhamVbcl0mJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmluc2VydEFkamFjZW50SFRNTCl0cnl7dmFyIG89ZS5pbm5lckhUTUw7ZS5pbnNlcnRBZGphY2VudEhUTUwoIkFmdGVyRW5kIix0ZT90ZS5jcmVhdGVIVE1MKG8pOm8pfWNhdGNoKGUpe31yZXR1cm4gS2UoZSksITB9cmV0dXJuIm5vc2NyaXB0Ij09PXImJlQoLzxcL25vc2NyaXB0L2ksZS5pbm5lckhUTUwpfHwibm9lbWJlZCI9PT1yJiZUKC88XC9ub2VtYmVkL2ksZS5pbm5lckhUTUwpPyhLZShlKSwhMCk6KCFFZXx8ZS5maXJzdEVsZW1lbnRDaGlsZHx8ZS5jb250ZW50JiZlLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGR8fCFUKC88L2csZS50ZXh0Q29udGVudCl8fChwKG4ucmVtb3ZlZCx7ZWxlbWVudDplLmNsb25lTm9kZSgpfSksZS5pbm5lckhUTUw/ZS5pbm5lckhUTUw9aChlLmlubmVySFRNTCwvPC9nLCImbHQ7Iik6ZS5pbm5lckhUTUw9aChlLnRleHRDb250ZW50LC88L2csIiZsdDsiKSksTWUmJjM9PT1lLm5vZGVUeXBlJiYodD1lLnRleHRDb250ZW50LHQ9aCh0LHVlLCIgIiksdD1oKHQsZGUsIiAiKSxlLnRleHRDb250ZW50IT09dCYmKHAobi5yZW1vdmVkLHtlbGVtZW50OmUuY2xvbmVOb2RlKCl9KSxlLnRleHRDb250ZW50PXQpKSxRZSgiYWZ0ZXJTYW5pdGl6ZUVsZW1lbnRzIixlLG51bGwpLCExKX0sZXQ9ZnVuY3Rpb24oZSx0LG4pe2lmKENlJiYoImlkIj09PXR8fCJuYW1lIj09PXQpJiYobiBpbiBsfHxuIGluIEdlKSlyZXR1cm4hMTtpZihrZSYmVChmZSx0KSk7ZWxzZSBpZihTZSYmVChwZSx0KSk7ZWxzZXtpZighYmVbdF18fHhlW3RdKXJldHVybiExO2lmKFBlW3RdKTtlbHNlIGlmKFQoZ2UsaChuLHllLCIiKSkpO2Vsc2UgaWYoInNyYyIhPT10JiYieGxpbms6aHJlZiIhPT10JiYiaHJlZiIhPT10fHwic2NyaXB0Ij09PWV8fDAhPT12KG4sImRhdGE6Iil8fCFVZVtlXSl7aWYoTGUmJiFUKG1lLGgobix5ZSwiIikpKTtlbHNlIGlmKG4pcmV0dXJuITF9ZWxzZTt9cmV0dXJuITB9LHR0PWZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMCxvPXZvaWQgMCxpPXZvaWQgMCxhPXZvaWQgMCxsPXZvaWQgMDtRZSgiYmVmb3JlU2FuaXRpemVBdHRyaWJ1dGVzIixlLG51bGwpO3ZhciBjPWUuYXR0cmlidXRlcztpZihjKXt2YXIgcz17YXR0ck5hbWU6IiIsYXR0clZhbHVlOiIiLGtlZXBBdHRyOiEwLGFsbG93ZWRBdHRyaWJ1dGVzOmJlfTtmb3IobD1jLmxlbmd0aDtsLS07KXt2YXIgcD10PWNbbF0sZz1wLm5hbWUsdj1wLm5hbWVzcGFjZVVSSTtpZihvPWIodC52YWx1ZSksaT15KGcpLHMuYXR0ck5hbWU9aSxzLmF0dHJWYWx1ZT1vLHMua2VlcEF0dHI9ITAscy5mb3JjZUtlZXBBdHRyPXZvaWQgMCxRZSgidXBvblNhbml0aXplQXR0cmlidXRlIixlLHMpLG89cy5hdHRyVmFsdWUsIXMuZm9yY2VLZWVwQXR0cil7aWYoIm5hbWUiPT09aSYmIklNRyI9PT1lLm5vZGVOYW1lJiZjLmlkKWE9Yy5pZCxjPW0oYyxbXSksVmUoImlkIixlKSxWZShnLGUpLHUoYyxhKT5sJiZlLnNldEF0dHJpYnV0ZSgiaWQiLGEudmFsdWUpO2Vsc2V7aWYoIklOUFVUIj09PWUubm9kZU5hbWUmJiJ0eXBlIj09PWkmJiJmaWxlIj09PW8mJnMua2VlcEF0dHImJihiZVtpXXx8IXhlW2ldKSljb250aW51ZTsiaWQiPT09ZyYmZS5zZXRBdHRyaWJ1dGUoZywiIiksVmUoZyxlKX1pZihzLmtlZXBBdHRyKWlmKEVlJiZUKC9cLz4vaSxvKSlWZShnLGUpO2Vsc2UgaWYoVCgvc3ZnfG1hdGgvaSxlLm5hbWVzcGFjZVVSSSkmJlQoQSgiPC8oIitkKHIoamUpLCJ8IikrIikiLCJpIiksbykpVmUoZyxlKTtlbHNle01lJiYobz1oKG8sdWUsIiAiKSxvPWgobyxkZSwiICIpKTt2YXIgeD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYoZXQoeCxpLG8pKXRyeXt2P2Uuc2V0QXR0cmlidXRlTlModixnLG8pOmUuc2V0QXR0cmlidXRlKGcsbyksZihuLnJlbW92ZWQpfWNhdGNoKGUpe319fX1RZSgiYWZ0ZXJTYW5pdGl6ZUF0dHJpYnV0ZXMiLGUsbnVsbCl9fSxudD1mdW5jdGlvbiBlKHQpe3ZhciBuPXZvaWQgMCxyPVhlKHQpO2ZvcihRZSgiYmVmb3JlU2FuaXRpemVTaGFkb3dET00iLHQsbnVsbCk7bj1yLm5leHROb2RlKCk7KVFlKCJ1cG9uU2FuaXRpemVTaGFkb3dOb2RlIixuLG51bGwpLFplKG4pfHwobi5jb250ZW50IGluc3RhbmNlb2YgYyYmZShuLmNvbnRlbnQpLHR0KG4pKTtRZSgiYWZ0ZXJTYW5pdGl6ZVNoYWRvd0RPTSIsdCxudWxsKX07cmV0dXJuIG4uc2FuaXRpemU9ZnVuY3Rpb24oZSxyKXt2YXIgbz12b2lkIDAsYT12b2lkIDAsbD12b2lkIDAscz12b2lkIDAsdT12b2lkIDA7aWYoZXx8KGU9Ilx4M2MhLS1ceDNlIiksInN0cmluZyIhPXR5cGVvZiBlJiYhSmUoZSkpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlLnRvU3RyaW5nKXRocm93IHgoInRvU3RyaW5nIGlzIG5vdCBhIGZ1bmN0aW9uIik7aWYoInN0cmluZyIhPXR5cGVvZihlPWUudG9TdHJpbmcoKSkpdGhyb3cgeCgiZGlydHkgaXMgbm90IGEgc3RyaW5nLCBhYm9ydGluZyIpfWlmKCFuLmlzU3VwcG9ydGVkKXtpZigib2JqZWN0Ij09PUIodC50b1N0YXRpY0hUTUwpfHwiZnVuY3Rpb24iPT10eXBlb2YgdC50b1N0YXRpY0hUTUwpe2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4gdC50b1N0YXRpY0hUTUwoZSk7aWYoSmUoZSkpcmV0dXJuIHQudG9TdGF0aWNIVE1MKGUub3V0ZXJIVE1MKX1yZXR1cm4gZX1pZihOZXx8cWUociksbi5yZW1vdmVkPVtdLCJzdHJpbmciPT10eXBlb2YgZSYmKHplPSExKSx6ZSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgaykxPT09KGE9KG89WWUoIlx4M2MhLS1ceDNlIikpLm93bmVyRG9jdW1lbnQuaW1wb3J0Tm9kZShlLCEwKSkubm9kZVR5cGUmJiJCT0RZIj09PWEubm9kZU5hbWV8fCJIVE1MIj09PWEubm9kZU5hbWU/bz1hOm8uYXBwZW5kQ2hpbGQoYSk7ZWxzZXtpZighd2UmJiFNZSYmIV9lJiZIZSYmLTE9PT1lLmluZGV4T2YoIjwiKSlyZXR1cm4gdGU/dGUuY3JlYXRlSFRNTChlKTplO2lmKCEobz1ZZShlKSkpcmV0dXJuIHdlP251bGw6bmV9byYmT2UmJktlKG8uZmlyc3RDaGlsZCk7Zm9yKHZhciBkPVhlKHplP2U6byk7bD1kLm5leHROb2RlKCk7KTM9PT1sLm5vZGVUeXBlJiZsPT09c3x8WmUobCl8fChsLmNvbnRlbnQgaW5zdGFuY2VvZiBjJiZudChsLmNvbnRlbnQpLHR0KGwpLHM9bCk7aWYocz1udWxsLHplKXJldHVybiBlO2lmKHdlKXtpZihEZSlmb3IodT1sZS5jYWxsKG8ub3duZXJEb2N1bWVudCk7by5maXJzdENoaWxkOyl1LmFwcGVuZENoaWxkKG8uZmlyc3RDaGlsZCk7ZWxzZSB1PW87cmV0dXJuIFJlJiYodT1jZS5jYWxsKGksdSwhMCkpLHV9dmFyIGY9X2U/by5vdXRlckhUTUw6by5pbm5lckhUTUw7cmV0dXJuIE1lJiYoZj1oKGYsdWUsIiAiKSxmPWgoZixkZSwiICIpKSx0ZSYmSGU/dGUuY3JlYXRlSFRNTChmKTpmfSxuLnNldENvbmZpZz1mdW5jdGlvbihlKXtxZShlKSxOZT0hMH0sbi5jbGVhckNvbmZpZz1mdW5jdGlvbigpe0JlPW51bGwsTmU9ITF9LG4uaXNWYWxpZEF0dHJpYnV0ZT1mdW5jdGlvbihlLHQsbil7QmV8fHFlKHt9KTt2YXIgcj15KGUpLG89eSh0KTtyZXR1cm4gZXQocixvLG4pfSxuLmFkZEhvb2s9ZnVuY3Rpb24oZSx0KXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHNlW2VdPXNlW2VdfHxbXSxwKHNlW2VdLHQpKX0sbi5yZW1vdmVIb29rPWZ1bmN0aW9uKGUpe3NlW2VdJiZmKHNlW2VdKX0sbi5yZW1vdmVIb29rcz1mdW5jdGlvbihlKXtzZVtlXSYmKHNlW2VdPVtdKX0sbi5yZW1vdmVBbGxIb29rcz1mdW5jdGlvbigpe3NlPXt9fSxufSgpfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1wdXJpZnkubWluLmpzLm1hcAo="},{"meta":{"name":"snap.svg-min.js","url":"https://cdn.staticfile.org/snap.svg/0.5.1/snap.svg-min.js","ts":1599486166741,"mimetype":"text/javascript"},"source":"Ly8gU25hcC5zdmcgMC41LjAKLy8KLy8gQ29weXJpZ2h0IChjKSAyMDEzIOKAkyAyMDE3IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkLiBBbGwgcmlnaHRzIHJlc2VydmVkLgovLwovLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKLy8geW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgovLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKLy8KLy8gaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCi8vCi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCi8vCi8vIGJ1aWxkOiAyMDE3LTAyLTA2CgohZnVuY3Rpb24oYSl7dmFyIGIsYyxkPSIwLjUuMCIsZT0iaGFzT3duUHJvcGVydHkiLGY9L1tcLlwvXS8sZz0vXHMqLFxzKi8saD0iKiIsaT1mdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LGo9e246e319LGs9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMubGVuZ3RoO2I+YTthKyspaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzW2FdKXJldHVybiB0aGlzW2FdfSxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubGVuZ3RoOy0tYTspaWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0aGlzW2FdKXJldHVybiB0aGlzW2FdfSxtPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbj1TdHJpbmcsbz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fHwiW29iamVjdCBBcnJheV0iPT1tLmNhbGwoYSl9O2V2ZT1mdW5jdGlvbihhLGQpe3ZhciBlLGY9YyxnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxoPWV2ZS5saXN0ZW5lcnMoYSksaj0wLG09W10sbj17fSxvPVtdLHA9YjtvLmZpcnN0RGVmaW5lZD1rLG8ubGFzdERlZmluZWQ9bCxiPWEsYz0wO2Zvcih2YXIgcT0wLHI9aC5sZW5ndGg7cj5xO3ErKykiekluZGV4ImluIGhbcV0mJihtLnB1c2goaFtxXS56SW5kZXgpLGhbcV0uekluZGV4PDAmJihuW2hbcV0uekluZGV4XT1oW3FdKSk7Zm9yKG0uc29ydChpKTttW2pdPDA7KWlmKGU9blttW2orK11dLG8ucHVzaChlLmFwcGx5KGQsZykpLGMpcmV0dXJuIGM9ZixvO2ZvcihxPTA7cj5xO3ErKylpZihlPWhbcV0sInpJbmRleCJpbiBlKWlmKGUuekluZGV4PT1tW2pdKXtpZihvLnB1c2goZS5hcHBseShkLGcpKSxjKWJyZWFrO2RvIGlmKGorKyxlPW5bbVtqXV0sZSYmby5wdXNoKGUuYXBwbHkoZCxnKSksYylicmVhazt3aGlsZShlKX1lbHNlIG5bZS56SW5kZXhdPWU7ZWxzZSBpZihvLnB1c2goZS5hcHBseShkLGcpKSxjKWJyZWFrO3JldHVybiBjPWYsYj1wLG99LGV2ZS5fZXZlbnRzPWosZXZlLmxpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxnLGksayxsLG09byhhKT9hOmEuc3BsaXQoZiksbj1qLHA9W25dLHE9W107Zm9yKGU9MCxnPW0ubGVuZ3RoO2c+ZTtlKyspe2ZvcihsPVtdLGk9MCxrPXAubGVuZ3RoO2s+aTtpKyspZm9yKG49cFtpXS5uLGM9W25bbVtlXV0sbltoXV0sZD0yO2QtLTspYj1jW2RdLGImJihsLnB1c2goYikscT1xLmNvbmNhdChiLmZ8fFtdKSk7cD1sfXJldHVybiBxfSxldmUuc2VwYXJhdG9yPWZ1bmN0aW9uKGEpe2E/KGE9bihhKS5yZXBsYWNlKC8oPz1bXC5cXlxdXFtcLV0pL2csIlxcIiksYT0iWyIrYSsiXSIsZj1uZXcgUmVnRXhwKGEpKTpmPS9bXC5cL10vfSxldmUub249ZnVuY3Rpb24oYSxiKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgYilyZXR1cm4gZnVuY3Rpb24oKXt9O2Zvcih2YXIgYz1vKGEpP28oYVswXSk/YTpbYV06bihhKS5zcGxpdChnKSxkPTAsZT1jLmxlbmd0aDtlPmQ7ZCsrKSFmdW5jdGlvbihhKXtmb3IodmFyIGMsZD1vKGEpP2E6bihhKS5zcGxpdChmKSxlPWosZz0wLGg9ZC5sZW5ndGg7aD5nO2crKyllPWUubixlPWUuaGFzT3duUHJvcGVydHkoZFtnXSkmJmVbZFtnXV18fChlW2RbZ11dPXtuOnt9fSk7Zm9yKGUuZj1lLmZ8fFtdLGc9MCxoPWUuZi5sZW5ndGg7aD5nO2crKylpZihlLmZbZ109PWIpe2M9ITA7YnJlYWt9IWMmJmUuZi5wdXNoKGIpfShjW2RdKTtyZXR1cm4gZnVuY3Rpb24oYSl7K2E9PSthJiYoYi56SW5kZXg9K2EpfX0sZXZlLmY9ZnVuY3Rpb24oYSl7dmFyIGI9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZXZlLmFwcGx5KG51bGwsW2EsbnVsbF0uY29uY2F0KGIpLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfX0sZXZlLnN0b3A9ZnVuY3Rpb24oKXtjPTF9LGV2ZS5udD1mdW5jdGlvbihhKXt2YXIgYz1vKGIpP2Iuam9pbigiLiIpOmI7cmV0dXJuIGE/bmV3IFJlZ0V4cCgiKD86XFwufFxcL3xeKSIrYSsiKD86XFwufFxcL3wkKSIpLnRlc3QoYyk6Y30sZXZlLm50cz1mdW5jdGlvbigpe3JldHVybiBvKGIpP2I6Yi5zcGxpdChmKX0sZXZlLm9mZj1ldmUudW5iaW5kPWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIHZvaWQoZXZlLl9ldmVudHM9aj17bjp7fX0pO3ZhciBjPW8oYSk/byhhWzBdKT9hOlthXTpuKGEpLnNwbGl0KGcpO2lmKGMubGVuZ3RoPjEpZm9yKHZhciBkPTAsaT1jLmxlbmd0aDtpPmQ7ZCsrKWV2ZS5vZmYoY1tkXSxiKTtlbHNle2M9byhhKT9hOm4oYSkuc3BsaXQoZik7dmFyIGssbCxtLGQsaSxwLHEscj1bal0scz1bXTtmb3IoZD0wLGk9Yy5sZW5ndGg7aT5kO2QrKylmb3IocD0wO3A8ci5sZW5ndGg7cCs9bS5sZW5ndGgtMil7aWYobT1bcCwxXSxrPXJbcF0ubixjW2RdIT1oKWtbY1tkXV0mJihtLnB1c2goa1tjW2RdXSkscy51bnNoaWZ0KHtuOmssbmFtZTpjW2RdfSkpO2Vsc2UgZm9yKGwgaW4gaylrW2VdKGwpJiYobS5wdXNoKGtbbF0pLHMudW5zaGlmdCh7bjprLG5hbWU6bH0pKTtyLnNwbGljZS5hcHBseShyLG0pfWZvcihkPTAsaT1yLmxlbmd0aDtpPmQ7ZCsrKWZvcihrPXJbZF07ay5uOyl7aWYoYil7aWYoay5mKXtmb3IocD0wLHE9ay5mLmxlbmd0aDtxPnA7cCsrKWlmKGsuZltwXT09Yil7ay5mLnNwbGljZShwLDEpO2JyZWFrfSFrLmYubGVuZ3RoJiZkZWxldGUgay5mfWZvcihsIGluIGsubilpZihrLm5bZV0obCkmJmsubltsXS5mKXt2YXIgdD1rLm5bbF0uZjtmb3IocD0wLHE9dC5sZW5ndGg7cT5wO3ArKylpZih0W3BdPT1iKXt0LnNwbGljZShwLDEpO2JyZWFrfSF0Lmxlbmd0aCYmZGVsZXRlIGsubltsXS5mfX1lbHNle2RlbGV0ZSBrLmY7Zm9yKGwgaW4gay5uKWsubltlXShsKSYmay5uW2xdLmYmJmRlbGV0ZSBrLm5bbF0uZn1rPWsubn1hOmZvcihkPTAsaT1zLmxlbmd0aDtpPmQ7ZCsrKXtrPXNbZF07Zm9yKGwgaW4gay5uW2submFtZV0uZiljb250aW51ZSBhO2ZvcihsIGluIGsubltrLm5hbWVdLm4pY29udGludWUgYTtkZWxldGUgay5uW2submFtZV19fX0sZXZlLm9uY2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3JldHVybiBldmUub2ZmKGEsYyksYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBldmUub24oYSxjKX0sZXZlLnZlcnNpb249ZCxldmUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iWW91IGFyZSBydW5uaW5nIEV2ZSAiK2R9LCJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1ldmU6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoImV2ZSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gZXZlfSk6YS5ldmU9ZXZlfSh0aGlzKSxmdW5jdGlvbihhLGIpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFsiZXZlIl0sZnVuY3Rpb24oYyl7cmV0dXJuIGIoYSxjKX0pO2Vsc2UgaWYoInVuZGVmaW5lZCIhPXR5cGVvZiBleHBvcnRzKXt2YXIgYz1yZXF1aXJlKCJldmUiKTttb2R1bGUuZXhwb3J0cz1iKGEsYyl9ZWxzZSBiKGEsYS5ldmUpfSh3aW5kb3d8fHRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihiKXt2YXIgYyxkPXt9LGU9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGEud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxhLm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8YS5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxhLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtyZXR1cm4gc2V0VGltZW91dChhLDE2LChuZXcgRGF0ZSkuZ2V0VGltZSgpKSwhMH0sZj1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5fHwiW29iamVjdCBBcnJheV0iPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9LGc9MCxoPSJNIisoK25ldyBEYXRlKS50b1N0cmluZygzNiksaT1mdW5jdGlvbigpe3JldHVybiBoKyhnKyspLnRvU3RyaW5nKDM2KX0saj1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4rbmV3IERhdGV9LGs9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihudWxsPT1hKXJldHVybiBiLnM7dmFyIGM9Yi5zLWE7Yi5iKz1iLmR1cipjLGIuQis9Yi5kdXIqYyxiLnM9YX0sbD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBudWxsPT1hP2Iuc3BkOnZvaWQoYi5zcGQ9YSl9LG09ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gbnVsbD09YT9iLmR1cjooYi5zPWIucyphL2IuZHVyLHZvaWQoYi5kdXI9YSkpfSxuPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztkZWxldGUgZFthLmlkXSxhLnVwZGF0ZSgpLGIoIm1pbmEuc3RvcC4iK2EuaWQsYSl9LG89ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EucGRpZnx8KGRlbGV0ZSBkW2EuaWRdLGEudXBkYXRlKCksYS5wZGlmPWEuZ2V0KCktYS5iKX0scD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5wZGlmJiYoYS5iPWEuZ2V0KCktYS5wZGlmLGRlbGV0ZSBhLnBkaWYsZFthLmlkXT1hLHIoKSl9LHE9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXM7aWYoZihiLnN0YXJ0KSl7YT1bXTtmb3IodmFyIGM9MCxkPWIuc3RhcnQubGVuZ3RoO2Q+YztjKyspYVtjXT0rYi5zdGFydFtjXSsoYi5lbmRbY10tYi5zdGFydFtjXSkqYi5lYXNpbmcoYi5zKX1lbHNlIGE9K2Iuc3RhcnQrKGIuZW5kLWIuc3RhcnQpKmIuZWFzaW5nKGIucyk7Yi5zZXQoYSl9LHI9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIHZvaWQoY3x8KGM9ZShyKSkpO3ZhciBmPTA7Zm9yKHZhciBnIGluIGQpaWYoZC5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIGg9ZFtnXSxpPWguZ2V0KCk7ZisrLGgucz0oaS1oLmIpLyhoLmR1ci9oLnNwZCksaC5zPj0xJiYoZGVsZXRlIGRbZ10saC5zPTEsZi0tLGZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiKCJtaW5hLmZpbmlzaC4iK2EuaWQsYSl9KX0oaCkpLGgudXBkYXRlKCl9Yz1mP2Uocik6ITF9LHM9ZnVuY3Rpb24oYSxiLGMsZSxmLGcsaCl7dmFyIGo9e2lkOmkoKSxzdGFydDphLGVuZDpiLGI6YyxzOjAsZHVyOmUtYyxzcGQ6MSxnZXQ6ZixzZXQ6ZyxlYXNpbmc6aHx8cy5saW5lYXIsc3RhdHVzOmssc3BlZWQ6bCxkdXJhdGlvbjptLHN0b3A6bixwYXVzZTpvLHJlc3VtZTpwLHVwZGF0ZTpxfTtkW2ouaWRdPWo7dmFyIHQsdT0wO2Zvcih0IGluIGQpaWYoZC5oYXNPd25Qcm9wZXJ0eSh0KSYmKHUrKywyPT11KSlicmVhaztyZXR1cm4gMT09dSYmcigpLGp9O3JldHVybiBzLnRpbWU9aixzLmdldEJ5SWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGRbYV18fG51bGx9LHMubGluZWFyPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxzLmVhc2VvdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsMS43KX0scy5lYXNlaW49ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGgucG93KGEsLjQ4KX0scy5lYXNlaW5vdXQ9ZnVuY3Rpb24oYSl7aWYoMT09YSlyZXR1cm4gMTtpZigwPT1hKXJldHVybiAwO3ZhciBiPS40OC1hLzEuMDQsYz1NYXRoLnNxcnQoLjE3MzQrYipiKSxkPWMtYixlPU1hdGgucG93KE1hdGguYWJzKGQpLDEvMykqKDA+ZD8tMToxKSxmPS1jLWIsZz1NYXRoLnBvdyhNYXRoLmFicyhmKSwxLzMpKigwPmY/LTE6MSksaD1lK2crLjU7cmV0dXJuIDMqKDEtaCkqaCpoK2gqaCpofSxzLmJhY2tpbj1mdW5jdGlvbihhKXtpZigxPT1hKXJldHVybiAxO3ZhciBiPTEuNzAxNTg7cmV0dXJuIGEqYSooKGIrMSkqYS1iKX0scy5iYWNrb3V0PWZ1bmN0aW9uKGEpe2lmKDA9PWEpcmV0dXJuIDA7YS09MTt2YXIgYj0xLjcwMTU4O3JldHVybiBhKmEqKChiKzEpKmErYikrMX0scy5lbGFzdGljPWZ1bmN0aW9uKGEpe3JldHVybiBhPT0hIWE/YTpNYXRoLnBvdygyLC0xMCphKSpNYXRoLnNpbigoYS0uMDc1KSooMipNYXRoLlBJKS8uMykrMX0scy5ib3VuY2U9ZnVuY3Rpb24oYSl7dmFyIGIsYz03LjU2MjUsZD0yLjc1O3JldHVybiAxL2Q+YT9iPWMqYSphOjIvZD5hPyhhLT0xLjUvZCxiPWMqYSphKy43NSk6Mi41L2Q+YT8oYS09Mi4yNS9kLGI9YyphKmErLjkzNzUpOihhLT0yLjYyNS9kLGI9YyphKmErLjk4NDM3NSksYn0sYS5taW5hPXMsc30oInVuZGVmaW5lZCI9PXR5cGVvZiBiP2Z1bmN0aW9uKCl7fTpiKSxkPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoYSxiKXtpZihhKXtpZihhLm5vZGVUeXBlKXJldHVybiB3KGEpO2lmKGUoYSwiYXJyYXkiKSYmYy5zZXQpcmV0dXJuIGMuc2V0LmFwcGx5KGMsYSk7aWYoYSBpbnN0YW5jZW9mIHMpcmV0dXJuIGE7aWYobnVsbD09YilyZXR1cm4gYT15LmRvYy5xdWVyeVNlbGVjdG9yKFN0cmluZyhhKSksdyhhKX1yZXR1cm4gYT1udWxsPT1hPyIxMDAlIjphLGI9bnVsbD09Yj8iMTAwJSI6YixuZXcgdihhLGIpfWZ1bmN0aW9uIGQoYSxiKXtpZihiKXtpZigiI3RleHQiPT1hJiYoYT15LmRvYy5jcmVhdGVUZXh0Tm9kZShiLnRleHR8fGJbIiN0ZXh0Il18fCIiKSksIiNjb21tZW50Ij09YSYmKGE9eS5kb2MuY3JlYXRlQ29tbWVudChiLnRleHR8fGJbIiN0ZXh0Il18fCIiKSksInN0cmluZyI9PXR5cGVvZiBhJiYoYT1kKGEpKSwic3RyaW5nIj09dHlwZW9mIGIpcmV0dXJuIDE9PWEubm9kZVR5cGU/InhsaW5rOiI9PWIuc3Vic3RyaW5nKDAsNik/YS5nZXRBdHRyaWJ1dGVOUyhULGIuc3Vic3RyaW5nKDYpKToieG1sOiI9PWIuc3Vic3RyaW5nKDAsNCk/YS5nZXRBdHRyaWJ1dGVOUyhVLGIuc3Vic3RyaW5nKDQpKTphLmdldEF0dHJpYnV0ZShiKToidGV4dCI9PWI/YS5ub2RlVmFsdWU6bnVsbDtpZigxPT1hLm5vZGVUeXBlKXtmb3IodmFyIGMgaW4gYilpZihiW3pdKGMpKXt2YXIgZT1BKGJbY10pO2U/InhsaW5rOiI9PWMuc3Vic3RyaW5nKDAsNik/YS5zZXRBdHRyaWJ1dGVOUyhULGMuc3Vic3RyaW5nKDYpLGUpOiJ4bWw6Ij09Yy5zdWJzdHJpbmcoMCw0KT9hLnNldEF0dHJpYnV0ZU5TKFUsYy5zdWJzdHJpbmcoNCksZSk6YS5zZXRBdHRyaWJ1dGUoYyxlKTphLnJlbW92ZUF0dHJpYnV0ZShjKX19ZWxzZSJ0ZXh0ImluIGImJihhLm5vZGVWYWx1ZT1iLnRleHQpfWVsc2UgYT15LmRvYy5jcmVhdGVFbGVtZW50TlMoVSxhKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGI9QS5wcm90b3R5cGUudG9Mb3dlckNhc2UuY2FsbChiKSwiZmluaXRlIj09Yj9pc0Zpbml0ZShhKToiYXJyYXkiPT1iJiYoYSBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5JiZBcnJheS5pc0FycmF5KGEpKT8hMDoibnVsbCI9PWImJm51bGw9PT1hfHxiPT10eXBlb2YgYSYmbnVsbCE9PWF8fCJvYmplY3QiPT1iJiZhPT09T2JqZWN0KGEpfHxKLmNhbGwoYSkuc2xpY2UoOCwtMSkudG9Mb3dlckNhc2UoKT09Yn1mdW5jdGlvbiBmKGEpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBhfHxPYmplY3QoYSkhPT1hKXJldHVybiBhO3ZhciBiPW5ldyBhLmNvbnN0cnVjdG9yO2Zvcih2YXIgYyBpbiBhKWFbel0oYykmJihiW2NdPWYoYVtjXSkpO3JldHVybiBifWZ1bmN0aW9uIGgoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGEucHVzaChhLnNwbGljZShjLDEpWzBdKX1mdW5jdGlvbiBpKGEsYixjKXtmdW5jdGlvbiBkKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLGY9ZS5qb2luKCLikIAiKSxnPWQuY2FjaGU9ZC5jYWNoZXx8e30saT1kLmNvdW50PWQuY291bnR8fFtdO3JldHVybiBnW3pdKGYpPyhoKGksZiksYz9jKGdbZl0pOmdbZl0pOihpLmxlbmd0aD49MWUzJiZkZWxldGUgZ1tpLnNoaWZ0KCldLGkucHVzaChmKSxnW2ZdPWEuYXBwbHkoYixlKSxjP2MoZ1tmXSk6Z1tmXSl9cmV0dXJuIGR9ZnVuY3Rpb24gaihhLGIsYyxkLGUsZil7aWYobnVsbD09ZSl7dmFyIGc9YS1jLGg9Yi1kO3JldHVybiBnfHxoPygxODArMTgwKkQuYXRhbjIoLWgsLWcpL0grMzYwKSUzNjA6MH1yZXR1cm4gaihhLGIsZSxmKS1qKGMsZCxlLGYpfWZ1bmN0aW9uIGsoYSl7cmV0dXJuIGElMzYwKkgvMTgwfWZ1bmN0aW9uIGwoYSl7cmV0dXJuIDE4MCphL0glMzYwfWZ1bmN0aW9uIG0oYSl7dmFyIGI9W107cmV0dXJuIGE9YS5yZXBsYWNlKC8oPzpefFxzKShcdyspXCgoW14pXSspXCkvZyxmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGQ9ZC5zcGxpdCgvXHMqLFxzKnxccysvKSwicm90YXRlIj09YyYmMT09ZC5sZW5ndGgmJmQucHVzaCgwLDApLCJzY2FsZSI9PWMmJihkLmxlbmd0aD4yP2Q9ZC5zbGljZSgwLDIpOjI9PWQubGVuZ3RoJiZkLnB1c2goMCwwKSwxPT1kLmxlbmd0aCYmZC5wdXNoKGRbMF0sMCwwKSksInNrZXdYIj09Yz9iLnB1c2goWyJtIiwxLDAsRC50YW4oayhkWzBdKSksMSwwLDBdKToic2tld1kiPT1jP2IucHVzaChbIm0iLDEsRC50YW4oayhkWzBdKSksMCwxLDAsMF0pOmIucHVzaChbYy5jaGFyQXQoMCldLmNvbmNhdChkKSksYX0pLGJ9ZnVuY3Rpb24gbihhLGIpe3ZhciBkPWFhKGEpLGU9bmV3IGMuTWF0cml4O2lmKGQpZm9yKHZhciBmPTAsZz1kLmxlbmd0aDtnPmY7ZisrKXt2YXIgaCxpLGosayxsLG09ZFtmXSxuPW0ubGVuZ3RoLG89QShtWzBdKS50b0xvd2VyQ2FzZSgpLHA9bVswXSE9byxxPXA/ZS5pbnZlcnQoKTowOyJ0Ij09byYmMj09bj9lLnRyYW5zbGF0ZShtWzFdLDApOiJ0Ij09byYmMz09bj9wPyhoPXEueCgwLDApLGk9cS55KDAsMCksaj1xLngobVsxXSxtWzJdKSxrPXEueShtWzFdLG1bMl0pLGUudHJhbnNsYXRlKGotaCxrLWkpKTplLnRyYW5zbGF0ZShtWzFdLG1bMl0pOiJyIj09bz8yPT1uPyhsPWx8fGIsZS5yb3RhdGUobVsxXSxsLngrbC53aWR0aC8yLGwueStsLmhlaWdodC8yKSk6ND09biYmKHA/KGo9cS54KG1bMl0sbVszXSksaz1xLnkobVsyXSxtWzNdKSxlLnJvdGF0ZShtWzFdLGosaykpOmUucm90YXRlKG1bMV0sbVsyXSxtWzNdKSk6InMiPT1vPzI9PW58fDM9PW4/KGw9bHx8YixlLnNjYWxlKG1bMV0sbVtuLTFdLGwueCtsLndpZHRoLzIsbC55K2wuaGVpZ2h0LzIpKTo0PT1uP3A/KGo9cS54KG1bMl0sbVszXSksaz1xLnkobVsyXSxtWzNdKSxlLnNjYWxlKG1bMV0sbVsxXSxqLGspKTplLnNjYWxlKG1bMV0sbVsxXSxtWzJdLG1bM10pOjU9PW4mJihwPyhqPXEueChtWzNdLG1bNF0pLGs9cS55KG1bM10sbVs0XSksZS5zY2FsZShtWzFdLG1bMl0saixrKSk6ZS5zY2FsZShtWzFdLG1bMl0sbVszXSxtWzRdKSk6Im0iPT1vJiY3PT1uJiZlLmFkZChtWzFdLG1bMl0sbVszXSxtWzRdLG1bNV0sbVs2XSl9cmV0dXJuIGV9ZnVuY3Rpb24gbyhhKXt2YXIgYj1hLm5vZGUub3duZXJTVkdFbGVtZW50JiZ3KGEubm9kZS5vd25lclNWR0VsZW1lbnQpfHxhLm5vZGUucGFyZW50Tm9kZSYmdyhhLm5vZGUucGFyZW50Tm9kZSl8fGMuc2VsZWN0KCJzdmciKXx8YygwLDApLGQ9Yi5zZWxlY3QoImRlZnMiKSxlPW51bGw9PWQ/ITE6ZC5ub2RlO3JldHVybiBlfHwoZT11KCJkZWZzIixiLm5vZGUpLm5vZGUpLGV9ZnVuY3Rpb24gcChhKXtyZXR1cm4gYS5ub2RlLm93bmVyU1ZHRWxlbWVudCYmdyhhLm5vZGUub3duZXJTVkdFbGVtZW50KXx8Yy5zZWxlY3QoInN2ZyIpfWZ1bmN0aW9uIHEoYSxiLGMpe2Z1bmN0aW9uIGUoYSl7aWYobnVsbD09YSlyZXR1cm4gSTtpZihhPT0rYSlyZXR1cm4gYTtkKGose3dpZHRoOmF9KTt0cnl7cmV0dXJuIGouZ2V0QkJveCgpLndpZHRofWNhdGNoKGIpe3JldHVybiAwfX1mdW5jdGlvbiBmKGEpe2lmKG51bGw9PWEpcmV0dXJuIEk7aWYoYT09K2EpcmV0dXJuIGE7ZChqLHtoZWlnaHQ6YX0pO3RyeXtyZXR1cm4gai5nZXRCQm94KCkuaGVpZ2h0fWNhdGNoKGIpe3JldHVybiAwfX1mdW5jdGlvbiBnKGQsZSl7bnVsbD09Yj9pW2RdPWUoYS5hdHRyKGQpfHwwKTpkPT1iJiYoaT1lKG51bGw9PWM/YS5hdHRyKGQpfHwwOmMpKX12YXIgaD1wKGEpLm5vZGUsaT17fSxqPWgucXVlcnlTZWxlY3RvcigiLnN2Zy0tLW1nciIpO3N3aXRjaChqfHwoaj1kKCJyZWN0IiksZChqLHt4Oi05ZTkseTotOWU5LHdpZHRoOjEwLGhlaWdodDoxMCwiY2xhc3MiOiJzdmctLS1tZ3IiLGZpbGw6Im5vbmUifSksaC5hcHBlbmRDaGlsZChqKSksYS50eXBlKXtjYXNlInJlY3QiOmcoInJ4IixlKSxnKCJyeSIsZik7Y2FzZSJpbWFnZSI6Zygid2lkdGgiLGUpLGcoImhlaWdodCIsZik7Y2FzZSJ0ZXh0IjpnKCJ4IixlKSxnKCJ5IixmKTticmVhaztjYXNlImNpcmNsZSI6ZygiY3giLGUpLGcoImN5IixmKSxnKCJyIixlKTticmVhaztjYXNlImVsbGlwc2UiOmcoImN4IixlKSxnKCJjeSIsZiksZygicngiLGUpLGcoInJ5IixmKTticmVhaztjYXNlImxpbmUiOmcoIngxIixlKSxnKCJ4MiIsZSksZygieTEiLGYpLGcoInkyIixmKTticmVhaztjYXNlIm1hcmtlciI6ZygicmVmWCIsZSksZygibWFya2VyV2lkdGgiLGUpLGcoInJlZlkiLGYpLGcoIm1hcmtlckhlaWdodCIsZik7YnJlYWs7Y2FzZSJyYWRpYWxHcmFkaWVudCI6ZygiZngiLGUpLGcoImZ5IixmKTticmVhaztjYXNlInRzcGFuIjpnKCJkeCIsZSksZygiZHkiLGYpO2JyZWFrO2RlZmF1bHQ6ZyhiLGUpfXJldHVybiBoLnJlbW92ZUNoaWxkKGopLGl9ZnVuY3Rpb24gcihhKXtlKGEsImFycmF5Iil8fChhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSk7Zm9yKHZhciBiPTAsYz0wLGQ9dGhpcy5ub2RlO3RoaXNbYl07KWRlbGV0ZSB0aGlzW2IrK107Zm9yKGI9MDtiPGEubGVuZ3RoO2IrKykic2V0Ij09YVtiXS50eXBlP2FbYl0uZm9yRWFjaChmdW5jdGlvbihhKXtkLmFwcGVuZENoaWxkKGEubm9kZSl9KTpkLmFwcGVuZENoaWxkKGFbYl0ubm9kZSk7dmFyIGY9ZC5jaGlsZE5vZGVzO2ZvcihiPTA7YjxmLmxlbmd0aDtiKyspdGhpc1tjKytdPXcoZltiXSk7cmV0dXJuIHRoaXN9ZnVuY3Rpb24gcyhhKXtpZihhLnNuYXAgaW4gVilyZXR1cm4gVlthLnNuYXBdO3ZhciBiO3RyeXtiPWEub3duZXJTVkdFbGVtZW50fWNhdGNoKGMpe310aGlzLm5vZGU9YSxiJiYodGhpcy5wYXBlcj1uZXcgdihiKSksdGhpcy50eXBlPWEudGFnTmFtZXx8YS5ub2RlTmFtZTt2YXIgZD10aGlzLmlkPVModGhpcyk7aWYodGhpcy5hbmltcz17fSx0aGlzLl89e3RyYW5zZm9ybTpbXX0sYS5zbmFwPWQsVltkXT10aGlzLCJnIj09dGhpcy50eXBlJiYodGhpcy5hZGQ9ciksdGhpcy50eXBlIGlue2c6MSxtYXNrOjEscGF0dGVybjoxLHN5bWJvbDoxfSlmb3IodmFyIGUgaW4gdi5wcm90b3R5cGUpdi5wcm90b3R5cGVbel0oZSkmJih0aGlzW2VdPXYucHJvdG90eXBlW2VdKX1mdW5jdGlvbiB0KGEpe3RoaXMubm9kZT1hfWZ1bmN0aW9uIHUoYSxiKXt2YXIgYz1kKGEpO2IuYXBwZW5kQ2hpbGQoYyk7dmFyIGU9dyhjKTtyZXR1cm4gZX1mdW5jdGlvbiB2KGEsYil7dmFyIGMsZSxmLGc9di5wcm90b3R5cGU7aWYoYSYmYS50YWdOYW1lJiYic3ZnIj09YS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpe2lmKGEuc25hcCBpbiBWKXJldHVybiBWW2Euc25hcF07dmFyIGg9YS5vd25lckRvY3VtZW50O2M9bmV3IHMoYSksZT1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkZXNjIilbMF0sZj1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkZWZzIilbMF0sZXx8KGU9ZCgiZGVzYyIpLGUuYXBwZW5kQ2hpbGQoaC5jcmVhdGVUZXh0Tm9kZSgiQ3JlYXRlZCB3aXRoIFNuYXAiKSksYy5ub2RlLmFwcGVuZENoaWxkKGUpKSxmfHwoZj1kKCJkZWZzIiksYy5ub2RlLmFwcGVuZENoaWxkKGYpKSxjLmRlZnM9Zjtmb3IodmFyIGkgaW4gZylnW3pdKGkpJiYoY1tpXT1nW2ldKTtjLnBhcGVyPWMucm9vdD1jfWVsc2UgYz11KCJzdmciLHkuZG9jLmJvZHkpLGQoYy5ub2RlLHtoZWlnaHQ6Yix2ZXJzaW9uOjEuMSx3aWR0aDphLHhtbG5zOlV9KTtyZXR1cm4gY31mdW5jdGlvbiB3KGEpe3JldHVybiBhP2EgaW5zdGFuY2VvZiBzfHxhIGluc3RhbmNlb2YgdD9hOmEudGFnTmFtZSYmInN2ZyI9PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpP25ldyB2KGEpOmEudGFnTmFtZSYmIm9iamVjdCI9PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYiaW1hZ2Uvc3ZnK3htbCI9PWEudHlwZT9uZXcgdihhLmNvbnRlbnREb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3ZnIilbMF0pOm5ldyBzKGEpOmF9ZnVuY3Rpb24geChhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU9e3R5cGU6YVtjXS50eXBlLGF0dHI6YVtjXS5hdHRyKCl9LGY9YVtjXS5jaGlsZHJlbigpO2IucHVzaChlKSxmLmxlbmd0aCYmeChmLGUuY2hpbGROb2Rlcz1bXSl9fWMudmVyc2lvbj0iMC41LjEiLGMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iU25hcCB2Iit0aGlzLnZlcnNpb259LGMuXz17fTt2YXIgeT17d2luOmEud2luZG93LGRvYzphLndpbmRvdy5kb2N1bWVudH07Yy5fLmdsb2I9eTt2YXIgej0iaGFzT3duUHJvcGVydHkiLEE9U3RyaW5nLEI9cGFyc2VGbG9hdCxDPXBhcnNlSW50LEQ9TWF0aCxFPUQubWF4LEY9RC5taW4sRz1ELmFicyxIPShELnBvdyxELlBJKSxJPShELnJvdW5kLCIiKSxKPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsSz0vXlxzKigoI1thLWZcZF17Nn0pfCgjW2EtZlxkXXszfSl8cmdiYT9cKFxzKihbXGRcLl0rJT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSslPyg/OlxzKixccypbXGRcLl0rJT8pPylccypcKXxoc2JhP1woXHMqKFtcZFwuXSsoPzpkZWd8XHhiMHwlKT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSsoPzolP1xzKixccypbXGRcLl0rKT8lPylccypcKXxoc2xhP1woXHMqKFtcZFwuXSsoPzpkZWd8XHhiMHwlKT9ccyosXHMqW1xkXC5dKyU/XHMqLFxzKltcZFwuXSsoPzolP1xzKixccypbXGRcLl0rKT8lPylccypcKSlccyokL2ksTD0oYy5fLnNlcGFyYXRvcj0vWyxcc10rLywvW1xzXSosW1xzXSovKSxNPXtoczoxLHJnOjF9LE49LyhbYS16XSlbXHMsXSooKC0/XGQqXC4/XGQqKD86ZVtcLStdP1xkKyk/W1xzXSosP1tcc10qKSspL2dpLE89LyhbcnN0bV0pW1xzLF0qKCgtP1xkKlwuP1xkKig/OmVbXC0rXT9cZCspP1tcc10qLD9bXHNdKikrKS9naSxQPS8oLT9cZCpcLj9cZCooPzplW1wtK10/XGQrKT8pW1xzXSosP1tcc10qL2dpLFE9MCxSPSJTIisoK25ldyBEYXRlKS50b1N0cmluZygzNiksUz1mdW5jdGlvbihhKXtyZXR1cm4oYSYmYS50eXBlP2EudHlwZTpJKStSKyhRKyspLnRvU3RyaW5nKDM2KX0sVD0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsVT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLFY9e307Yy51cmw9ZnVuY3Rpb24oYSl7cmV0dXJuInVybCgnIyIrYSsiJykifTtjLl8uJD1kLGMuXy5pZD1TLGMuZm9ybWF0PWZ1bmN0aW9uKCl7dmFyIGE9L1x7KFteXH1dKylcfS9nLGI9Lyg/Oig/Ol58XC4pKC4rPykoPz1cW3xcLnwkfFwoKXxcWygnfCIpKC4rPylcMlxdKShcKFwpKT8vZyxjPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kO3JldHVybiBjLnJlcGxhY2UoYixmdW5jdGlvbihhLGIsYyxkLGYpe2I9Ynx8ZCxlJiYoYiBpbiBlJiYoZT1lW2JdKSwiZnVuY3Rpb24iPT10eXBlb2YgZSYmZiYmKGU9ZSgpKSl9KSxlPShudWxsPT1lfHxlPT1kP2E6ZSkrIiJ9O3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBBKGIpLnJlcGxhY2UoYSxmdW5jdGlvbihhLGIpe3JldHVybiBjKGEsYixkKX0pfX0oKSxjLl8uY2xvbmU9ZixjLl8uY2FjaGVyPWksYy5yYWQ9ayxjLmRlZz1sLGMuc2luPWZ1bmN0aW9uKGEpe3JldHVybiBELnNpbihjLnJhZChhKSl9LGMudGFuPWZ1bmN0aW9uKGEpe3JldHVybiBELnRhbihjLnJhZChhKSl9LGMuY29zPWZ1bmN0aW9uKGEpe3JldHVybiBELmNvcyhjLnJhZChhKSl9LGMuYXNpbj1mdW5jdGlvbihhKXtyZXR1cm4gYy5kZWcoRC5hc2luKGEpKX0sYy5hY29zPWZ1bmN0aW9uKGEpe3JldHVybiBjLmRlZyhELmFjb3MoYSkpfSxjLmF0YW49ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGVnKEQuYXRhbihhKSl9LGMuYXRhbjI9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZGVnKEQuYXRhbjIoYSkpfSxjLmFuZ2xlPWosYy5sZW49ZnVuY3Rpb24oYSxiLGQsZSl7cmV0dXJuIE1hdGguc3FydChjLmxlbjIoYSxiLGQsZSkpfSxjLmxlbjI9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuKGEtYykqKGEtYykrKGItZCkqKGItZCl9LGMuY2xvc2VzdFBvaW50PWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3ZhciBkPWEueC1iLGU9YS55LWM7cmV0dXJuIGQqZCtlKmV9Zm9yKHZhciBlLGYsZyxoLGk9YS5ub2RlLGo9aS5nZXRUb3RhbExlbmd0aCgpLGs9ai9pLnBhdGhTZWdMaXN0Lm51bWJlck9mSXRlbXMqLjEyNSxsPTEvMCxtPTA7aj49bTttKz1rKShoPWQoZz1pLmdldFBvaW50QXRMZW5ndGgobSkpKTxsJiYoZT1nLGY9bSxsPWgpO2ZvcihrKj0uNTtrPi41Oyl7dmFyIG4sbyxwLHEscixzOyhwPWYtayk+PTAmJihyPWQobj1pLmdldFBvaW50QXRMZW5ndGgocCkpKTxsPyhlPW4sZj1wLGw9cik6KHE9ZitrKTw9aiYmKHM9ZChvPWkuZ2V0UG9pbnRBdExlbmd0aChxKSkpPGw/KGU9byxmPXEsbD1zKTprKj0uNX1yZXR1cm4gZT17eDplLngseTplLnksbGVuZ3RoOmYsZGlzdGFuY2U6TWF0aC5zcXJ0KGwpfX0sYy5pcz1lLGMuc25hcFRvPWZ1bmN0aW9uKGEsYixjKXtpZihjPWUoYywiZmluaXRlIik/YzoxMCxlKGEsImFycmF5Iikpe2Zvcih2YXIgZD1hLmxlbmd0aDtkLS07KWlmKEcoYVtkXS1iKTw9YylyZXR1cm4gYVtkXX1lbHNle2E9K2E7dmFyIGY9YiVhO2lmKGM+ZilyZXR1cm4gYi1mO2lmKGY+YS1jKXJldHVybiBiLWYrYX1yZXR1cm4gYn0sYy5nZXRSR0I9aShmdW5jdGlvbihhKXtpZighYXx8KGE9QShhKSkuaW5kZXhPZigiLSIpKzEpcmV0dXJue3I6LTEsZzotMSxiOi0xLGhleDoibm9uZSIsZXJyb3I6MSx0b1N0cmluZzpafTtpZigibm9uZSI9PWEpcmV0dXJue3I6LTEsZzotMSxiOi0xLGhleDoibm9uZSIsdG9TdHJpbmc6Wn07aWYoIShNW3pdKGEudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMCwyKSl8fCIjIj09YS5jaGFyQXQoKSkmJihhPVcoYSkpLCFhKXJldHVybntyOi0xLGc6LTEsYjotMSxoZXg6Im5vbmUiLGVycm9yOjEsdG9TdHJpbmc6Wn07dmFyIGIsZCxmLGcsaCxpLGo9YS5tYXRjaChLKTtyZXR1cm4gaj8oalsyXSYmKGY9QyhqWzJdLnN1YnN0cmluZyg1KSwxNiksZD1DKGpbMl0uc3Vic3RyaW5nKDMsNSksMTYpLGI9QyhqWzJdLnN1YnN0cmluZygxLDMpLDE2KSksalszXSYmKGY9QygoaD1qWzNdLmNoYXJBdCgzKSkraCwxNiksZD1DKChoPWpbM10uY2hhckF0KDIpKStoLDE2KSxiPUMoKGg9alszXS5jaGFyQXQoMSkpK2gsMTYpKSxqWzRdJiYoaT1qWzRdLnNwbGl0KEwpLGI9QihpWzBdKSwiJSI9PWlbMF0uc2xpY2UoLTEpJiYoYio9Mi41NSksZD1CKGlbMV0pLCIlIj09aVsxXS5zbGljZSgtMSkmJihkKj0yLjU1KSxmPUIoaVsyXSksIiUiPT1pWzJdLnNsaWNlKC0xKSYmKGYqPTIuNTUpLCJyZ2JhIj09alsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsNCkmJihnPUIoaVszXSkpLGlbM10mJiIlIj09aVszXS5zbGljZSgtMSkmJihnLz0xMDApKSxqWzVdPyhpPWpbNV0uc3BsaXQoTCksYj1CKGlbMF0pLCIlIj09aVswXS5zbGljZSgtMSkmJihiLz0xMDApLGQ9QihpWzFdKSwiJSI9PWlbMV0uc2xpY2UoLTEpJiYoZC89MTAwKSxmPUIoaVsyXSksIiUiPT1pWzJdLnNsaWNlKC0xKSYmKGYvPTEwMCksKCJkZWciPT1pWzBdLnNsaWNlKC0zKXx8IsKwIj09aVswXS5zbGljZSgtMSkpJiYoYi89MzYwKSwiaHNiYSI9PWpbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLDQpJiYoZz1CKGlbM10pKSxpWzNdJiYiJSI9PWlbM10uc2xpY2UoLTEpJiYoZy89MTAwKSxjLmhzYjJyZ2IoYixkLGYsZykpOmpbNl0/KGk9als2XS5zcGxpdChMKSxiPUIoaVswXSksIiUiPT1pWzBdLnNsaWNlKC0xKSYmKGIvPTEwMCksZD1CKGlbMV0pLCIlIj09aVsxXS5zbGljZSgtMSkmJihkLz0xMDApLGY9QihpWzJdKSwiJSI9PWlbMl0uc2xpY2UoLTEpJiYoZi89MTAwKSwoImRlZyI9PWlbMF0uc2xpY2UoLTMpfHwiwrAiPT1pWzBdLnNsaWNlKC0xKSkmJihiLz0zNjApLCJoc2xhIj09alsxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsNCkmJihnPUIoaVszXSkpLGlbM10mJiIlIj09aVszXS5zbGljZSgtMSkmJihnLz0xMDApLGMuaHNsMnJnYihiLGQsZixnKSk6KGI9RihELnJvdW5kKGIpLDI1NSksZD1GKEQucm91bmQoZCksMjU1KSxmPUYoRC5yb3VuZChmKSwyNTUpLGc9RihFKGcsMCksMSksaj17cjpiLGc6ZCxiOmYsdG9TdHJpbmc6Wn0sai5oZXg9IiMiKygxNjc3NzIxNnxmfGQ8PDh8Yjw8MTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKSxqLm9wYWNpdHk9ZShnLCJmaW5pdGUiKT9nOjEsaikpOntyOi0xLGc6LTEsYjotMSxoZXg6Im5vbmUiLGVycm9yOjEsdG9TdHJpbmc6Wn19LGMpLGMuaHNiPWkoZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmhzYjJyZ2IoYSxiLGQpLmhleH0pLGMuaHNsPWkoZnVuY3Rpb24oYSxiLGQpe3JldHVybiBjLmhzbDJyZ2IoYSxiLGQpLmhleH0pLGMucmdiPWkoZnVuY3Rpb24oYSxiLGMsZCl7aWYoZShkLCJmaW5pdGUiKSl7dmFyIGY9RC5yb3VuZDtyZXR1cm4icmdiYSgiK1tmKGEpLGYoYiksZihjKSwrZC50b0ZpeGVkKDIpXSsiKSJ9cmV0dXJuIiMiKygxNjc3NzIxNnxjfGI8PDh8YTw8MTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKX0pO3ZhciBXPWZ1bmN0aW9uKGEpe3ZhciBiPXkuZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF18fHkuZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzdmciKVswXSxjPSJyZ2IoMjU1LCAwLCAwKSI7cmV0dXJuKFc9aShmdW5jdGlvbihhKXtpZigicmVkIj09YS50b0xvd2VyQ2FzZSgpKXJldHVybiBjO2Iuc3R5bGUuY29sb3I9YyxiLnN0eWxlLmNvbG9yPWE7dmFyIGQ9eS5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShiLEkpLmdldFByb3BlcnR5VmFsdWUoImNvbG9yIik7cmV0dXJuIGQ9PWM/bnVsbDpkfSkpKGEpfSxYPWZ1bmN0aW9uKCl7cmV0dXJuImhzYigiK1t0aGlzLmgsdGhpcy5zLHRoaXMuYl0rIikifSxZPWZ1bmN0aW9uKCl7cmV0dXJuImhzbCgiK1t0aGlzLmgsdGhpcy5zLHRoaXMubF0rIikifSxaPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PXRoaXMub3BhY2l0eXx8bnVsbD09dGhpcy5vcGFjaXR5P3RoaXMuaGV4OiJyZ2JhKCIrW3RoaXMucix0aGlzLmcsdGhpcy5iLHRoaXMub3BhY2l0eV0rIikifSwkPWZ1bmN0aW9uKGEsYixkKXtpZihudWxsPT1iJiZlKGEsIm9iamVjdCIpJiYiciJpbiBhJiYiZyJpbiBhJiYiYiJpbiBhJiYoZD1hLmIsYj1hLmcsYT1hLnIpLG51bGw9PWImJmUoYSxzdHJpbmcpKXt2YXIgZj1jLmdldFJHQihhKTthPWYucixiPWYuZyxkPWYuYn1yZXR1cm4oYT4xfHxiPjF8fGQ+MSkmJihhLz0yNTUsYi89MjU1LGQvPTI1NSksW2EsYixkXX0sXz1mdW5jdGlvbihhLGIsZCxmKXthPUQucm91bmQoMjU1KmEpLGI9RC5yb3VuZCgyNTUqYiksZD1ELnJvdW5kKDI1NSpkKTt2YXIgZz17cjphLGc6YixiOmQsb3BhY2l0eTplKGYsImZpbml0ZSIpP2Y6MSxoZXg6Yy5yZ2IoYSxiLGQpLHRvU3RyaW5nOlp9O3JldHVybiBlKGYsImZpbml0ZSIpJiYoZy5vcGFjaXR5PWYpLGd9O2MuY29sb3I9ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGUoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJiImluIGE/KGI9Yy5oc2IycmdiKGEpLGEucj1iLnIsYS5nPWIuZyxhLmI9Yi5iLGEub3BhY2l0eT0xLGEuaGV4PWIuaGV4KTplKGEsIm9iamVjdCIpJiYiaCJpbiBhJiYicyJpbiBhJiYibCJpbiBhPyhiPWMuaHNsMnJnYihhKSxhLnI9Yi5yLGEuZz1iLmcsYS5iPWIuYixhLm9wYWNpdHk9MSxhLmhleD1iLmhleCk6KGUoYSwic3RyaW5nIikmJihhPWMuZ2V0UkdCKGEpKSxlKGEsIm9iamVjdCIpJiYiciJpbiBhJiYiZyJpbiBhJiYiYiJpbiBhJiYhKCJlcnJvciJpbiBhKT8oYj1jLnJnYjJoc2woYSksYS5oPWIuaCxhLnM9Yi5zLGEubD1iLmwsYj1jLnJnYjJoc2IoYSksYS52PWIuYik6KGE9e2hleDoibm9uZSJ9LGEucj1hLmc9YS5iPWEuaD1hLnM9YS52PWEubD0tMSxhLmVycm9yPTEpKSxhLnRvU3RyaW5nPVosYX0sYy5oc2IycmdiPWZ1bmN0aW9uKGEsYixjLGQpe2UoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJiImluIGEmJihjPWEuYixiPWEucyxkPWEubyxhPWEuaCksYSo9MzYwO3ZhciBmLGcsaCxpLGo7cmV0dXJuIGE9YSUzNjAvNjAsaj1jKmIsaT1qKigxLUcoYSUyLTEpKSxmPWc9aD1jLWosYT1+fmEsZis9W2osaSwwLDAsaSxqXVthXSxnKz1baSxqLGosaSwwLDBdW2FdLGgrPVswLDAsaSxqLGosaV1bYV0sXyhmLGcsaCxkKX0sYy5oc2wycmdiPWZ1bmN0aW9uKGEsYixjLGQpe2UoYSwib2JqZWN0IikmJiJoImluIGEmJiJzImluIGEmJiJsImluIGEmJihjPWEubCxiPWEucyxhPWEuaCksKGE+MXx8Yj4xfHxjPjEpJiYoYS89MzYwLGIvPTEwMCxjLz0xMDApLGEqPTM2MDt2YXIgZixnLGgsaSxqO3JldHVybiBhPWElMzYwLzYwLGo9MipiKiguNT5jP2M6MS1jKSxpPWoqKDEtRyhhJTItMSkpLGY9Zz1oPWMtai8yLGE9fn5hLGYrPVtqLGksMCwwLGksal1bYV0sZys9W2ksaixqLGksMCwwXVthXSxoKz1bMCwwLGksaixqLGldW2FdLF8oZixnLGgsZCl9LGMucmdiMmhzYj1mdW5jdGlvbihhLGIsYyl7Yz0kKGEsYixjKSxhPWNbMF0sYj1jWzFdLGM9Y1syXTt2YXIgZCxlLGYsZztyZXR1cm4gZj1FKGEsYixjKSxnPWYtRihhLGIsYyksZD0wPT1nP251bGw6Zj09YT8oYi1jKS9nOmY9PWI/KGMtYSkvZysyOihhLWIpL2crNCxkPShkKzM2MCklNio2MC8zNjAsZT0wPT1nPzA6Zy9mLHtoOmQsczplLGI6Zix0b1N0cmluZzpYfX0sYy5yZ2IyaHNsPWZ1bmN0aW9uKGEsYixjKXtjPSQoYSxiLGMpLGE9Y1swXSxiPWNbMV0sYz1jWzJdO3ZhciBkLGUsZixnLGgsaTtyZXR1cm4gZz1FKGEsYixjKSxoPUYoYSxiLGMpLGk9Zy1oLGQ9MD09aT9udWxsOmc9PWE/KGItYykvaTpnPT1iPyhjLWEpL2krMjooYS1iKS9pKzQsZD0oZCszNjApJTYqNjAvMzYwLGY9KGcraCkvMixlPTA9PWk/MDouNT5mP2kvKDIqZik6aS8oMi0yKmYpLHtoOmQsczplLGw6Zix0b1N0cmluZzpZfX0sYy5wYXJzZVBhdGhTdHJpbmc9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9Yy5wYXRoKGEpO2lmKGIuYXJyKXJldHVybiBjLnBhdGguY2xvbmUoYi5hcnIpO3ZhciBkPXthOjcsYzo2LG86MixoOjEsbDoyLG06MixyOjQscTo0LHM6NCx0OjIsdjoxLHU6Myx6OjB9LGY9W107cmV0dXJuIGUoYSwiYXJyYXkiKSYmZShhWzBdLCJhcnJheSIpJiYoZj1jLnBhdGguY2xvbmUoYSkpLGYubGVuZ3RofHxBKGEpLnJlcGxhY2UoTixmdW5jdGlvbihhLGIsYyl7dmFyIGU9W10sZz1iLnRvTG93ZXJDYXNlKCk7aWYoYy5yZXBsYWNlKFAsZnVuY3Rpb24oYSxiKXtiJiZlLnB1c2goK2IpfSksIm0iPT1nJiZlLmxlbmd0aD4yJiYoZi5wdXNoKFtiXS5jb25jYXQoZS5zcGxpY2UoMCwyKSkpLGc9ImwiLGI9Im0iPT1iPyJsIjoiTCIpLCJvIj09ZyYmMT09ZS5sZW5ndGgmJmYucHVzaChbYixlWzBdXSksInIiPT1nKWYucHVzaChbYl0uY29uY2F0KGUpKTtlbHNlIGZvcig7ZS5sZW5ndGg+PWRbZ10mJihmLnB1c2goW2JdLmNvbmNhdChlLnNwbGljZSgwLGRbZ10pKSksZFtnXSk7KTt9KSxmLnRvU3RyaW5nPWMucGF0aC50b1N0cmluZyxiLmFycj1jLnBhdGguY2xvbmUoZiksZn07dmFyIGFhPWMucGFyc2VUcmFuc2Zvcm1TdHJpbmc9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGI9W107cmV0dXJuIGUoYSwiYXJyYXkiKSYmZShhWzBdLCJhcnJheSIpJiYoYj1jLnBhdGguY2xvbmUoYSkpLGIubGVuZ3RofHxBKGEpLnJlcGxhY2UoTyxmdW5jdGlvbihhLGMsZCl7dmFyIGU9W107Yy50b0xvd2VyQ2FzZSgpO2QucmVwbGFjZShQLGZ1bmN0aW9uKGEsYil7YiYmZS5wdXNoKCtiKX0pLGIucHVzaChbY10uY29uY2F0KGUpKX0pLGIudG9TdHJpbmc9Yy5wYXRoLnRvU3RyaW5nLGJ9O2MuXy5zdmdUcmFuc2Zvcm0yc3RyaW5nPW0sYy5fLnJnVHJhbnNmb3JtPS9eW2Etel1bXHNdKi0/XC4/XGQvaSxjLl8udHJhbnNmb3JtMm1hdHJpeD1uLGMuX3VuaXQycHg9cTt5LmRvYy5jb250YWluc3x8eS5kb2MuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PWR8fCEoIWR8fDEhPWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKWZvcig7YjspaWYoYj1iLnBhcmVudE5vZGUsYj09YSlyZXR1cm4hMDtyZXR1cm4hMX07Yy5fLmdldFNvbWVEZWZzPW8sYy5fLmdldFNvbWVTVkc9cCxjLnNlbGVjdD1mdW5jdGlvbihhKXtyZXR1cm4gYT1BKGEpLnJlcGxhY2UoLyhbXlxcXSk6L2csIiQxXFw6Iiksdyh5LmRvYy5xdWVyeVNlbGVjdG9yKGEpKX0sYy5zZWxlY3RBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXkuZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoYSksZD0oYy5zZXR8fEFycmF5KSgpLGU9MDtlPGIubGVuZ3RoO2UrKylkLnB1c2godyhiW2VdKSk7cmV0dXJuIGR9LHNldEludGVydmFsKGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIFYpaWYoVlt6XShhKSl7dmFyIGI9VlthXSxjPWIubm9kZTsoInN2ZyIhPWIudHlwZSYmIWMub3duZXJTVkdFbGVtZW50fHwic3ZnIj09Yi50eXBlJiYoIWMucGFyZW50Tm9kZXx8Im93bmVyU1ZHRWxlbWVudCJpbiBjLnBhcmVudE5vZGUmJiFjLm93bmVyU1ZHRWxlbWVudCkpJiZkZWxldGUgVlthXX19LDFlNCkscy5wcm90b3R5cGUuYXR0cj1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZj1kLm5vZGU7aWYoIWEpe2lmKDEhPWYubm9kZVR5cGUpcmV0dXJue3RleHQ6Zi5ub2RlVmFsdWV9O2Zvcih2YXIgZz1mLmF0dHJpYnV0ZXMsaD17fSxpPTAsaj1nLmxlbmd0aDtqPmk7aSsrKWhbZ1tpXS5ub2RlTmFtZV09Z1tpXS5ub2RlVmFsdWU7cmV0dXJuIGh9aWYoZShhLCJzdHJpbmciKSl7aWYoIShhcmd1bWVudHMubGVuZ3RoPjEpKXJldHVybiBiKCJzbmFwLnV0aWwuZ2V0YXR0ci4iK2EsZCkuZmlyc3REZWZpbmVkKCk7dmFyIGs9e307a1thXT1jLGE9a31mb3IodmFyIGwgaW4gYSlhW3pdKGwpJiZiKCJzbmFwLnV0aWwuYXR0ci4iK2wsZCxhW2xdKTtyZXR1cm4gZH0sYy5wYXJzZT1mdW5jdGlvbihhKXt2YXIgYj15LmRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYz0hMCxkPXkuZG9jLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKGE9QShhKSxhLm1hdGNoKC9eXHMqPFxzKnN2Zyg/OlxzfD4pLyl8fChhPSI8c3ZnPiIrYSsiPC9zdmc+IixjPSExKSxkLmlubmVySFRNTD1hLGE9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic3ZnIilbMF0paWYoYyliPWE7ZWxzZSBmb3IoO2EuZmlyc3RDaGlsZDspYi5hcHBlbmRDaGlsZChhLmZpcnN0Q2hpbGQpO3JldHVybiBuZXcgdChiKX0sYy5mcmFnbWVudD1mdW5jdGlvbigpe2Zvcih2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCksYj15LmRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyl7dmFyIGY9YVtkXTtmLm5vZGUmJmYubm9kZS5ub2RlVHlwZSYmYi5hcHBlbmRDaGlsZChmLm5vZGUpLGYubm9kZVR5cGUmJmIuYXBwZW5kQ2hpbGQoZiksInN0cmluZyI9PXR5cGVvZiBmJiZiLmFwcGVuZENoaWxkKGMucGFyc2UoZikubm9kZSl9cmV0dXJuIG5ldyB0KGIpfSxjLl8ubWFrZT11LGMuXy53cmFwPXcsdi5wcm90b3R5cGUuZWw9ZnVuY3Rpb24oYSxiKXt2YXIgYz11KGEsdGhpcy5ub2RlKTtyZXR1cm4gYiYmYy5hdHRyKGIpLGN9LHMucHJvdG90eXBlLmNoaWxkcmVuPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9dGhpcy5ub2RlLmNoaWxkTm9kZXMsZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylhW2RdPWMoYltkXSk7cmV0dXJuIGF9LHMucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiB4KFt0aGlzXSxhKSxhWzBdfSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ciIsZnVuY3Rpb24oKXt2YXIgYT1iLm50KCk7YT1hLnN1YnN0cmluZyhhLmxhc3RJbmRleE9mKCIuIikrMSk7dmFyIGM9YS5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KTtyZXR1cm4gYmFbel0oYyk/dGhpcy5ub2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vZGUsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShjKTpkKHRoaXMubm9kZSxhKX0pO3ZhciBiYT17ImFsaWdubWVudC1iYXNlbGluZSI6MCwiYmFzZWxpbmUtc2hpZnQiOjAsY2xpcDowLCJjbGlwLXBhdGgiOjAsImNsaXAtcnVsZSI6MCxjb2xvcjowLCJjb2xvci1pbnRlcnBvbGF0aW9uIjowLCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMiOjAsImNvbG9yLXByb2ZpbGUiOjAsImNvbG9yLXJlbmRlcmluZyI6MCxjdXJzb3I6MCxkaXJlY3Rpb246MCxkaXNwbGF5OjAsImRvbWluYW50LWJhc2VsaW5lIjowLCJlbmFibGUtYmFja2dyb3VuZCI6MCxmaWxsOjAsImZpbGwtb3BhY2l0eSI6MCwiZmlsbC1ydWxlIjowLGZpbHRlcjowLCJmbG9vZC1jb2xvciI6MCwiZmxvb2Qtb3BhY2l0eSI6MCxmb250OjAsImZvbnQtZmFtaWx5IjowLCJmb250LXNpemUiOjAsImZvbnQtc2l6ZS1hZGp1c3QiOjAsImZvbnQtc3RyZXRjaCI6MCwiZm9udC1zdHlsZSI6MCwiZm9udC12YXJpYW50IjowLCJmb250LXdlaWdodCI6MCwiZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbCI6MCwiZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwiOjAsImltYWdlLXJlbmRlcmluZyI6MCxrZXJuaW5nOjAsImxldHRlci1zcGFjaW5nIjowLCJsaWdodGluZy1jb2xvciI6MCxtYXJrZXI6MCwibWFya2VyLWVuZCI6MCwibWFya2VyLW1pZCI6MCwibWFya2VyLXN0YXJ0IjowLG1hc2s6MCxvcGFjaXR5OjAsb3ZlcmZsb3c6MCwicG9pbnRlci1ldmVudHMiOjAsInNoYXBlLXJlbmRlcmluZyI6MCwic3RvcC1jb2xvciI6MCwic3RvcC1vcGFjaXR5IjowLHN0cm9rZTowLCJzdHJva2UtZGFzaGFycmF5IjowLCJzdHJva2UtZGFzaG9mZnNldCI6MCwic3Ryb2tlLWxpbmVjYXAiOjAsInN0cm9rZS1saW5lam9pbiI6MCwic3Ryb2tlLW1pdGVybGltaXQiOjAsInN0cm9rZS1vcGFjaXR5IjowLCJzdHJva2Utd2lkdGgiOjAsInRleHQtYW5jaG9yIjowLCJ0ZXh0LWRlY29yYXRpb24iOjAsInRleHQtcmVuZGVyaW5nIjowLCJ1bmljb2RlLWJpZGkiOjAsdmlzaWJpbGl0eTowLCJ3b3JkLXNwYWNpbmciOjAsIndyaXRpbmctbW9kZSI6MH07Yi5vbigic25hcC51dGlsLmF0dHIiLGZ1bmN0aW9uKGEpe3ZhciBjPWIubnQoKSxlPXt9O2M9Yy5zdWJzdHJpbmcoYy5sYXN0SW5kZXhPZigiLiIpKzEpLGVbY109YTt2YXIgZj1jLnJlcGxhY2UoLy0oXHcpL2dpLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pLGc9Yy5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGEpe3JldHVybiItIithLnRvTG93ZXJDYXNlKCl9KTtiYVt6XShnKT90aGlzLm5vZGUuc3R5bGVbZl09bnVsbD09YT9JOmE6ZCh0aGlzLm5vZGUsZSl9KSxmdW5jdGlvbihhKXt9KHYucHJvdG90eXBlKSxjLmFqYXg9ZnVuY3Rpb24oYSxjLGQsZil7dmFyIGc9bmV3IFhNTEh0dHBSZXF1ZXN0LGg9UygpO2lmKGcpe2lmKGUoYywiZnVuY3Rpb24iKSlmPWQsZD1jLGM9bnVsbDtlbHNlIGlmKGUoYywib2JqZWN0Iikpe3ZhciBpPVtdO2Zvcih2YXIgaiBpbiBjKWMuaGFzT3duUHJvcGVydHkoaikmJmkucHVzaChlbmNvZGVVUklDb21wb25lbnQoaikrIj0iK2VuY29kZVVSSUNvbXBvbmVudChjW2pdKSk7Yz1pLmpvaW4oIiYiKX1yZXR1cm4gZy5vcGVuKGM/IlBPU1QiOiJHRVQiLGEsITApLGMmJihnLnNldFJlcXVlc3RIZWFkZXIoIlgtUmVxdWVzdGVkLVdpdGgiLCJYTUxIdHRwUmVxdWVzdCIpLGcuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikpLGQmJihiLm9uY2UoInNuYXAuYWpheC4iK2grIi4wIixkKSxiLm9uY2UoInNuYXAuYWpheC4iK2grIi4yMDAiLGQpLGIub25jZSgic25hcC5hamF4LiIraCsiLjMwNCIsZCkpLGcub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09Zy5yZWFkeVN0YXRlJiZiKCJzbmFwLmFqYXguIitoKyIuIitnLnN0YXR1cyxmLGcpfSw0PT1nLnJlYWR5U3RhdGU/ZzooZy5zZW5kKGMpLGcpfX0sYy5sb2FkPWZ1bmN0aW9uKGEsYixkKXtjLmFqYXgoYSxmdW5jdGlvbihhKXt2YXIgZT1jLnBhcnNlKGEucmVzcG9uc2VUZXh0KTtkP2IuY2FsbChkLGUpOmIoZSl9KX07dmFyIGNhPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz1hLm93bmVyRG9jdW1lbnQsZD1jLmJvZHksZT1jLmRvY3VtZW50RWxlbWVudCxmPWUuY2xpZW50VG9wfHxkLmNsaWVudFRvcHx8MCxoPWUuY2xpZW50TGVmdHx8ZC5jbGllbnRMZWZ0fHwwLGk9Yi50b3ArKGcud2luLnBhZ2VZT2Zmc2V0fHxlLnNjcm9sbFRvcHx8ZC5zY3JvbGxUb3ApLWYsaj1iLmxlZnQrKGcud2luLnBhZ2VYT2Zmc2V0fHxlLnNjcm9sbExlZnR8fGQuc2Nyb2xsTGVmdCktaDtyZXR1cm57eTppLHg6an19O3JldHVybiBjLmdldEVsZW1lbnRCeVBvaW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPShjLmNhbnZhcyx5LmRvYy5lbGVtZW50RnJvbVBvaW50KGEsYikpO2lmKHkud2luLm9wZXJhJiYic3ZnIj09ZC50YWdOYW1lKXt2YXIgZT1jYShkKSxmPWQuY3JlYXRlU1ZHUmVjdCgpO2YueD1hLWUueCxmLnk9Yi1lLnksZi53aWR0aD1mLmhlaWdodD0xO3ZhciBnPWQuZ2V0SW50ZXJzZWN0aW9uTGlzdChmLG51bGwpO2cubGVuZ3RoJiYoZD1nW2cubGVuZ3RoLTFdKX1yZXR1cm4gZD93KGQpOm51bGx9LGMucGx1Z2luPWZ1bmN0aW9uKGEpe2EoYyxzLHYseSx0KX0seS53aW4uU25hcD1jLGN9KGF8fHRoaXMpO3JldHVybiBkLnBsdWdpbihmdW5jdGlvbihjLGQsZSxmLGcpe2Z1bmN0aW9uIGgoYSxiKXtpZihudWxsPT1iKXt2YXIgZD0hMDtpZihiPSJsaW5lYXJHcmFkaWVudCI9PWEudHlwZXx8InJhZGlhbEdyYWRpZW50Ij09YS50eXBlP2Eubm9kZS5nZXRBdHRyaWJ1dGUoImdyYWRpZW50VHJhbnNmb3JtIik6InBhdHRlcm4iPT1hLnR5cGU/YS5ub2RlLmdldEF0dHJpYnV0ZSgicGF0dGVyblRyYW5zZm9ybSIpOmEubm9kZS5nZXRBdHRyaWJ1dGUoInRyYW5zZm9ybSIpLCFiKXJldHVybiBuZXcgYy5NYXRyaXg7Yj1jLl8uc3ZnVHJhbnNmb3JtMnN0cmluZyhiKX1lbHNlIGI9Yy5fLnJnVHJhbnNmb3JtLnRlc3QoYik/bShiKS5yZXBsYWNlKC9cLnszfXxcdTIwMjYvZyxhLl8udHJhbnNmb3JtfHwiIik6Yy5fLnN2Z1RyYW5zZm9ybTJzdHJpbmcoYiksbChiLCJhcnJheSIpJiYoYj1jLnBhdGg/Yy5wYXRoLnRvU3RyaW5nLmNhbGwoYik6bShiKSksYS5fLnRyYW5zZm9ybT1iO3ZhciBlPWMuXy50cmFuc2Zvcm0ybWF0cml4KGIsYS5nZXRCQm94KDEpKTtyZXR1cm4gZD9lOnZvaWQoYS5tYXRyaXg9ZSl9ZnVuY3Rpb24gaShhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGQ9byhhLm5vZGUsYik7ZD1kJiZkLm1hdGNoKGcpLGQ9ZCYmZFsyXSxkJiYiIyI9PWQuY2hhckF0KCkmJihkPWQuc3Vic3RyaW5nKDEpLGQmJihpW2RdPShpW2RdfHxbXSkuY29uY2F0KGZ1bmN0aW9uKGQpe3ZhciBlPXt9O2VbYl09Yy51cmwoZCksbyhhLm5vZGUsZSl9KSkpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9byhhLm5vZGUsInhsaW5rOmhyZWYiKTtiJiYiIyI9PWIuY2hhckF0KCkmJihiPWIuc3Vic3RyaW5nKDEpLGImJihpW2JdPShpW2JdfHxbXSkuY29uY2F0KGZ1bmN0aW9uKGIpe2EuYXR0cigieGxpbms6aHJlZiIsIiMiK2IpfSkpKX1mb3IodmFyIGUsZj1hLnNlbGVjdEFsbCgiKiIpLGc9L15ccyp1cmxcKCgifCd8KSguKilcMVwpXHMqJC8saD1bXSxpPXt9LGo9MCxrPWYubGVuZ3RoO2s+ajtqKyspe2U9ZltqXSxiKGUsImZpbGwiKSxiKGUsInN0cm9rZSIpLGIoZSwiZmlsdGVyIiksYihlLCJtYXNrIiksYihlLCJjbGlwLXBhdGgiKSxkKGUpO3ZhciBsPW8oZS5ub2RlLCJpZCIpO2wmJihvKGUubm9kZSx7aWQ6ZS5pZH0pLGgucHVzaCh7b2xkOmwsaWQ6ZS5pZH0pKX1mb3Ioaj0wLGs9aC5sZW5ndGg7az5qO2orKyl7dmFyIG09aVtoW2pdLm9sZF07aWYobSlmb3IodmFyIG49MCxwPW0ubGVuZ3RoO3A+bjtuKyspbVtuXShoW2pdLmlkKX19ZnVuY3Rpb24gaihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hPyI8Iit0aGlzLnR5cGU6IiIsYz10aGlzLm5vZGUuYXR0cmlidXRlcyxkPXRoaXMubm9kZS5jaGlsZE5vZGVzO2lmKGEpZm9yKHZhciBlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWIrPSIgIitjW2VdLm5hbWUrJz0iJytjW2VdLnZhbHVlLnJlcGxhY2UoLyIvZywnXFwiJykrJyInO2lmKGQubGVuZ3RoKXtmb3IoYSYmKGIrPSI+IiksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKykzPT1kW2VdLm5vZGVUeXBlP2IrPWRbZV0ubm9kZVZhbHVlOjE9PWRbZV0ubm9kZVR5cGUmJihiKz1zKGRbZV0pLnRvU3RyaW5nKCkpO2EmJihiKz0iPC8iK3RoaXMudHlwZSsiPiIpfWVsc2UgYSYmKGIrPSIvPiIpO3JldHVybiBifX12YXIgaz1kLnByb3RvdHlwZSxsPWMuaXMsbT1TdHJpbmcsbj1jLl91bml0MnB4LG89Yy5fLiQscD1jLl8ubWFrZSxxPWMuXy5nZXRTb21lRGVmcyxyPSJoYXNPd25Qcm9wZXJ0eSIscz1jLl8ud3JhcDtrLmdldEJCb3g9ZnVuY3Rpb24oYSl7aWYoInRzcGFuIj09dGhpcy50eXBlKXJldHVybiBjLl8uYm94KHRoaXMubm9kZS5nZXRDbGllbnRSZWN0cygpLml0ZW0oMCkpO2lmKCFjLk1hdHJpeHx8IWMucGF0aClyZXR1cm4gdGhpcy5ub2RlLmdldEJCb3goKTt2YXIgYj10aGlzLGQ9bmV3IGMuTWF0cml4O2lmKGIucmVtb3ZlZClyZXR1cm4gYy5fLmJveCgpO2Zvcig7InVzZSI9PWIudHlwZTspaWYoYXx8KGQ9ZC5hZGQoYi50cmFuc2Zvcm0oKS5sb2NhbE1hdHJpeC50cmFuc2xhdGUoYi5hdHRyKCJ4Iil8fDAsYi5hdHRyKCJ5Iil8fDApKSksYi5vcmlnaW5hbCliPWIub3JpZ2luYWw7ZWxzZXt2YXIgZT1iLmF0dHIoInhsaW5rOmhyZWYiKTtiPWIub3JpZ2luYWw9Yi5ub2RlLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZS5zdWJzdHJpbmcoZS5pbmRleE9mKCIjIikrMSkpfXZhciBmPWIuXyxnPWMucGF0aC5nZXRbYi50eXBlXXx8Yy5wYXRoLmdldC5kZWZsdDt0cnl7cmV0dXJuIGE/KGYuYmJveHd0PWc/Yy5wYXRoLmdldEJCb3goYi5yZWFsUGF0aD1nKGIpKTpjLl8uYm94KGIubm9kZS5nZXRCQm94KCkpLGMuXy5ib3goZi5iYm94d3QpKTooYi5yZWFsUGF0aD1nKGIpLGIubWF0cml4PWIudHJhbnNmb3JtKCkubG9jYWxNYXRyaXgsZi5iYm94PWMucGF0aC5nZXRCQm94KGMucGF0aC5tYXAoYi5yZWFsUGF0aCxkLmFkZChiLm1hdHJpeCkpKSxjLl8uYm94KGYuYmJveCkpfWNhdGNoKGgpe3JldHVybiBjLl8uYm94KCl9fTt2YXIgdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0cmluZ307ay50cmFuc2Zvcm09ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fO2lmKG51bGw9PWEpe2Zvcih2YXIgZCxlPXRoaXMsZj1uZXcgYy5NYXRyaXgodGhpcy5ub2RlLmdldENUTSgpKSxnPWgodGhpcyksaT1bZ10saj1uZXcgYy5NYXRyaXgsaz1nLnRvVHJhbnNmb3JtU3RyaW5nKCksbD1tKGcpPT1tKHRoaXMubWF0cml4KT9tKGIudHJhbnNmb3JtKTprOyJzdmciIT1lLnR5cGUmJihlPWUucGFyZW50KCkpOylpLnB1c2goaChlKSk7Zm9yKGQ9aS5sZW5ndGg7ZC0tOylqLmFkZChpW2RdKTtyZXR1cm57c3RyaW5nOmwsZ2xvYmFsTWF0cml4OmYsdG90YWxNYXRyaXg6aixsb2NhbE1hdHJpeDpnLGRpZmZNYXRyaXg6Zi5jbG9uZSgpLmFkZChnLmludmVydCgpKSxnbG9iYWw6Zi50b1RyYW5zZm9ybVN0cmluZygpLHRvdGFsOmoudG9UcmFuc2Zvcm1TdHJpbmcoKSxsb2NhbDprLHRvU3RyaW5nOnR9fXJldHVybiBhIGluc3RhbmNlb2YgYy5NYXRyaXg/KHRoaXMubWF0cml4PWEsdGhpcy5fLnRyYW5zZm9ybT1hLnRvVHJhbnNmb3JtU3RyaW5nKCkpOmgodGhpcyxhKSx0aGlzLm5vZGUmJigibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGV8fCJyYWRpYWxHcmFkaWVudCI9PXRoaXMudHlwZT9vKHRoaXMubm9kZSx7Z3JhZGllbnRUcmFuc2Zvcm06dGhpcy5tYXRyaXh9KToicGF0dGVybiI9PXRoaXMudHlwZT9vKHRoaXMubm9kZSx7cGF0dGVyblRyYW5zZm9ybTp0aGlzLm1hdHJpeH0pOm8odGhpcy5ub2RlLHt0cmFuc2Zvcm06dGhpcy5tYXRyaXh9KSksdGhpc30say5wYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzLm5vZGUucGFyZW50Tm9kZSl9LGsuYXBwZW5kPWsuYWRkPWZ1bmN0aW9uKGEpe2lmKGEpe2lmKCJzZXQiPT1hLnR5cGUpe3ZhciBiPXRoaXM7cmV0dXJuIGEuZm9yRWFjaChmdW5jdGlvbihhKXtiLmFkZChhKX0pLHRoaXN9YT1zKGEpLHRoaXMubm9kZS5hcHBlbmRDaGlsZChhLm5vZGUpLGEucGFwZXI9dGhpcy5wYXBlcn1yZXR1cm4gdGhpc30say5hcHBlbmRUbz1mdW5jdGlvbihhKXtyZXR1cm4gYSYmKGE9cyhhKSxhLmFwcGVuZCh0aGlzKSksdGhpc30say5wcmVwZW5kPWZ1bmN0aW9uKGEpe2lmKGEpe2lmKCJzZXQiPT1hLnR5cGUpe3ZhciBiLGM9dGhpcztyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2I/Yi5hZnRlcihhKTpjLnByZXBlbmQoYSksYj1hfSksdGhpc31hPXMoYSk7dmFyIGQ9YS5wYXJlbnQoKTt0aGlzLm5vZGUuaW5zZXJ0QmVmb3JlKGEubm9kZSx0aGlzLm5vZGUuZmlyc3RDaGlsZCksdGhpcy5hZGQmJnRoaXMuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXMucGFyZW50KCkmJnRoaXMucGFyZW50KCkuYWRkKCksZCYmZC5hZGQoKX1yZXR1cm4gdGhpc30say5wcmVwZW5kVG89ZnVuY3Rpb24oYSl7cmV0dXJuIGE9cyhhKSxhLnByZXBlbmQodGhpcyksdGhpc30say5iZWZvcmU9ZnVuY3Rpb24oYSl7aWYoInNldCI9PWEudHlwZSl7dmFyIGI9dGhpcztyZXR1cm4gYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWEucGFyZW50KCk7Yi5ub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEubm9kZSxiLm5vZGUpLGMmJmMuYWRkKCl9KSx0aGlzLnBhcmVudCgpLmFkZCgpLHRoaXN9YT1zKGEpO3ZhciBjPWEucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLm5vZGUsdGhpcy5ub2RlKSx0aGlzLnBhcmVudCgpJiZ0aGlzLnBhcmVudCgpLmFkZCgpLGMmJmMuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXN9LGsuYWZ0ZXI9ZnVuY3Rpb24oYSl7YT1zKGEpO3ZhciBiPWEucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5uZXh0U2libGluZz90aGlzLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYS5ub2RlLHRoaXMubm9kZS5uZXh0U2libGluZyk6dGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoYS5ub2RlKSx0aGlzLnBhcmVudCgpJiZ0aGlzLnBhcmVudCgpLmFkZCgpLGImJmIuYWRkKCksYS5wYXBlcj10aGlzLnBhcGVyLHRoaXN9LGsuaW5zZXJ0QmVmb3JlPWZ1bmN0aW9uKGEpe2E9cyhhKTt2YXIgYj10aGlzLnBhcmVudCgpO3JldHVybiBhLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGEubm9kZSksdGhpcy5wYXBlcj1hLnBhcGVyLGImJmIuYWRkKCksYS5wYXJlbnQoKSYmYS5wYXJlbnQoKS5hZGQoKSx0aGlzfSxrLmluc2VydEFmdGVyPWZ1bmN0aW9uKGEpe2E9cyhhKTt2YXIgYj10aGlzLnBhcmVudCgpO3JldHVybiBhLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGEubm9kZS5uZXh0U2libGluZyksdGhpcy5wYXBlcj1hLnBhcGVyLGImJmIuYWRkKCksYS5wYXJlbnQoKSYmYS5wYXJlbnQoKS5hZGQoKSx0aGlzfSxrLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyZW50KCk7cmV0dXJuIHRoaXMubm9kZS5wYXJlbnROb2RlJiZ0aGlzLm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUpLGRlbGV0ZSB0aGlzLnBhcGVyLHRoaXMucmVtb3ZlZD0hMCxhJiZhLmFkZCgpLHRoaXN9LGsuc2VsZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBzKHRoaXMubm9kZS5xdWVyeVNlbGVjdG9yKGEpKX0say5zZWxlY3RBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMubm9kZS5xdWVyeVNlbGVjdG9yQWxsKGEpLGQ9KGMuc2V0fHxBcnJheSkoKSxlPTA7ZTxiLmxlbmd0aDtlKyspZC5wdXNoKHMoYltlXSkpO3JldHVybiBkfSxrLmFzUFg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YiYmKGI9dGhpcy5hdHRyKGEpKSwrbih0aGlzLGEsYil9LGsudXNlPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLm5vZGUuaWQ7cmV0dXJuIGJ8fChiPXRoaXMuaWQsbyh0aGlzLm5vZGUse2lkOmJ9KSksYT0ibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGV8fCJyYWRpYWxHcmFkaWVudCI9PXRoaXMudHlwZXx8InBhdHRlcm4iPT10aGlzLnR5cGU/cCh0aGlzLnR5cGUsdGhpcy5ub2RlLnBhcmVudE5vZGUpOnAoInVzZSIsdGhpcy5ub2RlLnBhcmVudE5vZGUpLG8oYS5ub2RlLHsieGxpbms6aHJlZiI6IiMiK2J9KSxhLm9yaWdpbmFsPXRoaXMsYX0say5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXModGhpcy5ub2RlLmNsb25lTm9kZSghMCkpO3JldHVybiBvKGEubm9kZSwiaWQiKSYmbyhhLm5vZGUse2lkOmEuaWR9KSxpKGEpLGEuaW5zZXJ0QWZ0ZXIodGhpcyksYX0say50b0RlZnM9ZnVuY3Rpb24oKXt2YXIgYT1xKHRoaXMpO3JldHVybiBhLmFwcGVuZENoaWxkKHRoaXMubm9kZSksdGhpc30say5wYXR0ZXJuPWsudG9QYXR0ZXJuPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXAoInBhdHRlcm4iLHEodGhpcykpO3JldHVybiBudWxsPT1hJiYoYT10aGlzLmdldEJCb3goKSksbChhLCJvYmplY3QiKSYmIngiaW4gYSYmKGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0LGE9YS54KSxvKGUubm9kZSx7eDphLHk6Yix3aWR0aDpjLGhlaWdodDpkLHBhdHRlcm5Vbml0czoidXNlclNwYWNlT25Vc2UiLGlkOmUuaWQsdmlld0JveDpbYSxiLGMsZF0uam9pbigiICIpfSksZS5ub2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSksZX0say5tYXJrZXI9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXAoIm1hcmtlciIscSh0aGlzKSk7cmV0dXJuIG51bGw9PWEmJihhPXRoaXMuZ2V0QkJveCgpKSxsKGEsIm9iamVjdCIpJiYieCJpbiBhJiYoYj1hLnksYz1hLndpZHRoLGQ9YS5oZWlnaHQsZT1hLnJlZlh8fGEuY3gsZj1hLnJlZll8fGEuY3ksYT1hLngpLG8oZy5ub2RlLHt2aWV3Qm94OlthLGIsYyxkXS5qb2luKCIgIiksbWFya2VyV2lkdGg6YyxtYXJrZXJIZWlnaHQ6ZCxvcmllbnQ6ImF1dG8iLHJlZlg6ZXx8MCxyZWZZOmZ8fDAsaWQ6Zy5pZH0pLGcubm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpLGd9O3ZhciB1PXt9O2suZGF0YT1mdW5jdGlvbihhLGQpe3ZhciBlPXVbdGhpcy5pZF09dVt0aGlzLmlkXXx8e307aWYoMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gYigic25hcC5kYXRhLmdldC4iK3RoaXMuaWQsdGhpcyxlLG51bGwpLGU7aWYoMT09YXJndW1lbnRzLmxlbmd0aCl7aWYoYy5pcyhhLCJvYmplY3QiKSl7Zm9yKHZhciBmIGluIGEpYVtyXShmKSYmdGhpcy5kYXRhKGYsYVtmXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIoInNuYXAuZGF0YS5nZXQuIit0aGlzLmlkLHRoaXMsZVthXSxhKSxlW2FdfXJldHVybiBlW2FdPWQsYigic25hcC5kYXRhLnNldC4iK3RoaXMuaWQsdGhpcyxkLGEpLHRoaXN9LGsucmVtb3ZlRGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT91W3RoaXMuaWRdPXt9OnVbdGhpcy5pZF0mJmRlbGV0ZSB1W3RoaXMuaWRdW2FdLHRoaXN9LGsub3V0ZXJTVkc9ay50b1N0cmluZz1qKDEpLGsuaW5uZXJTVkc9aigpLGsudG9EYXRhVVJMPWZ1bmN0aW9uKCl7aWYoYSYmYS5idG9hKXt2YXIgYj10aGlzLmdldEJCb3goKSxkPWMuZm9ybWF0KCc8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9Int3aWR0aH0iIGhlaWdodD0ie2hlaWdodH0iIHZpZXdCb3g9Int4fSB7eX0ge3dpZHRofSB7aGVpZ2h0fSI+e2NvbnRlbnRzfTwvc3ZnPicse3g6K2IueC50b0ZpeGVkKDMpLHk6K2IueS50b0ZpeGVkKDMpLHdpZHRoOitiLndpZHRoLnRvRml4ZWQoMyksaGVpZ2h0OitiLmhlaWdodC50b0ZpeGVkKDMpLGNvbnRlbnRzOnRoaXMub3V0ZXJTVkcoKX0pOwpyZXR1cm4iZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCwiK2J0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGQpKSl9fSxnLnByb3RvdHlwZS5zZWxlY3Q9ay5zZWxlY3QsZy5wcm90b3R5cGUuc2VsZWN0QWxsPWsuc2VsZWN0QWxsfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxkLGUsZixnKXtmdW5jdGlvbiBoKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZC5zbGljZShhLGIpO3JldHVybiAxPT1lLmxlbmd0aCYmKGU9ZVswXSksYz9jKGUpOmV9fXZhciBpPWQucHJvdG90eXBlLGo9YS5pcyxrPVN0cmluZyxsPSJoYXNPd25Qcm9wZXJ0eSIsbT1mdW5jdGlvbihhLGIsZCxlKXsiZnVuY3Rpb24iIT10eXBlb2YgZHx8ZC5sZW5ndGh8fChlPWQsZD1jLmxpbmVhciksdGhpcy5hdHRyPWEsdGhpcy5kdXI9YixkJiYodGhpcy5lYXNpbmc9ZCksZSYmKHRoaXMuY2FsbGJhY2s9ZSl9O2EuXy5BbmltYXRpb249bSxhLmFuaW1hdGlvbj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gbmV3IG0oYSxiLGMsZCl9LGkuaW5BbmltPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPVtdO2Zvcih2YXIgYyBpbiBhLmFuaW1zKWEuYW5pbXNbbF0oYykmJiFmdW5jdGlvbihhKXtiLnB1c2goe2FuaW06bmV3IG0oYS5fYXR0cnMsYS5kdXIsYS5lYXNpbmcsYS5fY2FsbGJhY2spLG1pbmE6YSxjdXJTdGF0dXM6YS5zdGF0dXMoKSxzdGF0dXM6ZnVuY3Rpb24oYil7cmV0dXJuIGEuc3RhdHVzKGIpfSxzdG9wOmZ1bmN0aW9uKCl7YS5zdG9wKCl9fSl9KGEuYW5pbXNbY10pO3JldHVybiBifSxhLmFuaW1hdGU9ZnVuY3Rpb24oYSxkLGUsZixnLGgpeyJmdW5jdGlvbiIhPXR5cGVvZiBnfHxnLmxlbmd0aHx8KGg9ZyxnPWMubGluZWFyKTt2YXIgaT1jLnRpbWUoKSxqPWMoYSxkLGksaStmLGMudGltZSxlLGcpO3JldHVybiBoJiZiLm9uY2UoIm1pbmEuZmluaXNoLiIrai5pZCxoKSxqfSxpLnN0b3A9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5pbkFuaW0oKSxiPTAsYz1hLmxlbmd0aDtjPmI7YisrKWFbYl0uc3RvcCgpO3JldHVybiB0aGlzfSxpLmFuaW1hdGU9ZnVuY3Rpb24oYSxkLGUsZil7ImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUubGVuZ3RofHwoZj1lLGU9Yy5saW5lYXIpLGEgaW5zdGFuY2VvZiBtJiYoZj1hLmNhbGxiYWNrLGU9YS5lYXNpbmcsZD1hLmR1cixhPWEuYXR0cik7dmFyIGcsaSxuLG8scD1bXSxxPVtdLHI9e30scz10aGlzO2Zvcih2YXIgdCBpbiBhKWlmKGFbbF0odCkpe3MuZXF1YWw/KG89cy5lcXVhbCh0LGsoYVt0XSkpLGc9by5mcm9tLGk9by50byxuPW8uZik6KGc9K3MuYXR0cih0KSxpPSthW3RdKTt2YXIgdT1qKGcsImFycmF5Iik/Zy5sZW5ndGg6MTtyW3RdPWgocC5sZW5ndGgscC5sZW5ndGgrdSxuKSxwPXAuY29uY2F0KGcpLHE9cS5jb25jYXQoaSl9dmFyIHY9Yy50aW1lKCksdz1jKHAscSx2LHYrZCxjLnRpbWUsZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIHIpcltsXShjKSYmKGJbY109cltjXShhKSk7cy5hdHRyKGIpfSxlKTtyZXR1cm4gcy5hbmltc1t3LmlkXT13LHcuX2F0dHJzPWEsdy5fY2FsbGJhY2s9ZixiKCJzbmFwLmFuaW1jcmVhdGVkLiIrcy5pZCx3KSxiLm9uY2UoIm1pbmEuZmluaXNoLiIrdy5pZCxmdW5jdGlvbigpe2Iub2ZmKCJtaW5hLiouIit3LmlkKSxkZWxldGUgcy5hbmltc1t3LmlkXSxmJiZmLmNhbGwocyl9KSxiLm9uY2UoIm1pbmEuc3RvcC4iK3cuaWQsZnVuY3Rpb24oKXtiLm9mZigibWluYS4qLiIrdy5pZCksZGVsZXRlIHMuYW5pbXNbdy5pZF19KSxzfX0pLGQucGx1Z2luKGZ1bmN0aW9uKGEsYixjLGQsZSl7ZnVuY3Rpb24gZihhLGIsYyxkLGUsZil7cmV0dXJuIG51bGw9PWImJiJbb2JqZWN0IFNWR01hdHJpeF0iPT1nLmNhbGwoYSk/KHRoaXMuYT1hLmEsdGhpcy5iPWEuYix0aGlzLmM9YS5jLHRoaXMuZD1hLmQsdGhpcy5lPWEuZSx2b2lkKHRoaXMuZj1hLmYpKTp2b2lkKG51bGwhPWE/KHRoaXMuYT0rYSx0aGlzLmI9K2IsdGhpcy5jPStjLHRoaXMuZD0rZCx0aGlzLmU9K2UsdGhpcy5mPStmKToodGhpcy5hPTEsdGhpcy5iPTAsdGhpcy5jPTAsdGhpcy5kPTEsdGhpcy5lPTAsdGhpcy5mPTApKX12YXIgZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGg9U3RyaW5nLGk9TWF0aCxqPSIiOyFmdW5jdGlvbihiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhWzBdKmFbMF0rYVsxXSphWzFdfWZ1bmN0aW9uIGQoYSl7dmFyIGI9aS5zcXJ0KGMoYSkpO2FbMF0mJihhWzBdLz1iKSxhWzFdJiYoYVsxXS89Yil9Yi5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2lmKGEmJmEgaW5zdGFuY2VvZiBmKXJldHVybiB0aGlzLmFkZChhLmEsYS5iLGEuYyxhLmQsYS5lLGEuZik7dmFyIGg9YSp0aGlzLmErYip0aGlzLmMsaT1hKnRoaXMuYitiKnRoaXMuZDtyZXR1cm4gdGhpcy5lKz1lKnRoaXMuYStnKnRoaXMuYyx0aGlzLmYrPWUqdGhpcy5iK2cqdGhpcy5kLHRoaXMuYz1jKnRoaXMuYStkKnRoaXMuYyx0aGlzLmQ9Yyp0aGlzLmIrZCp0aGlzLmQsdGhpcy5hPWgsdGhpcy5iPWksdGhpc30sZi5wcm90b3R5cGUubXVsdExlZnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe2lmKGEmJmEgaW5zdGFuY2VvZiBmKXJldHVybiB0aGlzLm11bHRMZWZ0KGEuYSxhLmIsYS5jLGEuZCxhLmUsYS5mKTt2YXIgaD1hKnRoaXMuYStjKnRoaXMuYixpPWEqdGhpcy5jK2MqdGhpcy5kLGo9YSp0aGlzLmUrYyp0aGlzLmYrZTtyZXR1cm4gdGhpcy5iPWIqdGhpcy5hK2QqdGhpcy5iLHRoaXMuZD1iKnRoaXMuYytkKnRoaXMuZCx0aGlzLmY9Yip0aGlzLmUrZCp0aGlzLmYrZyx0aGlzLmE9aCx0aGlzLmM9aSx0aGlzLmU9aix0aGlzfSxiLmludmVydD1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmEqYS5kLWEuYiphLmM7cmV0dXJuIG5ldyBmKGEuZC9iLC1hLmIvYiwtYS5jL2IsYS5hL2IsKGEuYyphLmYtYS5kKmEuZSkvYiwoYS5iKmEuZS1hLmEqYS5mKS9iKX0sYi5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzLmEsdGhpcy5iLHRoaXMuYyx0aGlzLmQsdGhpcy5lLHRoaXMuZil9LGIudHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZSs9YSp0aGlzLmErYip0aGlzLmMsdGhpcy5mKz1hKnRoaXMuYitiKnRoaXMuZCx0aGlzfSxiLnNjYWxlPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBudWxsPT1iJiYoYj1hKSwoY3x8ZCkmJnRoaXMudHJhbnNsYXRlKGMsZCksdGhpcy5hKj1hLHRoaXMuYio9YSx0aGlzLmMqPWIsdGhpcy5kKj1iLChjfHxkKSYmdGhpcy50cmFuc2xhdGUoLWMsLWQpLHRoaXN9LGIucm90YXRlPWZ1bmN0aW9uKGIsYyxkKXtiPWEucmFkKGIpLGM9Y3x8MCxkPWR8fDA7dmFyIGU9K2kuY29zKGIpLnRvRml4ZWQoOSksZj0raS5zaW4oYikudG9GaXhlZCg5KTtyZXR1cm4gdGhpcy5hZGQoZSxmLC1mLGUsYyxkKSx0aGlzLmFkZCgxLDAsMCwxLC1jLC1kKX0sYi5za2V3WD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5za2V3KGEsMCl9LGIuc2tld1k9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2tldygwLGEpfSxiLnNrZXc9ZnVuY3Rpb24oYixjKXtiPWJ8fDAsYz1jfHwwLGI9YS5yYWQoYiksYz1hLnJhZChjKTt2YXIgZD1pLnRhbihiKS50b0ZpeGVkKDkpLGU9aS50YW4oYykudG9GaXhlZCg5KTtyZXR1cm4gdGhpcy5hZGQoMSxlLGQsMSwwLDApfSxiLng9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSp0aGlzLmErYip0aGlzLmMrdGhpcy5lfSxiLnk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSp0aGlzLmIrYip0aGlzLmQrdGhpcy5mfSxiLmdldD1mdW5jdGlvbihhKXtyZXR1cm4rdGhpc1toLmZyb21DaGFyQ29kZSg5NythKV0udG9GaXhlZCg0KX0sYi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJtYXRyaXgoIitbdGhpcy5nZXQoMCksdGhpcy5nZXQoMSksdGhpcy5nZXQoMiksdGhpcy5nZXQoMyksdGhpcy5nZXQoNCksdGhpcy5nZXQoNSldLmpvaW4oKSsiKSJ9LGIub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZS50b0ZpeGVkKDQpLHRoaXMuZi50b0ZpeGVkKDQpXX0sYi5kZXRlcm1pbmFudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEqdGhpcy5kLXRoaXMuYip0aGlzLmN9LGIuc3BsaXQ9ZnVuY3Rpb24oKXt2YXIgYj17fTtiLmR4PXRoaXMuZSxiLmR5PXRoaXMuZjt2YXIgZT1bW3RoaXMuYSx0aGlzLmJdLFt0aGlzLmMsdGhpcy5kXV07Yi5zY2FsZXg9aS5zcXJ0KGMoZVswXSkpLGQoZVswXSksYi5zaGVhcj1lWzBdWzBdKmVbMV1bMF0rZVswXVsxXSplWzFdWzFdLGVbMV09W2VbMV1bMF0tZVswXVswXSpiLnNoZWFyLGVbMV1bMV0tZVswXVsxXSpiLnNoZWFyXSxiLnNjYWxleT1pLnNxcnQoYyhlWzFdKSksZChlWzFdKSxiLnNoZWFyLz1iLnNjYWxleSx0aGlzLmRldGVybWluYW50KCk8MCYmKGIuc2NhbGV4PS1iLnNjYWxleCk7dmFyIGY9ZVswXVsxXSxnPWVbMV1bMV07cmV0dXJuIDA+Zz8oYi5yb3RhdGU9YS5kZWcoaS5hY29zKGcpKSwwPmYmJihiLnJvdGF0ZT0zNjAtYi5yb3RhdGUpKTpiLnJvdGF0ZT1hLmRlZyhpLmFzaW4oZikpLGIuaXNTaW1wbGU9ISgrYi5zaGVhci50b0ZpeGVkKDkpfHxiLnNjYWxleC50b0ZpeGVkKDkpIT1iLnNjYWxleS50b0ZpeGVkKDkpJiZiLnJvdGF0ZSksYi5pc1N1cGVyU2ltcGxlPSErYi5zaGVhci50b0ZpeGVkKDkpJiZiLnNjYWxleC50b0ZpeGVkKDkpPT1iLnNjYWxleS50b0ZpeGVkKDkpJiYhYi5yb3RhdGUsYi5ub1JvdGF0aW9uPSErYi5zaGVhci50b0ZpeGVkKDkpJiYhYi5yb3RhdGUsYn0sYi50b1RyYW5zZm9ybVN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1hfHx0aGlzLnNwbGl0KCk7cmV0dXJuK2Iuc2hlYXIudG9GaXhlZCg5KT8ibSIrW3RoaXMuZ2V0KDApLHRoaXMuZ2V0KDEpLHRoaXMuZ2V0KDIpLHRoaXMuZ2V0KDMpLHRoaXMuZ2V0KDQpLHRoaXMuZ2V0KDUpXTooYi5zY2FsZXg9K2Iuc2NhbGV4LnRvRml4ZWQoNCksYi5zY2FsZXk9K2Iuc2NhbGV5LnRvRml4ZWQoNCksYi5yb3RhdGU9K2Iucm90YXRlLnRvRml4ZWQoNCksKGIuZHh8fGIuZHk/InQiK1srYi5keC50b0ZpeGVkKDQpLCtiLmR5LnRvRml4ZWQoNCldOmopKyhiLnJvdGF0ZT8iciIrWytiLnJvdGF0ZS50b0ZpeGVkKDQpLDAsMF06aikrKDEhPWIuc2NhbGV4fHwxIT1iLnNjYWxleT8icyIrW2Iuc2NhbGV4LGIuc2NhbGV5LDAsMF06aikpfX0oZi5wcm90b3R5cGUpLGEuTWF0cml4PWYsYS5tYXRyaXg9ZnVuY3Rpb24oYSxiLGMsZCxlLGcpe3JldHVybiBuZXcgZihhLGIsYyxkLGUsZyl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSxmKXtmdW5jdGlvbiBnKGQpe3JldHVybiBmdW5jdGlvbihlKXtpZihiLnN0b3AoKSxlIGluc3RhbmNlb2YgZiYmMT09ZS5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoJiYoInJhZGlhbEdyYWRpZW50Ij09ZS5ub2RlLmZpcnN0Q2hpbGQudGFnTmFtZXx8ImxpbmVhckdyYWRpZW50Ij09ZS5ub2RlLmZpcnN0Q2hpbGQudGFnTmFtZXx8InBhdHRlcm4iPT1lLm5vZGUuZmlyc3RDaGlsZC50YWdOYW1lKSYmKGU9ZS5ub2RlLmZpcnN0Q2hpbGQsbih0aGlzKS5hcHBlbmRDaGlsZChlKSxlPWwoZSkpLGUgaW5zdGFuY2VvZiBjKWlmKCJyYWRpYWxHcmFkaWVudCI9PWUudHlwZXx8ImxpbmVhckdyYWRpZW50Ij09ZS50eXBlfHwicGF0dGVybiI9PWUudHlwZSl7ZS5ub2RlLmlkfHxwKGUubm9kZSx7aWQ6ZS5pZH0pO3ZhciBnPXEoZS5ub2RlLmlkKX1lbHNlIGc9ZS5hdHRyKGQpO2Vsc2UgaWYoZz1hLmNvbG9yKGUpLGcuZXJyb3Ipe3ZhciBoPWEobih0aGlzKS5vd25lclNWR0VsZW1lbnQpLmdyYWRpZW50KGUpO2g/KGgubm9kZS5pZHx8cChoLm5vZGUse2lkOmguaWR9KSxnPXEoaC5ub2RlLmlkKSk6Zz1lfWVsc2UgZz1yKGcpO3ZhciBpPXt9O2lbZF09ZyxwKHRoaXMubm9kZSxpKSx0aGlzLm5vZGUuc3R5bGVbZF09dH19ZnVuY3Rpb24gaChhKXtiLnN0b3AoKSxhPT0rYSYmKGErPSJweCIpLHRoaXMubm9kZS5zdHlsZS5mb250U2l6ZT1hfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiPVtdLGM9YS5jaGlsZE5vZGVzLGQ9MCxlPWMubGVuZ3RoO2U+ZDtkKyspe3ZhciBmPWNbZF07Mz09Zi5ub2RlVHlwZSYmYi5wdXNoKGYubm9kZVZhbHVlKSwidHNwYW4iPT1mLnRhZ05hbWUmJigxPT1mLmNoaWxkTm9kZXMubGVuZ3RoJiYzPT1mLmZpcnN0Q2hpbGQubm9kZVR5cGU/Yi5wdXNoKGYuZmlyc3RDaGlsZC5ub2RlVmFsdWUpOmIucHVzaChpKGYpKSl9cmV0dXJuIGJ9ZnVuY3Rpb24gaigpe3JldHVybiBiLnN0b3AoKSx0aGlzLm5vZGUuc3R5bGUuZm9udFNpemV9dmFyIGs9YS5fLm1ha2UsbD1hLl8ud3JhcCxtPWEuaXMsbj1hLl8uZ2V0U29tZURlZnMsbz0vXnVybFwoKFsnIl0/KShbXildKylcMVwpJC8scD1hLl8uJCxxPWEudXJsLHI9U3RyaW5nLHM9YS5fLnNlcGFyYXRvcix0PSIiO2EuZGV1cmw9ZnVuY3Rpb24oYSl7dmFyIGI9U3RyaW5nKGEpLm1hdGNoKG8pO3JldHVybiBiP2JbMl06YX0sYi5vbigic25hcC51dGlsLmF0dHIubWFzayIsZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIGN8fGEgaW5zdGFuY2VvZiBmKXtpZihiLnN0b3AoKSxhIGluc3RhbmNlb2YgZiYmMT09YS5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoJiYoYT1hLm5vZGUuZmlyc3RDaGlsZCxuKHRoaXMpLmFwcGVuZENoaWxkKGEpLGE9bChhKSksIm1hc2siPT1hLnR5cGUpdmFyIGQ9YTtlbHNlIGQ9aygibWFzayIsbih0aGlzKSksZC5ub2RlLmFwcGVuZENoaWxkKGEubm9kZSk7IWQubm9kZS5pZCYmcChkLm5vZGUse2lkOmQuaWR9KSxwKHRoaXMubm9kZSx7bWFzazpxKGQuaWQpfSl9fSksZnVuY3Rpb24oYSl7Yi5vbigic25hcC51dGlsLmF0dHIuY2xpcCIsYSksYi5vbigic25hcC51dGlsLmF0dHIuY2xpcC1wYXRoIixhKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5jbGlwUGF0aCIsYSl9KGZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBjfHxhIGluc3RhbmNlb2YgZil7Yi5zdG9wKCk7Zm9yKHZhciBkLGU9YS5ub2RlO2U7KXtpZigiY2xpcFBhdGgiPT09ZS5ub2RlTmFtZSl7ZD1uZXcgYyhlKTticmVha31pZigic3ZnIj09PWUubm9kZU5hbWUpe2Q9dm9pZCAwO2JyZWFrfWU9ZS5wYXJlbnROb2RlfWR8fChkPWsoImNsaXBQYXRoIixuKHRoaXMpKSxkLm5vZGUuYXBwZW5kQ2hpbGQoYS5ub2RlKSwhZC5ub2RlLmlkJiZwKGQubm9kZSx7aWQ6ZC5pZH0pKSxwKHRoaXMubm9kZSx7ImNsaXAtcGF0aCI6cShkLm5vZGUuaWR8fGQuaWQpfSl9fSksYi5vbigic25hcC51dGlsLmF0dHIuZmlsbCIsZygiZmlsbCIpKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5zdHJva2UiLGcoInN0cm9rZSIpKTt2YXIgdT0vXihbbHJdKSg/OlwoKFteKV0qKVwpKT8oLiopJC9pO2Iub24oInNuYXAudXRpbC5ncmFkLnBhcnNlIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjPShiLWgpLyhhLWkpLGQ9aTthPmQ7ZCsrKWZbZF0ub2Zmc2V0PSsoK2grYyooZC1pKSkudG9GaXhlZCgyKTtpPWEsaD1ifWE9cihhKTt2YXIgYz1hLm1hdGNoKHUpO2lmKCFjKXJldHVybiBudWxsO3ZhciBkPWNbMV0sZT1jWzJdLGY9Y1szXTtlPWUuc3BsaXQoL1xzKixccyovKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuK2E9PWE/K2E6YX0pLDE9PWUubGVuZ3RoJiYwPT1lWzBdJiYoZT1bXSksZj1mLnNwbGl0KCItIiksZj1mLm1hcChmdW5jdGlvbihhKXthPWEuc3BsaXQoIjoiKTt2YXIgYj17Y29sb3I6YVswXX07cmV0dXJuIGFbMV0mJihiLm9mZnNldD1wYXJzZUZsb2F0KGFbMV0pKSxifSk7dmFyIGc9Zi5sZW5ndGgsaD0wLGk9MDtnLS07Zm9yKHZhciBqPTA7Zz5qO2orKykib2Zmc2V0ImluIGZbal0mJmIoaixmW2pdLm9mZnNldCk7cmV0dXJuIGZbZ10ub2Zmc2V0PWZbZ10ub2Zmc2V0fHwxMDAsYihnLGZbZ10ub2Zmc2V0KSx7dHlwZTpkLHBhcmFtczplLHN0b3BzOmZ9fSksYi5vbigic25hcC51dGlsLmF0dHIuZCIsZnVuY3Rpb24oYyl7Yi5zdG9wKCksbShjLCJhcnJheSIpJiZtKGNbMF0sImFycmF5IikmJihjPWEucGF0aC50b1N0cmluZy5jYWxsKGMpKSxjPXIoYyksYy5tYXRjaCgvW3J1b10vaSkmJihjPWEucGF0aC50b0Fic29sdXRlKGMpKSxwKHRoaXMubm9kZSx7ZDpjfSl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuI3RleHQiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLGE9cihhKTtmb3IodmFyIGM9ZS5kb2MuY3JlYXRlVGV4dE5vZGUoYSk7dGhpcy5ub2RlLmZpcnN0Q2hpbGQ7KXRoaXMubm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUuZmlyc3RDaGlsZCk7dGhpcy5ub2RlLmFwcGVuZENoaWxkKGMpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnBhdGgiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLHRoaXMuYXR0cih7ZDphfSl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuY2xhc3MiLGZ1bmN0aW9uKGEpe2Iuc3RvcCgpLHRoaXMubm9kZS5jbGFzc05hbWUuYmFzZVZhbD1hfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnZpZXdCb3giLGZ1bmN0aW9uKGEpe3ZhciBjO2M9bShhLCJvYmplY3QiKSYmIngiaW4gYT9bYS54LGEueSxhLndpZHRoLGEuaGVpZ2h0XS5qb2luKCIgIik6bShhLCJhcnJheSIpP2Euam9pbigiICIpOmEscCh0aGlzLm5vZGUse3ZpZXdCb3g6Y30pLGIuc3RvcCgpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRyYW5zZm9ybSIsZnVuY3Rpb24oYSl7dGhpcy50cmFuc2Zvcm0oYSksYi5zdG9wKCl9KSgtMSksYi5vbigic25hcC51dGlsLmF0dHIuciIsZnVuY3Rpb24oYSl7InJlY3QiPT10aGlzLnR5cGUmJihiLnN0b3AoKSxwKHRoaXMubm9kZSx7cng6YSxyeTphfSkpfSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRleHRwYXRoIixmdW5jdGlvbihhKXtpZihiLnN0b3AoKSwidGV4dCI9PXRoaXMudHlwZSl7dmFyIGQsZSxmO2lmKCFhJiZ0aGlzLnRleHRQYXRoKXtmb3IoZT10aGlzLnRleHRQYXRoO2Uubm9kZS5maXJzdENoaWxkOyl0aGlzLm5vZGUuYXBwZW5kQ2hpbGQoZS5ub2RlLmZpcnN0Q2hpbGQpO3JldHVybiBlLnJlbW92ZSgpLHZvaWQgZGVsZXRlIHRoaXMudGV4dFBhdGh9aWYobShhLCJzdHJpbmciKSl7dmFyIGc9bih0aGlzKSxoPWwoZy5wYXJlbnROb2RlKS5wYXRoKGEpO2cuYXBwZW5kQ2hpbGQoaC5ub2RlKSxkPWguaWQsaC5hdHRyKHtpZDpkfSl9ZWxzZSBhPWwoYSksYSBpbnN0YW5jZW9mIGMmJihkPWEuYXR0cigiaWQiKSxkfHwoZD1hLmlkLGEuYXR0cih7aWQ6ZH0pKSk7aWYoZClpZihlPXRoaXMudGV4dFBhdGgsZj10aGlzLm5vZGUsZSllLmF0dHIoeyJ4bGluazpocmVmIjoiIyIrZH0pO2Vsc2V7Zm9yKGU9cCgidGV4dFBhdGgiLHsieGxpbms6aHJlZiI6IiMiK2R9KTtmLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoZi5maXJzdENoaWxkKTtmLmFwcGVuZENoaWxkKGUpLHRoaXMudGV4dFBhdGg9bChlKX19fSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLnRleHQiLGZ1bmN0aW9uKGEpe2lmKCJ0ZXh0Ij09dGhpcy50eXBlKXtmb3IodmFyIGM9dGhpcy5ub2RlLGQ9ZnVuY3Rpb24oYSl7dmFyIGI9cCgidHNwYW4iKTtpZihtKGEsImFycmF5IikpZm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYi5hcHBlbmRDaGlsZChkKGFbY10pKTtlbHNlIGIuYXBwZW5kQ2hpbGQoZS5kb2MuY3JlYXRlVGV4dE5vZGUoYSkpO3JldHVybiBiLm5vcm1hbGl6ZSYmYi5ub3JtYWxpemUoKSxifTtjLmZpcnN0Q2hpbGQ7KWMucmVtb3ZlQ2hpbGQoYy5maXJzdENoaWxkKTtmb3IodmFyIGY9ZChhKTtmLmZpcnN0Q2hpbGQ7KWMuYXBwZW5kQ2hpbGQoZi5maXJzdENoaWxkKX1iLnN0b3AoKX0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5mb250U2l6ZSIsaCkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLmZvbnQtc2l6ZSIsaCkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnRyYW5zZm9ybSIsZnVuY3Rpb24oKXtyZXR1cm4gYi5zdG9wKCksdGhpcy50cmFuc2Zvcm0oKX0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci50ZXh0cGF0aCIsZnVuY3Rpb24oKXtyZXR1cm4gYi5zdG9wKCksdGhpcy50ZXh0UGF0aH0pKC0xKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYyl7cmV0dXJuIGZ1bmN0aW9uKCl7Yi5zdG9wKCk7dmFyIGQ9ZS5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm5vZGUsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgibWFya2VyLSIrYyk7cmV0dXJuIm5vbmUiPT1kP2Q6YShlLmRvYy5nZXRFbGVtZW50QnlJZChkLm1hdGNoKG8pWzFdKSl9fWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe2Iuc3RvcCgpO3ZhciBkPSJtYXJrZXIiK2EuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHJpbmcoMSk7aWYoIiI9PWN8fCFjKXJldHVybiB2b2lkKHRoaXMubm9kZS5zdHlsZVtkXT0ibm9uZSIpO2lmKCJtYXJrZXIiPT1jLnR5cGUpe3ZhciBlPWMubm9kZS5pZDtyZXR1cm4gZXx8cChjLm5vZGUse2lkOmMuaWR9KSx2b2lkKHRoaXMubm9kZS5zdHlsZVtkXT1xKGUpKX19fWIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlci1lbmQiLGMoImVuZCIpKSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIubWFya2VyRW5kIixjKCJlbmQiKSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlci1zdGFydCIsYygic3RhcnQiKSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLm1hcmtlclN0YXJ0IixjKCJzdGFydCIpKSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIubWFya2VyLW1pZCIsYygibWlkIikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5tYXJrZXJNaWQiLGMoIm1pZCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyLWVuZCIsZCgiZW5kIikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5tYXJrZXJFbmQiLGQoImVuZCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyLXN0YXJ0IixkKCJzdGFydCIpKSgtMSksYi5vbigic25hcC51dGlsLmF0dHIubWFya2VyU3RhcnQiLGQoInN0YXJ0IikpKC0xKSxiLm9uKCJzbmFwLnV0aWwuYXR0ci5tYXJrZXItbWlkIixkKCJtaWQiKSkoLTEpLGIub24oInNuYXAudXRpbC5hdHRyLm1hcmtlck1pZCIsZCgibWlkIikpKC0xKX0oKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5yIixmdW5jdGlvbigpe3JldHVybiJyZWN0Ij09dGhpcy50eXBlJiZwKHRoaXMubm9kZSwicngiKT09cCh0aGlzLm5vZGUsInJ5Iik/KGIuc3RvcCgpLHAodGhpcy5ub2RlLCJyeCIpKTp2b2lkIDB9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIudGV4dCIsZnVuY3Rpb24oKXtpZigidGV4dCI9PXRoaXMudHlwZXx8InRzcGFuIj09dGhpcy50eXBlKXtiLnN0b3AoKTt2YXIgYT1pKHRoaXMubm9kZSk7cmV0dXJuIDE9PWEubGVuZ3RoP2FbMF06YX19KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIuI3RleHQiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS50ZXh0Q29udGVudH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5maWxsIixmdW5jdGlvbihjKXtpZighYyl7Yi5zdG9wKCk7dmFyIGQ9Yigic25hcC51dGlsLmdldGF0dHIuZmlsbCIsdGhpcywhMCkuZmlyc3REZWZpbmVkKCk7cmV0dXJuIGEoYS5kZXVybChkKSl8fGR9fSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnN0cm9rZSIsZnVuY3Rpb24oYyl7aWYoIWMpe2Iuc3RvcCgpO3ZhciBkPWIoInNuYXAudXRpbC5nZXRhdHRyLnN0cm9rZSIsdGhpcywhMCkuZmlyc3REZWZpbmVkKCk7cmV0dXJuIGEoYS5kZXVybChkKSl8fGR9fSkoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLnZpZXdCb3giLGZ1bmN0aW9uKCl7Yi5zdG9wKCk7dmFyIGM9cCh0aGlzLm5vZGUsInZpZXdCb3giKTtyZXR1cm4gYz8oYz1jLnNwbGl0KHMpLGEuXy5ib3goK2NbMF0sK2NbMV0sK2NbMl0sK2NbM10pKTp2b2lkIDB9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIucG9pbnRzIixmdW5jdGlvbigpe3ZhciBhPXAodGhpcy5ub2RlLCJwb2ludHMiKTtyZXR1cm4gYi5zdG9wKCksYT9hLnNwbGl0KHMpOnZvaWQgMH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5wYXRoIixmdW5jdGlvbigpe3ZhciBhPXAodGhpcy5ub2RlLCJkIik7cmV0dXJuIGIuc3RvcCgpLGF9KSgtMSksYi5vbigic25hcC51dGlsLmdldGF0dHIuY2xhc3MiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5jbGFzc05hbWUuYmFzZVZhbH0pKC0xKSxiLm9uKCJzbmFwLnV0aWwuZ2V0YXR0ci5mb250U2l6ZSIsaikoLTEpLGIub24oInNuYXAudXRpbC5nZXRhdHRyLmZvbnQtc2l6ZSIsaikoLTEpfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0vXFMrL2csZz1TdHJpbmcsaD1iLnByb3RvdHlwZTtoLmFkZENsYXNzPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGg9ZyhhfHwiIikubWF0Y2goZil8fFtdLGk9dGhpcy5ub2RlLGo9aS5jbGFzc05hbWUuYmFzZVZhbCxrPWoubWF0Y2goZil8fFtdO2lmKGgubGVuZ3RoKXtmb3IoYj0wO2Q9aFtiKytdOyljPWsuaW5kZXhPZihkKSx+Y3x8ay5wdXNoKGQpO2U9ay5qb2luKCIgIiksaiE9ZSYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZSl9cmV0dXJuIHRoaXN9LGgucmVtb3ZlQ2xhc3M9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsaD1nKGF8fCIiKS5tYXRjaChmKXx8W10saT10aGlzLm5vZGUsaj1pLmNsYXNzTmFtZS5iYXNlVmFsLGs9ai5tYXRjaChmKXx8W107aWYoay5sZW5ndGgpe2ZvcihiPTA7ZD1oW2IrK107KWM9ay5pbmRleE9mKGQpLH5jJiZrLnNwbGljZShjLDEpO2U9ay5qb2luKCIgIiksaiE9ZSYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZSl9cmV0dXJuIHRoaXN9LGguaGFzQ2xhc3M9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ub2RlLGM9Yi5jbGFzc05hbWUuYmFzZVZhbCxkPWMubWF0Y2goZil8fFtdO3JldHVybiEhfmQuaW5kZXhPZihhKX0saC50b2dnbGVDbGFzcz1mdW5jdGlvbihhLGIpe2lmKG51bGwhPWIpcmV0dXJuIGI/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpO3ZhciBjLGQsZSxnLGg9KGF8fCIiKS5tYXRjaChmKXx8W10saT10aGlzLm5vZGUsaj1pLmNsYXNzTmFtZS5iYXNlVmFsLGs9ai5tYXRjaChmKXx8W107Zm9yKGM9MDtlPWhbYysrXTspZD1rLmluZGV4T2YoZSksfmQ/ay5zcGxpY2UoZCwxKTprLnB1c2goZSk7cmV0dXJuIGc9ay5qb2luKCIgIiksaiE9ZyYmKGkuY2xhc3NOYW1lLmJhc2VWYWw9ZyksdGhpc319KSxkLnBsdWdpbihmdW5jdGlvbihhLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gaChhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuK2IudG9GaXhlZCgzKSthfX12YXIgaT17IisiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYn0sIi0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0sIi8iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEvYn0sIioiOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqYn19LGo9U3RyaW5nLGs9L1thLXpdKyQvaSxsPS9eXHMqKFsrXC1cLypdKVxzKj1ccyooW1xkLmVFK1wtXSspXHMqKFteXGRcc10rKT9ccyokLztiLm9uKCJzbmFwLnV0aWwuYXR0ciIsZnVuY3Rpb24oYSl7dmFyIGM9aihhKS5tYXRjaChsKTtpZihjKXt2YXIgZD1iLm50KCksZT1kLnN1YnN0cmluZyhkLmxhc3RJbmRleE9mKCIuIikrMSksZj10aGlzLmF0dHIoZSksZz17fTtiLnN0b3AoKTt2YXIgaD1jWzNdfHwiIixtPWYubWF0Y2goayksbj1pW2NbMV1dO2lmKG0mJm09PWg/YT1uKHBhcnNlRmxvYXQoZiksK2NbMl0pOihmPXRoaXMuYXNQWChlKSxhPW4odGhpcy5hc1BYKGUpLHRoaXMuYXNQWChlLGNbMl0raCkpKSxpc05hTihmKXx8aXNOYU4oYSkpcmV0dXJuO2dbZV09YSx0aGlzLmF0dHIoZyl9fSkoLTEwKSxiLm9uKCJzbmFwLnV0aWwuZXF1YWwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9aih0aGlzLmF0dHIoYSl8fCIiKSxlPWooYykubWF0Y2gobCk7aWYoZSl7Yi5zdG9wKCk7dmFyIGY9ZVszXXx8IiIsbT1kLm1hdGNoKGspLG49aVtlWzFdXTtyZXR1cm4gbSYmbT09Zj97ZnJvbTpwYXJzZUZsb2F0KGQpLHRvOm4ocGFyc2VGbG9hdChkKSwrZVsyXSksZjpoKG0pfTooZD10aGlzLmFzUFgoYSkse2Zyb206ZCx0bzpuKGQsdGhpcy5hc1BYKGEsZVsyXStmKSksZjpnfSl9fSkoLTEwKX0pLGQucGx1Z2luKGZ1bmN0aW9uKGMsZCxlLGYsZyl7dmFyIGg9ZS5wcm90b3R5cGUsaT1jLmlzO2gucmVjdD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc7cmV0dXJuIG51bGw9PWYmJihmPWUpLGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2c9YTpudWxsIT1hJiYoZz17eDphLHk6Yix3aWR0aDpjLGhlaWdodDpkfSxudWxsIT1lJiYoZy5yeD1lLGcucnk9ZikpLHRoaXMuZWwoInJlY3QiLGcpfSxoLmNpcmNsZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2Q9YTpudWxsIT1hJiYoZD17Y3g6YSxjeTpiLHI6Y30pLHRoaXMuZWwoImNpcmNsZSIsZCl9O3ZhciBqPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKX1yZXR1cm4gZnVuY3Rpb24oYixjKXt2YXIgZD1mLmRvYy5jcmVhdGVFbGVtZW50KCJpbWciKSxlPWYuZG9jLmJvZHk7ZC5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW0iLGQub25sb2FkPWZ1bmN0aW9uKCl7Yy5jYWxsKGQpLGQub25sb2FkPWQub25lcnJvcj1udWxsLGUucmVtb3ZlQ2hpbGQoZCl9LGQub25lcnJvcj1hLGUuYXBwZW5kQ2hpbGQoZCksZC5zcmM9Yn19KCk7aC5pbWFnZT1mdW5jdGlvbihhLGIsZCxlLGYpe3ZhciBnPXRoaXMuZWwoImltYWdlIik7aWYoaShhLCJvYmplY3QiKSYmInNyYyJpbiBhKWcuYXR0cihhKTtlbHNlIGlmKG51bGwhPWEpe3ZhciBoPXsieGxpbms6aHJlZiI6YSxwcmVzZXJ2ZUFzcGVjdFJhdGlvOiJub25lIn07bnVsbCE9YiYmbnVsbCE9ZCYmKGgueD1iLGgueT1kKSxudWxsIT1lJiZudWxsIT1mPyhoLndpZHRoPWUsaC5oZWlnaHQ9Zik6aihhLGZ1bmN0aW9uKCl7Yy5fLiQoZy5ub2RlLHt3aWR0aDp0aGlzLm9mZnNldFdpZHRoLGhlaWdodDp0aGlzLm9mZnNldEhlaWdodH0pfSksYy5fLiQoZy5ub2RlLGgpfXJldHVybiBnfSxoLmVsbGlwc2U9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU7cmV0dXJuIGkoYSwib2JqZWN0IikmJiJbb2JqZWN0IE9iamVjdF0iPT1hP2U9YTpudWxsIT1hJiYoZT17Y3g6YSxjeTpiLHJ4OmMscnk6ZH0pLHRoaXMuZWwoImVsbGlwc2UiLGUpfSxoLnBhdGg9ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIGkoYSwib2JqZWN0IikmJiFpKGEsImFycmF5Iik/Yj1hOmEmJihiPXtkOmF9KSx0aGlzLmVsKCJwYXRoIixiKX0saC5ncm91cD1oLmc9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbCgiZyIpO3JldHVybiAxPT1hcmd1bWVudHMubGVuZ3RoJiZhJiYhYS50eXBlP2IuYXR0cihhKTphcmd1bWVudHMubGVuZ3RoJiZiLmFkZChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpLGJ9LGguc3ZnPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dmFyIGo9e307cmV0dXJuIGkoYSwib2JqZWN0IikmJm51bGw9PWI/aj1hOihudWxsIT1hJiYoai54PWEpLG51bGwhPWImJihqLnk9YiksbnVsbCE9YyYmKGoud2lkdGg9YyksbnVsbCE9ZCYmKGouaGVpZ2h0PWQpLG51bGwhPWUmJm51bGwhPWYmJm51bGwhPWcmJm51bGwhPWgmJihqLnZpZXdCb3g9W2UsZixnLGhdKSksdGhpcy5lbCgic3ZnIixqKX0saC5tYXNrPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWwoIm1hc2siKTtyZXR1cm4gMT09YXJndW1lbnRzLmxlbmd0aCYmYSYmIWEudHlwZT9iLmF0dHIoYSk6YXJndW1lbnRzLmxlbmd0aCYmYi5hZGQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSxifSxoLnB0cm49ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtpZihpKGEsIm9iamVjdCIpKXZhciBqPWE7ZWxzZSBqPXtwYXR0ZXJuVW5pdHM6InVzZXJTcGFjZU9uVXNlIn0sYSYmKGoueD1hKSxiJiYoai55PWIpLG51bGwhPWMmJihqLndpZHRoPWMpLG51bGwhPWQmJihqLmhlaWdodD1kKSxudWxsIT1lJiZudWxsIT1mJiZudWxsIT1nJiZudWxsIT1oP2oudmlld0JveD1bZSxmLGcsaF06ai52aWV3Qm94PVthfHwwLGJ8fDAsY3x8MCxkfHwwXTtyZXR1cm4gdGhpcy5lbCgicGF0dGVybiIsail9LGgudXNlPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hPyhhIGluc3RhbmNlb2YgZCYmKGEuYXR0cigiaWQiKXx8YS5hdHRyKHtpZDpjLl8uaWQoYSl9KSxhPWEuYXR0cigiaWQiKSksIiMiPT1TdHJpbmcoYSkuY2hhckF0KCkmJihhPWEuc3Vic3RyaW5nKDEpKSx0aGlzLmVsKCJ1c2UiLHsieGxpbms6aHJlZiI6IiMiK2F9KSk6ZC5wcm90b3R5cGUudXNlLmNhbGwodGhpcyl9LGguc3ltYm9sPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXt9O3JldHVybiBudWxsIT1hJiZudWxsIT1iJiZudWxsIT1jJiZudWxsIT1kJiYoZS52aWV3Qm94PVthLGIsYyxkXSksdGhpcy5lbCgic3ltYm9sIixlKX0saC50ZXh0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fTtyZXR1cm4gaShhLCJvYmplY3QiKT9kPWE6bnVsbCE9YSYmKGQ9e3g6YSx5OmIsdGV4dDpjfHwiIn0pLHRoaXMuZWwoInRleHQiLGQpfSxoLmxpbmU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e307cmV0dXJuIGkoYSwib2JqZWN0Iik/ZT1hOm51bGwhPWEmJihlPXt4MTphLHgyOmMseTE6Yix5MjpkfSksdGhpcy5lbCgibGluZSIsZSl9LGgucG9seWxpbmU9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aD4xJiYoYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpO3ZhciBiPXt9O3JldHVybiBpKGEsIm9iamVjdCIpJiYhaShhLCJhcnJheSIpP2I9YTpudWxsIT1hJiYoYj17cG9pbnRzOmF9KSx0aGlzLmVsKCJwb2x5bGluZSIsYil9LGgucG9seWdvbj1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoPjEmJihhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSk7dmFyIGI9e307cmV0dXJuIGkoYSwib2JqZWN0IikmJiFpKGEsImFycmF5Iik/Yj1hOm51bGwhPWEmJihiPXtwb2ludHM6YX0pLHRoaXMuZWwoInBvbHlnb24iLGIpfSxmdW5jdGlvbigpe2Z1bmN0aW9uIGQoKXtyZXR1cm4gdGhpcy5zZWxlY3RBbGwoInN0b3AiKX1mdW5jdGlvbiBlKGEsYil7dmFyIGQ9bCgic3RvcCIpLGU9e29mZnNldDorYisiJSJ9O2E9Yy5jb2xvcihhKSxlWyJzdG9wLWNvbG9yIl09YS5oZXgsYS5vcGFjaXR5PDEmJihlWyJzdG9wLW9wYWNpdHkiXT1hLm9wYWNpdHkpLGwoZCxlKTtmb3IodmFyIGYsZz10aGlzLnN0b3BzKCksaD0wO2g8Zy5sZW5ndGg7aCsrKXt2YXIgaT1wYXJzZUZsb2F0KGdbaF0uYXR0cigib2Zmc2V0IikpO2lmKGk+Yil7dGhpcy5ub2RlLmluc2VydEJlZm9yZShkLGdbaF0ubm9kZSksZj0hMDticmVha319cmV0dXJuIGZ8fHRoaXMubm9kZS5hcHBlbmRDaGlsZChkKSx0aGlzfWZ1bmN0aW9uIGYoKXtpZigibGluZWFyR3JhZGllbnQiPT10aGlzLnR5cGUpe3ZhciBhPWwodGhpcy5ub2RlLCJ4MSIpfHwwLGI9bCh0aGlzLm5vZGUsIngyIil8fDEsZD1sKHRoaXMubm9kZSwieTEiKXx8MCxlPWwodGhpcy5ub2RlLCJ5MiIpfHwwO3JldHVybiBjLl8uYm94KGEsZCxtYXRoLmFicyhiLWEpLG1hdGguYWJzKGUtZCkpfXZhciBmPXRoaXMubm9kZS5jeHx8LjUsZz10aGlzLm5vZGUuY3l8fC41LGg9dGhpcy5ub2RlLnJ8fDA7cmV0dXJuIGMuXy5ib3goZi1oLGctaCwyKmgsMipoKX1mdW5jdGlvbiBnKGEpe3ZhciBkPWEsZT10aGlzLnN0b3BzKCk7aWYoInN0cmluZyI9PXR5cGVvZiBhJiYoZD1iKCJzbmFwLnV0aWwuZ3JhZC5wYXJzZSIsbnVsbCwibCgwLDAsMCwxKSIrYSkuZmlyc3REZWZpbmVkKCkuc3RvcHMpLGMuaXMoZCwiYXJyYXkiKSl7Zm9yKHZhciBmPTA7ZjxlLmxlbmd0aDtmKyspaWYoZFtmXSl7dmFyIGc9Yy5jb2xvcihkW2ZdLmNvbG9yKSxoPXtvZmZzZXQ6ZFtmXS5vZmZzZXQrIiUifTtoWyJzdG9wLWNvbG9yIl09Zy5oZXgsZy5vcGFjaXR5PDEmJihoWyJzdG9wLW9wYWNpdHkiXT1nLm9wYWNpdHkpLGVbZl0uYXR0cihoKX1lbHNlIGVbZl0ucmVtb3ZlKCk7Zm9yKGY9ZS5sZW5ndGg7ZjxkLmxlbmd0aDtmKyspdGhpcy5hZGRTdG9wKGRbZl0uY29sb3IsZFtmXS5vZmZzZXQpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBpKGEsYyl7dmFyIGQsZT1iKCJzbmFwLnV0aWwuZ3JhZC5wYXJzZSIsbnVsbCxjKS5maXJzdERlZmluZWQoKTtpZighZSlyZXR1cm4gbnVsbDtlLnBhcmFtcy51bnNoaWZ0KGEpLGQ9ImwiPT1lLnR5cGUudG9Mb3dlckNhc2UoKT9qLmFwcGx5KDAsZS5wYXJhbXMpOmsuYXBwbHkoMCxlLnBhcmFtcyksZS50eXBlIT1lLnR5cGUudG9Mb3dlckNhc2UoKSYmbChkLm5vZGUse2dyYWRpZW50VW5pdHM6InVzZXJTcGFjZU9uVXNlIn0pO2Zvcih2YXIgZj1lLnN0b3BzLGc9Zi5sZW5ndGgsaD0wO2c+aDtoKyspe3ZhciBpPWZbaF07ZC5hZGRTdG9wKGkuY29sb3IsaS5vZmZzZXQpfXJldHVybiBkfWZ1bmN0aW9uIGooYSxiLGgsaSxqKXt2YXIgaz1jLl8ubWFrZSgibGluZWFyR3JhZGllbnQiLGEpO3JldHVybiBrLnN0b3BzPWQsay5hZGRTdG9wPWUsay5nZXRCQm94PWYsay5zZXRTdG9wcz1nLG51bGwhPWImJmwoay5ub2RlLHt4MTpiLHkxOmgseDI6aSx5MjpqfSksa31mdW5jdGlvbiBrKGEsYixnLGgsaSxqKXt2YXIgaz1jLl8ubWFrZSgicmFkaWFsR3JhZGllbnQiLGEpO3JldHVybiBrLnN0b3BzPWQsay5hZGRTdG9wPWUsay5nZXRCQm94PWYsbnVsbCE9YiYmbChrLm5vZGUse2N4OmIsY3k6ZyxyOmh9KSxudWxsIT1pJiZudWxsIT1qJiZsKGsubm9kZSx7Zng6aSxmeTpqfSksa312YXIgbD1jLl8uJDtoLmdyYWRpZW50PWZ1bmN0aW9uKGEpe3JldHVybiBpKHRoaXMuZGVmcyxhKX0saC5ncmFkaWVudExpbmVhcj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gaih0aGlzLmRlZnMsYSxiLGMsZCl9LGguZ3JhZGllbnRSYWRpYWw9ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gayh0aGlzLmRlZnMsYSxiLGMsZCxlKX0saC50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5ub2RlLm93bmVyRG9jdW1lbnQsZD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxlPWIuY3JlYXRlRWxlbWVudCgiZGl2IiksZj10aGlzLm5vZGUuY2xvbmVOb2RlKCEwKTtyZXR1cm4gZC5hcHBlbmRDaGlsZChlKSxlLmFwcGVuZENoaWxkKGYpLGMuXy4kKGYse3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyJ9KSxhPWUuaW5uZXJIVE1MLGQucmVtb3ZlQ2hpbGQoZC5maXJzdENoaWxkKSxhfSxoLnRvRGF0YVVSTD1mdW5jdGlvbigpe3JldHVybiBhJiZhLmJ0b2E/ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsIitidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh0aGlzKSkpOnZvaWQgMH0saC5jbGVhcj1mdW5jdGlvbigpe2Zvcih2YXIgYSxiPXRoaXMubm9kZS5maXJzdENoaWxkO2I7KWE9Yi5uZXh0U2libGluZywiZGVmcyIhPWIudGFnTmFtZT9iLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik6aC5jbGVhci5jYWxsKHtub2RlOmJ9KSxiPWF9fSgpfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1lLnBzPWUucHN8fHt9O3JldHVybiBiW2FdP2JbYV0uc2xlZXA9MTAwOmJbYV09e3NsZWVwOjEwMH0sc2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgYyBpbiBiKWJbTV0oYykmJmMhPWEmJihiW2NdLnNsZWVwLS0sIWJbY10uc2xlZXAmJmRlbGV0ZSBiW2NdKX0pLGJbYV19ZnVuY3Rpb24gZihhLGIsYyxkKXtyZXR1cm4gbnVsbD09YSYmKGE9Yj1jPWQ9MCksbnVsbD09YiYmKGI9YS55LGM9YS53aWR0aCxkPWEuaGVpZ2h0LGE9YS54KSx7eDphLHk6Yix3aWR0aDpjLHc6YyxoZWlnaHQ6ZCxoOmQseDI6YStjLHkyOmIrZCxjeDphK2MvMixjeTpiK2QvMixyMTpQLm1pbihjLGQpLzIscjI6UC5tYXgoYyxkKS8yLHIwOlAuc3FydChjKmMrZCpkKS8yLHBhdGg6eShhLGIsYyxkKSx2YjpbYSxiLGMsZF0uam9pbigiICIpfX1mdW5jdGlvbiBnKCl7cmV0dXJuIHRoaXMuam9pbigiLCIpLnJlcGxhY2UoTiwiJDEiKX1mdW5jdGlvbiBoKGEpe3ZhciBiPUwoYSk7cmV0dXJuIGIudG9TdHJpbmc9ZyxifWZ1bmN0aW9uIGkoYSxiLGMsZCxlLGYsZyxoLGkpe3JldHVybiBudWxsPT1pP3AoYSxiLGMsZCxlLGYsZyxoKTprKGEsYixjLGQsZSxmLGcsaCxxKGEsYixjLGQsZSxmLGcsaCxpKSl9ZnVuY3Rpb24gaihjLGQpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuKygrYSkudG9GaXhlZCgzKX1yZXR1cm4gYS5fLmNhY2hlcihmdW5jdGlvbihhLGYsZyl7YSBpbnN0YW5jZW9mIGImJihhPWEuYXR0cigiZCIpKSxhPUcoYSk7Zm9yKHZhciBoLGosbCxtLG4sbz0iIixwPXt9LHE9MCxyPTAscz1hLmxlbmd0aDtzPnI7cisrKXtpZihsPWFbcl0sIk0iPT1sWzBdKWg9K2xbMV0saj0rbFsyXTtlbHNle2lmKG09aShoLGosbFsxXSxsWzJdLGxbM10sbFs0XSxsWzVdLGxbNl0pLHErbT5mKXtpZihkJiYhcC5zdGFydCl7aWYobj1pKGgsaixsWzFdLGxbMl0sbFszXSxsWzRdLGxbNV0sbFs2XSxmLXEpLG8rPVsiQyIrZShuLnN0YXJ0LngpLGUobi5zdGFydC55KSxlKG4ubS54KSxlKG4ubS55KSxlKG4ueCksZShuLnkpXSxnKXJldHVybiBvO3Auc3RhcnQ9byxvPVsiTSIrZShuLngpLGUobi55KSsiQyIrZShuLm4ueCksZShuLm4ueSksZShuLmVuZC54KSxlKG4uZW5kLnkpLGUobFs1XSksZShsWzZdKV0uam9pbigpLHErPW0saD0rbFs1XSxqPStsWzZdO2NvbnRpbnVlfWlmKCFjJiYhZClyZXR1cm4gbj1pKGgsaixsWzFdLGxbMl0sbFszXSxsWzRdLGxbNV0sbFs2XSxmLXEpfXErPW0saD0rbFs1XSxqPStsWzZdfW8rPWwuc2hpZnQoKStsfXJldHVybiBwLmVuZD1vLG49Yz9xOmQ/cDprKGgsaixsWzBdLGxbMV0sbFsyXSxsWzNdLGxbNF0sbFs1XSwxKX0sbnVsbCxhLl8uY2xvbmUpfWZ1bmN0aW9uIGsoYSxiLGMsZCxlLGYsZyxoLGkpe3ZhciBqPTEtaSxrPVQoaiwzKSxsPVQoaiwyKSxtPWkqaSxuPW0qaSxvPWsqYSszKmwqaSpjKzMqaippKmkqZStuKmcscD1rKmIrMypsKmkqZCszKmoqaSppKmYrbipoLHE9YSsyKmkqKGMtYSkrbSooZS0yKmMrYSkscj1iKzIqaSooZC1iKSttKihmLTIqZCtiKSxzPWMrMippKihlLWMpK20qKGctMiplK2MpLHQ9ZCsyKmkqKGYtZCkrbSooaC0yKmYrZCksdT1qKmEraSpjLHY9aipiK2kqZCx3PWoqZStpKmcseD1qKmYraSpoLHk9OTAtMTgwKlAuYXRhbjIocS1zLHItdCkvUTtyZXR1cm57eDpvLHk6cCxtOnt4OnEseTpyfSxuOnt4OnMseTp0fSxzdGFydDp7eDp1LHk6dn0sZW5kOnt4OncseTp4fSxhbHBoYTp5fX1mdW5jdGlvbiBsKGIsYyxkLGUsZyxoLGksail7YS5pcyhiLCJhcnJheSIpfHwoYj1bYixjLGQsZSxnLGgsaSxqXSk7dmFyIGs9Ri5hcHBseShudWxsLGIpO3JldHVybiBmKGsubWluLngsay5taW4ueSxrLm1heC54LWsubWluLngsay5tYXgueS1rLm1pbi55KX1mdW5jdGlvbiBtKGEsYixjKXtyZXR1cm4gYj49YS54JiZiPD1hLngrYS53aWR0aCYmYz49YS55JiZjPD1hLnkrYS5oZWlnaHR9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBhPWYoYSksYj1mKGIpLG0oYixhLngsYS55KXx8bShiLGEueDIsYS55KXx8bShiLGEueCxhLnkyKXx8bShiLGEueDIsYS55Mil8fG0oYSxiLngsYi55KXx8bShhLGIueDIsYi55KXx8bShhLGIueCxiLnkyKXx8bShhLGIueDIsYi55Mil8fChhLng8Yi54MiYmYS54PmIueHx8Yi54PGEueDImJmIueD5hLngpJiYoYS55PGIueTImJmEueT5iLnl8fGIueTxhLnkyJiZiLnk+YS55KX1mdW5jdGlvbiBvKGEsYixjLGQsZSl7dmFyIGY9LTMqYis5KmMtOSpkKzMqZSxnPWEqZis2KmItMTIqYys2KmQ7cmV0dXJuIGEqZy0zKmIrMypjfWZ1bmN0aW9uIHAoYSxiLGMsZCxlLGYsZyxoLGkpe251bGw9PWkmJihpPTEpLGk9aT4xPzE6MD5pPzA6aTtmb3IodmFyIGo9aS8yLGs9MTIsbD1bLS4xMjUyLC4xMjUyLC0uMzY3OCwuMzY3OCwtLjU4NzMsLjU4NzMsLS43Njk5LC43Njk5LC0uOTA0MSwuOTA0MSwtLjk4MTYsLjk4MTZdLG09Wy4yNDkxLC4yNDkxLC4yMzM1LC4yMzM1LC4yMDMyLC4yMDMyLC4xNjAxLC4xNjAxLC4xMDY5LC4xMDY5LC4wNDcyLC4wNDcyXSxuPTAscD0wO2s+cDtwKyspe3ZhciBxPWoqbFtwXStqLHI9byhxLGEsYyxlLGcpLHM9byhxLGIsZCxmLGgpLHQ9cipyK3MqcztuKz1tW3BdKlAuc3FydCh0KX1yZXR1cm4gaipufWZ1bmN0aW9uIHEoYSxiLGMsZCxlLGYsZyxoLGkpe2lmKCEoMD5pfHxwKGEsYixjLGQsZSxmLGcsaCk8aSkpe3ZhciBqLGs9MSxsPWsvMixtPWstbCxuPS4wMTtmb3Ioaj1wKGEsYixjLGQsZSxmLGcsaCxtKTtVKGotaSk+bjspbC89MixtKz0oaT5qPzE6LTEpKmwsaj1wKGEsYixjLGQsZSxmLGcsaCxtKTtyZXR1cm4gbX19ZnVuY3Rpb24gcihhLGIsYyxkLGUsZixnLGgpe2lmKCEoUyhhLGMpPFIoZSxnKXx8UihhLGMpPlMoZSxnKXx8UyhiLGQpPFIoZixoKXx8UihiLGQpPlMoZixoKSkpe3ZhciBpPShhKmQtYipjKSooZS1nKS0oYS1jKSooZSpoLWYqZyksaj0oYSpkLWIqYykqKGYtaCktKGItZCkqKGUqaC1mKmcpLGs9KGEtYykqKGYtaCktKGItZCkqKGUtZyk7aWYoayl7dmFyIGw9aS9rLG09ai9rLG49K2wudG9GaXhlZCgyKSxvPSttLnRvRml4ZWQoMik7aWYoIShuPCtSKGEsYykudG9GaXhlZCgyKXx8bj4rUyhhLGMpLnRvRml4ZWQoMil8fG48K1IoZSxnKS50b0ZpeGVkKDIpfHxuPitTKGUsZykudG9GaXhlZCgyKXx8bzwrUihiLGQpLnRvRml4ZWQoMil8fG8+K1MoYixkKS50b0ZpeGVkKDIpfHxvPCtSKGYsaCkudG9GaXhlZCgyKXx8bz4rUyhmLGgpLnRvRml4ZWQoMikpKXJldHVybnt4OmwseTptfX19fWZ1bmN0aW9uIHMoYSxiLGMpe3ZhciBkPWwoYSksZT1sKGIpO2lmKCFuKGQsZSkpcmV0dXJuIGM/MDpbXTtmb3IodmFyIGY9cC5hcHBseSgwLGEpLGc9cC5hcHBseSgwLGIpLGg9fn4oZi84KSxpPX5+KGcvOCksaj1bXSxtPVtdLG89e30scT1jPzA6W10scz0wO2grMT5zO3MrKyl7dmFyIHQ9ay5hcHBseSgwLGEuY29uY2F0KHMvaCkpO2oucHVzaCh7eDp0LngseTp0LnksdDpzL2h9KX1mb3Iocz0wO2krMT5zO3MrKyl0PWsuYXBwbHkoMCxiLmNvbmNhdChzL2kpKSxtLnB1c2goe3g6dC54LHk6dC55LHQ6cy9pfSk7Zm9yKHM9MDtoPnM7cysrKWZvcih2YXIgdT0wO2k+dTt1Kyspe3ZhciB2PWpbc10sdz1qW3MrMV0seD1tW3VdLHk9bVt1KzFdLHo9VSh3Lngtdi54KTwuMDAxPyJ5IjoieCIsQT1VKHkueC14LngpPC4wMDE/InkiOiJ4IixCPXIodi54LHYueSx3Lngsdy55LHgueCx4LnkseS54LHkueSk7aWYoQil7aWYob1tCLngudG9GaXhlZCg0KV09PUIueS50b0ZpeGVkKDQpKWNvbnRpbnVlO29bQi54LnRvRml4ZWQoNCldPUIueS50b0ZpeGVkKDQpO3ZhciBDPXYudCtVKChCW3pdLXZbel0pLyh3W3pdLXZbel0pKSoody50LXYudCksRD14LnQrVSgoQltBXS14W0FdKS8oeVtBXS14W0FdKSkqKHkudC14LnQpO0M+PTAmJjE+PUMmJkQ+PTAmJjE+PUQmJihjP3ErKzpxLnB1c2goe3g6Qi54LHk6Qi55LHQxOkMsdDI6RH0pKX19cmV0dXJuIHF9ZnVuY3Rpb24gdChhLGIpe3JldHVybiB2KGEsYil9ZnVuY3Rpb24gdShhLGIpe3JldHVybiB2KGEsYiwxKX1mdW5jdGlvbiB2KGEsYixjKXthPUcoYSksYj1HKGIpO2Zvcih2YXIgZCxlLGYsZyxoLGksaixrLGwsbSxuPWM/MDpbXSxvPTAscD1hLmxlbmd0aDtwPm87bysrKXt2YXIgcT1hW29dO2lmKCJNIj09cVswXSlkPWg9cVsxXSxlPWk9cVsyXTtlbHNleyJDIj09cVswXT8obD1bZCxlXS5jb25jYXQocS5zbGljZSgxKSksZD1sWzZdLGU9bFs3XSk6KGw9W2QsZSxkLGUsaCxpLGgsaV0sZD1oLGU9aSk7Zm9yKHZhciByPTAsdD1iLmxlbmd0aDt0PnI7cisrKXt2YXIgdT1iW3JdO2lmKCJNIj09dVswXSlmPWo9dVsxXSxnPWs9dVsyXTtlbHNleyJDIj09dVswXT8obT1bZixnXS5jb25jYXQodS5zbGljZSgxKSksZj1tWzZdLGc9bVs3XSk6KG09W2YsZyxmLGcsaixrLGosa10sZj1qLGc9ayk7dmFyIHY9cyhsLG0sYyk7aWYoYyluKz12O2Vsc2V7Zm9yKHZhciB3PTAseD12Lmxlbmd0aDt4Pnc7dysrKXZbd10uc2VnbWVudDE9byx2W3ddLnNlZ21lbnQyPXIsdlt3XS5iZXoxPWwsdlt3XS5iZXoyPW07bj1uLmNvbmNhdCh2KX19fX19cmV0dXJuIG59ZnVuY3Rpb24gdyhhLGIsYyl7dmFyIGQ9eChhKTtyZXR1cm4gbShkLGIsYykmJnYoYSxbWyJNIixiLGNdLFsiSCIsZC54MisxMF1dLDEpJTI9PTF9ZnVuY3Rpb24geChhKXt2YXIgYj1lKGEpO2lmKGIuYmJveClyZXR1cm4gTChiLmJib3gpO2lmKCFhKXJldHVybiBmKCk7YT1HKGEpO2Zvcih2YXIgYyxkPTAsZz0wLGg9W10saT1bXSxqPTAsaz1hLmxlbmd0aDtrPmo7aisrKWlmKGM9YVtqXSwiTSI9PWNbMF0pZD1jWzFdLGc9Y1syXSxoLnB1c2goZCksaS5wdXNoKGcpO2Vsc2V7dmFyIGw9RihkLGcsY1sxXSxjWzJdLGNbM10sY1s0XSxjWzVdLGNbNl0pO2g9aC5jb25jYXQobC5taW4ueCxsLm1heC54KSxpPWkuY29uY2F0KGwubWluLnksbC5tYXgueSksZD1jWzVdLGc9Y1s2XX12YXIgbT1SLmFwcGx5KDAsaCksbj1SLmFwcGx5KDAsaSksbz1TLmFwcGx5KDAsaCkscD1TLmFwcGx5KDAsaSkscT1mKG0sbixvLW0scC1uKTtyZXR1cm4gYi5iYm94PUwocSkscX1mdW5jdGlvbiB5KGEsYixjLGQsZSl7aWYoZSlyZXR1cm5bWyJNIiwrYSsgK2UsYl0sWyJsIixjLTIqZSwwXSxbImEiLGUsZSwwLDAsMSxlLGVdLFsibCIsMCxkLTIqZV0sWyJhIixlLGUsMCwwLDEsLWUsZV0sWyJsIiwyKmUtYywwXSxbImEiLGUsZSwwLDAsMSwtZSwtZV0sWyJsIiwwLDIqZS1kXSxbImEiLGUsZSwwLDAsMSxlLC1lXSxbInoiXV07dmFyIGY9W1siTSIsYSxiXSxbImwiLGMsMF0sWyJsIiwwLGRdLFsibCIsLWMsMF0sWyJ6Il1dO3JldHVybiBmLnRvU3RyaW5nPWcsZn1mdW5jdGlvbiB6KGEsYixjLGQsZSl7aWYobnVsbD09ZSYmbnVsbD09ZCYmKGQ9YyksYT0rYSxiPStiLGM9K2MsZD0rZCxudWxsIT1lKXZhciBmPU1hdGguUEkvMTgwLGg9YStjKk1hdGguY29zKC1kKmYpLGk9YStjKk1hdGguY29zKC1lKmYpLGo9YitjKk1hdGguc2luKC1kKmYpLGs9YitjKk1hdGguc2luKC1lKmYpLGw9W1siTSIsaCxqXSxbIkEiLGMsYywwLCsoZS1kPjE4MCksMCxpLGtdXTtlbHNlIGw9W1siTSIsYSxiXSxbIm0iLDAsLWRdLFsiYSIsYyxkLDAsMSwxLDAsMipkXSxbImEiLGMsZCwwLDEsMSwwLC0yKmRdLFsieiJdXTtyZXR1cm4gbC50b1N0cmluZz1nLGx9ZnVuY3Rpb24gQShiKXt2YXIgYz1lKGIpLGQ9U3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZTtpZihjLnJlbClyZXR1cm4gaChjLnJlbCk7YS5pcyhiLCJhcnJheSIpJiZhLmlzKGImJmJbMF0sImFycmF5Iil8fChiPWEucGFyc2VQYXRoU3RyaW5nKGIpKTt2YXIgZj1bXSxpPTAsaj0wLGs9MCxsPTAsbT0wOyJNIj09YlswXVswXSYmKGk9YlswXVsxXSxqPWJbMF1bMl0saz1pLGw9aixtKyssZi5wdXNoKFsiTSIsaSxqXSkpO2Zvcih2YXIgbj1tLG89Yi5sZW5ndGg7bz5uO24rKyl7dmFyIHA9ZltuXT1bXSxxPWJbbl07aWYocVswXSE9ZC5jYWxsKHFbMF0pKXN3aXRjaChwWzBdPWQuY2FsbChxWzBdKSxwWzBdKXtjYXNlImEiOnBbMV09cVsxXSxwWzJdPXFbMl0scFszXT1xWzNdLHBbNF09cVs0XSxwWzVdPXFbNV0scFs2XT0rKHFbNl0taSkudG9GaXhlZCgzKSxwWzddPSsocVs3XS1qKS50b0ZpeGVkKDMpO2JyZWFrO2Nhc2UidiI6cFsxXT0rKHFbMV0taikudG9GaXhlZCgzKTticmVhaztjYXNlIm0iOms9cVsxXSxsPXFbMl07ZGVmYXVsdDpmb3IodmFyIHI9MSxzPXEubGVuZ3RoO3M+cjtyKyspcFtyXT0rKHFbcl0tKHIlMj9pOmopKS50b0ZpeGVkKDMpfWVsc2V7cD1mW25dPVtdLCJtIj09cVswXSYmKGs9cVsxXStpLGw9cVsyXStqKTtmb3IodmFyIHQ9MCx1PXEubGVuZ3RoO3U+dDt0KyspZltuXVt0XT1xW3RdfXZhciB2PWZbbl0ubGVuZ3RoO3N3aXRjaChmW25dWzBdKXtjYXNlInoiOmk9ayxqPWw7YnJlYWs7Y2FzZSJoIjppKz0rZltuXVt2LTFdO2JyZWFrO2Nhc2UidiI6ais9K2Zbbl1bdi0xXTticmVhaztkZWZhdWx0OmkrPStmW25dW3YtMl0sais9K2Zbbl1bdi0xXX19cmV0dXJuIGYudG9TdHJpbmc9ZyxjLnJlbD1oKGYpLGZ9ZnVuY3Rpb24gQihiKXt2YXIgYz1lKGIpO2lmKGMuYWJzKXJldHVybiBoKGMuYWJzKTtpZihLKGIsImFycmF5IikmJksoYiYmYlswXSwiYXJyYXkiKXx8KGI9YS5wYXJzZVBhdGhTdHJpbmcoYikpLCFifHwhYi5sZW5ndGgpcmV0dXJuW1siTSIsMCwwXV07dmFyIGQsZj1bXSxpPTAsaj0wLGs9MCxsPTAsbT0wOyJNIj09YlswXVswXSYmKGk9K2JbMF1bMV0saj0rYlswXVsyXSxrPWksbD1qLG0rKyxmWzBdPVsiTSIsaSxqXSk7Zm9yKHZhciBuLG8scD0zPT1iLmxlbmd0aCYmIk0iPT1iWzBdWzBdJiYiUiI9PWJbMV1bMF0udG9VcHBlckNhc2UoKSYmIloiPT1iWzJdWzBdLnRvVXBwZXJDYXNlKCkscT1tLHI9Yi5sZW5ndGg7cj5xO3ErKyl7aWYoZi5wdXNoKG49W10pLG89YltxXSxkPW9bMF0sZCE9ZC50b1VwcGVyQ2FzZSgpKXN3aXRjaChuWzBdPWQudG9VcHBlckNhc2UoKSxuWzBdKXtjYXNlIkEiOm5bMV09b1sxXSxuWzJdPW9bMl0sblszXT1vWzNdLG5bNF09b1s0XSxuWzVdPW9bNV0sbls2XT0rb1s2XStpLG5bN109K29bN10rajticmVhaztjYXNlIlYiOm5bMV09K29bMV0rajticmVhaztjYXNlIkgiOm5bMV09K29bMV0raTticmVhaztjYXNlIlIiOmZvcih2YXIgcz1baSxqXS5jb25jYXQoby5zbGljZSgxKSksdD0yLHU9cy5sZW5ndGg7dT50O3QrKylzW3RdPStzW3RdK2ksc1srK3RdPStzW3RdK2o7Zi5wb3AoKSxmPWYuY29uY2F0KEkocyxwKSk7YnJlYWs7Y2FzZSJPIjpmLnBvcCgpLHM9eihpLGosb1sxXSxvWzJdKSxzLnB1c2goc1swXSksZj1mLmNvbmNhdChzKTticmVhaztjYXNlIlUiOmYucG9wKCksZj1mLmNvbmNhdCh6KGksaixvWzFdLG9bMl0sb1szXSkpLG49WyJVIl0uY29uY2F0KGZbZi5sZW5ndGgtMV0uc2xpY2UoLTIpKTticmVhaztjYXNlIk0iOms9K29bMV0raSxsPStvWzJdK2o7ZGVmYXVsdDpmb3IodD0xLHU9by5sZW5ndGg7dT50O3QrKyluW3RdPStvW3RdKyh0JTI/aTpqKX1lbHNlIGlmKCJSIj09ZClzPVtpLGpdLmNvbmNhdChvLnNsaWNlKDEpKSxmLnBvcCgpLGY9Zi5jb25jYXQoSShzLHApKSxuPVsiUiJdLmNvbmNhdChvLnNsaWNlKC0yKSk7ZWxzZSBpZigiTyI9PWQpZi5wb3AoKSxzPXooaSxqLG9bMV0sb1syXSkscy5wdXNoKHNbMF0pLGY9Zi5jb25jYXQocyk7ZWxzZSBpZigiVSI9PWQpZi5wb3AoKSxmPWYuY29uY2F0KHooaSxqLG9bMV0sb1syXSxvWzNdKSksbj1bIlUiXS5jb25jYXQoZltmLmxlbmd0aC0xXS5zbGljZSgtMikpO2Vsc2UgZm9yKHZhciB2PTAsdz1vLmxlbmd0aDt3PnY7disrKW5bdl09b1t2XTtpZihkPWQudG9VcHBlckNhc2UoKSwiTyIhPWQpc3dpdGNoKG5bMF0pe2Nhc2UiWiI6aT0rayxqPStsO2JyZWFrO2Nhc2UiSCI6aT1uWzFdO2JyZWFrO2Nhc2UiViI6aj1uWzFdO2JyZWFrO2Nhc2UiTSI6az1uW24ubGVuZ3RoLTJdLGw9bltuLmxlbmd0aC0xXTtkZWZhdWx0Omk9bltuLmxlbmd0aC0yXSxqPW5bbi5sZW5ndGgtMV19fXJldHVybiBmLnRvU3RyaW5nPWcsYy5hYnM9aChmKSxmfWZ1bmN0aW9uIEMoYSxiLGMsZCl7cmV0dXJuW2EsYixjLGQsYyxkXX1mdW5jdGlvbiBEKGEsYixjLGQsZSxmKXt2YXIgZz0xLzMsaD0yLzM7cmV0dXJuW2cqYStoKmMsZypiK2gqZCxnKmUraCpjLGcqZitoKmQsZSxmXX1mdW5jdGlvbiBFKGIsYyxkLGUsZixnLGgsaSxqLGspe3ZhciBsLG09MTIwKlEvMTgwLG49US8xODAqKCtmfHwwKSxvPVtdLHA9YS5fLmNhY2hlcihmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSpQLmNvcyhjKS1iKlAuc2luKGMpLGU9YSpQLnNpbihjKStiKlAuY29zKGMpO3JldHVybnt4OmQseTplfX0pO2lmKCFkfHwhZSlyZXR1cm5bYixjLGksaixpLGpdO2lmKGspeT1rWzBdLHo9a1sxXSx3PWtbMl0seD1rWzNdO2Vsc2V7bD1wKGIsYywtbiksYj1sLngsYz1sLnksbD1wKGksaiwtbiksaT1sLngsaj1sLnk7dmFyIHE9KFAuY29zKFEvMTgwKmYpLFAuc2luKFEvMTgwKmYpLChiLWkpLzIpLHI9KGMtaikvMixzPXEqcS8oZCpkKStyKnIvKGUqZSk7cz4xJiYocz1QLnNxcnQocyksZD1zKmQsZT1zKmUpO3ZhciB0PWQqZCx1PWUqZSx2PShnPT1oPy0xOjEpKlAuc3FydChVKCh0KnUtdCpyKnItdSpxKnEpLyh0KnIqcit1KnEqcSkpKSx3PXYqZCpyL2UrKGIraSkvMix4PXYqLWUqcS9kKyhjK2opLzIseT1QLmFzaW4oKChjLXgpL2UpLnRvRml4ZWQoOSkpLHo9UC5hc2luKCgoai14KS9lKS50b0ZpeGVkKDkpKTt5PXc+Yj9RLXk6eSx6PXc+aT9RLXo6eiwwPnkmJih5PTIqUSt5KSwwPnomJih6PTIqUSt6KSxoJiZ5PnomJih5LT0yKlEpLCFoJiZ6PnkmJih6LT0yKlEpfXZhciBBPXoteTtpZihVKEEpPm0pe3ZhciBCPXosQz1pLEQ9ajt6PXkrbSooaCYmej55PzE6LTEpLGk9dytkKlAuY29zKHopLGo9eCtlKlAuc2luKHopLG89RShpLGosZCxlLGYsMCxoLEMsRCxbeixCLHcseF0pfUE9ei15O3ZhciBGPVAuY29zKHkpLEc9UC5zaW4oeSksSD1QLmNvcyh6KSxJPVAuc2luKHopLEo9UC50YW4oQS80KSxLPTQvMypkKkosTD00LzMqZSpKLE09W2IsY10sTj1bYitLKkcsYy1MKkZdLE89W2krSypJLGotTCpIXSxSPVtpLGpdO2lmKE5bMF09MipNWzBdLU5bMF0sTlsxXT0yKk1bMV0tTlsxXSxrKXJldHVybltOLE8sUl0uY29uY2F0KG8pO289W04sTyxSXS5jb25jYXQobykuam9pbigpLnNwbGl0KCIsIik7Zm9yKHZhciBTPVtdLFQ9MCxWPW8ubGVuZ3RoO1Y+VDtUKyspU1tUXT1UJTI/cChvW1QtMV0sb1tUXSxuKS55OnAob1tUXSxvW1QrMV0sbikueDtyZXR1cm4gU31mdW5jdGlvbiBGKGEsYixjLGQsZSxmLGcsaCl7Zm9yKHZhciBpLGosayxsLG0sbixvLHAscT1bXSxyPVtbXSxbXV0scz0wOzI+czsrK3MpaWYoMD09cz8oaj02KmEtMTIqYys2KmUsaT0tMyphKzkqYy05KmUrMypnLGs9MypjLTMqYSk6KGo9NipiLTEyKmQrNipmLGk9LTMqYis5KmQtOSpmKzMqaCxrPTMqZC0zKmIpLFUoaSk8MWUtMTIpe2lmKFUoaik8MWUtMTIpY29udGludWU7bD0tay9qLGw+MCYmMT5sJiZxLnB1c2gobCl9ZWxzZSBvPWoqai00KmsqaSxwPVAuc3FydChvKSwwPm98fChtPSgtaitwKS8oMippKSxtPjAmJjE+bSYmcS5wdXNoKG0pLG49KC1qLXApLygyKmkpLG4+MCYmMT5uJiZxLnB1c2gobikpO2Zvcih2YXIgdCx1PXEubGVuZ3RoLHY9dTt1LS07KWw9cVt1XSx0PTEtbCxyWzBdW3VdPXQqdCp0KmErMyp0KnQqbCpjKzMqdCpsKmwqZStsKmwqbCpnLHJbMV1bdV09dCp0KnQqYiszKnQqdCpsKmQrMyp0KmwqbCpmK2wqbCpsKmg7cmV0dXJuIHJbMF1bdl09YSxyWzFdW3ZdPWIsclswXVt2KzFdPWcsclsxXVt2KzFdPWgsclswXS5sZW5ndGg9clsxXS5sZW5ndGg9disyLHttaW46e3g6Ui5hcHBseSgwLHJbMF0pLHk6Ui5hcHBseSgwLHJbMV0pfSxtYXg6e3g6Uy5hcHBseSgwLHJbMF0pLHk6Uy5hcHBseSgwLHJbMV0pfX19ZnVuY3Rpb24gRyhhLGIpe3ZhciBjPSFiJiZlKGEpO2lmKCFiJiZjLmN1cnZlKXJldHVybiBoKGMuY3VydmUpO2Zvcih2YXIgZD1CKGEpLGY9YiYmQihiKSxnPXt4OjAseTowLGJ4OjAsYnk6MCxYOjAsWTowLHF4Om51bGwscXk6bnVsbH0saT17eDowLHk6MCxieDowLGJ5OjAsWDowLFk6MCxxeDpudWxsLHF5Om51bGx9LGo9KGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKCFhKXJldHVyblsiQyIsYi54LGIueSxiLngsYi55LGIueCxiLnldO3N3aXRjaCghKGFbMF1pbntUOjEsUToxfSkmJihiLnF4PWIucXk9bnVsbCksYVswXSl7Y2FzZSJNIjpiLlg9YVsxXSxiLlk9YVsyXTticmVhaztjYXNlIkEiOmE9WyJDIl0uY29uY2F0KEUuYXBwbHkoMCxbYi54LGIueV0uY29uY2F0KGEuc2xpY2UoMSkpKSk7YnJlYWs7Y2FzZSJTIjoiQyI9PWN8fCJTIj09Yz8oZD0yKmIueC1iLmJ4LGU9MipiLnktYi5ieSk6KGQ9Yi54LGU9Yi55KSxhPVsiQyIsZCxlXS5jb25jYXQoYS5zbGljZSgxKSk7YnJlYWs7Y2FzZSJUIjoiUSI9PWN8fCJUIj09Yz8oYi5xeD0yKmIueC1iLnF4LGIucXk9MipiLnktYi5xeSk6KGIucXg9Yi54LGIucXk9Yi55KSxhPVsiQyJdLmNvbmNhdChEKGIueCxiLnksYi5xeCxiLnF5LGFbMV0sYVsyXSkpO2JyZWFrO2Nhc2UiUSI6Yi5xeD1hWzFdLGIucXk9YVsyXSxhPVsiQyJdLmNvbmNhdChEKGIueCxiLnksYVsxXSxhWzJdLGFbM10sYVs0XSkpO2JyZWFrO2Nhc2UiTCI6YT1bIkMiXS5jb25jYXQoQyhiLngsYi55LGFbMV0sYVsyXSkpO2JyZWFrO2Nhc2UiSCI6YT1bIkMiXS5jb25jYXQoQyhiLngsYi55LGFbMV0sYi55KSk7YnJlYWs7Y2FzZSJWIjphPVsiQyJdLmNvbmNhdChDKGIueCxiLnksYi54LGFbMV0pKTticmVhaztjYXNlIloiOmE9WyJDIl0uY29uY2F0KEMoYi54LGIueSxiLlgsYi5ZKSl9cmV0dXJuIGF9KSxrPWZ1bmN0aW9uKGEsYil7aWYoYVtiXS5sZW5ndGg+Nyl7YVtiXS5zaGlmdCgpO2Zvcih2YXIgYz1hW2JdO2MubGVuZ3RoOyltW2JdPSJBIixmJiYobltiXT0iQSIpLGEuc3BsaWNlKGIrKywwLFsiQyJdLmNvbmNhdChjLnNwbGljZSgwLDYpKSk7YS5zcGxpY2UoYiwxKSxyPVMoZC5sZW5ndGgsZiYmZi5sZW5ndGh8fDApfX0sbD1mdW5jdGlvbihhLGIsYyxlLGcpe2EmJmImJiJNIj09YVtnXVswXSYmIk0iIT1iW2ddWzBdJiYoYi5zcGxpY2UoZywwLFsiTSIsZS54LGUueV0pLGMuYng9MCxjLmJ5PTAsYy54PWFbZ11bMV0sYy55PWFbZ11bMl0scj1TKGQubGVuZ3RoLGYmJmYubGVuZ3RofHwwKSl9LG09W10sbj1bXSxvPSIiLHA9IiIscT0wLHI9UyhkLmxlbmd0aCxmJiZmLmxlbmd0aHx8MCk7cj5xO3ErKyl7ZFtxXSYmKG89ZFtxXVswXSksIkMiIT1vJiYobVtxXT1vLHEmJihwPW1bcS0xXSkpLGRbcV09aihkW3FdLGcscCksIkEiIT1tW3FdJiYiQyI9PW8mJihtW3FdPSJDIiksayhkLHEpLGYmJihmW3FdJiYobz1mW3FdWzBdKSwiQyIhPW8mJihuW3FdPW8scSYmKHA9bltxLTFdKSksZltxXT1qKGZbcV0saSxwKSwiQSIhPW5bcV0mJiJDIj09byYmKG5bcV09IkMiKSxrKGYscSkpLGwoZCxmLGcsaSxxKSxsKGYsZCxpLGcscSk7dmFyIHM9ZFtxXSx0PWYmJmZbcV0sdT1zLmxlbmd0aCx2PWYmJnQubGVuZ3RoO2cueD1zW3UtMl0sZy55PXNbdS0xXSxnLmJ4PU8oc1t1LTRdKXx8Zy54LGcuYnk9TyhzW3UtM10pfHxnLnksaS5ieD1mJiYoTyh0W3YtNF0pfHxpLngpLGkuYnk9ZiYmKE8odFt2LTNdKXx8aS55KSxpLng9ZiYmdFt2LTJdLGkueT1mJiZ0W3YtMV19cmV0dXJuIGZ8fChjLmN1cnZlPWgoZCkpLGY/W2QsZl06ZH1mdW5jdGlvbiBIKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGMsZCxlLGYsZyxoLGk7Zm9yKGE9RyhhKSxlPTAsZz1hLmxlbmd0aDtnPmU7ZSsrKWZvcihpPWFbZV0sZj0xLGg9aS5sZW5ndGg7aD5mO2YrPTIpYz1iLngoaVtmXSxpW2YrMV0pLGQ9Yi55KGlbZl0saVtmKzFdKSxpW2ZdPWMsaVtmKzFdPWQ7cmV0dXJuIGF9ZnVuY3Rpb24gSShhLGIpe2Zvcih2YXIgYz1bXSxkPTAsZT1hLmxlbmd0aDtlLTIqIWI+ZDtkKz0yKXt2YXIgZj1be3g6K2FbZC0yXSx5OithW2QtMV19LHt4OithW2RdLHk6K2FbZCsxXX0se3g6K2FbZCsyXSx5OithW2QrM119LHt4OithW2QrNF0seTorYVtkKzVdfV07Yj9kP2UtND09ZD9mWzNdPXt4OithWzBdLHk6K2FbMV19OmUtMj09ZCYmKGZbMl09e3g6K2FbMF0seTorYVsxXX0sZlszXT17eDorYVsyXSx5OithWzNdfSk6ZlswXT17eDorYVtlLTJdLHk6K2FbZS0xXX06ZS00PT1kP2ZbM109ZlsyXTpkfHwoZlswXT17eDorYVtkXSx5OithW2QrMV19KSxjLnB1c2goWyJDIiwoLWZbMF0ueCs2KmZbMV0ueCtmWzJdLngpLzYsKC1mWzBdLnkrNipmWzFdLnkrZlsyXS55KS82LChmWzFdLngrNipmWzJdLngtZlszXS54KS82LChmWzFdLnkrNipmWzJdLnktZlszXS55KS82LGZbMl0ueCxmWzJdLnldKX1yZXR1cm4gY312YXIgSj1iLnByb3RvdHlwZSxLPWEuaXMsTD1hLl8uY2xvbmUsTT0iaGFzT3duUHJvcGVydHkiLE49Lyw/KFthLXpdKSw/L2dpLE89cGFyc2VGbG9hdCxQPU1hdGgsUT1QLlBJLFI9UC5taW4sUz1QLm1heCxUPVAucG93LFU9UC5hYnMsVj1qKDEpLFc9aigpLFg9aigwLDEpLFk9YS5fdW5pdDJweCxaPXtwYXRoOmZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHIoInBhdGgiKX0sY2lyY2xlOmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHooYi5jeCxiLmN5LGIucil9LGVsbGlwc2U6ZnVuY3Rpb24oYSl7dmFyIGI9WShhKTtyZXR1cm4geihiLmN4fHwwLGIuY3l8fDAsYi5yeCxiLnJ5KTsKfSxyZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHkoYi54fHwwLGIueXx8MCxiLndpZHRoLGIuaGVpZ2h0LGIucngsYi5yeSl9LGltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPVkoYSk7cmV0dXJuIHkoYi54fHwwLGIueXx8MCxiLndpZHRoLGIuaGVpZ2h0KX0sbGluZTpmdW5jdGlvbihhKXtyZXR1cm4iTSIrW2EuYXR0cigieDEiKXx8MCxhLmF0dHIoInkxIil8fDAsYS5hdHRyKCJ4MiIpLGEuYXR0cigieTIiKV19LHBvbHlsaW5lOmZ1bmN0aW9uKGEpe3JldHVybiJNIithLmF0dHIoInBvaW50cyIpfSxwb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiJNIithLmF0dHIoInBvaW50cyIpKyJ6In0sZGVmbHQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlLmdldEJCb3goKTtyZXR1cm4geShiLngsYi55LGIud2lkdGgsYi5oZWlnaHQpfX07YS5wYXRoPWUsYS5wYXRoLmdldFRvdGFsTGVuZ3RoPVYsYS5wYXRoLmdldFBvaW50QXRMZW5ndGg9VyxhLnBhdGguZ2V0U3VicGF0aD1mdW5jdGlvbihhLGIsYyl7aWYodGhpcy5nZXRUb3RhbExlbmd0aChhKS1jPDFlLTYpcmV0dXJuIFgoYSxiKS5lbmQ7dmFyIGQ9WChhLGMsMSk7cmV0dXJuIGI/WChkLGIpLmVuZDpkfSxKLmdldFRvdGFsTGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZS5nZXRUb3RhbExlbmd0aD90aGlzLm5vZGUuZ2V0VG90YWxMZW5ndGgoKTp2b2lkIDB9LEouZ2V0UG9pbnRBdExlbmd0aD1mdW5jdGlvbihhKXtyZXR1cm4gVyh0aGlzLmF0dHIoImQiKSxhKX0sSi5nZXRTdWJwYXRoPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEucGF0aC5nZXRTdWJwYXRoKHRoaXMuYXR0cigiZCIpLGIsYyl9LGEuXy5ib3g9ZixhLnBhdGguZmluZERvdHNBdFNlZ21lbnQ9ayxhLnBhdGguYmV6aWVyQkJveD1sLGEucGF0aC5pc1BvaW50SW5zaWRlQkJveD1tLGEuY2xvc2VzdD1mdW5jdGlvbihiLGMsZCxlKXtmb3IodmFyIGc9MTAwLGg9ZihiLWcvMixjLWcvMixnLGcpLGk9W10saj1kWzBdLmhhc093blByb3BlcnR5KCJ4Iik/ZnVuY3Rpb24oYSl7cmV0dXJue3g6ZFthXS54LHk6ZFthXS55fX06ZnVuY3Rpb24oYSl7cmV0dXJue3g6ZFthXSx5OmVbYV19fSxrPTA7MWU2Pj1nJiYhazspe2Zvcih2YXIgbD0wLG49ZC5sZW5ndGg7bj5sO2wrKyl7dmFyIG89aihsKTtpZihtKGgsby54LG8ueSkpe2srKyxpLnB1c2gobyk7YnJlYWt9fWt8fChnKj0yLGg9ZihiLWcvMixjLWcvMixnLGcpKX1pZigxZTYhPWcpe3ZhciBwLHE9MS8wO2ZvcihsPTAsbj1pLmxlbmd0aDtuPmw7bCsrKXt2YXIgcj1hLmxlbihiLGMsaVtsXS54LGlbbF0ueSk7cT5yJiYocT1yLGlbbF0ubGVuPXIscD1pW2xdKX1yZXR1cm4gcH19LGEucGF0aC5pc0JCb3hJbnRlcnNlY3Q9bixhLnBhdGguaW50ZXJzZWN0aW9uPXQsYS5wYXRoLmludGVyc2VjdGlvbk51bWJlcj11LGEucGF0aC5pc1BvaW50SW5zaWRlPXcsYS5wYXRoLmdldEJCb3g9eCxhLnBhdGguZ2V0PVosYS5wYXRoLnRvUmVsYXRpdmU9QSxhLnBhdGgudG9BYnNvbHV0ZT1CLGEucGF0aC50b0N1YmljPUcsYS5wYXRoLm1hcD1ILGEucGF0aC50b1N0cmluZz1nLGEucGF0aC5jbG9uZT1ofSksZC5wbHVnaW4oZnVuY3Rpb24oYSxkLGUsZil7dmFyIGc9TWF0aC5tYXgsaD1NYXRoLm1pbixpPWZ1bmN0aW9uKGEpe2lmKHRoaXMuaXRlbXM9W10sdGhpcy5iaW5kaW5ncz17fSx0aGlzLmxlbmd0aD0wLHRoaXMudHlwZT0ic2V0IixhKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKylhW2JdJiYodGhpc1t0aGlzLml0ZW1zLmxlbmd0aF09dGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aF09YVtiXSx0aGlzLmxlbmd0aCsrKX0saj1pLnByb3RvdHlwZTtqLnB1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIGEsYixjPTAsZD1hcmd1bWVudHMubGVuZ3RoO2Q+YztjKyspYT1hcmd1bWVudHNbY10sYSYmKGI9dGhpcy5pdGVtcy5sZW5ndGgsdGhpc1tiXT10aGlzLml0ZW1zW2JdPWEsdGhpcy5sZW5ndGgrKyk7cmV0dXJuIHRoaXN9LGoucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoJiZkZWxldGUgdGhpc1t0aGlzLmxlbmd0aC0tXSx0aGlzLml0ZW1zLnBvcCgpfSxqLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuaXRlbXMubGVuZ3RoO2Q+YztjKyspaWYoYS5jYWxsKGIsdGhpcy5pdGVtc1tjXSxjKT09PSExKXJldHVybiB0aGlzO3JldHVybiB0aGlzfSxqLmFuaW1hdGU9ZnVuY3Rpb24oZCxlLGYsZyl7ImZ1bmN0aW9uIiE9dHlwZW9mIGZ8fGYubGVuZ3RofHwoZz1mLGY9Yy5saW5lYXIpLGQgaW5zdGFuY2VvZiBhLl8uQW5pbWF0aW9uJiYoZz1kLmNhbGxiYWNrLGY9ZC5lYXNpbmcsZT1mLmR1cixkPWQuYXR0cik7dmFyIGg9YXJndW1lbnRzO2lmKGEuaXMoZCwiYXJyYXkiKSYmYS5pcyhoW2gubGVuZ3RoLTFdLCJhcnJheSIpKXZhciBpPSEwO3ZhciBqLGs9ZnVuY3Rpb24oKXtqP3RoaXMuYj1qOmo9dGhpcy5ifSxsPTAsbT10aGlzLG49ZyYmZnVuY3Rpb24oKXsrK2w9PW0ubGVuZ3RoJiZnLmNhbGwodGhpcyl9O3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oYSxjKXtiLm9uY2UoInNuYXAuYW5pbWNyZWF0ZWQuIithLmlkLGspLGk/aFtjXSYmYS5hbmltYXRlLmFwcGx5KGEsaFtjXSk6YS5hbmltYXRlKGQsZSxmLG4pfSl9LGoucmVtb3ZlPWZ1bmN0aW9uKCl7Zm9yKDt0aGlzLmxlbmd0aDspdGhpcy5wb3AoKS5yZW1vdmUoKTtyZXR1cm4gdGhpc30sai5iaW5kPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fTtpZigiZnVuY3Rpb24iPT10eXBlb2YgYil0aGlzLmJpbmRpbmdzW2FdPWI7ZWxzZXt2YXIgZT1jfHxhO3RoaXMuYmluZGluZ3NbYV09ZnVuY3Rpb24oYSl7ZFtlXT1hLGIuYXR0cihkKX19cmV0dXJuIHRoaXN9LGouYXR0cj1mdW5jdGlvbihhKXt2YXIgYj17fTtmb3IodmFyIGMgaW4gYSl0aGlzLmJpbmRpbmdzW2NdP3RoaXMuYmluZGluZ3NbY10oYVtjXSk6YltjXT1hW2NdO2Zvcih2YXIgZD0wLGU9dGhpcy5pdGVtcy5sZW5ndGg7ZT5kO2QrKyl0aGlzLml0ZW1zW2RdLmF0dHIoYik7cmV0dXJuIHRoaXN9LGouY2xlYXI9ZnVuY3Rpb24oKXtmb3IoO3RoaXMubGVuZ3RoOyl0aGlzLnBvcCgpfSxqLnNwbGljZT1mdW5jdGlvbihhLGIsYyl7YT0wPmE/Zyh0aGlzLmxlbmd0aCthLDApOmEsYj1nKDAsaCh0aGlzLmxlbmd0aC1hLGIpKTt2YXIgZCxlPVtdLGY9W10saj1bXTtmb3IoZD0yO2Q8YXJndW1lbnRzLmxlbmd0aDtkKyspai5wdXNoKGFyZ3VtZW50c1tkXSk7Zm9yKGQ9MDtiPmQ7ZCsrKWYucHVzaCh0aGlzW2ErZF0pO2Zvcig7ZDx0aGlzLmxlbmd0aC1hO2QrKyllLnB1c2godGhpc1thK2RdKTt2YXIgaz1qLmxlbmd0aDtmb3IoZD0wO2Q8aytlLmxlbmd0aDtkKyspdGhpcy5pdGVtc1thK2RdPXRoaXNbYStkXT1rPmQ/altkXTplW2Qta107Zm9yKGQ9dGhpcy5pdGVtcy5sZW5ndGg9dGhpcy5sZW5ndGgtPWItazt0aGlzW2RdOylkZWxldGUgdGhpc1tkKytdO3JldHVybiBuZXcgaShmKX0sai5leGNsdWRlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sZW5ndGg7Yz5iO2IrKylpZih0aGlzW2JdPT1hKXJldHVybiB0aGlzLnNwbGljZShiLDEpLCEwO3JldHVybiExfSxqLmluc2VydEFmdGVyPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLml0ZW1zLmxlbmd0aDtiLS07KXRoaXMuaXRlbXNbYl0uaW5zZXJ0QWZ0ZXIoYSk7cmV0dXJuIHRoaXN9LGouZ2V0QkJveD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPVtdLGM9W10sZD1bXSxlPXRoaXMuaXRlbXMubGVuZ3RoO2UtLTspaWYoIXRoaXMuaXRlbXNbZV0ucmVtb3ZlZCl7dmFyIGY9dGhpcy5pdGVtc1tlXS5nZXRCQm94KCk7YS5wdXNoKGYueCksYi5wdXNoKGYueSksYy5wdXNoKGYueCtmLndpZHRoKSxkLnB1c2goZi55K2YuaGVpZ2h0KX1yZXR1cm4gYT1oLmFwcGx5KDAsYSksYj1oLmFwcGx5KDAsYiksYz1nLmFwcGx5KDAsYyksZD1nLmFwcGx5KDAsZCkse3g6YSx5OmIseDI6Yyx5MjpkLHdpZHRoOmMtYSxoZWlnaHQ6ZC1iLGN4OmErKGMtYSkvMixjeTpiKyhkLWIpLzJ9fSxqLmNsb25lPWZ1bmN0aW9uKGEpe2E9bmV3IGk7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtjPmI7YisrKWEucHVzaCh0aGlzLml0ZW1zW2JdLmNsb25lKCkpO3JldHVybiBhfSxqLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIlNuYXDigJhzIHNldCJ9LGoudHlwZT0ic2V0IixhLlNldD1pLGEuc2V0PWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJmEucHVzaC5hcHBseShhLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSksYX19KSxkLnBsdWdpbihmdW5jdGlvbihhLGMsZCxlKXtmdW5jdGlvbiBmKGEpe3ZhciBiPWFbMF07c3dpdGNoKGIudG9Mb3dlckNhc2UoKSl7Y2FzZSJ0IjpyZXR1cm5bYiwwLDBdO2Nhc2UibSI6cmV0dXJuW2IsMSwwLDAsMSwwLDBdO2Nhc2UiciI6cmV0dXJuIDQ9PWEubGVuZ3RoP1tiLDAsYVsyXSxhWzNdXTpbYiwwXTtjYXNlInMiOnJldHVybiA1PT1hLmxlbmd0aD9bYiwxLDEsYVszXSxhWzRdXTozPT1hLmxlbmd0aD9bYiwxLDFdOltiLDFdfX1mdW5jdGlvbiBnKGIsYyxkKXtiPWJ8fG5ldyBhLk1hdHJpeCxjPWN8fG5ldyBhLk1hdHJpeCxiPWEucGFyc2VUcmFuc2Zvcm1TdHJpbmcoYi50b1RyYW5zZm9ybVN0cmluZygpKXx8W10sYz1hLnBhcnNlVHJhbnNmb3JtU3RyaW5nKGMudG9UcmFuc2Zvcm1TdHJpbmcoKSl8fFtdO2Zvcih2YXIgZSxnLGgsaSxqPU1hdGgubWF4KGIubGVuZ3RoLGMubGVuZ3RoKSxrPVtdLG49W10sbz0wO2o+bztvKyspe2lmKGg9YltvXXx8ZihjW29dKSxpPWNbb118fGYoaCksaFswXSE9aVswXXx8InIiPT1oWzBdLnRvTG93ZXJDYXNlKCkmJihoWzJdIT1pWzJdfHxoWzNdIT1pWzNdKXx8InMiPT1oWzBdLnRvTG93ZXJDYXNlKCkmJihoWzNdIT1pWzNdfHxoWzRdIT1pWzRdKSl7Yj1hLl8udHJhbnNmb3JtMm1hdHJpeChiLGQoKSksYz1hLl8udHJhbnNmb3JtMm1hdHJpeChjLGQoKSksaz1bWyJtIixiLmEsYi5iLGIuYyxiLmQsYi5lLGIuZl1dLG49W1sibSIsYy5hLGMuYixjLmMsYy5kLGMuZSxjLmZdXTticmVha31mb3Ioa1tvXT1bXSxuW29dPVtdLGU9MCxnPU1hdGgubWF4KGgubGVuZ3RoLGkubGVuZ3RoKTtnPmU7ZSsrKWUgaW4gaCYmKGtbb11bZV09aFtlXSksZSBpbiBpJiYobltvXVtlXT1pW2VdKX1yZXR1cm57ZnJvbTptKGspLHRvOm0obiksZjpsKGspfX1mdW5jdGlvbiBoKGEpe3JldHVybiBhfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybitiLnRvRml4ZWQoMykrYX19ZnVuY3Rpb24gaihhKXtyZXR1cm4gYS5qb2luKCIgIil9ZnVuY3Rpb24gayhiKXtyZXR1cm4gYS5yZ2IoYlswXSxiWzFdLGJbMl0sYlszXSl9ZnVuY3Rpb24gbChhKXt2YXIgYixjLGQsZSxmLGcsaD0wLGk9W107Zm9yKGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspe2ZvcihmPSJbIixnPVsnIicrYVtiXVswXSsnIiddLGQ9MSxlPWFbYl0ubGVuZ3RoO2U+ZDtkKyspZ1tkXT0idmFsWyIraCsrICsiXSI7Zis9ZysiXSIsaVtiXT1mfXJldHVybiBGdW5jdGlvbigidmFsIiwicmV0dXJuIFNuYXAucGF0aC50b1N0cmluZy5jYWxsKFsiK2krIl0pIil9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGI9W10sYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylmb3IodmFyIGU9MSxmPWFbY10ubGVuZ3RoO2Y+ZTtlKyspYi5wdXNoKGFbY11bZV0pO3JldHVybiBifWZ1bmN0aW9uIG4oYSl7cmV0dXJuIGlzRmluaXRlKGEpfWZ1bmN0aW9uIG8oYixjKXtyZXR1cm4gYS5pcyhiLCJhcnJheSIpJiZhLmlzKGMsImFycmF5Iik/Yi50b1N0cmluZygpPT1jLnRvU3RyaW5nKCk6ITF9dmFyIHA9e30scT0vWyVhLXpdKyQvaSxyPVN0cmluZztwLnN0cm9rZT1wLmZpbGw9ImNvbG91ciIsYy5wcm90b3R5cGUuZXF1YWw9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYigic25hcC51dGlsLmVxdWFsIix0aGlzLGEsYykuZmlyc3REZWZpbmVkKCl9LGIub24oInNuYXAudXRpbC5lcXVhbCIsZnVuY3Rpb24oYixjKXt2YXIgZCxlLGY9cih0aGlzLmF0dHIoYil8fCIiKSxzPXRoaXM7aWYoImNvbG91ciI9PXBbYl0pcmV0dXJuIGQ9YS5jb2xvcihmKSxlPWEuY29sb3IoYykse2Zyb206W2QucixkLmcsZC5iLGQub3BhY2l0eV0sdG86W2UucixlLmcsZS5iLGUub3BhY2l0eV0sZjprfTtpZigidmlld0JveCI9PWIpcmV0dXJuIGQ9dGhpcy5hdHRyKGIpLnZiLnNwbGl0KCIgIikubWFwKE51bWJlciksZT1jLnNwbGl0KCIgIikubWFwKE51bWJlcikse2Zyb206ZCx0bzplLGY6an07aWYoInRyYW5zZm9ybSI9PWJ8fCJncmFkaWVudFRyYW5zZm9ybSI9PWJ8fCJwYXR0ZXJuVHJhbnNmb3JtIj09YilyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGMmJihjPXIoYykucmVwbGFjZSgvXC57M318XHUyMDI2L2csZikpLGY9dGhpcy5tYXRyaXgsYz1hLl8ucmdUcmFuc2Zvcm0udGVzdChjKT9hLl8udHJhbnNmb3JtMm1hdHJpeChjLHRoaXMuZ2V0QkJveCgpKTphLl8udHJhbnNmb3JtMm1hdHJpeChhLl8uc3ZnVHJhbnNmb3JtMnN0cmluZyhjKSx0aGlzLmdldEJCb3goKSksZyhmLGMsZnVuY3Rpb24oKXtyZXR1cm4gcy5nZXRCQm94KDEpfSk7aWYoImQiPT1ifHwicGF0aCI9PWIpcmV0dXJuIGQ9YS5wYXRoLnRvQ3ViaWMoZixjKSx7ZnJvbTptKGRbMF0pLHRvOm0oZFsxXSksZjpsKGRbMF0pfTtpZigicG9pbnRzIj09YilyZXR1cm4gZD1yKGYpLnNwbGl0KGEuXy5zZXBhcmF0b3IpLGU9cihjKS5zcGxpdChhLl8uc2VwYXJhdG9yKSx7ZnJvbTpkLHRvOmUsZjpmdW5jdGlvbihhKXtyZXR1cm4gYX19O2lmKG4oZikmJm4oYykpcmV0dXJue2Zyb206cGFyc2VGbG9hdChmKSx0bzpwYXJzZUZsb2F0KGMpLGY6aH07dmFyIHQ9Zi5tYXRjaChxKSx1PXIoYykubWF0Y2gocSk7cmV0dXJuIHQmJm8odCx1KT97ZnJvbTpwYXJzZUZsb2F0KGYpLHRvOnBhcnNlRmxvYXQoYyksZjppKHQpfTp7ZnJvbTp0aGlzLmFzUFgoYiksdG86dGhpcy5hc1BYKGIsYyksZjpofX0pfSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSl7Zm9yKHZhciBmPWMucHJvdG90eXBlLGc9Imhhc093blByb3BlcnR5IixoPSgiY3JlYXRlVG91Y2giaW4gZS5kb2MpLGk9WyJjbGljayIsImRibGNsaWNrIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2VvdXQiLCJtb3VzZW92ZXIiLCJtb3VzZXVwIiwidG91Y2hzdGFydCIsInRvdWNobW92ZSIsInRvdWNoZW5kIiwidG91Y2hjYW5jZWwiXSxqPXttb3VzZWRvd246InRvdWNoc3RhcnQiLG1vdXNlbW92ZToidG91Y2htb3ZlIixtb3VzZXVwOiJ0b3VjaGVuZCJ9LGs9KGZ1bmN0aW9uKGEsYil7dmFyIGM9InkiPT1hPyJzY3JvbGxUb3AiOiJzY3JvbGxMZWZ0IixkPWImJmIubm9kZT9iLm5vZGUub3duZXJEb2N1bWVudDplLmRvYztyZXR1cm4gZFtjIGluIGQuZG9jdW1lbnRFbGVtZW50PyJkb2N1bWVudEVsZW1lbnQiOiJib2R5Il1bY119KSxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpfSxtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKX0sbj1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1oJiZqW2JdP2pbYl06YixmPWZ1bmN0aW9uKGUpe3ZhciBmPWsoInkiLGQpLGk9aygieCIsZCk7aWYoaCYmaltnXShiKSlmb3IodmFyIG49MCxvPWUudGFyZ2V0VG91Y2hlcyYmZS50YXJnZXRUb3VjaGVzLmxlbmd0aDtvPm47bisrKWlmKGUudGFyZ2V0VG91Y2hlc1tuXS50YXJnZXQ9PWF8fGEuY29udGFpbnMoZS50YXJnZXRUb3VjaGVzW25dLnRhcmdldCkpe3ZhciBwPWU7ZT1lLnRhcmdldFRvdWNoZXNbbl0sZS5vcmlnaW5hbEV2ZW50PXAsZS5wcmV2ZW50RGVmYXVsdD1sLGUuc3RvcFByb3BhZ2F0aW9uPW07YnJlYWt9dmFyIHE9ZS5jbGllbnRYK2kscj1lLmNsaWVudFkrZjtyZXR1cm4gYy5jYWxsKGQsZSxxLHIpfTtyZXR1cm4gYiE9PWUmJmEuYWRkRXZlbnRMaXN0ZW5lcihiLGYsITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihlLGYsITEpLGZ1bmN0aW9uKCl7cmV0dXJuIGIhPT1lJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixmLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxmLCExKSwhMH19LG89W10scD1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1hLmNsaWVudFgsZT1hLmNsaWVudFksZj1rKCJ5IiksZz1rKCJ4IiksaT1vLmxlbmd0aDtpLS07KXtpZihjPW9baV0saCl7Zm9yKHZhciBqLGw9YS50b3VjaGVzJiZhLnRvdWNoZXMubGVuZ3RoO2wtLTspaWYoaj1hLnRvdWNoZXNbbF0sai5pZGVudGlmaWVyPT1jLmVsLl9kcmFnLmlkfHxjLmVsLm5vZGUuY29udGFpbnMoai50YXJnZXQpKXtkPWouY2xpZW50WCxlPWouY2xpZW50WSwoYS5vcmlnaW5hbEV2ZW50P2Eub3JpZ2luYWxFdmVudDphKS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrfX1lbHNlIGEucHJldmVudERlZmF1bHQoKTt2YXIgbT1jLmVsLm5vZGU7bS5uZXh0U2libGluZyxtLnBhcmVudE5vZGUsbS5zdHlsZS5kaXNwbGF5O2QrPWcsZSs9ZixiKCJzbmFwLmRyYWcubW92ZS4iK2MuZWwuaWQsYy5tb3ZlX3Njb3BlfHxjLmVsLGQtYy5lbC5fZHJhZy54LGUtYy5lbC5fZHJhZy55LGQsZSxhKX19LHE9ZnVuY3Rpb24oYyl7YS51bm1vdXNlbW92ZShwKS51bm1vdXNldXAocSk7Zm9yKHZhciBkLGU9by5sZW5ndGg7ZS0tOylkPW9bZV0sZC5lbC5fZHJhZz17fSxiKCJzbmFwLmRyYWcuZW5kLiIrZC5lbC5pZCxkLmVuZF9zY29wZXx8ZC5zdGFydF9zY29wZXx8ZC5tb3ZlX3Njb3BlfHxkLmVsLGMpLGIub2ZmKCJzbmFwLmRyYWcuKi4iK2QuZWwuaWQpO289W119LHI9aS5sZW5ndGg7ci0tOykhZnVuY3Rpb24oYil7YVtiXT1mW2JdPWZ1bmN0aW9uKGMsZCl7aWYoYS5pcyhjLCJmdW5jdGlvbiIpKXRoaXMuZXZlbnRzPXRoaXMuZXZlbnRzfHxbXSx0aGlzLmV2ZW50cy5wdXNoKHtuYW1lOmIsZjpjLHVuYmluZDpuKHRoaXMubm9kZXx8ZG9jdW1lbnQsYixjLGR8fHRoaXMpfSk7ZWxzZSBmb3IodmFyIGU9MCxmPXRoaXMuZXZlbnRzLmxlbmd0aDtmPmU7ZSsrKWlmKHRoaXMuZXZlbnRzW2VdLm5hbWU9PWIpdHJ5e3RoaXMuZXZlbnRzW2VdLmYuY2FsbCh0aGlzKX1jYXRjaChnKXt9cmV0dXJuIHRoaXN9LGFbInVuIitiXT1mWyJ1biIrYl09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPXRoaXMuZXZlbnRzfHxbXSxkPWMubGVuZ3RoO2QtLTspaWYoY1tkXS5uYW1lPT1iJiYoY1tkXS5mPT1hfHwhYSkpcmV0dXJuIGNbZF0udW5iaW5kKCksYy5zcGxpY2UoZCwxKSwhYy5sZW5ndGgmJmRlbGV0ZSB0aGlzLmV2ZW50cyx0aGlzO3JldHVybiB0aGlzfX0oaVtyXSk7Zi5ob3Zlcj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5tb3VzZW92ZXIoYSxjKS5tb3VzZW91dChiLGR8fGMpfSxmLnVuaG92ZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy51bm1vdXNlb3ZlcihhKS51bm1vdXNlb3V0KGIpfTt2YXIgcz1bXTtmLmRyYWc9ZnVuY3Rpb24oYyxkLGUsZixnLGgpe2Z1bmN0aW9uIGkoaSxqLGwpeyhpLm9yaWdpbmFsRXZlbnR8fGkpLnByZXZlbnREZWZhdWx0KCksay5fZHJhZy54PWosay5fZHJhZy55PWwsay5fZHJhZy5pZD1pLmlkZW50aWZpZXIsIW8ubGVuZ3RoJiZhLm1vdXNlbW92ZShwKS5tb3VzZXVwKHEpLG8ucHVzaCh7ZWw6ayxtb3ZlX3Njb3BlOmYsc3RhcnRfc2NvcGU6ZyxlbmRfc2NvcGU6aH0pLGQmJmIub24oInNuYXAuZHJhZy5zdGFydC4iK2suaWQsZCksYyYmYi5vbigic25hcC5kcmFnLm1vdmUuIitrLmlkLGMpLGUmJmIub24oInNuYXAuZHJhZy5lbmQuIitrLmlkLGUpLGIoInNuYXAuZHJhZy5zdGFydC4iK2suaWQsZ3x8Znx8ayxqLGwsaSl9ZnVuY3Rpb24gaihhLGMsZCl7Yigic25hcC5kcmFnaW5pdC4iK2suaWQsayxhLGMsZCl9dmFyIGs9dGhpcztpZighYXJndW1lbnRzLmxlbmd0aCl7dmFyIGw7cmV0dXJuIGsuZHJhZyhmdW5jdGlvbihhLGIpe3RoaXMuYXR0cih7dHJhbnNmb3JtOmwrKGw/IlQiOiJ0IikrW2EsYl19KX0sZnVuY3Rpb24oKXtsPXRoaXMudHJhbnNmb3JtKCkubG9jYWx9KX1yZXR1cm4gYi5vbigic25hcC5kcmFnaW5pdC4iK2suaWQsaSksay5fZHJhZz17fSxzLnB1c2goe2VsOmssc3RhcnQ6aSxpbml0Omp9KSxrLm1vdXNlZG93bihqKSxrfSxmLnVuZHJhZz1mdW5jdGlvbigpe2Zvcih2YXIgYz1zLmxlbmd0aDtjLS07KXNbY10uZWw9PXRoaXMmJih0aGlzLnVubW91c2Vkb3duKHNbY10uaW5pdCkscy5zcGxpY2UoYywxKSxiLnVuYmluZCgic25hcC5kcmFnLiouIit0aGlzLmlkKSxiLnVuYmluZCgic25hcC5kcmFnaW5pdC4iK3RoaXMuaWQpKTtyZXR1cm4hcy5sZW5ndGgmJmEudW5tb3VzZW1vdmUocCkudW5tb3VzZXVwKHEpLHRoaXN9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGY9KGMucHJvdG90eXBlLGQucHJvdG90eXBlKSxnPS9eXHMqdXJsXCgoLispXCkvLGg9U3RyaW5nLGk9YS5fLiQ7YS5maWx0ZXI9e30sZi5maWx0ZXI9ZnVuY3Rpb24oYil7dmFyIGQ9dGhpczsic3ZnIiE9ZC50eXBlJiYoZD1kLnBhcGVyKTt2YXIgZT1hLnBhcnNlKGgoYikpLGY9YS5fLmlkKCksZz0oZC5ub2RlLm9mZnNldFdpZHRoLGQubm9kZS5vZmZzZXRIZWlnaHQsaSgiZmlsdGVyIikpO3JldHVybiBpKGcse2lkOmYsZmlsdGVyVW5pdHM6InVzZXJTcGFjZU9uVXNlIn0pLGcuYXBwZW5kQ2hpbGQoZS5ub2RlKSxkLmRlZnMuYXBwZW5kQ2hpbGQoZyksbmV3IGMoZyl9LGIub24oInNuYXAudXRpbC5nZXRhdHRyLmZpbHRlciIsZnVuY3Rpb24oKXtiLnN0b3AoKTt2YXIgYz1pKHRoaXMubm9kZSwiZmlsdGVyIik7aWYoYyl7dmFyIGQ9aChjKS5tYXRjaChnKTtyZXR1cm4gZCYmYS5zZWxlY3QoZFsxXSl9fSksYi5vbigic25hcC51dGlsLmF0dHIuZmlsdGVyIixmdW5jdGlvbihkKXtpZihkIGluc3RhbmNlb2YgYyYmImZpbHRlciI9PWQudHlwZSl7Yi5zdG9wKCk7dmFyIGU9ZC5ub2RlLmlkO2V8fChpKGQubm9kZSx7aWQ6ZC5pZH0pLGU9ZC5pZCksaSh0aGlzLm5vZGUse2ZpbHRlcjphLnVybChlKX0pfWQmJiJub25lIiE9ZHx8KGIuc3RvcCgpLHRoaXMubm9kZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpKX0pLGEuZmlsdGVyLmJsdXI9ZnVuY3Rpb24oYixjKXtudWxsPT1iJiYoYj0yKTt2YXIgZD1udWxsPT1jP2I6W2IsY107cmV0dXJuIGEuZm9ybWF0KCc8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSJ7ZGVmfSIvPicse2RlZjpkfSl9LGEuZmlsdGVyLmJsdXIudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5zaGFkb3c9ZnVuY3Rpb24oYixjLGQsZSxmKXtyZXR1cm4gbnVsbD09ZiYmKG51bGw9PWU/KGY9ZCxkPTQsZT0iIzAwMCIpOihmPWUsZT1kLGQ9NCkpLG51bGw9PWQmJihkPTQpLG51bGw9PWYmJihmPTEpLG51bGw9PWImJihiPTAsYz0yKSxudWxsPT1jJiYoYz1iKSxlPWEuY29sb3IoZSksYS5mb3JtYXQoJzxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHN0ZERldmlhdGlvbj0ie2JsdXJ9Ii8+PGZlT2Zmc2V0IGR4PSJ7ZHh9IiBkeT0ie2R5fSIgcmVzdWx0PSJvZmZzZXRibHVyIi8+PGZlRmxvb2QgZmxvb2QtY29sb3I9Intjb2xvcn0iLz48ZmVDb21wb3NpdGUgaW4yPSJvZmZzZXRibHVyIiBvcGVyYXRvcj0iaW4iLz48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jQSB0eXBlPSJsaW5lYXIiIHNsb3BlPSJ7b3BhY2l0eX0iLz48L2ZlQ29tcG9uZW50VHJhbnNmZXI+PGZlTWVyZ2U+PGZlTWVyZ2VOb2RlLz48ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz48L2ZlTWVyZ2U+Jyx7Y29sb3I6ZSxkeDpiLGR5OmMsYmx1cjpkLG9wYWNpdHk6Zn0pfSxhLmZpbHRlci5zaGFkb3cudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5ncmF5c2NhbGU9ZnVuY3Rpb24oYil7cmV0dXJuIG51bGw9PWImJihiPTEpLGEuZm9ybWF0KCc8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0ie2F9IHtifSB7Y30gMCAwIHtkfSB7ZX0ge2Z9IDAgMCB7Z30ge2J9IHtofSAwIDAgMCAwIDAgMSAwIi8+Jyx7YTouMjEyNisuNzg3NCooMS1iKSxiOi43MTUyLS43MTUyKigxLWIpLGM6LjA3MjItLjA3MjIqKDEtYiksZDouMjEyNi0uMjEyNiooMS1iKSxlOi43MTUyKy4yODQ4KigxLWIpLGY6LjA3MjItLjA3MjIqKDEtYiksZzouMjEyNi0uMjEyNiooMS1iKSxoOi4wNzIyKy45Mjc4KigxLWIpfSl9LGEuZmlsdGVyLmdyYXlzY2FsZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9LGEuZmlsdGVyLnNlcGlhPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iJiYoYj0xKSxhLmZvcm1hdCgnPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9InthfSB7Yn0ge2N9IDAgMCB7ZH0ge2V9IHtmfSAwIDAge2d9IHtofSB7aX0gMCAwIDAgMCAwIDEgMCIvPicse2E6LjM5MysuNjA3KigxLWIpLGI6Ljc2OS0uNzY5KigxLWIpLGM6LjE4OS0uMTg5KigxLWIpLGQ6LjM0OS0uMzQ5KigxLWIpLGU6LjY4NisuMzE0KigxLWIpLGY6LjE2OC0uMTY4KigxLWIpLGc6LjI3Mi0uMjcyKigxLWIpLGg6LjUzNC0uNTM0KigxLWIpLGk6LjEzMSsuODY5KigxLWIpfSl9LGEuZmlsdGVyLnNlcGlhLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMoKX0sYS5maWx0ZXIuc2F0dXJhdGU9ZnVuY3Rpb24oYil7cmV0dXJuIG51bGw9PWImJihiPTEpLGEuZm9ybWF0KCc8ZmVDb2xvck1hdHJpeCB0eXBlPSJzYXR1cmF0ZSIgdmFsdWVzPSJ7YW1vdW50fSIvPicse2Ftb3VudDoxLWJ9KX0sYS5maWx0ZXIuc2F0dXJhdGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5odWVSb3RhdGU9ZnVuY3Rpb24oYil7cmV0dXJuIGI9Ynx8MCxhLmZvcm1hdCgnPGZlQ29sb3JNYXRyaXggdHlwZT0iaHVlUm90YXRlIiB2YWx1ZXM9InthbmdsZX0iLz4nLHthbmdsZTpifSl9LGEuZmlsdGVyLmh1ZVJvdGF0ZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9LGEuZmlsdGVyLmludmVydD1mdW5jdGlvbihiKXtyZXR1cm4gbnVsbD09YiYmKGI9MSksYS5mb3JtYXQoJzxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNSIHR5cGU9InRhYmxlIiB0YWJsZVZhbHVlcz0ie2Ftb3VudH0ge2Ftb3VudDJ9Ii8+PGZlRnVuY0cgdHlwZT0idGFibGUiIHRhYmxlVmFsdWVzPSJ7YW1vdW50fSB7YW1vdW50Mn0iLz48ZmVGdW5jQiB0eXBlPSJ0YWJsZSIgdGFibGVWYWx1ZXM9InthbW91bnR9IHthbW91bnQyfSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj4nLHthbW91bnQ6YixhbW91bnQyOjEtYn0pfSxhLmZpbHRlci5pbnZlcnQudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5icmlnaHRuZXNzPWZ1bmN0aW9uKGIpe3JldHVybiBudWxsPT1iJiYoYj0xKSxhLmZvcm1hdCgnPGZlQ29tcG9uZW50VHJhbnNmZXI+PGZlRnVuY1IgdHlwZT0ibGluZWFyIiBzbG9wZT0ie2Ftb3VudH0iLz48ZmVGdW5jRyB0eXBlPSJsaW5lYXIiIHNsb3BlPSJ7YW1vdW50fSIvPjxmZUZ1bmNCIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9Ii8+PC9mZUNvbXBvbmVudFRyYW5zZmVyPicse2Ftb3VudDpifSl9LGEuZmlsdGVyLmJyaWdodG5lc3MudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcygpfSxhLmZpbHRlci5jb250cmFzdD1mdW5jdGlvbihiKXtyZXR1cm4gbnVsbD09YiYmKGI9MSksYS5mb3JtYXQoJzxmZUNvbXBvbmVudFRyYW5zZmVyPjxmZUZ1bmNSIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjxmZUZ1bmNHIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjxmZUZ1bmNCIHR5cGU9ImxpbmVhciIgc2xvcGU9InthbW91bnR9IiBpbnRlcmNlcHQ9InthbW91bnQyfSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj4nLHthbW91bnQ6YixhbW91bnQyOi41LWIvMn0pfSxhLmZpbHRlci5jb250cmFzdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzKCl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1hLl8uYm94LGc9YS5pcyxoPS9eW15hLXpdKihbdGJtbHJjXSkvaSxpPWZ1bmN0aW9uKCl7cmV0dXJuIlQiK3RoaXMuZHgrIiwiK3RoaXMuZHl9O2IucHJvdG90eXBlLmdldEFsaWduPWZ1bmN0aW9uKGEsYil7bnVsbD09YiYmZyhhLCJzdHJpbmciKSYmKGI9YSxhPW51bGwpLGE9YXx8dGhpcy5wYXBlcjt2YXIgYz1hLmdldEJCb3g/YS5nZXRCQm94KCk6ZihhKSxkPXRoaXMuZ2V0QkJveCgpLGU9e307c3dpdGNoKGI9YiYmYi5tYXRjaChoKSxiPWI/YlsxXS50b0xvd2VyQ2FzZSgpOiJjIil7Y2FzZSJ0IjplLmR4PTAsZS5keT1jLnktZC55O2JyZWFrO2Nhc2UiYiI6ZS5keD0wLGUuZHk9Yy55Mi1kLnkyO2JyZWFrO2Nhc2UibSI6ZS5keD0wLGUuZHk9Yy5jeS1kLmN5O2JyZWFrO2Nhc2UibCI6ZS5keD1jLngtZC54LGUuZHk9MDticmVhaztjYXNlInIiOmUuZHg9Yy54Mi1kLngyLGUuZHk9MDticmVhaztkZWZhdWx0OmUuZHg9Yy5jeC1kLmN4LGUuZHk9MH1yZXR1cm4gZS50b1N0cmluZz1pLGV9LGIucHJvdG90eXBlLmFsaWduPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudHJhbnNmb3JtKCIuLi4iK3RoaXMuZ2V0QWxpZ24oYSxiKSl9fSksZC5wbHVnaW4oZnVuY3Rpb24oYixjLGQsZSl7ZnVuY3Rpb24gZihhKXthPWEuc3BsaXQoLyg/PSMpLyk7dmFyIGI9bmV3IFN0cmluZyhhWzVdKTtyZXR1cm4gYls1MF09YVswXSxiWzEwMF09YVsxXSxiWzIwMF09YVsyXSxiWzMwMF09YVszXSxiWzQwMF09YVs0XSxiWzUwMF09YVs1XSxiWzYwMF09YVs2XSxiWzcwMF09YVs3XSxiWzgwMF09YVs4XSxiWzkwMF09YVs5XSxhWzEwXSYmKGIuQTEwMD1hWzEwXSxiLkEyMDA9YVsxMV0sYi5BNDAwPWFbMTJdLGIuQTcwMD1hWzEzXSksYn12YXIgZz0iI2ZmZWJlZSNmZmNkZDIjZWY5YTlhI2U1NzM3MyNlZjUzNTAjZjQ0MzM2I2U1MzkzNSNkMzJmMmYjYzYyODI4I2I3MWMxYyNmZjhhODAjZmY1MjUyI2ZmMTc0NCNkNTAwMDAiLGg9IiNGQ0U0RUMjRjhCQkQwI0Y0OEZCMSNGMDYyOTIjRUM0MDdBI0U5MUU2MyNEODFCNjAjQzIxODVCI0FEMTQ1NyM4ODBFNEYjRkY4MEFCI0ZGNDA4MSNGNTAwNTcjQzUxMTYyIixpPSIjRjNFNUY1I0UxQkVFNyNDRTkzRDgjQkE2OEM4I0FCNDdCQyM5QzI3QjAjOEUyNEFBIzdCMUZBMiM2QTFCOUEjNEExNDhDI0VBODBGQyNFMDQwRkIjRDUwMEY5I0FBMDBGRiIsaj0iI0VERTdGNiNEMUM0RTkjQjM5RERCIzk1NzVDRCM3RTU3QzIjNjczQUI3IzVFMzVCMSM1MTJEQTgjNDUyN0EwIzMxMUI5MiNCMzg4RkYjN0M0REZGIzY1MUZGRiM2MjAwRUEiLGs9IiNFOEVBRjYjQzVDQUU5IzlGQThEQSM3OTg2Q0IjNUM2QkMwIzNGNTFCNSMzOTQ5QUIjMzAzRjlGIzI4MzU5MyMxQTIzN0UjOEM5RUZGIzUzNkRGRSMzRDVBRkUjMzA0RkZFIixsPSIjRTNGMkZEI0JCREVGQiM5MENBRjkjNjRCNUY2IzY0QjVGNiMyMTk2RjMjMUU4OEU1IzE5NzZEMiMxNTY1QzAjMEQ0N0ExIzgyQjFGRiM0NDhBRkYjMjk3OUZGIzI5NjJGRiIsbT0iI0UxRjVGRSNCM0U1RkMjODFENEZBIzRGQzNGNyMyOUI2RjYjMDNBOUY0IzAzOUJFNSMwMjg4RDEjMDI3N0JEIzAxNTc5QiM4MEQ4RkYjNDBDNEZGIzAwQjBGRiMwMDkxRUEiLG49IiNFMEY3RkEjQjJFQkYyIzgwREVFQSM0REQwRTEjMjZDNkRBIzAwQkNENCMwMEFDQzEjMDA5N0E3IzAwODM4RiMwMDYwNjQjODRGRkZGIzE4RkZGRiMwMEU1RkYjMDBCOEQ0IixvPSIjRTBGMkYxI0IyREZEQiM4MENCQzQjNERCNkFDIzI2QTY5QSMwMDk2ODgjMDA4OTdCIzAwNzk2QiMwMDY5NUMjMDA0RDQwI0E3RkZFQiM2NEZGREEjMURFOUI2IzAwQkZBNSIscD0iI0U4RjVFOSNDOEU2QzkjQTVENkE3IzgxQzc4NCM2NkJCNkEjNENBRjUwIzQzQTA0NyMzODhFM0MjMkU3RDMyIzFCNUUyMCNCOUY2Q0EjNjlGMEFFIzAwRTY3NiMwMEM4NTMiLHE9IiNGMUY4RTkjRENFREM4I0M1RTFBNSNBRUQ1ODEjOUNDQzY1IzhCQzM0QSM3Q0IzNDIjNjg5RjM4IzU1OEIyRiMzMzY5MUUjQ0NGRjkwI0IyRkY1OSM3NkZGMDMjNjRERDE3IixyPSIjRjlGQkU3I0YwRjRDMyNFNkVFOUMjRENFNzc1I0Q0RTE1NyNDRERDMzkjQzBDQTMzI0FGQjQyQiM5RTlEMjQjODI3NzE3I0Y0RkY4MSNFRUZGNDEjQzZGRjAwI0FFRUEwMCIscz0iI0ZGRkRFNyNGRkY5QzQjRkZGNTlEI0ZGRjE3NiNGRkVFNTgjRkZFQjNCI0ZERDgzNSNGQkMwMkQjRjlBODI1I0Y1N0YxNyNGRkZGOEQjRkZGRjAwI0ZGRUEwMCNGRkQ2MDAiLHQ9IiNGRkY4RTEjRkZFQ0IzI0ZGRTA4MiNGRkQ1NEYjRkZDQTI4I0ZGQzEwNyNGRkIzMDAjRkZBMDAwI0ZGOEYwMCNGRjZGMDAjRkZFNTdGI0ZGRDc0MCNGRkM0MDAjRkZBQjAwIix1PSIjRkZGM0UwI0ZGRTBCMiNGRkNDODAjRkZCNzREI0ZGQTcyNiNGRjk4MDAjRkI4QzAwI0Y1N0MwMCNFRjZDMDAjRTY1MTAwI0ZGRDE4MCNGRkFCNDAjRkY5MTAwI0ZGNkQwMCIsdj0iI0ZCRTlFNyNGRkNDQkMjRkZBQjkxI0ZGOEE2NSNGRjcwNDMjRkY1NzIyI0Y0NTExRSNFNjRBMTkjRDg0MzE1I0JGMzYwQyNGRjlFODAjRkY2RTQwI0ZGM0QwMCNERDJDMDAiLHc9IiNFRkVCRTkjRDdDQ0M4I0JDQUFBNCNBMTg4N0YjOEQ2RTYzIzc5NTU0OCM2RDRDNDEjNUQ0MDM3IzRFMzQyRSMzRTI3MjMiLHg9IiNGQUZBRkEjRjVGNUY1I0VFRUVFRSNFMEUwRTAjQkRCREJEIzlFOUU5RSM3NTc1NzUjNjE2MTYxIzQyNDI0MiMyMTIxMjEiLHk9IiNFQ0VGRjEjQ0ZEOERDI0IwQkVDNSM5MEE0QUUjNzg5MDlDIzYwN0Q4QiM1NDZFN0EjNDU1QTY0IzM3NDc0RiMyNjMyMzgiO2IubXVpPXt9LGIuZmxhdD17fSxiLm11aS5yZWQ9ZihnKSxiLm11aS5waW5rPWYoaCksYi5tdWkucHVycGxlPWYoaSksYi5tdWkuZGVlcHB1cnBsZT1mKGopLGIubXVpLmluZGlnbz1mKGspLGIubXVpLmJsdWU9ZihsKSxiLm11aS5saWdodGJsdWU9ZihtKSxiLm11aS5jeWFuPWYobiksYi5tdWkudGVhbD1mKG8pLGIubXVpLmdyZWVuPWYocCksYi5tdWkubGlnaHRncmVlbj1mKHEpLGIubXVpLmxpbWU9ZihyKSxiLm11aS55ZWxsb3c9ZihzKSxiLm11aS5hbWJlcj1mKHQpLGIubXVpLm9yYW5nZT1mKHUpLGIubXVpLmRlZXBvcmFuZ2U9Zih2KSxiLm11aS5icm93bj1mKHcpLGIubXVpLmdyZXk9Zih4KSxiLm11aS5ibHVlZ3JleT1mKHkpLGIuZmxhdC50dXJxdW9pc2U9IiMxYWJjOWMiLGIuZmxhdC5ncmVlbnNlYT0iIzE2YTA4NSIsYi5mbGF0LnN1bmZsb3dlcj0iI2YxYzQwZiIsYi5mbGF0Lm9yYW5nZT0iI2YzOWMxMiIsYi5mbGF0LmVtZXJsYW5kPSIjMmVjYzcxIixiLmZsYXQubmVwaHJpdGlzPSIjMjdhZTYwIixiLmZsYXQuY2Fycm90PSIjZTY3ZTIyIixiLmZsYXQucHVtcGtpbj0iI2QzNTQwMCIsYi5mbGF0LnBldGVycml2ZXI9IiMzNDk4ZGIiLGIuZmxhdC5iZWxpemVob2xlPSIjMjk4MGI5IixiLmZsYXQuYWxpemFyaW49IiNlNzRjM2MiLGIuZmxhdC5wb21lZ3JhbmF0ZT0iI2MwMzkyYiIsYi5mbGF0LmFtZXRoeXN0PSIjOWI1OWI2IixiLmZsYXQud2lzdGVyaWE9IiM4ZTQ0YWQiLGIuZmxhdC5jbG91ZHM9IiNlY2YwZjEiLGIuZmxhdC5zaWx2ZXI9IiNiZGMzYzciLGIuZmxhdC53ZXRhc3BoYWx0PSIjMzQ0OTVlIixiLmZsYXQubWlkbmlnaHRibHVlPSIjMmMzZTUwIixiLmZsYXQuY29uY3JldGU9IiM5NWE1YTYiLGIuZmxhdC5hc2Jlc3Rvcz0iIzdmOGM4ZCIsYi5pbXBvcnRNVUlDb2xvcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGMgaW4gYi5tdWkpYi5tdWkuaGFzT3duUHJvcGVydHkoYykmJihhW2NdPWIubXVpW2NdKX19KSxkfSk7"}]},{"name":"百度网盘直链提取","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["baidu.com","baidupcs.com","bilibili.com","111.229.37.218","127.0.0.1","localhost","self"],"orig_excludes":["https://message.bilibili.com/*"],"orig_includes":["https://*.bilibili.com/*","https://pan.baidu.com/disk/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"buinfo":"s{\"like\":1,\"coin\":0,\"mid\":310265481,\"vip\":0,\"level\":4,\"csrf\":\"1090dcab18bd920b7257447c4b66956e\"}"},"ts":1595584913106},"enabled":false,"position":2,"file_url":"https://greasyfork.org/scripts/400184-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E6%8F%90%E5%8F%96/code/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E9%93%BE%E6%8F%90%E5%8F%96.user.js","uuid":"65d400ef-6572-4c56-94b1-67c51b3696ba","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSB6eXh1YmluZwovLyBAbmFtZSDnmb7luqbnvZHnm5jnm7Tpk77mj5Dlj5YKLy8gQGRlc2NyaXB0aW9uIFRoaXMgc2NyaXB0IHdhcyBkZWxldGVkIGZyb20gR3JlYXN5IEZvcmssIGFuZCBkdWUgdG8gaXRzIG5lZ2F0aXZlIGVmZmVjdHMsIGl0IGhhcyBiZWVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBmcm9tIHlvdXIgYnJvd3Nlci4KLy8gQHZlcnNpb24gMC4wLjIyLjEKLy8gQGluY2x1ZGUgaHR0cHM6Ly8qLmJpbGliaWxpLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHBzOi8vcGFuLmJhaWR1LmNvbS9kaXNrLyoKLy8gQGV4Y2x1ZGUgaHR0cHM6Ly9tZXNzYWdlLmJpbGliaWxpLmNvbS8qCi8vIEBjb25uZWN0IGJhaWR1LmNvbQovLyBAY29ubmVjdCBiYWlkdXBjcy5jb20KLy8gQGNvbm5lY3QgYmlsaWJpbGkuY29tCi8vIEBjb25uZWN0IDExMS4yMjkuMzcuMjE4Ci8vIEBjb25uZWN0IDEyNy4wLjAuMQovLyBAY29ubmVjdCBsb2NhbGhvc3QKLy8gQGNvbm5lY3Qgc2VsZgovLyBAZ3JhbnQgR01fY29va2llCi8vIEBncmFudCBHTV9kb3dubG9hZAovLyBAZ3JhbnQgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50IEdNX2dldFZhbHVlCi8vIEBncmFudCBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgR01fc2V0Q2xpcGJvYXJkCi8vIEBncmFudCBHTV9vcGVuSW5UYWIKLy8gQGdyYW50IEdNX3htbGh0dHBSZXF1ZXN0Ci8vIEBncmFudCB1bnNhZmVXaW5kb3cKLy8gQHJ1bi1hdCBkb2N1bWVudC1pZGxlCi8vID09L1VzZXJTY3JpcHQ9PQo="},{"name":"懒人专用，全网VIP视频免费破解去广告、全网音乐直接下载、百度网盘直接下载、知乎视频下载等多合一版。长期更新，放心使用。","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["d.pcs.baidu.com"],"orig_excludes":["*://*.eggvod.cn/*"],"orig_includes":["*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s*","*://yun.baidu.com/s*","*://*.zhihu.com/*","*://v.vzuu.com/video/*","*v.youku.com/v_*","*m.youku.com/v*","*m.youku.com/a*","*v.qq.com/x/*","*v.qq.com/p*","*v.qq.com/cover*","*v.qq.com/tv/*","*film.sohu.com/album/*","*tv.sohu.com/*","*.iqiyi.com/v_*","*.iqiyi.com/w_*","*.iqiyi.com/a_*","*.le.com/ptv/vplay/*","*.tudou.com/listplay/*","*.tudou.com/albumplay/*","*.tudou.com/programs/view/*","*.tudou.com/v*","*.mgtv.com/b/*","*.acfun.cn/v/*","*.bilibili.com/video/*","*.bilibili.com/anime/*","*.bilibili.com/bangumi/play/*","*.pptv.com/show/*","*://*.baofeng.com/play/*","*://*.wasu.cn/Play/show*","*://v.yinyuetai.com/video/*","*://v.yinyuetai.com/playlist/*","*://item.taobao.com/*","*://*detail.tmall.com/*","*://*detail.tmall.hk/*","*://*.liangxinyao.com/*","*://music.163.com/song*","*://music.163.com/m/song*","*://y.qq.com/n/*","*://*.kugou.com/song*","*://*.kuwo.cn/yinyue*","*://*.kuwo.cn/play_detail*","*://*.xiami.com/*","*://music.taihe.com/song*","*://*.1ting.com/player*","*://music.migu.cn/v*","*://*.lizhi.fm/*","*://*.qingting.fm/*","*://*.ximalaya.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"current_version":"s4.0.0","init":"n0","lastest_version":"s4.1.7","scode":"s94108"},"ts":1595075679989},"enabled":false,"position":3,"file_url":"https://greasyfork.org/scripts/370634-%E6%87%92%E4%BA%BA%E4%B8%93%E7%94%A8-%E5%85%A8%E7%BD%91vip%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A-%E5%85%A8%E7%BD%91%E9%9F%B3%E4%B9%90%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD-%E7%9F%A5%E4%B9%8E%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E7%AD%89%E5%A4%9A%E5%90%88%E4%B8%80%E7%89%88-%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0-%E6%94%BE%E5%BF%83%E4%BD%BF%E7%94%A8/code/%E6%87%92%E4%BA%BA%E4%B8%93%E7%94%A8%EF%BC%8C%E5%85%A8%E7%BD%91VIP%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A%E3%80%81%E5%85%A8%E7%BD%91%E9%9F%B3%E4%B9%90%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E3%80%81%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E3%80%81%E7%9F%A5%E4%B9%8E%E8%A7%86%E9%A2%91%E4%B8%8B%E8%BD%BD%E7%AD%89%E5%A4%9A%E5%90%88%E4%B8%80%E7%89%88%E3%80%82%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0%EF%BC%8C%E6%94%BE%E5%BF%83%E4%BD%BF%E7%94%A8%E3%80%82.user.js","uuid":"2c073b68-381f-47a0-9564-1d856b754d4a","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDmh5LkurrkuJPnlKjvvIzlhajnvZFWSVDop4bpopHlhY3otLnnoLTop6Pljrvlub/lkYrjgIHlhajnvZHpn7PkuZDnm7TmjqXkuIvovb3jgIHnmb7luqbnvZHnm5jnm7TmjqXkuIvovb3jgIHnn6XkuY7op4bpopHkuIvovb3nrYnlpJrlkIjkuIDniYjjgILplb/mnJ/mm7TmlrDvvIzmlL7lv4Pkvb/nlKjjgIIKLy8gQG5hbWVzcGFjZSAJIGxhbmhhaGEKLy8gQHZlcnNpb24gICAgICAyLjMuNgovLyBAZGVzY3JpcHRpb24gIOiHqueUqOe7hOWQiOWei+WkmuWKn+iDveiEmuacrO+8jOmbhuWQiOS6huS8mOmFt+OAgeeIseWlh+iJuuOAgeiFvuiur+OAgeiKkuaenOetieWFqOe9kVZJUOinhumikeWFjei0ueegtOino+WOu+W5v+WRiu+8jOe9keaYk+S6kemfs+S5kOOAgVFR6Z+z5LmQ44CB6YW354uX44CB6YW35oiR44CB6Jm+57Gz44CB6Jy76JyTRk3jgIHojZTmnp1GTeOAgeWWnOmprOaLiembheetiee9keermemfs+S5kOWFjeWuouaIt+err+S4i+i9ve+8jOeZvuW6pue9keebmOebtOaOpeS4i+i9ve+8jOefpeS5juinhumikeS4i+i9ve+8jOS8mOaDoOWIuOafpeivouetieWHoOS4quiHquW3seW4uOeUqOeahOWKn+iDveOAggovLyBAYXV0aG9yICAgICAgIGxhbmhhaGHvvIxzeWh5ejE5OTDvvIxDaGFv77yMenVpaHVpbWFpCi8vIEBpbmNsdWRlICAgICAgKjovL3Bhbi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAaW5jbHVkZSAgICAgICo6Ly95dW4uYmFpZHUuY29tL2Rpc2svaG9tZSoKLy8gQGluY2x1ZGUgICAgICAqOi8vcGFuLmJhaWR1LmNvbS9zKgovLyBAaW5jbHVkZSAgICAgICo6Ly95dW4uYmFpZHUuY29tL3MqCi8vIEBpbmNsdWRlICAgICAgKjovLyouemhpaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vdi52enV1LmNvbS92aWRlby8qCi8vIEBpbmNsdWRlICAgICAgKnYueW91a3UuY29tL3ZfKgovLyBAaW5jbHVkZSAgICAgICptLnlvdWt1LmNvbS92KgovLyBAaW5jbHVkZSAgICAgICptLnlvdWt1LmNvbS9hKgovLyBAaW5jbHVkZSAgICAgICp2LnFxLmNvbS94LyoKLy8gQGluY2x1ZGUgICAgICAqdi5xcS5jb20vcCoKLy8gQGluY2x1ZGUgICAgICAqdi5xcS5jb20vY292ZXIqCi8vIEBpbmNsdWRlICAgICAgKnYucXEuY29tL3R2LyoKLy8gQGluY2x1ZGUgICAgICAqZmlsbS5zb2h1LmNvbS9hbGJ1bS8qCi8vIEBpbmNsdWRlICAgICAgKnR2LnNvaHUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqLmlxaXlpLmNvbS92XyoKLy8gQGluY2x1ZGUgICAgICAqLmlxaXlpLmNvbS93XyoKLy8gQGluY2x1ZGUgICAgICAqLmlxaXlpLmNvbS9hXyoKLy8gQGluY2x1ZGUgICAgICAqLmxlLmNvbS9wdHYvdnBsYXkvKgovLyBAaW5jbHVkZSAgICAgICoudHVkb3UuY29tL2xpc3RwbGF5LyoKLy8gQGluY2x1ZGUgICAgICAqLnR1ZG91LmNvbS9hbGJ1bXBsYXkvKgovLyBAaW5jbHVkZSAgICAgICoudHVkb3UuY29tL3Byb2dyYW1zL3ZpZXcvKgovLyBAaW5jbHVkZSAgICAgICoudHVkb3UuY29tL3YqCi8vIEBpbmNsdWRlICAgICAgKi5tZ3R2LmNvbS9iLyoKLy8gQGluY2x1ZGUgICAgICAqLmFjZnVuLmNuL3YvKgovLyBAaW5jbHVkZSAgICAgICouYmlsaWJpbGkuY29tL3ZpZGVvLyoKLy8gQGluY2x1ZGUgICAgICAqLmJpbGliaWxpLmNvbS9hbmltZS8qCi8vIEBpbmNsdWRlICAgICAgKi5iaWxpYmlsaS5jb20vYmFuZ3VtaS9wbGF5LyoKLy8gQGluY2x1ZGUgICAgICAqLnBwdHYuY29tL3Nob3cvKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmJhb2ZlbmcuY29tL3BsYXkvKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLndhc3UuY24vUGxheS9zaG93KgovLyBAaW5jbHVkZSAgICAgICo6Ly92Lnlpbnl1ZXRhaS5jb20vdmlkZW8vKgovLyBAaW5jbHVkZSAgICAgICo6Ly92Lnlpbnl1ZXRhaS5jb20vcGxheWxpc3QvKgovLyBAaW5jbHVkZSAgICAgICo6Ly9pdGVtLnRhb2Jhby5jb20vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qZGV0YWlsLnRtYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovLypkZXRhaWwudG1hbGwuaGsvKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmxpYW5neGlueWFvLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovL211c2ljLjE2My5jb20vc29uZyoKLy8gQGluY2x1ZGUgICAgICAqOi8vbXVzaWMuMTYzLmNvbS9tL3NvbmcqCi8vIEBpbmNsdWRlICAgICAgKjovL3kucXEuY29tL24vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmt1Z291LmNvbS9zb25nKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmt1d28uY24veWlueXVlKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmt1d28uY24vcGxheV9kZXRhaWwqCi8vIEBpbmNsdWRlICAgICAgKjovLyoueGlhbWkuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vbXVzaWMudGFpaGUuY29tL3NvbmcqCi8vIEBpbmNsdWRlICAgICAgKjovLyouMXRpbmcuY29tL3BsYXllcioKLy8gQGluY2x1ZGUgICAgICAqOi8vbXVzaWMubWlndS5jbi92KgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmxpemhpLmZtLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5xaW5ndGluZy5mbS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoueGltYWxheWEuY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAqOi8vKi5lZ2d2b2QuY24vKgovLyBAY29ubmVjdCAgICAgIGQucGNzLmJhaWR1LmNvbQovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vanF1ZXJ5QDMuMi4xL2Rpc3QvanF1ZXJ5Lm1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vc3dlZXRhbGVydDJAOQovLyBAbGljZW5zZSAgICAgIEdQTCBMaWNlbnNlCi8vIEBncmFudCAgICAgICAgR01fZG93bmxvYWQKLy8gQGdyYW50ICAgICAgICBHTV9vcGVuSW5UYWIKLy8gQGdyYW50ICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgIEdNX3NldENsaXBib2FyZAovLyBAZ3JhbnQgICAgICAgIEdNX2dldFJlc291cmNlVVJMCi8vIEBncmFudCAgICAgICAgR01fZ2V0UmVzb3VyY2VUZXh0Ci8vID09L1VzZXJTY3JpcHQ9PQoKLy/nmb7luqbnvZHnm5gKKGZ1bmN0aW9uKCkgewp2YXIgcGFuX3RpdGxlPW5ldyBBcnJheSgpCgkJcGFuX3RpdGxlWzBdPSAiaHR0cHM6Ly9wYW4uYmFpZHUuY29tLyIKCQlwYW5fdGl0bGVbMV09ICJodHRwczovL3l1bi5iYWlkdS5jb20vIgogICAgICAgIGxldCBwYW5fbGluayA9IGxvY2F0aW9uLmhyZWY7CgkJZm9yKHZhciBhPTA7YTxwYW5fdGl0bGUubGVuZ3RoO2ErKyl7CgkJCWlmKHBhbl9saW5rLmluZGV4T2YocGFuX3RpdGxlW2FdKSE9IC0xKXsKICAgICAgICAgICAgICAgIHBhbl9saW5rID0gcGFuX2xpbmsucmVwbGFjZSgnYmFpZHUuY29tJywnYmFpZHV3cC5jb20nKTsKCQkJCXZhciBwYW5faHRtbCA9ICI8YSBocmVmPSIrcGFuX2xpbmsrIiB0YXJnZXQ9J19ibGFuaycgc3R5bGU9J2N1cnNvcjpwb2ludGVyO3otaW5kZXg6OTg7ZGlzcGxheTpibG9jazt3aWR0aDozMHB4O2hlaWdodDozMHB4O2xpbmUtaGVpZ2h0OjMwcHg7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3RvcDozMDBweDt0ZXh0LWFsaWduOmNlbnRlcjsnPjxpbWcgc3JjPSdodHRwczovL2Nkbi44MG5vdGUuY29tL3ZpcC5naWYnIHN0eWxlPSd3aWR0aDo1MHB4JyA+PC9hPiI7CgkJCQkkKCJib2R5IikuYXBwZW5kKHBhbl9odG1sKTsKCid1c2Ugc3RyaWN0JwovL+eZvuW6pue9keebmOiEmuacrOW8gOWniwp2YXIgX3R5cGVvZiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiB0eXBlb2YgZTsKfSA6IGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gZSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgZS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIGUgIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBlOwp9OwohZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gZShlLCB0LCBpKSB7CiAgICAgICAgZSA9IGUgfHwgIiIsIHQgPSB0IHx8ICIiLCBpID0gaSB8fCAiIiwgY29uc29sZS5ncm91cCgiW+eZvuW6pue9keebmOebtOmTvuS4i+i9veWKqeaJi10iKSwgY29uc29sZS5sb2coZSwgdCwgaSksIGNvbnNvbGUuZ3JvdXBFbmQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0KCkgewogICAgICAgIHZhciBlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImJhaWR1eXVuUGx1Z2luX0JEVVNTIikgPyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYmFpZHV5dW5QbHVnaW5fQkRVU1MiKSA6ICd7ImJhaWR1eXVuUGx1Z2luX0JEVVNTIjoiIn0nLAogICAgICAgICAgICB0ID0gSlNPTi5wYXJzZShlKS5CRFVTUzsKICAgICAgICByZXR1cm4gdCB8fCBTd2FsLmZpcmUoewogICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICB0aXRsZTogIuaPkOekuiIsCiAgICAgICAgICAgIGh0bWw6ICdBcmlh6ZO+5o6l6I635Y+W6ZyA6KaB6YWN5ZCIPGEgaHJlZj0iaHR0cHM6Ly93d3cuYmFpZHV5dW4ud2lraS96aC1jbi9hc3Npc3RhbnQuaHRtbCIgdGFyZ2V0PSJfYmxhbmsiPuOAkOe9keebmOS4h+iDveWKqeaJi+OAkeS9v+eUqDwvYT4nLAogICAgICAgICAgICBmb290ZXI6ICLjgJDnvZHnm5jkuIfog73liqnmiYvjgJHmmK/kuIvovb3liqnmiYvnmoTlop7lvLrmianlsZXmj5Lku7YiLAogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuWuieijhSIKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUudmFsdWUgJiYgR01fb3BlbkluVGFiKCJodHRwczovL3d3dy5iYWlkdXl1bi53aWtpL3poLWNuL2Fzc2lzdGFudC5odG1sIiwge2FjdGl2ZTogITB9KTsKICAgICAgICB9KSwgdDsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUsIGksIG4pIHsKICAgICAgICB2YXIgYSA9IHQoKTsKICAgICAgICByZXR1cm4gbiA9IG4gfHwgbSwgYSA/ICdhcmlhMmMgIicgKyBlICsgJyIgLS1vdXQgIicgKyBpICsgJyIgLS1oZWFkZXIgIlVzZXItQWdlbnQ6ICcgKyBuICsgJyIgLS1oZWFkZXIgIkNvb2tpZTogQkRVU1M9JyArIGEgKyAnIicgOiAi6K+35YWI5a6J6KOF572R55uY5LiH6IO95Yqp5omL77yM5a6J6KOF5ZCO6K+36YeN5ZCv5rWP6KeI5Zmo77yB77yB77yBIjsKICAgIH0KCiAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgICByZXR1cm4gZSA/IGUucmVwbGFjZSgvJi9nLCAiJmFtcDsiKSA6ICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGEoZSkgewogICAgICAgIHZhciB0ID0gdm9pZCAwLCBpID0gdm9pZCAwLCBuID0gdm9pZCAwLCBhID0gdm9pZCAwLCBvID0gdm9pZCAwLCByID0gdm9pZCAwLAogICAgICAgICAgICBsID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iOwogICAgICAgIGZvciAobiA9IGUubGVuZ3RoLCBpID0gMCwgdCA9ICIiOyBuID4gaTspIHsKICAgICAgICAgICAgaWYgKGEgPSAyNTUgJiBlLmNoYXJDb2RlQXQoaSsrKSwgaSA9PSBuKSB7CiAgICAgICAgICAgICAgICB0ICs9IGwuY2hhckF0KGEgPj4gMiksIHQgKz0gbC5jaGFyQXQoKDMgJiBhKSA8PCA0KSwgdCArPSAiPT0iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG8gPSBlLmNoYXJDb2RlQXQoaSsrKSwgaSA9PSBuKSB7CiAgICAgICAgICAgICAgICB0ICs9IGwuY2hhckF0KGEgPj4gMiksIHQgKz0gbC5jaGFyQXQoKDMgJiBhKSA8PCA0IHwgKDI0MCAmIG8pID4+IDQpLCB0ICs9IGwuY2hhckF0KCgxNSAmIG8pIDw8IDIpLCB0ICs9ICI9IjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHIgPSBlLmNoYXJDb2RlQXQoaSsrKSwgdCArPSBsLmNoYXJBdChhID4+IDIpLCB0ICs9IGwuY2hhckF0KCgzICYgYSkgPDwgNCB8ICgyNDAgJiBvKSA+PiA0KSwgdCArPSBsLmNoYXJBdCgoMTUgJiBvKSA8PCAyIHwgKDE5MiAmIHIpID4+IDYpLCB0ICs9IGwuY2hhckF0KDYzICYgcik7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0OwogICAgfQoKICAgIGZ1bmN0aW9uIG8oKSB7CiAgICAgICAgdmFyIGUgPSAvW1wvXS4rW1wvXS9nOwogICAgICAgIHJldHVybiBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaChlKVswXS5yZXBsYWNlKC9cLy9nLCAiIik7CiAgICB9CgogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgICAgdmFyIHQgPSB2b2lkIDAsIGkgPSB2b2lkIDAsIG4gPSBkb2N1bWVudCwgYSA9IGRlY29kZVVSSTsKICAgICAgICByZXR1cm4gbi5jb29raWUubGVuZ3RoID4gMCAmJiAtMSAhPSAodCA9IG4uY29va2llLmluZGV4T2YoZSArICI9IikpID8gKHQgPSB0ICsgZS5sZW5ndGggKyAxLCBpID0gbi5jb29raWUuaW5kZXhPZigiOyIsIHQpLCAtMSA9PSBpICYmIChpID0gbi5jb29raWUubGVuZ3RoKSwgYShuLmNvb2tpZS5zdWJzdHJpbmcodCwgaSkpKSA6ICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGwoKSB7CiAgICAgICAgZnVuY3Rpb24gZShlKSB7CiAgICAgICAgICAgIGlmIChlLmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gZS5jaGFyQ29kZUF0KDApOwogICAgICAgICAgICAgICAgcmV0dXJuIDEyOCA+IHQgPyBlIDogMjA0OCA+IHQgPyBkKDE5MiB8IHQgPj4+IDYpICsgZCgxMjggfCA2MyAmIHQpIDogZCgyMjQgfCB0ID4+PiAxMiAmIDE1KSArIGQoMTI4IHwgdCA+Pj4gNiAmIDYzKSArIGQoMTI4IHwgNjMgJiB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaSA9IDY1NTM2ICsgMTAyNCAqIChlLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKyAoZS5jaGFyQ29kZUF0KDEpIC0gNTYzMjApOwogICAgICAgICAgICByZXR1cm4gZCgyNDAgfCBpID4+PiAxOCAmIDcpICsgZCgxMjggfCBpID4+PiAxMiAmIDYzKSArIGQoMTI4IHwgaSA+Pj4gNiAmIDYzKSArIGQoMTI4IHwgNjMgJiBpKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHQodCkgewogICAgICAgICAgICByZXR1cm4gKHQgKyAiIiArIE1hdGgucmFuZG9tKCkpLnJlcGxhY2UobCwgZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBbMCwgMiwgMV1bZS5sZW5ndGggJSAzXSwKICAgICAgICAgICAgICAgIGkgPSBlLmNoYXJDb2RlQXQoMCkgPDwgMTYgfCAoZS5sZW5ndGggPiAxID8gZS5jaGFyQ29kZUF0KDEpIDogMCkgPDwgOCB8IChlLmxlbmd0aCA+IDIgPyBlLmNoYXJDb2RlQXQoMikgOiAwKTsKICAgICAgICAgICAgcmV0dXJuIFtvLmNoYXJBdChpID4+PiAxOCksIG8uY2hhckF0KGkgPj4+IDEyICYgNjMpLCB0ID49IDIgPyAiPSIgOiBvLmNoYXJBdChpID4+PiA2ICYgNjMpLCB0ID49IDEgPyAiPSIgOiBvLmNoYXJBdCg2MyAmIGkpXS5qb2luKCIiKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG4oZSkgewogICAgICAgICAgICByZXR1cm4gZS5yZXBsYWNlKC9bXHNcU117MSwzfS9nLCBpKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGEoKSB7CiAgICAgICAgICAgIHJldHVybiBuKHQoKG5ldyBEYXRlKS5nZXRUaW1lKCkpKTsKICAgICAgICB9CgogICAgICAgIHZhciBvID0gIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9+77yBQCPvv6Ul4oCm4oCmJiIsCiAgICAgICAgICAgIGwgPSAvW1x1RDgwMC1cdURCRkZdW1x1REMwMC1cdURGRkZGXXxbXlx4MDAtXHg3Rl0vZywgZCA9IFN0cmluZy5mcm9tQ2hhckNvZGU7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB0ID8gYShTdHJpbmcoZSkpLnJlcGxhY2UoL1srXC9dL2csIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIisiID09IGUgPyAiLSIgOiAiXyI7CiAgICAgICAgICAgIH0pLnJlcGxhY2UoLz0vZywgIiIpIDogYShTdHJpbmcoZSkpOwogICAgICAgIH0ocigiQkFJRFVJRCIpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkKCkgewogICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICQoImRpdi5kaWFsb2ctYm9keSIsIG8pLmNoaWxkcmVuKCkucmVtb3ZlKCksICQoImRpdi5kaWFsb2ctaGVhZGVyIGgzIHNwYW4uZGlhbG9nLXRpdGxlIiwgbykudGV4dCgiIiksICQoImRpdi5kaWFsb2ctdGlwIHAiLCBvKS50ZXh0KCIiKSwgJCgiZGl2LmRpYWxvZy1idXR0b24iLCBvKS5oaWRlKCksICQoImRpdi5kaWFsb2ctcmFkaW8gaW5wdXRbdHlwZT1yYWRpb11bbmFtZT1zaG93bW9kZV1bdmFsdWU9bXVsdGldIiwgbykucHJvcCgiY2hlY2tlZCIsICEwKSwgJCgiZGl2LmRpYWxvZy1yYWRpbyIsIG8pLmhpZGUoKSwgJCgiZGl2LmRpYWxvZy1idXR0b24gYnV0dG9uI2RpYWxvZy1jb3B5LWJ1dHRvbiIsIG8pLmhpZGUoKSwgJCgiZGl2LmRpYWxvZy1idXR0b24gYnV0dG9uI2RpYWxvZy1lZGl0LWJ1dHRvbiIsIG8pLmhpZGUoKSwgJCgiZGl2LmRpYWxvZy1idXR0b24gYnV0dG9uI2RpYWxvZy1leGl0LWJ1dHRvbiIsIG8pLmhpZGUoKSwgby5oaWRlKCksIHIuaGlkZSgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHQgPSBbXSwgYSA9IHZvaWQgMCwgbyA9IHZvaWQgMCwgciA9IHZvaWQgMDsKICAgICAgICB0aGlzLm9wZW4gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoYSA9IGUsIHQgPSBbXSwgImxpbmsiID09IGUudHlwZSAmJiAodCA9IGUubGlzdC51cmxzLCAkKCJkaXYuZGlhbG9nLWhlYWRlciBoMyBzcGFuLmRpYWxvZy10aXRsZSIsIG8pLnRleHQoZS50aXRsZSArICLvvJoiICsgZS5saXN0LmZpbGVuYW1lKSwgJC5lYWNoKGUubGlzdC51cmxzLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgdC51cmwgPSBuKHQudXJsKTsKICAgICAgICAgICAgICAgIHZhciBpID0gJCgnPGRpdj48ZGl2IHN0eWxlPSJ3aWR0aDozMHB4O2Zsb2F0OmxlZnQiPicgKyB0LnJhbmsgKyAnOjwvZGl2PjxkaXYgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+PGEgaHJlZj0iJyArIHQudXJsICsgJyI+JyArIHQudXJsICsgIjwvYT48L2Rpdj48L2Rpdj4iKTsKICAgICAgICAgICAgICAgICQoImRpdi5kaWFsb2ctYm9keSIsIG8pLmFwcGVuZChpKTsKICAgICAgICAgICAgfSkpLCAiYmF0Y2giICE9IGUudHlwZSAmJiAiYmF0Y2hBcmlhIiAhPSBlLnR5cGUgJiYgImJhdGNoQXJpYVJQQyIgIT0gZS50eXBlIHx8ICh0ID0gZS5saXN0LCAkKCJkaXYuZGlhbG9nLWhlYWRlciBoMyBzcGFuLmRpYWxvZy10aXRsZSIsIG8pLnRleHQoZS50aXRsZSksICQuZWFjaChlLmxpc3QsIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIGlmICgiYmF0Y2hBcmlhIiA9PSBlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGkobi5kb3dubG9hZGxpbmssIG4uZmlsZW5hbWUsIGIpOwogICAgICAgICAgICAgICAgICAgIGEgPSAkKCc8ZGl2IHN0eWxlPSJvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXAiPjxkaXYgc3R5bGU9IndpZHRoOjE1MHB4O2Zsb2F0OmxlZnQ7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMiIHRpdGxlPSInICsgbi5maWxlbmFtZSArICciPicgKyBuLmZpbGVuYW1lICsgJzwvZGl2PjxzcGFuPu+8mjwvc3Bhbj48YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJhcmlhMmMtbGluayI+JyArIHIgKyAiPC9hPjwvZGl2PiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgImJhdGNoIiA9PSBlLnR5cGUgJiYgKGEgPSAkKCc8ZGl2IHN0eWxlPSJvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXAiPjxkaXYgc3R5bGU9IndpZHRoOjE1MHB4O2Zsb2F0OmxlZnQ7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMiIHRpdGxlPSInICsgbi5maWxlbmFtZSArICciPicgKyBuLmZpbGVuYW1lICsgJzwvZGl2PjxzcGFuPu+8mjwvc3Bhbj48YSBocmVmPSInICsgbi5kb3dubG9hZGxpbmsgKyAnIj4nICsgbi5kb3dubG9hZGxpbmsgKyAiPC9hPjwvZGl2PiIpKSwgImJhdGNoQXJpYVJQQyIgPT0gZS50eXBlICYmIChhID0gJCgnPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwIj48ZGl2IHN0eWxlPSJ3aWR0aDoxNTBweDtmbG9hdDpsZWZ0O292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIiB0aXRsZT0iJyArIG4uZmlsZW5hbWUgKyAnIj4nICsgbi5maWxlbmFtZSArICc8L2Rpdj48c3Bhbj7vvJo8L3NwYW4+PGJ1dHRvbiBjbGFzcz0iYXJpYS1ycGMiIGRhdGEtbGluaz0iJyArIG4uZG93bmxvYWRsaW5rICsgJyIgZGF0YS1maWxlbmFtZT0iJyArIG4uZmlsZW5hbWUgKyAnIj7ngrnlh7vlj5HpgIHliLBBcmlhPC9idXR0b24+PC9kaXY+JykpLCAkKCJkaXYuZGlhbG9nLWJvZHkiLCBvKS5hcHBlbmQoYSk7CiAgICAgICAgICAgIH0pKSwgInNoYXJlTGluayIgPT0gZS50eXBlICYmICh0ID0gZS5saXN0LCAkKCJkaXYuZGlhbG9nLWhlYWRlciBoMyBzcGFuLmRpYWxvZy10aXRsZSIsIG8pLnRleHQoZS50aXRsZSksICQuZWFjaChlLmxpc3QsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICBpZiAodC5kbGluayA9IG4odC5kbGluayksIDEgIT0gdC5pc2RpcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gJCgnPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwIj48ZGl2IHN0eWxlPSJ3aWR0aDoxNTBweDtmbG9hdDpsZWZ0O292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIiB0aXRsZT0iJyArIHQuc2VydmVyX2ZpbGVuYW1lICsgJyI+JyArIHQuc2VydmVyX2ZpbGVuYW1lICsgJzwvZGl2PjxzcGFuPu+8mjwvc3Bhbj48YSBocmVmPSInICsgdC5kbGluayArICciIGNsYXNzPSJzaGFyZS1kb3dubG9hZCI+JyArIHQuZGxpbmsgKyAiPC9hPjwvZGl2PiIpOwogICAgICAgICAgICAgICAgICAgICQoImRpdi5kaWFsb2ctYm9keSIsIG8pLmFwcGVuZChpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkpLCAicnBjTGluayIgPT0gZS50eXBlICYmICh0ID0gZS5saXN0LCAkKCJkaXYuZGlhbG9nLWhlYWRlciBoMyBzcGFuLmRpYWxvZy10aXRsZSIsIG8pLnRleHQoZS50aXRsZSksICQuZWFjaChlLmxpc3QsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICBpZiAodC5kbGluayA9IG4odC5kbGluayksIDEgIT0gdC5pc2RpcikgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gJCgnPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwIj48ZGl2IHN0eWxlPSJ3aWR0aDoxNTBweDtmbG9hdDpsZWZ0O292ZXJmbG93OmhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIiB0aXRsZT0iJyArIHQuc2VydmVyX2ZpbGVuYW1lICsgJyI+JyArIHQuc2VydmVyX2ZpbGVuYW1lICsgJzwvZGl2PjxzcGFuPu+8mjwvc3Bhbj48YnV0dG9uIGNsYXNzPSJhcmlhLXJwYyIgZGF0YS1saW5rPSInICsgdC5kbGluayArICciIGRhdGEtZmlsZW5hbWU9IicgKyB0LnNlcnZlcl9maWxlbmFtZSArICciPueCueWHu+WPkemAgeWIsEFyaWE8L2J1dHRvbj48L2Rpdj4nKTsKICAgICAgICAgICAgICAgICAgICAkKCJkaXYuZGlhbG9nLWJvZHkiLCBvKS5hcHBlbmQoaSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKSwgInNoYXJlQXJpYUxpbmsiID09IGUudHlwZSAmJiAodCA9IGUubGlzdCwgJCgiZGl2LmRpYWxvZy1oZWFkZXIgaDMgc3Bhbi5kaWFsb2ctdGl0bGUiLCBvKS50ZXh0KGUudGl0bGUpLCAkLmVhY2goZS5saXN0LCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgaWYgKDEgIT0gdC5pc2RpcikgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gaSh0LmRsaW5rLCB0LnNlcnZlcl9maWxlbmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAkKCc8ZGl2IHN0eWxlPSJvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXAiPjxkaXYgc3R5bGU9IndpZHRoOjE1MHB4O2Zsb2F0OmxlZnQ7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMiIHRpdGxlPSInICsgdC5zZXJ2ZXJfZmlsZW5hbWUgKyAnIj4nICsgdC5zZXJ2ZXJfZmlsZW5hbWUgKyAnPC9kaXY+PHNwYW4+77yaPC9zcGFuPjxhIGhyZWY9ImphdmFzY3RpcHQ6dm9pZCgwKSIgY2xhc3M9ImFyaWEyYy1saW5rIj4nICsgbiArICI8L2E+PC9kaXY+Iik7CiAgICAgICAgICAgICAgICAgICAgJCgiZGl2LmRpYWxvZy1ib2R5IiwgbykuYXBwZW5kKGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSksIGUudGlwICYmICQoImRpdi5kaWFsb2ctdGlwIHAiLCBvKS5odG1sKGUudGlwKSwgZS5zaG93Y29weSAmJiAoJCgiZGl2LmRpYWxvZy1idXR0b24iLCBvKS5zaG93KCksICQoImRpdi5kaWFsb2ctYnV0dG9uIGJ1dHRvbiNkaWFsb2ctY29weS1idXR0b24iLCBvKS5zaG93KCkpLCBlLnNob3dlZGl0KSB7CiAgICAgICAgICAgICAgICAkKCJkaXYuZGlhbG9nLWJ1dHRvbiIsIG8pLnNob3coKSwgJCgiZGl2LmRpYWxvZy1idXR0b24gYnV0dG9uI2RpYWxvZy1lZGl0LWJ1dHRvbiIsIG8pLnNob3coKTsKICAgICAgICAgICAgICAgIHZhciBsID0gJCgnPHRleHRhcmVhIG5hbWU9ImRpYWxvZy10ZXh0YXJlYSIgc3R5bGU9ImRpc3BsYXk6bm9uZTtyZXNpemU6bm9uZTt3aWR0aDo3NThweDtoZWlnaHQ6MzAwcHg7d2hpdGUtc3BhY2U6cHJlO3dvcmQtd3JhcDpub3JtYWw7b3ZlcmZsb3cteDpzY3JvbGwiPjwvdGV4dGFyZWE+JyksCiAgICAgICAgICAgICAgICAgICAgZCA9ICIiOwogICAgICAgICAgICAgICAgImJhdGNoIiA9PSBhLnR5cGUgPyAkLmVhY2godCwgZnVuY3Rpb24gKGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAiZXJyb3IiICE9IGkuZG93bmxvYWRsaW5rICYmIChlID09IHQubGVuZ3RoIC0gMSA/IGQgKz0gaS5kb3dubG9hZGxpbmsgOiBkICs9IGkuZG93bmxvYWRsaW5rICsgIlxyXG4iKTsKICAgICAgICAgICAgICAgIH0pIDogImxpbmsiID09IGEudHlwZSAmJiAkLmVhY2godCwgZnVuY3Rpb24gKGUsIGkpIHsKICAgICAgICAgICAgICAgICAgICAiZXJyb3IiICE9IGkudXJsICYmIChlID09IHQubGVuZ3RoIC0gMSA/IGQgKz0gaS51cmwgOiBkICs9IGkudXJsICsgIlxyXG4iKTsKICAgICAgICAgICAgICAgIH0pLCBsLnZhbChkKSwgJCgiZGl2LmRpYWxvZy1ib2R5IiwgbykuYXBwZW5kKGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHIuc2hvdygpLCBvLnNob3coKTsKICAgICAgICB9LCB0aGlzLmNsb3NlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBlKCk7CiAgICAgICAgfSwgbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG4gPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLCByID0gbiA+IDgwMCA/IChuIC0gODAwKSAvIDIgOiAwLAogICAgICAgICAgICAgICAgbCA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZyIgc3R5bGU9IndpZHRoOiA4MDBweDsgdG9wOiAwcHg7IGJvdHRvbTogYXV0bzsgbGVmdDogJyArIHIgKyAncHg7IHJpZ2h0OiBhdXRvOyBkaXNwbGF5OiBoaWRkZW47IHZpc2liaWxpdHk6IHZpc2libGU7IHotaW5kZXg6IDUyOyI+PC9kaXY+JyksCiAgICAgICAgICAgICAgICBkID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nLWhlYWRlciI+PGgzPjxzcGFuIGNsYXNzPSJkaWFsb2ctdGl0bGUiIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDo3NDBweDt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3cteDpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+PC9zcGFuPjwvaDM+PC9kaXY+JyksCiAgICAgICAgICAgICAgICBzID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nLWNvbnRyb2wiPjxzcGFuIGNsYXNzPSJkaWFsb2ctaWNvbiBkaWFsb2ctY2xvc2UiPsOXPC9zcGFuPjwvZGl2PicpLAogICAgICAgICAgICAgICAgYyA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1ib2R5IiBzdHlsZT0ibWF4LWhlaWdodDo0NTBweDtvdmVyZmxvdy15OmF1dG87cGFkZGluZzowIDIwcHg7Ij48L2Rpdj4nKSwKICAgICAgICAgICAgICAgIHAgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctdGlwIiBzdHlsZT0icGFkZGluZy1sZWZ0OjIwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlci10b3A6IDFweCBzb2xpZCAjYzRkYmZlO2NvbG9yOiAjZGMzNzNjOyI+PHA+PC9wPjwvZGl2PicpOwogICAgICAgICAgICBsLmFwcGVuZChkLmFwcGVuZChzKSkuYXBwZW5kKGMpOwogICAgICAgICAgICB2YXIgdSA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1idXR0b24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvZGl2PicpLAogICAgICAgICAgICAgICAgaCA9ICQoJzxkaXYgc3R5bGU9ImRpc3BsYXk6dGFibGU7bWFyZ2luOmF1dG8iPjwvZGl2PicpLAogICAgICAgICAgICAgICAgZiA9ICQoJzxidXR0b24gaWQ9ImRpYWxvZy1jb3B5LWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZTt3aWR0aDogMTAwcHg7IG1hcmdpbjogNXB4IDAgMTBweCAwOyBjdXJzb3I6IHBvaW50ZXI7IGJhY2tncm91bmQ6ICNjYzMyMzU7IGJvcmRlcjogbm9uZTsgaGVpZ2h0OiAzMHB4OyBjb2xvcjogI2ZmZjsgYm9yZGVyLXJhZGl1czogM3B4OyI+5aSN5Yi25YWo6YOo6ZO+5o6lPC9idXR0b24+JyksCiAgICAgICAgICAgICAgICB2ID0gJCgnPGJ1dHRvbiBpZD0iZGlhbG9nLWVkaXQtYnV0dG9uIiBzdHlsZT0iZGlzcGxheTpub25lIj7nvJbovpE8L2J1dHRvbj4nKSwKICAgICAgICAgICAgICAgIGcgPSAkKCc8YnV0dG9uIGlkPSJkaWFsb2ctZXhpdC1idXR0b24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiPumAgOWHujwvYnV0dG9uPicpOwogICAgICAgICAgICByZXR1cm4gaC5hcHBlbmQoZikuYXBwZW5kKHYpLmFwcGVuZChnKSwgdS5hcHBlbmQoaCksIGwuYXBwZW5kKHUpLCBmLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gIiI7CiAgICAgICAgICAgICAgICAiYmF0Y2giID09IGEudHlwZSAmJiAkLmVhY2godCwgZnVuY3Rpb24gKGksIG4pIHsKICAgICAgICAgICAgICAgICAgICAiZXJyb3IiICE9IG4uZG93bmxvYWRsaW5rICYmIChpID09IHQubGVuZ3RoIC0gMSA/IGUgKz0gbi5kb3dubG9hZGxpbmsgOiBlICs9IG4uZG93bmxvYWRsaW5rICsgIlxyXG4iKTsKICAgICAgICAgICAgICAgIH0pLCAiYmF0Y2hBcmlhIiA9PSBhLnR5cGUgJiYgJC5lYWNoKHQsIGZ1bmN0aW9uIChuLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgImVycm9yIiAhPSBhLmRvd25sb2FkbGluayAmJiAobiA9PSB0Lmxlbmd0aCAtIDEgPyBlICs9IGkoYS5kb3dubG9hZGxpbmssIGEuZmlsZW5hbWUsIGIpIDogZSArPSBpKGEuZG93bmxvYWRsaW5rLCBhLmZpbGVuYW1lLCBiKSArICJcclxuIik7CiAgICAgICAgICAgICAgICB9KSwgInJwYyIgPT0gYS50eXBlICYmICQuZWFjaCh0LCBmdW5jdGlvbiAoaSwgbikgewogICAgICAgICAgICAgICAgICAgICJlcnJvciIgIT0gbi5kb3dubG9hZGxpbmsgJiYgKGkgPT0gdC5sZW5ndGggLSAxID8gZSArPSBuLmRvd25sb2FkbGluayA6IGUgKz0gbi5kb3dubG9hZGxpbmsgKyAiXHJcbiIpOwogICAgICAgICAgICAgICAgfSksICJzaGFyZUxpbmsiID09IGEudHlwZSAmJiAkLmVhY2godCwgZnVuY3Rpb24gKGksIG4pIHsKICAgICAgICAgICAgICAgICAgICAiZXJyb3IiICE9IG4uZGxpbmsgJiYgKGkgPT0gdC5sZW5ndGggLSAxID8gZSArPSBuLmRsaW5rIDogZSArPSBuLmRsaW5rICsgIlxyXG4iKTsKICAgICAgICAgICAgICAgIH0pLCAic2hhcmVBcmlhTGluayIgPT0gYS50eXBlICYmICQuZWFjaCh0LCBmdW5jdGlvbiAobiwgYSkgewogICAgICAgICAgICAgICAgICAgICJlcnJvciIgIT0gYS5kbGluayAmJiAobiA9PSB0Lmxlbmd0aCAtIDEgPyBlICs9IGkoYS5kbGluaywgYS5zZXJ2ZXJfZmlsZW5hbWUpIDogZSArPSBpKGEuZGxpbmssIGEuc2VydmVyX2ZpbGVuYW1lKSArICJcclxuIik7CiAgICAgICAgICAgICAgICB9KSwgR01fc2V0Q2xpcGJvYXJkKGUsICJ0ZXh0IiksICIiICE9IGUgPyB4LmZpcmUoewogICAgICAgICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAi5bey5bCG6ZO+5o6l5aSN5Yi25Yiw5Ymq6LS05p2/77yBIgogICAgICAgICAgICAgICAgfSkgOiB4LmZpcmUoe2ljb246ICJlcnJvciIsIHRleHQ6ICLlpI3liLblpLHotKXvvIzor7fmiYvliqjlpI3liLbvvIEifSk7CiAgICAgICAgICAgIH0pLCB2LmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gJCgiZGl2LmRpYWxvZy1ib2R5IHRleHRhcmVhW25hbWU9ZGlhbG9nLXRleHRhcmVhXSIsIG8pOwogICAgICAgICAgICAgICAgJCgiZGl2LmRpYWxvZy1ib2R5IGRpdiIsIG8pLmhpZGUoKSwgZi5oaWRlKCksIHYuaGlkZSgpLCBlLnNob3coKSwgJGRpYWxvZ19yYWRpb19kaXYuc2hvdygpLCBnLnNob3coKTsKICAgICAgICAgICAgfSksIGcuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSAkKCJkaXYuZGlhbG9nLWJvZHkgdGV4dGFyZWFbbmFtZT1kaWFsb2ctdGV4dGFyZWFdIiwgbyksIHQgPSAkKCJkaXYuZGlhbG9nLWJvZHkgZGl2Iiwgbyk7CiAgICAgICAgICAgICAgICBlLmhpZGUoKSwgJGRpYWxvZ19yYWRpb19kaXYuaGlkZSgpLCB0LnNob3coKSwgZy5oaWRlKCksIGYuc2hvdygpLCB2LnNob3coKTsKICAgICAgICAgICAgfSksIGwuYXBwZW5kKHApLCAkKCJib2R5IikuYXBwZW5kKGwpLCBzLmNsaWNrKGUpLCBsOwogICAgICAgIH0oKSwgciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGUgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctc2hhZG93IiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAwcHg7IHRvcDogMHB4OyB6LWluZGV4OiA1MDsgYmFja2dyb3VuZDogcmdiKDAsIDAsIDApIG5vbmUgcmVwZWF0IHNjcm9sbCAwJSAwJTsgb3BhY2l0eTogMC41OyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBkaXNwbGF5OiBub25lOyI+PC9kaXY+Jyk7CiAgICAgICAgICAgIHJldHVybiAkKCJib2R5IikuYXBwZW5kKGUpLCBlOwogICAgICAgIH0oKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzKGUsIHQpIHsKICAgICAgICBmdW5jdGlvbiBpKCkgewogICAgICAgICAgICAkKCIjZGlhbG9nLWltZyIsIG4pLmF0dHIoInNyYyIsICIiKSwgJCgiI2RpYWxvZy1lcnIiKS50ZXh0KCIiKSwgbi5oaWRlKCksIGEuaGlkZSgpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG4gPSB2b2lkIDAsIGEgPSB2b2lkIDA7CiAgICAgICAgdGhpcy5vcGVuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZSAmJiAkKCIjZGlhbG9nLWltZyIpLmF0dHIoInNyYyIsIGUuaW1nKSwgbi5zaG93KCksIGEuc2hvdygpOwogICAgICAgIH0sIHRoaXMuY2xvc2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGkoKTsKICAgICAgICB9LCBuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgbiA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGEgPSBuID4gNTIwID8gKG4gLSA1MjApIC8gMiA6IDAsCiAgICAgICAgICAgICAgICBvID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nIiBpZD0iZGlhbG9nLXZjb2RlIiBzdHlsZT0id2lkdGg6NTIwcHg7dG9wOjBweDtib3R0b206YXV0bztsZWZ0OicgKyBhICsgJ3B4O3JpZ2h0OmF1dG87ZGlzcGxheTpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTt6LWluZGV4OjUyIj48L2Rpdj4nKSwKICAgICAgICAgICAgICAgIHIgPSAkKCc8ZGl2IGNsYXNzPSJkaWFsb2ctaGVhZGVyIj48aDM+PHNwYW4gY2xhc3M9ImRpYWxvZy1oZWFkZXItdGl0bGUiPjxlbSBjbGFzcz0ic2VsZWN0LXRleHQiPuaPkOekujwvZW0+PC9zcGFuPjwvaDM+PC9kaXY+JyksCiAgICAgICAgICAgICAgICBsID0gJCgnPGRpdiBjbGFzcz0iZGlhbG9nLWNvbnRyb2wiPjxzcGFuIGNsYXNzPSJkaWFsb2ctaWNvbiBkaWFsb2ctY2xvc2UgaWNvbiBpY29uLWNsb3NlIj48c3BhbiBjbGFzcz0ic2ljb24iPng8L3NwYW4+PC9zcGFuPjwvZGl2PicpLAogICAgICAgICAgICAgICAgZCA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1ib2R5Ij48L2Rpdj4nKSwgcyA9ICQoJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6MjJweCI+PC9kaXY+JyksCiAgICAgICAgICAgICAgICBjID0gJCgnPGRpdiBjbGFzcz0iZG93bmxvYWQtdmVyaWZ5IiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4O3BhZGRpbmc6MCAyOHB4O3RleHQtYWxpZ246bGVmdDtmb250LXNpemU6MTJweDsiPjwvZGl2PicpLAogICAgICAgICAgICAgICAgcCA9ICQoJzxkaXYgY2xhc3M9InZlcmlmeS1ib2R5Ij7or7fovpPlhaXpqozor4HnoIHvvJo8L2Rpdj4nKSwKICAgICAgICAgICAgICAgIHUgPSAkKCc8aW5wdXQgaWQ9ImRpYWxvZy1pbnB1dCIgdHlwZT0idGV4dCIgc3R5bGU9InBhZGRpbmc6M3B4O3dpZHRoOjg1cHg7aGVpZ2h0OjIzcHg7Ym9yZGVyOjFweCBzb2xpZCAjYzZjNmM2O2JhY2tncm91bmQtY29sb3I6d2hpdGU7dmVydGljYWwtYWxpZ246bWlkZGxlOyIgY2xhc3M9ImlucHV0LWNvZGUiIG1heGxlbmd0aD0iNCI+JyksCiAgICAgICAgICAgICAgICBoID0gJCgnPGltZyBpZD0iZGlhbG9nLWltZyIgY2xhc3M9ImltZy1jb2RlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBhbHQ9IueCueWHu+aNouS4gOW8oCIgc3JjPSIiIHdpZHRoPSIxMDAiIGhlaWdodD0iMzAiPicpLAogICAgICAgICAgICAgICAgZiA9ICQoJzxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgc3R5bGU9InRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7IiBjbGFzcz0idW5kZXJsaW5lIj7mjaLkuIDlvKA8L2E+JyksCiAgICAgICAgICAgICAgICB2ID0gJCgnPGRpdiBpZD0iZGlhbG9nLWVyciIgc3R5bGU9InBhZGRpbmctbGVmdDo4NHB4O2hlaWdodDoxOHB4O2NvbG9yOiNkODAwMDAiIGNsYXNzPSJ2ZXJpZnktZXJyb3IiPjwvZGl2PicpLAogICAgICAgICAgICAgICAgZyA9ICQoJzxkaXYgY2xhc3M9ImRpYWxvZy1mb290ZXIgZy1jbGVhcmZpeCI+PC9kaXY+JyksCiAgICAgICAgICAgICAgICB3ID0gJCgnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWJsdWUiIGRhdGEtYnV0dG9uLWlkPSIiIGRhdGEtYnV0dG9uLWluZGV4IGhyZWY9ImphdmFzY3JpcHQ6OyIgc3R5bGU9InBhZGRpbmctbGVmdDozNnB4Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiIHN0eWxlPSJwYWRkaW5nLXJpZ2h0OjM2cHg7Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG87Ij7noa7lrpo8L3NwYW4+PC9zcGFuPjwvYT4nKSwKICAgICAgICAgICAgICAgIG0gPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGRhdGEtYnV0dG9uLWlkPSIiIGRhdGEtYnV0dG9uLWluZGV4IGhyZWY9ImphdmFzY3JpcHQ6OyIgc3R5bGU9InBhZGRpbmctbGVmdDogMzZweDsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCIgc3R5bGU9InBhZGRpbmctcmlnaHQ6IDM2cHg7Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOiBhdXRvOyI+5Y+W5raIPC9zcGFuPjwvc3Bhbj48L2E+Jyk7CiAgICAgICAgICAgIHJldHVybiByLmFwcGVuZChsKSwgcC5hcHBlbmQodSkuYXBwZW5kKGgpLmFwcGVuZChmKSwgYy5hcHBlbmQocCkuYXBwZW5kKHYpLCBzLmFwcGVuZChjKSwgZC5hcHBlbmQocyksIGcuYXBwZW5kKHcpLmFwcGVuZChtKSwgby5hcHBlbmQocikuYXBwZW5kKGQpLmFwcGVuZChnKSwgJCgiYm9keSIpLmFwcGVuZChvKSwgbC5jbGljayhpKSwgaC5jbGljayhlKSwgZi5jbGljayhlKSwgdS5rZXlwcmVzcyhmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgMTMgPT0gZS53aGljaCAmJiB0KCk7CiAgICAgICAgICAgIH0pLCB3LmNsaWNrKHQpLCBtLmNsaWNrKGkpLCB1LmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICQoIiNkaWFsb2ctZXJyIikudGV4dCgiIik7CiAgICAgICAgICAgIH0pLCBvOwogICAgICAgIH0oKSwgYSA9ICQoImRpdi5kaWFsb2ctc2hhZG93Iik7CiAgICB9CgogICAgZnVuY3Rpb24gYygpIHsKICAgICAgICBmdW5jdGlvbiB0KCkgewogICAgICAgICAgICByZXR1cm4gcmVxdWlyZSgiZGlzay1zeXN0ZW06d2lkZ2V0L3BhZ2VNb2R1bGUvbGlzdC9saXN0SW5pdC5qcyIpLmdldENoZWNrZWRJdGVtcygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaSgpIHsKICAgICAgICAgICAgTiA9IEMoKSwgVSA9IE8udGltZXN0YW1wLCBCID0gTy5NWUJEU1RPS0VOLCB6ID0gbCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbigpIHsKICAgICAgICAgICAgbygpLCByKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvKCkgewogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAiLmV4ZS1kb3dubG9hZCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnRhcmdldC5pbm5lclRleHQgJiYgRShlLnRhcmdldC5pbm5lclRleHQpOwogICAgICAgICAgICB9KSwgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5hcmlhLXJwYyIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IChlLnRhcmdldC5kYXRhc2V0LmxpbmssIGUudGFyZ2V0LmRhdGFzZXQuZmlsZW5hbWUpLCBpID0ge307CiAgICAgICAgICAgICAgICBfKCkgfHwgKGkgPSB7IlVzZXItQWdlbnQiOiBtfSksIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJIRUFEIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBpLAogICAgICAgICAgICAgICAgICAgIHVybDogZS50YXJnZXQuZGF0YXNldC5saW5rLAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLmZpbmFsVXJsOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBrLmRvbWFpbiArICI6IiArIGsucG9ydCArICIvanNvbnJwYyIsIGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IChuZXcgRGF0ZSkuZ2V0VGltZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb25ycGM6ICIyLjAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogImFyaWEyLmFkZFVyaSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbInRva2VuOiIgKyBrLnRva2VuLCBbaV0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiBrLmRpciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0OiB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IF8oKSA/IFsiVXNlci1BZ2VudDoiICsgYl0gOiBbIlVzZXItQWdlbnQ6IiArIG1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyJVc2VyLUFnZW50IjogbX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogImpzb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDNlMywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVzcG9uc2UucmVzdWx0ID8geC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5Lu75Yqh5bey5Y+R6YCB6IezUlBD5LiL6L295ZmoIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6IHguZmlyZSh7aWNvbjogImVycm9yIiwgdGl0bGU6IGUucmVzcG9uc2UubWVzc2FnZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb250aW1lb3V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguZmlyZSh7aWNvbjogImVycm9yIiwgdGl0bGU6ICLml6Dms5Xov57mjqXliLBSUEPmnI3liqHvvIzor7fmo4Dmn6VSUEPphY3nva4ifSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByKCkgewogICAgICAgICAgICAkKGRvY3VtZW50KS5vbigiY2xpY2siLCAnW3RpdGxlPSLliIbkuqsiXScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIDAgPT09ICQoIiNzaGFyZS1tZXRob2QtcHVibGljIikubGVuZ3RoID8gJCgiLnNoYXJlLW1ldGhvZC1saW5lIikucGFyZW50KCkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJzaGFyZS1tZXRob2QtbGluZSI+PGlucHV0IHR5cGU9InJhZGlvIiBpZD0ic2hhcmUtbWV0aG9kLXB1YmxpYyIgbmFtZT0ic2hhcmUtbWV0aG9kIiB2YWx1ZT0icHVibGljIiBjaGVja2VkPjxzcGFuIGNsYXNzPSJpY29uIHJhZGlvLWljb24gaWNvbi1yYWRpby1ub24iPjwvc3Bhbj48bGFiZWwgZm9yPSJzaGFyZS1tZXRob2QtcHVibGljIj48Yj7lhazlvIDliIbkuqs8L2I+PHNwYW4+5Lu75L2V5Lq66K6/6Zeu6ZO+5o6l5Y2z5Y+v5p+l55yL77yM5LiL6L2977yBPC9zcGFuPjwvZGl2PicpIDogKGNsZWFySW50ZXJ2YWwoZSksICQoZG9jdW1lbnQpLm9mZigiY2xpY2siLCAnW3RpdGxlPSLliIbkuqsiXScpKTsKICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcygpIHsKICAgICAgICAgICAgJCgiZGl2LiIgKyBmWyJiYXItc2VhcmNoIl0pLmNzcygid2lkdGgiLCAiMTglIik7CiAgICAgICAgICAgIHZhciBlID0gJCgnPHNwYW4gY2xhc3M9ImctZHJvcGRvd24tYnV0dG9uIj48L3NwYW4+JyksCiAgICAgICAgICAgICAgICB0ID0gJCgnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWJsdWUiIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1waWNwcmUtZG93bmxvYWQiIHRpdGxlPSLnmb7luqbnvZHnm5jkuIvovb3liqnmiYsiPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDogNjBweDsiPuS4i+i9veWKqeaJizwvc3Bhbj48L3NwYW4+PC9hPicpLAogICAgICAgICAgICAgICAgaSA9ICQoJzxzcGFuIGNsYXNzPSJtZW51IiBzdHlsZT0id2lkdGg6MTE0cHgiPjwvc3Bhbj4nKSwKICAgICAgICAgICAgICAgIG4gPSAkKCc8c3BhbiBjbGFzcz0iZy1idXR0b24tbWVudSIgc3R5bGU9ImRpc3BsYXk6YmxvY2siPjwvc3Bhbj4nKSwKICAgICAgICAgICAgICAgIGEgPSAkKCc8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24gZy1kcm9wZG93bi1idXR0b24tc2Vjb25kIiBtZW51bGV2ZWw9IjIiPjwvc3Bhbj4nKSwKICAgICAgICAgICAgICAgIG8gPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG8iPuebtOmTvuS4i+i9vTwvc3Bhbj48L3NwYW4+PC9hPicpLAogICAgICAgICAgICAgICAgciA9ICQoJzxzcGFuIGNsYXNzPSJtZW51IiBzdHlsZT0id2lkdGg6MTIwcHg7bGVmdDo3OXB4Ij48L3NwYW4+JyksCiAgICAgICAgICAgICAgICBsID0gJCgnPGEgaWQ9ImJhdGNoaHR0cGxpbmstZGlyZWN0IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDo7Ij7mmL7npLrpk77mjqU8L2E+Jyk7CiAgICAgICAgICAgIHIuYXBwZW5kKGwpLCBuLmFwcGVuZChhLmFwcGVuZChvKS5hcHBlbmQocikpLCBuLmhvdmVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGEudG9nZ2xlQ2xhc3MoImJ1dHRvbi1vcGVuIik7CiAgICAgICAgICAgIH0pLCBsLmNsaWNrKEEpOwogICAgICAgICAgICB2YXIgZCA9ICQoJzxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBzdHlsZT0iZGlzcGxheTpibG9jayI+PC9zcGFuPicpLAogICAgICAgICAgICAgICAgcyA9ICQoJzxzcGFuIGNsYXNzPSJnLWRyb3Bkb3duLWJ1dHRvbiBnLWRyb3Bkb3duLWJ1dHRvbi1zZWNvbmQiIG1lbnVsZXZlbD0iMiI+PC9zcGFuPicpLAogICAgICAgICAgICAgICAgdiA9ICQoJzxhIGNsYXNzPSJnLWJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDo7Ij48c3BhbiBjbGFzcz0iZy1idXR0b24tcmlnaHQiPjxzcGFuIGNsYXNzPSJ0ZXh0IiBzdHlsZT0id2lkdGg6YXV0byI+QXJpYeS4i+i9vTwvc3Bhbj48L3NwYW4+PC9hPicpLAogICAgICAgICAgICAgICAgZyA9ICQoJzxzcGFuIGNsYXNzPSJtZW51IiBzdHlsZT0id2lkdGg6MTIwcHg7bGVmdDo3OXB4Ij48L3NwYW4+JyksCiAgICAgICAgICAgICAgICB3ID0gJCgnPGEgaWQ9ImJhdGNoaHR0cGxpbmstYXJpYSIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6OyI+5pi+56S66ZO+5o6lPC9hPicpOwogICAgICAgICAgICBnLmFwcGVuZCh3KSwgZC5hcHBlbmQocy5hcHBlbmQodikuYXBwZW5kKGcpKSwgZC5ob3ZlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzLnRvZ2dsZUNsYXNzKCJidXR0b24tb3BlbiIpOwogICAgICAgICAgICB9KSwgdy5jbGljayhBKTsKICAgICAgICAgICAgdmFyIG0gPSAkKCc8c3BhbiBjbGFzcz0iZy1idXR0b24tbWVudSIgc3R5bGU9ImRpc3BsYXk6YmxvY2siPjwvc3Bhbj4nKSwKICAgICAgICAgICAgICAgIGIgPSAkKCc8c3BhbiBjbGFzcz0iZy1kcm9wZG93bi1idXR0b24gZy1kcm9wZG93bi1idXR0b24tc2Vjb25kIiBtZW51bGV2ZWw9IjIiPjwvc3Bhbj4nKSwKICAgICAgICAgICAgICAgIHkgPSAkKCc8YSBjbGFzcz0iZy1idXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48c3BhbiBjbGFzcz0idGV4dCIgc3R5bGU9IndpZHRoOmF1dG8iPuWvvOWHuuWIsFJQQzwvc3Bhbj48L3NwYW4+PC9hPicpLAogICAgICAgICAgICAgICAgeCA9ICQoJzxzcGFuIGNsYXNzPSJtZW51IiBzdHlsZT0id2lkdGg6MTIwcHg7bGVmdDo3OXB4Ij48L3NwYW4+JyksCiAgICAgICAgICAgICAgICBrID0gJCgnPGEgaWQ9ImJhdGNoaHR0cGxpbmstcnBjIiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDo7Ij7mmL7npLrpk77mjqU8L2E+JyksCiAgICAgICAgICAgICAgICBfID0gJCgnPGEgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6OyI+UlBD6YWN572uPC9hPicpOwogICAgICAgICAgICB4LmFwcGVuZChrKS5hcHBlbmQoXyksIG0uYXBwZW5kKGIuYXBwZW5kKHkpLmFwcGVuZCh4KSksIG0uaG92ZXIoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgYi50b2dnbGVDbGFzcygiYnV0dG9uLW9wZW4iKTsKICAgICAgICAgICAgfSksIGsuY2xpY2soQSksIF8uY2xpY2soYyk7CiAgICAgICAgICAgIHZhciBHID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLW1lbnUiIHN0eWxlPSJkaXNwbGF5OmJsb2NrIj48L3NwYW4+JyksCiAgICAgICAgICAgICAgICBNID0gJCgnPHNwYW4gY2xhc3M9ImctZHJvcGRvd24tYnV0dG9uIGctZHJvcGRvd24tYnV0dG9uLXNlY29uZCIgbWVudWxldmVsPSIyIj48L3NwYW4+JyksCiAgICAgICAgICAgICAgICBDID0gJCgnPGEgY2xhc3M9ImctYnV0dG9uIiBocmVmPSJqYXZhc2NyaXB0OjsiPjxzcGFuIGNsYXNzPSJnLWJ1dHRvbi1yaWdodCI+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDphdXRvIj5BUEnkuIvovb08L3NwYW4+PC9zcGFuPjwvYT4nKSwKICAgICAgICAgICAgICAgIGogPSAkKCc8c3BhbiBjbGFzcz0ibWVudSIgc3R5bGU9IndpZHRoOjEyMHB4O2xlZnQ6NzdweCI+PC9zcGFuPicpLAogICAgICAgICAgICAgICAgRCA9ICQoJzxhIGlkPSJkb3dubG9hZC1hcGkiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OjsiPuebtOaOpeS4i+i9vTwvYT4nKSwKICAgICAgICAgICAgICAgIEkgPSAkKCc8YSBpZD0iYmF0Y2hodHRwbGluay1hcGkiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OjsiPuaYvuekuumTvuaOpTwvYT4nKSwKICAgICAgICAgICAgICAgIFYgPSAkKCc8YSBpZD0iYXBwaWQtc2V0dGluZyIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6OyI+56We56eY5Luj56CBPC9hPicpLAogICAgICAgICAgICAgICAgRSA9ICQoJzxhIGlkPSJkZWZhdWx0LXNldHRpbmciIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OjsiIHN0eWxlPSJjb2xvcjogIzk5OTsiPuaBouWkjem7mOiupDwvYT4nKTsKICAgICAgICAgICAgai5hcHBlbmQoRCkuYXBwZW5kKEkpLmFwcGVuZChWKS5hcHBlbmQoRSk7CiAgICAgICAgICAgIHZhciBSID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLW1lbnUiIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2N1cnNvcjogcG9pbnRlciI+5YiG5Lqr6YCJ5Lit5paH5Lu2PC9zcGFuPicpLAogICAgICAgICAgICAgICAgTyA9ICQoJzxhIGRhdGEtbWVudS1pZD0iYi1tZW51MjA5IiBzdHlsZT0iY29sb3I6ICNlODU2NTM7Zm9udC13ZWlnaHQ6IDcwMDsiIGNsYXNzPSJnLWJ1dHRvbi1tZW51IiBocmVmPSJqYXZhc2NyaXB0OjsiPlZlciAnICsgaCArICI8L2E+Iik7CiAgICAgICAgICAgIEcuYXBwZW5kKE0uYXBwZW5kKEMpLmFwcGVuZChqKSksIEcuaG92ZXIoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgTS50b2dnbGVDbGFzcygiYnV0dG9uLW9wZW4iKTsKICAgICAgICAgICAgfSksIEQuY2xpY2soVCksIEkuY2xpY2soQSksIFYuY2xpY2socCksIEUuY2xpY2sodSksIE8uY2xpY2soUyksIFIuY2xpY2soUCksIGkuYXBwZW5kKEcpLmFwcGVuZChkKS5hcHBlbmQobSkuYXBwZW5kKFIpLCBlLmFwcGVuZCh0KS5hcHBlbmQoaSksIGUuaG92ZXIoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZS50b2dnbGVDbGFzcygiYnV0dG9uLW9wZW4iKTsKICAgICAgICAgICAgfSksICQoIi4iICsgZlsibGlzdC10b29scyJdKS5hcHBlbmQoZSksICQoIi4iICsgZlsibGlzdC10b29scyJdKS5jc3MoImhlaWdodCIsICI0MHB4Iik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgICAgICB2YXIgZSA9ICIiOwogICAgICAgICAgICBlICs9ICc8ZGl2IHN0eWxlPSJkaXNwbGF5OiBmbGV4O2FsaWduLWl0ZW1zOiBjZW50ZXI7anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyI+PGxhYmVsIGZvcj0icnBjRG9tYWluIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OiA1cHg7ZmxleDogMCAwIDkwcHg7Ij7kuLvmnLrvvJo8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icnBjRG9tYWluIiB2YWx1ZT0iJyArIGsuZG9tYWluICsgJyIgY2xhc3M9InN3YWwyLWlucHV0IiBwbGFjZWhvbGRlcj0iaHR0cDovL2xvY2FsaG9zdCI+PC9kaXY+JywgZSArPSAnPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDthbGlnbi1pdGVtczogY2VudGVyO2p1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsiPjxsYWJlbCBmb3I9InJwY1BvcnQiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDVweDtmbGV4OiAwIDAgOTBweDsiPuerr+WPo++8mjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJycGNQb3J0IiB2YWx1ZT0iJyArIGsucG9ydCArICciIGNsYXNzPSJzd2FsMi1pbnB1dCIgcGxhY2Vob2xkZXI9IjY4MDAiPjwvZGl2PicsIGUgKz0gJzxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7YWxpZ24taXRlbXM6IGNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij48bGFiZWwgZm9yPSJycGNUb2tlbiIgc3R5bGU9Im1hcmdpbi1yaWdodDogNXB4O2ZsZXg6IDAgMCA5MHB4OyI+5a+G6ZKl77yaPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJwY1Rva2VuIiB2YWx1ZT0iJyArIGsudG9rZW4gKyAnIiBjbGFzcz0ic3dhbDItaW5wdXQiIHBsYWNlaG9sZGVyPSLmsqHmnInnlZnnqboiPjwvZGl2PicsIGUgKz0gJzxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7YWxpZ24taXRlbXM6IGNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Ij48bGFiZWwgZm9yPSJycGNEaXIiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6IDVweDtmbGV4OiAwIDAgOTBweDsiPuS4i+i9vei3r+W+hO+8mjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJycGNEaXIiIHZhbHVlPSInICsgay5kaXIgKyAnIiBjbGFzcz0ic3dhbDItaW5wdXQiIHBsYWNlaG9sZGVyPSLpu5jorqTkuLpEOiI+PC9kaXY+JywgZSA9ICI8ZGl2PiIgKyBlICsgIjwvZGl2PiI7CiAgICAgICAgICAgIHZhciB0ID0gJChlKTsKICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiUlBD6YWN572uIiwKICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiAhMSwKICAgICAgICAgICAgICAgIGh0bWw6IHRbMF0sCiAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiAhMCwKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi5L+d5a2YIiwKICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUudmFsdWUgJiYgKEdNX3NldFZhbHVlKCJycGNEb21haW4iLCAkKCIjcnBjRG9tYWluIikudmFsKCkgPyAkKCIjcnBjRG9tYWluIikudmFsKCkgOiBrLmRvbWFpbiksIEdNX3NldFZhbHVlKCJycGNQb3J0IiwgJCgiI3JwY1BvcnQiKS52YWwoKSA/ICQoIiNycGNQb3J0IikudmFsKCkgOiBrLnBvcnQpLCBHTV9zZXRWYWx1ZSgicnBjVG9rZW4iLCAkKCIjcnBjVG9rZW4iKS52YWwoKSksIEdNX3NldFZhbHVlKCJycGNEaXIiLCAkKCIjcnBjRGlyIikudmFsKCkgPyAkKCIjcnBjRGlyIikudmFsKCkgOiBrLmRpciksIGhpc3RvcnkuZ28oMCkpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHAoKSB7CiAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICB0aXRsZTogIuivt+i+k+WFpeelnuenmOS7o+eggSIsCiAgICAgICAgICAgICAgICBpbnB1dDogInRleHQiLAogICAgICAgICAgICAgICAgaW5wdXRWYWx1ZTogdywKICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246ICEwLAogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgICAgICBpbnB1dFZhbGlkYXRvcjogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoNiAhPSBlLmxlbmd0aCkgcmV0dXJuICLor7fovpPlhaXmraPnoa7nmoTnpZ7np5jku6PnoIEiOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBHTV9zZXRWYWx1ZSgic2VjcmV0Q29kZU5ldyIsIGUudmFsdWUpLCB4LmZpcmUoewogICAgICAgICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAi56We56eY5Luj56CB5omn6KGM5oiQ5Yqf77yMM3PlkI7lsIboh6rliqjliLfmlrDvvIEiCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LmdvKDApOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdSgpIHsKICAgICAgICAgICAgR01fc2V0VmFsdWUoInNlY3JldENvZGVOZXciLCBnKSwgeC5maXJlKHt0ZXh0OiAi5oGi5aSN6buY6K6k5oiQ5Yqf77yMM3PlkI7lsIboh6rliqjliLfmlrAiLCBpY29uOiAic3VjY2VzcyJ9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oMCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gXygpIHsKICAgICAgICAgICAgcmV0dXJuIDEgPT09IE8uSVNTVklQOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gUygpIHsKICAgICAgICAgICAgR01fb3BlbkluVGFiKCJodHRwczovL3d3dy5iYWlkdXl1bi53aWtpIiwge2FjdGl2ZTogITB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFQoaSkgewogICAgICAgICAgICBIID0gdCgpLCBlKCLpgInkuK3mlofku7bliJfooajvvJoiLCBIKTsKICAgICAgICAgICAgdmFyIG4gPSBpLnRhcmdldC5pZCwgYSA9IHZvaWQgMDsKICAgICAgICAgICAgaWYgKCJkb3dubG9hZC1kaXJlY3QiID09IG4pIHsKICAgICAgICAgICAgICAgIHZhciBvID0gdm9pZCAwOwogICAgICAgICAgICAgICAgaWYgKDAgPT09IEgubGVuZ3RoKSByZXR1cm4gdm9pZCB4LmZpcmUoe2ljb246ICJlcnJvciIsIHRleHQ6IHYudW5zZWxlY3RlZH0pOwogICAgICAgICAgICAgICAgMSA9PSBILmxlbmd0aCAmJiAobyA9IDEgPT09IEhbMF0uaXNkaXIgPyAiYmF0Y2giIDogImRsaW5rIiksIEgubGVuZ3RoID4gMSAmJiAobyA9ICJiYXRjaCIpLCBMID0gaihIKTsKICAgICAgICAgICAgICAgIHZhciByID0gSShvKTsKICAgICAgICAgICAgICAgIGlmICgwICE9PSByLmVycm5vKSByZXR1cm4gLTEgPT0gci5lcnJubyA/IHZvaWQgeC5maXJlKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHYuZGVsZXRlZAogICAgICAgICAgICAgICAgfSkgOiAxMTIgPT0gci5lcnJubyA/IHZvaWQgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LnRpbWVvdXR9KSA6IHZvaWQgeC5maXJlKHsKICAgICAgICAgICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHYuZmFpbAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoImRsaW5rIiA9PSBvKSBhID0gci5kbGlua1swXS5kbGluazsgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJiYXRjaCIgIT0gbykgcmV0dXJuIHZvaWQgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LmZhaWx9KTsKICAgICAgICAgICAgICAgICAgICBhID0gci5kbGluaywgMSA9PT0gSC5sZW5ndGggJiYgKGEgPSBhICsgIiZ6aXBuYW1lPSIgKyBlbmNvZGVVUklDb21wb25lbnQoSFswXS5zZXJ2ZXJfZmlsZW5hbWUpICsgIi56aXAiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICgwID09PSBILmxlbmd0aCkgcmV0dXJuIHZvaWQgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LnVuc2VsZWN0ZWR9KTsKICAgICAgICAgICAgICAgIGlmIChILmxlbmd0aCA+IDEpIHJldHVybiB2b2lkIHguZmlyZSh7aWNvbjogImVycm9yIiwgdGV4dDogdi5tb3JldGhhbn0pOwogICAgICAgICAgICAgICAgaWYgKDEgPT0gSFswXS5pc2RpcikgcmV0dXJuIHZvaWQgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LmRpcn0pOwogICAgICAgICAgICAgICAgImRvd25sb2FkLWFwaSIgPT0gbiAmJiAoYSA9IFYoSFswXS5wYXRoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRShhKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEEoaSkgewogICAgICAgICAgICBpZiAoSCA9IHQoKSwgZSgi6YCJ5Lit5paH5Lu25YiX6KGo77yaIiwgSCksIDAgPT09IEgubGVuZ3RoKSByZXR1cm4gdm9pZCB4LmZpcmUoe2ljb246ICJlcnJvciIsIHRleHQ6IHYudW5zZWxlY3RlZH0pOwogICAgICAgICAgICB2YXIgbiA9IGkudGFyZ2V0LmlkLCBhID0gdm9pZCAwLCBvID0gdm9pZCAwOwogICAgICAgICAgICBpZiAoYSA9IC0xID09IG4uaW5kZXhPZigiaHR0cHMiKSA/IC0xID09IG4uaW5kZXhPZigiaHR0cCIpID8gbG9jYXRpb24ucHJvdG9jb2wgKyAiOiIgOiAiaHR0cDoiIDogImh0dHBzOiIsIHEgPSBbXSwgRiA9IFtdLCAtMSAhPSBuLmluZGV4T2YoImRpcmVjdCIpKSB7CiAgICAgICAgICAgICAgICBxID0gRyhhKTsKICAgICAgICAgICAgICAgIGlmICgwID09PSBxLmxlbmd0aCkgcmV0dXJuIHZvaWQgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LnVuc2VsZWN0ZWR9KTsKICAgICAgICAgICAgICAgIEoub3Blbih7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICLnm7Tpk77kuIvovb0iLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJiYXRjaCIsCiAgICAgICAgICAgICAgICAgICAgbGlzdDogcSwKICAgICAgICAgICAgICAgICAgICB0aXA6ICfngrnlh7vpk77mjqXnm7TmjqXkuIvovb3vvIzor7flhYjljYfnuqcgPGEgaHJlZj0iaHR0cHM6Ly93d3cuYmFpZHV5dW4ud2lraS96aC1jbi9hc3Npc3RhbnQuaHRtbCI+W+e9keebmOS4h+iDveWKqeaJi108L2E+IOiHsyA8Yj52Mi4yLjA8L2I+77yM5pys6ZO+5o6l5LuF5pSv5oyB5bCP5paH5Lu25LiL6L2977yIPDMwME3vvIknLAogICAgICAgICAgICAgICAgICAgIHNob3djb3B5OiAhMQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKC0xICE9IG4uaW5kZXhPZigiYXJpYSIpKSB7CiAgICAgICAgICAgICAgICBpZiAocSA9IE0oYSksIG8gPSAn6K+35YWI5a6J6KOFIDxhICBocmVmPSJodHRwczovL3d3dy5iYWlkdXl1bi53aWtpL3poLWNuL2Fzc2lzdGFudC5odG1sIj7nvZHnm5jkuIfog73liqnmiYs8L2E+IOivt+WwhumTvuaOpeWkjeWItuWIsOaUr+aMgUFyaWHnmoTkuIvovb3lmajkuK0sIOaOqOiNkOS9v+eUqCA8YSBocmVmPSJodHRwOi8vcGFuLmJhaWR1eXVuLndpa2kvZG93biI+WERvd248L2E+JywgMCA9PT0gcS5sZW5ndGgpIHJldHVybiB2b2lkIHguZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiB2LnVuc2VsZWN0ZWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgSi5vcGVuKHt0aXRsZTogIkFyaWHpk77mjqUiLCB0eXBlOiAiYmF0Y2hBcmlhIiwgbGlzdDogcSwgdGlwOiBvLCBzaG93Y29weTogITB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoLTEgIT0gbi5pbmRleE9mKCJycGMiKSkgewogICAgICAgICAgICAgICAgaWYgKHEgPSBNKGEpLCBvID0gJ+eCueWHu+aMiemSruWPkemAgemTvuaOpeiHs0FyaWHkuIvovb3lmajkuK08YSBocmVmPSJodHRwczovL3d3dy5iYWlkdXl1bi53aWtpL3poLWNuL3JwYy5odG1sIj7or6bnu4bor7TmmI48L2E+77yM6ZyA6YWN5ZCI5pyA5paw54mIIDxhIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvemgtY24vYXNzaXN0YW50Lmh0bWwiPlvnvZHnm5jkuIfog73liqnmiYtdPC9hPu+8jOaUr+aMgeacrOWcsOWSjOi/nOeoi+S4i+i9ve+8jOatpOWKn+iDveW7uuiurumFjeWQiOeZvuW6puS8muWRmOS9v+eUqCcsIDAgPT09IHEubGVuZ3RoKSByZXR1cm4gdm9pZCB4LmZpcmUoewogICAgICAgICAgICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogdi51bnNlbGVjdGVkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIEoub3Blbih7dGl0bGU6ICJBcmlhIFJQQyIsIHR5cGU6ICJiYXRjaEFyaWFSUEMiLCBsaXN0OiBxLCB0aXA6IG8sIHNob3djb3B5OiAhMX0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgtMSAhPSBuLmluZGV4T2YoImFwaSIpKSB7CiAgICAgICAgICAgICAgICBpZiAocSA9IE0oYSksIG8gPSAn6K+35YWI5a6J6KOFIDxhIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvemgtY24vYXNzaXN0YW50Lmh0bWwiPue9keebmOS4h+iDveWKqeaJizwvYT4gPGI+djIuMi4wPC9iPiDlkI7ngrnlh7vpk77mjqXkuIvovb3vvIzoi6XkuIvovb3lpLHotKXvvIzor7fmm7TmjaLnpZ7np5jku6PnoIEgPGEgaHJlZj0iaHR0cHM6Ly93d3cuYmFpZHV5dW4ud2lraS96aC1jbi9xdWVzdGlvbi5odG1sIiB0YXJnZXQ9Il9ibGFuayI+6I635Y+W56We56eY5Luj56CBPC9hPicsIDAgPT09IHEubGVuZ3RoKSByZXR1cm4gdm9pZCB4LmZpcmUoewogICAgICAgICAgICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogdi51bnNlbGVjdGVkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIEoub3Blbih7dGl0bGU6ICJBUEnkuIvovb3pk77mjqUiLCB0eXBlOiAiYmF0Y2giLCBsaXN0OiBxLCB0aXA6IG99KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gRyhlKSB7CiAgICAgICAgICAgIHZhciB0ID0gW107CiAgICAgICAgICAgIHJldHVybiAkLmVhY2goSCwgZnVuY3Rpb24gKGksIG4pIHsKICAgICAgICAgICAgICAgIHZhciBhID0gdm9pZCAwLCBvID0gdm9pZCAwLCByID0gdm9pZCAwOwogICAgICAgICAgICAgICAgYSA9IDAgPT0gbi5pc2RpciA/ICJkbGluayIgOiAiYmF0Y2giLCBMID0gaihbbl0pLCByID0gSShhKSwgMCA9PSByLmVycm5vID8gKCJkbGluayIgPT0gYSA/IG8gPSByLmRsaW5rWzBdLmRsaW5rIDogImJhdGNoIiA9PSBhICYmIChvID0gci5kbGluayksIG8gPSBvLnJlcGxhY2UoL14oW0EtWmEtel0rKTovLCBlKSkgOiBvID0gImVycm9yIiwgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogbi5zZXJ2ZXJfZmlsZW5hbWUsCiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRsaW5rOiBvCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksIHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBNKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBbXTsKICAgICAgICAgICAgcmV0dXJuICQuZWFjaChILCBmdW5jdGlvbiAoaSwgbikgewogICAgICAgICAgICAgICAgaWYgKDEgIT0gbi5pc2RpcikgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gdm9pZCAwOwogICAgICAgICAgICAgICAgICAgIGEgPSBWKG4ucGF0aCksIGEgPSBhLnJlcGxhY2UoL14oW0EtWmEtel0rKTovLCBlKSwgdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IG4uc2VydmVyX2ZpbGVuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZGxpbms6IGEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBDKCkgewogICAgICAgICAgICB2YXIgZSA9IHZvaWQgMDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGUgPSBuZXcgRnVuY3Rpb24oInJldHVybiAiICsgTy5zaWduMikoKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGEoZShPLnNpZ241LCBPLnNpZ24xKSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBqKGUpIHsKICAgICAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgdmFyIHQgPSBbXTsKICAgICAgICAgICAgcmV0dXJuICQuZWFjaChlLCBmdW5jdGlvbiAoZSwgaSkgewogICAgICAgICAgICAgICAgdC5wdXNoKGkuZnNfaWQpOwogICAgICAgICAgICB9KSwgIlsiICsgdCArICJdIjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFAoKSB7CiAgICAgICAgICAgIEggPSB0KCk7CiAgICAgICAgICAgIHZhciBlID0gW107CiAgICAgICAgICAgIGlmICgwID09PSBILmxlbmd0aCkgcmV0dXJuIHZvaWQgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LnVuc2VsZWN0ZWR9KTsKICAgICAgICAgICAgJC5lYWNoKEgsIGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgICAgICAgICBlLnB1c2goaS5wYXRoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBpID0gImh0dHBzOi8vcGFuLmJhaWR1LmNvbS9zaGFyZS9zZXQ/Y2hhbm5lbD1jaHVubGVpJmNsaWVudHR5cGU9MCZ3ZWI9MSZjaGFubmVsPWNodW5sZWkmd2ViPTEmYXBwX2lkPTI1MDUyOCZiZHN0b2tlbj0iICsgQiArICImbG9naWQ9IiArIHogKyAiJmNsaWVudHR5cGU9MCIsCiAgICAgICAgICAgICAgICBuID0gRCgpLCBhID0ge3NjaGFubmVsOiA0LCBjaGFubmVsX2xpc3Q6IEpTT04uc3RyaW5naWZ5KFtdKSwgcGVyaW9kOiAwLCBwd2Q6IG4sIGZpZF9saXN0OiBqKEgpfTsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDogaSwgYXN5bmM6ICExLCBtZXRob2Q6ICJQT1NUIiwgZGF0YTogYSwgc3VjY2VzczogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gZS5lcnJubykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUubGluazsKICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5YiG5Lqr6ZO+5o6lIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6ICc8YSBocmVmPSInICsgdCArICciIHRhcmdldD0iX2JsYW5rIj4nICsgdCArICI8L2E+PGJyPuaPkOWPlueggTogIiArIG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuWkjeWItumTvuaOpSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6IHkKICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS52YWx1ZSAmJiBHTV9zZXRDbGlwYm9hcmQodCArICIjIiArIG4pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gRCgpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZShlLCB0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGUgLSB0KSArIHQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciB0ID0gIiIsIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0ID0gdCArIGUoMCwgOSkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGUoOTcsIDEyMikpICsgU3RyaW5nLmZyb21DaGFyQ29kZShlKDY1LCA5MCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIG4gPSAiIiwgaSA9IDA7IGkgPCA0OyBpKyspIG4gKz0gdFtlKDAsIHQubGVuZ3RoIC0gMSldOwogICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEkoZSkgewogICAgICAgICAgICB2YXIgdCA9IHZvaWQgMDsKICAgICAgICAgICAgeiA9IGwoKTsKICAgICAgICAgICAgdmFyIGkgPSB7c2lnbjogTiwgdGltZXN0YW1wOiBVLCBmaWRsaXN0OiBMLCB0eXBlOiBlfTsKICAgICAgICAgICAgcmV0dXJuICQuYWpheCh7CiAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL3Bhbi5iYWlkdS5jb20vYXBpL2Rvd25sb2FkP2NsaWVudHR5cGU9MSIsCiAgICAgICAgICAgICAgICBhc3luYzogITEsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGRhdGE6IGksCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHQgPSBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFYoZSkgewogICAgICAgICAgICByZXR1cm4gVyArICJmaWxlP21ldGhvZD1kb3dubG9hZCZwYXRoPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZSkgKyAiJmFwcF9pZD0iICsgdzsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEUoZSkgewogICAgICAgICAgICAkKCIjaGVscGVyZG93bmxvYWRpZnJhbWUiKS5hdHRyKCJzcmMiLCBlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFIoKSB7CiAgICAgICAgICAgIHZhciBlID0gJCgnPGRpdiBjbGFzcz0iaGVscGVyLWhpZGUiIHN0eWxlPSJwYWRkaW5nOjA7bWFyZ2luOjA7ZGlzcGxheTpibG9jayI+PC9kaXY+JyksCiAgICAgICAgICAgICAgICB0ID0gJCgnPGlmcmFtZSBzcmM9ImphdmFzY3JpcHQ6OyIgaWQ9ImhlbHBlcmRvd25sb2FkaWZyYW1lIiBzdHlsZT0iZGlzcGxheTpub25lIj48L2lmcmFtZT4nKTsKICAgICAgICAgICAgZS5hcHBlbmQodCksICQoImJvZHkiKS5hcHBlbmQoZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgTyA9IHZvaWQgMCwgTiA9IHZvaWQgMCwgVSA9IHZvaWQgMCwgQiA9IHZvaWQgMCwgeiA9IHZvaWQgMCwgTCA9IHZvaWQgMCwgSCA9IFtdLCBxID0gW10sIEYgPSBbXSwgSiA9IHZvaWQgMCwKICAgICAgICAgICAgVyA9IChsb2NhdGlvbi5wcm90b2NvbCwgbG9jYXRpb24uaG9zdCwgbG9jYXRpb24ucHJvdG9jb2wgKyAiLy9wY3MuYmFpZHUuY29tL3Jlc3QvMi4wL3Bjcy8iKTsKICAgICAgICBsb2NhdGlvbi5wcm90b2NvbDsKICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChPID0gdW5zYWZlV2luZG93Lnl1bkRhdGEsIGUoIuWIneWni+WMluS/oeaBrzoiLCBPKSwgdm9pZCAwID09PSBPKSByZXR1cm4gZSgi6aG16Z2i5pyq5q2j5bi45Yqg6L2977yM5oiW6ICF55m+5bqm5bey57uP5pu05paw77yBIiksICExOwogICAgICAgICAgICBpKCksIG4oKSwgcygpLCBSKCksIEogPSBuZXcgZCh7YWRkQ29weTogITB9KSwgZSgi5LiL6L295Yqp5omL5Yqg6L295oiQ5Yqf77yB5b2T5YmN54mI5pys77yaIiwgaCk7CiAgICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBwKCkgewogICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgIFogPSBvKCksIFYgPSBJLlNJR04sIEUgPSBJLlRJTUVTVEFNUCwgUiA9IEkuTVlCRFNUT0tFTiwgTyA9ICJjaHVubGVpIiwgTiA9IDAsIFUgPSAxLCBCID0gdywgeiA9IGwoKSwgTCA9IDAsIEggPSAic2hhcmUiLCBGID0gSS5TSEFSRV9JRCwgcSA9IEkuU0hBUkVfVUssICJzZWNyZXQiID09IFogJiYgKFcgPSBwKCkpLCBjKCkgfHwgKEsgPSBJLlNIQVJFX0lEKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGkoKSB7CiAgICAgICAgICAgIHJldHVybiBjKCkgPyBJLkZJTEVJTkZPIDogcmVxdWlyZSgiZGlzay1zaGFyZTp3aWRnZXQvcGFnZU1vZHVsZS9saXN0L2xpc3RJbml0LmpzIikuZ2V0Q2hlY2tlZEl0ZW1zKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICB2YXIgZSA9IGxvY2F0aW9uLmhhc2ggJiYgL14jKFthLXpBLVowLTldezR9KSQvLnRlc3QobG9jYXRpb24uaGFzaCkgJiYgUmVnRXhwLiQxLAogICAgICAgICAgICAgICAgdCA9ICQoJy5waWNrcHcgaW5wdXRbdGFiaW5kZXg9IjEiXScpLCBpID0gJCgiLnBpY2twdyBhLmctYnV0dG9uIiksIG4gPSAkKCIucGlja3B3IC5pbnB1dC1hcmVhIiksCiAgICAgICAgICAgICAgICBvID0gJCgnPGRpdiBzdHlsZT0ibWFyZ2luOi04cHggMCAxMHB4IDtjb2xvcjogI2ZmNTg1OCI+5q2j5Zyo6I635Y+W5o+Q5Y+W56CBPC9kaXY+JyksCiAgICAgICAgICAgICAgICByID0gKGxvY2F0aW9uLmhyZWYubWF0Y2goL1wvaW5pdFw/KD86c3VybHxzaGFyZWlkKT0oKD86XHd8LSkrKS8pIHx8IGxvY2F0aW9uLmhyZWYubWF0Y2goL1wvc1wvMSgoPzpcd3wtKSspLykpWzFdOwogICAgICAgICAgICB0ICYmIGkgJiYgKG4ucHJlcGVuZChvKSwgZSAmJiAoby50ZXh0KCLlj5HnjrDmj5Dlj5bnoIHvvIzlt7Loh6rliqjkuLrmgqjloavlhpkiKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0LnZhbChlKSwgaS5jbGljaygpOwogICAgICAgICAgICB9LCA1MDApKSwgJC5hamF4KHsKICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsIHVybDogImh0dHBzOi8vYXBpLmJhaWR1eXVuLndpa2kvcmVzZXQvIiArIHIsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5saW5rID8gR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLCB1cmw6IGUubGluaywgb25sb2FkOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBKU09OLnBhcnNlKGUucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uYWNjZXNzX2NvZGUgPyAoby50ZXh0KCLlj5HnjrDmj5Dlj5bnoIHvvIzlt7Loh6rliqjkuLrmgqjloavlhpkiKSwgdC52YWwobi5hY2Nlc3NfY29kZSksIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuY2xpY2soKSwgYShuLnJlZmVycmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCkpIDogby50ZXh0KCLmnKrlj5HnjrDmj5Dlj5bnoIHvvIzor7fmiYvliqjloavlhpkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pIDogby50ZXh0KCLmnKrlj5HnjrDmj5Dlj5bnoIHvvIzor7fmiYvliqjloavlhpkiKTsKICAgICAgICAgICAgICAgIH0sIGVycm9yOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIG8udGV4dCgi6L+e5o6l5pyN5Yqh5Zmo5aSx6LSl77yM6K+35omL5Yqo5aGr5YaZIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGEoZSkgewogICAgICAgICAgICBpZiAoIm9iamVjdCIgIT09ICh2b2lkIDAgPT09IGUgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZSkpKSByZXR1cm4gITE7CiAgICAgICAgICAgIHZhciB0ID0gT2JqZWN0LnZhbHVlcyhlKSwgaSA9IHt9LCBuID0gdC5yZWR1Y2UoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpW3QudGl0bGVdIHx8IChpW3QudGl0bGVdID0gZS5wdXNoKHQpKSwgZTsKICAgICAgICAgICAgfSwgW10pLCBhID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgJCgiLnNsaWRlLXNob3ctaGVhZGVyIikubGVuZ3RoID4gMCAmJiAoY2xlYXJJbnRlcnZhbChhKSwgJC5lYWNoKG4sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHQudGl0bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAkKCc8YSBzdHlsZT0iZGlzcGxheTogYmxvY2s7bWFyZ2luLXRvcDogN3B4O292ZXJmbG93OiBoaWRkZW47dGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7d2hpdGUtc3BhY2U6IG5vd3JhcDsiIGhyZWY9IicgKyB0LnVybCArICciIHRhcmdldD0iX2JsYW5rIj7jgJDmnaXmupDjgJHvvJonICsgdC50aXRsZSArICI8L2E+Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICQoIi5zbGlkZS1zaG93LWhlYWRlciIpLmFwcGVuZChpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvKCkgewogICAgICAgICAgICByZXR1cm4gMSA9PT0gSS5TSEFSRV9QVUJMSUMgPyAicHVibGljIiA6ICJzZWNyZXQiOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYygpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gSS5nZXRDb250ZXh0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcCgpIHsKICAgICAgICAgICAgcmV0dXJuICd7InNla2V5IjoiJyArIGRlY29kZVVSSUNvbXBvbmVudChyKCJCRENMTkQiKSkgKyAnIn0nOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdSgpIHsKICAgICAgICAgICAgYygpID8gKCQoImRpdi5zbGlkZS1zaG93LXJpZ2h0IikuY3NzKCJ3aWR0aCIsICI1MDBweCIpLCAkKCJkaXYuZnJhbWUtbWFpbiIpLmNzcygid2lkdGgiLCAiOTYlIiksICQoImRpdi5zaGFyZS1maWxlLXZpZXdlciIpLmNzcygid2lkdGgiLCAiNzQwcHgiKS5jc3MoIm1hcmdpbi1sZWZ0IiwgImF1dG8iKS5jc3MoIm1hcmdpbi1yaWdodCIsICJhdXRvIikpIDogJCgiZGl2LnNsaWRlLXNob3ctcmlnaHQiKS5jc3MoIndpZHRoIiwgIjUwMHB4Iik7CiAgICAgICAgICAgIHZhciBlID0gJCgnPHNwYW4gY2xhc3M9ImctZHJvcGRvd24tYnV0dG9uIj48L3NwYW4+JyksCiAgICAgICAgICAgICAgICB0ID0gJCgnPGEgY2xhc3M9ImctYnV0dG9uIGctYnV0dG9uLWJsdWUiIHN0eWxlPSJ3aWR0aDogMTE0cHg7IiBkYXRhLWJ1dHRvbi1pZD0iYjIwMCIgZGF0YS1idXR0b24taW5kZXg9IjIwMCIgaHJlZj0iamF2YXNjcmlwdDo7Ij48L2E+JyksCiAgICAgICAgICAgICAgICBpID0gJCgnPHNwYW4gY2xhc3M9ImctYnV0dG9uLXJpZ2h0Ij48ZW0gY2xhc3M9Imljb24gaWNvbi1waWNwcmUtZG93bmxvYWQiIHRpdGxlPSLnmb7luqbnvZHnm5jkuIvovb3liqnmiYsiPjwvZW0+PHNwYW4gY2xhc3M9InRleHQiIHN0eWxlPSJ3aWR0aDogNjBweDsiPuS4i+i9veWKqeaJizwvc3Bhbj48L3NwYW4+JyksCiAgICAgICAgICAgICAgICBuID0gJCgnPHNwYW4gY2xhc3M9Im1lbnUiIHN0eWxlPSJ3aWR0aDphdXRvO3otaW5kZXg6NDEiPjwvc3Bhbj4nKSwKICAgICAgICAgICAgICAgIGEgPSAkKCc8YSBkYXRhLW1lbnUtaWQ9ImItbWVudTIwNyIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6OyI+55u05o6l5LiL6L29PC9hPicpLAogICAgICAgICAgICAgICAgbyA9ICQoJzxhIGRhdGEtbWVudS1pZD0iYi1tZW51MjA4IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDo7IiBkYXRhLXR5cGU9ImRvd24iPuaYvuekuumTvuaOpTwvYT4nKSwKICAgICAgICAgICAgICAgIHIgPSAkKCc8YSBkYXRhLW1lbnUtaWQ9ImItbWVudTIwOCIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6OyI+5pi+56S6QXJpYemTvuaOpTwvYT4nKSwKICAgICAgICAgICAgICAgIGwgPSAkKCc8YSBkYXRhLW1lbnUtaWQ9ImItbWVudTIwOCIgY2xhc3M9ImctYnV0dG9uLW1lbnUiIGhyZWY9ImphdmFzY3JpcHQ6OyIgZGF0YS10eXBlPSJycGMiPuWvvOWHuuWIsFJQQzwvYT4nKSwKICAgICAgICAgICAgICAgIGQgPSAkKCc8YSBkYXRhLW1lbnUtaWQ9ImItbWVudTIwOSIgc3R5bGU9ImNvbG9yOiAjZTg1NjUzO2ZvbnQtd2VpZ2h0OiA3MDA7IiBjbGFzcz0iZy1idXR0b24tbWVudSIgaHJlZj0iamF2YXNjcmlwdDo7Ij5WZXIgJyArIGggKyAiPC9hPiIpOwogICAgICAgICAgICBuLmFwcGVuZChhKS5hcHBlbmQobykuYXBwZW5kKHIpLmFwcGVuZChsKSwgdC5hcHBlbmQoaSksIGUuYXBwZW5kKHQpLmFwcGVuZChuKSwgZS5ob3ZlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBlLnRvZ2dsZUNsYXNzKCJidXR0b24tb3BlbiIpOwogICAgICAgICAgICB9KSwgYS5jbGljayhTKSwgbC5jbGljayhDKSwgby5jbGljayhDKSwgci5jbGljayhnKSwgZC5jbGljayhmKSwgJCgiZGl2Lm1vZHVsZS1zaGFyZS10b3AtYmFyIGRpdi5iYXIgZGl2LngtYnV0dG9uLWJveCIpLmFwcGVuZChlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGYoKSB7CiAgICAgICAgICAgIEdNX29wZW5JblRhYigiaHR0cHM6Ly93d3cuYmFpZHV5dW4ud2lraSIsIHthY3RpdmU6ICEwfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnKCkgewogICAgICAgICAgICByZXR1cm4gdGUgPSBpKCksIG51bGwgPT09IFIgPyAoeC5maXJlKHsKICAgICAgICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiB2LnVubG9naW4KICAgICAgICAgICAgfSksICExKSA6IChlKCLpgInkuK3mlofku7bliJfooajvvJoiLCB0ZSksIDAgPT09IHRlLmxlbmd0aCA/ICh4LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHYudW5zZWxlY3RlZAogICAgICAgICAgICB9KSwgITEpIDogMSA9PSB0ZVswXS5pc2RpciA/ICh4LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHYudG9vYmlnCiAgICAgICAgICAgIH0pLCAhMSkgOiAoWSA9ICJhcmljbGluayIsIHZvaWQgaihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkgaWYgKC0yMCA9PSBlLmVycm5vKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoWCA9IFQoKSkgfHwgMCAhPT0gWC5lcnJubykgcmV0dXJuIHguZmlyZSh7aWNvbjogImVycm9yIiwgdGV4dDogdi53cm9uZ2NvZGV9KSwgITE7CiAgICAgICAgICAgICAgICAgICAgZWUub3BlbihYKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDExMiA9PSBlLmVycm5vKSByZXR1cm4geC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LnRpbWVvdXR9KSwgITE7CiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IGUuZXJybm8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgUS5vcGVuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5LiL6L296ZO+5o6l77yI5LuF5pi+56S65paH5Lu26ZO+5o6l77yJIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzaGFyZUFyaWFMaW5rIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IGUubGlzdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpcDogJ+ivt+WFiOWuieijhSA8YSAgaHJlZj0iaHR0cHM6Ly93d3cuYmFpZHV5dW4ud2lraS96aC1jbi9hc3Npc3RhbnQuaHRtbCI+572R55uY5LiH6IO95Yqp5omLPC9hPiDor7flsIbpk77mjqXlpI3liLbliLDmlK/mjIFBcmlh55qE5LiL6L295Zmo5LitLCDmjqjojZDkvb/nlKggPGEgIGhyZWY9Imh0dHA6Ly9wYW4uYmFpZHV5dW4ud2lraS9kb3duIj5YRG93bjwvYT4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2NvcHk6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB4LmZpcmUoe2ljb246ICJlcnJvciIsIHRleHQ6IHYuZmFpbH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSkpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYigpIHsKICAgICAgICAgICAgdmFyIGUgPSAkKCc8ZGl2IGNsYXNzPSJoZWxwZXItaGlkZSIgc3R5bGU9InBhZGRpbmc6MDttYXJnaW46MDtkaXNwbGF5OmJsb2NrIj48L2Rpdj4nKSwKICAgICAgICAgICAgICAgIHQgPSAkKCc8aWZyYW1lIHNyYz0iamF2YXNjcmlwdDo7IiBpZD0iaGVscGVyZG93bmxvYWRpZnJhbWUiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvaWZyYW1lPicpOwogICAgICAgICAgICBlLmFwcGVuZCh0KSwgJCgiYm9keSIpLmFwcGVuZChlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHkoKSB7CiAgICAgICAgICAgIF8oKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIF8oKSB7CiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIuYXJpYS1ycGMiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSAoZS50YXJnZXQuZGF0YXNldC5saW5rLCBlLnRhcmdldC5kYXRhc2V0LmZpbGVuYW1lKTsKICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJIRUFEIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IlVzZXItQWdlbnQiOiBtfSwKICAgICAgICAgICAgICAgICAgICB1cmw6IGUudGFyZ2V0LmRhdGFzZXQubGluaywKICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZS5maW5hbFVybDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gay5kb21haW4gKyAiOiIgKyBrLnBvcnQgKyAiL2pzb25ycGMiLCBhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAobmV3IERhdGUpLmdldFRpbWUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29ucnBjOiAiMi4wIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJhcmlhMi5hZGRVcmkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogWyJ0b2tlbjoiICsgay50b2tlbiwgW2ldLCB7ZGlyOiBrLmRpciwgb3V0OiB0LCBoZWFkZXI6IFsiVXNlci1BZ2VudDoiICsgbV19XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IlVzZXItQWdlbnQiOiBtfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAianNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogM2UzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNwb25zZS5yZXN1bHQgPyB4LmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICLku7vliqHlt7Llj5HpgIHoh7NSUEPkuIvovb3lmagiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDogeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0aXRsZTogZS5yZXNwb25zZS5tZXNzYWdlfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbnRpbWVvdXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0aXRsZTogIuaXoOazlei/nuaOpeWIsFJQQ+acjeWKoe+8jOivt+ajgOafpVJQQ+mFjee9riJ9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFMoKSB7CiAgICAgICAgICAgIHJldHVybiB0ZSA9IGkoKSwgbnVsbCA9PT0gUiA/ICh4LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHYudW5sb2dpbgogICAgICAgICAgICB9KSwgITEpIDogKGUoIumAieS4reaWh+S7tuWIl+ihqO+8miIsIHRlKSwgMCA9PT0gdGUubGVuZ3RoID8gKHguZmlyZSh7CiAgICAgICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdi51bnNlbGVjdGVkCiAgICAgICAgICAgIH0pLCAhMSkgOiB0ZS5sZW5ndGggPiAxID8gKHguZmlyZSh7CiAgICAgICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgdGV4dDogdi5tb3JldGhhbgogICAgICAgICAgICB9KSwgITEpIDogMSA9PSB0ZVswXS5pc2RpciA/ICh4LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHYuZGlyCiAgICAgICAgICAgIH0pLCAhMSkgOiAoWSA9ICJkb3dubG9hZCIsIHZvaWQgaihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkgaWYgKC0yMCA9PSBlLmVycm5vKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKFggPSBUKCksIDAgIT09IFguZXJybm8pIHJldHVybiB2b2lkIHguZmlyZSh7aWNvbjogImVycm9yIiwgdGV4dDogdi53cm9uZ2NvZGV9KTsKICAgICAgICAgICAgICAgICAgICBlZS5vcGVuKFgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgxMTIgPT0gZS5lcnJubykgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LnRpbWVvdXR9KTsgZWxzZSBpZiAoMCA9PT0gZS5lcnJubykgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5saXN0WzBdLmRsaW5rOwogICAgICAgICAgICAgICAgICAgIEQodCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LmZhaWx9KTsKICAgICAgICAgICAgfSkpKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFQoKSB7CiAgICAgICAgICAgIHZhciBlID0gaWUgKyAiZ2V0dmNvZGUiLCB0ID0gdm9pZCAwOwogICAgICAgICAgICB6ID0gbCgpOwogICAgICAgICAgICB2YXIgaSA9IHsKICAgICAgICAgICAgICAgIHByb2Q6ICJwYW4iLAogICAgICAgICAgICAgICAgdDogTWF0aC5yYW5kb20oKSwKICAgICAgICAgICAgICAgIGJkc3Rva2VuOiBSLAogICAgICAgICAgICAgICAgY2hhbm5lbDogTywKICAgICAgICAgICAgICAgIGNsaWVudHR5cGU6IE4sCiAgICAgICAgICAgICAgICB3ZWI6IFUsCiAgICAgICAgICAgICAgICBhcHBfaWQ6IEIsCiAgICAgICAgICAgICAgICBsb2dpZDogegogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDogZSwgbWV0aG9kOiAiR0VUIiwgYXN5bmM6ICExLCBkYXRhOiBpLCBzdWNjZXNzOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHQgPSBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgdDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEEoKSB7CiAgICAgICAgICAgIFggPSBUKCksICQoIiNkaWFsb2ctaW1nIikuYXR0cigic3JjIiwgWC5pbWcpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gRygpIHsKICAgICAgICAgICAgdmFyIGUgPSAkKCIjZGlhbG9nLWlucHV0IikudmFsKCk7CiAgICAgICAgICAgIHJldHVybiAwID09PSBlLmxlbmd0aCA/IHZvaWQgJCgiI2RpYWxvZy1lcnIiKS50ZXh0KCLor7fovpPlhaXpqozor4HnoIEiKSA6IGUubGVuZ3RoIDwgNCA/IHZvaWQgJCgiI2RpYWxvZy1lcnIiKS50ZXh0KCLpqozor4HnoIHovpPlhaXplJnor6/vvIzor7fph43mlrDovpPlhaUiKSA6IHZvaWQgUChlLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaWYgKC0yMCA9PSBlLmVycm5vKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVlLmNsb3NlKCksICQoIiNkaWFsb2ctZXJyIikudGV4dCgi6aqM6K+B56CB6L6T5YWl6ZSZ6K+v77yM6K+36YeN5paw6L6T5YWlIiksIEEoKSwgIVggfHwgMCAhPT0gWC5lcnJubykgcmV0dXJuIHZvaWQgeC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdi53cm9uZ2NvZGUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBlZS5vcGVuKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKDAgPT09IGUuZXJybm8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZWUuY2xvc2UoKSwgImRvd25sb2FkIiA9PSBZKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmxpc3QubGVuZ3RoID4gMSB8fCAxID09IGUubGlzdFswXS5pc2RpcikgcmV0dXJuIHguZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdi5tb3JldGhhbgogICAgICAgICAgICAgICAgICAgICAgICB9KSwgITE7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5saXN0WzBdLmRsaW5rOwogICAgICAgICAgICAgICAgICAgICAgICBEKHQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoImxpbmsiID09IFkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgUS5vcGVuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5LiL6L296ZO+5o6l77yI5LuF5pi+56S65paH5Lu26ZO+5o6l77yJIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzaGFyZUxpbmsiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogZS5saXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlwOiAn54K55Ye76ZO+5o6l55u05o6l5LiL6L2977yM6K+35YWI5Y2H57qnIDxhIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvemgtY24vYXNzaXN0YW50Lmh0bWwiPlvnvZHnm5jkuIfog73liqnmiYtdPC9hPiDoh7MgPGI+djIuMi4wPC9iPu+8iOWHuueOsDQwM+ivt+WFiOemgeeUqElETeaJqeWxle+8jOiLpeS7jeWksei0peivt+WwneivlUFyaWHpk77mjqXvvIknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2NvcHk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoImFyaWNsaW5rIiA9PSBZKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFEub3Blbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIuS4i+i9vemTvuaOpe+8iOS7heaYvuekuuaWh+S7tumTvuaOpe+8iSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic2hhcmVBcmlhTGluayIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBlLmxpc3QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXA6ICfor7flhYjlronoo4UgPGEgIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvemgtY24vYXNzaXN0YW50Lmh0bWwiPue9keebmOS4h+iDveWKqeaJizwvYT4g6K+35bCG6ZO+5o6l5aSN5Yi25Yiw5pSv5oyBQXJpYeeahOS4i+i9veWZqOS4rSwg5o6o6I2Q5L2/55SoIDxhICBocmVmPSJodHRwOi8vcGFuLmJhaWR1eXVuLndpa2kvZG93biI+WERvd248L2E+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3djb3B5OiAhMQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgeC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LmZhaWx9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBNKCkgewogICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICByZXR1cm4gJC5lYWNoKHRlLCBmdW5jdGlvbiAodCwgaSkgewogICAgICAgICAgICAgICAgZS5wdXNoKGkuZnNfaWQpOwogICAgICAgICAgICB9KSwgIlsiICsgZSArICJdIjsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEModCkgewogICAgICAgICAgICByZXR1cm4gdGUgPSBpKCksIG51bGwgPT09IFIgPyAoeC5maXJlKHsKICAgICAgICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiB2LnVubG9naW4KICAgICAgICAgICAgfSksICExKSA6IChlKCLpgInkuK3mlofku7bliJfooajvvJoiLCB0ZSksIDAgPT09IHRlLmxlbmd0aCA/ICh4LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogImVycm9yIiwKICAgICAgICAgICAgICAgIHRleHQ6IHYudW5zZWxlY3RlZAogICAgICAgICAgICB9KSwgITEpIDogMSA9PSB0ZVswXS5pc2RpciA/ICh4LmZpcmUoe2ljb246ICJlcnJvciIsIHRleHQ6IHYuZGlyfSksICExKSA6IChZID0gImxpbmsiLCB2b2lkIGooZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIGlmICgtMjAgPT0gZS5lcnJubykgewogICAgICAgICAgICAgICAgICAgIGlmICghKFggPSBUKCkpIHx8IDAgIT09IFguZXJybm8pIHJldHVybiB4LmZpcmUoe2ljb246ICJlcnJvciIsIHRleHQ6IHYud3Jvbmdjb2RlfSksICExOwogICAgICAgICAgICAgICAgICAgIGVlLm9wZW4oWCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICgxMTIgPT0gZS5lcnJubykgcmV0dXJuIHguZmlyZSh7aWNvbjogImVycm9yIiwgdGV4dDogdi50aW1lb3V0fSksICExOwogICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBlLmVycm5vKSBpZiAoInJwYyIgPT09IHQudGFyZ2V0LmRhdGFzZXQudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICBRLm9wZW4oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICLkuIvovb3pk77mjqXvvIjku4XmmL7npLrmlofku7bpk77mjqXvvIkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInJwY0xpbmsiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogZS5saXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlwOiAn54K55Ye75oyJ6ZKu5Y+R6YCB6ZO+5o6l6IezQXJpYeS4i+i9veWZqOS4rSA8YSBocmVmPSJodHRwczovL3d3dy5iYWlkdXl1bi53aWtpL3poLWNuL3JwYy5odG1sIj7or6bnu4bor7TmmI48L2E+77yM6ZyA6YWN5ZCI5pyA5paw54mIIDxhIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvemgtY24vYXNzaXN0YW50Lmh0bWwiPlvnvZHnm5jkuIfog73liqnmiYtdPC9hPu+8jOaUr+aMgeacrOWcsOWSjOi/nOeoi+S4i+i9vScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Y29weTogITEKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgUS5vcGVuKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5LiL6L296ZO+5o6l77yI5LuF5pi+56S65paH5Lu26ZO+5o6l77yJIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzaGFyZUxpbmsiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogZS5saXN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlwOiAn54K55Ye76ZO+5o6l55u05o6l5LiL6L2977yM6K+35YWI5Y2H57qnIDxhIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvemgtY24vYXNzaXN0YW50Lmh0bWwiPlvnvZHnm5jkuIfog73liqnmiYtdPC9hPiDoh7MgPGI+djIuMi4wPC9iPu+8iOWHuueOsDQwM+ivt+WFiOemgeeUqElETeaJqeWxle+8jOiLpeS7jeWksei0peivt+WwneivlUFyaWHpk77mjqXvvIknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2NvcHk6ICExCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB4LmZpcmUoe2ljb246ICJlcnJvciIsIHRleHQ6IHYuZmFpbH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSkpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaihlKSB7CiAgICAgICAgICAgIGlmIChudWxsID09PSBSKSByZXR1cm4geC5maXJlKHtpY29uOiAiZXJyb3IiLCB0ZXh0OiB2LnVubG9naW59KSwgIiI7CiAgICAgICAgICAgIHZhciB0ID0gdm9pZCAwOwogICAgICAgICAgICBpZiAoYykgewogICAgICAgICAgICAgICAgSiA9IE0oKSwgeiA9IGwoKTsKICAgICAgICAgICAgICAgIHZhciBpID0gbmV3IEZvcm1EYXRhOwogICAgICAgICAgICAgICAgaS5hcHBlbmQoImVuY3J5cHQiLCBMKSwgaS5hcHBlbmQoInByb2R1Y3QiLCBIKSwgaS5hcHBlbmQoInVrIiwgcSksIGkuYXBwZW5kKCJwcmltYXJ5aWQiLCBGKSwgaS5hcHBlbmQoImZpZF9saXN0IiwgSiksICJzZWNyZXQiID09IFogJiYgaS5hcHBlbmQoImV4dHJhIiwgVyksICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9hcGkuYmFpZHV5dW4ud2lraS9kb3dubG9hZD9zaWduPSIgKyBWICsgIiZ0aW1lc3RhbXA9IiArIEUgKyAiJmxvZ2lkPSIgKyB6ICsgIiZpbml0PSIgKyBHTV9nZXRWYWx1ZSgiaW5pdCIpLAogICAgICAgICAgICAgICAgICAgIGNhY2hlOiAhMSwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIGFzeW5jOiAhMSwKICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGUucmVzcG9uc2VUZXh0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsIGRhdGE6IGksIHVybDogYXRvYihhdG9iKHQpKSwgb25sb2FkOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICBlKEpTT04ucGFyc2UodC5yZXNwb25zZSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBQKGUsIHQpIHsKICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7CiAgICAgICAgICAgIGlmIChjKSB7CiAgICAgICAgICAgICAgICBKID0gTSgpLCB6ID0gbCgpOwogICAgICAgICAgICAgICAgdmFyIG4gPSBuZXcgRm9ybURhdGE7CiAgICAgICAgICAgICAgICBuLmFwcGVuZCgiZW5jcnlwdCIsIEwpLCBuLmFwcGVuZCgicHJvZHVjdCIsIEgpLCBuLmFwcGVuZCgidWsiLCBxKSwgbi5hcHBlbmQoInByaW1hcnlpZCIsIEYpLCBuLmFwcGVuZCgiZmlkX2xpc3QiLCBKKSwgbi5hcHBlbmQoInZjb2RlX2lucHV0IiwgZSksIG4uYXBwZW5kKCJ2Y29kZV9zdHIiLCBYLnZjb2RlKSwgInNlY3JldCIgPT0gWiAmJiBuLmFwcGVuZCgiZXh0cmEiLCBXKSwgJC5hamF4KHsKICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2FwaS5iYWlkdXl1bi53aWtpL2Rvd25sb2FkP3NpZ249IiArIFYgKyAiJnRpbWVzdGFtcD0iICsgRSArICImbG9naWQ9IiArIHosCiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICExLAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgYXN5bmM6ICExLAogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwgZGF0YTogbiwgdXJsOiBhdG9iKGF0b2IoaSkpLCBvbmxvYWQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQoSlNPTi5wYXJzZShlLnJlc3BvbnNlKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEQodCkgewogICAgICAgICAgICBlKCLkuIvovb3pk77mjqXvvJoiICsgdCksIHQgJiYgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IlVzZXItQWdlbnQiOiBtfSwKICAgICAgICAgICAgICAgIHVybDogdCwKICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgSSA9IHZvaWQgMCwgViA9IHZvaWQgMCwgRSA9IHZvaWQgMCwgUiA9IHZvaWQgMCwgTyA9IHZvaWQgMCwgTiA9IHZvaWQgMCwgVSA9IHZvaWQgMCwgQiA9IHZvaWQgMCwgeiA9IHZvaWQgMCwKICAgICAgICAgICAgTCA9IHZvaWQgMCwgSCA9IHZvaWQgMCwgcSA9IHZvaWQgMCwgRiA9IHZvaWQgMCwgSiA9IHZvaWQgMCwgVyA9IHZvaWQgMCwgSyA9IHZvaWQgMCwgWCA9IHZvaWQgMCwgWiA9IHZvaWQgMCwKICAgICAgICAgICAgWSA9IHZvaWQgMCwgUSA9IHZvaWQgMCwgZWUgPSB2b2lkIDAsIHRlID0gW10sIGllID0gbG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArICIvYXBpLyI7CiAgICAgICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoR01fZ2V0VmFsdWUoIlNFVFRJTkdfUCIpICYmIG4oKSwgSSA9IHVuc2FmZVdpbmRvdy55dW5EYXRhLCBlKCLliJ3lp4vljJbkv6Hmga86IiwgSSksIHZvaWQgMCA9PT0gSSkgcmV0dXJuIHZvaWQgZSgi6aG16Z2i5pyq5q2j5bi45Yqg6L2977yM5oiW6ICF55m+5bqm5bey57uP5pu05paw77yBIik7CiAgICAgICAgICAgIHQoKSwgdSgpLCBRID0gbmV3IGQoe2FkZENvcHk6ICExfSksIGVlID0gbmV3IHMoQSwgRyksIGIoKSwgeSgpLCBlKCLkuIvovb3liqnmiYvliqDovb3miJDlip/vvIHlvZPliY3niYjmnKzvvJoiLCBoKTsKICAgICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIHUoKSB7CiAgICAgICAgZnVuY3Rpb24gdCgpIHsKICAgICAgICAgICAgc3dpdGNoIChvKCkpIHsKICAgICAgICAgICAgICAgIGNhc2UiZGlzayI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgKG5ldyBjKS5pbml0KCk7CiAgICAgICAgICAgICAgICBjYXNlInNoYXJlIjoKICAgICAgICAgICAgICAgIGNhc2UicyI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgKG5ldyBwKS5pbml0KCk7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaSgpIHsKICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgIHVybDogImh0dHBzOi8vYXBpLmJhaWR1eXVuLndpa2kvdXBkYXRlP3Zlcj0iICsgaCArICImcz13ZWIiLCBtZXRob2Q6ICJHRVQiLCBzdWNjZXNzOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChHTV9zZXRWYWx1ZSgibGFzdGVzdF92ZXJzaW9uIiwgZS52ZXJzaW9uKSwgbSA9IGUudWEsIDIwMCA9PT0gZS5jb2RlICYmIGUudmVyc2lvbiA+IGggJiYgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQudmFsdWUgJiYgKGxvY2F0aW9uLmhyZWYgPSBlLnVwZGF0ZVVSTCk7CiAgICAgICAgICAgICAgICAgICAgfSksIGUuc2NvZGUgIT0gR01fZ2V0VmFsdWUoInNjb2RlIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAkKCc8ZGl2PjxpbnB1dCBjbGFzcz0ic3dhbDItaW5wdXQiIGlkPSJzY29kZSIgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9Iuecn+eahOmaj+S+v+i+k++8jOWIq+e6oOe7k+OAgiI+PC9kaXY+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIuWIneasoeS9v+eUqOivt+maj+S+v+i+k+WFpeS4gOS4suaVsOWtlyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBpWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2NvZGUgPT0gJCgiI3Njb2RlIikudmFsKCkgPyAoR01fc2V0VmFsdWUoInNjb2RlIiwgZS5zY29kZSksIEdNX3NldFZhbHVlKCJpbml0IiwgMCksIHguZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICLmmpflj7fmraPnoa7vvIzmraPlnKjliJ3lp4vljJbkuK3jgILjgILjgIIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LmdvKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogKEdNX3NldFZhbHVlKCJzY29kZSIsIGUuc2NvZGUpLCBHTV9zZXRWYWx1ZSgiaW5pdCIsIDApLCB4LmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAi5pqX5Y+35q2j56Gu77yM5q2j5Zyo5Yid5aeL5YyW5Lit44CC44CC44CCIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gJCgiLiIgKyBmLmhlYWRlciksCiAgICAgICAgICAgICAgICAgICAgdCA9ICQoJzxzcGFuIGNsYXNzPSJjTUVNRUYiIG5vZGUtdHlwZT0iaGVscC1hdXRob3IiIHN0eWxlPSJvcGFjaXR5OiAuNSIgPjxhIGhyZWY9Imh0dHBzOi8vd3d3LmJhaWR1eXVuLndpa2kvIiB0YXJnZXQ9Il9ibGFuayI+5pWZ56iLPC9hPjxpIGNsYXNzPSJmaW5kLWxpZ2h0LWljb24iIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmU7YmFja2dyb3VuZC1jb2xvcjogIzAwOWZlODsiPjwvaT48L3NwYW4+Jyk7CiAgICAgICAgICAgICAgICBlLmFwcGVuZCh0KTsKICAgICAgICAgICAgfSwgMmUzKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGEoKSB7CiAgICAgICAgICAgIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoIuiuvue9riIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gR01fZ2V0VmFsdWUoIlNFVFRJTkdfUCIpICYmIEdNX3NldFZhbHVlKCJTRVRUSU5HX1AiLCAhMSksIHZvaWQgMCA9PT0gR01fZ2V0VmFsdWUoIlNFVFRJTkdfSCIpICYmIEdNX3NldFZhbHVlKCJTRVRUSU5HX0giLCAhMCk7CiAgICAgICAgICAgICAgICB2YXIgZSA9ICIiOwogICAgICAgICAgICAgICAgR01fZ2V0VmFsdWUoIlNFVFRJTkdfUCIpID8gZSArPSAnPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6IGNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47cGFkZGluZy10b3A6IDIwcHg7Ij7oh6rliqjloavlhpnmj5Dlj5bnoIE8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJTLVAiIGNoZWNrZWQgc3R5bGU9IndpZHRoOiAxNnB4O2hlaWdodDogMTZweDsiPjwvbGFiZWw+JyA6IGUgKz0gJzxsYWJlbCBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOiBjZW50ZXI7anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO3BhZGRpbmctdG9wOiAyMHB4OyI+6Ieq5Yqo5aGr5YaZ5o+Q5Y+W56CBPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iUy1QIiBzdHlsZT0id2lkdGg6IDE2cHg7aGVpZ2h0OiAxNnB4OyI+PC9sYWJlbD4nLCBHTV9nZXRWYWx1ZSgiU0VUVElOR19IIikgPyBlICs9ICc8bGFiZWwgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczogY2VudGVyO2p1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtwYWRkaW5nLXRvcDogMjBweDsiPuW8gOWQr+aVmeeoizxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9IlMtSCIgY2hlY2tlZCBzdHlsZT0id2lkdGg6IDE2cHg7aGVpZ2h0OiAxNnB4OyI+PC9sYWJlbD4nIDogZSArPSAnPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6IGNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47cGFkZGluZy10b3A6IDIwcHg7Ij7lvIDlkK/mlZnnqIs8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJTLUgiIHN0eWxlPSJ3aWR0aDogMTZweDtoZWlnaHQ6IDE2cHg7Ij48L2xhYmVsPicsIGUgPSAiPGRpdj4iICsgZSArICI8L2Rpdj4iOwogICAgICAgICAgICAgICAgdmFyIHQgPSAkKGUpOwogICAgICAgICAgICAgICAgU3dhbC5maXJlKHt0aXRsZTogIuiEmuacrOmFjee9riIsIGh0bWw6IHRbMF0sIGNvbmZpcm1CdXR0b25UZXh0OiAi5L+d5a2YIiwgZm9vdGVyOiB5fSkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oMCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksICQoZG9jdW1lbnQpLm9uKCJjaGFuZ2UiLCAiI1MtSCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIEdNX3NldFZhbHVlKCJTRVRUSU5HX0giLCAkKHRoaXMpWzBdLmNoZWNrZWQpOwogICAgICAgICAgICB9KSwgJChkb2N1bWVudCkub24oImNoYW5nZSIsICIjUy1QIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgR01fc2V0VmFsdWUoIlNFVFRJTkdfUCIsICQodGhpcylbMF0uY2hlY2tlZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgICAgR01fc2V0VmFsdWUoImN1cnJlbnRfdmVyc2lvbiIsIGgpOwogICAgICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgICAgICBlLnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IiwgZS5hc3luYyA9ICEwLCBlLnNyYyA9ICJodHRwczovL2pzLnVzZXJzLjUxLmxhLzE5OTg4MTE3LmpzIiwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChlKTsKICAgICAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJtZXRhIik7CiAgICAgICAgICAgIHQuaHR0cEVxdWl2ID0gIkNvbnRlbnQtU2VjdXJpdHktUG9saWN5IiwgdC5jb250ZW50ID0gInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiLCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKHQpLCAkKGRvY3VtZW50KS5vbigiY29udGV4dG1lbnUiLCAiLmFyaWEyYy1saW5rIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCksICExOwogICAgICAgICAgICB9KSwgJChkb2N1bWVudCkub24oIm1vdXNlZG93biIsICIuYXJpYTJjLWxpbmsiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgdmFyIHQgPSAkKHRoaXMpLnRleHQoKTsKICAgICAgICAgICAgICAgIHJldHVybiBHTV9zZXRDbGlwYm9hcmQodCwgInRleHQiKSwgeC5maXJlKHtpY29uOiAic3VjY2VzcyIsIHRleHQ6ICLlt7LlsIbpk77mjqXlpI3liLbliLDliarotLTmnb/vvIEifSksICExOwogICAgICAgICAgICB9KSwgJChkb2N1bWVudCkub24oImNsaWNrIiwgIi5ob21lLWRvd25sb2FkIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgfSksICQoZG9jdW1lbnQpLm9uKCJjbGljayIsICIuc2hhcmUtZG93bmxvYWQiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnRhcmdldC5pbm5lclRleHQgJiYgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsiVXNlci1BZ2VudCI6IG19LAogICAgICAgICAgICAgICAgICAgIHVybDogZS50YXJnZXQuaW5uZXJUZXh0LAogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBlKCJSUEPvvJoiLCBrKSwgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByKCksIGkoKSwgR01fZ2V0VmFsdWUoIlNFVFRJTkdfSCIpICYmIG4oKSwgYSgpOwogICAgICAgIH07CiAgICB9CgogICAgdmFyIGggPSAiNC4wLjAiLCBmID0geyJiYXItc2VhcmNoIjogIk9GYVBhTyIsICJsaXN0LXRvb2xzIjogInRjdUxBdSIsIGhlYWRlcjogInZ5UUhOeWIifSwgdiA9IHsKICAgICAgICAgICAgZGlyOiAi5o+Q56S677ya5LiN5pSv5oyB5pW05Liq5paH5Lu25aS55LiL6L2977yM5Y+v6L+b5YWl5paH5Lu25aS55YaF6I635Y+W5paH5Lu26ZO+5o6l5LiL6L2977yBIiwKICAgICAgICAgICAgdW5sb2dpbjogIuaPkOekuu+8mueZu+W9leeZvuW6pue9keebmOWQjuaJjeiDveS9v+eUqOatpOWKn+iDveWTpu+8gSIsCiAgICAgICAgICAgIGZhaWw6ICLmj5DnpLrvvJrojrflj5bkuIvovb3pk77mjqXlpLHotKXvvIHor7fliLfmlrDnvZHpobXlkI7ph43or5XvvIEiLAogICAgICAgICAgICB1bnNlbGVjdGVkOiAi5o+Q56S677ya6K+35YWI6YCJ5oup6KaB5LiL6L2955qE5paH5Lu277yBIiwKICAgICAgICAgICAgbW9yZXRoYW46ICLmj5DnpLrvvJrlpJrkuKrmlofku7bor7fngrnlh7vjgJDmmL7npLrpk77mjqXjgJHvvIEiLAogICAgICAgICAgICB0b29iaWc6ICLmj5DnpLrvvJrlj6rmlK/mjIEzMDBN5Lul5LiL55qE5paH5Lu25aS577yM6Iul6ZO+5o6l5peg5rOV5LiL6L2977yM6K+36L+b5YWl5paH5Lu25aS55ZCO5Yu+6YCJ5paH5Lu26I635Y+W77yBIiwKICAgICAgICAgICAgdGltZW91dDogIuaPkOekuu+8mumhtemdoui/h+acn++8jOivt+WIt+aWsOmHjeivle+8gSIsCiAgICAgICAgICAgIHdyb25nY29kZTogIuaPkOekuu+8muiOt+WPlumqjOivgeeggeWksei0pe+8gSIsCiAgICAgICAgICAgIGRlbGV0ZWQ6ICLmj5DnpLrvvJrmlofku7bkuI3lrZjlnKjmiJblt7Looqvnmb7luqblkozosJDvvIzml6Dms5XkuIvovb3vvIEiCiAgICAgICAgfSwgZyA9IDI1MDUyOCwgdyA9IEdNX2dldFZhbHVlKCJzZWNyZXRDb2RlTmV3IikgPyBHTV9nZXRWYWx1ZSgic2VjcmV0Q29kZU5ldyIpIDogZywKICAgICAgICBtID0gKEdNX2dldFZhbHVlKCJzYXZlUGF0aCIpICYmIEdNX2dldFZhbHVlKCJzYXZlUGF0aCIpLCAiIiksIGIgPSBuYXZpZ2F0b3IudXNlckFnZW50LAogICAgICAgIHkgPSAnUG93ZXJkIEJ5IDxhIHN0eWxlPSJtYXJnaW4tbGVmdDogNXB4OyIgaHJlZj0iaHR0cHM6Ly93d3cuYmFpZHV5dW4ud2lraSIgdGFyZ2V0PSJfYmxhbmsiPue9keebmOebtOmTvuS4i+i9veWKqeaJizwvYT4nLAogICAgICAgIHggPSBTd2FsLm1peGluKHsKICAgICAgICAgICAgdG9hc3Q6ICEwLAogICAgICAgICAgICBwb3NpdGlvbjogInRvcCIsCiAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiAhMSwKICAgICAgICAgICAgdGltZXI6IDNlMywKICAgICAgICAgICAgdGltZXJQcm9ncmVzc0JhcjogITEsCiAgICAgICAgICAgIG9uT3BlbjogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIFN3YWwuc3RvcFRpbWVyKSwgZS5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgU3dhbC5yZXN1bWVUaW1lcik7CiAgICAgICAgICAgIH0KICAgICAgICB9KSwgayA9IHsKICAgICAgICAgICAgZG9tYWluOiBHTV9nZXRWYWx1ZSgicnBjRG9tYWluIikgPyBHTV9nZXRWYWx1ZSgicnBjRG9tYWluIikgOiAiaHR0cDovL2xvY2FsaG9zdCIsCiAgICAgICAgICAgIHBvcnQ6IEdNX2dldFZhbHVlKCJycGNQb3J0IikgPyBHTV9nZXRWYWx1ZSgicnBjUG9ydCIpIDogNjgwMCwKICAgICAgICAgICAgdG9rZW46IEdNX2dldFZhbHVlKCJycGNUb2tlbiIpID8gR01fZ2V0VmFsdWUoInJwY1Rva2VuIikgOiAiIiwKICAgICAgICAgICAgZGlyOiBHTV9nZXRWYWx1ZSgicnBjRGlyIikgPyBHTV9nZXRWYWx1ZSgicnBjRGlyIikgOiAiRDovIgogICAgICAgIH07CiAgICAkKGZ1bmN0aW9uICgpIHsKICAgICAgICAobmV3IHUpLmluaXQoKTsKICAgIH0pOwp9KCk7Ci8v55m+5bqm572R55uY6ISa5pys57uT5p2fCgkJCX0KCQl9Cn0pKCk7Ci8v55m+5bqm572R55uY57uT5p2fCihmdW5jdGlvbigpIHsKICAgIHZhciBjb3Vwb25VcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgIGlmKGNvdXBvblVybC5pbmRleE9mKCd0YW9iYW8nKSAhPSAtMSB8fCBjb3Vwb25VcmwuaW5kZXhPZigndG1hbGwnKSAhPSAtMSl7CiAgICAvL2lzX29mZgogICAgJC5nZXQoJ2h0dHBzOi8vd3d3Lnp1aWh1aW1haS5uZXQvdnJoci9sb2FkaW5nLnBocCcsZnVuY3Rpb24obG9hZGluZ19odG1sKXsKICAgIGlmKGxvYWRpbmdfaHRtbCl7CiAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sCgljc3NVUkwgPSAnaHR0cHM6Ly93d3cuenVpaHVpbWFpLm5ldC90bS9zdHlsZS5jc3MnLAoJbGlua1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsKCWxpbmtUYWcuaWQgPSAnZHluYW1pYy1zdHlsZSc7CglsaW5rVGFnLmhyZWYgPSBjc3NVUkw7CglsaW5rVGFnLnNldEF0dHJpYnV0ZSgncmVsJywnc3R5bGVzaGVldCcpOwoJbGlua1RhZy5zZXRBdHRyaWJ1dGUoJ21lZGlhJywnYWxsJyk7CglsaW5rVGFnLnNldEF0dHJpYnV0ZSgndHlwZScsJ3RleHQvY3NzJyk7CgloZWFkLmFwcGVuZENoaWxkKGxpbmtUYWcpOwoJdmFyIGdvb2RzX2lkID0gZ2V0UXVlcnlTdHJpbmcoJ2lkJyk7Cgl2YXIgemhtX3VybCA9ICdodHRwczovL3d3dy56dWlodWltYWkubmV0L3ZyaHIvaW5kZXgucGhwJzsKCWlmKGdvb2RzX2lkKXsKCgkJJCgnI0pfTGlua0Jhc2tldCcpLnBhcmVudCgpLmFmdGVyKGxvYWRpbmdfaHRtbCk7CgkJJCgnLkpfTGlua0FkZCcpLnBhcmVudCgpLmFmdGVyKGxvYWRpbmdfaHRtbCk7CgkJaWYod2luZG93LmxvY2F0aW9uLmhvc3Quc2VhcmNoKCd0YW9iYW8uY29tJykgIT0gLTEpewoJCQkkKCcjemhtX3RhYmxlJykuYWRkQ2xhc3MoJ3pobV90YWJfdGFvYmFvJyk7CgkJfWVsc2V7CgkJCSQoJyN6aG1fdGFibGUnKS5hZGRDbGFzcygnemhtX3RhYl90bWFsbCcpOwoJCX0KCgkJJC5nZXQoemhtX3VybCx7Z29vZHNfaWQ6Z29vZHNfaWR9LGZ1bmN0aW9uKGRhdGEpewoJCQkkKCcjemhtX2Rpdl9zJykuaHRtbChkYXRhKTsKCQkJJCgnI3pobV9kaXZfcycpLmh0bWwoZGF0YSk7CgkJCWlmKHdpbmRvdy5sb2NhdGlvbi5ob3N0LnNlYXJjaCgndGFvYmFvLmNvbScpICE9IC0xKXsKCQkJCSQoJyN6aG1fdGFibGUnKS5hZGRDbGFzcygnemhtX3RhYl90YW9iYW8nKTsKCQkJfWVsc2V7CgkJCQkkKCcjemhtX3RhYmxlJykuYWRkQ2xhc3MoJ3pobV90YWJfdG1hbGwnKTsKCQkJfQoJCX0pOwoJfQogICAgfQogICAgfSk7CiAgICB9CgoJdmFyIHBsYXlfdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7Cgl2YXIgYXJyID0gbmV3IEFycmF5KCk7CglhcnIgPSBwbGF5X3VybC5zcGxpdCgnPycpCgl2YXIgZ2V0X3VybCA9IGFyclswXTsKCWlmKGdldF91cmwuaW5kZXhPZignZWdndm9kLmNuJykgPT0gLTEpewoJCXZhciBqeF90aXRsZT1uZXcgQXJyYXkoKQoJCWp4X3RpdGxlWzBdPSJ5b3VrdS5jb20iCgkJanhfdGl0bGVbMV09ImlxaXlpLmNvbSIKCQlqeF90aXRsZVsyXT0ibGUuY29tIgoJCWp4X3RpdGxlWzNdPSJxcS5jb20iCgkJanhfdGl0bGVbNF09InR1ZG91LmNvbSIKCQlqeF90aXRsZVs1XT0ibWd0di5jb20iCgkJanhfdGl0bGVbNl09InNvaHUuY29tIgoJCWp4X3RpdGxlWzddPSJhY2Z1bi5jbiIKCQlqeF90aXRsZVs4XT0iYmlsaWJpbGkuY29tIgoJCWp4X3RpdGxlWzldPSJwcHR2LmNvbSIKCQlqeF90aXRsZVsxMF09ImJhb2ZlbmcuY29tIgoJCWp4X3RpdGxlWzExXT0ieWlueXVldGFpLmNvbSIKCQlqeF90aXRsZVsxMl09Indhc3UuY24iCgkJdmFyIHRpdGxlX3Jlc3VsdCA9IGZhbHNlOwoJCWZvcih2YXIgbj0wO248anhfdGl0bGUubGVuZ3RoO24rKyl7CgkJCWlmKGdldF91cmwuaW5kZXhPZihqeF90aXRsZVtuXSkhPSAtMSl7CgkJCQl2YXIgemhtX2h0bWwgPSAiPGRpdiBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCknIHRhcmdldD0nX2JsYW5rJyBpZD0nemhtX2p4X3VybF9scicgc3R5bGU9J2N1cnNvcjpwb2ludGVyO3otaW5kZXg6OTg7ZGlzcGxheTpibG9jazt3aWR0aDozMHB4O2hlaWdodDozMHB4O2xpbmUtaGVpZ2h0OjMwcHg7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3RvcDozMDBweDt0ZXh0LWFsaWduOmNlbnRlcjtvdmVyZmxvdzp2aXNpYmxlJz48aW1nIHNyYz0naHR0cHM6Ly9jZG4uODBub3RlLmNvbS92aXAuZ2lmJyBzdHlsZT0nd2lkdGg6NTBweCcgPjwvZGl2PiI7CgkJCQkkKCJib2R5IikuYXBwZW5kKHpobV9odG1sKTsKCQkJfQoJCX0KCQkkKCIjemhtX2p4X3VybF9sciIpLmNsaWNrKGZ1bmN0aW9uKCl7CgkJCXZhciBwbGF5X2p4X3VybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICBpZigvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBvZHxCbGFja0JlcnJ5L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkgewogICAgICAgICAgICAgICAgdmFyIG1vYmlsZV9odG1sID0gIjxkaXYgc3R5bGU9J21hcmdpbjowIGF1dG87cGFkZGluZzoxMHB4Oyc+IjsKICAgICAgICAgICAgICAgIG1vYmlsZV9odG1sICs9IjxidXR0b24gdHlwZT0nYnV0dG9uJyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MzBweDtmb250LXNpemU6MzBweDtsaW5lLWhlaWdodDogMTtjb2xvcjogIzAwMDt0ZXh0LXNoYWRvdzogMCAxcHggMCAjZmZmO2N1cnNvcjogcG9pbnRlcjtib3JkZXI6MDtiYWNrZ3JvdW5kOjAgMDsnIG9uY2xpY2s9J2xvY2F0aW9uLnJlbG9hZCgpOyc+w5c8L2J1dHRvbj4iOwogICAgICAgICAgICAgICAgbW9iaWxlX2h0bWwgKz0gIjxkaXY+PGlmcmFtZSBzcmM9J2h0dHBzOi8vd3d3LmVnZ3ZvZC5jbi9tb2JpbGUucGhwP3pobV9qeD0iK3BsYXlfanhfdXJsICsiJyBhbGxvd3RyYW5zcGFyZW5jeT10cnVlIGZyYW1lYm9yZGVyPScwJyBzY3JvbGxpbmc9J25vJyBhbGxvd2Z1bGxzY3JlZW49dHJ1ZSBhbGxvd3RyYW5zcGFyZW5jeT10cnVlIG5hbWU9J2p4X3BsYXknc3R5bGU9J2hlaWdodDo2MDBweDt3aWR0aDoxMDAlJz48L2lmcmFtZT48L2Rpdj4iCiAgICAgICAgICAgICAgICBtb2JpbGVfaHRtbCArPSAiPC9kaXY+IjsKICAgICAgICAgICAgICAgJCgiYm9keSIpLmh0bWwobW9iaWxlX2h0bWwpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJC5nZXQoJ2h0dHBzOi8vd3d3LmVnZ3ZvZC5jbi9qeGNvZGUucGhwJyx7aW46ODE1NjY2OTl9LGZ1bmN0aW9uKGRhdGEpewogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWY9J2h0dHBzOi8vd3d3LmVnZ3ZvZC5jbi9qeC5waHA/bHJzcG09JytkYXRhKycmemhtX2p4PScrcGxheV9qeF91cmw7CiAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgkJfSk7CgkJdmFyIG11c2ljX3RpdGxlPW5ldyBBcnJheSgpCgkJbXVzaWNfdGl0bGVbMF09IjE2My5jb20iCgkJbXVzaWNfdGl0bGVbMV09ICJ5LnFxLmNvbSIKCQltdXNpY190aXRsZVsyXT0gImt1Z291LmNvbSIKCQltdXNpY190aXRsZVszXT0gImt1d28uY24iCgkJbXVzaWNfdGl0bGVbNF09ICJ4aWFtaS5jb20iCgkJbXVzaWNfdGl0bGVbNV09ICJ0YWloZS5jb20iCgkJbXVzaWNfdGl0bGVbNl09ICIxdGluZy5jb20iCgkJbXVzaWNfdGl0bGVbN109ICJtaWd1LmNuIgoJCW11c2ljX3RpdGxlWzhdPSAicWluZ3RpbmcuZm0iCgkJbXVzaWNfdGl0bGVbOV09ICJsaXpoaS5mbSIKCQltdXNpY190aXRsZVsxMF09ICJ4aW1hbGF5YS5jb20iCgkJZm9yKHZhciBpPTA7aTxtdXNpY190aXRsZS5sZW5ndGg7aSsrKXsKCQkJaWYoZ2V0X3VybC5pbmRleE9mKG11c2ljX3RpdGxlW2ldKSE9IC0xKXsKCQkJCXZhciBtdXNpY19odG1sID0gIjxkaXYgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApJyBpZD0nemhtX211c2ljX3VybF9scicgc3R5bGU9J2N1cnNvcjpwb2ludGVyO3otaW5kZXg6OTg7ZGlzcGxheTpibG9jazt3aWR0aDozMHB4O2hlaWdodDozMHB4O2xpbmUtaGVpZ2h0OjMwcHg7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3RvcDozMDBweDt0ZXh0LWFsaWduOmNlbnRlcjsnPjxpbWcgc3JjPSdodHRwczovL2Nkbi44MG5vdGUuY29tL3ZpcC5naWYnIHN0eWxlPSd3aWR0aDo1MHB4JyA+PC9kaXY+IjsKCQkJCSQoImJvZHkiKS5hcHBlbmQobXVzaWNfaHRtbCk7CgkJCX0KCQl9CgkJJCgiI3pobV9tdXNpY191cmxfbHIiKS5jbGljayhmdW5jdGlvbigpewoJCQl2YXIgbXVzaWNfanhfdXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCQkJd2luZG93Lm9wZW4oJ2h0dHA6Ly93d3cuZWdndm9kLmNuL211c2ljLz91cmw9JyttdXNpY19qeF91cmwpOwoJCX0pOwoJfQoJLy/ojrflj5Z1cmzlj4LmlbA7CglmdW5jdGlvbiBnZXRRdWVyeVN0cmluZyhlKSB7CgkJdmFyIHQgPSBuZXcgUmVnRXhwKCIoXnwmKSIgKyBlICsgIj0oW14mXSopKCZ8JCkiKTsKCQl2YXIgYSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHQpOwoJCWlmIChhICE9IG51bGwpIHJldHVybiBhWzJdOwoJCXJldHVybiAiIjsKCX0KfSkoKTsKLy/nn6XkuY7op4bpopEKKGFzeW5jICgpID0+IHsKICAgIGlmICh3aW5kb3cubG9jYXRpb24uaG9zdCA9PSAnd3d3LnpoaWh1LmNvbScpIHJldHVybjsKCiAgICBjb25zdCBwbGF5bGlzdEJhc2VVcmwgPSAnaHR0cHM6Ly9sZW5zLnpoaWh1LmNvbS9hcGkvdmlkZW9zLyc7CiAgICAvL2NvbnN0IHZpZGVvQmFzZVVybCA9ICdodHRwczovL3ZpZGVvLnpoaWh1LmNvbS92aWRlby8nOwogICAgY29uc3QgdmlkZW9JZCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLnBvcCgpOyAvLyDop4bpopFpZAogICAgY29uc3QgbWVudVN0eWxlID0gJ3RyYW5zZm9ybTpub25lICFpbXBvcnRhbnQ7IGxlZnQ6YXV0byAhaW1wb3J0YW50OyByaWdodDotMC41ZW0gIWltcG9ydGFudDsnOwogICAgY29uc3QgcGxheWVySWQgPSAncGxheWVyJzsKICAgIGNvbnN0IGNvdmVyU2VsZWN0b3IgPSAnIycgKyBwbGF5ZXJJZCArICcgPiBkaXY6Zmlyc3QtY2hpbGQgPiBkaXY6Zmlyc3QtY2hpbGQgPiBkaXY6bnRoLW9mLXR5cGUoMiknOwogICAgY29uc3QgY29udHJvbEJhclNlbGVjdG9yID0gJyMnICsgcGxheWVySWQgKyAnID4gZGl2OmZpcnN0LWNoaWxkID4gZGl2OmZpcnN0LWNoaWxkID4gZGl2Omxhc3QtY2hpbGQgPiBkaXY6bGFzdC1jaGlsZCA+IGRpdjpmaXJzdC1jaGlsZCc7CiAgICBjb25zdCBzdmdEb3dubG9hZCA9ICc8cGF0aCBkPSJNOS41LDQgSDE0LjUgVjEwIEgxNy44IEwxMiwxNS44IEw2LjIsMTAgSDkuNSBaIE02LjIsMTggSDE3LjggVjIwIEg2LjIgWiI+PC9wYXRoPic7CiAgICBsZXQgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGxheWVySWQpOwogICAgbGV0IHJlc29sdXRpb25NYXAgPSB7J+agh+a4hSc6ICdzZCcsICfpq5jmuIUnOiAnbGQnLCAn6LaF5riFJzogJ2hkJ307CiAgICBsZXQgdmlkZW9zID0gW107IC8vIOWtmOWCqOWQhOWIhui+qOeOh+eahOinhumikeS/oeaBrwogICAgbGV0IGRvd25sb2FkaW5nID0gZmFsc2U7CgogICAgZnVuY3Rpb24gZ2V0QnJvd2VySW5mbygpIHsKICAgICAgICBsZXQgYnJvd3NlciA9IChmdW5jdGlvbiAod2luZG93KSB7CiAgICAgICAgICAgIGxldCBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDsKICAgICAgICAgICAgbGV0IG5hdmlnYXRvciA9IHdpbmRvdy5uYXZpZ2F0b3I7CiAgICAgICAgICAgIGxldCBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgLy8gSUU4K+aUr+aMgS7ov5Tlm57mtY/op4jlmajmuLLmn5PlvZPliY3mlofmoaPmiYDnlKjnmoTmqKHlvI8KICAgICAgICAgICAgLy8gSUU2LElFNzp1bmRlZmluZWQuSUU4Ojgo5YW85a655qih5byP6L+U5ZueNykuSUU5Ojko5YW85a655qih5byP6L+U5ZueN3x8OCkKICAgICAgICAgICAgLy8gSUUxMDoxMCjlhbzlrrnmqKHlvI83fHw4fHw5KQogICAgICAgICAgICBsZXQgSUVNb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlOwogICAgICAgICAgICBsZXQgY2hyb21lID0gd2luZG93LmNocm9tZSB8fCBmYWxzZTsKICAgICAgICAgICAgbGV0IHN5c3RlbSA9IHsKICAgICAgICAgICAgICAgIC8vIHVzZXItYWdlbnQKICAgICAgICAgICAgICAgIGFnZW50OiBhZ2VudCwKICAgICAgICAgICAgICAgIC8vIOaYr+WQpuS4uklFCiAgICAgICAgICAgICAgICBpc0lFOiAvdHJpZGVudC8udGVzdChhZ2VudCksCiAgICAgICAgICAgICAgICAvLyBHZWNrb+WGheaguAogICAgICAgICAgICAgICAgaXNHZWNrbzogYWdlbnQuaW5kZXhPZignZ2Vja28nKSA+IDAgJiYgYWdlbnQuaW5kZXhPZignbGlrZSBnZWNrbycpIDwgMCwKICAgICAgICAgICAgICAgIC8vIHdlYmtpdOWGheaguAogICAgICAgICAgICAgICAgaXNXZWJraXQ6IGFnZW50LmluZGV4T2YoJ3dlYmtpdCcpID4gMCwKICAgICAgICAgICAgICAgIC8vIOaYr+WQpuS4uuagh+WHhuaooeW8jwogICAgICAgICAgICAgICAgaXNTdHJpY3Q6IGRvY3VtZW50LmNvbXBhdE1vZGUgPT09ICdDU1MxQ29tcGF0JywKICAgICAgICAgICAgICAgIC8vIOaYr+WQpuaUr+aMgXN1YnRpdGxlCiAgICAgICAgICAgICAgICBzdXBwb3J0U3ViVGl0bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYWNrJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cmFjaycpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8vIOaYr+WQpuaUr+aMgXNjb3BlZAogICAgICAgICAgICAgICAgc3VwcG9ydFNjb3BlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzY29wZWQnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIC8vIOiOt+WPlklF55qE54mI5pys5Y+3CiAgICAgICAgICAgICAgICBpZVZlcnNpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgck1zaWUgPSAvKG1zaWVcc3x0cmlkZW50LipydjopKFtcdy5dKykvOwogICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHJNc2llLmV4ZWMoYWdlbnQpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaFsyXTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJRU1vZGU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8vIE9wZXJh54mI5pys5Y+3CiAgICAgICAgICAgICAgICBvcGVyYVZlcnNpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lm9wZXJhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWdlbnQubWF0Y2goL29wZXJhLihbXGQuXSspLylbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYWdlbnQuaW5kZXhPZignb3ByJykgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWdlbnQubWF0Y2goL29wclwvKFtcZC5dKykvKVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vIOa1j+iniOWZqOexu+WeiyhJReOAgU9wZXJh44CBQ2hyb21l44CBU2FmYXJp44CBRmlyZWZveCkKICAgICAgICAgICAgICAgIHN5c3RlbS50eXBlID0gc3lzdGVtLmlzSUUgPyAnSUUnIDoKICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlcmEgfHwgKGFnZW50LmluZGV4T2YoJ29wcicpID4gMCkgPyAnT3BlcmEnIDoKICAgICAgICAgICAgICAgICAgICAgICAgKGFnZW50LmluZGV4T2YoJ2Nocm9tZScpID4gMCkgPyAnQ2hyb21lJyA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NhZmFyaeS5n+aPkOS+m+S6huS4k+mXqOeahOWIpOWumuaWueW8jwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW5EYXRhYmFzZSA/ICdTYWZhcmknIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYWdlbnQuaW5kZXhPZignZmlyZWZveCcpID4gMCkgPyAnRmlyZWZveCcgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndW5rbm93JzsKCiAgICAgICAgICAgICAgICAvLyDniYjmnKzlj7cKICAgICAgICAgICAgICAgIHN5c3RlbS52ZXJzaW9uID0gKHN5c3RlbS50eXBlID09PSAnSUUnKSA/IHN5c3RlbS5pZVZlcnNpb24oKSA6CiAgICAgICAgICAgICAgICAgICAgKHN5c3RlbS50eXBlID09PSAnRmlyZWZveCcpID8gYWdlbnQubWF0Y2goL2ZpcmVmb3hcLyhbXGQuXSspLylbMV0gOgogICAgICAgICAgICAgICAgICAgICAgICAoc3lzdGVtLnR5cGUgPT09ICdDaHJvbWUnKSA/IGFnZW50Lm1hdGNoKC9jaHJvbWVcLyhbXGQuXSspLylbMV0gOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN5c3RlbS50eXBlID09PSAnT3BlcmEnKSA/IHN5c3RlbS5vcGVyYVZlcnNpb24oKSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN5c3RlbS50eXBlID09PSAnU2FmYXJpJykgPyBhZ2VudC5tYXRjaCgvdmVyc2lvblwvKFtcZC5dKykvKVsxXSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcwJzsKCiAgICAgICAgICAgICAgICAvLyDmtY/op4jlmajlpJblo7MKICAgICAgICAgICAgICAgIHN5c3RlbS5zaGVsbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoYWdlbnQuaW5kZXhPZignZWRnZScpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW0udmVyc2lvbiA9IGFnZW50Lm1hdGNoKC9lZGdlXC8oW1xkLl0rKS8pWzFdIHx8IHN5c3RlbS52ZXJzaW9uOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0VkZ2UnOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyDpgajmuLjmtY/op4jlmagKICAgICAgICAgICAgICAgICAgICBpZiAoYWdlbnQuaW5kZXhPZignbWF4dGhvbicpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW0udmVyc2lvbiA9IGFnZW50Lm1hdGNoKC9tYXh0aG9uXC8oW1xkLl0rKS8pWzFdIHx8IHN5c3RlbS52ZXJzaW9uOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ01heHRob24nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBRUea1j+iniOWZqAogICAgICAgICAgICAgICAgICAgIGlmIChhZ2VudC5pbmRleE9mKCdxcWJyb3dzZXInKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtLnZlcnNpb24gPSBhZ2VudC5tYXRjaCgvcXFicm93c2VyXC8oW1xkLl0rKS8pWzFdIHx8IHN5c3RlbS52ZXJzaW9uOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1FRQnJvd3Nlcic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIOaQnOeLl+a1j+iniOWZqAogICAgICAgICAgICAgICAgICAgIGlmIChhZ2VudC5pbmRleE9mKCdzZSAyLngnKSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmkJzni5fmtY/op4jlmagnOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lOuS5n+WPr+S7peS9v+eUqHdpbmRvdy5jaHJvbWUgJiYgd2luZG93LmNocm9tZS53ZWJzdG9yZeWIpOaWrQogICAgICAgICAgICAgICAgICAgIGlmIChjaHJvbWUgJiYgc3lzdGVtLnR5cGUgIT09ICdPcGVyYScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV4dGVybmFsID0gd2luZG93LmV4dGVybmFsOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2xpZW50SW5mbyA9IHdpbmRvdy5jbGllbnRJbmZvcm1hdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a6i5oi356uv6K+t6KiAOnpoLWNuLHpoLjM2MOS4i+mdouS8mui/lOWbnnVuZGVmaW5lZAogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2xpZW50TGFuZ3VhZ2UgPSBjbGllbnRJbmZvLmxhbmd1YWdlczsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOeMjuixuea1j+iniOWZqDrmiJbogIVhZ2VudC5pbmRleE9mKCJsYmJyb3dzZXIiKT4wCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHRlcm5hbCAmJiAnTGllYmFvR2V0VmVyc2lvbicgaW4gZXh0ZXJuYWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnTEJCcm93c2VyJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyDnmb7luqbmtY/op4jlmagKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFnZW50LmluZGV4T2YoJ2JpZHVicm93c2VyJykgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW0udmVyc2lvbiA9IGFnZW50Lm1hdGNoKC9iaWR1YnJvd3NlclwvKFtcZC5dKykvKVsxXSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50Lm1hdGNoKC9jaHJvbWVcLyhbXGQuXSspLylbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0JhaUR1QnJvd3Nlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gMzYw5p6B6YCf5rWP6KeI5Zmo5ZKMMzYw5a6J5YWo5rWP6KeI5ZmoCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzeXN0ZW0uc3VwcG9ydFN1YlRpdGxlKCkgJiYgdHlwZW9mIGNsaWVudExhbmd1YWdlID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3JlS2V5TGVuID0gT2JqZWN0LmtleXMoY2hyb21lLndlYnN0b3JlKS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdjhMb2NhbGUgPSAndjhMb2NhbGUnIGluIHdpbmRvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZUtleUxlbiA+IDEgPyAnMzYw5p6B6YCf5rWP6KeI5ZmoJyA6ICczNjDlronlhajmtY/op4jlmagnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnQ2hyb21lJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN5c3RlbS50eXBlOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAvLyDmtY/op4jlmajlkI3np7Ao5aaC5p6c5piv5aOz5rWP6KeI5ZmoLOWImei/lOWbnuWjs+WQjeensCkKICAgICAgICAgICAgICAgIHN5c3RlbS5uYW1lID0gc3lzdGVtLnNoZWxsKCk7CiAgICAgICAgICAgICAgICAvLyDlr7nniYjmnKzlj7fov5vooYzov4fmu6Tov4flpITnkIYKICAgICAgICAgICAgICAgIC8vIFN5c3RlbS52ZXJzaW9uID0gU3lzdGVtLnZlcnNpb25GaWx0ZXIoU3lzdGVtLnZlcnNpb24pOwoKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZS5tZXNzYWdlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHN5c3RlbTsKCiAgICAgICAgfSkod2luZG93KTsKCiAgICAgICAgaWYgKGJyb3dzZXIubmFtZSA9PSB1bmRlZmluZWQgfHwgYnJvd3Nlci5uYW1lID09ICcnKSB7CiAgICAgICAgICAgIGJyb3dzZXIubmFtZSA9ICdVbmtub3duJzsKICAgICAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gJ1Vua25vd24nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChicm93c2VyLnZlcnNpb24gPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGJyb3dzZXIudmVyc2lvbiA9ICdVbmtub3duJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJyb3dzZXI7CiAgICB9CgogICAgZnVuY3Rpb24gZmV0Y2hSZXRyeSh1cmwsIG9wdGlvbnMgPSB7fSwgdGltZXMgPSAxLCBkZWxheSA9IDEwMDAsIGNoZWNrU3RhdHVzID0gdHJ1ZSkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIC8vIGZldGNoIOaIkOWKn+WkhOeQhuWHveaVsAogICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHJlcykgewogICAgICAgICAgICAgICAgaWYgKGNoZWNrU3RhdHVzICYmICFyZXMub2spIHsKICAgICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOWNleasoeWksei0peWkhOeQhuWHveaVsAogICAgICAgICAgICBmdW5jdGlvbiBmYWlsdXJlKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aW1lcy0tOwoKICAgICAgICAgICAgICAgIGlmICh0aW1lcykgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZmV0Y2hVcmwsIGRlbGF5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOaAu+S9k+Wksei0peWkhOeQhuWHveaVsAogICAgICAgICAgICBmdW5jdGlvbiBmaW5hbEhhbmRsZXIoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBmZXRjaFVybCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oc3VjY2VzcykKICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZmFpbHVyZSkKICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZmluYWxIYW5kbGVyKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZmV0Y2hVcmwoKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyDkuIvovb3mjIflrpp1cmznmoTotYTmupAKICAgIGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkVXJsKHVybCwgbmFtZSA9IChuZXcgRGF0ZSgpKS52YWx1ZU9mKCkgKyAnLm1wNCcpIHsKICAgICAgICBsZXQgYnJvd3NlciA9IGdldEJyb3dlckluZm8oKTsKCiAgICAgICAgLy8gR3JlYXNlbW9ua2V5IOmcgOimgeaKiiB1cmwg6L2s5Li6IGJsb2JVcmwKICAgICAgICBpZiAoR01faW5mby5zY3JpcHRIYW5kbGVyID09ICdHcmVhc2Vtb25rZXknKSB7CiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaFJldHJ5KHVybCk7CiAgICAgICAgICAgIGxldCBibG9iID0gYXdhaXQgcmVzLmJsb2IoKTsKICAgICAgICAgICAgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICB9CgogICAgICAgIC8vIENocm9tZSDlj6/ku6Xkvb/nlKggVGFtcGVybW9ua2V5IOeahCBHTV9kb3dubG9hZCDlh73mlbDnu5Xov4cgQ1NQKENvbnRlbnQgU2VjdXJpdHkgUG9saWN5KSDnmoTpmZDliLYKICAgICAgICBpZiAod2luZG93LkdNX2Rvd25sb2FkKSB7CiAgICAgICAgICAgIEdNX2Rvd25sb2FkKHt1cmwsIG5hbWV9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vIGZpcmVmb3gg6ZyA6KaB56aB55SoIENTUCwgYWJvdXQ6Y29uZmlnIC0+IHNlY3VyaXR5LmNzcC5lbmFibGUgPT4gZmFsc2UKICAgICAgICAgICAgbGV0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgYS5kb3dubG9hZCA9IG5hbWU7CiAgICAgICAgICAgIC8vIGEudGFyZ2V0ID0gJ19ibGFuayc7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBodW1hblNpemUoc2l6ZSkgewogICAgICAgIGxldCBuID0gTWF0aC5sb2coc2l6ZSkgLyBNYXRoLmxvZygxMDI0KSB8IDA7CiAgICAgICAgcmV0dXJuIChzaXplIC8gTWF0aC5wb3coMTAyNCwgbikpLnRvRml4ZWQoMCkgKyAnICcgKyAobiA/ICdLTUdUUEVaWSdbLS1uXSArICdCJyA6ICdCeXRlcycpOwogICAgfQoKICAgIGlmICghcGxheWVyKSByZXR1cm47CgogICAgLy8g6I635Y+W6KeG6aKR5L+h5oGvCiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaFJldHJ5KHBsYXlsaXN0QmFzZVVybCArIHZpZGVvSWQsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdyZWZlcmVyJzogJ3JlZmVyZXJCYXNlVXJsICsgdmlkZW9JZCcsCiAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogJ29hdXRoIGMzY2VmN2M2NmExODQzZjhiM2E5ZTZhMWUzMTYwZTIwJyAvLyBpbiB6cGxheWVyLm1pbi5qcyBvZiB6aGlodQogICAgICAgIH0KICAgIH0sIDMpOwogICAgY29uc3QgdmlkZW9JbmZvID0gYXdhaXQgcmVzLmpzb24oKTsKCiAgICAvLyDojrflj5bkuI3lkIzliIbovqjnjofop4bpopHnmoTkv6Hmga8KICAgIGZvciAobGV0IFtrZXksIHZpZGVvXSBvZiBPYmplY3QuZW50cmllcyh2aWRlb0luZm8ucGxheWxpc3QpKSB7CiAgICAgICAgdmlkZW8ubmFtZSA9IGtleTsKCiAgICAgICAgaWYgKCF2aWRlb3MuZmluZCh2ID0+IHYud2lkdGggPT0gdmlkZW8ud2lkdGgpKSB7CiAgICAgICAgICAgIHZpZGVvcy5wdXNoKHZpZGVvKTsKICAgICAgICB9CiAgICB9CgogICAgLy8g5oyJ5YiG6L6o546H5aSn5bCP5o6S5bqPCiAgICB2aWRlb3MgPSB2aWRlb3Muc29ydChmdW5jdGlvbiAodjEsIHYyKSB7CiAgICAgICAgcmV0dXJuIHYxLndpZHRoID09IHYyLndpZHRoID8gMCA6ICh2MS53aWR0aCA+IHYyLndpZHRoID8gMSA6IC0xKTsKICAgIH0pLnJldmVyc2UoKTsKCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlSW5zZXJ0ZWQnLCAoZXZ0KSA9PiB7CiAgICAgICAgbGV0IGRvbUNvbnRyb2xCYXIgPSBldnQucmVsYXRlZE5vZGUucXVlcnlTZWxlY3RvcignOnNjb3BlID4gZGl2Omxhc3QtY2hpbGQgPiBkaXY6Zmlyc3QtY2hpbGQnKTsKICAgICAgICBpZiAoIWRvbUNvbnRyb2xCYXIgfHwgZG9tQ29udHJvbEJhci5xdWVyeVNlbGVjdG9yKCcuZG93bmxvYWQnKSkgcmV0dXJuOwoKICAgICAgICBsZXQgZG9tRnVsbFNjcmVlbkJ0biA9IGRvbUNvbnRyb2xCYXIucXVlcnlTZWxlY3RvcignOnNjb3BlID4gZGl2Om50aC1sYXN0LW9mLXR5cGUoMSknKTsKICAgICAgICBsZXQgZG9tUmVzb2x1dGlvbkJ0biA9IGRvbUNvbnRyb2xCYXIucXVlcnlTZWxlY3RvcignOnNjb3BlID4gZGl2Om50aC1sYXN0LW9mLXR5cGUoMyknKTsKICAgICAgICBsZXQgZG9tRG93bmxvYWRCdG4sIGRlZmF1bHRSZXNvbHV0aW9uLCBidXR0b25zOwogICAgICAgIGlmICghZG9tRnVsbFNjcmVlbkJ0biB8fCAhZG9tRnVsbFNjcmVlbkJ0bi5xdWVyeVNlbGVjdG9yKCdidXR0b24nKSkgcmV0dXJuOwoKICAgICAgICAvLyDlhYvpmobliIbovqjnjofoj5zljZXmiJblhajlsY/mjInpkq7kuLrkuIvovb3mjInpkq4KICAgICAgICBkb21Eb3dubG9hZEJ0biA9IChkb21SZXNvbHV0aW9uQnRuICYmIChkb21SZXNvbHV0aW9uQnRuLmNsYXNzTmFtZSA9PSBkb21GdWxsU2NyZWVuQnRuLmNsYXNzTmFtZSkpCiAgICAgICAgICAgID8gZG9tUmVzb2x1dGlvbkJ0bi5jbG9uZU5vZGUodHJ1ZSkKICAgICAgICAgICAgOiBkb21GdWxsU2NyZWVuQnRuLmNsb25lTm9kZSh0cnVlKTsKCiAgICAgICAgZGVmYXVsdFJlc29sdXRpb24gPSBkb21Eb3dubG9hZEJ0bi5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS5pbm5lclRleHQ7CgogICAgICAgIC8vIOeUn+aIkOS4i+i9veaMiemSruWbvuaghwogICAgICAgIGRvbURvd25sb2FkQnRuLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbjpmaXJzdC1jaGlsZCcpLm91dGVySFRNTCA9IGRvbUZ1bGxTY3JlZW5CdG4uY2xvbmVOb2RlKHRydWUpLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLm91dGVySFRNTDsKICAgICAgICBkb21Eb3dubG9hZEJ0bi5xdWVyeVNlbGVjdG9yKCdzdmcnKS5pbm5lckhUTUwgPSBzdmdEb3dubG9hZDsKICAgICAgICBkb21Eb3dubG9hZEJ0bi5jbGFzc05hbWUgPSBkb21Eb3dubG9hZEJ0bi5jbGFzc05hbWUgKyAnIGRvd25sb2FkJzsKCiAgICAgICAgYnV0dG9ucyA9IGRvbURvd25sb2FkQnRuLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpOwoKICAgICAgICAvLyBidXR0b24g5YWD57Sg5re75Yqg5a+55bqU55qE5LiL6L295Zyw5Z2ACiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGRvbSA9PiB7CiAgICAgICAgICAgIGxldCB2aWRlbyA9IHZpZGVvcy5maW5kKHYgPT4gdi5uYW1lID09IHJlc29sdXRpb25NYXBbZG9tLmlubmVyVGV4dCB8fCBkZWZhdWx0UmVzb2x1dGlvbl0pOwogICAgICAgICAgICB2aWRlbyA9IHZpZGVvIHx8IHZpZGVvc1swXTsKICAgICAgICAgICAgZG9tLmRhdGFzZXQudmlkZW8gPSB2aWRlby5wbGF5X3VybDsKICAgICAgICAgICAgaWYgKGRvbS5pbm5lclRleHQpIHsKICAgICAgICAgICAgICAgIChkb20uaW5uZXJUZXh0ID0gYCR7ZG9tLmlubmVyVGV4dH0gKCR7aHVtYW5TaXplKHZpZGVvLnNpemUpfSlgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChidXR0b25zLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICBkb20ubmV4dFNpYmxpbmcucXVlcnlTZWxlY3RvcignZGl2JykuaW5uZXJUZXh0ID0gaHVtYW5TaXplKHZpZGVvLnNpemUpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIOm8oOagh+S6i+S7tiAtIOaYvuekuuiPnOWNlQogICAgICAgIGRvbURvd25sb2FkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsICgpID0+IHsKICAgICAgICAgICAgbGV0IGRvbU1lbnUgPSBkb21Eb3dubG9hZEJ0bi5xdWVyeVNlbGVjdG9yKCdkaXY6bnRoLW9mLXR5cGUoMSknKTsKICAgICAgICAgICAgaWYgKGRvbU1lbnUpIHsKICAgICAgICAgICAgICAgIGRvbU1lbnUuc3R5bGUuY3NzVGV4dCA9IG1lbnVTdHlsZSArICdvcGFjaXR5OjEgIWltcG9ydGFudDsgdmlzaWJpbGl0eTp2aXNpYmxlICFpbXBvcnRhbnQnOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIOm8oOagh+S6i+S7tiAtIOmakOiXj+iPnOWNlQogICAgICAgIGRvbURvd25sb2FkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsICgpID0+IHsKICAgICAgICAgICAgbGV0IGRvbU1lbnUgPSBkb21Eb3dubG9hZEJ0bi5xdWVyeVNlbGVjdG9yKCdkaXY6bnRoLW9mLXR5cGUoMSknKTsKICAgICAgICAgICAgaWYgKGRvbU1lbnUpIHsKICAgICAgICAgICAgICAgIGRvbU1lbnUuc3R5bGUuY3NzVGV4dCA9IG1lbnVTdHlsZTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAvLyDpvKDmoIfkuovku7YgLSDpgInmi6noj5zljZXpobkKICAgICAgICBkb21Eb3dubG9hZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBldmVudCA9PiB7CiAgICAgICAgICAgIGlmIChkb3dubG9hZGluZykgewogICAgICAgICAgICAgICAgYWxlcnQoJ+W9k+WJjeato+WcqOaJp+ihjOS4i+i9veS7u+WKoe+8jOivt+etieW+heS7u+WKoeWujOaIkOOAgicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgZSA9IGV2ZW50LnNyY0VsZW1lbnQgfHwgZXZlbnQudGFyZ2V0OwoKICAgICAgICAgICAgd2hpbGUgKGUudGFnTmFtZSAhPSAnQlVUVE9OJykgewogICAgICAgICAgICAgICAgZSA9IGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG93bmxvYWRVcmwoZS5kYXRhc2V0LnZpZGVvKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8g5pi+56S65LiL6L295oyJ6ZKuCiAgICAgICAgZG9tQ29udHJvbEJhci5hcHBlbmRDaGlsZChkb21Eb3dubG9hZEJ0bik7CgogICAgfSk7Cn0pKCk7","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js","ts":1595498418485,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My4yLjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIGIoYSl9OmIoYSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPU9iamVjdC5nZXRQcm90b3R5cGVPZixmPWMuc2xpY2UsZz1jLmNvbmNhdCxoPWMucHVzaCxpPWMuaW5kZXhPZixqPXt9LGs9ai50b1N0cmluZyxsPWouaGFzT3duUHJvcGVydHksbT1sLnRvU3RyaW5nLG49bS5jYWxsKE9iamVjdCksbz17fTtmdW5jdGlvbiBwKGEsYil7Yj1ifHxkO3ZhciBjPWIuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7Yy50ZXh0PWEsYi5oZWFkLmFwcGVuZENoaWxkKGMpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyl9dmFyIHE9IjMuMi4xIixyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyByLmZuLmluaXQoYSxiKX0scz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdD0vXi1tcy0vLHU9Ly0oW2Etel0pL2csdj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O3IuZm49ci5wcm90b3R5cGU9e2pxdWVyeTpxLGNvbnN0cnVjdG9yOnIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBmLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9mLmNhbGwodGhpcyk6YTwwP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXIubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxifSxlYWNoOmZ1bmN0aW9uKGEpe3JldHVybiByLmVhY2godGhpcyxhKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhyLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoYTwwP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmM8Yj9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6aCxzb3J0OmMuc29ydCxzcGxpY2U6Yy5zcGxpY2V9LHIuZXh0ZW5kPXIuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYixjLGQsZSxmLGc9YXJndW1lbnRzWzBdfHx7fSxoPTEsaT1hcmd1bWVudHMubGVuZ3RoLGo9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksIm9iamVjdCI9PXR5cGVvZiBnfHxyLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2g8aTtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYoci5pc1BsYWluT2JqZWN0KGQpfHwoZT1BcnJheS5pc0FycmF5KGQpKSk/KGU/KGU9ITEsZj1jJiZBcnJheS5pc0FycmF5KGMpP2M6W10pOmY9YyYmci5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1yLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sci5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKHErTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PXIudHlwZShhKX0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3ZhciBiPXIudHlwZShhKTtyZXR1cm4oIm51bWJlciI9PT1ifHwic3RyaW5nIj09PWIpJiYhaXNOYU4oYS1wYXJzZUZsb2F0KGEpKX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYixjO3JldHVybiEoIWF8fCJbb2JqZWN0IE9iamVjdF0iIT09ay5jYWxsKGEpKSYmKCEoYj1lKGEpKXx8KGM9bC5jYWxsKGIsImNvbnN0cnVjdG9yIikmJmIuY29uc3RydWN0b3IsImZ1bmN0aW9uIj09dHlwZW9mIGMmJm0uY2FsbChjKT09PW4pKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErIiI6Im9iamVjdCI9PXR5cGVvZiBhfHwiZnVuY3Rpb24iPT10eXBlb2YgYT9qW2suY2FsbChhKV18fCJvYmplY3QiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3AoYSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHQsIm1zLSIpLnJlcGxhY2UodSx2KX0sZWFjaDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MDtpZih3KGEpKXtmb3IoYz1hLmxlbmd0aDtkPGM7ZCsrKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVha31lbHNlIGZvcihkIGluIGEpaWYoYi5jYWxsKGFbZF0sZCxhW2RdKT09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOihhKyIiKS5yZXBsYWNlKHMsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHcoT2JqZWN0KGEpKT9yLm1lcmdlKGMsInN0cmluZyI9PXR5cGVvZiBhP1thXTphKTpoLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6aS5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2Q8YztkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztmPGc7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj0wLGg9W107aWYodyhhKSlmb3IoZD1hLmxlbmd0aDtmPGQ7ZisrKWU9YihhW2ZdLGYsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO2Vsc2UgZm9yKGYgaW4gYSllPWIoYVtmXSxmLGMpLG51bGwhPWUmJmgucHVzaChlKTtyZXR1cm4gZy5hcHBseShbXSxoKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlO2lmKCJzdHJpbmciPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxyLmlzRnVuY3Rpb24oYSkpcmV0dXJuIGQ9Zi5jYWxsKGFyZ3VtZW50cywyKSxlPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxkLmNvbmNhdChmLmNhbGwoYXJndW1lbnRzKSkpfSxlLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8ci5ndWlkKyssZX0sbm93OkRhdGUubm93LHN1cHBvcnQ6b30pLCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihyLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxyLmVhY2goIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7alsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiB3KGEpe3ZhciBiPSEhYSYmImxlbmd0aCJpbiBhJiZhLmxlbmd0aCxjPXIudHlwZShhKTtyZXR1cm4iZnVuY3Rpb24iIT09YyYmIXIuaXNXaW5kb3coYSkmJigiYXJyYXkiPT09Y3x8MD09PWJ8fCJudW1iZXIiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYSl9dmFyIHg9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPXt9Lmhhc093blByb3BlcnR5LEQ9W10sRT1ELnBvcCxGPUQucHVzaCxHPUQucHVzaCxIPUQuc2xpY2UsST1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLEs9IltcXHgyMFxcdFxcclxcblxcZl0iLEw9Iig/OlxcXFwufFtcXHctXXxbXlwwLVxceGEwXSkrIixNPSJcXFsiK0srIiooIitMKyIpKD86IitLKyIqKFsqXiR8IX5dPz0pIitLKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrTCsiKSl8KSIrSysiKlxcXSIsTj0iOigiK0wrIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK00rIikqKXwuKilcXCl8KSIsTz1uZXcgUmVnRXhwKEsrIisiLCJnIiksUD1uZXcgUmVnRXhwKCJeIitLKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK0srIiskIiwiZyIpLFE9bmV3IFJlZ0V4cCgiXiIrSysiKiwiK0srIioiKSxSPW5ldyBSZWdFeHAoIl4iK0srIiooWz4rfl18IitLKyIpIitLKyIqIiksUz1uZXcgUmVnRXhwKCI9IitLKyIqKFteXFxdJ1wiXSo/KSIrSysiKlxcXSIsImciKSxUPW5ldyBSZWdFeHAoTiksVT1uZXcgUmVnRXhwKCJeIitMKyIkIiksVj17SUQ6bmV3IFJlZ0V4cCgiXiMoIitMKyIpIiksQ0xBU1M6bmV3IFJlZ0V4cCgiXlxcLigiK0wrIikiKSxUQUc6bmV3IFJlZ0V4cCgiXigiK0wrInxbKl0pIiksQVRUUjpuZXcgUmVnRXhwKCJeIitNKSxQU0VVRE86bmV3IFJlZ0V4cCgiXiIrTiksQ0hJTEQ6bmV3IFJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitLKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitLKyIqKD86KFsrLV18KSIrSysiKihcXGQrKXwpKSIrSysiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrSisiKSQiLCJpIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoIl4iK0srIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrSysiKigoPzotXFxkKT9cXGQqKSIrSysiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sVz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFg9L15oXGQkL2ksWT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLCQ9L1srfl0vLF89bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitLKyI/fCgiK0srIil8LikiLCJpZyIpLGFhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD0iMHgiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6ZDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxiYT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxjYT1mdW5jdGlvbihhLGIpe3JldHVybiBiPyJcMCI9PT1hPyJcdWZmZmQiOmEuc2xpY2UoMCwtMSkrIlxcIithLmNoYXJDb2RlQXQoYS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2F9LGRhPWZ1bmN0aW9uKCl7bSgpfSxlYT10YShmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwJiYoImZvcm0iaW4gYXx8ImxhYmVsImluIGEpfSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e0cuYXBwbHkoRD1ILmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLERbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZmEpe0c9e2FwcGx5OkQubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ri5hcHBseShhLEguY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGdhKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHM9YiYmYi5vd25lckRvY3VtZW50LHc9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSwic3RyaW5nIiE9dHlwZW9mIGF8fCFhfHwxIT09dyYmOSE9PXcmJjExIT09dylyZXR1cm4gZDtpZighZSYmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLHApKXtpZigxMSE9PXcmJihsPVouZXhlYyhhKSkpaWYoZj1sWzFdKXtpZig5PT09dyl7aWYoIShqPWIuZ2V0RWxlbWVudEJ5SWQoZikpKXJldHVybiBkO2lmKGouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNlIGlmKHMmJihqPXMuZ2V0RWxlbWVudEJ5SWQoZikpJiZ0KGIsaikmJmouaWQ9PT1mKXJldHVybiBkLnB1c2goaiksZH1lbHNle2lmKGxbMl0pcmV0dXJuIEcuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChmPWxbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gRy5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSksZH1pZihjLnFzYSYmIUFbYSsiICJdJiYoIXF8fCFxLnRlc3QoYSkpKXtpZigxIT09dylzPWIscj1hO2Vsc2UgaWYoIm9iamVjdCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKCJpZCIpKT9rPWsucmVwbGFjZShiYSxjYSk6Yi5zZXRBdHRyaWJ1dGUoImlkIixrPXUpLG89ZyhhKSxoPW8ubGVuZ3RoO3doaWxlKGgtLSlvW2hdPSIjIitrKyIgIitzYShvW2hdKTtyPW8uam9pbigiLCIpLHM9JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxifWlmKHIpdHJ5e3JldHVybiBHLmFwcGx5KGQscy5xdWVyeVNlbGVjdG9yQWxsKHIpKSxkfWNhdGNoKHgpe31maW5hbGx5e2s9PT11JiZiLnJlbW92ZUF0dHJpYnV0ZSgiaWQiKX19fXJldHVybiBpKGEucmVwbGFjZShQLCIkMSIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrIiAiKT5kLmNhY2hlTGVuZ3RoJiZkZWxldGUgYlthLnNoaWZ0KCldLGJbYysiICJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaWEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBqYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24ga2EoYSxiKXt2YXIgYz1hLnNwbGl0KCJ8IiksZT1jLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiZhLnNvdXJjZUluZGV4LWIuc291cmNlSW5kZXg7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1jfHwiYnV0dG9uIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuImZvcm0iaW4gYj9iLnBhcmVudE5vZGUmJmIuZGlzYWJsZWQ9PT0hMT8ibGFiZWwiaW4gYj8ibGFiZWwiaW4gYi5wYXJlbnROb2RlP2IucGFyZW50Tm9kZS5kaXNhYmxlZD09PWE6Yi5kaXNhYmxlZD09PWE6Yi5pc0Rpc2FibGVkPT09YXx8Yi5pc0Rpc2FibGVkIT09IWEmJmVhKGIpPT09YTpiLmRpc2FibGVkPT09YToibGFiZWwiaW4gYiYmYi5kaXNhYmxlZD09PWF9fWZ1bmN0aW9uIHBhKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiEhYiYmIkhUTUwiIT09Yi5ub2RlTmFtZX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89bi5kb2N1bWVudEVsZW1lbnQscD0hZihuKSx2IT09biYmKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVkudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn19LGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSk6KGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShfLGFhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUmJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSxkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjLGQsZSxmPWIuZ2V0RWxlbWVudEJ5SWQoYSk7aWYoZil7aWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdO2U9Yi5nZXRFbGVtZW50c0J5TmFtZShhKSxkPTA7d2hpbGUoZj1lW2QrK10paWYoYz1mLmdldEF0dHJpYnV0ZU5vZGUoImlkIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdfXJldHVybltdfX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnApcmV0dXJuIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKX0scj1bXSxxPVtdLChjLnFzYT1ZLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitLKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitLKyIqKD86dmFsdWV8IitKKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGphKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrSysiKlsqXiR8IX5dPz0iKSwyIT09YS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCYmcS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLG8uYXBwZW5kQ2hpbGQoYSkuZGlzYWJsZWQ9ITAsMiE9PWEucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoJiZxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVkudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiKiIpLHMuY2FsbChhLCJbcyE9JyddOngiKSxyLnB1c2goIiE9IixOKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKCJ8IikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKCJ8IikpLGI9WS50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8WS50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09bnx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1ufHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0koayxhKS1JKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsZz1bYV0saD1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09bj8tMTpiPT09bj8xOmU/LTE6Zj8xOms/SShrLGEpLUkoayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSlnLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTt3aGlsZShnW2RdPT09aFtkXSlkKys7cmV0dXJuIGQ/bGEoZ1tkXSxoW2RdKTpnW2RdPT09dj8tMTpoW2RdPT09dj8xOjB9LG4pOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShTLCI9JyQxJ10iKSxjLm1hdGNoZXNTZWxlY3RvciYmcCYmIUFbYisiICJdJiYoIXJ8fCFyLnRlc3QoYikpJiYoIXF8fCFxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZDLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lc2NhcGU9ZnVuY3Rpb24oYSl7cmV0dXJuKGErIiIpLnJlcGxhY2UoYmEsY2EpfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrYSl9LGdhLnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZD1bXSxlPTAsZj0wO2lmKGw9IWMuZGV0ZWN0RHVwbGljYXRlcyxrPSFjLnNvcnRTdGFibGUmJmEuc2xpY2UoMCksYS5zb3J0KEIpLGwpe3doaWxlKGI9YVtmKytdKWI9PT1hW2ZdJiYoZT1kLnB1c2goZikpO3doaWxlKGUtLSlhLnNwbGljZShkW2VdLDEpfXJldHVybiBrPW51bGwsYX0sZT1nYS5nZXRUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9IiIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoInN0cmluZyI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6VixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKF8sYWEpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKF8sYWEpLCJ+PSI9PT1hWzJdJiYoYVszXT0iICIrYVszXSsiICIpLGEuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS50b0xvd2VyQ2FzZSgpLCJudGgiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxnYS5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKigiZXZlbiI9PT1hWzNdfHwib2RkIj09PWFbM10pKSxhWzVdPSsoYVs3XSthWzhdfHwib2RkIj09PWFbM10pKTphWzNdJiZnYS5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gVi5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHwiIjpjJiZULnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoIikiLGMubGVuZ3RoLWIpLWMubGVuZ3RoKSYmKGFbMF09YVswXS5zbGljZSgwLGIpLGFbMl09Yy5zbGljZSgwLGIpKSxhLnNsaWNlKDAsMykpfX0sZmlsdGVyOntUQUc6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09YT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yn19LENMQVNTOmZ1bmN0aW9uKGEpe3ZhciBiPXlbYSsiICJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKCIoXnwiK0srIikiK2ErIigiK0srInwkKSIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoInN0cmluZyI9PXR5cGVvZiBhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWdhLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT8iIT0iPT09YjohYnx8KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShPLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iJiYoZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxnYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1JKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShQLCIkMSIpKTtyZXR1cm4gZFt1XT9pYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZ2EoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczppYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoXyxhYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFUudGVzdChhfHwiIil8fGdhLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2EpLGE9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8Yi5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYSsiLSIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6b2EoITEpLGRpc2FibGVkOm9hKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6cGEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnBhKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpwYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuW2M8MD9jK2I6Y119KSxldmVuOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6cGEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1jPDA/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpwYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWM8MD9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcmEoKXt9cmEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyByYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1RLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1SLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFAsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1WW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBzYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7YjxjO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHRhKGEsYixjKXt2YXIgZD1iLmRpcixlPWIubmV4dCxmPWV8fGQsZz1jJiYicGFyZW50Tm9kZSI9PT1mLGg9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxlKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGcpcmV0dXJuIGEoYixjLGUpO3JldHVybiExfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG09W3csaF07aWYoaSl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZykmJmEoYixjLGkpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxnKWlmKGw9Ylt1XXx8KGJbdV09e30pLGs9bFtiLnVuaXF1ZUlEXXx8KGxbYi51bmlxdWVJRF09e30pLGUmJmU9PT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpYj1iW2RdfHxiO2Vsc2V7aWYoKGo9a1tmXSkmJmpbMF09PT13JiZqWzFdPT09aClyZXR1cm4gbVsyXT1qWzJdO2lmKGtbZl09bSxtWzJdPWEoYixjLGkpKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiB1YShhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB2YShhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWdhKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB3YShhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtoPGk7aCsrKShmPWFbaF0pJiYoYyYmIWMoZixkLGUpfHwoZy5wdXNoKGYpLGomJmIucHVzaChoKSkpO3JldHVybiBnfWZ1bmN0aW9uIHhhKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXhhKGQpKSxlJiYhZVt1XSYmKGU9eGEoZSxmKSksaWEoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dmEoYnx8IioiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6d2EocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXdhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9JKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj13YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6Ry5hcHBseShnLHIpfSl9ZnVuY3Rpb24geWEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVsiICJdLGk9Zz8xOjAsaz10YShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9dGEoZnVuY3Rpb24oYSl7cmV0dXJuIEkoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2k8ZjtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bdGEodWEobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7ZTxmO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHhhKGk+MSYmdWEobSksaT4xJiZzYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWFbaS0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKFAsIiQxIiksYyxpPGUmJnlhKGEuc2xpY2UoaSxlKSksZTxmJiZ5YShhPWEuc2xpY2UoZSkpLGU8ZiYmc2EoYSkpfW0ucHVzaChjKX1yZXR1cm4gdWEobSl9ZnVuY3Rpb24gemEoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbyxxLHI9MCxzPSIwIix0PWYmJltdLHU9W10sdj1qLHg9Znx8ZSYmZC5maW5kLlRBRygiKiIsaykseT13Kz1udWxsPT12PzE6TWF0aC5yYW5kb20oKXx8LjEsej14Lmxlbmd0aDtmb3IoayYmKGo9Zz09PW58fGd8fGspO3MhPT16JiZudWxsIT0obD14W3NdKTtzKyspe2lmKGUmJmwpe289MCxnfHxsLm93bmVyRG9jdW1lbnQ9PT1ufHwobShsKSxoPSFwKTt3aGlsZShxPWFbbysrXSlpZihxKGwsZ3x8bixoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXkpfWMmJigobD0hcSYmbCkmJnItLSxmJiZ0LnB1c2gobCkpfWlmKHIrPXMsYyYmcyE9PXIpe289MDt3aGlsZShxPWJbbysrXSlxKHQsdSxnLGgpO2lmKGYpe2lmKHI+MCl3aGlsZShzLS0pdFtzXXx8dVtzXXx8KHVbc109RS5jYWxsKGkpKTt1PXdhKHUpfUcuYXBwbHkoaSx1KSxrJiYhZiYmdS5sZW5ndGg+MCYmcitiLmxlbmd0aD4xJiZnYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz15LGo9diksdH07cmV0dXJuIGM/aWEoZik6Zn1yZXR1cm4gaD1nYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthKyIgIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9eWEoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHphKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1nYS5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMsZSl7dmFyIGYsaSxqLGssbCxtPSJmdW5jdGlvbiI9PXR5cGVvZiBhJiZhLG49IWUmJmcoYT1tLnNlbGVjdG9yfHxhKTtpZihjPWN8fFtdLDE9PT1uLmxlbmd0aCl7aWYoaT1uWzBdPW5bMF0uc2xpY2UoMCksaS5sZW5ndGg+MiYmIklEIj09PShqPWlbMF0pLnR5cGUmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2lbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChqLm1hdGNoZXNbMF0ucmVwbGFjZShfLGFhKSxiKXx8W10pWzBdLCFiKXJldHVybiBjO20mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGkuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWY9Vi5uZWVkc0NvbnRleHQudGVzdChhKT8wOmkubGVuZ3RoO3doaWxlKGYtLSl7aWYoaj1pW2ZdLGQucmVsYXRpdmVbaz1qLnR5cGVdKWJyZWFrO2lmKChsPWQuZmluZFtrXSkmJihlPWwoai5tYXRjaGVzWzBdLnJlcGxhY2UoXyxhYSksJC50ZXN0KGlbMF0udHlwZSkmJnFhKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoaS5zcGxpY2UoZiwxKSxhPWUubGVuZ3RoJiZzYShpKSwhYSlyZXR1cm4gRy5hcHBseShjLGUpLGM7YnJlYWt9fX1yZXR1cm4obXx8aChhLG4pKShlLGIsIXAsYywhYnx8JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxiKSxjfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0IikpfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8a2EoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGEsYixjKXtpZighYylyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoYiwidHlwZSI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPSI8aW5wdXQvPiIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8a2EoInZhbHVlIixmdW5jdGlvbihhLGIsYyl7aWYoIWMmJiJpbnB1dCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuIGEuZGVmYXVsdFZhbHVlfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGthKEosZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKCFjKXJldHVybiBhW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGdhfShhKTtyLmZpbmQ9eCxyLmV4cHI9eC5zZWxlY3RvcnMsci5leHByWyI6Il09ci5leHByLnBzZXVkb3Msci51bmlxdWVTb3J0PXIudW5pcXVlPXgudW5pcXVlU29ydCxyLnRleHQ9eC5nZXRUZXh0LHIuaXNYTUxEb2M9eC5pc1hNTCxyLmNvbnRhaW5zPXguY29udGFpbnMsci5lc2NhcGVTZWxlY3Rvcj14LmVzY2FwZTt2YXIgeT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmcihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9LEE9ci5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBCKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX12YXIgQz0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaSxEPS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24gRShhLGIsYyl7cmV0dXJuIHIuaXNGdW5jdGlvbihiKT9yLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTpiLm5vZGVUeXBlP3IuZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KToic3RyaW5nIiE9dHlwZW9mIGI/ci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGkuY2FsbChiLGEpPi0xIT09Y30pOkQudGVzdChiKT9yLmZpbHRlcihiLGEsYyk6KGI9ci5maWx0ZXIoYixhKSxyLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gaS5jYWxsKGIsYSk+LTEhPT1jJiYxPT09YS5ub2RlVHlwZX0pKX1yLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9yLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOnIuZmluZC5tYXRjaGVzKGEsci5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxyLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5sZW5ndGgsZT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2socihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2I8ZDtiKyspaWYoci5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihjPXRoaXMucHVzaFN0YWNrKFtdKSxiPTA7YjxkO2IrKylyLmZpbmQoYSxlW2JdLGMpO3JldHVybiBkPjE/ci51bmlxdWVTb3J0KGMpOmN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soRSh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEhRSh0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmQS50ZXN0KGEpP3IoYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgRixHPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC8sSD1yLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxGLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hWzBdJiYiPiI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOkcuZXhlYyhhKSwhZXx8IWVbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHxjKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihlWzFdKXtpZihiPWIgaW5zdGFuY2VvZiByP2JbMF06YixyLm1lcmdlKHRoaXMsci5wYXJzZUhUTUwoZVsxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpkLCEwKSksQy50ZXN0KGVbMV0pJiZyLmlzUGxhaW5PYmplY3QoYikpZm9yKGUgaW4gYilyLmlzRnVuY3Rpb24odGhpc1tlXSk/dGhpc1tlXShiW2VdKTp0aGlzLmF0dHIoZSxiW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4gZj1kLmdldEVsZW1lbnRCeUlkKGVbMl0pLGYmJih0aGlzWzBdPWYsdGhpcy5sZW5ndGg9MSksdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6ci5pc0Z1bmN0aW9uKGEpP3ZvaWQgMCE9PWMucmVhZHk/Yy5yZWFkeShhKTphKHIpOnIubWFrZUFycmF5KGEsdGhpcyl9O0gucHJvdG90eXBlPXIuZm4sRj1yKGQpO3ZhciBJPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEo9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07ci5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1yKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPGM7YSsrKWlmKHIuY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPSJzdHJpbmciIT10eXBlb2YgYSYmcihhKTtpZighQS50ZXN0KGEpKWZvcig7ZDxlO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJnIuZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9yLnVuaXF1ZVNvcnQoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhPyJzdHJpbmciPT10eXBlb2YgYT9pLmNhbGwocihhKSx0aGlzWzBdKTppLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIudW5pcXVlU29ydChyLm1lcmdlKHRoaXMuZ2V0KCkscihhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBLKGEsYil7d2hpbGUoKGE9YVtiXSkmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1yLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsInBhcmVudE5vZGUiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBLKGEsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEsoYSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHkoYSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4geShhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geShhLCJuZXh0U2libGluZyIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHkoYSwicHJldmlvdXNTaWJsaW5nIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHooKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiB6KGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBCKGEsImlmcmFtZSIpP2EuY29udGVudERvY3VtZW50OihCKGEsInRlbXBsYXRlIikmJihhPWEuY29udGVudHx8YSksci5tZXJnZShbXSxhLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKGEsYil7ci5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPXIubWFwKHRoaXMsYixjKTtyZXR1cm4iVW50aWwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJiJzdHJpbmciPT10eXBlb2YgZCYmKGU9ci5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKEpbYV18fHIudW5pcXVlU29ydChlKSxJLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgTD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIE0oYSl7dmFyIGI9e307cmV0dXJuIHIuZWFjaChhLm1hdGNoKEwpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifXIuQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9InN0cmluZyI9PXR5cGVvZiBhP00oYSk6ci5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZj1bXSxnPVtdLGg9LTEsaT1mdW5jdGlvbigpe2ZvcihlPWV8fGEub25jZSxkPWI9ITA7Zy5sZW5ndGg7aD0tMSl7Yz1nLnNoaWZ0KCk7d2hpbGUoKytoPGYubGVuZ3RoKWZbaF0uYXBwbHkoY1swXSxjWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlJiYoaD1mLmxlbmd0aCxjPSExKX1hLm1lbW9yeXx8KGM9ITEpLGI9ITEsZSYmKGY9Yz9bXToiIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe3IuZWFjaChiLGZ1bmN0aW9uKGIsYyl7ci5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiYic3RyaW5nIiE9PXIudHlwZShjKSYmZChjKX0pfShhcmd1bWVudHMpLGMmJiFiJiZpKCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiByLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9ci5pbkFycmF5KGIsZixjKSk+LTEpZi5zcGxpY2UoYywxKSxjPD1oJiZoLS19KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/ci5pbkFycmF5KGEsZik+LTE6Zi5sZW5ndGg+MH0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gZiYmKGY9W10pLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZT1nPVtdLGY9Yz0iIix0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFmfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGU9Zz1bXSxjfHxifHwoZj1jPSIiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfTtmdW5jdGlvbiBOKGEpe3JldHVybiBhfWZ1bmN0aW9uIE8oYSl7dGhyb3cgYX1mdW5jdGlvbiBQKGEsYixjLGQpe3ZhciBlO3RyeXthJiZyLmlzRnVuY3Rpb24oZT1hLnByb21pc2UpP2UuY2FsbChhKS5kb25lKGIpLmZhaWwoYyk6YSYmci5pc0Z1bmN0aW9uKGU9YS50aGVuKT9lLmNhbGwoYSxiLGMpOmIuYXBwbHkodm9pZCAwLFthXS5zbGljZShkKSl9Y2F0Y2goYSl7Yy5hcHBseSh2b2lkIDAsW2FdKX19ci5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGIpe3ZhciBjPVtbIm5vdGlmeSIsInByb2dyZXNzIixyLkNhbGxiYWNrcygibWVtb3J5Iiksci5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxyLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxkPSJwZW5kaW5nIixlPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBkfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZi5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGUudGhlbihudWxsLGEpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGIpe3IuZWFjaChjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9ci5pc0Z1bmN0aW9uKGFbZFs0XV0pJiZhW2RbNF1dO2ZbZFsxXV0oZnVuY3Rpb24oKXt2YXIgYT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZyLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhiLm5vdGlmeSkuZG9uZShiLnJlc29sdmUpLmZhaWwoYi5yZWplY3QpOmJbZFswXSsiV2l0aCJdKHRoaXMsZT9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSx0aGVuOmZ1bmN0aW9uKGIsZCxlKXt2YXIgZj0wO2Z1bmN0aW9uIGcoYixjLGQsZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPWFyZ3VtZW50cyxqPWZ1bmN0aW9uKCl7dmFyIGEsajtpZighKGI8Zikpe2lmKGE9ZC5hcHBseShoLGkpLGE9PT1jLnByb21pc2UoKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb24iKTtqPWEmJigib2JqZWN0Ij09dHlwZW9mIGF8fCJmdW5jdGlvbiI9PXR5cGVvZiBhKSYmYS50aGVuLHIuaXNGdW5jdGlvbihqKT9lP2ouY2FsbChhLGcoZixjLE4sZSksZyhmLGMsTyxlKSk6KGYrKyxqLmNhbGwoYSxnKGYsYyxOLGUpLGcoZixjLE8sZSksZyhmLGMsTixjLm5vdGlmeVdpdGgpKSk6KGQhPT1OJiYoaD12b2lkIDAsaT1bYV0pLChlfHxjLnJlc29sdmVXaXRoKShoLGkpKX19LGs9ZT9qOmZ1bmN0aW9uKCl7dHJ5e2ooKX1jYXRjaChhKXtyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJnIuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhhLGsuc3RhY2tUcmFjZSksYisxPj1mJiYoZCE9PU8mJihoPXZvaWQgMCxpPVthXSksYy5yZWplY3RXaXRoKGgsaSkpfX07Yj9rKCk6KHIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYoay5zdGFja1RyYWNlPXIuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLGEuc2V0VGltZW91dChrKSl9fXJldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGEpe2NbMF1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihlKT9lOk4sYS5ub3RpZnlXaXRoKSksY1sxXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGIpP2I6TikpLGNbMl1bM10uYWRkKGcoMCxhLHIuaXNGdW5jdGlvbihkKT9kOk8pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9yLmV4dGVuZChhLGUpOmV9fSxmPXt9O3JldHVybiByLmVhY2goYyxmdW5jdGlvbihhLGIpe3ZhciBnPWJbMl0saD1iWzVdO2VbYlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtkPWh9LGNbMy1hXVsyXS5kaXNhYmxlLGNbMF1bMl0ubG9jayksZy5hZGQoYlszXS5maXJlKSxmW2JbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGZbYlswXSsiV2l0aCJdKHRoaXM9PT1mP3ZvaWQgMDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZltiWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGUucHJvbWlzZShmKSxiJiZiLmNhbGwoZixmKSxmfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGgsYz1iLGQ9QXJyYXkoYyksZT1mLmNhbGwoYXJndW1lbnRzKSxnPXIuRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtkW2FdPXRoaXMsZVthXT1hcmd1bWVudHMubGVuZ3RoPjE/Zi5jYWxsKGFyZ3VtZW50cyk6YywtLWJ8fGcucmVzb2x2ZVdpdGgoZCxlKX19O2lmKGI8PTEmJihQKGEsZy5kb25lKGgoYykpLnJlc29sdmUsZy5yZWplY3QsIWIpLCJwZW5kaW5nIj09PWcuc3RhdGUoKXx8ci5pc0Z1bmN0aW9uKGVbY10mJmVbY10udGhlbikpKXJldHVybiBnLnRoZW4oKTt3aGlsZShjLS0pUChlW2NdLGgoYyksZy5yZWplY3QpO3JldHVybiBnLnByb21pc2UoKX19KTt2YXIgUT0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztyLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9ZnVuY3Rpb24oYixjKXthLmNvbnNvbGUmJmEuY29uc29sZS53YXJuJiZiJiZRLnRlc3QoYi5uYW1lKSYmYS5jb25zb2xlLndhcm4oImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246ICIrYi5tZXNzYWdlLGIuc3RhY2ssYyl9LHIucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24oYil7YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgYn0pfTt2YXIgUj1yLkRlZmVycmVkKCk7ci5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gUi50aGVuKGEpWyJjYXRjaCJdKGZ1bmN0aW9uKGEpe3IucmVhZHlFeGNlcHRpb24oYSl9KSx0aGlzfSxyLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tci5yZWFkeVdhaXQ6ci5pc1JlYWR5KXx8KHIuaXNSZWFkeT0hMCxhIT09ITAmJi0tci5yZWFkeVdhaXQ+MHx8Ui5yZXNvbHZlV2l0aChkLFtyXSkpfX0pLHIucmVhZHkudGhlbj1SLnRoZW47ZnVuY3Rpb24gUygpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsUyksCmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUyksci5yZWFkeSgpfSJjb21wbGV0ZSI9PT1kLnJlYWR5U3RhdGV8fCJsb2FkaW5nIiE9PWQucmVhZHlTdGF0ZSYmIWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP2Euc2V0VGltZW91dChyLnJlYWR5KTooZC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixTKSxhLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLFMpKTt2YXIgVD1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKCJvYmplY3QiPT09ci50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpVChhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxyLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwocihhKSxjKX0pKSxiKSlmb3IoO2g8aTtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfSxVPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gVigpe3RoaXMuZXhwYW5kbz1yLmV4cGFuZG8rVi51aWQrK31WLnVpZD0xLFYucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIGJ8fChiPXt9LFUoYSkmJihhLm5vZGVUeXBlP2FbdGhpcy5leHBhbmRvXT1iOk9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLHRoaXMuZXhwYW5kbyx7dmFsdWU6Yixjb25maWd1cmFibGU6ITB9KSkpLGJ9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmNhY2hlKGEpO2lmKCJzdHJpbmciPT10eXBlb2YgYillW3IuY2FtZWxDYXNlKGIpXT1jO2Vsc2UgZm9yKGQgaW4gYillW3IuY2FtZWxDYXNlKGQpXT1iW2RdO3JldHVybiBlfSxnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdm9pZCAwPT09Yj90aGlzLmNhY2hlKGEpOmFbdGhpcy5leHBhbmRvXSYmYVt0aGlzLmV4cGFuZG9dW3IuY2FtZWxDYXNlKGIpXX0sYWNjZXNzOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmInN0cmluZyI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jP3RoaXMuZ2V0KGEsYik6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PWQpe2lmKHZvaWQgMCE9PWIpe0FycmF5LmlzQXJyYXkoYik/Yj1iLm1hcChyLmNhbWVsQ2FzZSk6KGI9ci5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIubWF0Y2goTCl8fFtdKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZFtiW2NdXX0odm9pZCAwPT09Ynx8ci5pc0VtcHR5T2JqZWN0KGQpKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPXZvaWQgMDpkZWxldGUgYVt0aGlzLmV4cGFuZG9dKX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9YVt0aGlzLmV4cGFuZG9dO3JldHVybiB2b2lkIDAhPT1iJiYhci5pc0VtcHR5T2JqZWN0KGIpfX07dmFyIFc9bmV3IFYsWD1uZXcgVixZPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sWj0vW0EtWl0vZztmdW5jdGlvbiAkKGEpe3JldHVybiJ0cnVlIj09PWF8fCJmYWxzZSIhPT1hJiYoIm51bGwiPT09YT9udWxsOmE9PT0rYSsiIj8rYTpZLnRlc3QoYSk/SlNPTi5wYXJzZShhKTphKX1mdW5jdGlvbiBfKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPSJkYXRhLSIrYi5yZXBsYWNlKFosIi0kJiIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSQoYyl9Y2F0Y2goZSl7fVguc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfXIuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBYLmhhc0RhdGEoYSl8fFcuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFguYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1gucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVy5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1cucmVtb3ZlKGEsYil9fSksci5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1YLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIVcuZ2V0KGYsImhhc0RhdGFBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPXIuY2FtZWxDYXNlKGQuc2xpY2UoNSkpLF8oZixkLGVbZF0pKSk7Vy5zZXQoZiwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIGV9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSl9KTpUKHRoaXMsZnVuY3Rpb24oYil7dmFyIGM7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1YLmdldChmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1fKGYsYSksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe1guc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtYLnJlbW92ZSh0aGlzLGEpfSl9fSksci5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihhKXJldHVybiBiPShifHwiZngiKSsicXVldWUiLGQ9Vy5nZXQoYSxiKSxjJiYoIWR8fEFycmF5LmlzQXJyYXkoYyk/ZD1XLmFjY2VzcyhhLGIsci5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W119LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fCJmeCI7dmFyIGM9ci5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1yLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe3IuZGVxdWV1ZShhLGIpfTsiaW5wcm9ncmVzcyI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoImZ4Ij09PWImJmMudW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrInF1ZXVlSG9va3MiO3JldHVybiBXLmdldChhLGMpfHxXLmFjY2VzcyhhLGMse2VtcHR5OnIuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe1cucmVtb3ZlKGEsW2IrInF1ZXVlIixjXSl9KX0pfX0pLHIuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9ImZ4IixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9yLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPXIucXVldWUodGhpcyxhLGIpO3IuX3F1ZXVlSG9va3ModGhpcyxhKSwiZngiPT09YSYmImlucHJvZ3Jlc3MiIT09Y1swXSYmci5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPXIuRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07InN0cmluZyIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fCJmeCI7d2hpbGUoZy0tKWM9Vy5nZXQoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIGFhPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLGJhPW5ldyBSZWdFeHAoIl4oPzooWystXSk9fCkoIithYSsiKShbYS16JV0qKSQiLCJpIiksY2E9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxkYT1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsIm5vbmUiPT09YS5zdHlsZS5kaXNwbGF5fHwiIj09PWEuc3R5bGUuZGlzcGxheSYmci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSkmJiJub25lIj09PXIuY3NzKGEsImRpc3BsYXkiKX0sZWE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O2Z1bmN0aW9uIGZhKGEsYixjLGQpe3ZhciBlLGY9MSxnPTIwLGg9ZD9mdW5jdGlvbigpe3JldHVybiBkLmN1cigpfTpmdW5jdGlvbigpe3JldHVybiByLmNzcyhhLGIsIiIpfSxpPWgoKSxqPWMmJmNbM118fChyLmNzc051bWJlcltiXT8iIjoicHgiKSxrPShyLmNzc051bWJlcltiXXx8InB4IiE9PWomJitpKSYmYmEuZXhlYyhyLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixyLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBnYT17fTtmdW5jdGlvbiBoYShhKXt2YXIgYixjPWEub3duZXJEb2N1bWVudCxkPWEubm9kZU5hbWUsZT1nYVtkXTtyZXR1cm4gZT9lOihiPWMuYm9keS5hcHBlbmRDaGlsZChjLmNyZWF0ZUVsZW1lbnQoZCkpLGU9ci5jc3MoYiwiZGlzcGxheSIpLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSwibm9uZSI9PT1lJiYoZT0iYmxvY2siKSxnYVtkXT1lLGUpfWZ1bmN0aW9uIGlhKGEsYil7Zm9yKHZhciBjLGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWQ9YVtmXSxkLnN0eWxlJiYoYz1kLnN0eWxlLmRpc3BsYXksYj8oIm5vbmUiPT09YyYmKGVbZl09Vy5nZXQoZCwiZGlzcGxheSIpfHxudWxsLGVbZl18fChkLnN0eWxlLmRpc3BsYXk9IiIpKSwiIj09PWQuc3R5bGUuZGlzcGxheSYmZGEoZCkmJihlW2ZdPWhhKGQpKSk6Im5vbmUiIT09YyYmKGVbZl09Im5vbmUiLFcuc2V0KGQsImRpc3BsYXkiLGMpKSk7Zm9yKGY9MDtmPGc7ZisrKW51bGwhPWVbZl0mJihhW2ZdLnN0eWxlLmRpc3BsYXk9ZVtmXSk7cmV0dXJuIGF9ci5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gaWEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGEodGhpcyk/cih0aGlzKS5zaG93KCk6cih0aGlzKS5oaWRlKCl9KX19KTt2YXIgamE9L14oPzpjaGVja2JveHxyYWRpbykkL2ksa2E9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSspL2ksbGE9L14kfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLG1hPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07bWEub3B0Z3JvdXA9bWEub3B0aW9uLG1hLnRib2R5PW1hLnRmb290PW1hLmNvbGdyb3VwPW1hLmNhcHRpb249bWEudGhlYWQsbWEudGg9bWEudGQ7ZnVuY3Rpb24gbmEoYSxiKXt2YXIgYztyZXR1cm4gYz0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOltdLHZvaWQgMD09PWJ8fGImJkIoYSxiKT9yLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIG9hKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKVcuc2V0KGFbY10sImdsb2JhbEV2YWwiLCFifHxXLmdldChiW2NdLCJnbG9iYWxFdmFsIikpfXZhciBwYT0vPHwmIz9cdys7LztmdW5jdGlvbiBxYShhLGIsYyxkLGUpe2Zvcih2YXIgZixnLGgsaSxqLGssbD1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxtPVtdLG49MCxvPWEubGVuZ3RoO248bztuKyspaWYoZj1hW25dLGZ8fDA9PT1mKWlmKCJvYmplY3QiPT09ci50eXBlKGYpKXIubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKHBhLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxoPShrYS5leGVjKGYpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGk9bWFbaF18fG1hLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rci5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO3IubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9IiJ9ZWxzZSBtLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShmKSk7bC50ZXh0Q29udGVudD0iIixuPTA7d2hpbGUoZj1tW24rK10paWYoZCYmci5pbkFycmF5KGYsZCk+LTEpZSYmZS5wdXNoKGYpO2Vsc2UgaWYoaj1yLmNvbnRhaW5zKGYub3duZXJEb2N1bWVudCxmKSxnPW5hKGwuYXBwZW5kQ2hpbGQoZiksInNjcmlwdCIpLGomJm9hKGcpLGMpe2s9MDt3aGlsZShmPWdbaysrXSlsYS50ZXN0KGYudHlwZXx8IiIpJiZjLnB1c2goZil9cmV0dXJuIGx9IWZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGM9ZC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2Muc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxjLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxjLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxiLmFwcGVuZENoaWxkKGMpLG8uY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD0iPHRleHRhcmVhPng8L3RleHRhcmVhPiIsby5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciByYT1kLmRvY3VtZW50RWxlbWVudCxzYT0vXmtleS8sdGE9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLHVhPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiB2YSgpe3JldHVybiEwfWZ1bmN0aW9uIHdhKCl7cmV0dXJuITF9ZnVuY3Rpb24geGEoKXt0cnl7cmV0dXJuIGQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fWZ1bmN0aW9uIHlhKGEsYixjLGQsZSxmKXt2YXIgZyxoO2lmKCJvYmplY3QiPT10eXBlb2YgYil7InN0cmluZyIhPXR5cGVvZiBjJiYoZD1kfHxjLGM9dm9pZCAwKTtmb3IoaCBpbiBiKXlhKGEsaCxjLGQsYltoXSxmKTtyZXR1cm4gYX1pZihudWxsPT1kJiZudWxsPT1lPyhlPWMsZD1jPXZvaWQgMCk6bnVsbD09ZSYmKCJzdHJpbmciPT10eXBlb2YgYz8oZT1kLGQ9dm9pZCAwKTooZT1kLGQ9YyxjPXZvaWQgMCkpLGU9PT0hMSllPXdhO2Vsc2UgaWYoIWUpcmV0dXJuIGE7cmV0dXJuIDE9PT1mJiYoZz1lLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHIoKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9ci5ndWlkKyspKSxhLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LmFkZCh0aGlzLGIsZSxkLGMpfSl9ci5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixvLHAscT1XLmdldChhKTtpZihxKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxlJiZyLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHJhLGUpLGMuZ3VpZHx8KGMuZ3VpZD1yLmd1aWQrKyksKGk9cS5ldmVudHMpfHwoaT1xLmV2ZW50cz17fSksKGc9cS5oYW5kbGUpfHwoZz1xLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHImJnIuZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP3IuZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuJiYobD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LG49KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG4sbD1yLmV2ZW50LnNwZWNpYWxbbl18fHt9LGs9ci5leHRlbmQoe3R5cGU6bixvcmlnVHlwZTpwLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmci5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpvLmpvaW4oIi4iKX0sZiksKG09aVtuXSl8fChtPWlbbl09W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxvLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG4sZykpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxyLmV2ZW50Lmdsb2JhbFtuXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG4sbyxwLHE9Vy5oYXNEYXRhKGEpJiZXLmdldChhKTtpZihxJiYoaT1xLmV2ZW50cykpe2I9KGJ8fCIiKS5tYXRjaChMKXx8WyIiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPXVhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxuKXtsPXIuZXZlbnQuc3BlY2lhbFtuXXx8e30sbj0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8bixtPWlbbl18fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrby5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcCE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoIioqIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEsbyxxLmhhbmRsZSkhPT0hMXx8ci5yZW1vdmVFdmVudChhLG4scS5oYW5kbGUpLGRlbGV0ZSBpW25dKX1lbHNlIGZvcihuIGluIGkpci5ldmVudC5yZW1vdmUoYSxuK2Jbal0sYyxkLCEwKTtyLmlzRW1wdHlPYmplY3QoaSkmJlcucmVtb3ZlKGEsImhhbmRsZSBldmVudHMiKX19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZhciBiPXIuZXZlbnQuZml4KGEpLGMsZCxlLGYsZyxoLGk9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGo9KFcuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbYi50eXBlXXx8W10saz1yLmV2ZW50LnNwZWNpYWxbYi50eXBlXXx8e307Zm9yKGlbMF09YixjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylpW2NdPWFyZ3VtZW50c1tjXTtpZihiLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGIpIT09ITEpe2g9ci5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYixqKSxjPTA7d2hpbGUoKGY9aFtjKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7Yi5jdXJyZW50VGFyZ2V0PWYuZWxlbSxkPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tkKytdKSYmIWIuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSliLnJuYW1lc3BhY2UmJiFiLnJuYW1lc3BhY2UudGVzdChnLm5hbWVzcGFjZSl8fChiLmhhbmRsZU9iaj1nLGIuZGF0YT1nLmRhdGEsZT0oKHIuZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGIucmVzdWx0PWUpPT09ITEmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGIpLGIucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGg9W10saT1iLmRlbGVnYXRlQ291bnQsaj1hLnRhcmdldDtpZihpJiZqLm5vZGVUeXBlJiYhKCJjbGljayI9PT1hLnR5cGUmJmEuYnV0dG9uPj0xKSlmb3IoO2ohPT10aGlzO2o9ai5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1qLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8ai5kaXNhYmxlZCE9PSEwKSl7Zm9yKGY9W10sZz17fSxjPTA7YzxpO2MrKylkPWJbY10sZT1kLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1nW2VdJiYoZ1tlXT1kLm5lZWRzQ29udGV4dD9yKGUsdGhpcykuaW5kZXgoaik+LTE6ci5maW5kKGUsdGhpcyxudWxsLFtqXSkubGVuZ3RoKSxnW2VdJiZmLnB1c2goZCk7Zi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmZ9KX1yZXR1cm4gaj10aGlzLGk8Yi5sZW5ndGgmJmgucHVzaCh7ZWxlbTpqLGhhbmRsZXJzOmIuc2xpY2UoaSl9KSxofSxhZGRQcm9wOmZ1bmN0aW9uKGEsYil7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIuRXZlbnQucHJvdG90eXBlLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpyLmlzRnVuY3Rpb24oYik/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGIodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFthXX0sc2V0OmZ1bmN0aW9uKGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGEse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmJ9KX19KX0sZml4OmZ1bmN0aW9uKGEpe3JldHVybiBhW3IuZXhwYW5kb10/YTpuZXcgci5FdmVudChhKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7aWYodGhpcyE9PXhhKCkmJnRoaXMuZm9jdXMpcmV0dXJuIHRoaXMuZm9jdXMoKSwhMX0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT14YSgpJiZ0aGlzLmJsdXIpcmV0dXJuIHRoaXMuYmx1cigpLCExfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZigiY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZCKHRoaXMsImlucHV0IikpcmV0dXJuIHRoaXMuY2xpY2soKSwhMX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEIoYS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19fSxyLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMpfSxyLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiByLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT92YTp3YSx0aGlzLnRhcmdldD1hLnRhcmdldCYmMz09PWEudGFyZ2V0Lm5vZGVUeXBlP2EudGFyZ2V0LnBhcmVudE5vZGU6YS50YXJnZXQsdGhpcy5jdXJyZW50VGFyZ2V0PWEuY3VycmVudFRhcmdldCx0aGlzLnJlbGF0ZWRUYXJnZXQ9YS5yZWxhdGVkVGFyZ2V0KTp0aGlzLnR5cGU9YSxiJiZyLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxyLm5vdygpLHZvaWQodGhpc1tyLmV4cGFuZG9dPSEwKSk6bmV3IHIuRXZlbnQoYSxiKX0sci5FdmVudC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnIuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOndhLGlzUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOndhLGlzU2ltdWxhdGVkOiExLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPXZhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD12YSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sci5lYWNoKHthbHRLZXk6ITAsYnViYmxlczohMCxjYW5jZWxhYmxlOiEwLGNoYW5nZWRUb3VjaGVzOiEwLGN0cmxLZXk6ITAsZGV0YWlsOiEwLGV2ZW50UGhhc2U6ITAsbWV0YUtleTohMCxwYWdlWDohMCxwYWdlWTohMCxzaGlmdEtleTohMCx2aWV3OiEwLCJjaGFyIjohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihhKXt2YXIgYj1hLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS53aGljaCYmc2EudGVzdChhLnR5cGUpP251bGwhPWEuY2hhckNvZGU/YS5jaGFyQ29kZTphLmtleUNvZGU6IWEud2hpY2gmJnZvaWQgMCE9PWImJnRhLnRlc3QoYS50eXBlKT8xJmI/MToyJmI/Mzo0JmI/MjowOmEud2hpY2h9fSxyLmV2ZW50LmFkZFByb3ApLHIuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtyLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fHIuY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLHIuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4geWEodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB5YSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixyKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9d2EpLHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9fSk7dmFyIHphPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKVtePl0qKVwvPi9naSxBYT0vPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSxCYT0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxDYT0vXnRydWVcLyguKikvLERhPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBFYShhLGIpe3JldHVybiBCKGEsInRhYmxlIikmJkIoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLCJ0ciIpP3IoIj50Ym9keSIsYSlbMF18fGE6YX1mdW5jdGlvbiBGYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkrIi8iK2EudHlwZSxhfWZ1bmN0aW9uIEdhKGEpe3ZhciBiPUNhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGF9ZnVuY3Rpb24gSGEoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihXLmhhc0RhdGEoYSkmJihmPVcuYWNjZXNzKGEpLGc9Vy5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2M8ZDtjKyspci5ldmVudC5hZGQoYixlLGpbZV1bY10pfVguaGFzRGF0YShhKSYmKGg9WC5hY2Nlc3MoYSksaT1yLmV4dGVuZCh7fSxoKSxYLnNldChiLGkpKX19ZnVuY3Rpb24gSWEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PWMmJmphLnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1mdW5jdGlvbiBKYShhLGIsYyxkKXtiPWcuYXBwbHkoW10sYik7dmFyIGUsZixoLGksaixrLGw9MCxtPWEubGVuZ3RoLG49bS0xLHE9YlswXSxzPXIuaXNGdW5jdGlvbihxKTtpZihzfHxtPjEmJiJzdHJpbmciPT10eXBlb2YgcSYmIW8uY2hlY2tDbG9uZSYmQmEudGVzdChxKSlyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKGUpe3ZhciBmPWEuZXEoZSk7cyYmKGJbMF09cS5jYWxsKHRoaXMsZSxmLmh0bWwoKSkpLEphKGYsYixjLGQpfSk7aWYobSYmKGU9cWEoYixhWzBdLm93bmVyRG9jdW1lbnQsITEsYSxkKSxmPWUuZmlyc3RDaGlsZCwxPT09ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9ZiksZnx8ZCkpe2ZvcihoPXIubWFwKG5hKGUsInNjcmlwdCIpLEZhKSxpPWgubGVuZ3RoO2w8bTtsKyspaj1lLGwhPT1uJiYoaj1yLmNsb25lKGosITAsITApLGkmJnIubWVyZ2UoaCxuYShqLCJzY3JpcHQiKSkpLGMuY2FsbChhW2xdLGosbCk7aWYoaSlmb3Ioaz1oW2gubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsci5tYXAoaCxHYSksbD0wO2w8aTtsKyspaj1oW2xdLGxhLnRlc3Qoai50eXBlfHwiIikmJiFXLmFjY2VzcyhqLCJnbG9iYWxFdmFsIikmJnIuY29udGFpbnMoayxqKSYmKGouc3JjP3IuX2V2YWxVcmwmJnIuX2V2YWxVcmwoai5zcmMpOnAoai50ZXh0Q29udGVudC5yZXBsYWNlKERhLCIiKSxrKSl9cmV0dXJuIGF9ZnVuY3Rpb24gS2EoYSxiLGMpe2Zvcih2YXIgZCxlPWI/ci5maWx0ZXIoYixhKTphLGY9MDtudWxsIT0oZD1lW2ZdKTtmKyspY3x8MSE9PWQubm9kZVR5cGV8fHIuY2xlYW5EYXRhKG5hKGQpKSxkLnBhcmVudE5vZGUmJihjJiZyLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudCxkKSYmb2EobmEoZCwic2NyaXB0IikpLGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSk7cmV0dXJuIGF9ci5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh6YSwiPCQxPjwvJDI+Iil9LGNsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPXIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoby5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8ci5pc1hNTERvYyhhKSkpZm9yKGc9bmEoaCksZj1uYShhKSxkPTAsZT1mLmxlbmd0aDtkPGU7ZCsrKUlhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG5hKGEpLGc9Z3x8bmEoaCksZD0wLGU9Zi5sZW5ndGg7ZDxlO2QrKylIYShmW2RdLGdbZF0pO2Vsc2UgSGEoYSxoKTtyZXR1cm4gZz1uYShoLCJzY3JpcHQiKSxnLmxlbmd0aD4wJiZvYShnLCFpJiZuYShhLCJzY3JpcHQiKSksaH0sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZT1yLmV2ZW50LnNwZWNpYWwsZj0wO3ZvaWQgMCE9PShjPWFbZl0pO2YrKylpZihVKGMpKXtpZihiPWNbVy5leHBhbmRvXSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZVtkXT9yLmV2ZW50LnJlbW92ZShjLGQpOnIucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtjW1cuZXhwYW5kb109dm9pZCAwfWNbWC5leHBhbmRvXSYmKGNbWC5leHBhbmRvXT12b2lkIDApfX19KSxyLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBLYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIEthKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9yLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUVhKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9RWEodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBKYSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYoci5jbGVhbkRhdGEobmEoYSwhMSkpLGEudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGwhPWEmJmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiByLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmIUFhLnRlc3QoYSkmJiFtYVsoa2EuZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9ci5odG1sUHJlZmlsdGVyKGEpO3RyeXtmb3IoO2M8ZDtjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG5hKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIEphKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtyLmluQXJyYXkodGhpcyxhKTwwJiYoci5jbGVhbkRhdGEobmEodGhpcykpLGMmJmMucmVwbGFjZUNoaWxkKGIsdGhpcykpfSxhKX19KSxyLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1yKGEpLGY9ZS5sZW5ndGgtMSxnPTA7Zzw9ZjtnKyspYz1nPT09Zj90aGlzOnRoaXMuY2xvbmUoITApLHIoZVtnXSlbYl0oYyksaC5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgTGE9L15tYXJnaW4vLE1hPW5ldyBSZWdFeHAoIl4oIithYSsiKSg/IXB4KVthLXolXSskIiwiaSIpLE5hPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGkpe2kuc3R5bGUuY3NzVGV4dD0iYm94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt0b3A6MSU7d2lkdGg6NTAlIixpLmlubmVySFRNTD0iIixyYS5hcHBlbmRDaGlsZChoKTt2YXIgYj1hLmdldENvbXB1dGVkU3R5bGUoaSk7Yz0iMSUiIT09Yi50b3AsZz0iMnB4Ij09PWIubWFyZ2luTGVmdCxlPSI0cHgiPT09Yi53aWR0aCxpLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGY9IjRweCI9PT1iLm1hcmdpblJpZ2h0LHJhLnJlbW92ZUNoaWxkKGgpLGk9bnVsbH19dmFyIGMsZSxmLGcsaD1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpLnN0eWxlJiYoaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixvLmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxoLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixoLmFwcGVuZENoaWxkKGkpLHIuZXh0ZW5kKG8se3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGN9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxlfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIGIoKSxmfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGd9fSkpfSgpO2Z1bmN0aW9uIE9hKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8TmEoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdLCIiIT09Z3x8ci5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPXIuc3R5bGUoYSxiKSksIW8ucGl4ZWxNYXJnaW5SaWdodCgpJiZNYS50ZXN0KGcpJiZMYS50ZXN0KGIpJiYoZD1oLndpZHRoLGU9aC5taW5XaWR0aCxmPWgubWF4V2lkdGgsaC5taW5XaWR0aD1oLm1heFdpZHRoPWgud2lkdGg9ZyxnPWMud2lkdGgsaC53aWR0aD1kLGgubWluV2lkdGg9ZSxoLm1heFdpZHRoPWYpKSx2b2lkIDAhPT1nP2crIiI6Z31mdW5jdGlvbiBQYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUWE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFJhPS9eLS0vLFNhPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxUYT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn0sVWE9WyJXZWJraXQiLCJNb3oiLCJtcyJdLFZhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGU7ZnVuY3Rpb24gV2EoYSl7aWYoYSBpbiBWYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPVVhLmxlbmd0aDt3aGlsZShjLS0paWYoYT1VYVtjXStiLGEgaW4gVmEpcmV0dXJuIGF9ZnVuY3Rpb24gWGEoYSl7dmFyIGI9ci5jc3NQcm9wc1thXTtyZXR1cm4gYnx8KGI9ci5jc3NQcm9wc1thXT1XYShhKXx8YSksYn1mdW5jdGlvbiBZYShhLGIsYyl7dmFyIGQ9YmEuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMl0tKGN8fDApKSsoZFszXXx8InB4Iik6Yn1mdW5jdGlvbiBaYShhLGIsYyxkLGUpe3ZhciBmLGc9MDtmb3IoZj1jPT09KGQ/ImJvcmRlciI6ImNvbnRlbnQiKT80OiJ3aWR0aCI9PT1iPzE6MDtmPDQ7Zis9MikibWFyZ2luIj09PWMmJihnKz1yLmNzcyhhLGMrY2FbZl0sITAsZSkpLGQ/KCJjb250ZW50Ij09PWMmJihnLT1yLmNzcyhhLCJwYWRkaW5nIitjYVtmXSwhMCxlKSksIm1hcmdpbiIhPT1jJiYoZy09ci5jc3MoYSwiYm9yZGVyIitjYVtmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPXIuY3NzKGEsInBhZGRpbmciK2NhW2ZdLCEwLGUpLCJwYWRkaW5nIiE9PWMmJihnKz1yLmNzcyhhLCJib3JkZXIiK2NhW2ZdKyJXaWR0aCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiAkYShhLGIsYyl7dmFyIGQsZT1OYShhKSxmPU9hKGEsYixlKSxnPSJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZSk7cmV0dXJuIE1hLnRlc3QoZik/ZjooZD1nJiYoby5ib3hTaXppbmdSZWxpYWJsZSgpfHxmPT09YS5zdHlsZVtiXSksImF1dG8iPT09ZiYmKGY9YVsib2Zmc2V0IitiWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKV0pLGY9cGFyc2VGbG9hdChmKXx8MCxmK1phKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZSkrInB4Iil9ci5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1PYShhLCJvcGFjaXR5Iik7cmV0dXJuIiI9PT1jPyIxIjpjfX19fSxjc3NOdW1iZXI6e2FuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiEwLGNvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpLGo9YS5zdHlsZTtyZXR1cm4gaXx8KGI9WGEoaCkpLGc9ci5jc3NIb29rc1tiXXx8ci5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTpqW2JdOihmPXR5cGVvZiBjLCJzdHJpbmciPT09ZiYmKGU9YmEuZXhlYyhjKSkmJmVbMV0mJihjPWZhKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChyLmNzc051bWJlcltoXT8iIjoicHgiKSksby5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaltiXT0iaW5oZXJpdCIpLGcmJiJzZXQiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGk/ai5zZXRQcm9wZXJ0eShiLGMpOmpbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9ci5jYW1lbENhc2UoYiksaT1SYS50ZXN0KGIpO3JldHVybiBpfHwoYj1YYShoKSksZz1yLmNzc0hvb2tzW2JdfHxyLmNzc0hvb2tzW2hdLGcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9T2EoYSxiLGQpKSwibm9ybWFsIj09PWUmJmIgaW4gVGEmJihlPVRhW2JdKSwiIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxyLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7ci5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtpZihjKXJldHVybiFRYS50ZXN0KHIuY3NzKGEsImRpc3BsYXkiKSl8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/JGEoYSxiLGQpOmVhKGEsU2EsZnVuY3Rpb24oKXtyZXR1cm4gJGEoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZOYShhKSxnPWQmJlphKGEsYixkLCJib3JkZXItYm94Ij09PXIuY3NzKGEsImJveFNpemluZyIsITEsZiksZik7cmV0dXJuIGcmJihlPWJhLmV4ZWMoYykpJiYicHgiIT09KGVbM118fCJweCIpJiYoYS5zdHlsZVtiXT1jLGM9ci5jc3MoYSxiKSksWWEoYSxjLGcpfX19KSxyLmNzc0hvb2tzLm1hcmdpbkxlZnQ9UGEoby5yZWxpYWJsZU1hcmdpbkxlZnQsZnVuY3Rpb24oYSxiKXtpZihiKXJldHVybihwYXJzZUZsb2F0KE9hKGEsIm1hcmdpbkxlZnQiKSl8fGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdC1lYShhLHttYXJnaW5MZWZ0OjB9LGZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0pKSsicHgifSksci5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ZDw0O2QrKyllW2ErY2FbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sTGEudGVzdChhKXx8KHIuY3NzSG9va3NbYStiXS5zZXQ9WWEpfSksci5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKGQ9TmEoYSksZT1iLmxlbmd0aDtnPGU7ZysrKWZbYltnXV09ci5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP3Iuc3R5bGUoYSxiLGMpOnIuY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfX0pO2Z1bmN0aW9uIF9hKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBfYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfXIuVHdlZW49X2EsX2EucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpfYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxyLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KHIuY3NzTnVtYmVyW2NdPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1fYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6X2EucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9X2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz1iPXIuZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPWI9YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpfYS5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxfYS5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9X2EucHJvdG90eXBlLF9hLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gMSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbCE9YS5lbGVtW2EucHJvcF0mJm51bGw9PWEuZWxlbS5zdHlsZVthLnByb3BdP2EuZWxlbVthLnByb3BdOihiPXIuY3NzKGEuZWxlbSxhLnByb3AsIiIpLGImJiJhdXRvIiE9PWI/YjowKX0sc2V0OmZ1bmN0aW9uKGEpe3IuZnguc3RlcFthLnByb3BdP3IuZnguc3RlcFthLnByb3BdKGEpOjEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGw9PWEuZWxlbS5zdHlsZVtyLmNzc1Byb3BzW2EucHJvcF1dJiYhci5jc3NIb29rc1thLnByb3BdP2EuZWxlbVthLnByb3BdPWEubm93OnIuc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpfX19LF9hLnByb3BIb29rcy5zY3JvbGxUb3A9X2EucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sci5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxfZGVmYXVsdDoic3dpbmcifSxyLmZ4PV9hLnByb3RvdHlwZS5pbml0LHIuZnguc3RlcD17fTt2YXIgYWIsYmIsY2I9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGRiPS9xdWV1ZUhvb2tzJC87ZnVuY3Rpb24gZWIoKXtiYiYmKGQuaGlkZGVuPT09ITEmJmEucmVxdWVzdEFuaW1hdGlvbkZyYW1lP2EucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGViKTphLnNldFRpbWVvdXQoZWIsci5meC5pbnRlcnZhbCksci5meC50aWNrKCkpfWZ1bmN0aW9uIGZiKCl7cmV0dXJuIGEuc2V0VGltZW91dChmdW5jdGlvbigpe2FiPXZvaWQgMH0pLGFiPXIubm93KCl9ZnVuY3Rpb24gZ2IoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowO2Q8NDtkKz0yLWIpYz1jYVtkXSxlWyJtYXJnaW4iK2NdPWVbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIGhiKGEsYixjKXtmb3IodmFyIGQsZT0oa2IudHdlZW5lcnNbYl18fFtdKS5jb25jYXQoa2IudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gaWIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD0id2lkdGgiaW4gYnx8ImhlaWdodCJpbiBiLG09dGhpcyxuPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJmRhKGEpLHE9Vy5nZXQoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGc9ci5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWcudW5xdWV1ZWQmJihnLnVucXVldWVkPTAsaD1nLmVtcHR5LmZpcmUsZy5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7Zy51bnF1ZXVlZHx8aCgpfSksZy51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtnLnVucXVldWVkLS0sci5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8Zy5lbXB0eS5maXJlKCl9KX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxjYi50ZXN0KGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fCJ0b2dnbGUiPT09ZSxlPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bltkXT1xJiZxW2RdfHxyLnN0eWxlKGEsZCl9aWYoaT0hci5pc0VtcHR5T2JqZWN0KGIpLGl8fCFyLmlzRW1wdHlPYmplY3Qobikpe2wmJjE9PT1hLm5vZGVUeXBlJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1xJiZxLmRpc3BsYXksbnVsbD09aiYmKGo9Vy5nZXQoYSwiZGlzcGxheSIpKSxrPXIuY3NzKGEsImRpc3BsYXkiKSwibm9uZSI9PT1rJiYoaj9rPWo6KGlhKFthXSwhMCksaj1hLnN0eWxlLmRpc3BsYXl8fGosaz1yLmNzcyhhLCJkaXNwbGF5IiksaWEoW2FdKSkpLCgiaW5saW5lIj09PWt8fCJpbmxpbmUtYmxvY2siPT09ayYmbnVsbCE9aikmJiJub25lIj09PXIuY3NzKGEsImZsb2F0IikmJihpfHwobS5kb25lKGZ1bmN0aW9uKCl7by5kaXNwbGF5PWp9KSxudWxsPT1qJiYoaz1vLmRpc3BsYXksaj0ibm9uZSI9PT1rPyIiOmspKSxvLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz0iaGlkZGVuIixtLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSksaT0hMTtmb3IoZCBpbiBuKWl8fChxPyJoaWRkZW4iaW4gcSYmKHA9cS5oaWRkZW4pOnE9Vy5hY2Nlc3MoYSwiZnhzaG93Iix7ZGlzcGxheTpqfSksZiYmKHEuaGlkZGVuPSFwKSxwJiZpYShbYV0sITApLG0uZG9uZShmdW5jdGlvbigpe3B8fGlhKFthXSksVy5yZW1vdmUoYSwiZnhzaG93Iik7Zm9yKGQgaW4gbilyLnN0eWxlKGEsZCxuW2RdKX0pKSxpPWhiKHA/cVtkXTowLGQsbSksZCBpbiBxfHwocVtkXT1pLnN0YXJ0LHAmJihpLmVuZD1pLnN0YXJ0LGkuc3RhcnQ9MCkpfX1mdW5jdGlvbiBqYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPXIuY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sQXJyYXkuaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9ci5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBrYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1rYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPXIuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWFifHxmYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtnPGk7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksZjwxJiZpP2M6KGl8fGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpyLmV4dGVuZCh7fSxiKSxvcHRzOnIuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpyLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmFifHxmYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9ci5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtjPGQ7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihqYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtmPGc7ZisrKWlmKGQ9a2IucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIHIuaXNGdW5jdGlvbihkLnN0b3ApJiYoci5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPXIucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiByLm1hcChrLGhiLGopLHIuaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpLHIuZngudGltZXIoci5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksan1yLkFuaW1hdGlvbj1yLmV4dGVuZChrYix7dHdlZW5lcnM6eyIqIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYik7cmV0dXJuIGZhKGMuZWxlbSxhLGJhLmV4ZWMoYiksYyksY31dfSx0d2VlbmVyOmZ1bmN0aW9uKGEsYil7ci5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bIioiXSk6YT1hLm1hdGNoKEwpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWM9YVtkXSxrYi50d2VlbmVyc1tjXT1rYi50d2VlbmVyc1tjXXx8W10sa2IudHdlZW5lcnNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyczpbaWJdLHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/a2IucHJlZmlsdGVycy51bnNoaWZ0KGEpOmtiLnByZWZpbHRlcnMucHVzaChhKX19KSxyLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiYib2JqZWN0Ij09dHlwZW9mIGE/ci5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxyLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIXIuaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIHIuZngub2ZmP2QuZHVyYXRpb249MDoibnVtYmVyIiE9dHlwZW9mIGQuZHVyYXRpb24mJihkLmR1cmF0aW9uIGluIHIuZnguc3BlZWRzP2QuZHVyYXRpb249ci5meC5zcGVlZHNbZC5kdXJhdGlvbl06ZC5kdXJhdGlvbj1yLmZ4LnNwZWVkcy5fZGVmYXVsdCksbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtyLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJnIuZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxyLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihkYSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ci5pc0VtcHR5T2JqZWN0KGEpLGY9ci5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWtiKHRoaXMsci5leHRlbmQoe30sYSksZik7KGV8fFcuZ2V0KHRoaXMsImZpbmlzaCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErInF1ZXVlSG9va3MiLGY9ci50aW1lcnMsZz1XLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZkYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxyLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1XLmdldCh0aGlzKSxkPWNbYSsicXVldWUiXSxlPWNbYSsicXVldWVIb29rcyJdLGY9ci50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLHIucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2I8ZztiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksci5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihhLGIpe3ZhciBjPXIuZm5bYl07ci5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fCJib29sZWFuIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKGdiKGIsITApLGEsZCxlKX19KSxyLmVhY2goe3NsaWRlRG93bjpnYigic2hvdyIpLHNsaWRlVXA6Z2IoImhpZGUiKSxzbGlkZVRvZ2dsZTpnYigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihhLGIpe3IuZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksci50aW1lcnM9W10sci5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9ci50aW1lcnM7Zm9yKGFiPXIubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8ci5meC5zdG9wKCksYWI9dm9pZCAwfSxyLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe3IudGltZXJzLnB1c2goYSksci5meC5zdGFydCgpfSxyLmZ4LmludGVydmFsPTEzLHIuZnguc3RhcnQ9ZnVuY3Rpb24oKXtiYnx8KGJiPSEwLGViKCkpfSxyLmZ4LnN0b3A9ZnVuY3Rpb24oKXtiYj1udWxsfSxyLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxyLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9ci5meD9yLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZUVsZW1lbnQoImlucHV0IiksYj1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGM9Yi5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTthLnR5cGU9ImNoZWNrYm94IixvLmNoZWNrT249IiIhPT1hLnZhbHVlLG8ub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxhPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxhLnZhbHVlPSJ0IixhLnR5cGU9InJhZGlvIixvLnJhZGlvVmFsdWU9InQiPT09YS52YWx1ZX0oKTt2YXIgbGIsbWI9ci5leHByLmF0dHJIYW5kbGU7ci5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLHIuYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxyLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP3IucHJvcChhLGIsYyk6KDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoZT1yLmF0dHJIb29rc1tiLnRvTG93ZXJDYXNlKCldfHwoci5leHByLm1hdGNoLmJvb2wudGVzdChiKT9sYjp2b2lkIDApKSx2b2lkIDAhPT1jP251bGw9PT1jP3ZvaWQgci5yZW1vdmVBdHRyKGEsYik6ZSYmInNldCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6KGEuc2V0QXR0cmlidXRlKGIsYysiIiksYyk6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDooZD1yLmZpbmQuYXR0cihhLGIpLApudWxsPT1kP3ZvaWQgMDpkKSl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIW8ucmFkaW9WYWx1ZSYmInJhZGlvIj09PWImJkIoYSwiaW5wdXQiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTAsZT1iJiZiLm1hdGNoKEwpO2lmKGUmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZVtkKytdKWEucmVtb3ZlQXR0cmlidXRlKGMpfX0pLGxiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/ci5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sci5lYWNoKHIuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9bWJbYl18fHIuZmluZC5hdHRyO21iW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGc9Yi50b0xvd2VyQ2FzZSgpO3JldHVybiBkfHwoZj1tYltnXSxtYltnXT1lLGU9bnVsbCE9YyhhLGIsZCk/ZzpudWxsLG1iW2ddPWYpLGV9fSk7dmFyIG5iPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksb2I9L14oPzphfGFyZWEpJC9pO3IuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFQodGhpcyxyLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW3IucHJvcEZpeFthXXx8YV19KX19KSxyLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gMT09PWYmJnIuaXNYTUxEb2MoYSl8fChiPXIucHJvcEZpeFtiXXx8YixlPXIucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJiJzZXQiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYj1yLmZpbmQuYXR0cihhLCJ0YWJpbmRleCIpO3JldHVybiBiP3BhcnNlSW50KGIsMTApOm5iLnRlc3QoYS5ub2RlTmFtZSl8fG9iLnRlc3QoYS5ub2RlTmFtZSkmJmEuaHJlZj8wOi0xfX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pLG8ub3B0U2VsZWN0ZWR8fChyLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksci5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtyLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7ZnVuY3Rpb24gcGIoYSl7dmFyIGI9YS5tYXRjaChMKXx8W107cmV0dXJuIGIuam9pbigiICIpfWZ1bmN0aW9uIHFiKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifXIuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYoci5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7cih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHFiKHRoaXMpKSl9KTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pZC5pbmRleE9mKCIgIitmKyIgIik8MCYmKGQrPWYrIiAiKTtoPXBiKGQpLGUhPT1oJiZjLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaT0wO2lmKHIuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYixxYih0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigic3RyaW5nIj09dHlwZW9mIGEmJmEpe2I9YS5tYXRjaChMKXx8W107d2hpbGUoYz10aGlzW2krK10paWYoZT1xYihjKSxkPTE9PT1jLm5vZGVUeXBlJiYiICIrcGIoZSkrIiAiKXtnPTA7d2hpbGUoZj1iW2crK10pd2hpbGUoZC5pbmRleE9mKCIgIitmKyIgIik+LTEpZD1kLnJlcGxhY2UoIiAiK2YrIiAiLCIgIik7aD1wYihkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoImNsYXNzIixoKX19cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgYiYmInN0cmluZyI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnIuaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHFiKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoInN0cmluZyI9PT1jKXtkPTAsZT1yKHRoaXMpLGY9YS5tYXRjaChMKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZSB2b2lkIDAhPT1hJiYiYm9vbGVhbiIhPT1jfHwoYj1xYih0aGlzKSxiJiZXLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixifHxhPT09ITE/IiI6Vy5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0wO2I9IiAiK2ErIiAiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoIiAiK3BiKHFiKGMpKSsiICIpLmluZGV4T2YoYik+LTEpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIHJiPS9cci9nO3IuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1yLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMscih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9IiI6Im51bWJlciI9PXR5cGVvZiBlP2UrPSIiOkFycmF5LmlzQXJyYXkoZSkmJihlPXIubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/IiI6YSsiIn0pKSxiPXIudmFsSG9va3NbdGhpcy50eXBlXXx8ci52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJzZXQiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPXIudmFsSG9va3NbZS50eXBlXXx8ci52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJiJnZXQiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSwidmFsdWUiKSk/YzooYz1lLnZhbHVlLCJzdHJpbmciPT10eXBlb2YgYz9jLnJlcGxhY2UocmIsIiIpOm51bGw9PWM/IiI6Yyl9fX0pLHIuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9ci5maW5kLmF0dHIoYSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9Yj9iOnBiKHIudGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLm9wdGlvbnMsZj1hLnNlbGVjdGVkSW5kZXgsZz0ic2VsZWN0LW9uZSI9PT1hLnR5cGUsaD1nP251bGw6W10saT1nP2YrMTplLmxlbmd0aDtmb3IoZD1mPDA/aTpnP2Y6MDtkPGk7ZCsrKWlmKGM9ZVtkXSwoYy5zZWxlY3RlZHx8ZD09PWYpJiYhYy5kaXNhYmxlZCYmKCFjLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFCKGMucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKGI9cihjKS52YWwoKSxnKXJldHVybiBiO2gucHVzaChiKX1yZXR1cm4gaH0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPXIubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1yLmluQXJyYXkoci52YWxIb29rcy5vcHRpb24uZ2V0KGQpLGYpPi0xKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksci5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7ci52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7aWYoQXJyYXkuaXNBcnJheShiKSlyZXR1cm4gYS5jaGVja2VkPXIuaW5BcnJheShyKGEpLnZhbCgpLGIpPi0xfX0sby5jaGVja09ufHwoci52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmEudmFsdWV9KX0pO3ZhciBzYj0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC87ci5leHRlbmQoci5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihiLGMsZSxmKXt2YXIgZyxoLGksaixrLG0sbixvPVtlfHxkXSxwPWwuY2FsbChiLCJ0eXBlIik/Yi50eXBlOmIscT1sLmNhbGwoYiwibmFtZXNwYWNlIik/Yi5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtpZihoPWk9ZT1lfHxkLDMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmIXNiLnRlc3QocCtyLmV2ZW50LnRyaWdnZXJlZCkmJihwLmluZGV4T2YoIi4iKT4tMSYmKHE9cC5zcGxpdCgiLiIpLHA9cS5zaGlmdCgpLHEuc29ydCgpKSxrPXAuaW5kZXhPZigiOiIpPDAmJiJvbiIrcCxiPWJbci5leHBhbmRvXT9iOm5ldyByLkV2ZW50KHAsIm9iamVjdCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1mPzI6MyxiLm5hbWVzcGFjZT1xLmpvaW4oIi4iKSxiLnJuYW1lc3BhY2U9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIrcS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWUpLGM9bnVsbD09Yz9bYl06ci5tYWtlQXJyYXkoYyxbYl0pLG49ci5ldmVudC5zcGVjaWFsW3BdfHx7fSxmfHwhbi50cmlnZ2VyfHxuLnRyaWdnZXIuYXBwbHkoZSxjKSE9PSExKSl7aWYoIWYmJiFuLm5vQnViYmxlJiYhci5pc1dpbmRvdyhlKSl7Zm9yKGo9bi5kZWxlZ2F0ZVR5cGV8fHAsc2IudGVzdChqK3ApfHwoaD1oLnBhcmVudE5vZGUpO2g7aD1oLnBhcmVudE5vZGUpby5wdXNoKGgpLGk9aDtpPT09KGUub3duZXJEb2N1bWVudHx8ZCkmJm8ucHVzaChpLmRlZmF1bHRWaWV3fHxpLnBhcmVudFdpbmRvd3x8YSl9Zz0wO3doaWxlKChoPW9bZysrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWc+MT9qOm4uYmluZFR5cGV8fHAsbT0oVy5nZXQoaCwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZXLmdldChoLCJoYW5kbGUiKSxtJiZtLmFwcGx5KGgsYyksbT1rJiZoW2tdLG0mJm0uYXBwbHkmJlUoaCkmJihiLnJlc3VsdD1tLmFwcGx5KGgsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXAsZnx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8bi5fZGVmYXVsdCYmbi5fZGVmYXVsdC5hcHBseShvLnBvcCgpLGMpIT09ITF8fCFVKGUpfHxrJiZyLmlzRnVuY3Rpb24oZVtwXSkmJiFyLmlzV2luZG93KGUpJiYoaT1lW2tdLGkmJihlW2tdPW51bGwpLHIuZXZlbnQudHJpZ2dlcmVkPXAsZVtwXSgpLHIuZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxpJiYoZVtrXT1pKSksYi5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ci5leHRlbmQobmV3IHIuRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwfSk7ci5ldmVudC50cmlnZ2VyKGQsbnVsbCxiKX19KSxyLmZuLmV4dGVuZCh7dHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtpZihjKXJldHVybiByLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApfX0pLHIuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe3IuZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLHIuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KSxvLmZvY3VzaW49Im9uZm9jdXNpbiJpbiBhLG8uZm9jdXNpbnx8ci5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3IuZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxyLmV2ZW50LmZpeChhKSl9O3IuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1XLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLFcuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Vy5hY2Nlc3MoZCxiKS0xO2U/Vy5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxXLnJlbW92ZShkLGIpKX19fSk7dmFyIHRiPWEubG9jYXRpb24sdWI9ci5ub3coKSx2Yj0vXD8vO3IucGFyc2VYTUw9ZnVuY3Rpb24oYil7dmFyIGM7aWYoIWJ8fCJzdHJpbmciIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYiwidGV4dC94bWwiKX1jYXRjaChkKXtjPXZvaWQgMH1yZXR1cm4gYyYmIWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxyLmVycm9yKCJJbnZhbGlkIFhNTDogIitiKSxjfTt2YXIgd2I9L1xbXF0kLyx4Yj0vXHI/XG4vZyx5Yj0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIEFiKGEsYixjLGQpe3ZhciBlO2lmKEFycmF5LmlzQXJyYXkoYikpci5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09ci50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpQWIoYSsiWyIrZSsiXSIsYltlXSxjLGQpfXIucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1yLmlzRnVuY3Rpb24oYik/YigpOmI7ZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9IitlbmNvZGVVUklDb21wb25lbnQobnVsbD09Yz8iIjpjKX07aWYoQXJyYXkuaXNBcnJheShhKXx8YS5qcXVlcnkmJiFyLmlzUGxhaW5PYmplY3QoYSkpci5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIil9LHIuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gci5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXIucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBhP3IubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXIodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IWphLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9cih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOkFycmF5LmlzQXJyYXkoYyk/ci5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm57bmFtZTpiLm5hbWUsdmFsdWU6YS5yZXBsYWNlKHhiLCJcclxuIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh4YiwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBCYj0vJTIwL2csQ2I9LyMuKiQvLERiPS8oWz8mXSlfPVteJl0qLyxFYj0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLEZiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEdiPS9eKD86R0VUfEhFQUQpJC8sSGI9L15cL1wvLyxJYj17fSxKYj17fSxLYj0iKi8iLmNvbmNhdCgiKiIpLExiPWQuY3JlYXRlRWxlbWVudCgiYSIpO0xiLmhyZWY9dGIuaHJlZjtmdW5jdGlvbiBNYihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXsic3RyaW5nIiE9dHlwZW9mIGImJihjPWIsYj0iKiIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8W107aWYoci5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKSIrIj09PWRbMF0/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gTmIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09SmI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxyLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBPYihhLGIpe3ZhciBjLGQsZT1yLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZyLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gUGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihkKWZvcihlIGluIGgpaWYoaFtlXSYmaFtlXS50ZXN0KGQpKXtpLnVuc2hpZnQoZSk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGUgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tlKyIgIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31pZihmKXJldHVybiBmIT09aVswXSYmaS51bnNoaWZ0KGYpLGNbZl19ZnVuY3Rpb24gUWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1yLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6dGIuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6RmIudGVzdCh0Yi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpLYix0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpKU09OLnBhcnNlLCJ0ZXh0IHhtbCI6ci5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/T2IoT2IoYSxyLmFqYXhTZXR0aW5ncyksYik6T2Ioci5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6TWIoSWIpLGFqYXhUcmFuc3BvcnQ6TWIoSmIpLGFqYXg6ZnVuY3Rpb24oYixjKXsib2JqZWN0Ij09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1yLmFqYXhTZXR1cCh7fSxjKSxwPW8uY29udGV4dHx8byxxPW8uY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT9yKHApOnIuZXZlbnQscz1yLkRlZmVycmVkKCksdD1yLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx1PW8uc3RhdHVzQ29kZXx8e30sdj17fSx3PXt9LHg9ImNhbmNlbGVkIix5PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoayl7aWYoIWgpe2g9e307d2hpbGUoYj1FYi5leGVjKGcpKWhbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9aFthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIGs/ZzpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWsmJihhPXdbYS50b0xvd2VyQ2FzZSgpXT13W2EudG9Mb3dlckNhc2UoKV18fGEsdlthXT1iKSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1rJiYoby5taW1lVHlwZT1hKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEpaWYoayl5LmFsd2F5cyhhW3kuc3RhdHVzXSk7ZWxzZSBmb3IoYiBpbiBhKXVbYl09W3VbYl0sYVtiXV07cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHg7cmV0dXJuIGUmJmUuYWJvcnQoYiksQSgwLGIpLHRoaXN9fTtpZihzLnByb21pc2UoeSksby51cmw9KChifHxvLnVybHx8dGIuaHJlZikrIiIpLnJlcGxhY2UoSGIsdGIucHJvdG9jb2wrIi8vIiksby50eXBlPWMubWV0aG9kfHxjLnR5cGV8fG8ubWV0aG9kfHxvLnR5cGUsby5kYXRhVHlwZXM9KG8uZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChMKXx8WyIiXSxudWxsPT1vLmNyb3NzRG9tYWluKXtqPWQuY3JlYXRlRWxlbWVudCgiYSIpO3RyeXtqLmhyZWY9by51cmwsai5ocmVmPWouaHJlZixvLmNyb3NzRG9tYWluPUxiLnByb3RvY29sKyIvLyIrTGIuaG9zdCE9ai5wcm90b2NvbCsiLy8iK2ouaG9zdH1jYXRjaCh6KXtvLmNyb3NzRG9tYWluPSEwfX1pZihvLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJiJzdHJpbmciIT10eXBlb2Ygby5kYXRhJiYoby5kYXRhPXIucGFyYW0oby5kYXRhLG8udHJhZGl0aW9uYWwpKSxOYihJYixvLGMseSksaylyZXR1cm4geTtsPXIuZXZlbnQmJm8uZ2xvYmFsLGwmJjA9PT1yLmFjdGl2ZSsrJiZyLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLG8udHlwZT1vLnR5cGUudG9VcHBlckNhc2UoKSxvLmhhc0NvbnRlbnQ9IUdiLnRlc3Qoby50eXBlKSxmPW8udXJsLnJlcGxhY2UoQ2IsIiIpLG8uaGFzQ29udGVudD9vLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJjA9PT0oby5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiYoby5kYXRhPW8uZGF0YS5yZXBsYWNlKEJiLCIrIikpOihuPW8udXJsLnNsaWNlKGYubGVuZ3RoKSxvLmRhdGEmJihmKz0odmIudGVzdChmKT8iJiI6Ij8iKStvLmRhdGEsZGVsZXRlIG8uZGF0YSksby5jYWNoZT09PSExJiYoZj1mLnJlcGxhY2UoRGIsIiQxIiksbj0odmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK3ViKysgK24pLG8udXJsPWYrbiksby5pZk1vZGlmaWVkJiYoci5sYXN0TW9kaWZpZWRbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLHIubGFzdE1vZGlmaWVkW2ZdKSxyLmV0YWdbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcigiSWYtTm9uZS1NYXRjaCIsci5ldGFnW2ZdKSksKG8uZGF0YSYmby5oYXNDb250ZW50JiZvLmNvbnRlbnRUeXBlIT09ITF8fGMuY29udGVudFR5cGUpJiZ5LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsby5jb250ZW50VHlwZSkseS5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLG8uZGF0YVR5cGVzWzBdJiZvLmFjY2VwdHNbby5kYXRhVHlwZXNbMF1dP28uYWNjZXB0c1tvLmRhdGFUeXBlc1swXV0rKCIqIiE9PW8uZGF0YVR5cGVzWzBdPyIsICIrS2IrIjsgcT0wLjAxIjoiIik6by5hY2NlcHRzWyIqIl0pO2ZvcihtIGluIG8uaGVhZGVycyl5LnNldFJlcXVlc3RIZWFkZXIobSxvLmhlYWRlcnNbbV0pO2lmKG8uYmVmb3JlU2VuZCYmKG8uYmVmb3JlU2VuZC5jYWxsKHAseSxvKT09PSExfHxrKSlyZXR1cm4geS5hYm9ydCgpO2lmKHg9ImFib3J0Iix0LmFkZChvLmNvbXBsZXRlKSx5LmRvbmUoby5zdWNjZXNzKSx5LmZhaWwoby5lcnJvciksZT1OYihKYixvLGMseSkpe2lmKHkucmVhZHlTdGF0ZT0xLGwmJnEudHJpZ2dlcigiYWpheFNlbmQiLFt5LG9dKSxrKXJldHVybiB5O28uYXN5bmMmJm8udGltZW91dD4wJiYoaT1hLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt5LmFib3J0KCJ0aW1lb3V0Iil9LG8udGltZW91dCkpO3RyeXtrPSExLGUuc2VuZCh2LEEpfWNhdGNoKHope2lmKGspdGhyb3cgejtBKC0xLHopfX1lbHNlIEEoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIEEoYixjLGQsaCl7dmFyIGosbSxuLHYsdyx4PWM7a3x8KGs9ITAsaSYmYS5jbGVhclRpbWVvdXQoaSksZT12b2lkIDAsZz1ofHwiIix5LnJlYWR5U3RhdGU9Yj4wPzQ6MCxqPWI+PTIwMCYmYjwzMDB8fDMwND09PWIsZCYmKHY9UGIobyx5LGQpKSx2PVFiKG8sdix5LGopLGo/KG8uaWZNb2RpZmllZCYmKHc9eS5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHcmJihyLmxhc3RNb2RpZmllZFtmXT13KSx3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx3JiYoci5ldGFnW2ZdPXcpKSwyMDQ9PT1ifHwiSEVBRCI9PT1vLnR5cGU/eD0ibm9jb250ZW50IjozMDQ9PT1iP3g9Im5vdG1vZGlmaWVkIjooeD12LnN0YXRlLG09di5kYXRhLG49di5lcnJvcixqPSFuKSk6KG49eCwhYiYmeHx8KHg9ImVycm9yIixiPDAmJihiPTApKSkseS5zdGF0dXM9Yix5LnN0YXR1c1RleHQ9KGN8fHgpKyIiLGo/cy5yZXNvbHZlV2l0aChwLFttLHgseV0pOnMucmVqZWN0V2l0aChwLFt5LHgsbl0pLHkuc3RhdHVzQ29kZSh1KSx1PXZvaWQgMCxsJiZxLnRyaWdnZXIoaj8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt5LG8saj9tOm5dKSx0LmZpcmVXaXRoKHAsW3kseF0pLGwmJihxLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3ksb10pLC0tci5hY3RpdmV8fHIuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB5fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gci5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHIuZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLHIuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe3JbYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIHIuaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLHIuYWpheChyLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sci5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksci5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gci5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxyLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gdGhpc1swXSYmKHIuaXNGdW5jdGlvbihhKSYmKGE9YS5jYWxsKHRoaXNbMF0pKSxiPXIoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiByLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3IodGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXIodGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9ci5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBhcmVudChhKS5ub3QoImJvZHkiKS5lYWNoKGZ1bmN0aW9uKCl7cih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxyLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIXIuZXhwci5wc2V1ZG9zLnZpc2libGUoYSl9LHIuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuISEoYS5vZmZzZXRXaWR0aHx8YS5vZmZzZXRIZWlnaHR8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxyLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319O3ZhciBSYj17MDoyMDAsMTIyMzoyMDR9LFNiPXIuYWpheFNldHRpbmdzLnhocigpO28uY29ycz0hIVNiJiYid2l0aENyZWRlbnRpYWxzImluIFNiLG8uYWpheD1TYj0hIVNiLHIuYWpheFRyYW5zcG9ydChmdW5jdGlvbihiKXt2YXIgYyxkO2lmKG8uY29yc3x8U2ImJiFiLmNyb3NzRG9tYWluKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsZil7dmFyIGcsaD1iLnhocigpO2lmKGgub3BlbihiLnR5cGUsYi51cmwsYi5hc3luYyxiLnVzZXJuYW1lLGIucGFzc3dvcmQpLGIueGhyRmllbGRzKWZvcihnIGluIGIueGhyRmllbGRzKWhbZ109Yi54aHJGaWVsZHNbZ107Yi5taW1lVHlwZSYmaC5vdmVycmlkZU1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUoYi5taW1lVHlwZSksYi5jcm9zc0RvbWFpbnx8ZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO2ZvcihnIGluIGUpaC5zZXRSZXF1ZXN0SGVhZGVyKGcsZVtnXSk7Yz1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtjJiYoYz1kPWgub25sb2FkPWgub25lcnJvcj1oLm9uYWJvcnQ9aC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCwiYWJvcnQiPT09YT9oLmFib3J0KCk6ImVycm9yIj09PWE/Im51bWJlciIhPXR5cGVvZiBoLnN0YXR1cz9mKDAsImVycm9yIik6ZihoLnN0YXR1cyxoLnN0YXR1c1RleHQpOmYoUmJbaC5zdGF0dXNdfHxoLnN0YXR1cyxoLnN0YXR1c1RleHQsInRleHQiIT09KGgucmVzcG9uc2VUeXBlfHwidGV4dCIpfHwic3RyaW5nIiE9dHlwZW9mIGgucmVzcG9uc2VUZXh0P3tiaW5hcnk6aC5yZXNwb25zZX06e3RleHQ6aC5yZXNwb25zZVRleHR9LGguZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGgub25sb2FkPWMoKSxkPWgub25lcnJvcj1jKCJlcnJvciIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoImFib3J0Iik7dHJ5e2guc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCl9Y2F0Y2goaSl7aWYoYyl0aHJvdyBpfX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX0pLHIuYWpheFByZWZpbHRlcihmdW5jdGlvbihhKXthLmNyb3NzRG9tYWluJiYoYS5jb250ZW50cy5zY3JpcHQ9ITEpfSksci5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi9cYig/OmphdmF8ZWNtYSlzY3JpcHRcYi99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ2xvYmFsRXZhbChhKSxhfX19KSxyLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9IkdFVCIpfSksci5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSxmKXtiPXIoIjxzY3JpcHQ+IikucHJvcCh7Y2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oImxvYWQgZXJyb3IiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZigiZXJyb3IiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGQuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgVGI9W10sVWI9Lyg9KVw/KD89JnwkKXxcP1w/LztyLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9VGIucG9wKCl8fHIuZXhwYW5kbysiXyIrdWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLHIuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKFViLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmVWIudGVzdChiLmRhdGEpJiYiZGF0YSIpO2lmKGh8fCJqc29ucCI9PT1iLmRhdGFUeXBlc1swXSlyZXR1cm4gZT1iLmpzb25wQ2FsbGJhY2s9ci5pc0Z1bmN0aW9uKGIuanNvbnBDYWxsYmFjayk/Yi5qc29ucENhbGxiYWNrKCk6Yi5qc29ucENhbGxiYWNrLGg/YltoXT1iW2hdLnJlcGxhY2UoVWIsIiQxIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KHZiLnRlc3QoYi51cmwpPyImIjoiPyIpK2IuanNvbnArIj0iK2UpLGIuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBnfHxyLmVycm9yKGUrIiB3YXMgbm90IGNhbGxlZCIpLGdbMF19LGIuZGF0YVR5cGVzWzBdPSJqc29uIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PWY/cihhKS5yZW1vdmVQcm9wKGUpOmFbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxUYi5wdXNoKGUpKSxnJiZyLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLCJzY3JpcHQifSksby5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYT1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtyZXR1cm4gYS5pbm5lckhUTUw9Ijxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+IiwyPT09YS5jaGlsZE5vZGVzLmxlbmd0aH0oKSxyLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoInN0cmluZyIhPXR5cGVvZiBhKXJldHVybltdOyJib29sZWFuIj09dHlwZW9mIGImJihjPWIsYj0hMSk7dmFyIGUsZixnO3JldHVybiBifHwoby5jcmVhdGVIVE1MRG9jdW1lbnQ/KGI9ZC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLGU9Yi5jcmVhdGVFbGVtZW50KCJiYXNlIiksZS5ocmVmPWQubG9jYXRpb24uaHJlZixiLmhlYWQuYXBwZW5kQ2hpbGQoZSkpOmI9ZCksZj1DLmV4ZWMoYSksZz0hYyYmW10sZj9bYi5jcmVhdGVFbGVtZW50KGZbMV0pXTooZj1xYShbYV0sYixnKSxnJiZnLmxlbmd0aCYmcihnKS5yZW1vdmUoKSxyLm1lcmdlKFtdLGYuY2hpbGROb2RlcykpfSxyLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoIiAiKTtyZXR1cm4gaD4tMSYmKGQ9cGIoYS5zbGljZShoKSksYT1hLnNsaWNlKDAsaCkpLHIuaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmci5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP3IoIjxkaXY+IikuYXBwZW5kKHIucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sci5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtyLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksci5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ3JlcChyLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH0sci5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1yLmNzcyhhLCJwb3NpdGlvbiIpLGw9cihhKSxtPXt9OyJzdGF0aWMiPT09ayYmKGEuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksaD1sLm9mZnNldCgpLGY9ci5jc3MoYSwidG9wIiksaT1yLmNzcyhhLCJsZWZ0Iiksaj0oImFic29sdXRlIj09PWt8fCJmaXhlZCI9PT1rKSYmKGYraSkuaW5kZXhPZigiYXV0byIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxyLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsci5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLCJ1c2luZyJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sci5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3Iub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQsZSxmPXRoaXNbMF07aWYoZilyZXR1cm4gZi5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD8oZD1mLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGI9Zi5vd25lckRvY3VtZW50LGM9Yi5kb2N1bWVudEVsZW1lbnQsZT1iLmRlZmF1bHRWaWV3LHt0b3A6ZC50b3ArZS5wYWdlWU9mZnNldC1jLmNsaWVudFRvcCxsZWZ0OmQubGVmdCtlLnBhZ2VYT2Zmc2V0LWMuY2xpZW50TGVmdH0pOnt0b3A6MCxsZWZ0OjB9fSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuImZpeGVkIj09PXIuY3NzKGMsInBvc2l0aW9uIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLEIoYVswXSwiaHRtbCIpfHwoZD1hLm9mZnNldCgpKSxkPXt0b3A6ZC50b3Arci5jc3MoYVswXSwiYm9yZGVyVG9wV2lkdGgiLCEwKSxsZWZ0OmQubGVmdCtyLmNzcyhhWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKX0pLHt0b3A6Yi50b3AtZC50b3Atci5jc3MoYywibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LXIuY3NzKGMsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYic3RhdGljIj09PXIuY3NzKGEsInBvc2l0aW9uIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8cmF9KX19KSxyLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oYSxiKXt2YXIgYz0icGFnZVlPZmZzZXQiPT09YjtyLmZuW2FdPWZ1bmN0aW9uKGQpe3JldHVybiBUKHRoaXMsZnVuY3Rpb24oYSxkLGUpe3ZhciBmO3JldHVybiByLmlzV2luZG93KGEpP2Y9YTo5PT09YS5ub2RlVHlwZSYmKGY9YS5kZWZhdWx0Vmlldyksdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLHIuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihhLGIpe3IuY3NzSG9va3NbYl09UGEoby5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGEsYyl7aWYoYylyZXR1cm4gYz1PYShhLGIpLE1hLnRlc3QoYyk/cihhKS5wb3NpdGlvbigpW2JdKyJweCI6Y30pfSksci5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxiKXtyLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7ci5mbltkXT1mdW5jdGlvbihlLGYpe3ZhciBnPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBlKSxoPWN8fChlPT09ITB8fGY9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFQodGhpcyxmdW5jdGlvbihiLGMsZSl7dmFyIGY7cmV0dXJuIHIuaXNXaW5kb3coYik/MD09PWQuaW5kZXhPZigib3V0ZXIiKT9iWyJpbm5lciIrYV06Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGY9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGZbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGZbIm9mZnNldCIrYV0sZlsiY2xpZW50IithXSkpOnZvaWQgMD09PWU/ci5jc3MoYixjLGgpOnIuc3R5bGUoYixjLGUsaCl9LGIsZz9lOnZvaWQgMCxnKX19KX0pLHIuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYXx8IioqIixjKX19KSxyLmhvbGRSZWFkeT1mdW5jdGlvbihhKXthP3IucmVhZHlXYWl0Kys6ci5yZWFkeSghMCl9LHIuaXNBcnJheT1BcnJheS5pc0FycmF5LHIucGFyc2VKU09OPUpTT04ucGFyc2Usci5ub2RlTmFtZT1CLCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiByfSk7dmFyIFZiPWEualF1ZXJ5LFdiPWEuJDtyZXR1cm4gci5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1yJiYoYS4kPVdiKSxiJiZhLmpRdWVyeT09PXImJihhLmpRdWVyeT1WYikscn0sYnx8KGEualF1ZXJ5PWEuJD1yKSxyfSk7Cg=="},{"meta":{"name":"sweetalert2@9","url":"https://cdn.jsdelivr.net/npm/sweetalert2@9","ts":1595498418493,"mimetype":"text/plain"},"source":"IWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9dHx8c2VsZikuU3dlZXRhbGVydDI9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuKHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9KSh0KX1mdW5jdGlvbiBhKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgbz1lW25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsby5rZXksbyl9fWZ1bmN0aW9uIGModCxlLG4pe3JldHVybiBlJiZvKHQucHJvdG90eXBlLGUpLG4mJm8odCxuKSx0fWZ1bmN0aW9uIHMoKXtyZXR1cm4ocz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07Zm9yKHZhciBvIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sbykmJih0W29dPW5bb10pfXJldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIHUodCl7cmV0dXJuKHU9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0pKHQpfWZ1bmN0aW9uIGwodCxlKXtyZXR1cm4obD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX19wcm90b19fPWUsdH0pKHQsZSl9ZnVuY3Rpb24gZCgpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLFtdLGZ1bmN0aW9uKCl7fSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX1mdW5jdGlvbiBpKHQsZSxuKXtyZXR1cm4oaT1kKCk/UmVmbGVjdC5jb25zdHJ1Y3Q6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPVtudWxsXTtvLnB1c2guYXBwbHkobyxlKTt2YXIgaT1uZXcoRnVuY3Rpb24uYmluZC5hcHBseSh0LG8pKTtyZXR1cm4gbiYmbChpLG4ucHJvdG90eXBlKSxpfSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIHAodCxlKXtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT9mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIHR9KHQpOmV9ZnVuY3Rpb24gZih0LGUsbil7cmV0dXJuKGY9InVuZGVmaW5lZCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0LmdldD9SZWZsZWN0LmdldDpmdW5jdGlvbih0LGUsbil7dmFyIG89ZnVuY3Rpb24odCxlKXtmb3IoOyFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSYmbnVsbCE9PSh0PXUodCkpOyk7cmV0dXJuIHR9KHQsZSk7aWYobyl7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGUpO3JldHVybiBpLmdldD9pLmdldC5jYWxsKG4pOmkudmFsdWV9fSkodCxlLG58fHQpfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfWZ1bmN0aW9uIGgodCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpfWZ1bmN0aW9uIGcodCxlKXt2YXIgbjtuPSciJy5jb25jYXQodCwnIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHVzZSAiJykuY29uY2F0KGUsJyIgaW5zdGVhZC4nKSwtMT09PXouaW5kZXhPZihuKSYmKHoucHVzaChuKSxfKG4pKX1mdW5jdGlvbiB2KHQpe3JldHVybiB0JiYiZnVuY3Rpb24iPT10eXBlb2YgdC50b1Byb21pc2V9ZnVuY3Rpb24gYih0KXtyZXR1cm4gdih0KT90LnRvUHJvbWlzZSgpOlByb21pc2UucmVzb2x2ZSh0KX1mdW5jdGlvbiB5KHQpe3JldHVybiB0JiZQcm9taXNlLnJlc29sdmUodCk9PT10fWZ1bmN0aW9uIHcodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBFbGVtZW50fHwib2JqZWN0Ij09PXIoZT10KSYmZS5qcXVlcnk7dmFyIGV9ZnVuY3Rpb24gdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW3Rbbl1dPSJzd2FsMi0iK3Rbbl07cmV0dXJuIGV9ZnVuY3Rpb24gQyh0KXt2YXIgZT1RKCk7cmV0dXJuIGU/ZS5xdWVyeVNlbGVjdG9yKHQpOm51bGx9ZnVuY3Rpb24gZSh0KXtyZXR1cm4gQygiLiIuY29uY2F0KHQpKX1mdW5jdGlvbiBuKCl7dmFyIHQ9JCgpO3JldHVybiBoKHQucXVlcnlTZWxlY3RvckFsbCgiLiIuY29uY2F0KFkuaWNvbikpKX1mdW5jdGlvbiBrKCl7dmFyIHQ9bigpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdnQodCl9KTtyZXR1cm4gdC5sZW5ndGg/dFswXTpudWxsfWZ1bmN0aW9uIHgoKXtyZXR1cm4gZShZLnRpdGxlKX1mdW5jdGlvbiBQKCl7cmV0dXJuIGUoWS5jb250ZW50KX1mdW5jdGlvbiBBKCl7cmV0dXJuIGUoWS5pbWFnZSl9ZnVuY3Rpb24gQigpe3JldHVybiBlKFlbInByb2dyZXNzLXN0ZXBzIl0pfWZ1bmN0aW9uIFMoKXtyZXR1cm4gZShZWyJ2YWxpZGF0aW9uLW1lc3NhZ2UiXSl9ZnVuY3Rpb24gRSgpe3JldHVybiBDKCIuIi5jb25jYXQoWS5hY3Rpb25zLCIgLiIpLmNvbmNhdChZLmNvbmZpcm0pKX1mdW5jdGlvbiBPKCl7cmV0dXJuIEMoIi4iLmNvbmNhdChZLmFjdGlvbnMsIiAuIikuY29uY2F0KFkuY2FuY2VsKSl9ZnVuY3Rpb24gVCgpe3JldHVybiBlKFkuYWN0aW9ucyl9ZnVuY3Rpb24gTCgpe3JldHVybiBlKFkuaGVhZGVyKX1mdW5jdGlvbiBqKCl7cmV0dXJuIGUoWS5mb290ZXIpfWZ1bmN0aW9uIHEoKXtyZXR1cm4gZShZWyJ0aW1lci1wcm9ncmVzcy1iYXIiXSl9ZnVuY3Rpb24gSSgpe3JldHVybiBlKFkuY2xvc2UpfWZ1bmN0aW9uIFYoKXt2YXIgdD1oKCQoKS5xdWVyeVNlbGVjdG9yQWxsKCdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9Ii0xIl0pOm5vdChbdGFiaW5kZXg9IjAiXSknKSkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0PXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKCJ0YWJpbmRleCIpKSwoZT1wYXJzZUludChlLmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkpPHQ/MTp0PGU/LTE6MH0pLGU9aCgkKCkucXVlcnlTZWxlY3RvckFsbCgnXG4gIGFbaHJlZl0sXG4gIGFyZWFbaHJlZl0sXG4gIGlucHV0Om5vdChbZGlzYWJsZWRdKSxcbiAgc2VsZWN0Om5vdChbZGlzYWJsZWRdKSxcbiAgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLFxuICBidXR0b246bm90KFtkaXNhYmxlZF0pLFxuICBpZnJhbWUsXG4gIG9iamVjdCxcbiAgZW1iZWQsXG4gIFt0YWJpbmRleD0iMCJdLFxuICBbY29udGVudGVkaXRhYmxlXSxcbiAgYXVkaW9bY29udHJvbHNdLFxuICB2aWRlb1tjb250cm9sc10sXG4gIHN1bW1hcnlcbicpKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIi0xIiE9PXQuZ2V0QXR0cmlidXRlKCJ0YWJpbmRleCIpfSk7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspLTE9PT1lLmluZGV4T2YodFtuXSkmJmUucHVzaCh0W25dKTtyZXR1cm4gZX0odC5jb25jYXQoZSkpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdnQodCl9KX1mdW5jdGlvbiBNKCl7cmV0dXJuIUooKSYmIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFlbIm5vLWJhY2tkcm9wIl0pfWZ1bmN0aW9uIFIoKXtyZXR1cm4gJCgpLmhhc0F0dHJpYnV0ZSgiZGF0YS1sb2FkaW5nIil9ZnVuY3Rpb24gSChlLHQpe3ZhciBuO2UudGV4dENvbnRlbnQ9IiIsdCYmKG49KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyh0LCJ0ZXh0L2h0bWwiKSxoKG4ucXVlcnlTZWxlY3RvcigiaGVhZCIpLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5hcHBlbmRDaGlsZCh0KX0pLGgobi5xdWVyeVNlbGVjdG9yKCJib2R5IikuY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbih0KXtlLmFwcGVuZENoaWxkKHQpfSkpfWZ1bmN0aW9uIEQodCxlKXtpZihlKXtmb3IodmFyIG49ZS5zcGxpdCgvXHMrLyksbz0wO288bi5sZW5ndGg7bysrKWlmKCF0LmNsYXNzTGlzdC5jb250YWlucyhuW29dKSlyZXR1cm47cmV0dXJuIDF9fWZ1bmN0aW9uIE4odCxlLG4pe3ZhciBvLGk7aWYoaT1lLGgoKG89dCkuY2xhc3NMaXN0KS5mb3JFYWNoKGZ1bmN0aW9uKHQpey0xPT09bShZKS5pbmRleE9mKHQpJiYtMT09PW0oWikuaW5kZXhPZih0KSYmLTE9PT1tKGkuc2hvd0NsYXNzKS5pbmRleE9mKHQpJiZvLmNsYXNzTGlzdC5yZW1vdmUodCl9KSxlLmN1c3RvbUNsYXNzJiZlLmN1c3RvbUNsYXNzW25dKXtpZigic3RyaW5nIiE9dHlwZW9mIGUuY3VzdG9tQ2xhc3Nbbl0mJiFlLmN1c3RvbUNsYXNzW25dLmZvckVhY2gpcmV0dXJuIF8oIkludmFsaWQgdHlwZSBvZiBjdXN0b21DbGFzcy4iLmNvbmNhdChuLCchIEV4cGVjdGVkIHN0cmluZyBvciBpdGVyYWJsZSBvYmplY3QsIGdvdCAiJykuY29uY2F0KHIoZS5jdXN0b21DbGFzc1tuXSksJyInKSk7bXQodCxlLmN1c3RvbUNsYXNzW25dKX19dmFyIFU9IlN3ZWV0QWxlcnQyOiIsXz1mdW5jdGlvbih0KXtjb25zb2xlLndhcm4oIiIuY29uY2F0KFUsIiAiKS5jb25jYXQodCkpfSxGPWZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IoIiIuY29uY2F0KFUsIiAiKS5jb25jYXQodCkpfSx6PVtdLFc9ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dCgpOnR9LEs9T2JqZWN0LmZyZWV6ZSh7Y2FuY2VsOiJjYW5jZWwiLGJhY2tkcm9wOiJiYWNrZHJvcCIsY2xvc2U6ImNsb3NlIixlc2M6ImVzYyIsdGltZXI6InRpbWVyIn0pLFk9dChbImNvbnRhaW5lciIsInNob3duIiwiaGVpZ2h0LWF1dG8iLCJpb3NmaXgiLCJwb3B1cCIsIm1vZGFsIiwibm8tYmFja2Ryb3AiLCJuby10cmFuc2l0aW9uIiwidG9hc3QiLCJ0b2FzdC1zaG93biIsInRvYXN0LWNvbHVtbiIsInNob3ciLCJoaWRlIiwiY2xvc2UiLCJ0aXRsZSIsImhlYWRlciIsImNvbnRlbnQiLCJodG1sLWNvbnRhaW5lciIsImFjdGlvbnMiLCJjb25maXJtIiwiY2FuY2VsIiwiZm9vdGVyIiwiaWNvbiIsImljb24tY29udGVudCIsImltYWdlIiwiaW5wdXQiLCJmaWxlIiwicmFuZ2UiLCJzZWxlY3QiLCJyYWRpbyIsImNoZWNrYm94IiwibGFiZWwiLCJ0ZXh0YXJlYSIsImlucHV0ZXJyb3IiLCJ2YWxpZGF0aW9uLW1lc3NhZ2UiLCJwcm9ncmVzcy1zdGVwcyIsImFjdGl2ZS1wcm9ncmVzcy1zdGVwIiwicHJvZ3Jlc3Mtc3RlcCIsInByb2dyZXNzLXN0ZXAtbGluZSIsImxvYWRpbmciLCJzdHlsZWQiLCJ0b3AiLCJ0b3Atc3RhcnQiLCJ0b3AtZW5kIiwidG9wLWxlZnQiLCJ0b3AtcmlnaHQiLCJjZW50ZXIiLCJjZW50ZXItc3RhcnQiLCJjZW50ZXItZW5kIiwiY2VudGVyLWxlZnQiLCJjZW50ZXItcmlnaHQiLCJib3R0b20iLCJib3R0b20tc3RhcnQiLCJib3R0b20tZW5kIiwiYm90dG9tLWxlZnQiLCJib3R0b20tcmlnaHQiLCJncm93LXJvdyIsImdyb3ctY29sdW1uIiwiZ3Jvdy1mdWxsc2NyZWVuIiwicnRsIiwidGltZXItcHJvZ3Jlc3MtYmFyIiwidGltZXItcHJvZ3Jlc3MtYmFyLWNvbnRhaW5lciIsInNjcm9sbGJhci1tZWFzdXJlIiwiaWNvbi1zdWNjZXNzIiwiaWNvbi13YXJuaW5nIiwiaWNvbi1pbmZvIiwiaWNvbi1xdWVzdGlvbiIsImljb24tZXJyb3IiXSksWj10KFsic3VjY2VzcyIsIndhcm5pbmciLCJpbmZvIiwicXVlc3Rpb24iLCJlcnJvciJdKSxRPWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KFkuY29udGFpbmVyKSl9LCQ9ZnVuY3Rpb24oKXtyZXR1cm4gZShZLnBvcHVwKX0sSj1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhZWyJ0b2FzdC1zaG93biJdKX0sWD17cHJldmlvdXNCb2R5UGFkZGluZzpudWxsfTtmdW5jdGlvbiBHKHQsZSl7aWYoIWUpcmV0dXJuIG51bGw7c3dpdGNoKGUpe2Nhc2Uic2VsZWN0IjpjYXNlInRleHRhcmVhIjpjYXNlImZpbGUiOnJldHVybiBndCh0LFlbZV0pO2Nhc2UiY2hlY2tib3giOnJldHVybiB0LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChZLmNoZWNrYm94LCIgaW5wdXQiKSk7Y2FzZSJyYWRpbyI6cmV0dXJuIHQucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KFkucmFkaW8sIiBpbnB1dDpjaGVja2VkIikpfHx0LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChZLnJhZGlvLCIgaW5wdXQ6Zmlyc3QtY2hpbGQiKSk7Y2FzZSJyYW5nZSI6cmV0dXJuIHQucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KFkucmFuZ2UsIiBpbnB1dCIpKTtkZWZhdWx0OnJldHVybiBndCh0LFkuaW5wdXQpfX1mdW5jdGlvbiB0dCh0KXt2YXIgZTt0LmZvY3VzKCksImZpbGUiIT09dC50eXBlJiYoZT10LnZhbHVlLHQudmFsdWU9IiIsdC52YWx1ZT1lKX1mdW5jdGlvbiBldCh0LGUsbil7dCYmZSYmKCJzdHJpbmciPT10eXBlb2YgZSYmKGU9ZS5zcGxpdCgvXHMrLykuZmlsdGVyKEJvb2xlYW4pKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dC5mb3JFYWNoP3QuZm9yRWFjaChmdW5jdGlvbih0KXtuP3QuY2xhc3NMaXN0LmFkZChlKTp0LmNsYXNzTGlzdC5yZW1vdmUoZSl9KTpuP3QuY2xhc3NMaXN0LmFkZChlKTp0LmNsYXNzTGlzdC5yZW1vdmUoZSl9KSl9ZnVuY3Rpb24gbnQodCxlLG4pe258fDA9PT1wYXJzZUludChuKT90LnN0eWxlW2VdPSJudW1iZXIiPT10eXBlb2Ygbj8iIi5jb25jYXQobiwicHgiKTpuOnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoZSl9ZnVuY3Rpb24gb3QodCxlKXt2YXIgbj0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWU/ZToiZmxleCI7dC5zdHlsZS5vcGFjaXR5PSIiLHQuc3R5bGUuZGlzcGxheT1ufWZ1bmN0aW9uIGl0KHQpe3Quc3R5bGUub3BhY2l0eT0iIix0LnN0eWxlLmRpc3BsYXk9Im5vbmUifWZ1bmN0aW9uIHJ0KHQsZSxuKXtlP290KHQsbik6aXQodCl9ZnVuY3Rpb24gYXQodCl7cmV0dXJuISEodC5zY3JvbGxIZWlnaHQ+dC5jbGllbnRIZWlnaHQpfWZ1bmN0aW9uIGN0KHQpe3ZhciBlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLG49cGFyc2VGbG9hdChlLmdldFByb3BlcnR5VmFsdWUoImFuaW1hdGlvbi1kdXJhdGlvbiIpfHwiMCIpLG89cGFyc2VGbG9hdChlLmdldFByb3BlcnR5VmFsdWUoInRyYW5zaXRpb24tZHVyYXRpb24iKXx8IjAiKTtyZXR1cm4gMDxufHwwPG99ZnVuY3Rpb24gc3QodCxlKXt2YXIgbj0xPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWUmJmUsbz1xKCk7dnQobykmJihuJiYoby5zdHlsZS50cmFuc2l0aW9uPSJub25lIixvLnN0eWxlLndpZHRoPSIxMDAlIiksc2V0VGltZW91dChmdW5jdGlvbigpe28uc3R5bGUudHJhbnNpdGlvbj0id2lkdGggIi5jb25jYXQodC8xZTMsInMgbGluZWFyIiksby5zdHlsZS53aWR0aD0iMCUifSwxMCkpfWZ1bmN0aW9uIHV0KCl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3d8fCJ1bmRlZmluZWQiPT10eXBlb2YgZG9jdW1lbnR9ZnVuY3Rpb24gbHQodCl7c24uaXNWaXNpYmxlKCkmJmZ0IT09dC50YXJnZXQudmFsdWUmJnNuLnJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSxmdD10LnRhcmdldC52YWx1ZX1mdW5jdGlvbiBkdCh0LGUpe3QgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9lLmFwcGVuZENoaWxkKHQpOiJvYmplY3QiPT09cih0KT93dCh0LGUpOnQmJkgoZSx0KX1mdW5jdGlvbiBwdCh0LGUpe3ZhciBuPVQoKSxvPUUoKSxpPU8oKTtlLnNob3dDb25maXJtQnV0dG9ufHxlLnNob3dDYW5jZWxCdXR0b258fGl0KG4pLE4obixlLCJhY3Rpb25zIikseHQobywiY29uZmlybSIsZSkseHQoaSwiY2FuY2VsIixlKSxlLmJ1dHRvbnNTdHlsaW5nP2Z1bmN0aW9uKHQsZSxuKXttdChbdCxlXSxZLnN0eWxlZCksbi5jb25maXJtQnV0dG9uQ29sb3ImJih0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1uLmNvbmZpcm1CdXR0b25Db2xvcik7bi5jYW5jZWxCdXR0b25Db2xvciYmKGUuc3R5bGUuYmFja2dyb3VuZENvbG9yPW4uY2FuY2VsQnV0dG9uQ29sb3IpO3t2YXIgbztSKCl8fChvPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLmdldFByb3BlcnR5VmFsdWUoImJhY2tncm91bmQtY29sb3IiKSx0LnN0eWxlLmJvcmRlckxlZnRDb2xvcj1vLHQuc3R5bGUuYm9yZGVyUmlnaHRDb2xvcj1vKX19KG8saSxlKTooaHQoW28saV0sWS5zdHlsZWQpLG8uc3R5bGUuYmFja2dyb3VuZENvbG9yPW8uc3R5bGUuYm9yZGVyTGVmdENvbG9yPW8uc3R5bGUuYm9yZGVyUmlnaHRDb2xvcj0iIixpLnN0eWxlLmJhY2tncm91bmRDb2xvcj1pLnN0eWxlLmJvcmRlckxlZnRDb2xvcj1pLnN0eWxlLmJvcmRlclJpZ2h0Q29sb3I9IiIpLGUucmV2ZXJzZUJ1dHRvbnMmJm8ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaSxvKX12YXIgZnQsbXQ9ZnVuY3Rpb24odCxlKXtldCh0LGUsITApfSxodD1mdW5jdGlvbih0LGUpe2V0KHQsZSwhMSl9LGd0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0LmNoaWxkTm9kZXMubGVuZ3RoO24rKylpZihEKHQuY2hpbGROb2Rlc1tuXSxlKSlyZXR1cm4gdC5jaGlsZE5vZGVzW25dfSx2dD1mdW5jdGlvbih0KXtyZXR1cm4hKCF0fHwhKHQub2Zmc2V0V2lkdGh8fHQub2Zmc2V0SGVpZ2h0fHx0LmdldENsaWVudFJlY3RzKCkubGVuZ3RoKSl9LGJ0PSdcbiA8ZGl2IGFyaWEtbGFiZWxsZWRieT0iJy5jb25jYXQoWS50aXRsZSwnIiBhcmlhLWRlc2NyaWJlZGJ5PSInKS5jb25jYXQoWS5jb250ZW50LCciIGNsYXNzPSInKS5jb25jYXQoWS5wb3B1cCwnIiB0YWJpbmRleD0iLTEiPlxuICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFkuaGVhZGVyLCciPlxuICAgICA8dWwgY2xhc3M9IicpLmNvbmNhdChZWyJwcm9ncmVzcy1zdGVwcyJdLCciPjwvdWw+XG4gICAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdChZLmljb24sIiAiKS5jb25jYXQoWi5lcnJvciwnIj48L2Rpdj5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFkuaWNvbiwiICIpLmNvbmNhdChaLnF1ZXN0aW9uLCciPjwvZGl2PlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoWS5pY29uLCIgIikuY29uY2F0KFoud2FybmluZywnIj48L2Rpdj5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFkuaWNvbiwiICIpLmNvbmNhdChaLmluZm8sJyI+PC9kaXY+XG4gICAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdChZLmljb24sIiAiKS5jb25jYXQoWi5zdWNjZXNzLCciPjwvZGl2PlxuICAgICA8aW1nIGNsYXNzPSInKS5jb25jYXQoWS5pbWFnZSwnIiAvPlxuICAgICA8aDIgY2xhc3M9IicpLmNvbmNhdChZLnRpdGxlLCciIGlkPSInKS5jb25jYXQoWS50aXRsZSwnIj48L2gyPlxuICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9IicpLmNvbmNhdChZLmNsb3NlLCciPjwvYnV0dG9uPlxuICAgPC9kaXY+XG4gICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoWS5jb250ZW50LCciPlxuICAgICA8ZGl2IGlkPSInKS5jb25jYXQoWS5jb250ZW50LCciIGNsYXNzPSInKS5jb25jYXQoWVsiaHRtbC1jb250YWluZXIiXSwnIj48L2Rpdj5cbiAgICAgPGlucHV0IGNsYXNzPSInKS5jb25jYXQoWS5pbnB1dCwnIiAvPlxuICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgY2xhc3M9IicpLmNvbmNhdChZLmZpbGUsJyIgLz5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFkucmFuZ2UsJyI+XG4gICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiAvPlxuICAgICAgIDxvdXRwdXQ+PC9vdXRwdXQ+XG4gICAgIDwvZGl2PlxuICAgICA8c2VsZWN0IGNsYXNzPSInKS5jb25jYXQoWS5zZWxlY3QsJyI+PC9zZWxlY3Q+XG4gICAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdChZLnJhZGlvLCciPjwvZGl2PlxuICAgICA8bGFiZWwgZm9yPSInKS5jb25jYXQoWS5jaGVja2JveCwnIiBjbGFzcz0iJykuY29uY2F0KFkuY2hlY2tib3gsJyI+XG4gICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiAvPlxuICAgICAgIDxzcGFuIGNsYXNzPSInKS5jb25jYXQoWS5sYWJlbCwnIj48L3NwYW4+XG4gICAgIDwvbGFiZWw+XG4gICAgIDx0ZXh0YXJlYSBjbGFzcz0iJykuY29uY2F0KFkudGV4dGFyZWEsJyI+PC90ZXh0YXJlYT5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFlbInZhbGlkYXRpb24tbWVzc2FnZSJdLCciIGlkPSInKS5jb25jYXQoWVsidmFsaWRhdGlvbi1tZXNzYWdlIl0sJyI+PC9kaXY+XG4gICA8L2Rpdj5cbiAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdChZLmFjdGlvbnMsJyI+XG4gICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iJykuY29uY2F0KFkuY29uZmlybSwnIj5PSzwvYnV0dG9uPlxuICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9IicpLmNvbmNhdChZLmNhbmNlbCwnIj5DYW5jZWw8L2J1dHRvbj5cbiAgIDwvZGl2PlxuICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFkuZm9vdGVyLCciPjwvZGl2PlxuICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFlbInRpbWVyLXByb2dyZXNzLWJhci1jb250YWluZXIiXSwnIj5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFlbInRpbWVyLXByb2dyZXNzLWJhciJdLCciPjwvZGl2PlxuICAgPC9kaXY+XG4gPC9kaXY+XG4nKS5yZXBsYWNlKC8oXnxcbilccyovZywiIikseXQ9ZnVuY3Rpb24odCl7dmFyIGUsbixvLGkscixhLGMscyx1LGwsZCxwLGYsbSxoLGc9ISEoZT1RKCkpJiYoZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLGh0KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZG9jdW1lbnQuYm9keV0sW1lbIm5vLWJhY2tkcm9wIl0sWVsidG9hc3Qtc2hvd24iXSxZWyJoYXMtY29sdW1uIl1dKSwhMCk7dXQoKT9GKCJTd2VldEFsZXJ0MiByZXF1aXJlcyBkb2N1bWVudCB0byBpbml0aWFsaXplIik6KChuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5jbGFzc05hbWU9WS5jb250YWluZXIsZyYmbXQobixZWyJuby10cmFuc2l0aW9uIl0pLEgobixidCksKG89InN0cmluZyI9PXR5cGVvZihpPXQudGFyZ2V0KT9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGkpOmkpLmFwcGVuZENoaWxkKG4pLHI9dCwoYT0kKCkpLnNldEF0dHJpYnV0ZSgicm9sZSIsci50b2FzdD8iYWxlcnQiOiJkaWFsb2ciKSxhLnNldEF0dHJpYnV0ZSgiYXJpYS1saXZlIixyLnRvYXN0PyJwb2xpdGUiOiJhc3NlcnRpdmUiKSxyLnRvYXN0fHxhLnNldEF0dHJpYnV0ZSgiYXJpYS1tb2RhbCIsInRydWUiKSxjPW8sInJ0bCI9PT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShjKS5kaXJlY3Rpb24mJm10KFEoKSxZLnJ0bCkscz1QKCksdT1ndChzLFkuaW5wdXQpLGw9Z3QocyxZLmZpbGUpLGQ9cy5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoWS5yYW5nZSwiIGlucHV0IikpLHA9cy5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoWS5yYW5nZSwiIG91dHB1dCIpKSxmPWd0KHMsWS5zZWxlY3QpLG09cy5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoWS5jaGVja2JveCwiIGlucHV0IikpLGg9Z3QocyxZLnRleHRhcmVhKSx1Lm9uaW5wdXQ9bHQsbC5vbmNoYW5nZT1sdCxmLm9uY2hhbmdlPWx0LG0ub25jaGFuZ2U9bHQsaC5vbmlucHV0PWx0LGQub25pbnB1dD1mdW5jdGlvbih0KXtsdCh0KSxwLnZhbHVlPWQudmFsdWV9LGQub25jaGFuZ2U9ZnVuY3Rpb24odCl7bHQodCksZC5uZXh0U2libGluZy52YWx1ZT1kLnZhbHVlfSl9LHd0PWZ1bmN0aW9uKHQsZSl7dC5qcXVlcnk/Q3QoZSx0KTpIKGUsdC50b1N0cmluZygpKX0sQ3Q9ZnVuY3Rpb24odCxlKXtpZih0LnRleHRDb250ZW50PSIiLDAgaW4gZSlmb3IodmFyIG49MDtuIGluIGU7bisrKXQuYXBwZW5kQ2hpbGQoZVtuXS5jbG9uZU5vZGUoITApKTtlbHNlIHQuYXBwZW5kQ2hpbGQoZS5jbG9uZU5vZGUoITApKX0sa3Q9ZnVuY3Rpb24oKXtpZih1dCgpKXJldHVybiExO3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGU9e1dlYmtpdEFuaW1hdGlvbjoid2Via2l0QW5pbWF0aW9uRW5kIixPQW5pbWF0aW9uOiJvQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQiLGFuaW1hdGlvbjoiYW5pbWF0aW9uZW5kIn07Zm9yKHZhciBuIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJnZvaWQgMCE9PXQuc3R5bGVbbl0pcmV0dXJuIGVbbl07cmV0dXJuITF9KCk7ZnVuY3Rpb24geHQodCxlLG4pe3ZhciBvO3J0KHQsblsic2hvdyIuY29uY2F0KChvPWUpLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK28uc2xpY2UoMSksIkJ1dHRvbiIpXSwiaW5saW5lLWJsb2NrIiksSCh0LG5bIiIuY29uY2F0KGUsIkJ1dHRvblRleHQiKV0pLHQuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixuWyIiLmNvbmNhdChlLCJCdXR0b25BcmlhTGFiZWwiKV0pLHQuY2xhc3NOYW1lPVlbZV0sTih0LG4sIiIuY29uY2F0KGUsIkJ1dHRvbiIpKSxtdCh0LG5bIiIuY29uY2F0KGUsIkJ1dHRvbkNsYXNzIildKX1mdW5jdGlvbiBQdCh0LGUpe3ZhciBuLG8saSxyLGEsYyxzLHUsbD1RKCk7bCYmKG49bCwic3RyaW5nIj09dHlwZW9mKG89ZS5iYWNrZHJvcCk/bi5zdHlsZS5iYWNrZ3JvdW5kPW86b3x8bXQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkb2N1bWVudC5ib2R5XSxZWyJuby1iYWNrZHJvcCJdKSwhZS5iYWNrZHJvcCYmZS5hbGxvd091dHNpZGVDbGljayYmXygnImFsbG93T3V0c2lkZUNsaWNrIiBwYXJhbWV0ZXIgcmVxdWlyZXMgYGJhY2tkcm9wYCBwYXJhbWV0ZXIgdG8gYmUgc2V0IHRvIGB0cnVlYCcpLGk9bCwocj1lLnBvc2l0aW9uKWluIFk/bXQoaSxZW3JdKTooXygnVGhlICJwb3NpdGlvbiIgcGFyYW1ldGVyIGlzIG5vdCB2YWxpZCwgZGVmYXVsdGluZyB0byAiY2VudGVyIicpLG10KGksWS5jZW50ZXIpKSxhPWwsIShjPWUuZ3Jvdyl8fCJzdHJpbmciIT10eXBlb2YgY3x8KHM9Imdyb3ctIi5jb25jYXQoYykpaW4gWSYmbXQoYSxZW3NdKSxOKGwsZSwiY29udGFpbmVyIiksKHU9ZG9jdW1lbnQuYm9keS5nZXRBdHRyaWJ1dGUoImRhdGEtc3dhbDItcXVldWUtc3RlcCIpKSYmKGwuc2V0QXR0cmlidXRlKCJkYXRhLXF1ZXVlLXN0ZXAiLHUpLGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCJkYXRhLXN3YWwyLXF1ZXVlLXN0ZXAiKSkpfWZ1bmN0aW9uIEF0KHQsZSl7dC5wbGFjZWhvbGRlciYmIWUuaW5wdXRQbGFjZWhvbGRlcnx8KHQucGxhY2Vob2xkZXI9ZS5pbnB1dFBsYWNlaG9sZGVyKX12YXIgQnQ9e3Byb21pc2U6bmV3IFdlYWtNYXAsaW5uZXJQYXJhbXM6bmV3IFdlYWtNYXAsZG9tQ2FjaGU6bmV3IFdlYWtNYXB9LFN0PVsiaW5wdXQiLCJmaWxlIiwicmFuZ2UiLCJzZWxlY3QiLCJyYWRpbyIsImNoZWNrYm94IiwidGV4dGFyZWEiXSxFdD1mdW5jdGlvbih0KXtpZighanRbdC5pbnB1dF0pcmV0dXJuIEYoJ1VuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dCEgRXhwZWN0ZWQgInRleHQiLCAiZW1haWwiLCAicGFzc3dvcmQiLCAibnVtYmVyIiwgInRlbCIsICJzZWxlY3QiLCAicmFkaW8iLCAiY2hlY2tib3giLCAidGV4dGFyZWEiLCAiZmlsZSIgb3IgInVybCIsIGdvdCAiJy5jb25jYXQodC5pbnB1dCwnIicpKTt2YXIgZT1MdCh0LmlucHV0KSxuPWp0W3QuaW5wdXRdKGUsdCk7b3Qobiksc2V0VGltZW91dChmdW5jdGlvbigpe3R0KG4pfSl9LE90PWZ1bmN0aW9uKHQsZSl7dmFyIG49RyhQKCksdCk7aWYobilmb3IodmFyIG8gaW4hZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0LmF0dHJpYnV0ZXMubGVuZ3RoO2UrKyl7dmFyIG49dC5hdHRyaWJ1dGVzW2VdLm5hbWU7LTE9PT1bInR5cGUiLCJ2YWx1ZSIsInN0eWxlIl0uaW5kZXhPZihuKSYmdC5yZW1vdmVBdHRyaWJ1dGUobil9fShuKSxlKSJyYW5nZSI9PT10JiYicGxhY2Vob2xkZXIiPT09b3x8bi5zZXRBdHRyaWJ1dGUobyxlW29dKX0sVHQ9ZnVuY3Rpb24odCl7dmFyIGU9THQodC5pbnB1dCk7dC5jdXN0b21DbGFzcyYmbXQoZSx0LmN1c3RvbUNsYXNzLmlucHV0KX0sTHQ9ZnVuY3Rpb24odCl7dmFyIGU9WVt0XT9ZW3RdOlkuaW5wdXQ7cmV0dXJuIGd0KFAoKSxlKX0sanQ9e307anQudGV4dD1qdC5lbWFpbD1qdC5wYXNzd29yZD1qdC5udW1iZXI9anQudGVsPWp0LnVybD1mdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZS5pbnB1dFZhbHVlfHwibnVtYmVyIj09dHlwZW9mIGUuaW5wdXRWYWx1ZT90LnZhbHVlPWUuaW5wdXRWYWx1ZTp5KGUuaW5wdXRWYWx1ZSl8fF8oJ1VuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dFZhbHVlISBFeHBlY3RlZCAic3RyaW5nIiwgIm51bWJlciIgb3IgIlByb21pc2UiLCBnb3QgIicuY29uY2F0KHIoZS5pbnB1dFZhbHVlKSwnIicpKSxBdCh0LGUpLHQudHlwZT1lLmlucHV0LHR9LGp0LmZpbGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXQodCxlKSx0fSxqdC5yYW5nZT1mdW5jdGlvbih0LGUpe3ZhciBuPXQucXVlcnlTZWxlY3RvcigiaW5wdXQiKSxvPXQucXVlcnlTZWxlY3Rvcigib3V0cHV0Iik7cmV0dXJuIG4udmFsdWU9ZS5pbnB1dFZhbHVlLG4udHlwZT1lLmlucHV0LG8udmFsdWU9ZS5pbnB1dFZhbHVlLHR9LGp0LnNlbGVjdD1mdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiB0LnRleHRDb250ZW50PSIiLGUuaW5wdXRQbGFjZWhvbGRlciYmKG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIiksSChuLGUuaW5wdXRQbGFjZWhvbGRlciksbi52YWx1ZT0iIixuLmRpc2FibGVkPSEwLG4uc2VsZWN0ZWQ9ITAsdC5hcHBlbmRDaGlsZChuKSksdH0sanQucmFkaW89ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dENvbnRlbnQ9IiIsdH0sanQuY2hlY2tib3g9ZnVuY3Rpb24odCxlKXt2YXIgbj1HKFAoKSwiY2hlY2tib3giKTtuLnZhbHVlPTEsbi5pZD1ZLmNoZWNrYm94LG4uY2hlY2tlZD1Cb29sZWFuKGUuaW5wdXRWYWx1ZSk7dmFyIG89dC5xdWVyeVNlbGVjdG9yKCJzcGFuIik7cmV0dXJuIEgobyxlLmlucHV0UGxhY2Vob2xkZXIpLHR9LGp0LnRleHRhcmVhPWZ1bmN0aW9uKGUsdCl7dmFyIG4sbztyZXR1cm4gZS52YWx1ZT10LmlucHV0VmFsdWUsQXQoZSx0KSwiTXV0YXRpb25PYnNlcnZlciJpbiB3aW5kb3cmJihuPXBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCQoKSkud2lkdGgpLG89cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoJCgpKS5wYWRkaW5nTGVmdCkrcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoJCgpKS5wYWRkaW5nUmlnaHQpLG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCl7dmFyIHQ9ZS5vZmZzZXRXaWR0aCtvOyQoKS5zdHlsZS53aWR0aD1uPHQ/IiIuY29uY2F0KHQsInB4Iik6bnVsbH0pLm9ic2VydmUoZSx7YXR0cmlidXRlczohMCxhdHRyaWJ1dGVGaWx0ZXI6WyJzdHlsZSJdfSkpLGV9O2Z1bmN0aW9uIHF0KHQsZSl7dmFyIG4sbyxpLHIsYSxjPVAoKS5xdWVyeVNlbGVjdG9yKCIjIi5jb25jYXQoWS5jb250ZW50KSk7ZS5odG1sPyhkdChlLmh0bWwsYyksb3QoYywiYmxvY2siKSk6ZS50ZXh0PyhjLnRleHRDb250ZW50PWUudGV4dCxvdChjLCJibG9jayIpKTppdChjKSxuPXQsbz1lLGk9UCgpLHI9QnQuaW5uZXJQYXJhbXMuZ2V0KG4pLGE9IXJ8fG8uaW5wdXQhPT1yLmlucHV0LFN0LmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9WVt0XSxuPWd0KGksZSk7T3QodCxvLmlucHV0QXR0cmlidXRlcyksbi5jbGFzc05hbWU9ZSxhJiZpdChuKX0pLG8uaW5wdXQmJihhJiZFdChvKSxUdChvKSksTihQKCksZSwiY29udGVudCIpfWZ1bmN0aW9uIEl0KCl7cmV0dXJuIFEoKSYmUSgpLmdldEF0dHJpYnV0ZSgiZGF0YS1xdWV1ZS1zdGVwIil9ZnVuY3Rpb24gVnQodCxzKXt2YXIgdT1CKCk7aWYoIXMucHJvZ3Jlc3NTdGVwc3x8MD09PXMucHJvZ3Jlc3NTdGVwcy5sZW5ndGgpcmV0dXJuIGl0KHUpLDA7b3QodSksdS50ZXh0Q29udGVudD0iIjt2YXIgbD1wYXJzZUludCh2b2lkIDA9PT1zLmN1cnJlbnRQcm9ncmVzc1N0ZXA/SXQoKTpzLmN1cnJlbnRQcm9ncmVzc1N0ZXApO2w+PXMucHJvZ3Jlc3NTdGVwcy5sZW5ndGgmJl8oIkludmFsaWQgY3VycmVudFByb2dyZXNzU3RlcCBwYXJhbWV0ZXIsIGl0IHNob3VsZCBiZSBsZXNzIHRoYW4gcHJvZ3Jlc3NTdGVwcy5sZW5ndGggKGN1cnJlbnRQcm9ncmVzc1N0ZXAgbGlrZSBKUyBhcnJheXMgc3RhcnRzIGZyb20gMCkiKSxzLnByb2dyZXNzU3RlcHMuZm9yRWFjaChmdW5jdGlvbih0LGUpe3ZhciBuLG8saSxyLGEsYz0obj10LG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKSxtdChvLFlbInByb2dyZXNzLXN0ZXAiXSksSChvLG4pLG8pO3UuYXBwZW5kQ2hpbGQoYyksZT09PWwmJm10KGMsWVsiYWN0aXZlLXByb2dyZXNzLXN0ZXAiXSksZSE9PXMucHJvZ3Jlc3NTdGVwcy5sZW5ndGgtMSYmKHI9cyxhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIiksbXQoYSxZWyJwcm9ncmVzcy1zdGVwLWxpbmUiXSksci5wcm9ncmVzc1N0ZXBzRGlzdGFuY2UmJihhLnN0eWxlLndpZHRoPXIucHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlKSxpPWEsdS5hcHBlbmRDaGlsZChpKSl9KX1mdW5jdGlvbiBNdCh0LGUpe3ZhciBuLG8saSxyLGEsYyxzLHUsbD1MKCk7TihsLGUsImhlYWRlciIpLFZ0KDAsZSksbj10LG89ZSwocj1CdC5pbm5lclBhcmFtcy5nZXQobikpJiZvLmljb249PT1yLmljb24mJmsoKT9OKGsoKSxvLCJpY29uIik6KER0KCksby5pY29uJiYoLTEhPT1PYmplY3Qua2V5cyhaKS5pbmRleE9mKG8uaWNvbik/KGk9QygiLiIuY29uY2F0KFkuaWNvbiwiLiIpLmNvbmNhdChaW28uaWNvbl0pKSxvdChpKSxVdChpLG8pLE50KCksTihpLG8sImljb24iKSxtdChpLG8uc2hvd0NsYXNzLmljb24pKTpGKCdVbmtub3duIGljb24hIEV4cGVjdGVkICJzdWNjZXNzIiwgImVycm9yIiwgIndhcm5pbmciLCAiaW5mbyIgb3IgInF1ZXN0aW9uIiwgZ290ICInLmNvbmNhdChvLmljb24sJyInKSkpKSxmdW5jdGlvbih0KXt2YXIgZT1BKCk7aWYoIXQuaW1hZ2VVcmwpcmV0dXJuIGl0KGUpO290KGUsIiIpLGUuc2V0QXR0cmlidXRlKCJzcmMiLHQuaW1hZ2VVcmwpLGUuc2V0QXR0cmlidXRlKCJhbHQiLHQuaW1hZ2VBbHQpLG50KGUsIndpZHRoIix0LmltYWdlV2lkdGgpLG50KGUsImhlaWdodCIsdC5pbWFnZUhlaWdodCksZS5jbGFzc05hbWU9WS5pbWFnZSxOKGUsdCwiaW1hZ2UiKX0oZSksYT1lLGM9eCgpLHJ0KGMsYS50aXRsZXx8YS50aXRsZVRleHQpLGEudGl0bGUmJmR0KGEudGl0bGUsYyksYS50aXRsZVRleHQmJihjLmlubmVyVGV4dD1hLnRpdGxlVGV4dCksTihjLGEsInRpdGxlIikscz1lLHU9SSgpLEgodSxzLmNsb3NlQnV0dG9uSHRtbCksTih1LHMsImNsb3NlQnV0dG9uIikscnQodSxzLnNob3dDbG9zZUJ1dHRvbiksdS5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLHMuY2xvc2VCdXR0b25BcmlhTGFiZWwpfWZ1bmN0aW9uIFJ0KHQsZSl7dmFyIG4sbyxpLHI7bj1lLG89JCgpLG50KG8sIndpZHRoIixuLndpZHRoKSxudChvLCJwYWRkaW5nIixuLnBhZGRpbmcpLG4uYmFja2dyb3VuZCYmKG8uc3R5bGUuYmFja2dyb3VuZD1uLmJhY2tncm91bmQpLHp0KG8sbiksUHQoMCxlKSxNdCh0LGUpLHF0KHQsZSkscHQoMCxlKSxpPWUscj1qKCkscnQocixpLmZvb3RlciksaS5mb290ZXImJmR0KGkuZm9vdGVyLHIpLE4ocixpLCJmb290ZXIiKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5vblJlbmRlciYmZS5vblJlbmRlcigkKCkpfWZ1bmN0aW9uIEh0KCl7cmV0dXJuIEUoKSYmRSgpLmNsaWNrKCl9dmFyIER0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW4oKSxlPTA7ZTx0Lmxlbmd0aDtlKyspaXQodFtlXSl9LE50PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSQoKSxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLmdldFByb3BlcnR5VmFsdWUoImJhY2tncm91bmQtY29sb3IiKSxuPXQucXVlcnlTZWxlY3RvckFsbCgiW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdLCAuc3dhbDItc3VjY2Vzcy1maXgiKSxvPTA7bzxuLmxlbmd0aDtvKyspbltvXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9ZX0sVXQ9ZnVuY3Rpb24odCxlKXt0LnRleHRDb250ZW50PSIiLGUuaWNvbkh0bWw/SCh0LF90KGUuaWNvbkh0bWwpKToic3VjY2VzcyI9PT1lLmljb24/SCh0LCdcbiAgICAgIDxkaXYgY2xhc3M9InN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZS1sZWZ0Ij48L2Rpdj5cbiAgICAgIDxzcGFuIGNsYXNzPSJzd2FsMi1zdWNjZXNzLWxpbmUtdGlwIj48L3NwYW4+IDxzcGFuIGNsYXNzPSJzd2FsMi1zdWNjZXNzLWxpbmUtbG9uZyI+PC9zcGFuPlxuICAgICAgPGRpdiBjbGFzcz0ic3dhbDItc3VjY2Vzcy1yaW5nIj48L2Rpdj4gPGRpdiBjbGFzcz0ic3dhbDItc3VjY2Vzcy1maXgiPjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz0ic3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lLXJpZ2h0Ij48L2Rpdj5cbiAgICAnKToiZXJyb3IiPT09ZS5pY29uP0godCwnXG4gICAgICA8c3BhbiBjbGFzcz0ic3dhbDIteC1tYXJrIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InN3YWwyLXgtbWFyay1saW5lLWxlZnQiPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9InN3YWwyLXgtbWFyay1saW5lLXJpZ2h0Ij48L3NwYW4+XG4gICAgICA8L3NwYW4+XG4gICAgJyk6SCh0LF90KHtxdWVzdGlvbjoiPyIsd2FybmluZzoiISIsaW5mbzoiaSJ9W2UuaWNvbl0pKX0sX3Q9ZnVuY3Rpb24odCl7cmV0dXJuJzxkaXYgY2xhc3M9IicuY29uY2F0KFlbImljb24tY29udGVudCJdLCciPicpLmNvbmNhdCh0LCI8L2Rpdj4iKX0sRnQ9W10senQ9ZnVuY3Rpb24odCxlKXt0LmNsYXNzTmFtZT0iIi5jb25jYXQoWS5wb3B1cCwiICIpLmNvbmNhdCh2dCh0KT9lLnNob3dDbGFzcy5wb3B1cDoiIiksZS50b2FzdD8obXQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkb2N1bWVudC5ib2R5XSxZWyJ0b2FzdC1zaG93biJdKSxtdCh0LFkudG9hc3QpKTptdCh0LFkubW9kYWwpLE4odCxlLCJwb3B1cCIpLCJzdHJpbmciPT10eXBlb2YgZS5jdXN0b21DbGFzcyYmbXQodCxlLmN1c3RvbUNsYXNzKSxlLmljb24mJm10KHQsWVsiaWNvbi0iLmNvbmNhdChlLmljb24pXSl9O2Z1bmN0aW9uIFd0KCl7dmFyIHQ9JCgpO3R8fHNuLmZpcmUoKSx0PSQoKTt2YXIgZT1UKCksbj1FKCk7b3QoZSksb3QobiwiaW5saW5lLWJsb2NrIiksbXQoW3QsZV0sWS5sb2FkaW5nKSxuLmRpc2FibGVkPSEwLHQuc2V0QXR0cmlidXRlKCJkYXRhLWxvYWRpbmciLCEwKSx0LnNldEF0dHJpYnV0ZSgiYXJpYS1idXN5IiwhMCksdC5mb2N1cygpfWZ1bmN0aW9uIEt0KCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3ZhciBlPXdpbmRvdy5zY3JvbGxYLG49d2luZG93LnNjcm9sbFk7WHQucmVzdG9yZUZvY3VzVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7WHQucHJldmlvdXNBY3RpdmVFbGVtZW50JiZYdC5wcmV2aW91c0FjdGl2ZUVsZW1lbnQuZm9jdXM/KFh0LnByZXZpb3VzQWN0aXZlRWxlbWVudC5mb2N1cygpLFh0LnByZXZpb3VzQWN0aXZlRWxlbWVudD1udWxsKTpkb2N1bWVudC5ib2R5JiZkb2N1bWVudC5ib2R5LmZvY3VzKCksdCgpfSwxMDApLHZvaWQgMCE9PWUmJnZvaWQgMCE9PW4mJndpbmRvdy5zY3JvbGxUbyhlLG4pfSl9ZnVuY3Rpb24gWXQoKXtpZihYdC50aW1lb3V0KXJldHVybiBmdW5jdGlvbigpe3ZhciB0PXEoKSxlPXBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLndpZHRoKTt0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCJ0cmFuc2l0aW9uIiksdC5zdHlsZS53aWR0aD0iMTAwJSI7dmFyIG49cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodCkud2lkdGgpLG89cGFyc2VJbnQoZS9uKjEwMCk7dC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgidHJhbnNpdGlvbiIpLHQuc3R5bGUud2lkdGg9IiIuY29uY2F0KG8sIiUiKX0oKSxYdC50aW1lb3V0LnN0b3AoKX1mdW5jdGlvbiBadCgpe2lmKFh0LnRpbWVvdXQpe3ZhciB0PVh0LnRpbWVvdXQuc3RhcnQoKTtyZXR1cm4gc3QodCksdH19ZnVuY3Rpb24gUXQodCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChHdCx0KX1mdW5jdGlvbiAkdCh0KXtyZXR1cm4gZWVbdF19ZnVuY3Rpb24gSnQodCl7Zm9yKHZhciBlIGluIHQpUXQoaT1lKXx8XygnVW5rbm93biBwYXJhbWV0ZXIgIicuY29uY2F0KGksJyInKSksdC50b2FzdCYmKG89ZSwtMSE9PW5lLmluZGV4T2YobykmJl8oJ1RoZSBwYXJhbWV0ZXIgIicuY29uY2F0KG8sJyIgaXMgaW5jb21wYXRpYmxlIHdpdGggdG9hc3RzJykpKSwkdChuPWUpJiZnKG4sJHQobikpO3ZhciBuLG8saX12YXIgWHQ9e30sR3Q9e3RpdGxlOiIiLHRpdGxlVGV4dDoiIix0ZXh0OiIiLGh0bWw6IiIsZm9vdGVyOiIiLGljb246dm9pZCAwLGljb25IdG1sOnZvaWQgMCx0b2FzdDohMSxhbmltYXRpb246ITAsc2hvd0NsYXNzOntwb3B1cDoic3dhbDItc2hvdyIsYmFja2Ryb3A6InN3YWwyLWJhY2tkcm9wLXNob3ciLGljb246InN3YWwyLWljb24tc2hvdyJ9LGhpZGVDbGFzczp7cG9wdXA6InN3YWwyLWhpZGUiLGJhY2tkcm9wOiJzd2FsMi1iYWNrZHJvcC1oaWRlIixpY29uOiJzd2FsMi1pY29uLWhpZGUifSxjdXN0b21DbGFzczp2b2lkIDAsdGFyZ2V0OiJib2R5IixiYWNrZHJvcDohMCxoZWlnaHRBdXRvOiEwLGFsbG93T3V0c2lkZUNsaWNrOiEwLGFsbG93RXNjYXBlS2V5OiEwLGFsbG93RW50ZXJLZXk6ITAsc3RvcEtleWRvd25Qcm9wYWdhdGlvbjohMCxrZXlkb3duTGlzdGVuZXJDYXB0dXJlOiExLHNob3dDb25maXJtQnV0dG9uOiEwLHNob3dDYW5jZWxCdXR0b246ITEscHJlQ29uZmlybTp2b2lkIDAsY29uZmlybUJ1dHRvblRleHQ6Ik9LIixjb25maXJtQnV0dG9uQXJpYUxhYmVsOiIiLGNvbmZpcm1CdXR0b25Db2xvcjp2b2lkIDAsY2FuY2VsQnV0dG9uVGV4dDoiQ2FuY2VsIixjYW5jZWxCdXR0b25BcmlhTGFiZWw6IiIsY2FuY2VsQnV0dG9uQ29sb3I6dm9pZCAwLGJ1dHRvbnNTdHlsaW5nOiEwLHJldmVyc2VCdXR0b25zOiExLGZvY3VzQ29uZmlybTohMCxmb2N1c0NhbmNlbDohMSxzaG93Q2xvc2VCdXR0b246ITEsY2xvc2VCdXR0b25IdG1sOiImdGltZXM7IixjbG9zZUJ1dHRvbkFyaWFMYWJlbDoiQ2xvc2UgdGhpcyBkaWFsb2ciLHNob3dMb2FkZXJPbkNvbmZpcm06ITEsaW1hZ2VVcmw6dm9pZCAwLGltYWdlV2lkdGg6dm9pZCAwLGltYWdlSGVpZ2h0OnZvaWQgMCxpbWFnZUFsdDoiIix0aW1lcjp2b2lkIDAsdGltZXJQcm9ncmVzc0JhcjohMSx3aWR0aDp2b2lkIDAscGFkZGluZzp2b2lkIDAsYmFja2dyb3VuZDp2b2lkIDAsaW5wdXQ6dm9pZCAwLGlucHV0UGxhY2Vob2xkZXI6IiIsaW5wdXRWYWx1ZToiIixpbnB1dE9wdGlvbnM6e30saW5wdXRBdXRvVHJpbTohMCxpbnB1dEF0dHJpYnV0ZXM6e30saW5wdXRWYWxpZGF0b3I6dm9pZCAwLHZhbGlkYXRpb25NZXNzYWdlOnZvaWQgMCxncm93OiExLHBvc2l0aW9uOiJjZW50ZXIiLHByb2dyZXNzU3RlcHM6W10sY3VycmVudFByb2dyZXNzU3RlcDp2b2lkIDAscHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlOnZvaWQgMCxvbkJlZm9yZU9wZW46dm9pZCAwLG9uT3Blbjp2b2lkIDAsb25SZW5kZXI6dm9pZCAwLG9uQ2xvc2U6dm9pZCAwLG9uQWZ0ZXJDbG9zZTp2b2lkIDAsb25EZXN0cm95OnZvaWQgMCxzY3JvbGxiYXJQYWRkaW5nOiEwfSx0ZT1bInRpdGxlIiwidGl0bGVUZXh0IiwidGV4dCIsImh0bWwiLCJmb290ZXIiLCJpY29uIiwiaGlkZUNsYXNzIiwiY3VzdG9tQ2xhc3MiLCJhbGxvd091dHNpZGVDbGljayIsImFsbG93RXNjYXBlS2V5Iiwic2hvd0NvbmZpcm1CdXR0b24iLCJzaG93Q2FuY2VsQnV0dG9uIiwiY29uZmlybUJ1dHRvblRleHQiLCJjb25maXJtQnV0dG9uQXJpYUxhYmVsIiwiY29uZmlybUJ1dHRvbkNvbG9yIiwiY2FuY2VsQnV0dG9uVGV4dCIsImNhbmNlbEJ1dHRvbkFyaWFMYWJlbCIsImNhbmNlbEJ1dHRvbkNvbG9yIiwiYnV0dG9uc1N0eWxpbmciLCJyZXZlcnNlQnV0dG9ucyIsInNob3dDbG9zZUJ1dHRvbiIsImNsb3NlQnV0dG9uSHRtbCIsImNsb3NlQnV0dG9uQXJpYUxhYmVsIiwiaW1hZ2VVcmwiLCJpbWFnZVdpZHRoIiwiaW1hZ2VIZWlnaHQiLCJpbWFnZUFsdCIsInByb2dyZXNzU3RlcHMiLCJjdXJyZW50UHJvZ3Jlc3NTdGVwIiwib25DbG9zZSIsIm9uQWZ0ZXJDbG9zZSIsIm9uRGVzdHJveSJdLGVlPXthbmltYXRpb246J3Nob3dDbGFzcyIgYW5kICJoaWRlQ2xhc3MnfSxuZT1bImFsbG93T3V0c2lkZUNsaWNrIiwiYWxsb3dFbnRlcktleSIsImJhY2tkcm9wIiwiZm9jdXNDb25maXJtIiwiZm9jdXNDYW5jZWwiLCJoZWlnaHRBdXRvIiwia2V5ZG93bkxpc3RlbmVyQ2FwdHVyZSJdLG9lPU9iamVjdC5mcmVlemUoe2lzVmFsaWRQYXJhbWV0ZXI6UXQsaXNVcGRhdGFibGVQYXJhbWV0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuLTEhPT10ZS5pbmRleE9mKHQpfSxpc0RlcHJlY2F0ZWRQYXJhbWV0ZXI6JHQsYXJnc1RvUGFyYW1zOmZ1bmN0aW9uKG8pe3ZhciBpPXt9O3JldHVybiJvYmplY3QiIT09cihvWzBdKXx8dyhvWzBdKT9bInRpdGxlIiwiaHRtbCIsImljb24iXS5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49b1tlXTsic3RyaW5nIj09dHlwZW9mIG58fHcobik/aVt0XT1uOnZvaWQgMCE9PW4mJkYoIlVuZXhwZWN0ZWQgdHlwZSBvZiAiLmNvbmNhdCh0LCchIEV4cGVjdGVkICJzdHJpbmciIG9yICJFbGVtZW50IiwgZ290ICcpLmNvbmNhdChyKG4pKSl9KTpzKGksb1swXSksaX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHZ0KCQoKSl9LGNsaWNrQ29uZmlybTpIdCxjbGlja0NhbmNlbDpmdW5jdGlvbigpe3JldHVybiBPKCkmJk8oKS5jbGljaygpfSxnZXRDb250YWluZXI6USxnZXRQb3B1cDokLGdldFRpdGxlOngsZ2V0Q29udGVudDpQLGdldEh0bWxDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZShZWyJodG1sLWNvbnRhaW5lciJdKX0sZ2V0SW1hZ2U6QSxnZXRJY29uOmssZ2V0SWNvbnM6bixnZXRDbG9zZUJ1dHRvbjpJLGdldEFjdGlvbnM6VCxnZXRDb25maXJtQnV0dG9uOkUsZ2V0Q2FuY2VsQnV0dG9uOk8sZ2V0SGVhZGVyOkwsZ2V0Rm9vdGVyOmosZ2V0VGltZXJQcm9ncmVzc0JhcjpxLGdldEZvY3VzYWJsZUVsZW1lbnRzOlYsZ2V0VmFsaWRhdGlvbk1lc3NhZ2U6Uyxpc0xvYWRpbmc6UixmaXJlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1uZXcgQXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07cmV0dXJuIGkodGhpcyxlKX0sbWl4aW46ZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0LGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiZsKHQsZSl9KGksdCk7dmFyIG4sbyxlPShuPWksbz1kKCksZnVuY3Rpb24oKXt2YXIgdCxlPXUobik7cmV0dXJuIHAodGhpcyxvPyh0PXUodGhpcykuY29uc3RydWN0b3IsUmVmbGVjdC5jb25zdHJ1Y3QoZSxhcmd1bWVudHMsdCkpOmUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0pO2Z1bmN0aW9uIGkoKXtyZXR1cm4gYSh0aGlzLGkpLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBjKGksW3trZXk6Il9tYWluIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gZih1KGkucHJvdG90eXBlKSwiX21haW4iLHRoaXMpLmNhbGwodGhpcyxzKHt9LHIsdCkpfX1dKSxpfSh0aGlzKX0scXVldWU6ZnVuY3Rpb24odCl7dmFyIHI9dGhpcztGdD10O2Z1bmN0aW9uIGEodCxlKXtGdD1bXSx0KGUpfXZhciBjPVtdO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihpKXshZnVuY3Rpb24gZShuLG8pe248RnQubGVuZ3RoPyhkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSgiZGF0YS1zd2FsMi1xdWV1ZS1zdGVwIixuKSxyLmZpcmUoRnRbbl0pLnRoZW4oZnVuY3Rpb24odCl7dm9pZCAwIT09dC52YWx1ZT8oYy5wdXNoKHQudmFsdWUpLGUobisxLG8pKTphKGkse2Rpc21pc3M6dC5kaXNtaXNzfSl9KSk6YShpLHt2YWx1ZTpjfSl9KDApfSl9LGdldFF1ZXVlU3RlcDpJdCxpbnNlcnRRdWV1ZVN0ZXA6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZSYmZTxGdC5sZW5ndGg/RnQuc3BsaWNlKGUsMCx0KTpGdC5wdXNoKHQpfSxkZWxldGVRdWV1ZVN0ZXA6ZnVuY3Rpb24odCl7dm9pZCAwIT09RnRbdF0mJkZ0LnNwbGljZSh0LDEpfSxzaG93TG9hZGluZzpXdCxlbmFibGVMb2FkaW5nOld0LGdldFRpbWVyTGVmdDpmdW5jdGlvbigpe3JldHVybiBYdC50aW1lb3V0JiZYdC50aW1lb3V0LmdldFRpbWVyTGVmdCgpfSxzdG9wVGltZXI6WXQscmVzdW1lVGltZXI6WnQsdG9nZ2xlVGltZXI6ZnVuY3Rpb24oKXt2YXIgdD1YdC50aW1lb3V0O3JldHVybiB0JiYodC5ydW5uaW5nP1l0Olp0KSgpfSxpbmNyZWFzZVRpbWVyOmZ1bmN0aW9uKHQpe2lmKFh0LnRpbWVvdXQpe3ZhciBlPVh0LnRpbWVvdXQuaW5jcmVhc2UodCk7cmV0dXJuIHN0KGUsITApLGV9fSxpc1RpbWVyUnVubmluZzpmdW5jdGlvbigpe3JldHVybiBYdC50aW1lb3V0JiZYdC50aW1lb3V0LmlzUnVubmluZygpfX0pO2Z1bmN0aW9uIGllKCl7dmFyIHQsZT1CdC5pbm5lclBhcmFtcy5nZXQodGhpcyk7ZSYmKHQ9QnQuZG9tQ2FjaGUuZ2V0KHRoaXMpLGUuc2hvd0NvbmZpcm1CdXR0b258fChpdCh0LmNvbmZpcm1CdXR0b24pLGUuc2hvd0NhbmNlbEJ1dHRvbnx8aXQodC5hY3Rpb25zKSksaHQoW3QucG9wdXAsdC5hY3Rpb25zXSxZLmxvYWRpbmcpLHQucG9wdXAucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWJ1c3kiKSx0LnBvcHVwLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1sb2FkaW5nIiksdC5jb25maXJtQnV0dG9uLmRpc2FibGVkPSExLHQuY2FuY2VsQnV0dG9uLmRpc2FibGVkPSExKX1mdW5jdGlvbiByZSgpe251bGw9PT1YLnByZXZpb3VzQm9keVBhZGRpbmcmJmRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0PndpbmRvdy5pbm5lckhlaWdodCYmKFgucHJldmlvdXNCb2R5UGFkZGluZz1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLXJpZ2h0IikpLGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0PSIiLmNvbmNhdChYLnByZXZpb3VzQm9keVBhZGRpbmcrZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LmNsYXNzTmFtZT1ZWyJzY3JvbGxiYXItbWVhc3VyZSJdLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCk7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aC10LmNsaWVudFdpZHRoO3JldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLGV9KCksInB4IikpfWZ1bmN0aW9uIGFlKCl7cmV0dXJuISF3aW5kb3cuTVNJbnB1dE1ldGhvZENvbnRleHQmJiEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlfWZ1bmN0aW9uIGNlKCl7dmFyIHQ9USgpLGU9JCgpO3Quc3R5bGUucmVtb3ZlUHJvcGVydHkoImFsaWduLWl0ZW1zIiksZS5vZmZzZXRUb3A8MCYmKHQuc3R5bGUuYWxpZ25JdGVtcz0iZmxleC1zdGFydCIpfXZhciBzZT1mdW5jdGlvbigpe25hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhDcmlPU3xGeGlPU3xFZGdpT1N8WWFCcm93c2VyfFVDQnJvd3NlcikvaSl8fCQoKS5zY3JvbGxIZWlnaHQ+d2luZG93LmlubmVySGVpZ2h0LTQ0JiYoUSgpLnN0eWxlLnBhZGRpbmdCb3R0b209IiIuY29uY2F0KDQ0LCJweCIpKX0sdWU9ZnVuY3Rpb24oKXt2YXIgZSx0PVEoKTt0Lm9udG91Y2hzdGFydD1mdW5jdGlvbih0KXtlPWxlKHQudGFyZ2V0KX0sdC5vbnRvdWNobW92ZT1mdW5jdGlvbih0KXtlJiYodC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCkpfX0sbGU9ZnVuY3Rpb24odCl7dmFyIGU9USgpO3JldHVybiB0PT09ZXx8IShhdChlKXx8IklOUFVUIj09PXQudGFnTmFtZXx8YXQoUCgpKSYmUCgpLmNvbnRhaW5zKHQpKX0sZGU9e3N3YWxQcm9taXNlUmVzb2x2ZTpuZXcgV2Vha01hcH07ZnVuY3Rpb24gcGUodCxlLG4sbyl7dmFyIGk7bj9oZSh0LG8pOihLdCgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaGUodCxvKX0pLFh0LmtleWRvd25UYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsWHQua2V5ZG93bkhhbmRsZXIse2NhcHR1cmU6WHQua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZX0pLFh0LmtleWRvd25IYW5kbGVyQWRkZWQ9ITEpLGUucGFyZW50Tm9kZSYmIWRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKCJkYXRhLXN3YWwyLXF1ZXVlLXN0ZXAiKSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLE0oKSYmKG51bGwhPT1YLnByZXZpb3VzQm9keVBhZGRpbmcmJihkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodD0iIi5jb25jYXQoWC5wcmV2aW91c0JvZHlQYWRkaW5nLCJweCIpLFgucHJldmlvdXNCb2R5UGFkZGluZz1udWxsKSxEKGRvY3VtZW50LmJvZHksWS5pb3NmaXgpJiYoaT1wYXJzZUludChkb2N1bWVudC5ib2R5LnN0eWxlLnRvcCwxMCksaHQoZG9jdW1lbnQuYm9keSxZLmlvc2ZpeCksZG9jdW1lbnQuYm9keS5zdHlsZS50b3A9IiIsZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A9LTEqaSksInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJmFlKCkmJndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLGNlKSxoKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24odCl7dC5oYXNBdHRyaWJ1dGUoImRhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4iKT8odC5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIix0LmdldEF0dHJpYnV0ZSgiZGF0YS1wcmV2aW91cy1hcmlhLWhpZGRlbiIpKSx0LnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1wcmV2aW91cy1hcmlhLWhpZGRlbiIpKTp0LnJlbW92ZUF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iKX0pKSxodChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGRvY3VtZW50LmJvZHldLFtZLnNob3duLFlbImhlaWdodC1hdXRvIl0sWVsibm8tYmFja2Ryb3AiXSxZWyJ0b2FzdC1zaG93biJdLFlbInRvYXN0LWNvbHVtbiJdXSl9ZnVuY3Rpb24gZmUodCl7dmFyIGUsbixvLGk9JCgpO2kmJihlPUJ0LmlubmVyUGFyYW1zLmdldCh0aGlzKSkmJiFEKGksZS5oaWRlQ2xhc3MucG9wdXApJiYobj1kZS5zd2FsUHJvbWlzZVJlc29sdmUuZ2V0KHRoaXMpLGh0KGksZS5zaG93Q2xhc3MucG9wdXApLG10KGksZS5oaWRlQ2xhc3MucG9wdXApLG89USgpLGh0KG8sZS5zaG93Q2xhc3MuYmFja2Ryb3ApLG10KG8sZS5oaWRlQ2xhc3MuYmFja2Ryb3ApLGZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1RKCksaT1rdCYmY3QoZSkscj1uLm9uQ2xvc2UsYT1uLm9uQWZ0ZXJDbG9zZTtpZihyIT09bnVsbCYmdHlwZW9mIHI9PT0iZnVuY3Rpb24iKXtyKGUpfWlmKGkpe21lKHQsZSxvLGEpfWVsc2V7cGUodCxvLEooKSxhKX19KHRoaXMsaSxlKSx2b2lkIDAhPT10Pyh0LmlzRGlzbWlzc2VkPXZvaWQgMCE9PXQuZGlzbWlzcyx0LmlzQ29uZmlybWVkPXZvaWQgMD09PXQuZGlzbWlzcyk6dD17aXNEaXNtaXNzZWQ6ITAsaXNDb25maXJtZWQ6ITF9LG4odHx8e30pKX12YXIgbWU9ZnVuY3Rpb24odCxlLG4sbyl7WHQuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrPXBlLmJpbmQobnVsbCx0LG4sSigpLG8pLGUuYWRkRXZlbnRMaXN0ZW5lcihrdCxmdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJihYdC5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2soKSxkZWxldGUgWHQuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKX0pfSxoZT1mdW5jdGlvbih0LGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXsiZnVuY3Rpb24iPT10eXBlb2YgZSYmZSgpLHQuX2Rlc3Ryb3koKX0pfTtmdW5jdGlvbiBnZSh0LGUsbil7dmFyIG89QnQuZG9tQ2FjaGUuZ2V0KHQpO2UuZm9yRWFjaChmdW5jdGlvbih0KXtvW3RdLmRpc2FibGVkPW59KX1mdW5jdGlvbiB2ZSh0LGUpe2lmKCF0KXJldHVybiExO2lmKCJyYWRpbyI9PT10LnR5cGUpZm9yKHZhciBuPXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0Iiksbz0wO288bi5sZW5ndGg7bysrKW5bb10uZGlzYWJsZWQ9ZTtlbHNlIHQuZGlzYWJsZWQ9ZX12YXIgYmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsZSl7YSh0aGlzLG4pLHRoaXMuY2FsbGJhY2s9dCx0aGlzLnJlbWFpbmluZz1lLHRoaXMucnVubmluZz0hMSx0aGlzLnN0YXJ0KCl9cmV0dXJuIGMobixbe2tleToic3RhcnQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZ3x8KHRoaXMucnVubmluZz0hMCx0aGlzLnN0YXJ0ZWQ9bmV3IERhdGUsdGhpcy5pZD1zZXRUaW1lb3V0KHRoaXMuY2FsbGJhY2ssdGhpcy5yZW1haW5pbmcpKSx0aGlzLnJlbWFpbmluZ319LHtrZXk6InN0b3AiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZyYmKHRoaXMucnVubmluZz0hMSxjbGVhclRpbWVvdXQodGhpcy5pZCksdGhpcy5yZW1haW5pbmctPW5ldyBEYXRlLXRoaXMuc3RhcnRlZCksdGhpcy5yZW1haW5pbmd9fSx7a2V5OiJpbmNyZWFzZSIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ydW5uaW5nO3JldHVybiBlJiZ0aGlzLnN0b3AoKSx0aGlzLnJlbWFpbmluZys9dCxlJiZ0aGlzLnN0YXJ0KCksdGhpcy5yZW1haW5pbmd9fSx7a2V5OiJnZXRUaW1lckxlZnQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZyYmKHRoaXMuc3RvcCgpLHRoaXMuc3RhcnQoKSksdGhpcy5yZW1haW5pbmd9fSx7a2V5OiJpc1J1bm5pbmciLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVubmluZ319XSksbn0oKSx5ZT17ZW1haWw6ZnVuY3Rpb24odCxlKXtyZXR1cm4vXlthLXpBLVowLTkuK18tXStAW2EtekEtWjAtOS4tXStcLlthLXpBLVowLTktXXsyLDI0fSQvLnRlc3QodCk/UHJvbWlzZS5yZXNvbHZlKCk6UHJvbWlzZS5yZXNvbHZlKGV8fCJJbnZhbGlkIGVtYWlsIGFkZHJlc3MiKX0sdXJsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuL15odHRwcz86XC9cLyh3d3dcLik/Wy1hLXpBLVowLTlAOiUuXyt+Iz1dezEsMjU2fVwuW2Etel17Miw2M31cYihbLWEtekEtWjAtOUA6JV8rLn4jPyYvPV0qKSQvLnRlc3QodCk/UHJvbWlzZS5yZXNvbHZlKCk6UHJvbWlzZS5yZXNvbHZlKGV8fCJJbnZhbGlkIFVSTCIpfX07ZnVuY3Rpb24gd2UodCl7dmFyIGUsbjsoZT10KS5pbnB1dFZhbGlkYXRvcnx8T2JqZWN0LmtleXMoeWUpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5pbnB1dD09PXQmJihlLmlucHV0VmFsaWRhdG9yPXllW3RdKX0pLHQuc2hvd0xvYWRlck9uQ29uZmlybSYmIXQucHJlQ29uZmlybSYmXygic2hvd0xvYWRlck9uQ29uZmlybSBpcyBzZXQgdG8gdHJ1ZSwgYnV0IHByZUNvbmZpcm0gaXMgbm90IGRlZmluZWQuXG5zaG93TG9hZGVyT25Db25maXJtIHNob3VsZCBiZSB1c2VkIHRvZ2V0aGVyIHdpdGggcHJlQ29uZmlybSwgc2VlIHVzYWdlIGV4YW1wbGU6XG5odHRwczovL3N3ZWV0YWxlcnQyLmdpdGh1Yi5pby8jYWpheC1yZXF1ZXN0IiksdC5hbmltYXRpb249Vyh0LmFuaW1hdGlvbiksKG49dCkudGFyZ2V0JiYoInN0cmluZyIhPXR5cGVvZiBuLnRhcmdldHx8ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuLnRhcmdldCkpJiYoInN0cmluZyI9PXR5cGVvZiBuLnRhcmdldHx8bi50YXJnZXQuYXBwZW5kQ2hpbGQpfHwoXygnVGFyZ2V0IHBhcmFtZXRlciBpcyBub3QgdmFsaWQsIGRlZmF1bHRpbmcgdG8gImJvZHkiJyksbi50YXJnZXQ9ImJvZHkiKSwic3RyaW5nIj09dHlwZW9mIHQudGl0bGUmJih0LnRpdGxlPXQudGl0bGUuc3BsaXQoIlxuIikuam9pbigiPGJyIC8+IikpLHl0KHQpfWZ1bmN0aW9uIENlKHQpe3ZhciBlPVEoKSxuPSQoKTsiZnVuY3Rpb24iPT10eXBlb2YgdC5vbkJlZm9yZU9wZW4mJnQub25CZWZvcmVPcGVuKG4pO3ZhciBvPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLm92ZXJmbG93WTtqZShlLG4sdCksVGUoZSxuKSxNKCkmJihMZShlLHQuc2Nyb2xsYmFyUGFkZGluZyxvKSxoKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24odCl7dD09PVEoKXx8ZnVuY3Rpb24odCxlKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdC5jb250YWlucylyZXR1cm4gdC5jb250YWlucyhlKX0odCxRKCkpfHwodC5oYXNBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIikmJnQuc2V0QXR0cmlidXRlKCJkYXRhLXByZXZpb3VzLWFyaWEtaGlkZGVuIix0LmdldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iKSksdC5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwidHJ1ZSIpKX0pKSxKKCl8fFh0LnByZXZpb3VzQWN0aXZlRWxlbWVudHx8KFh0LnByZXZpb3VzQWN0aXZlRWxlbWVudD1kb2N1bWVudC5hY3RpdmVFbGVtZW50KSwiZnVuY3Rpb24iPT10eXBlb2YgdC5vbk9wZW4mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gdC5vbk9wZW4obil9KSxodChlLFlbIm5vLXRyYW5zaXRpb24iXSl9ZnVuY3Rpb24ga2UodCl7dmFyIGUsbj0kKCk7dC50YXJnZXQ9PT1uJiYoZT1RKCksbi5yZW1vdmVFdmVudExpc3RlbmVyKGt0LGtlKSxlLnN0eWxlLm92ZXJmbG93WT0iYXV0byIpfWZ1bmN0aW9uIHhlKHQsZSl7InNlbGVjdCI9PT1lLmlucHV0fHwicmFkaW8iPT09ZS5pbnB1dD9NZSh0LGUpOi0xIT09WyJ0ZXh0IiwiZW1haWwiLCJudW1iZXIiLCJ0ZWwiLCJ0ZXh0YXJlYSJdLmluZGV4T2YoZS5pbnB1dCkmJih2KGUuaW5wdXRWYWx1ZSl8fHkoZS5pbnB1dFZhbHVlKSkmJlJlKHQsZSl9ZnVuY3Rpb24gUGUodCxlKXt0LmRpc2FibGVCdXR0b25zKCksZS5pbnB1dD9OZSh0LGUpOlVlKHQsZSwhMCl9ZnVuY3Rpb24gQWUodCxlKXt0LmRpc2FibGVCdXR0b25zKCksZShLLmNhbmNlbCl9ZnVuY3Rpb24gQmUodCxlKXt0LmNsb3NlUG9wdXAoe3ZhbHVlOmV9KX1mdW5jdGlvbiBTZShlLHQsbixvKXt0LmtleWRvd25UYXJnZXQmJnQua2V5ZG93bkhhbmRsZXJBZGRlZCYmKHQua2V5ZG93blRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0LmtleWRvd25IYW5kbGVyLHtjYXB0dXJlOnQua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZX0pLHQua2V5ZG93bkhhbmRsZXJBZGRlZD0hMSksbi50b2FzdHx8KHQua2V5ZG93bkhhbmRsZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHplKGUsdCxvKX0sdC5rZXlkb3duVGFyZ2V0PW4ua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZT93aW5kb3c6JCgpLHQua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZT1uLmtleWRvd25MaXN0ZW5lckNhcHR1cmUsdC5rZXlkb3duVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHQua2V5ZG93bkhhbmRsZXIse2NhcHR1cmU6dC5rZXlkb3duTGlzdGVuZXJDYXB0dXJlfSksdC5rZXlkb3duSGFuZGxlckFkZGVkPSEwKX1mdW5jdGlvbiBFZSh0LGUsbil7dmFyIG89VigpLGk9MDtpZihpPG8ubGVuZ3RoKXJldHVybihlKz1uKT09PW8ubGVuZ3RoP2U9MDotMT09PWUmJihlPW8ubGVuZ3RoLTEpLG9bZV0uZm9jdXMoKTskKCkuZm9jdXMoKX1mdW5jdGlvbiBPZSh0LGUsbil7QnQuaW5uZXJQYXJhbXMuZ2V0KHQpLnRvYXN0P1FlKHQsZSxuKTooSmUoZSksWGUoZSksR2UodCxlLG4pKX12YXIgVGU9ZnVuY3Rpb24odCxlKXtrdCYmY3QoZSk/KHQuc3R5bGUub3ZlcmZsb3dZPSJoaWRkZW4iLGUuYWRkRXZlbnRMaXN0ZW5lcihrdCxrZSkpOnQuc3R5bGUub3ZlcmZsb3dZPSJhdXRvIn0sTGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBvOygvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmIXdpbmRvdy5NU1N0cmVhbXx8Ik1hY0ludGVsIj09PW5hdmlnYXRvci5wbGF0Zm9ybSYmMTxuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMpJiYhRChkb2N1bWVudC5ib2R5LFkuaW9zZml4KSYmKG89ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsZG9jdW1lbnQuYm9keS5zdHlsZS50b3A9IiIuY29uY2F0KC0xKm8sInB4IiksbXQoZG9jdW1lbnQuYm9keSxZLmlvc2ZpeCksdWUoKSxzZSgpKSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmYWUoKSYmKGNlKCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsY2UpKSxlJiYiaGlkZGVuIiE9PW4mJnJlKCksc2V0VGltZW91dChmdW5jdGlvbigpe3Quc2Nyb2xsVG9wPTB9KX0samU9ZnVuY3Rpb24odCxlLG4pe210KHQsbi5zaG93Q2xhc3MuYmFja2Ryb3ApLG90KGUpLG10KGUsbi5zaG93Q2xhc3MucG9wdXApLG10KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZG9jdW1lbnQuYm9keV0sWS5zaG93biksbi5oZWlnaHRBdXRvJiZuLmJhY2tkcm9wJiYhbi50b2FzdCYmbXQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkb2N1bWVudC5ib2R5XSxZWyJoZWlnaHQtYXV0byJdKX0scWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2tlZD8xOjB9LEllPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrZWQ/dC52YWx1ZTpudWxsfSxWZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5maWxlcy5sZW5ndGg/bnVsbCE9PXQuZ2V0QXR0cmlidXRlKCJtdWx0aXBsZSIpP3QuZmlsZXM6dC5maWxlc1swXTpudWxsfSxNZT1mdW5jdGlvbihlLG4pe2Z1bmN0aW9uIG8odCl7cmV0dXJuIEhlW24uaW5wdXRdKGksRGUodCksbil9dmFyIGk9UCgpO3Yobi5pbnB1dE9wdGlvbnMpfHx5KG4uaW5wdXRPcHRpb25zKT8oV3QoKSxiKG4uaW5wdXRPcHRpb25zKS50aGVuKGZ1bmN0aW9uKHQpe2UuaGlkZUxvYWRpbmcoKSxvKHQpfSkpOiJvYmplY3QiPT09cihuLmlucHV0T3B0aW9ucyk/byhuLmlucHV0T3B0aW9ucyk6RigiVW5leHBlY3RlZCB0eXBlIG9mIGlucHV0T3B0aW9ucyEgRXhwZWN0ZWQgb2JqZWN0LCBNYXAgb3IgUHJvbWlzZSwgZ290ICIuY29uY2F0KHIobi5pbnB1dE9wdGlvbnMpKSl9LFJlPWZ1bmN0aW9uKGUsbil7dmFyIG89ZS5nZXRJbnB1dCgpO2l0KG8pLGIobi5pbnB1dFZhbHVlKS50aGVuKGZ1bmN0aW9uKHQpe28udmFsdWU9Im51bWJlciI9PT1uLmlucHV0P3BhcnNlRmxvYXQodCl8fDA6IiIuY29uY2F0KHQpLG90KG8pLG8uZm9jdXMoKSxlLmhpZGVMb2FkaW5nKCl9KS5jYXRjaChmdW5jdGlvbih0KXtGKCJFcnJvciBpbiBpbnB1dFZhbHVlIHByb21pc2U6ICIuY29uY2F0KHQpKSxvLnZhbHVlPSIiLG90KG8pLG8uZm9jdXMoKSxlLmhpZGVMb2FkaW5nKCl9KX0sSGU9e3NlbGVjdDpmdW5jdGlvbih0LGUsaSl7ZnVuY3Rpb24gcih0LGUsbil7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7by52YWx1ZT1uLEgobyxlKSxpLmlucHV0VmFsdWUudG9TdHJpbmcoKT09PW4udG9TdHJpbmcoKSYmKG8uc2VsZWN0ZWQ9ITApLHQuYXBwZW5kQ2hpbGQobyl9dmFyIGE9Z3QodCxZLnNlbGVjdCk7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlLG49dFswXSxvPXRbMV07QXJyYXkuaXNBcnJheShvKT8oKGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0Z3JvdXAiKSkubGFiZWw9bixlLmRpc2FibGVkPSExLGEuYXBwZW5kQ2hpbGQoZSksby5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiByKGUsdFsxXSx0WzBdKX0pKTpyKGEsbyxuKX0pLGEuZm9jdXMoKX0scmFkaW86ZnVuY3Rpb24odCxlLGEpe3ZhciBjPWd0KHQsWS5yYWRpbyk7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0sbj10WzFdLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7by50eXBlPSJyYWRpbyIsby5uYW1lPVkucmFkaW8sby52YWx1ZT1lLGEuaW5wdXRWYWx1ZS50b1N0cmluZygpPT09ZS50b1N0cmluZygpJiYoby5jaGVja2VkPSEwKTt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7SChyLG4pLHIuY2xhc3NOYW1lPVkubGFiZWwsaS5hcHBlbmRDaGlsZChvKSxpLmFwcGVuZENoaWxkKHIpLGMuYXBwZW5kQ2hpbGQoaSl9KTt2YXIgbj1jLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0Iik7bi5sZW5ndGgmJm5bMF0uZm9jdXMoKX19LERlPWZ1bmN0aW9uIG8obil7dmFyIGk9W107cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBNYXAmJm4gaW5zdGFuY2VvZiBNYXA/bi5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49dDsib2JqZWN0Ij09PXIobikmJihuPW8obikpLGkucHVzaChbZSxuXSl9KTpPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPW5bdF07Im9iamVjdCI9PT1yKGUpJiYoZT1vKGUpKSxpLnB1c2goW3QsZV0pfSksaX0sTmU9ZnVuY3Rpb24oZSxuKXt2YXIgbz1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0SW5wdXQoKTtpZighbilyZXR1cm4gbnVsbDtzd2l0Y2goZS5pbnB1dCl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIHFlKG4pO2Nhc2UicmFkaW8iOnJldHVybiBJZShuKTtjYXNlImZpbGUiOnJldHVybiBWZShuKTtkZWZhdWx0OnJldHVybiBlLmlucHV0QXV0b1RyaW0/bi52YWx1ZS50cmltKCk6bi52YWx1ZX19KGUsbik7bi5pbnB1dFZhbGlkYXRvcj8oZS5kaXNhYmxlSW5wdXQoKSxQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGIobi5pbnB1dFZhbGlkYXRvcihvLG4udmFsaWRhdGlvbk1lc3NhZ2UpKX0pLnRoZW4oZnVuY3Rpb24odCl7ZS5lbmFibGVCdXR0b25zKCksZS5lbmFibGVJbnB1dCgpLHQ/ZS5zaG93VmFsaWRhdGlvbk1lc3NhZ2UodCk6VWUoZSxuLG8pfSkpOmUuZ2V0SW5wdXQoKS5jaGVja1ZhbGlkaXR5KCk/VWUoZSxuLG8pOihlLmVuYWJsZUJ1dHRvbnMoKSxlLnNob3dWYWxpZGF0aW9uTWVzc2FnZShuLnZhbGlkYXRpb25NZXNzYWdlKSl9LFVlPWZ1bmN0aW9uKGUsdCxuKXt0LnNob3dMb2FkZXJPbkNvbmZpcm0mJld0KCksdC5wcmVDb25maXJtPyhlLnJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSxQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGIodC5wcmVDb25maXJtKG4sdC52YWxpZGF0aW9uTWVzc2FnZSkpfSkudGhlbihmdW5jdGlvbih0KXt2dChTKCkpfHwhMT09PXQ/ZS5oaWRlTG9hZGluZygpOkJlKGUsdm9pZCAwPT09dD9uOnQpfSkpOkJlKGUsbil9LF9lPVsiQXJyb3dMZWZ0IiwiQXJyb3dSaWdodCIsIkFycm93VXAiLCJBcnJvd0Rvd24iLCJMZWZ0IiwiUmlnaHQiLCJVcCIsIkRvd24iXSxGZT1bIkVzY2FwZSIsIkVzYyJdLHplPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1CdC5pbm5lclBhcmFtcy5nZXQodCk7by5zdG9wS2V5ZG93blByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpLCJFbnRlciI9PT1lLmtleT9XZSh0LGUsbyk6IlRhYiI9PT1lLmtleT9LZShlLG8pOi0xIT09X2UuaW5kZXhPZihlLmtleSk/WWUoKTotMSE9PUZlLmluZGV4T2YoZS5rZXkpJiZaZShlLG8sbil9LFdlPWZ1bmN0aW9uKHQsZSxuKXtpZighZS5pc0NvbXBvc2luZyYmZS50YXJnZXQmJnQuZ2V0SW5wdXQoKSYmZS50YXJnZXQub3V0ZXJIVE1MPT09dC5nZXRJbnB1dCgpLm91dGVySFRNTCl7aWYoLTEhPT1bInRleHRhcmVhIiwiZmlsZSJdLmluZGV4T2Yobi5pbnB1dCkpcmV0dXJuO0h0KCksZS5wcmV2ZW50RGVmYXVsdCgpfX0sS2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQudGFyZ2V0LG49VigpLG89LTEsaT0wO2k8bi5sZW5ndGg7aSsrKWlmKGU9PT1uW2ldKXtvPWk7YnJlYWt9dC5zaGlmdEtleT9FZSgwLG8sLTEpOkVlKDAsbywxKSx0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKX0sWWU9ZnVuY3Rpb24oKXt2YXIgdD1FKCksZT1PKCk7ZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PXQmJnZ0KGUpP2UuZm9jdXMoKTpkb2N1bWVudC5hY3RpdmVFbGVtZW50PT09ZSYmdnQodCkmJnQuZm9jdXMoKX0sWmU9ZnVuY3Rpb24odCxlLG4pe1coZS5hbGxvd0VzY2FwZUtleSkmJih0LnByZXZlbnREZWZhdWx0KCksbihLLmVzYykpfSxRZT1mdW5jdGlvbihlLHQsbil7dC5wb3B1cC5vbmNsaWNrPWZ1bmN0aW9uKCl7dmFyIHQ9QnQuaW5uZXJQYXJhbXMuZ2V0KGUpO3Quc2hvd0NvbmZpcm1CdXR0b258fHQuc2hvd0NhbmNlbEJ1dHRvbnx8dC5zaG93Q2xvc2VCdXR0b258fHQuaW5wdXR8fG4oSy5jbG9zZSl9fSwkZT0hMSxKZT1mdW5jdGlvbihlKXtlLnBvcHVwLm9ubW91c2Vkb3duPWZ1bmN0aW9uKCl7ZS5jb250YWluZXIub25tb3VzZXVwPWZ1bmN0aW9uKHQpe2UuY29udGFpbmVyLm9ubW91c2V1cD12b2lkIDAsdC50YXJnZXQ9PT1lLmNvbnRhaW5lciYmKCRlPSEwKX19fSxYZT1mdW5jdGlvbihlKXtlLmNvbnRhaW5lci5vbm1vdXNlZG93bj1mdW5jdGlvbigpe2UucG9wdXAub25tb3VzZXVwPWZ1bmN0aW9uKHQpe2UucG9wdXAub25tb3VzZXVwPXZvaWQgMCx0LnRhcmdldCE9PWUucG9wdXAmJiFlLnBvcHVwLmNvbnRhaW5zKHQudGFyZ2V0KXx8KCRlPSEwKX19fSxHZT1mdW5jdGlvbihuLG8saSl7by5jb250YWluZXIub25jbGljaz1mdW5jdGlvbih0KXt2YXIgZT1CdC5pbm5lclBhcmFtcy5nZXQobik7JGU/JGU9ITE6dC50YXJnZXQ9PT1vLmNvbnRhaW5lciYmVyhlLmFsbG93T3V0c2lkZUNsaWNrKSYmaShLLmJhY2tkcm9wKX19O3ZhciB0bj1mdW5jdGlvbih0LGUsbil7dmFyIG89cSgpO2l0KG8pLGUudGltZXImJih0LnRpbWVvdXQ9bmV3IGJlKGZ1bmN0aW9uKCl7bigidGltZXIiKSxkZWxldGUgdC50aW1lb3V0fSxlLnRpbWVyKSxlLnRpbWVyUHJvZ3Jlc3NCYXImJihvdChvKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50aW1lb3V0LnJ1bm5pbmcmJnN0KGUudGltZXIpfSkpKX0sZW49ZnVuY3Rpb24odCxlKXtpZighZS50b2FzdClyZXR1cm4gVyhlLmFsbG93RW50ZXJLZXkpP2UuZm9jdXNDYW5jZWwmJnZ0KHQuY2FuY2VsQnV0dG9uKT90LmNhbmNlbEJ1dHRvbi5mb2N1cygpOmUuZm9jdXNDb25maXJtJiZ2dCh0LmNvbmZpcm1CdXR0b24pP3QuY29uZmlybUJ1dHRvbi5mb2N1cygpOnZvaWQgRWUoMCwtMSwxKTpubigpfSxubj1mdW5jdGlvbigpe2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJiJmdW5jdGlvbiI9PXR5cGVvZiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXImJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpfTt2YXIgb24scm49ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdFtlXT1uZXcgV2Vha01hcH0sYW49T2JqZWN0LmZyZWV6ZSh7aGlkZUxvYWRpbmc6aWUsZGlzYWJsZUxvYWRpbmc6aWUsZ2V0SW5wdXQ6ZnVuY3Rpb24odCl7dmFyIGU9QnQuaW5uZXJQYXJhbXMuZ2V0KHR8fHRoaXMpLG49QnQuZG9tQ2FjaGUuZ2V0KHR8fHRoaXMpO3JldHVybiBuP0cobi5jb250ZW50LGUuaW5wdXQpOm51bGx9LGNsb3NlOmZlLGNsb3NlUG9wdXA6ZmUsY2xvc2VNb2RhbDpmZSxjbG9zZVRvYXN0OmZlLGVuYWJsZUJ1dHRvbnM6ZnVuY3Rpb24oKXtnZSh0aGlzLFsiY29uZmlybUJ1dHRvbiIsImNhbmNlbEJ1dHRvbiJdLCExKX0sZGlzYWJsZUJ1dHRvbnM6ZnVuY3Rpb24oKXtnZSh0aGlzLFsiY29uZmlybUJ1dHRvbiIsImNhbmNlbEJ1dHRvbiJdLCEwKX0sZW5hYmxlSW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdmUodGhpcy5nZXRJbnB1dCgpLCExKX0sZGlzYWJsZUlucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIHZlKHRoaXMuZ2V0SW5wdXQoKSwhMCl9LHNob3dWYWxpZGF0aW9uTWVzc2FnZTpmdW5jdGlvbih0KXt2YXIgZT1CdC5kb21DYWNoZS5nZXQodGhpcyk7SChlLnZhbGlkYXRpb25NZXNzYWdlLHQpO3ZhciBuPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUucG9wdXApO2UudmFsaWRhdGlvbk1lc3NhZ2Uuc3R5bGUubWFyZ2luTGVmdD0iLSIuY29uY2F0KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1sZWZ0IikpLGUudmFsaWRhdGlvbk1lc3NhZ2Uuc3R5bGUubWFyZ2luUmlnaHQ9Ii0iLmNvbmNhdChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctcmlnaHQiKSksb3QoZS52YWxpZGF0aW9uTWVzc2FnZSk7dmFyIG89dGhpcy5nZXRJbnB1dCgpO28mJihvLnNldEF0dHJpYnV0ZSgiYXJpYS1pbnZhbGlkIiwhMCksby5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkQnkiLFlbInZhbGlkYXRpb24tbWVzc2FnZSJdKSx0dChvKSxtdChvLFkuaW5wdXRlcnJvcikpfSxyZXNldFZhbGlkYXRpb25NZXNzYWdlOmZ1bmN0aW9uKCl7dmFyIHQ9QnQuZG9tQ2FjaGUuZ2V0KHRoaXMpO3QudmFsaWRhdGlvbk1lc3NhZ2UmJml0KHQudmFsaWRhdGlvbk1lc3NhZ2UpO3ZhciBlPXRoaXMuZ2V0SW5wdXQoKTtlJiYoZS5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtaW52YWxpZCIpLGUucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZEJ5IiksaHQoZSxZLmlucHV0ZXJyb3IpKX0sZ2V0UHJvZ3Jlc3NTdGVwczpmdW5jdGlvbigpe3JldHVybiBCdC5kb21DYWNoZS5nZXQodGhpcykucHJvZ3Jlc3NTdGVwc30sX21haW46ZnVuY3Rpb24odCl7SnQodCksWHQuY3VycmVudEluc3RhbmNlJiZYdC5jdXJyZW50SW5zdGFuY2UuX2Rlc3Ryb3koKSxYdC5jdXJyZW50SW5zdGFuY2U9dGhpczt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZT1zKHt9LEd0LnNob3dDbGFzcyx0LnNob3dDbGFzcyksbj1zKHt9LEd0LmhpZGVDbGFzcyx0LmhpZGVDbGFzcyksbz1zKHt9LEd0LHQpO2lmKG8uc2hvd0NsYXNzPWUsby5oaWRlQ2xhc3M9bix0LmFuaW1hdGlvbj09PWZhbHNlKXtvLnNob3dDbGFzcz17cG9wdXA6InN3YWwyLW5vYW5pbWF0aW9uIixiYWNrZHJvcDoic3dhbDItbm9hbmltYXRpb24ifTtvLmhpZGVDbGFzcz17fX1yZXR1cm4gb30odCk7d2UoZSksT2JqZWN0LmZyZWV6ZShlKSxYdC50aW1lb3V0JiYoWHQudGltZW91dC5zdG9wKCksZGVsZXRlIFh0LnRpbWVvdXQpLGNsZWFyVGltZW91dChYdC5yZXN0b3JlRm9jdXNUaW1lb3V0KTt2YXIgbj1mdW5jdGlvbih0KXt2YXIgZT17cG9wdXA6JCgpLGNvbnRhaW5lcjpRKCksY29udGVudDpQKCksYWN0aW9uczpUKCksY29uZmlybUJ1dHRvbjpFKCksY2FuY2VsQnV0dG9uOk8oKSxjbG9zZUJ1dHRvbjpJKCksdmFsaWRhdGlvbk1lc3NhZ2U6UygpLHByb2dyZXNzU3RlcHM6QigpfTtyZXR1cm4gQnQuZG9tQ2FjaGUuc2V0KHQsZSksZX0odGhpcyk7cmV0dXJuIFJ0KHRoaXMsZSksQnQuaW5uZXJQYXJhbXMuc2V0KHRoaXMsZSksZnVuY3Rpb24obixvLGkpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbiB0KGUpe24uY2xvc2VQb3B1cCh7ZGlzbWlzczplfSl9O2RlLnN3YWxQcm9taXNlUmVzb2x2ZS5zZXQobix0KTtvLmNvbmZpcm1CdXR0b24ub25jbGljaz1mdW5jdGlvbigpe3JldHVybiBQZShuLGkpfTtvLmNhbmNlbEJ1dHRvbi5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIEFlKG4sZSl9O28uY2xvc2VCdXR0b24ub25jbGljaz1mdW5jdGlvbigpe3JldHVybiBlKEsuY2xvc2UpfTtPZShuLG8sZSk7U2UobixYdCxpLGUpO2lmKGkudG9hc3QmJihpLmlucHV0fHxpLmZvb3Rlcnx8aS5zaG93Q2xvc2VCdXR0b24pKXttdChkb2N1bWVudC5ib2R5LFlbInRvYXN0LWNvbHVtbiJdKX1lbHNle2h0KGRvY3VtZW50LmJvZHksWVsidG9hc3QtY29sdW1uIl0pfXhlKG4saSk7Q2UoaSk7dG4oWHQsaSxlKTtlbihvLGkpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmNvbnRhaW5lci5zY3JvbGxUb3A9MH0pfSl9KHRoaXMsbixlKX0sdXBkYXRlOmZ1bmN0aW9uKGUpe3ZhciB0PSQoKSxuPUJ0LmlubmVyUGFyYW1zLmdldCh0aGlzKTtpZighdHx8RCh0LG4uaGlkZUNsYXNzLnBvcHVwKSlyZXR1cm4gXygiWW91J3JlIHRyeWluZyB0byB1cGRhdGUgdGhlIGNsb3NlZCBvciBjbG9zaW5nIHBvcHVwLCB0aGF0IHdvbid0IHdvcmsuIFVzZSB0aGUgdXBkYXRlKCkgbWV0aG9kIGluIHByZUNvbmZpcm0gcGFyYW1ldGVyIG9yIHNob3cgYSBuZXcgcG9wdXAuIik7dmFyIG89e307T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtzbi5pc1VwZGF0YWJsZVBhcmFtZXRlcih0KT9vW3RdPWVbdF06XygnSW52YWxpZCBwYXJhbWV0ZXIgdG8gdXBkYXRlOiAiJy5jb25jYXQodCwnIi4gVXBkYXRhYmxlIHBhcmFtcyBhcmUgbGlzdGVkIGhlcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zd2VldGFsZXJ0Mi9zd2VldGFsZXJ0Mi9ibG9iL21hc3Rlci9zcmMvdXRpbHMvcGFyYW1zLmpzJykpfSk7dmFyIGk9cyh7fSxuLG8pO1J0KHRoaXMsaSksQnQuaW5uZXJQYXJhbXMuc2V0KHRoaXMsaSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cGFyYW1zOnt2YWx1ZTpzKHt9LHRoaXMucGFyYW1zLGUpLHdyaXRhYmxlOiExLGVudW1lcmFibGU6ITB9fSl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dmFyIHQ9QnQuZG9tQ2FjaGUuZ2V0KHRoaXMpLGU9QnQuaW5uZXJQYXJhbXMuZ2V0KHRoaXMpO2UmJih0LnBvcHVwJiZYdC5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2smJihYdC5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2soKSxkZWxldGUgWHQuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKSxYdC5kZWZlckRpc3Bvc2FsVGltZXImJihjbGVhclRpbWVvdXQoWHQuZGVmZXJEaXNwb3NhbFRpbWVyKSxkZWxldGUgWHQuZGVmZXJEaXNwb3NhbFRpbWVyKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5vbkRlc3Ryb3kmJmUub25EZXN0cm95KCksZGVsZXRlIHRoaXMucGFyYW1zLGRlbGV0ZSBYdC5rZXlkb3duSGFuZGxlcixkZWxldGUgWHQua2V5ZG93blRhcmdldCxybihCdCkscm4oZGUpKX19KSxjbj1mdW5jdGlvbigpe2Z1bmN0aW9uIHIoKXtpZihhKHRoaXMsciksInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cpeyJ1bmRlZmluZWQiPT10eXBlb2YgUHJvbWlzZSYmRigiVGhpcyBwYWNrYWdlIHJlcXVpcmVzIGEgUHJvbWlzZSBsaWJyYXJ5LCBwbGVhc2UgaW5jbHVkZSBhIHNoaW0gdG8gZW5hYmxlIGl0IGluIHRoaXMgYnJvd3NlciAoU2VlOiBodHRwczovL2dpdGh1Yi5jb20vc3dlZXRhbGVydDIvc3dlZXRhbGVydDIvd2lraS9NaWdyYXRpb24tZnJvbS1Td2VldEFsZXJ0LXRvLVN3ZWV0QWxlcnQyIzEtaWUtc3VwcG9ydCkiKSxvbj10aGlzO2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9bmV3IEFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO3ZhciBvPU9iamVjdC5mcmVlemUodGhpcy5jb25zdHJ1Y3Rvci5hcmdzVG9QYXJhbXMoZSkpO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3BhcmFtczp7dmFsdWU6byx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KTt2YXIgaT10aGlzLl9tYWluKHRoaXMucGFyYW1zKTtCdC5wcm9taXNlLnNldCh0aGlzLGkpfX1yZXR1cm4gYyhyLFt7a2V5OiJ0aGVuIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gQnQucHJvbWlzZS5nZXQodGhpcykudGhlbih0KX19LHtrZXk6ImZpbmFsbHkiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBCdC5wcm9taXNlLmdldCh0aGlzKS5maW5hbGx5KHQpfX1dKSxyfSgpO3MoY24ucHJvdG90eXBlLGFuKSxzKGNuLG9lKSxPYmplY3Qua2V5cyhhbikuZm9yRWFjaChmdW5jdGlvbih0KXtjblt0XT1mdW5jdGlvbigpe2lmKG9uKXJldHVybiBvblt0XS5hcHBseShvbixhcmd1bWVudHMpfX0pLGNuLkRpc21pc3NSZWFzb249Syxjbi52ZXJzaW9uPSI5LjE3LjAiO3ZhciBzbj1jbjtyZXR1cm4gc24uZGVmYXVsdD1zbn0pLHZvaWQgMCE9PXRoaXMmJnRoaXMuU3dlZXRhbGVydDImJih0aGlzLnN3YWw9dGhpcy5zd2VldEFsZXJ0PXRoaXMuU3dhbD10aGlzLlN3ZWV0QWxlcnQ9dGhpcy5Td2VldGFsZXJ0Mik7CiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2lmKGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChuKSxuLnN0eWxlU2hlZXQpbi5zdHlsZVNoZWV0LmRpc2FibGVkfHwobi5zdHlsZVNoZWV0LmNzc1RleHQ9dCk7ZWxzZSB0cnl7bi5pbm5lckhUTUw9dH1jYXRjaChlKXtuLmlubmVyVGV4dD10fX0oZG9jdW1lbnQsIi5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdHtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyO3dpZHRoOmF1dG87cGFkZGluZzouNjI1ZW07b3ZlcmZsb3cteTpoaWRkZW47YmFja2dyb3VuZDojZmZmO2JveC1zaGFkb3c6MCAwIC42MjVlbSAjZDlkOWQ5fS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItaGVhZGVye2ZsZXgtZGlyZWN0aW9uOnJvdztwYWRkaW5nOjB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi10aXRsZXtmbGV4LWdyb3c6MTtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDttYXJnaW46MCAuNmVtO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1mb290ZXJ7bWFyZ2luOi41ZW0gMCAwO3BhZGRpbmc6LjVlbSAwIDA7Zm9udC1zaXplOi44ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1jbG9zZXtwb3NpdGlvbjpzdGF0aWM7d2lkdGg6LjhlbTtoZWlnaHQ6LjhlbTtsaW5lLWhlaWdodDouOH0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWNvbnRlbnR7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnQ7cGFkZGluZzowO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29ue3dpZHRoOjJlbTttaW4td2lkdGg6MmVtO2hlaWdodDoyZW07bWFyZ2luOjB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uIC5zd2FsMi1pY29uLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6MS44ZW07Zm9udC13ZWlnaHQ6NzAwfUBtZWRpYSBhbGwgYW5kICgtbXMtaGlnaC1jb250cmFzdDpub25lKSwoLW1zLWhpZ2gtY29udHJhc3Q6YWN0aXZlKXsuc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24gLnN3YWwyLWljb24tY29udGVudHtmb250LXNpemU6LjI1ZW19fS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIC5zd2FsMi1zdWNjZXNzLXJpbmd7d2lkdGg6MmVtO2hlaWdodDoyZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uLnN3YWwyLWVycm9yIFtjbGFzc149c3dhbDIteC1tYXJrLWxpbmVde3RvcDouODc1ZW07d2lkdGg6MS4zNzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPWxlZnRde2xlZnQ6LjMxMjVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPXJpZ2h0XXtyaWdodDouMzEyNWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItYWN0aW9uc3tmbGV4LWJhc2lzOmF1dG8haW1wb3J0YW50O3dpZHRoOmF1dG87aGVpZ2h0OmF1dG87bWFyZ2luOjAgLjMxMjVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN0eWxlZHttYXJnaW46MCAuMzEyNWVtO3BhZGRpbmc6LjMxMjVlbSAuNjI1ZW07Zm9udC1zaXplOjFlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN0eWxlZDpmb2N1c3tib3gtc2hhZG93OjAgMCAwIDFweCAjZmZmLDAgMCAwIDNweCByZ2JhKDUwLDEwMCwxNTAsLjQpfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2Vzc3tib3JkZXItY29sb3I6I2E1ZGM4Nn0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVde3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEuNmVtO2hlaWdodDozZW07dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7Ym9yZGVyLXJhZGl1czo1MCV9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXVtjbGFzcyQ9bGVmdF17dG9wOi0uOGVtO2xlZnQ6LS41ZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybS1vcmlnaW46MmVtIDJlbTtib3JkZXItcmFkaXVzOjRlbSAwIDAgNGVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZV1bY2xhc3MkPXJpZ2h0XXt0b3A6LS4yNWVtO2xlZnQ6LjkzNzVlbTt0cmFuc2Zvcm0tb3JpZ2luOjAgMS41ZW07Ym9yZGVyLXJhZGl1czowIDRlbSA0ZW0gMH0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgLnN3YWwyLXN1Y2Nlc3MtcmluZ3t3aWR0aDoyZW07aGVpZ2h0OjJlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgLnN3YWwyLXN1Y2Nlc3MtZml4e3RvcDowO2xlZnQ6LjQzNzVlbTt3aWR0aDouNDM3NWVtO2hlaWdodDoyLjY4NzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWxpbmVde2hlaWdodDouMzEyNWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPXRpcF17dG9wOjEuMTI1ZW07bGVmdDouMTg3NWVtO3dpZHRoOi43NWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPWxvbmdde3RvcDouOTM3NWVtO3JpZ2h0Oi4xODc1ZW07d2lkdGg6MS4zNzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWxpbmUtdGlwey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcCAuNzVzO2FuaW1hdGlvbjpzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXAgLjc1c30uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWxpbmUtbG9uZ3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nIC43NXM7YW5pbWF0aW9uOnN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmcgLjc1c30uc3dhbDItcG9wdXAuc3dhbDItdG9hc3Quc3dhbDItc2hvd3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi10b2FzdC1zaG93IC41czthbmltYXRpb246c3dhbDItdG9hc3Qtc2hvdyAuNXN9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0LnN3YWwyLWhpZGV7LXdlYmtpdC1hbmltYXRpb246c3dhbDItdG9hc3QtaGlkZSAuMXMgZm9yd2FyZHM7YW5pbWF0aW9uOnN3YWwyLXRvYXN0LWhpZGUgLjFzIGZvcndhcmRzfS5zd2FsMi1jb250YWluZXJ7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6MTA2MDt0b3A6MDtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7cGFkZGluZzouNjI1ZW07b3ZlcmZsb3cteDpoaWRkZW47dHJhbnNpdGlvbjpiYWNrZ3JvdW5kLWNvbG9yIC4xczstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJhY2tkcm9wLXNob3csLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ub2FuaW1hdGlvbntiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjQpfS5zd2FsMi1jb250YWluZXIuc3dhbDItYmFja2Ryb3AtaGlkZXtiYWNrZ3JvdW5kOjAgMCFpbXBvcnRhbnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3B7YWxpZ24taXRlbXM6ZmxleC1zdGFydH0uc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1sZWZ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLXN0YXJ0e2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7anVzdGlmeS1jb250ZW50OmZsZXgtc3RhcnR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtZW5kLC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLXJpZ2h0e2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVye2FsaWduLWl0ZW1zOmNlbnRlcn0uc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1sZWZ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXN0YXJ0e2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1lbmQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItcmlnaHR7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LWVuZH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbXthbGlnbi1pdGVtczpmbGV4LWVuZH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1sZWZ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXN0YXJ0e2FsaWduLWl0ZW1zOmZsZXgtZW5kO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0fS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1yaWdodHthbGlnbi1pdGVtczpmbGV4LWVuZDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tZW5kPjpmaXJzdC1jaGlsZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1sZWZ0PjpmaXJzdC1jaGlsZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1yaWdodD46Zmlyc3QtY2hpbGQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tc3RhcnQ+OmZpcnN0LWNoaWxkLC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tPjpmaXJzdC1jaGlsZHttYXJnaW4tdG9wOmF1dG99LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWZ1bGxzY3JlZW4+LnN3YWwyLW1vZGFse2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7ZmxleDoxO2FsaWduLXNlbGY6c3RyZXRjaDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1yb3c+LnN3YWwyLW1vZGFse2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7ZmxleDoxO2FsaWduLWNvbnRlbnQ6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbntmbGV4OjE7ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItYm90dG9tLC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItY2VudGVyLC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItdG9we2FsaWduLWl0ZW1zOmNlbnRlcn0uc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWJvdHRvbS1sZWZ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItYm90dG9tLXN0YXJ0LC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItY2VudGVyLWxlZnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1jZW50ZXItc3RhcnQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi10b3AtbGVmdCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLXRvcC1zdGFydHthbGlnbi1pdGVtczpmbGV4LXN0YXJ0fS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItYm90dG9tLWVuZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWJvdHRvbS1yaWdodCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uLnN3YWwyLWNlbnRlci1lbmQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi1jZW50ZXItcmlnaHQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ncm93LWNvbHVtbi5zd2FsMi10b3AtZW5kLC5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4uc3dhbDItdG9wLXJpZ2h0e2FsaWduLWl0ZW1zOmZsZXgtZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1jb2x1bW4+LnN3YWwyLW1vZGFse2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7ZmxleDoxO2FsaWduLWNvbnRlbnQ6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1uby10cmFuc2l0aW9ue3RyYW5zaXRpb246bm9uZSFpbXBvcnRhbnR9LnN3YWwyLWNvbnRhaW5lcjpub3QoLnN3YWwyLXRvcCk6bm90KC5zd2FsMi10b3Atc3RhcnQpOm5vdCguc3dhbDItdG9wLWVuZCk6bm90KC5zd2FsMi10b3AtbGVmdCk6bm90KC5zd2FsMi10b3AtcmlnaHQpOm5vdCguc3dhbDItY2VudGVyLXN0YXJ0KTpub3QoLnN3YWwyLWNlbnRlci1lbmQpOm5vdCguc3dhbDItY2VudGVyLWxlZnQpOm5vdCguc3dhbDItY2VudGVyLXJpZ2h0KTpub3QoLnN3YWwyLWJvdHRvbSk6bm90KC5zd2FsMi1ib3R0b20tc3RhcnQpOm5vdCguc3dhbDItYm90dG9tLWVuZCk6bm90KC5zd2FsMi1ib3R0b20tbGVmdCk6bm90KC5zd2FsMi1ib3R0b20tcmlnaHQpOm5vdCguc3dhbDItZ3Jvdy1mdWxsc2NyZWVuKT4uc3dhbDItbW9kYWx7bWFyZ2luOmF1dG99QG1lZGlhIGFsbCBhbmQgKC1tcy1oaWdoLWNvbnRyYXN0Om5vbmUpLCgtbXMtaGlnaC1jb250cmFzdDphY3RpdmUpey5zd2FsMi1jb250YWluZXIgLnN3YWwyLW1vZGFse21hcmdpbjowIWltcG9ydGFudH19LnN3YWwyLXBvcHVwe2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjpyZWxhdGl2ZTtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpjZW50ZXI7d2lkdGg6MzJlbTttYXgtd2lkdGg6MTAwJTtwYWRkaW5nOjEuMjVlbTtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOi4zMTI1ZW07YmFja2dyb3VuZDojZmZmO2ZvbnQtZmFtaWx5OmluaGVyaXQ7Zm9udC1zaXplOjFyZW19LnN3YWwyLXBvcHVwOmZvY3Vze291dGxpbmU6MH0uc3dhbDItcG9wdXAuc3dhbDItbG9hZGluZ3tvdmVyZmxvdy15OmhpZGRlbn0uc3dhbDItaGVhZGVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmc6MCAxLjhlbX0uc3dhbDItdGl0bGV7cG9zaXRpb246cmVsYXRpdmU7bWF4LXdpZHRoOjEwMCU7bWFyZ2luOjAgMCAuNGVtO3BhZGRpbmc6MDtjb2xvcjojNTk1OTU5O2ZvbnQtc2l6ZToxLjg3NWVtO2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LXRyYW5zZm9ybTpub25lO3dvcmQtd3JhcDpicmVhay13b3JkfS5zd2FsMi1hY3Rpb25ze2Rpc3BsYXk6ZmxleDt6LWluZGV4OjE7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7d2lkdGg6MTAwJTttYXJnaW46MS4yNWVtIGF1dG8gMH0uc3dhbDItYWN0aW9uczpub3QoLnN3YWwyLWxvYWRpbmcpIC5zd2FsMi1zdHlsZWRbZGlzYWJsZWRde29wYWNpdHk6LjR9LnN3YWwyLWFjdGlvbnM6bm90KC5zd2FsMi1sb2FkaW5nKSAuc3dhbDItc3R5bGVkOmhvdmVye2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHJnYmEoMCwwLDAsLjEpLHJnYmEoMCwwLDAsLjEpKX0uc3dhbDItYWN0aW9uczpub3QoLnN3YWwyLWxvYWRpbmcpIC5zd2FsMi1zdHlsZWQ6YWN0aXZle2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHJnYmEoMCwwLDAsLjIpLHJnYmEoMCwwLDAsLjIpKX0uc3dhbDItYWN0aW9ucy5zd2FsMi1sb2FkaW5nIC5zd2FsMi1zdHlsZWQuc3dhbDItY29uZmlybXtib3gtc2l6aW5nOmJvcmRlci1ib3g7d2lkdGg6Mi41ZW07aGVpZ2h0OjIuNWVtO21hcmdpbjouNDY4NzVlbTtwYWRkaW5nOjA7LXdlYmtpdC1hbmltYXRpb246c3dhbDItcm90YXRlLWxvYWRpbmcgMS41cyBsaW5lYXIgMHMgaW5maW5pdGUgbm9ybWFsO2FuaW1hdGlvbjpzd2FsMi1yb3RhdGUtbG9hZGluZyAxLjVzIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWw7Ym9yZGVyOi4yNWVtIHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1yYWRpdXM6MTAwJTtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnQ7Y29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50O2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX0uc3dhbDItYWN0aW9ucy5zd2FsMi1sb2FkaW5nIC5zd2FsMi1zdHlsZWQuc3dhbDItY2FuY2Vse21hcmdpbi1yaWdodDozMHB4O21hcmdpbi1sZWZ0OjMwcHh9LnN3YWwyLWFjdGlvbnMuc3dhbDItbG9hZGluZyA6bm90KC5zd2FsMi1zdHlsZWQpLnN3YWwyLWNvbmZpcm06OmFmdGVye2NvbnRlbnQ6XCJcIjtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxNXB4O2hlaWdodDoxNXB4O21hcmdpbi1sZWZ0OjVweDstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1yb3RhdGUtbG9hZGluZyAxLjVzIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWw7YW5pbWF0aW9uOnN3YWwyLXJvdGF0ZS1sb2FkaW5nIDEuNXMgbGluZWFyIDBzIGluZmluaXRlIG5vcm1hbDtib3JkZXI6M3B4IHNvbGlkICM5OTk7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyLXJpZ2h0LWNvbG9yOnRyYW5zcGFyZW50O2JveC1zaGFkb3c6MXB4IDFweCAxcHggI2ZmZn0uc3dhbDItc3R5bGVke21hcmdpbjouMzEyNWVtO3BhZGRpbmc6LjYyNWVtIDJlbTtib3gtc2hhZG93Om5vbmU7Zm9udC13ZWlnaHQ6NTAwfS5zd2FsMi1zdHlsZWQ6bm90KFtkaXNhYmxlZF0pe2N1cnNvcjpwb2ludGVyfS5zd2FsMi1zdHlsZWQuc3dhbDItY29uZmlybXtib3JkZXI6MDtib3JkZXItcmFkaXVzOi4yNWVtO2JhY2tncm91bmQ6aW5pdGlhbDtiYWNrZ3JvdW5kLWNvbG9yOiMzMDg1ZDY7Y29sb3I6I2ZmZjtmb250LXNpemU6MS4wNjI1ZW19LnN3YWwyLXN0eWxlZC5zd2FsMi1jYW5jZWx7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czouMjVlbTtiYWNrZ3JvdW5kOmluaXRpYWw7YmFja2dyb3VuZC1jb2xvcjojYWFhO2NvbG9yOiNmZmY7Zm9udC1zaXplOjEuMDYyNWVtfS5zd2FsMi1zdHlsZWQ6Zm9jdXN7b3V0bGluZTowO2JveC1zaGFkb3c6MCAwIDAgMXB4ICNmZmYsMCAwIDAgM3B4IHJnYmEoNTAsMTAwLDE1MCwuNCl9LnN3YWwyLXN0eWxlZDo6LW1vei1mb2N1cy1pbm5lcntib3JkZXI6MH0uc3dhbDItZm9vdGVye2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOjEuMjVlbSAwIDA7cGFkZGluZzoxZW0gMCAwO2JvcmRlci10b3A6MXB4IHNvbGlkICNlZWU7Y29sb3I6IzU0NTQ1NDtmb250LXNpemU6MWVtfS5zd2FsMi10aW1lci1wcm9ncmVzcy1iYXItY29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO2hlaWdodDouMjVlbTtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6LjMxMjVlbTtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOi4zMTI1ZW19LnN3YWwyLXRpbWVyLXByb2dyZXNzLWJhcnt3aWR0aDoxMDAlO2hlaWdodDouMjVlbTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjIpfS5zd2FsMi1pbWFnZXttYXgtd2lkdGg6MTAwJTttYXJnaW46MS4yNWVtIGF1dG99LnN3YWwyLWNsb3Nle3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6Mjt0b3A6MDtyaWdodDowO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjEuMmVtO2hlaWdodDoxLjJlbTtwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVuO3RyYW5zaXRpb246Y29sb3IgLjFzIGVhc2Utb3V0O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MDtiYWNrZ3JvdW5kOjAgMDtjb2xvcjojY2NjO2ZvbnQtZmFtaWx5OnNlcmlmO2ZvbnQtc2l6ZToyLjVlbTtsaW5lLWhlaWdodDoxLjI7Y3Vyc29yOnBvaW50ZXJ9LnN3YWwyLWNsb3NlOmhvdmVye3RyYW5zZm9ybTpub25lO2JhY2tncm91bmQ6MCAwO2NvbG9yOiNmMjc0NzR9LnN3YWwyLWNsb3NlOjotbW96LWZvY3VzLWlubmVye2JvcmRlcjowfS5zd2FsMi1jb250ZW50e3otaW5kZXg6MTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjowO3BhZGRpbmc6MCAxLjZlbTtjb2xvcjojNTQ1NDU0O2ZvbnQtc2l6ZToxLjEyNWVtO2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDpub3JtYWw7dGV4dC1hbGlnbjpjZW50ZXI7d29yZC13cmFwOmJyZWFrLXdvcmR9LnN3YWwyLWNoZWNrYm94LC5zd2FsMi1maWxlLC5zd2FsMi1pbnB1dCwuc3dhbDItcmFkaW8sLnN3YWwyLXNlbGVjdCwuc3dhbDItdGV4dGFyZWF7bWFyZ2luOjFlbSBhdXRvfS5zd2FsMi1maWxlLC5zd2FsMi1pbnB1dCwuc3dhbDItdGV4dGFyZWF7Ym94LXNpemluZzpib3JkZXItYm94O3dpZHRoOjEwMCU7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjNzLGJveC1zaGFkb3cgLjNzO2JvcmRlcjoxcHggc29saWQgI2Q5ZDlkOTtib3JkZXItcmFkaXVzOi4xODc1ZW07YmFja2dyb3VuZDppbmhlcml0O2JveC1zaGFkb3c6aW5zZXQgMCAxcHggMXB4IHJnYmEoMCwwLDAsLjA2KTtjb2xvcjppbmhlcml0O2ZvbnQtc2l6ZToxLjEyNWVtfS5zd2FsMi1maWxlLnN3YWwyLWlucHV0ZXJyb3IsLnN3YWwyLWlucHV0LnN3YWwyLWlucHV0ZXJyb3IsLnN3YWwyLXRleHRhcmVhLnN3YWwyLWlucHV0ZXJyb3J7Ym9yZGVyLWNvbG9yOiNmMjc0NzQhaW1wb3J0YW50O2JveC1zaGFkb3c6MCAwIDJweCAjZjI3NDc0IWltcG9ydGFudH0uc3dhbDItZmlsZTpmb2N1cywuc3dhbDItaW5wdXQ6Zm9jdXMsLnN3YWwyLXRleHRhcmVhOmZvY3Vze2JvcmRlcjoxcHggc29saWQgI2I0ZGJlZDtvdXRsaW5lOjA7Ym94LXNoYWRvdzowIDAgM3B4ICNjNGU2ZjV9LnN3YWwyLWZpbGU6Oi1tb3otcGxhY2Vob2xkZXIsLnN3YWwyLWlucHV0OjotbW96LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTo6LW1vei1wbGFjZWhvbGRlcntjb2xvcjojY2NjfS5zd2FsMi1maWxlOi1tcy1pbnB1dC1wbGFjZWhvbGRlciwuc3dhbDItaW5wdXQ6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTotbXMtaW5wdXQtcGxhY2Vob2xkZXJ7Y29sb3I6I2NjY30uc3dhbDItZmlsZTo6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi1pbnB1dDo6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTo6LW1zLWlucHV0LXBsYWNlaG9sZGVye2NvbG9yOiNjY2N9LnN3YWwyLWZpbGU6OnBsYWNlaG9sZGVyLC5zd2FsMi1pbnB1dDo6cGxhY2Vob2xkZXIsLnN3YWwyLXRleHRhcmVhOjpwbGFjZWhvbGRlcntjb2xvcjojY2NjfS5zd2FsMi1yYW5nZXttYXJnaW46MWVtIGF1dG87YmFja2dyb3VuZDojZmZmfS5zd2FsMi1yYW5nZSBpbnB1dHt3aWR0aDo4MCV9LnN3YWwyLXJhbmdlIG91dHB1dHt3aWR0aDoyMCU7Y29sb3I6aW5oZXJpdDtmb250LXdlaWdodDo2MDA7dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLXJhbmdlIGlucHV0LC5zd2FsMi1yYW5nZSBvdXRwdXR7aGVpZ2h0OjIuNjI1ZW07cGFkZGluZzowO2ZvbnQtc2l6ZToxLjEyNWVtO2xpbmUtaGVpZ2h0OjIuNjI1ZW19LnN3YWwyLWlucHV0e2hlaWdodDoyLjYyNWVtO3BhZGRpbmc6MCAuNzVlbX0uc3dhbDItaW5wdXRbdHlwZT1udW1iZXJde21heC13aWR0aDoxMGVtfS5zd2FsMi1maWxle2JhY2tncm91bmQ6aW5oZXJpdDtmb250LXNpemU6MS4xMjVlbX0uc3dhbDItdGV4dGFyZWF7aGVpZ2h0OjYuNzVlbTtwYWRkaW5nOi43NWVtfS5zd2FsMi1zZWxlY3R7bWluLXdpZHRoOjUwJTttYXgtd2lkdGg6MTAwJTtwYWRkaW5nOi4zNzVlbSAuNjI1ZW07YmFja2dyb3VuZDppbmhlcml0O2NvbG9yOmluaGVyaXQ7Zm9udC1zaXplOjEuMTI1ZW19LnN3YWwyLWNoZWNrYm94LC5zd2FsMi1yYWRpb3thbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6aW5oZXJpdH0uc3dhbDItY2hlY2tib3ggbGFiZWwsLnN3YWwyLXJhZGlvIGxhYmVse21hcmdpbjowIC42ZW07Zm9udC1zaXplOjEuMTI1ZW19LnN3YWwyLWNoZWNrYm94IGlucHV0LC5zd2FsMi1yYWRpbyBpbnB1dHttYXJnaW46MCAuNGVtfS5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2V7ZGlzcGxheTpub25lO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3BhZGRpbmc6LjYyNWVtO292ZXJmbG93OmhpZGRlbjtiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6IzY2Njtmb250LXNpemU6MWVtO2ZvbnQtd2VpZ2h0OjMwMH0uc3dhbDItdmFsaWRhdGlvbi1tZXNzYWdlOjpiZWZvcmV7Y29udGVudDpcIiFcIjtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxLjVlbTttaW4td2lkdGg6MS41ZW07aGVpZ2h0OjEuNWVtO21hcmdpbjowIC42MjVlbTtib3JkZXItcmFkaXVzOjUwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmMjc0NzQ7Y29sb3I6I2ZmZjtmb250LXdlaWdodDo2MDA7bGluZS1oZWlnaHQ6MS41ZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLWljb257cG9zaXRpb246cmVsYXRpdmU7Ym94LXNpemluZzpjb250ZW50LWJveDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjVlbTtoZWlnaHQ6NWVtO21hcmdpbjoxLjI1ZW0gYXV0byAxLjg3NWVtO2JvcmRlcjouMjVlbSBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOjUwJTtmb250LWZhbWlseTppbmhlcml0O2xpbmUtaGVpZ2h0OjVlbTtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lOy1tcy11c2VyLXNlbGVjdDpub25lO3VzZXItc2VsZWN0Om5vbmV9LnN3YWwyLWljb24gLnN3YWwyLWljb24tY29udGVudHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtc2l6ZTozLjc1ZW19LnN3YWwyLWljb24uc3dhbDItZXJyb3J7Ym9yZGVyLWNvbG9yOiNmMjc0NzQ7Y29sb3I6I2YyNzQ3NH0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciAuc3dhbDIteC1tYXJre3Bvc2l0aW9uOnJlbGF0aXZlO2ZsZXgtZ3JvdzoxfS5zd2FsMi1pY29uLnN3YWwyLWVycm9yIFtjbGFzc149c3dhbDIteC1tYXJrLWxpbmVde2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7dG9wOjIuMzEyNWVtO3dpZHRoOjIuOTM3NWVtO2hlaWdodDouMzEyNWVtO2JvcmRlci1yYWRpdXM6LjEyNWVtO2JhY2tncm91bmQtY29sb3I6I2YyNzQ3NH0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXVtjbGFzcyQ9bGVmdF17bGVmdDoxLjA2MjVlbTt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXVtjbGFzcyQ9cmlnaHRde3JpZ2h0OjFlbTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9LnN3YWwyLWljb24uc3dhbDItZXJyb3Iuc3dhbDItaWNvbi1zaG93ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXN9LnN3YWwyLWljb24uc3dhbDItZXJyb3Iuc3dhbDItaWNvbi1zaG93IC5zd2FsMi14LW1hcmt7LXdlYmtpdC1hbmltYXRpb246c3dhbDItYW5pbWF0ZS1lcnJvci14LW1hcmsgLjVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLXgtbWFyayAuNXN9LnN3YWwyLWljb24uc3dhbDItd2FybmluZ3tib3JkZXItY29sb3I6I2ZhY2VhODtjb2xvcjojZjhiYjg2fS5zd2FsMi1pY29uLnN3YWwyLWluZm97Ym9yZGVyLWNvbG9yOiM5ZGUwZjY7Y29sb3I6IzNmYzNlZX0uc3dhbDItaWNvbi5zd2FsMi1xdWVzdGlvbntib3JkZXItY29sb3I6I2M5ZGFlMTtjb2xvcjojODdhZGJkfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3N7Ym9yZGVyLWNvbG9yOiNhNWRjODY7Y29sb3I6I2E1ZGM4Nn0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDozLjc1ZW07aGVpZ2h0OjcuNWVtO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO2JvcmRlci1yYWRpdXM6NTAlfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdW2NsYXNzJD1sZWZ0XXt0b3A6LS40Mzc1ZW07bGVmdDotMi4wNjM1ZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybS1vcmlnaW46My43NWVtIDMuNzVlbTtib3JkZXItcmFkaXVzOjcuNWVtIDAgMCA3LjVlbX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXVtjbGFzcyQ9cmlnaHRde3RvcDotLjY4NzVlbTtsZWZ0OjEuODc1ZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpO3RyYW5zZm9ybS1vcmlnaW46MCAzLjc1ZW07Ym9yZGVyLXJhZGl1czowIDcuNWVtIDcuNWVtIDB9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1yaW5ne3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6Mjt0b3A6LS4yNWVtO2xlZnQ6LS4yNWVtO2JveC1zaXppbmc6Y29udGVudC1ib3g7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXI6LjI1ZW0gc29saWQgcmdiYSgxNjUsMjIwLDEzNCwuMyk7Ym9yZGVyLXJhZGl1czo1MCV9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyAuc3dhbDItc3VjY2Vzcy1maXh7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxO3RvcDouNWVtO2xlZnQ6MS42MjVlbTt3aWR0aDouNDM3NWVtO2hlaWdodDo1LjYyNWVtO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXXtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MjtoZWlnaHQ6LjMxMjVlbTtib3JkZXItcmFkaXVzOi4xMjVlbTtiYWNrZ3JvdW5kLWNvbG9yOiNhNWRjODZ9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPXRpcF17dG9wOjIuODc1ZW07bGVmdDouODEyNWVtO3dpZHRoOjEuNTYyNWVtO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWxpbmVdW2NsYXNzJD1sb25nXXt0b3A6Mi4zNzVlbTtyaWdodDouNWVtO3dpZHRoOjIuOTM3NWVtO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzLnN3YWwyLWljb24tc2hvdyAuc3dhbDItc3VjY2Vzcy1saW5lLXRpcHstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXAgLjc1czthbmltYXRpb246c3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwIC43NXN9LnN3YWwyLWljb24uc3dhbDItc3VjY2Vzcy5zd2FsMi1pY29uLXNob3cgLnN3YWwyLXN1Y2Nlc3MtbGluZS1sb25ney13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmcgLjc1czthbmltYXRpb246c3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZyAuNzVzfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmUtcmlnaHR7LXdlYmtpdC1hbmltYXRpb246c3dhbDItcm90YXRlLXN1Y2Nlc3MtY2lyY3VsYXItbGluZSA0LjI1cyBlYXNlLWluO2FuaW1hdGlvbjpzd2FsMi1yb3RhdGUtc3VjY2Vzcy1jaXJjdWxhci1saW5lIDQuMjVzIGVhc2UtaW59LnN3YWwyLXByb2dyZXNzLXN0ZXBze2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW46MCAwIDEuMjVlbTtwYWRkaW5nOjA7YmFja2dyb3VuZDppbmhlcml0O2ZvbnQtd2VpZ2h0OjYwMH0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgbGl7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmV9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwe3otaW5kZXg6MjA7d2lkdGg6MmVtO2hlaWdodDoyZW07Ym9yZGVyLXJhZGl1czoyZW07YmFja2dyb3VuZDojMzA4NWQ2O2NvbG9yOiNmZmY7bGluZS1oZWlnaHQ6MmVtO3RleHQtYWxpZ246Y2VudGVyfS5zd2FsMi1wcm9ncmVzcy1zdGVwcyAuc3dhbDItcHJvZ3Jlc3Mtc3RlcC5zd2FsMi1hY3RpdmUtcHJvZ3Jlc3Mtc3RlcHtiYWNrZ3JvdW5kOiMzMDg1ZDZ9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwLnN3YWwyLWFjdGl2ZS1wcm9ncmVzcy1zdGVwfi5zd2FsMi1wcm9ncmVzcy1zdGVwe2JhY2tncm91bmQ6I2FkZDhlNjtjb2xvcjojZmZmfS5zd2FsMi1wcm9ncmVzcy1zdGVwcyAuc3dhbDItcHJvZ3Jlc3Mtc3RlcC5zd2FsMi1hY3RpdmUtcHJvZ3Jlc3Mtc3RlcH4uc3dhbDItcHJvZ3Jlc3Mtc3RlcC1saW5le2JhY2tncm91bmQ6I2FkZDhlNn0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgLnN3YWwyLXByb2dyZXNzLXN0ZXAtbGluZXt6LWluZGV4OjEwO3dpZHRoOjIuNWVtO2hlaWdodDouNGVtO21hcmdpbjowIC0xcHg7YmFja2dyb3VuZDojMzA4NWQ2fVtjbGFzc149c3dhbDJdey13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudH0uc3dhbDItc2hvd3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi1zaG93IC4zczthbmltYXRpb246c3dhbDItc2hvdyAuM3N9LnN3YWwyLWhpZGV7LXdlYmtpdC1hbmltYXRpb246c3dhbDItaGlkZSAuMTVzIGZvcndhcmRzO2FuaW1hdGlvbjpzd2FsMi1oaWRlIC4xNXMgZm9yd2FyZHN9LnN3YWwyLW5vYW5pbWF0aW9ue3RyYW5zaXRpb246bm9uZX0uc3dhbDItc2Nyb2xsYmFyLW1lYXN1cmV7cG9zaXRpb246YWJzb2x1dGU7dG9wOi05OTk5cHg7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpzY3JvbGx9LnN3YWwyLXJ0bCAuc3dhbDItY2xvc2V7cmlnaHQ6YXV0bztsZWZ0OjB9LnN3YWwyLXJ0bCAuc3dhbDItdGltZXItcHJvZ3Jlc3MtYmFye3JpZ2h0OjA7bGVmdDphdXRvfUBzdXBwb3J0cyAoLW1zLWFjY2VsZXJhdG9yOnRydWUpey5zd2FsMi1yYW5nZSBpbnB1dHt3aWR0aDoxMDAlIWltcG9ydGFudH0uc3dhbDItcmFuZ2Ugb3V0cHV0e2Rpc3BsYXk6bm9uZX19QG1lZGlhIGFsbCBhbmQgKC1tcy1oaWdoLWNvbnRyYXN0Om5vbmUpLCgtbXMtaGlnaC1jb250cmFzdDphY3RpdmUpey5zd2FsMi1yYW5nZSBpbnB1dHt3aWR0aDoxMDAlIWltcG9ydGFudH0uc3dhbDItcmFuZ2Ugb3V0cHV0e2Rpc3BsYXk6bm9uZX19QC1tb3otZG9jdW1lbnQgdXJsLXByZWZpeCgpey5zd2FsMi1jbG9zZTpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCByZ2JhKDUwLDEwMCwxNTAsLjQpfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItdG9hc3Qtc2hvd3swJXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtLjYyNWVtKSByb3RhdGVaKDJkZWcpfTMzJXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSByb3RhdGVaKC0yZGVnKX02NiV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLjMxMjVlbSkgcm90YXRlWigyZGVnKX0xMDAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooMCl9fUBrZXlmcmFtZXMgc3dhbDItdG9hc3Qtc2hvd3swJXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtLjYyNWVtKSByb3RhdGVaKDJkZWcpfTMzJXt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSByb3RhdGVaKC0yZGVnKX02NiV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLjMxMjVlbSkgcm90YXRlWigyZGVnKX0xMDAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooMCl9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi10b2FzdC1oaWRlezEwMCV7dHJhbnNmb3JtOnJvdGF0ZVooMWRlZyk7b3BhY2l0eTowfX1Aa2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWhpZGV7MTAwJXt0cmFuc2Zvcm06cm90YXRlWigxZGVnKTtvcGFjaXR5OjB9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXB7MCV7dG9wOi41NjI1ZW07bGVmdDouMDYyNWVtO3dpZHRoOjB9NTQle3RvcDouMTI1ZW07bGVmdDouMTI1ZW07d2lkdGg6MH03MCV7dG9wOi42MjVlbTtsZWZ0Oi0uMjVlbTt3aWR0aDoxLjYyNWVtfTg0JXt0b3A6MS4wNjI1ZW07bGVmdDouNzVlbTt3aWR0aDouNWVtfTEwMCV7dG9wOjEuMTI1ZW07bGVmdDouMTg3NWVtO3dpZHRoOi43NWVtfX1Aa2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcHswJXt0b3A6LjU2MjVlbTtsZWZ0Oi4wNjI1ZW07d2lkdGg6MH01NCV7dG9wOi4xMjVlbTtsZWZ0Oi4xMjVlbTt3aWR0aDowfTcwJXt0b3A6LjYyNWVtO2xlZnQ6LS4yNWVtO3dpZHRoOjEuNjI1ZW19ODQle3RvcDoxLjA2MjVlbTtsZWZ0Oi43NWVtO3dpZHRoOi41ZW19MTAwJXt0b3A6MS4xMjVlbTtsZWZ0Oi4xODc1ZW07d2lkdGg6Ljc1ZW19fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nezAle3RvcDoxLjYyNWVtO3JpZ2h0OjEuMzc1ZW07d2lkdGg6MH02NSV7dG9wOjEuMjVlbTtyaWdodDouOTM3NWVtO3dpZHRoOjB9ODQle3RvcDouOTM3NWVtO3JpZ2h0OjA7d2lkdGg6MS4xMjVlbX0xMDAle3RvcDouOTM3NWVtO3JpZ2h0Oi4xODc1ZW07d2lkdGg6MS4zNzVlbX19QGtleWZyYW1lcyBzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nezAle3RvcDoxLjYyNWVtO3JpZ2h0OjEuMzc1ZW07d2lkdGg6MH02NSV7dG9wOjEuMjVlbTtyaWdodDouOTM3NWVtO3dpZHRoOjB9ODQle3RvcDouOTM3NWVtO3JpZ2h0OjA7d2lkdGg6MS4xMjVlbX0xMDAle3RvcDouOTM3NWVtO3JpZ2h0Oi4xODc1ZW07d2lkdGg6MS4zNzVlbX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXNob3d7MCV7dHJhbnNmb3JtOnNjYWxlKC43KX00NSV7dHJhbnNmb3JtOnNjYWxlKDEuMDUpfTgwJXt0cmFuc2Zvcm06c2NhbGUoLjk1KX0xMDAle3RyYW5zZm9ybTpzY2FsZSgxKX19QGtleWZyYW1lcyBzd2FsMi1zaG93ezAle3RyYW5zZm9ybTpzY2FsZSguNyl9NDUle3RyYW5zZm9ybTpzY2FsZSgxLjA1KX04MCV7dHJhbnNmb3JtOnNjYWxlKC45NSl9MTAwJXt0cmFuc2Zvcm06c2NhbGUoMSl9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1oaWRlezAle3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5OjF9MTAwJXt0cmFuc2Zvcm06c2NhbGUoLjUpO29wYWNpdHk6MH19QGtleWZyYW1lcyBzd2FsMi1oaWRlezAle3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5OjF9MTAwJXt0cmFuc2Zvcm06c2NhbGUoLjUpO29wYWNpdHk6MH19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcHswJXt0b3A6MS4xODc1ZW07bGVmdDouMDYyNWVtO3dpZHRoOjB9NTQle3RvcDoxLjA2MjVlbTtsZWZ0Oi4xMjVlbTt3aWR0aDowfTcwJXt0b3A6Mi4xODc1ZW07bGVmdDotLjM3NWVtO3dpZHRoOjMuMTI1ZW19ODQle3RvcDozZW07bGVmdDoxLjMxMjVlbTt3aWR0aDoxLjA2MjVlbX0xMDAle3RvcDoyLjgxMjVlbTtsZWZ0Oi44MTI1ZW07d2lkdGg6MS41NjI1ZW19fUBrZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwezAle3RvcDoxLjE4NzVlbTtsZWZ0Oi4wNjI1ZW07d2lkdGg6MH01NCV7dG9wOjEuMDYyNWVtO2xlZnQ6LjEyNWVtO3dpZHRoOjB9NzAle3RvcDoyLjE4NzVlbTtsZWZ0Oi0uMzc1ZW07d2lkdGg6My4xMjVlbX04NCV7dG9wOjNlbTtsZWZ0OjEuMzEyNWVtO3dpZHRoOjEuMDYyNWVtfTEwMCV7dG9wOjIuODEyNWVtO2xlZnQ6LjgxMjVlbTt3aWR0aDoxLjU2MjVlbX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmd7MCV7dG9wOjMuMzc1ZW07cmlnaHQ6Mi44NzVlbTt3aWR0aDowfTY1JXt0b3A6My4zNzVlbTtyaWdodDoyLjg3NWVtO3dpZHRoOjB9ODQle3RvcDoyLjE4NzVlbTtyaWdodDowO3dpZHRoOjMuNDM3NWVtfTEwMCV7dG9wOjIuMzc1ZW07cmlnaHQ6LjVlbTt3aWR0aDoyLjkzNzVlbX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nezAle3RvcDozLjM3NWVtO3JpZ2h0OjIuODc1ZW07d2lkdGg6MH02NSV7dG9wOjMuMzc1ZW07cmlnaHQ6Mi44NzVlbTt3aWR0aDowfTg0JXt0b3A6Mi4xODc1ZW07cmlnaHQ6MDt3aWR0aDozLjQzNzVlbX0xMDAle3RvcDoyLjM3NWVtO3JpZ2h0Oi41ZW07d2lkdGg6Mi45Mzc1ZW19fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1yb3RhdGUtc3VjY2Vzcy1jaXJjdWxhci1saW5lezAle3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX01JXt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9MTIle3RyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyl9MTAwJXt0cmFuc2Zvcm06cm90YXRlKC00MDVkZWcpfX1Aa2V5ZnJhbWVzIHN3YWwyLXJvdGF0ZS1zdWNjZXNzLWNpcmN1bGFyLWxpbmV7MCV7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTUle3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0xMiV7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX0xMDAle3RyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyl9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1hbmltYXRlLWVycm9yLXgtbWFya3swJXttYXJnaW4tdG9wOjEuNjI1ZW07dHJhbnNmb3JtOnNjYWxlKC40KTtvcGFjaXR5OjB9NTAle21hcmdpbi10b3A6MS42MjVlbTt0cmFuc2Zvcm06c2NhbGUoLjQpO29wYWNpdHk6MH04MCV7bWFyZ2luLXRvcDotLjM3NWVtO3RyYW5zZm9ybTpzY2FsZSgxLjE1KX0xMDAle21hcmdpbi10b3A6MDt0cmFuc2Zvcm06c2NhbGUoMSk7b3BhY2l0eToxfX1Aa2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtZXJyb3IteC1tYXJrezAle21hcmdpbi10b3A6MS42MjVlbTt0cmFuc2Zvcm06c2NhbGUoLjQpO29wYWNpdHk6MH01MCV7bWFyZ2luLXRvcDoxLjYyNWVtO3RyYW5zZm9ybTpzY2FsZSguNCk7b3BhY2l0eTowfTgwJXttYXJnaW4tdG9wOi0uMzc1ZW07dHJhbnNmb3JtOnNjYWxlKDEuMTUpfTEwMCV7bWFyZ2luLXRvcDowO3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1hbmltYXRlLWVycm9yLWljb257MCV7dHJhbnNmb3JtOnJvdGF0ZVgoMTAwZGVnKTtvcGFjaXR5OjB9MTAwJXt0cmFuc2Zvcm06cm90YXRlWCgwKTtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1lcnJvci1pY29uezAle3RyYW5zZm9ybTpyb3RhdGVYKDEwMGRlZyk7b3BhY2l0eTowfTEwMCV7dHJhbnNmb3JtOnJvdGF0ZVgoMCk7b3BhY2l0eToxfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItcm90YXRlLWxvYWRpbmd7MCV7dHJhbnNmb3JtOnJvdGF0ZSgwKX0xMDAle3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19QGtleWZyYW1lcyBzd2FsMi1yb3RhdGUtbG9hZGluZ3swJXt0cmFuc2Zvcm06cm90YXRlKDApfTEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1ib2R5LnN3YWwyLXNob3duOm5vdCguc3dhbDItbm8tYmFja2Ryb3ApOm5vdCguc3dhbDItdG9hc3Qtc2hvd24pe292ZXJmbG93OmhpZGRlbn1ib2R5LnN3YWwyLWhlaWdodC1hdXRve2hlaWdodDphdXRvIWltcG9ydGFudH1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXJ7dG9wOmF1dG87cmlnaHQ6YXV0bztib3R0b206YXV0bztsZWZ0OmF1dG87bWF4LXdpZHRoOmNhbGMoMTAwJSAtIC42MjVlbSAqIDIpO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50fWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lcj4uc3dhbDItbW9kYWx7Ym94LXNoYWRvdzowIDAgMTBweCByZ2JhKDAsMCwwLC40KX1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9we3RvcDowO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtbGVmdCxib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLXN0YXJ0e3RvcDowO2xlZnQ6MH1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLWVuZCxib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLXJpZ2h0e3RvcDowO3JpZ2h0OjB9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlcnt0b3A6NTAlO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKX1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWxlZnQsYm9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1zdGFydHt0b3A6NTAlO2xlZnQ6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKX1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWVuZCxib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXJpZ2h0e3RvcDo1MCU7cmlnaHQ6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKX1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9te2JvdHRvbTowO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpfWJvZHkuc3dhbDItbm8tYmFja2Ryb3AgLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tbGVmdCxib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXN0YXJ0e2JvdHRvbTowO2xlZnQ6MH1ib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZCxib2R5LnN3YWwyLW5vLWJhY2tkcm9wIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXJpZ2h0e3JpZ2h0OjA7Ym90dG9tOjB9QG1lZGlhIHByaW50e2JvZHkuc3dhbDItc2hvd246bm90KC5zd2FsMi1uby1iYWNrZHJvcCk6bm90KC5zd2FsMi10b2FzdC1zaG93bil7b3ZlcmZsb3cteTpzY3JvbGwhaW1wb3J0YW50fWJvZHkuc3dhbDItc2hvd246bm90KC5zd2FsMi1uby1iYWNrZHJvcCk6bm90KC5zd2FsMi10b2FzdC1zaG93bik+W2FyaWEtaGlkZGVuPXRydWVde2Rpc3BsYXk6bm9uZX1ib2R5LnN3YWwyLXNob3duOm5vdCguc3dhbDItbm8tYmFja2Ryb3ApOm5vdCguc3dhbDItdG9hc3Qtc2hvd24pIC5zd2FsMi1jb250YWluZXJ7cG9zaXRpb246c3RhdGljIWltcG9ydGFudH19Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcHt0b3A6MDtyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtZW5kLGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtcmlnaHR7dG9wOjA7cmlnaHQ6MDtib3R0b206YXV0bztsZWZ0OmF1dG99Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1sZWZ0LGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3Atc3RhcnR7dG9wOjA7cmlnaHQ6YXV0bztib3R0b206YXV0bztsZWZ0OjB9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1sZWZ0LGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItc3RhcnR7dG9wOjUwJTtyaWdodDphdXRvO2JvdHRvbTphdXRvO2xlZnQ6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVye3RvcDo1MCU7cmlnaHQ6YXV0bztib3R0b206YXV0bztsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSl9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1lbmQsYm9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1yaWdodHt0b3A6NTAlO3JpZ2h0OjA7Ym90dG9tOmF1dG87bGVmdDphdXRvO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tbGVmdCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXN0YXJ0e3RvcDphdXRvO3JpZ2h0OmF1dG87Ym90dG9tOjA7bGVmdDowfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b217dG9wOmF1dG87cmlnaHQ6YXV0bztib3R0b206MDtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXJpZ2h0e3RvcDphdXRvO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDphdXRvfWJvZHkuc3dhbDItdG9hc3QtY29sdW1uIC5zd2FsMi10b2FzdHtmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6c3RyZXRjaH1ib2R5LnN3YWwyLXRvYXN0LWNvbHVtbiAuc3dhbDItdG9hc3QgLnN3YWwyLWFjdGlvbnN7ZmxleDoxO2FsaWduLXNlbGY6c3RyZXRjaDtoZWlnaHQ6Mi4yZW07bWFyZ2luLXRvcDouMzEyNWVtfWJvZHkuc3dhbDItdG9hc3QtY29sdW1uIC5zd2FsMi10b2FzdCAuc3dhbDItbG9hZGluZ3tqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfWJvZHkuc3dhbDItdG9hc3QtY29sdW1uIC5zd2FsMi10b2FzdCAuc3dhbDItaW5wdXR7aGVpZ2h0OjJlbTttYXJnaW46LjMxMjVlbSBhdXRvO2ZvbnQtc2l6ZToxZW19Ym9keS5zd2FsMi10b2FzdC1jb2x1bW4gLnN3YWwyLXRvYXN0IC5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2V7Zm9udC1zaXplOjFlbX0iKTs="}]},{"name":"【玩的嗨】VIP工具箱,全网VIP视频免费破解去广告,一站式音乐搜索下载,获取B站封面,上学吧答案获取等众多功能聚合 2020-06-01 更新，报错请及时反馈","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["shangxueba365.com","api.wandhi.com"],"orig_excludes":["*://*.wandhi.com/*"],"orig_includes":["*://m.youku.com/v*","*://m.youku.com/a*","*://v.youku.com/v_*","*://*.iqiyi.com/v_*","*://*.iqiyi.com/w_*","*://*.iqiyi.com/a_*","*://*.iqiyi.com/adv*","*://*.le.com/ptv/vplay/*","*v.qq.com/x/cover/*","*v.qq.com/x/page/*","*v.qq.com/*play*","*v.qq.com/cover*","*://*.tudou.com/listplay/*","*://*.tudou.com/albumplay/*","*://*.tudou.com/programs/view/*","*://*.tudou.com/v*","*://*.mgtv.com/b/*","*://film.sohu.com/album/*","*://tv.sohu.com/v/*","*://*.acfun.cn/v/*","*://*.bilibili.com/video/*","*://*.bilibili.com/anime/*","*://*.bilibili.com/bangumi/play/*","*://*.pptv.com/show/*","*://*.baofeng.com/play/*","*://*.wasu.cn/Play/show*","*://v.yinyuetai.com/video/*","*://v.yinyuetai.com/playlist/*","*://*.wasu.cn/Play/show/*","*://music.taihe.com/song*","*://item.taobao.com/*","*://detail.tmall.com/*","*://detail.tmall.hk/*","*://item.jd.com/*","*://music.163.com/song*","*://music.163.com/m/song*","*://y.qq.com/*","*://*.kugou.com/*","*://*.kuwo.cn/*","*://*.xiami.com/*","*://music.taihe.com/*","*://*.1ting.com/player*","*://www.qingting.fm/*","*://www.lizhi.fm/*","*://music.migu.cn/*","*://www.shangxueba.com/ask/*.html","*://www.ximalaya.com/*","*://www.shangxueba.com/ask/*.html","*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s/*","*://yun.baidu.com/s/*","*://pan.baidu.com/share/link*","*://yun.baidu.com/share/link*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1591001487038,"data":{}},"enabled":false,"position":4,"file_url":"https://greasyfork.org/scripts/384538-%E7%8E%A9%E7%9A%84%E5%97%A8-vip%E5%B7%A5%E5%85%B7%E7%AE%B1-%E5%85%A8%E7%BD%91vip%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A-%E4%B8%80%E7%AB%99%E5%BC%8F%E9%9F%B3%E4%B9%90%E6%90%9C%E7%B4%A2%E4%B8%8B%E8%BD%BD-%E8%8E%B7%E5%8F%96b%E7%AB%99%E5%B0%81%E9%9D%A2-%E4%B8%8A%E5%AD%A6%E5%90%A7%E7%AD%94%E6%A1%88%E8%8E%B7%E5%8F%96%E7%AD%89%E4%BC%97%E5%A4%9A%E5%8A%9F%E8%83%BD%E8%81%9A%E5%90%88-2020-06-01-%E6%9B%B4%E6%96%B0-%E6%8A%A5%E9%94%99%E8%AF%B7%E5%8F%8A%E6%97%B6%E5%8F%8D%E9%A6%88/code/%E3%80%90%E7%8E%A9%E7%9A%84%E5%97%A8%E3%80%91VIP%E5%B7%A5%E5%85%B7%E7%AE%B1,%E5%85%A8%E7%BD%91VIP%E8%A7%86%E9%A2%91%E5%85%8D%E8%B4%B9%E7%A0%B4%E8%A7%A3%E5%8E%BB%E5%B9%BF%E5%91%8A,%E4%B8%80%E7%AB%99%E5%BC%8F%E9%9F%B3%E4%B9%90%E6%90%9C%E7%B4%A2%E4%B8%8B%E8%BD%BD,%E8%8E%B7%E5%8F%96B%E7%AB%99%E5%B0%81%E9%9D%A2,%E4%B8%8A%E5%AD%A6%E5%90%A7%E7%AD%94%E6%A1%88%E8%8E%B7%E5%8F%96%E7%AD%89%E4%BC%97%E5%A4%9A%E5%8A%9F%E8%83%BD%E8%81%9A%E5%90%88%202020-06-01%20%E6%9B%B4%E6%96%B0%EF%BC%8C%E6%8A%A5%E9%94%99%E8%AF%B7%E5%8F%8A%E6%97%B6%E5%8F%8D%E9%A6%88.user.js","uuid":"412a8e03-cbd2-48ac-baa9-ec376176780a","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDjgJDnjqnnmoTll6jjgJFWSVDlt6XlhbfnrrEs5YWo572RVklQ6KeG6aKR5YWN6LS556C06Kej5Y675bm/5ZGKLOS4gOermeW8j+mfs+S5kOaQnOe0ouS4i+i9vSzojrflj5ZC56uZ5bCB6Z2iLOS4iuWtpuWQp+etlOahiOiOt+WPluetieS8l+WkmuWKn+iDveiBmuWQiCAyMDIwLTA2LTAxIOabtOaWsO+8jOaKpemUmeivt+WPiuaXtuWPjemmiAovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly93d3cud2FuZGhpLmNvbS8KLy8gQHZlcnNpb24gICAgICA0LjIuMQovLyBAaG9tZXBhZ2UgICAgIGh0dHBzOi8vdG9vbHMud2FuZGhpLmNvbS9zY3JpcHRzCi8vIEBzdXBwb3J0VVJMICAgaHR0cHM6Ly93aWtpLndhbmRoaS5jb20vCi8vIEBkZXNjcmlwdGlvbiAg5Yqf6IO95LuL57uN77yaMeOAgVZpcOinhumikeino+aekO+8mzLjgIHkuIDnq5nlvI/pn7PkuZDmkJzntKLop6PlhrPmlrnmoYjvvJsz44CBYmlsaWJpbGnop4bpopHlsIHpnaLojrflj5bvvJs044CB5LiK5a2m5ZCn562U5qGI5p+l6K+iKOaOpeWPo+WBtuWwlOaKvemjjinvvJs144CB5ZWG5ZOB5Y6G5Y+y5Lu35qC85bGV56S6KOS4gOasoeaAp+WRiuWIq+iZmuWBh+mZjeS7tynvvJs244CB5LyY5oOg5Yi45p+l6K+iCi8vIEBhdXRob3IgICAgICAgTWF4WmhhbmcKLy8gQGljb24gICAgICAgICBodHRwOi8vd3d3LndhbmRoaS5jb20vL2Zhdmljb24uaWNvCi8vIEBpbmNsdWRlICAgICAgKjovL20ueW91a3UuY29tL3YqCi8vIEBpbmNsdWRlICAgICAgKjovL20ueW91a3UuY29tL2EqCi8vIEBpbmNsdWRlICAgICAgKjovL3YueW91a3UuY29tL3ZfKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmlxaXlpLmNvbS92XyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5pcWl5aS5jb20vd18qCi8vIEBpbmNsdWRlICAgICAgKjovLyouaXFpeWkuY29tL2FfKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmlxaXlpLmNvbS9hZHYqCi8vIEBpbmNsdWRlICAgICAgKjovLyoubGUuY29tL3B0di92cGxheS8qCi8vIEBpbmNsdWRlICAgICAgKnYucXEuY29tL3gvY292ZXIvKgovLyBAaW5jbHVkZSAgICAgICp2LnFxLmNvbS94L3BhZ2UvKgovLyBAaW5jbHVkZSAgICAgICp2LnFxLmNvbS8qcGxheSoKLy8gQGluY2x1ZGUgICAgICAqdi5xcS5jb20vY292ZXIqCi8vIEBpbmNsdWRlICAgICAgKjovLyoudHVkb3UuY29tL2xpc3RwbGF5LyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi50dWRvdS5jb20vYWxidW1wbGF5LyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi50dWRvdS5jb20vcHJvZ3JhbXMvdmlldy8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoudHVkb3UuY29tL3YqCi8vIEBpbmNsdWRlICAgICAgKjovLyoubWd0di5jb20vYi8qCi8vIEBpbmNsdWRlICAgICAgKjovL2ZpbG0uc29odS5jb20vYWxidW0vKgovLyBAaW5jbHVkZSAgICAgICo6Ly90di5zb2h1LmNvbS92LyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5hY2Z1bi5jbi92LyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi5iaWxpYmlsaS5jb20vdmlkZW8vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmJpbGliaWxpLmNvbS9hbmltZS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyouYmlsaWJpbGkuY29tL2Jhbmd1bWkvcGxheS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoucHB0di5jb20vc2hvdy8qCi8vIEBpbmNsdWRlICAgICAgKjovLyouYmFvZmVuZy5jb20vcGxheS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoud2FzdS5jbi9QbGF5L3Nob3cqCi8vIEBpbmNsdWRlICAgICAgKjovL3YueWlueXVldGFpLmNvbS92aWRlby8qCi8vIEBpbmNsdWRlICAgICAgKjovL3YueWlueXVldGFpLmNvbS9wbGF5bGlzdC8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoud2FzdS5jbi9QbGF5L3Nob3cvKgovLyBAaW5jbHVkZSAgICAgICo6Ly9tdXNpYy50YWloZS5jb20vc29uZyoKLy8gQGluY2x1ZGUgICAgICAqOi8vaXRlbS50YW9iYW8uY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vZGV0YWlsLnRtYWxsLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovL2RldGFpbC50bWFsbC5oay8qCi8vIEBpbmNsdWRlICAgICAgKjovL2l0ZW0uamQuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vbXVzaWMuMTYzLmNvbS9zb25nKgovLyBAaW5jbHVkZSAgICAgICo6Ly9tdXNpYy4xNjMuY29tL20vc29uZyoKLy8gQGluY2x1ZGUgICAgICAqOi8veS5xcS5jb20vKgovLyBAaW5jbHVkZSAgICAgICo6Ly8qLmt1Z291LmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoua3V3by5jbi8qCi8vIEBpbmNsdWRlICAgICAgKjovLyoueGlhbWkuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vbXVzaWMudGFpaGUuY29tLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vKi4xdGluZy5jb20vcGxheWVyKgovLyBAaW5jbHVkZSAgICAgICo6Ly93d3cucWluZ3RpbmcuZm0vKgovLyBAaW5jbHVkZSAgICAgICo6Ly93d3cubGl6aGkuZm0vKgovLyBAaW5jbHVkZSAgICAgICo6Ly9tdXNpYy5taWd1LmNuLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vd3d3LnNoYW5neHVlYmEuY29tL2Fzay8qLmh0bWwKLy8gQGluY2x1ZGUgICAgICAqOi8vd3d3LnhpbWFsYXlhLmNvbS8qCi8vIEBpbmNsdWRlICAgICAgKjovL3d3dy5zaGFuZ3h1ZWJhLmNvbS9hc2svKi5odG1sCi8vIEBpbmNsdWRlICAgICAgKjovL3Bhbi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAaW5jbHVkZSAgICAgICo6Ly95dW4uYmFpZHUuY29tL2Rpc2svaG9tZSoKLy8gQGluY2x1ZGUgICAgICAqOi8vcGFuLmJhaWR1LmNvbS9zLyoKLy8gQGluY2x1ZGUgICAgICAqOi8veXVuLmJhaWR1LmNvbS9zLyoKLy8gQGluY2x1ZGUgICAgICAqOi8vcGFuLmJhaWR1LmNvbS9zaGFyZS9saW5rKgovLyBAaW5jbHVkZSAgICAgICo6Ly95dW4uYmFpZHUuY29tL3NoYXJlL2xpbmsqCi8vIEBleGNsdWRlICAgICAgKjovLyoud2FuZGhpLmNvbS8qCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9saWIuYmFvbWl0dS5jb20vanF1ZXJ5LzEuMTIuNC9qcXVlcnkubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9zd2VldGFsZXJ0MkA5LjE0LjAvZGlzdC9zd2VldGFsZXJ0Mi5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2xpYi5iYW9taXR1LmNvbS9lY2hhcnRzLzQuNi4wL2VjaGFydHMubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9saWIuYmFvbWl0dS5jb20vbGF5ZXIvMi4zL2xheWVyLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9saWIuYmFvbWl0dS5jb20vcmVmbGVjdC1tZXRhZGF0YS8wLjEuMTMvUmVmbGVjdC5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3Z1ZUAyLjYuMTEvZGlzdC92dWUubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS92dWV4QDMuNC4wL2Rpc3QvdnVleC5taW4uanMKLy8gQGxpY2Vuc2UgICAgICBNSVQKLy8gQGdyYW50ICAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1lbmQKLy8gQGNvbm5lY3QgICAgICBzaGFuZ3h1ZWJhMzY1LmNvbQovLyBAY29ubmVjdCAgICAgIGFwaS53YW5kaGkuY29tCi8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICBHTV9pbmZvCi8vIEBncmFudCAgICAgICAgR00uYWRkU3R5bGUKLy8gQGdyYW50ICAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fbm90aWZpY2F0aW9uCi8vIEBncmFudCAgICAgICAgR01fb3BlbkluVGFiCi8vIEBncmFudCAgICAgICAgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50ICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kCi8vIEBncmFudCAgICAgICAgR01fdW5yZWdpc3Rlck1lbnVDb21tYW5kCi8vID09L1VzZXJTY3JpcHQ9PQooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShyZXF1aXJlKCd2dWUnKSwgcmVxdWlyZSgncmVmbGVjdC1tZXRhZGF0YScpKSA6CiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWyd2dWUnLCAncmVmbGVjdC1tZXRhZGF0YSddLCBmYWN0b3J5KSA6CiAgICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGZhY3RvcnkoZ2xvYmFsLlZ1ZSkpOwp9KHRoaXMsIChmdW5jdGlvbiAoVnVlKSB7ICd1c2Ugc3RyaWN0JzsKCiAgICBWdWUgPSBWdWUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFZ1ZSwgJ2RlZmF1bHQnKSA/IFZ1ZVsnZGVmYXVsdCddIDogVnVlOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovCiAgICAvKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqLwoKICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikgewogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKICAgIH07CgogICAgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHsKICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwogICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQogICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7CiAgICAgICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDsKICAgICAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJvYmplY3QiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSAiZnVuY3Rpb24iKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7CiAgICAgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjsKICAgICAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwogICAgfQoKICAgIGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHsKICAgICAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJvYmplY3QiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSAiZnVuY3Rpb24iKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7CiAgICB9CgogICAgdmFyIFRvYXN0ID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBUb2FzdChtc2csIHRpdGxlLCB0eXBlKSB7CiAgICAgICAgICAgIHRoaXMuY3JlYXRpb25UaW1lID0gbmV3IERhdGU7CiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1zZzsKICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTsKICAgICAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlOwogICAgICAgICAgICB0aGlzLmR1cmF0aW9uID0gM2UzOwogICAgICAgICAgICB0aGlzLnJhbmRvbUtleSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiArIDEpKTsKICAgICAgICB9CiAgICAgICAgVG9hc3QucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIFRvYXN0LmNvbnRhaW5lclZNLmNhcmRzLnNwbGljZSgwLCAwLCB0aGlzKTsKICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmR1cmF0aW9uICE9IC0xKSB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmRpc21pc3MoKTsgfSwgdGhpcy5kdXJhdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIFRvYXN0LnByb3RvdHlwZS5kaXNtaXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoVG9hc3QuY29udGFpbmVyVk0uY2FyZHMuaW5jbHVkZXModGhpcykpIHsKICAgICAgICAgICAgICAgIFRvYXN0LmNvbnRhaW5lclZNLmNhcmRzLnNwbGljZShUb2FzdC5jb250YWluZXJWTS5jYXJkcy5pbmRleE9mKHRoaXMpLCAxKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRvYXN0LnByb3RvdHlwZSwgImVsZW1lbnQiLCB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuICQoIi50b2FzdC1jYXJkW2RhdGEta2V5PSciICsgdGhpcy5rZXkgKyAiJ10iKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUb2FzdC5wcm90b3R5cGUsICJrZXkiLCB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRpb25UaW1lLnRvSVNPU3RyaW5nKCkgKyAoIlsiICsgdGhpcy5yYW5kb21LZXkgKyAiXSIpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRvYXN0LCAiY29udGFpbmVyVk0iLCB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICBUb2FzdC5jcmVhdGVUb2FzdENvbnRhaW5lcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIFRvYXN0LmNyZWF0ZVRvYXN0Q29udGFpbmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi50b2FzdC1jYXJkLWNvbnRhaW5lciIpKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwgIjx0cmFuc2l0aW9uLWdyb3VwIGNsYXNzPVwidG9hc3QtY2FyZC1jb250YWluZXJcIiBuYW1lPVwidG9hc3QtY2FyZC1jb250YWluZXJcIiB0YWc9XCJkaXZcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRvYXN0LWNhcmQgdi1mb3I9XCJjYXJkIG9mIGNhcmRzXCIgOmRhdGEta2V5PVwiY2FyZC5rZXlcIiA6a2V5PVwiY2FyZC5rZXlcIiA6Y2FyZD1cImNhcmRcIj48L3RvYXN0LWNhcmQ+XG4gICAgICAgICAgICAgICAgPC90cmFuc2l0aW9uLWdyb3VwPiIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyZW5kIiwgIjxzdHlsZT4udG9hc3QtY2FyZC1jb250YWluZXJ7LS1jYXJkLW1pbi13aWR0aDoyNDBweDstLWNhcmQtbWluLXdpZHRoLW5lZ2F0aXZlOi0yNDBweDtwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7Ym90dG9tOjA7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbi1yZXZlcnNlO2FsaWduLWl0ZW1zOnN0YXJ0O3BhZGRpbmctbGVmdDoxNnB4O3otaW5kZXg6MTAwMDAxO3BvaW50ZXItZXZlbnRzOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dHJhbnNpdGlvbjouMnMgZWFzZS1vdXR9LnRvYXN0LWNhcmQtY29udGFpbmVyICp7cG9pbnRlci1ldmVudHM6aW5pdGlhbDt0cmFuc2l0aW9uOi4ycyBlYXNlLW91dH0udG9hc3QtY2FyZC50b2FzdC1jYXJkLWNvbnRhaW5lci1lbnRlciwudG9hc3QtY2FyZC50b2FzdC1jYXJkLWNvbnRhaW5lci1sZWF2ZS10b3tvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgodmFyKC0tY2FyZC1taW4td2lkdGgtbmVnYXRpdmUpKX0udG9hc3QtY2FyZHtiYWNrZ3JvdW5kOiNmZmY7bWluLXdpZHRoOnZhcigtLWNhcmQtbWluLXdpZHRoKTttYXgtd2lkdGg6NjB2dzttaW4taGVpZ2h0Ojk2cHg7bWFyZ2luOjhweCAwO2JveC1zaGFkb3c6cmdiYSgwLDAsMCwuMikgMCA0cHggOHB4IDA7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0O292ZXJmbG93OmhpZGRlbjtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2JvcmRlci1sZWZ0LXN0eWxlOnNvbGlkO3RyYW5zaXRpb246LjNzIGN1YmljLWJlemllciguMTgsLjg5LC4zMiwxLjI4KTtwb3NpdGlvbjpyZWxhdGl2ZTtib3JkZXItbGVmdC13aWR0aDowO3BhZGRpbmctbGVmdDp2YXIoLS1jb3JuZXItcmFkaXVzKTtib3JkZXItcmFkaXVzOnZhcigtLWNvcm5lci1yYWRpdXMpfS50b2FzdC1jYXJkLnRvYXN0LWNhcmQtY29udGFpbmVyLWxlYXZlLWFjdGl2ZXtwb3NpdGlvbjphYnNvbHV0ZTt0cmFuc2l0aW9uOi4zcyBjdWJpYy1iZXppZXIoLjYsLS4yOCwuNzQsLjA1KX0udG9hc3QtY2FyZC1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn0udG9hc3QtY2FyZC10aXRsZXtmb250LXNpemU6MThweDtjb2xvcjojMDAwO29wYWNpdHk6LjU7bWFyZ2luOjE2cHg7Zm9udC13ZWlnaHQ6NzAwO2ZsZXg6MSAxIGF1dG99LnRvYXN0LWNhcmQtZGlzbWlzc3toZWlnaHQ6MjRweDt3aWR0aDoyNHB4O2ZsZXg6MCAwIGF1dG87cGFkZGluZzoxNnB4O2N1cnNvcjpwb2ludGVyOy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjp0cmFuc3BhcmVudDt0cmFuc2l0aW9uOi4ycyBlYXNlLW91dDt0cmFuc2Zvcm0tb3JpZ2luOmNlbnRlcjtvcGFjaXR5Oi41O2JveC1zaXppbmc6Y29udGVudC1ib3h9LnRvYXN0LWNhcmQtZGlzbWlzczpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4yKX0udG9hc3QtY2FyZC1kaXNtaXNzOmFjdGl2ZXt0cmFuc2Zvcm06c2NhbGUoMS4xKX0udG9hc3QtY2FyZC1tZXNzYWdle2NvbG9yOiMwMDA7Zm9udC1zaXplOjE0cHg7bWFyZ2luOjAgMTZweCAxNnB4O3doaXRlLXNwYWNlOnByZS13cmFwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7bGluZS1oZWlnaHQ6MS41O2ZsZXgtd3JhcDp3cmFwO3dvcmQtYnJlYWs6YnJlYWstYWxsO21heC1oZWlnaHQ6MjAwcHg7b3ZlcmZsb3c6YXV0b30udG9hc3QtY2FyZC50b2FzdC1kZWZhdWx0e2JvcmRlci1sZWZ0LWNvbG9yOiM0NDR9LnRvYXN0LWNhcmQudG9hc3QtZXJyb3J7Ym9yZGVyLWxlZnQtY29sb3I6I2Y0NDMzNn0udG9hc3QtY2FyZC50b2FzdC1pbmZve2JvcmRlci1sZWZ0LWNvbG9yOiMyMTk2ZjN9LnRvYXN0LWNhcmQudG9hc3Qtc3VjY2Vzc3tib3JkZXItbGVmdC1jb2xvcjojOGJjMzRhfS50b2FzdC1jYXJkIC50b2FzdC1jYXJkLWJvcmRlcntwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwJTt3aWR0aDo0cHg7Ym9yZGVyLXJhZGl1czp2YXIoLS1jb3JuZXItcmFkaXVzKTtoZWlnaHQ6Y2FsYygxMDAlIC0gMTBweCk7d2lkdGg6dmFyKC0tY29ybmVyLXJhZGl1cyk7dG9wOjVweDtsZWZ0OjB9LnRvYXN0LWNhcmQudG9hc3QtZGVmYXVsdCAudG9hc3QtY2FyZC1ib3JkZXJ7YmFja2dyb3VuZC1jb2xvcjojNDQ0fS50b2FzdC1jYXJkLnRvYXN0LWVycm9yIC50b2FzdC1jYXJkLWJvcmRlcntiYWNrZ3JvdW5kLWNvbG9yOiNmNDQzMzZ9LnRvYXN0LWNhcmQudG9hc3QtaW5mbyAudG9hc3QtY2FyZC1ib3JkZXJ7YmFja2dyb3VuZC1jb2xvcjojMjE5NmYzfS50b2FzdC1jYXJkLnRvYXN0LXN1Y2Nlc3MgLnRvYXN0LWNhcmQtYm9yZGVye2JhY2tncm91bmQtY29sb3I6IzhiYzM0YX0udG9hc3QtY2FyZCAubGluaywudG9hc3QtY2FyZCBzcGFue2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6NHB4IDZweDttYXJnaW46MCAycHg7YmFja2dyb3VuZC1jb2xvcjojODg4Mjt0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjojMDAwO3RyYW5zaXRpb246LjJzIGVhc2Utb3V0O2JvcmRlci1yYWRpdXM6dmFyKC0tY29ybmVyLXJhZGl1cyl9LnRvYXN0LWNhcmQgLmxpbms6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojODg4M30udG9hc3QtY2FyZCAubGluazphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojODg4NH0udG9hc3QtY2FyZCAuZG93bmxvYWQtbGlua3tjb2xvcjppbmhlcml0IWltcG9ydGFudDt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO3dvcmQtYnJlYWs6YnJlYWstYWxsfUBrZXlmcmFtZXMgbG9hZGluZ3swJSwxMDAle3RvcDowO2xlZnQ6NTAlfTI1JXt0b3A6NTAlO2xlZnQ6MTAwJX01MCV7dG9wOjEwMCU7bGVmdDo1MCV9NzUle3RvcDo1MCU7bGVmdDowfX0udG9hc3QtY2FyZCAubG9hZGluZ3t3aWR0aDoxNHB4O2hlaWdodDoxNHB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO21hcmdpbi1yaWdodDoxNHB4O3Bvc2l0aW9uOnJlbGF0aXZlfS50b2FzdC1jYXJkIC5sb2FkaW5nOjphZnRlcntjb250ZW50OlwiXCI7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOiM4ODg0O2JvcmRlci1yYWRpdXM6NTAlO2Rpc3BsYXk6YmxvY2s7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtNTAlKTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjUwJTthbmltYXRpb246MXMgY3ViaWMtYmV6aWVyKC4yMiwuNjEsLjM2LDEpIGluZmluaXRlIGxvYWRpbmd9PC9zdHlsZT4iKTsKICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IG5ldyBWdWUoewogICAgICAgICAgICAgICAgICAgIGVsOiAiLnRvYXN0LWNhcmQtY29udGFpbmVyIiwKICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ0b2FzdC1jYXJkIjogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHM6IFsiY2FyZCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICI8ZGl2IGNsYXNzPVwidG9hc3QtY2FyZCBpY29ucy1lbmFibGVkIHZpc2libGVcIiA6Y2xhc3M9XCIndG9hc3QtJyArIGNhcmQudHlwZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2FzdC1jYXJkLWJvcmRlclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2FzdC1jYXJkLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ0b2FzdC1jYXJkLXRpdGxlXCI+e3tjYXJkLnRpdGxlfX08L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9hc3QtY2FyZC1kaXNtaXNzXCIgQGNsaWNrPVwiY2FyZC5kaXNtaXNzKClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgc3R5bGU9XCJ3aWR0aDoyMnB4O2hlaWdodDoyMnB4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTksNi40MUwxNy41OSw1TDEyLDEwLjU5TDYuNDEsNUw1LDYuNDFMMTAuNTksMTJMNSwxNy41OUw2LjQxLDE5TDEyLDEzLjQxTDE3LjU5LDE5TDE5LDE3LjU5TDEzLjQxLDEyTDE5LDYuNDFaXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2FzdC1jYXJkLW1lc3NhZ2VcIiB2LWh0bWw9XCJjYXJkLm1lc3NhZ2VcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICBjYXJkczogW10KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgVG9hc3QuaW50ZXJuYWxTaG93ID0gZnVuY3Rpb24gKG1zZywgdGl0bGUsIHRpbWUsIGUpIHsKICAgICAgICAgICAgdmFyIG4gPSBuZXcgVG9hc3QobXNnLCB0aXRsZSwgZSk7CiAgICAgICAgICAgIG4uZHVyYXRpb24gPSB0aW1lOwogICAgICAgICAgICBuLnNob3coKTsKICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfTsKICAgICAgICBUb2FzdC5zaG93ID0gZnVuY3Rpb24gKG1zZywgdGl0bGUsIHRpbWUpIHsKICAgICAgICAgICAgaWYgKHRpbWUgPT09IHZvaWQgMCkgeyB0aW1lID0gLTE7IH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxTaG93KG1zZywgdGl0bGUsIHRpbWUsIFRvYXN0VHlwZS5EZWZhdWx0KTsKICAgICAgICB9OwogICAgICAgIFRvYXN0LmluZm8gPSBmdW5jdGlvbiAobXNnLCB0aXRsZSwgdGltZSkgewogICAgICAgICAgICBpZiAodGltZSA9PT0gdm9pZCAwKSB7IHRpbWUgPSAtMTsgfQogICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFNob3cobXNnLCB0aXRsZSwgdGltZSwgVG9hc3RUeXBlLkluZm8pOwogICAgICAgIH07CiAgICAgICAgVG9hc3Quc3VjY2VzcyA9IGZ1bmN0aW9uIChtc2csIHRpdGxlLCB0aW1lKSB7CiAgICAgICAgICAgIGlmICh0aW1lID09PSB2b2lkIDApIHsgdGltZSA9IC0xOyB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsU2hvdyhtc2csIHRpdGxlLCB0aW1lLCBUb2FzdFR5cGUuU3VjY2Vzcyk7CiAgICAgICAgfTsKICAgICAgICBUb2FzdC5lcnJvciA9IGZ1bmN0aW9uIChtc2csIHRpdGxlLCB0aW1lKSB7CiAgICAgICAgICAgIGlmICh0aW1lID09PSB2b2lkIDApIHsgdGltZSA9IC0xOyB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsU2hvdyhtc2csIHRpdGxlLCB0aW1lLCBUb2FzdFR5cGUuRXJyb3IpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIFRvYXN0OwogICAgfSgpKTsKICAgIHZhciBUb2FzdFR5cGU7CiAgICAoZnVuY3Rpb24gKFRvYXN0VHlwZSkgewogICAgICAgIFRvYXN0VHlwZVsiRGVmYXVsdCJdID0gImRlZmF1bHQiOwogICAgICAgIFRvYXN0VHlwZVsiSW5mbyJdID0gImluZm8iOwogICAgICAgIFRvYXN0VHlwZVsiU3VjY2VzcyJdID0gInN1Y2Nlc3MiOwogICAgICAgIFRvYXN0VHlwZVsiRXJyb3IiXSA9ICJlcnJvciI7CiAgICB9KShUb2FzdFR5cGUgfHwgKFRvYXN0VHlwZSA9IHt9KSk7CgogICAgdmFyIENvcmUgPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIENvcmUoKSB7CiAgICAgICAgICAgIHRoaXMudG9wVXJsID0gdG9wLndpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICB0aGlzLnVybCA9IHRoaXMuY3VycmVudFVybCgpOwogICAgICAgIH0KICAgICAgICBDb3JlLmFwcGVuZFRvID0gZnVuY3Rpb24gKHNlbGVjdGVyLCBodG1sKSB7CiAgICAgICAgICAgICQoc2VsZWN0ZXIpLmFwcGVuZChodG1sKTsKICAgICAgICB9OwogICAgICAgIENvcmUuYWRkVXJsID0gZnVuY3Rpb24gKGtleSwgdXJsKSB7CiAgICAgICAgICAgIEdNX3NldFZhbHVlKGtleSwgdXJsKTsKICAgICAgICB9OwogICAgICAgIENvcmUub3BlblVybCA9IGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgICAgdGhpcy5vcGVuKEdNX2dldFZhbHVlKGtleSkpOwogICAgICAgIH07CiAgICAgICAgQ29yZS5wcm90b3R5cGUuZ2V0UGFyID0gZnVuY3Rpb24gKG9wdGlvbiwgdXJsKSB7CiAgICAgICAgICAgIGlmICh1cmwgPT09IHZvaWQgMCkgeyB1cmwgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoOyB9CiAgICAgICAgICAgIHZhciB2ID0gdXJsLm1hdGNoKG5ldyBSZWdFeHAoIltcP1wmXSIgKyBvcHRpb24gKyAiPShbXlwmXSspIiwgImkiKSk7CiAgICAgICAgICAgIHJldHVybiB2ID09IG51bGwgfHwgdi5sZW5ndGggPCAxID8gIiIgOiB2WzFdOwogICAgICAgIH07CiAgICAgICAgQ29yZS5hcHBlbmRDc3MgPSBmdW5jdGlvbiAodXJsKSB7CiAgICAgICAgICAgIHZhciBsaW5rQ1NTID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpOwogICAgICAgICAgICBsaW5rQ1NTLnR5cGUgPSAidGV4dC9jc3MiOwogICAgICAgICAgICBsaW5rQ1NTLnJlbCA9ICJzdHlsZXNoZWV0IjsKICAgICAgICAgICAgbGlua0NTUy5ocmVmID0gdXJsOwogICAgICAgICAgICBDb3JlLmhlYWQuYXBwZW5kQ2hpbGQobGlua0NTUyk7CiAgICAgICAgfTsKICAgICAgICBDb3JlLmFwcGVuZENzc0NvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudCkgewogICAgICAgICAgICB2YXIgU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOwogICAgICAgICAgICBTdHlsZS5pbm5lckhUTUwgPSBjb250ZW50OwogICAgICAgICAgICBDb3JlLmhlYWQuYXBwZW5kQ2hpbGQoU3R5bGUpOwogICAgICAgIH07CiAgICAgICAgQ29yZS5wcm90b3R5cGUuYm9keUFwcGVuZENzcyA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkKCc8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9IicgKyB1cmwgKyAnIj4nKSk7CiAgICAgICAgfTsKICAgICAgICBDb3JlLmJvZHlBcHBlbmQgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgICAkKCJib2R5IikuYXBwZW5kKGh0bWwpOwogICAgICAgIH07CiAgICAgICAgQ29yZS5hcHBlbmRKcyA9IGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgICAgdmFyIGxpbmtTY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICAgICAgbGlua1NjcmlwdC50eXBlID0gInRleHQvIiArICgiamF2YXNjcmlwdCIpOwogICAgICAgICAgICBsaW5rU2NyaXB0LnNyYyA9IHVybDsKICAgICAgICAgICAgdGhpcy5oZWFkLmFwcGVuZENoaWxkKGxpbmtTY3JpcHQpOwogICAgICAgIH07CiAgICAgICAgQ29yZS5wcm90b3R5cGUuYm9keUFwcGVuZEpzID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCQoJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9IicgKyB1cmwgKyAnIj48L3NjcmlwdD4nKSk7CiAgICAgICAgfTsKICAgICAgICBDb3JlLnByb3RvdHlwZS5jdXJyZW50VXJsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgfTsKICAgICAgICBDb3JlLnByb3RvdHlwZS5Nc2cgPSBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIHJldHVybiBsYXllci5tc2cobXNnLCB7IGljb246IDUgfSk7CiAgICAgICAgfTsKICAgICAgICBDb3JlLnByb3RvdHlwZS5zaG93Q29udGVudCA9IGZ1bmN0aW9uICh0aXRsZSwgY29udGVudCkgewogICAgICAgICAgICByZXR1cm4gbGF5ZXIub3Blbih7IHR5cGU6IDEsIHRpdGxlOiB0aXRsZSwgc2hhZGU6IDAsIGNvbnRlbnQ6IGNvbnRlbnQgfSk7CiAgICAgICAgfTsKICAgICAgICBDb3JlLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgbGF5ZXIuY2xvc2Uob2JqKTsKICAgICAgICB9OwogICAgICAgIENvcmUucHJvdG90eXBlLmNsb3NlQWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsYXllci5jbG9zZUFsbCgpOwogICAgICAgIH07CiAgICAgICAgQ29yZS5vcGVuID0gZnVuY3Rpb24gKHVybCwgbG9hZEluQmFja0dyb3VuZCkgewogICAgICAgICAgICBpZiAobG9hZEluQmFja0dyb3VuZCA9PT0gdm9pZCAwKSB7IGxvYWRJbkJhY2tHcm91bmQgPSBmYWxzZTsgfQogICAgICAgICAgICBHTV9vcGVuSW5UYWIodXJsLCBsb2FkSW5CYWNrR3JvdW5kKTsKICAgICAgICB9OwogICAgICAgIENvcmUudXVpZCA9IGZ1bmN0aW9uIChsZW4sIHJhZGl4KSB7CiAgICAgICAgICAgIGlmIChsZW4gPT09IHZvaWQgMCkgeyBsZW4gPSAxMDsgfQogICAgICAgICAgICBpZiAocmFkaXggPT09IHZvaWQgMCkgeyByYWRpeCA9IDE2OyB9CiAgICAgICAgICAgIHZhciBjaGFycyA9ICcwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicuc3BsaXQoJycpOwogICAgICAgICAgICB2YXIgdXVpZCA9IFtdLCBpOwogICAgICAgICAgICByYWRpeCA9IHJhZGl4IHx8IGNoYXJzLmxlbmd0aDsKICAgICAgICAgICAgaWYgKGxlbikgewogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKQogICAgICAgICAgICAgICAgICAgIHV1aWRbaV0gPSBjaGFyc1swIHwgTWF0aC5yYW5kb20oKSAqIHJhZGl4XTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciByID0gdm9pZCAwOwogICAgICAgICAgICAgICAgdXVpZFs4XSA9IHV1aWRbMTNdID0gdXVpZFsxOF0gPSB1dWlkWzIzXSA9ICctJzsKICAgICAgICAgICAgICAgIHV1aWRbMTRdID0gJzQnOwogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDM2OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXV1aWRbaV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgciA9IDAgfCBNYXRoLnJhbmRvbSgpICogMTY7CiAgICAgICAgICAgICAgICAgICAgICAgIHV1aWRbaV0gPSBjaGFyc1soaSA9PSAxOSkgPyAociAmIDB4MykgfCAweDggOiByXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHV1aWQuam9pbignJyk7CiAgICAgICAgfTsKICAgICAgICBDb3JlLmhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdOwogICAgICAgIENvcmUudG9wX3VybCA9IHRvcC53aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICByZXR1cm4gQ29yZTsKICAgIH0oKSk7CgogICAgdmFyIENvbW1vbjsKICAgIChmdW5jdGlvbiAoQ29tbW9uKSB7CiAgICAgICAgdmFyIE1lbnUgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmdW5jdGlvbiBNZW51KCkgewogICAgICAgICAgICAgICAgdGhpcy5jb3JlID0gbmV3IENvcmUoKTsKICAgICAgICAgICAgICAgIHRoaXMuc2l0ZSA9IC90di53YW5kaGkuY29tL2k7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLm1lbnVzQ2xhc3MgPSBbJ2ZpcnN0JywgJ3NlY29uZCcsICd0aGlyZCcsICdmb3VydGgnLCAnZmlmdGgnXTsKICAgICAgICAgICAgICAgIHRoaXMubWVudVNlbGVjdGVyID0gIiNXYW5kaGktbmF2IjsKICAgICAgICAgICAgfQogICAgICAgICAgICBNZW51LnByb3RvdHlwZS5sb2FkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBDb3JlLmFwcGVuZENzc0NvbnRlbnQodGhpcy5nZXRDc3MoKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIE1lbnUucHJvdG90eXBlLmdldEJvZHkgPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIjxzdmcgd2lkdGg9XCIwXCIgaGVpZ2h0PVwiMFwiPjxkZWZzPjxmaWx0ZXIgaWQ9XCJnb29cIj48ZmVHYXVzc2lhbkJsdXIgaW49XCJTb3VyY2VHcmFwaGljXCIgc3RkRGV2aWF0aW9uPVwiMTBcIiByZXN1bHQ9XCJibHVyXCI+PC9mZUdhdXNzaWFuQmx1cj48ZmVDb2xvck1hdHJpeCBpbj1cImJsdXJcIiBtb2RlPVwibWF0cml4XCIgdmFsdWVzPVwiMSAwIDAgMCAwICAwIDEgMCAwIDAgIDAgMCAxIDAgMCAgMCAwIDAgMTkgLTlcIiByZXN1bHQ9XCJnb29cIj48L2ZlQ29sb3JNYXRyaXg+PGZlQ29tcG9zaXRlIGluPVwiU291cmNlR3JhcGhpY1wiIGluMj1cImdvb1wiIG9wZXJhdG9yPVwiYXRvcFwiPjwvZmVDb21wb3NpdGU+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPjxkaXYgY2xhc3M9XCJhc2lkZS1uYXYgYm91bmNlSW5VcCBhbmltYXRlZFwiIGlkPVwiV2FuZGhpLW5hdlwiPjxsYWJlbCBmb3I9XCJcIiBjbGFzcz1cImFzaWRlLW1lbnVcIiB0aXRsZT1cIlx1NjMwOVx1NEY0Rlx1NjJENlx1NTJBOFwiPlZJUDwvbGFiZWw+IiArIG9wdGlvbiArICI8L2Rpdj4iOwogICAgICAgICAgICB9OwogICAgICAgICAgICBNZW51LnByb3RvdHlwZS5nZXRDc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gImh0bWwgLmFzaWRlLW5hdnstbXMtdGV4dC1zaXplLWFkanVzdDoxMDAlOy13ZWJraXQtdGV4dC1zaXplLWFkanVzdDoxMDAlOy13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWQ7Zm9udC1zaXplOjYyLjUlfWJvZHkgLmFzaWRlLW5hdntmb250LWZhbWlseTpcIkhlbHZldGljYSBOZXVlXCIsSGVsdmV0aWNhLFwiTWljcm9zb2Z0IFlhSGVpXCIsQXJpYWwsc2Fucy1zZXJpZjttYXJnaW46MDtmb250LXNpemU6MS42cmVtO2NvbG9yOiM0ZTU0NmJ9LmFzaWRlLW5hdntwb3NpdGlvbjpmaXhlZDt0b3A6MzUwcHg7d2lkdGg6MjYwcHg7aGVpZ2h0OjI2MHB4Oy13ZWJraXQtZmlsdGVyOnVybCgjZ29vKTtmaWx0ZXI6dXJsKCNnb28pOy1tcy11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtvcGFjaXR5Oi43NTt6LWluZGV4OjIwMTgwODE3fS5hc2lkZS1uYXYubm8tZmlsdGVyey13ZWJraXQtZmlsdGVyOm5vbmU7ZmlsdGVyOm5vbmV9LmFzaWRlLW5hdiAuYXNpZGUtbWVudXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo3MHB4O2hlaWdodDo3MHB4Oy13ZWJraXQtYm9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZDojZjM0NDQ0O2xlZnQ6MDt0b3A6MDtyaWdodDowO2JvdHRvbTowO21hcmdpbjphdXRvO3RleHQtYWxpZ246Y2VudGVyO2xpbmUtaGVpZ2h0OjcwcHg7Y29sb3I6I2ZmZjtmb250LXNpemU6MjBweDt6LWluZGV4OjE7Y3Vyc29yOm1vdmV9LmFzaWRlLW5hdiAubWVudS1pdGVte3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjYwcHg7aGVpZ2h0OjYwcHg7YmFja2dyb3VuZC1jb2xvcjojZmY3Njc2O2xlZnQ6MDt0b3A6MDtyaWdodDowO2JvdHRvbTowO21hcmdpbjphdXRvO2xpbmUtaGVpZ2h0OjYwcHg7dGV4dC1hbGlnbjpjZW50ZXI7LXdlYmtpdC1ib3JkZXItcmFkaXVzOjUwJTtib3JkZXItcmFkaXVzOjUwJTt0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjojZmZmOy13ZWJraXQtdHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC41cywtd2Via2l0LXRyYW5zZm9ybSAuNnM7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC41cywtd2Via2l0LXRyYW5zZm9ybSAuNnM7LW1vei10cmFuc2l0aW9uOnRyYW5zZm9ybSAuNnMsYmFja2dyb3VuZCAuNXMsLW1vei10cmFuc2Zvcm0gLjZzO3RyYW5zaXRpb246dHJhbnNmb3JtIC42cyxiYWNrZ3JvdW5kIC41czt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuNnMsYmFja2dyb3VuZCAuNXMsLXdlYmtpdC10cmFuc2Zvcm0gLjZzLC1tb3otdHJhbnNmb3JtIC42cztmb250LXNpemU6MTRweDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3h9LmFzaWRlLW5hdiAubWVudS1pdGVtOmhvdmVye2JhY2tncm91bmQ6I2E5YzczNH0uYXNpZGUtbmF2IC5tZW51LWxpbmV7bGluZS1oZWlnaHQ6MjBweDtwYWRkaW5nLXRvcDoxMHB4fS5hc2lkZS1uYXY6aG92ZXJ7b3BhY2l0eToxfS5hc2lkZS1uYXY6aG92ZXIgLmFzaWRlLW1lbnV7LXdlYmtpdC1hbmltYXRpb246amVsbG8gMXM7LW1vei1hbmltYXRpb246amVsbG8gMXM7YW5pbWF0aW9uOmplbGxvIDFzfS5hc2lkZS1uYXY6aG92ZXIgLm1lbnUtZmlyc3R7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMTM1JSwwKTstbW96LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC0xMzUlLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC0xMzUlLDApfS5hc2lkZS1uYXY6aG92ZXIgLm1lbnUtc2Vjb25key13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEyMCUsLTcwJSwwKTstbW96LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMjAlLC03MCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEyMCUsLTcwJSwwKX0uYXNpZGUtbmF2OmhvdmVyIC5tZW51LXRoaXJkey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEyMCUsNzAlLDApOy1tb3otdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEyMCUsNzAlLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgxMjAlLDcwJSwwKX0uYXNpZGUtbmF2OmhvdmVyIC5tZW51LWZvdXJ0aHstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEzNSUsMCk7LW1vei10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMzUlLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEzNSUsMCl9QC13ZWJraXQta2V5ZnJhbWVzIGplbGxve2Zyb20sMTEuMSUsdG97LXdlYmtpdC10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX0yMi4yJXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgtMTIuNWRlZykgc2tld1koLTEyLjVkZWcpO3RyYW5zZm9ybTpza2V3WCgtMTIuNWRlZykgc2tld1koLTEyLjVkZWcpfTMzLjMley13ZWJraXQtdHJhbnNmb3JtOnNrZXdYKDYuMjVkZWcpIHNrZXdZKDYuMjVkZWcpO3RyYW5zZm9ybTpza2V3WCg2LjI1ZGVnKSBza2V3WSg2LjI1ZGVnKX00NC40JXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgtMy4xMjVkZWcpIHNrZXdZKC0zLjEyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKC0zLjEyNWRlZykgc2tld1koLTMuMTI1ZGVnKX01NS41JXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgxLjU2MjVkZWcpIHNrZXdZKDEuNTYyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKDEuNTYyNWRlZykgc2tld1koMS41NjI1ZGVnKX02Ni42JXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgtLjc4MTI1ZGVnKSBza2V3WSgtLjc4MTI1ZGVnKTt0cmFuc2Zvcm06c2tld1goLS43ODEyNWRlZykgc2tld1koLS43ODEyNWRlZyl9NzcuNyV7LXdlYmtpdC10cmFuc2Zvcm06c2tld1goMC4zOTA2MjVkZWcpIHNrZXdZKDAuMzkwNjI1ZGVnKTt0cmFuc2Zvcm06c2tld1goMC4zOTA2MjVkZWcpIHNrZXdZKDAuMzkwNjI1ZGVnKX04OC44JXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgtLjE5NTMxMjVkZWcpIHNrZXdZKC0uMTk1MzEyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKC0uMTk1MzEyNWRlZykgc2tld1koLS4xOTUzMTI1ZGVnKX19QC1tb3ota2V5ZnJhbWVzIGplbGxve2Zyb20sMTEuMSUsdG97LW1vei10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX0yMi4yJXstbW96LXRyYW5zZm9ybTpza2V3WCgtMTIuNWRlZykgc2tld1koLTEyLjVkZWcpO3RyYW5zZm9ybTpza2V3WCgtMTIuNWRlZykgc2tld1koLTEyLjVkZWcpfTMzLjMley1tb3otdHJhbnNmb3JtOnNrZXdYKDYuMjVkZWcpIHNrZXdZKDYuMjVkZWcpO3RyYW5zZm9ybTpza2V3WCg2LjI1ZGVnKSBza2V3WSg2LjI1ZGVnKX00NC40JXstbW96LXRyYW5zZm9ybTpza2V3WCgtMy4xMjVkZWcpIHNrZXdZKC0zLjEyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKC0zLjEyNWRlZykgc2tld1koLTMuMTI1ZGVnKX01NS41JXstbW96LXRyYW5zZm9ybTpza2V3WCgxLjU2MjVkZWcpIHNrZXdZKDEuNTYyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKDEuNTYyNWRlZykgc2tld1koMS41NjI1ZGVnKX02Ni42JXstbW96LXRyYW5zZm9ybTpza2V3WCgtLjc4MTI1ZGVnKSBza2V3WSgtLjc4MTI1ZGVnKTt0cmFuc2Zvcm06c2tld1goLS43ODEyNWRlZykgc2tld1koLS43ODEyNWRlZyl9NzcuNyV7LW1vei10cmFuc2Zvcm06c2tld1goMC4zOTA2MjVkZWcpIHNrZXdZKDAuMzkwNjI1ZGVnKTt0cmFuc2Zvcm06c2tld1goMC4zOTA2MjVkZWcpIHNrZXdZKDAuMzkwNjI1ZGVnKX04OC44JXstbW96LXRyYW5zZm9ybTpza2V3WCgtLjE5NTMxMjVkZWcpIHNrZXdZKC0uMTk1MzEyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKC0uMTk1MzEyNWRlZykgc2tld1koLS4xOTUzMTI1ZGVnKX19QGtleWZyYW1lcyBqZWxsb3tmcm9tLDExLjElLHRvey13ZWJraXQtdHJhbnNmb3JtOm5vbmU7LW1vei10cmFuc2Zvcm06bm9uZTt0cmFuc2Zvcm06bm9uZX0yMi4yJXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgtMTIuNWRlZykgc2tld1koLTEyLjVkZWcpOy1tb3otdHJhbnNmb3JtOnNrZXdYKC0xMi41ZGVnKSBza2V3WSgtMTIuNWRlZyk7dHJhbnNmb3JtOnNrZXdYKC0xMi41ZGVnKSBza2V3WSgtMTIuNWRlZyl9MzMuMyV7LXdlYmtpdC10cmFuc2Zvcm06c2tld1goNi4yNWRlZykgc2tld1koNi4yNWRlZyk7LW1vei10cmFuc2Zvcm06c2tld1goNi4yNWRlZykgc2tld1koNi4yNWRlZyk7dHJhbnNmb3JtOnNrZXdYKDYuMjVkZWcpIHNrZXdZKDYuMjVkZWcpfTQ0LjQley13ZWJraXQtdHJhbnNmb3JtOnNrZXdYKC0zLjEyNWRlZykgc2tld1koLTMuMTI1ZGVnKTstbW96LXRyYW5zZm9ybTpza2V3WCgtMy4xMjVkZWcpIHNrZXdZKC0zLjEyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKC0zLjEyNWRlZykgc2tld1koLTMuMTI1ZGVnKX01NS41JXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgxLjU2MjVkZWcpIHNrZXdZKDEuNTYyNWRlZyk7LW1vei10cmFuc2Zvcm06c2tld1goMS41NjI1ZGVnKSBza2V3WSgxLjU2MjVkZWcpO3RyYW5zZm9ybTpza2V3WCgxLjU2MjVkZWcpIHNrZXdZKDEuNTYyNWRlZyl9NjYuNiV7LXdlYmtpdC10cmFuc2Zvcm06c2tld1goLS43ODEyNWRlZykgc2tld1koLS43ODEyNWRlZyk7LW1vei10cmFuc2Zvcm06c2tld1goLS43ODEyNWRlZykgc2tld1koLS43ODEyNWRlZyk7dHJhbnNmb3JtOnNrZXdYKC0uNzgxMjVkZWcpIHNrZXdZKC0uNzgxMjVkZWcpfTc3Ljcley13ZWJraXQtdHJhbnNmb3JtOnNrZXdYKDAuMzkwNjI1ZGVnKSBza2V3WSgwLjM5MDYyNWRlZyk7LW1vei10cmFuc2Zvcm06c2tld1goMC4zOTA2MjVkZWcpIHNrZXdZKDAuMzkwNjI1ZGVnKTt0cmFuc2Zvcm06c2tld1goMC4zOTA2MjVkZWcpIHNrZXdZKDAuMzkwNjI1ZGVnKX04OC44JXstd2Via2l0LXRyYW5zZm9ybTpza2V3WCgtLjE5NTMxMjVkZWcpIHNrZXdZKC0uMTk1MzEyNWRlZyk7LW1vei10cmFuc2Zvcm06c2tld1goLS4xOTUzMTI1ZGVnKSBza2V3WSgtLjE5NTMxMjVkZWcpO3RyYW5zZm9ybTpza2V3WCgtLjE5NTMxMjVkZWcpIHNrZXdZKC0uMTk1MzEyNWRlZyl9fS5hbmltYXRlZHstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxczstbW96LWFuaW1hdGlvbi1kdXJhdGlvbjoxczthbmltYXRpb24tZHVyYXRpb246MXM7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7LW1vei1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGg7YW5pbWF0aW9uLWZpbGwtbW9kZTpib3RofVxuQC13ZWJraXQta2V5ZnJhbWVzIGJvdW5jZUluVXB7ZnJvbSw2MCUsNzUlLDkwJSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMjE1LC42MSwuMzU1LDEpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMjE1LC42MSwuMzU1LDEpfWZyb217b3BhY2l0eTowOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsODAwcHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsODAwcHgsMCl9NjAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC0yMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC0yMHB4LDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMTBweCwwKX05MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNXB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC01cHgsMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDAsMCl9fUAtbW96LWtleWZyYW1lcyBib3VuY2VJblVwe2Zyb20sNjAlLDc1JSw5MCUsdG97LW1vei1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjIxNSwuNjEsLjM1NSwxKTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjIxNSwuNjEsLjM1NSwxKX1mcm9te29wYWNpdHk6MDstbW96LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDgwMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDgwMHB4LDApfTYwJXtvcGFjaXR5OjE7LW1vei10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKX03NSV7LW1vei10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCl9OTAley1tb3otdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNXB4LDApfXRvey1tb3otdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApfX1Aa2V5ZnJhbWVzIGJvdW5jZUluVXB7ZnJvbSw2MCUsNzUlLDkwJSx0b3std2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMjE1LC42MSwuMzU1LDEpOy1tb3otYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yMTUsLjYxLC4zNTUsMSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yMTUsLjYxLC4zNTUsMSl9ZnJvbXtvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCw4MDBweCwwKTstbW96LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDgwMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDgwMHB4LDApfTYwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtMjBweCwwKTstbW96LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC0yMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC0yMHB4LDApfTc1JXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCk7LW1vei10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMHB4LDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDEwcHgsMCl9OTAley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKTstbW96LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLC01cHgsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsLTVweCwwKX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDAsMCk7LW1vei10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDAsMCl9fS5ib3VuY2VJblVwey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5VcDstbW96LWFuaW1hdGlvbi1uYW1lOmJvdW5jZUluVXA7YW5pbWF0aW9uLW5hbWU6Ym91bmNlSW5VcDstd2Via2l0LWFuaW1hdGlvbi1kZWxheToxczstbW96LWFuaW1hdGlvbi1kZWxheToxczthbmltYXRpb24tZGVsYXk6MXN9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo2NDBweCl7fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjQxcHgpIGFuZCAobWF4LXdpZHRoOjEzNjdweCl7LmFzaWRlLW5hdnt0b3A6NTBweH19IjsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgTWVudS5wcm90b3R5cGUuSW5pdCA9IGZ1bmN0aW9uIChtZW51cywgY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaXRlLnRlc3QodGhpcy5jb3JlLnRvcFVybCkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRlcigpOwogICAgICAgICAgICAgICAgdmFyIHN0ciA9ICIiOwogICAgICAgICAgICAgICAgbWVudXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICBzdHIgKz0gIjxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiB0aXRsZT1cIiIgKyBlbGVtZW50LnRpdGxlICsgIlwiIGRhdGEtY2F0PVwiIiArIGVsZW1lbnQudHlwZSArICJcIiBjbGFzcz1cIm1lbnUtaXRlbSBtZW51LWxpbmUgbWVudS0iICsgX3RoaXMubWVudXNDbGFzc1tpbmRleF0gKyAiXCI+IiArIGVsZW1lbnQuc2hvdyArICI8L2E+IjsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgQ29yZS5ib2R5QXBwZW5kKHRoaXMuZ2V0Qm9keShzdHIpKTsKICAgICAgICAgICAgICAgIC9TYWZhcml8aVBob25lL2kudGVzdCh0aGlzLnVzZXJBZ2VudCkgJiYgL2Nocm9tZS9pLnRlc3QodGhpcy51c2VyQWdlbnQpICYmICQoIiNXYW5kaGktbmF2IikuYWRkQ2xhc3MoIm5vLWZpbHRlciIpOwogICAgICAgICAgICAgICAgdmFyIGRyYWdzID0geyBkb3duOiAhMSwgeDogMCwgeTogMCwgd2luV2lkOiAwLCB3aW5IZWk6IDAsIGNsaWVudFg6IDAsIGNsaWVudFk6IDAgfTsKICAgICAgICAgICAgICAgIHZhciBhc2lkZU5hdiA9ICQodGhpcy5tZW51U2VsZWN0ZXIpWzBdOwogICAgICAgICAgICAgICAgJCgiYm9keSIpLm9uKCJtb3VzZWRvd24iLCAiI1dhbmRoaS1uYXYiLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgIHZhciBnZXRDc3MgPSBmdW5jdGlvbiAoYSwgZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5jdXJyZW50U3R5bGUgPyBhLmN1cnJlbnRTdHlsZVtlXSA6IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYSwgITEpW2VdOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZHJhZ3MuZG93biA9ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBkcmFncy5jbGllbnRYID0gYS5jbGllbnRYLAogICAgICAgICAgICAgICAgICAgICAgICBkcmFncy5jbGllbnRZID0gYS5jbGllbnRZLAogICAgICAgICAgICAgICAgICAgICAgICBkcmFncy54ID0gcGFyc2VJbnQoZ2V0Q3NzKHRoaXMsICJsZWZ0IikpLAogICAgICAgICAgICAgICAgICAgICAgICBkcmFncy55ID0gcGFyc2VJbnQoZ2V0Q3NzKHRoaXMsICJ0b3AiKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdzLndpbkhlaSA9ICQod2luZG93KS5oZWlnaHQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ3Mud2luV2lkID0gJCh3aW5kb3cpLndpZHRoKCksCiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCJtb3VzZW1vdmUiLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBhLmNsaWVudFggLSBkcmFncy5jbGllbnRYLCB0ID0gYS5jbGllbnRZIC0gZHJhZ3MuY2xpZW50WTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzaWRlTmF2ID0gYXNpZGVOYXYgfHwgJCgiI1dhbmRoaS1uYXYiKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzaWRlTmF2LnN0eWxlLnRvcCA9IGRyYWdzLnkgKyB0ICsgInB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzaWRlTmF2LnN0eWxlLmxlZnQgPSBkcmFncy54ICsgZSArICJweCI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkub24oIm1vdXNldXAiLCAiI1dhbmRoaS1uYXYiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZHJhZ3MuZG93biA9ICExLCAkKGRvY3VtZW50KS5vZmYoIm1vdXNlbW92ZSIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gTWVudTsKICAgICAgICB9KCkpOwogICAgICAgIENvbW1vbi5NZW51ID0gTWVudTsKICAgIH0pKENvbW1vbiB8fCAoQ29tbW9uID0ge30pKTsKCiAgICB2YXIgY29udGFpbmVyID0gbmV3IE1hcCgpOwogICAgdmFyIENvbnRhaW5lciA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQ29udGFpbmVyKCkgewogICAgICAgIH0KICAgICAgICBDb250YWluZXIuUmVnaXN0ZSA9IGZ1bmN0aW9uICh0eXBlLCBhcmdzKSB7CiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLnByb2Nlc3NOYW1lKHR5cGUubmFtZSk7CiAgICAgICAgICAgIGNvbnRhaW5lci5zZXQoY2xhc3NOYW1lLCB3aW5kb3cuUmVmbGVjdC5jb25zdHJ1Y3QodHlwZSwgdGhpcy5idWlsZFBhcmFtcyhhcmdzKSkpOwogICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldChjbGFzc05hbWUpOwogICAgICAgIH07CiAgICAgICAgQ29udGFpbmVyLmJ1aWxkUGFyYW1zID0gZnVuY3Rpb24gKGFyZ3MpIHsKICAgICAgICAgICAgdmFyIHBhcmEgPSBbXTsKICAgICAgICAgICAgYXJncyA9PT0gbnVsbCB8fCBhcmdzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcmdzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgcGFyYS5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHBhcmE7CiAgICAgICAgfTsKICAgICAgICBDb250YWluZXIucHJvY2Vzc05hbWUgPSBmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIH07CiAgICAgICAgQ29udGFpbmVyLlJlcXVpcmUgPSBmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICB2YXIgbmFtZSA9IHRoaXMucHJvY2Vzc05hbWUodHlwZS5uYW1lKTsKICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMobmFtZSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0KG5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjbGFzc1BhcmFtcyA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoTUVUQURBVEFfUEFSQU1TLCB0eXBlKTsKICAgICAgICAgICAgdmFyIGFyZ3M7CiAgICAgICAgICAgIGlmIChjbGFzc1BhcmFtcyA9PT0gbnVsbCB8fCBjbGFzc1BhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2xhc3NQYXJhbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBhcmdzID0gY2xhc3NQYXJhbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLlJlcXVpcmUoaXRlbSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcy5SZWdpc3RlKHR5cGUsIGFyZ3MpOwogICAgICAgIH07CiAgICAgICAgQ29udGFpbmVyLmRlZmluZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgewogICAgICAgICAgICB2YXIgX2E7CiAgICAgICAgICAgIHZhciBjbGFzc1R5cGUgPSBSZWZsZWN0LmdldE1ldGFkYXRhKE1FVEFEQVRBX1RZUEUsIHRhcmdldCwga2V5KTsKICAgICAgICAgICAgdmFyIGRlc2MgPSAoX2EgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogeyB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH07CiAgICAgICAgICAgIGRlc2MudmFsdWUgPSB0aGlzLlJlcXVpcmUoY2xhc3NUeXBlKTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBDb250YWluZXI7CiAgICB9KCkpOwogICAgdmFyIE1FVEFEQVRBX1RZUEUgPSAiZGVzaWduOnR5cGUiOwogICAgdmFyIE1FVEFEQVRBX1BBUkFNUyA9ICJkZXNpZ246cGFyYW10eXBlcyI7CiAgICBmdW5jdGlvbiBXYW5kaGlBdXRvKHRhcmdldCwga2V5KSB7CiAgICAgICAgQ29udGFpbmVyLmRlZmluZSh0YXJnZXQsIGtleSk7CiAgICB9CgogICAgdmFyIFBsdWdpbkJhc2UgPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIFBsdWdpbkJhc2UoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIHRoaXMuX3VuaXF1ZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuUHJvY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRlcigpOwogICAgICAgICAgICAgICAgX3RoaXMucnVuKCk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIFBsdWdpbkJhc2UucHJvdG90eXBlLnVuaXF1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VuaXF1ZTsKICAgICAgICB9OwogICAgICAgIFBsdWdpbkJhc2UucHJvdG90eXBlLmxpbmtUZXN0ID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICBpZiAoIXVybCkgewogICAgICAgICAgICAgICAgdXJsID0gdGhpcy5jb3JlLmN1cnJlbnRVcmwoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZmxhZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnJ1bGVzLmZvckVhY2goZnVuY3Rpb24gKHYsIGspIHsKICAgICAgICAgICAgICAgIGlmICh2LnRlc3QodXJsKSkgewogICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF90aGlzLnNpdGUgPSBrOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGZsYWc7CiAgICAgICAgfTsKICAgICAgICB2YXIgX2EsIF9iOwogICAgICAgIF9fZGVjb3JhdGUoWwogICAgICAgICAgICBXYW5kaGlBdXRvLAogICAgICAgICAgICBfX21ldGFkYXRhKCJkZXNpZ246dHlwZSIsIHR5cGVvZiAoX2EgPSB0eXBlb2YgQ29yZSAhPT0gInVuZGVmaW5lZCIgJiYgQ29yZSkgPT09ICJmdW5jdGlvbiIgPyBfYSA6IE9iamVjdCkKICAgICAgICBdLCBQbHVnaW5CYXNlLnByb3RvdHlwZSwgImNvcmUiLCB2b2lkIDApOwogICAgICAgIF9fZGVjb3JhdGUoWwogICAgICAgICAgICBXYW5kaGlBdXRvLAogICAgICAgICAgICBfX21ldGFkYXRhKCJkZXNpZ246dHlwZSIsIHR5cGVvZiAoX2IgPSB0eXBlb2YgQ29tbW9uICE9PSAidW5kZWZpbmVkIiAmJiBDb21tb24uTWVudSkgPT09ICJmdW5jdGlvbiIgPyBfYiA6IE9iamVjdCkKICAgICAgICBdLCBQbHVnaW5CYXNlLnByb3RvdHlwZSwgIm1lbnUiLCB2b2lkIDApOwogICAgICAgIHJldHVybiBQbHVnaW5CYXNlOwogICAgfSgpKTsKCiAgICB2YXIgU2l0ZUVudW07CiAgICAoZnVuY3Rpb24gKFNpdGVFbnVtKSB7CiAgICAgICAgU2l0ZUVudW1bIkFsbCJdID0gIkFsbCI7CiAgICAgICAgU2l0ZUVudW1bIlRhb0JhbyJdID0gIlRhb0JhbyI7CiAgICAgICAgU2l0ZUVudW1bIlRNYWxsIl0gPSAiVE1hbGwiOwogICAgICAgIFNpdGVFbnVtWyJKaW5nRG9uZyJdID0gIkppbmdEb25nIjsKICAgICAgICBTaXRlRW51bVsiSVFpWWkiXSA9ICJJUWlZaSI7CiAgICAgICAgU2l0ZUVudW1bIllvdUt1Il0gPSAiWW91S3UiOwogICAgICAgIFNpdGVFbnVtWyJMZVNoaSJdID0gIkxlU2hpIjsKICAgICAgICBTaXRlRW51bVsiVHVEb3UiXSA9ICJUdURvdSI7CiAgICAgICAgU2l0ZUVudW1bIlRlbmNlbnRfViJdID0gIlRlbmNlbnRfViI7CiAgICAgICAgU2l0ZUVudW1bIk1hbmdHdW8iXSA9ICJNYW5nR3VvIjsKICAgICAgICBTaXRlRW51bVsiU29IdSJdID0gIlNvSHUiOwogICAgICAgIFNpdGVFbnVtWyJBY2Z1biJdID0gIkFjZnVuIjsKICAgICAgICBTaXRlRW51bVsiQmlsaUJpbGkiXSA9ICJCaWxpQmlsaSI7CiAgICAgICAgU2l0ZUVudW1bIk0xOTA1Il0gPSAiTTE5MDUiOwogICAgICAgIFNpdGVFbnVtWyJQUFRWIl0gPSAiUFBUViI7CiAgICAgICAgU2l0ZUVudW1bIllpbll1ZVRhaSJdID0gIllpbll1ZVRhaSI7CiAgICAgICAgU2l0ZUVudW1bIldhbmdZaSJdID0gIldhbmdZaSI7CiAgICAgICAgU2l0ZUVudW1bIlRlbmNlbnRfTSJdID0gIlRlbmNlbnRfTSI7CiAgICAgICAgU2l0ZUVudW1bIkt1R291Il0gPSAiS3VHb3UiOwogICAgICAgIFNpdGVFbnVtWyJLdVdvIl0gPSAiS3VXbyI7CiAgICAgICAgU2l0ZUVudW1bIlhpYU1pIl0gPSAiWGlhTWkiOwogICAgICAgIFNpdGVFbnVtWyJUYWlIZSJdID0gIlRhaUhlIjsKICAgICAgICBTaXRlRW51bVsiUWluZ1RpbmciXSA9ICJRaW5nVGluZyI7CiAgICAgICAgU2l0ZUVudW1bIkxpWmhpIl0gPSAiTGlaaGkiOwogICAgICAgIFNpdGVFbnVtWyJNaUd1Il0gPSAiTWlHdSI7CiAgICAgICAgU2l0ZUVudW1bIlhpTWFMYVlhIl0gPSAiWGlNYUxhWWEiOwogICAgICAgIFNpdGVFbnVtWyJTWEIiXSA9ICJTWEIiOwogICAgICAgIFNpdGVFbnVtWyJCRFkiXSA9ICJCRFkiOwogICAgICAgIFNpdGVFbnVtWyJCRFkxIl0gPSAiQkRZMSI7CiAgICAgICAgU2l0ZUVudW1bIkxaWSJdID0gIkxaWSI7CiAgICB9KShTaXRlRW51bSB8fCAoU2l0ZUVudW0gPSB7fSkpOwoKICAgIHZhciBVcGRhdGVTZXJ2aWNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoVXBkYXRlU2VydmljZSwgX3N1cGVyKTsKICAgICAgICBmdW5jdGlvbiBVcGRhdGVTZXJ2aWNlKCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgICAgICBfdGhpcy5ydWxlcyA9IG5ldyBNYXAoWwogICAgICAgICAgICAgICAgW1NpdGVFbnVtLkFsbCwgLyguKikvaV0KICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIF90aGlzLl91bmlxdWUgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICBVcGRhdGVTZXJ2aWNlLnByb3RvdHlwZS5sb2FkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgfTsKICAgICAgICBVcGRhdGVTZXJ2aWNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIFRvYXN0LnNob3coIlx1NjhDMFx1NjdFNVx1NjZGNFx1NjVCMFx1Njc2NVx1NTU2NiIsICJcdTgxRUFcdTUyQThcdTY2RjRcdTY1QjAiKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBVcGRhdGVTZXJ2aWNlOwogICAgfShQbHVnaW5CYXNlKSk7CgogICAgdmFyIExpbmVzT3B0aW9uID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBMaW5lc09wdGlvbigpIHsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIExpbmVzT3B0aW9uOwogICAgfSgpKTsKCiAgICB2YXIgQ29uZmlnID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBDb25maWcoKSB7CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25maWcsICJlbnYiLCB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIEdNX2luZm87CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICBDb25maWcuZ2V0ID0gZnVuY3Rpb24gKGtleSwgZGUpIHsKICAgICAgICAgICAgaWYgKGRlID09PSB2b2lkIDApIHsgZGUgPSAiIjsgfQogICAgICAgICAgICB2YXIgb2JqU3RyID0gR01fZ2V0VmFsdWUodGhpcy5lbmNvZGUoa2V5KSwgZGUpOwogICAgICAgICAgICBpZiAob2JqU3RyKSB7CiAgICAgICAgICAgICAgICB2YXIgb2JqID0gSlNPTi5wYXJzZShvYmpTdHIpOwogICAgICAgICAgICAgICAgaWYgKG9iai5leHAgPT0gLTEgfHwgb2JqLmV4cCA+IG5ldyBEYXRlKCkuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai52YWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZGU7CiAgICAgICAgfTsKICAgICAgICBDb25maWcuc2V0ID0gZnVuY3Rpb24gKGtleSwgdiwgZXhwKSB7CiAgICAgICAgICAgIGlmIChleHAgPT09IHZvaWQgMCkgeyBleHAgPSAtMTsgfQogICAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgICB2YWx1ZTogdiwKICAgICAgICAgICAgICAgIGV4cDogZXhwID09IC0xID8gZXhwIDogbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBleHAKICAgICAgICAgICAgfTsKICAgICAgICAgICAgR01fc2V0VmFsdWUodGhpcy5lbmNvZGUoa2V5KSwgSlNPTi5zdHJpbmdpZnkob2JqKSk7CiAgICAgICAgfTsKICAgICAgICBDb25maWcuZGVjb2RlID0gZnVuY3Rpb24gKHN0cikgewogICAgICAgICAgICByZXR1cm4gYXRvYihzdHIpOwogICAgICAgIH07CiAgICAgICAgQ29uZmlnLmVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICAgICAgcmV0dXJuIGJ0b2Eoc3RyKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBDb25maWc7CiAgICB9KCkpOwoKICAgIHZhciBSdW50aW1lID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBSdW50aW1lKCkgewogICAgICAgIH0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUnVudGltZSwgInVybCIsIHsKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gUnVudGltZTsKICAgIH0oKSk7CgogICAgdmFyIEh0dHBSZXF1ZXN0ID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBIdHRwUmVxdWVzdChvcHRpb24pIHsKICAgICAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCgpOwogICAgICAgICAgICB0aGlzLnVybCA9IG9wdGlvbi51cmw7CiAgICAgICAgICAgIHRoaXMubWV0aG9kID0gb3B0aW9uLm1ldGhvZFR5cGU7CiAgICAgICAgICAgIHRoaXMuZGF0YVR5cGUgPSBvcHRpb24uZGF0YVR5cGU7CiAgICAgICAgICAgIHRoaXMuX29wdGlvbiA9IG9wdGlvbjsKICAgICAgICB9CiAgICAgICAgSHR0cFJlcXVlc3QucHJvdG90eXBlLm9ubG9hZCA9IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgdGhpcy5fb3B0aW9uLm9uU3VjY2VzcyhyZXMpOwogICAgICAgIH07CiAgICAgICAgSHR0cFJlcXVlc3QucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMub25lcnJvcigpOwogICAgICAgIH07CiAgICAgICAgSHR0cFJlcXVlc3QucHJvdG90eXBlLnNldFF1ZXJ5RGF0YSA9IGZ1bmN0aW9uIChkYXRhcykgewogICAgICAgICAgICBpZiAoZGF0YXMgaW5zdGFuY2VvZiBGb3JtRGF0YSkgewogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YXM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YXMpIHsKICAgICAgICAgICAgICAgICAgICBmZC5hcHBlbmQoaSwgZGF0YXNbaV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZmQ7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIdHRwUmVxdWVzdC5wcm90b3R5cGUsICJvbkxvYWQiLCB7CiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub25TdWNjZXNzOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIEh0dHBSZXF1ZXN0OwogICAgfSgpKTsKICAgIHZhciBBamF4T3B0aW9uID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBBamF4T3B0aW9uKF91cmwsIF9tZXRob2RUeXBlLCBfZGF0YSwgX3N1Y2Nlc3MsIF9oZWFkZXIpIHsKICAgICAgICAgICAgaWYgKF9tZXRob2RUeXBlID09PSB2b2lkIDApIHsgX21ldGhvZFR5cGUgPSAiR0VUIjsgfQogICAgICAgICAgICBpZiAoX2hlYWRlciA9PT0gdm9pZCAwKSB7IF9oZWFkZXIgPSBuZXcgTWFwKCk7IH0KICAgICAgICAgICAgdGhpcy51cmwgPSBfdXJsOwogICAgICAgICAgICB0aGlzLm1ldGhvZFR5cGUgPSBfbWV0aG9kVHlwZTsKICAgICAgICAgICAgdGhpcy5vblN1Y2Nlc3MgPSBfc3VjY2VzczsKICAgICAgICAgICAgdGhpcy5vbkVycm9yID0gX3N1Y2Nlc3M7CiAgICAgICAgICAgIHRoaXMuZGF0YSA9IF9kYXRhOwogICAgICAgICAgICB0aGlzLmhlYWRlcnMgPSBfaGVhZGVyOwogICAgICAgIH0KICAgICAgICBBamF4T3B0aW9uLnByb3RvdHlwZS5nZXREYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodGhpcy5kYXRhIGluc3RhbmNlb2YgRm9ybURhdGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kYXRhIGluc3RhbmNlb2YgTWFwKSB7CiAgICAgICAgICAgICAgICB2YXIgZmRfMSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHYsIGspIHsKICAgICAgICAgICAgICAgICAgICBmZF8xLmFwcGVuZChrLCB2KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGZkXzE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgZmQuYXBwZW5kKGksIHRoaXMuZGF0YVtpXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZmQ7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiBBamF4T3B0aW9uOwogICAgfSgpKTsKCiAgICB2YXIgQWxlcnQgPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIEFsZXJ0KCkgewogICAgICAgIH0KICAgICAgICBBbGVydC5vcGVuID0gZnVuY3Rpb24gKHRpdGxzLCBjb250ZW50LCBhcmVhLCBzaGFkZSwgb2Zmc2V0LCBtYXhtaW4pIHsKICAgICAgICAgICAgaWYgKGFyZWEgPT09IHZvaWQgMCkgeyBhcmVhID0gWyc0MDBweCcsICczMDBweCddOyB9CiAgICAgICAgICAgIGlmIChzaGFkZSA9PT0gdm9pZCAwKSB7IHNoYWRlID0gMDsgfQogICAgICAgICAgICBpZiAob2Zmc2V0ID09PSB2b2lkIDApIHsgb2Zmc2V0ID0gImxiIjsgfQogICAgICAgICAgICBpZiAobWF4bWluID09PSB2b2lkIDApIHsgbWF4bWluID0gdHJ1ZTsgfQogICAgICAgICAgICByZXR1cm4gbGF5ZXIub3Blbih7CiAgICAgICAgICAgICAgICB0eXBlOiAxLAogICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxzLAogICAgICAgICAgICAgICAgYXJlYTogYXJlYSwKICAgICAgICAgICAgICAgIHNoYWRlOiBzaGFkZSwKICAgICAgICAgICAgICAgIG9mZnNldDogb2Zmc2V0LAogICAgICAgICAgICAgICAgbWF4bWluOiBtYXhtaW4sCiAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgQWxlcnQuaW5mbyA9IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgcmV0dXJuIGxheWVyLm1zZyhtc2csIHsgdGltZTogMjAwMCB9KTsKICAgICAgICB9OwogICAgICAgIEFsZXJ0LmVycm9yID0gZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICByZXR1cm4gbGF5ZXIubXNnKG1zZywgeyBpY29uOiA1LCB0aW1lOiAyMDAwIH0pOwogICAgICAgIH07CiAgICAgICAgQWxlcnQuY29uZmltID0gZnVuY3Rpb24gKHRpdGxlLCBtc2csIGJ1dHRvbnMsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHJldHVybiBsYXllci5vcGVuKHsKICAgICAgICAgICAgICAgIHR5cGU6IDEsCiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUgfHwgZmFsc2UsCiAgICAgICAgICAgICAgICBjbG9zZUJ0bjogdHJ1ZSwKICAgICAgICAgICAgICAgIHNoYWRlOiAwLjgsCiAgICAgICAgICAgICAgICBpZDogJ0xBWV9sYXl1aXBybycsCiAgICAgICAgICAgICAgICByZXNpemU6IGZhbHNlLAogICAgICAgICAgICAgICAgYnRuOiBidXR0b25zLAogICAgICAgICAgICAgICAgYnRuQWxpZ246ICdjJywKICAgICAgICAgICAgICAgIG1vdmVUeXBlOiAxLAogICAgICAgICAgICAgICAgY29udGVudDogIjxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBsaW5lLWhlaWdodDogMjJweDsgYmFja2dyb3VuZC1jb2xvcjogIzM5M0Q0OTsgY29sb3I6ICNmZmY7IGZvbnQtd2VpZ2h0OiAzMDA7XCI+IiArIG1zZyArICI8L2Rpdj4iLAogICAgICAgICAgICAgICAgeWVzOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhpbmRleCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgQWxlcnQucHJvbXB0ID0gZnVuY3Rpb24gKHRpdGxlLCB2LCBjYWxsYmFjaywgc2l6ZSwgdHlwZSkgewogICAgICAgICAgICBpZiAodHlwZSA9PT0gdm9pZCAwKSB7IHR5cGUgPSAwOyB9CiAgICAgICAgICAgIGxheWVyLnByb21wdCh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgICAgICAgICB2YWx1ZTogdiwKICAgICAgICAgICAgICAgIGZvcm1UeXBlOiB0eXBlLAogICAgICAgICAgICB9LCBmdW5jdGlvbiAodiwgaSwgZWxlKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayh2KTsKICAgICAgICAgICAgICAgIGxheWVyLmNsb3NlKGkpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIEFsZXJ0LmNsb3NlID0gZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgIGxheWVyLmNsb3NlKGluZGV4KTsKICAgICAgICB9OwogICAgICAgIEFsZXJ0LmNsb3NlQWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsYXllci5jbG9zZUFsbCgpOwogICAgICAgIH07CiAgICAgICAgQWxlcnQubG9hZGluZyA9IGZ1bmN0aW9uIChzdHlsZSwgX3RpbWUsIF9zaGFkZSkgewogICAgICAgICAgICBpZiAoc3R5bGUgPT09IHZvaWQgMCkgeyBzdHlsZSA9IDE7IH0KICAgICAgICAgICAgaWYgKF90aW1lID09PSB2b2lkIDApIHsgX3RpbWUgPSAxMDsgfQogICAgICAgICAgICBpZiAoX3NoYWRlID09PSB2b2lkIDApIHsgX3NoYWRlID0gMC4zOyB9CiAgICAgICAgICAgIHJldHVybiBsYXllci5sb2FkKHN0eWxlLCB7IHNoYWRlOiBfc2hhZGUsIHRpbWU6IF90aW1lICogMTAwMCB9KTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBBbGVydDsKICAgIH0oKSk7CgogICAgdmFyIEh0dHAgPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIEh0dHAoKSB7CiAgICAgICAgfQogICAgICAgIEh0dHAuYWpheCA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kOwogICAgICAgICAgICBvcHRpb24uaGVhZGVycy5zZXQoJ1VzZXItQWdlbnQnLCAnTW96aWxsYS80LjAgKGNvbXBhdGlibGUpIEdyZWFzZW1vbmtleScpOwogICAgICAgICAgICBvcHRpb24uaGVhZGVycy5zZXQoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9hdG9tK3htbCxhcHBsaWNhdGlvbi94bWwsdGV4dC94bWwnKTsKICAgICAgICAgICAgb3B0aW9uLmhlYWRlcnMuc2V0KCd2ZXJzaW9uJywgQ29uZmlnLmVudi5zY3JpcHQudmVyc2lvbik7CiAgICAgICAgICAgIG9wdGlvbi5oZWFkZXJzLnNldCgnYXV0aCcsIChfYSA9IENvbmZpZy5lbnYuc2NyaXB0LmF1dGhvcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogJycpOwogICAgICAgICAgICBvcHRpb24uaGVhZGVycy5zZXQoJ25hbWVzcGFjZScsIChfYiA9IENvbmZpZy5lbnYuc2NyaXB0Lm5hbWVzcGFjZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJycpOwogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICB1cmw6IG9wdGlvbi51cmwsCiAgICAgICAgICAgICAgICBtZXRob2Q6IG9wdGlvbi5tZXRob2RUeXBlLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICd2ZXJzaW9uJzogQ29uZmlnLmVudi5zY3JpcHQudmVyc2lvbiwKICAgICAgICAgICAgICAgICAgICAnYXV0aCc6IChfYyA9IENvbmZpZy5lbnYuc2NyaXB0LmF1dGhvcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogJycsCiAgICAgICAgICAgICAgICAgICAgJ25hbWVzcGFjZSc6IChfZCA9IENvbmZpZy5lbnYuc2NyaXB0Lm5hbWVzcGFjZSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogJycsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGF0YTogb3B0aW9uLmdldERhdGEoKSwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDEwMDAgKiAxMCwKICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2I7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgKF9hID0gb3B0aW9uLm9uU3VjY2VzcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwob3B0aW9uLCBKU09OLnBhcnNlKHJlcy5yZXNwb25zZVRleHQpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEFsZXJ0LmNvbmZpbSgiIiwgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cdThCRjdcdTZDNDJcdTU5MzFcdThEMjVcdUZGMENcdThCRjdcdTU5MERcdTUyMzZcdTRFMEJcdTUyMTdcdTRGRTFcdTYwNkZcdTU0MTFcdTVGMDBcdTUzRDFcdTgwMDVcdTUzQ0RcdTk5ODhcdTk1RUVcdTk4OTg8L2gxPjxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6cmVkO2ZvbnQtd2VpZ2h0OiBib2xkO2ZvbnQtc2l6ZTogbGFyZ2U7XCI+XHU5NTE5XHU4QkVGXHU2NUU1XHU1RkQ3XHVGRjFBPC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPiIgKyBlcnJvciArICI8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cImNvbG9yOnJlZDtmb250LXdlaWdodDogYm9sZDtmb250LXNpemU6IGxhcmdlO1wiPlx1OTUxOVx1OEJFRlx1OEJFNlx1NjBDNVx1RkYxQTwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD4iICsgZXNjYXBlKHJlcy5yZXNwb25zZVRleHQpICsgIjwvcD4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6cmVkO2ZvbnQtd2VpZ2h0OiBib2xkO2ZvbnQtc2l6ZTogbGFyZ2U7XCI+XHU3M0FGXHU1ODgzXHU0RkUxXHU2MDZGXHVGRjFBPC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlx1NkNCOVx1NzMzNFx1NzI0OFx1NjcyQ1x1RkYxQSIgKyBDb25maWcuZW52LnZlcnNpb24gKyAiPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHU4MTFBXHU2NzJDXHU3MjQ4XHU2NzJDXHVGRjFBIiArIENvbmZpZy5lbnYuc2NyaXB0LnZlcnNpb24gKyAiPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+VXJsXHVGRjFBIiArIFJ1bnRpbWUudXJsICsgIjwvcD5cbiAgICAgICAgICAgICAgICAgICAgIiwgWyfljrvlj43ppognLCAiXHU1MTczXHU5NUVEIl0sIGZ1bmN0aW9uICgpIHsgQ29yZS5vcGVuKCJodHRwczovL2dpdGVlLmNvbS9peHlzeS9PbmVLZXlWaXAvaXNzdWVzIik7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICAoX2IgPSBvcHRpb24ub25TdWNjZXNzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChvcHRpb24sIG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICAgICAgICAgIEFsZXJ0LmNvbmZpbSgiIiwgIiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+XHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU1OTBEXHU1MjM2XHU0RTBCXHU1MjE3XHU0RkUxXHU2MDZGXHU1NDExXHU1RjAwXHU1M0QxXHU4MDA1XHU1M0NEXHU5OTg4XHU5NUVFXHU5ODk4PC9oMT48YnI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cImNvbG9yOnJlZDtmb250LXdlaWdodDogYm9sZDtmb250LXNpemU6IGxhcmdlO1wiPlx1OTUxOVx1OEJFRlx1OEJFNlx1NjBDNVx1RkYxQTwvc3Bhbj48YnI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD4iICsgZXNjYXBlKHJlcy5yZXNwb25zZVRleHQpICsgIjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6cmVkO2ZvbnQtd2VpZ2h0OiBib2xkO2ZvbnQtc2l6ZTogbGFyZ2U7XCI+XHU3M0FGXHU1ODgzXHU0RkUxXHU2MDZGXHVGRjFBPC9zcGFuPjxicj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlx1NkNCOVx1NzMzNFx1NzI0OFx1NjcyQ1x1RkYxQSIgKyBDb25maWcuZW52LnZlcnNpb24gKyAiPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+XHU4MTFBXHU2NzJDXHU3MjQ4XHU2NzJDXHVGRjFBIiArIENvbmZpZy5lbnYuc2NyaXB0LnZlcnNpb24gKyAiPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+VXJsXHVGRjFBIiArIFJ1bnRpbWUudXJsICsgIjwvcD4gICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAiLCBbJ+WOu+WPjemmiCcsICJcdTUxNzNcdTk1RUQiXSwgZnVuY3Rpb24gKCkgeyBDb3JlLm9wZW4oImh0dHBzOi8vZ2l0ZWUuY29tL2l4eXN5L09uZUtleVZpcC9pc3N1ZXMiKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgKF9hID0gb3B0aW9uLm9uRXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jYWxsKG9wdGlvbiwgcmVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBIdHRwLmdldERhdGEgPSBmdW5jdGlvbiAodXJsLCBjYWxsYmFjaykgewogICAgICAgICAgICAkLmdldEpTT04odXJsLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgY2FsbGJhY2soZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgSHR0cC5wb3N0ID0gZnVuY3Rpb24gKHVybCwgZGF0YSkgewogICAgICAgICAgICB2YXIgaW5kZXggPSBBbGVydC5sb2FkaW5nKCk7CiAgICAgICAgICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICAgICAgICAgIEh0dHAuYWpheChuZXcgQWpheE9wdGlvbih1cmwsICJQT1NUIiwgZGF0YSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBBbGVydC5jbG9zZShpbmRleCk7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7IHJldHVybiBBbGVydC5jbG9zZShpbmRleCk7IH0pOwogICAgICAgICAgICByZXR1cm4gcDsKICAgICAgICB9OwogICAgICAgIEh0dHAuZ2V0ID0gZnVuY3Rpb24gKHVybCwgZGF0YSkgewogICAgICAgICAgICB2YXIgcCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICBIdHRwLmFqYXgobmV3IEFqYXhPcHRpb24odXJsLCAiR0VUIiwgZGF0YSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHA7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gSHR0cDsKICAgIH0oKSk7CgogICAgdmFyIFJvdXRlID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBSb3V0ZSgpIHsKICAgICAgICAgICAgdGhpcy5xdWVyeVRhbyA9ICIiOwogICAgICAgIH0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUm91dGUsICJhcGlSb290IiwgewogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiaHR0cHM6Ly9hcGkud2FuZGhpLmNvbS9hcGkiOwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgUm91dGUuYmFzZUFwaSA9IGZ1bmN0aW9uIChhcGksIGRhdGEsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIEh0dHAucG9zdChSb3V0ZS5hcGlSb290ICsgYXBpLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgUm91dGUucXVlcnlTYnggPSBmdW5jdGlvbiAoaWQsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIGlmIChDb25maWcuZ2V0KHRoaXMuc3hiX2tleSwgIiIpICE9PSAiIikgewogICAgICAgICAgICAgICAgdGhpcy5xdWVyeTM2NShpZCwgQ29uZmlnLmdldCh0aGlzLnN4Yl9rZXkpLCBjYWxsYmFjayk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5VmFsdWUoJ3N4Yl9hbmhhbycsIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWVyeTM2NShpZCwgcmVzLmRhdGEsIGNhbGxiYWNrKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBSb3V0ZS5zYnhGZWVkYmFjayA9IGZ1bmN0aW9uIChpZCwgYW5zd2VyKSB7CiAgICAgICAgICAgIHRoaXMuYmFzZUFwaSgnL3Rvb2xzL3JlY29yZCcsIG5ldyBNYXAoWwogICAgICAgICAgICAgICAgWydpZCcsIGlkXSwKICAgICAgICAgICAgICAgIFsnZGF0YScsIGFuc3dlcl0sCiAgICAgICAgICAgICAgICBbJ2FuaGFvJywgQ29uZmlnLmdldCh0aGlzLnN4Yl9rZXkpXQogICAgICAgICAgICBdKSwgZnVuY3Rpb24gKCkgeyB9KTsKICAgICAgICB9OwogICAgICAgIFJvdXRlLnF1ZXJ5MzY1ID0gZnVuY3Rpb24gKGlkLCBhbmhhbywgY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGFwaSA9IENvbmZpZy5nZXQoJ3N4Yl9hcGknKTsKICAgICAgICAgICAgaWYgKCFhcGkpIHsKICAgICAgICAgICAgICAgIHRoaXMucXVlcnlWYWx1ZSgnc3hiX2FwaScsIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICBDb25maWcuc2V0KCdzeGJfYXBpJywgcmVzLmRhdGEsIDEwMDAgKiA2MCAqIDYwICogMjQpOwogICAgICAgICAgICAgICAgICAgIEh0dHAucG9zdChyZXMuZGF0YSwgbmV3IE1hcChbCiAgICAgICAgICAgICAgICAgICAgICAgIFsiZG9jaW5mbyIsICJodHRwczovL3d3dy5zaGFuZ3h1ZWJhLmNvbS9hc2svIiArIGlkICsgIi5odG1sIl0sCiAgICAgICAgICAgICAgICAgICAgICAgIFsiYW5oYW8iLCBhbmhhb10KICAgICAgICAgICAgICAgICAgICBdKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIEh0dHAucG9zdChhcGksIG5ldyBNYXAoWwogICAgICAgICAgICAgICAgICAgIFsiZG9jaW5mbyIsICJodHRwczovL3d3dy5zaGFuZ3h1ZWJhLmNvbS9hc2svIiArIGlkICsgIi5odG1sIl0sCiAgICAgICAgICAgICAgICAgICAgWyJhbmhhbyIsIGFuaGFvXQogICAgICAgICAgICAgICAgXSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgeyBjYWxsYmFjayhyZXMpOyB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgUm91dGUucXVlcnlWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHRoaXMuYmFzZUFwaShSb3V0ZS5jb25maWcsIG5ldyBNYXAoWwogICAgICAgICAgICAgICAgWyJrZXkiLCBrZXldCiAgICAgICAgICAgIF0pLCBjYWxsYmFjayk7CiAgICAgICAgfTsKICAgICAgICBSb3V0ZS5xdWVyeUhpc3RvcnkgPSBmdW5jdGlvbiAodXJsLCBzaXRlVHlwZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgdGhpcy5iYXNlQXBpKHRoaXMuaGlzdG9yeSwgbmV3IE1hcChbWyd1cmwnLCB1cmxdLCBbJ3R5cGUnLCBzaXRlVHlwZV1dKSwgY2FsbGJhY2spOwogICAgICAgIH07CiAgICAgICAgUm91dGUucXVlcnlCaWxpSW1nID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHRoaXMuYmFzZUFwaSh0aGlzLmJpbGksIG5ldyBNYXAoW1sndXJsJywgUnVudGltZS51cmxdXSksIGNhbGxiYWNrKTsKICAgICAgICB9OwogICAgICAgIFJvdXRlLnF1ZXJ5Q291cG9ucyA9IGZ1bmN0aW9uIChpdGVtSWQsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHRoaXMuYmFzZUFwaSh0aGlzLmNvdXBvbnMsIG5ldyBNYXAoW1snaWQnLCBpdGVtSWRdXSksIGNhbGxiYWNrKTsKICAgICAgICB9OwogICAgICAgIFJvdXRlLnN4Yl9hbmhhbyA9ICJodHRwOi8vd3d3LmxlbHVud2VuLmNvbS9lL2FjdGlvbi9MaXN0SW5mby8/Y2xhc3NpZD00NSI7CiAgICAgICAgUm91dGUuc3hiX2tleSA9ICJzeGJfYW5oYW8iOwogICAgICAgIFJvdXRlLmNvbmZpZyA9ICIvY29uZmlnL3F1ZXJ5IjsKICAgICAgICBSb3V0ZS5oaXN0b3J5ID0gIi9oaXN0b3J5LyI7CiAgICAgICAgUm91dGUuYmlsaSA9ICIvdG9vbHMvYmlsaSI7CiAgICAgICAgUm91dGUuY291cG9ucyA9ICIvdGIvaW5mb3MvIjsKICAgICAgICByZXR1cm4gUm91dGU7CiAgICB9KCkpOwoKICAgIHZhciBIaXN0b3J5U2VydmljZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICAgICAgX19leHRlbmRzKEhpc3RvcnlTZXJ2aWNlLCBfc3VwZXIpOwogICAgICAgIGZ1bmN0aW9uIEhpc3RvcnlTZXJ2aWNlKCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKICAgICAgICAgICAgX3RoaXMucnVsZXMgPSBuZXcgTWFwKFsKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5UTWFsbCwgL2RldGFpbC50bWFsbC5jb21cL2l0ZW0uaHRtL2ldLAogICAgICAgICAgICAgICAgW1NpdGVFbnVtLlRhb0JhbywgL2l0ZW0udGFvYmFvLmNvbS9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5KaW5nRG9uZywgL2l0ZW0uamQuY29tXC9bMC05XSouaHRtbC9pXSwKICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CiAgICAgICAgSGlzdG9yeVNlcnZpY2UucHJvdG90eXBlLmxvYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5hcHBlbmRDc3NDb250ZW50KHRoaXMuZ2V0SGlzdG9yeUNzcygpKTsKICAgICAgICB9OwogICAgICAgIEhpc3RvcnlTZXJ2aWNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuaW5qZWN0SGlzdG9yeSgpOwogICAgICAgIH07CiAgICAgICAgSGlzdG9yeVNlcnZpY2UucHJvdG90eXBlLmluamVjdEhpc3RvcnkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zaXRlKSB7CiAgICAgICAgICAgICAgICBjYXNlIFNpdGVFbnVtLlRhb0JhbzoKICAgICAgICAgICAgICAgIGNhc2UgU2l0ZUVudW0uVE1hbGw6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0SGlzdG9yeVRhbygpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBTaXRlRW51bS5KaW5nRG9uZzoKICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRIaXN0b3J5SmQoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgSGlzdG9yeVNlcnZpY2UucHJvdG90eXBlLmluaXRIaXN0b3J5VGFvID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoJCgiI0pfRGV0YWlsTWV0YSIpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgQ29yZS5hcHBlbmRUbygiI0pfRGV0YWlsTWV0YSIsIHRoaXMuZ2V0SGlzdG9yeUh0bWwoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBDb3JlLmFwcGVuZFRvKCIjZGV0YWlsIiwgdGhpcy5nZXRIaXN0b3J5SHRtbCgpICsgIjxici8+Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5Jbml0UHJpY2VIaXN0b3J5KCk7CiAgICAgICAgfTsKICAgICAgICBIaXN0b3J5U2VydmljZS5wcm90b3R5cGUuaW5pdEhpc3RvcnlKZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKCQoIi5wcm9kdWN0LWludHJvIikubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBDb3JlLmFwcGVuZFRvKCIucHJvZHVjdC1pbnRybyIsIHRoaXMuZ2V0SGlzdG9yeUh0bWwoKSk7CiAgICAgICAgICAgICAgICB0aGlzLkluaXRQcmljZUhpc3RvcnkoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5pbml0SGlzdG9yeUpkLCAyMDAwKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgSGlzdG9yeVNlcnZpY2UucHJvdG90eXBlLkluaXRQcmljZUhpc3RvcnkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgICQoIiN2aXAtcGx1Z2luLW91dHNpZGUiKS5zaG93KCk7CiAgICAgICAgICAgIHRoaXMudGhlbWUoKTsKICAgICAgICAgICAgdGhpcy5jaGFydE1zZygiXHU1Mzg2XHU1M0YyXHU0RUY3XHU2ODNDXHU2N0U1XHU4QkUyXHU0RTJEIik7CiAgICAgICAgICAgIFJvdXRlLnF1ZXJ5SGlzdG9yeShSdW50aW1lLnVybCwgdGhpcy5zaXRlLnRvU3RyaW5nKCksIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICB2YXIgbXNnID0gIiI7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiLnZpcC1wbHVnaW4tb3V0c2lkZS1jaGFydC1jb250YWluZXIiKS5odG1sKCI8ZGl2IGlkPVwidmlwLXBsdWdpbi1vdXRzaWRlLWNoYXJ0LWNvbnRhaW5lci1saW5lXCI+PC9kaXY+Iik7CiAgICAgICAgICAgICAgICAgICAgZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aXAtcGx1Z2luLW91dHNpZGUtY2hhcnQtY29udGFpbmVyLWxpbmUiKSwgX3RoaXMudGhlbWUoKSkuc2V0T3B0aW9uKF90aGlzLmdldENoYXJ0T3B0aW9uKGRhdGEuZGF0YSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbXNnID0gIlx1NjcyQVx1NjdFNVx1NTIzMFx1NTM4Nlx1NTNGMlx1NjU3MFx1NjM2RSI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpcy5jaGFydE1zZyhtc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIEhpc3RvcnlTZXJ2aWNlLnByb3RvdHlwZS5nZXRIaXN0b3J5SHRtbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICI8ZGl2IGlkPVwidmlwLXBsdWdpbi1vdXRzaWRlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ2aXAtcGx1Z2luLW91dHNpZGUtaGlzdG9yeVwiIGNsYXNzPVwidmlwLXBsdWdpbi1vdXRzaWRlLWhpc3RvcnlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2aXAtcGx1Z2luLW91dHNpZGUtY2hhcnQtY29udGFpbmVyXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInZpcC1wbHVnaW4tb3V0c2lkZS1oaXN0b3J5LXRpcFwiPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICAgIFxuICAgICAgICAgICAgICAgIDwvZGl2PiI7CiAgICAgICAgfTsKICAgICAgICBIaXN0b3J5U2VydmljZS5wcm90b3R5cGUuZ2V0SGlzdG9yeUNzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICJcbiAgICAgICAgI3ZpcC1wbHVnaW4tb3V0c2lkZSB7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xuICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICBjbGVhcjogYm90aDtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmVcbiAgICAgICAgfVxuICAgICAgICAjdmlwLXBsdWdpbi1vdXRzaWRlIC52aXAtcGx1Z2luLW91dHNpZGUtaGlzdG9yeSAudmlwLXBsdWdpbi1vdXRzaWRlLWhpc3RvcnktdGlwIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgbGVmdDogNTAlO1xuICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKSB0cmFuc2xhdGVZKC01MCUpXG4gICAgICAgIH1cbiAgICAgICAgI3ZpcC1wbHVnaW4tb3V0c2lkZSAudmlwLXBsdWdpbi1vdXRzaWRlLWhpc3RvcnkgLCN2aXAtcGx1Z2luLW91dHNpZGUtY2hhcnQtYm9keXtcbiAgICAgICAgICAgIGhlaWdodDogMzAwcHg7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlXG4gICAgICAgIH0gICAgXG4gICAgICAgICN2aXAtcGx1Z2luLW91dHNpZGUgLnZpcC1wbHVnaW4tb3V0c2lkZS1oaXN0b3J5IC52aXAtcGx1Z2luLW91dHNpZGUtY2hhcnQtY29udGFpbmVyLFxuICAgICAgICAjdmlwLXBsdWdpbi1vdXRzaWRlLWNoYXJ0LWNvbnRhaW5lci1saW5lIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlXG4gICAgICAgIH0iOwogICAgICAgIH07CiAgICAgICAgSGlzdG9yeVNlcnZpY2UucHJvdG90eXBlLmNoYXJ0TXNnID0gZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAkKCIudmlwLXBsdWdpbi1vdXRzaWRlLWhpc3RvcnktdGlwIikuaHRtbChtc2cpOwogICAgICAgIH07CiAgICAgICAgSGlzdG9yeVNlcnZpY2UucHJvdG90eXBlLmdldENoYXJ0T3B0aW9uID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICAgICAgdmFyIHRleHQgPSAiXHU1Mzg2XHU1M0YyXHU0RjRFXHU0RUY3XHVGRjFBe3JlZHxcdUZGRTUiICsgZGF0YS5taW4gKyAifSAoIHtyZWR8IiArIGRhdGEuZGF0ZSArICJ9ICkgXHU1MjA2XHU2NzkwXHVGRjFBIiArIGRhdGEubWFyazsKICAgICAgICAgICAgdmFyIGNoYXJ0T3B0aW9uID0gbmV3IExpbmVzT3B0aW9uKCk7CiAgICAgICAgICAgIHZhciBkYXRhcyA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICB2YXIgbCA9IFtdOwogICAgICAgICAgICAgICAgZGF0YS5wcmljZV9kZXRhaWwuZm9yRWFjaChmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgICAgIHZhciBwID0gewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB2LnRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LnRpbWVzdGFtcCwgdi5wcmljZSwgdi5tYXJrCiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGwucHVzaChwKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGw7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNoYXJ0T3B0aW9uID0gewogICAgICAgICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgICAgICAgICBsZWZ0OiAiY2VudGVyIiwKICAgICAgICAgICAgICAgICAgICBzdWJ0ZXh0OiB0ZXh0LAogICAgICAgICAgICAgICAgICAgIHN1YnRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIiMwMDAiLAogICAgICAgICAgICAgICAgICAgICAgICByaWNoOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogInJlZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogImF4aXMiLAogICAgICAgICAgICAgICAgICAgIGF4aXNQb2ludGVyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjcm9zcyIKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKHBhcmFtcykgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSBwYXJhbXNbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUocGFyYW1zLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGhTdHIgPSBtb250aC50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF5U3RyID0gZGF5LnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb250aCA8IDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aFN0ciA9ICIwIiArIG1vbnRoOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXkgPCAxMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5U3RyID0gIjAiICsgZGF5OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiXHU2NUU1XHU2NzFGXHVGRjFBIiArIHllYXIgKyAiLSIgKyBtb250aFN0ciArICItIiArIGRheVN0ciArICI8YnIvPlx1NEVGN1x1NjgzQ1x1RkYxQVx1RkZFNSIgKyBwYXJhbXMudmFsdWVbMV0udG9GaXhlZCgyKSArIChwYXJhbXMudmFsdWVbMl0gPT0gIiIgPyAiIiA6ICI8YnIvPiIgKyBwYXJhbXMudmFsdWVbMl0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCwKICAgICAgICAgICAgICAgICAgICByaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgdG9wOiA1MCwKICAgICAgICAgICAgICAgICAgICBib3R0b206IDEwLAogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHhBeGlzOiB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RpbWUnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidmFsdWUiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VyaWVzOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAibGluZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA6ICJlbmQiLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhcyhkYXRhKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1N5bWJvbDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbFNpemU6IDMsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEuNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiI2ZmMDAzNiIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIHN0ZXAgPSAxMDsKICAgICAgICAgICAgY2hhcnRPcHRpb24ueUF4aXMgPSB7CiAgICAgICAgICAgICAgICBtaW46IE1hdGguZmxvb3IoZGF0YS5taW4gKiAwLjkgLyBzdGVwKSAqIHN0ZXAsCiAgICAgICAgICAgICAgICBtYXg6IE1hdGguY2VpbChkYXRhLm1heCAqIDEuMSAvIHN0ZXApICogc3RlcAogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgbGluZSA9IChfYSA9IGNoYXJ0T3B0aW9uLnNlcmllcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBvcCgpOwogICAgICAgICAgICBsaW5lLm1hcmtQb2ludCA9IHsKICAgICAgICAgICAgICAgIGRhdGE6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkYXRhLm1pbiwKICAgICAgICAgICAgICAgICAgICAgICAgY29vcmQ6IFtkYXRhLmRhdGUsIGRhdGEubWluXSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogIuacgOWwj+WAvCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICJncmVlbiIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YS5tYXgsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkOiBbZGF0YS5tYXhfZGF0ZSwgZGF0YS5tYXhdLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAi5pyA5aSn5YC8IiwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogInJlZCIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgKF9iID0gY2hhcnRPcHRpb24uc2VyaWVzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucHVzaChsaW5lKTsKICAgICAgICAgICAgY2hhcnRPcHRpb24uZGF0YVpvb20gPSBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogImluc2lkZSIsCiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgZW5kOiAxMDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXTsKICAgICAgICAgICAgcmV0dXJuIGNoYXJ0T3B0aW9uOwogICAgICAgIH07CiAgICAgICAgSGlzdG9yeVNlcnZpY2UucHJvdG90eXBlLnRoZW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdGhlbWUgPSB7CiAgICAgICAgICAgICAgICBjb2xvcjogWwogICAgICAgICAgICAgICAgICAgICcjMmVjN2M5JywgJyNiNmEyZGUnLCAnIzVhYjFlZicsICcjZmZiOTgwJywgJyNkODdhODAnLAogICAgICAgICAgICAgICAgICAgICcjOGQ5OGIzJywgJyNlNWNmMGQnLCAnIzk3YjU1MicsICcjOTU3MDZkJywgJyNkYzY5YWEnLAogICAgICAgICAgICAgICAgICAgICcjMDdhMmE0JywgJyM5YTdmZDEnLCAnIzU4OGRkNScsICcjZjU5OTRlJywgJyNjMDUwNTAnLAogICAgICAgICAgICAgICAgICAgICcjNTk2NzhjJywgJyNjOWFiMDAnLCAnIzdlYjAwYScsICcjNmY1NTUzJywgJyNjMTQwODknCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgICAgICAgICBpdGVtR2FwOiA4LAogICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiAnbm9ybWFsJywKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMDA4YWNkJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgICAgICAgICAgICBpdGVtR2FwOiA4CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGF0YVJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoOiAxNSwKICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjMmVjN2M5JywgJyNiNmEyZGUnXQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRvb2xib3g6IHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjMWU5MGZmJywgJyMxZTkwZmYnLCAnIzFlOTBmZicsICcjMWU5MGZmJ10sCiAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlQ29sb3I6ICcjZmY0NTAwJywKICAgICAgICAgICAgICAgICAgICBpdGVtR2FwOiA4CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoNTAsNTAsNTAsMC41KScsCiAgICAgICAgICAgICAgICAgICAgYXhpc1BvaW50ZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwOGFjZCcKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc3NTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMDA4YWNkJwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDIwMCwyMDAsMjAwLDAuMiknCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZGF0YVpvb206IHsKICAgICAgICAgICAgICAgICAgICBkYXRhQmFja2dyb3VuZENvbG9yOiAnI2VmZWZmZicsCiAgICAgICAgICAgICAgICAgICAgZmlsbGVyQ29sb3I6ICdyZ2JhKDE4MiwxNjIsMjIyLDAuMiknLAogICAgICAgICAgICAgICAgICAgIGhhbmRsZUNvbG9yOiAnIzAwOGFjZCcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBncmlkOiB7CiAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjZWVlJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNhdGVnb3J5QXhpczogewogICAgICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMDA4YWNkJwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzcGxpdExpbmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjZWVlJ10KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB2YWx1ZUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICBheGlzTGluZTogewogICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzAwOGFjZCcKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3BsaXRBcmVhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFsncmdiYSgyNTAsMjUwLDI1MCwwLjEpJywgJ3JnYmEoMjAwLDIwMCwyMDAsMC4xKSddCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNwbGl0TGluZTogewogICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBbJyNlZWUnXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBvbGFyOiB7CiAgICAgICAgICAgICAgICAgICAgYXhpc0xpbmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNkZGQnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHNwbGl0QXJlYTogewogICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBhcmVhU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBbJ3JnYmEoMjUwLDI1MCwyNTAsMC4yKScsICdyZ2JhKDIwMCwyMDAsMjAwLDAuMiknXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzcGxpdExpbmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNkZGQnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdGltZWxpbmU6IHsKICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjMDA4YWNkJwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgY29udHJvbFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogeyBjb2xvcjogJyMwMDhhY2QnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVtcGhhc2lzOiB7IGNvbG9yOiAnIzAwOGFjZCcgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiAnZW1wdHlDaXJjbGUnLAogICAgICAgICAgICAgICAgICAgIHN5bWJvbFNpemU6IDMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBiYXI6IHsKICAgICAgICAgICAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW1waGFzaXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogNQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxpbmU6IHsKICAgICAgICAgICAgICAgICAgICBzbW9vdGg6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiAnZW1wdHlDaXJjbGUnLAogICAgICAgICAgICAgICAgICAgIHN5bWJvbFNpemU6IDMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBrOiB7CiAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZDg3YTgwJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yMDogJyMyZWM3YzknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZDg3YTgwJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjA6ICcjMmVjN2M5JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNjYXR0ZXI6IHsKICAgICAgICAgICAgICAgICAgICBzeW1ib2w6ICdjaXJjbGUnLAogICAgICAgICAgICAgICAgICAgIHN5bWJvbFNpemU6IDQKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByYWRhcjogewogICAgICAgICAgICAgICAgICAgIHN5bWJvbDogJ2VtcHR5Q2lyY2xlJywKICAgICAgICAgICAgICAgICAgICBzeW1ib2xTaXplOiAzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWFwOiB7CiAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZGRkJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2Q4N2E4MCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVtcGhhc2lzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmVhU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNmZTk5NGUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZ2IoMTAwLDAsMCknCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZvcmNlOiB7CiAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua1N0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlQ29sb3I6ICcjMWU5MGZmJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNob3JkOiB7CiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNCwKICAgICAgICAgICAgICAgICAgICBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMTI4LCAxMjgsIDEyOCwgMC41KScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9yZFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMTI4LCAxMjgsIDEyOCwgMC41KScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVtcGhhc2lzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMTI4LCAxMjgsIDEyOCwgMC41KScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9yZFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JnYmEoMTI4LCAxMjgsIDEyOCwgMC41KScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2F1Z2U6IHsKICAgICAgICAgICAgICAgICAgICBzdGFydEFuZ2xlOiAyMjUsCiAgICAgICAgICAgICAgICAgICAgZW5kQW5nbGU6IC00NSwKICAgICAgICAgICAgICAgICAgICBheGlzTGluZTogewogICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBbWzAuMiwgJyMyZWM3YzknXSwgWzAuOCwgJyM1YWIxZWYnXSwgWzEsICcjZDg3YTgwJ11dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGF4aXNUaWNrOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0TnVtYmVyOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAxNSwKICAgICAgICAgICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2F1dG8nCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGF4aXNMYWJlbDogewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYXV0bycKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc3BsaXRMaW5lOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogMjIsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdhdXRvJwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwb2ludGVyOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1LAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ2F1dG8nCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzMzMycKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdhdXRvJwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICflvq7ova/pm4Xpu5EsIEFyaWFsLCBWZXJkYW5hLCBzYW5zLXNlcmlmJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gdGhlbWU7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gSGlzdG9yeVNlcnZpY2U7CiAgICB9KFBsdWdpbkJhc2UpKTsKCiAgICB2YXIgVGFvQmFvU2VydmljZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICAgICAgX19leHRlbmRzKFRhb0Jhb1NlcnZpY2UsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gVGFvQmFvU2VydmljZSgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICAgICAgICAgIF90aGlzLnJ1bGVzID0gbmV3IE1hcChbCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uVGFvQmFvLCAvdGFvYmFvLmNvbS9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5UTWFsbCwgL3RtYWxsL2ldCiAgICAgICAgICAgIF0pOwogICAgICAgICAgICBfdGhpcy5VcmxUYWcgPSAiV2FuZGhpX3FMaW5rIjsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICBUYW9CYW9TZXJ2aWNlLnByb3RvdHlwZS5nZXRSdWxlcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJNZXRob2Qgbm90IGltcGxlbWVudGVkLiIpOwogICAgICAgIH07CiAgICAgICAgVGFvQmFvU2VydmljZS5wcm90b3R5cGUubG9hZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBDb3JlLmFwcGVuZENzcygiLy9jZG4ud2FuZGhpLmNvbS9zdHlsZS9leHRlbnN0aW9uL2h1aS5zdHlsZS5jc3MiKTsKICAgICAgICB9OwogICAgICAgIFRhb0Jhb1NlcnZpY2UucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgICAgIHRoaXMuaGlzdG9yeVNlcnZpY2UubGlua1Rlc3QoKSAmJiB0aGlzLmhpc3RvcnlTZXJ2aWNlLlByb2Nlc3MoKTsKICAgICAgICB9OwogICAgICAgIFRhb0Jhb1NlcnZpY2UucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgdmFyIGluaXQgPSAiPGRpdiBpZD0nd2FuZGhpX2Rpdic+PHRhYmxlIGNsYXNzPSd3YW5kaGlfdGFiJyBpZD0nd2FuZGhpX3RhYmxlJz48dGhlYWQ+PHRyPjx0aD48YiBzdHlsZT0nY3Vyc29yOnBvaW50ZXInPlx1NEYxOFx1NjBFMFx1NTIzODwvYj48L3RoPjx0aD5cdTUyMzhcdTU0MEU8L3RoPjx0aD5cdTY3MDkgXHU2NTQ4IFx1NjcxRjwvdGg+PHRoPlx1NjRDRFx1NEY1QzwvdGg+PC90cj48L3RoZWFkPjx0cj48dGQgY29sc3Bhbj0nNCc+XHU2QjYzXHU1NzI4XHU2N0U1XHU4QkUyXHU0RjE4XHU2MEUwXHU0RkUxXHU2MDZGXHVGRjBDXHU4QkY3XHU3QTBEXHU1MDE5Li4uPC90ZD48L3RyPjwvdGFibGU+PC9kaXY+IjsKICAgICAgICAgICAgJCgnI0pfTGlua0Jhc2tldCcpLnBhcmVudCgpLnBhcmVudCgpLnByZXBlbmQoaW5pdCk7CiAgICAgICAgICAgICQoJy5KX0xpbmtBZGQnKS5wYXJlbnQoKS5wYXJlbnQoKS5wcmVwZW5kKGluaXQpOwogICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5ydWxlcy5nZXQoU2l0ZUVudW0uVGFvQmFvKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRlc3QodGhpcy5jb3JlLmN1cnJlbnRVcmwoKSkpIHsKICAgICAgICAgICAgICAgICQoJyN3YW5kaGlfdGFibGUnKS5hZGRDbGFzcygnd2FuZGhpX3RhYl90YW9iYW8nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICQoJyN3YW5kaGlfdGFibGUnKS5hZGRDbGFzcygnd2FuZGhpX3RhYl90bWFsbCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFJvdXRlLnF1ZXJ5Q291cG9ucyh0aGlzLmNvcmUuZ2V0UGFyKCdpZCcpLCBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gX3RoaXMuaW5pdEVsZW1lbnQoZGF0YSk7IH0pOwogICAgICAgIH07CiAgICAgICAgVGFvQmFvU2VydmljZS5wcm90b3R5cGUuaW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAkKCIjd2FuZGhpX3RhYmxlIHRib2R5IHRyIikucmVtb3ZlKCk7CiAgICAgICAgICAgIHZhciByb3cgPSAiIjsKICAgICAgICAgICAgaWYgKGRhdGEuY29kZSkgewogICAgICAgICAgICAgICAgZGF0YS5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICByb3cgKz0gIjx0cj48dGQ+IiArIGUucXVhbl9jb250ZXh0ICsgIjwvdGQ+PHRkPiIgKyBlLmFmdGVyX3ByaWNlICsgIjwvdGQ+PHRkPiIgKyBlLnF1YW5fdGltZSArICI8L3RkPjx0ZD48YiBvbmNsaWNrPXdpbmRvdy5vcGVuKGRlY29kZVVSSUNvbXBvbmVudCgnIiArIGUucXVhbl9saW5rICsgIicpKSBzdHlsZT0nY3Vyc29yOnBvaW50ZXInPlx1OTg4Nlx1NTNENjwvYj48L3RkPjwvdHI+IjsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcm93ID0gIjx0cj48dGQgY29sc3Bhbj0nNCc+XHU4RkQ5XHU0RTJBXHU1NTQ2XHU1NEMxXHU2Q0ExXHU2NzA5XHU4RDg1XHU1MDNDXHU0RjE4XHU2MEUwXHU1MjM4PC90ZD48L3RyPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJCgiI3dhbmRoaV90YWJsZSB0Ym9keSIpLmFwcGVuZChyb3cpOwogICAgICAgIH07CiAgICAgICAgdmFyIF9hOwogICAgICAgIF9fZGVjb3JhdGUoWwogICAgICAgICAgICBXYW5kaGlBdXRvLAogICAgICAgICAgICBfX21ldGFkYXRhKCJkZXNpZ246dHlwZSIsIHR5cGVvZiAoX2EgPSB0eXBlb2YgSGlzdG9yeVNlcnZpY2UgIT09ICJ1bmRlZmluZWQiICYmIEhpc3RvcnlTZXJ2aWNlKSA9PT0gImZ1bmN0aW9uIiA/IF9hIDogT2JqZWN0KQogICAgICAgIF0sIFRhb0Jhb1NlcnZpY2UucHJvdG90eXBlLCAiaGlzdG9yeVNlcnZpY2UiLCB2b2lkIDApOwogICAgICAgIHJldHVybiBUYW9CYW9TZXJ2aWNlOwogICAgfShQbHVnaW5CYXNlKSk7CgogICAgdmFyIEJpbGlJbWdTZXJ2aWNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoQmlsaUltZ1NlcnZpY2UsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gQmlsaUltZ1NlcnZpY2UoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwogICAgICAgICAgICBfdGhpcy5ydWxlcyA9IG5ldyBNYXAoWwogICAgICAgICAgICAgICAgW1NpdGVFbnVtLkppbmdEb25nLCAvYmlsaWJpbGkuY29tXC92aWRlb1wvW2F2fGJ2XSovaV0KICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CiAgICAgICAgQmlsaUltZ1NlcnZpY2UucHJvdG90eXBlLmxvYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgQ29yZS5hcHBlbmRDc3MoIi8vbGliLmJhb21pdHUuY29tL2xheWVyLzMuMS4xL3RoZW1lL2RlZmF1bHQvbGF5ZXIuY3NzIik7CiAgICAgICAgfTsKICAgICAgICBCaWxpSW1nU2VydmljZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmFkZEJ0bigpOwogICAgICAgIH07CiAgICAgICAgQmlsaUltZ1NlcnZpY2UucHJvdG90eXBlLmFkZEJ0biA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoJCgiLnZpZGVvLWRhdGEiKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJCgiLmJpbGliaWxpLXBsYXllci12aWRlby1pbmZvLXBlb3BsZS1udW1iZXIiKSAmJiAoJCgnLmNvaW4nKS50ZXh0KCkudHJpbSgpICE9PSAiLS0iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkKCIudmlkZW8tZGF0YSIpLmxhc3QoKS5hcHBlbmQoQmlsaUltZ1NlcnZpY2UuYnRuKTsKICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcjZmluZGltZycsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlLnF1ZXJ5QmlsaUltZyhmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsZXJ0Lm9wZW4oIlx1NUMwMVx1OTc2Mlx1OTE3MSIsICI8aW1nIHNyYz1cIiIgKyByZXMuZGF0YSArICJcIiBzdHlsZT1cIndpZHRoOiA3MDVweDtoZWlnaHQ6IDQwMHB4O1wiPiIsIFsnNzI1cHgnLCAnNDAwcHgnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGVydC5lcnJvcigiXHU1NENFXHU1NERGXHU2Q0ExXHU2MjdFXHU1MjMwXHU1QzAxXHU5NzYyXHU1NEU2XHVGRjBDXHU4OTgxXHU0RTBEXHU4RERGXHU0RjVDXHU4MDA1XHU2MkE1XHU1NDRBXHU0RTAwXHU0RTBCXHVGRjFGIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkQnRuKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9OwogICAgICAgIEJpbGlJbWdTZXJ2aWNlLmJ0biA9ICJcbiAgICA8c3BhbiBpZD1cImZpbmRpbWdcIiBzdHlsZT1cIlxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmYjcxOTk7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbWFyZ2luLWxlZnQ6IDFyZW07XG4gICAgcGFkZGluZzowLjVyZW07XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGJvcmRlci1yYWRpdXM6IDFyZW07XG4gICAgXCI+XG4gICAgICAgIFx1ODNCN1x1NTNENlx1NUMwMVx1OTc2MlxuICAgIDwvc3Bhbj4iOwogICAgICAgIHJldHVybiBCaWxpSW1nU2VydmljZTsKICAgIH0oUGx1Z2luQmFzZSkpOwoKICAgIHZhciBNb3ZpZVNlcnZpY2UgPSAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgICAgIF9fZXh0ZW5kcyhNb3ZpZVNlcnZpY2UsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gTW92aWVTZXJ2aWNlKCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgICAgICBfdGhpcy5ydWxlcyA9IG5ldyBNYXAoWwogICAgICAgICAgICAgICAgW1NpdGVFbnVtLllvdUt1LCAveW91a3UvaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uSVFpWWksIC9pcWl5aS9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5MZVNoaSwgL2xlLmNvbS9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5UZW5jZW50X1YsIC92LnFxL2ldLAogICAgICAgICAgICAgICAgW1NpdGVFbnVtLlR1RG91LCAvdHVkb3UvaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uTWFuZ0d1bywgL21ndHYvaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uU29IdSwgL3NvaHUvaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uQWNmdW4sIC9hY2Z1bi9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5CaWxpQmlsaSwgL2JpbGliaWxpL2ldLAogICAgICAgICAgICAgICAgW1NpdGVFbnVtLk0xOTA1LCAvMTkwNS9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5QUFRWLCAvcHB0di9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5ZaW5ZdWVUYWksIC95aW55dWV0YWkvXSwKICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIF90aGlzLm1lbnUgPSBuZXcgQ29tbW9uLk1lbnUoKTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICBNb3ZpZVNlcnZpY2UucHJvdG90eXBlLmxvYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiAoJCkgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICBDb3JlLmFwcGVuZEpzKCIvL2xpYi5iYW9taXR1LmNvbS9qcXVlcnkvMS4xMi40L2pxdWVyeS5taW4uanMiKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgTW92aWVTZXJ2aWNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMubWVudS5Jbml0KFsKICAgICAgICAgICAgICAgIHsgdGl0bGU6ICJcdTc1MzVcdTVGNzFcdTY0MUNcdTdEMjIiLCBzaG93OiAiXHU3NTM1XHU1RjcxPGJyPlx1NjQxQ1x1N0QyMiIsIHR5cGU6ICJzZWFyY2giIH0sCiAgICAgICAgICAgICAgICB7IHRpdGxlOiAiXHU4OUM2XHU5ODkxXHU4OUUzXHU2NzkwIiwgc2hvdzogIlx1ODlDNlx1OTg5MTxicj5cdTg5RTNcdTY3OTAiLCB0eXBlOiAicHJvY2VzcyIgfSwKICAgICAgICAgICAgICAgIHsgdGl0bGU6ICJcdTdFRERcdTRFMTZcdTU5N0RcdTUyMzgiLCBzaG93OiAiXHU3RUREXHU0RTE2PGJyPlx1NTk3RFx1NTIzOCIsIHR5cGU6ICJ0YiIgfSwKICAgICAgICAgICAgICAgIHsgdGl0bGU6ICJcdTRFQUNcdTRFMUNcdTU5N0RcdTUyMzgiLCBzaG93OiAiXHU0RUFDXHU0RTFDPGJyPlx1NTk3RFx1NTIzOCIsIHR5cGU6ICJqZCIgfQogICAgICAgICAgICBdLCB0aGlzLl9vbkNsaWNrKTsKICAgICAgICB9OwogICAgICAgIE1vdmllU2VydmljZS5wcm90b3R5cGUuX29uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnW2RhdGEtY2F0PXByb2Nlc3NdJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQ29yZS5vcGVuKCdodHRwOi8vdHYud2FuZGhpLmNvbS9nby5odG1sP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLWNhdD1zZWFyY2hdJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQ29yZS5vcGVuKCdodHRwOi8vdHYud2FuZGhpLmNvbS8nKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnW2RhdGEtY2F0PXRiXScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIENvcmUub3BlbignaHR0cDovL3NpZ24ud2FuZGhpLmNvbS9qdW1wLnBocD90YXJnZXQ9aHR0cHM6Ly9hcGkud2FuZGhpLmNvbS9nb3RvL0RVVkFGUWdaVEVFVkZBUWNEaFlLU0ZrRERoOVhDbDg9Jyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLWNhdD1qZF0nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBDb3JlLm9wZW4oJ2h0dHA6Ly9zaWduLndhbmRoaS5jb20vanVtcC5waHA/dGFyZ2V0PWh0dHBzOi8vYXBpLndhbmRoaS5jb20vZ290by9EVVZBRlFnWlRGd0dUVmhIRHhrTFYxcElCbDVaJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIE1vdmllU2VydmljZTsKICAgIH0oUGx1Z2luQmFzZSkpOwoKICAgIHZhciBKZFNlcnZpY2UgPSAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgICAgIF9fZXh0ZW5kcyhKZFNlcnZpY2UsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gSmRTZXJ2aWNlKCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwogICAgICAgICAgICBfdGhpcy5ydWxlcyA9IG5ldyBNYXAoWwogICAgICAgICAgICAgICAgW1NpdGVFbnVtLkppbmdEb25nLCAvaXRlbS5qZC9pXQogICAgICAgICAgICBdKTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICBKZFNlcnZpY2UucHJvdG90eXBlLmxvYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5oaXN0b3J5U2VydmljZS5saW5rVGVzdCgpICYmIHRoaXMuaGlzdG9yeVNlcnZpY2UuUHJvY2VzcygpOwogICAgICAgIH07CiAgICAgICAgSmRTZXJ2aWNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBidG4gPSAiPGEgaHJlZj1cImphdmFzY3JpcHQ6O1wiIGNsYXNzPVwiYnRuLXNwZWNpYWwxIGJ0bi1sZyBidG4teWhqXCI+PHNwYW4gY2xhc3M9XCJcIj5cdTY3RTVcdThCRTJcdTRGMThcdTYwRTBcdTUyMzg8L3NwYW4+PC9hPiI7CiAgICAgICAgICAgIHZhciBrZXl3b3JkcyA9ICQoIi5za3UtbmFtZSIpLnRleHQoKS50cmltKCk7CiAgICAgICAgICAgICQoIiNjaG9vc2UtYnRucyIpLnByZXBlbmQoYnRuKTsKICAgICAgICAgICAgJCgiLmJ0bi15aGoiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBDb3JlLm9wZW4oImh0dHA6Ly9qZC5odWl6aGVrLmNvbS8/YWg9dG90YWwma3c9IiArIGVuY29kZVVSSUNvbXBvbmVudChrZXl3b3JkcykpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIHZhciBfYTsKICAgICAgICBfX2RlY29yYXRlKFsKICAgICAgICAgICAgV2FuZGhpQXV0bywKICAgICAgICAgICAgX19tZXRhZGF0YSgiZGVzaWduOnR5cGUiLCB0eXBlb2YgKF9hID0gdHlwZW9mIEhpc3RvcnlTZXJ2aWNlICE9PSAidW5kZWZpbmVkIiAmJiBIaXN0b3J5U2VydmljZSkgPT09ICJmdW5jdGlvbiIgPyBfYSA6IE9iamVjdCkKICAgICAgICBdLCBKZFNlcnZpY2UucHJvdG90eXBlLCAiaGlzdG9yeVNlcnZpY2UiLCB2b2lkIDApOwogICAgICAgIHJldHVybiBKZFNlcnZpY2U7CiAgICB9KFBsdWdpbkJhc2UpKTsKCiAgICB2YXIgVXJsSGVscGVyID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBVcmxIZWxwZXIoKSB7CiAgICAgICAgfQogICAgICAgIFVybEhlbHBlci5CaW5kID0gZnVuY3Rpb24gKENzc1NlbGVjdG9yLCBtZXRob2QsIGRvYykgewogICAgICAgICAgICAkKENzc1NlbGVjdG9yKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICAgICAgICAgIENvcmUub3BlblVybCgkKHRoaXMpLmRhdGEoJ2tleScpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBVcmxIZWxwZXIudXJsRW5jb2RlID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHVybCk7CiAgICAgICAgfTsKICAgICAgICBVcmxIZWxwZXIudXJsRGVjb2RlID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHVybCk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gVXJsSGVscGVyOwogICAgfSgpKTsKCiAgICB2YXIgTXVzaWNTZXJ2aWNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoTXVzaWNTZXJ2aWNlLCBfc3VwZXIpOwogICAgICAgIGZ1bmN0aW9uIE11c2ljU2VydmljZSgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICAgICAgX3RoaXMucnVsZXMgPSBuZXcgTWFwKFsKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5XYW5nWWksIC8xNjMoLiopc29uZy9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5UZW5jZW50X00sIC95LlFRKC4qKXNvbmcvaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uS3VHb3UsIC9rdWdvdS5jb21cL3NvbmdcLyovaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uS3VXbywgL2t1d28oLiopeWlueXVlL2ldLAogICAgICAgICAgICAgICAgW1NpdGVFbnVtLlhpYU1pLCAveGlhbWkvaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uVGFpSGUsIC90YWloZS5jb20vaV0sCiAgICAgICAgICAgICAgICBbU2l0ZUVudW0uUWluZ1RpbmcsIC9xaW5ndGluZy9pXSwKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5MaVpoaSwgL2xpemhpL2ldLAogICAgICAgICAgICAgICAgW1NpdGVFbnVtLk1pR3UsIC9taWd1L2ldLAogICAgICAgICAgICAgICAgW1NpdGVFbnVtLlhpTWFMYVlhLCAveGltYWxheWEvaV0sCiAgICAgICAgICAgIF0pOwogICAgICAgICAgICBfdGhpcy5tZW51ID0gbmV3IENvbW1vbi5NZW51KCk7CiAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CiAgICAgICAgTXVzaWNTZXJ2aWNlLnByb3RvdHlwZS5sb2FkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIENvcmUuYXBwZW5kQ3NzKCIvL2xpYi5iYW9taXR1LmNvbS9sYXllci8zLjEuMS90aGVtZS9kZWZhdWx0L2xheWVyLmNzcyIpOwogICAgICAgIH07CiAgICAgICAgTXVzaWNTZXJ2aWNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMubWVudS5Jbml0KFsKICAgICAgICAgICAgICAgIHsgdGl0bGU6ICJcdTc1MzVcdTVGNzFcdTY0MUNcdTdEMjIiLCBzaG93OiAiXHU3NTM1XHU1RjcxPGJyPlx1NjQxQ1x1N0QyMiIsIHR5cGU6ICJzZWFyY2giIH0sCiAgICAgICAgICAgICAgICB7IHRpdGxlOiAiXHU5N0YzXHU0RTUwXHU0RTBCXHU4RjdEIiwgc2hvdzogIlx1OTdGM1x1NEU1MDxicj5cdTRFMEJcdThGN0QiLCB0eXBlOiAicHJvY2VzcyIgfSwKICAgICAgICAgICAgICAgIHsgdGl0bGU6ICJcdTdFRERcdTRFMTZcdTU5N0RcdTUyMzgiLCBzaG93OiAiXHU3RUREXHU0RTE2PGJyPlx1NTk3RFx1NTIzOCIsIHR5cGU6ICJ0YiIgfSwKICAgICAgICAgICAgICAgIHsgdGl0bGU6ICJcdTRFQUNcdTRFMUNcdTU5N0RcdTUyMzgiLCBzaG93OiAiXHU0RUFDXHU0RTFDPGJyPlx1NTk3RFx1NTIzOCIsIHR5cGU6ICJqZCIgfQogICAgICAgICAgICBdLCB0aGlzLl9PbkNsaWNrKTsKICAgICAgICB9OwogICAgICAgIE11c2ljU2VydmljZS5wcm90b3R5cGUuX09uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfcnVsZXMgPSB0aGlzLnJ1bGVzOwogICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLWNhdD1wcm9jZXNzXScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgveGltYWxheWEvaS50ZXN0KFJ1bnRpbWUudXJsKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChfX0lOSVRJQUxfU1RBVEVfXyAmJiBfX0lOSVRJQUxfU1RBVEVfXy5Tb3VuZERldGFpbFBhZ2UgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIENvcmUub3BlbignaHR0cDovL211c2ljLndhbmRoaS5jb20vP2lkPScgKyBfX0lOSVRJQUxfU1RBVEVfXy5Tb3VuZERldGFpbFBhZ2UudHJhY2tJZCArICcmdHlwZT14aW1hbGF5YScpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2VBbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBzdHlsZT0icGFkZGluZzowcHggNTBweCAwcHggNTBweDsiPjx1bCBjbGFzcz0ic291bmQtbGlzdCBkT2kyIj4nOwogICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goX19JTklUSUFMX1NUQVRFX18uQWxidW1EZXRhaWxUcmFja0xpc3QudHJhY2tzSW5mby50cmFja3MsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkgeyBodG1sICs9ICc8bGkgY2xhc3M9ImRPaTIiPjxhIGhyZWY9Imh0dHA6Ly9tdXNpYy53YW5kaGkuY29tLz9pZD0nICsgaXRlbS50cmFja0lkICsgJyZ0eXBlPXhpbWFsYXlhIiB0YXJnZXQ9Il9ibGFuayI+JyArIGl0ZW0udGl0bGUgKyAnPC9hPjwvbGk+JzsgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvdWw+PC9kaXY+JzsKICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIub3Blbih7IHR5cGU6IDEsIGFyZWE6IFsnYXV0bycsICczMCUnXSwgdGl0bGU6ICJcdTRFM0FcdTRGNjBcdTYyN0VcdTUyMzBcdTRFODZcdThGRDlcdTRFOUJcdTY2RjJcdTc2RUVcdTg5RTNcdTY3OTBcdTIwMjZcdTIwMjZcdTRFQzBcdTRFNDhcdUZGMUZcdTYyMTFcdTRFMTFcdUZGMUZcdTRFRTVcdTU0MEVcdTUxOERcdThCRjRcdTU0MjciLCBzaGFkZTogMC42LCBtYXhtaW46IGZhbHNlLCBhbmltOiAyLCBjb250ZW50OiBodG1sIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKC90YWloZS5jb20vaS50ZXN0KFJ1bnRpbWUudXJsKSkgewogICAgICAgICAgICAgICAgICAgIENvcmUub3BlbignaHR0cDovL211c2ljLndhbmRoaS5jb20vP3VybD0nICsgVXJsSGVscGVyLnVybEVuY29kZShSdW50aW1lLnVybC5yZXBsYWNlKCJ0YWloZSIsICJiYWlkdSIpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBDb3JlLm9wZW4oJ2h0dHA6Ly9tdXNpYy53YW5kaGkuY29tLz91cmw9JyArIFVybEhlbHBlci51cmxFbmNvZGUoUnVudGltZS51cmwpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnW2RhdGEtY2F0PXNlYXJjaF0nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBDb3JlLm9wZW4oJ2h0dHA6Ly90di53YW5kaGkuY29tLycpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICdbZGF0YS1jYXQ9dGJdJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgQ29yZS5vcGVuKCdodHRwczovL2xpbmsuemhpaHUuY29tLz90YXJnZXQ9aHR0cHM6Ly9hcGkud2FuZGhpLmNvbS9nb3RvL0RVVkFGUWdaVEVFVkZBUWNEaFlLU0ZrRERoOVhDbDg9Jyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLWNhdD1qZF0nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBDb3JlLm9wZW4oJ2h0dHBzOi8vbGluay56aGlodS5jb20vP3RhcmdldD1odHRwczovL2FwaS53YW5kaGkuY29tL2dvdG8vRFVWQUZRZ1pURndHVFZoSER4a0xWMXBJQmw1WicpOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBNdXNpY1NlcnZpY2U7CiAgICB9KFBsdWdpbkJhc2UpKTsKCiAgICB2YXIgU3R1U2VydmljZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICAgICAgX19leHRlbmRzKFN0dVNlcnZpY2UsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gU3R1U2VydmljZSgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpczsKICAgICAgICAgICAgX3RoaXMucnVsZXMgPSBuZXcgTWFwKFsKICAgICAgICAgICAgICAgIFtTaXRlRW51bS5TWEIsIC9zaGFuZ3h1ZWJhLmNvbVwvYXNrXC8uKmh0bWwvaV0KICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CiAgICAgICAgU3R1U2VydmljZS5wcm90b3R5cGUubG9hZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAodHlwZW9mICgkKSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIENvcmUuYXBwZW5kSnMoIi8vbGliLmJhb21pdHUuY29tL2pxdWVyeS8xLjEyLjQvanF1ZXJ5Lm1pbi5qcyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIENvcmUuYXBwZW5kQ3NzKCIvL2xpYi5iYW9taXR1LmNvbS9sYXllci8zLjEuMS90aGVtZS9kZWZhdWx0L2xheWVyLmNzcyIpOwogICAgICAgIH07CiAgICAgICAgU3R1U2VydmljZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLm1lbnUuSW5pdChbCiAgICAgICAgICAgICAgICB7IHRpdGxlOiAiXHU2N0U1XHU3NzBCXHU3QjU0XHU2ODQ4Iiwgc2hvdzogIlx1NjdFNVx1NzcwQjxicj5cdTdCNTRcdTY4NDgiLCB0eXBlOiAic2VhcmNoIiB9LAogICAgICAgICAgICAgICAgeyB0aXRsZTogIlx1NjI1M1x1OEQ0Rlx1NEY1Q1x1ODAwNSIsIHNob3c6ICJcdTYyNTNcdThENEY8YnI+XHU0RjVDXHU4MDA1IiwgdHlwZTogInByb2Nlc3MiIH0sCiAgICAgICAgICAgICAgICB7IHRpdGxlOiAiXHU3RUREXHU0RTE2XHU1OTdEXHU1MjM4Iiwgc2hvdzogIlx1N0VERFx1NEUxNjxicj5cdTU5N0RcdTUyMzgiLCB0eXBlOiAidGIiIH0sCiAgICAgICAgICAgICAgICB7IHRpdGxlOiAiXHU0RUFDXHU0RTFDXHU1OTdEXHU1MjM4Iiwgc2hvdzogIlx1NEVBQ1x1NEUxQzxicj5cdTU5N0RcdTUyMzgiLCB0eXBlOiAiamQiIH0KICAgICAgICAgICAgXSwgdGhpcy5fb25DbGljayk7CiAgICAgICAgfTsKICAgICAgICBTdHVTZXJ2aWNlLnByb3RvdHlwZS5fb25DbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICdbZGF0YS1jYXQ9cHJvY2Vzc10nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBsYXllci5vcGVuKHsgdHlwZTogMSwgdGl0bGU6ICJcdThCRjdcdTYyMTFcdTU1OURcdTRFMDBcdTY3NkYiLCBzaGFkZUNsb3NlOiB0cnVlLCBhcmVhOiAnODAwcHgnLCBjb250ZW50OiAnPGltZyBzcmM9Imh0dHBzOi8vaS5sb2xpLm5ldC8yMDE5LzA1LzE0LzVjZGE2NzJhZGQ2ZjU5NDkzNC5qcGciPicgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLWNhdD1zZWFyY2hdJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgUm91dGUucXVlcnlTYngoJCgiI0hpZGRfaWQiKS52YWwoKSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQWxlcnQub3BlbigiXHU3QjU0XHU2ODQ4IiwgZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZS5zYnhGZWVkYmFjayhkYXRhaWQsIGRhdGEubXNnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5tc2cgPT0gJ3dyb25nYW5oYW8nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEFsZXJ0LnByb21wdCgiXHU1M0UzXHU0RUU0XHU5NTE5XHU4QkVGXHVGRjBDXHU4QkY3XHU1QzA2XHU1RjM5XHU1MUZBXHU3Njg0XHU5ODc1XHU5NzYyXHU0RTJEXHU3Njg0XHU1M0UzXHU0RUU0XHU1ODZCXHU1MTY1XHU1NDBFXHU5MUNEXHU4QkQ1XHVGRjAxIiwgQ29uZmlnLmdldCgic3hiX2FuaGFvIiwgIiIpLCBmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlnLnNldCgic3hiX2FuaGFvIiwgdik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGVydC5pbmZvKCJcdThCRjdcdTUxOERcdTZCMjFcdTcwQjlcdTUxRkJcdTY3RTVcdTc3MEJcdTdCNTRcdTY4NDhcdTYzMDlcdTk0QUUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIENvcmUub3BlbigiaHR0cDovL3d3dy5sZWx1bndlbi5jb20vZS9hY3Rpb24vTGlzdEluZm8vP2NsYXNzaWQ9NDUiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEFsZXJ0LmNvbmZpbSgiIiwgIlx1ODk4MVx1NEUwRFx1ODk4MVx1OERGM1x1OEY2Q1x1NTIzMFx1NjdFNVx1OEJFMlx1OTg3NVx1NzcwQlx1NzcwQlx1RkYxRiIsIFsiXHU1OTdEXHU3Njg0XHU4RDcwXHU4RDc3IiwgIlx1OEZEOFx1NjYyRlx1N0I5N1x1NEU4NiJdLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb3JlLm9wZW4oUnVudGltZS51cmwucmVwbGFjZSgnc2hhbmd4dWViYScsICJzaGFuZ3h1ZWJhMzY1IikpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnW2RhdGEtY2F0PXRiXScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIENvcmUub3BlbignaHR0cDovL3NpZ24ud2FuZGhpLmNvbS9qdW1wLnBocD90YXJnZXQ9aHR0cHM6Ly9hcGkud2FuZGhpLmNvbS9nb3RvL0RVVkFGUWdaVEVFVkZBUWNEaFlLU0ZrRERoOVhDbDg9Jyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLWNhdD1qZF0nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBDb3JlLm9wZW4oJ2h0dHA6Ly9zaWduLndhbmRoaS5jb20vanVtcC5waHA/dGFyZ2V0PWh0dHBzOi8vYXBpLndhbmRoaS5jb20vZ290by9EVVZBRlFnWlRGd0dUVmhIRHhrTFYxcElCbDVaJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIFN0dVNlcnZpY2U7CiAgICB9KFBsdWdpbkJhc2UpKTsKCiAgICB2YXIgV2FuZGhpSW5qZWN0aW9uID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBXYW5kaGlJbmplY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMucGx1Z2lucyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICB0aGlzLnBsdWdpbnMgPSBbCiAgICAgICAgICAgICAgICBDb250YWluZXIuUmVxdWlyZShVcGRhdGVTZXJ2aWNlKSwKICAgICAgICAgICAgICAgIENvbnRhaW5lci5SZXF1aXJlKEJpbGlJbWdTZXJ2aWNlKSwKICAgICAgICAgICAgICAgIENvbnRhaW5lci5SZXF1aXJlKE1vdmllU2VydmljZSksCiAgICAgICAgICAgICAgICBDb250YWluZXIuUmVxdWlyZShUYW9CYW9TZXJ2aWNlKSwKICAgICAgICAgICAgICAgIENvbnRhaW5lci5SZXF1aXJlKEpkU2VydmljZSksCiAgICAgICAgICAgICAgICBDb250YWluZXIuUmVxdWlyZShNdXNpY1NlcnZpY2UpLAogICAgICAgICAgICAgICAgQ29udGFpbmVyLlJlcXVpcmUoU3R1U2VydmljZSkKICAgICAgICAgICAgXTsKICAgICAgICB9CiAgICAgICAgV2FuZGhpSW5qZWN0aW9uLnByb3RvdHlwZS5Jbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLnBsdWdpbnMuZXZlcnkoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmxpbmtUZXN0KCkpIHsKICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKCk7IH0pLnRoZW4oZWxlbWVudC5Qcm9jZXNzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVsZW1lbnQudW5pcXVlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gV2FuZGhpSW5qZWN0aW9uOwogICAgfSgpKTsKCiAgICBDb250YWluZXIuUmVxdWlyZShXYW5kaGlJbmplY3Rpb24pLkluaXQoKTsKCn0pKSk7Cg==","requires":[{"meta":{"name":"jquery.min.js","url":"https://lib.baomitu.com/jquery/1.12.4/jquery.min.js","ts":1591001487141,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2MS4xMi40IHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihhLGIpeyJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEuZG9jdW1lbnQ/YihhLCEwKTpmdW5jdGlvbihhKXtpZighYS5kb2N1bWVudCl0aHJvdyBuZXcgRXJyb3IoImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnQiKTtyZXR1cm4gYihhKX06YihhKX0oInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWEuZG9jdW1lbnQsZT1jLnNsaWNlLGY9Yy5jb25jYXQsZz1jLnB1c2gsaD1jLmluZGV4T2YsaT17fSxqPWkudG9TdHJpbmcsaz1pLmhhc093blByb3BlcnR5LGw9e30sbT0iMS4xMi40IixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xkYS16XSkvZ2kscj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9O24uZm49bi5wcm90b3R5cGU9e2pxdWVyeTptLGNvbnN0cnVjdG9yOm4sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZWFjaCh0aGlzLGEpfSxtYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4ubWFwKHRoaXMsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5jYWxsKGIsYyxiKX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoLTEpfSxlcTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxlbmd0aCxjPSthKygwPmE/YjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYz49MCYmYj5jP1t0aGlzW2NdXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDpnLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgZyYmKGo9ZyxnPWFyZ3VtZW50c1toXXx8e30saCsrKSwib2JqZWN0Ij09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oZT1hcmd1bWVudHNbaF0pKWZvcihkIGluIGUpYT1nW2RdLGM9ZVtkXSxnIT09YyYmKGomJmMmJihuLmlzUGxhaW5PYmplY3QoYyl8fChiPW4uaXNBcnJheShjKSkpPyhiPyhiPSExLGY9YSYmbi5pc0FycmF5KGEpP2E6W10pOmY9YSYmbi5pc1BsYWluT2JqZWN0KGEpP2E6e30sZ1tkXT1uLmV4dGVuZChqLGYsYykpOnZvaWQgMCE9PWMmJihnW2RdPWMpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuImZ1bmN0aW9uIj09PW4udHlwZShhKX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4iYXJyYXkiPT09bi50eXBlKGEpfSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09YS53aW5kb3d9LGlzTnVtZXJpYzpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRvU3RyaW5nKCk7cmV0dXJuIW4uaXNBcnJheShhKSYmYi1wYXJzZUZsb2F0KGIpKzE+PTB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtpZighYXx8Im9iamVjdCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFrLmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIWsuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfWlmKCFsLm93bkZpcnN0KWZvcihiIGluIGEpcmV0dXJuIGsuY2FsbChhLGIpO2ZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxrLmNhbGwoYSxiKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hKyIiOiJvYmplY3QiPT10eXBlb2YgYXx8ImZ1bmN0aW9uIj09dHlwZW9mIGE/aVtqLmNhbGwoYSldfHwib2JqZWN0Ijp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihiKXtiJiZuLnRyaW0oYikmJihhLmV4ZWNTY3JpcHR8fGZ1bmN0aW9uKGIpe2EuZXZhbC5jYWxsKGEsYil9KShiKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCwibXMtIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTA7aWYocyhhKSl7Zm9yKGM9YS5sZW5ndGg7Yz5kO2QrKylpZihiLmNhbGwoYVtkXSxkLGFbZF0pPT09ITEpYnJlYWt9ZWxzZSBmb3IoZCBpbiBhKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT8iIjooYSsiIikucmVwbGFjZShvLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLCJzdHJpbmciPT10eXBlb2YgYT9bYV06YSk6Zy5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKGgpcmV0dXJuIGguY2FsbChiLGEsYyk7Zm9yKGQ9Yi5sZW5ndGgsYz1jPzA+Yz9NYXRoLm1heCgwLGQrYyk6YzowO2Q+YztjKyspaWYoYyBpbiBiJiZiW2NdPT09YSlyZXR1cm4gY31yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7d2hpbGUoYz5kKWFbZSsrXT1iW2QrK107aWYoYyE9PWMpd2hpbGUodm9pZCAwIT09YltkXSlhW2UrK109YltkKytdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGc9MCxoPVtdO2lmKHMoYSkpZm9yKGQ9YS5sZW5ndGg7ZD5nO2crKyllPWIoYVtnXSxnLGMpLG51bGwhPWUmJmgucHVzaChlKTtlbHNlIGZvcihnIGluIGEpZT1iKGFbZ10sZyxjKSxudWxsIT1lJiZoLnB1c2goZSk7cmV0dXJuIGYuYXBwbHkoW10saCl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZjtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGImJihmPWFbYl0sYj1hLGE9Ziksbi5pc0Z1bmN0aW9uKGEpPyhjPWUuY2FsbChhcmd1bWVudHMsMiksZD1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsYy5jb25jYXQoZS5jYWxsKGFyZ3VtZW50cykpKX0sZC5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGQpOnZvaWQgMH0sbm93OmZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfSxzdXBwb3J0Omx9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYobi5mbltTeW1ib2wuaXRlcmF0b3JdPWNbU3ltYm9sLml0ZXJhdG9yXSksbi5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2lbIltvYmplY3QgIitiKyJdIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj0hIWEmJiJsZW5ndGgiaW4gYSYmYS5sZW5ndGgsYz1uLnR5cGUoYSk7cmV0dXJuImZ1bmN0aW9uIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6ImFycmF5Ij09PWN8fDA9PT1ifHwibnVtYmVyIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9dmFyIHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqLGssbCxtLG4sbyxwLHEscixzLHQsdT0ic2l6emxlIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2EoKSx6PWdhKCksQT1nYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPSJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsTD0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLE49IlxcWyIrTCsiKigiK00rIikoPzoiK0wrIiooWypeJHwhfl0/PSkiK0wrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIitNKyIpKXwpIitMKyIqXFxdIixPPSI6KCIrTSsiKSg/OlxcKCgoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrTisiKSopfC4qKVxcKXwpIixQPW5ldyBSZWdFeHAoTCsiKyIsImciKSxRPW5ldyBSZWdFeHAoIl4iK0wrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrTCsiKyQiLCJnIiksUj1uZXcgUmVnRXhwKCJeIitMKyIqLCIrTCsiKiIpLFM9bmV3IFJlZ0V4cCgiXiIrTCsiKihbPit+XXwiK0wrIikiK0wrIioiKSxUPW5ldyBSZWdFeHAoIj0iK0wrIiooW15cXF0nXCJdKj8pIitMKyIqXFxdIiwiZyIpLFU9bmV3IFJlZ0V4cChPKSxWPW5ldyBSZWdFeHAoIl4iK00rIiQiKSxXPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK04pLFBTRVVETzpuZXcgUmVnRXhwKCJeIitPKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK0wrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK0wrIiooPzooWystXXwpIitMKyIqKFxcZCspfCkpIitMKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitLKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTCsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitMKyIqKCg/Oi1cXGQpP1xcZCopIitMKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxYPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWT0vXmhcZCQvaSxaPS9eW157XStce1xzKlxbbmF0aXZlIFx3LywkPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sXz0vWyt+XS8sYWE9Lyd8XFwvZyxiYT1uZXcgUmVnRXhwKCJcXFxcKFtcXGRhLWZdezEsNn0iK0wrIj98KCIrTCsiKXwuKSIsImlnIiksY2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPSIweCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGRhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZmEoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3PWImJmIub3duZXJEb2N1bWVudCx4PWI/Yi5ub2RlVHlwZTo5O2lmKGQ9ZHx8W10sInN0cmluZyIhPXR5cGVvZiBhfHwhYXx8MSE9PXgmJjkhPT14JiYxMSE9PXgpcmV0dXJuIGQ7aWYoIWUmJigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixwKSl7aWYoMTEhPT14JiYobz0kLmV4ZWMoYSkpKWlmKGY9b1sxXSl7aWYoOT09PXgpe2lmKCEoaj1iLmdldEVsZW1lbnRCeUlkKGYpKSlyZXR1cm4gZDtpZihqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZSBpZih3JiYoaj13LmdldEVsZW1lbnRCeUlkKGYpKSYmdChiLGopJiZqLmlkPT09ZilyZXR1cm4gZC5wdXNoKGopLGR9ZWxzZXtpZihvWzJdKXJldHVybiBILmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKSksZDtpZigoZj1vWzNdKSYmYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZikpLGR9aWYoYy5xc2EmJiFBW2ErIiAiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXgpdz1iLHM9YTtlbHNlIGlmKCJvYmplY3QiIT09Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXsoaz1iLmdldEF0dHJpYnV0ZSgiaWQiKSk/az1rLnJlcGxhY2UoYWEsIlxcJCYiKTpiLnNldEF0dHJpYnV0ZSgiaWQiLGs9dSkscj1nKGEpLGg9ci5sZW5ndGgsbD1WLnRlc3Qoayk/IiMiK2s6IltpZD0nIitrKyInXSI7d2hpbGUoaC0tKXJbaF09bCsiICIrcWEocltoXSk7cz1yLmpvaW4oIiwiKSx3PV8udGVzdChhKSYmb2EoYi5wYXJlbnROb2RlKXx8Yn1pZihzKXRyeXtyZXR1cm4gSC5hcHBseShkLHcucXVlcnlTZWxlY3RvckFsbChzKSksZH1jYXRjaCh5KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUSwiJDEiKSxiLGQsZSl9ZnVuY3Rpb24gZ2EoKXt2YXIgYT1bXTtmdW5jdGlvbiBiKGMsZSl7cmV0dXJuIGEucHVzaChjKyIgIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrIiAiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KCJkaXYiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBqYShhLGIpe3ZhciBjPWEuc3BsaXQoInwiKSxlPWMubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8QyktKH5hLnNvdXJjZUluZGV4fHxDKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oImlucHV0Ij09PWN8fCJidXR0b24iPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBoYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9hKGEpe3JldHVybiBhJiYidW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1mYS5zdXBwb3J0PXt9LGY9ZmEuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiPyJIVE1MIiE9PWIubm9kZU5hbWU6ITF9LG09ZmEuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksKGU9bi5kZWZhdWx0VmlldykmJmUudG9wIT09ZSYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoIm9udW5sb2FkIixkYSkpLGMuYXR0cmlidXRlcz1pYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9ImkiLCFhLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudCgiIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPVoudGVzdChuLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGMuZ2V0QnlJZD1pYShmdW5jdGlvbihhKXtyZXR1cm4gby5hcHBlbmRDaGlsZChhKS5pZD11LCFuLmdldEVsZW1lbnRzQnlOYW1lfHwhbi5nZXRFbGVtZW50c0J5TmFtZSh1KS5sZW5ndGh9KSxjLmdldEJ5SWQ/KGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGM9Yi5nZXRFbGVtZW50QnlJZChhKTtyZXR1cm4gYz9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoYmEsY2EpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoImlkIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPSJ1bmRlZmluZWQiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOmMucXNhP2IucXVlcnlTZWxlY3RvckFsbChhKTp2b2lkIDB9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPTAsZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpO2lmKCIqIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnA/Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpOnZvaWQgMH0scj1bXSxxPVtdLChjLnFzYT1aLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihpYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD0iPGEgaWQ9JyIrdSsiJz48L2E+PHNlbGVjdCBpZD0nIit1KyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGEucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnEucHVzaCgiWypeJF09IitMKyIqKD86Jyd8XCJcIikiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHEucHVzaCgiXFxbIitMKyIqKD86dmFsdWV8IitLKyIpIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrdSsiLV0iKS5sZW5ndGh8fHEucHVzaCgifj0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxxLnB1c2goIjpjaGVja2VkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrdSsiKyoiKS5sZW5ndGh8fHEucHVzaCgiLiMuK1srfl0iKX0pLGlhKGZ1bmN0aW9uKGEpe3ZhciBiPW4uY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtiLnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGEuYXBwZW5kQ2hpbGQoYikuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGEucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnEucHVzaCgibmFtZSIrTCsiKlsqXiR8IX5dPz0iKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxxLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IikscS5wdXNoKCIsLio6Iil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPVoudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSwiZGl2Iikscy5jYWxsKGEsIltzIT0nJ106eCIpLHIucHVzaCgiIT0iLE8pfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oInwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oInwiKSksYj1aLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxaLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SihrLGEpLUooayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9KKGssYSktSihrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGthKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9rYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZmEubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYShhLG51bGwsbnVsbCxiKX0sZmEubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFQsIj0nJDEnXSIpLGMubWF0Y2hlc1NlbGVjdG9yJiZwJiYhQVtiKyIgIl0mJighcnx8IXIudGVzdChiKSkmJighcXx8IXEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZhKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZhLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmEuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkQuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithKX0sZmEudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz0iIixkPTAsZj1hLm5vZGVUeXBlO2lmKGYpe2lmKDE9PT1mfHw5PT09Znx8MTE9PT1mKXtpZigic3RyaW5nIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYSxtYXRjaDpXLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnJlcGxhY2UoYmEsY2EpLGFbM109KGFbM118fGFbNF18fGFbNV18fCIiKS5yZXBsYWNlKGJhLGNhKSwifj0iPT09YVsyXSYmKGFbM109IiAiK2FbM10rIiAiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmEuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooImV2ZW4iPT09YVszXXx8Im9kZCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8Im9kZCI9PT1hWzNdKSk6YVszXSYmZmEuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFcuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8IiI6YyYmVS50ZXN0KGMpJiYoYj1nKGMsITApKSYmKGI9Yy5pbmRleE9mKCIpIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthKyIgIl07cmV0dXJuIGJ8fChiPW5ldyBSZWdFeHAoIihefCIrTCsiKSIrYSsiKCIrTCsifCQpIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdCgic3RyaW5nIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBhLmdldEF0dHJpYnV0ZSYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmEuYXR0cihkLGEpO3JldHVybiBudWxsPT1lPyIhPSI9PT1iOmI/KGUrPSIiLCI9Ij09PWI/ZT09PWM6IiE9Ij09PWI/ZSE9PWM6Il49Ij09PWI/YyYmMD09PWUuaW5kZXhPZihjKToiKj0iPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6IiQ9Ij09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09Yzoifj0iPT09Yj8oIiAiK2UucmVwbGFjZShQLCIgIikrIiAiKS5pbmRleE9mKGMpPi0xOiJ8PSI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPSJudGgiIT09YS5zbGljZSgwLDMpLGc9Imxhc3QiIT09YS5zbGljZSgtNCksaD0ib2YtdHlwZSI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoLHQ9ITE7aWYocSl7aWYoZil7d2hpbGUocCl7bT1iO3doaWxlKG09bVtwXSlpZihoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpcmV0dXJuITE7bz1wPSJvbmx5Ij09PWEmJiFvJiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXttPXEsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biYmalsyXSxtPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShtPSsrbiYmbSYmbVtwXXx8KHQ9bj0wKXx8by5wb3AoKSlpZigxPT09bS5ub2RlVHlwZSYmKyt0JiZtPT09Yil7a1thXT1bdyxuLHRdO2JyZWFrfX1lbHNlIGlmKHMmJihtPWIsbD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLHQ9biksdD09PSExKXdoaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKChoP20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PW0ubm9kZVR5cGUpJiYrK3QmJihzJiYobD1tW3VdfHwobVt1XT17fSksaz1sW20udW5pcXVlSURdfHwobFttLnVuaXF1ZUlEXT17fSksa1thXT1bdyx0XSksbT09PWIpKWJyZWFrO3JldHVybiB0LT1lLHQ9PT1kfHx0JWQ9PT0wJiZ0L2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLCIiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2hhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShRLCIkMSIpKTtyZXR1cm4gZFt1XT9oYShmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSxiWzBdPW51bGwsIWMucG9wKCl9fSksaGFzOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gZmEoYSxiKS5sZW5ndGg+MH19KSxjb250YWluczpoYShmdW5jdGlvbihhKXtyZXR1cm4gYT1hLnJlcGxhY2UoYmEsY2EpLGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhhKGZ1bmN0aW9uKGEpe3JldHVybiBWLnRlc3QoYXx8IiIpfHxmYS5lcnJvcigidW5zdXBwb3J0ZWQgbGFuZzogIithKSxhPWEucmVwbGFjZShiYSxjYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpfHxiLmdldEF0dHJpYnV0ZSgibGFuZyIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhKyItIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmISFhLmNoZWNrZWR8fCJvcHRpb24iPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFgudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09YiYmImJ1dHRvbiI9PT1hLnR5cGV8fCJidXR0b24iPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4iaW5wdXQiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6bmEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om5hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpuYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm5hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6bmEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpuYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bGEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bWEoYik7ZnVuY3Rpb24gcGEoKXt9cGEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBwYSxnPWZhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErIiAiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpe2MmJiEoZT1SLmV4ZWMoaCkpfHwoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1TLmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFEsIiAiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1XW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/ZmEuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiBxYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9IiI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJhKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJiJwYXJlbnROb2RlIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGosaz1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGo9Ylt1XXx8KGJbdV09e30pLGk9altiLnVuaXF1ZUlEXXx8KGpbYi51bmlxdWVJRF09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGtbMl09aFsyXTtpZihpW2RdPWssa1syXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmEoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHVhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmEoZCkpLGUmJiFlW3VdJiYoZT12YShlLGYpKSxoYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YShifHwiKiIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YShwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWEocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0ooZixsKTptW2tdKT4tMSYmKGZbal09IShnW2pdPWwpKX19ZWxzZSByPXVhKHI9PT1nP3Iuc3BsaWNlKG8sci5sZW5ndGgpOnIpLGU/ZShudWxsLGcscixpKTpILmFwcGx5KGcscil9KX1mdW5jdGlvbiB3YShhKXtmb3IodmFyIGIsYyxlLGY9YS5sZW5ndGgsZz1kLnJlbGF0aXZlW2FbMF0udHlwZV0saD1nfHxkLnJlbGF0aXZlWyIgIl0saT1nPzE6MCxrPXJhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtyYShzYShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gdmEoaT4xJiZzYShtKSxpPjEmJnFhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6IiAiPT09YVtpLTJdLnR5cGU/IioiOiIifSkpLnJlcGxhY2UoUSwiJDEiKSxjLGU+aSYmd2EoYS5zbGljZShpLGUpKSxmPmUmJndhKGE9YS5zbGljZShlKSksZj5lJiZxYShhKSl9bS5wdXNoKGMpfXJldHVybiBzYShtKX1mdW5jdGlvbiB4YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9IjAiLHQ9ZiYmW10sdT1bXSx2PWoseD1mfHxlJiZkLmZpbmQuVEFHKCIqIixrKSx5PXcrPW51bGw9PXY/MTpNYXRoLnJhbmRvbSgpfHwuMSx6PXgubGVuZ3RoO2ZvcihrJiYoaj1nPT09bnx8Z3x8ayk7cyE9PXomJm51bGwhPShsPXhbc10pO3MrKyl7aWYoZSYmbCl7bz0wLGd8fGwub3duZXJEb2N1bWVudD09PW58fChtKGwpLGg9IXApO3doaWxlKHE9YVtvKytdKWlmKHEobCxnfHxuLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9eSl9YyYmKChsPSFxJiZsKSYmci0tLGYmJnQucHVzaChsKSl9aWYocis9cyxjJiZzIT09cil7bz0wO3doaWxlKHE9YltvKytdKXEodCx1LGcsaCk7aWYoZil7aWYocj4wKXdoaWxlKHMtLSl0W3NdfHx1W3NdfHwodVtzXT1GLmNhbGwoaSkpO3U9dWEodSl9SC5hcHBseShpLHUpLGsmJiFmJiZ1Lmxlbmd0aD4wJiZyK2IubGVuZ3RoPjEmJmZhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXksaj12KSx0fTtyZXR1cm4gYz9oYShmKTpmfXJldHVybiBoPWZhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErIiAiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZhLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49ImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiYiSUQiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoYmEsY2EpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1XLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShiYSxjYSksXy50ZXN0KGpbMF0udHlwZSkmJm9hKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYShqKSwhYSlyZXR1cm4gSC5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSwhYnx8Xy50ZXN0KGEpJiZvYShiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdCgiIikuc29ydChCKS5qb2luKCIiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWEoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGphKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsInR5cGUiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD0iPGlucHV0Lz4iLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGphKCJ2YWx1ZSIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHwiaW5wdXQiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGlhKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxqYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxmYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwclsiOiJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlU29ydD1uLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sdj1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY30sdz1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHg9L148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyx5PS9eLlteOiNcW1wuLF0qJC87ZnVuY3Rpb24geihhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoInN0cmluZyI9PXR5cGVvZiBiKXtpZih5LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBuLmluQXJyYXkoYSxiKT4tMSE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9Ijpub3QoIithKyIpIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPVtdLGQ9dGhpcyxlPWQubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2U+YjtiKyspaWYobi5jb250YWlucyhkW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7ZT5iO2IrKyluLmZpbmQoYSxkW2JdLGMpO3JldHVybiBjPXRoaXMucHVzaFN0YWNrKGU+MT9uLnVuaXF1ZShjKTpjKSxjLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrYTphLGN9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeih0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheih0aGlzLCJzdHJpbmciPT10eXBlb2YgYSYmdy50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgQSxCPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKikpJC8sQz1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY7aWYoIWEpcmV0dXJuIHRoaXM7aWYoYz1jfHxBLCJzdHJpbmciPT10eXBlb2YgYSl7aWYoZT0iPCI9PT1hLmNoYXJBdCgwKSYmIj4iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06Qi5leGVjKGEpLCFlfHwhZVsxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fGMpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGVbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChlWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmQsITApKSx4LnRlc3QoZVsxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoZSBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2VdKT90aGlzW2VdKGJbZV0pOnRoaXMuYXR0cihlLGJbZV0pO3JldHVybiB0aGlzfWlmKGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiZmLnBhcmVudE5vZGUpe2lmKGYuaWQhPT1lWzJdKXJldHVybiBBLmZpbmQoYSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPWZ9cmV0dXJuIHRoaXMuY29udGV4dD1kLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpPyJ1bmRlZmluZWQiIT10eXBlb2YgYy5yZWFkeT9jLnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0MucHJvdG90eXBlPW4uZm4sQT1uKGQpO3ZhciBEPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEU9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYixjPW4oYSx0aGlzKSxkPWMubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7ZD5iO2IrKylpZihuLmNvbnRhaW5zKHRoaXMsY1tiXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dy50ZXN0KGEpfHwic3RyaW5nIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlU29ydChmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/InN0cmluZyI9PXR5cGVvZiBhP24uaW5BcnJheSh0aGlzWzBdLG4oYSkpOm4uaW5BcnJheShhLmpxdWVyeT9hWzBdOmEsdGhpcyk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWVTb3J0KG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEYoYSxiKXtkbyBhPWFbYl07d2hpbGUoYSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHUoYSwicGFyZW50Tm9kZSIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRihhLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gdShhLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB1KGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1KGEsIm5leHRTaWJsaW5nIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdShhLCJwcmV2aW91c1NpYmxpbmciLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gdigoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuIlVudGlsIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiYic3RyaW5nIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihFW2FdfHwoZT1uLnVuaXF1ZVNvcnQoZSkpLEQudGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRz0vXFMrL2c7ZnVuY3Rpb24gSChhKXt2YXIgYj17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT0ic3RyaW5nIj09dHlwZW9mIGE/SChhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmPVtdLGc9W10saD0tMSxpPWZ1bmN0aW9uKCl7Zm9yKGU9YS5vbmNlLGQ9Yj0hMDtnLmxlbmd0aDtoPS0xKXtjPWcuc2hpZnQoKTt3aGlsZSgrK2g8Zi5sZW5ndGgpZltoXS5hcHBseShjWzBdLGNbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2UmJihoPWYubGVuZ3RoLGM9ITEpfWEubWVtb3J5fHwoYz0hMSksYj0hMSxlJiYoZj1jP1tdOiIiKX0saj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIGYmJihjJiYhYiYmKGg9Zi5sZW5ndGgtMSxnLnB1c2goYykpLGZ1bmN0aW9uIGQoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXtuLmlzRnVuY3Rpb24oYyk/YS51bmlxdWUmJmouaGFzKGMpfHxmLnB1c2goYyk6YyYmYy5sZW5ndGgmJiJzdHJpbmciIT09bi50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGg+PWMmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMCxjfHxqLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1sicmVzb2x2ZSIsImRvbmUiLG4uQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsbi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsbi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sYz0icGVuZGluZyIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhjLm5vdGlmeSkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpOmNbZlswXSsiV2l0aCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdKyJXaXRoIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdKyJXaXRoIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1lLmNhbGwoYXJndW1lbnRzKSxkPWMubGVuZ3RoLGY9MSE9PWR8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2Q6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZS5jYWxsKGFyZ3VtZW50cyk6ZCxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGQ+MSlmb3IoaT1uZXcgQXJyYXkoZCksaj1uZXcgQXJyYXkoZCksaz1uZXcgQXJyYXkoZCk7ZD5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5wcm9ncmVzcyhoKGIsaixpKSkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEk7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEkucmVzb2x2ZVdpdGgoZCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGQpLnRyaWdnZXJIYW5kbGVyKCJyZWFkeSIpLG4oZCkub2ZmKCJyZWFkeSIpKSkpfX0pO2Z1bmN0aW9uIEooKXtkLmFkZEV2ZW50TGlzdGVuZXI/KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixLKSk6KGQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5kZXRhY2hFdmVudCgib25sb2FkIixLKSl9ZnVuY3Rpb24gSygpeyhkLmFkZEV2ZW50TGlzdGVuZXJ8fCJsb2FkIj09PWEuZXZlbnQudHlwZXx8ImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZSkmJihKKCksbi5yZWFkeSgpKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7aWYoIUkpaWYoST1uLkRlZmVycmVkKCksImNvbXBsZXRlIj09PWQucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpYS5zZXRUaW1lb3V0KG4ucmVhZHkpO2Vsc2UgaWYoZC5hZGRFdmVudExpc3RlbmVyKWQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsSyksYS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixLKTtlbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsSyksYS5hdHRhY2hFdmVudCgib25sb2FkIixLKTt2YXIgYz0hMTt0cnl7Yz1udWxsPT1hLmZyYW1lRWxlbWVudCYmZC5kb2N1bWVudEVsZW1lbnR9Y2F0Y2goZSl7fWMmJmMuZG9TY3JvbGwmJiFmdW5jdGlvbiBmKCl7aWYoIW4uaXNSZWFkeSl7dHJ5e2MuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChiKXtyZXR1cm4gYS5zZXRUaW1lb3V0KGYsNTApfUooKSxuLnJlYWR5KCl9fSgpfXJldHVybiBJLnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBMO2ZvcihMIGluIG4obCkpYnJlYWs7bC5vd25GaXJzdD0iMCI9PT1MLGwuaW5saW5lQmxvY2tOZWVkc0xheW91dD0hMSxuKGZ1bmN0aW9uKCl7dmFyIGEsYixjLGU7Yz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sYyYmYy5zdHlsZSYmKGI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCIsYy5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChiKSwidW5kZWZpbmVkIiE9dHlwZW9mIGIuc3R5bGUuem9vbSYmKGIuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSIsbC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0PWE9Mz09PWIub2Zmc2V0V2lkdGgsYSYmKGMuc3R5bGUuem9vbT0xKSksYy5yZW1vdmVDaGlsZChlKSl9KSxmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5kZWxldGVFeHBhbmRvPSEwO3RyeXtkZWxldGUgYS50ZXN0fWNhdGNoKGIpe2wuZGVsZXRlRXhwYW5kbz0hMX1hPW51bGx9KCk7dmFyIE09ZnVuY3Rpb24oYSl7dmFyIGI9bi5ub0RhdGFbKGEubm9kZU5hbWUrIiAiKS50b0xvd2VyQ2FzZSgpXSxjPSthLm5vZGVUeXBlfHwxO3JldHVybiAxIT09YyYmOSE9PWM/ITE6IWJ8fGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9LE49L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpe3ZhciBkPSJkYXRhLSIrYi5yZXBsYWNlKE8sIi0kMSIpLnRvTG93ZXJDYXNlKCk7aWYoYz1hLmdldEF0dHJpYnV0ZShkKSwic3RyaW5nIj09dHlwZW9mIGMpe3RyeXtjPSJ0cnVlIj09PWM/ITA6ImZhbHNlIj09PWM/ITE6Im51bGwiPT09Yz9udWxsOitjKyIiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9bi5kYXRhKGEsYixjKX1lbHNlIGM9dm9pZCAwOwp9cmV0dXJuIGN9ZnVuY3Rpb24gUShhKXt2YXIgYjtmb3IoYiBpbiBhKWlmKCgiZGF0YSIhPT1ifHwhbi5pc0VtcHR5T2JqZWN0KGFbYl0pKSYmInRvSlNPTiIhPT1iKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFIoYSxiLGQsZSl7aWYoTShhKSl7dmFyIGYsZyxoPW4uZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP24uY2FjaGU6YSxrPWk/YVtoXTphW2hdJiZoO2lmKGsmJmpba10mJihlfHxqW2tdLmRhdGEpfHx2b2lkIDAhPT1kfHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIGt8fChrPWk/YVtoXT1jLnBvcCgpfHxuLmd1aWQrKzpoKSxqW2tdfHwoaltrXT1pP3t9Ont0b0pTT046bi5ub29wfSksIm9iamVjdCIhPXR5cGVvZiBiJiYiZnVuY3Rpb24iIT10eXBlb2YgYnx8KGU/altrXT1uLmV4dGVuZChqW2tdLGIpOmpba10uZGF0YT1uLmV4dGVuZChqW2tdLmRhdGEsYikpLGc9altrXSxlfHwoZy5kYXRhfHwoZy5kYXRhPXt9KSxnPWcuZGF0YSksdm9pZCAwIT09ZCYmKGdbbi5jYW1lbENhc2UoYildPWQpLCJzdHJpbmciPT10eXBlb2YgYj8oZj1nW2JdLG51bGw9PWYmJihmPWdbbi5jYW1lbENhc2UoYildKSk6Zj1nLGZ9fWZ1bmN0aW9uIFMoYSxiLGMpe2lmKE0oYSkpe3ZhciBkLGUsZj1hLm5vZGVUeXBlLGc9Zj9uLmNhY2hlOmEsaD1mP2Fbbi5leHBhbmRvXTpuLmV4cGFuZG87aWYoZ1toXSl7aWYoYiYmKGQ9Yz9nW2hdOmdbaF0uZGF0YSkpe24uaXNBcnJheShiKT9iPWIuY29uY2F0KG4ubWFwKGIsbi5jYW1lbENhc2UpKTpiIGluIGQ/Yj1bYl06KGI9bi5jYW1lbENhc2UoYiksYj1iIGluIGQ/W2JdOmIuc3BsaXQoIiAiKSksZT1iLmxlbmd0aDt3aGlsZShlLS0pZGVsZXRlIGRbYltlXV07aWYoYz8hUShkKTohbi5pc0VtcHR5T2JqZWN0KGQpKXJldHVybn0oY3x8KGRlbGV0ZSBnW2hdLmRhdGEsUShnW2hdKSkpJiYoZj9uLmNsZWFuRGF0YShbYV0sITApOmwuZGVsZXRlRXhwYW5kb3x8ZyE9Zy53aW5kb3c/ZGVsZXRlIGdbaF06Z1toXT12b2lkIDApfX19bi5leHRlbmQoe2NhY2hlOnt9LG5vRGF0YTp7ImFwcGxldCAiOiEwLCJlbWJlZCAiOiEwLCJvYmplY3QgIjoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIn0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hLm5vZGVUeXBlP24uY2FjaGVbYVtuLmV4cGFuZG9dXTphW24uZXhwYW5kb10sISFhJiYhUShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFIoYSxiLGMpfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoYSxiKX0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBSKGEsYixjLCEwKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhhLGIsITApfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9bi5kYXRhKGYpLDE9PT1mLm5vZGVUeXBlJiYhbi5fZGF0YShmLCJwYXJzZWRBdHRycyIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoImRhdGEtIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7bi5fZGF0YShmLCJwYXJzZWRBdHRycyIsITApfXJldHVybiBlfXJldHVybiJvYmplY3QiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhKX0pOmFyZ3VtZW50cy5sZW5ndGg+MT90aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRhdGEodGhpcyxhLGIpfSk6Zj9QKGYsYSxuLmRhdGEoZixhKSk6dm9pZCAwfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZURhdGEodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fCJmeCIpKyJxdWV1ZSIsZD1uLl9kYXRhKGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1uLl9kYXRhKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHwiZngiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07ImlucHJvZ3Jlc3MiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKCJmeCI9PT1iJiZjLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iKyJxdWV1ZUhvb2tzIjtyZXR1cm4gbi5fZGF0YShhLGMpfHxuLl9kYXRhKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7bi5fcmVtb3ZlRGF0YShhLGIrInF1ZXVlIiksbi5fcmVtb3ZlRGF0YShhLGMpfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPSJmeCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksImZ4Ij09PWEmJiJpbnByb2dyZXNzIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9OyJzdHJpbmciIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHwiZngiO3doaWxlKGctLSljPW4uX2RhdGEoZltnXSxhKyJxdWV1ZUhvb2tzIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSksZnVuY3Rpb24oKXt2YXIgYTtsLnNocmlua1dyYXBCbG9ja3M9ZnVuY3Rpb24oKXtpZihudWxsIT1hKXJldHVybiBhO2E9ITE7dmFyIGIsYyxlO3JldHVybiBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXSxjJiZjLnN0eWxlPyhiPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHgiLGMuYXBwZW5kQ2hpbGQoZSkuYXBwZW5kQ2hpbGQoYiksInVuZGVmaW5lZCIhPXR5cGVvZiBiLnN0eWxlLnpvb20mJihiLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiLGIuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUud2lkdGg9IjVweCIsYT0zIT09Yi5vZmZzZXRXaWR0aCksYy5yZW1vdmVDaGlsZChlKSxhKTp2b2lkIDB9fSgpO3ZhciBUPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLFU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK1QrIikoW2EteiVdKikkIiwiaSIpLFY9WyJUb3AiLCJSaWdodCIsIkJvdHRvbSIsIkxlZnQiXSxXPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSwibm9uZSI9PT1uLmNzcyhhLCJkaXNwbGF5Iil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX07ZnVuY3Rpb24gWChhLGIsYyxkKXt2YXIgZSxmPTEsZz0yMCxoPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZC5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gbi5jc3MoYSxiLCIiKX0saT1oKCksaj1jJiZjWzNdfHwobi5jc3NOdW1iZXJbYl0/IiI6InB4Iiksaz0obi5jc3NOdW1iZXJbYl18fCJweCIhPT1qJiYraSkmJlUuZXhlYyhuLmNzcyhhLGIpKTtpZihrJiZrWzNdIT09ail7aj1qfHxrWzNdLGM9Y3x8W10saz0raXx8MTtkbyBmPWZ8fCIuNSIsay89ZixuLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBZPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoIm9iamVjdCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylZKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFo9L14oPzpjaGVja2JveHxyYWRpbykkL2ksJD0vPChbXHc6LV0rKS8sXz0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksYWE9L15ccysvLGJhPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHBpY3R1cmV8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRlbXBsYXRlfHRpbWV8dmlkZW8iO2Z1bmN0aW9uIGNhKGEpe3ZhciBiPWJhLnNwbGl0KCJ8IiksYz1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihjLmNyZWF0ZUVsZW1lbnQpd2hpbGUoYi5sZW5ndGgpYy5jcmVhdGVFbGVtZW50KGIucG9wKCkpO3JldHVybiBjfSFmdW5jdGlvbigpe3ZhciBhPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYj1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTthLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixsLmxlYWRpbmdXaGl0ZXNwYWNlPTM9PT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUsbC50Ym9keT0hYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsbC5odG1sU2VyaWFsaXplPSEhYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxsLmh0bWw1Q2xvbmU9Ijw6bmF2PjwvOm5hdj4iIT09ZC5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCxjLnR5cGU9ImNoZWNrYm94IixjLmNoZWNrZWQ9ITAsYi5hcHBlbmRDaGlsZChjKSxsLmFwcGVuZENoZWNrZWQ9Yy5jaGVja2VkLGEuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IixsLm5vQ2xvbmVDaGVja2VkPSEhYS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWUsYi5hcHBlbmRDaGlsZChhKSxjPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIiksYy5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJjaGVja2VkIiksYy5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksYS5hcHBlbmRDaGlsZChjKSxsLmNoZWNrQ2xvbmU9YS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsbC5ub0Nsb25lRXZlbnQ9ISFhLmFkZEV2ZW50TGlzdGVuZXIsYVtuLmV4cGFuZG9dPTEsbC5hdHRyaWJ1dGVzPSFhLmdldEF0dHJpYnV0ZShuLmV4cGFuZG8pfSgpO3ZhciBkYT17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLHBhcmFtOlsxLCI8b2JqZWN0PiIsIjwvb2JqZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6bC5odG1sU2VyaWFsaXplP1swLCIiLCIiXTpbMSwiWDxkaXY+IiwiPC9kaXY+Il19O2RhLm9wdGdyb3VwPWRhLm9wdGlvbixkYS50Ym9keT1kYS50Zm9vdD1kYS5jb2xncm91cD1kYS5jYXB0aW9uPWRhLnRoZWFkLGRhLnRoPWRhLnRkO2Z1bmN0aW9uIGVhKGEsYil7dmFyIGMsZCxlPTAsZj0idW5kZWZpbmVkIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHwiKiIpOnZvaWQgMDtpZighZilmb3IoZj1bXSxjPWEuY2hpbGROb2Rlc3x8YTtudWxsIT0oZD1jW2VdKTtlKyspIWJ8fG4ubm9kZU5hbWUoZCxiKT9mLnB1c2goZCk6bi5tZXJnZShmLGVhKGQsYikpO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sZik6Zn1mdW5jdGlvbiBmYShhLGIpe2Zvcih2YXIgYyxkPTA7bnVsbCE9KGM9YVtkXSk7ZCsrKW4uX2RhdGEoYywiZ2xvYmFsRXZhbCIsIWJ8fG4uX2RhdGEoYltkXSwiZ2xvYmFsRXZhbCIpKX12YXIgZ2E9Lzx8JiM/XHcrOy8saGE9Lzx0Ym9keS9pO2Z1bmN0aW9uIGlhKGEpe1oudGVzdChhLnR5cGUpJiYoYS5kZWZhdWx0Q2hlY2tlZD1hLmNoZWNrZWQpfWZ1bmN0aW9uIGphKGEsYixjLGQsZSl7Zm9yKHZhciBmLGcsaCxpLGosayxtLG89YS5sZW5ndGgscD1jYShiKSxxPVtdLHI9MDtvPnI7cisrKWlmKGc9YVtyXSxnfHwwPT09ZylpZigib2JqZWN0Ij09PW4udHlwZShnKSluLm1lcmdlKHEsZy5ub2RlVHlwZT9bZ106Zyk7ZWxzZSBpZihnYS50ZXN0KGcpKXtpPWl8fHAuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KCJkaXYiKSksaj0oJC5leGVjKGcpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG09ZGFbal18fGRhLl9kZWZhdWx0LGkuaW5uZXJIVE1MPW1bMV0rbi5odG1sUHJlZmlsdGVyKGcpK21bMl0sZj1tWzBdO3doaWxlKGYtLSlpPWkubGFzdENoaWxkO2lmKCFsLmxlYWRpbmdXaGl0ZXNwYWNlJiZhYS50ZXN0KGcpJiZxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShhYS5leGVjKGcpWzBdKSksIWwudGJvZHkpe2c9InRhYmxlIiE9PWp8fGhhLnRlc3QoZyk/Ijx0YWJsZT4iIT09bVsxXXx8aGEudGVzdChnKT8wOmk6aS5maXJzdENoaWxkLGY9ZyYmZy5jaGlsZE5vZGVzLmxlbmd0aDt3aGlsZShmLS0pbi5ub2RlTmFtZShrPWcuY2hpbGROb2Rlc1tmXSwidGJvZHkiKSYmIWsuY2hpbGROb2Rlcy5sZW5ndGgmJmcucmVtb3ZlQ2hpbGQoayl9bi5tZXJnZShxLGkuY2hpbGROb2RlcyksaS50ZXh0Q29udGVudD0iIjt3aGlsZShpLmZpcnN0Q2hpbGQpaS5yZW1vdmVDaGlsZChpLmZpcnN0Q2hpbGQpO2k9cC5sYXN0Q2hpbGR9ZWxzZSBxLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShnKSk7aSYmcC5yZW1vdmVDaGlsZChpKSxsLmFwcGVuZENoZWNrZWR8fG4uZ3JlcChlYShxLCJpbnB1dCIpLGlhKSxyPTA7d2hpbGUoZz1xW3IrK10paWYoZCYmbi5pbkFycmF5KGcsZCk+LTEpZSYmZS5wdXNoKGcpO2Vsc2UgaWYoaD1uLmNvbnRhaW5zKGcub3duZXJEb2N1bWVudCxnKSxpPWVhKHAuYXBwZW5kQ2hpbGQoZyksInNjcmlwdCIpLGgmJmZhKGkpLGMpe2Y9MDt3aGlsZShnPWlbZisrXSlfLnRlc3QoZy50eXBlfHwiIikmJmMucHVzaChnKX1yZXR1cm4gaT1udWxsLHB9IWZ1bmN0aW9uKCl7dmFyIGIsYyxlPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zm9yKGIgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSljPSJvbiIrYiwobFtiXT1jIGluIGEpfHwoZS5zZXRBdHRyaWJ1dGUoYywidCIpLGxbYl09ZS5hdHRyaWJ1dGVzW2NdLmV4cGFuZG89PT0hMSk7ZT1udWxsfSgpO3ZhciBrYT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2ksbGE9L15rZXkvLG1hPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxuYT0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sb2E9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHBhKCl7cmV0dXJuITB9ZnVuY3Rpb24gcWEoKXtyZXR1cm4hMX1mdW5jdGlvbiByYSgpe3RyeXtyZXR1cm4gZC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319ZnVuY3Rpb24gc2EoYSxiLGMsZCxlLGYpe3ZhciBnLGg7aWYoIm9iamVjdCI9PXR5cGVvZiBiKXsic3RyaW5nIiE9dHlwZW9mIGMmJihkPWR8fGMsYz12b2lkIDApO2ZvcihoIGluIGIpc2EoYSxoLGMsZCxiW2hdLGYpO3JldHVybiBhfWlmKG51bGw9PWQmJm51bGw9PWU/KGU9YyxkPWM9dm9pZCAwKTpudWxsPT1lJiYoInN0cmluZyI9PXR5cGVvZiBjPyhlPWQsZD12b2lkIDApOihlPWQsZD1jLGM9dm9pZCAwKSksZT09PSExKWU9cWE7ZWxzZSBpZighZSlyZXR1cm4gYTtyZXR1cm4gMT09PWYmJihnPWUsZT1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWcuZ3VpZHx8KGcuZ3VpZD1uLmd1aWQrKykpLGEuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYixlLGQsYyl9KX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPW4uX2RhdGEoYSk7aWYocil7Yy5oYW5kbGVyJiYoaT1jLGM9aS5oYW5kbGVyLGU9aS5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoZz1yLmV2ZW50cyl8fChnPXIuZXZlbnRzPXt9KSwoaz1yLmhhbmRsZSl8fChrPXIuaGFuZGxlPWZ1bmN0aW9uKGEpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygbnx8YSYmbi5ldmVudC50cmlnZ2VyZWQ9PT1hLnR5cGU/dm9pZCAwOm4uZXZlbnQuZGlzcGF0Y2guYXBwbHkoay5lbGVtLGFyZ3VtZW50cyl9LGsuZWxlbT1hKSxiPShifHwiIikubWF0Y2goRyl8fFsiIl0saD1iLmxlbmd0aDt3aGlsZShoLS0pZj1vYS5leGVjKGJbaF0pfHxbXSxvPXE9ZlsxXSxwPShmWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksbyYmKGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2ouZGVsZWdhdGVUeXBlOmouYmluZFR5cGUpfHxvLGo9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxsPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKCIuIil9LGkpLChtPWdbb10pfHwobT1nW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGouc2V0dXAmJmouc2V0dXAuY2FsbChhLGQscCxrKSE9PSExfHwoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihvLGssITEpOmEuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoIm9uIitvLGspKSksai5hZGQmJihqLmFkZC5jYWxsKGEsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsbCk6bS5wdXNoKGwpLG4uZXZlbnQuZ2xvYmFsW29dPSEwKTthPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9bi5oYXNEYXRhKGEpJiZuLl9kYXRhKGEpO2lmKHImJihrPXIuZXZlbnRzKSl7Yj0oYnx8IiIpLm1hdGNoKEcpfHxbIiJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9b2EuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09a1tvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGk9Zj1tLmxlbmd0aDt3aGlsZShmLS0pZz1tW2ZdLCFlJiZxIT09Zy5vcmlnVHlwZXx8YyYmYy5ndWlkIT09Zy5ndWlkfHxoJiYhaC50ZXN0KGcubmFtZXNwYWNlKXx8ZCYmZCE9PWcuc2VsZWN0b3ImJigiKioiIT09ZHx8IWcuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxnLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGcpKTtpJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGtbb10pfWVsc2UgZm9yKG8gaW4gayluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChrKSYmKGRlbGV0ZSByLmhhbmRsZSxuLl9yZW1vdmVEYXRhKGEsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGUsZil7dmFyIGcsaCxpLGosbCxtLG8scD1bZXx8ZF0scT1rLmNhbGwoYiwidHlwZSIpP2IudHlwZTpiLHI9ay5jYWxsKGIsIm5hbWVzcGFjZSIpP2IubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoaT1tPWU9ZXx8ZCwzIT09ZS5ub2RlVHlwZSYmOCE9PWUubm9kZVR5cGUmJiFuYS50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKCIuIik+LTEmJihyPXEuc3BsaXQoIi4iKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaD1xLmluZGV4T2YoIjoiKTwwJiYib24iK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLCJvYmplY3QiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9Zj8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKCIuIiksYi5ybmFtZXNwYWNlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK3Iuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxsPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZnx8IWwudHJpZ2dlcnx8bC50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbC5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZSkpe2ZvcihqPWwuZGVsZWdhdGVUeXBlfHxxLG5hLnRlc3QoaitxKXx8KGk9aS5wYXJlbnROb2RlKTtpO2k9aS5wYXJlbnROb2RlKXAucHVzaChpKSxtPWk7bT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZwLnB1c2gobS5kZWZhdWx0Vmlld3x8bS5wYXJlbnRXaW5kb3d8fGEpfW89MDt3aGlsZSgoaT1wW28rK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1vPjE/ajpsLmJpbmRUeXBlfHxxLGc9KG4uX2RhdGEoaSwiZXZlbnRzIil8fHt9KVtiLnR5cGVdJiZuLl9kYXRhKGksImhhbmRsZSIpLGcmJmcuYXBwbHkoaSxjKSxnPWgmJmlbaF0sZyYmZy5hcHBseSYmTShpKSYmKGIucmVzdWx0PWcuYXBwbHkoaSxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO2lmKGIudHlwZT1xLCFmJiYhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmKCFsLl9kZWZhdWx0fHxsLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYyk9PT0hMSkmJk0oZSkmJmgmJmVbcV0mJiFuLmlzV2luZG93KGUpKXttPWVbaF0sbSYmKGVbaF09bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cTt0cnl7ZVtxXSgpfWNhdGNoKHMpe31uLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsbSYmKGVbaF09bSl9cmV0dXJuIGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGQsZixnLGg9W10saT1lLmNhbGwoYXJndW1lbnRzKSxqPShuLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKWEucm5hbWVzcGFjZSYmIWEucm5hbWVzcGFjZS50ZXN0KGcubmFtZXNwYWNlKXx8KGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxkPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1kJiYoYS5yZXN1bHQ9ZCk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoImNsaWNrIiE9PWEudHlwZXx8aXNOYU4oYS5idXR0b24pfHxhLmJ1dHRvbjwxKSlmb3IoO2khPXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWkubm9kZVR5cGUmJihpLmRpc2FibGVkIT09ITB8fCJjbGljayIhPT1hLnR5cGUpKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yKyIgIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+LTE6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxlLGY9YS50eXBlLGc9YSxoPXRoaXMuZml4SG9va3NbZl07aHx8KHRoaXMuZml4SG9va3NbZl09aD1tYS50ZXN0KGYpP3RoaXMubW91c2VIb29rczpsYS50ZXN0KGYpP3RoaXMua2V5SG9va3M6e30pLGU9aC5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChoLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZyksYj1lLmxlbmd0aDt3aGlsZShiLS0pYz1lW2JdLGFbY109Z1tjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1nLnNyY0VsZW1lbnR8fGQpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGEubWV0YUtleT0hIWEubWV0YUtleSxoLmZpbHRlcj9oLmZpbHRlcihhLGcpOmF9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGc9Yi5idXR0b24saD1iLmZyb21FbGVtZW50O3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGQsZj1lLmRvY3VtZW50RWxlbWVudCxjPWUuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxjJiZjLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGMmJmMuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxjJiZjLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxjJiZjLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmgmJihhLnJlbGF0ZWRUYXJnZXQ9aD09PWEudGFyZ2V0P2IudG9FbGVtZW50OmgpLGEud2hpY2h8fHZvaWQgMD09PWd8fChhLndoaWNoPTEmZz8xOjImZz8zOjQmZz8yOjApLGF9fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzIT09cmEoKSYmdGhpcy5mb2N1cyl0cnl7cmV0dXJuIHRoaXMuZm9jdXMoKSwhMX1jYXRjaChhKXt9fSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1yYSgpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiBuLm5vZGVOYW1lKHRoaXMsImlucHV0IikmJiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2s/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCwiYSIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMH0pO24uZXZlbnQudHJpZ2dlcihkLG51bGwsYiksZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1kLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD0ib24iK2I7YS5kZXRhY2hFdmVudCYmKCJ1bmRlZmluZWQiPT10eXBlb2YgYVtkXSYmKGFbZF09bnVsbCksYS5kZXRhY2hFdmVudChkLGMpKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/cGE6cWEpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bi5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6cWEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6cWEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6cWEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9cGEsYSYmKGEucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1wYSxhJiYhdGhpcy5pc1NpbXVsYXRlZCYmKGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9cGEsYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fG4uY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGwuc3VibWl0fHwobi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtyZXR1cm4gbi5ub2RlTmFtZSh0aGlzLCJmb3JtIik/ITE6dm9pZCBuLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0LGM9bi5ub2RlTmFtZShiLCJpbnB1dCIpfHxuLm5vZGVOYW1lKGIsImJ1dHRvbiIpP24ucHJvcChiLCJmb3JtIik6dm9pZCAwO2MmJiFuLl9kYXRhKGMsInN1Ym1pdCIpJiYobi5ldmVudC5hZGQoYywic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdEJ1YmJsZT0hMH0pLG4uX2RhdGEoYywic3VibWl0IiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRCdWJibGUmJihkZWxldGUgYS5fc3VibWl0QnViYmxlLHRoaXMucGFyZW50Tm9kZSYmIWEuaXNUcmlnZ2VyJiZuLmV2ZW50LnNpbXVsYXRlKCJzdWJtaXQiLHRoaXMucGFyZW50Tm9kZSxhKSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIG4ubm9kZU5hbWUodGhpcywiZm9ybSIpPyExOnZvaWQgbi5ldmVudC5yZW1vdmUodGhpcywiLl9zdWJtaXQiKX19KSxsLmNoYW5nZXx8KG4uZXZlbnQuc3BlY2lhbC5jaGFuZ2U9e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIGthLnRlc3QodGhpcy5ub2RlTmFtZSk/KCJjaGVja2JveCIhPT10aGlzLnR5cGUmJiJyYWRpbyIhPT10aGlzLnR5cGV8fChuLmV2ZW50LmFkZCh0aGlzLCJwcm9wZXJ0eWNoYW5nZS5fY2hhbmdlIixmdW5jdGlvbihhKXsiY2hlY2tlZCI9PT1hLm9yaWdpbmFsRXZlbnQucHJvcGVydHlOYW1lJiYodGhpcy5fanVzdENoYW5nZWQ9ITApfSksbi5ldmVudC5hZGQodGhpcywiY2xpY2suX2NoYW5nZSIsZnVuY3Rpb24oYSl7dGhpcy5fanVzdENoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RDaGFuZ2VkPSExKSxuLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSl9KSksITEpOnZvaWQgbi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7a2EudGVzdChiLm5vZGVOYW1lKSYmIW4uX2RhdGEoYiwiY2hhbmdlIikmJihuLmV2ZW50LmFkZChiLCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7IXRoaXMucGFyZW50Tm9kZXx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fG4uZXZlbnQuc2ltdWxhdGUoImNoYW5nZSIsdGhpcy5wYXJlbnROb2RlLGEpfSksbi5fZGF0YShiLCJjaGFuZ2UiLCEwKSl9KX0saGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O3JldHVybiB0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fCJyYWRpbyIhPT1iLnR5cGUmJiJjaGVja2JveCIhPT1iLnR5cGU/YS5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfSx0ZWFyZG93bjpmdW5jdGlvbigpe3JldHVybiBuLmV2ZW50LnJlbW92ZSh0aGlzLCIuX2NoYW5nZSIpLCFrYS50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLGwuZm9jdXNpbnx8bi5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1uLl9kYXRhKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksbi5fZGF0YShkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPW4uX2RhdGEoZCxiKS0xO2U/bi5fZGF0YShkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLG4uX3JlbW92ZURhdGEoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gc2EodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBzYSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlKyIuIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGIhPT0hMSYmImZ1bmN0aW9uIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9cWEpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIHRhPS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csdWE9bmV3IFJlZ0V4cCgiPCg/OiIrYmErIilbXFxzLz5dIiwiaSIpLHZhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLHdhPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHhhPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHlhPS9edHJ1ZVwvKC4qKS8semE9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLEFhPWNhKGQpLEJhPUFhLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2Z1bmN0aW9uIENhKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSwidGFibGUiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsInRyIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6YX1mdW5jdGlvbiBEYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09bi5maW5kLmF0dHIoYSwidHlwZSIpKSsiLyIrYS50eXBlLGF9ZnVuY3Rpb24gRWEoYSl7dmFyIGI9eWEuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksYX1mdW5jdGlvbiBGYShhLGIpe2lmKDE9PT1iLm5vZGVUeXBlJiZuLmhhc0RhdGEoYSkpe3ZhciBjLGQsZSxmPW4uX2RhdGEoYSksZz1uLl9kYXRhKGIsZiksaD1mLmV2ZW50cztpZihoKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGMgaW4gaClmb3IoZD0wLGU9aFtjXS5sZW5ndGg7ZT5kO2QrKyluLmV2ZW50LmFkZChiLGMsaFtjXVtkXSl9Zy5kYXRhJiYoZy5kYXRhPW4uZXh0ZW5kKHt9LGcuZGF0YSkpfX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZTtpZigxPT09Yi5ub2RlVHlwZSl7aWYoYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIWwubm9DbG9uZUV2ZW50JiZiW24uZXhwYW5kb10pe2U9bi5fZGF0YShiKTtmb3IoZCBpbiBlLmV2ZW50cyluLnJlbW92ZUV2ZW50KGIsZCxlLmhhbmRsZSk7Yi5yZW1vdmVBdHRyaWJ1dGUobi5leHBhbmRvKX0ic2NyaXB0Ij09PWMmJmIudGV4dCE9PWEudGV4dD8oRGEoYikudGV4dD1hLnRleHQsRWEoYikpOiJvYmplY3QiPT09Yz8oYi5wYXJlbnROb2RlJiYoYi5vdXRlckhUTUw9YS5vdXRlckhUTUwpLGwuaHRtbDVDbG9uZSYmYS5pbm5lckhUTUwmJiFuLnRyaW0oYi5pbm5lckhUTUwpJiYoYi5pbm5lckhUTUw9YS5pbm5lckhUTUwpKToiaW5wdXQiPT09YyYmWi50ZXN0KGEudHlwZSk/KGIuZGVmYXVsdENoZWNrZWQ9Yi5jaGVja2VkPWEuY2hlY2tlZCxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpOiJvcHRpb24iPT09Yz9iLmRlZmF1bHRTZWxlY3RlZD1iLnNlbGVjdGVkPWEuZGVmYXVsdFNlbGVjdGVkOiJpbnB1dCIhPT1jJiYidGV4dGFyZWEiIT09Y3x8KGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX19ZnVuY3Rpb24gSGEoYSxiLGMsZCl7Yj1mLmFwcGx5KFtdLGIpO3ZhciBlLGcsaCxpLGosayxtPTAsbz1hLmxlbmd0aCxwPW8tMSxxPWJbMF0scj1uLmlzRnVuY3Rpb24ocSk7aWYocnx8bz4xJiYic3RyaW5nIj09dHlwZW9mIHEmJiFsLmNoZWNrQ2xvbmUmJnhhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3ImJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxIYShmLGIsYyxkKX0pO2lmKG8mJihrPWphKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZT1rLmZpcnN0Q2hpbGQsMT09PWsuY2hpbGROb2Rlcy5sZW5ndGgmJihrPWUpLGV8fGQpKXtmb3IoaT1uLm1hcChlYShrLCJzY3JpcHQiKSxEYSksaD1pLmxlbmd0aDtvPm07bSsrKWc9ayxtIT09cCYmKGc9bi5jbG9uZShnLCEwLCEwKSxoJiZuLm1lcmdlKGksZWEoZywic2NyaXB0IikpKSxjLmNhbGwoYVttXSxnLG0pO2lmKGgpZm9yKGo9aVtpLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGksRWEpLG09MDtoPm07bSsrKWc9aVttXSxfLnRlc3QoZy50eXBlfHwiIikmJiFuLl9kYXRhKGcsImdsb2JhbEV2YWwiKSYmbi5jb250YWlucyhqLGcpJiYoZy5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChnLnNyYyk6bi5nbG9iYWxFdmFsKChnLnRleHR8fGcudGV4dENvbnRlbnR8fGcuaW5uZXJIVE1MfHwiIikucmVwbGFjZSh6YSwiIikpKTtrPWU9bnVsbH1yZXR1cm4gYX1mdW5jdGlvbiBJYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9uLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8bi5jbGVhbkRhdGEoZWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJm4uY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZmYShlYShkLCJzY3JpcHQiKSksZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpKTtyZXR1cm4gYX1uLmV4dGVuZCh7aHRtbFByZWZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHZhLCI8JDE+PC8kMj4iKX0sY2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZihsLmh0bWw1Q2xvbmV8fG4uaXNYTUxEb2MoYSl8fCF1YS50ZXN0KCI8IithLm5vZGVOYW1lKyI+Iik/Zj1hLmNsb25lTm9kZSghMCk6KEJhLmlubmVySFRNTD1hLm91dGVySFRNTCxCYS5yZW1vdmVDaGlsZChmPUJhLmZpcnN0Q2hpbGQpKSwhKGwubm9DbG9uZUV2ZW50JiZsLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZD1lYShmKSxoPWVhKGEpLGc9MDtudWxsIT0oZT1oW2ddKTsrK2cpZFtnXSYmR2EoZSxkW2ddKTtpZihiKWlmKGMpZm9yKGg9aHx8ZWEoYSksZD1kfHxlYShmKSxnPTA7bnVsbCE9KGU9aFtnXSk7ZysrKUZhKGUsZFtnXSk7ZWxzZSBGYShhLGYpO3JldHVybiBkPWVhKGYsInNjcmlwdCIpLGQubGVuZ3RoPjAmJmZhKGQsIWkmJmVhKGEsInNjcmlwdCIpKSxkPWg9ZT1udWxsLGZ9LGNsZWFuRGF0YTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGYsZyxoPTAsaT1uLmV4cGFuZG8saj1uLmNhY2hlLGs9bC5hdHRyaWJ1dGVzLG09bi5ldmVudC5zcGVjaWFsO251bGwhPShkPWFbaF0pO2grKylpZigoYnx8TShkKSkmJihmPWRbaV0sZz1mJiZqW2ZdKSl7aWYoZy5ldmVudHMpZm9yKGUgaW4gZy5ldmVudHMpbVtlXT9uLmV2ZW50LnJlbW92ZShkLGUpOm4ucmVtb3ZlRXZlbnQoZCxlLGcuaGFuZGxlKTtqW2ZdJiYoZGVsZXRlIGpbZl0sa3x8InVuZGVmaW5lZCI9PXR5cGVvZiBkLnJlbW92ZUF0dHJpYnV0ZT9kW2ldPXZvaWQgMDpkLnJlbW92ZUF0dHJpYnV0ZShpKSxjLnB1c2goZikpfX19KSxuLmZuLmV4dGVuZCh7ZG9tTWFuaXA6SGEsZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiBJYSh0aGlzLGEsITApfSxyZW1vdmU6ZnVuY3Rpb24oYSl7cmV0dXJuIElhKHRoaXMsYSl9LHRleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkKS5jcmVhdGVUZXh0Tm9kZShhKSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEhhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1DYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPUNhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKyl7MT09PWEubm9kZVR5cGUmJm4uY2xlYW5EYXRhKGVhKGEsITEpKTt3aGlsZShhLmZpcnN0Q2hpbGQpYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Eub3B0aW9ucyYmbi5ub2RlTmFtZShhLCJzZWxlY3QiKSYmKGEub3B0aW9ucy5sZW5ndGg9MCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEpcmV0dXJuIDE9PT1iLm5vZGVUeXBlP2IuaW5uZXJIVE1MLnJlcGxhY2UodGEsIiIpOnZvaWQgMDtpZigic3RyaW5nIj09dHlwZW9mIGEmJiF3YS50ZXN0KGEpJiYobC5odG1sU2VyaWFsaXplfHwhdWEudGVzdChhKSkmJihsLmxlYWRpbmdXaGl0ZXNwYWNlfHwhYWEudGVzdChhKSkmJiFkYVsoJC5leGVjKGEpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1uLmh0bWxQcmVmaWx0ZXIoYSk7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEoZWEoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gSGEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5wYXJlbnROb2RlO24uaW5BcnJheSh0aGlzLGEpPDAmJihuLmNsZWFuRGF0YShlYSh0aGlzKSksYyYmYy5yZXBsYWNlQ2hpbGQoYix0aGlzKSl9LGEpfX0pLG4uZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD0wLGU9W10sZj1uKGEpLGg9Zi5sZW5ndGgtMTtoPj1kO2QrKyljPWQ9PT1oP3RoaXM6dGhpcy5jbG9uZSghMCksbihmW2RdKVtiXShjKSxnLmFwcGx5KGUsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBKYSxLYT17SFRNTDoiYmxvY2siLEJPRFk6ImJsb2NrIn07ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1uKGIuY3JlYXRlRWxlbWVudChhKSkuYXBwZW5kVG8oYi5ib2R5KSxkPW4uY3NzKGNbMF0sImRpc3BsYXkiKTtyZXR1cm4gYy5kZXRhY2goKSxkfWZ1bmN0aW9uIE1hKGEpe3ZhciBiPWQsYz1LYVthXTtyZXR1cm4gY3x8KGM9TGEoYSxiKSwibm9uZSIhPT1jJiZjfHwoSmE9KEphfHxuKCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPShKYVswXS5jb250ZW50V2luZG93fHxKYVswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1MYShhLGIpLEphLmRldGFjaCgpKSxLYVthXT1jKSxjfXZhciBOYT0vXm1hcmdpbi8sT2E9bmV3IFJlZ0V4cCgiXigiK1QrIikoPyFweClbYS16JV0rJCIsImkiKSxQYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX0sUWE9ZC5kb2N1bWVudEVsZW1lbnQ7IWZ1bmN0aW9uKCl7dmFyIGIsYyxlLGYsZyxoLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxqPWQuY3JlYXRlRWxlbWVudCgiZGl2Iik7aWYoai5zdHlsZSl7ai5zdHlsZS5jc3NUZXh0PSJmbG9hdDpsZWZ0O29wYWNpdHk6LjUiLGwub3BhY2l0eT0iMC41Ij09PWouc3R5bGUub3BhY2l0eSxsLmNzc0Zsb2F0PSEhai5zdHlsZS5jc3NGbG9hdCxqLnN0eWxlLmJhY2tncm91bmRDbGlwPSJjb250ZW50LWJveCIsai5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiLGwuY2xlYXJDbG9uZVN0eWxlPSJjb250ZW50LWJveCI9PT1qLnN0eWxlLmJhY2tncm91bmRDbGlwLGk9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLnN0eWxlLmNzc1RleHQ9ImJvcmRlcjowO3dpZHRoOjhweDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7cGFkZGluZzowO21hcmdpbi10b3A6MXB4O3Bvc2l0aW9uOmFic29sdXRlIixqLmlubmVySFRNTD0iIixpLmFwcGVuZENoaWxkKGopLGwuYm94U2l6aW5nPSIiPT09ai5zdHlsZS5ib3hTaXppbmd8fCIiPT09ai5zdHlsZS5Nb3pCb3hTaXppbmd8fCIiPT09ai5zdHlsZS5XZWJraXRCb3hTaXppbmcsbi5leHRlbmQobCx7cmVsaWFibGVIaWRkZW5PZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxmfSxib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZX0scGl4ZWxNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksY30scGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksYn0scmVsaWFibGVNYXJnaW5SaWdodDpmdW5jdGlvbigpe3JldHVybiBudWxsPT1iJiZrKCksZ30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWImJmsoKSxofX0pO2Z1bmN0aW9uIGsoKXt2YXIgayxsLG09ZC5kb2N1bWVudEVsZW1lbnQ7bS5hcHBlbmRDaGlsZChpKSxqLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJSIsYj1lPWg9ITEsYz1nPSEwLGEuZ2V0Q29tcHV0ZWRTdHlsZSYmKGw9YS5nZXRDb21wdXRlZFN0eWxlKGopLGI9IjElIiE9PShsfHx7fSkudG9wLGg9IjJweCI9PT0obHx8e30pLm1hcmdpbkxlZnQsZT0iNHB4Ij09PShsfHx7d2lkdGg6IjRweCJ9KS53aWR0aCxqLnN0eWxlLm1hcmdpblJpZ2h0PSI1MCUiLGM9IjRweCI9PT0obHx8e21hcmdpblJpZ2h0OiI0cHgifSkubWFyZ2luUmlnaHQsaz1qLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGsuc3R5bGUuY3NzVGV4dD1qLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MCIsay5zdHlsZS5tYXJnaW5SaWdodD1rLnN0eWxlLndpZHRoPSIwIixqLnN0eWxlLndpZHRoPSIxcHgiLGc9IXBhcnNlRmxvYXQoKGEuZ2V0Q29tcHV0ZWRTdHlsZShrKXx8e30pLm1hcmdpblJpZ2h0KSxqLnJlbW92ZUNoaWxkKGspKSxqLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWouZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgsZiYmKGouc3R5bGUuZGlzcGxheT0iIixqLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIsai5jaGlsZE5vZGVzWzBdLnN0eWxlLmJvcmRlckNvbGxhcHNlPSJzZXBhcmF0ZSIsaz1qLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLGtbMF0uc3R5bGUuY3NzVGV4dD0ibWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowO2Rpc3BsYXk6bm9uZSIsZj0wPT09a1swXS5vZmZzZXRIZWlnaHQsZiYmKGtbMF0uc3R5bGUuZGlzcGxheT0iIixrWzFdLnN0eWxlLmRpc3BsYXk9Im5vbmUiLGY9MD09PWtbMF0ub2Zmc2V0SGVpZ2h0KSksbS5yZW1vdmVDaGlsZChpKX19fSgpO3ZhciBSYSxTYSxUYT0vXih0b3B8cmlnaHR8Ym90dG9tfGxlZnQpJC87YS5nZXRDb21wdXRlZFN0eWxlPyhSYT1mdW5jdGlvbihiKXt2YXIgYz1iLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIGMmJmMub3BlbmVyfHwoYz1hKSxjLmdldENvbXB1dGVkU3R5bGUoYil9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2MuZ2V0UHJvcGVydHlWYWx1ZShiKXx8Y1tiXTp2b2lkIDAsIiIhPT1nJiZ2b2lkIDAhPT1nfHxuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKXx8KGc9bi5zdHlsZShhLGIpKSxjJiYhbC5waXhlbE1hcmdpblJpZ2h0KCkmJk9hLnRlc3QoZykmJk5hLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9Ziksdm9pZCAwPT09Zz9nOmcrIiJ9KTpRYS5jdXJyZW50U3R5bGUmJihSYT1mdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9LFNhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8UmEoYSksZz1jP2NbYl06dm9pZCAwLG51bGw9PWcmJmgmJmhbYl0mJihnPWhbYl0pLE9hLnRlc3QoZykmJiFUYS50ZXN0KGIpJiYoZD1oLmxlZnQsZT1hLnJ1bnRpbWVTdHlsZSxmPWUmJmUubGVmdCxmJiYoZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGgubGVmdD0iZm9udFNpemUiPT09Yj8iMWVtIjpnLGc9aC5waXhlbExlZnQrInB4IixoLmxlZnQ9ZCxmJiYoZS5sZWZ0PWYpKSx2b2lkIDA9PT1nP2c6ZysiInx8ImF1dG8ifSk7ZnVuY3Rpb24gVWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19dmFyIFZhPS9hbHBoYVwoW14pXSpcKS9pLFdhPS9vcGFjaXR5XHMqPVxzKihbXildKikvaSxYYT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sWWE9bmV3IFJlZ0V4cCgiXigiK1QrIikoLiopJCIsImkiKSxaYT17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sJGE9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LF9hPVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYWI9ZC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtmdW5jdGlvbiBiYihhKXtpZihhIGluIGFiKXJldHVybiBhO3ZhciBiPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPV9hLmxlbmd0aDt3aGlsZShjLS0paWYoYT1fYVtjXStiLGEgaW4gYWIpcmV0dXJuIGF9ZnVuY3Rpb24gY2IoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109bi5fZGF0YShkLCJvbGRkaXNwbGF5IiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8Im5vbmUiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1kLnN0eWxlLmRpc3BsYXkmJlcoZCkmJihmW2ddPW4uX2RhdGEoZCwib2xkZGlzcGxheSIsTWEoZC5ub2RlTmFtZSkpKSk6KGU9VyhkKSwoYyYmIm5vbmUiIT09Y3x8IWUpJiZuLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGU/YzpuLmNzcyhkLCJkaXNwbGF5IikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmIm5vbmUiIT09ZC5zdHlsZS5kaXNwbGF5JiYiIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fCIiOiJub25lIikpO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjKXt2YXIgZD1ZYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHwicHgiKTpifWZ1bmN0aW9uIGViKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PWI/MTowLGc9MDs0PmY7Zis9MikibWFyZ2luIj09PWMmJihnKz1uLmNzcyhhLGMrVltmXSwhMCxlKSksZD8oImNvbnRlbnQiPT09YyYmKGctPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSkpLCJtYXJnaW4iIT09YyYmKGctPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk6KGcrPW4uY3NzKGEsInBhZGRpbmciK1ZbZl0sITAsZSksInBhZGRpbmciIT09YyYmKGcrPW4uY3NzKGEsImJvcmRlciIrVltmXSsiV2lkdGgiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkPSEwLGU9IndpZHRoIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPVJhKGEpLGc9bC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PW4uY3NzKGEsImJveFNpemluZyIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT1TYShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLE9hLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYobC5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK2ViKGEsYixjfHwoZz8iYm9yZGVyIjoiY29udGVudCIpLGQsZikrInB4In1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPVNhKGEsIm9wYWNpdHkiKTtyZXR1cm4iIj09PWM/IjEiOmN9fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6bC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7aWYoYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1iYihoKXx8aCksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWMpcmV0dXJuIGcmJiJnZXQiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdO2lmKGY9dHlwZW9mIGMsInN0cmluZyI9PT1mJiYoZT1VLmV4ZWMoYykpJiZlWzFdJiYoYz1YKGEsYixlKSxmPSJudW1iZXIiKSxudWxsIT1jJiZjPT09YyYmKCJudW1iZXIiPT09ZiYmKGMrPWUmJmVbM118fChuLmNzc051bWJlcltoXT8iIjoicHgiKSksbC5jbGVhckNsb25lU3R5bGV8fCIiIT09Y3x8MCE9PWIuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwoaVtiXT0iaW5oZXJpdCIpLCEoZyYmInNldCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpKSkpdHJ5e2lbYl09Y31jYXRjaChqKXt9fX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPWJiKGgpfHxoKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmImdldCJpbiBnJiYoZj1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1mJiYoZj1TYShhLGIsZCkpLCJub3JtYWwiPT09ZiYmYiBpbiAkYSYmKGY9JGFbYl0pLCIiPT09Y3x8Yz8oZT1wYXJzZUZsb2F0KGYpLGM9PT0hMHx8aXNGaW5pdGUoZSk/ZXx8MDpmKTpmfX0pLG4uZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP1hhLnRlc3Qobi5jc3MoYSwiZGlzcGxheSIpKSYmMD09PWEub2Zmc2V0V2lkdGg/UGEoYSxaYSxmdW5jdGlvbigpe3JldHVybiBmYihhLGIsZCl9KTpmYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJlJhKGEpO3JldHVybiBkYihhLGMsZD9lYihhLGIsZCxsLmJveFNpemluZyYmImJvcmRlci1ib3giPT09bi5jc3MoYSwiYm94U2l6aW5nIiwhMSxlKSxlKTowKX19fSksbC5vcGFjaXR5fHwobi5jc3NIb29rcy5vcGFjaXR5PXtnZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gV2EudGVzdCgoYiYmYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGUuZmlsdGVyOmEuc3R5bGUuZmlsdGVyKXx8IiIpPy4wMSpwYXJzZUZsb2F0KFJlZ0V4cC4kMSkrIiI6Yj8iMSI6IiJ9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc3R5bGUsZD1hLmN1cnJlbnRTdHlsZSxlPW4uaXNOdW1lcmljKGIpPyJhbHBoYShvcGFjaXR5PSIrMTAwKmIrIikiOiIiLGY9ZCYmZC5maWx0ZXJ8fGMuZmlsdGVyfHwiIjtjLnpvb209MSwoYj49MXx8IiI9PT1iKSYmIiI9PT1uLnRyaW0oZi5yZXBsYWNlKFZhLCIiKSkmJmMucmVtb3ZlQXR0cmlidXRlJiYoYy5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpLCIiPT09Ynx8ZCYmIWQuZmlsdGVyKXx8KGMuZmlsdGVyPVZhLnRlc3QoZik/Zi5yZXBsYWNlKFZhLGUpOmYrIiAiK2UpfX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9VWEobC5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/UGEoYSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sU2EsW2EsIm1hcmdpblJpZ2h0Il0pOnZvaWQgMH0pLG4uY3NzSG9va3MubWFyZ2luTGVmdD1VYShsLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe3JldHVybiBiPyhwYXJzZUZsb2F0KFNhKGEsIm1hcmdpbkxlZnQiKSl8fChuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKT9hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtUGEoYSx7Cm1hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSk6MCkpKyJweCI6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9InN0cmluZyI9PXR5cGVvZiBjP2Muc3BsaXQoIiAiKTpbY107ND5kO2QrKyllW2ErVltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSxOYS50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1kYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPVJhKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBjYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IGdiLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1nYixnYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmdiLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fG4uZWFzaW5nLl9kZWZhdWx0LHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPWdiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpnYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1nYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOmdiLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LGdiLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1nYi5wcm90b3R5cGUsZ2IucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiAxIT09YS5lbGVtLm5vZGVUeXBlfHxudWxsIT1hLmVsZW1bYS5wcm9wXSYmbnVsbD09YS5lbGVtLnN0eWxlW2EucHJvcF0/YS5lbGVtW2EucHJvcF06KGI9bi5jc3MoYS5lbGVtLGEucHJvcCwiIiksYiYmImF1dG8iIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV0mJiFuLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sZ2IucHJvcEhvb2tzLnNjcm9sbFRvcD1nYi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0OiJzd2luZyJ9LG4uZng9Z2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBoYixpYixqYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sa2I9L3F1ZXVlSG9va3MkLztmdW5jdGlvbiBsYigpe3JldHVybiBhLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoYj12b2lkIDB9KSxoYj1uLm5vdygpfWZ1bmN0aW9uIG1iKGEsYil7dmFyIGMsZD17aGVpZ2h0OmF9LGU9MDtmb3IoYj1iPzE6MDs0PmU7ZSs9Mi1iKWM9VltlXSxkWyJtYXJnaW4iK2NdPWRbInBhZGRpbmciK2NdPWE7cmV0dXJuIGImJihkLm9wYWNpdHk9ZC53aWR0aD1hKSxkfWZ1bmN0aW9uIG5iKGEsYixjKXtmb3IodmFyIGQsZT0ocWIudHdlZW5lcnNbYl18fFtdKS5jb25jYXQocWIudHdlZW5lcnNbIioiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gb2IoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbT10aGlzLG89e30scD1hLnN0eWxlLHE9YS5ub2RlVHlwZSYmVyhhKSxyPW4uX2RhdGEoYSwiZnhzaG93Iik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLCJmeCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLG0uYWx3YXlzKGZ1bmN0aW9uKCl7bS5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLCJmeCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gYnx8IndpZHRoImluIGIpJiYoYy5vdmVyZmxvdz1bcC5vdmVyZmxvdyxwLm92ZXJmbG93WCxwLm92ZXJmbG93WV0saj1uLmNzcyhhLCJkaXNwbGF5Iiksaz0ibm9uZSI9PT1qP24uX2RhdGEoYSwib2xkZGlzcGxheSIpfHxNYShhLm5vZGVOYW1lKTpqLCJpbmxpbmUiPT09ayYmIm5vbmUiPT09bi5jc3MoYSwiZmxvYXQiKSYmKGwuaW5saW5lQmxvY2tOZWVkc0xheW91dCYmImlubGluZSIhPT1NYShhLm5vZGVOYW1lKT9wLnpvb209MTpwLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxjLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIixsLnNocmlua1dyYXBCbG9ja3MoKXx8bS5hbHdheXMoZnVuY3Rpb24oKXtwLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0scC5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxwLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLGpiLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8InRvZ2dsZSI9PT1lLGU9PT0ocT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09ZXx8IXJ8fHZvaWQgMD09PXJbZF0pY29udGludWU7cT0hMH1vW2RdPXImJnJbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChvKSkiaW5saW5lIj09PSgibm9uZSI9PT1qP01hKGEubm9kZU5hbWUpOmopJiYocC5kaXNwbGF5PWopO2Vsc2V7cj8iaGlkZGVuImluIHImJihxPXIuaGlkZGVuKTpyPW4uX2RhdGEoYSwiZnhzaG93Iix7fSksZiYmKHIuaGlkZGVuPSFxKSxxP24oYSkuc2hvdygpOm0uZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbS5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7bi5fcmVtb3ZlRGF0YShhLCJmeHNob3ciKTtmb3IoYiBpbiBvKW4uc3R5bGUoYSxiLG9bYl0pfSk7Zm9yKGQgaW4gbylnPW5iKHE/cltkXTowLGQsbSksZCBpbiByfHwocltkXT1nLnN0YXJ0LHEmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9IndpZHRoIj09PWR8fCJoZWlnaHQiPT09ZD8xOjApKX19ZnVuY3Rpb24gcGIoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiYiZXhwYW5kImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBxYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1xYi5wcmVmaWx0ZXJzLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPWhifHxsYigpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpuLmVhc2luZy5fZGVmYXVsdH0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOmhifHxsYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj8oaC5ub3RpZnlXaXRoKGEsW2osMSwwXSksaC5yZXNvbHZlV2l0aChhLFtqLGJdKSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihwYihrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9cWIucHJlZmlsdGVyc1tmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIG4uaXNGdW5jdGlvbihkLnN0b3ApJiYobi5fcXVldWVIb29rcyhqLmVsZW0sai5vcHRzLnF1ZXVlKS5zdG9wPW4ucHJveHkoZC5zdG9wLGQpKSxkO3JldHVybiBuLm1hcChrLG5iLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQocWIse3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBYKGMuZWxlbSxhLFUuZXhlYyhiKSxjKSxjfV19LHR3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVsiKiJdKTphPWEubWF0Y2goRyk7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLHFiLnR3ZWVuZXJzW2NdPXFiLnR3ZWVuZXJzW2NdfHxbXSxxYi50d2VlbmVyc1tjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXJzOltvYl0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9xYi5wcmVmaWx0ZXJzLnVuc2hpZnQoYSk6cWIucHJlZmlsdGVycy5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJiJvYmplY3QiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsbnVsbCE9ZC5xdWV1ZSYmZC5xdWV1ZSE9PSEwfHwoZC5xdWV1ZT0iZngiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihXKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9cWIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8bi5fZGF0YSh0aGlzLCJmaW5pc2giKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhKyJxdWV1ZUhvb2tzIixmPW4udGltZXJzLGc9bi5fZGF0YSh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZrYi50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyFiJiZjfHxuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8ImZ4IiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1uLl9kYXRhKHRoaXMpLGQ9Y1thKyJxdWV1ZSJdLGU9Y1thKyJxdWV1ZUhvb2tzIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8ImJvb2xlYW4iPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobWIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOm1iKCJzaG93Iiksc2xpZGVVcDptYigiaGlkZSIpLHNsaWRlVG9nZ2xlOm1iKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPW4udGltZXJzLGM9MDtmb3IoaGI9bi5ub3coKTtjPGIubGVuZ3RoO2MrKylhPWJbY10sYSgpfHxiW2NdIT09YXx8Yi5zcGxpY2UoYy0tLDEpO2IubGVuZ3RofHxuLmZ4LnN0b3AoKSxoYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtpYnx8KGliPWEuc2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhckludGVydmFsKGliKSxpYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGI9bi5meD9uLmZ4LnNwZWVkc1tiXXx8YjpiLGM9Y3x8ImZ4Iix0aGlzLnF1ZXVlKGMsZnVuY3Rpb24oYyxkKXt2YXIgZT1hLnNldFRpbWVvdXQoYyxiKTtkLnN0b3A9ZnVuY3Rpb24oKXthLmNsZWFyVGltZW91dChlKX19KX0sZnVuY3Rpb24oKXt2YXIgYSxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT1kLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLGY9ZS5hcHBlbmRDaGlsZChkLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKTtjPWQuY3JlYXRlRWxlbWVudCgiZGl2IiksYy5zZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIsInQiKSxjLmlubmVySFRNTD0iICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxiLnNldEF0dHJpYnV0ZSgidHlwZSIsImNoZWNrYm94IiksYy5hcHBlbmRDaGlsZChiKSxhPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXSxhLnN0eWxlLmNzc1RleHQ9InRvcDoxcHgiLGwuZ2V0U2V0QXR0cmlidXRlPSJ0IiE9PWMuY2xhc3NOYW1lLGwuc3R5bGU9L3RvcC8udGVzdChhLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksbC5ocmVmTm9ybWFsaXplZD0iL2EiPT09YS5nZXRBdHRyaWJ1dGUoImhyZWYiKSxsLmNoZWNrT249ISFiLnZhbHVlLGwub3B0U2VsZWN0ZWQ9Zi5zZWxlY3RlZCxsLmVuY3R5cGU9ISFkLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGUuZGlzYWJsZWQ9ITAsbC5vcHREaXNhYmxlZD0hZi5kaXNhYmxlZCxiPWQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxiLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSxsLmlucHV0PSIiPT09Yi5nZXRBdHRyaWJ1dGUoInZhbHVlIiksYi52YWx1ZT0idCIsYi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGwucmFkaW9WYWx1ZT0idCI9PT1iLnZhbHVlfSgpO3ZhciByYj0vXHIvZyxzYj0vW1x4MjBcdFxyXG5cZl0rL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT0iIjoibnVtYmVyIj09dHlwZW9mIGU/ZSs9IiI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPyIiOmErIiJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYic2V0ImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSwidmFsdWUiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiYiZ2V0ImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsInZhbHVlIikpP2M6KGM9ZS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIGM/Yy5yZXBsYWNlKHJiLCIiKTpudWxsPT1jPyIiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsInZhbHVlIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKS5yZXBsYWNlKHNiLCIgIil9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPSJzZWxlY3Qtb25lIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwoYy5zZWxlY3RlZHx8aT09PWUpJiYobC5vcHREaXNhYmxlZD8hYy5kaXNhYmxlZDpudWxsPT09Yy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0paWYoZD1lW2ddLG4uaW5BcnJheShuLnZhbEhvb2tzLm9wdGlvbi5nZXQoZCksZik+LTEpdHJ5e2Quc2VsZWN0ZWQ9Yz0hMH1jYXRjaChoKXtkLnNjcm9sbEhlaWdodH1lbHNlIGQuc2VsZWN0ZWQ9ITE7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGV9fX19KSxuLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT4tMTp2b2lkIDB9fSxsLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpPyJvbiI6YS52YWx1ZX0pfSk7dmFyIHRiLHViLHZiPW4uZXhwci5hdHRySGFuZGxlLHdiPS9eKD86Y2hlY2tlZHxzZWxlY3RlZCkkL2kseGI9bC5nZXRTZXRBdHRyaWJ1dGUseWI9bC5pbnB1dDtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBZKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZigzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgYS5nZXRBdHRyaWJ1dGU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxlPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT91Yjp0YikpLHZvaWQgMCE9PWM/bnVsbD09PWM/dm9pZCBuLnJlbW92ZUF0dHIoYSxiKTplJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDooYS5zZXRBdHRyaWJ1dGUoYixjKyIiKSxjKTplJiYiZ2V0ImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOihkPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZD92b2lkIDA6ZCkpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFsLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT1iJiZuLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKCJ0eXBlIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEcpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYyk/eWImJnhifHwhd2IudGVzdChjKT9hW2RdPSExOmFbbi5jYW1lbENhc2UoImRlZmF1bHQtIitjKV09YVtkXT0hMTpuLmF0dHIoYSxjLCIiKSxhLnJlbW92ZUF0dHJpYnV0ZSh4Yj9jOmQpfX0pLHViPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6eWImJnhifHwhd2IudGVzdChjKT9hLnNldEF0dHJpYnV0ZSgheGImJm4ucHJvcEZpeFtjXXx8YyxjKTphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYyldPWFbY109ITAsY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPXZiW2JdfHxuLmZpbmQuYXR0cjt5YiYmeGJ8fCF3Yi50ZXN0KGIpP3ZiW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj12YltiXSx2YltiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsdmJbYl09ZiksZX06dmJbYl09ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphW24uY2FtZWxDYXNlKCJkZWZhdWx0LSIrYildP2IudG9Mb3dlckNhc2UoKTpudWxsfX0pLHliJiZ4Ynx8KG4uYXR0ckhvb2tzLnZhbHVlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLm5vZGVOYW1lKGEsImlucHV0Iik/dm9pZChhLmRlZmF1bHRWYWx1ZT1iKTp0YiYmdGIuc2V0KGEsYixjKX19KSx4Ynx8KHRiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuZ2V0QXR0cmlidXRlTm9kZShjKTtyZXR1cm4gZHx8YS5zZXRBdHRyaWJ1dGVOb2RlKGQ9YS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShjKSksZC52YWx1ZT1iKz0iIiwidmFsdWUiPT09Y3x8Yj09PWEuZ2V0QXR0cmlidXRlKGMpP2I6dm9pZCAwfX0sdmIuaWQ9dmIubmFtZT12Yi5jb29yZHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiYiIiE9PWQudmFsdWU/ZC52YWx1ZTpudWxsfSxuLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpO3JldHVybiBjJiZjLnNwZWNpZmllZD9jLnZhbHVlOnZvaWQgMH0sc2V0OnRiLnNldH0sbi5hdHRySG9va3MuY29udGVudGVkaXRhYmxlPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3RiLnNldChhLCIiPT09Yj8hMTpiLGMpfX0sbi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe24uYXR0ckhvb2tzW2JdPXtzZXQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4iIj09PWM/KGEuc2V0QXR0cmlidXRlKGIsImF1dG8iKSxjKTp2b2lkIDB9fX0pKSxsLnN0eWxlfHwobi5hdHRySG9va3Muc3R5bGU9e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0fHx2b2lkIDB9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhLnN0eWxlLmNzc1RleHQ9YisiIn19KTt2YXIgemI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksQWI9L14oPzphfGFyZWEpJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFkodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9bi5wcm9wRml4W2FdfHxhLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPXZvaWQgMCxkZWxldGUgdGhpc1thXX1jYXRjaChiKXt9fSl9fSksbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiYic2V0ImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmImdldCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSwidGFiaW5kZXgiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTp6Yi50ZXN0KGEubm9kZU5hbWUpfHxBYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSxsLmhyZWZOb3JtYWxpemVkfHxuLmVhY2goWyJocmVmIiwic3JjIl0sZnVuY3Rpb24oYSxiKXtuLnByb3BIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShiLDQpfX19KSxsLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH0sc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtiJiYoYi5zZWxlY3RlZEluZGV4LGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLG4uZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGwuZW5jdHlwZXx8KG4ucHJvcEZpeC5lbmN0eXBlPSJlbmNvZGluZyIpO3ZhciBCYj0vW1x0XHJcblxmXS9nO2Z1bmN0aW9uIENiKGEpe3JldHVybiBuLmF0dHIoYSwiY2xhc3MiKXx8IiJ9bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsQ2IodGhpcykpKX0pO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKWQuaW5kZXhPZigiICIrZisiICIpPDAmJihkKz1mKyIgIik7aD1uLnRyaW0oZCksZSE9PWgmJm4uYXR0cihjLCJjbGFzcyIsaCl9fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpPTA7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLENiKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgYSYmYSl7Yj1hLm1hdGNoKEcpfHxbXTt3aGlsZShjPXRoaXNbaSsrXSlpZihlPUNiKGMpLGQ9MT09PWMubm9kZVR5cGUmJigiICIrZSsiICIpLnJlcGxhY2UoQmIsIiAiKSl7Zz0wO3doaWxlKGY9YltnKytdKXdoaWxlKGQuaW5kZXhPZigiICIrZisiICIpPi0xKWQ9ZC5yZXBsYWNlKCIgIitmKyIgIiwiICIpO2g9bi50cmltKGQpLGUhPT1oJiZuLmF0dHIoYywiY2xhc3MiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBiJiYic3RyaW5nIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6bi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsQ2IodGhpcyksYiksYil9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixkLGUsZjtpZigic3RyaW5nIj09PWMpe2Q9MCxlPW4odGhpcyksZj1hLm1hdGNoKEcpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJiJib29sZWFuIiE9PWN8fChiPUNiKHRoaXMpLGImJm4uX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsYiksbi5hdHRyKHRoaXMsImNsYXNzIixifHxhPT09ITE/IiI6bi5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj0iICIrYSsiICI7d2hpbGUoYz10aGlzW2QrK10paWYoMT09PWMubm9kZVR5cGUmJigiICIrQ2IoYykrIiAiKS5yZXBsYWNlKEJiLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KSxuLmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9fSk7dmFyIERiPWEubG9jYXRpb24sRWI9bi5ub3coKSxGYj0vXD8vLEdiPS8oLCl8KFxbfHspfCh9fF0pfCIoPzpbXiJcXFxyXG5dfFxcWyJcXFwvYmZucnRdfFxcdVtcZGEtZkEtRl17NH0pKiJccyo6P3x0cnVlfGZhbHNlfG51bGx8LT8oPyEwXGQpXGQrKD86XC5cZCt8KSg/OltlRV1bKy1dP1xkK3wpL2c7bi5wYXJzZUpTT049ZnVuY3Rpb24oYil7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKyIiKTt2YXIgYyxkPW51bGwsZT1uLnRyaW0oYisiIik7cmV0dXJuIGUmJiFuLnRyaW0oZS5yZXBsYWNlKEdiLGZ1bmN0aW9uKGEsYixlLGYpe3JldHVybiBjJiZiJiYoZD0wKSwwPT09ZD9hOihjPWV8fGIsZCs9IWYtIWUsIiIpfSkpP0Z1bmN0aW9uKCJyZXR1cm4gIitlKSgpOm4uZXJyb3IoIkludmFsaWQgSlNPTjogIitiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihiKXt2YXIgYyxkO2lmKCFifHwic3RyaW5nIiE9dHlwZW9mIGIpcmV0dXJuIG51bGw7dHJ5e2EuRE9NUGFyc2VyPyhkPW5ldyBhLkRPTVBhcnNlcixjPWQucGFyc2VGcm9tU3RyaW5nKGIsInRleHQveG1sIikpOihjPW5ldyBhLkFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxET00iKSxjLmFzeW5jPSJmYWxzZSIsYy5sb2FkWE1MKGIpKX1jYXRjaChlKXtjPXZvaWQgMH1yZXR1cm4gYyYmYy5kb2N1bWVudEVsZW1lbnQmJiFjLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aHx8bi5lcnJvcigiSW52YWxpZCBYTUw6ICIrYiksY307dmFyIEhiPS8jLiokLyxJYj0vKFs/Jl0pXz1bXiZdKi8sSmI9L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9nbSxLYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxMYj0vXig/OkdFVHxIRUFEKSQvLE1iPS9eXC9cLy8sTmI9L14oW1x3ListXSs6KSg/OlwvXC8oPzpbXlwvPyNdKkB8KShbXlwvPyM6XSopKD86OihcZCspfCl8KS8sT2I9e30sUGI9e30sUWI9IiovIi5jb25jYXQoIioiKSxSYj1EYi5ocmVmLFNiPU5iLmV4ZWMoUmIudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIFRiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpeyJzdHJpbmciIT10eXBlb2YgYiYmKGM9YixiPSIqIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEcpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pIisiPT09ZC5jaGFyQXQoMCk/KGQ9ZC5zbGljZSgxKXx8IioiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gVWIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09UGI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlWyIqIl0mJmcoIioiKX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGQgaW4gYil2b2lkIDAhPT1iW2RdJiYoKGVbZF0/YTpjfHwoYz17fSkpW2RdPWJbZF0pO3JldHVybiBjJiZuLmV4dGVuZCghMCxhLGMpLGF9ZnVuY3Rpb24gV2IoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKCIqIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWUmJihlPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihlKWZvcihnIGluIGgpaWYoaFtnXSYmaFtnXS50ZXN0KGUpKXtpLnVuc2hpZnQoZyk7YnJlYWt9aWYoaVswXWluIGMpZj1pWzBdO2Vsc2V7Zm9yKGcgaW4gYyl7aWYoIWlbMF18fGEuY29udmVydGVyc1tnKyIgIitpWzBdXSl7Zj1nO2JyZWFrfWR8fChkPWcpfWY9Znx8ZH1yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gWGIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZigiKiI9PT1mKWY9aTtlbHNlIGlmKCIqIiE9PWkmJmkhPT1mKXtpZihnPWpbaSsiICIrZl18fGpbIiogIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdCgiICIpLGhbMV09PT1mJiYoZz1qW2krIiAiK2hbMF1dfHxqWyIqICIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhWyJ0aHJvd3MiXSliPWcoYik7ZWxzZSB0cnl7Yj1nKGIpfWNhdGNoKGwpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmc/bDoiTm8gY29udmVyc2lvbiBmcm9tICIraSsiIHRvICIrZn19fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6UmIsdHlwZToiR0VUIixpc0xvY2FsOktiLnRlc3QoU2JbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6UWIsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6bi5wYXJzZUpTT04sInRleHQgeG1sIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9WYihWYihhLG4uYWpheFNldHRpbmdzKSxiKTpWYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpUYihPYiksYWpheFRyYW5zcG9ydDpUYihQYiksYWpheDpmdW5jdGlvbihiLGMpeyJvYmplY3QiPT10eXBlb2YgYiYmKGM9YixiPXZvaWQgMCksYz1jfHx7fTt2YXIgZCxlLGYsZyxoLGksaixrLGw9bi5hamF4U2V0dXAoe30sYyksbT1sLmNvbnRleHR8fGwsbz1sLmNvbnRleHQmJihtLm5vZGVUeXBlfHxtLmpxdWVyeSk/bihtKTpuLmV2ZW50LHA9bi5EZWZlcnJlZCgpLHE9bi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iikscj1sLnN0YXR1c0NvZGV8fHt9LHM9e30sdD17fSx1PTAsdj0iY2FuY2VsZWQiLHc9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dSl7aWYoIWspe2s9e307d2hpbGUoYj1KYi5leGVjKGcpKWtbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9a1thLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT11P2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdXx8KGE9dFtjXT10W2NdfHxhLHNbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdXx8KGwubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dSlmb3IoYiBpbiBhKXJbYl09W3JbYl0sYVtiXV07ZWxzZSB3LmFsd2F5cyhhW3cuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHY7cmV0dXJuIGomJmouYWJvcnQoYikseSgwLGIpLHRoaXN9fTtpZihwLnByb21pc2UodykuY29tcGxldGU9cS5hZGQsdy5zdWNjZXNzPXcuZG9uZSx3LmVycm9yPXcuZmFpbCxsLnVybD0oKGJ8fGwudXJsfHxSYikrIiIpLnJlcGxhY2UoSGIsIiIpLnJlcGxhY2UoTWIsU2JbMV0rIi8vIiksbC50eXBlPWMubWV0aG9kfHxjLnR5cGV8fGwubWV0aG9kfHxsLnR5cGUsbC5kYXRhVHlwZXM9bi50cmltKGwuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChHKXx8WyIiXSxudWxsPT1sLmNyb3NzRG9tYWluJiYoZD1OYi5leGVjKGwudXJsLnRvTG93ZXJDYXNlKCkpLGwuY3Jvc3NEb21haW49ISghZHx8ZFsxXT09PVNiWzFdJiZkWzJdPT09U2JbMl0mJihkWzNdfHwoImh0dHA6Ij09PWRbMV0/IjgwIjoiNDQzIikpPT09KFNiWzNdfHwoImh0dHA6Ij09PVNiWzFdPyI4MCI6IjQ0MyIpKSkpLGwuZGF0YSYmbC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBsLmRhdGEmJihsLmRhdGE9bi5wYXJhbShsLmRhdGEsbC50cmFkaXRpb25hbCkpLFViKE9iLGwsYyx3KSwyPT09dSlyZXR1cm4gdztpPW4uZXZlbnQmJmwuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGwudHlwZT1sLnR5cGUudG9VcHBlckNhc2UoKSxsLmhhc0NvbnRlbnQ9IUxiLnRlc3QobC50eXBlKSxmPWwudXJsLGwuaGFzQ29udGVudHx8KGwuZGF0YSYmKGY9bC51cmwrPShGYi50ZXN0KGYpPyImIjoiPyIpK2wuZGF0YSxkZWxldGUgbC5kYXRhKSxsLmNhY2hlPT09ITEmJihsLnVybD1JYi50ZXN0KGYpP2YucmVwbGFjZShJYiwiJDFfPSIrRWIrKyk6ZisoRmIudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0ViKyspKSxsLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsbi5sYXN0TW9kaWZpZWRbZl0pLG4uZXRhZ1tmXSYmdy5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixuLmV0YWdbZl0pKSwobC5kYXRhJiZsLmhhc0NvbnRlbnQmJmwuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJncuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixsLmNvbnRlbnRUeXBlKSx3LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsbC5kYXRhVHlwZXNbMF0mJmwuYWNjZXB0c1tsLmRhdGFUeXBlc1swXV0/bC5hY2NlcHRzW2wuZGF0YVR5cGVzWzBdXSsoIioiIT09bC5kYXRhVHlwZXNbMF0/IiwgIitRYisiOyBxPTAuMDEiOiIiKTpsLmFjY2VwdHNbIioiXSk7Zm9yKGUgaW4gbC5oZWFkZXJzKXcuc2V0UmVxdWVzdEhlYWRlcihlLGwuaGVhZGVyc1tlXSk7aWYobC5iZWZvcmVTZW5kJiYobC5iZWZvcmVTZW5kLmNhbGwobSx3LGwpPT09ITF8fDI9PT11KSlyZXR1cm4gdy5hYm9ydCgpO3Y9ImFib3J0Ijtmb3IoZSBpbntzdWNjZXNzOjEsZXJyb3I6MSxjb21wbGV0ZToxfSl3W2VdKGxbZV0pO2lmKGo9VWIoUGIsbCxjLHcpKXtpZih3LnJlYWR5U3RhdGU9MSxpJiZvLnRyaWdnZXIoImFqYXhTZW5kIixbdyxsXSksMj09PXUpcmV0dXJuIHc7bC5hc3luYyYmbC50aW1lb3V0PjAmJihoPWEuc2V0VGltZW91dChmdW5jdGlvbigpe3cuYWJvcnQoInRpbWVvdXQiKX0sbC50aW1lb3V0KSk7dHJ5e3U9MSxqLnNlbmQocyx5KX1jYXRjaCh4KXtpZighKDI+dSkpdGhyb3cgeDt5KC0xLHgpfX1lbHNlIHkoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIHkoYixjLGQsZSl7dmFyIGsscyx0LHYseCx5PWM7MiE9PXUmJih1PTIsaCYmYS5jbGVhclRpbWVvdXQoaCksaj12b2lkIDAsZz1lfHwiIix3LnJlYWR5U3RhdGU9Yj4wPzQ6MCxrPWI+PTIwMCYmMzAwPmJ8fDMwND09PWIsZCYmKHY9V2IobCx3LGQpKSx2PVhiKGwsdix3LGspLGs/KGwuaWZNb2RpZmllZCYmKHg9dy5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLHgmJihuLmxhc3RNb2RpZmllZFtmXT14KSx4PXcuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSx4JiYobi5ldGFnW2ZdPXgpKSwyMDQ9PT1ifHwiSEVBRCI9PT1sLnR5cGU/eT0ibm9jb250ZW50IjozMDQ9PT1iP3k9Im5vdG1vZGlmaWVkIjooeT12LnN0YXRlLHM9di5kYXRhLHQ9di5lcnJvcixrPSF0KSk6KHQ9eSwhYiYmeXx8KHk9ImVycm9yIiwwPmImJihiPTApKSksdy5zdGF0dXM9Yix3LnN0YXR1c1RleHQ9KGN8fHkpKyIiLGs/cC5yZXNvbHZlV2l0aChtLFtzLHksd10pOnAucmVqZWN0V2l0aChtLFt3LHksdF0pLHcuc3RhdHVzQ29kZShyKSxyPXZvaWQgMCxpJiZvLnRyaWdnZXIoaz8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFt3LGwsaz9zOnRdKSxxLmZpcmVXaXRoKG0sW3cseV0pLGkmJihvLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3csbF0pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiB3fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZ2V0KGEsdm9pZCAwLGIsInNjcmlwdCIpfX0pLG4uZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGIpe25bYl09ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIG4uaXNGdW5jdGlvbihjKSYmKGU9ZXx8ZCxkPWMsYz12b2lkIDApLG4uYWpheChuLmV4dGVuZCh7dXJsOmEsdHlwZTpiLGRhdGFUeXBlOmUsZGF0YTpjLHN1Y2Nlc3M6ZH0sbi5pc1BsYWluT2JqZWN0KGEpJiZhKSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOiJHRVQiLGRhdGFUeXBlOiJzY3JpcHQiLGNhY2hlOiEwLGFzeW5jOiExLGdsb2JhbDohMSwidGhyb3dzIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk7aWYodGhpc1swXSl7dmFyIGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApO3RoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RDaGlsZCYmMT09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSlhPWEuZmlyc3RDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKX1yZXR1cm4gdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPW4odGhpcyksYz1iLmNvbnRlbnRzKCk7Yy5sZW5ndGg/Yy53cmFwQWxsKGEpOmIuYXBwZW5kKGEpfSl9LHdyYXA6ZnVuY3Rpb24oYSl7dmFyIGI9bi5pc0Z1bmN0aW9uKGEpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7bih0aGlzKS53cmFwQWxsKGI/YS5jYWxsKHRoaXMsYyk6YSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe24ubm9kZU5hbWUodGhpcywiYm9keSIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTtmdW5jdGlvbiBZYihhKXtyZXR1cm4gYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxuLmNzcyhhLCJkaXNwbGF5Iil9ZnVuY3Rpb24gWmIoYSl7aWYoIW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50fHxkLGEpKXJldHVybiEwO3doaWxlKGEmJjE9PT1hLm5vZGVUeXBlKXtpZigibm9uZSI9PT1ZYihhKXx8ImhpZGRlbiI9PT1hLnR5cGUpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9bi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBsLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cygpP2Eub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wJiYhYS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aDpaYihhKX0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgJGI9LyUyMC9nLF9iPS9cW1xdJC8sYWM9L1xyP1xuL2csYmM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLGNjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBkYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHxfYi50ZXN0KGEpP2QoYSxlKTpkYyhhKyJbIisoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT1lP2I6IiIpKyJdIixlLGMsZCl9KTtlbHNlIGlmKGN8fCJvYmplY3QiIT09bi50eXBlKGIpKWQoYSxiKTtlbHNlIGZvcihlIGluIGIpZGMoYSsiWyIrZSsiXSIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj8iIjpiLGRbZC5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChhKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlkYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKCImIikucmVwbGFjZSgkYiwiKyIpfSxuLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG4ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1uLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmY2MudGVzdCh0aGlzLm5vZGVOYW1lKSYmIWJjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFaLnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoYWMsIlxyXG4iKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKGFjLCJcclxuIil9fSkuZ2V0KCl9fSksbi5hamF4U2V0dGluZ3MueGhyPXZvaWQgMCE9PWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTG9jYWw/aWMoKTpkLmRvY3VtZW50TW9kZT44P2hjKCk6L14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pLnRlc3QodGhpcy50eXBlKSYmaGMoKXx8aWMoKX06aGM7dmFyIGVjPTAsZmM9e30sZ2M9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib251bmxvYWQiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIGZjKWZjW2FdKHZvaWQgMCwhMCl9KSxsLmNvcnM9ISFnYyYmIndpdGhDcmVkZW50aWFscyJpbiBnYyxnYz1sLmFqYXg9ISFnYyxnYyYmbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe2lmKCFiLmNyb3NzRG9tYWlufHxsLmNvcnMpe3ZhciBjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7dmFyIGYsZz1iLnhocigpLGg9KytlYztpZihnLm9wZW4oYi50eXBlLGIudXJsLGIuYXN5bmMsYi51c2VybmFtZSxiLnBhc3N3b3JkKSxiLnhockZpZWxkcylmb3IoZiBpbiBiLnhockZpZWxkcylnW2ZdPWIueGhyRmllbGRzW2ZdO2IubWltZVR5cGUmJmcub3ZlcnJpZGVNaW1lVHlwZSYmZy5vdmVycmlkZU1pbWVUeXBlKGIubWltZVR5cGUpLGIuY3Jvc3NEb21haW58fGRbIlgtUmVxdWVzdGVkLVdpdGgiXXx8KGRbIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoZiBpbiBkKXZvaWQgMCE9PWRbZl0mJmcuc2V0UmVxdWVzdEhlYWRlcihmLGRbZl0rIiIpO2cuc2VuZChiLmhhc0NvbnRlbnQmJmIuZGF0YXx8bnVsbCksYz1mdW5jdGlvbihhLGQpe3ZhciBmLGksajtpZihjJiYoZHx8ND09PWcucmVhZHlTdGF0ZSkpaWYoZGVsZXRlIGZjW2hdLGM9dm9pZCAwLGcub25yZWFkeXN0YXRlY2hhbmdlPW4ubm9vcCxkKTQhPT1nLnJlYWR5U3RhdGUmJmcuYWJvcnQoKTtlbHNle2o9e30sZj1nLnN0YXR1cywic3RyaW5nIj09dHlwZW9mIGcucmVzcG9uc2VUZXh0JiYoai50ZXh0PWcucmVzcG9uc2VUZXh0KTt0cnl7aT1nLnN0YXR1c1RleHR9Y2F0Y2goayl7aT0iIn1mfHwhYi5pc0xvY2FsfHxiLmNyb3NzRG9tYWluPzEyMjM9PT1mJiYoZj0yMDQpOmY9ai50ZXh0PzIwMDo0MDR9aiYmZShmLGksaixnLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKX0sYi5hc3luYz80PT09Zy5yZWFkeVN0YXRlP2Euc2V0VGltZW91dChjKTpnLm9ucmVhZHlzdGF0ZWNoYW5nZT1mY1toXT1jOmMoKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKHZvaWQgMCwhMCl9fX19KTtmdW5jdGlvbiBoYygpe3RyeXtyZXR1cm4gbmV3IGEuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goYil7fX1mdW5jdGlvbiBpYygpe3RyeXtyZXR1cm4gbmV3IGEuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChiKXt9fW4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvfSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLG4uYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjPWQuaGVhZHx8bigiaGVhZCIpWzBdfHxkLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9ZC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxiLmFzeW5jPSEwLGEuc2NyaXB0Q2hhcnNldCYmKGIuY2hhcnNldD1hLnNjcmlwdENoYXJzZXQpLGIuc3JjPWEudXJsLGIub25sb2FkPWIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEsYyl7KGN8fCFiLnJlYWR5U3RhdGV8fC9sb2FkZWR8Y29tcGxldGUvLnRlc3QoYi5yZWFkeVN0YXRlKSkmJihiLm9ubG9hZD1iLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbCxjfHxmKDIwMCwic3VjY2VzcyIpKX0sYy5pbnNlcnRCZWZvcmUoYixjLmZpcnN0Q2hpbGQpfSxhYm9ydDpmdW5jdGlvbigpe2ImJmIub25sb2FkKHZvaWQgMCwhMCl9fX19KTt2YXIgamM9W10sa2M9Lyg9KVw/KD89JnwkKXxcP1w/LztuLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9amMucG9wKCl8fG4uZXhwYW5kbysiXyIrRWIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLG4uYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKGtjLnRlc3QoYi51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYma2MudGVzdChiLmRhdGEpJiYiZGF0YSIpO3JldHVybiBofHwianNvbnAiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKGtjLCIkMSIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShGYi50ZXN0KGIudXJsKT8iJiI6Ij8iKStiLmpzb25wKyI9IitlKSxiLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gZ3x8bi5lcnJvcihlKyIgd2FzIG5vdCBjYWxsZWQiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT0ianNvbiIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP24oYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssamMucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSwic2NyaXB0Iik6dm9pZCAwfSksbi5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhfHwic3RyaW5nIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGQ7dmFyIGU9eC5leGVjKGEpLGY9IWMmJltdO3JldHVybiBlP1tiLmNyZWF0ZUVsZW1lbnQoZVsxXSldOihlPWphKFthXSxiLGYpLGYmJmYubGVuZ3RoJiZuKGYpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9O3ZhciBsYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZigic3RyaW5nIiE9dHlwZW9mIGEmJmxjKXJldHVybiBsYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZigiICIpO3JldHVybiBoPi0xJiYoZD1uLnRyaW0oYS5zbGljZShoLGEubGVuZ3RoKSksYT1hLnNsaWNlKDAsaCkpLG4uaXNGdW5jdGlvbihiKT8oYz1iLGI9dm9pZCAwKTpiJiYib2JqZWN0Ij09dHlwZW9mIGImJihlPSJQT1NUIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oIjxkaXY+IikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sbi5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ3JlcChuLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsInBvc2l0aW9uIiksbD1uKGEpLG09e307InN0YXRpYyI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLCJ0b3AiKSxpPW4uY3NzKGEsImxlZnQiKSxqPSgiYWJzb2x1dGUiPT09a3x8ImZpeGVkIj09PWspJiZuLmluQXJyYXkoImF1dG8iLFtmLGldKT4tMSxqPyhkPWwucG9zaXRpb24oKSxnPWQudG9wLGU9ZC5sZWZ0KTooZz1wYXJzZUZsb2F0KGYpfHwwLGU9cGFyc2VGbG9hdChpKXx8MCksbi5pc0Z1bmN0aW9uKGIpJiYoYj1iLmNhbGwoYSxjLG4uZXh0ZW5kKHt9LGgpKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXt0b3A6MCxsZWZ0OjB9LGU9dGhpc1swXSxmPWUmJmUub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixlKT8oInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKGQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1tYyhmKSx7dG9wOmQudG9wKyhjLnBhZ2VZT2Zmc2V0fHxiLnNjcm9sbFRvcCktKGIuY2xpZW50VG9wfHwwKSxsZWZ0OmQubGVmdCsoYy5wYWdlWE9mZnNldHx8Yi5zY3JvbGxMZWZ0KS0oYi5jbGllbnRMZWZ0fHwwKX0pOmR9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXt0b3A6MCxsZWZ0OjB9LGQ9dGhpc1swXTtyZXR1cm4iZml4ZWQiPT09bi5jc3MoZCwicG9zaXRpb24iKT9iPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksbi5ub2RlTmFtZShhWzBdLCJodG1sIil8fChjPWEub2Zmc2V0KCkpLGMudG9wKz1uLmNzcyhhWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLGMubGVmdCs9bi5jc3MoYVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6Yi50b3AtYy50b3Atbi5jc3MoZCwibWFyZ2luVG9wIiwhMCksbGVmdDpiLmxlZnQtYy5sZWZ0LW4uY3NzKGQsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiYhbi5ub2RlTmFtZShhLCJodG1sIikmJiJzdGF0aWMiPT09bi5jc3MoYSwicG9zaXRpb24iKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxRYX0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDoicGFnZVhPZmZzZXQiLHNjcm9sbFRvcDoicGFnZVlPZmZzZXQifSxmdW5jdGlvbihhLGIpe3ZhciBjPS9ZLy50ZXN0KGIpO24uZm5bYV09ZnVuY3Rpb24oZCl7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihhLGQsZSl7dmFyIGY9bWMoYSk7cmV0dXJuIHZvaWQgMD09PWU/Zj9iIGluIGY/ZltiXTpmLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtkXTphW2RdOnZvaWQoZj9mLnNjcm9sbFRvKGM/bihmKS5zY3JvbGxMZWZ0KCk6ZSxjP2U6bihmKS5zY3JvbGxUb3AoKSk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksbi5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT1VYShsLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz1TYShhLGIpLE9hLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdKyJweCI6Yyk6dm9pZCAwfSl9KSxuLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7CnBhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6YiwiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKGMsZCl7bi5mbltkXT1mdW5jdGlvbihkLGUpe3ZhciBmPWFyZ3VtZW50cy5sZW5ndGgmJihjfHwiYm9vbGVhbiIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIFkodGhpcyxmdW5jdGlvbihiLGMsZCl7dmFyIGU7cmV0dXJuIG4uaXNXaW5kb3coYik/Yi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5WyJzY3JvbGwiK2FdLGVbInNjcm9sbCIrYV0sYi5ib2R5WyJvZmZzZXQiK2FdLGVbIm9mZnNldCIrYV0sZVsiY2xpZW50IithXSkpOnZvaWQgMD09PWQ/bi5jc3MoYixjLGcpOm4uc3R5bGUoYixjLGQsZyl9LGIsZj9kOnZvaWQgMCxmLG51bGwpfX0pfSksbi5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsIioqIik6dGhpcy5vZmYoYixhfHwiKioiLGMpfX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjaywiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gbn0pO3ZhciBuYz1hLmpRdWVyeSxvYz1hLiQ7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09biYmKGEuJD1vYyksYiYmYS5qUXVlcnk9PT1uJiYoYS5qUXVlcnk9bmMpLG59LGJ8fChhLmpRdWVyeT1hLiQ9biksbn0pOwo="},{"meta":{"name":"sweetalert2.min.js","url":"https://cdn.jsdelivr.net/npm/sweetalert2@9.14.0/dist/sweetalert2.min.js","ts":1591001487099,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9dHx8c2VsZikuU3dlZXRhbGVydDI9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuKHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuIHR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/InN5bWJvbCI6dHlwZW9mIHR9KSh0KX1mdW5jdGlvbiBhKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gbyh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgbz1lW25dO28uZW51bWVyYWJsZT1vLmVudW1lcmFibGV8fCExLG8uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBvJiYoby53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsby5rZXksbyl9fWZ1bmN0aW9uIGModCxlLG4pe3JldHVybiBlJiZvKHQucHJvdG90eXBlLGUpLG4mJm8odCxuKSx0fWZ1bmN0aW9uIHMoKXtyZXR1cm4ocz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07Zm9yKHZhciBvIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sbykmJih0W29dPW5bb10pfXJldHVybiB0fSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIHUodCl7cmV0dXJuKHU9T2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5nZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZih0KX0pKHQpfWZ1bmN0aW9uIGwodCxlKXtyZXR1cm4obD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX19wcm90b19fPWUsdH0pKHQsZSl9ZnVuY3Rpb24gZCgpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09dHlwZW9mIFByb3h5KXJldHVybiEwO3RyeXtyZXR1cm4gRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLFtdLGZ1bmN0aW9uKCl7fSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX1mdW5jdGlvbiBpKHQsZSxuKXtyZXR1cm4oaT1kKCk/UmVmbGVjdC5jb25zdHJ1Y3Q6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPVtudWxsXTtvLnB1c2guYXBwbHkobyxlKTt2YXIgaT1uZXcoRnVuY3Rpb24uYmluZC5hcHBseSh0LG8pKTtyZXR1cm4gbiYmbChpLG4ucHJvdG90eXBlKSxpfSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIHAodCxlKXtyZXR1cm4hZXx8Im9iamVjdCIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgZT9mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIHR9KHQpOmV9ZnVuY3Rpb24gZih0LGUsbil7cmV0dXJuKGY9InVuZGVmaW5lZCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0LmdldD9SZWZsZWN0LmdldDpmdW5jdGlvbih0LGUsbil7dmFyIG89ZnVuY3Rpb24odCxlKXtmb3IoOyFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSYmbnVsbCE9PSh0PXUodCkpOyk7cmV0dXJuIHR9KHQsZSk7aWYobyl7dmFyIGk9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGUpO3JldHVybiBpLmdldD9pLmdldC5jYWxsKG4pOmkudmFsdWV9fSkodCxlLG58fHQpfWZ1bmN0aW9uIG0oZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX0pfWZ1bmN0aW9uIGgodCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpfWZ1bmN0aW9uIGcodCxlKXt2YXIgbjtuPSciJy5jb25jYXQodCwnIiBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHVzZSAiJykuY29uY2F0KGUsJyIgaW5zdGVhZC4nKSwtMT09PV8uaW5kZXhPZihuKSYmKF8ucHVzaChuKSxOKG4pKX1mdW5jdGlvbiB2KHQpe3JldHVybiB0JiZQcm9taXNlLnJlc29sdmUodCk9PT10fWZ1bmN0aW9uIGIodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBFbGVtZW50fHwib2JqZWN0Ij09PXIoZT10KSYmZS5qcXVlcnk7dmFyIGV9ZnVuY3Rpb24gdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW3Rbbl1dPSJzd2FsMi0iK3Rbbl07cmV0dXJuIGV9ZnVuY3Rpb24geSh0KXt2YXIgZT1ZKCk7cmV0dXJuIGU/ZS5xdWVyeVNlbGVjdG9yKHQpOm51bGx9ZnVuY3Rpb24gZSh0KXtyZXR1cm4geSgiLiIuY29uY2F0KHQpKX1mdW5jdGlvbiBuKCl7dmFyIHQ9WigpO3JldHVybiBoKHQucXVlcnlTZWxlY3RvckFsbCgiLiIuY29uY2F0KFcuaWNvbikpKX1mdW5jdGlvbiB3KCl7dmFyIHQ9bigpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gaHQodCl9KTtyZXR1cm4gdC5sZW5ndGg/dFswXTpudWxsfWZ1bmN0aW9uIEMoKXtyZXR1cm4gZShXLnRpdGxlKX1mdW5jdGlvbiBrKCl7cmV0dXJuIGUoVy5jb250ZW50KX1mdW5jdGlvbiB4KCl7cmV0dXJuIGUoVy5pbWFnZSl9ZnVuY3Rpb24gUCgpe3JldHVybiBlKFdbInByb2dyZXNzLXN0ZXBzIl0pfWZ1bmN0aW9uIEEoKXtyZXR1cm4gZShXWyJ2YWxpZGF0aW9uLW1lc3NhZ2UiXSl9ZnVuY3Rpb24gRSgpe3JldHVybiB5KCIuIi5jb25jYXQoVy5hY3Rpb25zLCIgLiIpLmNvbmNhdChXLmNvbmZpcm0pKX1mdW5jdGlvbiBCKCl7cmV0dXJuIHkoIi4iLmNvbmNhdChXLmFjdGlvbnMsIiAuIikuY29uY2F0KFcuY2FuY2VsKSl9ZnVuY3Rpb24gUygpe3JldHVybiBlKFcuYWN0aW9ucyl9ZnVuY3Rpb24gTygpe3JldHVybiBlKFcuaGVhZGVyKX1mdW5jdGlvbiBUKCl7cmV0dXJuIGUoVy5mb290ZXIpfWZ1bmN0aW9uIEwoKXtyZXR1cm4gZShXWyJ0aW1lci1wcm9ncmVzcy1iYXIiXSl9ZnVuY3Rpb24gaigpe3JldHVybiBlKFcuY2xvc2UpfWZ1bmN0aW9uIHEoKXt2YXIgdD1oKFooKS5xdWVyeVNlbGVjdG9yQWxsKCdbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9Ii0xIl0pOm5vdChbdGFiaW5kZXg9IjAiXSknKSkuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0PXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKCJ0YWJpbmRleCIpKSwoZT1wYXJzZUludChlLmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkpPHQ/MTp0PGU/LTE6MH0pLGU9aChaKCkucXVlcnlTZWxlY3RvckFsbCgnXG4gIGFbaHJlZl0sXG4gIGFyZWFbaHJlZl0sXG4gIGlucHV0Om5vdChbZGlzYWJsZWRdKSxcbiAgc2VsZWN0Om5vdChbZGlzYWJsZWRdKSxcbiAgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLFxuICBidXR0b246bm90KFtkaXNhYmxlZF0pLFxuICBpZnJhbWUsXG4gIG9iamVjdCxcbiAgZW1iZWQsXG4gIFt0YWJpbmRleD0iMCJdLFxuICBbY29udGVudGVkaXRhYmxlXSxcbiAgYXVkaW9bY29udHJvbHNdLFxuICB2aWRlb1tjb250cm9sc10sXG4gIHN1bW1hcnlcbicpKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIi0xIiE9PXQuZ2V0QXR0cmlidXRlKCJ0YWJpbmRleCIpfSk7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspLTE9PT1lLmluZGV4T2YodFtuXSkmJmUucHVzaCh0W25dKTtyZXR1cm4gZX0odC5jb25jYXQoZSkpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gaHQodCl9KX1mdW5jdGlvbiBJKCl7cmV0dXJuIVEoKSYmIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFdbIm5vLWJhY2tkcm9wIl0pfWZ1bmN0aW9uIE0oKXtyZXR1cm4gWigpLmhhc0F0dHJpYnV0ZSgiZGF0YS1sb2FkaW5nIil9ZnVuY3Rpb24gVihlLHQpe3ZhciBuO2UudGV4dENvbnRlbnQ9IiIsdCYmKG49KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyh0LCJ0ZXh0L2h0bWwiKSxoKG4ucXVlcnlTZWxlY3RvcigiaGVhZCIpLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5hcHBlbmRDaGlsZCh0KX0pLGgobi5xdWVyeVNlbGVjdG9yKCJib2R5IikuY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbih0KXtlLmFwcGVuZENoaWxkKHQpfSkpfWZ1bmN0aW9uIFIodCxlKXtpZihlKXtmb3IodmFyIG49ZS5zcGxpdCgvXHMrLyksbz0wO288bi5sZW5ndGg7bysrKWlmKCF0LmNsYXNzTGlzdC5jb250YWlucyhuW29dKSlyZXR1cm47cmV0dXJuIDF9fWZ1bmN0aW9uIEgodCxlLG4pe3ZhciBvLGk7aWYoaT1lLGgoKG89dCkuY2xhc3NMaXN0KS5mb3JFYWNoKGZ1bmN0aW9uKHQpey0xPT09bShXKS5pbmRleE9mKHQpJiYtMT09PW0oSykuaW5kZXhPZih0KSYmLTE9PT1tKGkuc2hvd0NsYXNzKS5pbmRleE9mKHQpJiZvLmNsYXNzTGlzdC5yZW1vdmUodCl9KSxlLmN1c3RvbUNsYXNzJiZlLmN1c3RvbUNsYXNzW25dKXtpZigic3RyaW5nIiE9dHlwZW9mIGUuY3VzdG9tQ2xhc3Nbbl0mJiFlLmN1c3RvbUNsYXNzW25dLmZvckVhY2gpcmV0dXJuIE4oIkludmFsaWQgdHlwZSBvZiBjdXN0b21DbGFzcy4iLmNvbmNhdChuLCchIEV4cGVjdGVkIHN0cmluZyBvciBpdGVyYWJsZSBvYmplY3QsIGdvdCAiJykuY29uY2F0KHIoZS5jdXN0b21DbGFzc1tuXSksJyInKSk7cHQodCxlLmN1c3RvbUNsYXNzW25dKX19dmFyIEQ9IlN3ZWV0QWxlcnQyOiIsTj1mdW5jdGlvbih0KXtjb25zb2xlLndhcm4oIiIuY29uY2F0KEQsIiAiKS5jb25jYXQodCkpfSxVPWZ1bmN0aW9uKHQpe2NvbnNvbGUuZXJyb3IoIiIuY29uY2F0KEQsIiAiKS5jb25jYXQodCkpfSxfPVtdLEY9ZnVuY3Rpb24odCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQ/dCgpOnR9LHo9T2JqZWN0LmZyZWV6ZSh7Y2FuY2VsOiJjYW5jZWwiLGJhY2tkcm9wOiJiYWNrZHJvcCIsY2xvc2U6ImNsb3NlIixlc2M6ImVzYyIsdGltZXI6InRpbWVyIn0pLFc9dChbImNvbnRhaW5lciIsInNob3duIiwiaGVpZ2h0LWF1dG8iLCJpb3NmaXgiLCJwb3B1cCIsIm1vZGFsIiwibm8tYmFja2Ryb3AiLCJuby10cmFuc2l0aW9uIiwidG9hc3QiLCJ0b2FzdC1zaG93biIsInRvYXN0LWNvbHVtbiIsInNob3ciLCJoaWRlIiwiY2xvc2UiLCJ0aXRsZSIsImhlYWRlciIsImNvbnRlbnQiLCJodG1sLWNvbnRhaW5lciIsImFjdGlvbnMiLCJjb25maXJtIiwiY2FuY2VsIiwiZm9vdGVyIiwiaWNvbiIsImljb24tY29udGVudCIsImltYWdlIiwiaW5wdXQiLCJmaWxlIiwicmFuZ2UiLCJzZWxlY3QiLCJyYWRpbyIsImNoZWNrYm94IiwibGFiZWwiLCJ0ZXh0YXJlYSIsImlucHV0ZXJyb3IiLCJ2YWxpZGF0aW9uLW1lc3NhZ2UiLCJwcm9ncmVzcy1zdGVwcyIsImFjdGl2ZS1wcm9ncmVzcy1zdGVwIiwicHJvZ3Jlc3Mtc3RlcCIsInByb2dyZXNzLXN0ZXAtbGluZSIsImxvYWRpbmciLCJzdHlsZWQiLCJ0b3AiLCJ0b3Atc3RhcnQiLCJ0b3AtZW5kIiwidG9wLWxlZnQiLCJ0b3AtcmlnaHQiLCJjZW50ZXIiLCJjZW50ZXItc3RhcnQiLCJjZW50ZXItZW5kIiwiY2VudGVyLWxlZnQiLCJjZW50ZXItcmlnaHQiLCJib3R0b20iLCJib3R0b20tc3RhcnQiLCJib3R0b20tZW5kIiwiYm90dG9tLWxlZnQiLCJib3R0b20tcmlnaHQiLCJncm93LXJvdyIsImdyb3ctY29sdW1uIiwiZ3Jvdy1mdWxsc2NyZWVuIiwicnRsIiwidGltZXItcHJvZ3Jlc3MtYmFyIiwidGltZXItcHJvZ3Jlc3MtYmFyLWNvbnRhaW5lciIsInNjcm9sbGJhci1tZWFzdXJlIiwiaWNvbi1zdWNjZXNzIiwiaWNvbi13YXJuaW5nIiwiaWNvbi1pbmZvIiwiaWNvbi1xdWVzdGlvbiIsImljb24tZXJyb3IiXSksSz10KFsic3VjY2VzcyIsIndhcm5pbmciLCJpbmZvIiwicXVlc3Rpb24iLCJlcnJvciJdKSxZPWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KFcuY29udGFpbmVyKSl9LFo9ZnVuY3Rpb24oKXtyZXR1cm4gZShXLnBvcHVwKX0sUT1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhXWyJ0b2FzdC1zaG93biJdKX0sJD17cHJldmlvdXNCb2R5UGFkZGluZzpudWxsfTtmdW5jdGlvbiBKKHQsZSl7aWYoIWUpcmV0dXJuIG51bGw7c3dpdGNoKGUpe2Nhc2Uic2VsZWN0IjpjYXNlInRleHRhcmVhIjpjYXNlImZpbGUiOnJldHVybiBtdCh0LFdbZV0pO2Nhc2UiY2hlY2tib3giOnJldHVybiB0LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChXLmNoZWNrYm94LCIgaW5wdXQiKSk7Y2FzZSJyYWRpbyI6cmV0dXJuIHQucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KFcucmFkaW8sIiBpbnB1dDpjaGVja2VkIikpfHx0LnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChXLnJhZGlvLCIgaW5wdXQ6Zmlyc3QtY2hpbGQiKSk7Y2FzZSJyYW5nZSI6cmV0dXJuIHQucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KFcucmFuZ2UsIiBpbnB1dCIpKTtkZWZhdWx0OnJldHVybiBtdCh0LFcuaW5wdXQpfX1mdW5jdGlvbiBYKHQpe3ZhciBlO3QuZm9jdXMoKSwiZmlsZSIhPT10LnR5cGUmJihlPXQudmFsdWUsdC52YWx1ZT0iIix0LnZhbHVlPWUpfWZ1bmN0aW9uIEcodCxlLG4pe3QmJmUmJigic3RyaW5nIj09dHlwZW9mIGUmJihlPWUuc3BsaXQoL1xzKy8pLmZpbHRlcihCb29sZWFuKSksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuZm9yRWFjaD90LmZvckVhY2goZnVuY3Rpb24odCl7bj90LmNsYXNzTGlzdC5hZGQoZSk6dC5jbGFzc0xpc3QucmVtb3ZlKGUpfSk6bj90LmNsYXNzTGlzdC5hZGQoZSk6dC5jbGFzc0xpc3QucmVtb3ZlKGUpfSkpfWZ1bmN0aW9uIHR0KHQsZSxuKXtufHwwPT09cGFyc2VJbnQobik/dC5zdHlsZVtlXT0ibnVtYmVyIj09dHlwZW9mIG4/IiIuY29uY2F0KG4sInB4Iik6bjp0LnN0eWxlLnJlbW92ZVByb3BlcnR5KGUpfWZ1bmN0aW9uIGV0KHQsZSl7dmFyIG49MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lP2U6ImZsZXgiO3Quc3R5bGUub3BhY2l0eT0iIix0LnN0eWxlLmRpc3BsYXk9bn1mdW5jdGlvbiBudCh0KXt0LnN0eWxlLm9wYWNpdHk9IiIsdC5zdHlsZS5kaXNwbGF5PSJub25lIn1mdW5jdGlvbiBvdCh0LGUsbil7ZT9ldCh0LG4pOm50KHQpfWZ1bmN0aW9uIGl0KHQpe3JldHVybiEhKHQuc2Nyb2xsSGVpZ2h0PnQuY2xpZW50SGVpZ2h0KX1mdW5jdGlvbiBydCh0KXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KSxuPXBhcnNlRmxvYXQoZS5nZXRQcm9wZXJ0eVZhbHVlKCJhbmltYXRpb24tZHVyYXRpb24iKXx8IjAiKSxvPXBhcnNlRmxvYXQoZS5nZXRQcm9wZXJ0eVZhbHVlKCJ0cmFuc2l0aW9uLWR1cmF0aW9uIil8fCIwIik7cmV0dXJuIDA8bnx8MDxvfWZ1bmN0aW9uIGF0KHQsZSl7dmFyIG49MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1lJiZlLG89TCgpO2h0KG8pJiYobiYmKG8uc3R5bGUudHJhbnNpdGlvbj0ibm9uZSIsby5zdHlsZS53aWR0aD0iMTAwJSIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvLnN0eWxlLnRyYW5zaXRpb249IndpZHRoICIuY29uY2F0KHQvMWUzLCJzIGxpbmVhciIpLG8uc3R5bGUud2lkdGg9IjAlIn0sMTApKX1mdW5jdGlvbiBjdCgpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2Ygd2luZG93fHwidW5kZWZpbmVkIj09dHlwZW9mIGRvY3VtZW50fWZ1bmN0aW9uIHN0KHQpe3JuLmlzVmlzaWJsZSgpJiZkdCE9PXQudGFyZ2V0LnZhbHVlJiZybi5yZXNldFZhbGlkYXRpb25NZXNzYWdlKCksZHQ9dC50YXJnZXQudmFsdWV9ZnVuY3Rpb24gdXQodCxlKXt0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/ZS5hcHBlbmRDaGlsZCh0KToib2JqZWN0Ij09PXIodCk/YnQodCxlKTp0JiZWKGUsdCl9ZnVuY3Rpb24gbHQodCxlKXt2YXIgbj1TKCksbz1FKCksaT1CKCk7ZS5zaG93Q29uZmlybUJ1dHRvbnx8ZS5zaG93Q2FuY2VsQnV0dG9ufHxudChuKSxIKG4sZSwiYWN0aW9ucyIpLEN0KG8sImNvbmZpcm0iLGUpLEN0KGksImNhbmNlbCIsZSksZS5idXR0b25zU3R5bGluZz9mdW5jdGlvbih0LGUsbil7cHQoW3QsZV0sVy5zdHlsZWQpLG4uY29uZmlybUJ1dHRvbkNvbG9yJiYodC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9bi5jb25maXJtQnV0dG9uQ29sb3IpO24uY2FuY2VsQnV0dG9uQ29sb3ImJihlLnN0eWxlLmJhY2tncm91bmRDb2xvcj1uLmNhbmNlbEJ1dHRvbkNvbG9yKTt7dmFyIG87TSgpfHwobz13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5nZXRQcm9wZXJ0eVZhbHVlKCJiYWNrZ3JvdW5kLWNvbG9yIiksdC5zdHlsZS5ib3JkZXJMZWZ0Q29sb3I9byx0LnN0eWxlLmJvcmRlclJpZ2h0Q29sb3I9byl9fShvLGksZSk6KGZ0KFtvLGldLFcuc3R5bGVkKSxvLnN0eWxlLmJhY2tncm91bmRDb2xvcj1vLnN0eWxlLmJvcmRlckxlZnRDb2xvcj1vLnN0eWxlLmJvcmRlclJpZ2h0Q29sb3I9IiIsaS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9aS5zdHlsZS5ib3JkZXJMZWZ0Q29sb3I9aS5zdHlsZS5ib3JkZXJSaWdodENvbG9yPSIiKSxlLnJldmVyc2VCdXR0b25zJiZvLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGksbyl9dmFyIGR0LHB0PWZ1bmN0aW9uKHQsZSl7Ryh0LGUsITApfSxmdD1mdW5jdGlvbih0LGUpe0codCxlLCExKX0sbXQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHQuY2hpbGROb2Rlcy5sZW5ndGg7bisrKWlmKFIodC5jaGlsZE5vZGVzW25dLGUpKXJldHVybiB0LmNoaWxkTm9kZXNbbl19LGh0PWZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fCEodC5vZmZzZXRXaWR0aHx8dC5vZmZzZXRIZWlnaHR8fHQuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpKX0sZ3Q9J1xuIDxkaXYgYXJpYS1sYWJlbGxlZGJ5PSInLmNvbmNhdChXLnRpdGxlLCciIGFyaWEtZGVzY3JpYmVkYnk9IicpLmNvbmNhdChXLmNvbnRlbnQsJyIgY2xhc3M9IicpLmNvbmNhdChXLnBvcHVwLCciIHRhYmluZGV4PSItMSI+XG4gICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoVy5oZWFkZXIsJyI+XG4gICAgIDx1bCBjbGFzcz0iJykuY29uY2F0KFdbInByb2dyZXNzLXN0ZXBzIl0sJyI+PC91bD5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFcuaWNvbiwiICIpLmNvbmNhdChLLmVycm9yLCciPjwvZGl2PlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoVy5pY29uLCIgIikuY29uY2F0KEsucXVlc3Rpb24sJyI+PC9kaXY+XG4gICAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdChXLmljb24sIiAiKS5jb25jYXQoSy53YXJuaW5nLCciPjwvZGl2PlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoVy5pY29uLCIgIikuY29uY2F0KEsuaW5mbywnIj48L2Rpdj5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFcuaWNvbiwiICIpLmNvbmNhdChLLnN1Y2Nlc3MsJyI+PC9kaXY+XG4gICAgIDxpbWcgY2xhc3M9IicpLmNvbmNhdChXLmltYWdlLCciIC8+XG4gICAgIDxoMiBjbGFzcz0iJykuY29uY2F0KFcudGl0bGUsJyIgaWQ9IicpLmNvbmNhdChXLnRpdGxlLCciPjwvaDI+XG4gICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iJykuY29uY2F0KFcuY2xvc2UsJyI+PC9idXR0b24+XG4gICA8L2Rpdj5cbiAgIDxkaXYgY2xhc3M9IicpLmNvbmNhdChXLmNvbnRlbnQsJyI+XG4gICAgIDxkaXYgaWQ9IicpLmNvbmNhdChXLmNvbnRlbnQsJyIgY2xhc3M9IicpLmNvbmNhdChXWyJodG1sLWNvbnRhaW5lciJdLCciPjwvZGl2PlxuICAgICA8aW5wdXQgY2xhc3M9IicpLmNvbmNhdChXLmlucHV0LCciIC8+XG4gICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBjbGFzcz0iJykuY29uY2F0KFcuZmlsZSwnIiAvPlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoVy5yYW5nZSwnIj5cbiAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIC8+XG4gICAgICAgPG91dHB1dD48L291dHB1dD5cbiAgICAgPC9kaXY+XG4gICAgIDxzZWxlY3QgY2xhc3M9IicpLmNvbmNhdChXLnNlbGVjdCwnIj48L3NlbGVjdD5cbiAgICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFcucmFkaW8sJyI+PC9kaXY+XG4gICAgIDxsYWJlbCBmb3I9IicpLmNvbmNhdChXLmNoZWNrYm94LCciIGNsYXNzPSInKS5jb25jYXQoVy5jaGVja2JveCwnIj5cbiAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIC8+XG4gICAgICAgPHNwYW4gY2xhc3M9IicpLmNvbmNhdChXLmxhYmVsLCciPjwvc3Bhbj5cbiAgICAgPC9sYWJlbD5cbiAgICAgPHRleHRhcmVhIGNsYXNzPSInKS5jb25jYXQoVy50ZXh0YXJlYSwnIj48L3RleHRhcmVhPlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoV1sidmFsaWRhdGlvbi1tZXNzYWdlIl0sJyIgaWQ9IicpLmNvbmNhdChXWyJ2YWxpZGF0aW9uLW1lc3NhZ2UiXSwnIj48L2Rpdj5cbiAgIDwvZGl2PlxuICAgPGRpdiBjbGFzcz0iJykuY29uY2F0KFcuYWN0aW9ucywnIj5cbiAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSInKS5jb25jYXQoVy5jb25maXJtLCciPk9LPC9idXR0b24+XG4gICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iJykuY29uY2F0KFcuY2FuY2VsLCciPkNhbmNlbDwvYnV0dG9uPlxuICAgPC9kaXY+XG4gICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoVy5mb290ZXIsJyI+PC9kaXY+XG4gICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoV1sidGltZXItcHJvZ3Jlc3MtYmFyLWNvbnRhaW5lciJdLCciPlxuICAgICA8ZGl2IGNsYXNzPSInKS5jb25jYXQoV1sidGltZXItcHJvZ3Jlc3MtYmFyIl0sJyI+PC9kaXY+XG4gICA8L2Rpdj5cbiA8L2Rpdj5cbicpLnJlcGxhY2UoLyhefFxuKVxzKi9nLCIiKSx2dD1mdW5jdGlvbih0KXt2YXIgZSxuLG8saSxyLGEsYyxzLHUsbCxkLHAsZixtLGgsZz0hIShlPVkoKSkmJihlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSksZnQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkb2N1bWVudC5ib2R5XSxbV1sibm8tYmFja2Ryb3AiXSxXWyJ0b2FzdC1zaG93biJdLFdbImhhcy1jb2x1bW4iXV0pLCEwKTtjdCgpP1UoIlN3ZWV0QWxlcnQyIHJlcXVpcmVzIGRvY3VtZW50IHRvIGluaXRpYWxpemUiKTooKG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmNsYXNzTmFtZT1XLmNvbnRhaW5lcixnJiZwdChuLFdbIm5vLXRyYW5zaXRpb24iXSksVihuLGd0KSwobz0ic3RyaW5nIj09dHlwZW9mKGk9dC50YXJnZXQpP2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaSk6aSkuYXBwZW5kQ2hpbGQobikscj10LChhPVooKSkuc2V0QXR0cmlidXRlKCJyb2xlIixyLnRvYXN0PyJhbGVydCI6ImRpYWxvZyIpLGEuc2V0QXR0cmlidXRlKCJhcmlhLWxpdmUiLHIudG9hc3Q/InBvbGl0ZSI6ImFzc2VydGl2ZSIpLHIudG9hc3R8fGEuc2V0QXR0cmlidXRlKCJhcmlhLW1vZGFsIiwidHJ1ZSIpLGM9bywicnRsIj09PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGMpLmRpcmVjdGlvbiYmcHQoWSgpLFcucnRsKSxzPWsoKSx1PW10KHMsVy5pbnB1dCksbD1tdChzLFcuZmlsZSksZD1zLnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChXLnJhbmdlLCIgaW5wdXQiKSkscD1zLnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChXLnJhbmdlLCIgb3V0cHV0IikpLGY9bXQocyxXLnNlbGVjdCksbT1zLnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChXLmNoZWNrYm94LCIgaW5wdXQiKSksaD1tdChzLFcudGV4dGFyZWEpLHUub25pbnB1dD1zdCxsLm9uY2hhbmdlPXN0LGYub25jaGFuZ2U9c3QsbS5vbmNoYW5nZT1zdCxoLm9uaW5wdXQ9c3QsZC5vbmlucHV0PWZ1bmN0aW9uKHQpe3N0KHQpLHAudmFsdWU9ZC52YWx1ZX0sZC5vbmNoYW5nZT1mdW5jdGlvbih0KXtzdCh0KSxkLm5leHRTaWJsaW5nLnZhbHVlPWQudmFsdWV9KX0sYnQ9ZnVuY3Rpb24odCxlKXt0LmpxdWVyeT95dChlLHQpOlYoZSx0LnRvU3RyaW5nKCkpfSx5dD1mdW5jdGlvbih0LGUpe2lmKHQudGV4dENvbnRlbnQ9IiIsMCBpbiBlKWZvcih2YXIgbj0wO24gaW4gZTtuKyspdC5hcHBlbmRDaGlsZChlW25dLmNsb25lTm9kZSghMCkpO2Vsc2UgdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpfSx3dD1mdW5jdGlvbigpe2lmKGN0KCkpcmV0dXJuITE7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZT17V2Via2l0QW5pbWF0aW9uOiJ3ZWJraXRBbmltYXRpb25FbmQiLE9BbmltYXRpb246Im9BbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCIsYW5pbWF0aW9uOiJhbmltYXRpb25lbmQifTtmb3IodmFyIG4gaW4gZSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSYmdm9pZCAwIT09dC5zdHlsZVtuXSlyZXR1cm4gZVtuXTtyZXR1cm4hMX0oKTtmdW5jdGlvbiBDdCh0LGUsbil7dmFyIG87b3QodCxuWyJzaG93Ii5jb25jYXQoKG89ZSkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrby5zbGljZSgxKSwiQnV0dG9uIildLCJpbmxpbmUtYmxvY2siKSxWKHQsblsiIi5jb25jYXQoZSwiQnV0dG9uVGV4dCIpXSksdC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLG5bIiIuY29uY2F0KGUsIkJ1dHRvbkFyaWFMYWJlbCIpXSksdC5jbGFzc05hbWU9V1tlXSxIKHQsbiwiIi5jb25jYXQoZSwiQnV0dG9uIikpLHB0KHQsblsiIi5jb25jYXQoZSwiQnV0dG9uQ2xhc3MiKV0pfWZ1bmN0aW9uIGt0KHQsZSl7dmFyIG4sbyxpLHIsYSxjLHMsdSxsPVkoKTtsJiYobj1sLCJzdHJpbmciPT10eXBlb2Yobz1lLmJhY2tkcm9wKT9uLnN0eWxlLmJhY2tncm91bmQ9bzpvfHxwdChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGRvY3VtZW50LmJvZHldLFdbIm5vLWJhY2tkcm9wIl0pLCFlLmJhY2tkcm9wJiZlLmFsbG93T3V0c2lkZUNsaWNrJiZOKCciYWxsb3dPdXRzaWRlQ2xpY2siIHBhcmFtZXRlciByZXF1aXJlcyBgYmFja2Ryb3BgIHBhcmFtZXRlciB0byBiZSBzZXQgdG8gYHRydWVgJyksaT1sLChyPWUucG9zaXRpb24paW4gVz9wdChpLFdbcl0pOihOKCdUaGUgInBvc2l0aW9uIiBwYXJhbWV0ZXIgaXMgbm90IHZhbGlkLCBkZWZhdWx0aW5nIHRvICJjZW50ZXIiJykscHQoaSxXLmNlbnRlcikpLGE9bCwhKGM9ZS5ncm93KXx8InN0cmluZyIhPXR5cGVvZiBjfHwocz0iZ3Jvdy0iLmNvbmNhdChjKSlpbiBXJiZwdChhLFdbc10pLEgobCxlLCJjb250YWluZXIiKSwodT1kb2N1bWVudC5ib2R5LmdldEF0dHJpYnV0ZSgiZGF0YS1zd2FsMi1xdWV1ZS1zdGVwIikpJiYobC5zZXRBdHRyaWJ1dGUoImRhdGEtcXVldWUtc3RlcCIsdSksZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtc3dhbDItcXVldWUtc3RlcCIpKSl9ZnVuY3Rpb24geHQodCxlKXt0LnBsYWNlaG9sZGVyJiYhZS5pbnB1dFBsYWNlaG9sZGVyfHwodC5wbGFjZWhvbGRlcj1lLmlucHV0UGxhY2Vob2xkZXIpfXZhciBQdD17cHJvbWlzZTpuZXcgV2Vha01hcCxpbm5lclBhcmFtczpuZXcgV2Vha01hcCxkb21DYWNoZTpuZXcgV2Vha01hcH0sQXQ9WyJpbnB1dCIsImZpbGUiLCJyYW5nZSIsInNlbGVjdCIsInJhZGlvIiwiY2hlY2tib3giLCJ0ZXh0YXJlYSJdLEV0PWZ1bmN0aW9uKHQpe2lmKCFUdFt0LmlucHV0XSlyZXR1cm4gVSgnVW5leHBlY3RlZCB0eXBlIG9mIGlucHV0ISBFeHBlY3RlZCAidGV4dCIsICJlbWFpbCIsICJwYXNzd29yZCIsICJudW1iZXIiLCAidGVsIiwgInNlbGVjdCIsICJyYWRpbyIsICJjaGVja2JveCIsICJ0ZXh0YXJlYSIsICJmaWxlIiBvciAidXJsIiwgZ290ICInLmNvbmNhdCh0LmlucHV0LCciJykpO3ZhciBlPU90KHQuaW5wdXQpLG49VHRbdC5pbnB1dF0oZSx0KTtldChuKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7WChuKX0pfSxCdD1mdW5jdGlvbih0LGUpe3ZhciBuPUooaygpLHQpO2lmKG4pZm9yKHZhciBvIGluIWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5hdHRyaWJ1dGVzLmxlbmd0aDtlKyspe3ZhciBuPXQuYXR0cmlidXRlc1tlXS5uYW1lOy0xPT09WyJ0eXBlIiwidmFsdWUiLCJzdHlsZSJdLmluZGV4T2YobikmJnQucmVtb3ZlQXR0cmlidXRlKG4pfX0obiksZSkicmFuZ2UiPT09dCYmInBsYWNlaG9sZGVyIj09PW98fG4uc2V0QXR0cmlidXRlKG8sZVtvXSl9LFN0PWZ1bmN0aW9uKHQpe3ZhciBlPU90KHQuaW5wdXQpO3QuY3VzdG9tQ2xhc3MmJnB0KGUsdC5jdXN0b21DbGFzcy5pbnB1dCl9LE90PWZ1bmN0aW9uKHQpe3ZhciBlPVdbdF0/V1t0XTpXLmlucHV0O3JldHVybiBtdChrKCksZSl9LFR0PXt9O1R0LnRleHQ9VHQuZW1haWw9VHQucGFzc3dvcmQ9VHQubnVtYmVyPVR0LnRlbD1UdC51cmw9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGUuaW5wdXRWYWx1ZXx8Im51bWJlciI9PXR5cGVvZiBlLmlucHV0VmFsdWU/dC52YWx1ZT1lLmlucHV0VmFsdWU6dihlLmlucHV0VmFsdWUpfHxOKCdVbmV4cGVjdGVkIHR5cGUgb2YgaW5wdXRWYWx1ZSEgRXhwZWN0ZWQgInN0cmluZyIsICJudW1iZXIiIG9yICJQcm9taXNlIiwgZ290ICInLmNvbmNhdChyKGUuaW5wdXRWYWx1ZSksJyInKSkseHQodCxlKSx0LnR5cGU9ZS5pbnB1dCx0fSxUdC5maWxlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHh0KHQsZSksdH0sVHQucmFuZ2U9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnF1ZXJ5U2VsZWN0b3IoImlucHV0Iiksbz10LnF1ZXJ5U2VsZWN0b3IoIm91dHB1dCIpO3JldHVybiBuLnZhbHVlPWUuaW5wdXRWYWx1ZSxuLnR5cGU9ZS5pbnB1dCxvLnZhbHVlPWUuaW5wdXRWYWx1ZSx0fSxUdC5zZWxlY3Q9ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gdC50ZXh0Q29udGVudD0iIixlLmlucHV0UGxhY2Vob2xkZXImJihuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpLFYobixlLmlucHV0UGxhY2Vob2xkZXIpLG4udmFsdWU9IiIsbi5kaXNhYmxlZD0hMCxuLnNlbGVjdGVkPSEwLHQuYXBwZW5kQ2hpbGQobikpLHR9LFR0LnJhZGlvPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHRDb250ZW50PSIiLHR9LFR0LmNoZWNrYm94PWZ1bmN0aW9uKHQsZSl7dmFyIG49SihrKCksImNoZWNrYm94Iik7bi52YWx1ZT0xLG4uaWQ9Vy5jaGVja2JveCxuLmNoZWNrZWQ9Qm9vbGVhbihlLmlucHV0VmFsdWUpO3ZhciBvPXQucXVlcnlTZWxlY3Rvcigic3BhbiIpO3JldHVybiBWKG8sZS5pbnB1dFBsYWNlaG9sZGVyKSx0fSxUdC50ZXh0YXJlYT1mdW5jdGlvbihlLHQpe3ZhciBuLG87cmV0dXJuIGUudmFsdWU9dC5pbnB1dFZhbHVlLHh0KGUsdCksIk11dGF0aW9uT2JzZXJ2ZXIiaW4gd2luZG93JiYobj1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShaKCkpLndpZHRoKSxvPXBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKFooKSkucGFkZGluZ0xlZnQpK3BhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKFooKSkucGFkZGluZ1JpZ2h0KSxuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpe3ZhciB0PWUub2Zmc2V0V2lkdGgrbztaKCkuc3R5bGUud2lkdGg9bjx0PyIiLmNvbmNhdCh0LCJweCIpOm51bGx9KS5vYnNlcnZlKGUse2F0dHJpYnV0ZXM6ITAsYXR0cmlidXRlRmlsdGVyOlsic3R5bGUiXX0pKSxlfTtmdW5jdGlvbiBMdCh0LGUpe3ZhciBuLG8saSxyLGEsYz1rKCkucXVlcnlTZWxlY3RvcigiIyIuY29uY2F0KFcuY29udGVudCkpO2UuaHRtbD8odXQoZS5odG1sLGMpLGV0KGMsImJsb2NrIikpOmUudGV4dD8oYy50ZXh0Q29udGVudD1lLnRleHQsZXQoYywiYmxvY2siKSk6bnQoYyksbj10LG89ZSxpPWsoKSxyPVB0LmlubmVyUGFyYW1zLmdldChuKSxhPSFyfHxvLmlucHV0IT09ci5pbnB1dCxBdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPVdbdF0sbj1tdChpLGUpO0J0KHQsby5pbnB1dEF0dHJpYnV0ZXMpLG4uY2xhc3NOYW1lPWUsYSYmbnQobil9KSxvLmlucHV0JiYoYSYmRXQobyksU3QobykpLEgoaygpLGUsImNvbnRlbnQiKX1mdW5jdGlvbiBqdCgpe3JldHVybiBZKCkmJlkoKS5nZXRBdHRyaWJ1dGUoImRhdGEtcXVldWUtc3RlcCIpfWZ1bmN0aW9uIHF0KHQscyl7dmFyIHU9UCgpO2lmKCFzLnByb2dyZXNzU3RlcHN8fDA9PT1zLnByb2dyZXNzU3RlcHMubGVuZ3RoKXJldHVybiBudCh1KSwwO2V0KHUpLHUudGV4dENvbnRlbnQ9IiI7dmFyIGw9cGFyc2VJbnQodm9pZCAwPT09cy5jdXJyZW50UHJvZ3Jlc3NTdGVwP2p0KCk6cy5jdXJyZW50UHJvZ3Jlc3NTdGVwKTtsPj1zLnByb2dyZXNzU3RlcHMubGVuZ3RoJiZOKCJJbnZhbGlkIGN1cnJlbnRQcm9ncmVzc1N0ZXAgcGFyYW1ldGVyLCBpdCBzaG91bGQgYmUgbGVzcyB0aGFuIHByb2dyZXNzU3RlcHMubGVuZ3RoIChjdXJyZW50UHJvZ3Jlc3NTdGVwIGxpa2UgSlMgYXJyYXlzIHN0YXJ0cyBmcm9tIDApIikscy5wcm9ncmVzc1N0ZXBzLmZvckVhY2goZnVuY3Rpb24odCxlKXt2YXIgbixvLGkscixhLGM9KG49dCxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIikscHQobyxXWyJwcm9ncmVzcy1zdGVwIl0pLFYobyxuKSxvKTt1LmFwcGVuZENoaWxkKGMpLGU9PT1sJiZwdChjLFdbImFjdGl2ZS1wcm9ncmVzcy1zdGVwIl0pLGUhPT1zLnByb2dyZXNzU3RlcHMubGVuZ3RoLTEmJihyPXQsYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpLHB0KGEsV1sicHJvZ3Jlc3Mtc3RlcC1saW5lIl0pLHIucHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlJiYoYS5zdHlsZS53aWR0aD1yLnByb2dyZXNzU3RlcHNEaXN0YW5jZSksaT1hLHUuYXBwZW5kQ2hpbGQoaSkpfSl9ZnVuY3Rpb24gSXQodCxlKXt2YXIgbixvLGkscixhLGMscyx1LGw9TygpO0gobCxlLCJoZWFkZXIiKSxxdCgwLGUpLG49dCxvPWUsKHI9UHQuaW5uZXJQYXJhbXMuZ2V0KG4pKSYmby5pY29uPT09ci5pY29uJiZ3KCk/SCh3KCksbywiaWNvbiIpOihSdCgpLG8uaWNvbiYmKC0xIT09T2JqZWN0LmtleXMoSykuaW5kZXhPZihvLmljb24pPyhpPXkoIi4iLmNvbmNhdChXLmljb24sIi4iKS5jb25jYXQoS1tvLmljb25dKSksZXQoaSksRHQoaSxvKSxIdCgpLEgoaSxvLCJpY29uIikscHQoaSxvLnNob3dDbGFzcy5pY29uKSk6VSgnVW5rbm93biBpY29uISBFeHBlY3RlZCAic3VjY2VzcyIsICJlcnJvciIsICJ3YXJuaW5nIiwgImluZm8iIG9yICJxdWVzdGlvbiIsIGdvdCAiJy5jb25jYXQoby5pY29uLCciJykpKSksZnVuY3Rpb24odCl7dmFyIGU9eCgpO2lmKCF0LmltYWdlVXJsKXJldHVybiBudChlKTtldChlLCIiKSxlLnNldEF0dHJpYnV0ZSgic3JjIix0LmltYWdlVXJsKSxlLnNldEF0dHJpYnV0ZSgiYWx0Iix0LmltYWdlQWx0KSx0dChlLCJ3aWR0aCIsdC5pbWFnZVdpZHRoKSx0dChlLCJoZWlnaHQiLHQuaW1hZ2VIZWlnaHQpLGUuY2xhc3NOYW1lPVcuaW1hZ2UsSChlLHQsImltYWdlIil9KGUpLGE9ZSxjPUMoKSxvdChjLGEudGl0bGV8fGEudGl0bGVUZXh0KSxhLnRpdGxlJiZ1dChhLnRpdGxlLGMpLGEudGl0bGVUZXh0JiYoYy5pbm5lclRleHQ9YS50aXRsZVRleHQpLEgoYyxhLCJ0aXRsZSIpLHM9ZSx1PWooKSxWKHUscy5jbG9zZUJ1dHRvbkh0bWwpLEgodSxzLCJjbG9zZUJ1dHRvbiIpLG90KHUscy5zaG93Q2xvc2VCdXR0b24pLHUuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixzLmNsb3NlQnV0dG9uQXJpYUxhYmVsKX1mdW5jdGlvbiBNdCh0LGUpe3ZhciBuLG8saSxyO249ZSxvPVooKSx0dChvLCJ3aWR0aCIsbi53aWR0aCksdHQobywicGFkZGluZyIsbi5wYWRkaW5nKSxuLmJhY2tncm91bmQmJihvLnN0eWxlLmJhY2tncm91bmQ9bi5iYWNrZ3JvdW5kKSxfdChvLG4pLGt0KDAsZSksSXQodCxlKSxMdCh0LGUpLGx0KDAsZSksaT1lLHI9VCgpLG90KHIsaS5mb290ZXIpLGkuZm9vdGVyJiZ1dChpLmZvb3RlcixyKSxIKHIsaSwiZm9vdGVyIiksImZ1bmN0aW9uIj09dHlwZW9mIGUub25SZW5kZXImJmUub25SZW5kZXIoWigpKX1mdW5jdGlvbiBWdCgpe3JldHVybiBFKCkmJkUoKS5jbGljaygpfXZhciBSdD1mdW5jdGlvbigpe2Zvcih2YXIgdD1uKCksZT0wO2U8dC5sZW5ndGg7ZSsrKW50KHRbZV0pfSxIdD1mdW5jdGlvbigpe2Zvcih2YXIgdD1aKCksZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5nZXRQcm9wZXJ0eVZhbHVlKCJiYWNrZ3JvdW5kLWNvbG9yIiksbj10LnF1ZXJ5U2VsZWN0b3JBbGwoIltjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXSwgLnN3YWwyLXN1Y2Nlc3MtZml4Iiksbz0wO288bi5sZW5ndGg7bysrKW5bb10uc3R5bGUuYmFja2dyb3VuZENvbG9yPWV9LER0PWZ1bmN0aW9uKHQsZSl7dC50ZXh0Q29udGVudD0iIixlLmljb25IdG1sP1YodCxOdChlLmljb25IdG1sKSk6InN1Y2Nlc3MiPT09ZS5pY29uP1YodCwnXG4gICAgICA8ZGl2IGNsYXNzPSJzd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmUtbGVmdCI+PC9kaXY+XG4gICAgICA8c3BhbiBjbGFzcz0ic3dhbDItc3VjY2Vzcy1saW5lLXRpcCI+PC9zcGFuPiA8c3BhbiBjbGFzcz0ic3dhbDItc3VjY2Vzcy1saW5lLWxvbmciPjwvc3Bhbj5cbiAgICAgIDxkaXYgY2xhc3M9InN3YWwyLXN1Y2Nlc3MtcmluZyI+PC9kaXY+IDxkaXYgY2xhc3M9InN3YWwyLXN1Y2Nlc3MtZml4Ij48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9InN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZS1yaWdodCI+PC9kaXY+XG4gICAgJyk6ImVycm9yIj09PWUuaWNvbj9WKHQsJ1xuICAgICAgPHNwYW4gY2xhc3M9InN3YWwyLXgtbWFyayI+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJzd2FsMi14LW1hcmstbGluZS1sZWZ0Ij48L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPSJzd2FsMi14LW1hcmstbGluZS1yaWdodCI+PC9zcGFuPlxuICAgICAgPC9zcGFuPlxuICAgICcpOlYodCxOdCh7cXVlc3Rpb246Ij8iLHdhcm5pbmc6IiEiLGluZm86ImkifVtlLmljb25dKSl9LE50PWZ1bmN0aW9uKHQpe3JldHVybic8ZGl2IGNsYXNzPSInLmNvbmNhdChXWyJpY29uLWNvbnRlbnQiXSwnIj4nKS5jb25jYXQodCwiPC9kaXY+Iil9LFV0PVtdLF90PWZ1bmN0aW9uKHQsZSl7dC5jbGFzc05hbWU9IiIuY29uY2F0KFcucG9wdXAsIiAiKS5jb25jYXQoaHQodCk/ZS5zaG93Q2xhc3MucG9wdXA6IiIpLGUudG9hc3Q/KHB0KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZG9jdW1lbnQuYm9keV0sV1sidG9hc3Qtc2hvd24iXSkscHQodCxXLnRvYXN0KSk6cHQodCxXLm1vZGFsKSxIKHQsZSwicG9wdXAiKSwic3RyaW5nIj09dHlwZW9mIGUuY3VzdG9tQ2xhc3MmJnB0KHQsZS5jdXN0b21DbGFzcyksZS5pY29uJiZwdCh0LFdbImljb24tIi5jb25jYXQoZS5pY29uKV0pfTtmdW5jdGlvbiBGdCgpe3ZhciB0PVooKTt0fHxybi5maXJlKCksdD1aKCk7dmFyIGU9UygpLG49RSgpO2V0KGUpLGV0KG4sImlubGluZS1ibG9jayIpLHB0KFt0LGVdLFcubG9hZGluZyksbi5kaXNhYmxlZD0hMCx0LnNldEF0dHJpYnV0ZSgiZGF0YS1sb2FkaW5nIiwhMCksdC5zZXRBdHRyaWJ1dGUoImFyaWEtYnVzeSIsITApLHQuZm9jdXMoKX1mdW5jdGlvbiB6dCgpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXt2YXIgZT13aW5kb3cuc2Nyb2xsWCxuPXdpbmRvdy5zY3JvbGxZOyR0LnJlc3RvcmVGb2N1c1RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpeyR0LnByZXZpb3VzQWN0aXZlRWxlbWVudCYmJHQucHJldmlvdXNBY3RpdmVFbGVtZW50LmZvY3VzPygkdC5wcmV2aW91c0FjdGl2ZUVsZW1lbnQuZm9jdXMoKSwkdC5wcmV2aW91c0FjdGl2ZUVsZW1lbnQ9bnVsbCk6ZG9jdW1lbnQuYm9keSYmZG9jdW1lbnQuYm9keS5mb2N1cygpLHQoKX0sMTAwKSx2b2lkIDAhPT1lJiZ2b2lkIDAhPT1uJiZ3aW5kb3cuc2Nyb2xsVG8oZSxuKX0pfWZ1bmN0aW9uIFd0KCl7aWYoJHQudGltZW91dClyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD1MKCksZT1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS53aWR0aCk7dC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgidHJhbnNpdGlvbiIpLHQuc3R5bGUud2lkdGg9IjEwMCUiO3ZhciBuPXBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLndpZHRoKSxvPXBhcnNlSW50KGUvbioxMDApO3Quc3R5bGUucmVtb3ZlUHJvcGVydHkoInRyYW5zaXRpb24iKSx0LnN0eWxlLndpZHRoPSIiLmNvbmNhdChvLCIlIil9KCksJHQudGltZW91dC5zdG9wKCl9ZnVuY3Rpb24gS3QoKXtpZigkdC50aW1lb3V0KXt2YXIgdD0kdC50aW1lb3V0LnN0YXJ0KCk7cmV0dXJuIGF0KHQpLHR9fWZ1bmN0aW9uIFl0KHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoSnQsdCl9ZnVuY3Rpb24gWnQodCl7cmV0dXJuIEd0W3RdfWZ1bmN0aW9uIFF0KHQpe2Zvcih2YXIgZSBpbiB0KVl0KGk9ZSl8fE4oJ1Vua25vd24gcGFyYW1ldGVyICInLmNvbmNhdChpLCciJykpLHQudG9hc3QmJihvPWUsLTEhPT10ZS5pbmRleE9mKG8pJiZOKCdUaGUgcGFyYW1ldGVyICInLmNvbmNhdChvLCciIGlzIGluY29tcGF0aWJsZSB3aXRoIHRvYXN0cycpKSksWnQobj1lKSYmZyhuLFp0KG4pKTt2YXIgbixvLGl9dmFyICR0PXt9LEp0PXt0aXRsZToiIix0aXRsZVRleHQ6IiIsdGV4dDoiIixodG1sOiIiLGZvb3RlcjoiIixpY29uOnZvaWQgMCxpY29uSHRtbDp2b2lkIDAsdG9hc3Q6ITEsYW5pbWF0aW9uOiEwLHNob3dDbGFzczp7cG9wdXA6InN3YWwyLXNob3ciLGJhY2tkcm9wOiJzd2FsMi1iYWNrZHJvcC1zaG93IixpY29uOiJzd2FsMi1pY29uLXNob3cifSxoaWRlQ2xhc3M6e3BvcHVwOiJzd2FsMi1oaWRlIixiYWNrZHJvcDoic3dhbDItYmFja2Ryb3AtaGlkZSIsaWNvbjoic3dhbDItaWNvbi1oaWRlIn0sY3VzdG9tQ2xhc3M6dm9pZCAwLHRhcmdldDoiYm9keSIsYmFja2Ryb3A6ITAsaGVpZ2h0QXV0bzohMCxhbGxvd091dHNpZGVDbGljazohMCxhbGxvd0VzY2FwZUtleTohMCxhbGxvd0VudGVyS2V5OiEwLHN0b3BLZXlkb3duUHJvcGFnYXRpb246ITAsa2V5ZG93bkxpc3RlbmVyQ2FwdHVyZTohMSxzaG93Q29uZmlybUJ1dHRvbjohMCxzaG93Q2FuY2VsQnV0dG9uOiExLHByZUNvbmZpcm06dm9pZCAwLGNvbmZpcm1CdXR0b25UZXh0OiJPSyIsY29uZmlybUJ1dHRvbkFyaWFMYWJlbDoiIixjb25maXJtQnV0dG9uQ29sb3I6dm9pZCAwLGNhbmNlbEJ1dHRvblRleHQ6IkNhbmNlbCIsY2FuY2VsQnV0dG9uQXJpYUxhYmVsOiIiLGNhbmNlbEJ1dHRvbkNvbG9yOnZvaWQgMCxidXR0b25zU3R5bGluZzohMCxyZXZlcnNlQnV0dG9uczohMSxmb2N1c0NvbmZpcm06ITAsZm9jdXNDYW5jZWw6ITEsc2hvd0Nsb3NlQnV0dG9uOiExLGNsb3NlQnV0dG9uSHRtbDoiJnRpbWVzOyIsY2xvc2VCdXR0b25BcmlhTGFiZWw6IkNsb3NlIHRoaXMgZGlhbG9nIixzaG93TG9hZGVyT25Db25maXJtOiExLGltYWdlVXJsOnZvaWQgMCxpbWFnZVdpZHRoOnZvaWQgMCxpbWFnZUhlaWdodDp2b2lkIDAsaW1hZ2VBbHQ6IiIsdGltZXI6dm9pZCAwLHRpbWVyUHJvZ3Jlc3NCYXI6ITEsd2lkdGg6dm9pZCAwLHBhZGRpbmc6dm9pZCAwLGJhY2tncm91bmQ6dm9pZCAwLGlucHV0OnZvaWQgMCxpbnB1dFBsYWNlaG9sZGVyOiIiLGlucHV0VmFsdWU6IiIsaW5wdXRPcHRpb25zOnt9LGlucHV0QXV0b1RyaW06ITAsaW5wdXRBdHRyaWJ1dGVzOnt9LGlucHV0VmFsaWRhdG9yOnZvaWQgMCx2YWxpZGF0aW9uTWVzc2FnZTp2b2lkIDAsZ3JvdzohMSxwb3NpdGlvbjoiY2VudGVyIixwcm9ncmVzc1N0ZXBzOltdLGN1cnJlbnRQcm9ncmVzc1N0ZXA6dm9pZCAwLHByb2dyZXNzU3RlcHNEaXN0YW5jZTp2b2lkIDAsb25CZWZvcmVPcGVuOnZvaWQgMCxvbk9wZW46dm9pZCAwLG9uUmVuZGVyOnZvaWQgMCxvbkNsb3NlOnZvaWQgMCxvbkFmdGVyQ2xvc2U6dm9pZCAwLG9uRGVzdHJveTp2b2lkIDAsc2Nyb2xsYmFyUGFkZGluZzohMH0sWHQ9WyJ0aXRsZSIsInRpdGxlVGV4dCIsInRleHQiLCJodG1sIiwiZm9vdGVyIiwiaWNvbiIsImhpZGVDbGFzcyIsImN1c3RvbUNsYXNzIiwiYWxsb3dPdXRzaWRlQ2xpY2siLCJhbGxvd0VzY2FwZUtleSIsInNob3dDb25maXJtQnV0dG9uIiwic2hvd0NhbmNlbEJ1dHRvbiIsImNvbmZpcm1CdXR0b25UZXh0IiwiY29uZmlybUJ1dHRvbkFyaWFMYWJlbCIsImNvbmZpcm1CdXR0b25Db2xvciIsImNhbmNlbEJ1dHRvblRleHQiLCJjYW5jZWxCdXR0b25BcmlhTGFiZWwiLCJjYW5jZWxCdXR0b25Db2xvciIsImJ1dHRvbnNTdHlsaW5nIiwicmV2ZXJzZUJ1dHRvbnMiLCJpbWFnZVVybCIsImltYWdlV2lkdGgiLCJpbWFnZUhlaWdodCIsImltYWdlQWx0IiwicHJvZ3Jlc3NTdGVwcyIsImN1cnJlbnRQcm9ncmVzc1N0ZXAiLCJvbkNsb3NlIiwib25BZnRlckNsb3NlIiwib25EZXN0cm95Il0sR3Q9e2FuaW1hdGlvbjonc2hvd0NsYXNzIiBhbmQgImhpZGVDbGFzcyd9LHRlPVsiYWxsb3dPdXRzaWRlQ2xpY2siLCJhbGxvd0VudGVyS2V5IiwiYmFja2Ryb3AiLCJmb2N1c0NvbmZpcm0iLCJmb2N1c0NhbmNlbCIsImhlaWdodEF1dG8iLCJrZXlkb3duTGlzdGVuZXJDYXB0dXJlIl0sZWU9T2JqZWN0LmZyZWV6ZSh7aXNWYWxpZFBhcmFtZXRlcjpZdCxpc1VwZGF0YWJsZVBhcmFtZXRlcjpmdW5jdGlvbih0KXtyZXR1cm4tMSE9PVh0LmluZGV4T2YodCl9LGlzRGVwcmVjYXRlZFBhcmFtZXRlcjpadCxhcmdzVG9QYXJhbXM6ZnVuY3Rpb24obyl7dmFyIGk9e307cmV0dXJuIm9iamVjdCIhPT1yKG9bMF0pfHxiKG9bMF0pP1sidGl0bGUiLCJodG1sIiwiaWNvbiJdLmZvckVhY2goZnVuY3Rpb24odCxlKXt2YXIgbj1vW2VdOyJzdHJpbmciPT10eXBlb2Ygbnx8YihuKT9pW3RdPW46dm9pZCAwIT09biYmVSgiVW5leHBlY3RlZCB0eXBlIG9mICIuY29uY2F0KHQsJyEgRXhwZWN0ZWQgInN0cmluZyIgb3IgIkVsZW1lbnQiLCBnb3QgJykuY29uY2F0KHIobikpKX0pOnMoaSxvWzBdKSxpfSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gaHQoWigpKX0sY2xpY2tDb25maXJtOlZ0LGNsaWNrQ2FuY2VsOmZ1bmN0aW9uKCl7cmV0dXJuIEIoKSYmQigpLmNsaWNrKCl9LGdldENvbnRhaW5lcjpZLGdldFBvcHVwOlosZ2V0VGl0bGU6QyxnZXRDb250ZW50OmssZ2V0SHRtbENvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiBlKFdbImh0bWwtY29udGFpbmVyIl0pfSxnZXRJbWFnZTp4LGdldEljb246dyxnZXRJY29uczpuLGdldENsb3NlQnV0dG9uOmosZ2V0QWN0aW9uczpTLGdldENvbmZpcm1CdXR0b246RSxnZXRDYW5jZWxCdXR0b246QixnZXRIZWFkZXI6TyxnZXRGb290ZXI6VCxnZXRUaW1lclByb2dyZXNzQmFyOkwsZ2V0Rm9jdXNhYmxlRWxlbWVudHM6cSxnZXRWYWxpZGF0aW9uTWVzc2FnZTpBLGlzTG9hZGluZzpNLGZpcmU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPW5ldyBBcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gaSh0aGlzLGUpfSxtaXhpbjpmdW5jdGlvbihyKXtyZXR1cm4gZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQsZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJmwodCxlKX0oaSx0KTt2YXIgbixvLGU9KG49aSxvPWQoKSxmdW5jdGlvbigpe3ZhciB0LGU9dShuKTtyZXR1cm4gcCh0aGlzLG8/KHQ9dSh0aGlzKS5jb25zdHJ1Y3RvcixSZWZsZWN0LmNvbnN0cnVjdChlLGFyZ3VtZW50cyx0KSk6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSk7ZnVuY3Rpb24gaSgpe3JldHVybiBhKHRoaXMsaSksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGMoaSxbe2tleToiX21haW4iLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBmKHUoaS5wcm90b3R5cGUpLCJfbWFpbiIsdGhpcykuY2FsbCh0aGlzLHMoe30scix0KSl9fV0pLGl9KHRoaXMpfSxxdWV1ZTpmdW5jdGlvbih0KXt2YXIgcj10aGlzO1V0PXQ7ZnVuY3Rpb24gYSh0LGUpe1V0PVtdLHQoZSl9dmFyIGM9W107cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGkpeyFmdW5jdGlvbiBlKG4sbyl7bjxVdC5sZW5ndGg/KGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCJkYXRhLXN3YWwyLXF1ZXVlLXN0ZXAiLG4pLHIuZmlyZShVdFtuXSkudGhlbihmdW5jdGlvbih0KXt2b2lkIDAhPT10LnZhbHVlPyhjLnB1c2godC52YWx1ZSksZShuKzEsbykpOmEoaSx7ZGlzbWlzczp0LmRpc21pc3N9KX0pKTphKGkse3ZhbHVlOmN9KX0oMCl9KX0sZ2V0UXVldWVTdGVwOmp0LGluc2VydFF1ZXVlU3RlcDpmdW5jdGlvbih0LGUpe3JldHVybiBlJiZlPFV0Lmxlbmd0aD9VdC5zcGxpY2UoZSwwLHQpOlV0LnB1c2godCl9LGRlbGV0ZVF1ZXVlU3RlcDpmdW5jdGlvbih0KXt2b2lkIDAhPT1VdFt0XSYmVXQuc3BsaWNlKHQsMSl9LHNob3dMb2FkaW5nOkZ0LGVuYWJsZUxvYWRpbmc6RnQsZ2V0VGltZXJMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuICR0LnRpbWVvdXQmJiR0LnRpbWVvdXQuZ2V0VGltZXJMZWZ0KCl9LHN0b3BUaW1lcjpXdCxyZXN1bWVUaW1lcjpLdCx0b2dnbGVUaW1lcjpmdW5jdGlvbigpe3ZhciB0PSR0LnRpbWVvdXQ7cmV0dXJuIHQmJih0LnJ1bm5pbmc/V3Q6S3QpKCl9LGluY3JlYXNlVGltZXI6ZnVuY3Rpb24odCl7aWYoJHQudGltZW91dCl7dmFyIGU9JHQudGltZW91dC5pbmNyZWFzZSh0KTtyZXR1cm4gYXQoZSwhMCksZX19LGlzVGltZXJSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuICR0LnRpbWVvdXQmJiR0LnRpbWVvdXQuaXNSdW5uaW5nKCl9fSk7ZnVuY3Rpb24gbmUoKXt2YXIgdCxlPVB0LmlubmVyUGFyYW1zLmdldCh0aGlzKTtlJiYodD1QdC5kb21DYWNoZS5nZXQodGhpcyksZS5zaG93Q29uZmlybUJ1dHRvbnx8KG50KHQuY29uZmlybUJ1dHRvbiksZS5zaG93Q2FuY2VsQnV0dG9ufHxudCh0LmFjdGlvbnMpKSxmdChbdC5wb3B1cCx0LmFjdGlvbnNdLFcubG9hZGluZyksdC5wb3B1cC5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtYnVzeSIpLHQucG9wdXAucmVtb3ZlQXR0cmlidXRlKCJkYXRhLWxvYWRpbmciKSx0LmNvbmZpcm1CdXR0b24uZGlzYWJsZWQ9ITEsdC5jYW5jZWxCdXR0b24uZGlzYWJsZWQ9ITEpfWZ1bmN0aW9uIG9lKCl7bnVsbD09PSQucHJldmlvdXNCb2R5UGFkZGluZyYmZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ+d2luZG93LmlubmVySGVpZ2h0JiYoJC5wcmV2aW91c0JvZHlQYWRkaW5nPXBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctcmlnaHQiKSksZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQ9IiIuY29uY2F0KCQucHJldmlvdXNCb2R5UGFkZGluZytmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3QuY2xhc3NOYW1lPVdbInNjcm9sbGJhci1tZWFzdXJlIl0sZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0KTt2YXIgZT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLXQuY2xpZW50V2lkdGg7cmV0dXJuIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodCksZX0oKSwicHgiKSl9ZnVuY3Rpb24gaWUoKXtyZXR1cm4hIXdpbmRvdy5NU0lucHV0TWV0aG9kQ29udGV4dCYmISFkb2N1bWVudC5kb2N1bWVudE1vZGV9ZnVuY3Rpb24gcmUoKXt2YXIgdD1ZKCksZT1aKCk7dC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiYWxpZ24taXRlbXMiKSxlLm9mZnNldFRvcDwwJiYodC5zdHlsZS5hbGlnbkl0ZW1zPSJmbGV4LXN0YXJ0Iil9dmFyIGFlPWZ1bmN0aW9uKCl7dmFyIGUsdD1ZKCk7dC5vbnRvdWNoc3RhcnQ9ZnVuY3Rpb24odCl7ZT1jZSh0LnRhcmdldCl9LHQub250b3VjaG1vdmU9ZnVuY3Rpb24odCl7ZSYmKHQucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpKX19LGNlPWZ1bmN0aW9uKHQpe3ZhciBlPVkoKTtyZXR1cm4gdD09PWV8fCEoaXQoZSl8fCJJTlBVVCI9PT10LnRhZ05hbWV8fGl0KGsoKSkmJmsoKS5jb250YWlucyh0KSl9LHNlPXtzd2FsUHJvbWlzZVJlc29sdmU6bmV3IFdlYWtNYXB9O2Z1bmN0aW9uIHVlKHQsZSxuLG8pe3ZhciBpO24/cGUodCxvKTooenQoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHBlKHQsbyl9KSwkdC5rZXlkb3duVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCR0LmtleWRvd25IYW5kbGVyLHtjYXB0dXJlOiR0LmtleWRvd25MaXN0ZW5lckNhcHR1cmV9KSwkdC5rZXlkb3duSGFuZGxlckFkZGVkPSExKSxlLnBhcmVudE5vZGUmJiFkb2N1bWVudC5ib2R5LmdldEF0dHJpYnV0ZSgiZGF0YS1zd2FsMi1xdWV1ZS1zdGVwIikmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSxJKCkmJihudWxsIT09JC5wcmV2aW91c0JvZHlQYWRkaW5nJiYoZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQ9IiIuY29uY2F0KCQucHJldmlvdXNCb2R5UGFkZGluZywicHgiKSwkLnByZXZpb3VzQm9keVBhZGRpbmc9bnVsbCksUihkb2N1bWVudC5ib2R5LFcuaW9zZml4KSYmKGk9cGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS50b3AsMTApLGZ0KGRvY3VtZW50LmJvZHksVy5pb3NmaXgpLGRvY3VtZW50LmJvZHkuc3R5bGUudG9wPSIiLGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wPS0xKmkpLCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZpZSgpJiZ3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIixyZSksaChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuaGFzQXR0cmlidXRlKCJkYXRhLXByZXZpb3VzLWFyaWEtaGlkZGVuIik/KHQuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsdC5nZXRBdHRyaWJ1dGUoImRhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4iKSksdC5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4iKSk6dC5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIil9KSksZnQoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCxkb2N1bWVudC5ib2R5XSxbVy5zaG93bixXWyJoZWlnaHQtYXV0byJdLFdbIm5vLWJhY2tkcm9wIl0sV1sidG9hc3Qtc2hvd24iXSxXWyJ0b2FzdC1jb2x1bW4iXV0pfWZ1bmN0aW9uIGxlKHQpe3ZhciBlLG4sbyxpPVooKTtpJiYoZT1QdC5pbm5lclBhcmFtcy5nZXQodGhpcykpJiYhUihpLGUuaGlkZUNsYXNzLnBvcHVwKSYmKG49c2Uuc3dhbFByb21pc2VSZXNvbHZlLmdldCh0aGlzKSxmdChpLGUuc2hvd0NsYXNzLnBvcHVwKSxwdChpLGUuaGlkZUNsYXNzLnBvcHVwKSxvPVkoKSxmdChvLGUuc2hvd0NsYXNzLmJhY2tkcm9wKSxwdChvLGUuaGlkZUNsYXNzLmJhY2tkcm9wKSxmdW5jdGlvbih0LGUsbil7dmFyIG89WSgpLGk9d3QmJnJ0KGUpLHI9bi5vbkNsb3NlLGE9bi5vbkFmdGVyQ2xvc2U7aWYociE9PW51bGwmJnR5cGVvZiByPT09ImZ1bmN0aW9uIil7cihlKX1pZihpKXtkZSh0LGUsbyxhKX1lbHNle3VlKHQsbyxRKCksYSl9fSh0aGlzLGksZSksdm9pZCAwIT09dD8odC5pc0Rpc21pc3NlZD12b2lkIDAhPT10LmRpc21pc3MsdC5pc0NvbmZpcm1lZD12b2lkIDA9PT10LmRpc21pc3MpOnQ9e2lzRGlzbWlzc2VkOiEwLGlzQ29uZmlybWVkOiExfSxuKHR8fHt9KSl9dmFyIGRlPWZ1bmN0aW9uKHQsZSxuLG8peyR0LnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjaz11ZS5iaW5kKG51bGwsdCxuLFEoKSxvKSxlLmFkZEV2ZW50TGlzdGVuZXIod3QsZnVuY3Rpb24odCl7dC50YXJnZXQ9PT1lJiYoJHQuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKCksZGVsZXRlICR0LnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjayl9KX0scGU9ZnVuY3Rpb24odCxlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUoKSx0Ll9kZXN0cm95KCl9KX07ZnVuY3Rpb24gZmUodCxlLG4pe3ZhciBvPVB0LmRvbUNhY2hlLmdldCh0KTtlLmZvckVhY2goZnVuY3Rpb24odCl7b1t0XS5kaXNhYmxlZD1ufSl9ZnVuY3Rpb24gbWUodCxlKXtpZighdClyZXR1cm4hMTtpZigicmFkaW8iPT09dC50eXBlKWZvcih2YXIgbj10LnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCIpLG89MDtvPG4ubGVuZ3RoO28rKyluW29dLmRpc2FibGVkPWU7ZWxzZSB0LmRpc2FibGVkPWV9dmFyIGhlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0LGUpe2EodGhpcyxuKSx0aGlzLmNhbGxiYWNrPXQsdGhpcy5yZW1haW5pbmc9ZSx0aGlzLnJ1bm5pbmc9ITEsdGhpcy5zdGFydCgpfXJldHVybiBjKG4sW3trZXk6InN0YXJ0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bm5pbmd8fCh0aGlzLnJ1bm5pbmc9ITAsdGhpcy5zdGFydGVkPW5ldyBEYXRlLHRoaXMuaWQ9c2V0VGltZW91dCh0aGlzLmNhbGxiYWNrLHRoaXMucmVtYWluaW5nKSksdGhpcy5yZW1haW5pbmd9fSx7a2V5OiJzdG9wIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bm5pbmcmJih0aGlzLnJ1bm5pbmc9ITEsY2xlYXJUaW1lb3V0KHRoaXMuaWQpLHRoaXMucmVtYWluaW5nLT1uZXcgRGF0ZS10aGlzLnN0YXJ0ZWQpLHRoaXMucmVtYWluaW5nfX0se2tleToiaW5jcmVhc2UiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucnVubmluZztyZXR1cm4gZSYmdGhpcy5zdG9wKCksdGhpcy5yZW1haW5pbmcrPXQsZSYmdGhpcy5zdGFydCgpLHRoaXMucmVtYWluaW5nfX0se2tleToiZ2V0VGltZXJMZWZ0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bm5pbmcmJih0aGlzLnN0b3AoKSx0aGlzLnN0YXJ0KCkpLHRoaXMucmVtYWluaW5nfX0se2tleToiaXNSdW5uaW5nIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bm5pbmd9fV0pLG59KCksZ2U9e2VtYWlsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuL15bYS16QS1aMC05LitfLV0rQFthLXpBLVowLTkuLV0rXC5bYS16QS1aMC05LV17MiwyNH0kLy50ZXN0KHQpP1Byb21pc2UucmVzb2x2ZSgpOlByb21pc2UucmVzb2x2ZShlfHwiSW52YWxpZCBlbWFpbCBhZGRyZXNzIil9LHVybDpmdW5jdGlvbih0LGUpe3JldHVybi9eaHR0cHM/OlwvXC8od3d3XC4pP1stYS16QS1aMC05QDolLl8rfiM9XXsyLDI1Nn1cLlthLXpdezIsNjN9XGIoWy1hLXpBLVowLTlAOiVfKy5+Iz8mLz1dKikkLy50ZXN0KHQpP1Byb21pc2UucmVzb2x2ZSgpOlByb21pc2UucmVzb2x2ZShlfHwiSW52YWxpZCBVUkwiKX19O2Z1bmN0aW9uIHZlKHQpe3ZhciBlLG47KGU9dCkuaW5wdXRWYWxpZGF0b3J8fE9iamVjdC5rZXlzKGdlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuaW5wdXQ9PT10JiYoZS5pbnB1dFZhbGlkYXRvcj1nZVt0XSl9KSx0LnNob3dMb2FkZXJPbkNvbmZpcm0mJiF0LnByZUNvbmZpcm0mJk4oInNob3dMb2FkZXJPbkNvbmZpcm0gaXMgc2V0IHRvIHRydWUsIGJ1dCBwcmVDb25maXJtIGlzIG5vdCBkZWZpbmVkLlxuc2hvd0xvYWRlck9uQ29uZmlybSBzaG91bGQgYmUgdXNlZCB0b2dldGhlciB3aXRoIHByZUNvbmZpcm0sIHNlZSB1c2FnZSBleGFtcGxlOlxuaHR0cHM6Ly9zd2VldGFsZXJ0Mi5naXRodWIuaW8vI2FqYXgtcmVxdWVzdCIpLHQuYW5pbWF0aW9uPUYodC5hbmltYXRpb24pLChuPXQpLnRhcmdldCYmKCJzdHJpbmciIT10eXBlb2Ygbi50YXJnZXR8fGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobi50YXJnZXQpKSYmKCJzdHJpbmciPT10eXBlb2Ygbi50YXJnZXR8fG4udGFyZ2V0LmFwcGVuZENoaWxkKXx8KE4oJ1RhcmdldCBwYXJhbWV0ZXIgaXMgbm90IHZhbGlkLCBkZWZhdWx0aW5nIHRvICJib2R5IicpLG4udGFyZ2V0PSJib2R5IiksInN0cmluZyI9PXR5cGVvZiB0LnRpdGxlJiYodC50aXRsZT10LnRpdGxlLnNwbGl0KCJcbiIpLmpvaW4oIjxiciAvPiIpKSx2dCh0KX1mdW5jdGlvbiBiZSh0KXt2YXIgZT1ZKCksbj1aKCk7ImZ1bmN0aW9uIj09dHlwZW9mIHQub25CZWZvcmVPcGVuJiZ0Lm9uQmVmb3JlT3BlbihuKSxPZShlLG4sdCksQmUoZSxuKSxJKCkmJlNlKGUsdC5zY3JvbGxiYXJQYWRkaW5nKSxRKCl8fCR0LnByZXZpb3VzQWN0aXZlRWxlbWVudHx8KCR0LnByZXZpb3VzQWN0aXZlRWxlbWVudD1kb2N1bWVudC5hY3RpdmVFbGVtZW50KSwiZnVuY3Rpb24iPT10eXBlb2YgdC5vbk9wZW4mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gdC5vbk9wZW4obil9KSxmdChlLFdbIm5vLXRyYW5zaXRpb24iXSl9ZnVuY3Rpb24geWUodCl7dmFyIGUsbj1aKCk7dC50YXJnZXQ9PT1uJiYoZT1ZKCksbi5yZW1vdmVFdmVudExpc3RlbmVyKHd0LHllKSxlLnN0eWxlLm92ZXJmbG93WT0iYXV0byIpfWZ1bmN0aW9uIHdlKHQsZSl7InNlbGVjdCI9PT1lLmlucHV0fHwicmFkaW8iPT09ZS5pbnB1dD9xZSh0LGUpOi0xIT09WyJ0ZXh0IiwiZW1haWwiLCJudW1iZXIiLCJ0ZWwiLCJ0ZXh0YXJlYSJdLmluZGV4T2YoZS5pbnB1dCkmJnYoZS5pbnB1dFZhbHVlKSYmSWUodCxlKX1mdW5jdGlvbiBDZSh0LGUpe3QuZGlzYWJsZUJ1dHRvbnMoKSxlLmlucHV0P1JlKHQsZSk6SGUodCxlLCEwKX1mdW5jdGlvbiBrZSh0LGUpe3QuZGlzYWJsZUJ1dHRvbnMoKSxlKHouY2FuY2VsKX1mdW5jdGlvbiB4ZSh0LGUpe3QuY2xvc2VQb3B1cCh7dmFsdWU6ZX0pfWZ1bmN0aW9uIFBlKGUsdCxuLG8pe3Qua2V5ZG93blRhcmdldCYmdC5rZXlkb3duSGFuZGxlckFkZGVkJiYodC5rZXlkb3duVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLHQua2V5ZG93bkhhbmRsZXIse2NhcHR1cmU6dC5rZXlkb3duTGlzdGVuZXJDYXB0dXJlfSksdC5rZXlkb3duSGFuZGxlckFkZGVkPSExKSxuLnRvYXN0fHwodC5rZXlkb3duSGFuZGxlcj1mdW5jdGlvbih0KXtyZXR1cm4gVWUoZSx0LG8pfSx0LmtleWRvd25UYXJnZXQ9bi5rZXlkb3duTGlzdGVuZXJDYXB0dXJlP3dpbmRvdzpaKCksdC5rZXlkb3duTGlzdGVuZXJDYXB0dXJlPW4ua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZSx0LmtleWRvd25UYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsdC5rZXlkb3duSGFuZGxlcix7Y2FwdHVyZTp0LmtleWRvd25MaXN0ZW5lckNhcHR1cmV9KSx0LmtleWRvd25IYW5kbGVyQWRkZWQ9ITApfWZ1bmN0aW9uIEFlKHQsZSxuKXt2YXIgbz1xKCksaT0wO2lmKGk8by5sZW5ndGgpcmV0dXJuKGUrPW4pPT09by5sZW5ndGg/ZT0wOi0xPT09ZSYmKGU9by5sZW5ndGgtMSksb1tlXS5mb2N1cygpO1ooKS5mb2N1cygpfWZ1bmN0aW9uIEVlKHQsZSxuKXtQdC5pbm5lclBhcmFtcy5nZXQodCkudG9hc3Q/S2UodCxlLG4pOihaZShlKSxRZShlKSwkZSh0LGUsbikpfXZhciBCZT1mdW5jdGlvbih0LGUpe3d0JiZydChlKT8odC5zdHlsZS5vdmVyZmxvd1k9ImhpZGRlbiIsZS5hZGRFdmVudExpc3RlbmVyKHd0LHllKSk6dC5zdHlsZS5vdmVyZmxvd1k9ImF1dG8ifSxTZT1mdW5jdGlvbih0LGUpe3ZhciBuOygvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmIXdpbmRvdy5NU1N0cmVhbXx8Ik1hY0ludGVsIj09PW5hdmlnYXRvci5wbGF0Zm9ybSYmMTxuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMpJiYhUihkb2N1bWVudC5ib2R5LFcuaW9zZml4KSYmKG49ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsZG9jdW1lbnQuYm9keS5zdHlsZS50b3A9IiIuY29uY2F0KC0xKm4sInB4IikscHQoZG9jdW1lbnQuYm9keSxXLmlvc2ZpeCksYWUoKSksInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJmllKCkmJihyZSgpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLHJlKSksaChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Q9PT1ZKCl8fGZ1bmN0aW9uKHQsZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQuY29udGFpbnMpcmV0dXJuIHQuY29udGFpbnMoZSl9KHQsWSgpKXx8KHQuaGFzQXR0cmlidXRlKCJhcmlhLWhpZGRlbiIpJiZ0LnNldEF0dHJpYnV0ZSgiZGF0YS1wcmV2aW91cy1hcmlhLWhpZGRlbiIsdC5nZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIikpLHQuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKSl9KSxlJiZvZSgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNjcm9sbFRvcD0wfSl9LE9lPWZ1bmN0aW9uKHQsZSxuKXtwdCh0LG4uc2hvd0NsYXNzLmJhY2tkcm9wKSxldChlKSxwdChlLG4uc2hvd0NsYXNzLnBvcHVwKSxwdChbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGRvY3VtZW50LmJvZHldLFcuc2hvd24pLG4uaGVpZ2h0QXV0byYmbi5iYWNrZHJvcCYmIW4udG9hc3QmJnB0KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZG9jdW1lbnQuYm9keV0sV1siaGVpZ2h0LWF1dG8iXSl9LFRlPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrZWQ/MTowfSxMZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVja2VkP3QudmFsdWU6bnVsbH0samU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuZmlsZXMubGVuZ3RoP251bGwhPT10LmdldEF0dHJpYnV0ZSgibXVsdGlwbGUiKT90LmZpbGVzOnQuZmlsZXNbMF06bnVsbH0scWU9ZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBvKHQpe3JldHVybiBNZVtuLmlucHV0XShpLFZlKHQpLG4pfXZhciBpPWsoKTt2KG4uaW5wdXRPcHRpb25zKT8oRnQoKSxuLmlucHV0T3B0aW9ucy50aGVuKGZ1bmN0aW9uKHQpe2UuaGlkZUxvYWRpbmcoKSxvKHQpfSkpOiJvYmplY3QiPT09cihuLmlucHV0T3B0aW9ucyk/byhuLmlucHV0T3B0aW9ucyk6VSgiVW5leHBlY3RlZCB0eXBlIG9mIGlucHV0T3B0aW9ucyEgRXhwZWN0ZWQgb2JqZWN0LCBNYXAgb3IgUHJvbWlzZSwgZ290ICIuY29uY2F0KHIobi5pbnB1dE9wdGlvbnMpKSl9LEllPWZ1bmN0aW9uKGUsbil7dmFyIG89ZS5nZXRJbnB1dCgpO250KG8pLG4uaW5wdXRWYWx1ZS50aGVuKGZ1bmN0aW9uKHQpe28udmFsdWU9Im51bWJlciI9PT1uLmlucHV0P3BhcnNlRmxvYXQodCl8fDA6IiIuY29uY2F0KHQpLGV0KG8pLG8uZm9jdXMoKSxlLmhpZGVMb2FkaW5nKCl9KS5jYXRjaChmdW5jdGlvbih0KXtVKCJFcnJvciBpbiBpbnB1dFZhbHVlIHByb21pc2U6ICIuY29uY2F0KHQpKSxvLnZhbHVlPSIiLGV0KG8pLG8uZm9jdXMoKSxlLmhpZGVMb2FkaW5nKCl9KX0sTWU9e3NlbGVjdDpmdW5jdGlvbih0LGUsaSl7ZnVuY3Rpb24gcih0LGUsbil7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7by52YWx1ZT1uLFYobyxlKSxpLmlucHV0VmFsdWUudG9TdHJpbmcoKT09PW4udG9TdHJpbmcoKSYmKG8uc2VsZWN0ZWQ9ITApLHQuYXBwZW5kQ2hpbGQobyl9dmFyIGE9bXQodCxXLnNlbGVjdCk7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlLG49dFswXSxvPXRbMV07QXJyYXkuaXNBcnJheShvKT8oKGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0Z3JvdXAiKSkubGFiZWw9bixlLmRpc2FibGVkPSExLGEuYXBwZW5kQ2hpbGQoZSksby5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiByKGUsdFsxXSx0WzBdKX0pKTpyKGEsbyxuKX0pLGEuZm9jdXMoKX0scmFkaW86ZnVuY3Rpb24odCxlLGEpe3ZhciBjPW10KHQsVy5yYWRpbyk7ZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0sbj10WzFdLG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7by50eXBlPSJyYWRpbyIsby5uYW1lPVcucmFkaW8sby52YWx1ZT1lLGEuaW5wdXRWYWx1ZS50b1N0cmluZygpPT09ZS50b1N0cmluZygpJiYoby5jaGVja2VkPSEwKTt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7VihyLG4pLHIuY2xhc3NOYW1lPVcubGFiZWwsaS5hcHBlbmRDaGlsZChvKSxpLmFwcGVuZENoaWxkKHIpLGMuYXBwZW5kQ2hpbGQoaSl9KTt2YXIgbj1jLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0Iik7bi5sZW5ndGgmJm5bMF0uZm9jdXMoKX19LFZlPWZ1bmN0aW9uIG8obil7dmFyIGk9W107cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBNYXAmJm4gaW5zdGFuY2VvZiBNYXA/bi5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIG49dDsib2JqZWN0Ij09PXIobikmJihuPW8obikpLGkucHVzaChbZSxuXSl9KTpPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPW5bdF07Im9iamVjdCI9PT1yKGUpJiYoZT1vKGUpKSxpLnB1c2goW3QsZV0pfSksaX0sUmU9ZnVuY3Rpb24oZSxuKXt2YXIgbz1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0SW5wdXQoKTtpZighbilyZXR1cm4gbnVsbDtzd2l0Y2goZS5pbnB1dCl7Y2FzZSJjaGVja2JveCI6cmV0dXJuIFRlKG4pO2Nhc2UicmFkaW8iOnJldHVybiBMZShuKTtjYXNlImZpbGUiOnJldHVybiBqZShuKTtkZWZhdWx0OnJldHVybiBlLmlucHV0QXV0b1RyaW0/bi52YWx1ZS50cmltKCk6bi52YWx1ZX19KGUsbik7bi5pbnB1dFZhbGlkYXRvcj8oZS5kaXNhYmxlSW5wdXQoKSxQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uaW5wdXRWYWxpZGF0b3IobyxuLnZhbGlkYXRpb25NZXNzYWdlKX0pLnRoZW4oZnVuY3Rpb24odCl7ZS5lbmFibGVCdXR0b25zKCksZS5lbmFibGVJbnB1dCgpLHQ/ZS5zaG93VmFsaWRhdGlvbk1lc3NhZ2UodCk6SGUoZSxuLG8pfSkpOmUuZ2V0SW5wdXQoKS5jaGVja1ZhbGlkaXR5KCk/SGUoZSxuLG8pOihlLmVuYWJsZUJ1dHRvbnMoKSxlLnNob3dWYWxpZGF0aW9uTWVzc2FnZShuLnZhbGlkYXRpb25NZXNzYWdlKSl9LEhlPWZ1bmN0aW9uKGUsdCxuKXt0LnNob3dMb2FkZXJPbkNvbmZpcm0mJkZ0KCksdC5wcmVDb25maXJtPyhlLnJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSxQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQucHJlQ29uZmlybShuLHQudmFsaWRhdGlvbk1lc3NhZ2UpfSkudGhlbihmdW5jdGlvbih0KXtodChBKCkpfHwhMT09PXQ/ZS5oaWRlTG9hZGluZygpOnhlKGUsdm9pZCAwPT09dD9uOnQpfSkpOnhlKGUsbil9LERlPVsiQXJyb3dMZWZ0IiwiQXJyb3dSaWdodCIsIkFycm93VXAiLCJBcnJvd0Rvd24iLCJMZWZ0IiwiUmlnaHQiLCJVcCIsIkRvd24iXSxOZT1bIkVzY2FwZSIsIkVzYyJdLFVlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz1QdC5pbm5lclBhcmFtcy5nZXQodCk7by5zdG9wS2V5ZG93blByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpLCJFbnRlciI9PT1lLmtleT9fZSh0LGUsbyk6IlRhYiI9PT1lLmtleT9GZShlLG8pOi0xIT09RGUuaW5kZXhPZihlLmtleSk/emUoKTotMSE9PU5lLmluZGV4T2YoZS5rZXkpJiZXZShlLG8sbil9LF9lPWZ1bmN0aW9uKHQsZSxuKXtpZighZS5pc0NvbXBvc2luZyYmZS50YXJnZXQmJnQuZ2V0SW5wdXQoKSYmZS50YXJnZXQub3V0ZXJIVE1MPT09dC5nZXRJbnB1dCgpLm91dGVySFRNTCl7aWYoLTEhPT1bInRleHRhcmVhIiwiZmlsZSJdLmluZGV4T2Yobi5pbnB1dCkpcmV0dXJuO1Z0KCksZS5wcmV2ZW50RGVmYXVsdCgpfX0sRmU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQudGFyZ2V0LG49cSgpLG89LTEsaT0wO2k8bi5sZW5ndGg7aSsrKWlmKGU9PT1uW2ldKXtvPWk7YnJlYWt9dC5zaGlmdEtleT9BZSgwLG8sLTEpOkFlKDAsbywxKSx0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKX0semU9ZnVuY3Rpb24oKXt2YXIgdD1FKCksZT1CKCk7ZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09PXQmJmh0KGUpP2UuZm9jdXMoKTpkb2N1bWVudC5hY3RpdmVFbGVtZW50PT09ZSYmaHQodCkmJnQuZm9jdXMoKX0sV2U9ZnVuY3Rpb24odCxlLG4pe0YoZS5hbGxvd0VzY2FwZUtleSkmJih0LnByZXZlbnREZWZhdWx0KCksbih6LmVzYykpfSxLZT1mdW5jdGlvbihlLHQsbil7dC5wb3B1cC5vbmNsaWNrPWZ1bmN0aW9uKCl7dmFyIHQ9UHQuaW5uZXJQYXJhbXMuZ2V0KGUpO3Quc2hvd0NvbmZpcm1CdXR0b258fHQuc2hvd0NhbmNlbEJ1dHRvbnx8dC5zaG93Q2xvc2VCdXR0b258fHQuaW5wdXR8fG4oei5jbG9zZSl9fSxZZT0hMSxaZT1mdW5jdGlvbihlKXtlLnBvcHVwLm9ubW91c2Vkb3duPWZ1bmN0aW9uKCl7ZS5jb250YWluZXIub25tb3VzZXVwPWZ1bmN0aW9uKHQpe2UuY29udGFpbmVyLm9ubW91c2V1cD12b2lkIDAsdC50YXJnZXQ9PT1lLmNvbnRhaW5lciYmKFllPSEwKX19fSxRZT1mdW5jdGlvbihlKXtlLmNvbnRhaW5lci5vbm1vdXNlZG93bj1mdW5jdGlvbigpe2UucG9wdXAub25tb3VzZXVwPWZ1bmN0aW9uKHQpe2UucG9wdXAub25tb3VzZXVwPXZvaWQgMCx0LnRhcmdldCE9PWUucG9wdXAmJiFlLnBvcHVwLmNvbnRhaW5zKHQudGFyZ2V0KXx8KFllPSEwKX19fSwkZT1mdW5jdGlvbihuLG8saSl7by5jb250YWluZXIub25jbGljaz1mdW5jdGlvbih0KXt2YXIgZT1QdC5pbm5lclBhcmFtcy5nZXQobik7WWU/WWU9ITE6dC50YXJnZXQ9PT1vLmNvbnRhaW5lciYmRihlLmFsbG93T3V0c2lkZUNsaWNrKSYmaSh6LmJhY2tkcm9wKX19O3ZhciBKZT1mdW5jdGlvbih0LGUsbil7dmFyIG89TCgpO250KG8pLGUudGltZXImJih0LnRpbWVvdXQ9bmV3IGhlKGZ1bmN0aW9uKCl7bigidGltZXIiKSxkZWxldGUgdC50aW1lb3V0fSxlLnRpbWVyKSxlLnRpbWVyUHJvZ3Jlc3NCYXImJihldChvKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50aW1lb3V0LnJ1bm5pbmcmJmF0KGUudGltZXIpfSkpKX0sWGU9ZnVuY3Rpb24odCxlKXtpZighZS50b2FzdClyZXR1cm4gRihlLmFsbG93RW50ZXJLZXkpP2UuZm9jdXNDYW5jZWwmJmh0KHQuY2FuY2VsQnV0dG9uKT90LmNhbmNlbEJ1dHRvbi5mb2N1cygpOmUuZm9jdXNDb25maXJtJiZodCh0LmNvbmZpcm1CdXR0b24pP3QuY29uZmlybUJ1dHRvbi5mb2N1cygpOnZvaWQgQWUoMCwtMSwxKTpHZSgpfSxHZT1mdW5jdGlvbigpe2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJiJmdW5jdGlvbiI9PXR5cGVvZiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXImJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpfTt2YXIgdG4sZW49ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdFtlXT1uZXcgV2Vha01hcH0sbm49T2JqZWN0LmZyZWV6ZSh7aGlkZUxvYWRpbmc6bmUsZGlzYWJsZUxvYWRpbmc6bmUsZ2V0SW5wdXQ6ZnVuY3Rpb24odCl7dmFyIGU9UHQuaW5uZXJQYXJhbXMuZ2V0KHR8fHRoaXMpLG49UHQuZG9tQ2FjaGUuZ2V0KHR8fHRoaXMpO3JldHVybiBuP0oobi5jb250ZW50LGUuaW5wdXQpOm51bGx9LGNsb3NlOmxlLGNsb3NlUG9wdXA6bGUsY2xvc2VNb2RhbDpsZSxjbG9zZVRvYXN0OmxlLGVuYWJsZUJ1dHRvbnM6ZnVuY3Rpb24oKXtmZSh0aGlzLFsiY29uZmlybUJ1dHRvbiIsImNhbmNlbEJ1dHRvbiJdLCExKX0sZGlzYWJsZUJ1dHRvbnM6ZnVuY3Rpb24oKXtmZSh0aGlzLFsiY29uZmlybUJ1dHRvbiIsImNhbmNlbEJ1dHRvbiJdLCEwKX0sZW5hYmxlSW5wdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbWUodGhpcy5nZXRJbnB1dCgpLCExKX0sZGlzYWJsZUlucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIG1lKHRoaXMuZ2V0SW5wdXQoKSwhMCl9LHNob3dWYWxpZGF0aW9uTWVzc2FnZTpmdW5jdGlvbih0KXt2YXIgZT1QdC5kb21DYWNoZS5nZXQodGhpcyk7VihlLnZhbGlkYXRpb25NZXNzYWdlLHQpO3ZhciBuPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUucG9wdXApO2UudmFsaWRhdGlvbk1lc3NhZ2Uuc3R5bGUubWFyZ2luTGVmdD0iLSIuY29uY2F0KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1sZWZ0IikpLGUudmFsaWRhdGlvbk1lc3NhZ2Uuc3R5bGUubWFyZ2luUmlnaHQ9Ii0iLmNvbmNhdChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctcmlnaHQiKSksZXQoZS52YWxpZGF0aW9uTWVzc2FnZSk7dmFyIG89dGhpcy5nZXRJbnB1dCgpO28mJihvLnNldEF0dHJpYnV0ZSgiYXJpYS1pbnZhbGlkIiwhMCksby5zZXRBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkQnkiLFdbInZhbGlkYXRpb24tbWVzc2FnZSJdKSxYKG8pLHB0KG8sVy5pbnB1dGVycm9yKSl9LHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2U6ZnVuY3Rpb24oKXt2YXIgdD1QdC5kb21DYWNoZS5nZXQodGhpcyk7dC52YWxpZGF0aW9uTWVzc2FnZSYmbnQodC52YWxpZGF0aW9uTWVzc2FnZSk7dmFyIGU9dGhpcy5nZXRJbnB1dCgpO2UmJihlLnJlbW92ZUF0dHJpYnV0ZSgiYXJpYS1pbnZhbGlkIiksZS5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtZGVzY3JpYmVkQnkiKSxmdChlLFcuaW5wdXRlcnJvcikpfSxnZXRQcm9ncmVzc1N0ZXBzOmZ1bmN0aW9uKCl7cmV0dXJuIFB0LmRvbUNhY2hlLmdldCh0aGlzKS5wcm9ncmVzc1N0ZXBzfSxfbWFpbjpmdW5jdGlvbih0KXtRdCh0KSwkdC5jdXJyZW50SW5zdGFuY2UmJiR0LmN1cnJlbnRJbnN0YW5jZS5fZGVzdHJveSgpLCR0LmN1cnJlbnRJbnN0YW5jZT10aGlzO3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPXMoe30sSnQuc2hvd0NsYXNzLHQuc2hvd0NsYXNzKSxuPXMoe30sSnQuaGlkZUNsYXNzLHQuaGlkZUNsYXNzKSxvPXMoe30sSnQsdCk7aWYoby5zaG93Q2xhc3M9ZSxvLmhpZGVDbGFzcz1uLHQuYW5pbWF0aW9uPT09ZmFsc2Upe28uc2hvd0NsYXNzPXtwb3B1cDoic3dhbDItbm9hbmltYXRpb24iLGJhY2tkcm9wOiJzd2FsMi1ub2FuaW1hdGlvbiJ9O28uaGlkZUNsYXNzPXt9fXJldHVybiBvfSh0KTt2ZShlKSxPYmplY3QuZnJlZXplKGUpLCR0LnRpbWVvdXQmJigkdC50aW1lb3V0LnN0b3AoKSxkZWxldGUgJHQudGltZW91dCksY2xlYXJUaW1lb3V0KCR0LnJlc3RvcmVGb2N1c1RpbWVvdXQpO3ZhciBuPWZ1bmN0aW9uKHQpe3ZhciBlPXtwb3B1cDpaKCksY29udGFpbmVyOlkoKSxjb250ZW50OmsoKSxhY3Rpb25zOlMoKSxjb25maXJtQnV0dG9uOkUoKSxjYW5jZWxCdXR0b246QigpLGNsb3NlQnV0dG9uOmooKSx2YWxpZGF0aW9uTWVzc2FnZTpBKCkscHJvZ3Jlc3NTdGVwczpQKCl9O3JldHVybiBQdC5kb21DYWNoZS5zZXQodCxlKSxlfSh0aGlzKTtyZXR1cm4gTXQodGhpcyxlKSxQdC5pbm5lclBhcmFtcy5zZXQodGhpcyxlKSxmdW5jdGlvbihuLG8saSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uIHQoZSl7bi5jbG9zZVBvcHVwKHtkaXNtaXNzOmV9KX07c2Uuc3dhbFByb21pc2VSZXNvbHZlLnNldChuLHQpO28uY29uZmlybUJ1dHRvbi5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIENlKG4saSl9O28uY2FuY2VsQnV0dG9uLm9uY2xpY2s9ZnVuY3Rpb24oKXtyZXR1cm4ga2UobixlKX07by5jbG9zZUJ1dHRvbi5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIGUoei5jbG9zZSl9O0VlKG4sbyxlKTtQZShuLCR0LGksZSk7aWYoaS50b2FzdCYmKGkuaW5wdXR8fGkuZm9vdGVyfHxpLnNob3dDbG9zZUJ1dHRvbikpe3B0KGRvY3VtZW50LmJvZHksV1sidG9hc3QtY29sdW1uIl0pfWVsc2V7ZnQoZG9jdW1lbnQuYm9keSxXWyJ0b2FzdC1jb2x1bW4iXSl9d2UobixpKTtiZShpKTtKZSgkdCxpLGUpO1hlKG8saSk7c2V0VGltZW91dChmdW5jdGlvbigpe28uY29udGFpbmVyLnNjcm9sbFRvcD0wfSl9KX0odGhpcyxuLGUpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9WigpLG49UHQuaW5uZXJQYXJhbXMuZ2V0KHRoaXMpO2lmKCF0fHxSKHQsbi5oaWRlQ2xhc3MucG9wdXApKXJldHVybiBOKCJZb3UncmUgdHJ5aW5nIHRvIHVwZGF0ZSB0aGUgY2xvc2VkIG9yIGNsb3NpbmcgcG9wdXAsIHRoYXQgd29uJ3Qgd29yay4gVXNlIHRoZSB1cGRhdGUoKSBtZXRob2QgaW4gcHJlQ29uZmlybSBwYXJhbWV0ZXIgb3Igc2hvdyBhIG5ldyBwb3B1cC4iKTt2YXIgbz17fTtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JuLmlzVXBkYXRhYmxlUGFyYW1ldGVyKHQpP29bdF09ZVt0XTpOKCdJbnZhbGlkIHBhcmFtZXRlciB0byB1cGRhdGU6ICInLmNvbmNhdCh0LCciLiBVcGRhdGFibGUgcGFyYW1zIGFyZSBsaXN0ZWQgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL3N3ZWV0YWxlcnQyL3N3ZWV0YWxlcnQyL2Jsb2IvbWFzdGVyL3NyYy91dGlscy9wYXJhbXMuanMnKSl9KTt2YXIgaT1zKHt9LG4sbyk7TXQodGhpcyxpKSxQdC5pbm5lclBhcmFtcy5zZXQodGhpcyxpKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtwYXJhbXM6e3ZhbHVlOnMoe30sdGhpcy5wYXJhbXMsZSksd3JpdGFibGU6ITEsZW51bWVyYWJsZTohMH19KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgdD1QdC5kb21DYWNoZS5nZXQodGhpcyksZT1QdC5pbm5lclBhcmFtcy5nZXQodGhpcyk7ZSYmKHQucG9wdXAmJiR0LnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjayYmKCR0LnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjaygpLGRlbGV0ZSAkdC5zd2FsQ2xvc2VFdmVudEZpbmlzaGVkQ2FsbGJhY2spLCR0LmRlZmVyRGlzcG9zYWxUaW1lciYmKGNsZWFyVGltZW91dCgkdC5kZWZlckRpc3Bvc2FsVGltZXIpLGRlbGV0ZSAkdC5kZWZlckRpc3Bvc2FsVGltZXIpLCJmdW5jdGlvbiI9PXR5cGVvZiBlLm9uRGVzdHJveSYmZS5vbkRlc3Ryb3koKSxkZWxldGUgdGhpcy5wYXJhbXMsZGVsZXRlICR0LmtleWRvd25IYW5kbGVyLGRlbGV0ZSAkdC5rZXlkb3duVGFyZ2V0LGVuKFB0KSxlbihzZSkpfX0pLG9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gcigpe2lmKGEodGhpcyxyKSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyl7InVuZGVmaW5lZCI9PXR5cGVvZiBQcm9taXNlJiZVKCJUaGlzIHBhY2thZ2UgcmVxdWlyZXMgYSBQcm9taXNlIGxpYnJhcnksIHBsZWFzZSBpbmNsdWRlIGEgc2hpbSB0byBlbmFibGUgaXQgaW4gdGhpcyBicm93c2VyIChTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9zd2VldGFsZXJ0Mi9zd2VldGFsZXJ0Mi93aWtpL01pZ3JhdGlvbi1mcm9tLVN3ZWV0QWxlcnQtdG8tU3dlZXRBbGVydDIjMS1pZS1zdXBwb3J0KSIpLHRuPXRoaXM7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1uZXcgQXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07dmFyIG89T2JqZWN0LmZyZWV6ZSh0aGlzLmNvbnN0cnVjdG9yLmFyZ3NUb1BhcmFtcyhlKSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cGFyYW1zOnt2YWx1ZTpvLHdyaXRhYmxlOiExLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pO3ZhciBpPXRoaXMuX21haW4odGhpcy5wYXJhbXMpO1B0LnByb21pc2Uuc2V0KHRoaXMsaSl9fXJldHVybiBjKHIsW3trZXk6InRoZW4iLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBQdC5wcm9taXNlLmdldCh0aGlzKS50aGVuKHQpfX0se2tleToiZmluYWxseSIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIFB0LnByb21pc2UuZ2V0KHRoaXMpLmZpbmFsbHkodCl9fV0pLHJ9KCk7cyhvbi5wcm90b3R5cGUsbm4pLHMob24sZWUpLE9iamVjdC5rZXlzKG5uKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe29uW3RdPWZ1bmN0aW9uKCl7aWYodG4pcmV0dXJuIHRuW3RdLmFwcGx5KHRuLGFyZ3VtZW50cyl9fSksb24uRGlzbWlzc1JlYXNvbj16LG9uLnZlcnNpb249IjkuMTQuMCI7dmFyIHJuPW9uO3JldHVybiBybi5kZWZhdWx0PXJufSksdm9pZCAwIT09dGhpcyYmdGhpcy5Td2VldGFsZXJ0MiYmKHRoaXMuc3dhbD10aGlzLnN3ZWV0QWxlcnQ9dGhpcy5Td2FsPXRoaXMuU3dlZXRBbGVydD10aGlzLlN3ZWV0YWxlcnQyKTs="},{"meta":{"name":"echarts.min.js","url":"https://lib.baomitu.com/echarts/4.6.0/echarts.min.js","ts":1591001487213,"mimetype":"text/javascript"},"source":"Ci8qCiogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZQoqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQoqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uCiogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQoqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKKiAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbgoqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQoqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQoqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKKiB1bmRlciB0aGUgTGljZW5zZS4KKi8KCgohZnVuY3Rpb24odCxlKXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlP2UoZXhwb3J0cyk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoWyJleHBvcnRzIl0sZSk6ZSh0LmVjaGFydHM9e30pfSh0aGlzLGZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT0yMzExLG49ZnVuY3Rpb24oKXtyZXR1cm4gZSsrfSx2PSJvYmplY3QiPT10eXBlb2Ygd3gmJiJmdW5jdGlvbiI9PXR5cGVvZiB3eC5nZXRTeXN0ZW1JbmZvU3luYz97YnJvd3Nlcjp7fSxvczp7fSxub2RlOiExLHd4YTohMCxjYW52YXNTdXBwb3J0ZWQ6ITAsc3ZnU3VwcG9ydGVkOiExLHRvdWNoRXZlbnRzU3VwcG9ydGVkOiEwLGRvbVN1cHBvcnRlZDohMX06InVuZGVmaW5lZCI9PXR5cGVvZiBkb2N1bWVudCYmInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3ticm93c2VyOnt9LG9zOnt9LG5vZGU6ITEsd29ya2VyOiEwLGNhbnZhc1N1cHBvcnRlZDohMCxkb21TdXBwb3J0ZWQ6ITF9OiJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yP3ticm93c2VyOnt9LG9zOnt9LG5vZGU6ITAsd29ya2VyOiExLGNhbnZhc1N1cHBvcnRlZDohMCxzdmdTdXBwb3J0ZWQ6ITAsZG9tU3VwcG9ydGVkOiExfTpmdW5jdGlvbih0KXt2YXIgZT17fSxpPXQubWF0Y2goL0ZpcmVmb3hcLyhbXGQuXSspLyksbj10Lm1hdGNoKC9NU0lFXHMoW1xkLl0rKS8pfHx0Lm1hdGNoKC9UcmlkZW50XC8uKz9ydjooKFtcZC5dKykpLyksbz10Lm1hdGNoKC9FZGdlXC8oW1xkLl0rKS8pLGE9L21pY3JvbWVzc2VuZ2VyL2kudGVzdCh0KTtpJiYoZS5maXJlZm94PSEwLGUudmVyc2lvbj1pWzFdKTtuJiYoZS5pZT0hMCxlLnZlcnNpb249blsxXSk7byYmKGUuZWRnZT0hMCxlLnZlcnNpb249b1sxXSk7YSYmKGUud2VDaGF0PSEwKTtyZXR1cm57YnJvd3NlcjplLG9zOnt9LG5vZGU6ITEsY2FudmFzU3VwcG9ydGVkOiEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCxzdmdTdXBwb3J0ZWQ6InVuZGVmaW5lZCIhPXR5cGVvZiBTVkdSZWN0LHRvdWNoRXZlbnRzU3VwcG9ydGVkOiJvbnRvdWNoc3RhcnQiaW4gd2luZG93JiYhZS5pZSYmIWUuZWRnZSxwb2ludGVyRXZlbnRzU3VwcG9ydGVkOiJvbnBvaW50ZXJkb3duImluIHdpbmRvdyYmKGUuZWRnZXx8ZS5pZSYmMTE8PWUudmVyc2lvbiksZG9tU3VwcG9ydGVkOiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnR9fShuYXZpZ2F0b3IudXNlckFnZW50KTt2YXIgcz17IltvYmplY3QgRnVuY3Rpb25dIjoxLCJbb2JqZWN0IFJlZ0V4cF0iOjEsIltvYmplY3QgRGF0ZV0iOjEsIltvYmplY3QgRXJyb3JdIjoxLCJbb2JqZWN0IENhbnZhc0dyYWRpZW50XSI6MSwiW29iamVjdCBDYW52YXNQYXR0ZXJuXSI6MSwiW29iamVjdCBJbWFnZV0iOjEsIltvYmplY3QgQ2FudmFzXSI6MX0sbD17IltvYmplY3QgSW50OEFycmF5XSI6MSwiW29iamVjdCBVaW50OEFycmF5XSI6MSwiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iOjEsIltvYmplY3QgSW50MTZBcnJheV0iOjEsIltvYmplY3QgVWludDE2QXJyYXldIjoxLCJbb2JqZWN0IEludDMyQXJyYXldIjoxLCJbb2JqZWN0IFVpbnQzMkFycmF5XSI6MSwiW29iamVjdCBGbG9hdDMyQXJyYXldIjoxLCJbb2JqZWN0IEZsb2F0NjRBcnJheV0iOjF9LHU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxpPUFycmF5LnByb3RvdHlwZSxyPWkuZm9yRWFjaCxoPWkuZmlsdGVyLG89aS5zbGljZSxjPWkubWFwLGQ9aS5yZWR1Y2UsYT17fTtmdW5jdGlvbiBmKHQsZSl7ImNyZWF0ZUNhbnZhcyI9PT10JiYoeT1udWxsKSxhW3RdPWV9ZnVuY3Rpb24gRCh0KXtpZihudWxsPT10fHwib2JqZWN0IiE9dHlwZW9mIHQpcmV0dXJuIHQ7dmFyIGU9dCxpPXUuY2FsbCh0KTtpZigiW29iamVjdCBBcnJheV0iPT09aSl7aWYoISQodCkpe2U9W107Zm9yKHZhciBuPTAsbz10Lmxlbmd0aDtuPG87bisrKWVbbl09RCh0W25dKX19ZWxzZSBpZihsW2ldKXtpZighJCh0KSl7dmFyIGE9dC5jb25zdHJ1Y3RvcjtpZih0LmNvbnN0cnVjdG9yLmZyb20pZT1hLmZyb20odCk7ZWxzZXtlPW5ldyBhKHQubGVuZ3RoKTtmb3Iobj0wLG89dC5sZW5ndGg7bjxvO24rKyllW25dPUQodFtuXSl9fX1lbHNlIGlmKCFzW2ldJiYhJCh0KSYmIUcodCkpZm9yKHZhciByIGluIGU9e30sdCl0Lmhhc093blByb3BlcnR5KHIpJiYoZVtyXT1EKHRbcl0pKTtyZXR1cm4gZX1mdW5jdGlvbiBtKHQsZSxpKXtpZighUihlKXx8IVIodCkpcmV0dXJuIGk/RChlKTp0O2Zvcih2YXIgbiBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkobikpe3ZhciBvPXRbbl0sYT1lW25dOyFSKGEpfHwhUihvKXx8ayhhKXx8ayhvKXx8RyhhKXx8RyhvKXx8QihhKXx8QihvKXx8JChhKXx8JChvKT8haSYmbiBpbiB0fHwodFtuXT1EKGVbbl0pKTptKG8sYSxpKX1yZXR1cm4gdH1mdW5jdGlvbiBwKHQsZSl7Zm9yKHZhciBpPXRbMF0sbj0xLG89dC5sZW5ndGg7bjxvO24rKylpPW0oaSx0W25dLGUpO3JldHVybiBpfWZ1bmN0aW9uIEwodCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKTtyZXR1cm4gdH1mdW5jdGlvbiBDKHQsZSxpKXtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiYoaT9udWxsIT1lW25dOm51bGw9PXRbbl0pJiYodFtuXT1lW25dKTtyZXR1cm4gdH1mdW5jdGlvbiBnKCl7cmV0dXJuIGEuY3JlYXRlQ2FudmFzKCl9dmFyIHk7ZnVuY3Rpb24geCgpe3JldHVybiB5PXl8fGcoKS5nZXRDb250ZXh0KCIyZCIpfWZ1bmN0aW9uIF8odCxlKXtpZih0KXtpZih0LmluZGV4T2YpcmV0dXJuIHQuaW5kZXhPZihlKTtmb3IodmFyIGk9MCxuPXQubGVuZ3RoO2k8bjtpKyspaWYodFtpXT09PWUpcmV0dXJuIGl9cmV0dXJuLTF9ZnVuY3Rpb24gdyh0LGUpe3ZhciBpPXQucHJvdG90eXBlO2Z1bmN0aW9uIG4oKXt9Zm9yKHZhciBvIGluIG4ucHJvdG90eXBlPWUucHJvdG90eXBlLHQucHJvdG90eXBlPW5ldyBuLGkpaS5oYXNPd25Qcm9wZXJ0eShvKSYmKHQucHJvdG90eXBlW29dPWlbb10pOyh0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10KS5zdXBlckNsYXNzPWV9ZnVuY3Rpb24gYih0LGUsaSl7Qyh0PSJwcm90b3R5cGUiaW4gdD90LnByb3RvdHlwZTp0LGU9InByb3RvdHlwZSJpbiBlP2UucHJvdG90eXBlOmUsaSl9ZnVuY3Rpb24gUCh0KXtpZih0KXJldHVybiJzdHJpbmciIT10eXBlb2YgdCYmIm51bWJlciI9PXR5cGVvZiB0Lmxlbmd0aH1mdW5jdGlvbiBFKHQsZSxpKXtpZih0JiZlKWlmKHQuZm9yRWFjaCYmdC5mb3JFYWNoPT09cil0LmZvckVhY2goZSxpKTtlbHNlIGlmKHQubGVuZ3RoPT09K3QubGVuZ3RoKWZvcih2YXIgbj0wLG89dC5sZW5ndGg7bjxvO24rKyllLmNhbGwoaSx0W25dLG4sdCk7ZWxzZSBmb3IodmFyIGEgaW4gdCl0Lmhhc093blByb3BlcnR5KGEpJiZlLmNhbGwoaSx0W2FdLGEsdCl9ZnVuY3Rpb24gTih0LGUsaSl7aWYodCYmZSl7aWYodC5tYXAmJnQubWFwPT09YylyZXR1cm4gdC5tYXAoZSxpKTtmb3IodmFyIG49W10sbz0wLGE9dC5sZW5ndGg7bzxhO28rKyluLnB1c2goZS5jYWxsKGksdFtvXSxvLHQpKTtyZXR1cm4gbn19ZnVuY3Rpb24gUyh0LGUsaSxuKXtpZih0JiZlKXtpZih0LnJlZHVjZSYmdC5yZWR1Y2U9PT1kKXJldHVybiB0LnJlZHVjZShlLGksbik7Zm9yKHZhciBvPTAsYT10Lmxlbmd0aDtvPGE7bysrKWk9ZS5jYWxsKG4saSx0W29dLG8sdCk7cmV0dXJuIGl9fWZ1bmN0aW9uIE0odCxlLGkpe2lmKHQmJmUpe2lmKHQuZmlsdGVyJiZ0LmZpbHRlcj09PWgpcmV0dXJuIHQuZmlsdGVyKGUsaSk7Zm9yKHZhciBuPVtdLG89MCxhPXQubGVuZ3RoO288YTtvKyspZS5jYWxsKGksdFtvXSxvLHQpJiZuLnB1c2godFtvXSk7cmV0dXJuIG59fWZ1bmN0aW9uIEkodCxlLGkpe2lmKHQmJmUpZm9yKHZhciBuPTAsbz10Lmxlbmd0aDtuPG87bisrKWlmKGUuY2FsbChpLHRbbl0sbix0KSlyZXR1cm4gdFtuXX1mdW5jdGlvbiBBKHQsZSl7dmFyIGk9by5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGkuY29uY2F0KG8uY2FsbChhcmd1bWVudHMpKSl9fWZ1bmN0aW9uIFQodCl7dmFyIGU9by5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseSh0aGlzLGUuY29uY2F0KG8uY2FsbChhcmd1bWVudHMpKSl9fWZ1bmN0aW9uIGsodCl7cmV0dXJuIltvYmplY3QgQXJyYXldIj09PXUuY2FsbCh0KX1mdW5jdGlvbiBPKHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0fWZ1bmN0aW9uIHoodCl7cmV0dXJuIltvYmplY3QgU3RyaW5nXSI9PT11LmNhbGwodCl9ZnVuY3Rpb24gUih0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4iZnVuY3Rpb24iPT1lfHwhIXQmJiJvYmplY3QiPT1lfWZ1bmN0aW9uIEIodCl7cmV0dXJuISFzW3UuY2FsbCh0KV19ZnVuY3Rpb24gVih0KXtyZXR1cm4hIWxbdS5jYWxsKHQpXX1mdW5jdGlvbiBHKHQpe3JldHVybiJvYmplY3QiPT10eXBlb2YgdCYmIm51bWJlciI9PXR5cGVvZiB0Lm5vZGVUeXBlJiYib2JqZWN0Ij09dHlwZW9mIHQub3duZXJEb2N1bWVudH1mdW5jdGlvbiBGKHQpe3JldHVybiB0IT10fWZ1bmN0aW9uIFcodCl7Zm9yKHZhciBlPTAsaT1hcmd1bWVudHMubGVuZ3RoO2U8aTtlKyspaWYobnVsbCE9YXJndW1lbnRzW2VdKXJldHVybiBhcmd1bWVudHNbZV19ZnVuY3Rpb24gSCh0LGUpe3JldHVybiBudWxsIT10P3Q6ZX1mdW5jdGlvbiBaKHQsZSxpKXtyZXR1cm4gbnVsbCE9dD90Om51bGwhPWU/ZTppfWZ1bmN0aW9uIFUoKXtyZXR1cm4gRnVuY3Rpb24uY2FsbC5hcHBseShvLGFyZ3VtZW50cyl9ZnVuY3Rpb24gWCh0KXtpZigibnVtYmVyIj09dHlwZW9mIHQpcmV0dXJuW3QsdCx0LHRdO3ZhciBlPXQubGVuZ3RoO3JldHVybiAyPT09ZT9bdFswXSx0WzFdLHRbMF0sdFsxXV06Mz09PWU/W3RbMF0sdFsxXSx0WzJdLHRbMV1dOnR9ZnVuY3Rpb24gWSh0LGUpe2lmKCF0KXRocm93IG5ldyBFcnJvcihlKX1mdW5jdGlvbiBqKHQpe3JldHVybiBudWxsPT10P251bGw6ImZ1bmN0aW9uIj09dHlwZW9mIHQudHJpbT90LnRyaW0oKTp0LnJlcGxhY2UoL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLCIiKX1hLmNyZWF0ZUNhbnZhcz1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKX07dmFyIHE9Il9fZWNfcHJpbWl0aXZlX18iO2Z1bmN0aW9uIEsodCl7dFtxXT0hMH1mdW5jdGlvbiAkKHQpe3JldHVybiB0W3FdfWZ1bmN0aW9uIEoodCl7dmFyIGk9ayh0KTt0aGlzLmRhdGE9e307dmFyIG49dGhpcztmdW5jdGlvbiBlKHQsZSl7aT9uLnNldCh0LGUpOm4uc2V0KGUsdCl9dCBpbnN0YW5jZW9mIEo/dC5lYWNoKGUpOnQmJkUodCxlKX1mdW5jdGlvbiBRKHQpe3JldHVybiBuZXcgSih0KX1mdW5jdGlvbiB0dCh0LGUpe2Zvcih2YXIgaT1uZXcgdC5jb25zdHJ1Y3Rvcih0Lmxlbmd0aCtlLmxlbmd0aCksbj0wO248dC5sZW5ndGg7bisrKWlbbl09dFtuXTt2YXIgbz10Lmxlbmd0aDtmb3Iobj0wO248ZS5sZW5ndGg7bisrKWlbbitvXT1lW25dO3JldHVybiBpfWZ1bmN0aW9uIGV0KCl7fUoucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpKLGdldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kYXRhLmhhc093blByb3BlcnR5KHQpP3RoaXMuZGF0YVt0XTpudWxsfSxzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5kYXRhW3RdPWV9LGVhY2g6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gdm9pZCAwIT09ZSYmKHQ9QSh0LGUpKSx0aGlzLmRhdGEpdGhpcy5kYXRhLmhhc093blByb3BlcnR5KGkpJiZ0KHRoaXMuZGF0YVtpXSxpKX0scmVtb3ZlS2V5OmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLmRhdGFbdF19fTt2YXIgaXQ9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoeyRvdmVycmlkZTpmLGNsb25lOkQsbWVyZ2U6bSxtZXJnZUFsbDpwLGV4dGVuZDpMLGRlZmF1bHRzOkMsY3JlYXRlQ2FudmFzOmcsZ2V0Q29udGV4dDp4LGluZGV4T2Y6Xyxpbmhlcml0czp3LG1peGluOmIsaXNBcnJheUxpa2U6UCxlYWNoOkUsbWFwOk4scmVkdWNlOlMsZmlsdGVyOk0sZmluZDpJLGJpbmQ6QSxjdXJyeTpULGlzQXJyYXk6ayxpc0Z1bmN0aW9uOk8saXNTdHJpbmc6eixpc09iamVjdDpSLGlzQnVpbHRJbk9iamVjdDpCLGlzVHlwZWRBcnJheTpWLGlzRG9tOkcsZXFOYU46RixyZXRyaWV2ZTpXLHJldHJpZXZlMjpILHJldHJpZXZlMzpaLHNsaWNlOlUsbm9ybWFsaXplQ3NzQXJyYXk6WCxhc3NlcnQ6WSx0cmltOmosc2V0QXNQcmltaXRpdmU6Syxpc1ByaW1pdGl2ZTokLGNyZWF0ZUhhc2hNYXA6USxjb25jYXRBcnJheTp0dCxub29wOmV0fSksbnQ9InVuZGVmaW5lZCI9PXR5cGVvZiBGbG9hdDMyQXJyYXk/QXJyYXk6RmxvYXQzMkFycmF5O2Z1bmN0aW9uIG90KHQsZSl7dmFyIGk9bmV3IG50KDIpO3JldHVybiBudWxsPT10JiYodD0wKSxudWxsPT1lJiYoZT0wKSxpWzBdPXQsaVsxXT1lLGl9ZnVuY3Rpb24gYXQodCxlKXtyZXR1cm4gdFswXT1lWzBdLHRbMV09ZVsxXSx0fWZ1bmN0aW9uIHJ0KHQpe3ZhciBlPW5ldyBudCgyKTtyZXR1cm4gZVswXT10WzBdLGVbMV09dFsxXSxlfWZ1bmN0aW9uIHN0KHQsZSxpKXtyZXR1cm4gdFswXT1lLHRbMV09aSx0fWZ1bmN0aW9uIGx0KHQsZSxpKXtyZXR1cm4gdFswXT1lWzBdK2lbMF0sdFsxXT1lWzFdK2lbMV0sdH1mdW5jdGlvbiB1dCh0LGUsaSxuKXtyZXR1cm4gdFswXT1lWzBdK2lbMF0qbix0WzFdPWVbMV0raVsxXSpuLHR9ZnVuY3Rpb24gaHQodCxlLGkpe3JldHVybiB0WzBdPWVbMF0taVswXSx0WzFdPWVbMV0taVsxXSx0fWZ1bmN0aW9uIGN0KHQpe3JldHVybiBNYXRoLnNxcnQoZnQodCkpfXZhciBkdD1jdDtmdW5jdGlvbiBmdCh0KXtyZXR1cm4gdFswXSp0WzBdK3RbMV0qdFsxXX12YXIgcHQ9ZnQ7ZnVuY3Rpb24gZ3QodCxlLGkpe3JldHVybiB0WzBdPWVbMF0qaSx0WzFdPWVbMV0qaSx0fWZ1bmN0aW9uIG10KHQsZSl7dmFyIGk9Y3QoZSk7cmV0dXJuIDA9PT1pPyh0WzBdPTAsdFsxXT0wKToodFswXT1lWzBdL2ksdFsxXT1lWzFdL2kpLHR9ZnVuY3Rpb24gdnQodCxlKXtyZXR1cm4gTWF0aC5zcXJ0KCh0WzBdLWVbMF0pKih0WzBdLWVbMF0pKyh0WzFdLWVbMV0pKih0WzFdLWVbMV0pKX12YXIgeXQ9dnQ7ZnVuY3Rpb24geHQodCxlKXtyZXR1cm4odFswXS1lWzBdKSoodFswXS1lWzBdKSsodFsxXS1lWzFdKSoodFsxXS1lWzFdKX12YXIgX3Q9eHQ7ZnVuY3Rpb24gd3QodCxlLGksbil7cmV0dXJuIHRbMF09ZVswXStuKihpWzBdLWVbMF0pLHRbMV09ZVsxXStuKihpWzFdLWVbMV0pLHR9ZnVuY3Rpb24gYnQodCxlLGkpe3ZhciBuPWVbMF0sbz1lWzFdO3JldHVybiB0WzBdPWlbMF0qbitpWzJdKm8raVs0XSx0WzFdPWlbMV0qbitpWzNdKm8raVs1XSx0fWZ1bmN0aW9uIFN0KHQsZSxpKXtyZXR1cm4gdFswXT1NYXRoLm1pbihlWzBdLGlbMF0pLHRbMV09TWF0aC5taW4oZVsxXSxpWzFdKSx0fWZ1bmN0aW9uIE10KHQsZSxpKXtyZXR1cm4gdFswXT1NYXRoLm1heChlWzBdLGlbMF0pLHRbMV09TWF0aC5tYXgoZVsxXSxpWzFdKSx0fXZhciBJdD0oT2JqZWN0LmZyZWV6ZXx8T2JqZWN0KSh7Y3JlYXRlOm90LGNvcHk6YXQsY2xvbmU6cnQsc2V0OnN0LGFkZDpsdCxzY2FsZUFuZEFkZDp1dCxzdWI6aHQsbGVuOmN0LGxlbmd0aDpkdCxsZW5TcXVhcmU6ZnQsbGVuZ3RoU3F1YXJlOnB0LG11bDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRbMF09ZVswXSppWzBdLHRbMV09ZVsxXSppWzFdLHR9LGRpdjpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRbMF09ZVswXS9pWzBdLHRbMV09ZVsxXS9pWzFdLHR9LGRvdDpmdW5jdGlvbih0LGUpe3JldHVybiB0WzBdKmVbMF0rdFsxXSplWzFdfSxzY2FsZTpndCxub3JtYWxpemU6bXQsZGlzdGFuY2U6dnQsZGlzdDp5dCxkaXN0YW5jZVNxdWFyZTp4dCxkaXN0U3F1YXJlOl90LG5lZ2F0ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0WzBdPS1lWzBdLHRbMV09LWVbMV0sdH0sbGVycDp3dCxhcHBseVRyYW5zZm9ybTpidCxtaW46U3QsbWF4Ok10fSk7ZnVuY3Rpb24gVHQoKXt0aGlzLm9uKCJtb3VzZWRvd24iLHRoaXMuX2RyYWdTdGFydCx0aGlzKSx0aGlzLm9uKCJtb3VzZW1vdmUiLHRoaXMuX2RyYWcsdGhpcyksdGhpcy5vbigibW91c2V1cCIsdGhpcy5fZHJhZ0VuZCx0aGlzKX1mdW5jdGlvbiBBdCh0LGUpe3JldHVybnt0YXJnZXQ6dCx0b3BUYXJnZXQ6ZSYmZS50b3BUYXJnZXR9fVR0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VHQsX2RyYWdTdGFydDpmdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldDtlJiZlLmRyYWdnYWJsZSYmKCh0aGlzLl9kcmFnZ2luZ1RhcmdldD1lKS5kcmFnZ2luZz0hMCx0aGlzLl94PXQub2Zmc2V0WCx0aGlzLl95PXQub2Zmc2V0WSx0aGlzLmRpc3BhdGNoVG9FbGVtZW50KEF0KGUsdCksImRyYWdzdGFydCIsdC5ldmVudCkpfSxfZHJhZzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kcmFnZ2luZ1RhcmdldDtpZihlKXt2YXIgaT10Lm9mZnNldFgsbj10Lm9mZnNldFksbz1pLXRoaXMuX3gsYT1uLXRoaXMuX3k7dGhpcy5feD1pLHRoaXMuX3k9bixlLmRyaWZ0KG8sYSx0KSx0aGlzLmRpc3BhdGNoVG9FbGVtZW50KEF0KGUsdCksImRyYWciLHQuZXZlbnQpO3ZhciByPXRoaXMuZmluZEhvdmVyKGksbixlKS50YXJnZXQscz10aGlzLl9kcm9wVGFyZ2V0O2UhPT0odGhpcy5fZHJvcFRhcmdldD1yKSYmKHMmJnIhPT1zJiZ0aGlzLmRpc3BhdGNoVG9FbGVtZW50KEF0KHMsdCksImRyYWdsZWF2ZSIsdC5ldmVudCksciYmciE9PXMmJnRoaXMuZGlzcGF0Y2hUb0VsZW1lbnQoQXQocix0KSwiZHJhZ2VudGVyIix0LmV2ZW50KSl9fSxfZHJhZ0VuZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kcmFnZ2luZ1RhcmdldDtlJiYoZS5kcmFnZ2luZz0hMSksdGhpcy5kaXNwYXRjaFRvRWxlbWVudChBdChlLHQpLCJkcmFnZW5kIix0LmV2ZW50KSx0aGlzLl9kcm9wVGFyZ2V0JiZ0aGlzLmRpc3BhdGNoVG9FbGVtZW50KEF0KHRoaXMuX2Ryb3BUYXJnZXQsdCksImRyb3AiLHQuZXZlbnQpLHRoaXMuX2RyYWdnaW5nVGFyZ2V0PW51bGwsdGhpcy5fZHJvcFRhcmdldD1udWxsfX07dmFyIER0PUFycmF5LnByb3RvdHlwZS5zbGljZSxDdD1mdW5jdGlvbih0KXt0aGlzLl8kaGFuZGxlcnM9e30sdGhpcy5fJGV2ZW50UHJvY2Vzc29yPXR9O2Z1bmN0aW9uIEx0KHQsZSxpLG4sbyxhKXt2YXIgcj10Ll8kaGFuZGxlcnM7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGkmJihvPW4sbj1pLGk9bnVsbCksIW58fCFlKXJldHVybiB0O2k9ZnVuY3Rpb24odCxlKXt2YXIgaT10Ll8kZXZlbnRQcm9jZXNzb3I7cmV0dXJuIG51bGwhPWUmJmkmJmkubm9ybWFsaXplUXVlcnkmJihlPWkubm9ybWFsaXplUXVlcnkoZSkpLGV9KHQsaSkscltlXXx8KHJbZV09W10pO2Zvcih2YXIgcz0wO3M8cltlXS5sZW5ndGg7cysrKWlmKHJbZV1bc10uaD09PW4pcmV0dXJuIHQ7dmFyIGw9e2g6bixvbmU6YSxxdWVyeTppLGN0eDpvfHx0LGNhbGxBdExhc3Q6bi56ckV2ZW50ZnVsQ2FsbEF0TGFzdH0sdT1yW2VdLmxlbmd0aC0xLGg9cltlXVt1XTtyZXR1cm4gaCYmaC5jYWxsQXRMYXN0P3JbZV0uc3BsaWNlKHUsMCxsKTpyW2VdLnB1c2gobCksdH1DdC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkN0LG9uZTpmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gTHQodGhpcyx0LGUsaSxuLCEwKX0sb246ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIEx0KHRoaXMsdCxlLGksbiwhMSl9LGlzU2lsZW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuXyRoYW5kbGVycztyZXR1cm4hZVt0XXx8IWVbdF0ubGVuZ3RofSxvZmY6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl8kaGFuZGxlcnM7aWYoIXQpcmV0dXJuIHRoaXMuXyRoYW5kbGVycz17fSx0aGlzO2lmKGUpe2lmKGlbdF0pe2Zvcih2YXIgbj1bXSxvPTAsYT1pW3RdLmxlbmd0aDtvPGE7bysrKWlbdF1bb10uaCE9PWUmJm4ucHVzaChpW3RdW29dKTtpW3RdPW59aVt0XSYmMD09PWlbdF0ubGVuZ3RoJiZkZWxldGUgaVt0XX1lbHNlIGRlbGV0ZSBpW3RdO3JldHVybiB0aGlzfSx0cmlnZ2VyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuXyRoYW5kbGVyc1t0XSxpPXRoaXMuXyRldmVudFByb2Nlc3NvcjtpZihlKXt2YXIgbj1hcmd1bWVudHMsbz1uLmxlbmd0aDszPG8mJihuPUR0LmNhbGwobiwxKSk7Zm9yKHZhciBhPWUubGVuZ3RoLHI9MDtyPGE7KXt2YXIgcz1lW3JdO2lmKGkmJmkuZmlsdGVyJiZudWxsIT1zLnF1ZXJ5JiYhaS5maWx0ZXIodCxzLnF1ZXJ5KSlyKys7ZWxzZXtzd2l0Y2gobyl7Y2FzZSAxOnMuaC5jYWxsKHMuY3R4KTticmVhaztjYXNlIDI6cy5oLmNhbGwocy5jdHgsblsxXSk7YnJlYWs7Y2FzZSAzOnMuaC5jYWxsKHMuY3R4LG5bMV0sblsyXSk7YnJlYWs7ZGVmYXVsdDpzLmguYXBwbHkocy5jdHgsbil9cy5vbmU/KGUuc3BsaWNlKHIsMSksYS0tKTpyKyt9fX1yZXR1cm4gaSYmaS5hZnRlclRyaWdnZXImJmkuYWZ0ZXJUcmlnZ2VyKHQpLHRoaXN9LHRyaWdnZXJXaXRoQ29udGV4dDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl8kaGFuZGxlcnNbdF0saT10aGlzLl8kZXZlbnRQcm9jZXNzb3I7aWYoZSl7dmFyIG49YXJndW1lbnRzLG89bi5sZW5ndGg7NDxvJiYobj1EdC5jYWxsKG4sMSxuLmxlbmd0aC0xKSk7Zm9yKHZhciBhPW5bbi5sZW5ndGgtMV0scj1lLmxlbmd0aCxzPTA7czxyOyl7dmFyIGw9ZVtzXTtpZihpJiZpLmZpbHRlciYmbnVsbCE9bC5xdWVyeSYmIWkuZmlsdGVyKHQsbC5xdWVyeSkpcysrO2Vsc2V7c3dpdGNoKG8pe2Nhc2UgMTpsLmguY2FsbChhKTticmVhaztjYXNlIDI6bC5oLmNhbGwoYSxuWzFdKTticmVhaztjYXNlIDM6bC5oLmNhbGwoYSxuWzFdLG5bMl0pO2JyZWFrO2RlZmF1bHQ6bC5oLmFwcGx5KGEsbil9bC5vbmU/KGUuc3BsaWNlKHMsMSksci0tKTpzKyt9fX1yZXR1cm4gaSYmaS5hZnRlclRyaWdnZXImJmkuYWZ0ZXJUcmlnZ2VyKHQpLHRoaXN9fTt2YXIga3Q9TWF0aC5sb2coMik7ZnVuY3Rpb24gUHQodCxlLGksbixvLGEpe3ZhciByPW4rIi0iK28scz10Lmxlbmd0aDtpZihhLmhhc093blByb3BlcnR5KHIpKXJldHVybiBhW3JdO2lmKDE9PT1lKXt2YXIgbD1NYXRoLnJvdW5kKE1hdGgubG9nKCgxPDxzKS0xJn5vKS9rdCk7cmV0dXJuIHRbaV1bbF19Zm9yKHZhciB1PW58MTw8aSxoPWkrMTtuJjE8PGg7KWgrKztmb3IodmFyIGM9MCxkPTAsZj0wO2Q8cztkKyspe3ZhciBwPTE8PGQ7cCZvfHwoYys9KGYlMj8tMToxKSp0W2ldW2RdKlB0KHQsZS0xLGgsdSxvfHAsYSksZisrKX1yZXR1cm4gYVtyXT1jfXZhciBOdD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmISF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcixPdD0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sRXQ9Il9fX3pyRVZFTlRTQVZFRCIsenQ9W107ZnVuY3Rpb24gUnQodCxlLGksbil7cmV0dXJuIGk9aXx8e30sbnx8IXYuY2FudmFzU3VwcG9ydGVkP0J0KHQsZSxpKTp2LmJyb3dzZXIuZmlyZWZveCYmbnVsbCE9ZS5sYXllclgmJmUubGF5ZXJYIT09ZS5vZmZzZXRYPyhpLnpyWD1lLmxheWVyWCxpLnpyWT1lLmxheWVyWSk6bnVsbCE9ZS5vZmZzZXRYPyhpLnpyWD1lLm9mZnNldFgsaS56clk9ZS5vZmZzZXRZKTpCdCh0LGUsaSksaX1mdW5jdGlvbiBCdCh0LGUsaSl7aWYodC5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJnYuZG9tU3VwcG9ydGVkKXt2YXIgbj1lLmNsaWVudFgsbz1lLmNsaWVudFk7aWYoIkNBTlZBUyI9PT10Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkpe3ZhciBhPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIGkuenJYPW4tYS5sZWZ0LHZvaWQoaS56clk9by1hLnRvcCl9dmFyIHI9dFtFdF18fCh0W0V0XT17fSkscz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT1lLnRyYW5zZm9ybWVyLG49ZS5zcmNDb29yZHMsbz0hMCxhPVtdLHI9W10scz0wO3M8NDtzKyspe3ZhciBsPXRbc10uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdT0yKnMsaD1sLmxlZnQsYz1sLnRvcDthLnB1c2goaCxjKSxvJj1uJiZoPT09blt1XSYmYz09PW5bMSt1XSxyLnB1c2godFtzXS5vZmZzZXRMZWZ0LHRbc10ub2Zmc2V0VG9wKX1yZXR1cm4gbz9pOihlLnNyY0Nvb3Jkcz1hLGUudHJhbnNmb3JtZXI9ZnVuY3Rpb24odCxlKXt2YXIgaT1bW3RbMF0sdFsxXSwxLDAsMCwwLC1lWzBdKnRbMF0sLWVbMF0qdFsxXV0sWzAsMCwwLHRbMF0sdFsxXSwxLC1lWzFdKnRbMF0sLWVbMV0qdFsxXV0sW3RbMl0sdFszXSwxLDAsMCwwLC1lWzJdKnRbMl0sLWVbMl0qdFszXV0sWzAsMCwwLHRbMl0sdFszXSwxLC1lWzNdKnRbMl0sLWVbM10qdFszXV0sW3RbNF0sdFs1XSwxLDAsMCwwLC1lWzRdKnRbNF0sLWVbNF0qdFs1XV0sWzAsMCwwLHRbNF0sdFs1XSwxLC1lWzVdKnRbNF0sLWVbNV0qdFs1XV0sW3RbNl0sdFs3XSwxLDAsMCwwLC1lWzZdKnRbNl0sLWVbNl0qdFs3XV0sWzAsMCwwLHRbNl0sdFs3XSwxLC1lWzddKnRbNl0sLWVbN10qdFs3XV1dLG49e30sbz1QdChpLDgsMCwwLDAsbik7aWYoMCE9PW8pe2Zvcih2YXIgYT1bXSxyPTA7cjw4O3IrKylmb3IodmFyIHM9MDtzPDg7cysrKW51bGw9PWFbc10mJihhW3NdPTApLGFbc10rPSgocitzKSUyPy0xOjEpKlB0KGksNywwPT09cj8xOjAsMTw8ciwxPDxzLG4pL28qZVtyXTtyZXR1cm4gZnVuY3Rpb24odCxlLGkpe3ZhciBuPWUqYVs2XStpKmFbN10rMTt0WzBdPShlKmFbMF0raSphWzFdK2FbMl0pL24sdFsxXT0oZSphWzNdK2kqYVs0XSthWzVdKS9ufX19KGEscikpfShmdW5jdGlvbih0LGUpe3ZhciBpPWUubWFya2VycztpZihpKXJldHVybiBpO2k9ZS5tYXJrZXJzPVtdO2Zvcih2YXIgbj1bImxlZnQiLCJyaWdodCJdLG89WyJ0b3AiLCJib3R0b20iXSxhPTA7YTw0O2ErKyl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iikscz1yLnN0eWxlLGw9YSUyLHU9KGE+PjEpJTI7cy5jc3NUZXh0PVsicG9zaXRpb246YWJzb2x1dGUiLCJ2aXNpYmlsaXR5OiBoaWRkZW4iLCJwYWRkaW5nOiAwIiwibWFyZ2luOiAwIiwiYm9yZGVyLXdpZHRoOiAwIiwid2lkdGg6MCIsImhlaWdodDowIixuW2xdKyI6MCIsb1t1XSsiOjAiLG5bMS1sXSsiOmF1dG8iLG9bMS11XSsiOmF1dG8iLCIiXS5qb2luKCIhaW1wb3J0YW50OyIpLHQuYXBwZW5kQ2hpbGQociksaS5wdXNoKHIpfXJldHVybiBpfSh0LHIpLHIpO2lmKHMpcmV0dXJuIHMoenQsbixvKSxpLnpyWD16dFswXSx2b2lkKGkuenJZPXp0WzFdKX1pLnpyWD1pLnpyWT0wfWZ1bmN0aW9uIFZ0KHQpe3JldHVybiB0fHx3aW5kb3cuZXZlbnR9ZnVuY3Rpb24gR3QodCxlLGkpe2lmKG51bGwhPShlPVZ0KGUpKS56clgpcmV0dXJuIGU7dmFyIG49ZS50eXBlO2lmKG4mJjA8PW4uaW5kZXhPZigidG91Y2giKSl7dmFyIG89InRvdWNoZW5kIiE9PW4/ZS50YXJnZXRUb3VjaGVzWzBdOmUuY2hhbmdlZFRvdWNoZXNbMF07byYmUnQodCxvLGUsaSl9ZWxzZSBSdCh0LGUsZSxpKSxlLnpyRGVsdGE9ZS53aGVlbERlbHRhP2Uud2hlZWxEZWx0YS8xMjA6LShlLmRldGFpbHx8MCkvMzt2YXIgYT1lLmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS53aGljaCYmdm9pZCAwIT09YSYmT3QudGVzdChlLnR5cGUpJiYoZS53aGljaD0xJmE/MToyJmE/Mzo0JmE/MjowKSxlfWZ1bmN0aW9uIEZ0KHQsZSxpLG4pe050P3QuYWRkRXZlbnRMaXN0ZW5lcihlLGksbik6dC5hdHRhY2hFdmVudCgib24iK2UsaSl9dmFyIFd0PU50P2Z1bmN0aW9uKHQpe3QucHJldmVudERlZmF1bHQoKSx0LnN0b3BQcm9wYWdhdGlvbigpLHQuY2FuY2VsQnViYmxlPSEwfTpmdW5jdGlvbih0KXt0LnJldHVyblZhbHVlPSExLHQuY2FuY2VsQnViYmxlPSEwfTtmdW5jdGlvbiBIdCh0KXtyZXR1cm4gMj09PXQud2hpY2h8fDM9PT10LndoaWNofWZ1bmN0aW9uIFp0KCl7dGhpcy5fdHJhY2s9W119ZnVuY3Rpb24gVXQodCl7dmFyIGU9dFsxXVswXS10WzBdWzBdLGk9dFsxXVsxXS10WzBdWzFdO3JldHVybiBNYXRoLnNxcnQoZSplK2kqaSl9WnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpadCxyZWNvZ25pemU6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLl9kb1RyYWNrKHQsZSxpKSx0aGlzLl9yZWNvZ25pemUodCl9LGNsZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYWNrLmxlbmd0aD0wLHRoaXN9LF9kb1RyYWNrOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LnRvdWNoZXM7aWYobil7Zm9yKHZhciBvPXtwb2ludHM6W10sdG91Y2hlczpbXSx0YXJnZXQ6ZSxldmVudDp0fSxhPTAscj1uLmxlbmd0aDthPHI7YSsrKXt2YXIgcz1uW2FdLGw9UnQoaSxzLHt9KTtvLnBvaW50cy5wdXNoKFtsLnpyWCxsLnpyWV0pLG8udG91Y2hlcy5wdXNoKHMpfXRoaXMuX3RyYWNrLnB1c2gobyl9fSxfcmVjb2duaXplOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiBYdClpZihYdC5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIGk9WHRbZV0odGhpcy5fdHJhY2ssdCk7aWYoaSlyZXR1cm4gaX19fTt2YXIgWHQ9e3BpbmNoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5sZW5ndGg7aWYoaSl7dmFyIG49KHRbaS0xXXx8e30pLnBvaW50cyxvPSh0W2ktMl18fHt9KS5wb2ludHN8fG47aWYobyYmMTxvLmxlbmd0aCYmbiYmMTxuLmxlbmd0aCl7dmFyIGE9VXQobikvVXQobyk7aXNGaW5pdGUoYSl8fChhPTEpLGUucGluY2hTY2FsZT1hO3ZhciByPWZ1bmN0aW9uKHQpe3JldHVyblsodFswXVswXSt0WzFdWzBdKS8yLCh0WzBdWzFdK3RbMV1bMV0pLzJdfShuKTtyZXR1cm4gZS5waW5jaFg9clswXSxlLnBpbmNoWT1yWzFdLHt0eXBlOiJwaW5jaCIsdGFyZ2V0OnRbMF0udGFyZ2V0LGV2ZW50OmV9fX19fSxZdD0ic2lsZW50IjtmdW5jdGlvbiBqdCgpe1d0KHRoaXMuZXZlbnQpfWZ1bmN0aW9uIHF0KCl7fXF0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBLdCh0LGUsaSxuKXtDdC5jYWxsKHRoaXMpLHRoaXMuc3RvcmFnZT10LHRoaXMucGFpbnRlcj1lLHRoaXMucGFpbnRlclJvb3Q9bixpPWl8fG5ldyBxdCx0aGlzLnByb3h5PW51bGwsdGhpcy5faG92ZXJlZD17fSx0aGlzLl9sYXN0VG91Y2hNb21lbnQsdGhpcy5fbGFzdFgsdGhpcy5fbGFzdFksdGhpcy5fZ2VzdHVyZU1ncixUdC5jYWxsKHRoaXMpLHRoaXMuc2V0SGFuZGxlclByb3h5KGkpfXZhciAkdD1bImNsaWNrIiwiZGJsY2xpY2siLCJtb3VzZXdoZWVsIiwibW91c2VvdXQiLCJtb3VzZXVwIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwiY29udGV4dG1lbnUiXTtmdW5jdGlvbiBKdCh0LGUsaSl7aWYodFt0LnJlY3RIb3Zlcj8icmVjdENvbnRhaW4iOiJjb250YWluIl0oZSxpKSl7Zm9yKHZhciBuLG89dDtvOyl7aWYoby5jbGlwUGF0aCYmIW8uY2xpcFBhdGguY29udGFpbihlLGkpKXJldHVybiExO28uc2lsZW50JiYobj0hMCksbz1vLnBhcmVudH1yZXR1cm4hbnx8WXR9cmV0dXJuITF9ZnVuY3Rpb24gUXQodCxlLGkpe3ZhciBuPXQucGFpbnRlcjtyZXR1cm4gZTwwfHxlPm4uZ2V0V2lkdGgoKXx8aTwwfHxpPm4uZ2V0SGVpZ2h0KCl9S3QucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpLdCxzZXRIYW5kbGVyUHJveHk6ZnVuY3Rpb24oZSl7dGhpcy5wcm94eSYmdGhpcy5wcm94eS5kaXNwb3NlKCksZSYmKEUoJHQsZnVuY3Rpb24odCl7ZS5vbiYmZS5vbih0LHRoaXNbdF0sdGhpcyl9LHRoaXMpLGUuaGFuZGxlcj10aGlzKSx0aGlzLnByb3h5PWV9LG1vdXNlbW92ZTpmdW5jdGlvbih0KXt2YXIgZT10LnpyWCxpPXQuenJZLG49UXQodGhpcyxlLGkpLG89dGhpcy5faG92ZXJlZCxhPW8udGFyZ2V0O2EmJiFhLl9fenImJihhPShvPXRoaXMuZmluZEhvdmVyKG8ueCxvLnkpKS50YXJnZXQpO3ZhciByPXRoaXMuX2hvdmVyZWQ9bj97eDplLHk6aX06dGhpcy5maW5kSG92ZXIoZSxpKSxzPXIudGFyZ2V0LGw9dGhpcy5wcm94eTtsLnNldEN1cnNvciYmbC5zZXRDdXJzb3Iocz9zLmN1cnNvcjoiZGVmYXVsdCIpLGEmJnMhPT1hJiZ0aGlzLmRpc3BhdGNoVG9FbGVtZW50KG8sIm1vdXNlb3V0Iix0KSx0aGlzLmRpc3BhdGNoVG9FbGVtZW50KHIsIm1vdXNlbW92ZSIsdCkscyYmcyE9PWEmJnRoaXMuZGlzcGF0Y2hUb0VsZW1lbnQociwibW91c2VvdmVyIix0KX0sbW91c2VvdXQ6ZnVuY3Rpb24odCl7dmFyIGU9dC56ckV2ZW50Q29udHJvbCxpPXQuenJJc1RvTG9jYWxET007Im9ubHlfZ2xvYmFsb3V0IiE9PWUmJnRoaXMuZGlzcGF0Y2hUb0VsZW1lbnQodGhpcy5faG92ZXJlZCwibW91c2VvdXQiLHQpLCJub19nbG9iYWxvdXQiIT09ZSYmKGl8fHRoaXMudHJpZ2dlcigiZ2xvYmFsb3V0Iix7dHlwZToiZ2xvYmFsb3V0IixldmVudDp0fSkpfSxyZXNpemU6ZnVuY3Rpb24odCl7dGhpcy5faG92ZXJlZD17fX0sZGlzcGF0Y2g6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzW3RdO2kmJmkuY2FsbCh0aGlzLGUpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5wcm94eS5kaXNwb3NlKCksdGhpcy5zdG9yYWdlPXRoaXMucHJveHk9dGhpcy5wYWludGVyPW51bGx9LHNldEN1cnNvclN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucHJveHk7ZS5zZXRDdXJzb3ImJmUuc2V0Q3Vyc29yKHQpfSxkaXNwYXRjaFRvRWxlbWVudDpmdW5jdGlvbih0LGUsaSl7dmFyIG49KHQ9dHx8e30pLnRhcmdldDtpZighbnx8IW4uc2lsZW50KXtmb3IodmFyIG89Im9uIitlLGE9ZnVuY3Rpb24odCxlLGkpe3JldHVybnt0eXBlOnQsZXZlbnQ6aSx0YXJnZXQ6ZS50YXJnZXQsdG9wVGFyZ2V0OmUudG9wVGFyZ2V0LGNhbmNlbEJ1YmJsZTohMSxvZmZzZXRYOmkuenJYLG9mZnNldFk6aS56clksZ2VzdHVyZUV2ZW50OmkuZ2VzdHVyZUV2ZW50LHBpbmNoWDppLnBpbmNoWCxwaW5jaFk6aS5waW5jaFkscGluY2hTY2FsZTppLnBpbmNoU2NhbGUsd2hlZWxEZWx0YTppLnpyRGVsdGEsenJCeVRvdWNoOmkuenJCeVRvdWNoLHdoaWNoOmkud2hpY2gsc3RvcDpqdH19KGUsdCxpKTtuJiYobltvXSYmKGEuY2FuY2VsQnViYmxlPW5bb10uY2FsbChuLGEpKSxuLnRyaWdnZXIoZSxhKSxuPW4ucGFyZW50LCFhLmNhbmNlbEJ1YmJsZSk7KTthLmNhbmNlbEJ1YmJsZXx8KHRoaXMudHJpZ2dlcihlLGEpLHRoaXMucGFpbnRlciYmdGhpcy5wYWludGVyLmVhY2hPdGhlckxheWVyKGZ1bmN0aW9uKHQpeyJmdW5jdGlvbiI9PXR5cGVvZiB0W29dJiZ0W29dLmNhbGwodCxhKSx0LnRyaWdnZXImJnQudHJpZ2dlcihlLGEpfSkpfX0sZmluZEhvdmVyOmZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49dGhpcy5zdG9yYWdlLmdldERpc3BsYXlMaXN0KCksbz17eDp0LHk6ZX0sYT1uLmxlbmd0aC0xOzA8PWE7YS0tKXt2YXIgcjtpZihuW2FdIT09aSYmIW5bYV0uaWdub3JlJiYocj1KdChuW2FdLHQsZSkpJiYoby50b3BUYXJnZXR8fChvLnRvcFRhcmdldD1uW2FdKSxyIT09WXQpKXtvLnRhcmdldD1uW2FdO2JyZWFrfX1yZXR1cm4gb30scHJvY2Vzc0dlc3R1cmU6ZnVuY3Rpb24odCxlKXt0aGlzLl9nZXN0dXJlTWdyfHwodGhpcy5fZ2VzdHVyZU1ncj1uZXcgWnQpO3ZhciBpPXRoaXMuX2dlc3R1cmVNZ3I7InN0YXJ0Ij09PWUmJmkuY2xlYXIoKTt2YXIgbj1pLnJlY29nbml6ZSh0LHRoaXMuZmluZEhvdmVyKHQuenJYLHQuenJZLG51bGwpLnRhcmdldCx0aGlzLnByb3h5LmRvbSk7aWYoImVuZCI9PT1lJiZpLmNsZWFyKCksbil7dmFyIG89bi50eXBlO3QuZ2VzdHVyZUV2ZW50PW8sdGhpcy5kaXNwYXRjaFRvRWxlbWVudCh7dGFyZ2V0Om4udGFyZ2V0fSxvLG4uZXZlbnQpfX19LEUoWyJjbGljayIsIm1vdXNlZG93biIsIm1vdXNldXAiLCJtb3VzZXdoZWVsIiwiZGJsY2xpY2siLCJjb250ZXh0bWVudSJdLGZ1bmN0aW9uKHIpe0t0LnByb3RvdHlwZVtyXT1mdW5jdGlvbih0KXt2YXIgZSxpLG49dC56clgsbz10LnpyWSxhPVF0KHRoaXMsbixvKTtpZigibW91c2V1cCI9PT1yJiZhfHwoaT0oZT10aGlzLmZpbmRIb3ZlcihuLG8pKS50YXJnZXQpLCJtb3VzZWRvd24iPT09cil0aGlzLl9kb3duRWw9aSx0aGlzLl9kb3duUG9pbnQ9W3QuenJYLHQuenJZXSx0aGlzLl91cEVsPWk7ZWxzZSBpZigibW91c2V1cCI9PT1yKXRoaXMuX3VwRWw9aTtlbHNlIGlmKCJjbGljayI9PT1yKXtpZih0aGlzLl9kb3duRWwhPT10aGlzLl91cEVsfHwhdGhpcy5fZG93blBvaW50fHw0PHl0KHRoaXMuX2Rvd25Qb2ludCxbdC56clgsdC56clldKSlyZXR1cm47dGhpcy5fZG93blBvaW50PW51bGx9dGhpcy5kaXNwYXRjaFRvRWxlbWVudChlLHIsdCl9fSksYihLdCxDdCksYihLdCxUdCk7dmFyIHRlPSJ1bmRlZmluZWQiPT10eXBlb2YgRmxvYXQzMkFycmF5P0FycmF5OkZsb2F0MzJBcnJheTtmdW5jdGlvbiBlZSgpe3ZhciB0PW5ldyB0ZSg2KTtyZXR1cm4gaWUodCksdH1mdW5jdGlvbiBpZSh0KXtyZXR1cm4gdFswXT0xLHRbMV09MCx0WzJdPTAsdFszXT0xLHRbNF09MCx0WzVdPTAsdH1mdW5jdGlvbiBuZSh0LGUpe3JldHVybiB0WzBdPWVbMF0sdFsxXT1lWzFdLHRbMl09ZVsyXSx0WzNdPWVbM10sdFs0XT1lWzRdLHRbNV09ZVs1XSx0fWZ1bmN0aW9uIG9lKHQsZSxpKXt2YXIgbj1lWzBdKmlbMF0rZVsyXSppWzFdLG89ZVsxXSppWzBdK2VbM10qaVsxXSxhPWVbMF0qaVsyXStlWzJdKmlbM10scj1lWzFdKmlbMl0rZVszXSppWzNdLHM9ZVswXSppWzRdK2VbMl0qaVs1XStlWzRdLGw9ZVsxXSppWzRdK2VbM10qaVs1XStlWzVdO3JldHVybiB0WzBdPW4sdFsxXT1vLHRbMl09YSx0WzNdPXIsdFs0XT1zLHRbNV09bCx0fWZ1bmN0aW9uIGFlKHQsZSxpKXtyZXR1cm4gdFswXT1lWzBdLHRbMV09ZVsxXSx0WzJdPWVbMl0sdFszXT1lWzNdLHRbNF09ZVs0XStpWzBdLHRbNV09ZVs1XStpWzFdLHR9ZnVuY3Rpb24gcmUodCxlLGkpe3ZhciBuPWVbMF0sbz1lWzJdLGE9ZVs0XSxyPWVbMV0scz1lWzNdLGw9ZVs1XSx1PU1hdGguc2luKGkpLGg9TWF0aC5jb3MoaSk7cmV0dXJuIHRbMF09bipoK3IqdSx0WzFdPS1uKnUrcipoLHRbMl09bypoK3MqdSx0WzNdPS1vKnUraCpzLHRbNF09aCphK3UqbCx0WzVdPWgqbC11KmEsdH1mdW5jdGlvbiBzZSh0LGUsaSl7dmFyIG49aVswXSxvPWlbMV07cmV0dXJuIHRbMF09ZVswXSpuLHRbMV09ZVsxXSpvLHRbMl09ZVsyXSpuLHRbM109ZVszXSpvLHRbNF09ZVs0XSpuLHRbNV09ZVs1XSpvLHR9ZnVuY3Rpb24gbGUodCxlKXt2YXIgaT1lWzBdLG49ZVsyXSxvPWVbNF0sYT1lWzFdLHI9ZVszXSxzPWVbNV0sbD1pKnItYSpuO3JldHVybiBsPyhsPTEvbCx0WzBdPXIqbCx0WzFdPS1hKmwsdFsyXT0tbipsLHRbM109aSpsLHRbNF09KG4qcy1yKm8pKmwsdFs1XT0oYSpvLWkqcykqbCx0KTpudWxsfWZ1bmN0aW9uIHVlKHQpe3ZhciBlPWVlKCk7cmV0dXJuIG5lKGUsdCksZX12YXIgaGU9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoe2NyZWF0ZTplZSxpZGVudGl0eTppZSxjb3B5Om5lLG11bDpvZSx0cmFuc2xhdGU6YWUscm90YXRlOnJlLHNjYWxlOnNlLGludmVydDpsZSxjbG9uZTp1ZX0pLGNlPWllO2Z1bmN0aW9uIGRlKHQpe3JldHVybiA1ZS01PHR8fHQ8LTVlLTV9dmFyIGZlPWZ1bmN0aW9uKHQpeyh0PXR8fHt9KS5wb3NpdGlvbnx8KHRoaXMucG9zaXRpb249WzAsMF0pLG51bGw9PXQucm90YXRpb24mJih0aGlzLnJvdGF0aW9uPTApLHQuc2NhbGV8fCh0aGlzLnNjYWxlPVsxLDFdKSx0aGlzLm9yaWdpbj10aGlzLm9yaWdpbnx8bnVsbH0scGU9ZmUucHJvdG90eXBlO3BlLnRyYW5zZm9ybT1udWxsLHBlLm5lZWRMb2NhbFRyYW5zZm9ybT1mdW5jdGlvbigpe3JldHVybiBkZSh0aGlzLnJvdGF0aW9uKXx8ZGUodGhpcy5wb3NpdGlvblswXSl8fGRlKHRoaXMucG9zaXRpb25bMV0pfHxkZSh0aGlzLnNjYWxlWzBdLTEpfHxkZSh0aGlzLnNjYWxlWzFdLTEpfTt2YXIgZ2U9W107cGUudXBkYXRlVHJhbnNmb3JtPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10JiZ0LnRyYW5zZm9ybSxpPXRoaXMubmVlZExvY2FsVHJhbnNmb3JtKCksbj10aGlzLnRyYW5zZm9ybTtpZihpfHxlKXtuPW58fGVlKCksaT90aGlzLmdldExvY2FsVHJhbnNmb3JtKG4pOmNlKG4pLGUmJihpP29lKG4sdC50cmFuc2Zvcm0sbik6bmUobix0LnRyYW5zZm9ybSkpLHRoaXMudHJhbnNmb3JtPW47dmFyIG89dGhpcy5nbG9iYWxTY2FsZVJhdGlvO2lmKG51bGwhPW8mJjEhPT1vKXt0aGlzLmdldEdsb2JhbFNjYWxlKGdlKTt2YXIgYT1nZVswXTwwPy0xOjEscj1nZVsxXTwwPy0xOjEscz0oKGdlWzBdLWEpKm8rYSkvZ2VbMF18fDAsbD0oKGdlWzFdLXIpKm8rcikvZ2VbMV18fDA7blswXSo9cyxuWzFdKj1zLG5bMl0qPWwsblszXSo9bH10aGlzLmludlRyYW5zZm9ybT10aGlzLmludlRyYW5zZm9ybXx8ZWUoKSxsZSh0aGlzLmludlRyYW5zZm9ybSxuKX1lbHNlIG4mJmNlKG4pfSxwZS5nZXRMb2NhbFRyYW5zZm9ybT1mdW5jdGlvbih0KXtyZXR1cm4gZmUuZ2V0TG9jYWxUcmFuc2Zvcm0odGhpcyx0KX0scGUuc2V0VHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHJhbnNmb3JtLGk9dC5kcHJ8fDE7ZT90LnNldFRyYW5zZm9ybShpKmVbMF0saSplWzFdLGkqZVsyXSxpKmVbM10saSplWzRdLGkqZVs1XSk6dC5zZXRUcmFuc2Zvcm0oaSwwLDAsaSwwLDApfSxwZS5yZXN0b3JlVHJhbnNmb3JtPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZHByfHwxO3Quc2V0VHJhbnNmb3JtKGUsMCwwLGUsMCwwKX07dmFyIG1lPVtdLHZlPWVlKCk7cGUuc2V0TG9jYWxUcmFuc2Zvcm09ZnVuY3Rpb24odCl7aWYodCl7dmFyIGU9dFswXSp0WzBdK3RbMV0qdFsxXSxpPXRbMl0qdFsyXSt0WzNdKnRbM10sbj10aGlzLnBvc2l0aW9uLG89dGhpcy5zY2FsZTtkZShlLTEpJiYoZT1NYXRoLnNxcnQoZSkpLGRlKGktMSkmJihpPU1hdGguc3FydChpKSksdFswXTwwJiYoZT0tZSksdFszXTwwJiYoaT0taSksblswXT10WzRdLG5bMV09dFs1XSxvWzBdPWUsb1sxXT1pLHRoaXMucm90YXRpb249TWF0aC5hdGFuMigtdFsxXS9pLHRbMF0vZSl9fSxwZS5kZWNvbXBvc2VUcmFuc2Zvcm09ZnVuY3Rpb24oKXtpZih0aGlzLnRyYW5zZm9ybSl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLnRyYW5zZm9ybTt0JiZ0LnRyYW5zZm9ybSYmKG9lKG1lLHQuaW52VHJhbnNmb3JtLGUpLGU9bWUpO3ZhciBpPXRoaXMub3JpZ2luO2kmJihpWzBdfHxpWzFdKSYmKHZlWzRdPWlbMF0sdmVbNV09aVsxXSxvZShtZSxlLHZlKSxtZVs0XS09aVswXSxtZVs1XS09aVsxXSxlPW1lKSx0aGlzLnNldExvY2FsVHJhbnNmb3JtKGUpfX0scGUuZ2V0R2xvYmFsU2NhbGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50cmFuc2Zvcm07cmV0dXJuIHQ9dHx8W10sZT8odFswXT1NYXRoLnNxcnQoZVswXSplWzBdK2VbMV0qZVsxXSksdFsxXT1NYXRoLnNxcnQoZVsyXSplWzJdK2VbM10qZVszXSksZVswXTwwJiYodFswXT0tdFswXSksZVszXTwwJiYodFsxXT0tdFsxXSkpOih0WzBdPTEsdFsxXT0xKSx0fSxwZS50cmFuc2Zvcm1Db29yZFRvTG9jYWw9ZnVuY3Rpb24odCxlKXt2YXIgaT1bdCxlXSxuPXRoaXMuaW52VHJhbnNmb3JtO3JldHVybiBuJiZidChpLGksbiksaX0scGUudHJhbnNmb3JtQ29vcmRUb0dsb2JhbD1mdW5jdGlvbih0LGUpe3ZhciBpPVt0LGVdLG49dGhpcy50cmFuc2Zvcm07cmV0dXJuIG4mJmJ0KGksaSxuKSxpfSxmZS5nZXRMb2NhbFRyYW5zZm9ybT1mdW5jdGlvbih0LGUpe2NlKGU9ZXx8W10pO3ZhciBpPXQub3JpZ2luLG49dC5zY2FsZXx8WzEsMV0sbz10LnJvdGF0aW9ufHwwLGE9dC5wb3NpdGlvbnx8WzAsMF07cmV0dXJuIGkmJihlWzRdLT1pWzBdLGVbNV0tPWlbMV0pLHNlKGUsZSxuKSxvJiZyZShlLGUsbyksaSYmKGVbNF0rPWlbMF0sZVs1XSs9aVsxXSksZVs0XSs9YVswXSxlWzVdKz1hWzFdLGV9O3ZhciB5ZT17bGluZWFyOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxxdWFkcmF0aWNJbjpmdW5jdGlvbih0KXtyZXR1cm4gdCp0fSxxdWFkcmF0aWNPdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqKDItdCl9LHF1YWRyYXRpY0luT3V0OmZ1bmN0aW9uKHQpe3JldHVybih0Kj0yKTwxPy41KnQqdDotLjUqKC0tdCoodC0yKS0xKX0sY3ViaWNJbjpmdW5jdGlvbih0KXtyZXR1cm4gdCp0KnR9LGN1YmljT3V0OmZ1bmN0aW9uKHQpe3JldHVybi0tdCp0KnQrMX0sY3ViaWNJbk91dDpmdW5jdGlvbih0KXtyZXR1cm4odCo9Mik8MT8uNSp0KnQqdDouNSooKHQtPTIpKnQqdCsyKX0scXVhcnRpY0luOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdCp0fSxxdWFydGljT3V0OmZ1bmN0aW9uKHQpe3JldHVybiAxLSAtLXQqdCp0KnR9LHF1YXJ0aWNJbk91dDpmdW5jdGlvbih0KXtyZXR1cm4odCo9Mik8MT8uNSp0KnQqdCp0Oi0uNSooKHQtPTIpKnQqdCp0LTIpfSxxdWludGljSW46ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCp0KnQqdH0scXVpbnRpY091dDpmdW5jdGlvbih0KXtyZXR1cm4tLXQqdCp0KnQqdCsxfSxxdWludGljSW5PdXQ6ZnVuY3Rpb24odCl7cmV0dXJuKHQqPTIpPDE/LjUqdCp0KnQqdCp0Oi41KigodC09MikqdCp0KnQqdCsyKX0sc2ludXNvaWRhbEluOmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGguY29zKHQqTWF0aC5QSS8yKX0sc2ludXNvaWRhbE91dDpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zaW4odCpNYXRoLlBJLzIpfSxzaW51c29pZGFsSW5PdXQ6ZnVuY3Rpb24odCl7cmV0dXJuLjUqKDEtTWF0aC5jb3MoTWF0aC5QSSp0KSl9LGV4cG9uZW50aWFsSW46ZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10PzA6TWF0aC5wb3coMTAyNCx0LTEpfSxleHBvbmVudGlhbE91dDpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQ/MToxLU1hdGgucG93KDIsLTEwKnQpfSxleHBvbmVudGlhbEluT3V0OmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8wOjE9PT10PzE6KHQqPTIpPDE/LjUqTWF0aC5wb3coMTAyNCx0LTEpOi41KigyLU1hdGgucG93KDIsLTEwKih0LTEpKSl9LGNpcmN1bGFySW46ZnVuY3Rpb24odCl7cmV0dXJuIDEtTWF0aC5zcXJ0KDEtdCp0KX0sY2lyY3VsYXJPdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguc3FydCgxLSAtLXQqdCl9LGNpcmN1bGFySW5PdXQ6ZnVuY3Rpb24odCl7cmV0dXJuKHQqPTIpPDE/LS41KihNYXRoLnNxcnQoMS10KnQpLTEpOi41KihNYXRoLnNxcnQoMS0odC09MikqdCkrMSl9LGVsYXN0aWNJbjpmdW5jdGlvbih0KXt2YXIgZSxpPS4xO3JldHVybiAwPT09dD8wOjE9PT10PzE6KGU9IWl8fGk8MT8oaT0xLC4xKTouNCpNYXRoLmFzaW4oMS9pKS8oMipNYXRoLlBJKSwtaSpNYXRoLnBvdygyLDEwKih0LT0xKSkqTWF0aC5zaW4oKHQtZSkqKDIqTWF0aC5QSSkvLjQpKX0sZWxhc3RpY091dDpmdW5jdGlvbih0KXt2YXIgZSxpPS4xO3JldHVybiAwPT09dD8wOjE9PT10PzE6KGU9IWl8fGk8MT8oaT0xLC4xKTouNCpNYXRoLmFzaW4oMS9pKS8oMipNYXRoLlBJKSxpKk1hdGgucG93KDIsLTEwKnQpKk1hdGguc2luKCh0LWUpKigyKk1hdGguUEkpLy40KSsxKX0sZWxhc3RpY0luT3V0OmZ1bmN0aW9uKHQpe3ZhciBlLGk9LjE7cmV0dXJuIDA9PT10PzA6MT09PXQ/MTooZT0haXx8aTwxPyhpPTEsLjEpOi40Kk1hdGguYXNpbigxL2kpLygyKk1hdGguUEkpLCh0Kj0yKTwxP2kqTWF0aC5wb3coMiwxMCoodC09MSkpKk1hdGguc2luKCh0LWUpKigyKk1hdGguUEkpLy40KSotLjU6aSpNYXRoLnBvdygyLC0xMCoodC09MSkpKk1hdGguc2luKCh0LWUpKigyKk1hdGguUEkpLy40KSouNSsxKX0sYmFja0luOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqKDIuNzAxNTgqdC0xLjcwMTU4KX0sYmFja091dDpmdW5jdGlvbih0KXtyZXR1cm4tLXQqdCooMi43MDE1OCp0KzEuNzAxNTgpKzF9LGJhY2tJbk91dDpmdW5jdGlvbih0KXt2YXIgZT0yLjU5NDkwOTU7cmV0dXJuKHQqPTIpPDE/dCp0KigoMStlKSp0LWUpKi41Oi41KigodC09MikqdCooKDErZSkqdCtlKSsyKX0sYm91bmNlSW46ZnVuY3Rpb24odCl7cmV0dXJuIDEteWUuYm91bmNlT3V0KDEtdCl9LGJvdW5jZU91dDpmdW5jdGlvbih0KXtyZXR1cm4gdDwxLzIuNzU/Ny41NjI1KnQqdDp0PDIvMi43NT83LjU2MjUqKHQtPTEuNS8yLjc1KSp0Ky43NTp0PDIuNS8yLjc1PzcuNTYyNSoodC09Mi4yNS8yLjc1KSp0Ky45Mzc1OjcuNTYyNSoodC09Mi42MjUvMi43NSkqdCsuOTg0Mzc1fSxib3VuY2VJbk91dDpmdW5jdGlvbih0KXtyZXR1cm4gdDwuNT8uNSp5ZS5ib3VuY2VJbigyKnQpOi41KnllLmJvdW5jZU91dCgyKnQtMSkrLjV9fTtmdW5jdGlvbiB4ZSh0KXt0aGlzLl90YXJnZXQ9dC50YXJnZXQsdGhpcy5fbGlmZT10LmxpZmV8fDFlMyx0aGlzLl9kZWxheT10LmRlbGF5fHwwLHRoaXMuX2luaXRpYWxpemVkPSExLHRoaXMubG9vcD1udWxsIT10Lmxvb3AmJnQubG9vcCx0aGlzLmdhcD10LmdhcHx8MCx0aGlzLmVhc2luZz10LmVhc2luZ3x8IkxpbmVhciIsdGhpcy5vbmZyYW1lPXQub25mcmFtZSx0aGlzLm9uZGVzdHJveT10Lm9uZGVzdHJveSx0aGlzLm9ucmVzdGFydD10Lm9ucmVzdGFydCx0aGlzLl9wYXVzZWRUaW1lPTAsdGhpcy5fcGF1c2VkPSExfXhlLnByb3RvdHlwZT17Y29uc3RydWN0b3I6eGUsc3RlcDpmdW5jdGlvbih0LGUpe2lmKHRoaXMuX2luaXRpYWxpemVkfHwodGhpcy5fc3RhcnRUaW1lPXQrdGhpcy5fZGVsYXksdGhpcy5faW5pdGlhbGl6ZWQ9ITApLHRoaXMuX3BhdXNlZCl0aGlzLl9wYXVzZWRUaW1lKz1lO2Vsc2V7dmFyIGk9KHQtdGhpcy5fc3RhcnRUaW1lLXRoaXMuX3BhdXNlZFRpbWUpL3RoaXMuX2xpZmU7aWYoIShpPDApKXtpPU1hdGgubWluKGksMSk7dmFyIG49dGhpcy5lYXNpbmcsbz0ic3RyaW5nIj09dHlwZW9mIG4/eWVbbl06bixhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP28oaSk6aTtyZXR1cm4gdGhpcy5maXJlKCJmcmFtZSIsYSksMT09PWk/dGhpcy5sb29wPyh0aGlzLnJlc3RhcnQodCksInJlc3RhcnQiKToodGhpcy5fbmVlZHNSZW1vdmU9ITAsImRlc3Ryb3kiKTpudWxsfX19LHJlc3RhcnQ6ZnVuY3Rpb24odCl7dmFyIGU9KHQtdGhpcy5fc3RhcnRUaW1lLXRoaXMuX3BhdXNlZFRpbWUpJXRoaXMuX2xpZmU7dGhpcy5fc3RhcnRUaW1lPXQtZSt0aGlzLmdhcCx0aGlzLl9wYXVzZWRUaW1lPTAsdGhpcy5fbmVlZHNSZW1vdmU9ITF9LGZpcmU6ZnVuY3Rpb24odCxlKXt0aGlzW3Q9Im9uIit0XSYmdGhpc1t0XSh0aGlzLl90YXJnZXQsZSl9LHBhdXNlOmZ1bmN0aW9uKCl7dGhpcy5fcGF1c2VkPSEwfSxyZXN1bWU6ZnVuY3Rpb24oKXt0aGlzLl9wYXVzZWQ9ITF9fTtmdW5jdGlvbiBfZSgpe3RoaXMuaGVhZD1udWxsLHRoaXMudGFpbD1udWxsLHRoaXMuX2xlbj0wfXZhciB3ZT1fZS5wcm90b3R5cGU7d2UuaW5zZXJ0PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBTZSh0KTtyZXR1cm4gdGhpcy5pbnNlcnRFbnRyeShlKSxlfSx3ZS5pbnNlcnRFbnRyeT1mdW5jdGlvbih0KXt0aGlzLmhlYWQ/KCh0aGlzLnRhaWwubmV4dD10KS5wcmV2PXRoaXMudGFpbCx0Lm5leHQ9bnVsbCx0aGlzLnRhaWw9dCk6dGhpcy5oZWFkPXRoaXMudGFpbD10LHRoaXMuX2xlbisrfSx3ZS5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9dC5wcmV2LGk9dC5uZXh0O2U/ZS5uZXh0PWk6dGhpcy5oZWFkPWksaT9pLnByZXY9ZTp0aGlzLnRhaWw9ZSx0Lm5leHQ9dC5wcmV2PW51bGwsdGhpcy5fbGVuLS19LHdlLmxlbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW59LHdlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5oZWFkPXRoaXMudGFpbD1udWxsLHRoaXMuX2xlbj0wfTtmdW5jdGlvbiBiZSh0KXt0aGlzLl9saXN0PW5ldyBfZSx0aGlzLl9tYXA9e30sdGhpcy5fbWF4U2l6ZT10fHwxMCx0aGlzLl9sYXN0UmVtb3ZlZEVudHJ5PW51bGx9dmFyIFNlPWZ1bmN0aW9uKHQpe3RoaXMudmFsdWU9dCx0aGlzLm5leHQsdGhpcy5wcmV2fSxNZT1iZS5wcm90b3R5cGU7TWUucHV0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fbGlzdCxuPXRoaXMuX21hcCxvPW51bGw7aWYobnVsbD09blt0XSl7dmFyIGE9aS5sZW4oKSxyPXRoaXMuX2xhc3RSZW1vdmVkRW50cnk7aWYoYT49dGhpcy5fbWF4U2l6ZSYmMDxhKXt2YXIgcz1pLmhlYWQ7aS5yZW1vdmUocyksZGVsZXRlIG5bcy5rZXldLG89cy52YWx1ZSx0aGlzLl9sYXN0UmVtb3ZlZEVudHJ5PXN9cj9yLnZhbHVlPWU6cj1uZXcgU2UoZSksci5rZXk9dCxpLmluc2VydEVudHJ5KHIpLG5bdF09cn1yZXR1cm4gb30sTWUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcFt0XSxpPXRoaXMuX2xpc3Q7aWYobnVsbCE9ZSlyZXR1cm4gZSE9PWkudGFpbCYmKGkucmVtb3ZlKGUpLGkuaW5zZXJ0RW50cnkoZSkpLGUudmFsdWV9LE1lLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fbGlzdC5jbGVhcigpLHRoaXMuX21hcD17fX07dmFyIEllPXt0cmFuc3BhcmVudDpbMCwwLDAsMF0sYWxpY2VibHVlOlsyNDAsMjQ4LDI1NSwxXSxhbnRpcXVld2hpdGU6WzI1MCwyMzUsMjE1LDFdLGFxdWE6WzAsMjU1LDI1NSwxXSxhcXVhbWFyaW5lOlsxMjcsMjU1LDIxMiwxXSxhenVyZTpbMjQwLDI1NSwyNTUsMV0sYmVpZ2U6WzI0NSwyNDUsMjIwLDFdLGJpc3F1ZTpbMjU1LDIyOCwxOTYsMV0sYmxhY2s6WzAsMCwwLDFdLGJsYW5jaGVkYWxtb25kOlsyNTUsMjM1LDIwNSwxXSxibHVlOlswLDAsMjU1LDFdLGJsdWV2aW9sZXQ6WzEzOCw0MywyMjYsMV0sYnJvd246WzE2NSw0Miw0MiwxXSxidXJseXdvb2Q6WzIyMiwxODQsMTM1LDFdLGNhZGV0Ymx1ZTpbOTUsMTU4LDE2MCwxXSxjaGFydHJldXNlOlsxMjcsMjU1LDAsMV0sY2hvY29sYXRlOlsyMTAsMTA1LDMwLDFdLGNvcmFsOlsyNTUsMTI3LDgwLDFdLGNvcm5mbG93ZXJibHVlOlsxMDAsMTQ5LDIzNywxXSxjb3Juc2lsazpbMjU1LDI0OCwyMjAsMV0sY3JpbXNvbjpbMjIwLDIwLDYwLDFdLGN5YW46WzAsMjU1LDI1NSwxXSxkYXJrYmx1ZTpbMCwwLDEzOSwxXSxkYXJrY3lhbjpbMCwxMzksMTM5LDFdLGRhcmtnb2xkZW5yb2Q6WzE4NCwxMzQsMTEsMV0sZGFya2dyYXk6WzE2OSwxNjksMTY5LDFdLGRhcmtncmVlbjpbMCwxMDAsMCwxXSxkYXJrZ3JleTpbMTY5LDE2OSwxNjksMV0sZGFya2toYWtpOlsxODksMTgzLDEwNywxXSxkYXJrbWFnZW50YTpbMTM5LDAsMTM5LDFdLGRhcmtvbGl2ZWdyZWVuOls4NSwxMDcsNDcsMV0sZGFya29yYW5nZTpbMjU1LDE0MCwwLDFdLGRhcmtvcmNoaWQ6WzE1Myw1MCwyMDQsMV0sZGFya3JlZDpbMTM5LDAsMCwxXSxkYXJrc2FsbW9uOlsyMzMsMTUwLDEyMiwxXSxkYXJrc2VhZ3JlZW46WzE0MywxODgsMTQzLDFdLGRhcmtzbGF0ZWJsdWU6WzcyLDYxLDEzOSwxXSxkYXJrc2xhdGVncmF5Ols0Nyw3OSw3OSwxXSxkYXJrc2xhdGVncmV5Ols0Nyw3OSw3OSwxXSxkYXJrdHVycXVvaXNlOlswLDIwNiwyMDksMV0sZGFya3Zpb2xldDpbMTQ4LDAsMjExLDFdLGRlZXBwaW5rOlsyNTUsMjAsMTQ3LDFdLGRlZXBza3libHVlOlswLDE5MSwyNTUsMV0sZGltZ3JheTpbMTA1LDEwNSwxMDUsMV0sZGltZ3JleTpbMTA1LDEwNSwxMDUsMV0sZG9kZ2VyYmx1ZTpbMzAsMTQ0LDI1NSwxXSxmaXJlYnJpY2s6WzE3OCwzNCwzNCwxXSxmbG9yYWx3aGl0ZTpbMjU1LDI1MCwyNDAsMV0sZm9yZXN0Z3JlZW46WzM0LDEzOSwzNCwxXSxmdWNoc2lhOlsyNTUsMCwyNTUsMV0sZ2FpbnNib3JvOlsyMjAsMjIwLDIyMCwxXSxnaG9zdHdoaXRlOlsyNDgsMjQ4LDI1NSwxXSxnb2xkOlsyNTUsMjE1LDAsMV0sZ29sZGVucm9kOlsyMTgsMTY1LDMyLDFdLGdyYXk6WzEyOCwxMjgsMTI4LDFdLGdyZWVuOlswLDEyOCwwLDFdLGdyZWVueWVsbG93OlsxNzMsMjU1LDQ3LDFdLGdyZXk6WzEyOCwxMjgsMTI4LDFdLGhvbmV5ZGV3OlsyNDAsMjU1LDI0MCwxXSxob3RwaW5rOlsyNTUsMTA1LDE4MCwxXSxpbmRpYW5yZWQ6WzIwNSw5Miw5MiwxXSxpbmRpZ286Wzc1LDAsMTMwLDFdLGl2b3J5OlsyNTUsMjU1LDI0MCwxXSxraGFraTpbMjQwLDIzMCwxNDAsMV0sbGF2ZW5kZXI6WzIzMCwyMzAsMjUwLDFdLGxhdmVuZGVyYmx1c2g6WzI1NSwyNDAsMjQ1LDFdLGxhd25ncmVlbjpbMTI0LDI1MiwwLDFdLGxlbW9uY2hpZmZvbjpbMjU1LDI1MCwyMDUsMV0sbGlnaHRibHVlOlsxNzMsMjE2LDIzMCwxXSxsaWdodGNvcmFsOlsyNDAsMTI4LDEyOCwxXSxsaWdodGN5YW46WzIyNCwyNTUsMjU1LDFdLGxpZ2h0Z29sZGVucm9keWVsbG93OlsyNTAsMjUwLDIxMCwxXSxsaWdodGdyYXk6WzIxMSwyMTEsMjExLDFdLGxpZ2h0Z3JlZW46WzE0NCwyMzgsMTQ0LDFdLGxpZ2h0Z3JleTpbMjExLDIxMSwyMTEsMV0sbGlnaHRwaW5rOlsyNTUsMTgyLDE5MywxXSxsaWdodHNhbG1vbjpbMjU1LDE2MCwxMjIsMV0sbGlnaHRzZWFncmVlbjpbMzIsMTc4LDE3MCwxXSxsaWdodHNreWJsdWU6WzEzNSwyMDYsMjUwLDFdLGxpZ2h0c2xhdGVncmF5OlsxMTksMTM2LDE1MywxXSxsaWdodHNsYXRlZ3JleTpbMTE5LDEzNiwxNTMsMV0sbGlnaHRzdGVlbGJsdWU6WzE3NiwxOTYsMjIyLDFdLGxpZ2h0eWVsbG93OlsyNTUsMjU1LDIyNCwxXSxsaW1lOlswLDI1NSwwLDFdLGxpbWVncmVlbjpbNTAsMjA1LDUwLDFdLGxpbmVuOlsyNTAsMjQwLDIzMCwxXSxtYWdlbnRhOlsyNTUsMCwyNTUsMV0sbWFyb29uOlsxMjgsMCwwLDFdLG1lZGl1bWFxdWFtYXJpbmU6WzEwMiwyMDUsMTcwLDFdLG1lZGl1bWJsdWU6WzAsMCwyMDUsMV0sbWVkaXVtb3JjaGlkOlsxODYsODUsMjExLDFdLG1lZGl1bXB1cnBsZTpbMTQ3LDExMiwyMTksMV0sbWVkaXVtc2VhZ3JlZW46WzYwLDE3OSwxMTMsMV0sbWVkaXVtc2xhdGVibHVlOlsxMjMsMTA0LDIzOCwxXSxtZWRpdW1zcHJpbmdncmVlbjpbMCwyNTAsMTU0LDFdLG1lZGl1bXR1cnF1b2lzZTpbNzIsMjA5LDIwNCwxXSxtZWRpdW12aW9sZXRyZWQ6WzE5OSwyMSwxMzMsMV0sbWlkbmlnaHRibHVlOlsyNSwyNSwxMTIsMV0sbWludGNyZWFtOlsyNDUsMjU1LDI1MCwxXSxtaXN0eXJvc2U6WzI1NSwyMjgsMjI1LDFdLG1vY2Nhc2luOlsyNTUsMjI4LDE4MSwxXSxuYXZham93aGl0ZTpbMjU1LDIyMiwxNzMsMV0sbmF2eTpbMCwwLDEyOCwxXSxvbGRsYWNlOlsyNTMsMjQ1LDIzMCwxXSxvbGl2ZTpbMTI4LDEyOCwwLDFdLG9saXZlZHJhYjpbMTA3LDE0MiwzNSwxXSxvcmFuZ2U6WzI1NSwxNjUsMCwxXSxvcmFuZ2VyZWQ6WzI1NSw2OSwwLDFdLG9yY2hpZDpbMjE4LDExMiwyMTQsMV0scGFsZWdvbGRlbnJvZDpbMjM4LDIzMiwxNzAsMV0scGFsZWdyZWVuOlsxNTIsMjUxLDE1MiwxXSxwYWxldHVycXVvaXNlOlsxNzUsMjM4LDIzOCwxXSxwYWxldmlvbGV0cmVkOlsyMTksMTEyLDE0NywxXSxwYXBheWF3aGlwOlsyNTUsMjM5LDIxMywxXSxwZWFjaHB1ZmY6WzI1NSwyMTgsMTg1LDFdLHBlcnU6WzIwNSwxMzMsNjMsMV0scGluazpbMjU1LDE5MiwyMDMsMV0scGx1bTpbMjIxLDE2MCwyMjEsMV0scG93ZGVyYmx1ZTpbMTc2LDIyNCwyMzAsMV0scHVycGxlOlsxMjgsMCwxMjgsMV0scmVkOlsyNTUsMCwwLDFdLHJvc3licm93bjpbMTg4LDE0MywxNDMsMV0scm95YWxibHVlOls2NSwxMDUsMjI1LDFdLHNhZGRsZWJyb3duOlsxMzksNjksMTksMV0sc2FsbW9uOlsyNTAsMTI4LDExNCwxXSxzYW5keWJyb3duOlsyNDQsMTY0LDk2LDFdLHNlYWdyZWVuOls0NiwxMzksODcsMV0sc2Vhc2hlbGw6WzI1NSwyNDUsMjM4LDFdLHNpZW5uYTpbMTYwLDgyLDQ1LDFdLHNpbHZlcjpbMTkyLDE5MiwxOTIsMV0sc2t5Ymx1ZTpbMTM1LDIwNiwyMzUsMV0sc2xhdGVibHVlOlsxMDYsOTAsMjA1LDFdLHNsYXRlZ3JheTpbMTEyLDEyOCwxNDQsMV0sc2xhdGVncmV5OlsxMTIsMTI4LDE0NCwxXSxzbm93OlsyNTUsMjUwLDI1MCwxXSxzcHJpbmdncmVlbjpbMCwyNTUsMTI3LDFdLHN0ZWVsYmx1ZTpbNzAsMTMwLDE4MCwxXSx0YW46WzIxMCwxODAsMTQwLDFdLHRlYWw6WzAsMTI4LDEyOCwxXSx0aGlzdGxlOlsyMTYsMTkxLDIxNiwxXSx0b21hdG86WzI1NSw5OSw3MSwxXSx0dXJxdW9pc2U6WzY0LDIyNCwyMDgsMV0sdmlvbGV0OlsyMzgsMTMwLDIzOCwxXSx3aGVhdDpbMjQ1LDIyMiwxNzksMV0sd2hpdGU6WzI1NSwyNTUsMjU1LDFdLHdoaXRlc21va2U6WzI0NSwyNDUsMjQ1LDFdLHllbGxvdzpbMjU1LDI1NSwwLDFdLHllbGxvd2dyZWVuOlsxNTQsMjA1LDUwLDFdfTtmdW5jdGlvbiBUZSh0KXtyZXR1cm4odD1NYXRoLnJvdW5kKHQpKTwwPzA6MjU1PHQ/MjU1OnR9ZnVuY3Rpb24gQWUodCl7cmV0dXJuIHQ8MD8wOjE8dD8xOnR9ZnVuY3Rpb24gRGUodCl7cmV0dXJuIHQubGVuZ3RoJiYiJSI9PT10LmNoYXJBdCh0Lmxlbmd0aC0xKT9UZShwYXJzZUZsb2F0KHQpLzEwMCoyNTUpOlRlKHBhcnNlSW50KHQsMTApKX1mdW5jdGlvbiBDZSh0KXtyZXR1cm4gdC5sZW5ndGgmJiIlIj09PXQuY2hhckF0KHQubGVuZ3RoLTEpP0FlKHBhcnNlRmxvYXQodCkvMTAwKTpBZShwYXJzZUZsb2F0KHQpKX1mdW5jdGlvbiBMZSh0LGUsaSl7cmV0dXJuIGk8MD9pKz0xOjE8aSYmKGktPTEpLDYqaTwxP3QrKGUtdCkqaSo2OjIqaTwxP2U6MyppPDI/dCsoZS10KSooMi8zLWkpKjY6dH1mdW5jdGlvbiBrZSh0LGUsaSl7cmV0dXJuIHQrKGUtdCkqaX1mdW5jdGlvbiBQZSh0LGUsaSxuLG8pe3JldHVybiB0WzBdPWUsdFsxXT1pLHRbMl09bix0WzNdPW8sdH1mdW5jdGlvbiBOZSh0LGUpe3JldHVybiB0WzBdPWVbMF0sdFsxXT1lWzFdLHRbMl09ZVsyXSx0WzNdPWVbM10sdH12YXIgT2U9bmV3IGJlKDIwKSxFZT1udWxsO2Z1bmN0aW9uIHplKHQsZSl7RWUmJk5lKEVlLGUpLEVlPU9lLnB1dCh0LEVlfHxlLnNsaWNlKCkpfWZ1bmN0aW9uIFJlKHQsZSl7aWYodCl7ZT1lfHxbXTt2YXIgaT1PZS5nZXQodCk7aWYoaSlyZXR1cm4gTmUoZSxpKTt2YXIgbixvPSh0Kz0iIikucmVwbGFjZSgvIC9nLCIiKS50b0xvd2VyQ2FzZSgpO2lmKG8gaW4gSWUpcmV0dXJuIE5lKGUsSWVbb10pLHplKHQsZSksZTtpZigiIyI9PT1vLmNoYXJBdCgwKSlyZXR1cm4gND09PW8ubGVuZ3RoPzA8PShuPXBhcnNlSW50KG8uc3Vic3RyKDEpLDE2KSkmJm48PTQwOTU/KFBlKGUsKDM4NDAmbik+PjR8KDM4NDAmbik+PjgsMjQwJm58KDI0MCZuKT4+NCwxNSZufCgxNSZuKTw8NCwxKSx6ZSh0LGUpLGUpOnZvaWQgUGUoZSwwLDAsMCwxKTo3PT09by5sZW5ndGg/MDw9KG49cGFyc2VJbnQoby5zdWJzdHIoMSksMTYpKSYmbjw9MTY3NzcyMTU/KFBlKGUsKDE2NzExNjgwJm4pPj4xNiwoNjUyODAmbik+PjgsMjU1Jm4sMSksemUodCxlKSxlKTp2b2lkIFBlKGUsMCwwLDAsMSk6dm9pZCAwO3ZhciBhPW8uaW5kZXhPZigiKCIpLHI9by5pbmRleE9mKCIpIik7aWYoLTEhPT1hJiZyKzE9PT1vLmxlbmd0aCl7dmFyIHM9by5zdWJzdHIoMCxhKSxsPW8uc3Vic3RyKGErMSxyLShhKzEpKS5zcGxpdCgiLCIpLHU9MTtzd2l0Y2gocyl7Y2FzZSJyZ2JhIjppZig0IT09bC5sZW5ndGgpcmV0dXJuIHZvaWQgUGUoZSwwLDAsMCwxKTt1PUNlKGwucG9wKCkpO2Nhc2UicmdiIjpyZXR1cm4gMyE9PWwubGVuZ3RoP3ZvaWQgUGUoZSwwLDAsMCwxKTooUGUoZSxEZShsWzBdKSxEZShsWzFdKSxEZShsWzJdKSx1KSx6ZSh0LGUpLGUpO2Nhc2UiaHNsYSI6cmV0dXJuIDQhPT1sLmxlbmd0aD92b2lkIFBlKGUsMCwwLDAsMSk6KGxbM109Q2UobFszXSksQmUobCxlKSx6ZSh0LGUpLGUpO2Nhc2UiaHNsIjpyZXR1cm4gMyE9PWwubGVuZ3RoP3ZvaWQgUGUoZSwwLDAsMCwxKTooQmUobCxlKSx6ZSh0LGUpLGUpO2RlZmF1bHQ6cmV0dXJufX1QZShlLDAsMCwwLDEpfX1mdW5jdGlvbiBCZSh0LGUpe3ZhciBpPShwYXJzZUZsb2F0KHRbMF0pJTM2MCszNjApJTM2MC8zNjAsbj1DZSh0WzFdKSxvPUNlKHRbMl0pLGE9bzw9LjU/byoobisxKTpvK24tbypuLHI9MipvLWE7cmV0dXJuIFBlKGU9ZXx8W10sVGUoMjU1KkxlKHIsYSxpKzEvMykpLFRlKDI1NSpMZShyLGEsaSkpLFRlKDI1NSpMZShyLGEsaS0xLzMpKSwxKSw0PT09dC5sZW5ndGgmJihlWzNdPXRbM10pLGV9ZnVuY3Rpb24gVmUodCxlKXt2YXIgaT1SZSh0KTtpZihpKXtmb3IodmFyIG49MDtuPDM7bisrKWlbbl09ZTwwP2lbbl0qKDEtZSl8MDooMjU1LWlbbl0pKmUraVtuXXwwLDI1NTxpW25dP2lbbl09MjU1OnRbbl08MCYmKGlbbl09MCk7cmV0dXJuIFllKGksND09PWkubGVuZ3RoPyJyZ2JhIjoicmdiIil9fWZ1bmN0aW9uIEdlKHQpe3ZhciBlPVJlKHQpO2lmKGUpcmV0dXJuKCgxPDwyNCkrKGVbMF08PDE2KSsoZVsxXTw8OCkrICtlWzJdKS50b1N0cmluZygxNikuc2xpY2UoMSl9ZnVuY3Rpb24gRmUodCxlLGkpe2lmKGUmJmUubGVuZ3RoJiYwPD10JiZ0PD0xKXtpPWl8fFtdO3ZhciBuPXQqKGUubGVuZ3RoLTEpLG89TWF0aC5mbG9vcihuKSxhPU1hdGguY2VpbChuKSxyPWVbb10scz1lW2FdLGw9bi1vO3JldHVybiBpWzBdPVRlKGtlKHJbMF0sc1swXSxsKSksaVsxXT1UZShrZShyWzFdLHNbMV0sbCkpLGlbMl09VGUoa2UoclsyXSxzWzJdLGwpKSxpWzNdPUFlKGtlKHJbM10sc1szXSxsKSksaX19dmFyIFdlPUZlO2Z1bmN0aW9uIEhlKHQsZSxpKXtpZihlJiZlLmxlbmd0aCYmMDw9dCYmdDw9MSl7dmFyIG49dCooZS5sZW5ndGgtMSksbz1NYXRoLmZsb29yKG4pLGE9TWF0aC5jZWlsKG4pLHI9UmUoZVtvXSkscz1SZShlW2FdKSxsPW4tbyx1PVllKFtUZShrZShyWzBdLHNbMF0sbCkpLFRlKGtlKHJbMV0sc1sxXSxsKSksVGUoa2UoclsyXSxzWzJdLGwpKSxBZShrZShyWzNdLHNbM10sbCkpXSwicmdiYSIpO3JldHVybiBpP3tjb2xvcjp1LGxlZnRJbmRleDpvLHJpZ2h0SW5kZXg6YSx2YWx1ZTpufTp1fX12YXIgWmU9SGU7ZnVuY3Rpb24gVWUodCxlLGksbil7aWYodD1SZSh0KSlyZXR1cm4gdD1mdW5jdGlvbih0KXtpZih0KXt2YXIgZSxpLG49dFswXS8yNTUsbz10WzFdLzI1NSxhPXRbMl0vMjU1LHI9TWF0aC5taW4obixvLGEpLHM9TWF0aC5tYXgobixvLGEpLGw9cy1yLHU9KHMrcikvMjtpZigwPT1sKWk9ZT0wO2Vsc2V7aT11PC41P2wvKHMrcik6bC8oMi1zLXIpO3ZhciBoPSgocy1uKS82K2wvMikvbCxjPSgocy1vKS82K2wvMikvbCxkPSgocy1hKS82K2wvMikvbDtuPT09cz9lPWQtYzpvPT09cz9lPTEvMytoLWQ6YT09PXMmJihlPTIvMytjLWgpLGU8MCYmKGUrPTEpLDE8ZSYmKGUtPTEpfXZhciBmPVszNjAqZSxpLHVdO3JldHVybiBudWxsIT10WzNdJiZmLnB1c2godFszXSksZn19KHQpLG51bGwhPWUmJih0WzBdPWZ1bmN0aW9uKHQpe3JldHVybih0PU1hdGgucm91bmQodCkpPDA/MDozNjA8dD8zNjA6dH0oZSkpLG51bGwhPWkmJih0WzFdPUNlKGkpKSxudWxsIT1uJiYodFsyXT1DZShuKSksWWUoQmUodCksInJnYmEiKX1mdW5jdGlvbiBYZSh0LGUpe2lmKCh0PVJlKHQpKSYmbnVsbCE9ZSlyZXR1cm4gdFszXT1BZShlKSxZZSh0LCJyZ2JhIil9ZnVuY3Rpb24gWWUodCxlKXtpZih0JiZ0Lmxlbmd0aCl7dmFyIGk9dFswXSsiLCIrdFsxXSsiLCIrdFsyXTtyZXR1cm4icmdiYSIhPT1lJiYiaHN2YSIhPT1lJiYiaHNsYSIhPT1lfHwoaSs9IiwiK3RbM10pLGUrIigiK2krIikifX12YXIgamU9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoe3BhcnNlOlJlLGxpZnQ6VmUsdG9IZXg6R2UsZmFzdExlcnA6RmUsZmFzdE1hcFRvQ29sb3I6V2UsbGVycDpIZSxtYXBUb0NvbG9yOlplLG1vZGlmeUhTTDpVZSxtb2RpZnlBbHBoYTpYZSxzdHJpbmdpZnk6WWV9KSxxZT1BcnJheS5wcm90b3R5cGUuc2xpY2U7ZnVuY3Rpb24gS2UodCxlKXtyZXR1cm4gdFtlXX1mdW5jdGlvbiAkZSh0LGUsaSl7dFtlXT1pfWZ1bmN0aW9uIEplKHQsZSxpKXtyZXR1cm4oZS10KSppK3R9ZnVuY3Rpb24gUWUodCxlLGkpe3JldHVybi41PGk/ZTp0fWZ1bmN0aW9uIHRpKHQsZSxpLG4sbyl7dmFyIGE9dC5sZW5ndGg7aWYoMT09PW8pZm9yKHZhciByPTA7cjxhO3IrKyluW3JdPUplKHRbcl0sZVtyXSxpKTtlbHNle3ZhciBzPWEmJnRbMF0ubGVuZ3RoO2ZvcihyPTA7cjxhO3IrKylmb3IodmFyIGw9MDtsPHM7bCsrKW5bcl1bbF09SmUodFtyXVtsXSxlW3JdW2xdLGkpfX1mdW5jdGlvbiBlaSh0LGUsaSl7dmFyIG49dC5sZW5ndGgsbz1lLmxlbmd0aDtpZihuIT09bylpZihvPG4pdC5sZW5ndGg9bztlbHNlIGZvcih2YXIgYT1uO2E8bzthKyspdC5wdXNoKDE9PT1pP2VbYV06cWUuY2FsbChlW2FdKSk7dmFyIHI9dFswXSYmdFswXS5sZW5ndGg7Zm9yKGE9MDthPHQubGVuZ3RoO2ErKylpZigxPT09aSlpc05hTih0W2FdKSYmKHRbYV09ZVthXSk7ZWxzZSBmb3IodmFyIHM9MDtzPHI7cysrKWlzTmFOKHRbYV1bc10pJiYodFthXVtzXT1lW2FdW3NdKX1mdW5jdGlvbiBpaSh0LGUsaSl7aWYodD09PWUpcmV0dXJuITA7dmFyIG49dC5sZW5ndGg7aWYobiE9PWUubGVuZ3RoKXJldHVybiExO2lmKDE9PT1pKXtmb3IodmFyIG89MDtvPG47bysrKWlmKHRbb10hPT1lW29dKXJldHVybiExfWVsc2V7dmFyIGE9dFswXS5sZW5ndGg7Zm9yKG89MDtvPG47bysrKWZvcih2YXIgcj0wO3I8YTtyKyspaWYodFtvXVtyXSE9PWVbb11bcl0pcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gbmkodCxlLGksbixvLGEscixzLGwpe3ZhciB1PXQubGVuZ3RoO2lmKDE9PT1sKWZvcih2YXIgaD0wO2g8dTtoKyspc1toXT1vaSh0W2hdLGVbaF0saVtoXSxuW2hdLG8sYSxyKTtlbHNle3ZhciBjPXRbMF0ubGVuZ3RoO2ZvcihoPTA7aDx1O2grKylmb3IodmFyIGQ9MDtkPGM7ZCsrKXNbaF1bZF09b2kodFtoXVtkXSxlW2hdW2RdLGlbaF1bZF0sbltoXVtkXSxvLGEscil9fWZ1bmN0aW9uIG9pKHQsZSxpLG4sbyxhLHIpe3ZhciBzPS41KihpLXQpLGw9LjUqKG4tZSk7cmV0dXJuKDIqKGUtaSkrcytsKSpyKygtMyooZS1pKS0yKnMtbCkqYStzKm8rZX1mdW5jdGlvbiBhaSh0KXtpZihQKHQpKXt2YXIgZT10Lmxlbmd0aDtpZihQKHRbMF0pKXtmb3IodmFyIGk9W10sbj0wO248ZTtuKyspaS5wdXNoKHFlLmNhbGwodFtuXSkpO3JldHVybiBpfXJldHVybiBxZS5jYWxsKHQpfXJldHVybiB0fWZ1bmN0aW9uIHJpKHQpe3JldHVybiB0WzBdPU1hdGguZmxvb3IodFswXSksdFsxXT1NYXRoLmZsb29yKHRbMV0pLHRbMl09TWF0aC5mbG9vcih0WzJdKSwicmdiYSgiK3Quam9pbigiLCIpKyIpIn1mdW5jdGlvbiBzaSh0LGUsaSxuLGEsbyl7dmFyIHI9dC5fZ2V0dGVyLHM9dC5fc2V0dGVyLGw9InNwbGluZSI9PT1lLHU9bi5sZW5ndGg7aWYodSl7dmFyIGgsYz1QKG5bMF0udmFsdWUpLGQ9ITEsZj0hMSxwPWM/ZnVuY3Rpb24odCl7dmFyIGU9dFt0Lmxlbmd0aC0xXS52YWx1ZTtyZXR1cm4gUChlJiZlWzBdKT8yOjF9KG4pOjA7bi5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudGltZS1lLnRpbWV9KSxoPW5bdS0xXS50aW1lO2Zvcih2YXIgZz1bXSxtPVtdLHY9blswXS52YWx1ZSx5PSEwLHg9MDt4PHU7eCsrKXtnLnB1c2goblt4XS50aW1lL2gpO3ZhciBfPW5beF0udmFsdWU7aWYoYyYmaWkoXyx2LHApfHwhYyYmXz09PXZ8fCh5PSExKSwic3RyaW5nIj09dHlwZW9mKHY9Xykpe3ZhciB3PVJlKF8pO3c/KF89dyxkPSEwKTpmPSEwfW0ucHVzaChfKX1pZihvfHwheSl7dmFyIGI9bVt1LTFdO2Zvcih4PTA7eDx1LTE7eCsrKWM/ZWkobVt4XSxiLHApOiFpc05hTihtW3hdKXx8aXNOYU4oYil8fGZ8fGR8fChtW3hdPWIpO2MmJmVpKHIodC5fdGFyZ2V0LGEpLGIscCk7dmFyIFMsTSxJLFQsQSxEPTAsQz0wO2lmKGQpdmFyIEw9WzAsMCwwLDBdO3ZhciBrPW5ldyB4ZSh7dGFyZ2V0OnQuX3RhcmdldCxsaWZlOmgsbG9vcDp0Ll9sb29wLGRlbGF5OnQuX2RlbGF5LG9uZnJhbWU6ZnVuY3Rpb24odCxlKXt2YXIgaTtpZihlPDApaT0wO2Vsc2UgaWYoZTxDKXtmb3IoaT1NYXRoLm1pbihEKzEsdS0xKTswPD1pJiYhKGdbaV08PWUpO2ktLSk7aT1NYXRoLm1pbihpLHUtMil9ZWxzZXtmb3IoaT1EO2k8dSYmIShnW2ldPmUpO2krKyk7aT1NYXRoLm1pbihpLTEsdS0yKX1DPWU7dmFyIG49Z1soRD1pKSsxXS1nW2ldO2lmKDAhPW4paWYoUz0oZS1nW2ldKS9uLGwpaWYoST1tW2ldLE09bVswPT09aT9pOmktMV0sVD1tW3UtMjxpP3UtMTppKzFdLEE9bVt1LTM8aT91LTE6aSsyXSxjKW5pKE0sSSxULEEsUyxTKlMsUypTKlMscih0LGEpLHApO2Vsc2V7aWYoZClvPW5pKE0sSSxULEEsUyxTKlMsUypTKlMsTCwxKSxvPXJpKEwpO2Vsc2V7aWYoZilyZXR1cm4gUWUoSSxULFMpO289b2koTSxJLFQsQSxTLFMqUyxTKlMqUyl9cyh0LGEsbyl9ZWxzZSBpZihjKXRpKG1baV0sbVtpKzFdLFMscih0LGEpLHApO2Vsc2V7dmFyIG87aWYoZCl0aShtW2ldLG1baSsxXSxTLEwsMSksbz1yaShMKTtlbHNle2lmKGYpcmV0dXJuIFFlKG1baV0sbVtpKzFdLFMpO289SmUobVtpXSxtW2krMV0sUyl9cyh0LGEsbyl9fSxvbmRlc3Ryb3k6aX0pO3JldHVybiBlJiYic3BsaW5lIiE9PWUmJihrLmVhc2luZz1lKSxrfX19ZnVuY3Rpb24gbGkodCxlLGksbil7dGhpcy5fdHJhY2tzPXt9LHRoaXMuX3RhcmdldD10LHRoaXMuX2xvb3A9ZXx8ITEsdGhpcy5fZ2V0dGVyPWl8fEtlLHRoaXMuX3NldHRlcj1ufHwkZSx0aGlzLl9jbGlwQ291bnQ9MCx0aGlzLl9kZWxheT0wLHRoaXMuX2RvbmVMaXN0PVtdLHRoaXMuX29uZnJhbWVMaXN0PVtdLHRoaXMuX2NsaXBMaXN0PVtdfWxpLnByb3RvdHlwZT17d2hlbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3RyYWNrcztmb3IodmFyIG4gaW4gZSlpZihlLmhhc093blByb3BlcnR5KG4pKXtpZighaVtuXSl7aVtuXT1bXTt2YXIgbz10aGlzLl9nZXR0ZXIodGhpcy5fdGFyZ2V0LG4pO2lmKG51bGw9PW8pY29udGludWU7MCE9PXQmJmlbbl0ucHVzaCh7dGltZTowLHZhbHVlOmFpKG8pfSl9aVtuXS5wdXNoKHt0aW1lOnQsdmFsdWU6ZVtuXX0pfXJldHVybiB0aGlzfSxkdXJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29uZnJhbWVMaXN0LnB1c2godCksdGhpc30scGF1c2U6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2NsaXBMaXN0Lmxlbmd0aDt0KyspdGhpcy5fY2xpcExpc3RbdF0ucGF1c2UoKTt0aGlzLl9wYXVzZWQ9ITB9LHJlc3VtZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fY2xpcExpc3QubGVuZ3RoO3QrKyl0aGlzLl9jbGlwTGlzdFt0XS5yZXN1bWUoKTt0aGlzLl9wYXVzZWQ9ITF9LGlzUGF1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9wYXVzZWR9LF9kb25lQ2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl90cmFja3M9e30sdGhpcy5fY2xpcExpc3QubGVuZ3RoPTA7Zm9yKHZhciB0PXRoaXMuX2RvbmVMaXN0LGU9dC5sZW5ndGgsaT0wO2k8ZTtpKyspdFtpXS5jYWxsKHRoaXMpfSxzdGFydDpmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXstLWF8fG8uX2RvbmVDYWxsYmFjaygpfXZhciBuLG89dGhpcyxhPTA7Zm9yKHZhciByIGluIHRoaXMuX3RyYWNrcylpZih0aGlzLl90cmFja3MuaGFzT3duUHJvcGVydHkocikpe3ZhciBzPXNpKHRoaXMsdCxpLHRoaXMuX3RyYWNrc1tyXSxyLGUpO3MmJih0aGlzLl9jbGlwTGlzdC5wdXNoKHMpLGErKyx0aGlzLmFuaW1hdGlvbiYmdGhpcy5hbmltYXRpb24uYWRkQ2xpcChzKSxuPXMpfWlmKG4pe3ZhciBsPW4ub25mcmFtZTtuLm9uZnJhbWU9ZnVuY3Rpb24odCxlKXtsKHQsZSk7Zm9yKHZhciBpPTA7aTxvLl9vbmZyYW1lTGlzdC5sZW5ndGg7aSsrKW8uX29uZnJhbWVMaXN0W2ldKHQsZSl9fXJldHVybiBhfHx0aGlzLl9kb25lQ2FsbGJhY2soKSx0aGlzfSxzdG9wOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9jbGlwTGlzdCxpPXRoaXMuYW5pbWF0aW9uLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIG89ZVtuXTt0JiZvLm9uZnJhbWUodGhpcy5fdGFyZ2V0LDEpLGkmJmkucmVtb3ZlQ2xpcChvKX1lLmxlbmd0aD0wfSxkZWxheTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZGVsYXk9dCx0aGlzfSxkb25lOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9kb25lTGlzdC5wdXNoKHQpLHRoaXN9LGdldENsaXBzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NsaXBMaXN0fX07dmFyIHVpPTE7InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJih1aT1NYXRoLm1heCh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8MSwxKSk7dmFyIGhpPXVpLGNpPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBkaSgpe3RoaXMuYW5pbWF0b3JzPVtdfXZhciBmaT1jaTtmdW5jdGlvbiBwaSh0LGUsaSxuLG8sYSxyLHMpe3oobik/KGE9byxvPW4sbj0wKTpPKG8pPyhhPW8sbz0ibGluZWFyIixuPTApOk8obik/KGE9bixuPTApOmk9TyhpKT8oYT1pLDUwMCk6aXx8NTAwLHQuc3RvcEFuaW1hdGlvbigpLGZ1bmN0aW9uIHQoZSxpLG4sbyxhLHIscyl7dmFyIGw9e307dmFyIHU9MDtmb3IodmFyIGggaW4gbylvLmhhc093blByb3BlcnR5KGgpJiYobnVsbCE9bltoXT9SKG9baF0pJiYhUChvW2hdKT90KGUsaT9pKyIuIitoOmgsbltoXSxvW2hdLGEscixzKToocz8obFtoXT1uW2hdLGdpKGUsaSxoLG9baF0pKTpsW2hdPW9baF0sdSsrKTpudWxsPT1vW2hdfHxzfHxnaShlLGksaCxvW2hdKSk7MDx1JiZlLmFuaW1hdGUoaSwhMSkud2hlbihudWxsPT1hPzUwMDphLGwpLmRlbGF5KHJ8fDApfSh0LCIiLHQsZSxpLG4scyk7dmFyIGw9dC5hbmltYXRvcnMuc2xpY2UoKSx1PWwubGVuZ3RoO2Z1bmN0aW9uIGgoKXstLXV8fGEmJmEoKX11fHxhJiZhKCk7Zm9yKHZhciBjPTA7YzxsLmxlbmd0aDtjKyspbFtjXS5kb25lKGgpLnN0YXJ0KG8scil9ZnVuY3Rpb24gZ2kodCxlLGksbil7aWYoZSl7dmFyIG89e307b1tlXT17fSxvW2VdW2ldPW4sdC5hdHRyKG8pfWVsc2UgdC5hdHRyKGksbil9ZGkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpkaSxhbmltYXRlOmZ1bmN0aW9uKHQsZSl7dmFyIGksbj0hMSxvPXRoaXMsYT10aGlzLl9fenI7aWYodCl7dmFyIHI9dC5zcGxpdCgiLiIpLHM9bztuPSJzaGFwZSI9PT1yWzBdO2Zvcih2YXIgbD0wLHU9ci5sZW5ndGg7bDx1O2wrKylzPXMmJnNbcltsXV07cyYmKGk9cyl9ZWxzZSBpPW87aWYoaSl7dmFyIGg9by5hbmltYXRvcnMsYz1uZXcgbGkoaSxlKTtyZXR1cm4gYy5kdXJpbmcoZnVuY3Rpb24odCl7by5kaXJ0eShuKX0pLmRvbmUoZnVuY3Rpb24oKXtoLnNwbGljZShfKGgsYyksMSl9KSxoLnB1c2goYyksYSYmYS5hbmltYXRpb24uYWRkQW5pbWF0b3IoYyksY31maSgnUHJvcGVydHkgIicrdCsnIiBpcyBub3QgZXhpc3RlZCBpbiBlbGVtZW50ICcrby5pZCl9LHN0b3BBbmltYXRpb246ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuYW5pbWF0b3JzLGk9ZS5sZW5ndGgsbj0wO248aTtuKyspZVtuXS5zdG9wKHQpO3JldHVybiBlLmxlbmd0aD0wLHRoaXN9LGFuaW1hdGVUbzpmdW5jdGlvbih0LGUsaSxuLG8sYSl7cGkodGhpcyx0LGUsaSxuLG8sYSl9LGFuaW1hdGVGcm9tOmZ1bmN0aW9uKHQsZSxpLG4sbyxhKXtwaSh0aGlzLHQsZSxpLG4sbyxhLCEwKX19O3ZhciBtaT1mdW5jdGlvbih0KXtmZS5jYWxsKHRoaXMsdCksQ3QuY2FsbCh0aGlzLHQpLGRpLmNhbGwodGhpcyx0KSx0aGlzLmlkPXQuaWR8fG4oKX07bWkucHJvdG90eXBlPXt0eXBlOiJlbGVtZW50IixuYW1lOiIiLF9fenI6bnVsbCxpZ25vcmU6ITEsY2xpcFBhdGg6bnVsbCxpc0dyb3VwOiExLGRyaWZ0OmZ1bmN0aW9uKHQsZSl7c3dpdGNoKHRoaXMuZHJhZ2dhYmxlKXtjYXNlImhvcml6b250YWwiOmU9MDticmVhaztjYXNlInZlcnRpY2FsIjp0PTB9dmFyIGk9dGhpcy50cmFuc2Zvcm07KGk9aXx8KHRoaXMudHJhbnNmb3JtPVsxLDAsMCwxLDAsMF0pKVs0XSs9dCxpWzVdKz1lLHRoaXMuZGVjb21wb3NlVHJhbnNmb3JtKCksdGhpcy5kaXJ0eSghMSl9LGJlZm9yZVVwZGF0ZTpmdW5jdGlvbigpe30sYWZ0ZXJVcGRhdGU6ZnVuY3Rpb24oKXt9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlVHJhbnNmb3JtKCl9LHRyYXZlcnNlOmZ1bmN0aW9uKHQsZSl7fSxhdHRyS1Y6ZnVuY3Rpb24odCxlKXtpZigicG9zaXRpb24iPT09dHx8InNjYWxlIj09PXR8fCJvcmlnaW4iPT09dCl7aWYoZSl7dmFyIGk9dGhpc1t0XTsoaT1pfHwodGhpc1t0XT1bXSkpWzBdPWVbMF0saVsxXT1lWzFdfX1lbHNlIHRoaXNbdF09ZX0saGlkZTpmdW5jdGlvbigpe3RoaXMuaWdub3JlPSEwLHRoaXMuX196ciYmdGhpcy5fX3pyLnJlZnJlc2goKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMuaWdub3JlPSExLHRoaXMuX196ciYmdGhpcy5fX3pyLnJlZnJlc2goKX0sYXR0cjpmdW5jdGlvbih0LGUpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0aGlzLmF0dHJLVih0LGUpO2Vsc2UgaWYoUih0KSlmb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiZ0aGlzLmF0dHJLVihpLHRbaV0pO3JldHVybiB0aGlzLmRpcnR5KCExKSx0aGlzfSxzZXRDbGlwUGF0aDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9fenI7ZSYmdC5hZGRTZWxmVG9acihlKSx0aGlzLmNsaXBQYXRoJiZ0aGlzLmNsaXBQYXRoIT09dCYmdGhpcy5yZW1vdmVDbGlwUGF0aCgpLCh0aGlzLmNsaXBQYXRoPXQpLl9fenI9ZSwodC5fX2NsaXBUYXJnZXQ9dGhpcykuZGlydHkoITEpfSxyZW1vdmVDbGlwUGF0aDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY2xpcFBhdGg7dCYmKHQuX196ciYmdC5yZW1vdmVTZWxmRnJvbVpyKHQuX196ciksdC5fX3pyPW51bGwsdC5fX2NsaXBUYXJnZXQ9bnVsbCx0aGlzLmNsaXBQYXRoPW51bGwsdGhpcy5kaXJ0eSghMSkpfSxhZGRTZWxmVG9acjpmdW5jdGlvbih0KXt0aGlzLl9fenI9dDt2YXIgZT10aGlzLmFuaW1hdG9ycztpZihlKWZvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXQuYW5pbWF0aW9uLmFkZEFuaW1hdG9yKGVbaV0pO3RoaXMuY2xpcFBhdGgmJnRoaXMuY2xpcFBhdGguYWRkU2VsZlRvWnIodCl9LHJlbW92ZVNlbGZGcm9tWnI6ZnVuY3Rpb24odCl7dGhpcy5fX3pyPW51bGw7dmFyIGU9dGhpcy5hbmltYXRvcnM7aWYoZSlmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl0LmFuaW1hdGlvbi5yZW1vdmVBbmltYXRvcihlW2ldKTt0aGlzLmNsaXBQYXRoJiZ0aGlzLmNsaXBQYXRoLnJlbW92ZVNlbGZGcm9tWnIodCl9fSxiKG1pLGRpKSxiKG1pLGZlKSxiKG1pLEN0KTt2YXIgdmkseWkseGksX2ksd2k9YnQsYmk9TWF0aC5taW4sU2k9TWF0aC5tYXg7ZnVuY3Rpb24gTWkodCxlLGksbil7aTwwJiYodCs9aSxpPS1pKSxuPDAmJihlKz1uLG49LW4pLHRoaXMueD10LHRoaXMueT1lLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1ufU1pLnByb3RvdHlwZT17Y29uc3RydWN0b3I6TWksdW5pb246ZnVuY3Rpb24odCl7dmFyIGU9YmkodC54LHRoaXMueCksaT1iaSh0LnksdGhpcy55KTt0aGlzLndpZHRoPVNpKHQueCt0LndpZHRoLHRoaXMueCt0aGlzLndpZHRoKS1lLHRoaXMuaGVpZ2h0PVNpKHQueSt0LmhlaWdodCx0aGlzLnkrdGhpcy5oZWlnaHQpLWksdGhpcy54PWUsdGhpcy55PWl9LGFwcGx5VHJhbnNmb3JtOih2aT1bXSx5aT1bXSx4aT1bXSxfaT1bXSxmdW5jdGlvbih0KXtpZih0KXt2aVswXT14aVswXT10aGlzLngsdmlbMV09X2lbMV09dGhpcy55LHlpWzBdPV9pWzBdPXRoaXMueCt0aGlzLndpZHRoLHlpWzFdPXhpWzFdPXRoaXMueSt0aGlzLmhlaWdodCx3aSh2aSx2aSx0KSx3aSh5aSx5aSx0KSx3aSh4aSx4aSx0KSx3aShfaSxfaSx0KSx0aGlzLng9YmkodmlbMF0seWlbMF0seGlbMF0sX2lbMF0pLHRoaXMueT1iaSh2aVsxXSx5aVsxXSx4aVsxXSxfaVsxXSk7dmFyIGU9U2kodmlbMF0seWlbMF0seGlbMF0sX2lbMF0pLGk9U2kodmlbMV0seWlbMV0seGlbMV0sX2lbMV0pO3RoaXMud2lkdGg9ZS10aGlzLngsdGhpcy5oZWlnaHQ9aS10aGlzLnl9fSksY2FsY3VsYXRlVHJhbnNmb3JtOmZ1bmN0aW9uKHQpe3ZhciBlPXQud2lkdGgvdGhpcy53aWR0aCxpPXQuaGVpZ2h0L3RoaXMuaGVpZ2h0LG49ZWUoKTtyZXR1cm4gYWUobixuLFstdGhpcy54LC10aGlzLnldKSxzZShuLG4sW2UsaV0pLGFlKG4sbixbdC54LHQueV0pLG59LGludGVyc2VjdDpmdW5jdGlvbih0KXtpZighdClyZXR1cm4hMTt0IGluc3RhbmNlb2YgTWl8fCh0PU1pLmNyZWF0ZSh0KSk7dmFyIGU9dGhpcyxpPWUueCxuPWUueCtlLndpZHRoLG89ZS55LGE9ZS55K2UuaGVpZ2h0LHI9dC54LHM9dC54K3Qud2lkdGgsbD10LnksdT10LnkrdC5oZWlnaHQ7cmV0dXJuIShuPHJ8fHM8aXx8YTxsfHx1PG8pfSxjb250YWluOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcztyZXR1cm4gdD49aS54JiZ0PD1pLngraS53aWR0aCYmZT49aS55JiZlPD1pLnkraS5oZWlnaHR9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBNaSh0aGlzLngsdGhpcy55LHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfSxjb3B5OmZ1bmN0aW9uKHQpe3RoaXMueD10LngsdGhpcy55PXQueSx0aGlzLndpZHRoPXQud2lkdGgsdGhpcy5oZWlnaHQ9dC5oZWlnaHR9LHBsYWluOmZ1bmN0aW9uKCl7cmV0dXJue3g6dGhpcy54LHk6dGhpcy55LHdpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fX19LE1pLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IE1pKHQueCx0LnksdC53aWR0aCx0LmhlaWdodCl9O3ZhciBJaT1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdD10fHx7fSxtaS5jYWxsKHRoaXMsdCksdCl0Lmhhc093blByb3BlcnR5KGUpJiYodGhpc1tlXT10W2VdKTt0aGlzLl9jaGlsZHJlbj1bXSx0aGlzLl9fc3RvcmFnZT1udWxsLHRoaXMuX19kaXJ0eT0hMH07SWkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpJaSxpc0dyb3VwOiEwLHR5cGU6Imdyb3VwIixzaWxlbnQ6ITEsY2hpbGRyZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4uc2xpY2UoKX0sY2hpbGRBdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5bdF19LGNoaWxkT2ZOYW1lOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9jaGlsZHJlbixpPTA7aTxlLmxlbmd0aDtpKyspaWYoZVtpXS5uYW1lPT09dClyZXR1cm4gZVtpXX0sY2hpbGRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5sZW5ndGh9LGFkZDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdCE9PXRoaXMmJnQucGFyZW50IT09dGhpcyYmKHRoaXMuX2NoaWxkcmVuLnB1c2godCksdGhpcy5fZG9BZGQodCkpLHRoaXN9LGFkZEJlZm9yZTpmdW5jdGlvbih0LGUpe2lmKHQmJnQhPT10aGlzJiZ0LnBhcmVudCE9PXRoaXMmJmUmJmUucGFyZW50PT09dGhpcyl7dmFyIGk9dGhpcy5fY2hpbGRyZW4sbj1pLmluZGV4T2YoZSk7MDw9biYmKGkuc3BsaWNlKG4sMCx0KSx0aGlzLl9kb0FkZCh0KSl9cmV0dXJuIHRoaXN9LF9kb0FkZDpmdW5jdGlvbih0KXt0LnBhcmVudCYmdC5wYXJlbnQucmVtb3ZlKHQpO3ZhciBlPSh0LnBhcmVudD10aGlzKS5fX3N0b3JhZ2UsaT10aGlzLl9fenI7ZSYmZSE9PXQuX19zdG9yYWdlJiYoZS5hZGRUb1N0b3JhZ2UodCksdCBpbnN0YW5jZW9mIElpJiZ0LmFkZENoaWxkcmVuVG9TdG9yYWdlKGUpKSxpJiZpLnJlZnJlc2goKX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX196cixpPXRoaXMuX19zdG9yYWdlLG49dGhpcy5fY2hpbGRyZW4sbz1fKG4sdCk7cmV0dXJuIG88MHx8KG4uc3BsaWNlKG8sMSksdC5wYXJlbnQ9bnVsbCxpJiYoaS5kZWxGcm9tU3RvcmFnZSh0KSx0IGluc3RhbmNlb2YgSWkmJnQuZGVsQ2hpbGRyZW5Gcm9tU3RvcmFnZShpKSksZSYmZS5yZWZyZXNoKCkpLHRoaXN9LHJlbW92ZUFsbDpmdW5jdGlvbigpe3ZhciB0LGUsaT10aGlzLl9jaGlsZHJlbixuPXRoaXMuX19zdG9yYWdlO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspdD1pW2VdLG4mJihuLmRlbEZyb21TdG9yYWdlKHQpLHQgaW5zdGFuY2VvZiBJaSYmdC5kZWxDaGlsZHJlbkZyb21TdG9yYWdlKG4pKSx0LnBhcmVudD1udWxsO3JldHVybiBpLmxlbmd0aD0wLHRoaXN9LGVhY2hDaGlsZDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLl9jaGlsZHJlbixuPTA7bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl07dC5jYWxsKGUsbyxuKX1yZXR1cm4gdGhpc30sdHJhdmVyc2U6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MDtpPHRoaXMuX2NoaWxkcmVuLmxlbmd0aDtpKyspe3ZhciBuPXRoaXMuX2NoaWxkcmVuW2ldO3QuY2FsbChlLG4pLCJncm91cCI9PT1uLnR5cGUmJm4udHJhdmVyc2UodCxlKX1yZXR1cm4gdGhpc30sYWRkQ2hpbGRyZW5Ub1N0b3JhZ2U6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9jaGlsZHJlbi5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLl9jaGlsZHJlbltlXTt0LmFkZFRvU3RvcmFnZShpKSxpIGluc3RhbmNlb2YgSWkmJmkuYWRkQ2hpbGRyZW5Ub1N0b3JhZ2UodCl9fSxkZWxDaGlsZHJlbkZyb21TdG9yYWdlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5fY2hpbGRyZW4ubGVuZ3RoO2UrKyl7dmFyIGk9dGhpcy5fY2hpbGRyZW5bZV07dC5kZWxGcm9tU3RvcmFnZShpKSxpIGluc3RhbmNlb2YgSWkmJmkuZGVsQ2hpbGRyZW5Gcm9tU3RvcmFnZSh0KX19LGRpcnR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19kaXJ0eT0hMCx0aGlzLl9fenImJnRoaXMuX196ci5yZWZyZXNoKCksdGhpc30sZ2V0Qm91bmRpbmdSZWN0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1udWxsLGk9bmV3IE1pKDAsMCwwLDApLG49dHx8dGhpcy5fY2hpbGRyZW4sbz1bXSxhPTA7YTxuLmxlbmd0aDthKyspe3ZhciByPW5bYV07aWYoIXIuaWdub3JlJiYhci5pbnZpc2libGUpe3ZhciBzPXIuZ2V0Qm91bmRpbmdSZWN0KCksbD1yLmdldExvY2FsVHJhbnNmb3JtKG8pO2w/KGkuY29weShzKSxpLmFwcGx5VHJhbnNmb3JtKGwpLChlPWV8fGkuY2xvbmUoKSkudW5pb24oaSkpOihlPWV8fHMuY2xvbmUoKSkudW5pb24ocyl9fXJldHVybiBlfHxpfX0sdyhJaSxtaSk7dmFyIFRpPTMyLEFpPTc7ZnVuY3Rpb24gRGkodCxlLGksbil7dmFyIG89ZSsxO2lmKG89PT1pKXJldHVybiAxO2lmKG4odFtvKytdLHRbZV0pPDApe2Zvcig7bzxpJiZuKHRbb10sdFtvLTFdKTwwOylvKys7IWZ1bmN0aW9uKHQsZSxpKXtpLS07Zm9yKDtlPGk7KXt2YXIgbj10W2VdO3RbZSsrXT10W2ldLHRbaS0tXT1ufX0odCxlLG8pfWVsc2UgZm9yKDtvPGkmJjA8PW4odFtvXSx0W28tMV0pOylvKys7cmV0dXJuIG8tZX1mdW5jdGlvbiBDaSh0LGUsaSxuLG8pe2ZvcihuPT09ZSYmbisrO248aTtuKyspe2Zvcih2YXIgYSxyPXRbbl0scz1lLGw9bjtzPGw7KW8ocix0W2E9cytsPj4+MV0pPDA/bD1hOnM9MSthO3ZhciB1PW4tcztzd2l0Y2godSl7Y2FzZSAzOnRbcyszXT10W3MrMl07Y2FzZSAyOnRbcysyXT10W3MrMV07Y2FzZSAxOnRbcysxXT10W3NdO2JyZWFrO2RlZmF1bHQ6Zm9yKDswPHU7KXRbcyt1XT10W3MrdS0xXSx1LS19dFtzXT1yfX1mdW5jdGlvbiBMaSh0LGUsaSxuLG8sYSl7dmFyIHI9MCxzPTAsbD0xO2lmKDA8YSh0LGVbaStvXSkpe2ZvcihzPW4tbztsPHMmJjA8YSh0LGVbaStvK2xdKTspKGw9MSsoKHI9bCk8PDEpKTw9MCYmKGw9cyk7czxsJiYobD1zKSxyKz1vLGwrPW99ZWxzZXtmb3Iocz1vKzE7bDxzJiZhKHQsZVtpK28tbF0pPD0wOykobD0xKygocj1sKTw8MSkpPD0wJiYobD1zKTtzPGwmJihsPXMpO3ZhciB1PXI7cj1vLWwsbD1vLXV9Zm9yKHIrKztyPGw7KXt2YXIgaD1yKyhsLXI+Pj4xKTswPGEodCxlW2kraF0pP3I9aCsxOmw9aH1yZXR1cm4gbH1mdW5jdGlvbiBraSh0LGUsaSxuLG8sYSl7dmFyIHI9MCxzPTAsbD0xO2lmKGEodCxlW2krb10pPDApe2ZvcihzPW8rMTtsPHMmJmEodCxlW2krby1sXSk8MDspKGw9MSsoKHI9bCk8PDEpKTw9MCYmKGw9cyk7czxsJiYobD1zKTt2YXIgdT1yO3I9by1sLGw9by11fWVsc2V7Zm9yKHM9bi1vO2w8cyYmMDw9YSh0LGVbaStvK2xdKTspKGw9MSsoKHI9bCk8PDEpKTw9MCYmKGw9cyk7czxsJiYobD1zKSxyKz1vLGwrPW99Zm9yKHIrKztyPGw7KXt2YXIgaD1yKyhsLXI+Pj4xKTthKHQsZVtpK2hdKTwwP2w9aDpyPWgrMX1yZXR1cm4gbH1mdW5jdGlvbiBQaShwLGcpe3ZhciByLHMsbT1BaSxsPTAsdj1bXTtmdW5jdGlvbiBlKHQpe3ZhciBlPXJbdF0saT1zW3RdLG49clt0KzFdLG89c1t0KzFdO3NbdF09aStvLHQ9PT1sLTMmJihyW3QrMV09clt0KzJdLHNbdCsxXT1zW3QrMl0pLGwtLTt2YXIgYT1raShwW25dLHAsZSxpLDAsZyk7ZSs9YSwwIT09KGktPWEpJiYwIT09KG89TGkocFtlK2ktMV0scCxuLG8sby0xLGcpKSYmKGk8PW8/ZnVuY3Rpb24odCxlLGksbil7dmFyIG89MDtmb3Iobz0wO288ZTtvKyspdltvXT1wW3Qrb107dmFyIGE9MCxyPWkscz10O2lmKHBbcysrXT1wW3IrK10sMD09LS1uKXtmb3Iobz0wO288ZTtvKyspcFtzK29dPXZbYStvXTtyZXR1cm59aWYoMT09PWUpe2ZvcihvPTA7bzxuO28rKylwW3Mrb109cFtyK29dO3JldHVybiBwW3Mrbl09dlthXX12YXIgbCx1LGgsYz1tO2Zvcig7Oyl7dT1sPTAsaD0hMTtkb3tpZihnKHBbcl0sdlthXSk8MCl7aWYocFtzKytdPXBbcisrXSx1KyssKGw9MCk9PS0tbil7aD0hMDticmVha319ZWxzZSBpZihwW3MrK109dlthKytdLGwrKyx1PTAsMT09LS1lKXtoPSEwO2JyZWFrfX13aGlsZSgobHx1KTxjKTtpZihoKWJyZWFrO2Rve2lmKDAhPT0obD1raShwW3JdLHYsYSxlLDAsZykpKXtmb3Iobz0wO288bDtvKyspcFtzK29dPXZbYStvXTtpZihzKz1sLGErPWwsKGUtPWwpPD0xKXtoPSEwO2JyZWFrfX1pZihwW3MrK109cFtyKytdLDA9PS0tbil7aD0hMDticmVha31pZigwIT09KHU9TGkodlthXSxwLHIsbiwwLGcpKSl7Zm9yKG89MDtvPHU7bysrKXBbcytvXT1wW3Irb107aWYocys9dSxyKz11LDA9PT0obi09dSkpe2g9ITA7YnJlYWt9fWlmKHBbcysrXT12W2ErK10sMT09LS1lKXtoPSEwO2JyZWFrfWMtLX13aGlsZShBaTw9bHx8QWk8PXUpO2lmKGgpYnJlYWs7YzwwJiYoYz0wKSxjKz0yfWlmKChtPWMpPDEmJihtPTEpLDE9PT1lKXtmb3Iobz0wO288bjtvKyspcFtzK29dPXBbcitvXTtwW3Mrbl09dlthXX1lbHNle2lmKDA9PT1lKXRocm93IG5ldyBFcnJvcjtmb3Iobz0wO288ZTtvKyspcFtzK29dPXZbYStvXX19KGUsaSxuLG8pOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPTA7Zm9yKG89MDtvPG47bysrKXZbb109cFtpK29dO3ZhciBhPXQrZS0xLHI9bi0xLHM9aStuLTEsbD0wLHU9MDtpZihwW3MtLV09cFthLS1dLDA9PS0tZSl7Zm9yKGw9cy0obi0xKSxvPTA7bzxuO28rKylwW2wrb109dltvXTtyZXR1cm59aWYoMT09PW4pe2Zvcih1PShzLT1lKSsxLGw9KGEtPWUpKzEsbz1lLTE7MDw9bztvLS0pcFt1K29dPXBbbCtvXTtyZXR1cm4gcFtzXT12W3JdfXZhciBoPW07Zm9yKDs7KXt2YXIgYz0wLGQ9MCxmPSExO2Rve2lmKGcodltyXSxwW2FdKTwwKXtpZihwW3MtLV09cFthLS1dLGMrKywoZD0wKT09LS1lKXtmPSEwO2JyZWFrfX1lbHNlIGlmKHBbcy0tXT12W3ItLV0sZCsrLGM9MCwxPT0tLW4pe2Y9ITA7YnJlYWt9fXdoaWxlKChjfGQpPGgpO2lmKGYpYnJlYWs7ZG97aWYoMCE9PShjPWUta2kodltyXSxwLHQsZSxlLTEsZykpKXtmb3IoZS09Yyx1PShzLT1jKSsxLGw9KGEtPWMpKzEsbz1jLTE7MDw9bztvLS0pcFt1K29dPXBbbCtvXTtpZigwPT09ZSl7Zj0hMDticmVha319aWYocFtzLS1dPXZbci0tXSwxPT0tLW4pe2Y9ITA7YnJlYWt9aWYoMCE9PShkPW4tTGkocFthXSx2LDAsbixuLTEsZykpKXtmb3Iobi09ZCx1PShzLT1kKSsxLGw9KHItPWQpKzEsbz0wO288ZDtvKyspcFt1K29dPXZbbCtvXTtpZihuPD0xKXtmPSEwO2JyZWFrfX1pZihwW3MtLV09cFthLS1dLDA9PS0tZSl7Zj0hMDticmVha31oLS19d2hpbGUoQWk8PWN8fEFpPD1kKTtpZihmKWJyZWFrO2g8MCYmKGg9MCksaCs9Mn0obT1oKTwxJiYobT0xKTtpZigxPT09bil7Zm9yKHU9KHMtPWUpKzEsbD0oYS09ZSkrMSxvPWUtMTswPD1vO28tLSlwW3Urb109cFtsK29dO3Bbc109dltyXX1lbHNle2lmKDA9PT1uKXRocm93IG5ldyBFcnJvcjtmb3IobD1zLShuLTEpLG89MDtvPG47bysrKXBbbCtvXT12W29dfX0oZSxpLG4sbykpfXI9W10scz1bXSx0aGlzLm1lcmdlUnVucz1mdW5jdGlvbigpe2Zvcig7MTxsOyl7dmFyIHQ9bC0yO2lmKDE8PXQmJnNbdC0xXTw9c1t0XStzW3QrMV18fDI8PXQmJnNbdC0yXTw9c1t0XStzW3QtMV0pc1t0LTFdPHNbdCsxXSYmdC0tO2Vsc2UgaWYoc1t0XT5zW3QrMV0pYnJlYWs7ZSh0KX19LHRoaXMuZm9yY2VNZXJnZVJ1bnM9ZnVuY3Rpb24oKXtmb3IoOzE8bDspe3ZhciB0PWwtMjswPHQmJnNbdC0xXTxzW3QrMV0mJnQtLSxlKHQpfX0sdGhpcy5wdXNoUnVuPWZ1bmN0aW9uKHQsZSl7cltsXT10LHNbbF09ZSxsKz0xfX1mdW5jdGlvbiBOaSh0LGUsaSxuKXtpPWl8fDA7dmFyIG89KG49bnx8dC5sZW5ndGgpLWk7aWYoIShvPDIpKXt2YXIgYT0wO2lmKG88VGkpQ2kodCxpLG4saSsoYT1EaSh0LGksbixlKSksZSk7ZWxzZXt2YXIgcj1uZXcgUGkodCxlKSxzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO1RpPD10OyllfD0xJnQsdD4+PTE7cmV0dXJuIHQrZX0obyk7ZG97aWYoKGE9RGkodCxpLG4sZSkpPHMpe3ZhciBsPW87czxsJiYobD1zKSxDaSh0LGksaStsLGkrYSxlKSxhPWx9ci5wdXNoUnVuKGksYSksci5tZXJnZVJ1bnMoKSxvLT1hLGkrPWF9d2hpbGUoMCE9PW8pO3IuZm9yY2VNZXJnZVJ1bnMoKX19fWZ1bmN0aW9uIE9pKHQsZSl7cmV0dXJuIHQuemxldmVsPT09ZS56bGV2ZWw/dC56PT09ZS56P3QuejItZS56Mjp0LnotZS56OnQuemxldmVsLWUuemxldmVsfWZ1bmN0aW9uIEVpKCl7dGhpcy5fcm9vdHM9W10sdGhpcy5fZGlzcGxheUxpc3Q9W10sdGhpcy5fZGlzcGxheUxpc3RMZW49MH1FaS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkVpLHRyYXZlcnNlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPTA7aTx0aGlzLl9yb290cy5sZW5ndGg7aSsrKXRoaXMuX3Jvb3RzW2ldLnRyYXZlcnNlKHQsZSl9LGdldERpc3BsYXlMaXN0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9ZXx8ITEsdCYmdGhpcy51cGRhdGVEaXNwbGF5TGlzdChlKSx0aGlzLl9kaXNwbGF5TGlzdH0sdXBkYXRlRGlzcGxheUxpc3Q6ZnVuY3Rpb24odCl7dGhpcy5fZGlzcGxheUxpc3RMZW49MDtmb3IodmFyIGU9dGhpcy5fcm9vdHMsaT10aGlzLl9kaXNwbGF5TGlzdCxuPTAsbz1lLmxlbmd0aDtuPG87bisrKXRoaXMuX3VwZGF0ZUFuZEFkZERpc3BsYXlhYmxlKGVbbl0sbnVsbCx0KTtpLmxlbmd0aD10aGlzLl9kaXNwbGF5TGlzdExlbix2LmNhbnZhc1N1cHBvcnRlZCYmTmkoaSxPaSl9LF91cGRhdGVBbmRBZGREaXNwbGF5YWJsZTpmdW5jdGlvbih0LGUsaSl7aWYoIXQuaWdub3JlfHxpKXt0LmJlZm9yZVVwZGF0ZSgpLHQuX19kaXJ0eSYmdC51cGRhdGUoKSx0LmFmdGVyVXBkYXRlKCk7dmFyIG49dC5jbGlwUGF0aDtpZihuKXtlPWU/ZS5zbGljZSgpOltdO2Zvcih2YXIgbz1uLGE9dDtvOylvLnBhcmVudD1hLG8udXBkYXRlVHJhbnNmb3JtKCksZS5wdXNoKG8pLG89KGE9bykuY2xpcFBhdGh9aWYodC5pc0dyb3VwKXtmb3IodmFyIHI9dC5fY2hpbGRyZW4scz0wO3M8ci5sZW5ndGg7cysrKXt2YXIgbD1yW3NdO3QuX19kaXJ0eSYmKGwuX19kaXJ0eT0hMCksdGhpcy5fdXBkYXRlQW5kQWRkRGlzcGxheWFibGUobCxlLGkpfXQuX19kaXJ0eT0hMX1lbHNlIHQuX19jbGlwUGF0aHM9ZSx0aGlzLl9kaXNwbGF5TGlzdFt0aGlzLl9kaXNwbGF5TGlzdExlbisrXT10fX0sYWRkUm9vdDpmdW5jdGlvbih0KXt0Ll9fc3RvcmFnZSE9PXRoaXMmJih0IGluc3RhbmNlb2YgSWkmJnQuYWRkQ2hpbGRyZW5Ub1N0b3JhZ2UodGhpcyksdGhpcy5hZGRUb1N0b3JhZ2UodCksdGhpcy5fcm9vdHMucHVzaCh0KSl9LGRlbFJvb3Q6ZnVuY3Rpb24odCl7aWYobnVsbD09dCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9yb290cy5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLl9yb290c1tlXTtpIGluc3RhbmNlb2YgSWkmJmkuZGVsQ2hpbGRyZW5Gcm9tU3RvcmFnZSh0aGlzKX1yZXR1cm4gdGhpcy5fcm9vdHM9W10sdGhpcy5fZGlzcGxheUxpc3Q9W10sdm9pZCh0aGlzLl9kaXNwbGF5TGlzdExlbj0wKX1pZih0IGluc3RhbmNlb2YgQXJyYXkpe2U9MDtmb3IodmFyIG49dC5sZW5ndGg7ZTxuO2UrKyl0aGlzLmRlbFJvb3QodFtlXSl9ZWxzZXt2YXIgbz1fKHRoaXMuX3Jvb3RzLHQpOzA8PW8mJih0aGlzLmRlbEZyb21TdG9yYWdlKHQpLHRoaXMuX3Jvb3RzLnNwbGljZShvLDEpLHQgaW5zdGFuY2VvZiBJaSYmdC5kZWxDaGlsZHJlbkZyb21TdG9yYWdlKHRoaXMpKX19LGFkZFRvU3RvcmFnZTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmKHQuX19zdG9yYWdlPXRoaXMsdC5kaXJ0eSghMSkpLHRoaXN9LGRlbEZyb21TdG9yYWdlOmZ1bmN0aW9uKHQpe3JldHVybiB0JiYodC5fX3N0b3JhZ2U9bnVsbCksdGhpc30sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX3JlbmRlckxpc3Q9dGhpcy5fcm9vdHM9bnVsbH0sZGlzcGxheWFibGVTb3J0RnVuYzpPaX07dmFyIHppPXtzaGFkb3dCbHVyOjEsc2hhZG93T2Zmc2V0WDoxLHNoYWRvd09mZnNldFk6MSx0ZXh0U2hhZG93Qmx1cjoxLHRleHRTaGFkb3dPZmZzZXRYOjEsdGV4dFNoYWRvd09mZnNldFk6MSx0ZXh0Qm94U2hhZG93Qmx1cjoxLHRleHRCb3hTaGFkb3dPZmZzZXRYOjEsdGV4dEJveFNoYWRvd09mZnNldFk6MX0sUmk9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB6aS5oYXNPd25Qcm9wZXJ0eShlKT9pKnQuZHByOml9LEJpPXtOT05FOjAsU1RZTEVfQklORDoxLFBMQUlOX1RFWFQ6Mn0sVmk9OSxHaT1bWyJzaGFkb3dCbHVyIiwwXSxbInNoYWRvd09mZnNldFgiLDBdLFsic2hhZG93T2Zmc2V0WSIsMF0sWyJzaGFkb3dDb2xvciIsIiMwMDAiXSxbImxpbmVDYXAiLCJidXR0Il0sWyJsaW5lSm9pbiIsIm1pdGVyIl0sWyJtaXRlckxpbWl0IiwxMF1dLEZpPWZ1bmN0aW9uKHQpe3RoaXMuZXh0ZW5kRnJvbSh0LCExKX07ZnVuY3Rpb24gV2kodCxlLGkpe3ZhciBuPW51bGw9PWUueD8wOmUueCxvPW51bGw9PWUueDI/MTplLngyLGE9bnVsbD09ZS55PzA6ZS55LHI9bnVsbD09ZS55Mj8wOmUueTI7cmV0dXJuIGUuZ2xvYmFsfHwobj1uKmkud2lkdGgraS54LG89byppLndpZHRoK2kueCxhPWEqaS5oZWlnaHQraS55LHI9cippLmhlaWdodCtpLnkpLG49aXNOYU4obik/MDpuLG89aXNOYU4obyk/MTpvLGE9aXNOYU4oYSk/MDphLHI9aXNOYU4ocik/MDpyLHQuY3JlYXRlTGluZWFyR3JhZGllbnQobixhLG8scil9ZnVuY3Rpb24gSGkodCxlLGkpe3ZhciBuPWkud2lkdGgsbz1pLmhlaWdodCxhPU1hdGgubWluKG4sbykscj1udWxsPT1lLng/LjU6ZS54LHM9bnVsbD09ZS55Py41OmUueSxsPW51bGw9PWUucj8uNTplLnI7cmV0dXJuIGUuZ2xvYmFsfHwocj1yKm4raS54LHM9cypvK2kueSxsKj1hKSx0LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHIscywwLHIscyxsKX1GaS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkZpLGZpbGw6IiMwMDAiLHN0cm9rZTpudWxsLG9wYWNpdHk6MSxmaWxsT3BhY2l0eTpudWxsLHN0cm9rZU9wYWNpdHk6bnVsbCxsaW5lRGFzaDpudWxsLGxpbmVEYXNoT2Zmc2V0OjAsc2hhZG93Qmx1cjowLHNoYWRvd09mZnNldFg6MCxzaGFkb3dPZmZzZXRZOjAsbGluZVdpZHRoOjEsc3Ryb2tlTm9TY2FsZTohMSx0ZXh0Om51bGwsZm9udDpudWxsLHRleHRGb250Om51bGwsZm9udFN0eWxlOm51bGwsZm9udFdlaWdodDpudWxsLGZvbnRTaXplOm51bGwsZm9udEZhbWlseTpudWxsLHRleHRUYWc6bnVsbCx0ZXh0RmlsbDoiIzAwMCIsdGV4dFN0cm9rZTpudWxsLHRleHRXaWR0aDpudWxsLHRleHRIZWlnaHQ6bnVsbCx0ZXh0U3Ryb2tlV2lkdGg6MCx0ZXh0TGluZUhlaWdodDpudWxsLHRleHRQb3NpdGlvbjoiaW5zaWRlIix0ZXh0UmVjdDpudWxsLHRleHRPZmZzZXQ6bnVsbCx0ZXh0QWxpZ246bnVsbCx0ZXh0VmVydGljYWxBbGlnbjpudWxsLHRleHREaXN0YW5jZTo1LHRleHRTaGFkb3dDb2xvcjoidHJhbnNwYXJlbnQiLHRleHRTaGFkb3dCbHVyOjAsdGV4dFNoYWRvd09mZnNldFg6MCx0ZXh0U2hhZG93T2Zmc2V0WTowLHRleHRCb3hTaGFkb3dDb2xvcjoidHJhbnNwYXJlbnQiLHRleHRCb3hTaGFkb3dCbHVyOjAsdGV4dEJveFNoYWRvd09mZnNldFg6MCx0ZXh0Qm94U2hhZG93T2Zmc2V0WTowLHRyYW5zZm9ybVRleHQ6ITEsdGV4dFJvdGF0aW9uOjAsdGV4dE9yaWdpbjpudWxsLHRleHRCYWNrZ3JvdW5kQ29sb3I6bnVsbCx0ZXh0Qm9yZGVyQ29sb3I6bnVsbCx0ZXh0Qm9yZGVyV2lkdGg6MCx0ZXh0Qm9yZGVyUmFkaXVzOjAsdGV4dFBhZGRpbmc6bnVsbCxyaWNoOm51bGwsdHJ1bmNhdGU6bnVsbCxibGVuZDpudWxsLGJpbmQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMsbz1pJiZpLnN0eWxlLGE9IW98fHQuX19hdHRyQ2FjaGVkQnkhPT1CaS5TVFlMRV9CSU5EO3QuX19hdHRyQ2FjaGVkQnk9QmkuU1RZTEVfQklORDtmb3IodmFyIHI9MDtyPEdpLmxlbmd0aDtyKyspe3ZhciBzPUdpW3JdLGw9c1swXTshYSYmbltsXT09PW9bbF18fCh0W2xdPVJpKHQsbCxuW2xdfHxzWzFdKSl9aWYoIWEmJm4uZmlsbD09PW8uZmlsbHx8KHQuZmlsbFN0eWxlPW4uZmlsbCksIWEmJm4uc3Ryb2tlPT09by5zdHJva2V8fCh0LnN0cm9rZVN0eWxlPW4uc3Ryb2tlKSwhYSYmbi5vcGFjaXR5PT09by5vcGFjaXR5fHwodC5nbG9iYWxBbHBoYT1udWxsPT1uLm9wYWNpdHk/MTpuLm9wYWNpdHkpLCFhJiZuLmJsZW5kPT09by5ibGVuZHx8KHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPW4uYmxlbmR8fCJzb3VyY2Utb3ZlciIpLHRoaXMuaGFzU3Ryb2tlKCkpe3ZhciB1PW4ubGluZVdpZHRoO3QubGluZVdpZHRoPXUvKHRoaXMuc3Ryb2tlTm9TY2FsZSYmZSYmZS5nZXRMaW5lU2NhbGU/ZS5nZXRMaW5lU2NhbGUoKToxKX19LGhhc0ZpbGw6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmZpbGw7cmV0dXJuIG51bGwhPXQmJiJub25lIiE9PXR9LGhhc1N0cm9rZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3Ryb2tlO3JldHVybiBudWxsIT10JiYibm9uZSIhPT10JiYwPHRoaXMubGluZVdpZHRofSxleHRlbmRGcm9tOmZ1bmN0aW9uKHQsZSl7aWYodClmb3IodmFyIGkgaW4gdCkhdC5oYXNPd25Qcm9wZXJ0eShpKXx8ITAhPT1lJiYoITE9PT1lP3RoaXMuaGFzT3duUHJvcGVydHkoaSk6bnVsbD09dFtpXSl8fCh0aGlzW2ldPXRbaV0pfSxzZXQ6ZnVuY3Rpb24odCxlKXsic3RyaW5nIj09dHlwZW9mIHQ/dGhpc1t0XT1lOnRoaXMuZXh0ZW5kRnJvbSh0LCEwKX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgdGhpcy5jb25zdHJ1Y3RvcjtyZXR1cm4gdC5leHRlbmRGcm9tKHRoaXMsITApLHR9LGdldEdyYWRpZW50OmZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49KCJyYWRpYWwiPT09ZS50eXBlP0hpOldpKSh0LGUsaSksbz1lLmNvbG9yU3RvcHMsYT0wO2E8by5sZW5ndGg7YSsrKW4uYWRkQ29sb3JTdG9wKG9bYV0ub2Zmc2V0LG9bYV0uY29sb3IpO3JldHVybiBufX07Zm9yKHZhciBaaT1GaS5wcm90b3R5cGUsVWk9MDtVaTxHaS5sZW5ndGg7VWkrKyl7dmFyIFhpPUdpW1VpXTtYaVswXWluIFppfHwoWmlbWGlbMF1dPVhpWzFdKX1GaS5nZXRHcmFkaWVudD1aaS5nZXRHcmFkaWVudDtmdW5jdGlvbiBZaSh0LGUpe3RoaXMuaW1hZ2U9dCx0aGlzLnJlcGVhdD1lLHRoaXMudHlwZT0icGF0dGVybiJ9ZnVuY3Rpb24gamkoKXtyZXR1cm4hMX1mdW5jdGlvbiBxaSh0LGUsaSl7dmFyIG49ZygpLG89ZS5nZXRXaWR0aCgpLGE9ZS5nZXRIZWlnaHQoKSxyPW4uc3R5bGU7cmV0dXJuIHImJihyLnBvc2l0aW9uPSJhYnNvbHV0ZSIsci5sZWZ0PTAsci50b3A9MCxyLndpZHRoPW8rInB4IixyLmhlaWdodD1hKyJweCIsbi5zZXRBdHRyaWJ1dGUoImRhdGEtenItZG9tLWlkIix0KSksbi53aWR0aD1vKmksbi5oZWlnaHQ9YSppLG59ZnVuY3Rpb24gS2kodCxlLGkpe3ZhciBuO2k9aXx8aGksInN0cmluZyI9PXR5cGVvZiB0P249cWkodCxlLGkpOlIodCkmJih0PShuPXQpLmlkKSx0aGlzLmlkPXQ7dmFyIG89KHRoaXMuZG9tPW4pLnN0eWxlO28mJihuLm9uc2VsZWN0c3RhcnQ9amksb1siLXdlYmtpdC11c2VyLXNlbGVjdCJdPSJub25lIixvWyJ1c2VyLXNlbGVjdCJdPSJub25lIixvWyItd2Via2l0LXRvdWNoLWNhbGxvdXQiXT0ibm9uZSIsb1siLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yIl09InJnYmEoMCwwLDAsMCkiLG8ucGFkZGluZz0wLG8ubWFyZ2luPTAsb1siYm9yZGVyLXdpZHRoIl09MCksdGhpcy5kb21CYWNrPW51bGwsdGhpcy5jdHhCYWNrPW51bGwsdGhpcy5wYWludGVyPWUsdGhpcy5jb25maWc9bnVsbCx0aGlzLmNsZWFyQ29sb3I9MCx0aGlzLm1vdGlvbkJsdXI9ITEsdGhpcy5sYXN0RnJhbWVBbHBoYT0uNyx0aGlzLmRwcj1pfUtpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6S2ksX19kaXJ0eTohMCxfX3VzZWQ6IShZaS5wcm90b3R5cGUuZ2V0Q2FudmFzUGF0dGVybj1mdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVQYXR0ZXJuKHRoaXMuaW1hZ2UsdGhpcy5yZXBlYXR8fCJyZXBlYXQiKX0pLF9fZHJhd0luZGV4OjAsX19zdGFydEluZGV4OjAsX19lbmRJbmRleDowLGluY3JlbWVudGFsOiExLGdldEVsZW1lbnRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZW5kSW5kZXgtdGhpcy5fX3N0YXJ0SW5kZXh9LGluaXRDb250ZXh0OmZ1bmN0aW9uKCl7dGhpcy5jdHg9dGhpcy5kb20uZ2V0Q29udGV4dCgiMmQiKSx0aGlzLmN0eC5kcHI9dGhpcy5kcHJ9LGNyZWF0ZUJhY2tCdWZmZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmRwcjt0aGlzLmRvbUJhY2s9cWkoImJhY2stIit0aGlzLmlkLHRoaXMucGFpbnRlcix0KSx0aGlzLmN0eEJhY2s9dGhpcy5kb21CYWNrLmdldENvbnRleHQoIjJkIiksMSE9PXQmJnRoaXMuY3R4QmFjay5zY2FsZSh0LHQpfSxyZXNpemU6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmRwcixuPXRoaXMuZG9tLG89bi5zdHlsZSxhPXRoaXMuZG9tQmFjaztvJiYoby53aWR0aD10KyJweCIsby5oZWlnaHQ9ZSsicHgiKSxuLndpZHRoPXQqaSxuLmhlaWdodD1lKmksYSYmKGEud2lkdGg9dCppLGEuaGVpZ2h0PWUqaSwxIT09aSYmdGhpcy5jdHhCYWNrLnNjYWxlKGksaSkpfSxjbGVhcjpmdW5jdGlvbih0LGUpe3ZhciBpLG49dGhpcy5kb20sbz10aGlzLmN0eCxhPW4ud2lkdGgscj1uLmhlaWdodCxzPShlPWV8fHRoaXMuY2xlYXJDb2xvcix0aGlzLm1vdGlvbkJsdXImJiF0KSxsPXRoaXMubGFzdEZyYW1lQWxwaGEsdT10aGlzLmRwcjtzJiYodGhpcy5kb21CYWNrfHx0aGlzLmNyZWF0ZUJhY2tCdWZmZXIoKSx0aGlzLmN0eEJhY2suZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJjb3B5Iix0aGlzLmN0eEJhY2suZHJhd0ltYWdlKG4sMCwwLGEvdSxyL3UpKSxvLmNsZWFyUmVjdCgwLDAsYSxyKSxlJiYidHJhbnNwYXJlbnQiIT09ZSYmKGUuY29sb3JTdG9wcz8oaT1lLl9fY2FudmFzR3JhZGllbnR8fEZpLmdldEdyYWRpZW50KG8sZSx7eDowLHk6MCx3aWR0aDphLGhlaWdodDpyfSksZS5fX2NhbnZhc0dyYWRpZW50PWkpOmUuaW1hZ2UmJihpPVlpLnByb3RvdHlwZS5nZXRDYW52YXNQYXR0ZXJuLmNhbGwoZSxvKSksby5zYXZlKCksby5maWxsU3R5bGU9aXx8ZSxvLmZpbGxSZWN0KDAsMCxhLHIpLG8ucmVzdG9yZSgpKTtpZihzKXt2YXIgaD10aGlzLmRvbUJhY2s7by5zYXZlKCksby5nbG9iYWxBbHBoYT1sLG8uZHJhd0ltYWdlKGgsMCwwLGEsciksby5yZXN0b3JlKCl9fX07dmFyICRpPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiYod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSYmd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyl8fHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSYmd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSl8fGZ1bmN0aW9uKHQpe3NldFRpbWVvdXQodCwxNil9LEppPW5ldyBiZSg1MCk7ZnVuY3Rpb24gUWkodCl7aWYoInN0cmluZyIhPXR5cGVvZiB0KXJldHVybiB0O3ZhciBlPUppLmdldCh0KTtyZXR1cm4gZSYmZS5pbWFnZX1mdW5jdGlvbiB0bih0LGUsaSxuLG8pe2lmKHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gdDtpZihlJiZlLl9fenJJbWFnZVNyYz09PXR8fCFpKXJldHVybiBlO3ZhciBhPUppLmdldCh0KSxyPXtob3N0RWw6aSxjYjpuLGNiUGF5bG9hZDpvfTtyZXR1cm4gYT9ubihlPWEuaW1hZ2UpfHxhLnBlbmRpbmcucHVzaChyKTooKGU9bmV3IEltYWdlKS5vbmxvYWQ9ZS5vbmVycm9yPWVuLEppLnB1dCh0LGUuX19jYWNoZWRJbWdPYmo9e2ltYWdlOmUscGVuZGluZzpbcl19KSxlLnNyYz1lLl9fenJJbWFnZVNyYz10KSxlfXJldHVybiBlfWZ1bmN0aW9uIGVuKCl7dmFyIHQ9dGhpcy5fX2NhY2hlZEltZ09iajt0aGlzLm9ubG9hZD10aGlzLm9uZXJyb3I9dGhpcy5fX2NhY2hlZEltZ09iaj1udWxsO2Zvcih2YXIgZT0wO2U8dC5wZW5kaW5nLmxlbmd0aDtlKyspe3ZhciBpPXQucGVuZGluZ1tlXSxuPWkuY2I7biYmbih0aGlzLGkuY2JQYXlsb2FkKSxpLmhvc3RFbC5kaXJ0eSgpfXQucGVuZGluZy5sZW5ndGg9MH1mdW5jdGlvbiBubih0KXtyZXR1cm4gdCYmdC53aWR0aCYmdC5oZWlnaHR9dmFyIG9uPXt9LGFuPTAscm49NWUzLHNuPS9ceyhbYS16QS1aMC05X10rKVx8KFtefV0qKVx9L2csbG49IjEycHggc2Fucy1zZXJpZiIsdW49e307ZnVuY3Rpb24gaG4odCxlKXt2YXIgaT10KyI6IisoZT1lfHxsbik7aWYob25baV0pcmV0dXJuIG9uW2ldO2Zvcih2YXIgbixvLGE9KHQrIiIpLnNwbGl0KCJcbiIpLHI9MCxzPTAsbD1hLmxlbmd0aDtzPGw7cysrKXI9TWF0aC5tYXgoKG49YVtzXSxvPWUsdW4ubWVhc3VyZVRleHQobixvKSkud2lkdGgscik7cmV0dXJuIHJuPGFuJiYoYW49MCxvbj17fSksYW4rKyxvbltpXT1yfWZ1bmN0aW9uIGNuKHQsZSxpLG4sbyxhLHIscyl7cmV0dXJuIHI/ZnVuY3Rpb24odCxlLGksbixvLGEscixzKXt2YXIgbD13bih0LHtyaWNoOnIsdHJ1bmNhdGU6cyxmb250OmUsdGV4dEFsaWduOmksdGV4dFBhZGRpbmc6byx0ZXh0TGluZUhlaWdodDphfSksdT1sLm91dGVyV2lkdGgsaD1sLm91dGVySGVpZ2h0LGM9ZG4oMCx1LGkpLGQ9Zm4oMCxoLG4pO3JldHVybiBuZXcgTWkoYyxkLHUsaCl9KHQsZSxpLG4sbyxhLHIscyk6ZnVuY3Rpb24odCxlLGksbixvLGEscil7dmFyIHM9X24odCxlLG8sYSxyKSxsPWhuKHQsZSk7byYmKGwrPW9bMV0rb1szXSk7dmFyIHU9cy5vdXRlckhlaWdodCxoPWRuKDAsbCxpKSxjPWZuKDAsdSxuKSxkPW5ldyBNaShoLGMsbCx1KTtyZXR1cm4gZC5saW5lSGVpZ2h0PXMubGluZUhlaWdodCxkfSh0LGUsaSxuLG8sYSxzKX1mdW5jdGlvbiBkbih0LGUsaSl7cmV0dXJuInJpZ2h0Ij09PWk/dC09ZToiY2VudGVyIj09PWkmJih0LT1lLzIpLHR9ZnVuY3Rpb24gZm4odCxlLGkpe3JldHVybiJtaWRkbGUiPT09aT90LT1lLzI6ImJvdHRvbSI9PT1pJiYodC09ZSksdH1mdW5jdGlvbiBwbih0LGUsaSl7dmFyIG49ZS50ZXh0UG9zaXRpb24sbz1lLnRleHREaXN0YW5jZSxhPWkueCxyPWkueTtvPW98fDA7dmFyIHM9aS5oZWlnaHQsbD1pLndpZHRoLHU9cy8yLGg9ImxlZnQiLGM9InRvcCI7c3dpdGNoKG4pe2Nhc2UibGVmdCI6YS09byxyKz11LGg9InJpZ2h0IixjPSJtaWRkbGUiO2JyZWFrO2Nhc2UicmlnaHQiOmErPW8rbCxyKz11LGM9Im1pZGRsZSI7YnJlYWs7Y2FzZSJ0b3AiOmErPWwvMixyLT1vLGg9ImNlbnRlciIsYz0iYm90dG9tIjticmVhaztjYXNlImJvdHRvbSI6YSs9bC8yLHIrPXMrbyxoPSJjZW50ZXIiO2JyZWFrO2Nhc2UiaW5zaWRlIjphKz1sLzIscis9dSxoPSJjZW50ZXIiLGM9Im1pZGRsZSI7YnJlYWs7Y2FzZSJpbnNpZGVMZWZ0IjphKz1vLHIrPXUsYz0ibWlkZGxlIjticmVhaztjYXNlImluc2lkZVJpZ2h0IjphKz1sLW8scis9dSxoPSJyaWdodCIsYz0ibWlkZGxlIjticmVhaztjYXNlImluc2lkZVRvcCI6YSs9bC8yLHIrPW8saD0iY2VudGVyIjticmVhaztjYXNlImluc2lkZUJvdHRvbSI6YSs9bC8yLHIrPXMtbyxoPSJjZW50ZXIiLGM9ImJvdHRvbSI7YnJlYWs7Y2FzZSJpbnNpZGVUb3BMZWZ0IjphKz1vLHIrPW87YnJlYWs7Y2FzZSJpbnNpZGVUb3BSaWdodCI6YSs9bC1vLHIrPW8saD0icmlnaHQiO2JyZWFrO2Nhc2UiaW5zaWRlQm90dG9tTGVmdCI6YSs9byxyKz1zLW8sYz0iYm90dG9tIjticmVhaztjYXNlImluc2lkZUJvdHRvbVJpZ2h0IjphKz1sLW8scis9cy1vLGg9InJpZ2h0IixjPSJib3R0b20ifXJldHVybih0PXR8fHt9KS54PWEsdC55PXIsdC50ZXh0QWxpZ249aCx0LnRleHRWZXJ0aWNhbEFsaWduPWMsdH1mdW5jdGlvbiBnbih0LGUsaSxuLG8pe2lmKCFlKXJldHVybiIiO3ZhciBhPSh0KyIiKS5zcGxpdCgiXG4iKTtvPW1uKGUsaSxuLG8pO2Zvcih2YXIgcj0wLHM9YS5sZW5ndGg7cjxzO3IrKylhW3JdPXZuKGFbcl0sbyk7cmV0dXJuIGEuam9pbigiXG4iKX1mdW5jdGlvbiBtbih0LGUsaSxuKXsobj1MKHt9LG4pKS5mb250PWU7aT1IKGksIi4uLiIpO24ubWF4SXRlcmF0aW9ucz1IKG4ubWF4SXRlcmF0aW9ucywyKTt2YXIgbz1uLm1pbkNoYXI9SChuLm1pbkNoYXIsMCk7bi5jbkNoYXJXaWR0aD1obigi5Zu9IixlKTt2YXIgYT1uLmFzY0NoYXJXaWR0aD1obigiYSIsZSk7bi5wbGFjZWhvbGRlcj1IKG4ucGxhY2Vob2xkZXIsIiIpO2Zvcih2YXIgcj10PU1hdGgubWF4KDAsdC0xKSxzPTA7czxvJiZhPD1yO3MrKylyLT1hO3ZhciBsPWhuKGksZSk7cmV0dXJuIHI8bCYmKGk9IiIsbD0wKSxyPXQtbCxuLmVsbGlwc2lzPWksbi5lbGxpcHNpc1dpZHRoPWwsbi5jb250ZW50V2lkdGg9cixuLmNvbnRhaW5lcldpZHRoPXQsbn1mdW5jdGlvbiB2bih0LGUpe3ZhciBpPWUuY29udGFpbmVyV2lkdGgsbj1lLmZvbnQsbz1lLmNvbnRlbnRXaWR0aDtpZighaSlyZXR1cm4iIjt2YXIgYT1obih0LG4pO2lmKGE8PWkpcmV0dXJuIHQ7Zm9yKHZhciByPTA7O3IrKyl7aWYoYTw9b3x8cj49ZS5tYXhJdGVyYXRpb25zKXt0Kz1lLmVsbGlwc2lzO2JyZWFrfXZhciBzPTA9PT1yP3luKHQsbyxlLmFzY0NoYXJXaWR0aCxlLmNuQ2hhcldpZHRoKTowPGE/TWF0aC5mbG9vcih0Lmxlbmd0aCpvL2EpOjA7YT1obih0PXQuc3Vic3RyKDAscyksbil9cmV0dXJuIiI9PT10JiYodD1lLnBsYWNlaG9sZGVyKSx0fWZ1bmN0aW9uIHluKHQsZSxpLG4pe2Zvcih2YXIgbz0wLGE9MCxyPXQubGVuZ3RoO2E8ciYmbzxlO2ErKyl7dmFyIHM9dC5jaGFyQ29kZUF0KGEpO28rPTA8PXMmJnM8PTEyNz9pOm59cmV0dXJuIGF9ZnVuY3Rpb24geG4odCl7cmV0dXJuIGhuKCLlm70iLHQpfWZ1bmN0aW9uIF9uKHQsZSxpLG4sbyl7bnVsbCE9dCYmKHQrPSIiKTt2YXIgYT1IKG4seG4oZSkpLHI9dD90LnNwbGl0KCJcbiIpOltdLHM9ci5sZW5ndGgqYSxsPXMsdT0hMDtpZihpJiYobCs9aVswXStpWzJdKSx0JiZvKXt1PSExO3ZhciBoPW8ub3V0ZXJIZWlnaHQsYz1vLm91dGVyV2lkdGg7aWYobnVsbCE9aCYmaDxsKXQ9IiIscj1bXTtlbHNlIGlmKG51bGwhPWMpZm9yKHZhciBkPW1uKGMtKGk/aVsxXStpWzNdOjApLGUsby5lbGxpcHNpcyx7bWluQ2hhcjpvLm1pbkNoYXIscGxhY2Vob2xkZXI6by5wbGFjZWhvbGRlcn0pLGY9MCxwPXIubGVuZ3RoO2Y8cDtmKyspcltmXT12bihyW2ZdLGQpfXJldHVybntsaW5lczpyLGhlaWdodDpzLG91dGVySGVpZ2h0OmwsbGluZUhlaWdodDphLGNhbkNhY2hlQnlUZXh0U3RyaW5nOnV9fWZ1bmN0aW9uIHduKHQsZSl7dmFyIGk9e2xpbmVzOltdLHdpZHRoOjAsaGVpZ2h0OjB9O2lmKG51bGwhPXQmJih0Kz0iIiksIXQpcmV0dXJuIGk7Zm9yKHZhciBuLG89c24ubGFzdEluZGV4PTA7bnVsbCE9KG49c24uZXhlYyh0KSk7KXt2YXIgYT1uLmluZGV4O288YSYmYm4oaSx0LnN1YnN0cmluZyhvLGEpKSxibihpLG5bMl0sblsxXSksbz1zbi5sYXN0SW5kZXh9bzx0Lmxlbmd0aCYmYm4oaSx0LnN1YnN0cmluZyhvLHQubGVuZ3RoKSk7dmFyIHI9aS5saW5lcyxzPTAsbD0wLHU9W10saD1lLnRleHRQYWRkaW5nLGM9ZS50cnVuY2F0ZSxkPWMmJmMub3V0ZXJXaWR0aCxmPWMmJmMub3V0ZXJIZWlnaHQ7aCYmKG51bGwhPWQmJihkLT1oWzFdK2hbM10pLG51bGwhPWYmJihmLT1oWzBdK2hbMl0pKTtmb3IodmFyIHA9MDtwPHIubGVuZ3RoO3ArKyl7Zm9yKHZhciBnPXJbcF0sbT0wLHY9MCx5PTA7eTxnLnRva2Vucy5sZW5ndGg7eSsrKXt2YXIgeD0oQz1nLnRva2Vuc1t5XSkuc3R5bGVOYW1lJiZlLnJpY2hbQy5zdHlsZU5hbWVdfHx7fSxfPUMudGV4dFBhZGRpbmc9eC50ZXh0UGFkZGluZyx3PUMuZm9udD14LmZvbnR8fGUuZm9udCxiPUMudGV4dEhlaWdodD1IKHgudGV4dEhlaWdodCx4bih3KSk7aWYoXyYmKGIrPV9bMF0rX1syXSksQy5oZWlnaHQ9YixDLmxpbmVIZWlnaHQ9Wih4LnRleHRMaW5lSGVpZ2h0LGUudGV4dExpbmVIZWlnaHQsYiksQy50ZXh0QWxpZ249eCYmeC50ZXh0QWxpZ258fGUudGV4dEFsaWduLEMudGV4dFZlcnRpY2FsQWxpZ249eCYmeC50ZXh0VmVydGljYWxBbGlnbnx8Im1pZGRsZSIsbnVsbCE9ZiYmcytDLmxpbmVIZWlnaHQ+ZilyZXR1cm57bGluZXM6W10sd2lkdGg6MCxoZWlnaHQ6MH07Qy50ZXh0V2lkdGg9aG4oQy50ZXh0LHcpO3ZhciBTPXgudGV4dFdpZHRoLE09bnVsbD09U3x8ImF1dG8iPT09UztpZigic3RyaW5nIj09dHlwZW9mIFMmJiIlIj09PVMuY2hhckF0KFMubGVuZ3RoLTEpKUMucGVyY2VudFdpZHRoPVMsdS5wdXNoKEMpLFM9MDtlbHNle2lmKE0pe1M9Qy50ZXh0V2lkdGg7dmFyIEk9eC50ZXh0QmFja2dyb3VuZENvbG9yLFQ9SSYmSS5pbWFnZTtUJiZubihUPVFpKFQpKSYmKFM9TWF0aC5tYXgoUyxULndpZHRoKmIvVC5oZWlnaHQpKX12YXIgQT1fP19bMV0rX1szXTowO1MrPUE7dmFyIEQ9bnVsbCE9ZD9kLXY6bnVsbDtudWxsIT1EJiZEPFMmJighTXx8RDxBPyhDLnRleHQ9IiIsQy50ZXh0V2lkdGg9Uz0wKTooQy50ZXh0PWduKEMudGV4dCxELUEsdyxjLmVsbGlwc2lzLHttaW5DaGFyOmMubWluQ2hhcn0pLEMudGV4dFdpZHRoPWhuKEMudGV4dCx3KSxTPUMudGV4dFdpZHRoK0EpKX12Kz1DLndpZHRoPVMseCYmKG09TWF0aC5tYXgobSxDLmxpbmVIZWlnaHQpKX1nLndpZHRoPXYscys9Zy5saW5lSGVpZ2h0PW0sbD1NYXRoLm1heChsLHYpfWkub3V0ZXJXaWR0aD1pLndpZHRoPUgoZS50ZXh0V2lkdGgsbCksaS5vdXRlckhlaWdodD1pLmhlaWdodD1IKGUudGV4dEhlaWdodCxzKSxoJiYoaS5vdXRlcldpZHRoKz1oWzFdK2hbM10saS5vdXRlckhlaWdodCs9aFswXStoWzJdKTtmb3IocD0wO3A8dS5sZW5ndGg7cCsrKXt2YXIgQyxMPShDPXVbcF0pLnBlcmNlbnRXaWR0aDtDLndpZHRoPXBhcnNlSW50KEwsMTApLzEwMCpsfXJldHVybiBpfWZ1bmN0aW9uIGJuKHQsZSxpKXtmb3IodmFyIG49IiI9PT1lLG89ZS5zcGxpdCgiXG4iKSxhPXQubGluZXMscj0wO3I8by5sZW5ndGg7cisrKXt2YXIgcz1vW3JdLGw9e3N0eWxlTmFtZTppLHRleHQ6cyxpc0xpbmVIb2xkZXI6IXMmJiFufTtpZihyKWEucHVzaCh7dG9rZW5zOltsXX0pO2Vsc2V7dmFyIHU9KGFbYS5sZW5ndGgtMV18fChhWzBdPXt0b2tlbnM6W119KSkudG9rZW5zLGg9dS5sZW5ndGg7MT09PWgmJnVbMF0uaXNMaW5lSG9sZGVyP3VbMF09bDohcyYmaCYmIW58fHUucHVzaChsKX19fWZ1bmN0aW9uIFNuKHQpe3ZhciBlPSh0LmZvbnRTaXplfHx0LmZvbnRGYW1pbHkpJiZbdC5mb250U3R5bGUsdC5mb250V2VpZ2h0LCh0LmZvbnRTaXplfHwxMikrInB4Iix0LmZvbnRGYW1pbHl8fCJzYW5zLXNlcmlmIl0uam9pbigiICIpO3JldHVybiBlJiZqKGUpfHx0LnRleHRGb250fHx0LmZvbnR9ZnVuY3Rpb24gTW4odCxlKXt2YXIgaSxuLG8sYSxyLHM9ZS54LGw9ZS55LHU9ZS53aWR0aCxoPWUuaGVpZ2h0LGM9ZS5yO3U8MCYmKHMrPXUsdT0tdSksaDwwJiYobCs9aCxoPS1oKSwibnVtYmVyIj09dHlwZW9mIGM/aT1uPW89YT1jOmMgaW5zdGFuY2VvZiBBcnJheT8xPT09Yy5sZW5ndGg/aT1uPW89YT1jWzBdOjI9PT1jLmxlbmd0aD8oaT1vPWNbMF0sbj1hPWNbMV0pOjM9PT1jLmxlbmd0aD8oaT1jWzBdLG49YT1jWzFdLG89Y1syXSk6KGk9Y1swXSxuPWNbMV0sbz1jWzJdLGE9Y1szXSk6aT1uPW89YT0wLHU8aStuJiYoaSo9dS8ocj1pK24pLG4qPXUvciksdTxvK2EmJihvKj11LyhyPW8rYSksYSo9dS9yKSxoPG4rbyYmKG4qPWgvKHI9bitvKSxvKj1oL3IpLGg8aSthJiYoaSo9aC8ocj1pK2EpLGEqPWgvciksdC5tb3ZlVG8ocytpLGwpLHQubGluZVRvKHMrdS1uLGwpLDAhPT1uJiZ0LmFyYyhzK3UtbixsK24sbiwtTWF0aC5QSS8yLDApLHQubGluZVRvKHMrdSxsK2gtbyksMCE9PW8mJnQuYXJjKHMrdS1vLGwraC1vLG8sMCxNYXRoLlBJLzIpLHQubGluZVRvKHMrYSxsK2gpLDAhPT1hJiZ0LmFyYyhzK2EsbCtoLWEsYSxNYXRoLlBJLzIsTWF0aC5QSSksdC5saW5lVG8ocyxsK2kpLDAhPT1pJiZ0LmFyYyhzK2ksbCtpLGksTWF0aC5QSSwxLjUqTWF0aC5QSSl9dW4ubWVhc3VyZVRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgaT14KCk7cmV0dXJuIGkuZm9udD1lfHxsbixpLm1lYXN1cmVUZXh0KHQpfTt2YXIgSW49bG4sVG49e2xlZnQ6MSxyaWdodDoxLGNlbnRlcjoxfSxBbj17dG9wOjEsYm90dG9tOjEsbWlkZGxlOjF9LERuPVtbInRleHRTaGFkb3dCbHVyIiwic2hhZG93Qmx1ciIsMF0sWyJ0ZXh0U2hhZG93T2Zmc2V0WCIsInNoYWRvd09mZnNldFgiLDBdLFsidGV4dFNoYWRvd09mZnNldFkiLCJzaGFkb3dPZmZzZXRZIiwwXSxbInRleHRTaGFkb3dDb2xvciIsInNoYWRvd0NvbG9yIiwidHJhbnNwYXJlbnQiXV0sQ249e30sTG49e307ZnVuY3Rpb24ga24odCl7cmV0dXJuIFBuKHQpLEUodC5yaWNoLFBuKSx0fWZ1bmN0aW9uIFBuKHQpe2lmKHQpe3QuZm9udD1Tbih0KTt2YXIgZT10LnRleHRBbGlnbjsibWlkZGxlIj09PWUmJihlPSJjZW50ZXIiKSx0LnRleHRBbGlnbj1udWxsPT1lfHxUbltlXT9lOiJsZWZ0Ijt2YXIgaT10LnRleHRWZXJ0aWNhbEFsaWdufHx0LnRleHRCYXNlbGluZTsiY2VudGVyIj09PWkmJihpPSJtaWRkbGUiKSx0LnRleHRWZXJ0aWNhbEFsaWduPW51bGw9PWl8fEFuW2ldP2k6InRvcCIsdC50ZXh0UGFkZGluZyYmKHQudGV4dFBhZGRpbmc9WCh0LnRleHRQYWRkaW5nKSl9fWZ1bmN0aW9uIE5uKHQsZSxpLG4sbyxhKXtuLnJpY2g/ZnVuY3Rpb24odCxlLGksbixvLGEpe2EhPT1WaSYmKGUuX19hdHRyQ2FjaGVkQnk9QmkuTk9ORSk7dmFyIHI9dC5fX3RleHRDb3RlbnRCbG9jaztyJiYhdC5fX2RpcnR5VGV4dHx8KHI9dC5fX3RleHRDb3RlbnRCbG9jaz13bihpLG4pKTshZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1pLndpZHRoLHI9aS5vdXRlcldpZHRoLHM9aS5vdXRlckhlaWdodCxsPW4udGV4dFBhZGRpbmcsdT1WbihMbix0LG4sbyksaD11LmJhc2VYLGM9dS5iYXNlWSxkPXUudGV4dEFsaWduLGY9dS50ZXh0VmVydGljYWxBbGlnbjtPbihlLG4sbyxoLGMpO3ZhciBwPWRuKGgscixkKSxnPWZuKGMscyxmKSxtPXAsdj1nO2wmJihtKz1sWzNdLHYrPWxbMF0pO3ZhciB5PW0rYTt6bihuKSYmUm4odCxlLG4scCxnLHIscyk7Zm9yKHZhciB4PTA7eDxpLmxpbmVzLmxlbmd0aDt4Kyspe2Zvcih2YXIgXyx3PWkubGluZXNbeF0sYj13LnRva2VucyxTPWIubGVuZ3RoLE09dy5saW5lSGVpZ2h0LEk9dy53aWR0aCxUPTAsQT1tLEQ9eSxDPVMtMTtUPFMmJighKF89YltUXSkudGV4dEFsaWdufHwibGVmdCI9PT1fLnRleHRBbGlnbik7KUVuKHQsZSxfLG4sTSx2LEEsImxlZnQiKSxJLT1fLndpZHRoLEErPV8ud2lkdGgsVCsrO2Zvcig7MDw9QyYmInJpZ2h0Ij09PShfPWJbQ10pLnRleHRBbGlnbjspRW4odCxlLF8sbixNLHYsRCwicmlnaHQiKSxJLT1fLndpZHRoLEQtPV8ud2lkdGgsQy0tO2ZvcihBKz0oYS0oQS1tKS0oeS1EKS1JKS8yO1Q8PUM7KV89YltUXSxFbih0LGUsXyxuLE0sdixBK18ud2lkdGgvMiwiY2VudGVyIiksQSs9Xy53aWR0aCxUKys7dis9TX19KHQsZSxyLG4sbyl9KHQsZSxpLG4sbyxhKTpmdW5jdGlvbih0LGUsaSxuLG8sYSl7dmFyIHIscz16bihuKSxsPSExLHU9ZS5fX2F0dHJDYWNoZWRCeT09PUJpLlBMQUlOX1RFWFQ7YSE9PVZpPyhhJiYocj1hLnN0eWxlLGw9IXMmJnUmJnIpLGUuX19hdHRyQ2FjaGVkQnk9cz9CaS5OT05FOkJpLlBMQUlOX1RFWFQpOnUmJihlLl9fYXR0ckNhY2hlZEJ5PUJpLk5PTkUpO3ZhciBoPW4uZm9udHx8SW47bCYmaD09PShyLmZvbnR8fEluKXx8KGUuZm9udD1oKTt2YXIgYz10Ll9fY29tcHV0ZWRGb250O3QuX19zdHlsZUZvbnQhPT1oJiYodC5fX3N0eWxlRm9udD1oLGM9dC5fX2NvbXB1dGVkRm9udD1lLmZvbnQpO3ZhciBkPW4udGV4dFBhZGRpbmcsZj1uLnRleHRMaW5lSGVpZ2h0LHA9dC5fX3RleHRDb3RlbnRCbG9jaztwJiYhdC5fX2RpcnR5VGV4dHx8KHA9dC5fX3RleHRDb3RlbnRCbG9jaz1fbihpLGMsZCxmLG4udHJ1bmNhdGUpKTt2YXIgZz1wLm91dGVySGVpZ2h0LG09cC5saW5lcyx2PXAubGluZUhlaWdodCx5PVZuKExuLHQsbixvKSx4PXkuYmFzZVgsXz15LmJhc2VZLHc9eS50ZXh0QWxpZ258fCJsZWZ0IixiPXkudGV4dFZlcnRpY2FsQWxpZ247T24oZSxuLG8seCxfKTt2YXIgUz1mbihfLGcsYiksTT14LEk9UztpZihzfHxkKXt2YXIgVD1obihpLGMpO2QmJihUKz1kWzFdK2RbM10pO3ZhciBBPWRuKHgsVCx3KTtzJiZSbih0LGUsbixBLFMsVCxnKSxkJiYoTT1abih4LHcsZCksSSs9ZFswXSl9ZS50ZXh0QWxpZ249dyxlLnRleHRCYXNlbGluZT0ibWlkZGxlIixlLmdsb2JhbEFscGhhPW4ub3BhY2l0eXx8MTtmb3IodmFyIEQ9MDtEPERuLmxlbmd0aDtEKyspe3ZhciBDPURuW0RdLEw9Q1swXSxrPUNbMV0sUD1uW0xdO2wmJlA9PT1yW0xdfHwoZVtrXT1SaShlLGssUHx8Q1syXSkpfUkrPXYvMjt2YXIgTj1uLnRleHRTdHJva2VXaWR0aCxPPWw/ci50ZXh0U3Ryb2tlV2lkdGg6bnVsbCxFPSFsfHxOIT09Tyx6PSFsfHxFfHxuLnRleHRTdHJva2UhPT1yLnRleHRTdHJva2UsUj1GbihuLnRleHRTdHJva2UsTiksQj1XbihuLnRleHRGaWxsKTtSJiYoRSYmKGUubGluZVdpZHRoPU4pLHomJihlLnN0cm9rZVN0eWxlPVIpKTtCJiYobCYmbi50ZXh0RmlsbD09PXIudGV4dEZpbGx8fChlLmZpbGxTdHlsZT1CKSk7aWYoMT09PW0ubGVuZ3RoKVImJmUuc3Ryb2tlVGV4dChtWzBdLE0sSSksQiYmZS5maWxsVGV4dChtWzBdLE0sSSk7ZWxzZSBmb3IoRD0wO0Q8bS5sZW5ndGg7RCsrKVImJmUuc3Ryb2tlVGV4dChtW0RdLE0sSSksQiYmZS5maWxsVGV4dChtW0RdLE0sSSksSSs9dn0odCxlLGksbixvLGEpfWZ1bmN0aW9uIE9uKHQsZSxpLG4sbyl7aWYoaSYmZS50ZXh0Um90YXRpb24pe3ZhciBhPWUudGV4dE9yaWdpbjsiY2VudGVyIj09PWE/KG49aS53aWR0aC8yK2kueCxvPWkuaGVpZ2h0LzIraS55KTphJiYobj1hWzBdK2kueCxvPWFbMV0raS55KSx0LnRyYW5zbGF0ZShuLG8pLHQucm90YXRlKC1lLnRleHRSb3RhdGlvbiksdC50cmFuc2xhdGUoLW4sLW8pfX1mdW5jdGlvbiBFbih0LGUsaSxuLG8sYSxyLHMpe3ZhciBsPW4ucmljaFtpLnN0eWxlTmFtZV18fHt9O2wudGV4dD1pLnRleHQ7dmFyIHU9aS50ZXh0VmVydGljYWxBbGlnbixoPWErby8yOyJ0b3AiPT09dT9oPWEraS5oZWlnaHQvMjoiYm90dG9tIj09PXUmJihoPWErby1pLmhlaWdodC8yKSwhaS5pc0xpbmVIb2xkZXImJnpuKGwpJiZSbih0LGUsbCwicmlnaHQiPT09cz9yLWkud2lkdGg6ImNlbnRlciI9PT1zP3ItaS53aWR0aC8yOnIsaC1pLmhlaWdodC8yLGkud2lkdGgsaS5oZWlnaHQpO3ZhciBjPWkudGV4dFBhZGRpbmc7YyYmKHI9Wm4ocixzLGMpLGgtPWkuaGVpZ2h0LzItY1syXS1pLnRleHRIZWlnaHQvMiksR24oZSwic2hhZG93Qmx1ciIsWihsLnRleHRTaGFkb3dCbHVyLG4udGV4dFNoYWRvd0JsdXIsMCkpLEduKGUsInNoYWRvd0NvbG9yIixsLnRleHRTaGFkb3dDb2xvcnx8bi50ZXh0U2hhZG93Q29sb3J8fCJ0cmFuc3BhcmVudCIpLEduKGUsInNoYWRvd09mZnNldFgiLFoobC50ZXh0U2hhZG93T2Zmc2V0WCxuLnRleHRTaGFkb3dPZmZzZXRYLDApKSxHbihlLCJzaGFkb3dPZmZzZXRZIixaKGwudGV4dFNoYWRvd09mZnNldFksbi50ZXh0U2hhZG93T2Zmc2V0WSwwKSksR24oZSwidGV4dEFsaWduIixzKSxHbihlLCJ0ZXh0QmFzZWxpbmUiLCJtaWRkbGUiKSxHbihlLCJmb250IixpLmZvbnR8fEluKTt2YXIgZD1GbihsLnRleHRTdHJva2V8fG4udGV4dFN0cm9rZSxwKSxmPVduKGwudGV4dEZpbGx8fG4udGV4dEZpbGwpLHA9SChsLnRleHRTdHJva2VXaWR0aCxuLnRleHRTdHJva2VXaWR0aCk7ZCYmKEduKGUsImxpbmVXaWR0aCIscCksR24oZSwic3Ryb2tlU3R5bGUiLGQpLGUuc3Ryb2tlVGV4dChpLnRleHQscixoKSksZiYmKEduKGUsImZpbGxTdHlsZSIsZiksZS5maWxsVGV4dChpLnRleHQscixoKSl9ZnVuY3Rpb24gem4odCl7cmV0dXJuISEodC50ZXh0QmFja2dyb3VuZENvbG9yfHx0LnRleHRCb3JkZXJXaWR0aCYmdC50ZXh0Qm9yZGVyQ29sb3IpfWZ1bmN0aW9uIFJuKHQsZSxpLG4sbyxhLHIpe3ZhciBzPWkudGV4dEJhY2tncm91bmRDb2xvcixsPWkudGV4dEJvcmRlcldpZHRoLHU9aS50ZXh0Qm9yZGVyQ29sb3IsaD16KHMpO2lmKEduKGUsInNoYWRvd0JsdXIiLGkudGV4dEJveFNoYWRvd0JsdXJ8fDApLEduKGUsInNoYWRvd0NvbG9yIixpLnRleHRCb3hTaGFkb3dDb2xvcnx8InRyYW5zcGFyZW50IiksR24oZSwic2hhZG93T2Zmc2V0WCIsaS50ZXh0Qm94U2hhZG93T2Zmc2V0WHx8MCksR24oZSwic2hhZG93T2Zmc2V0WSIsaS50ZXh0Qm94U2hhZG93T2Zmc2V0WXx8MCksaHx8bCYmdSl7ZS5iZWdpblBhdGgoKTt2YXIgYz1pLnRleHRCb3JkZXJSYWRpdXM7Yz9NbihlLHt4Om4seTpvLHdpZHRoOmEsaGVpZ2h0OnIscjpjfSk6ZS5yZWN0KG4sbyxhLHIpLGUuY2xvc2VQYXRoKCl9aWYoaClpZihHbihlLCJmaWxsU3R5bGUiLHMpLG51bGwhPWkuZmlsbE9wYWNpdHkpe3ZhciBkPWUuZ2xvYmFsQWxwaGE7ZS5nbG9iYWxBbHBoYT1pLmZpbGxPcGFjaXR5Kmkub3BhY2l0eSxlLmZpbGwoKSxlLmdsb2JhbEFscGhhPWR9ZWxzZSBlLmZpbGwoKTtlbHNlIGlmKFIocykpe3ZhciBmPXMuaW1hZ2U7KGY9dG4oZixudWxsLHQsQm4scykpJiZubihmKSYmZS5kcmF3SW1hZ2UoZixuLG8sYSxyKX1pZihsJiZ1KWlmKEduKGUsImxpbmVXaWR0aCIsbCksR24oZSwic3Ryb2tlU3R5bGUiLHUpLG51bGwhPWkuc3Ryb2tlT3BhY2l0eSl7ZD1lLmdsb2JhbEFscGhhO2UuZ2xvYmFsQWxwaGE9aS5zdHJva2VPcGFjaXR5Kmkub3BhY2l0eSxlLnN0cm9rZSgpLGUuZ2xvYmFsQWxwaGE9ZH1lbHNlIGUuc3Ryb2tlKCl9ZnVuY3Rpb24gQm4odCxlKXtlLmltYWdlPXR9ZnVuY3Rpb24gVm4odCxlLGksbil7dmFyIG89aS54fHwwLGE9aS55fHwwLHI9aS50ZXh0QWxpZ24scz1pLnRleHRWZXJ0aWNhbEFsaWduO2lmKG4pe3ZhciBsPWkudGV4dFBvc2l0aW9uO2lmKGwgaW5zdGFuY2VvZiBBcnJheSlvPW4ueCtIbihsWzBdLG4ud2lkdGgpLGE9bi55K0huKGxbMV0sbi5oZWlnaHQpO2Vsc2V7dmFyIHU9ZSYmZS5jYWxjdWxhdGVUZXh0UG9zaXRpb24/ZS5jYWxjdWxhdGVUZXh0UG9zaXRpb24oQ24saSxuKTpwbihDbixpLG4pO289dS54LGE9dS55LHI9cnx8dS50ZXh0QWxpZ24scz1zfHx1LnRleHRWZXJ0aWNhbEFsaWdufXZhciBoPWkudGV4dE9mZnNldDtoJiYobys9aFswXSxhKz1oWzFdKX1yZXR1cm4odD10fHx7fSkuYmFzZVg9byx0LmJhc2VZPWEsdC50ZXh0QWxpZ249cix0LnRleHRWZXJ0aWNhbEFsaWduPXMsdH1mdW5jdGlvbiBHbih0LGUsaSl7cmV0dXJuIHRbZV09UmkodCxlLGkpLHRbZV19ZnVuY3Rpb24gRm4odCxlKXtyZXR1cm4gbnVsbD09dHx8ZTw9MHx8InRyYW5zcGFyZW50Ij09PXR8fCJub25lIj09PXQ/bnVsbDp0LmltYWdlfHx0LmNvbG9yU3RvcHM/IiMwMDAiOnR9ZnVuY3Rpb24gV24odCl7cmV0dXJuIG51bGw9PXR8fCJub25lIj09PXQ/bnVsbDp0LmltYWdlfHx0LmNvbG9yU3RvcHM/IiMwMDAiOnR9ZnVuY3Rpb24gSG4odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/MDw9dC5sYXN0SW5kZXhPZigiJSIpP3BhcnNlRmxvYXQodCkvMTAwKmU6cGFyc2VGbG9hdCh0KTp0fWZ1bmN0aW9uIFpuKHQsZSxpKXtyZXR1cm4icmlnaHQiPT09ZT90LWlbMV06ImNlbnRlciI9PT1lP3QraVszXS8yLWlbMV0vMjp0K2lbM119ZnVuY3Rpb24gVW4odCxlKXtyZXR1cm4gbnVsbCE9dCYmKHR8fGUudGV4dEJhY2tncm91bmRDb2xvcnx8ZS50ZXh0Qm9yZGVyV2lkdGgmJmUudGV4dEJvcmRlckNvbG9yfHxlLnRleHRQYWRkaW5nKX1mdW5jdGlvbiBYbigpe312YXIgWW49bmV3IE1pO2Z1bmN0aW9uIGpuKHQpe2Zvcih2YXIgZSBpbiB0PXR8fHt9LG1pLmNhbGwodGhpcyx0KSx0KXQuaGFzT3duUHJvcGVydHkoZSkmJiJzdHlsZSIhPT1lJiYodGhpc1tlXT10W2VdKTt0aGlzLnN0eWxlPW5ldyBGaSh0LnN0eWxlLHRoaXMpLHRoaXMuX3JlY3Q9bnVsbCx0aGlzLl9fY2xpcFBhdGhzPW51bGx9ZnVuY3Rpb24gcW4odCl7am4uY2FsbCh0aGlzLHQpfWpuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6am4sdHlwZToiZGlzcGxheWFibGUiLF9fZGlydHk6ITAsaW52aXNpYmxlOiEoWG4ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpYbixkcmF3UmVjdFRleHQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnN0eWxlO2U9aS50ZXh0UmVjdHx8ZSx0aGlzLl9fZGlydHkmJmtuKGkpO3ZhciBuPWkudGV4dDtpZihudWxsIT1uJiYobis9IiIpLFVuKG4saSkpe3Quc2F2ZSgpO3ZhciBvPXRoaXMudHJhbnNmb3JtO2kudHJhbnNmb3JtVGV4dD90aGlzLnNldFRyYW5zZm9ybSh0KTpvJiYoWW4uY29weShlKSxZbi5hcHBseVRyYW5zZm9ybShvKSxlPVluKSxObih0aGlzLHQsbixpLGUsVmkpLHQucmVzdG9yZSgpfX19KSx6OjAsejI6MCx6bGV2ZWw6MCxkcmFnZ2FibGU6ITEsZHJhZ2dpbmc6ITEsc2lsZW50OiExLGN1bGxpbmc6ITEsY3Vyc29yOiJwb2ludGVyIixyZWN0SG92ZXI6ITEscHJvZ3Jlc3NpdmU6ITEsaW5jcmVtZW50YWw6ITEsZ2xvYmFsU2NhbGVSYXRpbzoxLGJlZm9yZUJydXNoOmZ1bmN0aW9uKHQpe30sYWZ0ZXJCcnVzaDpmdW5jdGlvbih0KXt9LGJydXNoOmZ1bmN0aW9uKHQsZSl7fSxnZXRCb3VuZGluZ1JlY3Q6ZnVuY3Rpb24oKXt9LGNvbnRhaW46ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZWN0Q29udGFpbih0LGUpfSx0cmF2ZXJzZTpmdW5jdGlvbih0LGUpe3QuY2FsbChlLHRoaXMpfSxyZWN0Q29udGFpbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMudHJhbnNmb3JtQ29vcmRUb0xvY2FsKHQsZSk7cmV0dXJuIHRoaXMuZ2V0Qm91bmRpbmdSZWN0KCkuY29udGFpbihpWzBdLGlbMV0pfSxkaXJ0eTpmdW5jdGlvbigpe3RoaXMuX19kaXJ0eT10aGlzLl9fZGlydHlUZXh0PSEwLHRoaXMuX3JlY3Q9bnVsbCx0aGlzLl9fenImJnRoaXMuX196ci5yZWZyZXNoKCl9LGFuaW1hdGVTdHlsZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hbmltYXRlKCJzdHlsZSIsdCl9LGF0dHJLVjpmdW5jdGlvbih0LGUpeyJzdHlsZSIhPT10P21pLnByb3RvdHlwZS5hdHRyS1YuY2FsbCh0aGlzLHQsZSk6dGhpcy5zdHlsZS5zZXQoZSl9LHNldFN0eWxlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc3R5bGUuc2V0KHQsZSksdGhpcy5kaXJ0eSghMSksdGhpc30sdXNlU3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3R5bGU9bmV3IEZpKHQsdGhpcyksdGhpcy5kaXJ0eSghMSksdGhpc30sY2FsY3VsYXRlVGV4dFBvc2l0aW9uOm51bGx9LHcoam4sbWkpLGIoam4sWG4pLHFuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cW4sdHlwZToiaW1hZ2UiLGJydXNoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zdHlsZSxuPWkuaW1hZ2U7aS5iaW5kKHQsdGhpcyxlKTt2YXIgbz10aGlzLl9pbWFnZT10bihuLHRoaXMuX2ltYWdlLHRoaXMsdGhpcy5vbmxvYWQpO2lmKG8mJm5uKG8pKXt2YXIgYT1pLnh8fDAscj1pLnl8fDAscz1pLndpZHRoLGw9aS5oZWlnaHQsdT1vLndpZHRoL28uaGVpZ2h0O2lmKG51bGw9PXMmJm51bGwhPWw/cz1sKnU6bnVsbD09bCYmbnVsbCE9cz9sPXMvdTpudWxsPT1zJiZudWxsPT1sJiYocz1vLndpZHRoLGw9by5oZWlnaHQpLHRoaXMuc2V0VHJhbnNmb3JtKHQpLGkuc1dpZHRoJiZpLnNIZWlnaHQpe3ZhciBoPWkuc3h8fDAsYz1pLnN5fHwwO3QuZHJhd0ltYWdlKG8saCxjLGkuc1dpZHRoLGkuc0hlaWdodCxhLHIscyxsKX1lbHNlIGlmKGkuc3gmJmkuc3kpe3ZhciBkPXMtKGg9aS5zeCksZj1sLShjPWkuc3kpO3QuZHJhd0ltYWdlKG8saCxjLGQsZixhLHIscyxsKX1lbHNlIHQuZHJhd0ltYWdlKG8sYSxyLHMsbCk7bnVsbCE9aS50ZXh0JiYodGhpcy5yZXN0b3JlVHJhbnNmb3JtKHQpLHRoaXMuZHJhd1JlY3RUZXh0KHQsdGhpcy5nZXRCb3VuZGluZ1JlY3QoKSkpfX0sZ2V0Qm91bmRpbmdSZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zdHlsZTtyZXR1cm4gdGhpcy5fcmVjdHx8KHRoaXMuX3JlY3Q9bmV3IE1pKHQueHx8MCx0Lnl8fDAsdC53aWR0aHx8MCx0LmhlaWdodHx8MCkpLHRoaXMuX3JlY3R9fSx3KHFuLGpuKTt2YXIgS249MzE0MTU5O2Z1bmN0aW9uICRuKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX12YXIgSm49bmV3IE1pKDAsMCwwLDApLFFuPW5ldyBNaSgwLDAsMCwwKTtmdW5jdGlvbiB0byh0LGUsaSl7dGhpcy50eXBlPSJjYW52YXMiO3ZhciBuPSF0Lm5vZGVOYW1lfHwiQ0FOVkFTIj09PXQubm9kZU5hbWUudG9VcHBlckNhc2UoKTt0aGlzLl9vcHRzPWk9TCh7fSxpfHx7fSksdGhpcy5kcHI9aS5kZXZpY2VQaXhlbFJhdGlvfHxoaSx0aGlzLl9zaW5nbGVDYW52YXM9bjt2YXIgbz0odGhpcy5yb290PXQpLnN0eWxlO28mJihvWyItd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3IiXT0idHJhbnNwYXJlbnQiLG9bIi13ZWJraXQtdXNlci1zZWxlY3QiXT1vWyJ1c2VyLXNlbGVjdCJdPW9bIi13ZWJraXQtdG91Y2gtY2FsbG91dCJdPSJub25lIix0LmlubmVySFRNTD0iIiksdGhpcy5zdG9yYWdlPWU7dmFyIGE9dGhpcy5femxldmVsTGlzdD1bXSxyPXRoaXMuX2xheWVycz17fTtpZih0aGlzLl9sYXllckNvbmZpZz17fSx0aGlzLl9uZWVkc01hbnVhbGx5Q29tcG9zaXRpbmc9ITEsbil7dmFyIHM9dC53aWR0aCxsPXQuaGVpZ2h0O251bGwhPWkud2lkdGgmJihzPWkud2lkdGgpLG51bGwhPWkuaGVpZ2h0JiYobD1pLmhlaWdodCksdGhpcy5kcHI9aS5kZXZpY2VQaXhlbFJhdGlvfHwxLHQud2lkdGg9cyp0aGlzLmRwcix0LmhlaWdodD1sKnRoaXMuZHByLHRoaXMuX3dpZHRoPXMsdGhpcy5faGVpZ2h0PWw7dmFyIHU9bmV3IEtpKHQsdGhpcyx0aGlzLmRwcik7dS5fX2J1aWx0aW5fXz0hMCx1LmluaXRDb250ZXh0KCksKHJbS25dPXUpLnpsZXZlbD1LbixhLnB1c2goS24pLHRoaXMuX2RvbVJvb3Q9dH1lbHNle3RoaXMuX3dpZHRoPXRoaXMuX2dldFNpemUoMCksdGhpcy5faGVpZ2h0PXRoaXMuX2dldFNpemUoMSk7dmFyIGg9dGhpcy5fZG9tUm9vdD1mdW5jdGlvbih0LGUpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBpLnN0eWxlLmNzc1RleHQ9WyJwb3NpdGlvbjpyZWxhdGl2ZSIsIndpZHRoOiIrdCsicHgiLCJoZWlnaHQ6IitlKyJweCIsInBhZGRpbmc6MCIsIm1hcmdpbjowIiwiYm9yZGVyLXdpZHRoOjAiXS5qb2luKCI7IikrIjsiLGl9KHRoaXMuX3dpZHRoLHRoaXMuX2hlaWdodCk7dC5hcHBlbmRDaGlsZChoKX10aGlzLl9ob3ZlcmxheWVyPW51bGwsdGhpcy5faG92ZXJFbGVtZW50cz1bXX10by5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnRvLGdldFR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4iY2FudmFzIn0saXNTaW5nbGVDYW52YXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2luZ2xlQ2FudmFzfSxnZXRWaWV3cG9ydFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tUm9vdH0sZ2V0Vmlld3BvcnRSb290T2Zmc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRWaWV3cG9ydFJvb3QoKTtpZih0KXJldHVybntvZmZzZXRMZWZ0OnQub2Zmc2V0TGVmdHx8MCxvZmZzZXRUb3A6dC5vZmZzZXRUb3B8fDB9fSxyZWZyZXNoOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuc3RvcmFnZS5nZXREaXNwbGF5TGlzdCghMCksaT10aGlzLl96bGV2ZWxMaXN0O3RoaXMuX3JlZHJhd0lkPU1hdGgucmFuZG9tKCksdGhpcy5fcGFpbnRMaXN0KGUsdCx0aGlzLl9yZWRyYXdJZCk7Zm9yKHZhciBuPTA7bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl0sYT10aGlzLl9sYXllcnNbb107aWYoIWEuX19idWlsdGluX18mJmEucmVmcmVzaCl7dmFyIHI9MD09PW4/dGhpcy5fYmFja2dyb3VuZENvbG9yOm51bGw7YS5yZWZyZXNoKHIpfX1yZXR1cm4gdGhpcy5yZWZyZXNoSG92ZXIoKSx0aGlzfSxhZGRIb3ZlcjpmdW5jdGlvbih0LGUpe2lmKCF0Ll9faG92ZXJNaXIpe3ZhciBpPW5ldyB0LmNvbnN0cnVjdG9yKHtzdHlsZTp0LnN0eWxlLHNoYXBlOnQuc2hhcGUsejp0LnosejI6dC56MixzaWxlbnQ6dC5zaWxlbnR9KTtyZXR1cm4oaS5fX2Zyb209dCkuX19ob3Zlck1pcj1pLGUmJmkuc2V0U3R5bGUoZSksdGhpcy5faG92ZXJFbGVtZW50cy5wdXNoKGkpLGl9fSxyZW1vdmVIb3ZlcjpmdW5jdGlvbih0KXt2YXIgZT10Ll9faG92ZXJNaXIsaT10aGlzLl9ob3ZlckVsZW1lbnRzLG49XyhpLGUpOzA8PW4mJmkuc3BsaWNlKG4sMSksdC5fX2hvdmVyTWlyPW51bGx9LGNsZWFySG92ZXI6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX2hvdmVyRWxlbWVudHMsaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbj1lW2ldLl9fZnJvbTtuJiYobi5fX2hvdmVyTWlyPW51bGwpfWUubGVuZ3RoPTB9LHJlZnJlc2hIb3ZlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hvdmVyRWxlbWVudHMsZT10Lmxlbmd0aCxpPXRoaXMuX2hvdmVybGF5ZXI7aWYoaSYmaS5jbGVhcigpLGUpe05pKHQsdGhpcy5zdG9yYWdlLmRpc3BsYXlhYmxlU29ydEZ1bmMpO3ZhciBuPXt9OyhpPWl8fCh0aGlzLl9ob3ZlcmxheWVyPXRoaXMuZ2V0TGF5ZXIoMWU1KSkpLmN0eC5zYXZlKCk7Zm9yKHZhciBvPTA7bzxlOyl7dmFyIGE9dFtvXSxyPWEuX19mcm9tO3ImJnIuX196cj8obysrLHIuaW52aXNpYmxlfHwoYS50cmFuc2Zvcm09ci50cmFuc2Zvcm0sYS5pbnZUcmFuc2Zvcm09ci5pbnZUcmFuc2Zvcm0sYS5fX2NsaXBQYXRocz1yLl9fY2xpcFBhdGhzLHRoaXMuX2RvUGFpbnRFbChhLGksITAsbikpKToodC5zcGxpY2UobywxKSxyLl9faG92ZXJNaXI9bnVsbCxlLS0pfWkuY3R4LnJlc3RvcmUoKX19LGdldEhvdmVyTGF5ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMYXllcigxZTUpfSxfcGFpbnRMaXN0OmZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLl9yZWRyYXdJZD09PWkpe2U9ZXx8ITEsdGhpcy5fdXBkYXRlTGF5ZXJTdGF0dXModCk7dmFyIG49dGhpcy5fZG9QYWludExpc3QodCxlKTtpZih0aGlzLl9uZWVkc01hbnVhbGx5Q29tcG9zaXRpbmcmJnRoaXMuX2NvbXBvc2l0ZU1hbnVhbGx5KCksIW4pe3ZhciBvPXRoaXM7JGkoZnVuY3Rpb24oKXtvLl9wYWludExpc3QodCxlLGkpfSl9fX0sX2NvbXBvc2l0ZU1hbnVhbGx5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRMYXllcihLbikuY3R4LGk9dGhpcy5fZG9tUm9vdC53aWR0aCxuPXRoaXMuX2RvbVJvb3QuaGVpZ2h0O2UuY2xlYXJSZWN0KDAsMCxpLG4pLHRoaXMuZWFjaEJ1aWx0aW5MYXllcihmdW5jdGlvbih0KXt0LnZpcnR1YWwmJmUuZHJhd0ltYWdlKHQuZG9tLDAsMCxpLG4pfSl9LF9kb1BhaW50TGlzdDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT1bXSxuPTA7bjx0aGlzLl96bGV2ZWxMaXN0Lmxlbmd0aDtuKyspe3ZhciBvPXRoaXMuX3psZXZlbExpc3Rbbl07KHM9dGhpcy5fbGF5ZXJzW29dKS5fX2J1aWx0aW5fXyYmcyE9PXRoaXMuX2hvdmVybGF5ZXImJihzLl9fZGlydHl8fGUpJiZpLnB1c2gocyl9Zm9yKHZhciBhPSEwLHI9MDtyPGkubGVuZ3RoO3IrKyl7dmFyIHMsbD0ocz1pW3JdKS5jdHgsdT17fTtsLnNhdmUoKTt2YXIgaD1lP3MuX19zdGFydEluZGV4OnMuX19kcmF3SW5kZXgsYz0hZSYmcy5pbmNyZW1lbnRhbCYmRGF0ZS5ub3csZD1jJiZEYXRlLm5vdygpLGY9cy56bGV2ZWw9PT10aGlzLl96bGV2ZWxMaXN0WzBdP3RoaXMuX2JhY2tncm91bmRDb2xvcjpudWxsO2lmKHMuX19zdGFydEluZGV4PT09cy5fX2VuZEluZGV4KXMuY2xlYXIoITEsZik7ZWxzZSBpZihoPT09cy5fX3N0YXJ0SW5kZXgpe3ZhciBwPXRbaF07cC5pbmNyZW1lbnRhbCYmcC5ub3RDbGVhciYmIWV8fHMuY2xlYXIoITEsZil9LTE9PT1oJiYoY29uc29sZS5lcnJvcigiRm9yIHNvbWUgdW5rbm93biByZWFzb24uIGRyYXdJbmRleCBpcyAtMSIpLGg9cy5fX3N0YXJ0SW5kZXgpO2Zvcih2YXIgZz1oO2c8cy5fX2VuZEluZGV4O2crKyl7dmFyIG09dFtnXTtpZih0aGlzLl9kb1BhaW50RWwobSxzLGUsdSksbS5fX2RpcnR5PW0uX19kaXJ0eVRleHQ9ITEsYylpZigxNTxEYXRlLm5vdygpLWQpYnJlYWt9cy5fX2RyYXdJbmRleD1nLHMuX19kcmF3SW5kZXg8cy5fX2VuZEluZGV4JiYoYT0hMSksdS5wcmV2RWxDbGlwUGF0aHMmJmwucmVzdG9yZSgpLGwucmVzdG9yZSgpfXJldHVybiB2Lnd4YSYmRSh0aGlzLl9sYXllcnMsZnVuY3Rpb24odCl7dCYmdC5jdHgmJnQuY3R4LmRyYXcmJnQuY3R4LmRyYXcoKX0pLGF9LF9kb1BhaW50RWw6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89ZS5jdHgsYT10LnRyYW5zZm9ybTtpZigoZS5fX2RpcnR5fHxpKSYmIXQuaW52aXNpYmxlJiYwIT09dC5zdHlsZS5vcGFjaXR5JiYoIWF8fGFbMF18fGFbM10pJiYoIXQuY3VsbGluZ3x8IWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gSm4uY29weSh0LmdldEJvdW5kaW5nUmVjdCgpKSx0LnRyYW5zZm9ybSYmSm4uYXBwbHlUcmFuc2Zvcm0odC50cmFuc2Zvcm0pLFFuLndpZHRoPWUsUW4uaGVpZ2h0PWksIUpuLmludGVyc2VjdChRbil9KHQsdGhpcy5fd2lkdGgsdGhpcy5faGVpZ2h0KSkpe3ZhciByPXQuX19jbGlwUGF0aHMscz1uLnByZXZFbENsaXBQYXRocztzJiYhZnVuY3Rpb24odCxlKXtpZih0PT09ZSlyZXR1cm4hMTtpZighdHx8IWV8fHQubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITA7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspaWYodFtpXSE9PWVbaV0pcmV0dXJuITA7cmV0dXJuITF9KHIscyl8fChzJiYoby5yZXN0b3JlKCksbi5wcmV2RWxDbGlwUGF0aHM9bnVsbCxuLnByZXZFbD1udWxsKSxyJiYoby5zYXZlKCksZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXTtuLnNldFRyYW5zZm9ybShlKSxlLmJlZ2luUGF0aCgpLG4uYnVpbGRQYXRoKGUsbi5zaGFwZSksZS5jbGlwKCksbi5yZXN0b3JlVHJhbnNmb3JtKGUpfX0ocixvKSxuLnByZXZFbENsaXBQYXRocz1yKSksdC5iZWZvcmVCcnVzaCYmdC5iZWZvcmVCcnVzaChvKSx0LmJydXNoKG8sbi5wcmV2RWx8fG51bGwpLChuLnByZXZFbD10KS5hZnRlckJydXNoJiZ0LmFmdGVyQnJ1c2gobyl9fSxnZXRMYXllcjpmdW5jdGlvbih0LGUpe3RoaXMuX3NpbmdsZUNhbnZhcyYmIXRoaXMuX25lZWRzTWFudWFsbHlDb21wb3NpdGluZyYmKHQ9S24pO3ZhciBpPXRoaXMuX2xheWVyc1t0XTtyZXR1cm4gaXx8KChpPW5ldyBLaSgienJfIit0LHRoaXMsdGhpcy5kcHIpKS56bGV2ZWw9dCxpLl9fYnVpbHRpbl9fPSEwLHRoaXMuX2xheWVyQ29uZmlnW3RdJiZtKGksdGhpcy5fbGF5ZXJDb25maWdbdF0sITApLGUmJihpLnZpcnR1YWw9ZSksdGhpcy5pbnNlcnRMYXllcih0LGkpLGkuaW5pdENvbnRleHQoKSksaX0saW5zZXJ0TGF5ZXI6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9sYXllcnMsbj10aGlzLl96bGV2ZWxMaXN0LG89bi5sZW5ndGgsYT1udWxsLHI9LTEscz10aGlzLl9kb21Sb290O2lmKGlbdF0pZmkoIlpMZXZlbCAiK3QrIiBoYXMgYmVlbiB1c2VkIGFscmVhZHkiKTtlbHNlIGlmKGZ1bmN0aW9uKHQpe3JldHVybiEhdCYmKCEhdC5fX2J1aWx0aW5fX3x8ImZ1bmN0aW9uIj09dHlwZW9mIHQucmVzaXplJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5yZWZyZXNoKX0oZSkpe2lmKDA8byYmdD5uWzBdKXtmb3Iocj0wO3I8by0xJiYhKG5bcl08dCYmbltyKzFdPnQpO3IrKyk7YT1pW25bcl1dfWlmKG4uc3BsaWNlKHIrMSwwLHQpLCEoaVt0XT1lKS52aXJ0dWFsKWlmKGEpe3ZhciBsPWEuZG9tO2wubmV4dFNpYmxpbmc/cy5pbnNlcnRCZWZvcmUoZS5kb20sbC5uZXh0U2libGluZyk6cy5hcHBlbmRDaGlsZChlLmRvbSl9ZWxzZSBzLmZpcnN0Q2hpbGQ/cy5pbnNlcnRCZWZvcmUoZS5kb20scy5maXJzdENoaWxkKTpzLmFwcGVuZENoaWxkKGUuZG9tKX1lbHNlIGZpKCJMYXllciBvZiB6bGV2ZWwgIit0KyIgaXMgbm90IHZhbGlkIil9LGVhY2hMYXllcjpmdW5jdGlvbih0LGUpe3ZhciBpLG4sbz10aGlzLl96bGV2ZWxMaXN0O2ZvcihuPTA7bjxvLmxlbmd0aDtuKyspaT1vW25dLHQuY2FsbChlLHRoaXMuX2xheWVyc1tpXSxpKX0sZWFjaEJ1aWx0aW5MYXllcjpmdW5jdGlvbih0LGUpe3ZhciBpLG4sbyxhPXRoaXMuX3psZXZlbExpc3Q7Zm9yKG89MDtvPGEubGVuZ3RoO28rKyluPWFbb10sKGk9dGhpcy5fbGF5ZXJzW25dKS5fX2J1aWx0aW5fXyYmdC5jYWxsKGUsaSxuKX0sZWFjaE90aGVyTGF5ZXI6ZnVuY3Rpb24odCxlKXt2YXIgaSxuLG8sYT10aGlzLl96bGV2ZWxMaXN0O2ZvcihvPTA7bzxhLmxlbmd0aDtvKyspbj1hW29dLChpPXRoaXMuX2xheWVyc1tuXSkuX19idWlsdGluX198fHQuY2FsbChlLGksbil9LGdldExheWVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXllcnN9LF91cGRhdGVMYXllclN0YXR1czpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe24mJihuLl9fZW5kSW5kZXghPT10JiYobi5fX2RpcnR5PSEwKSxuLl9fZW5kSW5kZXg9dCl9aWYodGhpcy5lYWNoQnVpbHRpbkxheWVyKGZ1bmN0aW9uKHQsZSl7dC5fX2RpcnR5PXQuX191c2VkPSExfSksdGhpcy5fc2luZ2xlQ2FudmFzKWZvcih2YXIgaT0xO2k8dC5sZW5ndGg7aSsrKXtpZigoYT10W2ldKS56bGV2ZWwhPT10W2ktMV0uemxldmVsfHxhLmluY3JlbWVudGFsKXt0aGlzLl9uZWVkc01hbnVhbGx5Q29tcG9zaXRpbmc9ITA7YnJlYWt9fXZhciBuPW51bGwsbz0wO2ZvcihpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBhLHIscz0oYT10W2ldKS56bGV2ZWw7YS5pbmNyZW1lbnRhbD8oKHI9dGhpcy5nZXRMYXllcihzKy4wMDEsdGhpcy5fbmVlZHNNYW51YWxseUNvbXBvc2l0aW5nKSkuaW5jcmVtZW50YWw9ITAsbz0xKTpyPXRoaXMuZ2V0TGF5ZXIocysoMDxvPy4wMTowKSx0aGlzLl9uZWVkc01hbnVhbGx5Q29tcG9zaXRpbmcpLHIuX19idWlsdGluX198fGZpKCJaTGV2ZWwgIitzKyIgaGFzIGJlZW4gdXNlZCBieSB1bmtvd24gbGF5ZXIgIityLmlkKSxyIT09biYmKHIuX191c2VkPSEwLHIuX19zdGFydEluZGV4IT09aSYmKHIuX19kaXJ0eT0hMCksci5fX3N0YXJ0SW5kZXg9aSxyLmluY3JlbWVudGFsP3IuX19kcmF3SW5kZXg9LTE6ci5fX2RyYXdJbmRleD1pLGUoaSksbj1yKSxhLl9fZGlydHkmJihyLl9fZGlydHk9ITAsci5pbmNyZW1lbnRhbCYmci5fX2RyYXdJbmRleDwwJiYoci5fX2RyYXdJbmRleD1pKSl9ZShpKSx0aGlzLmVhY2hCdWlsdGluTGF5ZXIoZnVuY3Rpb24odCxlKXshdC5fX3VzZWQmJjA8dC5nZXRFbGVtZW50Q291bnQoKSYmKHQuX19kaXJ0eT0hMCx0Ll9fc3RhcnRJbmRleD10Ll9fZW5kSW5kZXg9dC5fX2RyYXdJbmRleD0wKSx0Ll9fZGlydHkmJnQuX19kcmF3SW5kZXg8MCYmKHQuX19kcmF3SW5kZXg9dC5fX3N0YXJ0SW5kZXgpfSl9LGNsZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaEJ1aWx0aW5MYXllcih0aGlzLl9jbGVhckxheWVyKSx0aGlzfSxfY2xlYXJMYXllcjpmdW5jdGlvbih0KXt0LmNsZWFyKCl9LHNldEJhY2tncm91bmRDb2xvcjpmdW5jdGlvbih0KXt0aGlzLl9iYWNrZ3JvdW5kQ29sb3I9dH0sY29uZmlnTGF5ZXI6ZnVuY3Rpb24odCxlKXtpZihlKXt2YXIgaT10aGlzLl9sYXllckNvbmZpZztpW3RdP20oaVt0XSxlLCEwKTppW3RdPWU7Zm9yKHZhciBuPTA7bjx0aGlzLl96bGV2ZWxMaXN0Lmxlbmd0aDtuKyspe3ZhciBvPXRoaXMuX3psZXZlbExpc3Rbbl07aWYobz09PXR8fG89PT10Ky4wMSltKHRoaXMuX2xheWVyc1tvXSxpW3RdLCEwKX19fSxkZWxMYXllcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9sYXllcnMsaT10aGlzLl96bGV2ZWxMaXN0LG49ZVt0XTtuJiYobi5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuLmRvbSksZGVsZXRlIGVbdF0saS5zcGxpY2UoXyhpLHQpLDEpKX0scmVzaXplOmZ1bmN0aW9uKGUsaSl7aWYodGhpcy5fZG9tUm9vdC5zdHlsZSl7dmFyIHQ9dGhpcy5fZG9tUm9vdDt0LnN0eWxlLmRpc3BsYXk9Im5vbmUiO3ZhciBuPXRoaXMuX29wdHM7aWYobnVsbCE9ZSYmKG4ud2lkdGg9ZSksbnVsbCE9aSYmKG4uaGVpZ2h0PWkpLGU9dGhpcy5fZ2V0U2l6ZSgwKSxpPXRoaXMuX2dldFNpemUoMSksdC5zdHlsZS5kaXNwbGF5PSIiLHRoaXMuX3dpZHRoIT09ZXx8aSE9PXRoaXMuX2hlaWdodCl7Zm9yKHZhciBvIGluIHQuc3R5bGUud2lkdGg9ZSsicHgiLHQuc3R5bGUuaGVpZ2h0PWkrInB4Iix0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzLmhhc093blByb3BlcnR5KG8pJiZ0aGlzLl9sYXllcnNbb10ucmVzaXplKGUsaSk7RSh0aGlzLl9wcm9ncmVzc2l2ZUxheWVycyxmdW5jdGlvbih0KXt0LnJlc2l6ZShlLGkpfSksdGhpcy5yZWZyZXNoKCEwKX10aGlzLl93aWR0aD1lLHRoaXMuX2hlaWdodD1pfWVsc2V7aWYobnVsbD09ZXx8bnVsbD09aSlyZXR1cm47dGhpcy5fd2lkdGg9ZSx0aGlzLl9oZWlnaHQ9aSx0aGlzLmdldExheWVyKEtuKS5yZXNpemUoZSxpKX1yZXR1cm4gdGhpc30sY2xlYXJMYXllcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9sYXllcnNbdF07ZSYmZS5jbGVhcigpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5yb290LmlubmVySFRNTD0iIix0aGlzLnJvb3Q9dGhpcy5zdG9yYWdlPXRoaXMuX2RvbVJvb3Q9dGhpcy5fbGF5ZXJzPW51bGx9LGdldFJlbmRlcmVkQ2FudmFzOmZ1bmN0aW9uKHQpe2lmKHQ9dHx8e30sdGhpcy5fc2luZ2xlQ2FudmFzJiYhdGhpcy5fY29tcG9zaXRlTWFudWFsbHkpcmV0dXJuIHRoaXMuX2xheWVyc1tLbl0uZG9tO3ZhciBlPW5ldyBLaSgiaW1hZ2UiLHRoaXMsdC5waXhlbFJhdGlvfHx0aGlzLmRwcik7aWYoZS5pbml0Q29udGV4dCgpLGUuY2xlYXIoITEsdC5iYWNrZ3JvdW5kQ29sb3J8fHRoaXMuX2JhY2tncm91bmRDb2xvciksdC5waXhlbFJhdGlvPD10aGlzLmRwcil7dGhpcy5yZWZyZXNoKCk7dmFyIGk9ZS5kb20ud2lkdGgsbj1lLmRvbS5oZWlnaHQsbz1lLmN0eDt0aGlzLmVhY2hMYXllcihmdW5jdGlvbih0KXt0Ll9fYnVpbHRpbl9fP28uZHJhd0ltYWdlKHQuZG9tLDAsMCxpLG4pOnQucmVuZGVyVG9DYW52YXMmJihlLmN0eC5zYXZlKCksdC5yZW5kZXJUb0NhbnZhcyhlLmN0eCksZS5jdHgucmVzdG9yZSgpKX0pfWVsc2UgZm9yKHZhciBhPXt9LHI9dGhpcy5zdG9yYWdlLmdldERpc3BsYXlMaXN0KCEwKSxzPTA7czxyLmxlbmd0aDtzKyspe3ZhciBsPXJbc107dGhpcy5fZG9QYWludEVsKGwsZSwhMCxhKX1yZXR1cm4gZS5kb219LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpZHRofSxnZXRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVpZ2h0fSxfZ2V0U2l6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9vcHRzLGk9WyJ3aWR0aCIsImhlaWdodCJdW3RdLG49WyJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCJdW3RdLG89WyJwYWRkaW5nTGVmdCIsInBhZGRpbmdUb3AiXVt0XSxhPVsicGFkZGluZ1JpZ2h0IiwicGFkZGluZ0JvdHRvbSJdW3RdO2lmKG51bGwhPWVbaV0mJiJhdXRvIiE9PWVbaV0pcmV0dXJuIHBhcnNlRmxvYXQoZVtpXSk7dmFyIHI9dGhpcy5yb290LHM9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShyKTtyZXR1cm4ocltuXXx8JG4oc1tpXSl8fCRuKHIuc3R5bGVbaV0pKS0oJG4oc1tvXSl8fDApLSgkbihzW2FdKXx8MCl8MH0scGF0aFRvSW1hZ2U6ZnVuY3Rpb24odCxlKXtlPWV8fHRoaXMuZHByO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLG49aS5nZXRDb250ZXh0KCIyZCIpLG89dC5nZXRCb3VuZGluZ1JlY3QoKSxhPXQuc3R5bGUscj1hLnNoYWRvd0JsdXIqZSxzPWEuc2hhZG93T2Zmc2V0WCplLGw9YS5zaGFkb3dPZmZzZXRZKmUsdT1hLmhhc1N0cm9rZSgpP2EubGluZVdpZHRoOjAsaD1NYXRoLm1heCh1LzIsci1zKSxjPU1hdGgubWF4KHUvMixzK3IpLGQ9TWF0aC5tYXgodS8yLHItbCksZj1NYXRoLm1heCh1LzIsbCtyKSxwPW8ud2lkdGgraCtjLGc9by5oZWlnaHQrZCtmO2kud2lkdGg9cCplLGkuaGVpZ2h0PWcqZSxuLnNjYWxlKGUsZSksbi5jbGVhclJlY3QoMCwwLHAsZyksbi5kcHI9ZTt2YXIgbT17cG9zaXRpb246dC5wb3NpdGlvbixyb3RhdGlvbjp0LnJvdGF0aW9uLHNjYWxlOnQuc2NhbGV9O3QucG9zaXRpb249W2gtby54LGQtby55XSx0LnJvdGF0aW9uPTAsdC5zY2FsZT1bMSwxXSx0LnVwZGF0ZVRyYW5zZm9ybSgpLHQmJnQuYnJ1c2gobik7dmFyIHY9bmV3IHFuKHtzdHlsZTp7eDowLHk6MCxpbWFnZTppfX0pO3JldHVybiBudWxsIT1tLnBvc2l0aW9uJiYodi5wb3NpdGlvbj10LnBvc2l0aW9uPW0ucG9zaXRpb24pLG51bGwhPW0ucm90YXRpb24mJih2LnJvdGF0aW9uPXQucm90YXRpb249bS5yb3RhdGlvbiksbnVsbCE9bS5zY2FsZSYmKHYuc2NhbGU9dC5zY2FsZT1tLnNjYWxlKSx2fX07ZnVuY3Rpb24gZW8odCl7dD10fHx7fSx0aGlzLnN0YWdlPXQuc3RhZ2V8fHt9LHRoaXMub25mcmFtZT10Lm9uZnJhbWV8fGZ1bmN0aW9uKCl7fSx0aGlzLl9jbGlwcz1bXSx0aGlzLl9ydW5uaW5nPSExLHRoaXMuX3RpbWUsdGhpcy5fcGF1c2VkVGltZSx0aGlzLl9wYXVzZVN0YXJ0LHRoaXMuX3BhdXNlZD0hMSxDdC5jYWxsKHRoaXMpfWVvLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZW8sYWRkQ2xpcDpmdW5jdGlvbih0KXt0aGlzLl9jbGlwcy5wdXNoKHQpfSxhZGRBbmltYXRvcjpmdW5jdGlvbih0KXt0LmFuaW1hdGlvbj10aGlzO2Zvcih2YXIgZT10LmdldENsaXBzKCksaT0wO2k8ZS5sZW5ndGg7aSsrKXRoaXMuYWRkQ2xpcChlW2ldKX0scmVtb3ZlQ2xpcDpmdW5jdGlvbih0KXt2YXIgZT1fKHRoaXMuX2NsaXBzLHQpOzA8PWUmJnRoaXMuX2NsaXBzLnNwbGljZShlLDEpfSxyZW1vdmVBbmltYXRvcjpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5nZXRDbGlwcygpLGk9MDtpPGUubGVuZ3RoO2krKyl0aGlzLnJlbW92ZUNsaXAoZVtpXSk7dC5hbmltYXRpb249bnVsbH0sX3VwZGF0ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0obmV3IERhdGUpLmdldFRpbWUoKS10aGlzLl9wYXVzZWRUaW1lLGU9dC10aGlzLl90aW1lLGk9dGhpcy5fY2xpcHMsbj1pLmxlbmd0aCxvPVtdLGE9W10scj0wO3I8bjtyKyspe3ZhciBzPWlbcl0sbD1zLnN0ZXAodCxlKTtsJiYoby5wdXNoKGwpLGEucHVzaChzKSl9Zm9yKHI9MDtyPG47KWlbcl0uX25lZWRzUmVtb3ZlPyhpW3JdPWlbbi0xXSxpLnBvcCgpLG4tLSk6cisrO249by5sZW5ndGg7Zm9yKHI9MDtyPG47cisrKWFbcl0uZmlyZShvW3JdKTt0aGlzLl90aW1lPXQsdGhpcy5vbmZyYW1lKGUpLHRoaXMudHJpZ2dlcigiZnJhbWUiLGUpLHRoaXMuc3RhZ2UudXBkYXRlJiZ0aGlzLnN0YWdlLnVwZGF0ZSgpfSxfc3RhcnRMb29wOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9ydW5uaW5nPSEwLCRpKGZ1bmN0aW9uIHQoKXtlLl9ydW5uaW5nJiYoJGkodCksZS5fcGF1c2VkfHxlLl91cGRhdGUoKSl9KX0sc3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl90aW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMuX3BhdXNlZFRpbWU9MCx0aGlzLl9zdGFydExvb3AoKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuX3J1bm5pbmc9ITF9LHBhdXNlOmZ1bmN0aW9uKCl7dGhpcy5fcGF1c2VkfHwodGhpcy5fcGF1c2VTdGFydD0obmV3IERhdGUpLmdldFRpbWUoKSx0aGlzLl9wYXVzZWQ9ITApfSxyZXN1bWU6ZnVuY3Rpb24oKXt0aGlzLl9wYXVzZWQmJih0aGlzLl9wYXVzZWRUaW1lKz0obmV3IERhdGUpLmdldFRpbWUoKS10aGlzLl9wYXVzZVN0YXJ0LHRoaXMuX3BhdXNlZD0hMSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5fY2xpcHM9W119LGlzRmluaXNoZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fY2xpcHMubGVuZ3RofSxhbmltYXRlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IGxpKHQsKGU9ZXx8e30pLmxvb3AsZS5nZXR0ZXIsZS5zZXR0ZXIpO3JldHVybiB0aGlzLmFkZEFuaW1hdG9yKGkpLGl9fSxiKGVvLEN0KTt2YXIgaW8sbm8sb289di5kb21TdXBwb3J0ZWQsYW89KG5vPXtwb2ludGVyZG93bjoxLHBvaW50ZXJ1cDoxLHBvaW50ZXJtb3ZlOjEscG9pbnRlcm91dDoxfSx7bW91c2U6aW89WyJjbGljayIsImRibGNsaWNrIiwibW91c2V3aGVlbCIsIm1vdXNlb3V0IiwibW91c2V1cCIsIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsImNvbnRleHRtZW51Il0sdG91Y2g6WyJ0b3VjaHN0YXJ0IiwidG91Y2hlbmQiLCJ0b3VjaG1vdmUiXSxwb2ludGVyOk4oaW8sZnVuY3Rpb24odCl7dmFyIGU9dC5yZXBsYWNlKCJtb3VzZSIsInBvaW50ZXIiKTtyZXR1cm4gbm8uaGFzT3duUHJvcGVydHkoZSk/ZTp0fSl9KSxybz17bW91c2U6WyJtb3VzZW1vdmUiLCJtb3VzZXVwIl0scG9pbnRlcjpbInBvaW50ZXJtb3ZlIiwicG9pbnRlcnVwIl19O2Z1bmN0aW9uIHNvKHQpe3JldHVybiJtb3VzZXdoZWVsIj09PXQmJnYuYnJvd3Nlci5maXJlZm94PyJET01Nb3VzZVNjcm9sbCI6dH1mdW5jdGlvbiBsbyh0KXt2YXIgZT10LnBvaW50ZXJUeXBlO3JldHVybiJwZW4iPT09ZXx8InRvdWNoIj09PWV9ZnVuY3Rpb24gdW8odCl7dCYmKHQuenJCeVRvdWNoPSEwKX1mdW5jdGlvbiBobyh0LGUpe2Zvcih2YXIgaT0hMTsoZT1lJiZlLnBhcmVudE5vZGUpJiY5IT09ZS5ub2RlVHlwZSYmIShpPWU9PT10LnBhaW50ZXJSb290KTspO3JldHVybiBpfWZ1bmN0aW9uIGNvKHQsZSl7dGhpcy50eXBlPWUudHlwZSx0aGlzLnRhcmdldD10aGlzLmN1cnJlbnRUYXJnZXQ9dC5kb20sdGhpcy5wb2ludGVyVHlwZT1lLnBvaW50ZXJUeXBlLHRoaXMuY2xpZW50WD1lLmNsaWVudFgsdGhpcy5jbGllbnRZPWUuY2xpZW50WX12YXIgZm89Y28ucHJvdG90eXBlO2ZvLnN0b3BQcm9wYWdhdGlvbj1mby5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb249Zm8ucHJldmVudERlZmF1bHQ9ZXQ7dmFyIHBvPXttb3VzZWRvd246ZnVuY3Rpb24odCl7dD1HdCh0aGlzLmRvbSx0KSx0aGlzLl9tYXlQb2ludGVyQ2FwdHVyZT1bdC56clgsdC56clldLHRoaXMudHJpZ2dlcigibW91c2Vkb3duIix0KX0sbW91c2Vtb3ZlOmZ1bmN0aW9uKHQpe3Q9R3QodGhpcy5kb20sdCk7dmFyIGU9dGhpcy5fbWF5UG9pbnRlckNhcHR1cmU7IWV8fHQuenJYPT09ZVswXSYmdC56clk9PT1lWzFdfHxfbyh0aGlzLCEwKSx0aGlzLnRyaWdnZXIoIm1vdXNlbW92ZSIsdCl9LG1vdXNldXA6ZnVuY3Rpb24odCl7dD1HdCh0aGlzLmRvbSx0KSxfbyh0aGlzLCExKSx0aGlzLnRyaWdnZXIoIm1vdXNldXAiLHQpfSxtb3VzZW91dDpmdW5jdGlvbih0KXt0PUd0KHRoaXMuZG9tLHQpLHRoaXMuX3BvaW50ZXJDYXB0dXJpbmcmJih0LnpyRXZlbnRDb250cm9sPSJub19nbG9iYWxvdXQiKTt2YXIgZT10LnRvRWxlbWVudHx8dC5yZWxhdGVkVGFyZ2V0O3QuenJJc1RvTG9jYWxET009aG8odGhpcyxlKSx0aGlzLnRyaWdnZXIoIm1vdXNlb3V0Iix0KX0sdG91Y2hzdGFydDpmdW5jdGlvbih0KXt1byh0PUd0KHRoaXMuZG9tLHQpKSx0aGlzLl9sYXN0VG91Y2hNb21lbnQ9bmV3IERhdGUsdGhpcy5oYW5kbGVyLnByb2Nlc3NHZXN0dXJlKHQsInN0YXJ0IikscG8ubW91c2Vtb3ZlLmNhbGwodGhpcyx0KSxwby5tb3VzZWRvd24uY2FsbCh0aGlzLHQpfSx0b3VjaG1vdmU6ZnVuY3Rpb24odCl7dW8odD1HdCh0aGlzLmRvbSx0KSksdGhpcy5oYW5kbGVyLnByb2Nlc3NHZXN0dXJlKHQsImNoYW5nZSIpLHBvLm1vdXNlbW92ZS5jYWxsKHRoaXMsdCl9LHRvdWNoZW5kOmZ1bmN0aW9uKHQpe3VvKHQ9R3QodGhpcy5kb20sdCkpLHRoaXMuaGFuZGxlci5wcm9jZXNzR2VzdHVyZSh0LCJlbmQiKSxwby5tb3VzZXVwLmNhbGwodGhpcyx0KSwrbmV3IERhdGUtdGhpcy5fbGFzdFRvdWNoTW9tZW50PDMwMCYmcG8uY2xpY2suY2FsbCh0aGlzLHQpfSxwb2ludGVyZG93bjpmdW5jdGlvbih0KXtwby5tb3VzZWRvd24uY2FsbCh0aGlzLHQpfSxwb2ludGVybW92ZTpmdW5jdGlvbih0KXtsbyh0KXx8cG8ubW91c2Vtb3ZlLmNhbGwodGhpcyx0KX0scG9pbnRlcnVwOmZ1bmN0aW9uKHQpe3BvLm1vdXNldXAuY2FsbCh0aGlzLHQpfSxwb2ludGVyb3V0OmZ1bmN0aW9uKHQpe2xvKHQpfHxwby5tb3VzZW91dC5jYWxsKHRoaXMsdCl9fTtFKFsiY2xpY2siLCJtb3VzZXdoZWVsIiwiZGJsY2xpY2siLCJjb250ZXh0bWVudSJdLGZ1bmN0aW9uKGUpe3BvW2VdPWZ1bmN0aW9uKHQpe3Q9R3QodGhpcy5kb20sdCksdGhpcy50cmlnZ2VyKGUsdCl9fSk7dmFyIGdvPXtwb2ludGVybW92ZTpmdW5jdGlvbih0KXtsbyh0KXx8Z28ubW91c2Vtb3ZlLmNhbGwodGhpcyx0KX0scG9pbnRlcnVwOmZ1bmN0aW9uKHQpe2dvLm1vdXNldXAuY2FsbCh0aGlzLHQpfSxtb3VzZW1vdmU6ZnVuY3Rpb24odCl7dGhpcy50cmlnZ2VyKCJtb3VzZW1vdmUiLHQpfSxtb3VzZXVwOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3BvaW50ZXJDYXB0dXJpbmc7X28odGhpcywhMSksdGhpcy50cmlnZ2VyKCJtb3VzZXVwIix0KSxlJiYodC56ckV2ZW50Q29udHJvbD0ib25seV9nbG9iYWxvdXQiLHRoaXMudHJpZ2dlcigibW91c2VvdXQiLHQpKX19O2Z1bmN0aW9uIG1vKGksbil7dmFyIG89bi5kb21IYW5kbGVyczt2LnBvaW50ZXJFdmVudHNTdXBwb3J0ZWQ/RShhby5wb2ludGVyLGZ1bmN0aW9uKGUpe3lvKG4sZSxmdW5jdGlvbih0KXtvW2VdLmNhbGwoaSx0KX0pfSk6KHYudG91Y2hFdmVudHNTdXBwb3J0ZWQmJkUoYW8udG91Y2gsZnVuY3Rpb24oZSl7eW8obixlLGZ1bmN0aW9uKHQpe29bZV0uY2FsbChpLHQpLGZ1bmN0aW9uKHQpe3QudG91Y2hpbmc9ITAsbnVsbCE9dC50b3VjaFRpbWVyJiYoY2xlYXJUaW1lb3V0KHQudG91Y2hUaW1lciksdC50b3VjaFRpbWVyPW51bGwpLHQudG91Y2hUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50b3VjaGluZz0hMSx0LnRvdWNoVGltZXI9bnVsbH0sNzAwKX0obil9KX0pLEUoYW8ubW91c2UsZnVuY3Rpb24oZSl7eW8obixlLGZ1bmN0aW9uKHQpe3Q9VnQodCksbi50b3VjaGluZ3x8b1tlXS5jYWxsKGksdCl9KX0pKX1mdW5jdGlvbiB2byhpLG4pe2Z1bmN0aW9uIHQoZSl7eW8obixlLGZ1bmN0aW9uKHQpe3Q9VnQodCksaG8oaSx0LnRhcmdldCl8fCh0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEd0KHQuZG9tLG5ldyBjbyh0LGUpLCEwKX0oaSx0KSxuLmRvbUhhbmRsZXJzW2VdLmNhbGwoaSx0KSl9LHtjYXB0dXJlOiEwfSl9di5wb2ludGVyRXZlbnRzU3VwcG9ydGVkP0Uocm8ucG9pbnRlcix0KTp2LnRvdWNoRXZlbnRzU3VwcG9ydGVkfHxFKHJvLm1vdXNlLHQpfWZ1bmN0aW9uIHlvKHQsZSxpLG4pe3QubW91bnRlZFtlXT1pLHQubGlzdGVuZXJPcHRzW2VdPW4sRnQodC5kb21UYXJnZXQsc28oZSksaSxuKX1mdW5jdGlvbiB4byh0KXt2YXIgZSxpLG4sbyxhPXQubW91bnRlZDtmb3IodmFyIHIgaW4gYSlhLmhhc093blByb3BlcnR5KHIpJiYoZT10LmRvbVRhcmdldCxpPXNvKHIpLG49YVtyXSxvPXQubGlzdGVuZXJPcHRzW3JdLE50P2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLG4sbyk6ZS5kZXRhY2hFdmVudCgib24iK2ksbikpO3QubW91bnRlZD17fX1mdW5jdGlvbiBfbyh0LGUpe2lmKHQuX21heVBvaW50ZXJDYXB0dXJlPW51bGwsb28mJnQuX3BvaW50ZXJDYXB0dXJpbmdeZSl7dC5fcG9pbnRlckNhcHR1cmluZz1lO3ZhciBpPXQuX2dsb2JhbEhhbmRsZXJTY29wZTtlP3ZvKHQsaSk6eG8oaSl9fWZ1bmN0aW9uIHdvKHQsZSl7dGhpcy5kb21UYXJnZXQ9dCx0aGlzLmRvbUhhbmRsZXJzPWUsdGhpcy5tb3VudGVkPXt9LHRoaXMubGlzdGVuZXJPcHRzPXt9LHRoaXMudG91Y2hUaW1lcj1udWxsLHRoaXMudG91Y2hpbmc9ITF9ZnVuY3Rpb24gYm8odCxlKXtDdC5jYWxsKHRoaXMpLHRoaXMuZG9tPXQsdGhpcy5wYWludGVyUm9vdD1lLHRoaXMuX2xvY2FsSGFuZGxlclNjb3BlPW5ldyB3byh0LHBvKSxvbyYmKHRoaXMuX2dsb2JhbEhhbmRsZXJTY29wZT1uZXcgd28oZG9jdW1lbnQsZ28pKSx0aGlzLl9wb2ludGVyQ2FwdHVyaW5nPSExLHRoaXMuX21heVBvaW50ZXJDYXB0dXJlPW51bGwsbW8odGhpcyx0aGlzLl9sb2NhbEhhbmRsZXJTY29wZSl9dmFyIFNvPWJvLnByb3RvdHlwZTtTby5kaXNwb3NlPWZ1bmN0aW9uKCl7eG8odGhpcy5fbG9jYWxIYW5kbGVyU2NvcGUpLG9vJiZ4byh0aGlzLl9nbG9iYWxIYW5kbGVyU2NvcGUpfSxTby5zZXRDdXJzb3I9ZnVuY3Rpb24odCl7dGhpcy5kb20uc3R5bGUmJih0aGlzLmRvbS5zdHlsZS5jdXJzb3I9dHx8ImRlZmF1bHQiKX0sYihibyxDdCk7dmFyIE1vPSF2LmNhbnZhc1N1cHBvcnRlZCxJbz17Y2FudmFzOnRvfSxUbz17fTtmdW5jdGlvbiBBbyh0LGUpe3ZhciBpPW5ldyBDbyhuKCksdCxlKTtyZXR1cm4gVG9baS5pZF09aX1mdW5jdGlvbiBEbyh0LGUpe0lvW3RdPWV9dmFyIENvPWZ1bmN0aW9uKHQsZSxpKXtpPWl8fHt9LHRoaXMuZG9tPWUsdGhpcy5pZD10O3ZhciBuPXRoaXMsbz1uZXcgRWksYT1pLnJlbmRlcmVyO2lmKE1vKXtpZighSW8udm1sKXRocm93IG5ldyBFcnJvcigiWW91IG5lZWQgdG8gcmVxdWlyZSAnenJlbmRlci92bWwvdm1sJyB0byBzdXBwb3J0IElFOCIpO2E9InZtbCJ9ZWxzZSBhJiZJb1thXXx8KGE9ImNhbnZhcyIpO3ZhciByPW5ldyBJb1thXShlLG8saSx0KTt0aGlzLnN0b3JhZ2U9byx0aGlzLnBhaW50ZXI9cjt2YXIgcz12Lm5vZGV8fHYud29ya2VyP251bGw6bmV3IGJvKHIuZ2V0Vmlld3BvcnRSb290KCksci5yb290KTt0aGlzLmhhbmRsZXI9bmV3IEt0KG8scixzLHIucm9vdCksdGhpcy5hbmltYXRpb249bmV3IGVvKHtzdGFnZTp7dXBkYXRlOkEodGhpcy5mbHVzaCx0aGlzKX19KSx0aGlzLmFuaW1hdGlvbi5zdGFydCgpLHRoaXMuX25lZWRzUmVmcmVzaDt2YXIgbD1vLmRlbEZyb21TdG9yYWdlLHU9by5hZGRUb1N0b3JhZ2U7by5kZWxGcm9tU3RvcmFnZT1mdW5jdGlvbih0KXtsLmNhbGwobyx0KSx0JiZ0LnJlbW92ZVNlbGZGcm9tWnIobil9LG8uYWRkVG9TdG9yYWdlPWZ1bmN0aW9uKHQpe3UuY2FsbChvLHQpLHQuYWRkU2VsZlRvWnIobil9fTtDby5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkNvLGdldElkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWR9LGFkZDpmdW5jdGlvbih0KXt0aGlzLnN0b3JhZ2UuYWRkUm9vdCh0KSx0aGlzLl9uZWVkc1JlZnJlc2g9ITB9LHJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLnN0b3JhZ2UuZGVsUm9vdCh0KSx0aGlzLl9uZWVkc1JlZnJlc2g9ITB9LGNvbmZpZ0xheWVyOmZ1bmN0aW9uKHQsZSl7dGhpcy5wYWludGVyLmNvbmZpZ0xheWVyJiZ0aGlzLnBhaW50ZXIuY29uZmlnTGF5ZXIodCxlKSx0aGlzLl9uZWVkc1JlZnJlc2g9ITB9LHNldEJhY2tncm91bmRDb2xvcjpmdW5jdGlvbih0KXt0aGlzLnBhaW50ZXIuc2V0QmFja2dyb3VuZENvbG9yJiZ0aGlzLnBhaW50ZXIuc2V0QmFja2dyb3VuZENvbG9yKHQpLHRoaXMuX25lZWRzUmVmcmVzaD0hMH0scmVmcmVzaEltbWVkaWF0ZWx5OmZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZWZyZXNoPXRoaXMuX25lZWRzUmVmcmVzaEhvdmVyPSExLHRoaXMucGFpbnRlci5yZWZyZXNoKCksdGhpcy5fbmVlZHNSZWZyZXNoPXRoaXMuX25lZWRzUmVmcmVzaEhvdmVyPSExfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZWZyZXNoPSEwfSxmbHVzaDpmdW5jdGlvbigpe3ZhciB0O3RoaXMuX25lZWRzUmVmcmVzaCYmKHQ9ITAsdGhpcy5yZWZyZXNoSW1tZWRpYXRlbHkoKSksdGhpcy5fbmVlZHNSZWZyZXNoSG92ZXImJih0PSEwLHRoaXMucmVmcmVzaEhvdmVySW1tZWRpYXRlbHkoKSksdCYmdGhpcy50cmlnZ2VyKCJyZW5kZXJlZCIpfSxhZGRIb3ZlcjpmdW5jdGlvbih0LGUpe2lmKHRoaXMucGFpbnRlci5hZGRIb3Zlcil7dmFyIGk9dGhpcy5wYWludGVyLmFkZEhvdmVyKHQsZSk7cmV0dXJuIHRoaXMucmVmcmVzaEhvdmVyKCksaX19LHJlbW92ZUhvdmVyOmZ1bmN0aW9uKHQpe3RoaXMucGFpbnRlci5yZW1vdmVIb3ZlciYmKHRoaXMucGFpbnRlci5yZW1vdmVIb3Zlcih0KSx0aGlzLnJlZnJlc2hIb3ZlcigpKX0sY2xlYXJIb3ZlcjpmdW5jdGlvbigpe3RoaXMucGFpbnRlci5jbGVhckhvdmVyJiYodGhpcy5wYWludGVyLmNsZWFySG92ZXIoKSx0aGlzLnJlZnJlc2hIb3ZlcigpKX0scmVmcmVzaEhvdmVyOmZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZWZyZXNoSG92ZXI9ITB9LHJlZnJlc2hIb3ZlckltbWVkaWF0ZWx5OmZ1bmN0aW9uKCl7dGhpcy5fbmVlZHNSZWZyZXNoSG92ZXI9ITEsdGhpcy5wYWludGVyLnJlZnJlc2hIb3ZlciYmdGhpcy5wYWludGVyLnJlZnJlc2hIb3ZlcigpfSxyZXNpemU6ZnVuY3Rpb24odCl7dD10fHx7fSx0aGlzLnBhaW50ZXIucmVzaXplKHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuaGFuZGxlci5yZXNpemUoKX0sY2xlYXJBbmltYXRpb246ZnVuY3Rpb24oKXt0aGlzLmFuaW1hdGlvbi5jbGVhcigpfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhaW50ZXIuZ2V0V2lkdGgoKX0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFpbnRlci5nZXRIZWlnaHQoKX0scGF0aFRvSW1hZ2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5wYWludGVyLnBhdGhUb0ltYWdlKHQsZSl9LHNldEN1cnNvclN0eWxlOmZ1bmN0aW9uKHQpe3RoaXMuaGFuZGxlci5zZXRDdXJzb3JTdHlsZSh0KX0sZmluZEhvdmVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaGFuZGxlci5maW5kSG92ZXIodCxlKX0sb246ZnVuY3Rpb24odCxlLGkpe3RoaXMuaGFuZGxlci5vbih0LGUsaSl9LG9mZjpmdW5jdGlvbih0LGUpe3RoaXMuaGFuZGxlci5vZmYodCxlKX0sdHJpZ2dlcjpmdW5jdGlvbih0LGUpe3RoaXMuaGFuZGxlci50cmlnZ2VyKHQsZSl9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5zdG9yYWdlLmRlbFJvb3QoKSx0aGlzLnBhaW50ZXIuY2xlYXIoKX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuYW5pbWF0aW9uLnN0b3AoKSx0aGlzLmNsZWFyKCksdGhpcy5zdG9yYWdlLmRpc3Bvc2UoKSx0aGlzLnBhaW50ZXIuZGlzcG9zZSgpLHRoaXMuaGFuZGxlci5kaXNwb3NlKCksdGhpcy5hbmltYXRpb249dGhpcy5zdG9yYWdlPXRoaXMucGFpbnRlcj10aGlzLmhhbmRsZXI9bnVsbCxmdW5jdGlvbih0KXtkZWxldGUgVG9bdF19KHRoaXMuaWQpfX07dmFyIExvPShPYmplY3QuZnJlZXplfHxPYmplY3QpKHt2ZXJzaW9uOiI0LjIuMCIsaW5pdDpBbyxkaXNwb3NlOmZ1bmN0aW9uKHQpe2lmKHQpdC5kaXNwb3NlKCk7ZWxzZXtmb3IodmFyIGUgaW4gVG8pVG8uaGFzT3duUHJvcGVydHkoZSkmJlRvW2VdLmRpc3Bvc2UoKTtUbz17fX1yZXR1cm4gdGhpc30sZ2V0SW5zdGFuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIFRvW3RdfSxyZWdpc3RlclBhaW50ZXI6RG99KSxrbz1FLFBvPVIsTm89ayxPbz0ic2VyaWVzXDAiO2Z1bmN0aW9uIEVvKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQXJyYXk/dDpudWxsPT10P1tdOlt0XX1mdW5jdGlvbiB6byh0LGUsaSl7aWYodCl7dFtlXT10W2VdfHx7fSx0LmVtcGhhc2lzPXQuZW1waGFzaXN8fHt9LHQuZW1waGFzaXNbZV09dC5lbXBoYXNpc1tlXXx8e307Zm9yKHZhciBuPTAsbz1pLmxlbmd0aDtuPG87bisrKXt2YXIgYT1pW25dOyF0LmVtcGhhc2lzW2VdLmhhc093blByb3BlcnR5KGEpJiZ0W2VdLmhhc093blByb3BlcnR5KGEpJiYodC5lbXBoYXNpc1tlXVthXT10W2VdW2FdKX19fXZhciBSbz1bImZvbnRTdHlsZSIsImZvbnRXZWlnaHQiLCJmb250U2l6ZSIsImZvbnRGYW1pbHkiLCJyaWNoIiwidGFnIiwiY29sb3IiLCJ0ZXh0Qm9yZGVyQ29sb3IiLCJ0ZXh0Qm9yZGVyV2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsImxpbmVIZWlnaHQiLCJhbGlnbiIsInZlcnRpY2FsQWxpZ24iLCJiYXNlbGluZSIsInNoYWRvd0NvbG9yIiwic2hhZG93Qmx1ciIsInNoYWRvd09mZnNldFgiLCJzaGFkb3dPZmZzZXRZIiwidGV4dFNoYWRvd0NvbG9yIiwidGV4dFNoYWRvd0JsdXIiLCJ0ZXh0U2hhZG93T2Zmc2V0WCIsInRleHRTaGFkb3dPZmZzZXRZIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImJvcmRlclJhZGl1cyIsInBhZGRpbmciXTtmdW5jdGlvbiBCbyh0KXtyZXR1cm4hUG8odCl8fE5vKHQpfHx0IGluc3RhbmNlb2YgRGF0ZT90OnQudmFsdWV9ZnVuY3Rpb24gVm8odCxvKXtvPShvfHxbXSkuc2xpY2UoKTt2YXIgYT1OKHR8fFtdLGZ1bmN0aW9uKHQsZSl7cmV0dXJue2V4aXN0OnR9fSk7cmV0dXJuIGtvKG8sZnVuY3Rpb24odCxlKXtpZihQbyh0KSl7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspaWYoIWFbaV0ub3B0aW9uJiZudWxsIT10LmlkJiZhW2ldLmV4aXN0LmlkPT09dC5pZCsiIilyZXR1cm4gYVtpXS5vcHRpb249dCx2b2lkKG9bZV09bnVsbCk7Zm9yKGk9MDtpPGEubGVuZ3RoO2krKyl7dmFyIG49YVtpXS5leGlzdDtpZighKGFbaV0ub3B0aW9ufHxudWxsIT1uLmlkJiZudWxsIT10LmlkfHxudWxsPT10Lm5hbWV8fFdvKHQpfHxXbyhuKXx8bi5uYW1lIT09dC5uYW1lKyIiKSlyZXR1cm4gYVtpXS5vcHRpb249dCx2b2lkKG9bZV09bnVsbCl9fX0pLGtvKG8sZnVuY3Rpb24odCxlKXtpZihQbyh0KSl7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspe3ZhciBuPWFbaV0uZXhpc3Q7aWYoIWFbaV0ub3B0aW9uJiYhV28obikmJm51bGw9PXQuaWQpe2FbaV0ub3B0aW9uPXQ7YnJlYWt9fWk+PWEubGVuZ3RoJiZhLnB1c2goe29wdGlvbjp0fSl9fSksYX1mdW5jdGlvbiBHbyh0KXt2YXIgcj1RKCk7a28odCxmdW5jdGlvbih0LGUpe3ZhciBpPXQuZXhpc3Q7aSYmci5zZXQoaS5pZCx0KX0pLGtvKHQsZnVuY3Rpb24odCxlKXt2YXIgaT10Lm9wdGlvbjtZKCFpfHxudWxsPT1pLmlkfHwhci5nZXQoaS5pZCl8fHIuZ2V0KGkuaWQpPT09dCwiaWQgZHVwbGljYXRlczogIisoaSYmaS5pZCkpLGkmJm51bGwhPWkuaWQmJnIuc2V0KGkuaWQsdCksdC5rZXlJbmZvfHwodC5rZXlJbmZvPXt9KX0pLGtvKHQsZnVuY3Rpb24odCxlKXt2YXIgaT10LmV4aXN0LG49dC5vcHRpb24sbz10LmtleUluZm87aWYoUG8obikpe2lmKG8ubmFtZT1udWxsIT1uLm5hbWU/bi5uYW1lKyIiOmk/aS5uYW1lOk9vK2UsaSlvLmlkPWkuaWQ7ZWxzZSBpZihudWxsIT1uLmlkKW8uaWQ9bi5pZCsiIjtlbHNlIGZvcih2YXIgYT0wO28uaWQ9IlwwIitvLm5hbWUrIlwwIithKyssci5nZXQoby5pZCk7KTtyLnNldChvLmlkLHQpfX0pfWZ1bmN0aW9uIEZvKHQpe3ZhciBlPXQubmFtZTtyZXR1cm4hKCFlfHwhZS5pbmRleE9mKE9vKSl9ZnVuY3Rpb24gV28odCl7cmV0dXJuIFBvKHQpJiZ0LmlkJiYwPT09KHQuaWQrIiIpLmluZGV4T2YoIlwwX2VjX1wwIil9ZnVuY3Rpb24gSG8oZSx0KXtyZXR1cm4gbnVsbCE9dC5kYXRhSW5kZXhJbnNpZGU/dC5kYXRhSW5kZXhJbnNpZGU6bnVsbCE9dC5kYXRhSW5kZXg/ayh0LmRhdGFJbmRleCk/Tih0LmRhdGFJbmRleCxmdW5jdGlvbih0KXtyZXR1cm4gZS5pbmRleE9mUmF3SW5kZXgodCl9KTplLmluZGV4T2ZSYXdJbmRleCh0LmRhdGFJbmRleCk6bnVsbCE9dC5uYW1lP2sodC5uYW1lKT9OKHQubmFtZSxmdW5jdGlvbih0KXtyZXR1cm4gZS5pbmRleE9mTmFtZSh0KX0pOmUuaW5kZXhPZk5hbWUodC5uYW1lKTp2b2lkIDB9ZnVuY3Rpb24gWm8oKXt2YXIgZT0iX19cMGVjX2lubmVyXyIrVW8rKysiXyIrTWF0aC5yYW5kb20oKS50b0ZpeGVkKDUpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdFtlXXx8KHRbZV09e30pfX12YXIgVW89MDtmdW5jdGlvbiBYbyhzLGwsdSl7aWYoeihsKSl7dmFyIHQ9e307dFtsKyJJbmRleCJdPTAsbD10fXZhciBlPXUmJnUuZGVmYXVsdE1haW5UeXBlOyFlfHxZbyhsLGUrIkluZGV4Iil8fFlvKGwsZSsiSWQiKXx8WW8obCxlKyJOYW1lIil8fChsW2UrIkluZGV4Il09MCk7dmFyIGg9e307cmV0dXJuIGtvKGwsZnVuY3Rpb24odCxlKXt0PWxbZV07aWYoImRhdGFJbmRleCIhPT1lJiYiZGF0YUluZGV4SW5zaWRlIiE9PWUpe3ZhciBpPWUubWF0Y2goL14oXHcrKShJbmRleHxJZHxOYW1lKSQvKXx8W10sbj1pWzFdLG89KGlbMl18fCIiKS50b0xvd2VyQ2FzZSgpO2lmKCEoIW58fCFvfHxudWxsPT10fHwiaW5kZXgiPT09byYmIm5vbmUiPT09dHx8dSYmdS5pbmNsdWRlTWFpblR5cGVzJiZfKHUuaW5jbHVkZU1haW5UeXBlcyxuKTwwKSl7dmFyIGE9e21haW5UeXBlOm59OyJpbmRleCI9PT1vJiYiYWxsIj09PXR8fChhW29dPXQpO3ZhciByPXMucXVlcnlDb21wb25lbnRzKGEpO2hbbisiTW9kZWxzIl09cixoW24rIk1vZGVsIl09clswXX19ZWxzZSBoW2VdPXR9KSxofWZ1bmN0aW9uIFlvKHQsZSl7cmV0dXJuIHQmJnQuaGFzT3duUHJvcGVydHkoZSl9ZnVuY3Rpb24gam8odCxlLGkpe3Quc2V0QXR0cmlidXRlP3Quc2V0QXR0cmlidXRlKGUsaSk6dFtlXT1pfWZ1bmN0aW9uIHFvKHQpe3JldHVybiJhdXRvIj09PXQ/di5kb21TdXBwb3J0ZWQ/Imh0bWwiOiJyaWNoVGV4dCI6dHx8Imh0bWwifWZ1bmN0aW9uIEtvKHQsaSl7dmFyIG49USgpLG89W107cmV0dXJuIEUodCxmdW5jdGlvbih0KXt2YXIgZT1pKHQpOyhuLmdldChlKXx8KG8ucHVzaChlKSxuLnNldChlLFtdKSkpLnB1c2godCl9KSx7a2V5czpvLGJ1Y2tldHM6bn19dmFyICRvPSIuIixKbz0iX19fRUNfX0NPTVBPTkVOVF9fQ09OVEFJTkVSX19fIjtmdW5jdGlvbiBRbyh0KXt2YXIgZT17bWFpbjoiIixzdWI6IiJ9O3JldHVybiB0JiYodD10LnNwbGl0KCRvKSxlLm1haW49dFswXXx8IiIsZS5zdWI9dFsxXXx8IiIpLGV9ZnVuY3Rpb24gdGEodCl7KHQuJGNvbnN0cnVjdG9yPXQpLmV4dGVuZD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC4kY29uc3RydWN0b3I/dC4kY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpOmkuYXBwbHkodGhpcyxhcmd1bWVudHMpfXZhciBpPXRoaXM7cmV0dXJuIEwoZS5wcm90b3R5cGUsdCksZS5leHRlbmQ9dGhpcy5leHRlbmQsZS5zdXBlckNhbGw9bmEsZS5zdXBlckFwcGx5PW9hLHcoZSx0aGlzKSxlLnN1cGVyQ2xhc3M9aSxlfX12YXIgZWE9MDtmdW5jdGlvbiBpYSh0KXt2YXIgZT1bIl9fXDBpc19jbHoiLGVhKyssTWF0aC5yYW5kb20oKS50b0ZpeGVkKDMpXS5qb2luKCJfIik7dC5wcm90b3R5cGVbZV09ITAsdC5pc0luc3RhbmNlPWZ1bmN0aW9uKHQpe3JldHVybiEoIXR8fCF0W2VdKX19ZnVuY3Rpb24gbmEodCxlKXt2YXIgaT1VKGFyZ3VtZW50cywyKTtyZXR1cm4gdGhpcy5zdXBlckNsYXNzLnByb3RvdHlwZVtlXS5hcHBseSh0LGkpfWZ1bmN0aW9uIG9hKHQsZSxpKXtyZXR1cm4gdGhpcy5zdXBlckNsYXNzLnByb3RvdHlwZVtlXS5hcHBseSh0LGkpfWZ1bmN0aW9uIGFhKGksdCl7dD10fHx7fTt2YXIgbz17fTtpZihpLnJlZ2lzdGVyQ2xhc3M9ZnVuY3Rpb24odCxlKXtpZihlKWlmKGZ1bmN0aW9uKHQpe1koL15bYS16QS1aMC05X10rKFsuXVthLXpBLVowLTlfXSspPyQvLnRlc3QodCksJ2NvbXBvbmVudFR5cGUgIicrdCsnIiBpbGxlZ2FsJyl9KGUpLChlPVFvKGUpKS5zdWIpe2lmKGUuc3ViIT09Sm8peyhmdW5jdGlvbih0KXt2YXIgZT1vW3QubWFpbl07ZSYmZVtKb118fCgoZT1vW3QubWFpbl09e30pW0pvXT0hMCk7cmV0dXJuIGV9KShlKVtlLnN1Yl09dH19ZWxzZSBvW2UubWFpbl09dDtyZXR1cm4gdH0saS5nZXRDbGFzcz1mdW5jdGlvbih0LGUsaSl7dmFyIG49b1t0XTtpZihuJiZuW0pvXSYmKG49ZT9uW2VdOm51bGwpLGkmJiFuKXRocm93IG5ldyBFcnJvcihlPyJDb21wb25lbnQgIit0KyIuIisoZXx8IiIpKyIgbm90IGV4aXN0cy4gTG9hZCBpdCBmaXJzdC4iOnQrIi50eXBlIHNob3VsZCBiZSBzcGVjaWZpZWQuIik7cmV0dXJuIG59LGkuZ2V0Q2xhc3Nlc0J5TWFpblR5cGU9ZnVuY3Rpb24odCl7dD1Rbyh0KTt2YXIgaT1bXSxlPW9bdC5tYWluXTtyZXR1cm4gZSYmZVtKb10/RShlLGZ1bmN0aW9uKHQsZSl7ZSE9PUpvJiZpLnB1c2godCl9KTppLnB1c2goZSksaX0saS5oYXNDbGFzcz1mdW5jdGlvbih0KXtyZXR1cm4gdD1Rbyh0KSwhIW9bdC5tYWluXX0saS5nZXRBbGxDbGFzc01haW5UeXBlcz1mdW5jdGlvbigpe3ZhciBpPVtdO3JldHVybiBFKG8sZnVuY3Rpb24odCxlKXtpLnB1c2goZSl9KSxpfSxpLmhhc1N1YlR5cGVzPWZ1bmN0aW9uKHQpe3Q9UW8odCk7dmFyIGU9b1t0Lm1haW5dO3JldHVybiBlJiZlW0pvXX0saS5wYXJzZUNsYXNzVHlwZT1Rbyx0LnJlZ2lzdGVyV2hlbkV4dGVuZCl7dmFyIG49aS5leHRlbmQ7biYmKGkuZXh0ZW5kPWZ1bmN0aW9uKHQpe3ZhciBlPW4uY2FsbCh0aGlzLHQpO3JldHVybiBpLnJlZ2lzdGVyQ2xhc3MoZSx0LnR5cGUpfSl9cmV0dXJuIGl9ZnVuY3Rpb24gcmEocyl7Zm9yKHZhciB0PTA7dDxzLmxlbmd0aDt0Kyspc1t0XVsxXXx8KHNbdF1bMV09c1t0XVswXSk7cmV0dXJuIGZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49e30sbz0wO288cy5sZW5ndGg7bysrKXt2YXIgYT1zW29dWzFdO2lmKCEoZSYmMDw9XyhlLGEpfHxpJiZfKGksYSk8MCkpe3ZhciByPXQuZ2V0U2hhbGxvdyhhKTtudWxsIT1yJiYobltzW29dWzBdXT1yKX19cmV0dXJuIG59fXZhciBzYT1yYShbWyJsaW5lV2lkdGgiLCJ3aWR0aCJdLFsic3Ryb2tlIiwiY29sb3IiXSxbIm9wYWNpdHkiXSxbInNoYWRvd0JsdXIiXSxbInNoYWRvd09mZnNldFgiXSxbInNoYWRvd09mZnNldFkiXSxbInNoYWRvd0NvbG9yIl1dKSxsYT17Z2V0TGluZVN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXNhKHRoaXMsdCk7cmV0dXJuIGUubGluZURhc2g9dGhpcy5nZXRMaW5lRGFzaChlLmxpbmVXaWR0aCksZX0sZ2V0TGluZURhc2g6ZnVuY3Rpb24odCl7bnVsbD09dCYmKHQ9MSk7dmFyIGU9dGhpcy5nZXQoInR5cGUiKSxpPU1hdGgubWF4KHQsMiksbj00KnQ7cmV0dXJuInNvbGlkIiE9PWUmJm51bGwhPWUmJigiZGFzaGVkIj09PWU/W24sbl06W2ksaV0pfX0sdWE9cmEoW1siZmlsbCIsImNvbG9yIl0sWyJzaGFkb3dCbHVyIl0sWyJzaGFkb3dPZmZzZXRYIl0sWyJzaGFkb3dPZmZzZXRZIl0sWyJvcGFjaXR5Il0sWyJzaGFkb3dDb2xvciJdXSksaGE9e2dldEFyZWFTdHlsZTpmdW5jdGlvbih0LGUpe3JldHVybiB1YSh0aGlzLHQsZSl9fSxjYT1NYXRoLnBvdyxkYT1NYXRoLnNxcnQsZmE9MWUtOCxwYT0xZS00LGdhPWRhKDMpLG1hPTEvMyx2YT1vdCgpLHlhPW90KCkseGE9b3QoKTtmdW5jdGlvbiBfYSh0KXtyZXR1cm4tZmE8dCYmdDxmYX1mdW5jdGlvbiB3YSh0KXtyZXR1cm4gZmE8dHx8dDwtZmF9ZnVuY3Rpb24gYmEodCxlLGksbixvKXt2YXIgYT0xLW87cmV0dXJuIGEqYSooYSp0KzMqbyplKStvKm8qKG8qbiszKmEqaSl9ZnVuY3Rpb24gU2EodCxlLGksbixvKXt2YXIgYT0xLW87cmV0dXJuIDMqKCgoZS10KSphKzIqKGktZSkqbykqYSsobi1pKSpvKm8pfWZ1bmN0aW9uIE1hKHQsZSxpLG4sbyl7dmFyIGE9NippLTEyKmUrNip0LHI9OSplKzMqbi0zKnQtOSppLHM9MyplLTMqdCxsPTA7aWYoX2Eocikpe2lmKHdhKGEpKTA8PShoPS1zL2EpJiZoPD0xJiYob1tsKytdPWgpfWVsc2V7dmFyIHU9YSphLTQqcipzO2lmKF9hKHUpKW9bMF09LWEvKDIqcik7ZWxzZSBpZigwPHUpe3ZhciBoLGM9ZGEodSksZD0oLWEtYykvKDIqcik7MDw9KGg9KC1hK2MpLygyKnIpKSYmaDw9MSYmKG9bbCsrXT1oKSwwPD1kJiZkPD0xJiYob1tsKytdPWQpfX1yZXR1cm4gbH1mdW5jdGlvbiBJYSh0LGUsaSxuLG8sYSl7dmFyIHI9KGUtdCkqbyt0LHM9KGktZSkqbytlLGw9KG4taSkqbytpLHU9KHMtcikqbytyLGg9KGwtcykqbytzLGM9KGgtdSkqbyt1O2FbMF09dCxhWzFdPXIsYVsyXT11LGFbM109YyxhWzRdPWMsYVs1XT1oLGFbNl09bCxhWzddPW59ZnVuY3Rpb24gVGEodCxlLGksbil7dmFyIG89MS1uO3JldHVybiBvKihvKnQrMipuKmUpK24qbippfWZ1bmN0aW9uIEFhKHQsZSxpLG4pe3JldHVybiAyKigoMS1uKSooZS10KStuKihpLWUpKX1mdW5jdGlvbiBEYSh0LGUsaSl7dmFyIG49dCtpLTIqZTtyZXR1cm4gMD09bj8uNToodC1lKS9ufWZ1bmN0aW9uIENhKHQsZSxpLG4sbyl7dmFyIGE9KGUtdCkqbit0LHI9KGktZSkqbitlLHM9KHItYSkqbithO29bMF09dCxvWzFdPWEsb1syXT1zLG9bM109cyxvWzRdPXIsb1s1XT1pfXZhciBMYT1NYXRoLm1pbixrYT1NYXRoLm1heCxQYT1NYXRoLnNpbixOYT1NYXRoLmNvcyxPYT0yKk1hdGguUEksRWE9b3QoKSx6YT1vdCgpLFJhPW90KCk7ZnVuY3Rpb24gQmEodCxlLGkpe2lmKDAhPT10Lmxlbmd0aCl7dmFyIG4sbz10WzBdLGE9b1swXSxyPW9bMF0scz1vWzFdLGw9b1sxXTtmb3Iobj0xO248dC5sZW5ndGg7bisrKW89dFtuXSxhPUxhKGEsb1swXSkscj1rYShyLG9bMF0pLHM9TGEocyxvWzFdKSxsPWthKGwsb1sxXSk7ZVswXT1hLGVbMV09cyxpWzBdPXIsaVsxXT1sfX1mdW5jdGlvbiBWYSh0LGUsaSxuLG8sYSl7b1swXT1MYSh0LGkpLG9bMV09TGEoZSxuKSxhWzBdPWthKHQsaSksYVsxXT1rYShlLG4pfXZhciBHYT1bXSxGYT1bXTtmdW5jdGlvbiBXYSh0LGUsaSxuLG8sYSxyLHMsbCx1KXt2YXIgaCxjPU1hLGQ9YmEsZj1jKHQsaSxvLHIsR2EpO2ZvcihsWzBdPTEvMCxsWzFdPTEvMCx1WzBdPS0xLzAsdVsxXT0tMS8wLGg9MDtoPGY7aCsrKXt2YXIgcD1kKHQsaSxvLHIsR2FbaF0pO2xbMF09TGEocCxsWzBdKSx1WzBdPWthKHAsdVswXSl9Zm9yKGY9YyhlLG4sYSxzLEZhKSxoPTA7aDxmO2grKyl7dmFyIGc9ZChlLG4sYSxzLEZhW2hdKTtsWzFdPUxhKGcsbFsxXSksdVsxXT1rYShnLHVbMV0pfWxbMF09TGEodCxsWzBdKSx1WzBdPWthKHQsdVswXSksbFswXT1MYShyLGxbMF0pLHVbMF09a2Eocix1WzBdKSxsWzFdPUxhKGUsbFsxXSksdVsxXT1rYShlLHVbMV0pLGxbMV09TGEocyxsWzFdKSx1WzFdPWthKHMsdVsxXSl9ZnVuY3Rpb24gSGEodCxlLGksbixvLGEscixzLGwpe3ZhciB1PVN0LGg9TXQsYz1NYXRoLmFicyhvLWEpO2lmKGMlT2E8MWUtNCYmMWUtNDxjKXJldHVybiBzWzBdPXQtaSxzWzFdPWUtbixsWzBdPXQraSx2b2lkKGxbMV09ZStuKTtpZihFYVswXT1OYShvKSppK3QsRWFbMV09UGEobykqbitlLHphWzBdPU5hKGEpKmkrdCx6YVsxXT1QYShhKSpuK2UsdShzLEVhLHphKSxoKGwsRWEsemEpLChvJT1PYSk8MCYmKG8rPU9hKSwoYSU9T2EpPDAmJihhKz1PYSksYTxvJiYhcj9hKz1PYTpvPGEmJnImJihvKz1PYSkscil7dmFyIGQ9YTthPW8sbz1kfWZvcih2YXIgZj0wO2Y8YTtmKz1NYXRoLlBJLzIpbzxmJiYoUmFbMF09TmEoZikqaSt0LFJhWzFdPVBhKGYpKm4rZSx1KHMsUmEscyksaChsLFJhLGwpKX12YXIgWmE9e006MSxMOjIsQzozLFE6NCxBOjUsWjo2LFI6N30sVWE9W10sWGE9W10sWWE9W10samE9W10scWE9TWF0aC5taW4sS2E9TWF0aC5tYXgsJGE9TWF0aC5jb3MsSmE9TWF0aC5zaW4sUWE9TWF0aC5zcXJ0LHRyPU1hdGguYWJzLGVyPSJ1bmRlZmluZWQiIT10eXBlb2YgRmxvYXQzMkFycmF5LGlyPWZ1bmN0aW9uKHQpe3RoaXMuX3NhdmVEYXRhPSF0LHRoaXMuX3NhdmVEYXRhJiYodGhpcy5kYXRhPVtdKSx0aGlzLl9jdHg9bnVsbH07ZnVuY3Rpb24gbnIodCxlLGksbixvLGEscil7aWYoMD09PW8pcmV0dXJuITE7dmFyIHM9byxsPTA7aWYoZStzPHImJm4rczxyfHxyPGUtcyYmcjxuLXN8fHQrczxhJiZpK3M8YXx8YTx0LXMmJmE8aS1zKXJldHVybiExO2lmKHQ9PT1pKXJldHVybiBNYXRoLmFicyhhLXQpPD1zLzI7dmFyIHU9KGw9KGUtbikvKHQtaSkpKmEtcisodCpuLWkqZSkvKHQtaSk7cmV0dXJuIHUqdS8obCpsKzEpPD1zLzIqcy8yfWZ1bmN0aW9uIG9yKHQsZSxpLG4sbyxhLHIscyxsLHUsaCl7aWYoMD09PWwpcmV0dXJuITE7dmFyIGM9bDtyZXR1cm4hKGUrYzxoJiZuK2M8aCYmYStjPGgmJnMrYzxofHxoPGUtYyYmaDxuLWMmJmg8YS1jJiZoPHMtY3x8dCtjPHUmJmkrYzx1JiZvK2M8dSYmcitjPHV8fHU8dC1jJiZ1PGktYyYmdTxvLWMmJnU8ci1jKSYmZnVuY3Rpb24odCxlLGksbixvLGEscixzLGwsdSxoKXt2YXIgYyxkLGYscCxnLG09LjAwNSx2PTEvMDt2YVswXT1sLHZhWzFdPXU7Zm9yKHZhciB5PTA7eTwxO3krPS4wNSl5YVswXT1iYSh0LGksbyxyLHkpLHlhWzFdPWJhKGUsbixhLHMseSksKHA9X3QodmEseWEpKTx2JiYoYz15LHY9cCk7dj0xLzA7Zm9yKHZhciB4PTA7eDwzMiYmIShtPHBhKTt4KyspZD1jLW0sZj1jK20seWFbMF09YmEodCxpLG8scixkKSx5YVsxXT1iYShlLG4sYSxzLGQpLHA9X3QoeWEsdmEpLDA8PWQmJnA8dj8oYz1kLHY9cCk6KHhhWzBdPWJhKHQsaSxvLHIsZikseGFbMV09YmEoZSxuLGEscyxmKSxnPV90KHhhLHZhKSxmPD0xJiZnPHY/KGM9Zix2PWcpOm0qPS41KTtyZXR1cm4gaCYmKGhbMF09YmEodCxpLG8scixjKSxoWzFdPWJhKGUsbixhLHMsYykpLGRhKHYpfSh0LGUsaSxuLG8sYSxyLHMsdSxoLG51bGwpPD1jLzJ9ZnVuY3Rpb24gYXIodCxlLGksbixvLGEscixzLGwpe2lmKDA9PT1yKXJldHVybiExO3ZhciB1PXI7cmV0dXJuIShlK3U8bCYmbit1PGwmJmErdTxsfHxsPGUtdSYmbDxuLXUmJmw8YS11fHx0K3U8cyYmaSt1PHMmJm8rdTxzfHxzPHQtdSYmczxpLXUmJnM8by11KSYmZnVuY3Rpb24odCxlLGksbixvLGEscixzLGwpe3ZhciB1LGg9LjAwNSxjPTEvMDt2YVswXT1yLHZhWzFdPXM7Zm9yKHZhciBkPTA7ZDwxO2QrPS4wNSl7eWFbMF09VGEodCxpLG8sZCkseWFbMV09VGEoZSxuLGEsZCksKG09X3QodmEseWEpKTxjJiYodT1kLGM9bSl9Yz0xLzA7Zm9yKHZhciBmPTA7ZjwzMiYmIShoPHBhKTtmKyspe3ZhciBwPXUtaCxnPXUraDt5YVswXT1UYSh0LGksbyxwKSx5YVsxXT1UYShlLG4sYSxwKTt2YXIgbT1fdCh5YSx2YSk7aWYoMDw9cCYmbTxjKXU9cCxjPW07ZWxzZXt4YVswXT1UYSh0LGksbyxnKSx4YVsxXT1UYShlLG4sYSxnKTt2YXIgdj1fdCh4YSx2YSk7Zzw9MSYmdjxjPyh1PWcsYz12KTpoKj0uNX19cmV0dXJuIGwmJihsWzBdPVRhKHQsaSxvLHUpLGxbMV09VGEoZSxuLGEsdSkpLGRhKGMpfSh0LGUsaSxuLG8sYSxzLGwsbnVsbCk8PXUvMn1pci5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmlyLF94aTowLF95aTowLF94MDowLF95MDowLF91eDowLF91eTowLF9sZW46MCxfbGluZURhc2g6bnVsbCxfZGFzaE9mZnNldDowLF9kYXNoSWR4OjAsX2Rhc2hTdW06MCxzZXRTY2FsZTpmdW5jdGlvbih0LGUsaSl7aT1pfHwwLHRoaXMuX3V4PXRyKGkvaGkvdCl8fDAsdGhpcy5fdXk9dHIoaS9oaS9lKXx8MH0sZ2V0Q29udGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdHh9LGJlZ2luUGF0aDpmdW5jdGlvbih0KXtyZXR1cm4odGhpcy5fY3R4PXQpJiZ0LmJlZ2luUGF0aCgpLHQmJih0aGlzLmRwcj10LmRwciksdGhpcy5fc2F2ZURhdGEmJih0aGlzLl9sZW49MCksdGhpcy5fbGluZURhc2gmJih0aGlzLl9saW5lRGFzaD1udWxsLHRoaXMuX2Rhc2hPZmZzZXQ9MCksdGhpc30sbW92ZVRvOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYWRkRGF0YShaYS5NLHQsZSksdGhpcy5fY3R4JiZ0aGlzLl9jdHgubW92ZVRvKHQsZSksdGhpcy5feDA9dCx0aGlzLl95MD1lLHRoaXMuX3hpPXQsdGhpcy5feWk9ZSx0aGlzfSxsaW5lVG86ZnVuY3Rpb24odCxlKXt2YXIgaT10cih0LXRoaXMuX3hpKT50aGlzLl91eHx8dHIoZS10aGlzLl95aSk+dGhpcy5fdXl8fHRoaXMuX2xlbjw1O3JldHVybiB0aGlzLmFkZERhdGEoWmEuTCx0LGUpLHRoaXMuX2N0eCYmaSYmKHRoaXMuX25lZWRzRGFzaCgpP3RoaXMuX2Rhc2hlZExpbmVUbyh0LGUpOnRoaXMuX2N0eC5saW5lVG8odCxlKSksaSYmKHRoaXMuX3hpPXQsdGhpcy5feWk9ZSksdGhpc30sYmV6aWVyQ3VydmVUbzpmdW5jdGlvbih0LGUsaSxuLG8sYSl7cmV0dXJuIHRoaXMuYWRkRGF0YShaYS5DLHQsZSxpLG4sbyxhKSx0aGlzLl9jdHgmJih0aGlzLl9uZWVkc0Rhc2goKT90aGlzLl9kYXNoZWRCZXppZXJUbyh0LGUsaSxuLG8sYSk6dGhpcy5fY3R4LmJlemllckN1cnZlVG8odCxlLGksbixvLGEpKSx0aGlzLl94aT1vLHRoaXMuX3lpPWEsdGhpc30scXVhZHJhdGljQ3VydmVUbzpmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gdGhpcy5hZGREYXRhKFphLlEsdCxlLGksbiksdGhpcy5fY3R4JiYodGhpcy5fbmVlZHNEYXNoKCk/dGhpcy5fZGFzaGVkUXVhZHJhdGljVG8odCxlLGksbik6dGhpcy5fY3R4LnF1YWRyYXRpY0N1cnZlVG8odCxlLGksbikpLHRoaXMuX3hpPWksdGhpcy5feWk9bix0aGlzfSxhcmM6ZnVuY3Rpb24odCxlLGksbixvLGEpe3JldHVybiB0aGlzLmFkZERhdGEoWmEuQSx0LGUsaSxpLG4sby1uLDAsYT8wOjEpLHRoaXMuX2N0eCYmdGhpcy5fY3R4LmFyYyh0LGUsaSxuLG8sYSksdGhpcy5feGk9JGEobykqaSt0LHRoaXMuX3lpPUphKG8pKmkrZSx0aGlzfSxhcmNUbzpmdW5jdGlvbih0LGUsaSxuLG8pe3JldHVybiB0aGlzLl9jdHgmJnRoaXMuX2N0eC5hcmNUbyh0LGUsaSxuLG8pLHRoaXN9LHJlY3Q6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIHRoaXMuX2N0eCYmdGhpcy5fY3R4LnJlY3QodCxlLGksbiksdGhpcy5hZGREYXRhKFphLlIsdCxlLGksbiksdGhpc30sY2xvc2VQYXRoOmZ1bmN0aW9uKCl7dGhpcy5hZGREYXRhKFphLlopO3ZhciB0PXRoaXMuX2N0eCxlPXRoaXMuX3gwLGk9dGhpcy5feTA7cmV0dXJuIHQmJih0aGlzLl9uZWVkc0Rhc2goKSYmdGhpcy5fZGFzaGVkTGluZVRvKGUsaSksdC5jbG9zZVBhdGgoKSksdGhpcy5feGk9ZSx0aGlzLl95aT1pLHRoaXN9LGZpbGw6ZnVuY3Rpb24odCl7dCYmdC5maWxsKCksdGhpcy50b1N0YXRpYygpfSxzdHJva2U6ZnVuY3Rpb24odCl7dCYmdC5zdHJva2UoKSx0aGlzLnRvU3RhdGljKCl9LHNldExpbmVEYXNoOmZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBBcnJheSl7dGhpcy5fbGluZURhc2g9dDtmb3IodmFyIGU9dGhpcy5fZGFzaElkeD0wLGk9MDtpPHQubGVuZ3RoO2krKyllKz10W2ldO3RoaXMuX2Rhc2hTdW09ZX1yZXR1cm4gdGhpc30sc2V0TGluZURhc2hPZmZzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2Rhc2hPZmZzZXQ9dCx0aGlzfSxsZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVufSxzZXREYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoO3RoaXMuZGF0YSYmdGhpcy5kYXRhLmxlbmd0aD09PWV8fCFlcnx8KHRoaXMuZGF0YT1uZXcgRmxvYXQzMkFycmF5KGUpKTtmb3IodmFyIGk9MDtpPGU7aSsrKXRoaXMuZGF0YVtpXT10W2ldO3RoaXMuX2xlbj1lfSxhcHBlbmRQYXRoOmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBBcnJheXx8KHQ9W3RdKTtmb3IodmFyIGU9dC5sZW5ndGgsaT0wLG49dGhpcy5fbGVuLG89MDtvPGU7bysrKWkrPXRbb10ubGVuKCk7ZXImJnRoaXMuZGF0YSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSYmKHRoaXMuZGF0YT1uZXcgRmxvYXQzMkFycmF5KG4raSkpO2ZvcihvPTA7bzxlO28rKylmb3IodmFyIGE9dFtvXS5kYXRhLHI9MDtyPGEubGVuZ3RoO3IrKyl0aGlzLmRhdGFbbisrXT1hW3JdO3RoaXMuX2xlbj1ufSxhZGREYXRhOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3NhdmVEYXRhKXt2YXIgZT10aGlzLmRhdGE7dGhpcy5fbGVuK2FyZ3VtZW50cy5sZW5ndGg+ZS5sZW5ndGgmJih0aGlzLl9leHBhbmREYXRhKCksZT10aGlzLmRhdGEpO2Zvcih2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspZVt0aGlzLl9sZW4rK109YXJndW1lbnRzW2ldO3RoaXMuX3ByZXZDbWQ9dH19LF9leHBhbmREYXRhOmZ1bmN0aW9uKCl7aWYoISh0aGlzLmRhdGEgaW5zdGFuY2VvZiBBcnJheSkpe2Zvcih2YXIgdD1bXSxlPTA7ZTx0aGlzLl9sZW47ZSsrKXRbZV09dGhpcy5kYXRhW2VdO3RoaXMuZGF0YT10fX0sX25lZWRzRGFzaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lRGFzaH0sX2Rhc2hlZExpbmVUbzpmdW5jdGlvbih0LGUpe3ZhciBpLG4sbz10aGlzLl9kYXNoU3VtLGE9dGhpcy5fZGFzaE9mZnNldCxyPXRoaXMuX2xpbmVEYXNoLHM9dGhpcy5fY3R4LGw9dGhpcy5feGksdT10aGlzLl95aSxoPXQtbCxjPWUtdSxkPVFhKGgqaCtjKmMpLGY9bCxwPXUsZz1yLmxlbmd0aDtmb3IoYTwwJiYoYT1vK2EpLGYtPShhJT1vKSooaC89ZCkscC09YSooYy89ZCk7MDxoJiZmPD10fHxoPDAmJnQ8PWZ8fDA9PT1oJiYoMDxjJiZwPD1lfHxjPDAmJmU8PXApOylmKz1oKihpPXJbbj10aGlzLl9kYXNoSWR4XSkscCs9YyppLHRoaXMuX2Rhc2hJZHg9KG4rMSklZywwPGgmJmY8bHx8aDwwJiZsPGZ8fDA8YyYmcDx1fHxjPDAmJnU8cHx8c1tuJTI/Im1vdmVUbyI6ImxpbmVUbyJdKDA8PWg/cWEoZix0KTpLYShmLHQpLDA8PWM/cWEocCxlKTpLYShwLGUpKTtoPWYtdCxjPXAtZSx0aGlzLl9kYXNoT2Zmc2V0PS1RYShoKmgrYypjKX0sX2Rhc2hlZEJlemllclRvOmZ1bmN0aW9uKHQsZSxpLG4sbyxhKXt2YXIgcixzLGwsdSxoLGM9dGhpcy5fZGFzaFN1bSxkPXRoaXMuX2Rhc2hPZmZzZXQsZj10aGlzLl9saW5lRGFzaCxwPXRoaXMuX2N0eCxnPXRoaXMuX3hpLG09dGhpcy5feWksdj1iYSx5PTAseD10aGlzLl9kYXNoSWR4LF89Zi5sZW5ndGgsdz0wO2ZvcihkPDAmJihkPWMrZCksZCU9YyxyPTA7cjwxO3IrPS4xKXM9dihnLHQsaSxvLHIrLjEpLXYoZyx0LGksbyxyKSxsPXYobSxlLG4sYSxyKy4xKS12KG0sZSxuLGEscikseSs9UWEocypzK2wqbCk7Zm9yKDt4PF8mJiEoZDwodys9Zlt4XSkpO3grKyk7Zm9yKHI9KHctZCkveTtyPD0xOyl1PXYoZyx0LGksbyxyKSxoPXYobSxlLG4sYSxyKSx4JTI/cC5tb3ZlVG8odSxoKTpwLmxpbmVUbyh1LGgpLHIrPWZbeF0veSx4PSh4KzEpJV87eCUyIT0wJiZwLmxpbmVUbyhvLGEpLHM9by11LGw9YS1oLHRoaXMuX2Rhc2hPZmZzZXQ9LVFhKHMqcytsKmwpfSxfZGFzaGVkUXVhZHJhdGljVG86ZnVuY3Rpb24odCxlLGksbil7dmFyIG89aSxhPW47aT0oaSsyKnQpLzMsbj0obisyKmUpLzMsdD0odGhpcy5feGkrMip0KS8zLGU9KHRoaXMuX3lpKzIqZSkvMyx0aGlzLl9kYXNoZWRCZXppZXJUbyh0LGUsaSxuLG8sYSl9LHRvU3RhdGljOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kYXRhO3QgaW5zdGFuY2VvZiBBcnJheSYmKHQubGVuZ3RoPXRoaXMuX2xlbixlciYmKHRoaXMuZGF0YT1uZXcgRmxvYXQzMkFycmF5KHQpKSl9LGdldEJvdW5kaW5nUmVjdDpmdW5jdGlvbigpe1VhWzBdPVVhWzFdPVlhWzBdPVlhWzFdPU51bWJlci5NQVhfVkFMVUUsWGFbMF09WGFbMV09amFbMF09amFbMV09LU51bWJlci5NQVhfVkFMVUU7Zm9yKHZhciB0LGUsaSxuLG8sYSxyLHMsbCx1LGgsYyxkLGYscD10aGlzLmRhdGEsZz0wLG09MCx2PTAseT0wLHg9MDt4PHAubGVuZ3RoOyl7dmFyIF89cFt4KytdO3N3aXRjaCgxPT09eCYmKHY9Zz1wW3hdLHk9bT1wW3grMV0pLF8pe2Nhc2UgWmEuTTpnPXY9cFt4KytdLG09eT1wW3grK10sWWFbMF09dixZYVsxXT15LGphWzBdPXYsamFbMV09eTticmVhaztjYXNlIFphLkw6VmEoZyxtLHBbeF0scFt4KzFdLFlhLGphKSxnPXBbeCsrXSxtPXBbeCsrXTticmVhaztjYXNlIFphLkM6V2EoZyxtLHBbeCsrXSxwW3grK10scFt4KytdLHBbeCsrXSxwW3hdLHBbeCsxXSxZYSxqYSksZz1wW3grK10sbT1wW3grK107YnJlYWs7Y2FzZSBaYS5ROnQ9ZyxlPW0saT1wW3grK10sbj1wW3grK10sbz1wW3hdLGE9cFt4KzFdLHI9WWEscz1qYSx1PWw9dm9pZCAwLHU9VGEsaD1rYShMYSgobD1EYSkodCxpLG8pLDEpLDApLGM9a2EoTGEobChlLG4sYSksMSksMCksZD11KHQsaSxvLGgpLGY9dShlLG4sYSxjKSxyWzBdPUxhKHQsbyxkKSxyWzFdPUxhKGUsYSxmKSxzWzBdPWthKHQsbyxkKSxzWzFdPWthKGUsYSxmKSxnPXBbeCsrXSxtPXBbeCsrXTticmVhaztjYXNlIFphLkE6dmFyIHc9cFt4KytdLGI9cFt4KytdLFM9cFt4KytdLE09cFt4KytdLEk9cFt4KytdLFQ9cFt4KytdK0k7eCs9MTt2YXIgQT0xLXBbeCsrXTsxPT09eCYmKHY9JGEoSSkqUyt3LHk9SmEoSSkqTStiKSxIYSh3LGIsUyxNLEksVCxBLFlhLGphKSxnPSRhKFQpKlMrdyxtPUphKFQpKk0rYjticmVhaztjYXNlIFphLlI6VmEodj1nPXBbeCsrXSx5PW09cFt4KytdLHYrcFt4KytdLHkrcFt4KytdLFlhLGphKTticmVhaztjYXNlIFphLlo6Zz12LG09eX1TdChVYSxVYSxZYSksTXQoWGEsWGEsamEpfXJldHVybiAwPT09eCYmKFVhWzBdPVVhWzFdPVhhWzBdPVhhWzFdPTApLG5ldyBNaShVYVswXSxVYVsxXSxYYVswXS1VYVswXSxYYVsxXS1VYVsxXSl9LHJlYnVpbGRQYXRoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpLG4sbyxhLHIscz10aGlzLmRhdGEsbD10aGlzLl91eCx1PXRoaXMuX3V5LGg9dGhpcy5fbGVuLGM9MDtjPGg7KXt2YXIgZD1zW2MrK107c3dpdGNoKDE9PT1jJiYoZT1uPXNbY10saT1vPXNbYysxXSksZCl7Y2FzZSBaYS5NOmU9bj1zW2MrK10saT1vPXNbYysrXSx0Lm1vdmVUbyhuLG8pO2JyZWFrO2Nhc2UgWmEuTDphPXNbYysrXSxyPXNbYysrXSwodHIoYS1uKT5sfHx0cihyLW8pPnV8fGM9PT1oLTEpJiYodC5saW5lVG8oYSxyKSxuPWEsbz1yKTticmVhaztjYXNlIFphLkM6dC5iZXppZXJDdXJ2ZVRvKHNbYysrXSxzW2MrK10sc1tjKytdLHNbYysrXSxzW2MrK10sc1tjKytdKSxuPXNbYy0yXSxvPXNbYy0xXTticmVhaztjYXNlIFphLlE6dC5xdWFkcmF0aWNDdXJ2ZVRvKHNbYysrXSxzW2MrK10sc1tjKytdLHNbYysrXSksbj1zW2MtMl0sbz1zW2MtMV07YnJlYWs7Y2FzZSBaYS5BOnZhciBmPXNbYysrXSxwPXNbYysrXSxnPXNbYysrXSxtPXNbYysrXSx2PXNbYysrXSx5PXNbYysrXSx4PXNbYysrXSxfPXNbYysrXSx3PW08Zz9nOm0sYj1tPGc/MTpnL20sUz1tPGc/bS9nOjEsTT12K3k7LjAwMTxNYXRoLmFicyhnLW0pPyh0LnRyYW5zbGF0ZShmLHApLHQucm90YXRlKHgpLHQuc2NhbGUoYixTKSx0LmFyYygwLDAsdyx2LE0sMS1fKSx0LnNjYWxlKDEvYiwxL1MpLHQucm90YXRlKC14KSx0LnRyYW5zbGF0ZSgtZiwtcCkpOnQuYXJjKGYscCx3LHYsTSwxLV8pLDE9PT1jJiYoZT0kYSh2KSpnK2YsaT1KYSh2KSptK3ApLG49JGEoTSkqZytmLG89SmEoTSkqbStwO2JyZWFrO2Nhc2UgWmEuUjplPW49c1tjXSxpPW89c1tjKzFdLHQucmVjdChzW2MrK10sc1tjKytdLHNbYysrXSxzW2MrK10pO2JyZWFrO2Nhc2UgWmEuWjp0LmNsb3NlUGF0aCgpLG49ZSxvPWl9fX19LGlyLkNNRD1aYTt2YXIgcnI9MipNYXRoLlBJO2Z1bmN0aW9uIHNyKHQpe3JldHVybih0JT1ycik8MCYmKHQrPXJyKSx0fXZhciBscj0yKk1hdGguUEk7ZnVuY3Rpb24gdXIodCxlLGksbixvLGEscixzLGwpe2lmKDA9PT1yKXJldHVybiExO3ZhciB1PXI7cy09dCxsLT1lO3ZhciBoPU1hdGguc3FydChzKnMrbCpsKTtpZihpPGgtdXx8aCt1PGkpcmV0dXJuITE7aWYoTWF0aC5hYnMobi1vKSVscjwxZS00KXJldHVybiEwO2lmKGEpe3ZhciBjPW47bj1zcihvKSxvPXNyKGMpfWVsc2Ugbj1zcihuKSxvPXNyKG8pO288biYmKG8rPWxyKTt2YXIgZD1NYXRoLmF0YW4yKGwscyk7cmV0dXJuIGQ8MCYmKGQrPWxyKSxuPD1kJiZkPD1vfHxuPD1kK2xyJiZkK2xyPD1vfWZ1bmN0aW9uIGhyKHQsZSxpLG4sbyxhKXtpZihlPGEmJm48YXx8YTxlJiZhPG4pcmV0dXJuIDA7aWYobj09PWUpcmV0dXJuIDA7dmFyIHI9bjxlPzE6LTEscz0oYS1lKS8obi1lKTsxIT1zJiYwIT1zfHwocj1uPGU/LjU6LS41KTt2YXIgbD1zKihpLXQpK3Q7cmV0dXJuIGw9PT1vPzEvMDpvPGw/cjowfXZhciBjcj1pci5DTUQsZHI9MipNYXRoLlBJLGZyPTFlLTQ7dmFyIHByPVstMSwtMSwtMV0sZ3I9Wy0xLC0xXTtmdW5jdGlvbiBtcih0LGUsaSxuLG8sYSxyLHMsbCx1KXtpZihlPHUmJm48dSYmYTx1JiZzPHV8fHU8ZSYmdTxuJiZ1PGEmJnU8cylyZXR1cm4gMDt2YXIgaCxjPWZ1bmN0aW9uKHQsZSxpLG4sbyxhKXt2YXIgcj1uKzMqKGUtaSktdCxzPTMqKGktMiplK3QpLGw9MyooZS10KSx1PXQtbyxoPXMqcy0zKnIqbCxjPXMqbC05KnIqdSxkPWwqbC0zKnMqdSxmPTA7aWYoX2EoaCkmJl9hKGMpKXtpZihfYShzKSlhWzBdPTA7ZWxzZSAwPD0oTT0tbC9zKSYmTTw9MSYmKGFbZisrXT1NKX1lbHNle3ZhciBwPWMqYy00KmgqZDtpZihfYShwKSl7dmFyIGc9Yy9oLG09LWcvMjswPD0oTT0tcy9yK2cpJiZNPD0xJiYoYVtmKytdPU0pLDA8PW0mJm08PTEmJihhW2YrK109bSl9ZWxzZSBpZigwPHApe3ZhciB2PWRhKHApLHk9aCpzKzEuNSpyKigtYyt2KSx4PWgqcysxLjUqciooLWMtdik7MDw9KE09KC1zLSgoeT15PDA/LWNhKC15LG1hKTpjYSh5LG1hKSkrKHg9eDwwPy1jYSgteCxtYSk6Y2EoeCxtYSkpKSkvKDMqcikpJiZNPD0xJiYoYVtmKytdPU0pfWVsc2V7dmFyIF89KDIqaCpzLTMqcipjKS8oMipkYShoKmgqaCkpLHc9TWF0aC5hY29zKF8pLzMsYj1kYShoKSxTPU1hdGguY29zKHcpLE09KC1zLTIqYipTKS8oMypyKSxJPShtPSgtcytiKihTK2dhKk1hdGguc2luKHcpKSkvKDMqciksKC1zK2IqKFMtZ2EqTWF0aC5zaW4odykpKS8oMypyKSk7MDw9TSYmTTw9MSYmKGFbZisrXT1NKSwwPD1tJiZtPD0xJiYoYVtmKytdPW0pLDA8PUkmJkk8PTEmJihhW2YrK109SSl9fXJldHVybiBmfShlLG4sYSxzLHUscHIpO2lmKDA9PT1jKXJldHVybiAwO2Zvcih2YXIgZCxmLHA9MCxnPS0xLG09MDttPGM7bSsrKXt2YXIgdj1wclttXSx5PTA9PT12fHwxPT09dj8uNToxO2JhKHQsaSxvLHIsdik8bHx8KGc8MCYmKGc9TWEoZSxuLGEscyxnciksZ3JbMV08Z3JbMF0mJjE8ZyYmKHZvaWQgMCxoPWdyWzBdLGdyWzBdPWdyWzFdLGdyWzFdPWgpLGQ9YmEoZSxuLGEscyxnclswXSksMTxnJiYoZj1iYShlLG4sYSxzLGdyWzFdKSkpLDI9PT1nP3Y8Z3JbMF0/cCs9ZDxlP3k6LXk6djxnclsxXT9wKz1mPGQ/eToteTpwKz1zPGY/eToteTp2PGdyWzBdP3ArPWQ8ZT95Oi15OnArPXM8ZD95Oi15KX1yZXR1cm4gcH1mdW5jdGlvbiB2cih0LGUsaSxuLG8sYSxyLHMpe2lmKGU8cyYmbjxzJiZhPHN8fHM8ZSYmczxuJiZzPGEpcmV0dXJuIDA7dmFyIGw9ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT10LTIqZStpLHI9MiooZS10KSxzPXQtbixsPTA7aWYoX2EoYSkpe2lmKHdhKHIpKTA8PShoPS1zL3IpJiZoPD0xJiYob1tsKytdPWgpfWVsc2V7dmFyIHU9cipyLTQqYSpzO2lmKF9hKHUpKTA8PShoPS1yLygyKmEpKSYmaDw9MSYmKG9bbCsrXT1oKTtlbHNlIGlmKDA8dSl7dmFyIGgsYz1kYSh1KSxkPSgtci1jKS8oMiphKTswPD0oaD0oLXIrYykvKDIqYSkpJiZoPD0xJiYob1tsKytdPWgpLDA8PWQmJmQ8PTEmJihvW2wrK109ZCl9fXJldHVybiBsfShlLG4sYSxzLHByKTtpZigwPT09bClyZXR1cm4gMDt2YXIgdT1EYShlLG4sYSk7aWYoMDw9dSYmdTw9MSl7Zm9yKHZhciBoPTAsYz1UYShlLG4sYSx1KSxkPTA7ZDxsO2QrKyl7dmFyIGY9MD09PXByW2RdfHwxPT09cHJbZF0/LjU6MTtUYSh0LGksbyxwcltkXSk8cnx8KHByW2RdPHU/aCs9YzxlP2Y6LWY6aCs9YTxjP2Y6LWYpfXJldHVybiBofWY9MD09PXByWzBdfHwxPT09cHJbMF0/LjU6MTtyZXR1cm4gVGEodCxpLG8scHJbMF0pPHI/MDphPGU/ZjotZn1mdW5jdGlvbiB5cih0LGUsaSxuLG8sYSxyLHMpe2lmKGk8KHMtPWUpfHxzPC1pKXJldHVybiAwO3ZhciBsPU1hdGguc3FydChpKmktcypzKTtwclswXT0tbCxwclsxXT1sO3ZhciB1PU1hdGguYWJzKG4tbyk7aWYodTwxZS00KXJldHVybiAwO2lmKHUlZHI8MWUtNCl7bz1kcjt2YXIgaD1hPzE6LTE7cmV0dXJuIHI+PXByW249MF0rdCYmcjw9cHJbMV0rdD9oOjB9aWYoYSl7bD1uO249c3Iobyksbz1zcihsKX1lbHNlIG49c3Iobiksbz1zcihvKTtvPG4mJihvKz1kcik7Zm9yKHZhciBjPTAsZD0wO2Q8MjtkKyspe3ZhciBmPXByW2RdO2lmKHI8Zit0KXt2YXIgcD1NYXRoLmF0YW4yKHMsZik7aD1hPzE6LTE7cDwwJiYocD1kcitwKSwobjw9cCYmcDw9b3x8bjw9cCtkciYmcCtkcjw9bykmJihwPk1hdGguUEkvMiYmcDwxLjUqTWF0aC5QSSYmKGg9LWgpLGMrPWgpfX1yZXR1cm4gY31mdW5jdGlvbiB4cih0LGUsaSxuLG8pe2Zvcih2YXIgYT0wLHI9MCxzPTAsbD0wLHU9MCxoPTA7aDx0Lmxlbmd0aDspe3ZhciBjPXRbaCsrXTtzd2l0Y2goYz09PWNyLk0mJjE8aCYmKGl8fChhKz1ocihyLHMsbCx1LG4sbykpKSwxPT09aCYmKGw9cj10W2hdLHU9cz10W2grMV0pLGMpe2Nhc2UgY3IuTTpyPWw9dFtoKytdLHM9dT10W2grK107YnJlYWs7Y2FzZSBjci5MOmlmKGkpe2lmKG5yKHIscyx0W2hdLHRbaCsxXSxlLG4sbykpcmV0dXJuITB9ZWxzZSBhKz1ocihyLHMsdFtoXSx0W2grMV0sbixvKXx8MDtyPXRbaCsrXSxzPXRbaCsrXTticmVhaztjYXNlIGNyLkM6aWYoaSl7aWYob3IocixzLHRbaCsrXSx0W2grK10sdFtoKytdLHRbaCsrXSx0W2hdLHRbaCsxXSxlLG4sbykpcmV0dXJuITB9ZWxzZSBhKz1tcihyLHMsdFtoKytdLHRbaCsrXSx0W2grK10sdFtoKytdLHRbaF0sdFtoKzFdLG4sbyl8fDA7cj10W2grK10scz10W2grK107YnJlYWs7Y2FzZSBjci5ROmlmKGkpe2lmKGFyKHIscyx0W2grK10sdFtoKytdLHRbaF0sdFtoKzFdLGUsbixvKSlyZXR1cm4hMH1lbHNlIGErPXZyKHIscyx0W2grK10sdFtoKytdLHRbaF0sdFtoKzFdLG4sbyl8fDA7cj10W2grK10scz10W2grK107YnJlYWs7Y2FzZSBjci5BOnZhciBkPXRbaCsrXSxmPXRbaCsrXSxwPXRbaCsrXSxnPXRbaCsrXSxtPXRbaCsrXSx2PXRbaCsrXTtoKz0xO3ZhciB5PTEtdFtoKytdLHg9TWF0aC5jb3MobSkqcCtkLF89TWF0aC5zaW4obSkqZytmOzE8aD9hKz1ocihyLHMseCxfLG4sbyk6KGw9eCx1PV8pO3ZhciB3PShuLWQpKmcvcCtkO2lmKGkpe2lmKHVyKGQsZixnLG0sbSt2LHksZSx3LG8pKXJldHVybiEwfWVsc2UgYSs9eXIoZCxmLGcsbSxtK3YseSx3LG8pO3I9TWF0aC5jb3MobSt2KSpwK2Qscz1NYXRoLnNpbihtK3YpKmcrZjticmVhaztjYXNlIGNyLlI6bD1yPXRbaCsrXSx1PXM9dFtoKytdO3g9bCt0W2grK10sXz11K3RbaCsrXTtpZihpKXtpZihucihsLHUseCx1LGUsbixvKXx8bnIoeCx1LHgsXyxlLG4sbyl8fG5yKHgsXyxsLF8sZSxuLG8pfHxucihsLF8sbCx1LGUsbixvKSlyZXR1cm4hMH1lbHNlIGErPWhyKHgsdSx4LF8sbixvKSxhKz1ocihsLF8sbCx1LG4sbyk7YnJlYWs7Y2FzZSBjci5aOmlmKGkpe2lmKG5yKHIscyxsLHUsZSxuLG8pKXJldHVybiEwfWVsc2UgYSs9aHIocixzLGwsdSxuLG8pO3I9bCxzPXV9fXJldHVybiBpfHxmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmFicyh0LWUpPGZyfShzLHUpfHwoYSs9aHIocixzLGwsdSxuLG8pfHwwKSwwIT09YX12YXIgX3I9WWkucHJvdG90eXBlLmdldENhbnZhc1BhdHRlcm4sd3I9TWF0aC5hYnMsYnI9bmV3IGlyKCEwKTtmdW5jdGlvbiBTcih0KXtqbi5jYWxsKHRoaXMsdCksdGhpcy5wYXRoPW51bGx9U3IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpTcix0eXBlOiJwYXRoIixfX2RpcnR5UGF0aDohMCxzdHJva2VDb250YWluVGhyZXNob2xkOjUsc2VnbWVudElnbm9yZVRocmVzaG9sZDowLHN1YlBpeGVsT3B0aW1pemU6ITEsYnJ1c2g6ZnVuY3Rpb24odCxlKXt2YXIgaSxuPXRoaXMuc3R5bGUsbz10aGlzLnBhdGh8fGJyLGE9bi5oYXNTdHJva2UoKSxyPW4uaGFzRmlsbCgpLHM9bi5maWxsLGw9bi5zdHJva2UsdT1yJiYhIXMuY29sb3JTdG9wcyxoPWEmJiEhbC5jb2xvclN0b3BzLGM9ciYmISFzLmltYWdlLGQ9YSYmISFsLmltYWdlO24uYmluZCh0LHRoaXMsZSksdGhpcy5zZXRUcmFuc2Zvcm0odCksdGhpcy5fX2RpcnR5JiYodSYmKGk9aXx8dGhpcy5nZXRCb3VuZGluZ1JlY3QoKSx0aGlzLl9maWxsR3JhZGllbnQ9bi5nZXRHcmFkaWVudCh0LHMsaSkpLGgmJihpPWl8fHRoaXMuZ2V0Qm91bmRpbmdSZWN0KCksdGhpcy5fc3Ryb2tlR3JhZGllbnQ9bi5nZXRHcmFkaWVudCh0LGwsaSkpKTt1P3QuZmlsbFN0eWxlPXRoaXMuX2ZpbGxHcmFkaWVudDpjJiYodC5maWxsU3R5bGU9X3IuY2FsbChzLHQpKSxoP3Quc3Ryb2tlU3R5bGU9dGhpcy5fc3Ryb2tlR3JhZGllbnQ6ZCYmKHQuc3Ryb2tlU3R5bGU9X3IuY2FsbChsLHQpKTt2YXIgZj1uLmxpbmVEYXNoLHA9bi5saW5lRGFzaE9mZnNldCxnPSEhdC5zZXRMaW5lRGFzaCxtPXRoaXMuZ2V0R2xvYmFsU2NhbGUoKTtpZihvLnNldFNjYWxlKG1bMF0sbVsxXSx0aGlzLnNlZ21lbnRJZ25vcmVUaHJlc2hvbGQpLHRoaXMuX19kaXJ0eVBhdGh8fGYmJiFnJiZhPyhvLmJlZ2luUGF0aCh0KSxmJiYhZyYmKG8uc2V0TGluZURhc2goZiksby5zZXRMaW5lRGFzaE9mZnNldChwKSksdGhpcy5idWlsZFBhdGgobyx0aGlzLnNoYXBlLCExKSx0aGlzLnBhdGgmJih0aGlzLl9fZGlydHlQYXRoPSExKSk6KHQuYmVnaW5QYXRoKCksdGhpcy5wYXRoLnJlYnVpbGRQYXRoKHQpKSxyKWlmKG51bGwhPW4uZmlsbE9wYWNpdHkpe3ZhciB2PXQuZ2xvYmFsQWxwaGE7dC5nbG9iYWxBbHBoYT1uLmZpbGxPcGFjaXR5Km4ub3BhY2l0eSxvLmZpbGwodCksdC5nbG9iYWxBbHBoYT12fWVsc2Ugby5maWxsKHQpO2lmKGYmJmcmJih0LnNldExpbmVEYXNoKGYpLHQubGluZURhc2hPZmZzZXQ9cCksYSlpZihudWxsIT1uLnN0cm9rZU9wYWNpdHkpe3Y9dC5nbG9iYWxBbHBoYTt0Lmdsb2JhbEFscGhhPW4uc3Ryb2tlT3BhY2l0eSpuLm9wYWNpdHksby5zdHJva2UodCksdC5nbG9iYWxBbHBoYT12fWVsc2Ugby5zdHJva2UodCk7ZiYmZyYmdC5zZXRMaW5lRGFzaChbXSksbnVsbCE9bi50ZXh0JiYodGhpcy5yZXN0b3JlVHJhbnNmb3JtKHQpLHRoaXMuZHJhd1JlY3RUZXh0KHQsdGhpcy5nZXRCb3VuZGluZ1JlY3QoKSkpfSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlLGkpe30sY3JlYXRlUGF0aFByb3h5OmZ1bmN0aW9uKCl7dGhpcy5wYXRoPW5ldyBpcn0sZ2V0Qm91bmRpbmdSZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVjdCxlPXRoaXMuc3R5bGUsaT0hdDtpZihpKXt2YXIgbj10aGlzLnBhdGg7bj1ufHwodGhpcy5wYXRoPW5ldyBpciksdGhpcy5fX2RpcnR5UGF0aCYmKG4uYmVnaW5QYXRoKCksdGhpcy5idWlsZFBhdGgobix0aGlzLnNoYXBlLCExKSksdD1uLmdldEJvdW5kaW5nUmVjdCgpfWlmKHRoaXMuX3JlY3Q9dCxlLmhhc1N0cm9rZSgpKXt2YXIgbz10aGlzLl9yZWN0V2l0aFN0cm9rZXx8KHRoaXMuX3JlY3RXaXRoU3Ryb2tlPXQuY2xvbmUoKSk7aWYodGhpcy5fX2RpcnR5fHxpKXtvLmNvcHkodCk7dmFyIGE9ZS5saW5lV2lkdGgscj1lLnN0cm9rZU5vU2NhbGU/dGhpcy5nZXRMaW5lU2NhbGUoKToxO2UuaGFzRmlsbCgpfHwoYT1NYXRoLm1heChhLHRoaXMuc3Ryb2tlQ29udGFpblRocmVzaG9sZHx8NCkpLDFlLTEwPHImJihvLndpZHRoKz1hL3Isby5oZWlnaHQrPWEvcixvLngtPWEvci8yLG8ueS09YS9yLzIpfXJldHVybiBvfXJldHVybiB0fSxjb250YWluOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy50cmFuc2Zvcm1Db29yZFRvTG9jYWwodCxlKSxuPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KCksbz10aGlzLnN0eWxlO2lmKHQ9aVswXSxlPWlbMV0sbi5jb250YWluKHQsZSkpe3ZhciBhPXRoaXMucGF0aC5kYXRhO2lmKG8uaGFzU3Ryb2tlKCkpe3ZhciByPW8ubGluZVdpZHRoLHM9by5zdHJva2VOb1NjYWxlP3RoaXMuZ2V0TGluZVNjYWxlKCk6MTtpZigxZS0xMDxzJiYoby5oYXNGaWxsKCl8fChyPU1hdGgubWF4KHIsdGhpcy5zdHJva2VDb250YWluVGhyZXNob2xkKSksZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIHhyKHQsZSwhMCxpLG4pfShhLHIvcyx0LGUpKSlyZXR1cm4hMH1pZihvLmhhc0ZpbGwoKSlyZXR1cm4gZnVuY3Rpb24odCxlLGkpe3JldHVybiB4cih0LDAsITEsZSxpKX0oYSx0LGUpfXJldHVybiExfSxkaXJ0eTpmdW5jdGlvbih0KXtudWxsPT10JiYodD0hMCksdCYmKHRoaXMuX19kaXJ0eVBhdGg9dCx0aGlzLl9yZWN0PW51bGwpLHRoaXMuX19kaXJ0eT10aGlzLl9fZGlydHlUZXh0PSEwLHRoaXMuX196ciYmdGhpcy5fX3pyLnJlZnJlc2goKSx0aGlzLl9fY2xpcFRhcmdldCYmdGhpcy5fX2NsaXBUYXJnZXQuZGlydHkoKX0sYW5pbWF0ZVNoYXBlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmFuaW1hdGUoInNoYXBlIix0KX0sYXR0cktWOmZ1bmN0aW9uKHQsZSl7InNoYXBlIj09PXQ/KHRoaXMuc2V0U2hhcGUoZSksdGhpcy5fX2RpcnR5UGF0aD0hMCx0aGlzLl9yZWN0PW51bGwpOmpuLnByb3RvdHlwZS5hdHRyS1YuY2FsbCh0aGlzLHQsZSl9LHNldFNoYXBlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zaGFwZTtpZihpKXtpZihSKHQpKWZvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihpW25dPXRbbl0pO2Vsc2UgaVt0XT1lO3RoaXMuZGlydHkoITApfXJldHVybiB0aGlzfSxnZXRMaW5lU2NhbGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRyYW5zZm9ybTtyZXR1cm4gdCYmMWUtMTA8d3IodFswXS0xKSYmMWUtMTA8d3IodFszXS0xKT9NYXRoLnNxcnQod3IodFswXSp0WzNdLXRbMl0qdFsxXSkpOjF9fSxTci5leHRlbmQ9ZnVuY3Rpb24obyl7ZnVuY3Rpb24gdCh0KXtTci5jYWxsKHRoaXMsdCksby5zdHlsZSYmdGhpcy5zdHlsZS5leHRlbmRGcm9tKG8uc3R5bGUsITEpO3ZhciBlPW8uc2hhcGU7aWYoZSl7dGhpcy5zaGFwZT10aGlzLnNoYXBlfHx7fTt2YXIgaT10aGlzLnNoYXBlO2Zvcih2YXIgbiBpbiBlKSFpLmhhc093blByb3BlcnR5KG4pJiZlLmhhc093blByb3BlcnR5KG4pJiYoaVtuXT1lW25dKX1vLmluaXQmJm8uaW5pdC5jYWxsKHRoaXMsdCl9Zm9yKHZhciBlIGluIHcodCxTciksbykic3R5bGUiIT09ZSYmInNoYXBlIiE9PWUmJih0LnByb3RvdHlwZVtlXT1vW2VdKTtyZXR1cm4gdH0sdyhTcixqbik7ZnVuY3Rpb24gTXIodCl7cmV0dXJuIE1hdGguc3FydCh0WzBdKnRbMF0rdFsxXSp0WzFdKX12YXIgSXI9aXIuQ01ELFRyPVtbXSxbXSxbXV0sQXI9TWF0aC5zcXJ0LERyPU1hdGguYXRhbjIsQ3I9ZnVuY3Rpb24odCxlKXt2YXIgaSxuLG8sYSxyLHM9dC5kYXRhLGw9SXIuTSx1PUlyLkMsaD1Jci5MLGM9SXIuUixkPUlyLkEsZj1Jci5RO2ZvcihhPW89MDtvPHMubGVuZ3RoOyl7c3dpdGNoKGk9c1tvKytdLGE9byxuPTAsaSl7Y2FzZSBsOmNhc2UgaDpuPTE7YnJlYWs7Y2FzZSB1Om49MzticmVhaztjYXNlIGY6bj0yO2JyZWFrO2Nhc2UgZDp2YXIgcD1lWzRdLGc9ZVs1XSxtPUFyKGVbMF0qZVswXStlWzFdKmVbMV0pLHY9QXIoZVsyXSplWzJdK2VbM10qZVszXSkseT1EcigtZVsxXS92LGVbMF0vbSk7c1tvXSo9bSxzW28rK10rPXAsc1tvXSo9dixzW28rK10rPWcsc1tvKytdKj1tLHNbbysrXSo9dixzW28rK10rPXksc1tvKytdKz15LGE9bys9MjticmVhaztjYXNlIGM6eFswXT1zW28rK10seFsxXT1zW28rK10sYnQoeCx4LGUpLHNbYSsrXT14WzBdLHNbYSsrXT14WzFdLHhbMF0rPXNbbysrXSx4WzFdKz1zW28rK10sYnQoeCx4LGUpLHNbYSsrXT14WzBdLHNbYSsrXT14WzFdfWZvcihyPTA7cjxuO3IrKyl7dmFyIHg7KHg9VHJbcl0pWzBdPXNbbysrXSx4WzFdPXNbbysrXSxidCh4LHgsZSksc1thKytdPXhbMF0sc1thKytdPXhbMV19fX0sTHI9TWF0aC5zcXJ0LGtyPU1hdGguc2luLFByPU1hdGguY29zLE5yPU1hdGguUEksT3I9ZnVuY3Rpb24odCxlKXtyZXR1cm4odFswXSplWzBdK3RbMV0qZVsxXSkvKE1yKHQpKk1yKGUpKX0sRXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4odFswXSplWzFdPHRbMV0qZVswXT8tMToxKSpNYXRoLmFjb3MoT3IodCxlKSl9O2Z1bmN0aW9uIHpyKHQsZSxpLG4sbyxhLHIscyxsLHUsaCl7dmFyIGM9bCooTnIvMTgwKSxkPVByKGMpKih0LWkpLzIra3IoYykqKGUtbikvMixmPS0xKmtyKGMpKih0LWkpLzIrUHIoYykqKGUtbikvMixwPWQqZC8ocipyKStmKmYvKHMqcyk7MTxwJiYocio9THIocCkscyo9THIocCkpO3ZhciBnPShvPT09YT8tMToxKSpMcigocipyKihzKnMpLXIqciooZipmKS1zKnMqKGQqZCkpLyhyKnIqKGYqZikrcypzKihkKmQpKSl8fDAsbT1nKnIqZi9zLHY9ZyotcypkL3IseT0odCtpKS8yK1ByKGMpKm0ta3IoYykqdix4PShlK24pLzIra3IoYykqbStQcihjKSp2LF89RXIoWzEsMF0sWyhkLW0pL3IsKGYtdikvc10pLHc9WyhkLW0pL3IsKGYtdikvc10sYj1bKC0xKmQtbSkvciwoLTEqZi12KS9zXSxTPUVyKHcsYik7T3IodyxiKTw9LTEmJihTPU5yKSwxPD1Pcih3LGIpJiYoUz0wKSwwPT09YSYmMDxTJiYoUy09MipOciksMT09PWEmJlM8MCYmKFMrPTIqTnIpLGguYWRkRGF0YSh1LHkseCxyLHMsXyxTLGMsYSl9dmFyIFJyPS8oW21sdmh6Y3F0c2FdKShbXm1sdmh6Y3F0c2FdKikvZ2ksQnI9Ly0/KFswLTldKlwuKT9bMC05XSsoW2VFXS0/WzAtOV0rKT8vZztmdW5jdGlvbiBWcih0LGUpe3ZhciBpPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBuZXcgaXI7Zm9yKHZhciBlLGk9MCxuPTAsbz1pLGE9bixyPW5ldyBpcixzPWlyLkNNRCxsPXQubWF0Y2goUnIpLHU9MDt1PGwubGVuZ3RoO3UrKyl7Zm9yKHZhciBoLGM9bFt1XSxkPWMuY2hhckF0KDApLGY9Yy5tYXRjaChCcil8fFtdLHA9Zi5sZW5ndGgsZz0wO2c8cDtnKyspZltnXT1wYXJzZUZsb2F0KGZbZ10pO2Zvcih2YXIgbT0wO208cDspe3ZhciB2LHkseCxfLHcsYixTLE09aSxJPW47c3dpdGNoKGQpe2Nhc2UibCI6aSs9ZlttKytdLG4rPWZbbSsrXSxoPXMuTCxyLmFkZERhdGEoaCxpLG4pO2JyZWFrO2Nhc2UiTCI6aT1mW20rK10sbj1mW20rK10saD1zLkwsci5hZGREYXRhKGgsaSxuKTticmVhaztjYXNlIm0iOmkrPWZbbSsrXSxuKz1mW20rK10saD1zLk0sci5hZGREYXRhKGgsaSxuKSxvPWksYT1uLGQ9ImwiO2JyZWFrO2Nhc2UiTSI6aT1mW20rK10sbj1mW20rK10saD1zLk0sci5hZGREYXRhKGgsaSxuKSxvPWksYT1uLGQ9IkwiO2JyZWFrO2Nhc2UiaCI6aSs9ZlttKytdLGg9cy5MLHIuYWRkRGF0YShoLGksbik7YnJlYWs7Y2FzZSJIIjppPWZbbSsrXSxoPXMuTCxyLmFkZERhdGEoaCxpLG4pO2JyZWFrO2Nhc2UidiI6bis9ZlttKytdLGg9cy5MLHIuYWRkRGF0YShoLGksbik7YnJlYWs7Y2FzZSJWIjpuPWZbbSsrXSxoPXMuTCxyLmFkZERhdGEoaCxpLG4pO2JyZWFrO2Nhc2UiQyI6aD1zLkMsci5hZGREYXRhKGgsZlttKytdLGZbbSsrXSxmW20rK10sZlttKytdLGZbbSsrXSxmW20rK10pLGk9ZlttLTJdLG49ZlttLTFdO2JyZWFrO2Nhc2UiYyI6aD1zLkMsci5hZGREYXRhKGgsZlttKytdK2ksZlttKytdK24sZlttKytdK2ksZlttKytdK24sZlttKytdK2ksZlttKytdK24pLGkrPWZbbS0yXSxuKz1mW20tMV07YnJlYWs7Y2FzZSJTIjp2PWkseT1uO3ZhciBUPXIubGVuKCksQT1yLmRhdGE7ZT09PXMuQyYmKHYrPWktQVtULTRdLHkrPW4tQVtULTNdKSxoPXMuQyxNPWZbbSsrXSxJPWZbbSsrXSxpPWZbbSsrXSxuPWZbbSsrXSxyLmFkZERhdGEoaCx2LHksTSxJLGksbik7YnJlYWs7Y2FzZSJzIjp2PWkseT1uO1Q9ci5sZW4oKSxBPXIuZGF0YTtlPT09cy5DJiYodis9aS1BW1QtNF0seSs9bi1BW1QtM10pLGg9cy5DLE09aStmW20rK10sST1uK2ZbbSsrXSxpKz1mW20rK10sbis9ZlttKytdLHIuYWRkRGF0YShoLHYseSxNLEksaSxuKTticmVhaztjYXNlIlEiOk09ZlttKytdLEk9ZlttKytdLGk9ZlttKytdLG49ZlttKytdLGg9cy5RLHIuYWRkRGF0YShoLE0sSSxpLG4pO2JyZWFrO2Nhc2UicSI6TT1mW20rK10raSxJPWZbbSsrXStuLGkrPWZbbSsrXSxuKz1mW20rK10saD1zLlEsci5hZGREYXRhKGgsTSxJLGksbik7YnJlYWs7Y2FzZSJUIjp2PWkseT1uO1Q9ci5sZW4oKSxBPXIuZGF0YTtlPT09cy5RJiYodis9aS1BW1QtNF0seSs9bi1BW1QtM10pLGk9ZlttKytdLG49ZlttKytdLGg9cy5RLHIuYWRkRGF0YShoLHYseSxpLG4pO2JyZWFrO2Nhc2UidCI6dj1pLHk9bjtUPXIubGVuKCksQT1yLmRhdGE7ZT09PXMuUSYmKHYrPWktQVtULTRdLHkrPW4tQVtULTNdKSxpKz1mW20rK10sbis9ZlttKytdLGg9cy5RLHIuYWRkRGF0YShoLHYseSxpLG4pO2JyZWFrO2Nhc2UiQSI6eD1mW20rK10sXz1mW20rK10sdz1mW20rK10sYj1mW20rK10sUz1mW20rK10senIoTT1pLEk9bixpPWZbbSsrXSxuPWZbbSsrXSxiLFMseCxfLHcsaD1zLkEscik7YnJlYWs7Y2FzZSJhIjp4PWZbbSsrXSxfPWZbbSsrXSx3PWZbbSsrXSxiPWZbbSsrXSxTPWZbbSsrXSx6cihNPWksST1uLGkrPWZbbSsrXSxuKz1mW20rK10sYixTLHgsXyx3LGg9cy5BLHIpfX0ieiIhPT1kJiYiWiIhPT1kfHwoaD1zLlosci5hZGREYXRhKGgpLGk9byxuPWEpLGU9aH1yZXR1cm4gci50b1N0YXRpYygpLHJ9KHQpO3JldHVybihlPWV8fHt9KS5idWlsZFBhdGg9ZnVuY3Rpb24odCl7aWYodC5zZXREYXRhKXt0LnNldERhdGEoaS5kYXRhKSwoZT10LmdldENvbnRleHQoKSkmJnQucmVidWlsZFBhdGgoZSl9ZWxzZXt2YXIgZT10O2kucmVidWlsZFBhdGgoZSl9fSxlLmFwcGx5VHJhbnNmb3JtPWZ1bmN0aW9uKHQpe0NyKGksdCksdGhpcy5kaXJ0eSghMCl9LGV9ZnVuY3Rpb24gR3IodCxlKXtyZXR1cm4gbmV3IFNyKFZyKHQsZSkpfXZhciBGcj1mdW5jdGlvbih0KXtqbi5jYWxsKHRoaXMsdCl9O0ZyLnByb3RvdHlwZT17Y29uc3RydWN0b3I6RnIsdHlwZToidGV4dCIsYnJ1c2g6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnN0eWxlO3RoaXMuX19kaXJ0eSYma24oaSksaS5maWxsPWkuc3Ryb2tlPWkuc2hhZG93Qmx1cj1pLnNoYWRvd0NvbG9yPWkuc2hhZG93T2Zmc2V0WD1pLnNoYWRvd09mZnNldFk9bnVsbDt2YXIgbj1pLnRleHQ7bnVsbCE9biYmKG4rPSIiKSxVbihuLGkpPyh0aGlzLnNldFRyYW5zZm9ybSh0KSxObih0aGlzLHQsbixpLG51bGwsZSksdGhpcy5yZXN0b3JlVHJhbnNmb3JtKHQpKTp0Ll9fYXR0ckNhY2hlZEJ5PUJpLk5PTkV9LGdldEJvdW5kaW5nUmVjdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3R5bGU7aWYodGhpcy5fX2RpcnR5JiZrbih0KSwhdGhpcy5fcmVjdCl7dmFyIGU9dC50ZXh0O251bGwhPWU/ZSs9IiI6ZT0iIjt2YXIgaT1jbih0LnRleHQrIiIsdC5mb250LHQudGV4dEFsaWduLHQudGV4dFZlcnRpY2FsQWxpZ24sdC50ZXh0UGFkZGluZyx0LnRleHRMaW5lSGVpZ2h0LHQucmljaCk7aWYoaS54Kz10Lnh8fDAsaS55Kz10Lnl8fDAsRm4odC50ZXh0U3Ryb2tlLHQudGV4dFN0cm9rZVdpZHRoKSl7dmFyIG49dC50ZXh0U3Ryb2tlV2lkdGg7aS54LT1uLzIsaS55LT1uLzIsaS53aWR0aCs9bixpLmhlaWdodCs9bn10aGlzLl9yZWN0PWl9cmV0dXJuIHRoaXMuX3JlY3R9fSx3KEZyLGpuKTtmdW5jdGlvbiBXcihsKXtyZXR1cm4gdi5icm93c2VyLmllJiYxMTw9di5icm93c2VyLnZlcnNpb24/ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX19jbGlwUGF0aHMsaT10aGlzLnN0eWxlO2lmKGUpZm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBvPWVbbl0sYT1vJiZvLnNoYXBlLHI9byYmby50eXBlO2lmKGEmJigic2VjdG9yIj09PXImJmEuc3RhcnRBbmdsZT09PWEuZW5kQW5nbGV8fCJyZWN0Ij09PXImJighYS53aWR0aHx8IWEuaGVpZ2h0KSkpe2Zvcih2YXIgcz0wO3M8WnIubGVuZ3RoO3MrKylacltzXVsyXT1pW1pyW3NdWzBdXSxpW1pyW3NdWzBdXT1acltzXVsxXTt0PSEwO2JyZWFrfX1pZihsLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0KWZvcihzPTA7czxaci5sZW5ndGg7cysrKWlbWnJbc11bMF1dPVpyW3NdWzJdfTpsfXZhciBIcj1Tci5leHRlbmQoe3R5cGU6ImNpcmNsZSIsc2hhcGU6e2N4OjAsY3k6MCxyOjB9LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUsaSl7aSYmdC5tb3ZlVG8oZS5jeCtlLnIsZS5jeSksdC5hcmMoZS5jeCxlLmN5LGUuciwwLDIqTWF0aC5QSSwhMCl9fSksWnI9W1sic2hhZG93Qmx1ciIsMF0sWyJzaGFkb3dDb2xvciIsIiMwMDAiXSxbInNoYWRvd09mZnNldFgiLDBdLFsic2hhZG93T2Zmc2V0WSIsMF1dLFVyPVNyLmV4dGVuZCh7dHlwZToic2VjdG9yIixzaGFwZTp7Y3g6MCxjeTowLHIwOjAscjowLHN0YXJ0QW5nbGU6MCxlbmRBbmdsZToyKk1hdGguUEksY2xvY2t3aXNlOiEwfSxicnVzaDpXcihTci5wcm90b3R5cGUuYnJ1c2gpLGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPWUuY3gsbj1lLmN5LG89TWF0aC5tYXgoZS5yMHx8MCwwKSxhPU1hdGgubWF4KGUuciwwKSxyPWUuc3RhcnRBbmdsZSxzPWUuZW5kQW5nbGUsbD1lLmNsb2Nrd2lzZSx1PU1hdGguY29zKHIpLGg9TWF0aC5zaW4ocik7dC5tb3ZlVG8odSpvK2ksaCpvK24pLHQubGluZVRvKHUqYStpLGgqYStuKSx0LmFyYyhpLG4sYSxyLHMsIWwpLHQubGluZVRvKE1hdGguY29zKHMpKm8raSxNYXRoLnNpbihzKSpvK24pLDAhPT1vJiZ0LmFyYyhpLG4sbyxzLHIsbCksdC5jbG9zZVBhdGgoKX19KSxYcj1Tci5leHRlbmQoe3R5cGU6InJpbmciLHNoYXBlOntjeDowLGN5OjAscjowLHIwOjB9LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPWUuY3gsbj1lLmN5LG89MipNYXRoLlBJO3QubW92ZVRvKGkrZS5yLG4pLHQuYXJjKGksbixlLnIsMCxvLCExKSx0Lm1vdmVUbyhpK2UucjAsbiksdC5hcmMoaSxuLGUucjAsMCxvLCEwKX19KTtmdW5jdGlvbiBZcih0LGUsaSxuLG8sYSxyKXt2YXIgcz0uNSooaS10KSxsPS41KihuLWUpO3JldHVybigyKihlLWkpK3MrbCkqcisoLTMqKGUtaSktMipzLWwpKmErcypvK2V9ZnVuY3Rpb24ganIodCxlLGkpe3ZhciBuPWUucG9pbnRzLG89ZS5zbW9vdGg7aWYobiYmMjw9bi5sZW5ndGgpe2lmKG8mJiJzcGxpbmUiIT09byl7dmFyIGE9ZnVuY3Rpb24odCxlLGksbil7dmFyIG8sYSxyLHMsbD1bXSx1PVtdLGg9W10sYz1bXTtpZihuKXtyPVsxLzAsMS8wXSxzPVstMS8wLC0xLzBdO2Zvcih2YXIgZD0wLGY9dC5sZW5ndGg7ZDxmO2QrKylTdChyLHIsdFtkXSksTXQocyxzLHRbZF0pO1N0KHIscixuWzBdKSxNdChzLHMsblsxXSl9Zm9yKGQ9MCxmPXQubGVuZ3RoO2Q8ZjtkKyspe3ZhciBwPXRbZF07aWYoaSlvPXRbZD9kLTE6Zi0xXSxhPXRbKGQrMSklZl07ZWxzZXtpZigwPT09ZHx8ZD09PWYtMSl7bC5wdXNoKHJ0KHRbZF0pKTtjb250aW51ZX1vPXRbZC0xXSxhPXRbZCsxXX1odCh1LGEsbyksZ3QodSx1LGUpO3ZhciBnPXZ0KHAsbyksbT12dChwLGEpLHY9ZyttOzAhPT12JiYoZy89dixtLz12KSxndChoLHUsLWcpLGd0KGMsdSxtKTt2YXIgeT1sdChbXSxwLGgpLHg9bHQoW10scCxjKTtuJiYoTXQoeSx5LHIpLFN0KHkseSxzKSxNdCh4LHgsciksU3QoeCx4LHMpKSxsLnB1c2goeSksbC5wdXNoKHgpfXJldHVybiBpJiZsLnB1c2gobC5zaGlmdCgpKSxsfShuLG8saSxlLnNtb290aENvbnN0cmFpbnQpO3QubW92ZVRvKG5bMF1bMF0sblswXVsxXSk7Zm9yKHZhciByPW4ubGVuZ3RoLHM9MDtzPChpP3I6ci0xKTtzKyspe3ZhciBsPWFbMipzXSx1PWFbMipzKzFdLGg9blsocysxKSVyXTt0LmJlemllckN1cnZlVG8obFswXSxsWzFdLHVbMF0sdVsxXSxoWzBdLGhbMV0pfX1lbHNleyJzcGxpbmUiPT09byYmKG49ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dC5sZW5ndGgsbj1bXSxvPTAsYT0xO2E8aTthKyspbys9dnQodFthLTFdLHRbYV0pO3ZhciByPW8vMjtyPXI8aT9pOnI7Zm9yKGE9MDthPHI7YSsrKXt2YXIgcyxsLHUsaD1hLyhyLTEpKihlP2k6aS0xKSxjPU1hdGguZmxvb3IoaCksZD1oLWMsZj10W2MlaV07dT1lPyhzPXRbKGMtMStpKSVpXSxsPXRbKGMrMSklaV0sdFsoYysyKSVpXSk6KHM9dFswPT09Yz9jOmMtMV0sbD10W2ktMjxjP2ktMTpjKzFdLHRbaS0zPGM/aS0xOmMrMl0pO3ZhciBwPWQqZCxnPWQqcDtuLnB1c2goW1lyKHNbMF0sZlswXSxsWzBdLHVbMF0sZCxwLGcpLFlyKHNbMV0sZlsxXSxsWzFdLHVbMV0sZCxwLGcpXSl9cmV0dXJuIG59KG4saSkpLHQubW92ZVRvKG5bMF1bMF0sblswXVsxXSk7cz0xO2Zvcih2YXIgYz1uLmxlbmd0aDtzPGM7cysrKXQubGluZVRvKG5bc11bMF0sbltzXVsxXSl9aSYmdC5jbG9zZVBhdGgoKX19dmFyIHFyPVNyLmV4dGVuZCh7dHlwZToicG9seWdvbiIsc2hhcGU6e3BvaW50czpudWxsLHNtb290aDohMSxzbW9vdGhDb25zdHJhaW50Om51bGx9LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe2pyKHQsZSwhMCl9fSksS3I9U3IuZXh0ZW5kKHt0eXBlOiJwb2x5bGluZSIsc2hhcGU6e3BvaW50czpudWxsLHNtb290aDohMSxzbW9vdGhDb25zdHJhaW50Om51bGx9LHN0eWxlOntzdHJva2U6IiMwMDAiLGZpbGw6bnVsbH0sYnVpbGRQYXRoOmZ1bmN0aW9uKHQsZSl7anIodCxlLCExKX19KSwkcj1NYXRoLnJvdW5kO2Z1bmN0aW9uIEpyKHQsZSxpKXt2YXIgbj1pJiZpLmxpbmVXaWR0aDtpZihlJiZuKXt2YXIgbz1lLngxLGE9ZS54MixyPWUueTEscz1lLnkyOyRyKDIqbyk9PT0kcigyKmEpP3QueDE9dC54Mj10cyhvLG4sITApOih0LngxPW8sdC54Mj1hKSwkcigyKnIpPT09JHIoMipzKT90LnkxPXQueTI9dHMocixuLCEwKToodC55MT1yLHQueTI9cyl9fWZ1bmN0aW9uIFFyKHQsZSxpKXt2YXIgbj1pJiZpLmxpbmVXaWR0aDtpZihlJiZuKXt2YXIgbz1lLngsYT1lLnkscj1lLndpZHRoLHM9ZS5oZWlnaHQ7dC54PXRzKG8sbiwhMCksdC55PXRzKGEsbiwhMCksdC53aWR0aD1NYXRoLm1heCh0cyhvK3IsbiwhMSktdC54LDA9PT1yPzA6MSksdC5oZWlnaHQ9TWF0aC5tYXgodHMoYStzLG4sITEpLXQueSwwPT09cz8wOjEpfX1mdW5jdGlvbiB0cyh0LGUsaSl7dmFyIG49JHIoMip0KTtyZXR1cm4obiskcihlKSklMj09MD9uLzI6KG4rKGk/MTotMSkpLzJ9dmFyIGVzPXt9LGlzPVNyLmV4dGVuZCh7dHlwZToicmVjdCIsc2hhcGU6e3I6MCx4OjAseTowLHdpZHRoOjAsaGVpZ2h0OjB9LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpLG4sbyxhO3RoaXMuc3ViUGl4ZWxPcHRpbWl6ZT8oUXIoZXMsZSx0aGlzLnN0eWxlKSxpPWVzLngsbj1lcy55LG89ZXMud2lkdGgsYT1lcy5oZWlnaHQsZXMucj1lLnIsZT1lcyk6KGk9ZS54LG49ZS55LG89ZS53aWR0aCxhPWUuaGVpZ2h0KSxlLnI/TW4odCxlKTp0LnJlY3QoaSxuLG8sYSksdC5jbG9zZVBhdGgoKX19KSxucz17fSxvcz1Tci5leHRlbmQoe3R5cGU6ImxpbmUiLHNoYXBlOnt4MTowLHkxOjAseDI6MCx5MjowLHBlcmNlbnQ6MX0sc3R5bGU6e3N0cm9rZToiIzAwMCIsZmlsbDpudWxsfSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaSxuLG8sYTthPXRoaXMuc3ViUGl4ZWxPcHRpbWl6ZT8oSnIobnMsZSx0aGlzLnN0eWxlKSxpPW5zLngxLG49bnMueTEsbz1ucy54Mixucy55Mik6KGk9ZS54MSxuPWUueTEsbz1lLngyLGUueTIpO3ZhciByPWUucGVyY2VudDswIT09ciYmKHQubW92ZVRvKGksbikscjwxJiYobz1pKigxLXIpK28qcixhPW4qKDEtcikrYSpyKSx0LmxpbmVUbyhvLGEpKX0scG9pbnRBdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnNoYXBlO3JldHVybltlLngxKigxLXQpK2UueDIqdCxlLnkxKigxLXQpK2UueTIqdF19fSksYXM9W107ZnVuY3Rpb24gcnModCxlLGkpe3ZhciBuPXQuY3B4MixvPXQuY3B5MjtyZXR1cm4gbnVsbD09PW58fG51bGw9PT1vP1soaT9TYTpiYSkodC54MSx0LmNweDEsdC5jcHgyLHQueDIsZSksKGk/U2E6YmEpKHQueTEsdC5jcHkxLHQuY3B5Mix0LnkyLGUpXTpbKGk/QWE6VGEpKHQueDEsdC5jcHgxLHQueDIsZSksKGk/QWE6VGEpKHQueTEsdC5jcHkxLHQueTIsZSldfWZ1bmN0aW9uIHNzKHQpe3RoaXMuY29sb3JTdG9wcz10fHxbXX12YXIgbHM9U3IuZXh0ZW5kKHt0eXBlOiJiZXppZXItY3VydmUiLHNoYXBlOnt4MTowLHkxOjAseDI6MCx5MjowLGNweDE6MCxjcHkxOjAscGVyY2VudDoxfSxzdHlsZTp7c3Ryb2tlOiIjMDAwIixmaWxsOm51bGx9LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPWUueDEsbj1lLnkxLG89ZS54MixhPWUueTIscj1lLmNweDEscz1lLmNweTEsbD1lLmNweDIsdT1lLmNweTIsaD1lLnBlcmNlbnQ7MCE9PWgmJih0Lm1vdmVUbyhpLG4pLG51bGw9PWx8fG51bGw9PXU/KGg8MSYmKENhKGkscixvLGgsYXMpLHI9YXNbMV0sbz1hc1syXSxDYShuLHMsYSxoLGFzKSxzPWFzWzFdLGE9YXNbMl0pLHQucXVhZHJhdGljQ3VydmVUbyhyLHMsbyxhKSk6KGg8MSYmKElhKGkscixsLG8saCxhcykscj1hc1sxXSxsPWFzWzJdLG89YXNbM10sSWEobixzLHUsYSxoLGFzKSxzPWFzWzFdLHU9YXNbMl0sYT1hc1szXSksdC5iZXppZXJDdXJ2ZVRvKHIscyxsLHUsbyxhKSkpfSxwb2ludEF0OmZ1bmN0aW9uKHQpe3JldHVybiBycyh0aGlzLnNoYXBlLHQsITEpfSx0YW5nZW50QXQ6ZnVuY3Rpb24odCl7dmFyIGU9cnModGhpcy5zaGFwZSx0LCEwKTtyZXR1cm4gbXQoZSxlKX19KSx1cz1Tci5leHRlbmQoe3R5cGU6ImFyYyIsc2hhcGU6e2N4OjAsY3k6MCxyOjAsc3RhcnRBbmdsZTowLGVuZEFuZ2xlOjIqTWF0aC5QSSxjbG9ja3dpc2U6ITB9LHN0eWxlOntzdHJva2U6IiMwMDAiLGZpbGw6bnVsbH0sYnVpbGRQYXRoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5jeCxuPWUuY3ksbz1NYXRoLm1heChlLnIsMCksYT1lLnN0YXJ0QW5nbGUscj1lLmVuZEFuZ2xlLHM9ZS5jbG9ja3dpc2UsbD1NYXRoLmNvcyhhKSx1PU1hdGguc2luKGEpO3QubW92ZVRvKGwqbytpLHUqbytuKSx0LmFyYyhpLG4sbyxhLHIsIXMpfX0pLGhzPVNyLmV4dGVuZCh7dHlwZToiY29tcG91bmQiLHNoYXBlOntwYXRoczpudWxsfSxfdXBkYXRlUGF0aERpcnR5OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX19kaXJ0eVBhdGgsZT10aGlzLnNoYXBlLnBhdGhzLGk9MDtpPGUubGVuZ3RoO2krKyl0PXR8fGVbaV0uX19kaXJ0eVBhdGg7dGhpcy5fX2RpcnR5UGF0aD10LHRoaXMuX19kaXJ0eT10aGlzLl9fZGlydHl8fHR9LGJlZm9yZUJydXNoOmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlUGF0aERpcnR5KCk7Zm9yKHZhciB0PXRoaXMuc2hhcGUucGF0aHN8fFtdLGU9dGhpcy5nZXRHbG9iYWxTY2FsZSgpLGk9MDtpPHQubGVuZ3RoO2krKyl0W2ldLnBhdGh8fHRbaV0uY3JlYXRlUGF0aFByb3h5KCksdFtpXS5wYXRoLnNldFNjYWxlKGVbMF0sZVsxXSx0W2ldLnNlZ21lbnRJZ25vcmVUaHJlc2hvbGQpfSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9ZS5wYXRoc3x8W10sbj0wO248aS5sZW5ndGg7bisrKWlbbl0uYnVpbGRQYXRoKHQsaVtuXS5zaGFwZSwhMCl9LGFmdGVyQnJ1c2g6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5zaGFwZS5wYXRoc3x8W10sZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV0uX19kaXJ0eVBhdGg9ITF9LGdldEJvdW5kaW5nUmVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cGRhdGVQYXRoRGlydHkoKSxTci5wcm90b3R5cGUuZ2V0Qm91bmRpbmdSZWN0LmNhbGwodGhpcyl9fSk7c3MucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpzcyxhZGRDb2xvclN0b3A6ZnVuY3Rpb24odCxlKXt0aGlzLmNvbG9yU3RvcHMucHVzaCh7b2Zmc2V0OnQsY29sb3I6ZX0pfX07ZnVuY3Rpb24gY3ModCxlLGksbixvLGEpe3RoaXMueD1udWxsPT10PzA6dCx0aGlzLnk9bnVsbD09ZT8wOmUsdGhpcy54Mj1udWxsPT1pPzE6aSx0aGlzLnkyPW51bGw9PW4/MDpuLHRoaXMudHlwZT0ibGluZWFyIix0aGlzLmdsb2JhbD1hfHwhMSxzcy5jYWxsKHRoaXMsbyl9Y3MucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjpjc30sdyhjcyxzcyk7ZnVuY3Rpb24gZHModCxlLGksbixvKXt0aGlzLng9bnVsbD09dD8uNTp0LHRoaXMueT1udWxsPT1lPy41OmUsdGhpcy5yPW51bGw9PWk/LjU6aSx0aGlzLnR5cGU9InJhZGlhbCIsdGhpcy5nbG9iYWw9b3x8ITEsc3MuY2FsbCh0aGlzLG4pfWZ1bmN0aW9uIGZzKHQpe2puLmNhbGwodGhpcyx0KSx0aGlzLl9kaXNwbGF5YWJsZXM9W10sdGhpcy5fdGVtcG9yYXJ5RGlzcGxheWFibGVzPVtdLHRoaXMuX2N1cnNvcj0wLHRoaXMubm90Q2xlYXI9ITB9ZHMucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjpkc30sdyhkcyxzcyksZnMucHJvdG90eXBlLmluY3JlbWVudGFsPSEwLGZzLnByb3RvdHlwZS5jbGVhckRpc3BsYXlibGVzPWZ1bmN0aW9uKCl7dGhpcy5fZGlzcGxheWFibGVzPVtdLHRoaXMuX3RlbXBvcmFyeURpc3BsYXlhYmxlcz1bXSx0aGlzLl9jdXJzb3I9MCx0aGlzLmRpcnR5KCksdGhpcy5ub3RDbGVhcj0hMX0sZnMucHJvdG90eXBlLmFkZERpc3BsYXlhYmxlPWZ1bmN0aW9uKHQsZSl7ZT90aGlzLl90ZW1wb3JhcnlEaXNwbGF5YWJsZXMucHVzaCh0KTp0aGlzLl9kaXNwbGF5YWJsZXMucHVzaCh0KSx0aGlzLmRpcnR5KCl9LGZzLnByb3RvdHlwZS5hZGREaXNwbGF5YWJsZXM9ZnVuY3Rpb24odCxlKXtlPWV8fCExO2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKXRoaXMuYWRkRGlzcGxheWFibGUodFtpXSxlKX0sZnMucHJvdG90eXBlLmVhY2hQZW5kaW5nRGlzcGxheWFibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX2N1cnNvcjtlPHRoaXMuX2Rpc3BsYXlhYmxlcy5sZW5ndGg7ZSsrKXQmJnQodGhpcy5fZGlzcGxheWFibGVzW2VdKTtmb3IoZT0wO2U8dGhpcy5fdGVtcG9yYXJ5RGlzcGxheWFibGVzLmxlbmd0aDtlKyspdCYmdCh0aGlzLl90ZW1wb3JhcnlEaXNwbGF5YWJsZXNbZV0pfSxmcy5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtmb3IodmFyIHQ9dGhpcy5fY3Vyc29yO3Q8dGhpcy5fZGlzcGxheWFibGVzLmxlbmd0aDt0KyspeyhlPXRoaXMuX2Rpc3BsYXlhYmxlc1t0XSkucGFyZW50PXRoaXMsZS51cGRhdGUoKSxlLnBhcmVudD1udWxsfWZvcih0PTA7dDx0aGlzLl90ZW1wb3JhcnlEaXNwbGF5YWJsZXMubGVuZ3RoO3QrKyl7dmFyIGU7KGU9dGhpcy5fdGVtcG9yYXJ5RGlzcGxheWFibGVzW3RdKS5wYXJlbnQ9dGhpcyxlLnVwZGF0ZSgpLGUucGFyZW50PW51bGx9fSxmcy5wcm90b3R5cGUuYnJ1c2g9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dGhpcy5fY3Vyc29yO2k8dGhpcy5fZGlzcGxheWFibGVzLmxlbmd0aDtpKyspeyhuPXRoaXMuX2Rpc3BsYXlhYmxlc1tpXSkuYmVmb3JlQnJ1c2gmJm4uYmVmb3JlQnJ1c2godCksbi5icnVzaCh0LGk9PT10aGlzLl9jdXJzb3I/bnVsbDp0aGlzLl9kaXNwbGF5YWJsZXNbaS0xXSksbi5hZnRlckJydXNoJiZuLmFmdGVyQnJ1c2godCl9dGhpcy5fY3Vyc29yPWk7Zm9yKGk9MDtpPHRoaXMuX3RlbXBvcmFyeURpc3BsYXlhYmxlcy5sZW5ndGg7aSsrKXt2YXIgbjsobj10aGlzLl90ZW1wb3JhcnlEaXNwbGF5YWJsZXNbaV0pLmJlZm9yZUJydXNoJiZuLmJlZm9yZUJydXNoKHQpLG4uYnJ1c2godCwwPT09aT9udWxsOnRoaXMuX3RlbXBvcmFyeURpc3BsYXlhYmxlc1tpLTFdKSxuLmFmdGVyQnJ1c2gmJm4uYWZ0ZXJCcnVzaCh0KX10aGlzLl90ZW1wb3JhcnlEaXNwbGF5YWJsZXM9W10sdGhpcy5ub3RDbGVhcj0hMH07dmFyIHBzPVtdO2ZzLnByb3RvdHlwZS5nZXRCb3VuZGluZ1JlY3Q9ZnVuY3Rpb24oKXtpZighdGhpcy5fcmVjdCl7Zm9yKHZhciB0PW5ldyBNaSgxLzAsMS8wLC0xLzAsLTEvMCksZT0wO2U8dGhpcy5fZGlzcGxheWFibGVzLmxlbmd0aDtlKyspe3ZhciBpPXRoaXMuX2Rpc3BsYXlhYmxlc1tlXSxuPWkuZ2V0Qm91bmRpbmdSZWN0KCkuY2xvbmUoKTtpLm5lZWRMb2NhbFRyYW5zZm9ybSgpJiZuLmFwcGx5VHJhbnNmb3JtKGkuZ2V0TG9jYWxUcmFuc2Zvcm0ocHMpKSx0LnVuaW9uKG4pfXRoaXMuX3JlY3Q9dH1yZXR1cm4gdGhpcy5fcmVjdH0sZnMucHJvdG90eXBlLmNvbnRhaW49ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnRyYW5zZm9ybUNvb3JkVG9Mb2NhbCh0LGUpO2lmKHRoaXMuZ2V0Qm91bmRpbmdSZWN0KCkuY29udGFpbihpWzBdLGlbMV0pKWZvcih2YXIgbj0wO248dGhpcy5fZGlzcGxheWFibGVzLmxlbmd0aDtuKyspe2lmKHRoaXMuX2Rpc3BsYXlhYmxlc1tuXS5jb250YWluKHQsZSkpcmV0dXJuITB9cmV0dXJuITF9LHcoZnMsam4pO3ZhciBncz1NYXRoLm1heCxtcz1NYXRoLm1pbix2cz17fSx5cz0xLHhzPXtjb2xvcjoidGV4dEZpbGwiLHRleHRCb3JkZXJDb2xvcjoidGV4dFN0cm9rZSIsdGV4dEJvcmRlcldpZHRoOiJ0ZXh0U3Ryb2tlV2lkdGgifSxfcz0iZW1waGFzaXMiLHdzPSJub3JtYWwiLGJzPTEsU3M9e30sTXM9e307ZnVuY3Rpb24gSXModCl7cmV0dXJuIFNyLmV4dGVuZCh0KX1mdW5jdGlvbiBUcyh0LGUpe01zW3RdPWV9ZnVuY3Rpb24gQXModCl7aWYoTXMuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuIE1zW3RdfWZ1bmN0aW9uIERzKHQsZSxpLG4pe3ZhciBvPUdyKHQsZSk7cmV0dXJuIGkmJigiY2VudGVyIj09PW4mJihpPUxzKGksby5nZXRCb3VuZGluZ1JlY3QoKSkpLFBzKG8saSkpLG99ZnVuY3Rpb24gQ3ModCxpLG4pe3ZhciBvPW5ldyBxbih7c3R5bGU6e2ltYWdlOnQseDppLngseTppLnksd2lkdGg6aS53aWR0aCxoZWlnaHQ6aS5oZWlnaHR9LG9ubG9hZDpmdW5jdGlvbih0KXtpZigiY2VudGVyIj09PW4pe3ZhciBlPXt3aWR0aDp0LndpZHRoLGhlaWdodDp0LmhlaWdodH07by5zZXRTdHlsZShMcyhpLGUpKX19fSk7cmV0dXJuIG99ZnVuY3Rpb24gTHModCxlKXt2YXIgaSxuPWUud2lkdGgvZS5oZWlnaHQsbz10LmhlaWdodCpuO3JldHVybiBpPW88PXQud2lkdGg/dC5oZWlnaHQ6KG89dC53aWR0aCkvbix7eDp0LngrdC53aWR0aC8yLW8vMix5OnQueSt0LmhlaWdodC8yLWkvMix3aWR0aDpvLGhlaWdodDppfX12YXIga3M9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9W10sbj10Lmxlbmd0aCxvPTA7bzxuO28rKyl7dmFyIGE9dFtvXTthLnBhdGh8fGEuY3JlYXRlUGF0aFByb3h5KCksYS5fX2RpcnR5UGF0aCYmYS5idWlsZFBhdGgoYS5wYXRoLGEuc2hhcGUsITApLGkucHVzaChhLnBhdGgpfXZhciByPW5ldyBTcihlKTtyZXR1cm4gci5jcmVhdGVQYXRoUHJveHkoKSxyLmJ1aWxkUGF0aD1mdW5jdGlvbih0KXt0LmFwcGVuZFBhdGgoaSk7dmFyIGU9dC5nZXRDb250ZXh0KCk7ZSYmdC5yZWJ1aWxkUGF0aChlKX0scn07ZnVuY3Rpb24gUHModCxlKXtpZih0LmFwcGx5VHJhbnNmb3JtKXt2YXIgaT10LmdldEJvdW5kaW5nUmVjdCgpLmNhbGN1bGF0ZVRyYW5zZm9ybShlKTt0LmFwcGx5VHJhbnNmb3JtKGkpfX12YXIgTnM9dHM7ZnVuY3Rpb24gT3ModCl7cmV0dXJuIG51bGwhPXQmJiJub25lIiE9PXR9dmFyIEVzPVEoKSx6cz0wO2Z1bmN0aW9uIFJzKHQpe3ZhciBlPXQuX19ob3ZlclN0bDtpZihlJiYhdC5fX2hpZ2hsaWdodGVkKXt2YXIgaT10Ll9fenIsbj10LnVzZUhvdmVyTGF5ZXImJmkmJiJjYW52YXMiPT09aS5wYWludGVyLnR5cGU7aWYodC5fX2hpZ2hsaWdodGVkPW4/ImxheWVyIjoicGxhaW4iLCEodC5pc0dyb3VwfHwhaSYmdC51c2VIb3ZlckxheWVyKSl7dmFyIG89dCxhPXQuc3R5bGU7biYmKGE9KG89aS5hZGRIb3Zlcih0KSkuc3R5bGUpLG9sKGEpLG58fGZ1bmN0aW9uKHQpe2lmKHQuX19ob3ZlclN0bERpcnR5KXt0Ll9faG92ZXJTdGxEaXJ0eT0hMTt2YXIgZT10Ll9faG92ZXJTdGw7aWYoZSl7dmFyIGk9dC5fX2NhY2hlZE5vcm1hbFN0bD17fTt0Ll9fY2FjaGVkTm9ybWFsWjI9dC56Mjt2YXIgbj10LnN0eWxlO2Zvcih2YXIgbyBpbiBlKW51bGwhPWVbb10mJihpW29dPW5bb10pO2kuZmlsbD1uLmZpbGwsaS5zdHJva2U9bi5zdHJva2V9ZWxzZSB0Ll9fY2FjaGVkTm9ybWFsU3RsPXQuX19jYWNoZWROb3JtYWxaMj1udWxsfX0obyksYS5leHRlbmRGcm9tKGUpLEJzKGEsZSwiZmlsbCIpLEJzKGEsZSwic3Ryb2tlIiksbmwoYSksbnx8KHQuZGlydHkoITEpLHQuejIrPXlzKX19fWZ1bmN0aW9uIEJzKHQsZSxpKXshT3MoZVtpXSkmJk9zKHRbaV0pJiYodFtpXT1mdW5jdGlvbih0KXtpZigic3RyaW5nIiE9dHlwZW9mIHQpcmV0dXJuIHQ7dmFyIGU9RXMuZ2V0KHQpO3JldHVybiBlfHwoZT1WZSh0LC0uMSksenM8MWU0JiYoRXMuc2V0KHQsZSksenMrKykpLGV9KHRbaV0pKX1mdW5jdGlvbiBWcyh0KXt2YXIgZT10Ll9faGlnaGxpZ2h0ZWQ7aWYoZSYmKHQuX19oaWdobGlnaHRlZD0hMSwhdC5pc0dyb3VwKSlpZigibGF5ZXIiPT09ZSl0Ll9fenImJnQuX196ci5yZW1vdmVIb3Zlcih0KTtlbHNle3ZhciBpPXQuc3R5bGUsbj10Ll9fY2FjaGVkTm9ybWFsU3RsO24mJihvbChpKSx0LnNldFN0eWxlKG4pLG5sKGkpKTt2YXIgbz10Ll9fY2FjaGVkTm9ybWFsWjI7bnVsbCE9byYmdC56Mi1vPT09eXMmJih0LnoyPW8pfX1mdW5jdGlvbiBHcyh0LGUsaSl7dmFyIG4sbz13cyxhPXdzO3QuX19oaWdobGlnaHRlZCYmKG89X3Msbj0hMCksZSh0LGkpLHQuX19oaWdobGlnaHRlZCYmKGE9X3Msbj0hMCksdC5pc0dyb3VwJiZ0LnRyYXZlcnNlKGZ1bmN0aW9uKHQpe3QuaXNHcm91cHx8ZSh0LGkpfSksbiYmdC5fX2hpZ2hEb3duT25VcGRhdGUmJnQuX19oaWdoRG93bk9uVXBkYXRlKG8sYSl9ZnVuY3Rpb24gRnModCxlKXtlPXQuX19ob3ZlclN0bD0hMSE9PWUmJih0LmhvdmVyU3R5bGV8fGV8fHt9KSx0Ll9faG92ZXJTdGxEaXJ0eT0hMCx0Ll9faGlnaGxpZ2h0ZWQmJih0Ll9fY2FjaGVkTm9ybWFsU3RsPW51bGwsVnModCksUnModCkpfWZ1bmN0aW9uIFdzKHQpe1hzKHRoaXMsdCl8fHRoaXMuX19oaWdoQnlPdXRlcnx8R3ModGhpcyxScyl9ZnVuY3Rpb24gSHModCl7WHModGhpcyx0KXx8dGhpcy5fX2hpZ2hCeU91dGVyfHxHcyh0aGlzLFZzKX1mdW5jdGlvbiBacyh0KXt0aGlzLl9faGlnaEJ5T3V0ZXJ8PTE8PCh0fHwwKSxHcyh0aGlzLFJzKX1mdW5jdGlvbiBVcyh0KXsodGhpcy5fX2hpZ2hCeU91dGVyJj1+KDE8PCh0fHwwKSkpfHxHcyh0aGlzLFZzKX1mdW5jdGlvbiBYcyh0LGUpe3JldHVybiB0Ll9faGlnaERvd25TaWxlbnRPblRvdWNoJiZlLnpyQnlUb3VjaH1mdW5jdGlvbiBZcyh0LGUpe2pzKHQsITApLEdzKHQsRnMsZSl9ZnVuY3Rpb24ganModCxlKXt2YXIgaT0hMT09PWU7aWYodC5fX2hpZ2hEb3duU2lsZW50T25Ub3VjaD10LmhpZ2hEb3duU2lsZW50T25Ub3VjaCx0Ll9faGlnaERvd25PblVwZGF0ZT10LmhpZ2hEb3duT25VcGRhdGUsIWl8fHQuX19oaWdoRG93bkRpc3BhdGNoZXIpe3ZhciBuPWk/Im9mZiI6Im9uIjt0W25dKCJtb3VzZW92ZXIiLFdzKVtuXSgibW91c2VvdXQiLEhzKSx0W25dKCJlbXBoYXNpcyIsWnMpW25dKCJub3JtYWwiLFVzKSx0Ll9faGlnaEJ5T3V0ZXI9dC5fX2hpZ2hCeU91dGVyfHwwLHQuX19oaWdoRG93bkRpc3BhdGNoZXI9IWl9fWZ1bmN0aW9uIHFzKHQpe3JldHVybiEoIXR8fCF0Ll9faGlnaERvd25EaXNwYXRjaGVyKX1mdW5jdGlvbiBLcyh0KXt2YXIgZT1Tc1t0XTtyZXR1cm4gbnVsbD09ZSYmYnM8PTMyJiYoZT1Tc1t0XT1icysrKSxlfWZ1bmN0aW9uICRzKHQsZSxpLG4sbyxhLHIpe3ZhciBzLGw9KG89b3x8dnMpLmxhYmVsRmV0Y2hlcix1PW8ubGFiZWxEYXRhSW5kZXgsaD1vLmxhYmVsRGltSW5kZXgsYz1pLmdldFNoYWxsb3coInNob3ciKSxkPW4uZ2V0U2hhbGxvdygic2hvdyIpOyhjfHxkKSYmKGwmJihzPWwuZ2V0Rm9ybWF0dGVkTGFiZWwodSwibm9ybWFsIixudWxsLGgpKSxudWxsPT1zJiYocz1PKG8uZGVmYXVsdFRleHQpP28uZGVmYXVsdFRleHQodSxvKTpvLmRlZmF1bHRUZXh0KSk7dmFyIGY9Yz9zOm51bGwscD1kP0gobD9sLmdldEZvcm1hdHRlZExhYmVsKHUsImVtcGhhc2lzIixudWxsLGgpOm51bGwscyk6bnVsbDtudWxsPT1mJiZudWxsPT1wfHwoUXModCxpLGEsbyksUXMoZSxuLHIsbywhMCkpLHQudGV4dD1mLGUudGV4dD1wfWZ1bmN0aW9uIEpzKHQsZSxpKXt2YXIgbj10LnN0eWxlO2UmJihvbChuKSx0LnNldFN0eWxlKGUpLG5sKG4pKSxuPXQuX19ob3ZlclN0bCxpJiZuJiYob2wobiksTChuLGkpLG5sKG4pKX1mdW5jdGlvbiBRcyh0LGUsaSxuLG8pe3JldHVybiB0bCh0LGUsbixvKSxpJiZMKHQsaSksdH1mdW5jdGlvbiB0bCh0LGUsaSxuKXtpZigoaT1pfHx2cykuaXNSZWN0VGV4dCl7dmFyIG87aS5nZXRUZXh0UG9zaXRpb24/bz1pLmdldFRleHRQb3NpdGlvbihlLG4pOiJvdXRzaWRlIj09PShvPWUuZ2V0U2hhbGxvdygicG9zaXRpb24iKXx8KG4/bnVsbDoiaW5zaWRlIikpJiYobz0idG9wIiksdC50ZXh0UG9zaXRpb249byx0LnRleHRPZmZzZXQ9ZS5nZXRTaGFsbG93KCJvZmZzZXQiKTt2YXIgYT1lLmdldFNoYWxsb3coInJvdGF0ZSIpO251bGwhPWEmJihhKj1NYXRoLlBJLzE4MCksdC50ZXh0Um90YXRpb249YSx0LnRleHREaXN0YW5jZT1IKGUuZ2V0U2hhbGxvdygiZGlzdGFuY2UiKSxuP251bGw6NSl9dmFyIHIscz1lLmVjTW9kZWwsbD1zJiZzLm9wdGlvbi50ZXh0U3R5bGUsdT1mdW5jdGlvbih0KXt2YXIgZTtmb3IoO3QmJnQhPT10LmVjTW9kZWw7KXt2YXIgaT0odC5vcHRpb258fHZzKS5yaWNoO2lmKGkpZm9yKHZhciBuIGluIGU9ZXx8e30saSlpLmhhc093blByb3BlcnR5KG4pJiYoZVtuXT0xKTt0PXQucGFyZW50TW9kZWx9cmV0dXJuIGV9KGUpO2lmKHUpZm9yKHZhciBoIGluIHI9e30sdSlpZih1Lmhhc093blByb3BlcnR5KGgpKXt2YXIgYz1lLmdldE1vZGVsKFsicmljaCIsaF0pO2VsKHJbaF09e30sYyxsLGksbil9cmV0dXJuIHQucmljaD1yLGVsKHQsZSxsLGksbiwhMCksaS5mb3JjZVJpY2gmJiFpLnRleHRTdHlsZSYmKGkudGV4dFN0eWxlPXt9KSx0fWZ1bmN0aW9uIGVsKHQsZSxpLG4sbyxhKXtpPSFvJiZpfHx2cyx0LnRleHRGaWxsPWlsKGUuZ2V0U2hhbGxvdygiY29sb3IiKSxuKXx8aS5jb2xvcix0LnRleHRTdHJva2U9aWwoZS5nZXRTaGFsbG93KCJ0ZXh0Qm9yZGVyQ29sb3IiKSxuKXx8aS50ZXh0Qm9yZGVyQ29sb3IsdC50ZXh0U3Ryb2tlV2lkdGg9SChlLmdldFNoYWxsb3coInRleHRCb3JkZXJXaWR0aCIpLGkudGV4dEJvcmRlcldpZHRoKSxvfHwoYSYmKHQuaW5zaWRlUm9sbGJhY2tPcHQ9bixubCh0KSksbnVsbD09dC50ZXh0RmlsbCYmKHQudGV4dEZpbGw9bi5hdXRvQ29sb3IpKSx0LmZvbnRTdHlsZT1lLmdldFNoYWxsb3coImZvbnRTdHlsZSIpfHxpLmZvbnRTdHlsZSx0LmZvbnRXZWlnaHQ9ZS5nZXRTaGFsbG93KCJmb250V2VpZ2h0Iil8fGkuZm9udFdlaWdodCx0LmZvbnRTaXplPWUuZ2V0U2hhbGxvdygiZm9udFNpemUiKXx8aS5mb250U2l6ZSx0LmZvbnRGYW1pbHk9ZS5nZXRTaGFsbG93KCJmb250RmFtaWx5Iil8fGkuZm9udEZhbWlseSx0LnRleHRBbGlnbj1lLmdldFNoYWxsb3coImFsaWduIiksdC50ZXh0VmVydGljYWxBbGlnbj1lLmdldFNoYWxsb3coInZlcnRpY2FsQWxpZ24iKXx8ZS5nZXRTaGFsbG93KCJiYXNlbGluZSIpLHQudGV4dExpbmVIZWlnaHQ9ZS5nZXRTaGFsbG93KCJsaW5lSGVpZ2h0IiksdC50ZXh0V2lkdGg9ZS5nZXRTaGFsbG93KCJ3aWR0aCIpLHQudGV4dEhlaWdodD1lLmdldFNoYWxsb3coImhlaWdodCIpLHQudGV4dFRhZz1lLmdldFNoYWxsb3coInRhZyIpLGEmJm4uZGlzYWJsZUJveHx8KHQudGV4dEJhY2tncm91bmRDb2xvcj1pbChlLmdldFNoYWxsb3coImJhY2tncm91bmRDb2xvciIpLG4pLHQudGV4dFBhZGRpbmc9ZS5nZXRTaGFsbG93KCJwYWRkaW5nIiksdC50ZXh0Qm9yZGVyQ29sb3I9aWwoZS5nZXRTaGFsbG93KCJib3JkZXJDb2xvciIpLG4pLHQudGV4dEJvcmRlcldpZHRoPWUuZ2V0U2hhbGxvdygiYm9yZGVyV2lkdGgiKSx0LnRleHRCb3JkZXJSYWRpdXM9ZS5nZXRTaGFsbG93KCJib3JkZXJSYWRpdXMiKSx0LnRleHRCb3hTaGFkb3dDb2xvcj1lLmdldFNoYWxsb3coInNoYWRvd0NvbG9yIiksdC50ZXh0Qm94U2hhZG93Qmx1cj1lLmdldFNoYWxsb3coInNoYWRvd0JsdXIiKSx0LnRleHRCb3hTaGFkb3dPZmZzZXRYPWUuZ2V0U2hhbGxvdygic2hhZG93T2Zmc2V0WCIpLHQudGV4dEJveFNoYWRvd09mZnNldFk9ZS5nZXRTaGFsbG93KCJzaGFkb3dPZmZzZXRZIikpLHQudGV4dFNoYWRvd0NvbG9yPWUuZ2V0U2hhbGxvdygidGV4dFNoYWRvd0NvbG9yIil8fGkudGV4dFNoYWRvd0NvbG9yLHQudGV4dFNoYWRvd0JsdXI9ZS5nZXRTaGFsbG93KCJ0ZXh0U2hhZG93Qmx1ciIpfHxpLnRleHRTaGFkb3dCbHVyLHQudGV4dFNoYWRvd09mZnNldFg9ZS5nZXRTaGFsbG93KCJ0ZXh0U2hhZG93T2Zmc2V0WCIpfHxpLnRleHRTaGFkb3dPZmZzZXRYLHQudGV4dFNoYWRvd09mZnNldFk9ZS5nZXRTaGFsbG93KCJ0ZXh0U2hhZG93T2Zmc2V0WSIpfHxpLnRleHRTaGFkb3dPZmZzZXRZfWZ1bmN0aW9uIGlsKHQsZSl7cmV0dXJuImF1dG8iIT09dD90OmUmJmUuYXV0b0NvbG9yP2UuYXV0b0NvbG9yOm51bGx9ZnVuY3Rpb24gbmwodCl7dmFyIGUsaT10LnRleHRQb3NpdGlvbixuPXQuaW5zaWRlUm9sbGJhY2tPcHQ7aWYobiYmbnVsbD09dC50ZXh0RmlsbCl7dmFyIG89bi5hdXRvQ29sb3IsYT1uLmlzUmVjdFRleHQscj1uLnVzZUluc2lkZVN0eWxlLHM9ITEhPT1yJiYoITA9PT1yfHxhJiZpJiYic3RyaW5nIj09dHlwZW9mIGkmJjA8PWkuaW5kZXhPZigiaW5zaWRlIikpLGw9IXMmJm51bGwhPW87KHN8fGwpJiYoZT17dGV4dEZpbGw6dC50ZXh0RmlsbCx0ZXh0U3Ryb2tlOnQudGV4dFN0cm9rZSx0ZXh0U3Ryb2tlV2lkdGg6dC50ZXh0U3Ryb2tlV2lkdGh9KSxzJiYodC50ZXh0RmlsbD0iI2ZmZiIsbnVsbD09dC50ZXh0U3Ryb2tlJiYodC50ZXh0U3Ryb2tlPW8sbnVsbD09dC50ZXh0U3Ryb2tlV2lkdGgmJih0LnRleHRTdHJva2VXaWR0aD0yKSkpLGwmJih0LnRleHRGaWxsPW8pfXQuaW5zaWRlUm9sbGJhY2s9ZX1mdW5jdGlvbiBvbCh0KXt2YXIgZT10Lmluc2lkZVJvbGxiYWNrO2UmJih0LnRleHRGaWxsPWUudGV4dEZpbGwsdC50ZXh0U3Ryb2tlPWUudGV4dFN0cm9rZSx0LnRleHRTdHJva2VXaWR0aD1lLnRleHRTdHJva2VXaWR0aCx0Lmluc2lkZVJvbGxiYWNrPW51bGwpfWZ1bmN0aW9uIGFsKHQsZSl7dmFyIGk9ZSYmZS5nZXRNb2RlbCgidGV4dFN0eWxlIik7cmV0dXJuIGooW3QuZm9udFN0eWxlfHxpJiZpLmdldFNoYWxsb3coImZvbnRTdHlsZSIpfHwiIix0LmZvbnRXZWlnaHR8fGkmJmkuZ2V0U2hhbGxvdygiZm9udFdlaWdodCIpfHwiIiwodC5mb250U2l6ZXx8aSYmaS5nZXRTaGFsbG93KCJmb250U2l6ZSIpfHwxMikrInB4Iix0LmZvbnRGYW1pbHl8fGkmJmkuZ2V0U2hhbGxvdygiZm9udEZhbWlseSIpfHwic2Fucy1zZXJpZiJdLmpvaW4oIiAiKSl9ZnVuY3Rpb24gcmwodCxlLGksbixvLGEpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBvJiYoYT1vLG89bnVsbCksbiYmbi5pc0FuaW1hdGlvbkVuYWJsZWQoKSl7dmFyIHI9dD8iVXBkYXRlIjoiIixzPW4uZ2V0U2hhbGxvdygiYW5pbWF0aW9uRHVyYXRpb24iK3IpLGw9bi5nZXRTaGFsbG93KCJhbmltYXRpb25FYXNpbmciK3IpLHU9bi5nZXRTaGFsbG93KCJhbmltYXRpb25EZWxheSIrcik7ImZ1bmN0aW9uIj09dHlwZW9mIHUmJih1PXUobyxuLmdldEFuaW1hdGlvbkRlbGF5UGFyYW1zP24uZ2V0QW5pbWF0aW9uRGVsYXlQYXJhbXMoZSxvKTpudWxsKSksImZ1bmN0aW9uIj09dHlwZW9mIHMmJihzPXMobykpLDA8cz9lLmFuaW1hdGVUbyhpLHMsdXx8MCxsLGEsISFhKTooZS5zdG9wQW5pbWF0aW9uKCksZS5hdHRyKGkpLGEmJmEoKSl9ZWxzZSBlLnN0b3BBbmltYXRpb24oKSxlLmF0dHIoaSksYSYmYSgpfWZ1bmN0aW9uIHNsKHQsZSxpLG4sbyl7cmwoITAsdCxlLGksbixvKX1mdW5jdGlvbiBsbCh0LGUsaSxuLG8pe3JsKCExLHQsZSxpLG4sbyl9ZnVuY3Rpb24gdWwodCxlKXtmb3IodmFyIGk9aWUoW10pO3QmJnQhPT1lOylvZShpLHQuZ2V0TG9jYWxUcmFuc2Zvcm0oKSxpKSx0PXQucGFyZW50O3JldHVybiBpfWZ1bmN0aW9uIGhsKHQsZSxpKXtyZXR1cm4gZSYmIVAoZSkmJihlPWZlLmdldExvY2FsVHJhbnNmb3JtKGUpKSxpJiYoZT1sZShbXSxlKSksYnQoW10sdCxlKX1mdW5jdGlvbiBjbCh0LGUsaSl7dmFyIG49MD09PWVbNF18fDA9PT1lWzVdfHwwPT09ZVswXT8xOk1hdGguYWJzKDIqZVs0XS9lWzBdKSxvPTA9PT1lWzRdfHwwPT09ZVs1XXx8MD09PWVbMl0/MTpNYXRoLmFicygyKmVbNF0vZVsyXSksYT1bImxlZnQiPT09dD8tbjoicmlnaHQiPT09dD9uOjAsInRvcCI9PT10Py1vOiJib3R0b20iPT09dD9vOjBdO3JldHVybiBhPWhsKGEsZSxpKSxNYXRoLmFicyhhWzBdKT5NYXRoLmFicyhhWzFdKT8wPGFbMF0/InJpZ2h0IjoibGVmdCI6MDxhWzFdPyJib3R0b20iOiJ0b3AifWZ1bmN0aW9uIGRsKHQsZSxuLGkpe2lmKHQmJmUpe3ZhciBvLGE9KG89e30sdC50cmF2ZXJzZShmdW5jdGlvbih0KXshdC5pc0dyb3VwJiZ0LmFuaWQmJihvW3QuYW5pZF09dCl9KSxvKTtlLnRyYXZlcnNlKGZ1bmN0aW9uKHQpe2lmKCF0LmlzR3JvdXAmJnQuYW5pZCl7dmFyIGU9YVt0LmFuaWRdO2lmKGUpe3ZhciBpPXIodCk7dC5hdHRyKHIoZSkpLHNsKHQsaSxuLHQuZGF0YUluZGV4KX19fSl9ZnVuY3Rpb24gcih0KXt2YXIgZT17cG9zaXRpb246cnQodC5wb3NpdGlvbikscm90YXRpb246dC5yb3RhdGlvbn07cmV0dXJuIHQuc2hhcGUmJihlLnNoYXBlPUwoe30sdC5zaGFwZSkpLGV9fWZ1bmN0aW9uIGZsKHQsbil7cmV0dXJuIE4odCxmdW5jdGlvbih0KXt2YXIgZT10WzBdO2U9Z3MoZSxuLngpLGU9bXMoZSxuLngrbi53aWR0aCk7dmFyIGk9dFsxXTtyZXR1cm4gaT1ncyhpLG4ueSksW2UsaT1tcyhpLG4ueStuLmhlaWdodCldfSl9ZnVuY3Rpb24gcGwodCxlLGkpe3ZhciBuPShlPUwoe3JlY3RIb3ZlcjohMH0sZSkpLnN0eWxlPXtzdHJva2VOb1NjYWxlOiEwfTtpZihpPWl8fHt4Oi0xLHk6LTEsd2lkdGg6MixoZWlnaHQ6Mn0sdClyZXR1cm4gMD09PXQuaW5kZXhPZigiaW1hZ2U6Ly8iKT8obi5pbWFnZT10LnNsaWNlKDgpLEMobixpKSxuZXcgcW4oZSkpOkRzKHQucmVwbGFjZSgicGF0aDovLyIsIiIpLGUsaSwiY2VudGVyIil9ZnVuY3Rpb24gZ2wodCxlLGksbixvKXtmb3IodmFyIGE9MCxyPW9bby5sZW5ndGgtMV07YTxvLmxlbmd0aDthKyspe3ZhciBzPW9bYV07aWYobWwodCxlLGksbixzWzBdLHNbMV0sclswXSxyWzFdKSlyZXR1cm4hMDtyPXN9fWZ1bmN0aW9uIG1sKHQsZSxpLG4sbyxhLHIscyl7dmFyIGw9aS10LHU9bi1lLGg9ci1vLGM9cy1hLGQ9dmwoaCxjLGwsdSk7aWYoZnVuY3Rpb24odCl7cmV0dXJuIHQ8PTFlLTYmJi0xZS02PD10fShkKSlyZXR1cm4hMTt2YXIgZj10LW8scD1lLWEsZz12bChmLHAsbCx1KS9kO2lmKGc8MHx8MTxnKXJldHVybiExO3ZhciBtPXZsKGYscCxoLGMpL2Q7cmV0dXJuIShtPDB8fDE8bSl9ZnVuY3Rpb24gdmwodCxlLGksbil7cmV0dXJuIHQqbi1pKmV9VHMoImNpcmNsZSIsSHIpLFRzKCJzZWN0b3IiLFVyKSxUcygicmluZyIsWHIpLFRzKCJwb2x5Z29uIixxciksVHMoInBvbHlsaW5lIixLciksVHMoInJlY3QiLGlzKSxUcygibGluZSIsb3MpLFRzKCJiZXppZXJDdXJ2ZSIsbHMpLFRzKCJhcmMiLHVzKTt2YXIgeWw9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoe1oyX0VNUEhBU0lTX0xJRlQ6eXMsQ0FDSEVEX0xBQkVMX1NUWUxFX1BST1BFUlRJRVM6eHMsZXh0ZW5kU2hhcGU6SXMsZXh0ZW5kUGF0aDpmdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiBTci5leHRlbmQoVnIodCxlKSl9KHQsZSl9LHJlZ2lzdGVyU2hhcGU6VHMsZ2V0U2hhcGVDbGFzczpBcyxtYWtlUGF0aDpEcyxtYWtlSW1hZ2U6Q3MsbWVyZ2VQYXRoOmtzLHJlc2l6ZVBhdGg6UHMsc3ViUGl4ZWxPcHRpbWl6ZUxpbmU6ZnVuY3Rpb24odCl7cmV0dXJuIEpyKHQuc2hhcGUsdC5zaGFwZSx0LnN0eWxlKSx0fSxzdWJQaXhlbE9wdGltaXplUmVjdDpmdW5jdGlvbih0KXtyZXR1cm4gUXIodC5zaGFwZSx0LnNoYXBlLHQuc3R5bGUpLHR9LHN1YlBpeGVsT3B0aW1pemU6TnMsc2V0RWxlbWVudEhvdmVyU3R5bGU6RnMsc2V0SG92ZXJTdHlsZTpZcyxzZXRBc0hpZ2hEb3duRGlzcGF0Y2hlcjpqcyxpc0hpZ2hEb3duRGlzcGF0Y2hlcjpxcyxnZXRIaWdobGlnaHREaWdpdDpLcyxzZXRMYWJlbFN0eWxlOiRzLG1vZGlmeUxhYmVsU3R5bGU6SnMsc2V0VGV4dFN0eWxlOlFzLHNldFRleHQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuLG89e2lzUmVjdFRleHQ6ITB9OyExPT09aT9uPSEwOm8uYXV0b0NvbG9yPWksdGwodCxlLG8sbil9LGdldEZvbnQ6YWwsdXBkYXRlUHJvcHM6c2wsaW5pdFByb3BzOmxsLGdldFRyYW5zZm9ybTp1bCxhcHBseVRyYW5zZm9ybTpobCx0cmFuc2Zvcm1EaXJlY3Rpb246Y2wsZ3JvdXBUcmFuc2l0aW9uOmRsLGNsaXBQb2ludHNCeVJlY3Q6ZmwsY2xpcFJlY3RCeVJlY3Q6ZnVuY3Rpb24odCxlKXt2YXIgaT1ncyh0LngsZS54KSxuPW1zKHQueCt0LndpZHRoLGUueCtlLndpZHRoKSxvPWdzKHQueSxlLnkpLGE9bXModC55K3QuaGVpZ2h0LGUueStlLmhlaWdodCk7aWYoaTw9biYmbzw9YSlyZXR1cm57eDppLHk6byx3aWR0aDpuLWksaGVpZ2h0OmEtb319LGNyZWF0ZUljb246cGwsbGluZVBvbHlnb25JbnRlcnNlY3Q6Z2wsbGluZUxpbmVJbnRlcnNlY3Q6bWwsR3JvdXA6SWksSW1hZ2U6cW4sVGV4dDpGcixDaXJjbGU6SHIsU2VjdG9yOlVyLFJpbmc6WHIsUG9seWdvbjpxcixQb2x5bGluZTpLcixSZWN0OmlzLExpbmU6b3MsQmV6aWVyQ3VydmU6bHMsQXJjOnVzLEluY3JlbWVudGFsRGlzcGxheWFibGU6ZnMsQ29tcG91bmRQYXRoOmhzLExpbmVhckdyYWRpZW50OmNzLFJhZGlhbEdyYWRpZW50OmRzLEJvdW5kaW5nUmVjdDpNaX0pLHhsPVsidGV4dFN0eWxlIiwiY29sb3IiXSxfbD17Z2V0VGV4dENvbG9yOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWNNb2RlbDtyZXR1cm4gdGhpcy5nZXRTaGFsbG93KCJjb2xvciIpfHwoIXQmJmU/ZS5nZXQoeGwpOm51bGwpfSxnZXRGb250OmZ1bmN0aW9uKCl7cmV0dXJuIGFsKHtmb250U3R5bGU6dGhpcy5nZXRTaGFsbG93KCJmb250U3R5bGUiKSxmb250V2VpZ2h0OnRoaXMuZ2V0U2hhbGxvdygiZm9udFdlaWdodCIpLGZvbnRTaXplOnRoaXMuZ2V0U2hhbGxvdygiZm9udFNpemUiKSxmb250RmFtaWx5OnRoaXMuZ2V0U2hhbGxvdygiZm9udEZhbWlseSIpfSx0aGlzLmVjTW9kZWwpfSxnZXRUZXh0UmVjdDpmdW5jdGlvbih0KXtyZXR1cm4gY24odCx0aGlzLmdldEZvbnQoKSx0aGlzLmdldFNoYWxsb3coImFsaWduIiksdGhpcy5nZXRTaGFsbG93KCJ2ZXJ0aWNhbEFsaWduIil8fHRoaXMuZ2V0U2hhbGxvdygiYmFzZWxpbmUiKSx0aGlzLmdldFNoYWxsb3coInBhZGRpbmciKSx0aGlzLmdldFNoYWxsb3coImxpbmVIZWlnaHQiKSx0aGlzLmdldFNoYWxsb3coInJpY2giKSx0aGlzLmdldFNoYWxsb3coInRydW5jYXRlVGV4dCIpKX19LHdsPXJhKFtbImZpbGwiLCJjb2xvciJdLFsic3Ryb2tlIiwiYm9yZGVyQ29sb3IiXSxbImxpbmVXaWR0aCIsImJvcmRlcldpZHRoIl0sWyJvcGFjaXR5Il0sWyJzaGFkb3dCbHVyIl0sWyJzaGFkb3dPZmZzZXRYIl0sWyJzaGFkb3dPZmZzZXRZIl0sWyJzaGFkb3dDb2xvciJdLFsidGV4dFBvc2l0aW9uIl0sWyJ0ZXh0QWxpZ24iXV0pLGJsPXtnZXRJdGVtU3R5bGU6ZnVuY3Rpb24odCxlKXt2YXIgaT13bCh0aGlzLHQsZSksbj10aGlzLmdldEJvcmRlckxpbmVEYXNoKCk7cmV0dXJuIG4mJihpLmxpbmVEYXNoPW4pLGl9LGdldEJvcmRlckxpbmVEYXNoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoImJvcmRlclR5cGUiKTtyZXR1cm4ic29saWQiPT09dHx8bnVsbD09dD9udWxsOiJkYXNoZWQiPT09dD9bNSw1XTpbMSwxXX19LFNsPWIsTWw9Wm8oKTtmdW5jdGlvbiBJbCh0LGUsaSl7dGhpcy5wYXJlbnRNb2RlbD1lLHRoaXMuZWNNb2RlbD1pLHRoaXMub3B0aW9uPXR9ZnVuY3Rpb24gVGwodCxlLGkpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGgmJighZVtuXXx8bnVsbCE9KHQ9dCYmIm9iamVjdCI9PXR5cGVvZiB0P3RbZVtuXV06bnVsbCkpO24rKyk7cmV0dXJuIG51bGw9PXQmJmkmJih0PWkuZ2V0KGUpKSx0fWZ1bmN0aW9uIEFsKHQsZSl7dmFyIGk9TWwodCkuZ2V0UGFyZW50O3JldHVybiBpP2kuY2FsbCh0LGUpOnQucGFyZW50TW9kZWx9SWwucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpJbCxpbml0Om51bGwsbWVyZ2VPcHRpb246ZnVuY3Rpb24odCl7bSh0aGlzLm9wdGlvbix0LCEwKX0sZ2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGw9PXQ/dGhpcy5vcHRpb246VGwodGhpcy5vcHRpb24sdGhpcy5wYXJzZVBhdGgodCksIWUmJkFsKHRoaXMsdCkpfSxnZXRTaGFsbG93OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5vcHRpb24sbj1udWxsPT1pP2k6aVt0XSxvPSFlJiZBbCh0aGlzLHQpO3JldHVybiBudWxsPT1uJiZvJiYobj1vLmdldFNoYWxsb3codCkpLG59LGdldE1vZGVsOmZ1bmN0aW9uKHQsZSl7dmFyIGk7cmV0dXJuIG5ldyBJbChudWxsPT10P3RoaXMub3B0aW9uOlRsKHRoaXMub3B0aW9uLHQ9dGhpcy5wYXJzZVBhdGgodCkpLGU9ZXx8KGk9QWwodGhpcyx0KSkmJmkuZ2V0TW9kZWwodCksdGhpcy5lY01vZGVsKX0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiBudWxsPT10aGlzLm9wdGlvbn0scmVzdG9yZURhdGE6ZnVuY3Rpb24oKXt9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKEQodGhpcy5vcHRpb24pKX0sc2V0UmVhZE9ubHk6ZnVuY3Rpb24odCl7fSxwYXJzZVBhdGg6ZnVuY3Rpb24odCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10LnNwbGl0KCIuIikpLHR9LGN1c3RvbWl6ZUdldFBhcmVudDpmdW5jdGlvbih0KXtNbCh0aGlzKS5nZXRQYXJlbnQ9dH0saXNBbmltYXRpb25FbmFibGVkOmZ1bmN0aW9uKCl7aWYoIXYubm9kZSl7aWYobnVsbCE9dGhpcy5vcHRpb24uYW5pbWF0aW9uKXJldHVybiEhdGhpcy5vcHRpb24uYW5pbWF0aW9uO2lmKHRoaXMucGFyZW50TW9kZWwpcmV0dXJuIHRoaXMucGFyZW50TW9kZWwuaXNBbmltYXRpb25FbmFibGVkKCl9fX0sdGEoSWwpLGlhKElsKSxTbChJbCxsYSksU2woSWwsaGEpLFNsKElsLF9sKSxTbChJbCxibCk7dmFyIERsPTA7ZnVuY3Rpb24gQ2wodCl7cmV0dXJuW3R8fCIiLERsKyssTWF0aC5yYW5kb20oKS50b0ZpeGVkKDUpXS5qb2luKCJfIil9dmFyIExsPTFlLTQ7ZnVuY3Rpb24ga2wodCxlLGksbil7dmFyIG89ZVsxXS1lWzBdLGE9aVsxXS1pWzBdO2lmKDA9PW8pcmV0dXJuIDA9PWE/aVswXTooaVswXStpWzFdKS8yO2lmKG4paWYoMDxvKXtpZih0PD1lWzBdKXJldHVybiBpWzBdO2lmKHQ+PWVbMV0pcmV0dXJuIGlbMV19ZWxzZXtpZih0Pj1lWzBdKXJldHVybiBpWzBdO2lmKHQ8PWVbMV0pcmV0dXJuIGlbMV19ZWxzZXtpZih0PT09ZVswXSlyZXR1cm4gaVswXTtpZih0PT09ZVsxXSlyZXR1cm4gaVsxXX1yZXR1cm4odC1lWzBdKS9vKmEraVswXX1mdW5jdGlvbiBQbCh0LGUpe3N3aXRjaCh0KXtjYXNlImNlbnRlciI6Y2FzZSJtaWRkbGUiOnQ9IjUwJSI7YnJlYWs7Y2FzZSJsZWZ0IjpjYXNlInRvcCI6dD0iMCUiO2JyZWFrO2Nhc2UicmlnaHQiOmNhc2UiYm90dG9tIjp0PSIxMDAlIn1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfSh0KS5tYXRjaCgvJSQvKT9wYXJzZUZsb2F0KHQpLzEwMCplOnBhcnNlRmxvYXQodCk6bnVsbD09dD9OYU46K3R9ZnVuY3Rpb24gTmwodCxlLGkpe3JldHVybiBudWxsPT1lJiYoZT0xMCksZT1NYXRoLm1pbihNYXRoLm1heCgwLGUpLDIwKSx0PSgrdCkudG9GaXhlZChlKSxpP3Q6K3R9ZnVuY3Rpb24gT2wodCl7cmV0dXJuIHQuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LWV9KSx0fWZ1bmN0aW9uIEVsKHQpe2lmKHQ9K3QsaXNOYU4odCkpcmV0dXJuIDA7Zm9yKHZhciBlPTEsaT0wO01hdGgucm91bmQodCplKS9lIT09dDspZSo9MTAsaSsrO3JldHVybiBpfWZ1bmN0aW9uIHpsKHQpe3ZhciBlPXQudG9TdHJpbmcoKSxpPWUuaW5kZXhPZigiZSIpO2lmKDA8aSl7dmFyIG49K2Uuc2xpY2UoaSsxKTtyZXR1cm4gbjwwPy1uOjB9dmFyIG89ZS5pbmRleE9mKCIuIik7cmV0dXJuIG88MD8wOmUubGVuZ3RoLTEtb31mdW5jdGlvbiBSbCh0LGUpe3ZhciBpPU1hdGgubG9nLG49TWF0aC5MTjEwLG89TWF0aC5mbG9vcihpKHRbMV0tdFswXSkvbiksYT1NYXRoLnJvdW5kKGkoTWF0aC5hYnMoZVsxXS1lWzBdKSkvbikscj1NYXRoLm1pbihNYXRoLm1heCgtbythLDApLDIwKTtyZXR1cm4gaXNGaW5pdGUocik/cjoyMH1mdW5jdGlvbiBCbCh0LGUsaSl7aWYoIXRbZV0pcmV0dXJuIDA7dmFyIG49Uyh0LGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrKGlzTmFOKGUpPzA6ZSl9LDApO2lmKDA9PT1uKXJldHVybiAwO2Zvcih2YXIgbz1NYXRoLnBvdygxMCxpKSxhPU4odCxmdW5jdGlvbih0KXtyZXR1cm4oaXNOYU4odCk/MDp0KS9uKm8qMTAwfSkscj0xMDAqbyxzPU4oYSxmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5mbG9vcih0KX0pLGw9UyhzLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZX0sMCksdT1OKGEsZnVuY3Rpb24odCxlKXtyZXR1cm4gdC1zW2VdfSk7bDxyOyl7Zm9yKHZhciBoPU51bWJlci5ORUdBVElWRV9JTkZJTklUWSxjPW51bGwsZD0wLGY9dS5sZW5ndGg7ZDxmOysrZCl1W2RdPmgmJihoPXVbZF0sYz1kKTsrK3NbY10sdVtjXT0wLCsrbH1yZXR1cm4gc1tlXS9vfXZhciBWbD05MDA3MTk5MjU0NzQwOTkxO2Z1bmN0aW9uIEdsKHQpe3ZhciBlPTIqTWF0aC5QSTtyZXR1cm4odCVlK2UpJWV9ZnVuY3Rpb24gRmwodCl7cmV0dXJuLUxsPHQmJnQ8TGx9dmFyIFdsPS9eKD86KFxkezR9KSg/OlstXC9dKFxkezEsMn0pKD86Wy1cL10oXGR7MSwyfSkoPzpbVCBdKFxkezEsMn0pKD86OihcZFxkKSg/OjooXGRcZCkoPzpbLixdKFxkKykpPyk/KT8oWnxbXCtcLV1cZFxkOj9cZFxkKT8pPyk/KT8pPyQvO2Z1bmN0aW9uIEhsKHQpe2lmKHQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiB0O2lmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gbnVsbD09dD9uZXcgRGF0ZShOYU4pOm5ldyBEYXRlKE1hdGgucm91bmQodCkpO3ZhciBlPVdsLmV4ZWModCk7aWYoIWUpcmV0dXJuIG5ldyBEYXRlKE5hTik7aWYoZVs4XSl7dmFyIGk9K2VbNF18fDA7cmV0dXJuIloiIT09ZVs4XS50b1VwcGVyQ2FzZSgpJiYoaS09ZVs4XS5zbGljZSgwLDMpKSxuZXcgRGF0ZShEYXRlLlVUQygrZVsxXSwrKGVbMl18fDEpLTEsK2VbM118fDEsaSwrKGVbNV18fDApLCtlWzZdfHwwLCtlWzddfHwwKSl9cmV0dXJuIG5ldyBEYXRlKCtlWzFdLCsoZVsyXXx8MSktMSwrZVszXXx8MSwrZVs0XXx8MCwrKGVbNV18fDApLCtlWzZdfHwwLCtlWzddfHwwKX1mdW5jdGlvbiBabCh0KXtyZXR1cm4gTWF0aC5wb3coMTAsVWwodCkpfWZ1bmN0aW9uIFVsKHQpe2lmKDA9PT10KXJldHVybiAwO3ZhciBlPU1hdGguZmxvb3IoTWF0aC5sb2codCkvTWF0aC5MTjEwKTtyZXR1cm4gMTA8PXQvTWF0aC5wb3coMTAsZSkmJmUrKyxlfWZ1bmN0aW9uIFhsKHQsZSl7dmFyIGk9VWwodCksbj1NYXRoLnBvdygxMCxpKSxvPXQvbjtyZXR1cm4gdD0oZT9vPDEuNT8xOm88Mi41PzI6bzw0PzM6bzw3PzU6MTA6bzwxPzE6bzwyPzI6bzwzPzM6bzw1PzU6MTApKm4sLTIwPD1pPyt0LnRvRml4ZWQoaTwwPy1pOjApOnR9ZnVuY3Rpb24gWWwodCl7dC5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uIHQoZSxpLG4pe3JldHVybiBlLmludGVydmFsW25dPGkuaW50ZXJ2YWxbbl18fGUuaW50ZXJ2YWxbbl09PT1pLmludGVydmFsW25dJiYoZS5jbG9zZVtuXS1pLmNsb3NlW25dPT0obj8tMToxKXx8IW4mJnQoZSxpLDEpKX0odCxlLDApPy0xOjF9KTtmb3IodmFyIGU9LTEvMCxpPTEsbj0wO248dC5sZW5ndGg7KXtmb3IodmFyIG89dFtuXS5pbnRlcnZhbCxhPXRbbl0uY2xvc2Uscj0wO3I8MjtyKyspb1tyXTw9ZSYmKG9bcl09ZSxhW3JdPXI/MToxLWkpLGU9b1tyXSxpPWFbcl07b1swXT09PW9bMV0mJmFbMF0qYVsxXSE9MT90LnNwbGljZShuLDEpOm4rK31yZXR1cm4gdH1mdW5jdGlvbiBqbCh0KXtyZXR1cm4gMDw9dC1wYXJzZUZsb2F0KHQpfXZhciBxbD0oT2JqZWN0LmZyZWV6ZXx8T2JqZWN0KSh7bGluZWFyTWFwOmtsLHBhcnNlUGVyY2VudDpQbCxyb3VuZDpObCxhc2M6T2wsZ2V0UHJlY2lzaW9uOkVsLGdldFByZWNpc2lvblNhZmU6emwsZ2V0UGl4ZWxQcmVjaXNpb246UmwsZ2V0UGVyY2VudFdpdGhQcmVjaXNpb246QmwsTUFYX1NBRkVfSU5URUdFUjpWbCxyZW1SYWRpYW46R2wsaXNSYWRpYW5Bcm91bmRaZXJvOkZsLHBhcnNlRGF0ZTpIbCxxdWFudGl0eTpabCxxdWFudGl0eUV4cG9uZW50OlVsLG5pY2U6WGwscXVhbnRpbGU6ZnVuY3Rpb24odCxlKXt2YXIgaT0odC5sZW5ndGgtMSkqZSsxLG49TWF0aC5mbG9vcihpKSxvPSt0W24tMV0sYT1pLW47cmV0dXJuIGE/bythKih0W25dLW8pOm99LHJlZm9ybUludGVydmFsczpZbCxpc051bWVyaWM6amx9KTtmdW5jdGlvbiBLbCh0KXtyZXR1cm4gaXNOYU4odCk/Ii0iOih0PSh0KyIiKS5zcGxpdCgiLiIpKVswXS5yZXBsYWNlKC8oXGR7MSwzfSkoPz0oPzpcZHszfSkrKD8hXGQpKS9nLCIkMSwiKSsoMTx0Lmxlbmd0aD8iLiIrdFsxXToiIil9ZnVuY3Rpb24gJGwodCxlKXtyZXR1cm4gdD0odHx8IiIpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLSguKS9nLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKX0pLGUmJnQmJih0PXQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKSksdH12YXIgSmw9WCxRbD0vKFsmPD4iJ10pL2csdHU9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyJ9O2Z1bmN0aW9uIGV1KHQpe3JldHVybiBudWxsPT10PyIiOih0KyIiKS5yZXBsYWNlKFFsLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR1W2VdfSl9ZnVuY3Rpb24gaXUodCxlKXtyZXR1cm4ieyIrdCsobnVsbD09ZT8iIjplKSsifSJ9dmFyIG51PVsiYSIsImIiLCJjIiwiZCIsImUiLCJmIiwiZyJdO2Z1bmN0aW9uIG91KHQsZSxpKXtrKGUpfHwoZT1bZV0pO3ZhciBuPWUubGVuZ3RoO2lmKCFuKXJldHVybiIiO2Zvcih2YXIgbz1lWzBdLiR2YXJzfHxbXSxhPTA7YTxvLmxlbmd0aDthKyspe3ZhciByPW51W2FdO3Q9dC5yZXBsYWNlKGl1KHIpLGl1KHIsMCkpfWZvcih2YXIgcz0wO3M8bjtzKyspZm9yKHZhciBsPTA7bDxvLmxlbmd0aDtsKyspe3ZhciB1PWVbc11bb1tsXV07dD10LnJlcGxhY2UoaXUobnVbbF0scyksaT9ldSh1KTp1KX1yZXR1cm4gdH1mdW5jdGlvbiBhdShpLHQsbil7cmV0dXJuIEUodCxmdW5jdGlvbih0LGUpe2k9aS5yZXBsYWNlKCJ7IitlKyJ9IixuP2V1KHQpOnQpfSksaX1mdW5jdGlvbiBydSh0LGUpe3ZhciBpPSh0PXoodCk/e2NvbG9yOnQsZXh0cmFDc3NUZXh0OmV9OnR8fHt9KS5jb2xvcixuPXQudHlwZSxvPShlPXQuZXh0cmFDc3NUZXh0LHQucmVuZGVyTW9kZXx8Imh0bWwiKSxhPXQubWFya2VySWR8fCJYIjtyZXR1cm4gaT8iaHRtbCI9PT1vPyJzdWJJdGVtIj09PW4/JzxzcGFuIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7bWFyZ2luLXJpZ2h0OjhweDttYXJnaW4tbGVmdDozcHg7Ym9yZGVyLXJhZGl1czo0cHg7d2lkdGg6NHB4O2hlaWdodDo0cHg7YmFja2dyb3VuZC1jb2xvcjonK2V1KGkpKyI7IisoZXx8IiIpKyciPjwvc3Bhbj4nOic8c3BhbiBzdHlsZT0iZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLXJpZ2h0OjVweDtib3JkZXItcmFkaXVzOjEwcHg7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLWNvbG9yOicrZXUoaSkrIjsiKyhlfHwiIikrJyI+PC9zcGFuPic6e3JlbmRlck1vZGU6byxjb250ZW50OiJ7bWFya2VyIithKyJ8fSAgIixzdHlsZTp7Y29sb3I6aX19OiIifWZ1bmN0aW9uIHN1KHQsZSl7cmV0dXJuIjAwMDAiLnN1YnN0cigwLGUtKHQrPSIiKS5sZW5ndGgpK3R9ZnVuY3Rpb24gbHUodCxlLGkpeyJ3ZWVrIiE9PXQmJiJtb250aCIhPT10JiYicXVhcnRlciIhPT10JiYiaGFsZi15ZWFyIiE9PXQmJiJ5ZWFyIiE9PXR8fCh0PSJNTS1kZFxueXl5eSIpO3ZhciBuPUhsKGUpLG89aT8iVVRDIjoiIixhPW5bImdldCIrbysiRnVsbFllYXIiXSgpLHI9blsiZ2V0IitvKyJNb250aCJdKCkrMSxzPW5bImdldCIrbysiRGF0ZSJdKCksbD1uWyJnZXQiK28rIkhvdXJzIl0oKSx1PW5bImdldCIrbysiTWludXRlcyJdKCksaD1uWyJnZXQiK28rIlNlY29uZHMiXSgpLGM9blsiZ2V0IitvKyJNaWxsaXNlY29uZHMiXSgpO3JldHVybiB0PXQucmVwbGFjZSgiTU0iLHN1KHIsMikpLnJlcGxhY2UoIk0iLHIpLnJlcGxhY2UoInl5eXkiLGEpLnJlcGxhY2UoInl5IixhJTEwMCkucmVwbGFjZSgiZGQiLHN1KHMsMikpLnJlcGxhY2UoImQiLHMpLnJlcGxhY2UoImhoIixzdShsLDIpKS5yZXBsYWNlKCJoIixsKS5yZXBsYWNlKCJtbSIsc3UodSwyKSkucmVwbGFjZSgibSIsdSkucmVwbGFjZSgic3MiLHN1KGgsMikpLnJlcGxhY2UoInMiLGgpLnJlcGxhY2UoIlNTUyIsc3UoYywzKSl9ZnVuY3Rpb24gdXUodCl7cmV0dXJuIHQ/dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnN1YnN0cigxKTp0fXZhciBodT1nbjt2YXIgY3U9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoe2FkZENvbW1hczpLbCx0b0NhbWVsQ2FzZTokbCxub3JtYWxpemVDc3NBcnJheTpKbCxlbmNvZGVIVE1MOmV1LGZvcm1hdFRwbDpvdSxmb3JtYXRUcGxTaW1wbGU6YXUsZ2V0VG9vbHRpcE1hcmtlcjpydSxmb3JtYXRUaW1lOmx1LGNhcGl0YWxGaXJzdDp1dSx0cnVuY2F0ZVRleHQ6aHUsZ2V0VGV4dEJvdW5kaW5nUmVjdDpmdW5jdGlvbih0KXtyZXR1cm4gY24odC50ZXh0LHQuZm9udCx0LnRleHRBbGlnbix0LnRleHRWZXJ0aWNhbEFsaWduLHQudGV4dFBhZGRpbmcsdC50ZXh0TGluZUhlaWdodCx0LnJpY2gsdC50cnVuY2F0ZSl9LGdldFRleHRSZWN0OmZ1bmN0aW9uKHQsZSxpLG4sbyxhLHIscyl7cmV0dXJuIGNuKHQsZSxpLG4sbyxzLGEscil9fSksZHU9RSxmdT1bImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsIndpZHRoIiwiaGVpZ2h0Il0scHU9W1sid2lkdGgiLCJsZWZ0IiwicmlnaHQiXSxbImhlaWdodCIsInRvcCIsImJvdHRvbSJdXTtmdW5jdGlvbiBndShoLGMsZCxmLHApe3ZhciBnPTAsbT0wO251bGw9PWYmJihmPTEvMCksbnVsbD09cCYmKHA9MS8wKTt2YXIgdj0wO2MuZWFjaENoaWxkKGZ1bmN0aW9uKHQsZSl7dmFyIGksbixvPXQucG9zaXRpb24sYT10LmdldEJvdW5kaW5nUmVjdCgpLHI9Yy5jaGlsZEF0KGUrMSkscz1yJiZyLmdldEJvdW5kaW5nUmVjdCgpO2lmKCJob3Jpem9udGFsIj09PWgpe3ZhciBsPWEud2lkdGgrKHM/LXMueCthLng6MCk7dj1mPChpPWcrbCl8fHQubmV3bGluZT8oZz0wLGk9bCxtKz12K2QsYS5oZWlnaHQpOk1hdGgubWF4KHYsYS5oZWlnaHQpfWVsc2V7dmFyIHU9YS5oZWlnaHQrKHM/LXMueSthLnk6MCk7dj1wPChuPW0rdSl8fHQubmV3bGluZT8oZys9ditkLG09MCxuPXUsYS53aWR0aCk6TWF0aC5tYXgodixhLndpZHRoKX10Lm5ld2xpbmV8fChvWzBdPWcsb1sxXT1tLCJob3Jpem9udGFsIj09PWg/Zz1pK2Q6bT1uK2QpfSl9dmFyIG11PWd1O1QoZ3UsInZlcnRpY2FsIiksVChndSwiaG9yaXpvbnRhbCIpO2Z1bmN0aW9uIHZ1KHQsZSxpKXtpPUpsKGl8fDApO3ZhciBuPWUud2lkdGgsbz1lLmhlaWdodCxhPVBsKHQubGVmdCxuKSxyPVBsKHQudG9wLG8pLHM9UGwodC5yaWdodCxuKSxsPVBsKHQuYm90dG9tLG8pLHU9UGwodC53aWR0aCxuKSxoPVBsKHQuaGVpZ2h0LG8pLGM9aVsyXStpWzBdLGQ9aVsxXStpWzNdLGY9dC5hc3BlY3Q7c3dpdGNoKGlzTmFOKHUpJiYodT1uLXMtZC1hKSxpc05hTihoKSYmKGg9by1sLWMtciksbnVsbCE9ZiYmKGlzTmFOKHUpJiZpc05hTihoKSYmKG4vbzxmP3U9LjgqbjpoPS44Km8pLGlzTmFOKHUpJiYodT1mKmgpLGlzTmFOKGgpJiYoaD11L2YpKSxpc05hTihhKSYmKGE9bi1zLXUtZCksaXNOYU4ocikmJihyPW8tbC1oLWMpLHQubGVmdHx8dC5yaWdodCl7Y2FzZSJjZW50ZXIiOmE9bi8yLXUvMi1pWzNdO2JyZWFrO2Nhc2UicmlnaHQiOmE9bi11LWR9c3dpdGNoKHQudG9wfHx0LmJvdHRvbSl7Y2FzZSJtaWRkbGUiOmNhc2UiY2VudGVyIjpyPW8vMi1oLzItaVswXTticmVhaztjYXNlImJvdHRvbSI6cj1vLWgtY31hPWF8fDAscj1yfHwwLGlzTmFOKHUpJiYodT1uLWQtYS0oc3x8MCkpLGlzTmFOKGgpJiYoaD1vLWMtci0obHx8MCkpO3ZhciBwPW5ldyBNaShhK2lbM10scitpWzBdLHUsaCk7cmV0dXJuIHAubWFyZ2luPWkscH1mdW5jdGlvbiB5dSh0LGUsaSxuLG8pe3ZhciBhPSFvfHwhby5odnx8by5odlswXSxyPSFvfHwhby5odnx8by5odlsxXSxzPW8mJm8uYm91bmRpbmdNb2RlfHwiYWxsIjtpZihhfHxyKXt2YXIgbDtpZigicmF3Ij09PXMpbD0iZ3JvdXAiPT09dC50eXBlP25ldyBNaSgwLDAsK2Uud2lkdGh8fDAsK2UuaGVpZ2h0fHwwKTp0LmdldEJvdW5kaW5nUmVjdCgpO2Vsc2UgaWYobD10LmdldEJvdW5kaW5nUmVjdCgpLHQubmVlZExvY2FsVHJhbnNmb3JtKCkpe3ZhciB1PXQuZ2V0TG9jYWxUcmFuc2Zvcm0oKTsobD1sLmNsb25lKCkpLmFwcGx5VHJhbnNmb3JtKHUpfWU9dnUoQyh7d2lkdGg6bC53aWR0aCxoZWlnaHQ6bC5oZWlnaHR9LGUpLGksbik7dmFyIGg9dC5wb3NpdGlvbixjPWE/ZS54LWwueDowLGQ9cj9lLnktbC55OjA7dC5hdHRyKCJwb3NpdGlvbiIsInJhdyI9PT1zP1tjLGRdOltoWzBdK2MsaFsxXStkXSl9fWZ1bmN0aW9uIHh1KGwsdSx0KXtSKHQpfHwodD17fSk7dmFyIGg9dC5pZ25vcmVTaXplO2soaCl8fChoPVtoLGhdKTt2YXIgZT1uKHB1WzBdLDApLGk9bihwdVsxXSwxKTtmdW5jdGlvbiBuKHQsZSl7dmFyIGk9e30sbj0wLG89e30sYT0wO2lmKGR1KHQsZnVuY3Rpb24odCl7b1t0XT1sW3RdfSksZHUodCxmdW5jdGlvbih0KXtjKHUsdCkmJihpW3RdPW9bdF09dVt0XSksZChpLHQpJiZuKyssZChvLHQpJiZhKyt9KSxoW2VdKXJldHVybiBkKHUsdFsxXSk/b1t0WzJdXT1udWxsOmQodSx0WzJdKSYmKG9bdFsxXV09bnVsbCksbztpZigyIT09YSYmbil7aWYoMjw9bilyZXR1cm4gaTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIHM9dFtyXTtpZighYyhpLHMpJiZjKGwscykpe2lbc109bFtzXTticmVha319cmV0dXJuIGl9cmV0dXJuIG99ZnVuY3Rpb24gYyh0LGUpe3JldHVybiB0Lmhhc093blByb3BlcnR5KGUpfWZ1bmN0aW9uIGQodCxlKXtyZXR1cm4gbnVsbCE9dFtlXSYmImF1dG8iIT09dFtlXX1mdW5jdGlvbiBvKHQsZSxpKXtkdSh0LGZ1bmN0aW9uKHQpe2VbdF09aVt0XX0pfW8ocHVbMF0sbCxlKSxvKHB1WzFdLGwsaSl9ZnVuY3Rpb24gX3UodCl7cmV0dXJuIHd1KHt9LHQpfWZ1bmN0aW9uIHd1KGUsaSl7cmV0dXJuIGkmJmUmJmR1KGZ1LGZ1bmN0aW9uKHQpe2kuaGFzT3duUHJvcGVydHkodCkmJihlW3RdPWlbdF0pfSksZX12YXIgYnUsU3UsTXUsSXU9Wm8oKSxUdT1JbC5leHRlbmQoe3R5cGU6ImNvbXBvbmVudCIsaWQ6IiIsbmFtZToiIixtYWluVHlwZToiIixzdWJUeXBlOiIiLGNvbXBvbmVudEluZGV4OjAsZGVmYXVsdE9wdGlvbjpudWxsLGVjTW9kZWw6bnVsbCxkZXBlbmRlbnRNb2RlbHM6W10sdWlkOm51bGwsbGF5b3V0TW9kZTpudWxsLCRjb25zdHJ1Y3RvcjpmdW5jdGlvbih0LGUsaSxuKXtJbC5jYWxsKHRoaXMsdCxlLGksbiksdGhpcy51aWQ9Q2woImVjX2NwdF9tb2RlbCIpfSxpbml0OmZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMubWVyZ2VEZWZhdWx0QW5kVGhlbWUodCxpKX0sbWVyZ2VEZWZhdWx0QW5kVGhlbWU6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmxheW91dE1vZGUsbj1pP191KHQpOnt9O20odCxlLmdldFRoZW1lKCkuZ2V0KHRoaXMubWFpblR5cGUpKSxtKHQsdGhpcy5nZXREZWZhdWx0T3B0aW9uKCkpLGkmJnh1KHQsbixpKX0sbWVyZ2VPcHRpb246ZnVuY3Rpb24odCxlKXttKHRoaXMub3B0aW9uLHQsITApO3ZhciBpPXRoaXMubGF5b3V0TW9kZTtpJiZ4dSh0aGlzLm9wdGlvbix0LGkpfSxvcHRpb25VcGRhdGVkOmZ1bmN0aW9uKHQsZSl7fSxnZXREZWZhdWx0T3B0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9SXUodGhpcyk7aWYoIXQuZGVmYXVsdE9wdGlvbil7Zm9yKHZhciBlPVtdLGk9dGhpcy5jb25zdHJ1Y3RvcjtpOyl7dmFyIG49aS5wcm90b3R5cGUuZGVmYXVsdE9wdGlvbjtuJiZlLnB1c2gobiksaT1pLnN1cGVyQ2xhc3N9Zm9yKHZhciBvPXt9LGE9ZS5sZW5ndGgtMTswPD1hO2EtLSlvPW0obyxlW2FdLCEwKTt0LmRlZmF1bHRPcHRpb249b31yZXR1cm4gdC5kZWZhdWx0T3B0aW9ufSxnZXRSZWZlcnJpbmdDb21wb25lbnRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVjTW9kZWwucXVlcnlDb21wb25lbnRzKHttYWluVHlwZTp0LGluZGV4OnRoaXMuZ2V0KHQrIkluZGV4IiwhMCksaWQ6dGhpcy5nZXQodCsiSWQiLCEwKX0pfX0pO2Z1bmN0aW9uIEF1KHQsZSl7cmV0dXJuIHRbZV18fCh0W2VdPXtwcmVkZWNlc3NvcjpbXSxzdWNjZXNzb3I6W119KSx0W2VdfWFhKFR1LHtyZWdpc3RlcldoZW5FeHRlbmQ6ITB9KSxTdT17fSwoYnU9VHUpLnJlZ2lzdGVyU3ViVHlwZURlZmF1bHRlcj1mdW5jdGlvbih0LGUpe3Q9UW8odCksU3VbdC5tYWluXT1lfSxidS5kZXRlcm1pbmVTdWJUeXBlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS50eXBlO2lmKCFpKXt2YXIgbj1Rbyh0KS5tYWluO2J1Lmhhc1N1YlR5cGVzKHQpJiZTdVtuXSYmKGk9U3Vbbl0oZSkpfXJldHVybiBpfSxNdT1mdW5jdGlvbih0KXt2YXIgZT1bXTtFKFR1LmdldENsYXNzZXNCeU1haW5UeXBlKHQpLGZ1bmN0aW9uKHQpe2U9ZS5jb25jYXQodC5wcm90b3R5cGUuZGVwZW5kZW5jaWVzfHxbXSl9KSxlPU4oZSxmdW5jdGlvbih0KXtyZXR1cm4gUW8odCkubWFpbn0pLCJkYXRhc2V0IiE9PXQmJl8oZSwiZGF0YXNldCIpPD0wJiZlLnVuc2hpZnQoImRhdGFzZXQiKTtyZXR1cm4gZX0sVHUudG9wb2xvZ2ljYWxUcmF2ZWw9ZnVuY3Rpb24odCxlLGksbil7aWYodC5sZW5ndGgpe3ZhciBvPWZ1bmN0aW9uKGUpe3ZhciBvPXt9LGE9W107cmV0dXJuIEUoZSxmdW5jdGlvbihpKXt2YXIgbj1BdShvLGkpLHQ9ZnVuY3Rpb24odCxlKXt2YXIgaT1bXTtyZXR1cm4gRSh0LGZ1bmN0aW9uKHQpezA8PV8oZSx0KSYmaS5wdXNoKHQpfSksaX0obi5vcmlnaW5hbERlcHM9TXUoaSksZSk7bi5lbnRyeUNvdW50PXQubGVuZ3RoLDA9PT1uLmVudHJ5Q291bnQmJmEucHVzaChpKSxFKHQsZnVuY3Rpb24odCl7XyhuLnByZWRlY2Vzc29yLHQpPDAmJm4ucHJlZGVjZXNzb3IucHVzaCh0KTt2YXIgZT1BdShvLHQpO18oZS5zdWNjZXNzb3IsdCk8MCYmZS5zdWNjZXNzb3IucHVzaChpKX0pfSkse2dyYXBoOm8sbm9FbnRyeUxpc3Q6YX19KGUpLGE9by5ncmFwaCxyPW8ubm9FbnRyeUxpc3Qscz17fTtmb3IoRSh0LGZ1bmN0aW9uKHQpe3NbdF09ITB9KTtyLmxlbmd0aDspe3ZhciBsPXIucG9wKCksdT1hW2xdLGg9ISFzW2xdO2gmJihpLmNhbGwobixsLHUub3JpZ2luYWxEZXBzLnNsaWNlKCkpLGRlbGV0ZSBzW2xdKSxFKHUuc3VjY2Vzc29yLGg/ZDpjKX1FKHMsZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoIkNpcmNsZSBkZXBlbmRlbmN5IG1heSBleGlzdHMiKX0pfWZ1bmN0aW9uIGModCl7YVt0XS5lbnRyeUNvdW50LS0sMD09PWFbdF0uZW50cnlDb3VudCYmci5wdXNoKHQpfWZ1bmN0aW9uIGQodCl7c1t0XT0hMCxjKHQpfX0sYihUdSx7Z2V0Qm94TGF5b3V0UGFyYW1zOmZ1bmN0aW9uKCl7cmV0dXJue2xlZnQ6dGhpcy5nZXQoImxlZnQiKSx0b3A6dGhpcy5nZXQoInRvcCIpLHJpZ2h0OnRoaXMuZ2V0KCJyaWdodCIpLGJvdHRvbTp0aGlzLmdldCgiYm90dG9tIiksd2lkdGg6dGhpcy5nZXQoIndpZHRoIiksaGVpZ2h0OnRoaXMuZ2V0KCJoZWlnaHQiKX19fSk7dmFyIER1PSIiOyJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYoRHU9bmF2aWdhdG9yLnBsYXRmb3JtfHwiIik7dmFyIEN1PXtjb2xvcjpbIiNjMjM1MzEiLCIjMmY0NTU0IiwiIzYxYTBhOCIsIiNkNDgyNjUiLCIjOTFjN2FlIiwiIzc0OWY4MyIsIiNjYTg2MjIiLCIjYmRhMjlhIiwiIzZlNzA3NCIsIiM1NDY1NzAiLCIjYzRjY2QzIl0sZ3JhZGllbnRDb2xvcjpbIiNmNmVmYTYiLCIjZDg4MjczIiwiI2JmNDQ0YyJdLHRleHRTdHlsZTp7Zm9udEZhbWlseTpEdS5tYXRjaCgvXldpbi8pPyJNaWNyb3NvZnQgWWFIZWkiOiJzYW5zLXNlcmlmIixmb250U2l6ZToxMixmb250U3R5bGU6Im5vcm1hbCIsZm9udFdlaWdodDoibm9ybWFsIn0sYmxlbmRNb2RlOm51bGwsYW5pbWF0aW9uOiJhdXRvIixhbmltYXRpb25EdXJhdGlvbjoxZTMsYW5pbWF0aW9uRHVyYXRpb25VcGRhdGU6MzAwLGFuaW1hdGlvbkVhc2luZzoiZXhwb25lbnRpYWxPdXQiLGFuaW1hdGlvbkVhc2luZ1VwZGF0ZToiY3ViaWNPdXQiLGFuaW1hdGlvblRocmVzaG9sZDoyZTMscHJvZ3Jlc3NpdmVUaHJlc2hvbGQ6M2UzLHByb2dyZXNzaXZlOjQwMCxob3ZlckxheWVyVGhyZXNob2xkOjNlMyx1c2VVVEM6ITF9LEx1PVpvKCk7dmFyIGt1PXtjbGVhckNvbG9yUGFsZXR0ZTpmdW5jdGlvbigpe0x1KHRoaXMpLmNvbG9ySWR4PTAsTHUodGhpcykuY29sb3JOYW1lTWFwPXt9fSxnZXRDb2xvckZyb21QYWxldHRlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1MdShlPWV8fHRoaXMpLG89bi5jb2xvcklkeHx8MCxhPW4uY29sb3JOYW1lTWFwPW4uY29sb3JOYW1lTWFwfHx7fTtpZihhLmhhc093blByb3BlcnR5KHQpKXJldHVybiBhW3RdO3ZhciByPUVvKHRoaXMuZ2V0KCJjb2xvciIsITApKSxzPXRoaXMuZ2V0KCJjb2xvckxheWVyIiwhMCksbD1udWxsIT1pJiZzP2Z1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXQubGVuZ3RoLG49MDtuPGk7bisrKWlmKHRbbl0ubGVuZ3RoPmUpcmV0dXJuIHRbbl07cmV0dXJuIHRbaS0xXX0ocyxpKTpyO2lmKChsPWx8fHIpJiZsLmxlbmd0aCl7dmFyIHU9bFtvXTtyZXR1cm4gdCYmKGFbdF09dSksbi5jb2xvcklkeD0obysxKSVsLmxlbmd0aCx1fX19LFB1PSJvcmlnaW5hbCIsTnU9ImFycmF5Um93cyIsT3U9Im9iamVjdFJvd3MiLEV1PSJrZXllZENvbHVtbnMiLHp1PSJ1bmtub3duIixSdT0idHlwZWRBcnJheSIsQnU9ImNvbHVtbiIsVnU9InJvdyI7ZnVuY3Rpb24gR3UodCl7dGhpcy5mcm9tRGF0YXNldD10LmZyb21EYXRhc2V0LHRoaXMuZGF0YT10LmRhdGF8fCh0LnNvdXJjZUZvcm1hdD09PUV1P3t9OltdKSx0aGlzLnNvdXJjZUZvcm1hdD10LnNvdXJjZUZvcm1hdHx8enUsdGhpcy5zZXJpZXNMYXlvdXRCeT10LnNlcmllc0xheW91dEJ5fHxCdSx0aGlzLmRpbWVuc2lvbnNEZWZpbmU9dC5kaW1lbnNpb25zRGVmaW5lLHRoaXMuZW5jb2RlRGVmaW5lPXQuZW5jb2RlRGVmaW5lJiZRKHQuZW5jb2RlRGVmaW5lKSx0aGlzLnN0YXJ0SW5kZXg9dC5zdGFydEluZGV4fHwwLHRoaXMuZGltZW5zaW9uc0RldGVjdENvdW50PXQuZGltZW5zaW9uc0RldGVjdENvdW50fUd1LnNlcmllc0RhdGFUb1NvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IEd1KHtkYXRhOnQsc291cmNlRm9ybWF0OlYodCk/UnU6UHUsZnJvbURhdGFzZXQ6ITF9KX0saWEoR3UpO3ZhciBGdT17TXVzdDoxLE1pZ2h0OjIsTm90OjN9LFd1PVpvKCk7ZnVuY3Rpb24gSHUodCl7dmFyIGU9dC5vcHRpb24saT1lLmRhdGEsbj1WKGkpP1J1OlB1LG89ITEsYT1lLnNlcmllc0xheW91dEJ5LHI9ZS5zb3VyY2VIZWFkZXIscz1lLmRpbWVuc2lvbnMsbD1qdSh0KTtpZihsKXt2YXIgdT1sLm9wdGlvbjtpPXUuc291cmNlLG49V3UobCkuc291cmNlRm9ybWF0LG89ITAsYT1hfHx1LnNlcmllc0xheW91dEJ5LG51bGw9PXImJihyPXUuc291cmNlSGVhZGVyKSxzPXN8fHUuZGltZW5zaW9uc312YXIgaD1mdW5jdGlvbih0LGUsaSxuLG8pe2lmKCF0KXJldHVybntkaW1lbnNpb25zRGVmaW5lOlp1KG8pfTt2YXIgYSxyO2lmKGU9PT1OdSkiYXV0byI9PT1ufHxudWxsPT1uP1V1KGZ1bmN0aW9uKHQpe251bGwhPXQmJiItIiE9PXQmJih6KHQpP251bGw9PXImJihyPTEpOnI9MCl9LGksdCwxMCk6cj1uPzE6MCxvfHwxIT09cnx8KG89W10sVXUoZnVuY3Rpb24odCxlKXtvW2VdPW51bGwhPXQ/dDoiIn0saSx0KSksYT1vP28ubGVuZ3RoOmk9PT1WdT90Lmxlbmd0aDp0WzBdP3RbMF0ubGVuZ3RoOm51bGw7ZWxzZSBpZihlPT09T3Upbz1vfHxmdW5jdGlvbih0KXt2YXIgZSxpPTA7Zm9yKDtpPHQubGVuZ3RoJiYhKGU9dFtpKytdKTspO2lmKGUpe3ZhciBuPVtdO3JldHVybiBFKGUsZnVuY3Rpb24odCxlKXtuLnB1c2goZSl9KSxufX0odCk7ZWxzZSBpZihlPT09RXUpb3x8KG89W10sRSh0LGZ1bmN0aW9uKHQsZSl7by5wdXNoKGUpfSkpO2Vsc2UgaWYoZT09PVB1KXt2YXIgcz1Cbyh0WzBdKTthPWsocykmJnMubGVuZ3RofHwxfXJldHVybntzdGFydEluZGV4OnIsZGltZW5zaW9uc0RlZmluZTpadShvKSxkaW1lbnNpb25zRGV0ZWN0Q291bnQ6YX19KGksbixhLHIscyk7V3UodCkuc291cmNlPW5ldyBHdSh7ZGF0YTppLGZyb21EYXRhc2V0Om8sc2VyaWVzTGF5b3V0Qnk6YSxzb3VyY2VGb3JtYXQ6bixkaW1lbnNpb25zRGVmaW5lOmguZGltZW5zaW9uc0RlZmluZSxzdGFydEluZGV4Omguc3RhcnRJbmRleCxkaW1lbnNpb25zRGV0ZWN0Q291bnQ6aC5kaW1lbnNpb25zRGV0ZWN0Q291bnQsZW5jb2RlRGVmaW5lOmUuZW5jb2RlfSl9ZnVuY3Rpb24gWnUodCl7aWYodCl7dmFyIG49USgpO3JldHVybiBOKHQsZnVuY3Rpb24odCxlKXtpZihudWxsPT0odD1MKHt9LFIodCk/dDp7bmFtZTp0fSkpLm5hbWUpcmV0dXJuIHQ7dC5uYW1lKz0iIixudWxsPT10LmRpc3BsYXlOYW1lJiYodC5kaXNwbGF5TmFtZT10Lm5hbWUpO3ZhciBpPW4uZ2V0KHQubmFtZSk7cmV0dXJuIGk/dC5uYW1lKz0iLSIraS5jb3VudCsrOm4uc2V0KHQubmFtZSx7Y291bnQ6MX0pLHR9KX19ZnVuY3Rpb24gVXUodCxlLGksbil7aWYobnVsbD09biYmKG49MS8wKSxlPT09VnUpZm9yKHZhciBvPTA7bzxpLmxlbmd0aCYmbzxuO28rKyl0KGlbb10/aVtvXVswXTpudWxsLG8pO2Vsc2V7dmFyIGE9aVswXXx8W107Zm9yKG89MDtvPGEubGVuZ3RoJiZvPG47bysrKXQoYVtvXSxvKX19ZnVuY3Rpb24gWHUoaSx0LGUpe3ZhciBhPXt9LG49anUodCk7aWYoIW58fCFpKXJldHVybiBhO3ZhciByLG8scz1bXSxsPVtdLHU9dC5lY01vZGVsLGg9V3UodSkuZGF0YXNldE1hcCxjPW4udWlkKyJfIitlLnNlcmllc0xheW91dEJ5O0UoaT1pLnNsaWNlKCksZnVuY3Rpb24odCxlKXtSKHQpfHwoaVtlXT17bmFtZTp0fSksIm9yZGluYWwiPT09dC50eXBlJiZudWxsPT1yJiYobz1wKGlbcj1lXSkpLGFbdC5uYW1lXT1bXX0pO3ZhciBkPWguZ2V0KGMpfHxoLnNldChjLHtjYXRlZ29yeVdheURpbTpvLHZhbHVlV2F5RGltOjB9KTtmdW5jdGlvbiBmKHQsZSxpKXtmb3IodmFyIG49MDtuPGk7bisrKXQucHVzaChlK24pfWZ1bmN0aW9uIHAodCl7dmFyIGU9dC5kaW1zRGVmO3JldHVybiBlP2UubGVuZ3RoOjF9cmV0dXJuIEUoaSxmdW5jdGlvbih0LGUpe3ZhciBpPXQubmFtZSxuPXAodCk7aWYobnVsbD09cil7dmFyIG89ZC52YWx1ZVdheURpbTtmKGFbaV0sbyxuKSxmKGwsbyxuKSxkLnZhbHVlV2F5RGltKz1ufWVsc2UgaWYocj09PWUpZihhW2ldLDAsbiksZihzLDAsbik7ZWxzZXtvPWQuY2F0ZWdvcnlXYXlEaW07ZihhW2ldLG8sbiksZihsLG8sbiksZC5jYXRlZ29yeVdheURpbSs9bn19KSxzLmxlbmd0aCYmKGEuaXRlbU5hbWU9cyksbC5sZW5ndGgmJihhLnNlcmllc05hbWU9bCksYX1mdW5jdGlvbiBZdSh0LGwsdSl7dmFyIGU9e307aWYoIWp1KHQpKXJldHVybiBlO3ZhciBoLGM9bC5zb3VyY2VGb3JtYXQsZD1sLmRpbWVuc2lvbnNEZWZpbmU7YyE9PU91JiZjIT09RXV8fEUoZCxmdW5jdGlvbih0LGUpeyJuYW1lIj09PShSKHQpP3QubmFtZTp0KSYmKGg9ZSl9KTt2YXIgaT1mdW5jdGlvbigpe2Zvcih2YXIgdD17fSxlPXt9LGk9W10sbj0wLG89TWF0aC5taW4oNSx1KTtuPG87bisrKXt2YXIgYT1xdShsLmRhdGEsYyxsLnNlcmllc0xheW91dEJ5LGQsbC5zdGFydEluZGV4LG4pO2kucHVzaChhKTt2YXIgcj1hPT09RnUuTm90O2lmKHImJm51bGw9PXQudiYmbiE9PWgmJih0LnY9biksbnVsbCE9dC5uJiZ0Lm4hPT10LnYmJihyfHxpW3Qubl0hPT1GdS5Ob3QpfHwodC5uPW4pLHModCkmJmlbdC5uXSE9PUZ1Lk5vdClyZXR1cm4gdDtyfHwoYT09PUZ1Lk1pZ2h0JiZudWxsPT1lLnYmJm4hPT1oJiYoZS52PW4pLG51bGwhPWUubiYmZS5uIT09ZS52fHwoZS5uPW4pKX1mdW5jdGlvbiBzKHQpe3JldHVybiBudWxsIT10LnYmJm51bGwhPXQubn1yZXR1cm4gcyh0KT90OnMoZSk/ZTpudWxsfSgpO2lmKGkpe2UudmFsdWU9aS52O3ZhciBuPW51bGwhPWg/aDppLm47ZS5pdGVtTmFtZT1bbl0sZS5zZXJpZXNOYW1lPVtuXX1yZXR1cm4gZX1mdW5jdGlvbiBqdSh0KXt2YXIgZT10Lm9wdGlvbjtpZighZS5kYXRhKXJldHVybiB0LmVjTW9kZWwuZ2V0Q29tcG9uZW50KCJkYXRhc2V0IixlLmRhdGFzZXRJbmRleHx8MCl9ZnVuY3Rpb24gcXUodCxlLGksbixvLGEpe3ZhciByLHMsbDtpZihWKHQpKXJldHVybiBGdS5Ob3Q7aWYobil7dmFyIHU9blthXTtSKHUpPyhzPXUubmFtZSxsPXUudHlwZSk6eih1KSYmKHM9dSl9aWYobnVsbCE9bClyZXR1cm4ib3JkaW5hbCI9PT1sP0Z1Lk11c3Q6RnUuTm90O2lmKGU9PT1OdSlpZihpPT09VnUpe2Zvcih2YXIgaD10W2FdLGM9MDtjPChofHxbXSkubGVuZ3RoJiZjPDU7YysrKWlmKG51bGwhPShyPWcoaFtvK2NdKSkpcmV0dXJuIHJ9ZWxzZSBmb3IoYz0wO2M8dC5sZW5ndGgmJmM8NTtjKyspe3ZhciBkPXRbbytjXTtpZihkJiZudWxsIT0ocj1nKGRbYV0pKSlyZXR1cm4gcn1lbHNlIGlmKGU9PT1PdSl7aWYoIXMpcmV0dXJuIEZ1Lk5vdDtmb3IoYz0wO2M8dC5sZW5ndGgmJmM8NTtjKyspe2lmKChmPXRbY10pJiZudWxsIT0ocj1nKGZbc10pKSlyZXR1cm4gcn19ZWxzZSBpZihlPT09RXUpe2lmKCFzKXJldHVybiBGdS5Ob3Q7aWYoIShoPXRbc10pfHxWKGgpKXJldHVybiBGdS5Ob3Q7Zm9yKGM9MDtjPGgubGVuZ3RoJiZjPDU7YysrKWlmKG51bGwhPShyPWcoaFtjXSkpKXJldHVybiByfWVsc2UgaWYoZT09PVB1KWZvcihjPTA7Yzx0Lmxlbmd0aCYmYzw1O2MrKyl7dmFyIGYscD1CbyhmPXRbY10pO2lmKCFrKHApKXJldHVybiBGdS5Ob3Q7aWYobnVsbCE9KHI9ZyhwW2FdKSkpcmV0dXJuIHJ9ZnVuY3Rpb24gZyh0KXt2YXIgZT16KHQpO3JldHVybiBudWxsIT10JiZpc0Zpbml0ZSh0KSYmIiIhPT10P2U/RnUuTWlnaHQ6RnUuTm90OmUmJiItIiE9PXQ/RnUuTXVzdDp2b2lkIDB9cmV0dXJuIEZ1Lk5vdH12YXIgS3U9IlwwX2VjX2lubmVyIiwkdT1JbC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxlLGksbil7aT1pfHx7fSx0aGlzLm9wdGlvbj1udWxsLHRoaXMuX3RoZW1lPW5ldyBJbChpKSx0aGlzLl9vcHRpb25NYW5hZ2VyPW59LHNldE9wdGlvbjpmdW5jdGlvbih0LGUpe1koIShLdSBpbiB0KSwicGxlYXNlIHVzZSBjaGFydC5nZXRPcHRpb24oKSIpLHRoaXMuX29wdGlvbk1hbmFnZXIuc2V0T3B0aW9uKHQsZSksdGhpcy5yZXNldE9wdGlvbihudWxsKX0scmVzZXRPcHRpb246ZnVuY3Rpb24odCl7dmFyIGU9ITEsaT10aGlzLl9vcHRpb25NYW5hZ2VyO2lmKCF0fHwicmVjcmVhdGUiPT09dCl7dmFyIG49aS5tb3VudE9wdGlvbigicmVjcmVhdGUiPT09dCk7dGhpcy5vcHRpb24mJiJyZWNyZWF0ZSIhPT10Pyh0aGlzLnJlc3RvcmVEYXRhKCksdGhpcy5tZXJnZU9wdGlvbihuKSk6ZnVuY3Rpb24odCl7dD10LHRoaXMub3B0aW9uPXt9LHRoaXMub3B0aW9uW0t1XT0xLHRoaXMuX2NvbXBvbmVudHNNYXA9USh7c2VyaWVzOltdfSksdGhpcy5fc2VyaWVzSW5kaWNlcyx0aGlzLl9zZXJpZXNJbmRpY2VzTWFwLGZ1bmN0aW9uKGksdCl7dmFyIG49aS5jb2xvciYmIWkuY29sb3JMYXllcjtFKHQsZnVuY3Rpb24odCxlKXsiY29sb3JMYXllciI9PT1lJiZufHxUdS5oYXNDbGFzcyhlKXx8KCJvYmplY3QiPT10eXBlb2YgdD9pW2VdPWlbZV0/bShpW2VdLHQsITEpOkQodCk6bnVsbD09aVtlXSYmKGlbZV09dCkpfSl9KHQsdGhpcy5fdGhlbWUub3B0aW9uKSxtKHQsQ3UsITEpLHRoaXMubWVyZ2VPcHRpb24odCl9LmNhbGwodGhpcyxuKSxlPSEwfWlmKCJ0aW1lbGluZSIhPT10JiYibWVkaWEiIT09dHx8dGhpcy5yZXN0b3JlRGF0YSgpLCF0fHwicmVjcmVhdGUiPT09dHx8InRpbWVsaW5lIj09PXQpe3ZhciBvPWkuZ2V0VGltZWxpbmVPcHRpb24odGhpcyk7byYmKHRoaXMubWVyZ2VPcHRpb24obyksZT0hMCl9aWYoIXR8fCJyZWNyZWF0ZSI9PT10fHwibWVkaWEiPT09dCl7dmFyIGE9aS5nZXRNZWRpYU9wdGlvbih0aGlzLHRoaXMuX2FwaSk7YS5sZW5ndGgmJkUoYSxmdW5jdGlvbih0KXt0aGlzLm1lcmdlT3B0aW9uKHQsZT0hMCl9LHRoaXMpfXJldHVybiBlfSxtZXJnZU9wdGlvbjpmdW5jdGlvbihuKXt2YXIgbD10aGlzLm9wdGlvbix1PXRoaXMuX2NvbXBvbmVudHNNYXAsaT1bXTshZnVuY3Rpb24odCl7V3UodCkuZGF0YXNldE1hcD1RKCl9KHRoaXMpLEUobixmdW5jdGlvbih0LGUpe251bGwhPXQmJihUdS5oYXNDbGFzcyhlKT9lJiZpLnB1c2goZSk6bFtlXT1udWxsPT1sW2VdP0QodCk6bShsW2VdLHQsITApKX0pLFR1LnRvcG9sb2dpY2FsVHJhdmVsKGksVHUuZ2V0QWxsQ2xhc3NNYWluVHlwZXMoKSxmdW5jdGlvbihyLHQpe3ZhciBlPUVvKG5bcl0pLGk9Vm8odS5nZXQociksZSk7R28oaSksRShpLGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5vcHRpb247UihpKSYmKHQua2V5SW5mby5tYWluVHlwZT1yLHQua2V5SW5mby5zdWJUeXBlPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gZS50eXBlP2UudHlwZTppP2kuc3ViVHlwZTpUdS5kZXRlcm1pbmVTdWJUeXBlKHQsZSl9KHIsaSx0LmV4aXN0KSl9KTt2YXIgcz1mdW5jdGlvbihlLHQpe2sodCl8fCh0PXQ/W3RdOltdKTt2YXIgaT17fTtyZXR1cm4gRSh0LGZ1bmN0aW9uKHQpe2lbdF09KGUuZ2V0KHQpfHxbXSkuc2xpY2UoKX0pLGl9KHUsdCk7bFtyXT1bXSx1LnNldChyLFtdKSxFKGksZnVuY3Rpb24odCxlKXt2YXIgaT10LmV4aXN0LG49dC5vcHRpb247aWYoWShSKG4pfHxpLCJFbXB0eSBjb21wb25lbnQgZGVmaW5pdGlvbiIpLG4pe3ZhciBvPVR1LmdldENsYXNzKHIsdC5rZXlJbmZvLnN1YlR5cGUsITApO2lmKGkmJmkuY29uc3RydWN0b3I9PT1vKWkubmFtZT10LmtleUluZm8ubmFtZSxpLm1lcmdlT3B0aW9uKG4sdGhpcyksaS5vcHRpb25VcGRhdGVkKG4sITEpO2Vsc2V7dmFyIGE9TCh7ZGVwZW5kZW50TW9kZWxzOnMsY29tcG9uZW50SW5kZXg6ZX0sdC5rZXlJbmZvKTtMKGk9bmV3IG8obix0aGlzLHRoaXMsYSksYSksaS5pbml0KG4sdGhpcyx0aGlzLGEpLGkub3B0aW9uVXBkYXRlZChudWxsLCEwKX19ZWxzZSBpLm1lcmdlT3B0aW9uKHt9LHRoaXMpLGkub3B0aW9uVXBkYXRlZCh7fSwhMSk7dS5nZXQocilbZV09aSxsW3JdW2VdPWkub3B0aW9ufSx0aGlzKSwic2VyaWVzIj09PXImJkp1KHRoaXMsdS5nZXQoInNlcmllcyIpKX0sdGhpcyksdGhpcy5fc2VyaWVzSW5kaWNlc01hcD1RKHRoaXMuX3Nlcmllc0luZGljZXM9dGhpcy5fc2VyaWVzSW5kaWNlc3x8W10pfSxnZXRPcHRpb246ZnVuY3Rpb24oKXt2YXIgbj1EKHRoaXMub3B0aW9uKTtyZXR1cm4gRShuLGZ1bmN0aW9uKHQsZSl7aWYoVHUuaGFzQ2xhc3MoZSkpe2Zvcih2YXIgaT0odD1Fbyh0KSkubGVuZ3RoLTE7MDw9aTtpLS0pV28odFtpXSkmJnQuc3BsaWNlKGksMSk7bltlXT10fX0pLGRlbGV0ZSBuW0t1XSxufSxnZXRUaGVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aGVtZX0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fY29tcG9uZW50c01hcC5nZXQodCk7aWYoaSlyZXR1cm4gaVtlfHwwXX0scXVlcnlDb21wb25lbnRzOmZ1bmN0aW9uKHQpe3ZhciBlPXQubWFpblR5cGU7aWYoIWUpcmV0dXJuW107dmFyIGksbj10LmluZGV4LG89dC5pZCxhPXQubmFtZSxyPXRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KGUpO2lmKCFyfHwhci5sZW5ndGgpcmV0dXJuW107aWYobnVsbCE9bilrKG4pfHwobj1bbl0pLGk9TShOKG4sZnVuY3Rpb24odCl7cmV0dXJuIHJbdF19KSxmdW5jdGlvbih0KXtyZXR1cm4hIXR9KTtlbHNlIGlmKG51bGwhPW8pe3ZhciBzPWsobyk7aT1NKHIsZnVuY3Rpb24odCl7cmV0dXJuIHMmJjA8PV8obyx0LmlkKXx8IXMmJnQuaWQ9PT1vfSl9ZWxzZSBpZihudWxsIT1hKXt2YXIgbD1rKGEpO2k9TShyLGZ1bmN0aW9uKHQpe3JldHVybiBsJiYwPD1fKGEsdC5uYW1lKXx8IWwmJnQubmFtZT09PWF9KX1lbHNlIGk9ci5zbGljZSgpO3JldHVybiBRdShpLHQpfSxmaW5kQ29tcG9uZW50czpmdW5jdGlvbih0KXt2YXIgZSxpLG4sbyxhLHI9dC5xdWVyeSxzPXQubWFpblR5cGUsbD0oaT1zKyJJbmRleCIsbj1zKyJJZCIsbz1zKyJOYW1lIiwhKGU9cil8fG51bGw9PWVbaV0mJm51bGw9PWVbbl0mJm51bGw9PWVbb10/bnVsbDp7bWFpblR5cGU6cyxpbmRleDplW2ldLGlkOmVbbl0sbmFtZTplW29dfSksdT1sP3RoaXMucXVlcnlDb21wb25lbnRzKGwpOnRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KHMpO3JldHVybiBhPVF1KHUsdCksdC5maWx0ZXI/TShhLHQuZmlsdGVyKTphfSxlYWNoQ29tcG9uZW50OmZ1bmN0aW9uKHQsbixvKXt2YXIgZT10aGlzLl9jb21wb25lbnRzTWFwO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0KW89bixuPXQsZS5lYWNoKGZ1bmN0aW9uKHQsaSl7RSh0LGZ1bmN0aW9uKHQsZSl7bi5jYWxsKG8saSx0LGUpfSl9KTtlbHNlIGlmKHoodCkpRShlLmdldCh0KSxuLG8pO2Vsc2UgaWYoUih0KSl7RSh0aGlzLmZpbmRDb21wb25lbnRzKHQpLG4sbyl9fSxnZXRTZXJpZXNCeU5hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcy5fY29tcG9uZW50c01hcC5nZXQoInNlcmllcyIpLGZ1bmN0aW9uKHQpe3JldHVybiB0Lm5hbWU9PT1lfSl9LGdldFNlcmllc0J5SW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCJzZXJpZXMiKVt0XX0sZ2V0U2VyaWVzQnlUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCJzZXJpZXMiKSxmdW5jdGlvbih0KXtyZXR1cm4gdC5zdWJUeXBlPT09ZX0pfSxnZXRTZXJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50c01hcC5nZXQoInNlcmllcyIpLnNsaWNlKCl9LGdldFNlcmllc0NvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCJzZXJpZXMiKS5sZW5ndGh9LGVhY2hTZXJpZXM6ZnVuY3Rpb24oaSxuKXtFKHRoaXMuX3Nlcmllc0luZGljZXMsZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY29tcG9uZW50c01hcC5nZXQoInNlcmllcyIpW3RdO2kuY2FsbChuLGUsdCl9LHRoaXMpfSxlYWNoUmF3U2VyaWVzOmZ1bmN0aW9uKHQsZSl7RSh0aGlzLl9jb21wb25lbnRzTWFwLmdldCgic2VyaWVzIiksdCxlKX0sZWFjaFNlcmllc0J5VHlwZTpmdW5jdGlvbihpLG4sbyl7RSh0aGlzLl9zZXJpZXNJbmRpY2VzLGZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCJzZXJpZXMiKVt0XTtlLnN1YlR5cGU9PT1pJiZuLmNhbGwobyxlLHQpfSx0aGlzKX0sZWFjaFJhd1Nlcmllc0J5VHlwZTpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIEUodGhpcy5nZXRTZXJpZXNCeVR5cGUodCksZSxpKX0saXNTZXJpZXNGaWx0ZXJlZDpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5fc2VyaWVzSW5kaWNlc01hcC5nZXQodC5jb21wb25lbnRJbmRleCl9LGdldEN1cnJlbnRTZXJpZXNJbmRpY2VzOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX3Nlcmllc0luZGljZXN8fFtdKS5zbGljZSgpfSxmaWx0ZXJTZXJpZXM6ZnVuY3Rpb24odCxlKXt2YXIgaT1NKHRoaXMuX2NvbXBvbmVudHNNYXAuZ2V0KCJzZXJpZXMiKSx0LGUpO0p1KHRoaXMsaSl9LHJlc3RvcmVEYXRhOmZ1bmN0aW9uKGkpe3ZhciBuPXRoaXMuX2NvbXBvbmVudHNNYXA7SnUodGhpcyxuLmdldCgic2VyaWVzIikpO3ZhciBvPVtdO24uZWFjaChmdW5jdGlvbih0LGUpe28ucHVzaChlKX0pLFR1LnRvcG9sb2dpY2FsVHJhdmVsKG8sVHUuZ2V0QWxsQ2xhc3NNYWluVHlwZXMoKSxmdW5jdGlvbihlLHQpe0Uobi5nZXQoZSksZnVuY3Rpb24odCl7InNlcmllcyI9PT1lJiZmdW5jdGlvbih0LGUpe2lmKGUpe3ZhciBpPWUuc2VpcmVzSW5kZXgsbj1lLnNlcmllc0lkLG89ZS5zZXJpZXNOYW1lO3JldHVybiBudWxsIT1pJiZ0LmNvbXBvbmVudEluZGV4IT09aXx8bnVsbCE9biYmdC5pZCE9PW58fG51bGwhPW8mJnQubmFtZSE9PW99fSh0LGkpfHx0LnJlc3RvcmVEYXRhKCl9KX0pfX0pO2Z1bmN0aW9uIEp1KHQsZSl7dC5fc2VyaWVzSW5kaWNlc01hcD1RKHQuX3Nlcmllc0luZGljZXM9TihlLGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbXBvbmVudEluZGV4fSl8fFtdKX1mdW5jdGlvbiBRdSh0LGUpe3JldHVybiBlLmhhc093blByb3BlcnR5KCJzdWJUeXBlIik/TSh0LGZ1bmN0aW9uKHQpe3JldHVybiB0LnN1YlR5cGU9PT1lLnN1YlR5cGV9KTp0fWIoJHUsa3UpO3ZhciB0aD1bImdldERvbSIsImdldFpyIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJnZXREZXZpY2VQaXhlbFJhdGlvIiwiZGlzcGF0Y2hBY3Rpb24iLCJpc0Rpc3Bvc2VkIiwib24iLCJvZmYiLCJnZXREYXRhVVJMIiwiZ2V0Q29ubmVjdGVkRGF0YVVSTCIsImdldE1vZGVsIiwiZ2V0T3B0aW9uIiwiZ2V0Vmlld09mQ29tcG9uZW50TW9kZWwiLCJnZXRWaWV3T2ZTZXJpZXNNb2RlbCJdO2Z1bmN0aW9uIGVoKGUpe0UodGgsZnVuY3Rpb24odCl7dGhpc1t0XT1BKGVbdF0sZSl9LHRoaXMpfXZhciBpaD17fTtmdW5jdGlvbiBuaCgpe3RoaXMuX2Nvb3JkaW5hdGVTeXN0ZW1zPVtdfW5oLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bmgsY3JlYXRlOmZ1bmN0aW9uKG4sbyl7dmFyIGE9W107RShpaCxmdW5jdGlvbih0LGUpe3ZhciBpPXQuY3JlYXRlKG4sbyk7YT1hLmNvbmNhdChpfHxbXSl9KSx0aGlzLl9jb29yZGluYXRlU3lzdGVtcz1hfSx1cGRhdGU6ZnVuY3Rpb24oZSxpKXtFKHRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW1zLGZ1bmN0aW9uKHQpe3QudXBkYXRlJiZ0LnVwZGF0ZShlLGkpfSl9LGdldENvb3JkaW5hdGVTeXN0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvb3JkaW5hdGVTeXN0ZW1zLnNsaWNlKCl9fSxuaC5yZWdpc3Rlcj1mdW5jdGlvbih0LGUpe2loW3RdPWV9LG5oLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gaWhbdF19O3ZhciBvaD1FLGFoPUQscmg9TixzaD1tLGxoPS9eKG1pbnxtYXgpPyguKykkLztmdW5jdGlvbiB1aCh0KXt0aGlzLl9hcGk9dCx0aGlzLl90aW1lbGluZU9wdGlvbnM9W10sdGhpcy5fbWVkaWFMaXN0PVtdLHRoaXMuX21lZGlhRGVmYXVsdCx0aGlzLl9jdXJyZW50TWVkaWFJbmRpY2VzPVtdLHRoaXMuX29wdGlvbkJhY2t1cCx0aGlzLl9uZXdCYXNlT3B0aW9ufWZ1bmN0aW9uIGhoKHQsZSxpKXt2YXIgYT17d2lkdGg6ZSxoZWlnaHQ6aSxhc3BlY3RyYXRpbzplL2l9LHI9ITA7cmV0dXJuIEUodCxmdW5jdGlvbih0LGUpe3ZhciBpPWUubWF0Y2gobGgpO2lmKGkmJmlbMV0mJmlbMl0pe3ZhciBuPWlbMV0sbz1pWzJdLnRvTG93ZXJDYXNlKCk7IWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4ibWluIj09PWk/ZTw9dDoibWF4Ij09PWk/dDw9ZTp0PT09ZX0oYVtvXSx0LG4pJiYocj0hMSl9fSkscn11aC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnVoLHNldE9wdGlvbjpmdW5jdGlvbih0LGUpe3QmJkUoRW8odC5zZXJpZXMpLGZ1bmN0aW9uKHQpe3QmJnQuZGF0YSYmVih0LmRhdGEpJiZLKHQuZGF0YSl9KSx0PWFoKHQpO3ZhciBpPXRoaXMuX29wdGlvbkJhY2t1cCxuPWZ1bmN0aW9uKHQsaSxuKXt2YXIgZSxvLGE9W10scj1bXSxzPXQudGltZWxpbmU7dC5iYXNlT3B0aW9uJiYobz10LmJhc2VPcHRpb24pOyhzfHx0Lm9wdGlvbnMpJiYobz1vfHx7fSxhPSh0Lm9wdGlvbnN8fFtdKS5zbGljZSgpKTtpZih0Lm1lZGlhKXtvPW98fHt9O3ZhciBsPXQubWVkaWE7b2gobCxmdW5jdGlvbih0KXt0JiZ0Lm9wdGlvbiYmKHQucXVlcnk/ci5wdXNoKHQpOmU9ZXx8dCl9KX1vPW98fHQ7by50aW1lbGluZXx8KG8udGltZWxpbmU9cyk7cmV0dXJuIG9oKFtvXS5jb25jYXQoYSkuY29uY2F0KE4ocixmdW5jdGlvbih0KXtyZXR1cm4gdC5vcHRpb259KSksZnVuY3Rpb24oZSl7b2goaSxmdW5jdGlvbih0KXt0KGUsbil9KX0pLHtiYXNlT3B0aW9uOm8sdGltZWxpbmVPcHRpb25zOmEsbWVkaWFEZWZhdWx0OmUsbWVkaWFMaXN0OnJ9fS5jYWxsKHRoaXMsdCxlLCFpKTt0aGlzLl9uZXdCYXNlT3B0aW9uPW4uYmFzZU9wdGlvbixpPyhmdW5jdGlvbihvLHQpe29oKHQ9dHx8e30sZnVuY3Rpb24odCxlKXtpZihudWxsIT10KXt2YXIgaT1vW2VdO2lmKFR1Lmhhc0NsYXNzKGUpKXt0PUVvKHQpO3ZhciBuPVZvKGk9RW8oaSksdCk7b1tlXT1yaChuLGZ1bmN0aW9uKHQpe3JldHVybiB0Lm9wdGlvbiYmdC5leGlzdD9zaCh0LmV4aXN0LHQub3B0aW9uLCEwKTp0LmV4aXN0fHx0Lm9wdGlvbn0pfWVsc2Ugb1tlXT1zaChpLHQsITApfX0pfShpLmJhc2VPcHRpb24sbi5iYXNlT3B0aW9uKSxuLnRpbWVsaW5lT3B0aW9ucy5sZW5ndGgmJihpLnRpbWVsaW5lT3B0aW9ucz1uLnRpbWVsaW5lT3B0aW9ucyksbi5tZWRpYUxpc3QubGVuZ3RoJiYoaS5tZWRpYUxpc3Q9bi5tZWRpYUxpc3QpLG4ubWVkaWFEZWZhdWx0JiYoaS5tZWRpYURlZmF1bHQ9bi5tZWRpYURlZmF1bHQpKTp0aGlzLl9vcHRpb25CYWNrdXA9bn0sbW91bnRPcHRpb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fb3B0aW9uQmFja3VwO3JldHVybiB0aGlzLl90aW1lbGluZU9wdGlvbnM9cmgoZS50aW1lbGluZU9wdGlvbnMsYWgpLHRoaXMuX21lZGlhTGlzdD1yaChlLm1lZGlhTGlzdCxhaCksdGhpcy5fbWVkaWFEZWZhdWx0PWFoKGUubWVkaWFEZWZhdWx0KSx0aGlzLl9jdXJyZW50TWVkaWFJbmRpY2VzPVtdLGFoKHQ/ZS5iYXNlT3B0aW9uOnRoaXMuX25ld0Jhc2VPcHRpb24pfSxnZXRUaW1lbGluZU9wdGlvbjpmdW5jdGlvbih0KXt2YXIgZSxpPXRoaXMuX3RpbWVsaW5lT3B0aW9ucztpZihpLmxlbmd0aCl7dmFyIG49dC5nZXRDb21wb25lbnQoInRpbWVsaW5lIik7biYmKGU9YWgoaVtuLmdldEN1cnJlbnRJbmRleCgpXSwhMCkpfXJldHVybiBlfSxnZXRNZWRpYU9wdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9hcGkuZ2V0V2lkdGgoKSxpPXRoaXMuX2FwaS5nZXRIZWlnaHQoKSxuPXRoaXMuX21lZGlhTGlzdCxvPXRoaXMuX21lZGlhRGVmYXVsdCxhPVtdLHI9W107aWYoIW4ubGVuZ3RoJiYhbylyZXR1cm4gcjtmb3IodmFyIHM9MCxsPW4ubGVuZ3RoO3M8bDtzKyspaGgobltzXS5xdWVyeSxlLGkpJiZhLnB1c2gocyk7cmV0dXJuIWEubGVuZ3RoJiZvJiYoYT1bLTFdKSxhLmxlbmd0aCYmIWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuam9pbigiLCIpPT09ZS5qb2luKCIsIil9KGEsdGhpcy5fY3VycmVudE1lZGlhSW5kaWNlcykmJihyPXJoKGEsZnVuY3Rpb24odCl7cmV0dXJuIGFoKC0xPT09dD9vLm9wdGlvbjpuW3RdLm9wdGlvbil9KSksdGhpcy5fY3VycmVudE1lZGlhSW5kaWNlcz1hLHJ9fTt2YXIgY2g9RSxkaD1SLGZoPVsiYXJlYVN0eWxlIiwibGluZVN0eWxlIiwibm9kZVN0eWxlIiwibGlua1N0eWxlIiwiY2hvcmRTdHlsZSIsImxhYmVsIiwibGFiZWxMaW5lIl07ZnVuY3Rpb24gcGgodCl7dmFyIGU9dCYmdC5pdGVtU3R5bGU7aWYoZSlmb3IodmFyIGk9MCxuPWZoLmxlbmd0aDtpPG47aSsrKXt2YXIgbz1maFtpXSxhPWUubm9ybWFsLHI9ZS5lbXBoYXNpczthJiZhW29dJiYodFtvXT10W29dfHx7fSx0W29dLm5vcm1hbD9tKHRbb10ubm9ybWFsLGFbb10pOnRbb10ubm9ybWFsPWFbb10sYVtvXT1udWxsKSxyJiZyW29dJiYodFtvXT10W29dfHx7fSx0W29dLmVtcGhhc2lzP20odFtvXS5lbXBoYXNpcyxyW29dKTp0W29dLmVtcGhhc2lzPXJbb10scltvXT1udWxsKX19ZnVuY3Rpb24gZ2godCxlLGkpe2lmKHQmJnRbZV0mJih0W2VdLm5vcm1hbHx8dFtlXS5lbXBoYXNpcykpe3ZhciBuPXRbZV0ubm9ybWFsLG89dFtlXS5lbXBoYXNpcztuJiYoaT8odFtlXS5ub3JtYWw9dFtlXS5lbXBoYXNpcz1udWxsLEModFtlXSxuKSk6dFtlXT1uKSxvJiYodC5lbXBoYXNpcz10LmVtcGhhc2lzfHx7fSx0LmVtcGhhc2lzW2VdPW8pfX1mdW5jdGlvbiBtaCh0KXtnaCh0LCJpdGVtU3R5bGUiKSxnaCh0LCJsaW5lU3R5bGUiKSxnaCh0LCJhcmVhU3R5bGUiKSxnaCh0LCJsYWJlbCIpLGdoKHQsImxhYmVsTGluZSIpLGdoKHQsInVwcGVyTGFiZWwiKSxnaCh0LCJlZGdlTGFiZWwiKX1mdW5jdGlvbiB2aCh0LGUpe3ZhciBpPWRoKHQpJiZ0W2VdLG49ZGgoaSkmJmkudGV4dFN0eWxlO2lmKG4pZm9yKHZhciBvPTAsYT1Sby5sZW5ndGg7bzxhO28rKyl7ZT1Sb1tvXTtuLmhhc093blByb3BlcnR5KGUpJiYoaVtlXT1uW2VdKX19ZnVuY3Rpb24geWgodCl7dCYmKG1oKHQpLHZoKHQsImxhYmVsIiksdC5lbXBoYXNpcyYmdmgodC5lbXBoYXNpcywibGFiZWwiKSl9ZnVuY3Rpb24geGgodCl7cmV0dXJuIGsodCk/dDp0P1t0XTpbXX1mdW5jdGlvbiBfaCh0KXtyZXR1cm4oayh0KT90WzBdOnQpfHx7fX1mdW5jdGlvbiB3aChlLHQpe2NoKHhoKGUuc2VyaWVzKSxmdW5jdGlvbih0KXtkaCh0KSYmZnVuY3Rpb24odCl7aWYoZGgodCkpe3BoKHQpLG1oKHQpLHZoKHQsImxhYmVsIiksdmgodCwidXBwZXJMYWJlbCIpLHZoKHQsImVkZ2VMYWJlbCIpLHQuZW1waGFzaXMmJih2aCh0LmVtcGhhc2lzLCJsYWJlbCIpLHZoKHQuZW1waGFzaXMsInVwcGVyTGFiZWwiKSx2aCh0LmVtcGhhc2lzLCJlZGdlTGFiZWwiKSksKGk9dC5tYXJrUG9pbnQpJiYocGgoaSkseWgoaSkpLChuPXQubWFya0xpbmUpJiYocGgobikseWgobikpO3ZhciBlPXQubWFya0FyZWE7ZSYmeWgoZSk7dmFyIGksbixvPXQuZGF0YTtpZigiZ3JhcGgiPT09dC50eXBlKXtvPW98fHQubm9kZXM7dmFyIGE9dC5saW5rc3x8dC5lZGdlcztpZihhJiYhVihhKSlmb3IodmFyIHI9MDtyPGEubGVuZ3RoO3IrKyl5aChhW3JdKTtFKHQuY2F0ZWdvcmllcyxmdW5jdGlvbih0KXttaCh0KX0pfWlmKG8mJiFWKG8pKWZvcihyPTA7cjxvLmxlbmd0aDtyKyspeWgob1tyXSk7aWYoKGk9dC5tYXJrUG9pbnQpJiZpLmRhdGEpe3ZhciBzPWkuZGF0YTtmb3Iocj0wO3I8cy5sZW5ndGg7cisrKXloKHNbcl0pfWlmKChuPXQubWFya0xpbmUpJiZuLmRhdGEpe3ZhciBsPW4uZGF0YTtmb3Iocj0wO3I8bC5sZW5ndGg7cisrKWsobFtyXSk/KHloKGxbcl1bMF0pLHloKGxbcl1bMV0pKTp5aChsW3JdKX0iZ2F1Z2UiPT09dC50eXBlPyh2aCh0LCJheGlzTGFiZWwiKSx2aCh0LCJ0aXRsZSIpLHZoKHQsImRldGFpbCIpKToidHJlZW1hcCI9PT10LnR5cGU/KGdoKHQuYnJlYWRjcnVtYiwiaXRlbVN0eWxlIiksRSh0LmxldmVscyxmdW5jdGlvbih0KXttaCh0KX0pKToidHJlZSI9PT10LnR5cGUmJm1oKHQubGVhdmVzKX19KHQpfSk7dmFyIGk9WyJ4QXhpcyIsInlBeGlzIiwicmFkaXVzQXhpcyIsImFuZ2xlQXhpcyIsInNpbmdsZUF4aXMiLCJwYXJhbGxlbEF4aXMiLCJyYWRhciJdO3QmJmkucHVzaCgidmFsdWVBeGlzIiwiY2F0ZWdvcnlBeGlzIiwibG9nQXhpcyIsInRpbWVBeGlzIiksY2goaSxmdW5jdGlvbih0KXtjaCh4aChlW3RdKSxmdW5jdGlvbih0KXt0JiYodmgodCwiYXhpc0xhYmVsIiksdmgodC5heGlzUG9pbnRlciwibGFiZWwiKSl9KX0pLGNoKHhoKGUucGFyYWxsZWwpLGZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQucGFyYWxsZWxBeGlzRGVmYXVsdDt2aChlLCJheGlzTGFiZWwiKSx2aChlJiZlLmF4aXNQb2ludGVyLCJsYWJlbCIpfSksY2goeGgoZS5jYWxlbmRhciksZnVuY3Rpb24odCl7Z2godCwiaXRlbVN0eWxlIiksdmgodCwiZGF5TGFiZWwiKSx2aCh0LCJtb250aExhYmVsIiksdmgodCwieWVhckxhYmVsIil9KSxjaCh4aChlLnJhZGFyKSxmdW5jdGlvbih0KXt2aCh0LCJuYW1lIil9KSxjaCh4aChlLmdlbyksZnVuY3Rpb24odCl7ZGgodCkmJih5aCh0KSxjaCh4aCh0LnJlZ2lvbnMpLGZ1bmN0aW9uKHQpe3loKHQpfSkpfSksY2goeGgoZS50aW1lbGluZSksZnVuY3Rpb24odCl7eWgodCksZ2godCwibGFiZWwiKSxnaCh0LCJpdGVtU3R5bGUiKSxnaCh0LCJjb250cm9sU3R5bGUiLCEwKTt2YXIgZT10LmRhdGE7ayhlKSYmRShlLGZ1bmN0aW9uKHQpe1IodCkmJihnaCh0LCJsYWJlbCIpLGdoKHQsIml0ZW1TdHlsZSIpKX0pfSksY2goeGgoZS50b29sYm94KSxmdW5jdGlvbih0KXtnaCh0LCJpY29uU3R5bGUiKSxjaCh0LmZlYXR1cmUsZnVuY3Rpb24odCl7Z2godCwiaWNvblN0eWxlIil9KX0pLHZoKF9oKGUuYXhpc1BvaW50ZXIpLCJsYWJlbCIpLHZoKF9oKGUudG9vbHRpcCkuYXhpc1BvaW50ZXIsImxhYmVsIil9ZnVuY3Rpb24gYmgoZSl7RShTaCxmdW5jdGlvbih0KXt0WzBdaW4gZSYmISh0WzFdaW4gZSkmJihlW3RbMV1dPWVbdFswXV0pfSl9dmFyIFNoPVtbIngiLCJsZWZ0Il0sWyJ5IiwidG9wIl0sWyJ4MiIsInJpZ2h0Il0sWyJ5MiIsImJvdHRvbSJdXSxNaD1bImdyaWQiLCJnZW8iLCJwYXJhbGxlbCIsImxlZ2VuZCIsInRvb2xib3giLCJ0aXRsZSIsInZpc3VhbE1hcCIsImRhdGFab29tIiwidGltZWxpbmUiXSxJaD1mdW5jdGlvbihpLHQpe3doKGksdCksaS5zZXJpZXM9RW8oaS5zZXJpZXMpLEUoaS5zZXJpZXMsZnVuY3Rpb24odCl7aWYoUih0KSl7dmFyIGU9dC50eXBlO2lmKCJsaW5lIj09PWUpbnVsbCE9dC5jbGlwT3ZlcmZsb3cmJih0LmNsaXA9dC5jbGlwT3ZlcmZsb3cpO2Vsc2UgaWYoInBpZSI9PT1lfHwiZ2F1Z2UiPT09ZSludWxsIT10LmNsb2NrV2lzZSYmKHQuY2xvY2t3aXNlPXQuY2xvY2tXaXNlKTtlbHNlIGlmKCJnYXVnZSI9PT1lKXt2YXIgaT1mdW5jdGlvbih0LGUpe2U9ZS5zcGxpdCgiLCIpO2Zvcih2YXIgaT10LG49MDtuPGUubGVuZ3RoJiZudWxsIT0oaT1pJiZpW2Vbbl1dKTtuKyspO3JldHVybiBpfSh0LCJwb2ludGVyLmNvbG9yIik7bnVsbCE9aSYmZnVuY3Rpb24odCxlLGksbil7ZT1lLnNwbGl0KCIsIik7Zm9yKHZhciBvLGE9dCxyPTA7cjxlLmxlbmd0aC0xO3IrKyludWxsPT1hW289ZVtyXV0mJihhW29dPXt9KSxhPWFbb107IW4mJm51bGwhPWFbZVtyXV18fChhW2Vbcl1dPWkpfSh0LCJpdGVtU3R5bGUuY29sb3IiLGkpfWJoKHQpfX0pLGkuZGF0YVJhbmdlJiYoaS52aXN1YWxNYXA9aS5kYXRhUmFuZ2UpLEUoTWgsZnVuY3Rpb24odCl7dmFyIGU9aVt0XTtlJiYoayhlKXx8KGU9W2VdKSxFKGUsZnVuY3Rpb24odCl7YmgodCl9KSl9KX07ZnVuY3Rpb24gVGgobSl7RShtLGZ1bmN0aW9uKGgsYyl7dmFyIGQ9W10sZj1bTmFOLE5hTl0sdD1baC5zdGFja1Jlc3VsdERpbWVuc2lvbixoLnN0YWNrZWRPdmVyRGltZW5zaW9uXSxwPWguZGF0YSxnPWguaXNTdGFja2VkQnlJbmRleCxlPXAubWFwKHQsZnVuY3Rpb24odCxlLGkpe3ZhciBuLG8sYT1wLmdldChoLnN0YWNrZWREaW1lbnNpb24saSk7aWYoaXNOYU4oYSkpcmV0dXJuIGY7Zz9vPXAuZ2V0UmF3SW5kZXgoaSk6bj1wLmdldChoLnN0YWNrZWRCeURpbWVuc2lvbixpKTtmb3IodmFyIHI9TmFOLHM9Yy0xOzA8PXM7cy0tKXt2YXIgbD1tW3NdO2lmKGd8fChvPWwuZGF0YS5yYXdJbmRleE9mKGwuc3RhY2tlZEJ5RGltZW5zaW9uLG4pKSwwPD1vKXt2YXIgdT1sLmRhdGEuZ2V0QnlSYXdJbmRleChsLnN0YWNrUmVzdWx0RGltZW5zaW9uLG8pO2lmKDA8PWEmJjA8dXx8YTw9MCYmdTwwKXthKz11LHI9dTticmVha319fXJldHVybiBkWzBdPWEsZFsxXT1yLGR9KTtwLmhvc3RNb2RlbC5zZXREYXRhKGUpLGguZGF0YT1lfSl9ZnVuY3Rpb24gQWgodCxlKXtHdS5pc0luc3RhbmNlKHQpfHwodD1HdS5zZXJpZXNEYXRhVG9Tb3VyY2UodCkpLHRoaXMuX3NvdXJjZT10O3ZhciBpPXRoaXMuX2RhdGE9dC5kYXRhLG49dC5zb3VyY2VGb3JtYXQ7bj09PVJ1JiYodGhpcy5fb2Zmc2V0PTAsdGhpcy5fZGltU2l6ZT1lLHRoaXMuX2RhdGE9aSksTCh0aGlzLENoW249PT1OdT9uKyJfIit0LnNlcmllc0xheW91dEJ5Om5dKX12YXIgRGg9QWgucHJvdG90eXBlO0RoLnB1cmU9ITE7dmFyIENoPXthcnJheVJvd3NfY29sdW1uOntwdXJlOkRoLnBlcnNpc3RlbnQ9ITAsY291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgoMCx0aGlzLl9kYXRhLmxlbmd0aC10aGlzLl9zb3VyY2Uuc3RhcnRJbmRleCl9LGdldEl0ZW06ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2RhdGFbdCt0aGlzLl9zb3VyY2Uuc3RhcnRJbmRleF19LGFwcGVuZERhdGE6UGh9LGFycmF5Um93c19yb3c6e3B1cmU6ITAsY291bnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhWzBdO3JldHVybiB0P01hdGgubWF4KDAsdC5sZW5ndGgtdGhpcy5fc291cmNlLnN0YXJ0SW5kZXgpOjB9LGdldEl0ZW06ZnVuY3Rpb24odCl7dCs9dGhpcy5fc291cmNlLnN0YXJ0SW5kZXg7Zm9yKHZhciBlPVtdLGk9dGhpcy5fZGF0YSxuPTA7bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl07ZS5wdXNoKG8/b1t0XTpudWxsKX1yZXR1cm4gZX0sYXBwZW5kRGF0YTpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcignRG8gbm90IHN1cHBvcnQgYXBwZW5kRGF0YSB3aGVuIHNldCBzZXJpZXNMYXlvdXRCeTogInJvdyIuJyl9fSxvYmplY3RSb3dzOntwdXJlOiEwLGNvdW50OkxoLGdldEl0ZW06a2gsYXBwZW5kRGF0YTpQaH0sa2V5ZWRDb2x1bW5zOntwdXJlOiEwLGNvdW50OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc291cmNlLmRpbWVuc2lvbnNEZWZpbmVbMF0ubmFtZSxlPXRoaXMuX2RhdGFbdF07cmV0dXJuIGU/ZS5sZW5ndGg6MH0sZ2V0SXRlbTpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10saT10aGlzLl9zb3VyY2UuZGltZW5zaW9uc0RlZmluZSxuPTA7bjxpLmxlbmd0aDtuKyspe3ZhciBvPXRoaXMuX2RhdGFbaVtuXS5uYW1lXTtlLnB1c2gobz9vW3RdOm51bGwpfXJldHVybiBlfSxhcHBlbmREYXRhOmZ1bmN0aW9uKHQpe3ZhciBvPXRoaXMuX2RhdGE7RSh0LGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPW9bZV18fChvW2VdPVtdKSxuPTA7bjwodHx8W10pLmxlbmd0aDtuKyspaS5wdXNoKHRbbl0pfSl9fSxvcmlnaW5hbDp7Y291bnQ6TGgsZ2V0SXRlbTpraCxhcHBlbmREYXRhOlBofSx0eXBlZEFycmF5OntwZXJzaXN0ZW50OiEoRGguZ2V0U291cmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX0pLHB1cmU6ITAsY291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YT90aGlzLl9kYXRhLmxlbmd0aC90aGlzLl9kaW1TaXplOjB9LGdldEl0ZW06ZnVuY3Rpb24odCxlKXt0LT10aGlzLl9vZmZzZXQsZT1lfHxbXTtmb3IodmFyIGk9dGhpcy5fZGltU2l6ZSp0LG49MDtuPHRoaXMuX2RpbVNpemU7bisrKWVbbl09dGhpcy5fZGF0YVtpK25dO3JldHVybiBlfSxhcHBlbmREYXRhOmZ1bmN0aW9uKHQpe3RoaXMuX2RhdGE9dH0sY2xlYW46ZnVuY3Rpb24oKXt0aGlzLl9vZmZzZXQrPXRoaXMuY291bnQoKSx0aGlzLl9kYXRhPW51bGx9fX07ZnVuY3Rpb24gTGgoKXtyZXR1cm4gdGhpcy5fZGF0YS5sZW5ndGh9ZnVuY3Rpb24ga2godCl7cmV0dXJuIHRoaXMuX2RhdGFbdF19ZnVuY3Rpb24gUGgodCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdGhpcy5fZGF0YS5wdXNoKHRbZV0pfXZhciBOaD17YXJyYXlSb3dzOk9oLG9iamVjdFJvd3M6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIG51bGwhPWk/dFtuXTp0fSxrZXllZENvbHVtbnM6T2gsb3JpZ2luYWw6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89Qm8odCk7cmV0dXJuIG51bGwhPWkmJm8gaW5zdGFuY2VvZiBBcnJheT9vW2ldOm99LHR5cGVkQXJyYXk6T2h9O2Z1bmN0aW9uIE9oKHQsZSxpLG4pe3JldHVybiBudWxsIT1pP3RbaV06dH12YXIgRWg9e2FycmF5Um93czp6aCxvYmplY3RSb3dzOmZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBSaCh0W2VdLHRoaXMuX2RpbWVuc2lvbkluZm9zW2VdKX0sa2V5ZWRDb2x1bW5zOnpoLG9yaWdpbmFsOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXQmJihudWxsPT10LnZhbHVlP3Q6dC52YWx1ZSk7cmV0dXJuIXRoaXMuX3Jhd0RhdGEucHVyZSYmZnVuY3Rpb24odCl7cmV0dXJuIFBvKHQpJiYhKHQgaW5zdGFuY2VvZiBBcnJheSl9KHQpJiYodGhpcy5oYXNJdGVtT3B0aW9uPSEwKSxSaChvIGluc3RhbmNlb2YgQXJyYXk/b1tuXTpvLHRoaXMuX2RpbWVuc2lvbkluZm9zW2VdKX0sdHlwZWRBcnJheTpmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gdFtuXX19O2Z1bmN0aW9uIHpoKHQsZSxpLG4pe3JldHVybiBSaCh0W25dLHRoaXMuX2RpbWVuc2lvbkluZm9zW2VdKX1mdW5jdGlvbiBSaCh0LGUpe3ZhciBpPWUmJmUudHlwZTtpZigib3JkaW5hbCIhPT1pKXJldHVybiJ0aW1lIj09PWkmJiJudW1iZXIiIT10eXBlb2YgdCYmbnVsbCE9dCYmIi0iIT09dCYmKHQ9K0hsKHQpKSxudWxsPT10fHwiIj09PXQ/TmFOOit0O3ZhciBuPWUmJmUub3JkaW5hbE1ldGE7cmV0dXJuIG4/bi5wYXJzZUFuZENvbGxlY3QodCk6dH1mdW5jdGlvbiBCaCh0LGUsaSl7aWYodCl7dmFyIG49dC5nZXRSYXdEYXRhSXRlbShlKTtpZihudWxsIT1uKXt2YXIgbyxhLHI9dC5nZXRQcm92aWRlcigpLmdldFNvdXJjZSgpLnNvdXJjZUZvcm1hdCxzPXQuZ2V0RGltZW5zaW9uSW5mbyhpKTtyZXR1cm4gcyYmKG89cy5uYW1lLGE9cy5pbmRleCksTmhbcl0obixlLGEsbyl9fX1mdW5jdGlvbiBWaCh0LGUsaSl7aWYodCl7dmFyIG49dC5nZXRQcm92aWRlcigpLmdldFNvdXJjZSgpLnNvdXJjZUZvcm1hdDtpZihuPT09UHV8fG49PT1PdSl7dmFyIG89dC5nZXRSYXdEYXRhSXRlbShlKTtyZXR1cm4gbiE9PVB1fHxSKG8pfHwobz1udWxsKSxvP29baV06dm9pZCAwfX19dmFyIEdoPS9ce0AoLis/KVx9L2csRmg9e2dldERhdGFQYXJhbXM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldERhdGEoZSksbj10aGlzLmdldFJhd1ZhbHVlKHQsZSksbz1pLmdldFJhd0luZGV4KHQpLGE9aS5nZXROYW1lKHQpLHI9aS5nZXRSYXdEYXRhSXRlbSh0KSxzPWkuZ2V0SXRlbVZpc3VhbCh0LCJjb2xvciIpLGw9aS5nZXRJdGVtVmlzdWFsKHQsImJvcmRlckNvbG9yIiksdT10aGlzLmVjTW9kZWwuZ2V0Q29tcG9uZW50KCJ0b29sdGlwIiksaD1xbyh1JiZ1LmdldCgicmVuZGVyTW9kZSIpKSxjPXRoaXMubWFpblR5cGUsZD0ic2VyaWVzIj09PWMsZj1pLnVzZXJPdXRwdXQ7cmV0dXJue2NvbXBvbmVudFR5cGU6Yyxjb21wb25lbnRTdWJUeXBlOnRoaXMuc3ViVHlwZSxjb21wb25lbnRJbmRleDp0aGlzLmNvbXBvbmVudEluZGV4LHNlcmllc1R5cGU6ZD90aGlzLnN1YlR5cGU6bnVsbCxzZXJpZXNJbmRleDp0aGlzLnNlcmllc0luZGV4LHNlcmllc0lkOmQ/dGhpcy5pZDpudWxsLHNlcmllc05hbWU6ZD90aGlzLm5hbWU6bnVsbCxuYW1lOmEsZGF0YUluZGV4Om8sZGF0YTpyLGRhdGFUeXBlOmUsdmFsdWU6bixjb2xvcjpzLGJvcmRlckNvbG9yOmwsZGltZW5zaW9uTmFtZXM6Zj9mLmRpbWVuc2lvbk5hbWVzOm51bGwsZW5jb2RlOmY/Zi5lbmNvZGU6bnVsbCxtYXJrZXI6cnUoe2NvbG9yOnMscmVuZGVyTW9kZTpofSksJHZhcnM6WyJzZXJpZXNOYW1lIiwibmFtZSIsInZhbHVlIl19fSxnZXRGb3JtYXR0ZWRMYWJlbDpmdW5jdGlvbihuLHQsZSxpLG8pe3Q9dHx8Im5vcm1hbCI7dmFyIGE9dGhpcy5nZXREYXRhKGUpLHI9YS5nZXRJdGVtTW9kZWwobikscz10aGlzLmdldERhdGFQYXJhbXMobixlKTtudWxsIT1pJiZzLnZhbHVlIGluc3RhbmNlb2YgQXJyYXkmJihzLnZhbHVlPXMudmFsdWVbaV0pO3ZhciBsPXIuZ2V0KCJub3JtYWwiPT09dD9bb3x8ImxhYmVsIiwiZm9ybWF0dGVyIl06W3Qsb3x8ImxhYmVsIiwiZm9ybWF0dGVyIl0pO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBsPyhzLnN0YXR1cz10LHMuZGltZW5zaW9uSW5kZXg9aSxsKHMpKToic3RyaW5nIj09dHlwZW9mIGw/b3UobCxzKS5yZXBsYWNlKEdoLGZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5sZW5ndGg7cmV0dXJuIlsiPT09ZS5jaGFyQXQoMCkmJiJdIj09PWUuY2hhckF0KGktMSkmJihlPStlLnNsaWNlKDEsaS0xKSksQmgoYSxuLGUpfSk6dm9pZCAwfSxnZXRSYXdWYWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiBCaCh0aGlzLmdldERhdGEoZSksdCl9LGZvcm1hdFRvb2x0aXA6ZnVuY3Rpb24oKXt9fTtmdW5jdGlvbiBXaCh0KXtyZXR1cm4gbmV3IEhoKHQpfWZ1bmN0aW9uIEhoKHQpe3Q9dHx8e30sdGhpcy5fcmVzZXQ9dC5yZXNldCx0aGlzLl9wbGFuPXQucGxhbix0aGlzLl9jb3VudD10LmNvdW50LHRoaXMuX29uRGlydHk9dC5vbkRpcnR5LHRoaXMuX2RpcnR5PSEwLHRoaXMuY29udGV4dH12YXIgWmg9SGgucHJvdG90eXBlO1poLnBlcmZvcm09ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLl91cHN0cmVhbSxuPXQmJnQuc2tpcDtpZih0aGlzLl9kaXJ0eSYmaSl7dmFyIG89dGhpcy5jb250ZXh0O28uZGF0YT1vLm91dHB1dERhdGE9aS5jb250ZXh0Lm91dHB1dERhdGF9dGhpcy5fX3BpcGVsaW5lJiYodGhpcy5fX3BpcGVsaW5lLmN1cnJlbnRUYXNrPXRoaXMpLHRoaXMuX3BsYW4mJiFuJiYoZT10aGlzLl9wbGFuKHRoaXMuY29udGV4dCkpO3ZhciBhLHI9aCh0aGlzLl9tb2RCeSkscz10aGlzLl9tb2REYXRhQ291bnR8fDAsbD1oKHQmJnQubW9kQnkpLHU9dCYmdC5tb2REYXRhQ291bnR8fDA7ZnVuY3Rpb24gaCh0KXtyZXR1cm4gMTw9dHx8KHQ9MSksdH1yPT09bCYmcz09PXV8fChlPSJyZXNldCIpLCF0aGlzLl9kaXJ0eSYmInJlc2V0IiE9PWV8fCh0aGlzLl9kaXJ0eT0hMSxhPWZ1bmN0aW9uKHQsZSl7dmFyIGksbjt0Ll9kdWVJbmRleD10Ll9vdXRwdXREdWVFbmQ9dC5fZHVlRW5kPTAsdC5fc2V0dGVkT3V0cHV0RW5kPW51bGwsIWUmJnQuX3Jlc2V0JiYoKGk9dC5fcmVzZXQodC5jb250ZXh0KSkmJmkucHJvZ3Jlc3MmJihuPWkuZm9yY2VGaXJzdFByb2dyZXNzLGk9aS5wcm9ncmVzcyksayhpKSYmIWkubGVuZ3RoJiYoaT1udWxsKSk7dC5fcHJvZ3Jlc3M9aSx0Ll9tb2RCeT10Ll9tb2REYXRhQ291bnQ9bnVsbDt2YXIgbz10Ll9kb3duc3RyZWFtO3JldHVybiBvJiZvLmRpcnR5KCksbn0odGhpcyxuKSksdGhpcy5fbW9kQnk9bCx0aGlzLl9tb2REYXRhQ291bnQ9dTt2YXIgYz10JiZ0LnN0ZXA7aWYodGhpcy5fZHVlRW5kPWk/aS5fb3V0cHV0RHVlRW5kOnRoaXMuX2NvdW50P3RoaXMuX2NvdW50KHRoaXMuY29udGV4dCk6MS8wLHRoaXMuX3Byb2dyZXNzKXt2YXIgZD10aGlzLl9kdWVJbmRleCxmPU1hdGgubWluKG51bGwhPWM/dGhpcy5fZHVlSW5kZXgrYzoxLzAsdGhpcy5fZHVlRW5kKTtpZighbiYmKGF8fGQ8Zikpe3ZhciBwPXRoaXMuX3Byb2dyZXNzO2lmKGsocCkpZm9yKHZhciBnPTA7ZzxwLmxlbmd0aDtnKyspdGModGhpcyxwW2ddLGQsZixsLHUpO2Vsc2UgdGModGhpcyxwLGQsZixsLHUpfXRoaXMuX2R1ZUluZGV4PWY7dmFyIG09bnVsbCE9dGhpcy5fc2V0dGVkT3V0cHV0RW5kP3RoaXMuX3NldHRlZE91dHB1dEVuZDpmO3RoaXMuX291dHB1dER1ZUVuZD1tfWVsc2UgdGhpcy5fZHVlSW5kZXg9dGhpcy5fb3V0cHV0RHVlRW5kPW51bGwhPXRoaXMuX3NldHRlZE91dHB1dEVuZD90aGlzLl9zZXR0ZWRPdXRwdXRFbmQ6dGhpcy5fZHVlRW5kO3JldHVybiB0aGlzLnVuZmluaXNoZWQoKX07dmFyIFVoLFhoLFloLGpoLHFoLEtoLCRoPUtoPXtyZXNldDpmdW5jdGlvbih0LGUsaSxuKXtYaD10LFVoPWUsWWg9aSxqaD1uLHFoPU1hdGguY2VpbChqaC9ZaCksS2gubmV4dD0xPFloJiYwPGpoP1FoOkpofX07ZnVuY3Rpb24gSmgoKXtyZXR1cm4gWGg8VWg/WGgrKzpudWxsfWZ1bmN0aW9uIFFoKCl7dmFyIHQ9WGglcWgqWWgrTWF0aC5jZWlsKFhoL3FoKSxlPVVoPD1YaD9udWxsOnQ8amg/dDpYaDtyZXR1cm4gWGgrKyxlfWZ1bmN0aW9uIHRjKHQsZSxpLG4sbyxhKXskaC5yZXNldChpLG4sbyxhKSx0Ll9jYWxsaW5nUHJvZ3Jlc3M9ZSx0Ll9jYWxsaW5nUHJvZ3Jlc3Moe3N0YXJ0OmksZW5kOm4sY291bnQ6bi1pLG5leHQ6JGgubmV4dH0sdC5jb250ZXh0KX1aaC5kaXJ0eT1mdW5jdGlvbigpe3RoaXMuX2RpcnR5PSEwLHRoaXMuX29uRGlydHkmJnRoaXMuX29uRGlydHkodGhpcy5jb250ZXh0KX0sWmgudW5maW5pc2hlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9ncmVzcyYmdGhpcy5fZHVlSW5kZXg8dGhpcy5fZHVlRW5kfSxaaC5waXBlPWZ1bmN0aW9uKHQpe3RoaXMuX2Rvd25zdHJlYW09PT10JiYhdGhpcy5fZGlydHl8fCgodGhpcy5fZG93bnN0cmVhbT10KS5fdXBzdHJlYW09dGhpcyx0LmRpcnR5KCkpfSxaaC5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZGlzcG9zZWR8fCh0aGlzLl91cHN0cmVhbSYmKHRoaXMuX3Vwc3RyZWFtLl9kb3duc3RyZWFtPW51bGwpLHRoaXMuX2Rvd25zdHJlYW0mJih0aGlzLl9kb3duc3RyZWFtLl91cHN0cmVhbT1udWxsKSx0aGlzLl9kaXJ0eT0hMSx0aGlzLl9kaXNwb3NlZD0hMCl9LFpoLmdldFVwc3RyZWFtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Vwc3RyZWFtfSxaaC5nZXREb3duc3RyZWFtPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rvd25zdHJlYW19LFpoLnNldE91dHB1dEVuZD1mdW5jdGlvbih0KXt0aGlzLl9vdXRwdXREdWVFbmQ9dGhpcy5fc2V0dGVkT3V0cHV0RW5kPXR9O3ZhciBlYz1abygpLGljPVR1LmV4dGVuZCh7dHlwZToic2VyaWVzLl9fYmFzZV9fIixzZXJpZXNJbmRleDowLGNvb3JkaW5hdGVTeXN0ZW06bnVsbCxkZWZhdWx0T3B0aW9uOm51bGwsbGVnZW5kVmlzdWFsUHJvdmlkZXI6bnVsbCx2aXN1YWxDb2xvckFjY2Vzc1BhdGg6Iml0ZW1TdHlsZS5jb2xvciIsdmlzdWFsQm9yZGVyQ29sb3JBY2Nlc3NQYXRoOiJpdGVtU3R5bGUuYm9yZGVyQ29sb3IiLGxheW91dE1vZGU6bnVsbCxpbml0OmZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMuc2VyaWVzSW5kZXg9dGhpcy5jb21wb25lbnRJbmRleCx0aGlzLmRhdGFUYXNrPVdoKHtjb3VudDpvYyxyZXNldDphY30pLHRoaXMuZGF0YVRhc2suY29udGV4dD17bW9kZWw6dGhpc30sdGhpcy5tZXJnZURlZmF1bHRBbmRUaGVtZSh0LGkpLEh1KHRoaXMpO3ZhciBvPXRoaXMuZ2V0SW5pdGlhbERhdGEodCxpKTtzYyhvLHRoaXMpLHRoaXMuZGF0YVRhc2suY29udGV4dC5kYXRhPW8sZWModGhpcykuZGF0YUJlZm9yZVByb2Nlc3NlZD1vLG5jKHRoaXMpfSxtZXJnZURlZmF1bHRBbmRUaGVtZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubGF5b3V0TW9kZSxuPWk/X3UodCk6e30sbz10aGlzLnN1YlR5cGU7VHUuaGFzQ2xhc3MobykmJihvKz0iU2VyaWVzIiksbSh0LGUuZ2V0VGhlbWUoKS5nZXQodGhpcy5zdWJUeXBlKSksbSh0LHRoaXMuZ2V0RGVmYXVsdE9wdGlvbigpKSx6byh0LCJsYWJlbCIsWyJzaG93Il0pLHRoaXMuZmlsbERhdGFUZXh0U3R5bGUodC5kYXRhKSxpJiZ4dSh0LG4saSl9LG1lcmdlT3B0aW9uOmZ1bmN0aW9uKHQsZSl7dD1tKHRoaXMub3B0aW9uLHQsITApLHRoaXMuZmlsbERhdGFUZXh0U3R5bGUodC5kYXRhKTt2YXIgaT10aGlzLmxheW91dE1vZGU7aSYmeHUodGhpcy5vcHRpb24sdCxpKSxIdSh0aGlzKTt2YXIgbj10aGlzLmdldEluaXRpYWxEYXRhKHQsZSk7c2Mobix0aGlzKSx0aGlzLmRhdGFUYXNrLmRpcnR5KCksdGhpcy5kYXRhVGFzay5jb250ZXh0LmRhdGE9bixlYyh0aGlzKS5kYXRhQmVmb3JlUHJvY2Vzc2VkPW4sbmModGhpcyl9LGZpbGxEYXRhVGV4dFN0eWxlOmZ1bmN0aW9uKHQpe2lmKHQmJiFWKHQpKWZvcih2YXIgZT1bInNob3ciXSxpPTA7aTx0Lmxlbmd0aDtpKyspdFtpXSYmdFtpXS5sYWJlbCYmem8odFtpXSwibGFiZWwiLGUpfSxnZXRJbml0aWFsRGF0YTpmdW5jdGlvbigpe30sYXBwZW5kRGF0YTpmdW5jdGlvbih0KXt0aGlzLmdldFJhd0RhdGEoKS5hcHBlbmREYXRhKHQuZGF0YSl9LGdldERhdGE6ZnVuY3Rpb24odCl7dmFyIGU9dWModGhpcyk7aWYoZSl7dmFyIGk9ZS5jb250ZXh0LmRhdGE7cmV0dXJuIG51bGw9PXQ/aTppLmdldExpbmtlZERhdGEodCl9cmV0dXJuIGVjKHRoaXMpLmRhdGF9LHNldERhdGE6ZnVuY3Rpb24odCl7dmFyIGU9dWModGhpcyk7aWYoZSl7dmFyIGk9ZS5jb250ZXh0O2kuZGF0YSE9PXQmJmUubW9kaWZ5T3V0cHV0RW5kJiZlLnNldE91dHB1dEVuZCh0LmNvdW50KCkpLGkub3V0cHV0RGF0YT10LGUhPT10aGlzLmRhdGFUYXNrJiYoaS5kYXRhPXQpfWVjKHRoaXMpLmRhdGE9dH0sZ2V0U291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBXdSh0KS5zb3VyY2V9KHRoaXMpfSxnZXRSYXdEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIGVjKHRoaXMpLmRhdGFCZWZvcmVQcm9jZXNzZWR9LGdldEJhc2VBeGlzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb29yZGluYXRlU3lzdGVtO3JldHVybiB0JiZ0LmdldEJhc2VBeGlzJiZ0LmdldEJhc2VBeGlzKCl9LGZvcm1hdFRvb2x0aXA6ZnVuY3Rpb24obyxoLHQsYyl7dmFyIGQ9dGhpcyxlPSJodG1sIj09PShjPWN8fCJodG1sIik/Ijxici8+IjoiXG4iLGY9InJpY2hUZXh0Ij09PWMscD17fSxnPTA7ZnVuY3Rpb24gaSh0KXtyZXR1cm57cmVuZGVyTW9kZTpjLGNvbnRlbnQ6ZXUoS2wodCkpLHN0eWxlOnB9fXZhciBtPXRoaXMuZ2V0RGF0YSgpLGE9bS5tYXBEaW1lbnNpb24oImRlZmF1bHRlZFRvb2x0aXAiLCEwKSxuPWEubGVuZ3RoLHI9dGhpcy5nZXRSYXdWYWx1ZShvKSxzPWsociksdj1tLmdldEl0ZW1WaXN1YWwobywiY29sb3IiKTtSKHYpJiZ2LmNvbG9yU3RvcHMmJih2PSh2LmNvbG9yU3RvcHNbMF18fHt9KS5jb2xvciksdj12fHwidHJhbnNwYXJlbnQiO3ZhciBsPSgxPG58fHMmJiFuP2Z1bmN0aW9uKHQpe3ZhciBsPVModCxmdW5jdGlvbih0LGUsaSl7dmFyIG49bS5nZXREaW1lbnNpb25JbmZvKGkpO3JldHVybiB0fChuJiYhMSE9PW4udG9vbHRpcCYmbnVsbCE9bi5kaXNwbGF5TmFtZSl9LDApLHU9W107ZnVuY3Rpb24gZSh0LGUpe3ZhciBpPW0uZ2V0RGltZW5zaW9uSW5mbyhlKTtpZihpJiYhMSE9PWkub3RoZXJEaW1zLnRvb2x0aXApe3ZhciBuPWkudHlwZSxvPSJzdWIiK2Quc2VyaWVzSW5kZXgrImF0IitnLGE9cnUoe2NvbG9yOnYsdHlwZToic3ViSXRlbSIscmVuZGVyTW9kZTpjLG1hcmtlcklkOm99KSxyPSJzdHJpbmciPT10eXBlb2YgYT9hOmEuY29udGVudCxzPShsP3IrZXUoaS5kaXNwbGF5TmFtZXx8Ii0iKSsiOiAiOiIiKStldSgib3JkaW5hbCI9PT1uP3QrIiI6InRpbWUiPT09bj9oPyIiOmx1KCJ5eXl5L01NL2RkIGhoOm1tOnNzIix0KTpLbCh0KSk7cyYmdS5wdXNoKHMpLGYmJihwW29dPXYsKytnKX19YS5sZW5ndGg/RShhLGZ1bmN0aW9uKHQpe2UoQmgobSxvLHQpLHQpfSk6RSh0LGUpO3ZhciBpPWw/Zj8iXG4iOiI8YnIvPiI6IiIsbj1pK3Uuam9pbihpfHwiLCAiKTtyZXR1cm57cmVuZGVyTW9kZTpjLGNvbnRlbnQ6bixzdHlsZTpwfX0ocik6aShuP0JoKG0sbyxhWzBdKTpzP3JbMF06cikpLmNvbnRlbnQsdT1kLnNlcmllc0luZGV4KyJhdCIrZyx5PXJ1KHtjb2xvcjp2LHR5cGU6Iml0ZW0iLHJlbmRlck1vZGU6YyxtYXJrZXJJZDp1fSk7cFt1XT12LCsrZzt2YXIgeD1tLmdldE5hbWUobyksXz10aGlzLm5hbWU7Rm8odGhpcyl8fChfPSIiKSxfPV8/ZXUoXykrKGg/IjogIjplKToiIjt2YXIgdz0ic3RyaW5nIj09dHlwZW9mIHk/eTp5LmNvbnRlbnQ7cmV0dXJue2h0bWw6aD93K18rbDpfK3crKHg/ZXUoeCkrIjogIitsOmwpLG1hcmtlcnM6cH19LGlzQW5pbWF0aW9uRW5hYmxlZDpmdW5jdGlvbigpe2lmKHYubm9kZSlyZXR1cm4hMTt2YXIgdD10aGlzLmdldFNoYWxsb3coImFuaW1hdGlvbiIpO3JldHVybiB0JiZ0aGlzLmdldERhdGEoKS5jb3VudCgpPnRoaXMuZ2V0U2hhbGxvdygiYW5pbWF0aW9uVGhyZXNob2xkIikmJih0PSExKSx0fSxyZXN0b3JlRGF0YTpmdW5jdGlvbigpe3RoaXMuZGF0YVRhc2suZGlydHkoKX0sZ2V0Q29sb3JGcm9tUGFsZXR0ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5lY01vZGVsLG89a3UuZ2V0Q29sb3JGcm9tUGFsZXR0ZS5jYWxsKHRoaXMsdCxlLGkpO3JldHVybiBvPW98fG4uZ2V0Q29sb3JGcm9tUGFsZXR0ZSh0LGUsaSl9LGNvb3JkRGltVG9EYXRhRGltOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldFJhd0RhdGEoKS5tYXBEaW1lbnNpb24odCwhMCl9LGdldFByb2dyZXNzaXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KCJwcm9ncmVzc2l2ZSIpfSxnZXRQcm9ncmVzc2l2ZVRocmVzaG9sZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgicHJvZ3Jlc3NpdmVUaHJlc2hvbGQiKX0sZ2V0QXhpc1Rvb2x0aXBEYXRhOm51bGwsZ2V0VG9vbHRpcFBvc2l0aW9uOm51bGwscGlwZVRhc2s6bnVsbCxwcmV2ZW50SW5jcmVtZW50YWw6bnVsbCxwaXBlbGluZUNvbnRleHQ6bnVsbH0pO2Z1bmN0aW9uIG5jKHQpe3ZhciBlPXQubmFtZTtGbyh0KXx8KHQubmFtZT1mdW5jdGlvbih0KXt2YXIgaT10LmdldFJhd0RhdGEoKSxlPWkubWFwRGltZW5zaW9uKCJzZXJpZXNOYW1lIiwhMCksbj1bXTtyZXR1cm4gRShlLGZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0RGltZW5zaW9uSW5mbyh0KTtlLmRpc3BsYXlOYW1lJiZuLnB1c2goZS5kaXNwbGF5TmFtZSl9KSxuLmpvaW4oIiAiKX0odCl8fGUpfWZ1bmN0aW9uIG9jKHQpe3JldHVybiB0Lm1vZGVsLmdldFJhd0RhdGEoKS5jb3VudCgpfWZ1bmN0aW9uIGFjKHQpe3ZhciBlPXQubW9kZWw7cmV0dXJuIGUuc2V0RGF0YShlLmdldFJhd0RhdGEoKS5jbG9uZVNoYWxsb3coKSkscmN9ZnVuY3Rpb24gcmModCxlKXt0LmVuZD5lLm91dHB1dERhdGEuY291bnQoKSYmZS5tb2RlbC5nZXRSYXdEYXRhKCkuY2xvbmVTaGFsbG93KGUub3V0cHV0RGF0YSl9ZnVuY3Rpb24gc2MoZSxpKXtFKGUuQ0hBTkdBQkxFX01FVEhPRFMsZnVuY3Rpb24odCl7ZS53cmFwTWV0aG9kKHQsVChsYyxpKSl9KX1mdW5jdGlvbiBsYyh0KXt2YXIgZT11Yyh0KTtlJiZlLnNldE91dHB1dEVuZCh0aGlzLmNvdW50KCkpfWZ1bmN0aW9uIHVjKHQpe3ZhciBlPSh0LmVjTW9kZWx8fHt9KS5zY2hlZHVsZXIsaT1lJiZlLmdldFBpcGVsaW5lKHQudWlkKTtpZihpKXt2YXIgbj1pLmN1cnJlbnRUYXNrO2lmKG4pe3ZhciBvPW4uYWdlbnRTdHViTWFwO28mJihuPW8uZ2V0KHQudWlkKSl9cmV0dXJuIG59fWIoaWMsRmgpLGIoaWMsa3UpO3ZhciBoYz1mdW5jdGlvbigpe3RoaXMuZ3JvdXA9bmV3IElpLHRoaXMudWlkPUNsKCJ2aWV3Q29tcG9uZW50Iil9O2hjLnByb3RvdHlwZT17Y29uc3RydWN0b3I6aGMsaW5pdDpmdW5jdGlvbih0LGUpe30scmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe30sZGlzcG9zZTpmdW5jdGlvbigpe30sZmlsdGVyRm9yRXhwb3NlZEV2ZW50Om51bGx9O3ZhciBjYz1oYy5wcm90b3R5cGU7Y2MudXBkYXRlVmlldz1jYy51cGRhdGVMYXlvdXQ9Y2MudXBkYXRlVmlzdWFsPWZ1bmN0aW9uKHQsZSxpLG4pe30sdGEoaGMpLGFhKGhjLHtyZWdpc3RlcldoZW5FeHRlbmQ6ITB9KTtmdW5jdGlvbiBkYygpe3ZhciBzPVpvKCk7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXModCksaT10LnBpcGVsaW5lQ29udGV4dCxuPWUubGFyZ2Usbz1lLnByb2dyZXNzaXZlUmVuZGVyLGE9ZS5sYXJnZT1pLmxhcmdlLHI9ZS5wcm9ncmVzc2l2ZVJlbmRlcj1pLnByb2dyZXNzaXZlUmVuZGVyO3JldHVybiEhKG5eYXx8b15yKSYmInJlc2V0In19dmFyIGZjPVpvKCkscGM9ZGMoKTtmdW5jdGlvbiBnYygpe3RoaXMuZ3JvdXA9bmV3IElpLHRoaXMudWlkPUNsKCJ2aWV3Q2hhcnQiKSx0aGlzLnJlbmRlclRhc2s9V2goe3BsYW46eGMscmVzZXQ6X2N9KSx0aGlzLnJlbmRlclRhc2suY29udGV4dD17dmlldzp0aGlzfX12YXIgbWM9Z2MucHJvdG90eXBlPXt0eXBlOiJjaGFydCIsaW5pdDpmdW5jdGlvbih0LGUpe30scmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe30saGlnaGxpZ2h0OmZ1bmN0aW9uKHQsZSxpLG4pe3ljKHQuZ2V0RGF0YSgpLG4sImVtcGhhc2lzIil9LGRvd25wbGF5OmZ1bmN0aW9uKHQsZSxpLG4pe3ljKHQuZ2V0RGF0YSgpLG4sIm5vcm1hbCIpfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXt0aGlzLmdyb3VwLnJlbW92ZUFsbCgpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7fSxpbmNyZW1lbnRhbFByZXBhcmVSZW5kZXI6bnVsbCxpbmNyZW1lbnRhbFJlbmRlcjpudWxsLHVwZGF0ZVRyYW5zZm9ybTpudWxsLGZpbHRlckZvckV4cG9zZWRFdmVudDpudWxsfTtmdW5jdGlvbiB2Yyh0LGUsaSl7aWYodCYmKHQudHJpZ2dlcihlLGkpLHQuaXNHcm91cCYmIXFzKHQpKSlmb3IodmFyIG49MCxvPXQuY2hpbGRDb3VudCgpO248bztuKyspdmModC5jaGlsZEF0KG4pLGUsaSl9ZnVuY3Rpb24geWMoZSx0LGkpe3ZhciBuPUhvKGUsdCksbz10JiZudWxsIT10LmhpZ2hsaWdodEtleT9Lcyh0LmhpZ2hsaWdodEtleSk6bnVsbDtudWxsIT1uP0UoRW8obiksZnVuY3Rpb24odCl7dmMoZS5nZXRJdGVtR3JhcGhpY0VsKHQpLGksbyl9KTplLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQpe3ZjKHQsaSxvKX0pfWZ1bmN0aW9uIHhjKHQpe3JldHVybiBwYyh0Lm1vZGVsKX1mdW5jdGlvbiBfYyh0KXt2YXIgZT10Lm1vZGVsLGk9dC5lY01vZGVsLG49dC5hcGksbz10LnBheWxvYWQsYT1lLnBpcGVsaW5lQ29udGV4dC5wcm9ncmVzc2l2ZVJlbmRlcixyPXQudmlldyxzPW8mJmZjKG8pLnVwZGF0ZU1ldGhvZCxsPWE/ImluY3JlbWVudGFsUHJlcGFyZVJlbmRlciI6cyYmcltzXT9zOiJyZW5kZXIiO3JldHVybiJyZW5kZXIiIT09bCYmcltsXShlLGksbixvKSx3Y1tsXX1tYy51cGRhdGVWaWV3PW1jLnVwZGF0ZUxheW91dD1tYy51cGRhdGVWaXN1YWw9ZnVuY3Rpb24odCxlLGksbil7dGhpcy5yZW5kZXIodCxlLGksbil9LHRhKGdjKSxhYShnYyx7cmVnaXN0ZXJXaGVuRXh0ZW5kOiEwfSksZ2MubWFya1VwZGF0ZU1ldGhvZD1mdW5jdGlvbih0LGUpe2ZjKHQpLnVwZGF0ZU1ldGhvZD1lfTt2YXIgd2M9e2luY3JlbWVudGFsUHJlcGFyZVJlbmRlcjp7cHJvZ3Jlc3M6ZnVuY3Rpb24odCxlKXtlLnZpZXcuaW5jcmVtZW50YWxSZW5kZXIodCxlLm1vZGVsLGUuZWNNb2RlbCxlLmFwaSxlLnBheWxvYWQpfX0scmVuZGVyOntmb3JjZUZpcnN0UHJvZ3Jlc3M6ITAscHJvZ3Jlc3M6ZnVuY3Rpb24odCxlKXtlLnZpZXcucmVuZGVyKGUubW9kZWwsZS5lY01vZGVsLGUuYXBpLGUucGF5bG9hZCl9fX0sYmM9IlwwX190aHJvdHRsZU9yaWdpbk1ldGhvZCIsU2M9IlwwX190aHJvdHRsZVJhdGUiLE1jPSJcMF9fdGhyb3R0bGVUeXBlIjtmdW5jdGlvbiBJYyh0LGksbil7dmFyIG8sYSxyLHMsbCx1PTAsaD0wLGM9bnVsbDtmdW5jdGlvbiBkKCl7aD0obmV3IERhdGUpLmdldFRpbWUoKSxjPW51bGwsdC5hcHBseShyLHN8fFtdKX1pPWl8fDA7ZnVuY3Rpb24gZSgpe289KG5ldyBEYXRlKS5nZXRUaW1lKCkscj10aGlzLHM9YXJndW1lbnRzO3ZhciB0PWx8fGksZT1sfHxuO2w9bnVsbCxhPW8tKGU/dTpoKS10LGNsZWFyVGltZW91dChjKSxlP2M9c2V0VGltZW91dChkLHQpOjA8PWE/ZCgpOmM9c2V0VGltZW91dChkLC1hKSx1PW99cmV0dXJuIGUuY2xlYXI9ZnVuY3Rpb24oKXtjJiYoY2xlYXJUaW1lb3V0KGMpLGM9bnVsbCl9LGUuZGVib3VuY2VOZXh0Q2FsbD1mdW5jdGlvbih0KXtsPXR9LGV9ZnVuY3Rpb24gVGModCxlLGksbil7dmFyIG89dFtlXTtpZihvKXt2YXIgYT1vW2JjXXx8byxyPW9bTWNdO2lmKG9bU2NdIT09aXx8ciE9PW4pe2lmKG51bGw9PWl8fCFuKXJldHVybiB0W2VdPWE7KG89dFtlXT1JYyhhLGksImRlYm91bmNlIj09PW4pKVtiY109YSxvW01jXT1uLG9bU2NdPWl9cmV0dXJuIG99fWZ1bmN0aW9uIEFjKHQsZSl7dmFyIGk9dFtlXTtpJiZpW2JjXSYmKHRbZV09aVtiY10pfXZhciBEYz17Y3JlYXRlT25BbGxTZXJpZXM6ITAscGVyZm9ybVJhd1NlcmllczohMCxyZXNldDpmdW5jdGlvbihlLHQpe3ZhciBpPWUuZ2V0RGF0YSgpLGE9KGUudmlzdWFsQ29sb3JBY2Nlc3NQYXRofHwiaXRlbVN0eWxlLmNvbG9yIikuc3BsaXQoIi4iKSxuPWUuZ2V0KGEpLG89IU8obil8fG4gaW5zdGFuY2VvZiBzcz9udWxsOm47biYmIW98fChuPWUuZ2V0Q29sb3JGcm9tUGFsZXR0ZShlLm5hbWUsbnVsbCx0LmdldFNlcmllc0NvdW50KCkpKSxpLnNldFZpc3VhbCgiY29sb3IiLG4pO3ZhciByPShlLnZpc3VhbEJvcmRlckNvbG9yQWNjZXNzUGF0aHx8Iml0ZW1TdHlsZS5ib3JkZXJDb2xvciIpLnNwbGl0KCIuIikscz1lLmdldChyKTtpZihpLnNldFZpc3VhbCgiYm9yZGVyQ29sb3IiLHMpLCF0LmlzU2VyaWVzRmlsdGVyZWQoZSkpe28mJmkuZWFjaChmdW5jdGlvbih0KXtpLnNldEl0ZW1WaXN1YWwodCwiY29sb3IiLG8oZS5nZXREYXRhUGFyYW1zKHQpKSl9KTtyZXR1cm57ZGF0YUVhY2g6aS5oYXNJdGVtT3B0aW9uP2Z1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXRJdGVtTW9kZWwoZSksbj1pLmdldChhLCEwKSxvPWkuZ2V0KHIsITApO251bGwhPW4mJnQuc2V0SXRlbVZpc3VhbChlLCJjb2xvciIsbiksbnVsbCE9byYmdC5zZXRJdGVtVmlzdWFsKGUsImJvcmRlckNvbG9yIixvKX06bnVsbH19fX0sQ2M9e2xlZ2VuZDp7c2VsZWN0b3I6e2FsbDoi5YWo6YCJIixpbnZlcnNlOiLlj43pgIkifX0sdG9vbGJveDp7YnJ1c2g6e3RpdGxlOntyZWN0OiLnn6nlvaLpgInmi6kiLHBvbHlnb246IuWciOmAiSIsbGluZVg6IuaoquWQkemAieaLqSIsbGluZVk6Iue6teWQkemAieaLqSIsa2VlcDoi5L+d5oyB6YCJ5oupIixjbGVhcjoi5riF6Zmk6YCJ5oupIn19LGRhdGFWaWV3Ont0aXRsZToi5pWw5o2u6KeG5Zu+IixsYW5nOlsi5pWw5o2u6KeG5Zu+Iiwi5YWz6ZetIiwi5Yi35pawIl19LGRhdGFab29tOnt0aXRsZTp7em9vbToi5Yy65Z+f57yp5pS+IixiYWNrOiLljLrln5/nvKnmlL7ov5jljp8ifX0sbWFnaWNUeXBlOnt0aXRsZTp7bGluZToi5YiH5o2i5Li65oqY57q/5Zu+IixiYXI6IuWIh+aNouS4uuafseeKtuWbviIsc3RhY2s6IuWIh+aNouS4uuWghuWPoCIsdGlsZWQ6IuWIh+aNouS4uuW5s+mTuiJ9fSxyZXN0b3JlOnt0aXRsZToi6L+Y5Y6fIn0sc2F2ZUFzSW1hZ2U6e3RpdGxlOiLkv53lrZjkuLrlm77niYciLGxhbmc6WyLlj7PplK7lj6blrZjkuLrlm77niYciXX19LHNlcmllczp7dHlwZU5hbWVzOntwaWU6IumlvOWbviIsYmFyOiLmn7Hnirblm74iLGxpbmU6IuaKmOe6v+WbviIsc2NhdHRlcjoi5pWj54K55Zu+IixlZmZlY3RTY2F0dGVyOiLmtp/mvKrmlaPngrnlm74iLHJhZGFyOiLpm7fovr7lm74iLHRyZWU6IuagkeWbviIsdHJlZW1hcDoi55+p5b2i5qCR5Zu+Iixib3hwbG90OiLnrrHlnovlm74iLGNhbmRsZXN0aWNrOiJL57q/5Zu+IixrOiJL57q/5Zu+IixoZWF0bWFwOiLng63lipvlm74iLG1hcDoi5Zyw5Zu+IixwYXJhbGxlbDoi5bmz6KGM5Z2Q5qCH5Zu+IixsaW5lczoi57q/5Zu+IixncmFwaDoi5YWz57O75Zu+IixzYW5rZXk6IuahkeWfuuWbviIsZnVubmVsOiLmvI/mlpflm74iLGdhdWdlOiLku6rooajnm5jlm74iLHBpY3RvcmlhbEJhcjoi6LGh5b2i5p+x5Zu+Iix0aGVtZVJpdmVyOiLkuLvpopjmsrPmtYHlm74iLHN1bmJ1cnN0OiLml63ml6Xlm74ifX0sYXJpYTp7Z2VuZXJhbDp7d2l0aFRpdGxlOiLov5nmmK/kuIDkuKrlhbPkuo7igJx7dGl0bGV94oCd55qE5Zu+6KGo44CCIix3aXRob3V0VGl0bGU6Iui/meaYr+S4gOS4quWbvuihqO+8jCJ9LHNlcmllczp7c2luZ2xlOntwcmVmaXg6IiIsd2l0aE5hbWU6IuWbvuihqOexu+Wei+aYr3tzZXJpZXNUeXBlfe+8jOihqOekuntzZXJpZXNOYW1lfeOAgiIsd2l0aG91dE5hbWU6IuWbvuihqOexu+Wei+aYr3tzZXJpZXNUeXBlfeOAgiJ9LG11bHRpcGxlOntwcmVmaXg6IuWug+eUsXtzZXJpZXNDb3VudH3kuKrlm77ooajns7vliJfnu4TmiJDjgIIiLHdpdGhOYW1lOiLnrKx7c2VyaWVzSWR95Liq57O75YiX5piv5LiA5Liq6KGo56S6e3Nlcmllc05hbWV955qEe3Nlcmllc1R5cGV977yMIix3aXRob3V0TmFtZToi56yse3Nlcmllc0lkfeS4quezu+WIl+aYr+S4gOS4qntzZXJpZXNUeXBlfe+8jCIsc2VwYXJhdG9yOnttaWRkbGU6Iu+8myIsZW5kOiLjgIIifX19LGRhdGE6e2FsbERhdGE6IuWFtuaVsOaNruaYr+KAlOKAlCIscGFydGlhbERhdGE6IuWFtuS4re+8jOWJjXtkaXNwbGF5Q250femhueaYr+KAlOKAlCIsd2l0aE5hbWU6IntuYW1lfeeahOaVsOaNruaYr3t2YWx1ZX0iLHdpdGhvdXROYW1lOiJ7dmFsdWV9IixzZXBhcmF0b3I6e21pZGRsZToi77yMIixlbmQ6IiJ9fX19LExjPWZ1bmN0aW9uKHQsZSl7dmFyIGE9ZS5nZXRNb2RlbCgiYXJpYSIpO2lmKGEuZ2V0KCJzaG93IikpaWYoYS5nZXQoImRlc2NyaXB0aW9uIikpdC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLGEuZ2V0KCJkZXNjcmlwdGlvbiIpKTtlbHNle3ZhciBoPTA7ZS5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQsZSl7KytofSx0aGlzKTt2YXIgaSxjPWEuZ2V0KCJkYXRhLm1heENvdW50Iil8fDEwLG49YS5nZXQoInNlcmllcy5tYXhDb3VudCIpfHwxMCxkPU1hdGgubWluKGgsbik7aWYoIShoPDEpKXt2YXIgbz1mdW5jdGlvbigpe3ZhciB0PWUuZ2V0TW9kZWwoInRpdGxlIikub3B0aW9uO3QmJnQubGVuZ3RoJiYodD10WzBdKTtyZXR1cm4gdCYmdC50ZXh0fSgpO2k9bz9wKGcoImdlbmVyYWwud2l0aFRpdGxlIikse3RpdGxlOm99KTpnKCJnZW5lcmFsLndpdGhvdXRUaXRsZSIpO3ZhciBmPVtdO2krPXAoZygxPGg/InNlcmllcy5tdWx0aXBsZS5wcmVmaXgiOiJzZXJpZXMuc2luZ2xlLnByZWZpeCIpLHtzZXJpZXNDb3VudDpofSksZS5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQsZSl7aWYoZTxkKXt2YXIgaSxuPXQuZ2V0KCJuYW1lIiksbz0ic2VyaWVzLiIrKDE8aD8ibXVsdGlwbGUiOiJzaW5nbGUiKSsiLiI7aT1wKGk9ZyhuP28rIndpdGhOYW1lIjpvKyJ3aXRob3V0TmFtZSIpLHtzZXJpZXNJZDp0LnNlcmllc0luZGV4LHNlcmllc05hbWU6dC5nZXQoIm5hbWUiKSxzZXJpZXNUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiBDYy5zZXJpZXMudHlwZU5hbWVzW3RdfHwi6Ieq5a6a5LmJ5Zu+In0odC5zdWJUeXBlKX0pO3ZhciBhPXQuZ2V0RGF0YSgpOyh3aW5kb3cuZGF0YT1hKS5jb3VudCgpPmM/aSs9cChnKCJkYXRhLnBhcnRpYWxEYXRhIikse2Rpc3BsYXlDbnQ6Y30pOmkrPWcoImRhdGEuYWxsRGF0YSIpO2Zvcih2YXIgcj1bXSxzPTA7czxhLmNvdW50KCk7cysrKWlmKHM8Yyl7dmFyIGw9YS5nZXROYW1lKHMpLHU9QmgoYSxzKTtyLnB1c2gocChnKGw/ImRhdGEud2l0aE5hbWUiOiJkYXRhLndpdGhvdXROYW1lIikse25hbWU6bCx2YWx1ZTp1fSkpfWkrPXIuam9pbihnKCJkYXRhLnNlcGFyYXRvci5taWRkbGUiKSkrZygiZGF0YS5zZXBhcmF0b3IuZW5kIiksZi5wdXNoKGkpfX0pLGkrPWYuam9pbihnKCJzZXJpZXMubXVsdGlwbGUuc2VwYXJhdG9yLm1pZGRsZSIpKStnKCJzZXJpZXMubXVsdGlwbGUuc2VwYXJhdG9yLmVuZCIpLHQuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixpKX19ZnVuY3Rpb24gcCh0LGUpe2lmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gdDt2YXIgaT10O3JldHVybiBFKGUsZnVuY3Rpb24odCxlKXtpPWkucmVwbGFjZShuZXcgUmVnRXhwKCJcXHtcXHMqIitlKyJcXHMqXFx9IiwiZyIpLHQpfSksaX1mdW5jdGlvbiBnKHQpe3ZhciBlPWEuZ2V0KHQpO2lmKG51bGwhPWUpcmV0dXJuIGU7Zm9yKHZhciBpPXQuc3BsaXQoIi4iKSxuPUNjLmFyaWEsbz0wO288aS5sZW5ndGg7KytvKW49bltpW29dXTtyZXR1cm4gbn19LGtjPU1hdGguUEk7ZnVuY3Rpb24gUGModCxlLGksbil7dGhpcy5lY0luc3RhbmNlPXQsdGhpcy5hcGk9ZSx0aGlzLnVuZmluaXNoZWQ7aT10aGlzLl9kYXRhUHJvY2Vzc29ySGFuZGxlcnM9aS5zbGljZSgpLG49dGhpcy5fdmlzdWFsSGFuZGxlcnM9bi5zbGljZSgpO3RoaXMuX2FsbEhhbmRsZXJzPWkuY29uY2F0KG4pLHRoaXMuX3N0YWdlVGFza01hcD1RKCl9dmFyIE5jPVBjLnByb3RvdHlwZTtmdW5jdGlvbiBPYyhsLHQsdSxoLGMpe3ZhciBkO2Z1bmN0aW9uIGYodCxlKXtyZXR1cm4gdC5zZXREaXJ0eSYmKCF0LmRpcnR5TWFwfHx0LmRpcnR5TWFwLmdldChlLl9fcGlwZWxpbmUuaWQpKX1jPWN8fHt9LEUodCxmdW5jdGlvbihuLHQpe2lmKCFjLnZpc3VhbFR5cGV8fGMudmlzdWFsVHlwZT09PW4udmlzdWFsVHlwZSl7dmFyIGU9bC5fc3RhZ2VUYXNrTWFwLmdldChuLnVpZCksaT1lLnNlcmllc1Rhc2tNYXAsbz1lLm92ZXJhbGxUYXNrO2lmKG8pe3ZhciBhLHI9by5hZ2VudFN0dWJNYXA7ci5lYWNoKGZ1bmN0aW9uKHQpe2YoYyx0KSYmKHQuZGlydHkoKSxhPSEwKX0pLGEmJm8uZGlydHkoKSxFYyhvLGgpO3ZhciBzPWwuZ2V0UGVyZm9ybUFyZ3MobyxjLmJsb2NrKTtyLmVhY2goZnVuY3Rpb24odCl7dC5wZXJmb3JtKHMpfSksZHw9by5wZXJmb3JtKHMpfWVsc2UgaSYmaS5lYWNoKGZ1bmN0aW9uKHQsZSl7ZihjLHQpJiZ0LmRpcnR5KCk7dmFyIGk9bC5nZXRQZXJmb3JtQXJncyh0LGMuYmxvY2spO2kuc2tpcD0hbi5wZXJmb3JtUmF3U2VyaWVzJiZ1LmlzU2VyaWVzRmlsdGVyZWQodC5jb250ZXh0Lm1vZGVsKSxFYyh0LGgpLGR8PXQucGVyZm9ybShpKX0pfX0pLGwudW5maW5pc2hlZHw9ZH1OYy5yZXN0b3JlRGF0YT1mdW5jdGlvbih0LGUpe3QucmVzdG9yZURhdGEoZSksdGhpcy5fc3RhZ2VUYXNrTWFwLmVhY2goZnVuY3Rpb24odCl7dmFyIGU9dC5vdmVyYWxsVGFzaztlJiZlLmRpcnR5KCl9KX0sTmMuZ2V0UGVyZm9ybUFyZ3M9ZnVuY3Rpb24odCxlKXtpZih0Ll9fcGlwZWxpbmUpe3ZhciBpPXRoaXMuX3BpcGVsaW5lTWFwLmdldCh0Ll9fcGlwZWxpbmUuaWQpLG49aS5jb250ZXh0LG89IWUmJmkucHJvZ3Jlc3NpdmVFbmFibGVkJiYoIW58fG4ucHJvZ3Jlc3NpdmVSZW5kZXIpJiZ0Ll9faWR4SW5QaXBlbGluZT5pLmJsb2NrSW5kZXg/aS5zdGVwOm51bGwsYT1uJiZuLm1vZERhdGFDb3VudDtyZXR1cm57c3RlcDpvLG1vZEJ5Om51bGwhPWE/TWF0aC5jZWlsKGEvbyk6bnVsbCxtb2REYXRhQ291bnQ6YX19fSxOYy5nZXRQaXBlbGluZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcGlwZWxpbmVNYXAuZ2V0KHQpfSxOYy51cGRhdGVTdHJlYW1Nb2Rlcz1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3BpcGVsaW5lTWFwLmdldCh0LnVpZCksbj10LmdldERhdGEoKS5jb3VudCgpLG89aS5wcm9ncmVzc2l2ZUVuYWJsZWQmJmUuaW5jcmVtZW50YWxQcmVwYXJlUmVuZGVyJiZuPj1pLnRocmVzaG9sZCxhPXQuZ2V0KCJsYXJnZSIpJiZuPj10LmdldCgibGFyZ2VUaHJlc2hvbGQiKSxyPSJtb2QiPT09dC5nZXQoInByb2dyZXNzaXZlQ2h1bmtNb2RlIik/bjpudWxsO3QucGlwZWxpbmVDb250ZXh0PWkuY29udGV4dD17cHJvZ3Jlc3NpdmVSZW5kZXI6byxtb2REYXRhQ291bnQ6cixsYXJnZTphfX0sTmMucmVzdG9yZVBpcGVsaW5lcz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLG89bi5fcGlwZWxpbmVNYXA9USgpO3QuZWFjaFNlcmllcyhmdW5jdGlvbih0KXt2YXIgZT10LmdldFByb2dyZXNzaXZlKCksaT10LnVpZDtvLnNldChpLHtpZDppLGhlYWQ6bnVsbCx0YWlsOm51bGwsdGhyZXNob2xkOnQuZ2V0UHJvZ3Jlc3NpdmVUaHJlc2hvbGQoKSxwcm9ncmVzc2l2ZUVuYWJsZWQ6ZSYmISh0LnByZXZlbnRJbmNyZW1lbnRhbCYmdC5wcmV2ZW50SW5jcmVtZW50YWwoKSksYmxvY2tJbmRleDotMSxzdGVwOk1hdGgucm91bmQoZXx8NzAwKSxjb3VudDowfSksVWMobix0LHQuZGF0YVRhc2spfSl9LE5jLnByZXBhcmVTdGFnZVRhc2tzPWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5fc3RhZ2VUYXNrTWFwLG49dGhpcy5lY0luc3RhbmNlLmdldE1vZGVsKCksbz10aGlzLmFwaTtFKHRoaXMuX2FsbEhhbmRsZXJzLGZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0KHQudWlkKXx8aS5zZXQodC51aWQsW10pO3QucmVzZXQmJmZ1bmN0aW9uKG4sbyx0LGEscil7dmFyIHM9dC5zZXJpZXNUYXNrTWFwfHwodC5zZXJpZXNUYXNrTWFwPVEoKSksZT1vLnNlcmllc1R5cGUsaT1vLmdldFRhcmdldFNlcmllcztvLmNyZWF0ZU9uQWxsU2VyaWVzP2EuZWFjaFJhd1NlcmllcyhsKTplP2EuZWFjaFJhd1Nlcmllc0J5VHlwZShlLGwpOmkmJmkoYSxyKS5lYWNoKGwpO2Z1bmN0aW9uIGwodCl7dmFyIGU9dC51aWQsaT1zLmdldChlKXx8cy5zZXQoZSxXaCh7cGxhbjpHYyxyZXNldDpGYyxjb3VudDpaY30pKTtpLmNvbnRleHQ9e21vZGVsOnQsZWNNb2RlbDphLGFwaTpyLHVzZUNsZWFyVmlzdWFsOm8uaXNWaXN1YWwmJiFvLmlzTGF5b3V0LHBsYW46by5wbGFuLHJlc2V0Om8ucmVzZXQsc2NoZWR1bGVyOm59LFVjKG4sdCxpKX12YXIgdT1uLl9waXBlbGluZU1hcDtzLmVhY2goZnVuY3Rpb24odCxlKXt1LmdldChlKXx8KHQuZGlzcG9zZSgpLHMucmVtb3ZlS2V5KGUpKX0pfSh0aGlzLHQsZSxuLG8pLHQub3ZlcmFsbFJlc2V0JiZmdW5jdGlvbihuLHQsZSxpLG8pe3ZhciBhPWUub3ZlcmFsbFRhc2s9ZS5vdmVyYWxsVGFza3x8V2goe3Jlc2V0OnpjfSk7YS5jb250ZXh0PXtlY01vZGVsOmksYXBpOm8sb3ZlcmFsbFJlc2V0OnQub3ZlcmFsbFJlc2V0LHNjaGVkdWxlcjpufTt2YXIgcj1hLmFnZW50U3R1Yk1hcD1hLmFnZW50U3R1Yk1hcHx8USgpLHM9dC5zZXJpZXNUeXBlLGw9dC5nZXRUYXJnZXRTZXJpZXMsdT0hMCxoPXQubW9kaWZ5T3V0cHV0RW5kO3M/aS5lYWNoUmF3U2VyaWVzQnlUeXBlKHMsYyk6bD9sKGksbykuZWFjaChjKToodT0hMSxFKGkuZ2V0U2VyaWVzKCksYykpO2Z1bmN0aW9uIGModCl7dmFyIGU9dC51aWQsaT1yLmdldChlKTtpfHwoaT1yLnNldChlLFdoKHtyZXNldDpSYyxvbkRpcnR5OlZjfSkpLGEuZGlydHkoKSksaS5jb250ZXh0PXttb2RlbDp0LG92ZXJhbGxQcm9ncmVzczp1LG1vZGlmeU91dHB1dEVuZDpofSxpLmFnZW50PWEsaS5fX2Jsb2NrPXUsVWMobix0LGkpfXZhciBkPW4uX3BpcGVsaW5lTWFwO3IuZWFjaChmdW5jdGlvbih0LGUpe2QuZ2V0KGUpfHwodC5kaXNwb3NlKCksYS5kaXJ0eSgpLHIucmVtb3ZlS2V5KGUpKX0pfSh0aGlzLHQsZSxuLG8pfSx0aGlzKX0sTmMucHJlcGFyZVZpZXc9ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dC5yZW5kZXJUYXNrLGE9by5jb250ZXh0O2EubW9kZWw9ZSxhLmVjTW9kZWw9aSxhLmFwaT1uLG8uX19ibG9jaz0hdC5pbmNyZW1lbnRhbFByZXBhcmVSZW5kZXIsVWModGhpcyxlLG8pfSxOYy5wZXJmb3JtRGF0YVByb2Nlc3NvclRhc2tzPWZ1bmN0aW9uKHQsZSl7T2ModGhpcyx0aGlzLl9kYXRhUHJvY2Vzc29ySGFuZGxlcnMsdCxlLHtibG9jazohMH0pfSxOYy5wZXJmb3JtVmlzdWFsVGFza3M9ZnVuY3Rpb24odCxlLGkpe09jKHRoaXMsdGhpcy5fdmlzdWFsSGFuZGxlcnMsdCxlLGkpfSxOYy5wZXJmb3JtU2VyaWVzVGFza3M9ZnVuY3Rpb24odCl7dmFyIGU7dC5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQpe2V8PXQuZGF0YVRhc2sucGVyZm9ybSgpfSksdGhpcy51bmZpbmlzaGVkfD1lfSxOYy5wbGFuPWZ1bmN0aW9uKCl7dGhpcy5fcGlwZWxpbmVNYXAuZWFjaChmdW5jdGlvbih0KXt2YXIgZT10LnRhaWw7ZG97aWYoZS5fX2Jsb2NrKXt0LmJsb2NrSW5kZXg9ZS5fX2lkeEluUGlwZWxpbmU7YnJlYWt9ZT1lLmdldFVwc3RyZWFtKCl9d2hpbGUoZSl9KX07dmFyIEVjPU5jLnVwZGF0ZVBheWxvYWQ9ZnVuY3Rpb24odCxlKXsicmVtYWluIiE9PWUmJih0LmNvbnRleHQucGF5bG9hZD1lKX07ZnVuY3Rpb24gemModCl7dC5vdmVyYWxsUmVzZXQodC5lY01vZGVsLHQuYXBpLHQucGF5bG9hZCl9ZnVuY3Rpb24gUmModCxlKXtyZXR1cm4gdC5vdmVyYWxsUHJvZ3Jlc3MmJkJjfWZ1bmN0aW9uIEJjKCl7dGhpcy5hZ2VudC5kaXJ0eSgpLHRoaXMuZ2V0RG93bnN0cmVhbSgpLmRpcnR5KCl9ZnVuY3Rpb24gVmMoKXt0aGlzLmFnZW50JiZ0aGlzLmFnZW50LmRpcnR5KCl9ZnVuY3Rpb24gR2ModCl7cmV0dXJuIHQucGxhbiYmdC5wbGFuKHQubW9kZWwsdC5lY01vZGVsLHQuYXBpLHQucGF5bG9hZCl9ZnVuY3Rpb24gRmModCl7dC51c2VDbGVhclZpc3VhbCYmdC5kYXRhLmNsZWFyQWxsVmlzdWFsKCk7dmFyIGU9dC5yZXNldERlZmluZXM9RW8odC5yZXNldCh0Lm1vZGVsLHQuZWNNb2RlbCx0LmFwaSx0LnBheWxvYWQpKTtyZXR1cm4gMTxlLmxlbmd0aD9OKGUsZnVuY3Rpb24odCxlKXtyZXR1cm4gSGMoZSl9KTpXY312YXIgV2M9SGMoMCk7ZnVuY3Rpb24gSGMoYSl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5kYXRhLG49ZS5yZXNldERlZmluZXNbYV07aWYobiYmbi5kYXRhRWFjaClmb3IodmFyIG89dC5zdGFydDtvPHQuZW5kO28rKyluLmRhdGFFYWNoKGksbyk7ZWxzZSBuJiZuLnByb2dyZXNzJiZuLnByb2dyZXNzKHQsaSl9fWZ1bmN0aW9uIFpjKHQpe3JldHVybiB0LmRhdGEuY291bnQoKX1mdW5jdGlvbiBVYyh0LGUsaSl7dmFyIG49ZS51aWQsbz10Ll9waXBlbGluZU1hcC5nZXQobik7by5oZWFkfHwoby5oZWFkPWkpLG8udGFpbCYmby50YWlsLnBpcGUoaSksKG8udGFpbD1pKS5fX2lkeEluUGlwZWxpbmU9by5jb3VudCsrLGkuX19waXBlbGluZT1vfVBjLndyYXBTdGFnZUhhbmRsZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTyh0KSYmKHQ9e292ZXJhbGxSZXNldDp0LHNlcmllc1R5cGU6ZnVuY3Rpb24odCl7WGM9bnVsbDt0cnl7dChZYyxqYyl9Y2F0Y2godCl7fXJldHVybiBYY30odCl9KSx0LnVpZD1DbCgic3RhZ2VIYW5kbGVyIiksZSYmKHQudmlzdWFsVHlwZT1lKSx0fTt2YXIgWGMsWWM9e30samM9e307ZnVuY3Rpb24gcWModCxlKXtmb3IodmFyIGkgaW4gZS5wcm90b3R5cGUpdFtpXT1ldH1xYyhZYywkdSkscWMoamMsZWgpLFljLmVhY2hTZXJpZXNCeVR5cGU9WWMuZWFjaFJhd1Nlcmllc0J5VHlwZT1mdW5jdGlvbih0KXtYYz10fSxZYy5lYWNoQ29tcG9uZW50PWZ1bmN0aW9uKHQpeyJzZXJpZXMiPT09dC5tYWluVHlwZSYmdC5zdWJUeXBlJiYoWGM9dC5zdWJUeXBlKX07ZnVuY3Rpb24gS2MoKXtyZXR1cm57YXhpc0xpbmU6e2xpbmVTdHlsZTp7Y29sb3I6UWN9fSxheGlzVGljazp7bGluZVN0eWxlOntjb2xvcjpRY319LGF4aXNMYWJlbDp7dGV4dFN0eWxlOntjb2xvcjpRY319LHNwbGl0TGluZTp7bGluZVN0eWxlOnt0eXBlOiJkYXNoZWQiLGNvbG9yOiIjYWFhIn19LHNwbGl0QXJlYTp7YXJlYVN0eWxlOntjb2xvcjpRY319fX12YXIgJGM9WyIjMzdBMkRBIiwiIzMyQzVFOSIsIiM2N0UwRTMiLCIjOUZFNkI4IiwiI0ZGREI1QyIsIiNmZjlmN2YiLCIjZmI3MjkzIiwiI0UwNjJBRSIsIiNFNjkwRDEiLCIjZTdiY2YzIiwiIzlkOTZmNSIsIiM4Mzc4RUEiLCIjOTZCRkZGIl0sSmM9e2NvbG9yOiRjLGNvbG9yTGF5ZXI6W1siIzM3QTJEQSIsIiNmZmQ4NWMiLCIjZmQ3YjVmIl0sWyIjMzdBMkRBIiwiIzY3RTBFMyIsIiNGRkRCNUMiLCIjZmY5ZjdmIiwiI0UwNjJBRSIsIiM5ZDk2ZjUiXSxbIiMzN0EyREEiLCIjMzJDNUU5IiwiIzlGRTZCOCIsIiNGRkRCNUMiLCIjZmY5ZjdmIiwiI2ZiNzI5MyIsIiNlN2JjZjMiLCIjODM3OEVBIiwiIzk2QkZGRiJdLCRjXX0sUWM9IiNlZWUiLHRkPVsiI2RkNmI2NiIsIiM3NTlhYTAiLCIjZTY5ZDg3IiwiIzhkYzFhOSIsIiNlYTdlNTMiLCIjZWVkZDc4IiwiIzczYTM3MyIsIiM3M2I5YmMiLCIjNzI4OWFiIiwiIzkxY2E4YyIsIiNmNDlmNDIiXSxlZD17Y29sb3I6dGQsYmFja2dyb3VuZENvbG9yOiIjMzMzIix0b29sdGlwOntheGlzUG9pbnRlcjp7bGluZVN0eWxlOntjb2xvcjpRY30sY3Jvc3NTdHlsZTp7Y29sb3I6UWN9LGxhYmVsOntjb2xvcjoiIzAwMCJ9fX0sbGVnZW5kOnt0ZXh0U3R5bGU6e2NvbG9yOlFjfX0sdGV4dFN0eWxlOntjb2xvcjpRY30sdGl0bGU6e3RleHRTdHlsZTp7Y29sb3I6UWN9fSx0b29sYm94OntpY29uU3R5bGU6e25vcm1hbDp7Ym9yZGVyQ29sb3I6UWN9fX0sZGF0YVpvb206e3RleHRTdHlsZTp7Y29sb3I6UWN9fSx2aXN1YWxNYXA6e3RleHRTdHlsZTp7Y29sb3I6UWN9fSx0aW1lbGluZTp7bGluZVN0eWxlOntjb2xvcjpRY30saXRlbVN0eWxlOntub3JtYWw6e2NvbG9yOnRkWzFdfX0sbGFiZWw6e25vcm1hbDp7dGV4dFN0eWxlOntjb2xvcjpRY319fSxjb250cm9sU3R5bGU6e25vcm1hbDp7Y29sb3I6UWMsYm9yZGVyQ29sb3I6UWN9fX0sdGltZUF4aXM6S2MoKSxsb2dBeGlzOktjKCksdmFsdWVBeGlzOktjKCksY2F0ZWdvcnlBeGlzOktjKCksbGluZTp7c3ltYm9sOiJjaXJjbGUifSxncmFwaDp7Y29sb3I6dGR9LGdhdWdlOnt0aXRsZTp7dGV4dFN0eWxlOntjb2xvcjpRY319fSxjYW5kbGVzdGljazp7aXRlbVN0eWxlOntub3JtYWw6e2NvbG9yOiIjRkQxMDUwIixjb2xvcjA6IiMwQ0Y0OUIiLGJvcmRlckNvbG9yOiIjRkQxMDUwIixib3JkZXJDb2xvcjA6IiMwQ0Y0OUIifX19fTtlZC5jYXRlZ29yeUF4aXMuc3BsaXRMaW5lLnNob3c9ITEsVHUuZXh0ZW5kKHt0eXBlOiJkYXRhc2V0IixkZWZhdWx0T3B0aW9uOntzZXJpZXNMYXlvdXRCeTpCdSxzb3VyY2VIZWFkZXI6bnVsbCxkaW1lbnNpb25zOm51bGwsc291cmNlOm51bGx9LG9wdGlvblVwZGF0ZWQ6ZnVuY3Rpb24oKXshZnVuY3Rpb24odCl7dmFyIGU9dC5vcHRpb24uc291cmNlLGk9enU7aWYoVihlKSlpPVJ1O2Vsc2UgaWYoayhlKSl7MD09PWUubGVuZ3RoJiYoaT1OdSk7Zm9yKHZhciBuPTAsbz1lLmxlbmd0aDtuPG87bisrKXt2YXIgYT1lW25dO2lmKG51bGwhPWEpe2lmKGsoYSkpe2k9TnU7YnJlYWt9aWYoUihhKSl7aT1PdTticmVha319fX1lbHNlIGlmKFIoZSkpe2Zvcih2YXIgciBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkocikmJlAoZVtyXSkpe2k9RXU7YnJlYWt9fWVsc2UgaWYobnVsbCE9ZSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgZGF0YSIpO1d1KHQpLnNvdXJjZUZvcm1hdD1pfSh0aGlzKX19KSxoYy5leHRlbmQoe3R5cGU6ImRhdGFzZXQifSk7dmFyIGlkPVNyLmV4dGVuZCh7dHlwZToiZWxsaXBzZSIsc2hhcGU6e2N4OjAsY3k6MCxyeDowLHJ5OjB9LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPWUuY3gsbj1lLmN5LG89ZS5yeCxhPWUucnkscj0uNTUyMjg0OCpvLHM9LjU1MjI4NDgqYTt0Lm1vdmVUbyhpLW8sbiksdC5iZXppZXJDdXJ2ZVRvKGktbyxuLXMsaS1yLG4tYSxpLG4tYSksdC5iZXppZXJDdXJ2ZVRvKGkrcixuLWEsaStvLG4tcyxpK28sbiksdC5iZXppZXJDdXJ2ZVRvKGkrbyxuK3MsaStyLG4rYSxpLG4rYSksdC5iZXppZXJDdXJ2ZVRvKGktcixuK2EsaS1vLG4rcyxpLW8sbiksdC5jbG9zZVBhdGgoKX19KSxuZD0vW1xzLF0rLztmdW5jdGlvbiBvZCh0KXt6KHQpJiYodD0obmV3IERPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHQsInRleHQveG1sIikpO2Zvcig5PT09dC5ub2RlVHlwZSYmKHQ9dC5maXJzdENoaWxkKTsic3ZnIiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKXx8MSE9PXQubm9kZVR5cGU7KXQ9dC5uZXh0U2libGluZztyZXR1cm4gdH1mdW5jdGlvbiBhZCgpe3RoaXMuX2RlZnM9e30sdGhpcy5fcm9vdD1udWxsLHRoaXMuX2lzRGVmaW5lPSExLHRoaXMuX2lzVGV4dD0hMX1hZC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXtlPWV8fHt9O3ZhciBpPW9kKHQpO2lmKCFpKXRocm93IG5ldyBFcnJvcigiSWxsZWdhbCBzdmciKTt2YXIgbj1uZXcgSWk7dGhpcy5fcm9vdD1uO3ZhciBvPWkuZ2V0QXR0cmlidXRlKCJ2aWV3Qm94Iil8fCIiLGE9cGFyc2VGbG9hdChpLmdldEF0dHJpYnV0ZSgid2lkdGgiKXx8ZS53aWR0aCkscj1wYXJzZUZsb2F0KGkuZ2V0QXR0cmlidXRlKCJoZWlnaHQiKXx8ZS5oZWlnaHQpO2lzTmFOKGEpJiYoYT1udWxsKSxpc05hTihyKSYmKHI9bnVsbCksY2QoaSxuLG51bGwsITApO2Zvcih2YXIgcyxsLHU9aS5maXJzdENoaWxkO3U7KXRoaXMuX3BhcnNlTm9kZSh1LG4pLHU9dS5uZXh0U2libGluZztpZihvKXt2YXIgaD1qKG8pLnNwbGl0KG5kKTs0PD1oLmxlbmd0aCYmKHM9e3g6cGFyc2VGbG9hdChoWzBdfHwwKSx5OnBhcnNlRmxvYXQoaFsxXXx8MCksd2lkdGg6cGFyc2VGbG9hdChoWzJdKSxoZWlnaHQ6cGFyc2VGbG9hdChoWzNdKX0pfWlmKHMmJm51bGwhPWEmJm51bGwhPXImJihsPW1kKHMsYSxyKSwhZS5pZ25vcmVWaWV3Qm94KSl7dmFyIGM9bjsobj1uZXcgSWkpLmFkZChjKSxjLnNjYWxlPWwuc2NhbGUuc2xpY2UoKSxjLnBvc2l0aW9uPWwucG9zaXRpb24uc2xpY2UoKX1yZXR1cm4gZS5pZ25vcmVSb290Q2xpcHx8bnVsbD09YXx8bnVsbD09cnx8bi5zZXRDbGlwUGF0aChuZXcgaXMoe3NoYXBlOnt4OjAseTowLHdpZHRoOmEsaGVpZ2h0OnJ9fSkpLHtyb290Om4sd2lkdGg6YSxoZWlnaHQ6cix2aWV3Qm94UmVjdDpzLHZpZXdCb3hUcmFuc2Zvcm06bH19LGFkLnByb3RvdHlwZS5fcGFyc2VOb2RlPWZ1bmN0aW9uKHQsZSl7dmFyIGksbixvPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZigiZGVmcyI9PT1vP3RoaXMuX2lzRGVmaW5lPSEwOiJ0ZXh0Ij09PW8mJih0aGlzLl9pc1RleHQ9ITApLHRoaXMuX2lzRGVmaW5lKXtpZihuPXNkW29dKXt2YXIgYT1uLmNhbGwodGhpcyx0KSxyPXQuZ2V0QXR0cmlidXRlKCJpZCIpO3ImJih0aGlzLl9kZWZzW3JdPWEpfX1lbHNlKG49cmRbb10pJiYoaT1uLmNhbGwodGhpcyx0LGUpLGUuYWRkKGkpKTtmb3IodmFyIHM9dC5maXJzdENoaWxkO3M7KTE9PT1zLm5vZGVUeXBlJiZ0aGlzLl9wYXJzZU5vZGUocyxpKSwzPT09cy5ub2RlVHlwZSYmdGhpcy5faXNUZXh0JiZ0aGlzLl9wYXJzZVRleHQocyxpKSxzPXMubmV4dFNpYmxpbmc7ImRlZnMiPT09bz90aGlzLl9pc0RlZmluZT0hMToidGV4dCI9PT1vJiYodGhpcy5faXNUZXh0PSExKX0sYWQucHJvdG90eXBlLl9wYXJzZVRleHQ9ZnVuY3Rpb24odCxlKXtpZigxPT09dC5ub2RlVHlwZSl7dmFyIGk9dC5nZXRBdHRyaWJ1dGUoImR4Iil8fDAsbj10LmdldEF0dHJpYnV0ZSgiZHkiKXx8MDt0aGlzLl90ZXh0WCs9cGFyc2VGbG9hdChpKSx0aGlzLl90ZXh0WSs9cGFyc2VGbG9hdChuKX12YXIgbz1uZXcgRnIoe3N0eWxlOnt0ZXh0OnQudGV4dENvbnRlbnQsdHJhbnNmb3JtVGV4dDohMH0scG9zaXRpb246W3RoaXMuX3RleHRYfHwwLHRoaXMuX3RleHRZfHwwXX0pO2xkKGUsbyksY2QodCxvLHRoaXMuX2RlZnMpO3ZhciBhPW8uc3R5bGUuZm9udFNpemU7YSYmYTw5JiYoby5zdHlsZS5mb250U2l6ZT05LG8uc2NhbGU9by5zY2FsZXx8WzEsMV0sby5zY2FsZVswXSo9YS85LG8uc2NhbGVbMV0qPWEvOSk7dmFyIHI9by5nZXRCb3VuZGluZ1JlY3QoKTtyZXR1cm4gdGhpcy5fdGV4dFgrPXIud2lkdGgsZS5hZGQobyksb307dmFyIHJkPXtnOmZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IElpO3JldHVybiBsZChlLGkpLGNkKHQsaSx0aGlzLl9kZWZzKSxpfSxyZWN0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IGlzO3JldHVybiBsZChlLGkpLGNkKHQsaSx0aGlzLl9kZWZzKSxpLnNldFNoYXBlKHt4OnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoIngiKXx8MCkseTpwYXJzZUZsb2F0KHQuZ2V0QXR0cmlidXRlKCJ5Iil8fDApLHdpZHRoOnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoIndpZHRoIil8fDApLGhlaWdodDpwYXJzZUZsb2F0KHQuZ2V0QXR0cmlidXRlKCJoZWlnaHQiKXx8MCl9KSxpfSxjaXJjbGU6ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgSHI7cmV0dXJuIGxkKGUsaSksY2QodCxpLHRoaXMuX2RlZnMpLGkuc2V0U2hhcGUoe2N4OnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoImN4Iil8fDApLGN5OnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoImN5Iil8fDApLHI6cGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZSgiciIpfHwwKX0pLGl9LGxpbmU6ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgb3M7cmV0dXJuIGxkKGUsaSksY2QodCxpLHRoaXMuX2RlZnMpLGkuc2V0U2hhcGUoe3gxOnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoIngxIil8fDApLHkxOnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoInkxIil8fDApLHgyOnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoIngyIil8fDApLHkyOnBhcnNlRmxvYXQodC5nZXRBdHRyaWJ1dGUoInkyIil8fDApfSksaX0sZWxsaXBzZTpmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBpZDtyZXR1cm4gbGQoZSxpKSxjZCh0LGksdGhpcy5fZGVmcyksaS5zZXRTaGFwZSh7Y3g6cGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZSgiY3giKXx8MCksY3k6cGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZSgiY3kiKXx8MCkscng6cGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZSgicngiKXx8MCkscnk6cGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZSgicnkiKXx8MCl9KSxpfSxwb2x5Z29uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXRBdHRyaWJ1dGUoInBvaW50cyIpO2k9aSYmdWQoaSk7dmFyIG49bmV3IHFyKHtzaGFwZTp7cG9pbnRzOml8fFtdfX0pO3JldHVybiBsZChlLG4pLGNkKHQsbix0aGlzLl9kZWZzKSxufSxwb2x5bGluZTpmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBTcjtsZChlLGkpLGNkKHQsaSx0aGlzLl9kZWZzKTt2YXIgbj10LmdldEF0dHJpYnV0ZSgicG9pbnRzIik7cmV0dXJuIG49biYmdWQobiksbmV3IEtyKHtzaGFwZTp7cG9pbnRzOm58fFtdfX0pfSxpbWFnZTpmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBxbjtyZXR1cm4gbGQoZSxpKSxjZCh0LGksdGhpcy5fZGVmcyksaS5zZXRTdHlsZSh7aW1hZ2U6dC5nZXRBdHRyaWJ1dGUoInhsaW5rOmhyZWYiKSx4OnQuZ2V0QXR0cmlidXRlKCJ4IikseTp0LmdldEF0dHJpYnV0ZSgieSIpLHdpZHRoOnQuZ2V0QXR0cmlidXRlKCJ3aWR0aCIpLGhlaWdodDp0LmdldEF0dHJpYnV0ZSgiaGVpZ2h0Iil9KSxpfSx0ZXh0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXRBdHRyaWJ1dGUoIngiKXx8MCxuPXQuZ2V0QXR0cmlidXRlKCJ5Iil8fDAsbz10LmdldEF0dHJpYnV0ZSgiZHgiKXx8MCxhPXQuZ2V0QXR0cmlidXRlKCJkeSIpfHwwO3RoaXMuX3RleHRYPXBhcnNlRmxvYXQoaSkrcGFyc2VGbG9hdChvKSx0aGlzLl90ZXh0WT1wYXJzZUZsb2F0KG4pK3BhcnNlRmxvYXQoYSk7dmFyIHI9bmV3IElpO3JldHVybiBsZChlLHIpLGNkKHQscix0aGlzLl9kZWZzKSxyfSx0c3BhbjpmdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0QXR0cmlidXRlKCJ4Iiksbj10LmdldEF0dHJpYnV0ZSgieSIpO251bGwhPWkmJih0aGlzLl90ZXh0WD1wYXJzZUZsb2F0KGkpKSxudWxsIT1uJiYodGhpcy5fdGV4dFk9cGFyc2VGbG9hdChuKSk7dmFyIG89dC5nZXRBdHRyaWJ1dGUoImR4Iil8fDAsYT10LmdldEF0dHJpYnV0ZSgiZHkiKXx8MCxyPW5ldyBJaTtyZXR1cm4gbGQoZSxyKSxjZCh0LHIsdGhpcy5fZGVmcyksdGhpcy5fdGV4dFgrPW8sdGhpcy5fdGV4dFkrPWEscn0scGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPUdyKHQuZ2V0QXR0cmlidXRlKCJkIil8fCIiKTtyZXR1cm4gbGQoZSxpKSxjZCh0LGksdGhpcy5fZGVmcyksaX19LHNkPXtsaW5lYXJncmFkaWVudDpmdW5jdGlvbih0KXt2YXIgZT1wYXJzZUludCh0LmdldEF0dHJpYnV0ZSgieDEiKXx8MCwxMCksaT1wYXJzZUludCh0LmdldEF0dHJpYnV0ZSgieTEiKXx8MCwxMCksbj1wYXJzZUludCh0LmdldEF0dHJpYnV0ZSgieDIiKXx8MTAsMTApLG89cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoInkyIil8fDAsMTApLGE9bmV3IGNzKGUsaSxuLG8pO3JldHVybiBmdW5jdGlvbih0LGUpe3ZhciBpPXQuZmlyc3RDaGlsZDtmb3IoO2k7KXtpZigxPT09aS5ub2RlVHlwZSl7dmFyIG49aS5nZXRBdHRyaWJ1dGUoIm9mZnNldCIpO249MDxuLmluZGV4T2YoIiUiKT9wYXJzZUludChuLDEwKS8xMDA6bj9wYXJzZUZsb2F0KG4pOjA7dmFyIG89aS5nZXRBdHRyaWJ1dGUoInN0b3AtY29sb3IiKXx8IiMwMDAwMDAiO2UuYWRkQ29sb3JTdG9wKG4sbyl9aT1pLm5leHRTaWJsaW5nfX0odCxhKSxhfSxyYWRpYWxncmFkaWVudDpmdW5jdGlvbih0KXt9fTtmdW5jdGlvbiBsZCh0LGUpe3QmJnQuX19pbmhlcml0ZWRTdHlsZSYmKGUuX19pbmhlcml0ZWRTdHlsZXx8KGUuX19pbmhlcml0ZWRTdHlsZT17fSksQyhlLl9faW5oZXJpdGVkU3R5bGUsdC5fX2luaGVyaXRlZFN0eWxlKSl9ZnVuY3Rpb24gdWQodCl7Zm9yKHZhciBlPWoodCkuc3BsaXQobmQpLGk9W10sbj0wO248ZS5sZW5ndGg7bis9Mil7dmFyIG89cGFyc2VGbG9hdChlW25dKSxhPXBhcnNlRmxvYXQoZVtuKzFdKTtpLnB1c2goW28sYV0pfXJldHVybiBpfXZhciBoZD17ZmlsbDoiZmlsbCIsc3Ryb2tlOiJzdHJva2UiLCJzdHJva2Utd2lkdGgiOiJsaW5lV2lkdGgiLG9wYWNpdHk6Im9wYWNpdHkiLCJmaWxsLW9wYWNpdHkiOiJmaWxsT3BhY2l0eSIsInN0cm9rZS1vcGFjaXR5Ijoic3Ryb2tlT3BhY2l0eSIsInN0cm9rZS1kYXNoYXJyYXkiOiJsaW5lRGFzaCIsInN0cm9rZS1kYXNob2Zmc2V0IjoibGluZURhc2hPZmZzZXQiLCJzdHJva2UtbGluZWNhcCI6ImxpbmVDYXAiLCJzdHJva2UtbGluZWpvaW4iOiJsaW5lSm9pbiIsInN0cm9rZS1taXRlcmxpbWl0IjoibWl0ZXJMaW1pdCIsImZvbnQtZmFtaWx5IjoiZm9udEZhbWlseSIsImZvbnQtc2l6ZSI6ImZvbnRTaXplIiwiZm9udC1zdHlsZSI6ImZvbnRTdHlsZSIsImZvbnQtd2VpZ2h0IjoiZm9udFdlaWdodCIsInRleHQtYWxpZ24iOiJ0ZXh0QWxpZ24iLCJhbGlnbm1lbnQtYmFzZWxpbmUiOiJ0ZXh0QmFzZWxpbmUifTtmdW5jdGlvbiBjZCh0LGUsaSxuKXt2YXIgbz1lLl9faW5oZXJpdGVkU3R5bGV8fHt9LGE9InRleHQiPT09ZS50eXBlO2lmKDE9PT10Lm5vZGVUeXBlJiYoZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldEF0dHJpYnV0ZSgidHJhbnNmb3JtIik7aWYoaSl7aT1pLnJlcGxhY2UoLywvZywiICIpO3ZhciBuPW51bGwsbz1bXTtpLnJlcGxhY2UocGQsZnVuY3Rpb24odCxlLGkpe28ucHVzaChlLGkpfSk7Zm9yKHZhciBhPW8ubGVuZ3RoLTE7MDxhO2EtPTIpe3ZhciByPW9bYV0scz1vW2EtMV07c3dpdGNoKG49bnx8ZWUoKSxzKXtjYXNlInRyYW5zbGF0ZSI6cj1qKHIpLnNwbGl0KG5kKSxhZShuLG4sW3BhcnNlRmxvYXQoclswXSkscGFyc2VGbG9hdChyWzFdfHwwKV0pO2JyZWFrO2Nhc2Uic2NhbGUiOnI9aihyKS5zcGxpdChuZCksc2UobixuLFtwYXJzZUZsb2F0KHJbMF0pLHBhcnNlRmxvYXQoclsxXXx8clswXSldKTticmVhaztjYXNlInJvdGF0ZSI6cj1qKHIpLnNwbGl0KG5kKSxyZShuLG4scGFyc2VGbG9hdChyWzBdKSk7YnJlYWs7Y2FzZSJza2V3IjpyPWoocikuc3BsaXQobmQpLGNvbnNvbGUud2FybigiU2tldyB0cmFuc2Zvcm0gaXMgbm90IHN1cHBvcnRlZCB5ZXQiKTticmVhaztjYXNlIm1hdHJpeCI6cj1qKHIpLnNwbGl0KG5kKTtuWzBdPXBhcnNlRmxvYXQoclswXSksblsxXT1wYXJzZUZsb2F0KHJbMV0pLG5bMl09cGFyc2VGbG9hdChyWzJdKSxuWzNdPXBhcnNlRmxvYXQoclszXSksbls0XT1wYXJzZUZsb2F0KHJbNF0pLG5bNV09cGFyc2VGbG9hdChyWzVdKX19ZS5zZXRMb2NhbFRyYW5zZm9ybShuKX19KHQsZSksTChvLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpLGk9e307aWYoIWUpcmV0dXJuIGk7dmFyIG4sbz17fTtnZC5sYXN0SW5kZXg9MDtmb3IoO251bGwhPShuPWdkLmV4ZWMoZSkpOylvW25bMV1dPW5bMl07Zm9yKHZhciBhIGluIGhkKWhkLmhhc093blByb3BlcnR5KGEpJiZudWxsIT1vW2FdJiYoaVtoZFthXV09b1thXSk7cmV0dXJuIGl9KHQpKSwhbikpZm9yKHZhciByIGluIGhkKWlmKGhkLmhhc093blByb3BlcnR5KHIpKXt2YXIgcz10LmdldEF0dHJpYnV0ZShyKTtudWxsIT1zJiYob1toZFtyXV09cyl9dmFyIGw9YT8idGV4dEZpbGwiOiJmaWxsIix1PWE/InRleHRTdHJva2UiOiJzdHJva2UiO2Uuc3R5bGU9ZS5zdHlsZXx8bmV3IEZpO3ZhciBoPWUuc3R5bGU7bnVsbCE9by5maWxsJiZoLnNldChsLGZkKG8uZmlsbCxpKSksbnVsbCE9by5zdHJva2UmJmguc2V0KHUsZmQoby5zdHJva2UsaSkpLEUoWyJsaW5lV2lkdGgiLCJvcGFjaXR5IiwiZmlsbE9wYWNpdHkiLCJzdHJva2VPcGFjaXR5IiwibWl0ZXJMaW1pdCIsImZvbnRTaXplIl0sZnVuY3Rpb24odCl7dmFyIGU9ImxpbmVXaWR0aCI9PT10JiZhPyJ0ZXh0U3Ryb2tlV2lkdGgiOnQ7bnVsbCE9b1t0XSYmaC5zZXQoZSxwYXJzZUZsb2F0KG9bdF0pKX0pLG8udGV4dEJhc2VsaW5lJiYiYXV0byIhPT1vLnRleHRCYXNlbGluZXx8KG8udGV4dEJhc2VsaW5lPSJhbHBoYWJldGljIiksImFscGhhYmV0aWMiPT09by50ZXh0QmFzZWxpbmUmJihvLnRleHRCYXNlbGluZT0iYm90dG9tIiksInN0YXJ0Ij09PW8udGV4dEFsaWduJiYoby50ZXh0QWxpZ249ImxlZnQiKSwiZW5kIj09PW8udGV4dEFsaWduJiYoby50ZXh0QWxpZ249InJpZ2h0IiksRShbImxpbmVEYXNoT2Zmc2V0IiwibGluZUNhcCIsImxpbmVKb2luIiwiZm9udFdlaWdodCIsImZvbnRGYW1pbHkiLCJmb250U3R5bGUiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiXSxmdW5jdGlvbih0KXtudWxsIT1vW3RdJiZoLnNldCh0LG9bdF0pfSksby5saW5lRGFzaCYmKGUuc3R5bGUubGluZURhc2g9aihvLmxpbmVEYXNoKS5zcGxpdChuZCkpLGhbdV0mJiJub25lIiE9PWhbdV0mJihlW3VdPSEwKSxlLl9faW5oZXJpdGVkU3R5bGU9b312YXIgZGQ9L3VybFwoXHMqIyguKj8pXCkvO2Z1bmN0aW9uIGZkKHQsZSl7dmFyIGk9ZSYmdCYmdC5tYXRjaChkZCk7cmV0dXJuIGk/ZVtqKGlbMV0pXTp0fXZhciBwZD0vKHRyYW5zbGF0ZXxzY2FsZXxyb3RhdGV8c2tld1h8c2tld1l8bWF0cml4KVwoKFtcLVxzMC05XC5lLF0qKVwpL2c7dmFyIGdkPS8oW15cczo7XSspXHMqOlxzKihbXjo7XSspL2c7ZnVuY3Rpb24gbWQodCxlLGkpe3ZhciBuPWUvdC53aWR0aCxvPWkvdC5oZWlnaHQsYT1NYXRoLm1pbihuLG8pO3JldHVybntzY2FsZTpbYSxhXSxwb3NpdGlvbjpbLSh0LngrdC53aWR0aC8yKSphK2UvMiwtKHQueSt0LmhlaWdodC8yKSphK2kvMl19fXZhciB2ZD1RKCkseWQ9e3JlZ2lzdGVyTWFwOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbjtyZXR1cm4gRShuPWsoZSk/ZTplLnN2Zz9be3R5cGU6InN2ZyIsc291cmNlOmUuc3ZnLHNwZWNpYWxBcmVhczplLnNwZWNpYWxBcmVhc31dOihlLmdlb0pzb24mJiFlLmZlYXR1cmVzJiYoaT1lLnNwZWNpYWxBcmVhcyxlPWUuZ2VvSnNvbiksW3t0eXBlOiJnZW9KU09OIixzb3VyY2U6ZSxzcGVjaWFsQXJlYXM6aX1dKSxmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7Imdlb0pzb24iPT09ZSYmKGU9dC50eXBlPSJnZW9KU09OIiksKDAseGRbZV0pKHQpfSksdmQuc2V0KHQsbil9LHJldHJpZXZlTWFwOmZ1bmN0aW9uKHQpe3JldHVybiB2ZC5nZXQodCl9fSx4ZD17Z2VvSlNPTjpmdW5jdGlvbih0KXt2YXIgZT10LnNvdXJjZTt0Lmdlb0pTT049eihlKT8idW5kZWZpbmVkIiE9dHlwZW9mIEpTT04mJkpTT04ucGFyc2U/SlNPTi5wYXJzZShlKTpuZXcgRnVuY3Rpb24oInJldHVybiAoIitlKyIpOyIpKCk6ZX0sc3ZnOmZ1bmN0aW9uKHQpe3Quc3ZnWE1MPW9kKHQuc291cmNlKX19LF9kPVksd2Q9RSxiZD1PLFNkPVIsTWQ9VHUucGFyc2VDbGFzc1R5cGUsSWQ9e1BST0NFU1NPUjp7RklMVEVSOjFlMyxTRVJJRVNfRklMVEVSOjgwMCxTVEFUSVNUSUM6NWUzfSxWSVNVQUw6e0xBWU9VVDoxZTMsUFJPR1JFU1NJVkVfTEFZT1VUOjExMDAsR0xPQkFMOjJlMyxDSEFSVDozZTMsUE9TVF9DSEFSVF9MQVlPVVQ6MzUwMCxDT01QT05FTlQ6NGUzLEJSVVNIOjVlM319LFRkPSJfX2ZsYWdJbk1haW5Qcm9jZXNzIixBZD0iX19vcHRpb25VcGRhdGVkIixEZD0vXlthLXpBLVowLTlfXSskLztmdW5jdGlvbiBDZChuLG8pe3JldHVybiBmdW5jdGlvbih0LGUsaSl7IW8mJnRoaXMuX2Rpc3Bvc2VkfHwodD10JiZ0LnRvTG93ZXJDYXNlKCksQ3QucHJvdG90eXBlW25dLmNhbGwodGhpcyx0LGUsaSkpfX1mdW5jdGlvbiBMZCgpe0N0LmNhbGwodGhpcyl9ZnVuY3Rpb24ga2QodCxlLGkpe2k9aXx8e30sInN0cmluZyI9PXR5cGVvZiBlJiYoZT1lZltlXSksdGhpcy5pZCx0aGlzLmdyb3VwLHRoaXMuX2RvbT10O3ZhciBuPXRoaXMuX3pyPUFvKHQse3JlbmRlcmVyOmkucmVuZGVyZXJ8fCJjYW52YXMiLGRldmljZVBpeGVsUmF0aW86aS5kZXZpY2VQaXhlbFJhdGlvLHdpZHRoOmkud2lkdGgsaGVpZ2h0OmkuaGVpZ2h0fSk7dGhpcy5fdGhyb3R0bGVkWnJGbHVzaD1JYyhBKG4uZmx1c2gsbiksMTcpLChlPUQoZSkpJiZJaChlLCEwKSx0aGlzLl90aGVtZT1lLHRoaXMuX2NoYXJ0c1ZpZXdzPVtdLHRoaXMuX2NoYXJ0c01hcD17fSx0aGlzLl9jb21wb25lbnRzVmlld3M9W10sdGhpcy5fY29tcG9uZW50c01hcD17fSx0aGlzLl9jb29yZFN5c01ncj1uZXcgbmg7dmFyIG89dGhpcy5fYXBpPWZ1bmN0aW9uKGkpe3ZhciB0PWkuX2Nvb3JkU3lzTWdyO3JldHVybiBMKG5ldyBlaChpKSx7Z2V0Q29vcmRpbmF0ZVN5c3RlbXM6QSh0LmdldENvb3JkaW5hdGVTeXN0ZW1zLHQpLGdldENvbXBvbmVudEJ5RWxlbWVudDpmdW5jdGlvbih0KXtmb3IoO3Q7KXt2YXIgZT10Ll9fZWNDb21wb25lbnRJbmZvO2lmKG51bGwhPWUpcmV0dXJuIGkuX21vZGVsLmdldENvbXBvbmVudChlLm1haW5UeXBlLGUuaW5kZXgpO3Q9dC5wYXJlbnR9fX0pfSh0aGlzKTtmdW5jdGlvbiBhKHQsZSl7cmV0dXJuIHQuX19wcmlvLWUuX19wcmlvfU5pKHRmLGEpLE5pKCRkLGEpLHRoaXMuX3NjaGVkdWxlcj1uZXcgUGModGhpcyxvLCRkLHRmKSxDdC5jYWxsKHRoaXMsdGhpcy5fZWNFdmVudFByb2Nlc3Nvcj1uZXcgamQpLHRoaXMuX21lc3NhZ2VDZW50ZXI9bmV3IExkLHRoaXMuX2luaXRFdmVudHMoKSx0aGlzLnJlc2l6ZT1BKHRoaXMucmVzaXplLHRoaXMpLHRoaXMuX3BlbmRpbmdBY3Rpb25zPVtdLG4uYW5pbWF0aW9uLm9uKCJmcmFtZSIsdGhpcy5fb25mcmFtZSx0aGlzKSxmdW5jdGlvbih0LGUpe3Qub24oInJlbmRlcmVkIixmdW5jdGlvbigpe2UudHJpZ2dlcigicmVuZGVyZWQiKSwhdC5hbmltYXRpb24uaXNGaW5pc2hlZCgpfHxlW0FkXXx8ZS5fc2NoZWR1bGVyLnVuZmluaXNoZWR8fGUuX3BlbmRpbmdBY3Rpb25zLmxlbmd0aHx8ZS50cmlnZ2VyKCJmaW5pc2hlZCIpfSl9KG4sdGhpcyksSyh0aGlzKX1MZC5wcm90b3R5cGUub249Q2QoIm9uIiwhMCksTGQucHJvdG90eXBlLm9mZj1DZCgib2ZmIiwhMCksTGQucHJvdG90eXBlLm9uZT1DZCgib25lIiwhMCksYihMZCxDdCk7dmFyIFBkPWtkLnByb3RvdHlwZTtmdW5jdGlvbiBOZCh0LGUsaSl7aWYoIXRoaXMuX2Rpc3Bvc2VkKXt2YXIgbixvPXRoaXMuX21vZGVsLGE9dGhpcy5fY29vcmRTeXNNZ3IuZ2V0Q29vcmRpbmF0ZVN5c3RlbXMoKTtlPVhvKG8sZSk7Zm9yKHZhciByPTA7cjxhLmxlbmd0aDtyKyspe3ZhciBzPWFbcl07aWYoc1t0XSYmbnVsbCE9KG49c1t0XShvLGUsaSkpKXJldHVybiBufX19UGQuX29uZnJhbWU9ZnVuY3Rpb24oKXtpZighdGhpcy5fZGlzcG9zZWQpe3ZhciB0PXRoaXMuX3NjaGVkdWxlcjtpZih0aGlzW0FkXSl7dmFyIGU9dGhpc1tBZF0uc2lsZW50O3RoaXNbVGRdPSEwLEVkKHRoaXMpLE9kLnVwZGF0ZS5jYWxsKHRoaXMpLHRoaXNbVGRdPSExLHRoaXNbQWRdPSExLFZkLmNhbGwodGhpcyxlKSxHZC5jYWxsKHRoaXMsZSl9ZWxzZSBpZih0LnVuZmluaXNoZWQpe3ZhciBpPTEsbj10aGlzLl9tb2RlbCxvPXRoaXMuX2FwaTt0LnVuZmluaXNoZWQ9ITE7ZG97dmFyIGE9K25ldyBEYXRlO3QucGVyZm9ybVNlcmllc1Rhc2tzKG4pLHQucGVyZm9ybURhdGFQcm9jZXNzb3JUYXNrcyhuKSxSZCh0aGlzLG4pLHQucGVyZm9ybVZpc3VhbFRhc2tzKG4pLFpkKHRoaXMsdGhpcy5fbW9kZWwsbywicmVtYWluIiksaS09K25ldyBEYXRlLWF9d2hpbGUoMDxpJiZ0LnVuZmluaXNoZWQpO3QudW5maW5pc2hlZHx8dGhpcy5fenIuZmx1c2goKX19fSxQZC5nZXREb209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tfSxQZC5nZXRacj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl96cn0sUGQuc2V0T3B0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZighdGhpcy5fZGlzcG9zZWQpe3ZhciBuO2lmKFNkKGUpJiYoaT1lLmxhenlVcGRhdGUsbj1lLnNpbGVudCxlPWUubm90TWVyZ2UpLHRoaXNbVGRdPSEwLCF0aGlzLl9tb2RlbHx8ZSl7dmFyIG89bmV3IHVoKHRoaXMuX2FwaSksYT10aGlzLl90aGVtZSxyPXRoaXMuX21vZGVsPW5ldyAkdTtyLnNjaGVkdWxlcj10aGlzLl9zY2hlZHVsZXIsci5pbml0KG51bGwsbnVsbCxhLG8pfXRoaXMuX21vZGVsLnNldE9wdGlvbih0LEpkKSxpPyh0aGlzW0FkXT17c2lsZW50Om59LHRoaXNbVGRdPSExKTooRWQodGhpcyksT2QudXBkYXRlLmNhbGwodGhpcyksdGhpcy5fenIuZmx1c2goKSx0aGlzW0FkXT0hMSx0aGlzW1RkXT0hMSxWZC5jYWxsKHRoaXMsbiksR2QuY2FsbCh0aGlzLG4pKX19LFBkLnNldFRoZW1lPWZ1bmN0aW9uKCl7Y29uc29sZS5lcnJvcigiRUNoYXJ0cyNzZXRUaGVtZSgpIGlzIERFUFJFQ0FURUQgaW4gRUNoYXJ0cyAzLjAiKX0sUGQuZ2V0TW9kZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZWx9LFBkLmdldE9wdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RlbCYmdGhpcy5fbW9kZWwuZ2V0T3B0aW9uKCl9LFBkLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3pyLmdldFdpZHRoKCl9LFBkLmdldEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl96ci5nZXRIZWlnaHQoKX0sUGQuZ2V0RGV2aWNlUGl4ZWxSYXRpbz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl96ci5wYWludGVyLmRwcnx8d2luZG93LmRldmljZVBpeGVsUmF0aW98fDF9LFBkLmdldFJlbmRlcmVkQ2FudmFzPWZ1bmN0aW9uKHQpe2lmKHYuY2FudmFzU3VwcG9ydGVkKXJldHVybih0PXR8fHt9KS5waXhlbFJhdGlvPXQucGl4ZWxSYXRpb3x8MSx0LmJhY2tncm91bmRDb2xvcj10LmJhY2tncm91bmRDb2xvcnx8dGhpcy5fbW9kZWwuZ2V0KCJiYWNrZ3JvdW5kQ29sb3IiKSx0aGlzLl96ci5wYWludGVyLmdldFJlbmRlcmVkQ2FudmFzKHQpfSxQZC5nZXRTdmdEYXRhVXJsPWZ1bmN0aW9uKCl7aWYodi5zdmdTdXBwb3J0ZWQpe3ZhciB0PXRoaXMuX3pyO3JldHVybiBFKHQuc3RvcmFnZS5nZXREaXNwbGF5TGlzdCgpLGZ1bmN0aW9uKHQpe3Quc3RvcEFuaW1hdGlvbighMCl9KSx0LnBhaW50ZXIucGF0aFRvRGF0YVVybCgpfX0sUGQuZ2V0RGF0YVVSTD1mdW5jdGlvbih0KXtpZighdGhpcy5fZGlzcG9zZWQpe3ZhciBlPSh0PXR8fHt9KS5leGNsdWRlQ29tcG9uZW50cyxpPXRoaXMuX21vZGVsLG49W10sbz10aGlzO3dkKGUsZnVuY3Rpb24odCl7aS5lYWNoQ29tcG9uZW50KHttYWluVHlwZTp0fSxmdW5jdGlvbih0KXt2YXIgZT1vLl9jb21wb25lbnRzTWFwW3QuX192aWV3SWRdO2UuZ3JvdXAuaWdub3JlfHwobi5wdXNoKGUpLGUuZ3JvdXAuaWdub3JlPSEwKX0pfSk7dmFyIGE9InN2ZyI9PT10aGlzLl96ci5wYWludGVyLmdldFR5cGUoKT90aGlzLmdldFN2Z0RhdGFVcmwoKTp0aGlzLmdldFJlbmRlcmVkQ2FudmFzKHQpLnRvRGF0YVVSTCgiaW1hZ2UvIisodCYmdC50eXBlfHwicG5nIikpO3JldHVybiB3ZChuLGZ1bmN0aW9uKHQpe3QuZ3JvdXAuaWdub3JlPSExfSksYX19LFBkLmdldENvbm5lY3RlZERhdGFVUkw9ZnVuY3Rpb24obyl7aWYoIXRoaXMuX2Rpc3Bvc2VkJiZ2LmNhbnZhc1N1cHBvcnRlZCl7dmFyIGE9dGhpcy5ncm91cCxyPU1hdGgubWluLHM9TWF0aC5tYXg7aWYoYWZbYV0pe3ZhciBsPTEvMCx1PTEvMCxoPS0xLzAsYz0tMS8wLGQ9W10saT1vJiZvLnBpeGVsUmF0aW98fDE7RShvZixmdW5jdGlvbih0LGUpe2lmKHQuZ3JvdXA9PT1hKXt2YXIgaT10LmdldFJlbmRlcmVkQ2FudmFzKEQobykpLG49dC5nZXREb20oKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtsPXIobi5sZWZ0LGwpLHU9cihuLnRvcCx1KSxoPXMobi5yaWdodCxoKSxjPXMobi5ib3R0b20sYyksZC5wdXNoKHtkb206aSxsZWZ0Om4ubGVmdCx0b3A6bi50b3B9KX19KTt2YXIgdD0oaCo9aSktKGwqPWkpLGU9KGMqPWkpLSh1Kj1pKSxuPWcoKTtuLndpZHRoPXQsbi5oZWlnaHQ9ZTt2YXIgZj1BbyhuKTtyZXR1cm4gby5jb25uZWN0ZWRCYWNrZ3JvdW5kQ29sb3ImJmYuYWRkKG5ldyBpcyh7c2hhcGU6e3g6MCx5OjAsd2lkdGg6dCxoZWlnaHQ6ZX0sc3R5bGU6e2ZpbGw6by5jb25uZWN0ZWRCYWNrZ3JvdW5kQ29sb3J9fSkpLHdkKGQsZnVuY3Rpb24odCl7dmFyIGU9bmV3IHFuKHtzdHlsZTp7eDp0LmxlZnQqaS1sLHk6dC50b3AqaS11LGltYWdlOnQuZG9tfX0pO2YuYWRkKGUpfSksZi5yZWZyZXNoSW1tZWRpYXRlbHkoKSxuLnRvRGF0YVVSTCgiaW1hZ2UvIisobyYmby50eXBlfHwicG5nIikpfXJldHVybiB0aGlzLmdldERhdGFVUkwobyl9fSxQZC5jb252ZXJ0VG9QaXhlbD1UKE5kLCJjb252ZXJ0VG9QaXhlbCIpLFBkLmNvbnZlcnRGcm9tUGl4ZWw9VChOZCwiY29udmVydEZyb21QaXhlbCIpLFBkLmNvbnRhaW5QaXhlbD1mdW5jdGlvbih0LG8pe3ZhciBhO2lmKCF0aGlzLl9kaXNwb3NlZClyZXR1cm4gRSh0PVhvKHRoaXMuX21vZGVsLHQpLGZ1bmN0aW9uKHQsbil7MDw9bi5pbmRleE9mKCJNb2RlbHMiKSYmRSh0LGZ1bmN0aW9uKHQpe3ZhciBlPXQuY29vcmRpbmF0ZVN5c3RlbTtpZihlJiZlLmNvbnRhaW5Qb2ludClhfD0hIWUuY29udGFpblBvaW50KG8pO2Vsc2UgaWYoInNlcmllc01vZGVscyI9PT1uKXt2YXIgaT10aGlzLl9jaGFydHNNYXBbdC5fX3ZpZXdJZF07aSYmaS5jb250YWluUG9pbnQmJihhfD1pLmNvbnRhaW5Qb2ludChvLHQpKX19LHRoaXMpfSx0aGlzKSwhIWF9LFBkLmdldFZpc3VhbD1mdW5jdGlvbih0LGUpe3ZhciBpPSh0PVhvKHRoaXMuX21vZGVsLHQse2RlZmF1bHRNYWluVHlwZToic2VyaWVzIn0pKS5zZXJpZXNNb2RlbC5nZXREYXRhKCksbj10Lmhhc093blByb3BlcnR5KCJkYXRhSW5kZXhJbnNpZGUiKT90LmRhdGFJbmRleEluc2lkZTp0Lmhhc093blByb3BlcnR5KCJkYXRhSW5kZXgiKT9pLmluZGV4T2ZSYXdJbmRleCh0LmRhdGFJbmRleCk6bnVsbDtyZXR1cm4gbnVsbCE9bj9pLmdldEl0ZW1WaXN1YWwobixlKTppLmdldFZpc3VhbChlKX0sUGQuZ2V0Vmlld09mQ29tcG9uZW50TW9kZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHNNYXBbdC5fX3ZpZXdJZF19LFBkLmdldFZpZXdPZlNlcmllc01vZGVsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jaGFydHNNYXBbdC5fX3ZpZXdJZF19O3ZhciBPZD17cHJlcGFyZUFuZFVwZGF0ZTpmdW5jdGlvbih0KXtFZCh0aGlzKSxPZC51cGRhdGUuY2FsbCh0aGlzLHQpfSx1cGRhdGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbW9kZWwsaT10aGlzLl9hcGksbj10aGlzLl96cixvPXRoaXMuX2Nvb3JkU3lzTWdyLGE9dGhpcy5fc2NoZWR1bGVyO2lmKGUpe2EucmVzdG9yZURhdGEoZSx0KSxhLnBlcmZvcm1TZXJpZXNUYXNrcyhlKSxvLmNyZWF0ZShlLGkpLGEucGVyZm9ybURhdGFQcm9jZXNzb3JUYXNrcyhlLHQpLFJkKHRoaXMsZSksby51cGRhdGUoZSxpKSxXZChlKSxhLnBlcmZvcm1WaXN1YWxUYXNrcyhlLHQpLEhkKHRoaXMsZSxpLHQpO3ZhciByPWUuZ2V0KCJiYWNrZ3JvdW5kQ29sb3IiKXx8InRyYW5zcGFyZW50IjtpZih2LmNhbnZhc1N1cHBvcnRlZCluLnNldEJhY2tncm91bmRDb2xvcihyKTtlbHNle3ZhciBzPVJlKHIpO3I9WWUocywicmdiIiksMD09PXNbM10mJihyPSJ0cmFuc3BhcmVudCIpfVVkKGUsaSl9fSx1cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24obyl7dmFyIGE9dGhpcy5fbW9kZWwscj10aGlzLHM9dGhpcy5fYXBpO2lmKGEpe3ZhciBsPVtdO2EuZWFjaENvbXBvbmVudChmdW5jdGlvbih0LGUpe3ZhciBpPXIuZ2V0Vmlld09mQ29tcG9uZW50TW9kZWwoZSk7aWYoaSYmaS5fX2FsaXZlKWlmKGkudXBkYXRlVHJhbnNmb3JtKXt2YXIgbj1pLnVwZGF0ZVRyYW5zZm9ybShlLGEscyxvKTtuJiZuLnVwZGF0ZSYmbC5wdXNoKGkpfWVsc2UgbC5wdXNoKGkpfSk7dmFyIG49USgpO2EuZWFjaFNlcmllcyhmdW5jdGlvbih0KXt2YXIgZT1yLl9jaGFydHNNYXBbdC5fX3ZpZXdJZF07aWYoZS51cGRhdGVUcmFuc2Zvcm0pe3ZhciBpPWUudXBkYXRlVHJhbnNmb3JtKHQsYSxzLG8pO2kmJmkudXBkYXRlJiZuLnNldCh0LnVpZCwxKX1lbHNlIG4uc2V0KHQudWlkLDEpfSksV2QoYSksdGhpcy5fc2NoZWR1bGVyLnBlcmZvcm1WaXN1YWxUYXNrcyhhLG8se3NldERpcnR5OiEwLGRpcnR5TWFwOm59KSxaZChyLGEscyxvLG4pLFVkKGEsdGhpcy5fYXBpKX19LHVwZGF0ZVZpZXc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbW9kZWw7ZSYmKGdjLm1hcmtVcGRhdGVNZXRob2QodCwidXBkYXRlVmlldyIpLFdkKGUpLHRoaXMuX3NjaGVkdWxlci5wZXJmb3JtVmlzdWFsVGFza3MoZSx0LHtzZXREaXJ0eTohMH0pLEhkKHRoaXMsdGhpcy5fbW9kZWwsdGhpcy5fYXBpLHQpLFVkKGUsdGhpcy5fYXBpKSl9LHVwZGF0ZVZpc3VhbDpmdW5jdGlvbih0KXtPZC51cGRhdGUuY2FsbCh0aGlzLHQpfSx1cGRhdGVMYXlvdXQ6ZnVuY3Rpb24odCl7T2QudXBkYXRlLmNhbGwodGhpcyx0KX19O2Z1bmN0aW9uIEVkKHQpe3ZhciBlPXQuX21vZGVsLGk9dC5fc2NoZWR1bGVyO2kucmVzdG9yZVBpcGVsaW5lcyhlKSxpLnByZXBhcmVTdGFnZVRhc2tzKCksRmQodCwiY29tcG9uZW50IixlLGkpLEZkKHQsImNoYXJ0IixlLGkpLGkucGxhbigpfWZ1bmN0aW9uIHpkKGUsaSxuLG8sdCl7dmFyIGE9ZS5fbW9kZWw7aWYobyl7dmFyIHI9e307cltvKyJJZCJdPW5bbysiSWQiXSxyW28rIkluZGV4Il09bltvKyJJbmRleCJdLHJbbysiTmFtZSJdPW5bbysiTmFtZSJdO3ZhciBzPXttYWluVHlwZTpvLHF1ZXJ5OnJ9O3QmJihzLnN1YlR5cGU9dCk7dmFyIGw9bi5leGNsdWRlU2VyaWVzSWQ7bnVsbCE9bCYmKGw9UShFbyhsKSkpLGEmJmEuZWFjaENvbXBvbmVudChzLGZ1bmN0aW9uKHQpe2wmJm51bGwhPWwuZ2V0KHQuaWQpfHx1KGVbInNlcmllcyI9PT1vPyJfY2hhcnRzTWFwIjoiX2NvbXBvbmVudHNNYXAiXVt0Ll9fdmlld0lkXSl9LGUpfWVsc2Ugd2QoZS5fY29tcG9uZW50c1ZpZXdzLmNvbmNhdChlLl9jaGFydHNWaWV3cyksdSk7ZnVuY3Rpb24gdSh0KXt0JiZ0Ll9fYWxpdmUmJnRbaV0mJnRbaV0odC5fX21vZGVsLGEsZS5fYXBpLG4pfX1mdW5jdGlvbiBSZCh0LGUpe3ZhciBpPXQuX2NoYXJ0c01hcCxuPXQuX3NjaGVkdWxlcjtlLmVhY2hTZXJpZXMoZnVuY3Rpb24odCl7bi51cGRhdGVTdHJlYW1Nb2Rlcyh0LGlbdC5fX3ZpZXdJZF0pfSl9ZnVuY3Rpb24gQmQoZSx0KXt2YXIgaT1lLnR5cGUsbj1lLmVzY2FwZUNvbm5lY3Qsbz1xZFtpXSxhPW8uYWN0aW9uSW5mbyxyPShhLnVwZGF0ZXx8InVwZGF0ZSIpLnNwbGl0KCI6Iikscz1yLnBvcCgpO3I9bnVsbCE9clswXSYmTWQoclswXSksdGhpc1tUZF09ITA7dmFyIGw9W2VdLHU9ITE7ZS5iYXRjaCYmKHU9ITAsbD1OKGUuYmF0Y2gsZnVuY3Rpb24odCl7cmV0dXJuKHQ9QyhMKHt9LHQpLGUpKS5iYXRjaD1udWxsLHR9KSk7dmFyIGgsYz1bXSxkPSJoaWdobGlnaHQiPT09aXx8ImRvd25wbGF5Ij09PWk7d2QobCxmdW5jdGlvbih0KXsoaD0oaD1vLmFjdGlvbih0LHRoaXMuX21vZGVsLHRoaXMuX2FwaSkpfHxMKHt9LHQpKS50eXBlPWEuZXZlbnR8fGgudHlwZSxjLnB1c2goaCksZD96ZCh0aGlzLHMsdCwic2VyaWVzIik6ciYmemQodGhpcyxzLHQsci5tYWluLHIuc3ViKX0sdGhpcyksIm5vbmUiPT09c3x8ZHx8cnx8KHRoaXNbQWRdPyhFZCh0aGlzKSxPZC51cGRhdGUuY2FsbCh0aGlzLGUpLHRoaXNbQWRdPSExKTpPZFtzXS5jYWxsKHRoaXMsZSkpLGg9dT97dHlwZTphLmV2ZW50fHxpLGVzY2FwZUNvbm5lY3Q6bixiYXRjaDpjfTpjWzBdLHRoaXNbVGRdPSExLHR8fHRoaXMuX21lc3NhZ2VDZW50ZXIudHJpZ2dlcihoLnR5cGUsaCl9ZnVuY3Rpb24gVmQodCl7Zm9yKHZhciBlPXRoaXMuX3BlbmRpbmdBY3Rpb25zO2UubGVuZ3RoOyl7dmFyIGk9ZS5zaGlmdCgpO0JkLmNhbGwodGhpcyxpLHQpfX1mdW5jdGlvbiBHZCh0KXt0fHx0aGlzLnRyaWdnZXIoInVwZGF0ZWQiKX1mdW5jdGlvbiBGZCh0LGUsbyxhKXtmb3IodmFyIHI9ImNvbXBvbmVudCI9PT1lLHM9cj90Ll9jb21wb25lbnRzVmlld3M6dC5fY2hhcnRzVmlld3MsbD1yP3QuX2NvbXBvbmVudHNNYXA6dC5fY2hhcnRzTWFwLHU9dC5fenIsaD10Ll9hcGksaT0wO2k8cy5sZW5ndGg7aSsrKXNbaV0uX19hbGl2ZT0hMTtmdW5jdGlvbiBuKHQpe3ZhciBlPSJfZWNfIit0LmlkKyJfIit0LnR5cGUsaT1sW2VdO2lmKCFpKXt2YXIgbj1NZCh0LnR5cGUpOyhpPW5ldyhyP2hjLmdldENsYXNzKG4ubWFpbixuLnN1Yik6Z2MuZ2V0Q2xhc3Mobi5zdWIpKSkuaW5pdChvLGgpLGxbZV09aSxzLnB1c2goaSksdS5hZGQoaS5ncm91cCl9dC5fX3ZpZXdJZD1pLl9faWQ9ZSxpLl9fYWxpdmU9ITAsaS5fX21vZGVsPXQsaS5ncm91cC5fX2VjQ29tcG9uZW50SW5mbz17bWFpblR5cGU6dC5tYWluVHlwZSxpbmRleDp0LmNvbXBvbmVudEluZGV4fSxyfHxhLnByZXBhcmVWaWV3KGksdCxvLGgpfXI/by5lYWNoQ29tcG9uZW50KGZ1bmN0aW9uKHQsZSl7InNlcmllcyIhPT10JiZuKGUpfSk6by5lYWNoU2VyaWVzKG4pO2ZvcihpPTA7aTxzLmxlbmd0aDspe3ZhciBjPXNbaV07Yy5fX2FsaXZlP2krKzoocnx8Yy5yZW5kZXJUYXNrLmRpc3Bvc2UoKSx1LnJlbW92ZShjLmdyb3VwKSxjLmRpc3Bvc2UobyxoKSxzLnNwbGljZShpLDEpLGRlbGV0ZSBsW2MuX19pZF0sYy5fX2lkPWMuZ3JvdXAuX19lY0NvbXBvbmVudEluZm89bnVsbCl9fWZ1bmN0aW9uIFdkKHQpe3QuY2xlYXJDb2xvclBhbGV0dGUoKSx0LmVhY2hTZXJpZXMoZnVuY3Rpb24odCl7dC5jbGVhckNvbG9yUGFsZXR0ZSgpfSl9ZnVuY3Rpb24gSGQodCxlLGksbil7IWZ1bmN0aW9uKHQsaSxuLG8sZSl7d2QoZXx8dC5fY29tcG9uZW50c1ZpZXdzLGZ1bmN0aW9uKHQpe3ZhciBlPXQuX19tb2RlbDt0LnJlbmRlcihlLGksbixvKSxZZChlLHQpfSl9KHQsZSxpLG4pLHdkKHQuX2NoYXJ0c1ZpZXdzLGZ1bmN0aW9uKHQpe3QuX19hbGl2ZT0hMX0pLFpkKHQsZSxpLG4pLHdkKHQuX2NoYXJ0c1ZpZXdzLGZ1bmN0aW9uKHQpe3QuX19hbGl2ZXx8dC5yZW1vdmUoZSxpKX0pfWZ1bmN0aW9uIFpkKG4sdCxlLG8sYSl7dmFyIHIscz1uLl9zY2hlZHVsZXI7dC5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQpe3ZhciBlPW4uX2NoYXJ0c01hcFt0Ll9fdmlld0lkXTtlLl9fYWxpdmU9ITA7dmFyIGk9ZS5yZW5kZXJUYXNrO3MudXBkYXRlUGF5bG9hZChpLG8pLGEmJmEuZ2V0KHQudWlkKSYmaS5kaXJ0eSgpLHJ8PWkucGVyZm9ybShzLmdldFBlcmZvcm1BcmdzKGkpKSxlLmdyb3VwLnNpbGVudD0hIXQuZ2V0KCJzaWxlbnQiKSxZZCh0LGUpLGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXQoImJsZW5kTW9kZSIpfHxudWxsO2UuZ3JvdXAudHJhdmVyc2UoZnVuY3Rpb24odCl7dC5pc0dyb3VwfHx0LnN0eWxlLmJsZW5kIT09aSYmdC5zZXRTdHlsZSgiYmxlbmQiLGkpLHQuZWFjaFBlbmRpbmdEaXNwbGF5YWJsZSYmdC5lYWNoUGVuZGluZ0Rpc3BsYXlhYmxlKGZ1bmN0aW9uKHQpe3Quc2V0U3R5bGUoImJsZW5kIixpKX0pfSl9KHQsZSl9KSxzLnVuZmluaXNoZWR8PXIsZnVuY3Rpb24oaSx0KXt2YXIgZT1pLl96ci5zdG9yYWdlLG49MDtlLnRyYXZlcnNlKGZ1bmN0aW9uKHQpe24rK30pLG4+dC5nZXQoImhvdmVyTGF5ZXJUaHJlc2hvbGQiKSYmIXYubm9kZSYmdC5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQpe2lmKCF0LnByZXZlbnRVc2luZ0hvdmVyTGF5ZXIpe3ZhciBlPWkuX2NoYXJ0c01hcFt0Ll9fdmlld0lkXTtlLl9fYWxpdmUmJmUuZ3JvdXAudHJhdmVyc2UoZnVuY3Rpb24odCl7dC51c2VIb3ZlckxheWVyPSEwfSl9fSl9KG4sdCksTGMobi5fenIuZG9tLHQpfWZ1bmN0aW9uIFVkKGUsaSl7d2QoUWQsZnVuY3Rpb24odCl7dChlLGkpfSl9UGQucmVzaXplPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9kaXNwb3NlZCl7dGhpcy5fenIucmVzaXplKHQpO3ZhciBlPXRoaXMuX21vZGVsO2lmKHRoaXMuX2xvYWRpbmdGWCYmdGhpcy5fbG9hZGluZ0ZYLnJlc2l6ZSgpLGUpe3ZhciBpPWUucmVzZXRPcHRpb24oIm1lZGlhIiksbj10JiZ0LnNpbGVudDt0aGlzW1RkXT0hMCxpJiZFZCh0aGlzKSxPZC51cGRhdGUuY2FsbCh0aGlzKSx0aGlzW1RkXT0hMSxWZC5jYWxsKHRoaXMsbiksR2QuY2FsbCh0aGlzLG4pfX19LFBkLnNob3dMb2FkaW5nPWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuX2Rpc3Bvc2VkJiYoU2QodCkmJihlPXQsdD0iIiksdD10fHwiZGVmYXVsdCIsdGhpcy5oaWRlTG9hZGluZygpLG5mW3RdKSl7dmFyIGk9bmZbdF0odGhpcy5fYXBpLGUpLG49dGhpcy5fenI7dGhpcy5fbG9hZGluZ0ZYPWksbi5hZGQoaSl9fSxQZC5oaWRlTG9hZGluZz1mdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2VkfHwodGhpcy5fbG9hZGluZ0ZYJiZ0aGlzLl96ci5yZW1vdmUodGhpcy5fbG9hZGluZ0ZYKSx0aGlzLl9sb2FkaW5nRlg9bnVsbCl9LFBkLm1ha2VBY3Rpb25Gcm9tRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9TCh7fSx0KTtyZXR1cm4gZS50eXBlPUtkW3QudHlwZV0sZX0sUGQuZGlzcGF0Y2hBY3Rpb249ZnVuY3Rpb24odCxlKXt0aGlzLl9kaXNwb3NlZHx8KFNkKGUpfHwoZT17c2lsZW50OiEhZX0pLHFkW3QudHlwZV0mJnRoaXMuX21vZGVsJiYodGhpc1tUZF0/dGhpcy5fcGVuZGluZ0FjdGlvbnMucHVzaCh0KTooQmQuY2FsbCh0aGlzLHQsZS5zaWxlbnQpLGUuZmx1c2g/dGhpcy5fenIuZmx1c2goITApOiExIT09ZS5mbHVzaCYmdi5icm93c2VyLndlQ2hhdCYmdGhpcy5fdGhyb3R0bGVkWnJGbHVzaCgpLFZkLmNhbGwodGhpcyxlLnNpbGVudCksR2QuY2FsbCh0aGlzLGUuc2lsZW50KSkpKX0sUGQuYXBwZW5kRGF0YT1mdW5jdGlvbih0KXtpZighdGhpcy5fZGlzcG9zZWQpe3ZhciBlPXQuc2VyaWVzSW5kZXg7dGhpcy5nZXRNb2RlbCgpLmdldFNlcmllc0J5SW5kZXgoZSkuYXBwZW5kRGF0YSh0KSx0aGlzLl9zY2hlZHVsZXIudW5maW5pc2hlZD0hMH19LFBkLm9uPUNkKCJvbiIsITEpLFBkLm9mZj1DZCgib2ZmIiwhMSksUGQub25lPUNkKCJvbmUiLCExKTt2YXIgWGQ9WyJjbGljayIsImRibGNsaWNrIiwibW91c2VvdmVyIiwibW91c2VvdXQiLCJtb3VzZW1vdmUiLCJtb3VzZWRvd24iLCJtb3VzZXVwIiwiZ2xvYmFsb3V0IiwiY29udGV4dG1lbnUiXTtmdW5jdGlvbiBZZCh0LGUpe3ZhciBpPXQuZ2V0KCJ6Iiksbj10LmdldCgiemxldmVsIik7ZS5ncm91cC50cmF2ZXJzZShmdW5jdGlvbih0KXsiZ3JvdXAiIT09dC50eXBlJiYobnVsbCE9aSYmKHQuej1pKSxudWxsIT1uJiYodC56bGV2ZWw9bikpfSl9ZnVuY3Rpb24gamQoKXt0aGlzLmV2ZW50SW5mb31QZC5faW5pdEV2ZW50cz1mdW5jdGlvbigpe3dkKFhkLGZ1bmN0aW9uKHUpe2Z1bmN0aW9uIHQodCl7dmFyIGUsaT10aGlzLmdldE1vZGVsKCksbj10LnRhcmdldDtpZigiZ2xvYmFsb3V0Ij09PXUpZT17fTtlbHNlIGlmKG4mJm51bGwhPW4uZGF0YUluZGV4KXt2YXIgbz1uLmRhdGFNb2RlbHx8aS5nZXRTZXJpZXNCeUluZGV4KG4uc2VyaWVzSW5kZXgpO2U9byYmby5nZXREYXRhUGFyYW1zKG4uZGF0YUluZGV4LG4uZGF0YVR5cGUsbil8fHt9fWVsc2UgbiYmbi5ldmVudERhdGEmJihlPUwoe30sbi5ldmVudERhdGEpKTtpZihlKXt2YXIgYT1lLmNvbXBvbmVudFR5cGUscj1lLmNvbXBvbmVudEluZGV4OyJtYXJrTGluZSIhPT1hJiYibWFya1BvaW50IiE9PWEmJiJtYXJrQXJlYSIhPT1hfHwoYT0ic2VyaWVzIixyPWUuc2VyaWVzSW5kZXgpO3ZhciBzPWEmJm51bGwhPXImJmkuZ2V0Q29tcG9uZW50KGEsciksbD1zJiZ0aGlzWyJzZXJpZXMiPT09cy5tYWluVHlwZT8iX2NoYXJ0c01hcCI6Il9jb21wb25lbnRzTWFwIl1bcy5fX3ZpZXdJZF07ZS5ldmVudD10LGUudHlwZT11LHRoaXMuX2VjRXZlbnRQcm9jZXNzb3IuZXZlbnRJbmZvPXt0YXJnZXRFbDpuLHBhY2tlZEV2ZW50OmUsbW9kZWw6cyx2aWV3Omx9LHRoaXMudHJpZ2dlcih1LGUpfX10LnpyRXZlbnRmdWxDYWxsQXRMYXN0PSEwLHRoaXMuX3pyLm9uKHUsdCx0aGlzKX0sdGhpcyksd2QoS2QsZnVuY3Rpb24odCxlKXt0aGlzLl9tZXNzYWdlQ2VudGVyLm9uKGUsZnVuY3Rpb24odCl7dGhpcy50cmlnZ2VyKGUsdCl9LHRoaXMpfSx0aGlzKX0sUGQuaXNEaXNwb3NlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNwb3NlZH0sUGQuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9kaXNwb3NlZHx8dGhpcy5zZXRPcHRpb24oe3NlcmllczpbXX0sITApfSxQZC5kaXNwb3NlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2Rpc3Bvc2VkKXt0aGlzLl9kaXNwb3NlZD0hMCxqbyh0aGlzLmdldERvbSgpLGxmLCIiKTt2YXIgZT10aGlzLl9hcGksaT10aGlzLl9tb2RlbDt3ZCh0aGlzLl9jb21wb25lbnRzVmlld3MsZnVuY3Rpb24odCl7dC5kaXNwb3NlKGksZSl9KSx3ZCh0aGlzLl9jaGFydHNWaWV3cyxmdW5jdGlvbih0KXt0LmRpc3Bvc2UoaSxlKX0pLHRoaXMuX3pyLmRpc3Bvc2UoKSxkZWxldGUgb2ZbdGhpcy5pZF19fSxiKGtkLEN0KSxqZC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmpkLG5vcm1hbGl6ZVF1ZXJ5OmZ1bmN0aW9uKHQpe3ZhciBzPXt9LGw9e30sdT17fTtpZih6KHQpKXt2YXIgZT1NZCh0KTtzLm1haW5UeXBlPWUubWFpbnx8bnVsbCxzLnN1YlR5cGU9ZS5zdWJ8fG51bGx9ZWxzZXt2YXIgaD1bIkluZGV4IiwiTmFtZSIsIklkIl0sYz17bmFtZToxLGRhdGFJbmRleDoxLGRhdGFUeXBlOjF9O0UodCxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0hMSxuPTA7bjxoLmxlbmd0aDtuKyspe3ZhciBvPWhbbl0sYT1lLmxhc3RJbmRleE9mKG8pO2lmKDA8YSYmYT09PWUubGVuZ3RoLW8ubGVuZ3RoKXt2YXIgcj1lLnNsaWNlKDAsYSk7ImRhdGEiIT09ciYmKHMubWFpblR5cGU9cixzW28udG9Mb3dlckNhc2UoKV09dCxpPSEwKX19Yy5oYXNPd25Qcm9wZXJ0eShlKSYmKGxbZV09dCxpPSEwKSxpfHwodVtlXT10KX0pfXJldHVybntjcHRRdWVyeTpzLGRhdGFRdWVyeTpsLG90aGVyUXVlcnk6dX19LGZpbHRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5ldmVudEluZm87aWYoIW4pcmV0dXJuITA7dmFyIG89bi50YXJnZXRFbCxhPW4ucGFja2VkRXZlbnQscj1uLm1vZGVsLHM9bi52aWV3O2lmKCFyfHwhcylyZXR1cm4hMDt2YXIgbD1lLmNwdFF1ZXJ5LHU9ZS5kYXRhUXVlcnk7cmV0dXJuIGgobCxyLCJtYWluVHlwZSIpJiZoKGwsciwic3ViVHlwZSIpJiZoKGwsciwiaW5kZXgiLCJjb21wb25lbnRJbmRleCIpJiZoKGwsciwibmFtZSIpJiZoKGwsciwiaWQiKSYmaCh1LGEsIm5hbWUiKSYmaCh1LGEsImRhdGFJbmRleCIpJiZoKHUsYSwiZGF0YVR5cGUiKSYmKCFzLmZpbHRlckZvckV4cG9zZWRFdmVudHx8cy5maWx0ZXJGb3JFeHBvc2VkRXZlbnQodCxlLm90aGVyUXVlcnksbyxhKSk7ZnVuY3Rpb24gaCh0LGUsaSxuKXtyZXR1cm4gbnVsbD09dFtpXXx8ZVtufHxpXT09PXRbaV19fSxhZnRlclRyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLmV2ZW50SW5mbz1udWxsfX07dmFyIHFkPXt9LEtkPXt9LCRkPVtdLEpkPVtdLFFkPVtdLHRmPVtdLGVmPXt9LG5mPXt9LG9mPXt9LGFmPXt9LHJmPW5ldyBEYXRlLTAsc2Y9bmV3IERhdGUtMCxsZj0iX2VjaGFydHNfaW5zdGFuY2VfIjtmdW5jdGlvbiB1Zih0KXthZlt0XT0hMX12YXIgaGY9dWY7ZnVuY3Rpb24gY2YodCl7cmV0dXJuIG9mW2Z1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlP3QuZ2V0QXR0cmlidXRlKGUpOnRbZV19KHQsbGYpXX1mdW5jdGlvbiBkZih0LGUpe2VmW3RdPWV9ZnVuY3Rpb24gZmYodCl7SmQucHVzaCh0KX1mdW5jdGlvbiBwZih0LGUpe3hmKCRkLHQsZSwxZTMpfWZ1bmN0aW9uIGdmKHQsZSxpKXsiZnVuY3Rpb24iPT10eXBlb2YgZSYmKGk9ZSxlPSIiKTt2YXIgbj1TZCh0KT90LnR5cGU6W3QsdD17ZXZlbnQ6ZX1dWzBdO3QuZXZlbnQ9KHQuZXZlbnR8fG4pLnRvTG93ZXJDYXNlKCksZT10LmV2ZW50LF9kKERkLnRlc3QobikmJkRkLnRlc3QoZSkpLHFkW25dfHwocWRbbl09e2FjdGlvbjppLGFjdGlvbkluZm86dH0pLEtkW2VdPW59ZnVuY3Rpb24gbWYodCxlKXtuaC5yZWdpc3Rlcih0LGUpfWZ1bmN0aW9uIHZmKHQsZSl7eGYodGYsdCxlLDFlMywibGF5b3V0Iil9ZnVuY3Rpb24geWYodCxlKXt4Zih0Zix0LGUsM2UzLCJ2aXN1YWwiKX1mdW5jdGlvbiB4Zih0LGUsaSxuLG8peyhiZChlKXx8U2QoZSkpJiYoaT1lLGU9bik7dmFyIGE9UGMud3JhcFN0YWdlSGFuZGxlcihpLG8pO3JldHVybiBhLl9fcHJpbz1lLGEuX19yYXc9aSx0LnB1c2goYSksYX1mdW5jdGlvbiBfZih0LGUpe25mW3RdPWV9ZnVuY3Rpb24gd2YodCl7cmV0dXJuIFR1LmV4dGVuZCh0KX1mdW5jdGlvbiBiZih0KXtyZXR1cm4gaGMuZXh0ZW5kKHQpfWZ1bmN0aW9uIFNmKHQpe3JldHVybiBpYy5leHRlbmQodCl9ZnVuY3Rpb24gTWYodCl7cmV0dXJuIGdjLmV4dGVuZCh0KX15ZigyZTMsRGMpLGZmKEloKSxwZig5MDAsZnVuY3Rpb24odCl7dmFyIGE9USgpO3QuZWFjaFNlcmllcyhmdW5jdGlvbih0KXt2YXIgZT10LmdldCgic3RhY2siKTtpZihlKXt2YXIgaT1hLmdldChlKXx8YS5zZXQoZSxbXSksbj10LmdldERhdGEoKSxvPXtzdGFja1Jlc3VsdERpbWVuc2lvbjpuLmdldENhbGN1bGF0aW9uSW5mbygic3RhY2tSZXN1bHREaW1lbnNpb24iKSxzdGFja2VkT3ZlckRpbWVuc2lvbjpuLmdldENhbGN1bGF0aW9uSW5mbygic3RhY2tlZE92ZXJEaW1lbnNpb24iKSxzdGFja2VkRGltZW5zaW9uOm4uZ2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja2VkRGltZW5zaW9uIiksc3RhY2tlZEJ5RGltZW5zaW9uOm4uZ2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja2VkQnlEaW1lbnNpb24iKSxpc1N0YWNrZWRCeUluZGV4Om4uZ2V0Q2FsY3VsYXRpb25JbmZvKCJpc1N0YWNrZWRCeUluZGV4IiksZGF0YTpuLHNlcmllc01vZGVsOnR9O2lmKCFvLnN0YWNrZWREaW1lbnNpb258fCFvLmlzU3RhY2tlZEJ5SW5kZXgmJiFvLnN0YWNrZWRCeURpbWVuc2lvbilyZXR1cm47aS5sZW5ndGgmJm4uc2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja2VkT25TZXJpZXMiLGlbaS5sZW5ndGgtMV0uc2VyaWVzTW9kZWwpLGkucHVzaChvKX19KSxhLmVhY2goVGgpfSksX2YoImRlZmF1bHQiLGZ1bmN0aW9uKG4sdCl7Qyh0PXR8fHt9LHt0ZXh0OiJsb2FkaW5nIixjb2xvcjoiI2MyMzUzMSIsdGV4dENvbG9yOiIjMDAwIixtYXNrQ29sb3I6InJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KSIsemxldmVsOjB9KTt2YXIgbz1uZXcgaXMoe3N0eWxlOntmaWxsOnQubWFza0NvbG9yfSx6bGV2ZWw6dC56bGV2ZWwsejoxZTR9KSxhPW5ldyB1cyh7c2hhcGU6e3N0YXJ0QW5nbGU6LWtjLzIsZW5kQW5nbGU6LWtjLzIrLjEscjoxMH0sc3R5bGU6e3N0cm9rZTp0LmNvbG9yLGxpbmVDYXA6InJvdW5kIixsaW5lV2lkdGg6NX0semxldmVsOnQuemxldmVsLHo6MTAwMDF9KSxyPW5ldyBpcyh7c3R5bGU6e2ZpbGw6Im5vbmUiLHRleHQ6dC50ZXh0LHRleHRQb3NpdGlvbjoicmlnaHQiLHRleHREaXN0YW5jZToxMCx0ZXh0RmlsbDp0LnRleHRDb2xvcn0semxldmVsOnQuemxldmVsLHo6MTAwMDF9KTthLmFuaW1hdGVTaGFwZSghMCkud2hlbigxZTMse2VuZEFuZ2xlOjMqa2MvMn0pLnN0YXJ0KCJjaXJjdWxhckluT3V0IiksYS5hbmltYXRlU2hhcGUoITApLndoZW4oMWUzLHtzdGFydEFuZ2xlOjMqa2MvMn0pLmRlbGF5KDMwMCkuc3RhcnQoImNpcmN1bGFySW5PdXQiKTt2YXIgZT1uZXcgSWk7cmV0dXJuIGUuYWRkKGEpLGUuYWRkKHIpLGUuYWRkKG8pLGUucmVzaXplPWZ1bmN0aW9uKCl7dmFyIHQ9bi5nZXRXaWR0aCgpLzIsZT1uLmdldEhlaWdodCgpLzI7YS5zZXRTaGFwZSh7Y3g6dCxjeTplfSk7dmFyIGk9YS5zaGFwZS5yO3Iuc2V0U2hhcGUoe3g6dC1pLHk6ZS1pLHdpZHRoOjIqaSxoZWlnaHQ6MippfSksby5zZXRTaGFwZSh7eDowLHk6MCx3aWR0aDpuLmdldFdpZHRoKCksaGVpZ2h0Om4uZ2V0SGVpZ2h0KCl9KX0sZS5yZXNpemUoKSxlfSksZ2Yoe3R5cGU6ImhpZ2hsaWdodCIsZXZlbnQ6ImhpZ2hsaWdodCIsdXBkYXRlOiJoaWdobGlnaHQifSxldCksZ2Yoe3R5cGU6ImRvd25wbGF5IixldmVudDoiZG93bnBsYXkiLHVwZGF0ZToiZG93bnBsYXkifSxldCksZGYoImxpZ2h0IixKYyksZGYoImRhcmsiLGVkKTtmdW5jdGlvbiBJZih0KXtyZXR1cm4gdH1mdW5jdGlvbiBUZih0LGUsaSxuLG8pe3RoaXMuX29sZD10LHRoaXMuX25ldz1lLHRoaXMuX29sZEtleUdldHRlcj1pfHxJZix0aGlzLl9uZXdLZXlHZXR0ZXI9bnx8SWYsdGhpcy5jb250ZXh0PW99ZnVuY3Rpb24gQWYodCxlLGksbixvKXtmb3IodmFyIGE9MDthPHQubGVuZ3RoO2ErKyl7dmFyIHI9Il9lY18iK29bbl0odFthXSxhKSxzPWVbcl07bnVsbD09cz8oaS5wdXNoKHIpLGVbcl09YSk6KHMubGVuZ3RofHwoZVtyXT1zPVtzXSkscy5wdXNoKGEpKX19VGYucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpUZixhZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FkZD10LHRoaXN9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdXBkYXRlPXQsdGhpc30scmVtb3ZlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yZW1vdmU9dCx0aGlzfSxleGVjdXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fb2xkLGU9dGhpcy5fbmV3LGk9e30sbj1bXSxvPVtdO2ZvcihBZih0LHt9LG4sIl9vbGRLZXlHZXR0ZXIiLHRoaXMpLEFmKGUsaSxvLCJfbmV3S2V5R2V0dGVyIix0aGlzKSxhPTA7YTx0Lmxlbmd0aDthKyspe2lmKG51bGwhPShzPWlbcj1uW2FdXSkpKHU9cy5sZW5ndGgpPygxPT09dSYmKGlbcl09bnVsbCkscz1zLnNoaWZ0KCkpOmlbcl09bnVsbCx0aGlzLl91cGRhdGUmJnRoaXMuX3VwZGF0ZShzLGEpO2Vsc2UgdGhpcy5fcmVtb3ZlJiZ0aGlzLl9yZW1vdmUoYSl9Zm9yKHZhciBhPTA7YTxvLmxlbmd0aDthKyspe3ZhciByPW9bYV07aWYoaS5oYXNPd25Qcm9wZXJ0eShyKSl7dmFyIHM7aWYobnVsbD09KHM9aVtyXSkpY29udGludWU7aWYocy5sZW5ndGgpZm9yKHZhciBsPTAsdT1zLmxlbmd0aDtsPHU7bCsrKXRoaXMuX2FkZCYmdGhpcy5fYWRkKHNbbF0pO2Vsc2UgdGhpcy5fYWRkJiZ0aGlzLl9hZGQocyl9fX19O3ZhciBEZj1RKFsidG9vbHRpcCIsImxhYmVsIiwiaXRlbU5hbWUiLCJpdGVtSWQiLCJzZXJpZXNOYW1lIl0pO2Z1bmN0aW9uIENmKHQsZSl7cmV0dXJuIHQuaGFzT3duUHJvcGVydHkoZSl8fCh0W2VdPVtdKSx0W2VdfWZ1bmN0aW9uIExmKHQpe3JldHVybiJjYXRlZ29yeSI9PT10PyJvcmRpbmFsIjoidGltZSI9PT10PyJ0aW1lIjoiZmxvYXQifWZ1bmN0aW9uIGtmKHQpe251bGwhPXQmJkwodGhpcyx0KSx0aGlzLm90aGVyRGltcz17fX12YXIgUGY9UixOZj0idW5kZWZpbmVkIixPZj17ZmxvYXQ6dHlwZW9mIEZsb2F0NjRBcnJheT09TmY/QXJyYXk6RmxvYXQ2NEFycmF5LGludDp0eXBlb2YgSW50MzJBcnJheT09TmY/QXJyYXk6SW50MzJBcnJheSxvcmRpbmFsOkFycmF5LG51bWJlcjpBcnJheSx0aW1lOkFycmF5fSxFZj10eXBlb2YgVWludDMyQXJyYXk9PU5mP0FycmF5OlVpbnQzMkFycmF5LHpmPXR5cGVvZiBJbnQzMkFycmF5PT1OZj9BcnJheTpJbnQzMkFycmF5LFJmPXR5cGVvZiBVaW50MTZBcnJheT09TmY/QXJyYXk6VWludDE2QXJyYXk7ZnVuY3Rpb24gQmYodCl7cmV0dXJuIDY1NTM1PHQuX3Jhd0NvdW50P0VmOlJmfXZhciBWZj1bImhhc0l0ZW1PcHRpb24iLCJfbmFtZUxpc3QiLCJfaWRMaXN0IiwiX2ludmVydGVkSW5kaWNlc01hcCIsIl9yYXdEYXRhIiwiX2NodW5rU2l6ZSIsIl9jaHVua0NvdW50IiwiX2RpbVZhbHVlR2V0dGVyIiwiX2NvdW50IiwiX3Jhd0NvdW50IiwiX25hbWVEaW1JZHgiLCJfaWREaW1JZHgiXSxHZj1bIl9leHRlbnQiLCJfYXBwcm94aW1hdGVFeHRlbnQiLCJfcmF3RXh0ZW50Il07ZnVuY3Rpb24gRmYoZSxpKXtFKFZmLmNvbmNhdChpLl9fd3JhcHBlZE1ldGhvZHN8fFtdKSxmdW5jdGlvbih0KXtpLmhhc093blByb3BlcnR5KHQpJiYoZVt0XT1pW3RdKX0pLGUuX193cmFwcGVkTWV0aG9kcz1pLl9fd3JhcHBlZE1ldGhvZHMsRShHZixmdW5jdGlvbih0KXtlW3RdPUQoaVt0XSl9KSxlLl9jYWxjdWxhdGlvbkluZm89TChpLl9jYWxjdWxhdGlvbkluZm8pfXZhciBXZj1mdW5jdGlvbih0LGUpe3Q9dHx8WyJ4IiwieSJdO2Zvcih2YXIgaT17fSxuPVtdLG89e30sYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgcj10W2FdO3oocik/cj1uZXcga2Yoe25hbWU6cn0pOnIgaW5zdGFuY2VvZiBrZnx8KHI9bmV3IGtmKHIpKTt2YXIgcz1yLm5hbWU7ci50eXBlPXIudHlwZXx8ImZsb2F0IixyLmNvb3JkRGltfHwoci5jb29yZERpbT1zLHIuY29vcmREaW1JbmRleD0wKSxyLm90aGVyRGltcz1yLm90aGVyRGltc3x8e30sbi5wdXNoKHMpLChpW3NdPXIpLmluZGV4PWEsci5jcmVhdGVJbnZlcnRlZEluZGljZXMmJihvW3NdPVtdKX10aGlzLmRpbWVuc2lvbnM9bix0aGlzLl9kaW1lbnNpb25JbmZvcz1pLHRoaXMuaG9zdE1vZGVsPWUsdGhpcy5kYXRhVHlwZSx0aGlzLl9pbmRpY2VzPW51bGwsdGhpcy5fY291bnQ9MCx0aGlzLl9yYXdDb3VudD0wLHRoaXMuX3N0b3JhZ2U9e30sdGhpcy5fbmFtZUxpc3Q9W10sdGhpcy5faWRMaXN0PVtdLHRoaXMuX29wdGlvbk1vZGVscz1bXSx0aGlzLl92aXN1YWw9e30sdGhpcy5fbGF5b3V0PXt9LHRoaXMuX2l0ZW1WaXN1YWxzPVtdLHRoaXMuaGFzSXRlbVZpc3VhbD17fSx0aGlzLl9pdGVtTGF5b3V0cz1bXSx0aGlzLl9ncmFwaGljRWxzPVtdLHRoaXMuX2NodW5rU2l6ZT0xZTUsdGhpcy5fY2h1bmtDb3VudD0wLHRoaXMuX3Jhd0RhdGEsdGhpcy5fcmF3RXh0ZW50PXt9LHRoaXMuX2V4dGVudD17fSx0aGlzLl9hcHByb3hpbWF0ZUV4dGVudD17fSx0aGlzLl9kaW1lbnNpb25zU3VtbWFyeT1mdW5jdGlvbihuKXt2YXIgdD17fSxhPXQuZW5jb2RlPXt9LHI9USgpLHM9W10sbD1bXSx1PXQudXNlck91dHB1dD17ZGltZW5zaW9uTmFtZXM6bi5kaW1lbnNpb25zLnNsaWNlKCksZW5jb2RlOnt9fTtFKG4uZGltZW5zaW9ucyxmdW5jdGlvbih0KXt2YXIgbz1uLmdldERpbWVuc2lvbkluZm8odCksZT1vLmNvb3JkRGltO2lmKGUpe3ZhciBpPW8uY29vcmREaW1JbmRleDtDZihhLGUpW2ldPXQsby5pc0V4dHJhQ29vcmR8fChyLnNldChlLDEpLGZ1bmN0aW9uKHQpe3JldHVybiEoIm9yZGluYWwiPT09dHx8InRpbWUiPT09dCl9KG8udHlwZSkmJihzWzBdPXQpLENmKHUuZW5jb2RlLGUpW2ldPW8uaW5kZXgpLG8uZGVmYXVsdFRvb2x0aXAmJmwucHVzaCh0KX1EZi5lYWNoKGZ1bmN0aW9uKHQsZSl7dmFyIGk9Q2YoYSxlKSxuPW8ub3RoZXJEaW1zW2VdO251bGwhPW4mJiExIT09biYmKGlbbl09by5uYW1lKX0pfSk7dmFyIG89W10saD17fTtyLmVhY2goZnVuY3Rpb24odCxlKXt2YXIgaT1hW2VdO2hbZV09aVswXSxvPW8uY29uY2F0KGkpfSksdC5kYXRhRGltc09uQ29vcmQ9byx0LmVuY29kZUZpcnN0RGltTm90RXh0cmE9aDt2YXIgZT1hLmxhYmVsO2UmJmUubGVuZ3RoJiYocz1lLnNsaWNlKCkpO3ZhciBpPWEudG9vbHRpcDtyZXR1cm4gaSYmaS5sZW5ndGg/bD1pLnNsaWNlKCk6bC5sZW5ndGh8fChsPXMuc2xpY2UoKSksYS5kZWZhdWx0ZWRMYWJlbD1zLGEuZGVmYXVsdGVkVG9vbHRpcD1sLHR9KHRoaXMpLHRoaXMuX2ludmVydGVkSW5kaWNlc01hcD1vLHRoaXMuX2NhbGN1bGF0aW9uSW5mbz17fSx0aGlzLnVzZXJPdXRwdXQ9dGhpcy5fZGltZW5zaW9uc1N1bW1hcnkudXNlck91dHB1dH0sSGY9V2YucHJvdG90eXBlO2Z1bmN0aW9uIFpmKHQsZSxpLG4sbyl7dmFyIGE9T2ZbZS50eXBlXSxyPW4tMSxzPWUubmFtZSxsPXRbc11bcl07aWYobCYmbC5sZW5ndGg8aSl7Zm9yKHZhciB1PW5ldyBhKE1hdGgubWluKG8tcippLGkpKSxoPTA7aDxsLmxlbmd0aDtoKyspdVtoXT1sW2hdO3Rbc11bcl09dX1mb3IodmFyIGM9bippO2M8bztjKz1pKXRbc10ucHVzaChuZXcgYShNYXRoLm1pbihvLWMsaSkpKX1mdW5jdGlvbiBVZihvKXt2YXIgYT1vLl9pbnZlcnRlZEluZGljZXNNYXA7RShhLGZ1bmN0aW9uKHQsZSl7dmFyIGk9by5fZGltZW5zaW9uSW5mb3NbZV0ub3JkaW5hbE1ldGE7aWYoaSl7dD1hW2VdPW5ldyB6ZihpLmNhdGVnb3JpZXMubGVuZ3RoKTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0W25dPS0xO2ZvcihuPTA7bjxvLl9jb3VudDtuKyspdFtvLmdldChlLG4pXT1ufX0pfWZ1bmN0aW9uIFhmKHQsZSxpKXt2YXIgbjtpZihudWxsIT1lKXt2YXIgbz10Ll9jaHVua1NpemUsYT1NYXRoLmZsb29yKGkvbykscj1pJW8scz10LmRpbWVuc2lvbnNbZV0sbD10Ll9zdG9yYWdlW3NdW2FdO2lmKGwpe249bFtyXTt2YXIgdT10Ll9kaW1lbnNpb25JbmZvc1tzXS5vcmRpbmFsTWV0YTt1JiZ1LmNhdGVnb3JpZXMubGVuZ3RoJiYobj11LmNhdGVnb3JpZXNbbl0pfX1yZXR1cm4gbn1mdW5jdGlvbiBZZih0KXtyZXR1cm4gdH1mdW5jdGlvbiBqZih0KXtyZXR1cm4gdDx0aGlzLl9jb3VudCYmMDw9dD90aGlzLl9pbmRpY2VzW3RdOi0xfWZ1bmN0aW9uIHFmKHQsZSl7dmFyIGk9dC5faWRMaXN0W2VdO3JldHVybiBudWxsPT1pJiYoaT1YZih0LHQuX2lkRGltSWR4LGUpKSxudWxsPT1pJiYoaT0iZVwwXDAiK2UpLGl9ZnVuY3Rpb24gS2YodCl7cmV0dXJuIGsodCl8fCh0PVt0XSksdH1mdW5jdGlvbiAkZih0LGUpe3ZhciBpPXQuZGltZW5zaW9ucyxuPW5ldyBXZihOKGksdC5nZXREaW1lbnNpb25JbmZvLHQpLHQuaG9zdE1vZGVsKTtGZihuLHQpO2Zvcih2YXIgbz1uLl9zdG9yYWdlPXt9LGE9dC5fc3RvcmFnZSxyPTA7cjxpLmxlbmd0aDtyKyspe3ZhciBzPWlbcl07YVtzXSYmKDA8PV8oZSxzKT8ob1tzXT1KZihhW3NdKSxuLl9yYXdFeHRlbnRbc109UWYoKSxuLl9leHRlbnRbc109bnVsbCk6b1tzXT1hW3NdKX1yZXR1cm4gbn1mdW5jdGlvbiBKZih0KXtmb3IodmFyIGUsaSxuPW5ldyBBcnJheSh0Lmxlbmd0aCksbz0wO288dC5sZW5ndGg7bysrKW5bb109KGU9dFtvXSxpPXZvaWQgMCwoaT1lLmNvbnN0cnVjdG9yKT09PUFycmF5P2Uuc2xpY2UoKTpuZXcgaShlKSk7cmV0dXJuIG59ZnVuY3Rpb24gUWYoKXtyZXR1cm5bMS8wLC0xLzBdfUhmLnR5cGU9Imxpc3QiLEhmLmhhc0l0ZW1PcHRpb249ITAsSGYuZ2V0RGltZW5zaW9uPWZ1bmN0aW9uKHQpe3JldHVybiJudW1iZXIiIT10eXBlb2YgdCYmKGlzTmFOKHQpfHx0aGlzLl9kaW1lbnNpb25JbmZvcy5oYXNPd25Qcm9wZXJ0eSh0KSl8fCh0PXRoaXMuZGltZW5zaW9uc1t0XSksdH0sSGYuZ2V0RGltZW5zaW9uSW5mbz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZGltZW5zaW9uSW5mb3NbdGhpcy5nZXREaW1lbnNpb24odCldfSxIZi5nZXREaW1lbnNpb25zT25Db29yZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaW1lbnNpb25zU3VtbWFyeS5kYXRhRGltc09uQ29vcmQuc2xpY2UoKX0sSGYubWFwRGltZW5zaW9uPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZGltZW5zaW9uc1N1bW1hcnk7aWYobnVsbD09ZSlyZXR1cm4gaS5lbmNvZGVGaXJzdERpbU5vdEV4dHJhW3RdO3ZhciBuPWkuZW5jb2RlW3RdO3JldHVybiEwPT09ZT8obnx8W10pLnNsaWNlKCk6biYmbltlXX0sSGYuaW5pdERhdGE9ZnVuY3Rpb24odCxlLGkpeyhHdS5pc0luc3RhbmNlKHQpfHxQKHQpKSYmKHQ9bmV3IEFoKHQsdGhpcy5kaW1lbnNpb25zLmxlbmd0aCkpLHRoaXMuX3Jhd0RhdGE9dCx0aGlzLl9zdG9yYWdlPXt9LHRoaXMuX2luZGljZXM9bnVsbCx0aGlzLl9uYW1lTGlzdD1lfHxbXSx0aGlzLl9pZExpc3Q9W10sdGhpcy5fbmFtZVJlcGVhdENvdW50PXt9LGl8fCh0aGlzLmhhc0l0ZW1PcHRpb249ITEpLHRoaXMuZGVmYXVsdERpbVZhbHVlR2V0dGVyPUVoW3RoaXMuX3Jhd0RhdGEuZ2V0U291cmNlKCkuc291cmNlRm9ybWF0XSx0aGlzLl9kaW1WYWx1ZUdldHRlcj1pPWl8fHRoaXMuZGVmYXVsdERpbVZhbHVlR2V0dGVyLHRoaXMuX2RpbVZhbHVlR2V0dGVyQXJyYXlSb3dzPUVoLmFycmF5Um93cyx0aGlzLl9yYXdFeHRlbnQ9e30sdGhpcy5faW5pdERhdGFGcm9tUHJvdmlkZXIoMCx0LmNvdW50KCkpLHQucHVyZSYmKHRoaXMuaGFzSXRlbU9wdGlvbj0hMSl9LEhmLmdldFByb3ZpZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jhd0RhdGF9LEhmLmFwcGVuZERhdGE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmF3RGF0YSxpPXRoaXMuY291bnQoKTtlLmFwcGVuZERhdGEodCk7dmFyIG49ZS5jb3VudCgpO2UucGVyc2lzdGVudHx8KG4rPWkpLHRoaXMuX2luaXREYXRhRnJvbVByb3ZpZGVyKGksbil9LEhmLmFwcGVuZFZhbHVlcz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLl9jaHVua1NpemUsbj10aGlzLl9zdG9yYWdlLG89dGhpcy5kaW1lbnNpb25zLGE9by5sZW5ndGgscj10aGlzLl9yYXdFeHRlbnQscz10aGlzLmNvdW50KCksbD1zK01hdGgubWF4KHQubGVuZ3RoLGU/ZS5sZW5ndGg6MCksdT10aGlzLl9jaHVua0NvdW50LGg9MDtoPGE7aCsrKXtyW3Y9b1toXV18fChyW3ZdPVFmKCkpLG5bdl18fChuW3ZdPVtdKSxaZihuLHRoaXMuX2RpbWVuc2lvbkluZm9zW3ZdLGksdSxsKSx0aGlzLl9jaHVua0NvdW50PW5bdl0ubGVuZ3RofWZvcih2YXIgYz1uZXcgQXJyYXkoYSksZD1zO2Q8bDtkKyspe2Zvcih2YXIgZj1kLXMscD1NYXRoLmZsb29yKGQvaSksZz1kJWksbT0wO208YTttKyspe3ZhciB2PW9bbV0seT10aGlzLl9kaW1WYWx1ZUdldHRlckFycmF5Um93cyh0W2ZdfHxjLHYsZixtKTtuW3ZdW3BdW2ddPXk7dmFyIHg9clt2XTt5PHhbMF0mJih4WzBdPXkpLHk+eFsxXSYmKHhbMV09eSl9ZSYmKHRoaXMuX25hbWVMaXN0W2RdPWVbZl0pfXRoaXMuX3Jhd0NvdW50PXRoaXMuX2NvdW50PWwsdGhpcy5fZXh0ZW50PXt9LFVmKHRoaXMpfSxIZi5faW5pdERhdGFGcm9tUHJvdmlkZXI9ZnVuY3Rpb24odCxlKXtpZighKGU8PXQpKXtmb3IodmFyIGksbj10aGlzLl9jaHVua1NpemUsbz10aGlzLl9yYXdEYXRhLGE9dGhpcy5fc3RvcmFnZSxyPXRoaXMuZGltZW5zaW9ucyxzPXIubGVuZ3RoLGw9dGhpcy5fZGltZW5zaW9uSW5mb3MsdT10aGlzLl9uYW1lTGlzdCxoPXRoaXMuX2lkTGlzdCxjPXRoaXMuX3Jhd0V4dGVudCxkPXRoaXMuX25hbWVSZXBlYXRDb3VudD17fSxmPXRoaXMuX2NodW5rQ291bnQscD0wO3A8cztwKyspe2Nbdz1yW3BdXXx8KGNbd109UWYoKSk7dmFyIGc9bFt3XTswPT09Zy5vdGhlckRpbXMuaXRlbU5hbWUmJihpPXRoaXMuX25hbWVEaW1JZHg9cCksMD09PWcub3RoZXJEaW1zLml0ZW1JZCYmKHRoaXMuX2lkRGltSWR4PXApLGFbd118fChhW3ddPVtdKSxaZihhLGcsbixmLGUpLHRoaXMuX2NodW5rQ291bnQ9YVt3XS5sZW5ndGh9Zm9yKHZhciBtPW5ldyBBcnJheShzKSx2PXQ7djxlO3YrKyl7bT1vLmdldEl0ZW0odixtKTtmb3IodmFyIHk9TWF0aC5mbG9vcih2L24pLHg9diVuLF89MDtfPHM7XysrKXt2YXIgdyxiPWFbdz1yW19dXVt5XSxTPXRoaXMuX2RpbVZhbHVlR2V0dGVyKG0sdyx2LF8pO2JbeF09Uzt2YXIgTT1jW3ddO1M8TVswXSYmKE1bMF09UyksUz5NWzFdJiYoTVsxXT1TKX1pZighby5wdXJlKXt2YXIgST11W3ZdO2lmKG0mJm51bGw9PUkpaWYobnVsbCE9bS5uYW1lKXVbdl09ST1tLm5hbWU7ZWxzZSBpZihudWxsIT1pKXt2YXIgVD1yW2ldLEE9YVtUXVt5XTtpZihBKXtJPUFbeF07dmFyIEQ9bFtUXS5vcmRpbmFsTWV0YTtEJiZELmNhdGVnb3JpZXMubGVuZ3RoJiYoST1ELmNhdGVnb3JpZXNbSV0pfX12YXIgQz1udWxsPT1tP251bGw6bS5pZDtudWxsPT1DJiZudWxsIT1JJiYoZFtJXT1kW0ldfHwwLDA8ZFtDPUldJiYoQys9Il9fZWNfXyIrZFtJXSksZFtJXSsrKSxudWxsIT1DJiYoaFt2XT1DKX19IW8ucGVyc2lzdGVudCYmby5jbGVhbiYmby5jbGVhbigpLHRoaXMuX3Jhd0NvdW50PXRoaXMuX2NvdW50PWUsdGhpcy5fZXh0ZW50PXt9LFVmKHRoaXMpfX0sSGYuY291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY291bnR9LEhmLmdldEluZGljZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9pbmRpY2VzO2lmKHQpe3ZhciBlPXQuY29uc3RydWN0b3IsaT10aGlzLl9jb3VudDtpZihlPT09QXJyYXkpe289bmV3IGUoaSk7Zm9yKHZhciBuPTA7bjxpO24rKylvW25dPXRbbl19ZWxzZSBvPW5ldyBlKHQuYnVmZmVyLDAsaSl9ZWxzZXt2YXIgbz1uZXcoZT1CZih0aGlzKSkodGhpcy5jb3VudCgpKTtmb3Iobj0wO248by5sZW5ndGg7bisrKW9bbl09bn1yZXR1cm4gb30sSGYuZ2V0PWZ1bmN0aW9uKHQsZSl7aWYoISgwPD1lJiZlPHRoaXMuX2NvdW50KSlyZXR1cm4gTmFOO3ZhciBpPXRoaXMuX3N0b3JhZ2U7aWYoIWlbdF0pcmV0dXJuIE5hTjtlPXRoaXMuZ2V0UmF3SW5kZXgoZSk7dmFyIG49TWF0aC5mbG9vcihlL3RoaXMuX2NodW5rU2l6ZSksbz1lJXRoaXMuX2NodW5rU2l6ZTtyZXR1cm4gaVt0XVtuXVtvXX0sSGYuZ2V0QnlSYXdJbmRleD1mdW5jdGlvbih0LGUpe2lmKCEoMDw9ZSYmZTx0aGlzLl9yYXdDb3VudCkpcmV0dXJuIE5hTjt2YXIgaT10aGlzLl9zdG9yYWdlW3RdO2lmKCFpKXJldHVybiBOYU47dmFyIG49TWF0aC5mbG9vcihlL3RoaXMuX2NodW5rU2l6ZSksbz1lJXRoaXMuX2NodW5rU2l6ZTtyZXR1cm4gaVtuXVtvXX0sSGYuX2dldEZhc3Q9ZnVuY3Rpb24odCxlKXt2YXIgaT1NYXRoLmZsb29yKGUvdGhpcy5fY2h1bmtTaXplKSxuPWUldGhpcy5fY2h1bmtTaXplO3JldHVybiB0aGlzLl9zdG9yYWdlW3RdW2ldW25dfSxIZi5nZXRWYWx1ZXM9ZnVuY3Rpb24odCxlKXt2YXIgaT1bXTtrKHQpfHwoZT10LHQ9dGhpcy5kaW1lbnNpb25zKTtmb3IodmFyIG49MCxvPXQubGVuZ3RoO248bztuKyspaS5wdXNoKHRoaXMuZ2V0KHRbbl0sZSkpO3JldHVybiBpfSxIZi5oYXNWYWx1ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5fZGltZW5zaW9uc1N1bW1hcnkuZGF0YURpbXNPbkNvb3JkLGk9MCxuPWUubGVuZ3RoO2k8bjtpKyspaWYoaXNOYU4odGhpcy5nZXQoZVtpXSx0KSkpcmV0dXJuITE7cmV0dXJuITB9LEhmLmdldERhdGFFeHRlbnQ9ZnVuY3Rpb24odCl7dD10aGlzLmdldERpbWVuc2lvbih0KTt2YXIgZT10aGlzLl9zdG9yYWdlW3RdLGk9UWYoKTtpZighZSlyZXR1cm4gaTt2YXIgbixvPXRoaXMuY291bnQoKTtpZighdGhpcy5faW5kaWNlcylyZXR1cm4gdGhpcy5fcmF3RXh0ZW50W3RdLnNsaWNlKCk7aWYobj10aGlzLl9leHRlbnRbdF0pcmV0dXJuIG4uc2xpY2UoKTtmb3IodmFyIGE9KG49aSlbMF0scj1uWzFdLHM9MDtzPG87cysrKXt2YXIgbD10aGlzLl9nZXRGYXN0KHQsdGhpcy5nZXRSYXdJbmRleChzKSk7bDxhJiYoYT1sKSxyPGwmJihyPWwpfXJldHVybiBuPVthLHJdLHRoaXMuX2V4dGVudFt0XT1ufSxIZi5nZXRBcHByb3hpbWF0ZUV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLmdldERpbWVuc2lvbih0KSx0aGlzLl9hcHByb3hpbWF0ZUV4dGVudFt0XXx8dGhpcy5nZXREYXRhRXh0ZW50KHQpfSxIZi5zZXRBcHByb3hpbWF0ZUV4dGVudD1mdW5jdGlvbih0LGUpe2U9dGhpcy5nZXREaW1lbnNpb24oZSksdGhpcy5fYXBwcm94aW1hdGVFeHRlbnRbZV09dC5zbGljZSgpfSxIZi5nZXRDYWxjdWxhdGlvbkluZm89ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NhbGN1bGF0aW9uSW5mb1t0XX0sSGYuc2V0Q2FsY3VsYXRpb25JbmZvPWZ1bmN0aW9uKHQsZSl7UGYodCk/TCh0aGlzLl9jYWxjdWxhdGlvbkluZm8sdCk6dGhpcy5fY2FsY3VsYXRpb25JbmZvW3RdPWV9LEhmLmdldFN1bT1mdW5jdGlvbih0KXt2YXIgZT0wO2lmKHRoaXMuX3N0b3JhZ2VbdF0pZm9yKHZhciBpPTAsbj10aGlzLmNvdW50KCk7aTxuO2krKyl7dmFyIG89dGhpcy5nZXQodCxpKTtpc05hTihvKXx8KGUrPW8pfXJldHVybiBlfSxIZi5nZXRNZWRpYW49ZnVuY3Rpb24odCl7dmFyIGk9W107dGhpcy5lYWNoKHQsZnVuY3Rpb24odCxlKXtpc05hTih0KXx8aS5wdXNoKHQpfSk7dmFyIGU9W10uY29uY2F0KGkpLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC1lfSksbj10aGlzLmNvdW50KCk7cmV0dXJuIDA9PT1uPzA6biUyPT0xP2VbKG4tMSkvMl06KGVbbi8yXStlW24vMi0xXSkvMn0sSGYucmF3SW5kZXhPZj1mdW5jdGlvbih0LGUpe3ZhciBpPSh0JiZ0aGlzLl9pbnZlcnRlZEluZGljZXNNYXBbdF0pW2VdO3JldHVybiBudWxsPT1pfHxpc05hTihpKT8tMTppfSxIZi5pbmRleE9mTmFtZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPXRoaXMuY291bnQoKTtlPGk7ZSsrKWlmKHRoaXMuZ2V0TmFtZShlKT09PXQpcmV0dXJuIGU7cmV0dXJuLTF9LEhmLmluZGV4T2ZSYXdJbmRleD1mdW5jdGlvbih0KXtpZih0Pj10aGlzLl9yYXdDb3VudHx8dDwwKXJldHVybi0xO2lmKCF0aGlzLl9pbmRpY2VzKXJldHVybiB0O3ZhciBlPXRoaXMuX2luZGljZXMsaT1lW3RdO2lmKG51bGwhPWkmJmk8dGhpcy5fY291bnQmJmk9PT10KXJldHVybiB0O2Zvcih2YXIgbj0wLG89dGhpcy5fY291bnQtMTtuPD1vOyl7dmFyIGE9KG4rbykvMnwwO2lmKGVbYV08dCluPTErYTtlbHNle2lmKCEoZVthXT50KSlyZXR1cm4gYTtvPWEtMX19cmV0dXJuLTF9LEhmLmluZGljZXNPZk5lYXJlc3Q9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPVtdO2lmKCF0aGlzLl9zdG9yYWdlW3RdKXJldHVybiBuO251bGw9PWkmJihpPTEvMCk7Zm9yKHZhciBvPTEvMCxhPS0xLHI9MCxzPTAsbD10aGlzLmNvdW50KCk7czxsO3MrKyl7dmFyIHU9ZS10aGlzLmdldCh0LHMpLGg9TWF0aC5hYnModSk7aDw9aSYmKChoPG98fGg9PT1vJiYwPD11JiZhPDApJiYobz1oLGE9dSxyPTApLHU9PT1hJiYobltyKytdPXMpKX1yZXR1cm4gbi5sZW5ndGg9cixufSxIZi5nZXRSYXdJbmRleD1ZZixIZi5nZXRSYXdEYXRhSXRlbT1mdW5jdGlvbih0KXtpZih0aGlzLl9yYXdEYXRhLnBlcnNpc3RlbnQpcmV0dXJuIHRoaXMuX3Jhd0RhdGEuZ2V0SXRlbSh0aGlzLmdldFJhd0luZGV4KHQpKTtmb3IodmFyIGU9W10saT0wO2k8dGhpcy5kaW1lbnNpb25zLmxlbmd0aDtpKyspe3ZhciBuPXRoaXMuZGltZW5zaW9uc1tpXTtlLnB1c2godGhpcy5nZXQobix0KSl9cmV0dXJuIGV9LEhmLmdldE5hbWU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRSYXdJbmRleCh0KTtyZXR1cm4gdGhpcy5fbmFtZUxpc3RbZV18fFhmKHRoaXMsdGhpcy5fbmFtZURpbUlkeCxlKXx8IiJ9LEhmLmdldElkPWZ1bmN0aW9uKHQpe3JldHVybiBxZih0aGlzLHRoaXMuZ2V0UmF3SW5kZXgodCkpfSxIZi5lYWNoPWZ1bmN0aW9uKHQsZSxpLG4pe2lmKHRoaXMuX2NvdW50KXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKG49aSxpPWUsZT10LHQ9W10pLGk9aXx8bnx8dGhpcztmb3IodmFyIG89KHQ9TihLZih0KSx0aGlzLmdldERpbWVuc2lvbix0aGlzKSkubGVuZ3RoLGE9MDthPHRoaXMuY291bnQoKTthKyspc3dpdGNoKG8pe2Nhc2UgMDplLmNhbGwoaSxhKTticmVhaztjYXNlIDE6ZS5jYWxsKGksdGhpcy5nZXQodFswXSxhKSxhKTticmVhaztjYXNlIDI6ZS5jYWxsKGksdGhpcy5nZXQodFswXSxhKSx0aGlzLmdldCh0WzFdLGEpLGEpO2JyZWFrO2RlZmF1bHQ6Zm9yKHZhciByPTAscz1bXTtyPG87cisrKXNbcl09dGhpcy5nZXQodFtyXSxhKTtzW3JdPWEsZS5hcHBseShpLHMpfX19LEhmLmZpbHRlclNlbGY9ZnVuY3Rpb24odCxlLGksbil7aWYodGhpcy5fY291bnQpeyJmdW5jdGlvbiI9PXR5cGVvZiB0JiYobj1pLGk9ZSxlPXQsdD1bXSksaT1pfHxufHx0aGlzLHQ9TihLZih0KSx0aGlzLmdldERpbWVuc2lvbix0aGlzKTtmb3IodmFyIG89dGhpcy5jb3VudCgpLGE9bmV3KEJmKHRoaXMpKShvKSxyPVtdLHM9dC5sZW5ndGgsbD0wLHU9dFswXSxoPTA7aDxvO2grKyl7dmFyIGMsZD10aGlzLmdldFJhd0luZGV4KGgpO2lmKDA9PT1zKWM9ZS5jYWxsKGksaCk7ZWxzZSBpZigxPT09cyl7dmFyIGY9dGhpcy5fZ2V0RmFzdCh1LGQpO2M9ZS5jYWxsKGksZixoKX1lbHNle2Zvcih2YXIgcD0wO3A8cztwKyspcltwXT10aGlzLl9nZXRGYXN0KHUsZCk7cltwXT1oLGM9ZS5hcHBseShpLHIpfWMmJihhW2wrK109ZCl9cmV0dXJuIGw8byYmKHRoaXMuX2luZGljZXM9YSksdGhpcy5fY291bnQ9bCx0aGlzLl9leHRlbnQ9e30sdGhpcy5nZXRSYXdJbmRleD10aGlzLl9pbmRpY2VzP2pmOllmLHRoaXN9fSxIZi5zZWxlY3RSYW5nZT1mdW5jdGlvbih0KXtpZih0aGlzLl9jb3VudCl7dmFyIGU9W107Zm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmZS5wdXNoKGkpO3ZhciBuPWUubGVuZ3RoO2lmKG4pe3ZhciBvPXRoaXMuY291bnQoKSxhPW5ldyhCZih0aGlzKSkobykscj0wLHM9ZVswXSxsPXRbc11bMF0sdT10W3NdWzFdLGg9ITE7aWYoIXRoaXMuX2luZGljZXMpe3ZhciBjPTA7aWYoMT09PW4pe2Zvcih2YXIgZD10aGlzLl9zdG9yYWdlW2VbMF1dLGY9MDtmPHRoaXMuX2NodW5rQ291bnQ7ZisrKWZvcih2YXIgcD1kW2ZdLGc9TWF0aC5taW4odGhpcy5fY291bnQtZip0aGlzLl9jaHVua1NpemUsdGhpcy5fY2h1bmtTaXplKSxtPTA7bTxnO20rKyl7KGw8PSh3PXBbbV0pJiZ3PD11fHxpc05hTih3KSkmJihhW3IrK109YyksYysrfWg9ITB9ZWxzZSBpZigyPT09bil7ZD10aGlzLl9zdG9yYWdlW3NdO3ZhciB2PXRoaXMuX3N0b3JhZ2VbZVsxXV0seT10W2VbMV1dWzBdLHg9dFtlWzFdXVsxXTtmb3IoZj0wO2Y8dGhpcy5fY2h1bmtDb3VudDtmKyspe3A9ZFtmXTt2YXIgXz12W2ZdO2ZvcihnPU1hdGgubWluKHRoaXMuX2NvdW50LWYqdGhpcy5fY2h1bmtTaXplLHRoaXMuX2NodW5rU2l6ZSksbT0wO208ZzttKyspe3ZhciB3PXBbbV0sYj1fW21dOyhsPD13JiZ3PD11fHxpc05hTih3KSkmJih5PD1iJiZiPD14fHxpc05hTihiKSkmJihhW3IrK109YyksYysrfX1oPSEwfX1pZighaClpZigxPT09bilmb3IobT0wO208bzttKyspe3ZhciBTPXRoaXMuZ2V0UmF3SW5kZXgobSk7KGw8PSh3PXRoaXMuX2dldEZhc3QocyxTKSkmJnc8PXV8fGlzTmFOKHcpKSYmKGFbcisrXT1TKX1lbHNlIGZvcihtPTA7bTxvO20rKyl7dmFyIE09ITA7Zm9yKFM9dGhpcy5nZXRSYXdJbmRleChtKSxmPTA7ZjxuO2YrKyl7dmFyIEk9ZVtmXTsoKHc9dGhpcy5fZ2V0RmFzdChpLFMpKTx0W0ldWzBdfHx3PnRbSV1bMV0pJiYoTT0hMSl9TSYmKGFbcisrXT10aGlzLmdldFJhd0luZGV4KG0pKX1yZXR1cm4gcjxvJiYodGhpcy5faW5kaWNlcz1hKSx0aGlzLl9jb3VudD1yLHRoaXMuX2V4dGVudD17fSx0aGlzLmdldFJhd0luZGV4PXRoaXMuX2luZGljZXM/amY6WWYsdGhpc319fSxIZi5tYXBBcnJheT1mdW5jdGlvbih0LGUsaSxuKXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKG49aSxpPWUsZT10LHQ9W10pLGk9aXx8bnx8dGhpczt2YXIgbz1bXTtyZXR1cm4gdGhpcy5lYWNoKHQsZnVuY3Rpb24oKXtvLnB1c2goZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxpKSxvfSxIZi5tYXA9ZnVuY3Rpb24odCxlLGksbil7aT1pfHxufHx0aGlzO3ZhciBvPSRmKHRoaXMsdD1OKEtmKHQpLHRoaXMuZ2V0RGltZW5zaW9uLHRoaXMpKTtvLl9pbmRpY2VzPXRoaXMuX2luZGljZXMsby5nZXRSYXdJbmRleD1vLl9pbmRpY2VzP2pmOllmO2Zvcih2YXIgYT1vLl9zdG9yYWdlLHI9W10scz10aGlzLl9jaHVua1NpemUsbD10Lmxlbmd0aCx1PXRoaXMuY291bnQoKSxoPVtdLGM9by5fcmF3RXh0ZW50LGQ9MDtkPHU7ZCsrKXtmb3IodmFyIGY9MDtmPGw7ZisrKWhbZl09dGhpcy5nZXQodFtmXSxkKTtoW2xdPWQ7dmFyIHA9ZSYmZS5hcHBseShpLGgpO2lmKG51bGwhPXApeyJvYmplY3QiIT10eXBlb2YgcCYmKHJbMF09cCxwPXIpO2Zvcih2YXIgZz10aGlzLmdldFJhd0luZGV4KGQpLG09TWF0aC5mbG9vcihnL3MpLHY9ZyVzLHk9MDt5PHAubGVuZ3RoO3krKyl7dmFyIHg9dFt5XSxfPXBbeV0sdz1jW3hdLGI9YVt4XTtiJiYoYlttXVt2XT1fKSxfPHdbMF0mJih3WzBdPV8pLF8+d1sxXSYmKHdbMV09Xyl9fX1yZXR1cm4gb30sSGYuZG93blNhbXBsZT1mdW5jdGlvbih0LGUsaSxuKXtmb3IodmFyIG89JGYodGhpcyxbdF0pLGE9by5fc3RvcmFnZSxyPVtdLHM9TWF0aC5mbG9vcigxL2UpLGw9YVt0XSx1PXRoaXMuY291bnQoKSxoPXRoaXMuX2NodW5rU2l6ZSxjPW8uX3Jhd0V4dGVudFt0XSxkPW5ldyhCZih0aGlzKSkodSksZj0wLHA9MDtwPHU7cCs9cyl7dS1wPHMmJihzPXUtcCxyLmxlbmd0aD1zKTtmb3IodmFyIGc9MDtnPHM7ZysrKXt2YXIgbT10aGlzLmdldFJhd0luZGV4KHArZyksdj1NYXRoLmZsb29yKG0vaCkseT1tJWg7cltnXT1sW3ZdW3ldfXZhciB4PWkociksXz10aGlzLmdldFJhd0luZGV4KE1hdGgubWluKHArbihyLHgpfHwwLHUtMSkpLHc9XyVoOyhsW01hdGguZmxvb3IoXy9oKV1bd109eCk8Y1swXSYmKGNbMF09eCkseD5jWzFdJiYoY1sxXT14KSxkW2YrK109X31yZXR1cm4gby5fY291bnQ9ZixvLl9pbmRpY2VzPWQsby5nZXRSYXdJbmRleD1qZixvfSxIZi5nZXRJdGVtTW9kZWw9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ob3N0TW9kZWw7cmV0dXJuIG5ldyBJbCh0aGlzLmdldFJhd0RhdGFJdGVtKHQpLGUsZSYmZS5lY01vZGVsKX0sSGYuZGlmZj1mdW5jdGlvbihlKXt2YXIgaT10aGlzO3JldHVybiBuZXcgVGYoZT9lLmdldEluZGljZXMoKTpbXSx0aGlzLmdldEluZGljZXMoKSxmdW5jdGlvbih0KXtyZXR1cm4gcWYoZSx0KX0sZnVuY3Rpb24odCl7cmV0dXJuIHFmKGksdCl9KX0sSGYuZ2V0VmlzdWFsPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3Zpc3VhbDtyZXR1cm4gZSYmZVt0XX0sSGYuc2V0VmlzdWFsPWZ1bmN0aW9uKHQsZSl7aWYoUGYodCkpZm9yKHZhciBpIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShpKSYmdGhpcy5zZXRWaXN1YWwoaSx0W2ldKTtlbHNlIHRoaXMuX3Zpc3VhbD10aGlzLl92aXN1YWx8fHt9LHRoaXMuX3Zpc3VhbFt0XT1lfSxIZi5zZXRMYXlvdXQ9ZnVuY3Rpb24odCxlKXtpZihQZih0KSlmb3IodmFyIGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiZ0aGlzLnNldExheW91dChpLHRbaV0pO2Vsc2UgdGhpcy5fbGF5b3V0W3RdPWV9LEhmLmdldExheW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGF5b3V0W3RdfSxIZi5nZXRJdGVtTGF5b3V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pdGVtTGF5b3V0c1t0XX0sSGYuc2V0SXRlbUxheW91dD1mdW5jdGlvbih0LGUsaSl7dGhpcy5faXRlbUxheW91dHNbdF09aT9MKHRoaXMuX2l0ZW1MYXlvdXRzW3RdfHx7fSxlKTplfSxIZi5jbGVhckl0ZW1MYXlvdXRzPWZ1bmN0aW9uKCl7dGhpcy5faXRlbUxheW91dHMubGVuZ3RoPTB9LEhmLmdldEl0ZW1WaXN1YWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuX2l0ZW1WaXN1YWxzW3RdLG89biYmbltlXTtyZXR1cm4gbnVsbCE9b3x8aT9vOnRoaXMuZ2V0VmlzdWFsKGUpfSxIZi5zZXRJdGVtVmlzdWFsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLl9pdGVtVmlzdWFsc1t0XXx8e30sbz10aGlzLmhhc0l0ZW1WaXN1YWw7aWYodGhpcy5faXRlbVZpc3VhbHNbdF09bixQZihlKSlmb3IodmFyIGEgaW4gZSllLmhhc093blByb3BlcnR5KGEpJiYoblthXT1lW2FdLG9bYV09ITApO2Vsc2UgbltlXT1pLG9bZV09ITB9LEhmLmNsZWFyQWxsVmlzdWFsPWZ1bmN0aW9uKCl7dGhpcy5fdmlzdWFsPXt9LHRoaXMuX2l0ZW1WaXN1YWxzPVtdLHRoaXMuaGFzSXRlbVZpc3VhbD17fX07ZnVuY3Rpb24gdHAodCl7dC5zZXJpZXNJbmRleD10aGlzLnNlcmllc0luZGV4LHQuZGF0YUluZGV4PXRoaXMuZGF0YUluZGV4LHQuZGF0YVR5cGU9dGhpcy5kYXRhVHlwZX1mdW5jdGlvbiBlcCh0LGUsaSl7R3UuaXNJbnN0YW5jZShlKXx8KGU9R3Uuc2VyaWVzRGF0YVRvU291cmNlKGUpKSxpPWl8fHt9LHQ9KHR8fFtdKS5zbGljZSgpO2Zvcih2YXIgbj0oaS5kaW1zRGVmfHxbXSkuc2xpY2UoKSxvPVEoKSxhPVEoKSxsPVtdLHI9ZnVuY3Rpb24odCxlLGksbil7dmFyIG89TWF0aC5tYXgodC5kaW1lbnNpb25zRGV0ZWN0Q291bnR8fDEsZS5sZW5ndGgsaS5sZW5ndGgsbnx8MCk7cmV0dXJuIEUoZSxmdW5jdGlvbih0KXt2YXIgZT10LmRpbXNEZWY7ZSYmKG89TWF0aC5tYXgobyxlLmxlbmd0aCkpfSksb30oZSx0LG4saS5kaW1Db3VudCkscz0wO3M8cjtzKyspe3ZhciB1PW5bc109TCh7fSxSKG5bc10pP25bc106e25hbWU6bltzXX0pLGg9dS5uYW1lLGM9bFtzXT1uZXcga2Y7bnVsbCE9aCYmbnVsbD09by5nZXQoaCkmJihjLm5hbWU9Yy5kaXNwbGF5TmFtZT1oLG8uc2V0KGgscykpLG51bGwhPXUudHlwZSYmKGMudHlwZT11LnR5cGUpLG51bGwhPXUuZGlzcGxheU5hbWUmJihjLmRpc3BsYXlOYW1lPXUuZGlzcGxheU5hbWUpfXZhciBkPWkuZW5jb2RlRGVmOyFkJiZpLmVuY29kZURlZmF1bHRlciYmKGQ9aS5lbmNvZGVEZWZhdWx0ZXIoZSxyKSksKGQ9UShkKSkuZWFjaChmdW5jdGlvbih0LGkpe2lmKDE9PT0odD1Fbyh0KS5zbGljZSgpKS5sZW5ndGgmJiF6KHRbMF0pJiZ0WzBdPDApZC5zZXQoaSwhMSk7ZWxzZXt2YXIgbj1kLnNldChpLFtdKTtFKHQsZnVuY3Rpb24odCxlKXt6KHQpJiYodD1vLmdldCh0KSksbnVsbCE9dCYmdDxyJiYobltlXT10LHAobFt0XSxpLGUpKX0pfX0pO3ZhciBmPTA7ZnVuY3Rpb24gcCh0LGUsaSl7bnVsbCE9RGYuZ2V0KGUpP3Qub3RoZXJEaW1zW2VdPWk6KHQuY29vcmREaW09ZSx0LmNvb3JkRGltSW5kZXg9aSxhLnNldChlLCEwKSl9RSh0LGZ1bmN0aW9uKG8sdCl7dmFyIGEscixzO2lmKHoobykpYT1vLG89e307ZWxzZXthPW8ubmFtZTt2YXIgZT1vLm9yZGluYWxNZXRhO28ub3JkaW5hbE1ldGE9bnVsbCwobz1EKG8pKS5vcmRpbmFsTWV0YT1lLHI9by5kaW1zRGVmLHM9by5vdGhlckRpbXMsby5uYW1lPW8uY29vcmREaW09by5jb29yZERpbUluZGV4PW8uZGltc0RlZj1vLm90aGVyRGltcz1udWxsfWlmKCExIT09KGk9ZC5nZXQoYSkpKXt2YXIgaTtpZighKGk9RW8oaSkpLmxlbmd0aClmb3IodmFyIG49MDtuPChyJiZyLmxlbmd0aHx8MSk7bisrKXtmb3IoO2Y8bC5sZW5ndGgmJm51bGwhPWxbZl0uY29vcmREaW07KWYrKztmPGwubGVuZ3RoJiZpLnB1c2goZisrKX1FKGksZnVuY3Rpb24odCxlKXt2YXIgaT1sW3RdO2lmKHAoQyhpLG8pLGEsZSksbnVsbD09aS5uYW1lJiZyKXt2YXIgbj1yW2VdO1Iobil8fChuPXtuYW1lOm59KSxpLm5hbWU9aS5kaXNwbGF5TmFtZT1uLm5hbWUsaS5kZWZhdWx0VG9vbHRpcD1uLmRlZmF1bHRUb29sdGlwfXMmJkMoaS5vdGhlckRpbXMscyl9KX19KTt2YXIgZz1pLmdlbmVyYXRlQ29vcmQsbT1pLmdlbmVyYXRlQ29vcmRDb3VudCx2PW51bGwhPW07bT1nP218fDE6MDtmb3IodmFyIHkseCxfPWd8fCJ2YWx1ZSIsdz0wO3c8cjt3Kyspe251bGw9PShjPWxbd109bFt3XXx8bmV3IGtmKS5jb29yZERpbSYmKGMuY29vcmREaW09aXAoXyxhLHYpLGMuY29vcmREaW1JbmRleD0wLCghZ3x8bTw9MCkmJihjLmlzRXh0cmFDb29yZD0hMCksbS0tKSxudWxsPT1jLm5hbWUmJihjLm5hbWU9aXAoYy5jb29yZERpbSxvKSksbnVsbD09Yy50eXBlJiYoeT1lLHg9dyxjLm5hbWUscXUoeS5kYXRhLHkuc291cmNlRm9ybWF0LHkuc2VyaWVzTGF5b3V0QnkseS5kaW1lbnNpb25zRGVmaW5lLHkuc3RhcnRJbmRleCx4KT09PUZ1Lk11c3R8fGMuaXNFeHRyYUNvb3JkJiYobnVsbCE9Yy5vdGhlckRpbXMuaXRlbU5hbWV8fG51bGwhPWMub3RoZXJEaW1zLnNlcmllc05hbWUpKSYmKGMudHlwZT0ib3JkaW5hbCIpfXJldHVybiBsfWZ1bmN0aW9uIGlwKHQsZSxpKXtpZihpfHxudWxsIT1lLmdldCh0KSl7Zm9yKHZhciBuPTA7bnVsbCE9ZS5nZXQodCtuKTspbisrO3QrPW59cmV0dXJuIGUuc2V0KHQsITApLHR9SGYuc2V0SXRlbUdyYXBoaWNFbD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuaG9zdE1vZGVsO2UmJihlLmRhdGFJbmRleD10LGUuZGF0YVR5cGU9dGhpcy5kYXRhVHlwZSxlLnNlcmllc0luZGV4PWkmJmkuc2VyaWVzSW5kZXgsImdyb3VwIj09PWUudHlwZSYmZS50cmF2ZXJzZSh0cCxlKSksdGhpcy5fZ3JhcGhpY0Vsc1t0XT1lfSxIZi5nZXRJdGVtR3JhcGhpY0VsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ncmFwaGljRWxzW3RdfSxIZi5lYWNoSXRlbUdyYXBoaWNFbD1mdW5jdGlvbihpLG4pe0UodGhpcy5fZ3JhcGhpY0VscyxmdW5jdGlvbih0LGUpe3QmJmkmJmkuY2FsbChuLHQsZSl9KX0sSGYuY2xvbmVTaGFsbG93PWZ1bmN0aW9uKHQpe2lmKCF0KXt2YXIgZT1OKHRoaXMuZGltZW5zaW9ucyx0aGlzLmdldERpbWVuc2lvbkluZm8sdGhpcyk7dD1uZXcgV2YoZSx0aGlzLmhvc3RNb2RlbCl9aWYodC5fc3RvcmFnZT10aGlzLl9zdG9yYWdlLEZmKHQsdGhpcyksdGhpcy5faW5kaWNlcyl7dmFyIGk9dGhpcy5faW5kaWNlcy5jb25zdHJ1Y3Rvcjt0Ll9pbmRpY2VzPW5ldyBpKHRoaXMuX2luZGljZXMpfWVsc2UgdC5faW5kaWNlcz1udWxsO3JldHVybiB0LmdldFJhd0luZGV4PXQuX2luZGljZXM/amY6WWYsdH0sSGYud3JhcE1ldGhvZD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXNbdF07ImZ1bmN0aW9uIj09dHlwZW9mIGkmJih0aGlzLl9fd3JhcHBlZE1ldGhvZHM9dGhpcy5fX3dyYXBwZWRNZXRob2RzfHxbXSx0aGlzLl9fd3JhcHBlZE1ldGhvZHMucHVzaCh0KSx0aGlzW3RdPWZ1bmN0aW9uKCl7dmFyIHQ9aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUuYXBwbHkodGhpcyxbdF0uY29uY2F0KFUoYXJndW1lbnRzKSkpfSl9LEhmLlRSQU5TRkVSQUJMRV9NRVRIT0RTPVsiY2xvbmVTaGFsbG93IiwiZG93blNhbXBsZSIsIm1hcCJdLEhmLkNIQU5HQUJMRV9NRVRIT0RTPVsiZmlsdGVyU2VsZiIsInNlbGVjdFJhbmdlIl07dmFyIG5wPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGVwKChlPWV8fHt9KS5jb29yZERpbWVuc2lvbnN8fFtdLHQse2RpbXNEZWY6ZS5kaW1lbnNpb25zRGVmaW5lfHx0LmRpbWVuc2lvbnNEZWZpbmUsZW5jb2RlRGVmOmUuZW5jb2RlRGVmaW5lfHx0LmVuY29kZURlZmluZSxkaW1Db3VudDplLmRpbWVuc2lvbnNDb3VudCxlbmNvZGVEZWZhdWx0ZXI6ZS5lbmNvZGVEZWZhdWx0ZXIsZ2VuZXJhdGVDb29yZDplLmdlbmVyYXRlQ29vcmQsZ2VuZXJhdGVDb29yZENvdW50OmUuZ2VuZXJhdGVDb29yZENvdW50fSl9O2Z1bmN0aW9uIG9wKHQpe3RoaXMuY29vcmRTeXNOYW1lPXQsdGhpcy5jb29yZFN5c0RpbXM9W10sdGhpcy5heGlzTWFwPVEoKSx0aGlzLmNhdGVnb3J5QXhpc01hcD1RKCksdGhpcy5maXJzdENhdGVnb3J5RGltSW5kZXg9bnVsbH12YXIgYXA9e2NhcnRlc2lhbjJkOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXQuZ2V0UmVmZXJyaW5nQ29tcG9uZW50cygieEF4aXMiKVswXSxhPXQuZ2V0UmVmZXJyaW5nQ29tcG9uZW50cygieUF4aXMiKVswXTtlLmNvb3JkU3lzRGltcz1bIngiLCJ5Il0saS5zZXQoIngiLG8pLGkuc2V0KCJ5IixhKSxycChvKSYmKG4uc2V0KCJ4IixvKSxlLmZpcnN0Q2F0ZWdvcnlEaW1JbmRleD0wKSxycChhKSYmKG4uc2V0KCJ5IixhKSxlLmZpcnN0Q2F0ZWdvcnlEaW1JbmRleCxlLmZpcnN0Q2F0ZWdvcnlEaW1JbmRleD0xKX0sc2luZ2xlQXhpczpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10LmdldFJlZmVycmluZ0NvbXBvbmVudHMoInNpbmdsZUF4aXMiKVswXTtlLmNvb3JkU3lzRGltcz1bInNpbmdsZSJdLGkuc2V0KCJzaW5nbGUiLG8pLHJwKG8pJiYobi5zZXQoInNpbmdsZSIsbyksZS5maXJzdENhdGVnb3J5RGltSW5kZXg9MCl9LHBvbGFyOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXQuZ2V0UmVmZXJyaW5nQ29tcG9uZW50cygicG9sYXIiKVswXSxhPW8uZmluZEF4aXNNb2RlbCgicmFkaXVzQXhpcyIpLHI9by5maW5kQXhpc01vZGVsKCJhbmdsZUF4aXMiKTtlLmNvb3JkU3lzRGltcz1bInJhZGl1cyIsImFuZ2xlIl0saS5zZXQoInJhZGl1cyIsYSksaS5zZXQoImFuZ2xlIixyKSxycChhKSYmKG4uc2V0KCJyYWRpdXMiLGEpLGUuZmlyc3RDYXRlZ29yeURpbUluZGV4PTApLHJwKHIpJiYobi5zZXQoImFuZ2xlIixyKSxudWxsPT1lLmZpcnN0Q2F0ZWdvcnlEaW1JbmRleCYmKGUuZmlyc3RDYXRlZ29yeURpbUluZGV4PTEpKX0sZ2VvOmZ1bmN0aW9uKHQsZSxpLG4pe2UuY29vcmRTeXNEaW1zPVsibG5nIiwibGF0Il19LHBhcmFsbGVsOmZ1bmN0aW9uKHQsbyxhLHIpe3ZhciBzPXQuZWNNb2RlbCxlPXMuZ2V0Q29tcG9uZW50KCJwYXJhbGxlbCIsdC5nZXQoInBhcmFsbGVsSW5kZXgiKSksbD1vLmNvb3JkU3lzRGltcz1lLmRpbWVuc2lvbnMuc2xpY2UoKTtFKGUucGFyYWxsZWxBeGlzSW5kZXgsZnVuY3Rpb24odCxlKXt2YXIgaT1zLmdldENvbXBvbmVudCgicGFyYWxsZWxBeGlzIix0KSxuPWxbZV07YS5zZXQobixpKSxycChpKSYmbnVsbD09by5maXJzdENhdGVnb3J5RGltSW5kZXgmJihyLnNldChuLGkpLG8uZmlyc3RDYXRlZ29yeURpbUluZGV4PWUpfSl9fTtmdW5jdGlvbiBycCh0KXtyZXR1cm4iY2F0ZWdvcnkiPT09dC5nZXQoInR5cGUiKX1mdW5jdGlvbiBzcCh0LGksZSl7dmFyIG4sbyxhLHIscz0oZT1lfHx7fSkuYnlJbmRleCxsPWUuc3RhY2tlZENvb3JkRGltZW5zaW9uLHU9ISghdHx8IXQuZ2V0KCJzdGFjayIpKTtpZihFKGksZnVuY3Rpb24odCxlKXt6KHQpJiYoaVtlXT10PXtuYW1lOnR9KSx1JiYhdC5pc0V4dHJhQ29vcmQmJihzfHxufHwhdC5vcmRpbmFsTWV0YXx8KG49dCksb3x8Im9yZGluYWwiPT09dC50eXBlfHwidGltZSI9PT10LnR5cGV8fGwmJmwhPT10LmNvb3JkRGltfHwobz10KSl9KSwhb3x8c3x8bnx8KHM9ITApLG8pe2E9Il9fXDBlY3N0YWNrcmVzdWx0IixyPSJfX1wwZWNzdGFja2Vkb3ZlciIsbiYmKG4uY3JlYXRlSW52ZXJ0ZWRJbmRpY2VzPSEwKTt2YXIgaD1vLmNvb3JkRGltLGM9by50eXBlLGQ9MDtFKGksZnVuY3Rpb24odCl7dC5jb29yZERpbT09PWgmJmQrK30pLGkucHVzaCh7bmFtZTphLGNvb3JkRGltOmgsY29vcmREaW1JbmRleDpkLHR5cGU6Yyxpc0V4dHJhQ29vcmQ6ITAsaXNDYWxjdWxhdGlvbkNvb3JkOiEwfSksZCsrLGkucHVzaCh7bmFtZTpyLGNvb3JkRGltOnIsY29vcmREaW1JbmRleDpkLHR5cGU6Yyxpc0V4dHJhQ29vcmQ6ITAsaXNDYWxjdWxhdGlvbkNvb3JkOiEwfSl9cmV0dXJue3N0YWNrZWREaW1lbnNpb246byYmby5uYW1lLHN0YWNrZWRCeURpbWVuc2lvbjpuJiZuLm5hbWUsaXNTdGFja2VkQnlJbmRleDpzLHN0YWNrZWRPdmVyRGltZW5zaW9uOnIsc3RhY2tSZXN1bHREaW1lbnNpb246YX19ZnVuY3Rpb24gbHAodCxlKXtyZXR1cm4hIWUmJmU9PT10LmdldENhbGN1bGF0aW9uSW5mbygic3RhY2tlZERpbWVuc2lvbiIpfWZ1bmN0aW9uIHVwKHQsZSl7cmV0dXJuIGxwKHQsZSk/dC5nZXRDYWxjdWxhdGlvbkluZm8oInN0YWNrUmVzdWx0RGltZW5zaW9uIik6ZX1mdW5jdGlvbiBocCh0LGUsaSl7aT1pfHx7fSxHdS5pc0luc3RhbmNlKHQpfHwodD1HdS5zZXJpZXNEYXRhVG9Tb3VyY2UodCkpO3ZhciBuLG89ZS5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKSxhPW5oLmdldChvKSxyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0KCJjb29yZGluYXRlU3lzdGVtIiksaT1uZXcgb3AoZSksbj1hcFtlXTtpZihuKXJldHVybiBuKHQsaSxpLmF4aXNNYXAsaS5jYXRlZ29yeUF4aXNNYXApLGl9KGUpO3ImJihuPU4oci5jb29yZFN5c0RpbXMsZnVuY3Rpb24odCl7dmFyIGU9e25hbWU6dH0saT1yLmF4aXNNYXAuZ2V0KHQpO2lmKGkpe3ZhciBuPWkuZ2V0KCJ0eXBlIik7ZS50eXBlPUxmKG4pfXJldHVybiBlfSkpLG49bnx8KGEmJihhLmdldERpbWVuc2lvbnNJbmZvP2EuZ2V0RGltZW5zaW9uc0luZm8oKTphLmRpbWVuc2lvbnMuc2xpY2UoKSl8fFsieCIsInkiXSk7dmFyIHMsbCx1PW5wKHQse2Nvb3JkRGltZW5zaW9uczpuLGdlbmVyYXRlQ29vcmQ6aS5nZW5lcmF0ZUNvb3JkLGVuY29kZURlZmF1bHRlcjppLnVzZUVuY29kZURlZmF1bHRlcj9UKFh1LG4sZSk6bnVsbH0pO3ImJkUodSxmdW5jdGlvbih0LGUpe3ZhciBpPXQuY29vcmREaW0sbj1yLmNhdGVnb3J5QXhpc01hcC5nZXQoaSk7biYmKG51bGw9PXMmJihzPWUpLHQub3JkaW5hbE1ldGE9bi5nZXRPcmRpbmFsTWV0YSgpKSxudWxsIT10Lm90aGVyRGltcy5pdGVtTmFtZSYmKGw9ITApfSksbHx8bnVsbD09c3x8KHVbc10ub3RoZXJEaW1zLml0ZW1OYW1lPTApO3ZhciBoPXNwKGUsdSksYz1uZXcgV2YodSxlKTtjLnNldENhbGN1bGF0aW9uSW5mbyhoKTt2YXIgZD1udWxsIT1zJiZmdW5jdGlvbih0KXtpZih0LnNvdXJjZUZvcm1hdD09PVB1KXt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZT0wO2Zvcig7ZTx0Lmxlbmd0aCYmbnVsbD09dFtlXTspZSsrO3JldHVybiB0W2VdfSh0LmRhdGF8fFtdKTtyZXR1cm4gbnVsbCE9ZSYmIWsoQm8oZSkpfX0odCk/ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIG49PT1zP2k6dGhpcy5kZWZhdWx0RGltVmFsdWVHZXR0ZXIodCxlLGksbil9Om51bGw7cmV0dXJuIGMuaGFzSXRlbU9wdGlvbj0hMSxjLmluaXREYXRhKHQsbnVsbCxkKSxjfWZ1bmN0aW9uIGNwKHQpe3RoaXMuX3NldHRpbmc9dHx8e30sdGhpcy5fZXh0ZW50PVsxLzAsLTEvMF0sdGhpcy5faW50ZXJ2YWw9MCx0aGlzLmluaXQmJnRoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZHAodCl7dGhpcy5jYXRlZ29yaWVzPXQuY2F0ZWdvcmllc3x8W10sdGhpcy5fbmVlZENvbGxlY3Q9dC5uZWVkQ29sbGVjdCx0aGlzLl9kZWR1cGxpY2F0aW9uPXQuZGVkdXBsaWNhdGlvbix0aGlzLl9tYXB9Y3AucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3JldHVybiB0fSxjcC5wcm90b3R5cGUuZ2V0U2V0dGluZz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2V0dGluZ1t0XX0sY3AucHJvdG90eXBlLmNvbnRhaW49ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZXh0ZW50O3JldHVybiB0Pj1lWzBdJiZ0PD1lWzFdfSxjcC5wcm90b3R5cGUubm9ybWFsaXplPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2V4dGVudDtyZXR1cm4gZVsxXT09PWVbMF0/LjU6KHQtZVswXSkvKGVbMV0tZVswXSl9LGNwLnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9leHRlbnQ7cmV0dXJuIHQqKGVbMV0tZVswXSkrZVswXX0sY3AucHJvdG90eXBlLnVuaW9uRXh0ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2V4dGVudDt0WzBdPGVbMF0mJihlWzBdPXRbMF0pLHRbMV0+ZVsxXSYmKGVbMV09dFsxXSl9LGNwLnByb3RvdHlwZS51bmlvbkV4dGVudEZyb21EYXRhPWZ1bmN0aW9uKHQsZSl7dGhpcy51bmlvbkV4dGVudCh0LmdldEFwcHJveGltYXRlRXh0ZW50KGUpKX0sY3AucHJvdG90eXBlLmdldEV4dGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9leHRlbnQuc2xpY2UoKX0sY3AucHJvdG90eXBlLnNldEV4dGVudD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2V4dGVudDtpc05hTih0KXx8KGlbMF09dCksaXNOYU4oZSl8fChpWzFdPWUpfSxjcC5wcm90b3R5cGUuaXNCbGFuaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0JsYW5rfSxjcC5wcm90b3R5cGUuc2V0Qmxhbms9ZnVuY3Rpb24odCl7dGhpcy5faXNCbGFuaz10fSxjcC5wcm90b3R5cGUuZ2V0TGFiZWw9bnVsbCx0YShjcCksYWEoY3Ase3JlZ2lzdGVyV2hlbkV4dGVuZDohMH0pLGRwLmNyZWF0ZUJ5QXhpc01vZGVsPWZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9uLGk9ZS5kYXRhLG49aSYmTihpLGdwKTtyZXR1cm4gbmV3IGRwKHtjYXRlZ29yaWVzOm4sbmVlZENvbGxlY3Q6IW4sZGVkdXBsaWNhdGlvbjohMSE9PWUuZGVkcGxpY2F0aW9ufSl9O3ZhciBmcD1kcC5wcm90b3R5cGU7ZnVuY3Rpb24gcHAodCl7cmV0dXJuIHQuX21hcHx8KHQuX21hcD1RKHQuY2F0ZWdvcmllcykpfWZ1bmN0aW9uIGdwKHQpe3JldHVybiBSKHQpJiZudWxsIT10LnZhbHVlP3QudmFsdWU6dCsiIn1mcC5nZXRPcmRpbmFsPWZ1bmN0aW9uKHQpe3JldHVybiBwcCh0aGlzKS5nZXQodCl9LGZwLnBhcnNlQW5kQ29sbGVjdD1mdW5jdGlvbih0KXt2YXIgZSxpPXRoaXMuX25lZWRDb2xsZWN0O2lmKCJzdHJpbmciIT10eXBlb2YgdCYmIWkpcmV0dXJuIHQ7aWYoaSYmIXRoaXMuX2RlZHVwbGljYXRpb24pcmV0dXJuIGU9dGhpcy5jYXRlZ29yaWVzLmxlbmd0aCx0aGlzLmNhdGVnb3JpZXNbZV09dCxlO3ZhciBuPXBwKHRoaXMpO3JldHVybiBudWxsPT0oZT1uLmdldCh0KSkmJihpPyhlPXRoaXMuY2F0ZWdvcmllcy5sZW5ndGgsdGhpcy5jYXRlZ29yaWVzW2VdPXQsbi5zZXQodCxlKSk6ZT1OYU4pLGV9O3ZhciBtcD1jcC5wcm90b3R5cGUsdnA9Y3AuZXh0ZW5kKHt0eXBlOiJvcmRpbmFsIixpbml0OmZ1bmN0aW9uKHQsZSl7dCYmIWsodCl8fCh0PW5ldyBkcCh7Y2F0ZWdvcmllczp0fSkpLHRoaXMuX29yZGluYWxNZXRhPXQsdGhpcy5fZXh0ZW50PWV8fFswLHQuY2F0ZWdvcmllcy5sZW5ndGgtMV19LHBhcnNlOmZ1bmN0aW9uKHQpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD90aGlzLl9vcmRpbmFsTWV0YS5nZXRPcmRpbmFsKHQpOk1hdGgucm91bmQodCl9LGNvbnRhaW46ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5wYXJzZSh0KSxtcC5jb250YWluLmNhbGwodGhpcyx0KSYmbnVsbCE9dGhpcy5fb3JkaW5hbE1ldGEuY2F0ZWdvcmllc1t0XX0sbm9ybWFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiBtcC5ub3JtYWxpemUuY2FsbCh0aGlzLHRoaXMucGFyc2UodCkpfSxzY2FsZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5yb3VuZChtcC5zY2FsZS5jYWxsKHRoaXMsdCkpfSxnZXRUaWNrczpmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPXRoaXMuX2V4dGVudCxpPWVbMF07aTw9ZVsxXTspdC5wdXNoKGkpLGkrKztyZXR1cm4gdH0sZ2V0TGFiZWw6ZnVuY3Rpb24odCl7aWYoIXRoaXMuaXNCbGFuaygpKXJldHVybiB0aGlzLl9vcmRpbmFsTWV0YS5jYXRlZ29yaWVzW3RdfSxjb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9leHRlbnRbMV0tdGhpcy5fZXh0ZW50WzBdKzF9LHVuaW9uRXh0ZW50RnJvbURhdGE6ZnVuY3Rpb24odCxlKXt0aGlzLnVuaW9uRXh0ZW50KHQuZ2V0QXBwcm94aW1hdGVFeHRlbnQoZSkpfSxnZXRPcmRpbmFsTWV0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmRpbmFsTWV0YX0sbmljZVRpY2tzOmV0LG5pY2VFeHRlbnQ6ZXR9KTt2cC5jcmVhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHZwfTt2YXIgeXA9Tmw7ZnVuY3Rpb24geHAodCl7cmV0dXJuIHpsKHQpKzJ9ZnVuY3Rpb24gX3AodCxlLGkpe3RbZV09TWF0aC5tYXgoTWF0aC5taW4odFtlXSxpWzFdKSxpWzBdKX1mdW5jdGlvbiB3cCh0LGUpe2lzRmluaXRlKHRbMF0pfHwodFswXT1lWzBdKSxpc0Zpbml0ZSh0WzFdKXx8KHRbMV09ZVsxXSksX3AodCwwLGUpLF9wKHQsMSxlKSx0WzBdPnRbMV0mJih0WzBdPXRbMV0pfXZhciBicD1ObCxTcD1jcC5leHRlbmQoe3R5cGU6ImludGVydmFsIixfaW50ZXJ2YWw6MCxfaW50ZXJ2YWxQcmVjaXNpb246MixzZXRFeHRlbnQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9leHRlbnQ7aXNOYU4odCl8fChpWzBdPXBhcnNlRmxvYXQodCkpLGlzTmFOKGUpfHwoaVsxXT1wYXJzZUZsb2F0KGUpKX0sdW5pb25FeHRlbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZXh0ZW50O3RbMF08ZVswXSYmKGVbMF09dFswXSksdFsxXT5lWzFdJiYoZVsxXT10WzFdKSxTcC5wcm90b3R5cGUuc2V0RXh0ZW50LmNhbGwodGhpcyxlWzBdLGVbMV0pfSxnZXRJbnRlcnZhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcnZhbH0sc2V0SW50ZXJ2YWw6ZnVuY3Rpb24odCl7dGhpcy5faW50ZXJ2YWw9dCx0aGlzLl9uaWNlRXh0ZW50PXRoaXMuX2V4dGVudC5zbGljZSgpLHRoaXMuX2ludGVydmFsUHJlY2lzaW9uPXhwKHQpfSxnZXRUaWNrczpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pbnRlcnZhbCxpPXRoaXMuX2V4dGVudCxuPXRoaXMuX25pY2VFeHRlbnQsbz10aGlzLl9pbnRlcnZhbFByZWNpc2lvbixhPVtdO2lmKCFlKXJldHVybiBhO2lbMF08blswXSYmKHQ/YS5wdXNoKGJwKG5bMF0tZSkpOmEucHVzaChpWzBdKSk7Zm9yKHZhciByPW5bMF07cjw9blsxXSYmKGEucHVzaChyKSwocj1icChyK2UsbykpIT09YVthLmxlbmd0aC0xXSk7KWlmKDFlNDxhLmxlbmd0aClyZXR1cm5bXTt2YXIgcz1hLmxlbmd0aD9hW2EubGVuZ3RoLTFdOm5bMV07cmV0dXJuIGlbMV0+cyYmKHQ/YS5wdXNoKHMrZSk6YS5wdXNoKGlbMV0pKSxhfSxnZXRNaW5vclRpY2tzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmdldFRpY2tzKCEwKSxpPVtdLG49dGhpcy5nZXRFeHRlbnQoKSxvPTE7bzxlLmxlbmd0aDtvKyspe2Zvcih2YXIgYT1lW29dLHI9ZVtvLTFdLHM9MCxsPVtdLHU9KGEtcikvdDtzPHQtMTspe3ZhciBoPU5sKHIrKHMrMSkqdSk7aD5uWzBdJiZoPG5bMV0mJmwucHVzaChoKSxzKyt9aS5wdXNoKGwpfXJldHVybiBpfSxnZXRMYWJlbDpmdW5jdGlvbih0LGUpe2lmKG51bGw9PXQpcmV0dXJuIiI7dmFyIGk9ZSYmZS5wcmVjaXNpb247cmV0dXJuIG51bGw9PWk/aT16bCh0KXx8MDoiYXV0byI9PT1pJiYoaT10aGlzLl9pbnRlcnZhbFByZWNpc2lvbiksS2wodD1icCh0LGksITApKX0sbmljZVRpY2tzOmZ1bmN0aW9uKHQsZSxpKXt0PXR8fDU7dmFyIG49dGhpcy5fZXh0ZW50LG89blsxXS1uWzBdO2lmKGlzRmluaXRlKG8pKXtvPDAmJihvPS1vLG4ucmV2ZXJzZSgpKTt2YXIgYT1mdW5jdGlvbih0LGUsaSxuKXt2YXIgbz17fSxhPXRbMV0tdFswXSxyPW8uaW50ZXJ2YWw9WGwoYS9lLCEwKTtudWxsIT1pJiZyPGkmJihyPW8uaW50ZXJ2YWw9aSksbnVsbCE9biYmbjxyJiYocj1vLmludGVydmFsPW4pO3ZhciBzPW8uaW50ZXJ2YWxQcmVjaXNpb249eHAocik7cmV0dXJuIHdwKG8ubmljZVRpY2tFeHRlbnQ9W3lwKE1hdGguY2VpbCh0WzBdL3IpKnIscykseXAoTWF0aC5mbG9vcih0WzFdL3IpKnIscyldLHQpLG99KG4sdCxlLGkpO3RoaXMuX2ludGVydmFsUHJlY2lzaW9uPWEuaW50ZXJ2YWxQcmVjaXNpb24sdGhpcy5faW50ZXJ2YWw9YS5pbnRlcnZhbCx0aGlzLl9uaWNlRXh0ZW50PWEubmljZVRpY2tFeHRlbnR9fSxuaWNlRXh0ZW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2V4dGVudDtpZihlWzBdPT09ZVsxXSlpZigwIT09ZVswXSl7dmFyIGk9ZVswXTt0LmZpeE1heHx8KGVbMV0rPWkvMiksZVswXS09aS8yfWVsc2UgZVsxXT0xO3ZhciBuPWVbMV0tZVswXTtpc0Zpbml0ZShuKXx8KGVbMF09MCxlWzFdPTEpLHRoaXMubmljZVRpY2tzKHQuc3BsaXROdW1iZXIsdC5taW5JbnRlcnZhbCx0Lm1heEludGVydmFsKTt2YXIgbz10aGlzLl9pbnRlcnZhbDt0LmZpeE1pbnx8KGVbMF09YnAoTWF0aC5mbG9vcihlWzBdL28pKm8pKSx0LmZpeE1heHx8KGVbMV09YnAoTWF0aC5jZWlsKGVbMV0vbykqbykpfX0pO1NwLmNyZWF0ZT1mdW5jdGlvbigpe3JldHVybiBuZXcgU3B9O3ZhciBNcD0iX19lY19zdGFja18iLElwPSJ1bmRlZmluZWQiIT10eXBlb2YgRmxvYXQzMkFycmF5P0Zsb2F0MzJBcnJheTpBcnJheTtmdW5jdGlvbiBUcCh0KXtyZXR1cm4gdC5nZXQoInN0YWNrIil8fE1wK3Quc2VyaWVzSW5kZXh9ZnVuY3Rpb24gQXAodCl7cmV0dXJuIHQuZGltK3QuaW5kZXh9ZnVuY3Rpb24gRHAodCxlKXt2YXIgaT1bXTtyZXR1cm4gZS5lYWNoU2VyaWVzQnlUeXBlKHQsZnVuY3Rpb24odCl7T3AodCkmJiFFcCh0KSYmaS5wdXNoKHQpfSksaX1mdW5jdGlvbiBDcCh0KXt2YXIgZz1mdW5jdGlvbih0KXt2YXIgbD17fTtFKHQsZnVuY3Rpb24odCl7dmFyIGU9dC5jb29yZGluYXRlU3lzdGVtLmdldEJhc2VBeGlzKCk7aWYoInRpbWUiPT09ZS50eXBlfHwidmFsdWUiPT09ZS50eXBlKWZvcih2YXIgaT10LmdldERhdGEoKSxuPWUuZGltKyJfIitlLmluZGV4LG89aS5tYXBEaW1lbnNpb24oZS5kaW0pLGE9MCxyPWkuY291bnQoKTthPHI7KythKXt2YXIgcz1pLmdldChvLGEpO2xbbl0/bFtuXS5wdXNoKHMpOmxbbl09W3NdfX0pO3ZhciBlPVtdO2Zvcih2YXIgaSBpbiBsKWlmKGwuaGFzT3duUHJvcGVydHkoaSkpe3ZhciBuPWxbaV07aWYobil7bi5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQtZX0pO2Zvcih2YXIgbz1udWxsLGE9MTthPG4ubGVuZ3RoOysrYSl7dmFyIHI9blthXS1uW2EtMV07MDxyJiYobz1udWxsPT09bz9yOk1hdGgubWluKG8scikpfWVbaV09b319cmV0dXJuIGV9KHQpLG09W107cmV0dXJuIEUodCxmdW5jdGlvbih0KXt2YXIgZSxpPXQuY29vcmRpbmF0ZVN5c3RlbS5nZXRCYXNlQXhpcygpLG49aS5nZXRFeHRlbnQoKTtpZigiY2F0ZWdvcnkiPT09aS50eXBlKWU9aS5nZXRCYW5kV2lkdGgoKTtlbHNlIGlmKCJ2YWx1ZSI9PT1pLnR5cGV8fCJ0aW1lIj09PWkudHlwZSl7dmFyIG89aS5kaW0rIl8iK2kuaW5kZXgsYT1nW29dLHI9TWF0aC5hYnMoblsxXS1uWzBdKSxzPWkuc2NhbGUuZ2V0RXh0ZW50KCksbD1NYXRoLmFicyhzWzFdLXNbMF0pO2U9YT9yL2wqYTpyfWVsc2V7dmFyIHU9dC5nZXREYXRhKCk7ZT1NYXRoLmFicyhuWzFdLW5bMF0pL3UuY291bnQoKX12YXIgaD1QbCh0LmdldCgiYmFyV2lkdGgiKSxlKSxjPVBsKHQuZ2V0KCJiYXJNYXhXaWR0aCIpLGUpLGQ9UGwodC5nZXQoImJhck1pbldpZHRoIil8fDEsZSksZj10LmdldCgiYmFyR2FwIikscD10LmdldCgiYmFyQ2F0ZWdvcnlHYXAiKTttLnB1c2goe2JhbmRXaWR0aDplLGJhcldpZHRoOmgsYmFyTWF4V2lkdGg6YyxiYXJNaW5XaWR0aDpkLGJhckdhcDpmLGJhckNhdGVnb3J5R2FwOnAsYXhpc0tleTpBcChpKSxzdGFja0lkOlRwKHQpfSl9KSxMcChtKX1mdW5jdGlvbiBMcCh0KXt2YXIgZD17fTtFKHQsZnVuY3Rpb24odCxlKXt2YXIgaT10LmF4aXNLZXksbj10LmJhbmRXaWR0aCxvPWRbaV18fHtiYW5kV2lkdGg6bixyZW1haW5lZFdpZHRoOm4sYXV0b1dpZHRoQ291bnQ6MCxjYXRlZ29yeUdhcDoiMjAlIixnYXA6IjMwJSIsc3RhY2tzOnt9fSxhPW8uc3RhY2tzO2RbaV09bzt2YXIgcj10LnN0YWNrSWQ7YVtyXXx8by5hdXRvV2lkdGhDb3VudCsrLGFbcl09YVtyXXx8e3dpZHRoOjAsbWF4V2lkdGg6MH07dmFyIHM9dC5iYXJXaWR0aDtzJiYhYVtyXS53aWR0aCYmKGFbcl0ud2lkdGg9cyxzPU1hdGgubWluKG8ucmVtYWluZWRXaWR0aCxzKSxvLnJlbWFpbmVkV2lkdGgtPXMpO3ZhciBsPXQuYmFyTWF4V2lkdGg7bCYmKGFbcl0ubWF4V2lkdGg9bCk7dmFyIHU9dC5iYXJNaW5XaWR0aDt1JiYoYVtyXS5taW5XaWR0aD11KTt2YXIgaD10LmJhckdhcDtudWxsIT1oJiYoby5nYXA9aCk7dmFyIGM9dC5iYXJDYXRlZ29yeUdhcDtudWxsIT1jJiYoby5jYXRlZ29yeUdhcD1jKX0pO3ZhciBmPXt9O3JldHVybiBFKGQsZnVuY3Rpb24odCxpKXtmW2ldPXt9O3ZhciBlPXQuc3RhY2tzLG49dC5iYW5kV2lkdGgsbz1QbCh0LmNhdGVnb3J5R2FwLG4pLGE9UGwodC5nYXAsMSkscj10LnJlbWFpbmVkV2lkdGgscz10LmF1dG9XaWR0aENvdW50LGw9KHItbykvKHMrKHMtMSkqYSk7bD1NYXRoLm1heChsLDApLEUoZSxmdW5jdGlvbih0KXt2YXIgZT10Lm1heFdpZHRoLGk9dC5taW5XaWR0aDtpZih0LndpZHRoKXtuPXQud2lkdGg7ZSYmKG49TWF0aC5taW4obixlKSksaSYmKG49TWF0aC5tYXgobixpKSksdC53aWR0aD1uLHItPW4rYSpuLHMtLX1lbHNle3ZhciBuPWw7ZSYmZTxuJiYobj1NYXRoLm1pbihlLHIpKSxpJiZuPGkmJihuPWkpLG4hPT1sJiYodC53aWR0aD1uLHItPW4rYSpuLHMtLSl9fSksbD0oci1vKS8ocysocy0xKSphKSxsPU1hdGgubWF4KGwsMCk7dmFyIHUsaD0wO0UoZSxmdW5jdGlvbih0LGUpe3Qud2lkdGh8fCh0LndpZHRoPWwpLGgrPSh1PXQpLndpZHRoKigxK2EpfSksdSYmKGgtPXUud2lkdGgqYSk7dmFyIGM9LWgvMjtFKGUsZnVuY3Rpb24odCxlKXtmW2ldW2VdPWZbaV1bZV18fHtiYW5kV2lkdGg6bixvZmZzZXQ6Yyx3aWR0aDp0LndpZHRofSxjKz10LndpZHRoKigxK2EpfSl9KSxmfWZ1bmN0aW9uIGtwKHQsZSxpKXtpZih0JiZlKXt2YXIgbj10W0FwKGUpXTtyZXR1cm4gbnVsbCE9biYmbnVsbCE9aSYmKG49bltUcChpKV0pLG59fWZ1bmN0aW9uIFBwKHQsZSl7dmFyIGk9RHAodCxlKSxUPUNwKGkpLEE9e307RShpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0RGF0YSgpLGk9dC5jb29yZGluYXRlU3lzdGVtLG49aS5nZXRCYXNlQXhpcygpLG89VHAodCksYT1UW0FwKG4pXVtvXSxyPWEub2Zmc2V0LHM9YS53aWR0aCxsPWkuZ2V0T3RoZXJBeGlzKG4pLHU9dC5nZXQoImJhck1pbkhlaWdodCIpfHwwO0Fbb109QVtvXXx8W10sZS5zZXRMYXlvdXQoe2JhbmRXaWR0aDphLmJhbmRXaWR0aCxvZmZzZXQ6cixzaXplOnN9KTtmb3IodmFyIGg9ZS5tYXBEaW1lbnNpb24obC5kaW0pLGM9ZS5tYXBEaW1lbnNpb24obi5kaW0pLGQ9bHAoZSxoKSxmPWwuaXNIb3Jpem9udGFsKCkscD16cChuLGwsZCksZz0wLG09ZS5jb3VudCgpO2c8bTtnKyspe3ZhciB2PWUuZ2V0KGgsZykseT1lLmdldChjLGcpO2lmKCFpc05hTih2KSYmIWlzTmFOKHkpKXt2YXIgeCxfLHcsYixTLE09MDw9dj8icCI6Im4iLEk9cDtpZihkJiYoQVtvXVt5XXx8KEFbb11beV09e3A6cCxuOnB9KSxJPUFbb11beV1bTV0pLGYpeD1JLF89KFM9aS5kYXRhVG9Qb2ludChbdix5XSkpWzFdK3Isdz1TWzBdLXAsYj1zLE1hdGguYWJzKHcpPHUmJih3PSh3PDA/LTE6MSkqdSksZCYmKEFbb11beV1bTV0rPXcpO2Vsc2UgeD0oUz1pLmRhdGFUb1BvaW50KFt5LHZdKSlbMF0rcixfPUksdz1zLGI9U1sxXS1wLE1hdGguYWJzKGIpPHUmJihiPShiPD0wPy0xOjEpKnUpLGQmJihBW29dW3ldW01dKz1iKTtlLnNldEl0ZW1MYXlvdXQoZyx7eDp4LHk6Xyx3aWR0aDp3LGhlaWdodDpifSl9fX0sdGhpcyl9dmFyIE5wPXtzZXJpZXNUeXBlOiJiYXIiLHBsYW46ZGMoKSxyZXNldDpmdW5jdGlvbih0KXtpZihPcCh0KSYmRXAodCkpe3ZhciBlPXQuZ2V0RGF0YSgpLGg9dC5jb29yZGluYXRlU3lzdGVtLGM9aC5nZXRCYXNlQXhpcygpLGQ9aC5nZXRPdGhlckF4aXMoYyksZj1lLm1hcERpbWVuc2lvbihkLmRpbSkscD1lLm1hcERpbWVuc2lvbihjLmRpbSksZz1kLmlzSG9yaXpvbnRhbCgpLG09Zz8wOjEsdj1rcChDcChbdF0pLGMsdCkud2lkdGg7cmV0dXJuLjU8dnx8KHY9LjUpLHtwcm9ncmVzczpmdW5jdGlvbih0LGUpe3ZhciBpLG49dC5jb3VudCxvPW5ldyBJcCgyKm4pLGE9bmV3IElwKG4pLHI9W10scz1bXSxsPTAsdT0wO2Zvcig7bnVsbCE9KGk9dC5uZXh0KCkpOylzW21dPWUuZ2V0KGYsaSksc1sxLW1dPWUuZ2V0KHAsaSkscj1oLmRhdGFUb1BvaW50KHMsbnVsbCxyKSxvW2wrK109clswXSxvW2wrK109clsxXSxhW3UrK109aTtlLnNldExheW91dCh7bGFyZ2VQb2ludHM6byxsYXJnZURhdGFJbmRpY2VzOmEsYmFyV2lkdGg6dix2YWx1ZUF4aXNTdGFydDp6cChjLGQsITEpLHZhbHVlQXhpc0hvcml6b250YWw6Z30pfX19fX07ZnVuY3Rpb24gT3AodCl7cmV0dXJuIHQuY29vcmRpbmF0ZVN5c3RlbSYmImNhcnRlc2lhbjJkIj09PXQuY29vcmRpbmF0ZVN5c3RlbS50eXBlfWZ1bmN0aW9uIEVwKHQpe3JldHVybiB0LnBpcGVsaW5lQ29udGV4dCYmdC5waXBlbGluZUNvbnRleHQubGFyZ2V9ZnVuY3Rpb24genAodCxlKXtyZXR1cm4gZS50b0dsb2JhbENvb3JkKGUuZGF0YVRvQ29vcmQoImxvZyI9PT1lLnR5cGU/MTowKSl9dmFyIFJwPVNwLnByb3RvdHlwZSxCcD1NYXRoLmNlaWwsVnA9TWF0aC5mbG9vcixHcD0zNmU1LEZwPTg2NGU1LFdwPVNwLmV4dGVuZCh7dHlwZToidGltZSIsZ2V0TGFiZWw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc3RlcEx2bCxpPW5ldyBEYXRlKHQpO3JldHVybiBsdShlWzBdLGksdGhpcy5nZXRTZXR0aW5nKCJ1c2VVVEMiKSl9LG5pY2VFeHRlbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZXh0ZW50O2lmKGVbMF09PT1lWzFdJiYoZVswXS09RnAsZVsxXSs9RnApLGVbMV09PT0tMS8wJiZlWzBdPT09MS8wKXt2YXIgaT1uZXcgRGF0ZTtlWzFdPStuZXcgRGF0ZShpLmdldEZ1bGxZZWFyKCksaS5nZXRNb250aCgpLGkuZ2V0RGF0ZSgpKSxlWzBdPWVbMV0tRnB9dGhpcy5uaWNlVGlja3ModC5zcGxpdE51bWJlcix0Lm1pbkludGVydmFsLHQubWF4SW50ZXJ2YWwpO3ZhciBuPXRoaXMuX2ludGVydmFsO3QuZml4TWlufHwoZVswXT1ObChWcChlWzBdL24pKm4pKSx0LmZpeE1heHx8KGVbMV09TmwoQnAoZVsxXS9uKSpuKSl9LG5pY2VUaWNrczpmdW5jdGlvbih0LGUsaSl7dD10fHwxMDt2YXIgbj10aGlzLl9leHRlbnQsbz1uWzFdLW5bMF0sYT1vL3Q7bnVsbCE9ZSYmYTxlJiYoYT1lKSxudWxsIT1pJiZpPGEmJihhPWkpO3ZhciByPUhwLmxlbmd0aCxzPWZ1bmN0aW9uKHQsZSxpLG4pe2Zvcig7aTxuOyl7dmFyIG89aStuPj4+MTt0W29dWzFdPGU/aT0xK286bj1vfXJldHVybiBpfShIcCxhLDAsciksbD1IcFtNYXRoLm1pbihzLHItMSldLHU9bFsxXTsieWVhciI9PT1sWzBdJiYodSo9WGwoby91L3QsITApKTt2YXIgaD10aGlzLmdldFNldHRpbmcoInVzZVVUQyIpPzA6NjAqbmV3IERhdGUoK25bMF18fCtuWzFdKS5nZXRUaW1lem9uZU9mZnNldCgpKjFlMyxjPVtNYXRoLnJvdW5kKEJwKChuWzBdLWgpL3UpKnUraCksTWF0aC5yb3VuZChWcCgoblsxXS1oKS91KSp1K2gpXTt3cChjLG4pLHRoaXMuX3N0ZXBMdmw9bCx0aGlzLl9pbnRlcnZhbD11LHRoaXMuX25pY2VFeHRlbnQ9Y30scGFyc2U6ZnVuY3Rpb24odCl7cmV0dXJuK0hsKHQpfX0pO0UoWyJjb250YWluIiwibm9ybWFsaXplIl0sZnVuY3Rpb24oZSl7V3AucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQpe3JldHVybiBScFtlXS5jYWxsKHRoaXMsdGhpcy5wYXJzZSh0KSl9fSk7dmFyIEhwPVtbImhoOm1tOnNzIiwxZTNdLFsiaGg6bW06c3MiLDVlM10sWyJoaDptbTpzcyIsMWU0XSxbImhoOm1tOnNzIiwxNWUzXSxbImhoOm1tOnNzIiwzZTRdLFsiaGg6bW1cbk1NLWRkIiw2ZTRdLFsiaGg6bW1cbk1NLWRkIiwzZTVdLFsiaGg6bW1cbk1NLWRkIiw2ZTVdLFsiaGg6bW1cbk1NLWRkIiw5ZTVdLFsiaGg6bW1cbk1NLWRkIiwxOGU1XSxbImhoOm1tXG5NTS1kZCIsR3BdLFsiaGg6bW1cbk1NLWRkIiw3MmU1XSxbImhoOm1tXG5NTS1kZCIsNipHcF0sWyJoaDptbVxuTU0tZGQiLDQzMmU1XSxbIk1NLWRkXG55eXl5IixGcF0sWyJNTS1kZFxueXl5eSIsMipGcF0sWyJNTS1kZFxueXl5eSIsMypGcF0sWyJNTS1kZFxueXl5eSIsNCpGcF0sWyJNTS1kZFxueXl5eSIsNSpGcF0sWyJNTS1kZFxueXl5eSIsNipGcF0sWyJ3ZWVrIiw3KkZwXSxbIk1NLWRkXG55eXl5Iiw4NjRlNl0sWyJ3ZWVrIiwxNCpGcF0sWyJ3ZWVrIiwyMSpGcF0sWyJtb250aCIsMzEqRnBdLFsid2VlayIsNDIqRnBdLFsibW9udGgiLDYyKkZwXSxbIndlZWsiLDcwKkZwXSxbInF1YXJ0ZXIiLDk1KkZwXSxbIm1vbnRoIiwzMSpGcCo0XSxbIm1vbnRoIiwxMzM5MmU2XSxbImhhbGYteWVhciIsMTY0MTZlNl0sWyJtb250aCIsMzEqRnAqOF0sWyJtb250aCIsMjY3ODRlNl0sWyJ5ZWFyIiwzODAqRnBdXTtXcC5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBXcCh7dXNlVVRDOnQuZWNNb2RlbC5nZXQoInVzZVVUQyIpfSl9O3ZhciBacD1jcC5wcm90b3R5cGUsVXA9U3AucHJvdG90eXBlLFhwPXpsLFlwPU5sLGpwPU1hdGguZmxvb3IscXA9TWF0aC5jZWlsLEtwPU1hdGgucG93LCRwPU1hdGgubG9nLEpwPWNwLmV4dGVuZCh7dHlwZToibG9nIixiYXNlOjEwLCRjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe2NwLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9vcmlnaW5hbFNjYWxlPW5ldyBTcH0sZ2V0VGlja3M6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5fb3JpZ2luYWxTY2FsZSxuPXRoaXMuX2V4dGVudCxvPWkuZ2V0RXh0ZW50KCk7cmV0dXJuIE4oVXAuZ2V0VGlja3MuY2FsbCh0aGlzLHQpLGZ1bmN0aW9uKHQpe3ZhciBlPU5sKEtwKHRoaXMuYmFzZSx0KSk7cmV0dXJuIGU9dD09PW5bMF0mJmkuX19maXhNaW4/UXAoZSxvWzBdKTplLGU9dD09PW5bMV0mJmkuX19maXhNYXg/UXAoZSxvWzFdKTplfSx0aGlzKX0sZ2V0TWlub3JUaWNrczpVcC5nZXRNaW5vclRpY2tzLGdldExhYmVsOlVwLmdldExhYmVsLHNjYWxlOmZ1bmN0aW9uKHQpe3JldHVybiB0PVpwLnNjYWxlLmNhbGwodGhpcyx0KSxLcCh0aGlzLmJhc2UsdCl9LHNldEV4dGVudDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuYmFzZTt0PSRwKHQpLyRwKGkpLGU9JHAoZSkvJHAoaSksVXAuc2V0RXh0ZW50LmNhbGwodGhpcyx0LGUpfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJhc2UsZT1acC5nZXRFeHRlbnQuY2FsbCh0aGlzKTtlWzBdPUtwKHQsZVswXSksZVsxXT1LcCh0LGVbMV0pO3ZhciBpPXRoaXMuX29yaWdpbmFsU2NhbGUsbj1pLmdldEV4dGVudCgpO3JldHVybiBpLl9fZml4TWluJiYoZVswXT1RcChlWzBdLG5bMF0pKSxpLl9fZml4TWF4JiYoZVsxXT1RcChlWzFdLG5bMV0pKSxlfSx1bmlvbkV4dGVudDpmdW5jdGlvbih0KXt0aGlzLl9vcmlnaW5hbFNjYWxlLnVuaW9uRXh0ZW50KHQpO3ZhciBlPXRoaXMuYmFzZTt0WzBdPSRwKHRbMF0pLyRwKGUpLHRbMV09JHAodFsxXSkvJHAoZSksWnAudW5pb25FeHRlbnQuY2FsbCh0aGlzLHQpfSx1bmlvbkV4dGVudEZyb21EYXRhOmZ1bmN0aW9uKHQsZSl7dGhpcy51bmlvbkV4dGVudCh0LmdldEFwcHJveGltYXRlRXh0ZW50KGUpKX0sbmljZVRpY2tzOmZ1bmN0aW9uKHQpe3Q9dHx8MTA7dmFyIGU9dGhpcy5fZXh0ZW50LGk9ZVsxXS1lWzBdO2lmKCEoaT09MS8wfHxpPD0wKSl7dmFyIG49WmwoaSk7Zm9yKHQvaSpuPD0uNSYmKG4qPTEwKTshaXNOYU4obikmJk1hdGguYWJzKG4pPDEmJjA8TWF0aC5hYnMobik7KW4qPTEwO3ZhciBvPVtObChxcChlWzBdL24pKm4pLE5sKGpwKGVbMV0vbikqbildO3RoaXMuX2ludGVydmFsPW4sdGhpcy5fbmljZUV4dGVudD1vfX0sbmljZUV4dGVudDpmdW5jdGlvbih0KXtVcC5uaWNlRXh0ZW50LmNhbGwodGhpcyx0KTt2YXIgZT10aGlzLl9vcmlnaW5hbFNjYWxlO2UuX19maXhNaW49dC5maXhNaW4sZS5fX2ZpeE1heD10LmZpeE1heH19KTtmdW5jdGlvbiBRcCh0LGUpe3JldHVybiBZcCh0LFhwKGUpKX1mdW5jdGlvbiB0Zyh0LGUpe3ZhciBpLG4sbyxhPXQudHlwZSxyPWUuZ2V0TWluKCkscz1lLmdldE1heCgpLGw9bnVsbCE9cix1PW51bGwhPXMsaD10LmdldEV4dGVudCgpOyJvcmRpbmFsIj09PWE/aT1lLmdldENhdGVnb3JpZXMoKS5sZW5ndGg6KGsobj1lLmdldCgiYm91bmRhcnlHYXAiKSl8fChuPVtufHwwLG58fDBdKSwiYm9vbGVhbiI9PXR5cGVvZiBuWzBdJiYobj1bMCwwXSksblswXT1QbChuWzBdLDEpLG5bMV09UGwoblsxXSwxKSxvPWhbMV0taFswXXx8TWF0aC5hYnMoaFswXSkpLG51bGw9PXImJihyPSJvcmRpbmFsIj09PWE/aT8wOk5hTjpoWzBdLW5bMF0qbyksbnVsbD09cyYmKHM9Im9yZGluYWwiPT09YT9pP2ktMTpOYU46aFsxXStuWzFdKm8pLCJkYXRhTWluIj09PXI/cj1oWzBdOiJmdW5jdGlvbiI9PXR5cGVvZiByJiYocj1yKHttaW46aFswXSxtYXg6aFsxXX0pKSwiZGF0YU1heCI9PT1zP3M9aFsxXToiZnVuY3Rpb24iPT10eXBlb2YgcyYmKHM9cyh7bWluOmhbMF0sbWF4OmhbMV19KSksbnVsbCE9ciYmaXNGaW5pdGUocil8fChyPU5hTiksbnVsbCE9cyYmaXNGaW5pdGUocyl8fChzPU5hTiksdC5zZXRCbGFuayhGKHIpfHxGKHMpfHwib3JkaW5hbCI9PT1hJiYhdC5nZXRPcmRpbmFsTWV0YSgpLmNhdGVnb3JpZXMubGVuZ3RoKSxlLmdldE5lZWRDcm9zc1plcm8oKSYmKDA8ciYmMDxzJiYhbCYmKHI9MCkscjwwJiZzPDAmJiF1JiYocz0wKSk7dmFyIGM9ZS5lY01vZGVsO2lmKGMmJiJ0aW1lIj09PWEpe3ZhciBkLGY9RHAoImJhciIsYyk7aWYoRShmLGZ1bmN0aW9uKHQpe2R8PXQuZ2V0QmFzZUF4aXMoKT09PWUuYXhpc30pLGQpe3ZhciBwPUNwKGYpLGc9ZnVuY3Rpb24odCxlLGksbil7dmFyIG89aS5heGlzLmdldEV4dGVudCgpLGE9b1sxXS1vWzBdLHI9a3AobixpLmF4aXMpO2lmKHZvaWQgMD09PXIpcmV0dXJue21pbjp0LG1heDplfTt2YXIgcz0xLzA7RShyLGZ1bmN0aW9uKHQpe3M9TWF0aC5taW4odC5vZmZzZXQscyl9KTt2YXIgbD0tMS8wO0UocixmdW5jdGlvbih0KXtsPU1hdGgubWF4KHQub2Zmc2V0K3Qud2lkdGgsbCl9KSxzPU1hdGguYWJzKHMpLGw9TWF0aC5hYnMobCk7dmFyIHU9cytsLGg9ZS10LGM9aC8oMS0ocytsKS9hKS1oO3JldHVybnttaW46dC09cy91KmMsbWF4OmUrPWwvdSpjfX0ocixzLGUscCk7cj1nLm1pbixzPWcubWF4fX1yZXR1cm5bcixzXX1mdW5jdGlvbiBlZyh0LGUpe3ZhciBpPXRnKHQsZSksbj1udWxsIT1lLmdldE1pbigpLG89bnVsbCE9ZS5nZXRNYXgoKSxhPWUuZ2V0KCJzcGxpdE51bWJlciIpOyJsb2ciPT09dC50eXBlJiYodC5iYXNlPWUuZ2V0KCJsb2dCYXNlIikpO3ZhciByPXQudHlwZTt0LnNldEV4dGVudChpWzBdLGlbMV0pLHQubmljZUV4dGVudCh7c3BsaXROdW1iZXI6YSxmaXhNaW46bixmaXhNYXg6byxtaW5JbnRlcnZhbDoiaW50ZXJ2YWwiPT09cnx8InRpbWUiPT09cj9lLmdldCgibWluSW50ZXJ2YWwiKTpudWxsLG1heEludGVydmFsOiJpbnRlcnZhbCI9PT1yfHwidGltZSI9PT1yP2UuZ2V0KCJtYXhJbnRlcnZhbCIpOm51bGx9KTt2YXIgcz1lLmdldCgiaW50ZXJ2YWwiKTtudWxsIT1zJiZ0LnNldEludGVydmFsJiZ0LnNldEludGVydmFsKHMpfWZ1bmN0aW9uIGlnKHQsZSl7aWYoZT1lfHx0LmdldCgidHlwZSIpKXN3aXRjaChlKXtjYXNlImNhdGVnb3J5IjpyZXR1cm4gbmV3IHZwKHQuZ2V0T3JkaW5hbE1ldGE/dC5nZXRPcmRpbmFsTWV0YSgpOnQuZ2V0Q2F0ZWdvcmllcygpLFsxLzAsLTEvMF0pO2Nhc2UidmFsdWUiOnJldHVybiBuZXcgU3A7ZGVmYXVsdDpyZXR1cm4oY3AuZ2V0Q2xhc3MoZSl8fFNwKS5jcmVhdGUodCl9fWZ1bmN0aW9uIG5nKGkpe3ZhciBlLG49aS5nZXRMYWJlbE1vZGVsKCkuZ2V0KCJmb3JtYXR0ZXIiKSxvPSJjYXRlZ29yeSI9PT1pLnR5cGU/aS5zY2FsZS5nZXRFeHRlbnQoKVswXTpudWxsO3JldHVybiJzdHJpbmciPT10eXBlb2Ygbj8oZT1uLG49ZnVuY3Rpb24odCl7cmV0dXJuIHQ9aS5zY2FsZS5nZXRMYWJlbCh0KSxlLnJlcGxhY2UoInt2YWx1ZX0iLG51bGwhPXQ/dDoiIil9KToiZnVuY3Rpb24iPT10eXBlb2Ygbj9mdW5jdGlvbih0LGUpe3JldHVybiBudWxsIT1vJiYoZT10LW8pLG4ob2coaSx0KSxlKX06ZnVuY3Rpb24odCl7cmV0dXJuIGkuc2NhbGUuZ2V0TGFiZWwodCl9fWZ1bmN0aW9uIG9nKHQsZSl7cmV0dXJuImNhdGVnb3J5Ij09PXQudHlwZT90LnNjYWxlLmdldExhYmVsKGUpOmV9ZnVuY3Rpb24gYWcodCl7dmFyIGU9dC5nZXQoImludGVydmFsIik7cmV0dXJuIG51bGw9PWU/ImF1dG8iOmV9ZnVuY3Rpb24gcmcodCl7cmV0dXJuImNhdGVnb3J5Ij09PXQudHlwZSYmMD09PWFnKHQuZ2V0TGFiZWxNb2RlbCgpKX1FKFsiY29udGFpbiIsIm5vcm1hbGl6ZSJdLGZ1bmN0aW9uKGUpe0pwLnByb3RvdHlwZVtlXT1mdW5jdGlvbih0KXtyZXR1cm4gdD0kcCh0KS8kcCh0aGlzLmJhc2UpLFpwW2VdLmNhbGwodGhpcyx0KX19KSxKcC5jcmVhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEpwfTt2YXIgc2c9e2dldE1pbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbixpPXR8fG51bGw9PWUucmFuZ2VTdGFydD9lLm1pbjplLnJhbmdlU3RhcnQ7cmV0dXJuIHRoaXMuYXhpcyYmbnVsbCE9aSYmImRhdGFNaW4iIT09aSYmImZ1bmN0aW9uIiE9dHlwZW9mIGkmJiFGKGkpJiYoaT10aGlzLmF4aXMuc2NhbGUucGFyc2UoaSkpLGl9LGdldE1heDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbixpPXR8fG51bGw9PWUucmFuZ2VFbmQ/ZS5tYXg6ZS5yYW5nZUVuZDtyZXR1cm4gdGhpcy5heGlzJiZudWxsIT1pJiYiZGF0YU1heCIhPT1pJiYiZnVuY3Rpb24iIT10eXBlb2YgaSYmIUYoaSkmJihpPXRoaXMuYXhpcy5zY2FsZS5wYXJzZShpKSksaX0sZ2V0TmVlZENyb3NzWmVybzpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uO3JldHVybiBudWxsPT10LnJhbmdlU3RhcnQmJm51bGw9PXQucmFuZ2VFbmQmJiF0LnNjYWxlfSxnZXRDb29yZFN5c01vZGVsOmV0LHNldFJhbmdlOmZ1bmN0aW9uKHQsZSl7dGhpcy5vcHRpb24ucmFuZ2VTdGFydD10LHRoaXMub3B0aW9uLnJhbmdlRW5kPWV9LHJlc2V0UmFuZ2U6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbi5yYW5nZVN0YXJ0PXRoaXMub3B0aW9uLnJhbmdlRW5kPW51bGx9fSxsZz1Jcyh7dHlwZToidHJpYW5nbGUiLHNoYXBlOntjeDowLGN5OjAsd2lkdGg6MCxoZWlnaHQ6MH0sYnVpbGRQYXRoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5jeCxuPWUuY3ksbz1lLndpZHRoLzIsYT1lLmhlaWdodC8yO3QubW92ZVRvKGksbi1hKSx0LmxpbmVUbyhpK28sbithKSx0LmxpbmVUbyhpLW8sbithKSx0LmNsb3NlUGF0aCgpfX0pLHVnPUlzKHt0eXBlOiJkaWFtb25kIixzaGFwZTp7Y3g6MCxjeTowLHdpZHRoOjAsaGVpZ2h0OjB9LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPWUuY3gsbj1lLmN5LG89ZS53aWR0aC8yLGE9ZS5oZWlnaHQvMjt0Lm1vdmVUbyhpLG4tYSksdC5saW5lVG8oaStvLG4pLHQubGluZVRvKGksbithKSx0LmxpbmVUbyhpLW8sbiksdC5jbG9zZVBhdGgoKX19KSxoZz1Jcyh7dHlwZToicGluIixzaGFwZTp7eDowLHk6MCx3aWR0aDowLGhlaWdodDowfSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLngsbj1lLnksbz1lLndpZHRoLzUqMyxhPU1hdGgubWF4KG8sZS5oZWlnaHQpLHI9by8yLHM9cipyLyhhLXIpLGw9bi1hK3Ircyx1PU1hdGguYXNpbihzL3IpLGg9TWF0aC5jb3ModSkqcixjPU1hdGguc2luKHUpLGQ9TWF0aC5jb3ModSksZj0uNipyLHA9Ljcqcjt0Lm1vdmVUbyhpLWgsbCtzKSx0LmFyYyhpLGwscixNYXRoLlBJLXUsMipNYXRoLlBJK3UpLHQuYmV6aWVyQ3VydmVUbyhpK2gtYypmLGwrcytkKmYsaSxuLXAsaSxuKSx0LmJlemllckN1cnZlVG8oaSxuLXAsaS1oK2MqZixsK3MrZCpmLGktaCxsK3MpLHQuY2xvc2VQYXRoKCl9fSksY2c9SXMoe3R5cGU6ImFycm93IixzaGFwZTp7eDowLHk6MCx3aWR0aDowLGhlaWdodDowfSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmhlaWdodCxuPWUud2lkdGgsbz1lLngsYT1lLnkscj1uLzMqMjt0Lm1vdmVUbyhvLGEpLHQubGluZVRvKG8rcixhK2kpLHQubGluZVRvKG8sYStpLzQqMyksdC5saW5lVG8oby1yLGEraSksdC5saW5lVG8obyxhKSx0LmNsb3NlUGF0aCgpfX0pLGRnPXtsaW5lOmZ1bmN0aW9uKHQsZSxpLG4sbyl7by54MT10LG8ueTE9ZStuLzIsby54Mj10K2ksby55Mj1lK24vMn0scmVjdDpmdW5jdGlvbih0LGUsaSxuLG8pe28ueD10LG8ueT1lLG8ud2lkdGg9aSxvLmhlaWdodD1ufSxyb3VuZFJlY3Q6ZnVuY3Rpb24odCxlLGksbixvKXtvLng9dCxvLnk9ZSxvLndpZHRoPWksby5oZWlnaHQ9bixvLnI9TWF0aC5taW4oaSxuKS80fSxzcXVhcmU6ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1NYXRoLm1pbihpLG4pO28ueD10LG8ueT1lLG8ud2lkdGg9YSxvLmhlaWdodD1hfSxjaXJjbGU6ZnVuY3Rpb24odCxlLGksbixvKXtvLmN4PXQraS8yLG8uY3k9ZStuLzIsby5yPU1hdGgubWluKGksbikvMn0sZGlhbW9uZDpmdW5jdGlvbih0LGUsaSxuLG8pe28uY3g9dCtpLzIsby5jeT1lK24vMixvLndpZHRoPWksby5oZWlnaHQ9bn0scGluOmZ1bmN0aW9uKHQsZSxpLG4sbyl7by54PXQraS8yLG8ueT1lK24vMixvLndpZHRoPWksby5oZWlnaHQ9bn0sYXJyb3c6ZnVuY3Rpb24odCxlLGksbixvKXtvLng9dCtpLzIsby55PWUrbi8yLG8ud2lkdGg9aSxvLmhlaWdodD1ufSx0cmlhbmdsZTpmdW5jdGlvbih0LGUsaSxuLG8pe28uY3g9dCtpLzIsby5jeT1lK24vMixvLndpZHRoPWksby5oZWlnaHQ9bn19LGZnPXt9O0Uoe2xpbmU6b3MscmVjdDppcyxyb3VuZFJlY3Q6aXMsc3F1YXJlOmlzLGNpcmNsZTpIcixkaWFtb25kOnVnLHBpbjpoZyxhcnJvdzpjZyx0cmlhbmdsZTpsZ30sZnVuY3Rpb24odCxlKXtmZ1tlXT1uZXcgdH0pO3ZhciBwZz1Jcyh7dHlwZToic3ltYm9sIixzaGFwZTp7c3ltYm9sVHlwZToiIix4OjAseTowLHdpZHRoOjAsaGVpZ2h0OjB9LGNhbGN1bGF0ZVRleHRQb3NpdGlvbjpmdW5jdGlvbih0LGUsaSl7dmFyIG49cG4odCxlLGkpLG89dGhpcy5zaGFwZTtyZXR1cm4gbyYmInBpbiI9PT1vLnN5bWJvbFR5cGUmJiJpbnNpZGUiPT09ZS50ZXh0UG9zaXRpb24mJihuLnk9aS55Ky40KmkuaGVpZ2h0KSxufSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPWUuc3ltYm9sVHlwZTtpZigibm9uZSIhPT1uKXt2YXIgbz1mZ1tuXTtvPW98fGZnW249InJlY3QiXSxkZ1tuXShlLngsZS55LGUud2lkdGgsZS5oZWlnaHQsby5zaGFwZSksby5idWlsZFBhdGgodCxvLnNoYXBlLGkpfX19KTtmdW5jdGlvbiBnZyh0LGUpe2lmKCJpbWFnZSIhPT10aGlzLnR5cGUpe3ZhciBpPXRoaXMuc3R5bGUsbj10aGlzLnNoYXBlO24mJiJsaW5lIj09PW4uc3ltYm9sVHlwZT9pLnN0cm9rZT10OnRoaXMuX19pc0VtcHR5QnJ1c2g/KGkuc3Ryb2tlPXQsaS5maWxsPWV8fCIjZmZmIik6KGkuZmlsbCYmKGkuZmlsbD10KSxpLnN0cm9rZSYmKGkuc3Ryb2tlPXQpKSx0aGlzLmRpcnR5KCExKX19ZnVuY3Rpb24gbWcodCxlLGksbixvLGEscil7dmFyIHMsbD0wPT09dC5pbmRleE9mKCJlbXB0eSIpO3JldHVybiBsJiYodD10LnN1YnN0cig1LDEpLnRvTG93ZXJDYXNlKCkrdC5zdWJzdHIoNikpLChzPTA9PT10LmluZGV4T2YoImltYWdlOi8vIik/Q3ModC5zbGljZSg4KSxuZXcgTWkoZSxpLG4sbykscj8iY2VudGVyIjoiY292ZXIiKTowPT09dC5pbmRleE9mKCJwYXRoOi8vIik/RHModC5zbGljZSg3KSx7fSxuZXcgTWkoZSxpLG4sbykscj8iY2VudGVyIjoiY292ZXIiKTpuZXcgcGcoe3NoYXBlOntzeW1ib2xUeXBlOnQseDplLHk6aSx3aWR0aDpuLGhlaWdodDpvfX0pKS5fX2lzRW1wdHlCcnVzaD1sLHMuc2V0Q29sb3I9Z2cscy5zZXRDb2xvcihhKSxzfXZhciB2Zz17aXNEaW1lbnNpb25TdGFja2VkOmxwLGVuYWJsZURhdGFTdGFjazpzcCxnZXRTdGFja2VkRGltZW5zaW9uOnVwfTt2YXIgeWc9KE9iamVjdC5mcmVlemV8fE9iamVjdCkoe2NyZWF0ZUxpc3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGhwKHQuZ2V0U291cmNlKCksdCl9LGdldExheW91dFJlY3Q6dnUsZGF0YVN0YWNrOnZnLGNyZWF0ZVNjYWxlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZTtJbC5pc0luc3RhbmNlKGUpfHxiKGk9bmV3IElsKGUpLHNnKTt2YXIgbj1pZyhpKTtyZXR1cm4gbi5zZXRFeHRlbnQodFswXSx0WzFdKSxlZyhuLGkpLG59LG1peGluQXhpc01vZGVsQ29tbW9uTWV0aG9kczpmdW5jdGlvbih0KXtiKHQsc2cpfSxjb21wbGV0ZURpbWVuc2lvbnM6ZXAsY3JlYXRlRGltZW5zaW9uczpucCxjcmVhdGVTeW1ib2w6bWd9KSx4Zz0xZS04O2Z1bmN0aW9uIF9nKHQsZSl7cmV0dXJuIE1hdGguYWJzKHQtZSk8eGd9ZnVuY3Rpb24gd2codCxlLGkpe3ZhciBuPTAsbz10WzBdO2lmKCFvKXJldHVybiExO2Zvcih2YXIgYT0xO2E8dC5sZW5ndGg7YSsrKXt2YXIgcj10W2FdO24rPWhyKG9bMF0sb1sxXSxyWzBdLHJbMV0sZSxpKSxvPXJ9dmFyIHM9dFswXTtyZXR1cm4gX2cob1swXSxzWzBdKSYmX2cob1sxXSxzWzFdKXx8KG4rPWhyKG9bMF0sb1sxXSxzWzBdLHNbMV0sZSxpKSksMCE9PW59ZnVuY3Rpb24gYmcodCxlLGkpe2lmKHRoaXMubmFtZT10LHRoaXMuZ2VvbWV0cmllcz1lLGkpaT1baVswXSxpWzFdXTtlbHNle3ZhciBuPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KCk7aT1bbi54K24ud2lkdGgvMixuLnkrbi5oZWlnaHQvMl19dGhpcy5jZW50ZXI9aX1mdW5jdGlvbiBTZyh0LGUsaSl7Zm9yKHZhciBuPVtdLG89ZVswXSxhPWVbMV0scj0wO3I8dC5sZW5ndGg7cis9Mil7dmFyIHM9dC5jaGFyQ29kZUF0KHIpLTY0LGw9dC5jaGFyQ29kZUF0KHIrMSktNjQ7cz1zPj4xXi0oMSZzKSxsPWw+PjFeLSgxJmwpLG89cys9byxhPWwrPWEsbi5wdXNoKFtzL2ksbC9pXSl9cmV0dXJuIG59YmcucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpiZyxwcm9wZXJ0aWVzOm51bGwsZ2V0Qm91bmRpbmdSZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVjdDtpZih0KXJldHVybiB0O2Zvcih2YXIgZT1OdW1iZXIuTUFYX1ZBTFVFLGk9W2UsZV0sbj1bLWUsLWVdLG89W10sYT1bXSxyPXRoaXMuZ2VvbWV0cmllcyxzPTA7czxyLmxlbmd0aDtzKyspe2lmKCJwb2x5Z29uIj09PXJbc10udHlwZSlCYShyW3NdLmV4dGVyaW9yLG8sYSksU3QoaSxpLG8pLE10KG4sbixhKX1yZXR1cm4gMD09PXMmJihpWzBdPWlbMV09blswXT1uWzFdPTApLHRoaXMuX3JlY3Q9bmV3IE1pKGlbMF0saVsxXSxuWzBdLWlbMF0sblsxXS1pWzFdKX0sY29udGFpbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEJvdW5kaW5nUmVjdCgpLGk9dGhpcy5nZW9tZXRyaWVzO2lmKCFlLmNvbnRhaW4odFswXSx0WzFdKSlyZXR1cm4hMTt0OmZvcih2YXIgbj0wLG89aS5sZW5ndGg7bjxvO24rKylpZigicG9seWdvbiI9PT1pW25dLnR5cGUpe3ZhciBhPWlbbl0uZXh0ZXJpb3Iscj1pW25dLmludGVyaW9ycztpZih3ZyhhLHRbMF0sdFsxXSkpe2Zvcih2YXIgcz0wO3M8KHI/ci5sZW5ndGg6MCk7cysrKWlmKHdnKHJbc10pKWNvbnRpbnVlIHQ7cmV0dXJuITB9fXJldHVybiExfSx0cmFuc2Zvcm1UbzpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10aGlzLmdldEJvdW5kaW5nUmVjdCgpLGE9by53aWR0aC9vLmhlaWdodDtpP249bnx8aS9hOmk9YSpuO2Zvcih2YXIgcj1uZXcgTWkodCxlLGksbikscz1vLmNhbGN1bGF0ZVRyYW5zZm9ybShyKSxsPXRoaXMuZ2VvbWV0cmllcyx1PTA7dTxsLmxlbmd0aDt1KyspaWYoInBvbHlnb24iPT09bFt1XS50eXBlKXtmb3IodmFyIGg9bFt1XS5leHRlcmlvcixjPWxbdV0uaW50ZXJpb3JzLGQ9MDtkPGgubGVuZ3RoO2QrKylidChoW2RdLGhbZF0scyk7Zm9yKHZhciBmPTA7ZjwoYz9jLmxlbmd0aDowKTtmKyspZm9yKGQ9MDtkPGNbZl0ubGVuZ3RoO2QrKylidChjW2ZdW2RdLGNbZl1bZF0scyl9KG89dGhpcy5fcmVjdCkuY29weShyKSx0aGlzLmNlbnRlcj1bby54K28ud2lkdGgvMixvLnkrby5oZWlnaHQvMl19LGNsb25lU2hhbGxvdzpmdW5jdGlvbih0KXtudWxsPT10JiYodD10aGlzLm5hbWUpO3ZhciBlPW5ldyBiZyh0LHRoaXMuZ2VvbWV0cmllcyx0aGlzLmNlbnRlcik7cmV0dXJuIGUuX3JlY3Q9dGhpcy5fcmVjdCxlLnRyYW5zZm9ybVRvPW51bGwsZX19O2Z1bmN0aW9uIE1nKHQpe3JldHVybiBmdW5jdGlvbih0KXtpZighdC5VVEY4RW5jb2RpbmcpcmV0dXJuO3ZhciBlPXQuVVRGOFNjYWxlO251bGw9PWUmJihlPTEwMjQpO2Zvcih2YXIgaT10LmZlYXR1cmVzLG49MDtuPGkubGVuZ3RoO24rKylmb3IodmFyIG89aVtuXS5nZW9tZXRyeSxhPW8uY29vcmRpbmF0ZXMscj1vLmVuY29kZU9mZnNldHMscz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgbD1hW3NdO2lmKCJQb2x5Z29uIj09PW8udHlwZSlhW3NdPVNnKGwscltzXSxlKTtlbHNlIGlmKCJNdWx0aVBvbHlnb24iPT09by50eXBlKWZvcih2YXIgdT0wO3U8bC5sZW5ndGg7dSsrKXt2YXIgaD1sW3VdO2xbdV09U2coaCxyW3NdW3VdLGUpfX10LlVURjhFbmNvZGluZz0hMX0odCksTihNKHQuZmVhdHVyZXMsZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2VvbWV0cnkmJnQucHJvcGVydGllcyYmMDx0Lmdlb21ldHJ5LmNvb3JkaW5hdGVzLmxlbmd0aH0pLGZ1bmN0aW9uKHQpe3ZhciBlPXQucHJvcGVydGllcyxpPXQuZ2VvbWV0cnksbj1pLmNvb3JkaW5hdGVzLG89W107IlBvbHlnb24iPT09aS50eXBlJiZvLnB1c2goe3R5cGU6InBvbHlnb24iLGV4dGVyaW9yOm5bMF0saW50ZXJpb3JzOm4uc2xpY2UoMSl9KSwiTXVsdGlQb2x5Z29uIj09PWkudHlwZSYmRShuLGZ1bmN0aW9uKHQpe3RbMF0mJm8ucHVzaCh7dHlwZToicG9seWdvbiIsZXh0ZXJpb3I6dFswXSxpbnRlcmlvcnM6dC5zbGljZSgxKX0pfSk7dmFyIGE9bmV3IGJnKGUubmFtZSxvLGUuY3ApO3JldHVybiBhLnByb3BlcnRpZXM9ZSxhfSl9dmFyIElnPVpvKCk7ZnVuY3Rpb24gVGcodCl7cmV0dXJuImNhdGVnb3J5Ij09PXQudHlwZT9mdW5jdGlvbih0KXt2YXIgZT10LmdldExhYmVsTW9kZWwoKSxpPURnKHQsZSk7cmV0dXJuIWUuZ2V0KCJzaG93Iil8fHQuc2NhbGUuaXNCbGFuaygpP3tsYWJlbHM6W10sbGFiZWxDYXRlZ29yeUludGVydmFsOmkubGFiZWxDYXRlZ29yeUludGVydmFsfTppfSh0KTpmdW5jdGlvbihpKXt2YXIgdD1pLnNjYWxlLmdldFRpY2tzKCksbj1uZyhpKTtyZXR1cm57bGFiZWxzOk4odCxmdW5jdGlvbih0LGUpe3JldHVybntmb3JtYXR0ZWRMYWJlbDpuKHQsZSkscmF3TGFiZWw6aS5zY2FsZS5nZXRMYWJlbCh0KSx0aWNrVmFsdWU6dH19KX19KHQpfWZ1bmN0aW9uIEFnKHQsZSl7cmV0dXJuImNhdGVnb3J5Ij09PXQudHlwZT9mdW5jdGlvbih0LGUpe3ZhciBpLG4sbz1DZyh0LCJ0aWNrcyIpLGE9YWcoZSkscj1MZyhvLGEpO2lmKHIpcmV0dXJuIHI7ZS5nZXQoInNob3ciKSYmIXQuc2NhbGUuaXNCbGFuaygpfHwoaT1bXSk7aWYoTyhhKSlpPU5nKHQsYSwhMCk7ZWxzZSBpZigiYXV0byI9PT1hKXt2YXIgcz1EZyh0LHQuZ2V0TGFiZWxNb2RlbCgpKTtuPXMubGFiZWxDYXRlZ29yeUludGVydmFsLGk9TihzLmxhYmVscyxmdW5jdGlvbih0KXtyZXR1cm4gdC50aWNrVmFsdWV9KX1lbHNlIGk9UGcodCxuPWEsITApO3JldHVybiBrZyhvLGEse3RpY2tzOmksdGlja0NhdGVnb3J5SW50ZXJ2YWw6bn0pfSh0LGUpOnt0aWNrczp0LnNjYWxlLmdldFRpY2tzKCl9fWZ1bmN0aW9uIERnKHQsZSl7dmFyIGksbj1DZyh0LCJsYWJlbHMiKSxvPWFnKGUpLGE9TGcobixvKTtyZXR1cm4gYXx8a2cobixvLHtsYWJlbHM6TyhvKT9OZyh0LG8pOlBnKHQsaT0iYXV0byI9PT1vP2Z1bmN0aW9uKHQpe3ZhciBlPUlnKHQpLmF1dG9JbnRlcnZhbDtyZXR1cm4gbnVsbCE9ZT9lOklnKHQpLmF1dG9JbnRlcnZhbD10LmNhbGN1bGF0ZUNhdGVnb3J5SW50ZXJ2YWwoKX0odCk6byksbGFiZWxDYXRlZ29yeUludGVydmFsOml9KX1mdW5jdGlvbiBDZyh0LGUpe3JldHVybiBJZyh0KVtlXXx8KElnKHQpW2VdPVtdKX1mdW5jdGlvbiBMZyh0LGUpe2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKWlmKHRbaV0ua2V5PT09ZSlyZXR1cm4gdFtpXS52YWx1ZX1mdW5jdGlvbiBrZyh0LGUsaSl7cmV0dXJuIHQucHVzaCh7a2V5OmUsdmFsdWU6aX0pLGl9ZnVuY3Rpb24gUGcodCxlLGkpe3ZhciBuPW5nKHQpLG89dC5zY2FsZSxhPW8uZ2V0RXh0ZW50KCkscj10LmdldExhYmVsTW9kZWwoKSxzPVtdLGw9TWF0aC5tYXgoKGV8fDApKzEsMSksdT1hWzBdLGg9by5jb3VudCgpOzAhPT11JiYxPGwmJjI8aC9sJiYodT1NYXRoLnJvdW5kKE1hdGguY2VpbCh1L2wpKmwpKTt2YXIgYz1yZyh0KSxkPXIuZ2V0KCJzaG93TWluTGFiZWwiKXx8YyxmPXIuZ2V0KCJzaG93TWF4TGFiZWwiKXx8YztkJiZ1IT09YVswXSYmZyhhWzBdKTtmb3IodmFyIHA9dTtwPD1hWzFdO3ArPWwpZyhwKTtmdW5jdGlvbiBnKHQpe3MucHVzaChpP3Q6e2Zvcm1hdHRlZExhYmVsOm4odCkscmF3TGFiZWw6by5nZXRMYWJlbCh0KSx0aWNrVmFsdWU6dH0pfXJldHVybiBmJiZwLWwhPT1hWzFdJiZnKGFbMV0pLHN9ZnVuY3Rpb24gTmcodCxpLG4pe3ZhciBvPXQuc2NhbGUsYT1uZyh0KSxyPVtdO3JldHVybiBFKG8uZ2V0VGlja3MoKSxmdW5jdGlvbih0KXt2YXIgZT1vLmdldExhYmVsKHQpO2kodCxlKSYmci5wdXNoKG4/dDp7Zm9ybWF0dGVkTGFiZWw6YSh0KSxyYXdMYWJlbDplLHRpY2tWYWx1ZTp0fSl9KSxyfXZhciBPZz1bMCwxXSxFZz1mdW5jdGlvbih0LGUsaSl7dGhpcy5kaW09dCx0aGlzLnNjYWxlPWUsdGhpcy5fZXh0ZW50PWl8fFswLDBdLHRoaXMuaW52ZXJzZT0hMSx0aGlzLm9uQmFuZD0hMX07ZnVuY3Rpb24gemcodCxlKXt2YXIgaT0odFsxXS10WzBdKS9lLzI7dFswXSs9aSx0WzFdLT1pfUVnLnByb3RvdHlwZT17Y29uc3RydWN0b3I6RWcsY29udGFpbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9leHRlbnQsaT1NYXRoLm1pbihlWzBdLGVbMV0pLG49TWF0aC5tYXgoZVswXSxlWzFdKTtyZXR1cm4gaTw9dCYmdDw9bn0sY29udGFpbkRhdGE6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2NhbGUuY29udGFpbih0KX0sZ2V0RXh0ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4dGVudC5zbGljZSgpfSxnZXRQaXhlbFByZWNpc2lvbjpmdW5jdGlvbih0KXtyZXR1cm4gUmwodHx8dGhpcy5zY2FsZS5nZXRFeHRlbnQoKSx0aGlzLl9leHRlbnQpfSxzZXRFeHRlbnQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9leHRlbnQ7aVswXT10LGlbMV09ZX0sZGF0YVRvQ29vcmQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9leHRlbnQsbj10aGlzLnNjYWxlO3JldHVybiB0PW4ubm9ybWFsaXplKHQpLHRoaXMub25CYW5kJiYib3JkaW5hbCI9PT1uLnR5cGUmJnpnKGk9aS5zbGljZSgpLG4uY291bnQoKSksa2wodCxPZyxpLGUpfSxjb29yZFRvRGF0YTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2V4dGVudCxuPXRoaXMuc2NhbGU7dGhpcy5vbkJhbmQmJiJvcmRpbmFsIj09PW4udHlwZSYmemcoaT1pLnNsaWNlKCksbi5jb3VudCgpKTt2YXIgbz1rbCh0LGksT2csZSk7cmV0dXJuIHRoaXMuc2NhbGUuc2NhbGUobyl9LHBvaW50VG9EYXRhOmZ1bmN0aW9uKHQsZSl7fSxnZXRUaWNrc0Nvb3JkczpmdW5jdGlvbih0KXt2YXIgZT0odD10fHx7fSkudGlja01vZGVsfHx0aGlzLmdldFRpY2tNb2RlbCgpLGk9TihBZyh0aGlzLGUpLnRpY2tzLGZ1bmN0aW9uKHQpe3JldHVybntjb29yZDp0aGlzLmRhdGFUb0Nvb3JkKHQpLHRpY2tWYWx1ZTp0fX0sdGhpcyk7cmV0dXJuIGZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPWUubGVuZ3RoO2lmKCF0Lm9uQmFuZHx8aXx8IW8pcmV0dXJuO3ZhciBhLHIscz10LmdldEV4dGVudCgpO2lmKDE9PT1vKWVbMF0uY29vcmQ9c1swXSxhPWVbMV09e2Nvb3JkOnNbMF19O2Vsc2V7dmFyIGw9ZVtvLTFdLnRpY2tWYWx1ZS1lWzBdLnRpY2tWYWx1ZSx1PShlW28tMV0uY29vcmQtZVswXS5jb29yZCkvbDtFKGUsZnVuY3Rpb24odCl7dC5jb29yZC09dS8yfSk7dmFyIGg9dC5zY2FsZS5nZXRFeHRlbnQoKTtyPTEraFsxXS1lW28tMV0udGlja1ZhbHVlLGE9e2Nvb3JkOmVbby0xXS5jb29yZCt1KnJ9LGUucHVzaChhKX12YXIgYz1zWzBdPnNbMV07ZChlWzBdLmNvb3JkLHNbMF0pJiYobj9lWzBdLmNvb3JkPXNbMF06ZS5zaGlmdCgpKTtuJiZkKHNbMF0sZVswXS5jb29yZCkmJmUudW5zaGlmdCh7Y29vcmQ6c1swXX0pO2Qoc1sxXSxhLmNvb3JkKSYmKG4/YS5jb29yZD1zWzFdOmUucG9wKCkpO24mJmQoYS5jb29yZCxzWzFdKSYmZS5wdXNoKHtjb29yZDpzWzFdfSk7ZnVuY3Rpb24gZCh0LGUpe3JldHVybiB0PU5sKHQpLGU9TmwoZSksYz9lPHQ6dDxlfX0odGhpcyxpLGUuZ2V0KCJhbGlnbldpdGhMYWJlbCIpLHQuY2xhbXApLGl9LGdldE1pbm9yVGlja3NDb29yZHM6ZnVuY3Rpb24oKXtpZigib3JkaW5hbCI9PT10aGlzLnNjYWxlLnR5cGUpcmV0dXJuW107dmFyIHQ9dGhpcy5tb2RlbC5nZXRNb2RlbCgibWlub3JUaWNrIikuZ2V0KCJzcGxpdE51bWJlciIpO3JldHVybiAwPHQmJnQ8MTAwfHwodD01KSxOKHRoaXMuc2NhbGUuZ2V0TWlub3JUaWNrcyh0KSxmdW5jdGlvbih0KXtyZXR1cm4gTih0LGZ1bmN0aW9uKHQpe3JldHVybntjb29yZDp0aGlzLmRhdGFUb0Nvb3JkKHQpLHRpY2tWYWx1ZTp0fX0sdGhpcyl9LHRoaXMpfSxnZXRWaWV3TGFiZWxzOmZ1bmN0aW9uKCl7cmV0dXJuIFRnKHRoaXMpLmxhYmVsc30sZ2V0TGFiZWxNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLmdldE1vZGVsKCJheGlzTGFiZWwiKX0sZ2V0VGlja01vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kZWwuZ2V0TW9kZWwoImF4aXNUaWNrIil9LGdldEJhbmRXaWR0aDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2V4dGVudCxlPXRoaXMuc2NhbGUuZ2V0RXh0ZW50KCksaT1lWzFdLWVbMF0rKHRoaXMub25CYW5kPzE6MCk7MD09PWkmJihpPTEpO3ZhciBuPU1hdGguYWJzKHRbMV0tdFswXSk7cmV0dXJuIE1hdGguYWJzKG4pL2l9LGlzSG9yaXpvbnRhbDpudWxsLGdldFJvdGF0ZTpudWxsLGNhbGN1bGF0ZUNhdGVnb3J5SW50ZXJ2YWw6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRMYWJlbE1vZGVsKCk7cmV0dXJue2F4aXNSb3RhdGU6dC5nZXRSb3RhdGU/dC5nZXRSb3RhdGUoKTp0LmlzSG9yaXpvbnRhbCYmIXQuaXNIb3Jpem9udGFsKCk/OTA6MCxsYWJlbFJvdGF0ZTplLmdldCgicm90YXRlIil8fDAsZm9udDplLmdldEZvbnQoKX19KHQpLGk9bmcodCksbj0oZS5heGlzUm90YXRlLWUubGFiZWxSb3RhdGUpLzE4MCpNYXRoLlBJLG89dC5zY2FsZSxhPW8uZ2V0RXh0ZW50KCkscj1vLmNvdW50KCk7aWYoYVsxXS1hWzBdPDEpcmV0dXJuIDA7dmFyIHM9MTs0MDxyJiYocz1NYXRoLm1heCgxLE1hdGguZmxvb3Ioci80MCkpKTtmb3IodmFyIGw9YVswXSx1PXQuZGF0YVRvQ29vcmQobCsxKS10LmRhdGFUb0Nvb3JkKGwpLGg9TWF0aC5hYnModSpNYXRoLmNvcyhuKSksYz1NYXRoLmFicyh1Kk1hdGguc2luKG4pKSxkPTAsZj0wO2w8PWFbMV07bCs9cyl7dmFyIHAsZyxtPWNuKGkobCksZS5mb250LCJjZW50ZXIiLCJ0b3AiKTtwPTEuMyptLndpZHRoLGc9MS4zKm0uaGVpZ2h0LGQ9TWF0aC5tYXgoZCxwLDcpLGY9TWF0aC5tYXgoZixnLDcpfXZhciB2PWQvaCx5PWYvYztpc05hTih2KSYmKHY9MS8wKSxpc05hTih5KSYmKHk9MS8wKTt2YXIgeD1NYXRoLm1heCgwLE1hdGguZmxvb3IoTWF0aC5taW4odix5KSkpLF89SWcodC5tb2RlbCksdz10LmdldEV4dGVudCgpLGI9Xy5sYXN0QXV0b0ludGVydmFsLFM9Xy5sYXN0VGlja0NvdW50O3JldHVybiBudWxsIT1iJiZudWxsIT1TJiZNYXRoLmFicyhiLXgpPD0xJiZNYXRoLmFicyhTLXIpPD0xJiZ4PGImJl8uYXhpc0V4dGVuZDA9PT13WzBdJiZfLmF4aXNFeHRlbmQxPT09d1sxXT94PWI6KF8ubGFzdFRpY2tDb3VudD1yLF8ubGFzdEF1dG9JbnRlcnZhbD14LF8uYXhpc0V4dGVuZDA9d1swXSxfLmF4aXNFeHRlbmQxPXdbMV0pLHh9KHRoaXMpfX07dmFyIFJnPU1nLEJnPXt9O0UoWyJtYXAiLCJlYWNoIiwiZmlsdGVyIiwiaW5kZXhPZiIsImluaGVyaXRzIiwicmVkdWNlIiwiZmlsdGVyIiwiYmluZCIsImN1cnJ5IiwiaXNBcnJheSIsImlzU3RyaW5nIiwiaXNPYmplY3QiLCJpc0Z1bmN0aW9uIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJjbG9uZSIsIm1lcmdlIl0sZnVuY3Rpb24odCl7QmdbdF09aXRbdF19KTt2YXIgVmc9e307ZnVuY3Rpb24gR2codCxlKXt2YXIgaT10Lm1hcERpbWVuc2lvbigiZGVmYXVsdGVkTGFiZWwiLCEwKSxuPWkubGVuZ3RoO2lmKDE9PT1uKXJldHVybiBCaCh0LGUsaVswXSk7aWYobil7Zm9yKHZhciBvPVtdLGE9MDthPGkubGVuZ3RoO2ErKyl7dmFyIHI9QmgodCxlLGlbYV0pO28ucHVzaChyKX1yZXR1cm4gby5qb2luKCIgIil9fWZ1bmN0aW9uIEZnKHQsZSxpKXtJaS5jYWxsKHRoaXMpLHRoaXMudXBkYXRlRGF0YSh0LGUsaSl9RShbImV4dGVuZFNoYXBlIiwiZXh0ZW5kUGF0aCIsIm1ha2VQYXRoIiwibWFrZUltYWdlIiwibWVyZ2VQYXRoIiwicmVzaXplUGF0aCIsImNyZWF0ZUljb24iLCJzZXRIb3ZlclN0eWxlIiwic2V0TGFiZWxTdHlsZSIsInNldFRleHRTdHlsZSIsInNldFRleHQiLCJnZXRGb250IiwidXBkYXRlUHJvcHMiLCJpbml0UHJvcHMiLCJnZXRUcmFuc2Zvcm0iLCJjbGlwUG9pbnRzQnlSZWN0IiwiY2xpcFJlY3RCeVJlY3QiLCJyZWdpc3RlclNoYXBlIiwiZ2V0U2hhcGVDbGFzcyIsIkdyb3VwIiwiSW1hZ2UiLCJUZXh0IiwiQ2lyY2xlIiwiU2VjdG9yIiwiUmluZyIsIlBvbHlnb24iLCJQb2x5bGluZSIsIlJlY3QiLCJMaW5lIiwiQmV6aWVyQ3VydmUiLCJBcmMiLCJJbmNyZW1lbnRhbERpc3BsYXlhYmxlIiwiQ29tcG91bmRQYXRoIiwiTGluZWFyR3JhZGllbnQiLCJSYWRpYWxHcmFkaWVudCIsIkJvdW5kaW5nUmVjdCJdLGZ1bmN0aW9uKHQpe1ZnW3RdPXlsW3RdfSksaWMuZXh0ZW5kKHt0eXBlOiJzZXJpZXMubGluZSIsZGVwZW5kZW5jaWVzOlsiZ3JpZCIsInBvbGFyIl0sZ2V0SW5pdGlhbERhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaHAodGhpcy5nZXRTb3VyY2UoKSx0aGlzLHt1c2VFbmNvZGVEZWZhdWx0ZXI6ITB9KX0sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNvb3JkaW5hdGVTeXN0ZW06ImNhcnRlc2lhbjJkIixsZWdlbmRIb3Zlckxpbms6ITAsaG92ZXJBbmltYXRpb246ITAsY2xpcDohMCxsYWJlbDp7cG9zaXRpb246InRvcCJ9LGxpbmVTdHlsZTp7d2lkdGg6Mix0eXBlOiJzb2xpZCJ9LHN0ZXA6ITEsc21vb3RoOiExLHNtb290aE1vbm90b25lOm51bGwsc3ltYm9sOiJlbXB0eUNpcmNsZSIsc3ltYm9sU2l6ZTo0LHN5bWJvbFJvdGF0ZTpudWxsLHNob3dTeW1ib2w6ITAsc2hvd0FsbFN5bWJvbDoiYXV0byIsY29ubmVjdE51bGxzOiExLHNhbXBsaW5nOiJub25lIixhbmltYXRpb25FYXNpbmc6ImxpbmVhciIscHJvZ3Jlc3NpdmU6MCxob3ZlckxheWVyVGhyZXNob2xkOjEvMH19KTt2YXIgV2c9RmcucHJvdG90eXBlLEhnPUZnLmdldFN5bWJvbFNpemU9ZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldEl0ZW1WaXN1YWwoZSwic3ltYm9sU2l6ZSIpO3JldHVybiBpIGluc3RhbmNlb2YgQXJyYXk/aS5zbGljZSgpOlsraSwraV19O2Z1bmN0aW9uIFpnKHQpe3JldHVyblt0WzBdLzIsdFsxXS8yXX1mdW5jdGlvbiBVZyh0LGUpe3RoaXMucGFyZW50LmRyaWZ0KHQsZSl9V2cuX2NyZWF0ZVN5bWJvbD1mdW5jdGlvbih0LGUsaSxuLG8pe3RoaXMucmVtb3ZlQWxsKCk7dmFyIGE9bWcodCwtMSwtMSwyLDIsZS5nZXRJdGVtVmlzdWFsKGksImNvbG9yIiksbyk7YS5hdHRyKHt6MjoxMDAsY3VsbGluZzohMCxzY2FsZTpaZyhuKX0pLGEuZHJpZnQ9VWcsdGhpcy5fc3ltYm9sVHlwZT10LHRoaXMuYWRkKGEpfSxXZy5zdG9wU3ltYm9sQW5pbWF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuY2hpbGRBdCgwKS5zdG9wQW5pbWF0aW9uKHQpfSxXZy5nZXRTeW1ib2xQYXRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRBdCgwKX0sV2cuZ2V0U2NhbGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZEF0KDApLnNjYWxlfSxXZy5oaWdobGlnaHQ9ZnVuY3Rpb24oKXt0aGlzLmNoaWxkQXQoMCkudHJpZ2dlcigiZW1waGFzaXMiKX0sV2cuZG93bnBsYXk9ZnVuY3Rpb24oKXt0aGlzLmNoaWxkQXQoMCkudHJpZ2dlcigibm9ybWFsIil9LFdnLnNldFo9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmNoaWxkQXQoMCk7aS56bGV2ZWw9dCxpLno9ZX0sV2cuc2V0RHJhZ2dhYmxlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2hpbGRBdCgwKTtlLmRyYWdnYWJsZT10LGUuY3Vyc29yPXQ/Im1vdmUiOmUuY3Vyc29yfSxXZy51cGRhdGVEYXRhPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLnNpbGVudD0hMTt2YXIgbj10LmdldEl0ZW1WaXN1YWwoZSwic3ltYm9sIil8fCJjaXJjbGUiLG89dC5ob3N0TW9kZWwsYT1IZyh0LGUpLHI9biE9PXRoaXMuX3N5bWJvbFR5cGU7aWYocil7dmFyIHM9dC5nZXRJdGVtVmlzdWFsKGUsInN5bWJvbEtlZXBBc3BlY3QiKTt0aGlzLl9jcmVhdGVTeW1ib2wobix0LGUsYSxzKX1lbHNleyhsPXRoaXMuY2hpbGRBdCgwKSkuc2lsZW50PSExLHNsKGwse3NjYWxlOlpnKGEpfSxvLGUpfWlmKHRoaXMuX3VwZGF0ZUNvbW1vbih0LGUsYSxpKSxyKXt2YXIgbD10aGlzLmNoaWxkQXQoMCksdT1pJiZpLmZhZGVJbixoPXtzY2FsZTpsLnNjYWxlLnNsaWNlKCl9O3UmJihoLnN0eWxlPXtvcGFjaXR5Omwuc3R5bGUub3BhY2l0eX0pLGwuc2NhbGU9WzAsMF0sdSYmKGwuc3R5bGUub3BhY2l0eT0wKSxsbChsLGgsbyxlKX10aGlzLl9zZXJpZXNNb2RlbD1vfTt2YXIgWGc9WyJpdGVtU3R5bGUiXSxZZz1bImVtcGhhc2lzIiwiaXRlbVN0eWxlIl0samc9WyJsYWJlbCJdLHFnPVsiZW1waGFzaXMiLCJsYWJlbCJdO2Z1bmN0aW9uIEtnKHQsZSl7aWYoIXRoaXMuaW5jcmVtZW50YWwmJiF0aGlzLnVzZUhvdmVyTGF5ZXIpaWYoImVtcGhhc2lzIj09PWUpe3ZhciBpPXRoaXMuX19zeW1ib2xPcmlnaW5hbFNjYWxlLG49aVsxXS9pWzBdLG89e3NjYWxlOltNYXRoLm1heCgxLjEqaVswXSxpWzBdKzMpLE1hdGgubWF4KDEuMSppWzFdLGlbMV0rMypuKV19O3RoaXMuYW5pbWF0ZVRvKG8sNDAwLCJlbGFzdGljT3V0Iil9ZWxzZSJub3JtYWwiPT09ZSYmdGhpcy5hbmltYXRlVG8oe3NjYWxlOnRoaXMuX19zeW1ib2xPcmlnaW5hbFNjYWxlfSw0MDAsImVsYXN0aWNPdXQiKX1mdW5jdGlvbiAkZyh0KXt0aGlzLmdyb3VwPW5ldyBJaSx0aGlzLl9zeW1ib2xDdG9yPXR8fEZnfVdnLl91cGRhdGVDb21tb249ZnVuY3Rpb24oaSx0LGUsbil7dmFyIG89dGhpcy5jaGlsZEF0KDApLGE9aS5ob3N0TW9kZWwscj1pLmdldEl0ZW1WaXN1YWwodCwiY29sb3IiKTsiaW1hZ2UiIT09by50eXBlP28udXNlU3R5bGUoe3N0cm9rZU5vU2NhbGU6ITB9KTpvLnNldFN0eWxlKHtvcGFjaXR5Om51bGwsc2hhZG93Qmx1cjpudWxsLHNoYWRvd09mZnNldFg6bnVsbCxzaGFkb3dPZmZzZXRZOm51bGwsc2hhZG93Q29sb3I6bnVsbH0pO3ZhciBzPW4mJm4uaXRlbVN0eWxlLGw9biYmbi5ob3Zlckl0ZW1TdHlsZSx1PW4mJm4uc3ltYm9sUm90YXRlLGg9biYmbi5zeW1ib2xPZmZzZXQsYz1uJiZuLmxhYmVsTW9kZWwsZD1uJiZuLmhvdmVyTGFiZWxNb2RlbCxmPW4mJm4uaG92ZXJBbmltYXRpb24scD1uJiZuLmN1cnNvclN0eWxlO2lmKCFufHxpLmhhc0l0ZW1PcHRpb24pe3ZhciBnPW4mJm4uaXRlbU1vZGVsP24uaXRlbU1vZGVsOmkuZ2V0SXRlbU1vZGVsKHQpO3M9Zy5nZXRNb2RlbChYZykuZ2V0SXRlbVN0eWxlKFsiY29sb3IiXSksbD1nLmdldE1vZGVsKFlnKS5nZXRJdGVtU3R5bGUoKSx1PWcuZ2V0U2hhbGxvdygic3ltYm9sUm90YXRlIiksaD1nLmdldFNoYWxsb3coInN5bWJvbE9mZnNldCIpLGM9Zy5nZXRNb2RlbChqZyksZD1nLmdldE1vZGVsKHFnKSxmPWcuZ2V0U2hhbGxvdygiaG92ZXJBbmltYXRpb24iKSxwPWcuZ2V0U2hhbGxvdygiY3Vyc29yIil9ZWxzZSBsPUwoe30sbCk7dmFyIG09by5zdHlsZTtvLmF0dHIoInJvdGF0aW9uIiwodXx8MCkqTWF0aC5QSS8xODB8fDApLGgmJm8uYXR0cigicG9zaXRpb24iLFtQbChoWzBdLGVbMF0pLFBsKGhbMV0sZVsxXSldKSxwJiZvLmF0dHIoImN1cnNvciIscCksby5zZXRDb2xvcihyLG4mJm4uc3ltYm9sSW5uZXJDb2xvciksby5zZXRTdHlsZShzKTt2YXIgdj1pLmdldEl0ZW1WaXN1YWwodCwib3BhY2l0eSIpO251bGwhPXYmJihtLm9wYWNpdHk9dik7dmFyIHk9aS5nZXRJdGVtVmlzdWFsKHQsImxpZnRaIikseD1vLl9fejJPcmlnaW47bnVsbCE9eT9udWxsPT14JiYoby5fX3oyT3JpZ2luPW8uejIsby56Mis9eSk6bnVsbCE9eCYmKG8uejI9eCxvLl9fejJPcmlnaW49bnVsbCk7dmFyIF89biYmbi51c2VOYW1lTGFiZWw7JHMobSxsLGMsZCx7bGFiZWxGZXRjaGVyOmEsbGFiZWxEYXRhSW5kZXg6dCxkZWZhdWx0VGV4dDpmdW5jdGlvbih0LGUpe3JldHVybiBfP2kuZ2V0TmFtZSh0KTpHZyhpLHQpfSxpc1JlY3RUZXh0OiEwLGF1dG9Db2xvcjpyfSksby5fX3N5bWJvbE9yaWdpbmFsU2NhbGU9WmcoZSksby5ob3ZlclN0eWxlPWwsby5oaWdoRG93bk9uVXBkYXRlPWYmJmEuaXNBbmltYXRpb25FbmFibGVkKCk/S2c6bnVsbCxZcyhvKX0sV2cuZmFkZU91dD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuY2hpbGRBdCgwKTt0aGlzLnNpbGVudD1pLnNpbGVudD0hMCxlJiZlLmtlZXBMYWJlbHx8KGkuc3R5bGUudGV4dD1udWxsKSxzbChpLHtzdHlsZTp7b3BhY2l0eTowfSxzY2FsZTpbMCwwXX0sdGhpcy5fc2VyaWVzTW9kZWwsdGhpcy5kYXRhSW5kZXgsdCl9LHcoRmcsSWkpO3ZhciBKZz0kZy5wcm90b3R5cGU7ZnVuY3Rpb24gUWcodCxlLGksbil7cmV0dXJuIGUmJiFpc05hTihlWzBdKSYmIWlzTmFOKGVbMV0pJiYhKG4uaXNJZ25vcmUmJm4uaXNJZ25vcmUoaSkpJiYhKG4uY2xpcFNoYXBlJiYhbi5jbGlwU2hhcGUuY29udGFpbihlWzBdLGVbMV0pKSYmIm5vbmUiIT09dC5nZXRJdGVtVmlzdWFsKGksInN5bWJvbCIpfWZ1bmN0aW9uIHRtKHQpe3JldHVybiBudWxsPT10fHxSKHQpfHwodD17aXNJZ25vcmU6dH0pLHR8fHt9fWZ1bmN0aW9uIGVtKHQpe3ZhciBlPXQuaG9zdE1vZGVsO3JldHVybntpdGVtU3R5bGU6ZS5nZXRNb2RlbCgiaXRlbVN0eWxlIikuZ2V0SXRlbVN0eWxlKFsiY29sb3IiXSksaG92ZXJJdGVtU3R5bGU6ZS5nZXRNb2RlbCgiZW1waGFzaXMuaXRlbVN0eWxlIikuZ2V0SXRlbVN0eWxlKCksc3ltYm9sUm90YXRlOmUuZ2V0KCJzeW1ib2xSb3RhdGUiKSxzeW1ib2xPZmZzZXQ6ZS5nZXQoInN5bWJvbE9mZnNldCIpLGhvdmVyQW5pbWF0aW9uOmUuZ2V0KCJob3ZlckFuaW1hdGlvbiIpLGxhYmVsTW9kZWw6ZS5nZXRNb2RlbCgibGFiZWwiKSxob3ZlckxhYmVsTW9kZWw6ZS5nZXRNb2RlbCgiZW1waGFzaXMubGFiZWwiKSxjdXJzb3JTdHlsZTplLmdldCgiY3Vyc29yIil9fWZ1bmN0aW9uIGltKHQsZSxpKXt2YXIgbixvPXQuZ2V0QmFzZUF4aXMoKSxhPXQuZ2V0T3RoZXJBeGlzKG8pLHI9ZnVuY3Rpb24odCxlKXt2YXIgaT0wLG49dC5zY2FsZS5nZXRFeHRlbnQoKTsic3RhcnQiPT09ZT9pPW5bMF06ImVuZCI9PT1lP2k9blsxXTowPG5bMF0/aT1uWzBdOm5bMV08MCYmKGk9blsxXSk7cmV0dXJuIGl9KGEsaSkscz1vLmRpbSxsPWEuZGltLHU9ZS5tYXBEaW1lbnNpb24obCksaD1lLm1hcERpbWVuc2lvbihzKSxjPSJ4Ij09PWx8fCJyYWRpdXMiPT09bD8xOjAsZD1OKHQuZGltZW5zaW9ucyxmdW5jdGlvbih0KXtyZXR1cm4gZS5tYXBEaW1lbnNpb24odCl9KSxmPWUuZ2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja1Jlc3VsdERpbWVuc2lvbiIpO3JldHVybihufD1scChlLGRbMF0pKSYmKGRbMF09ZiksKG58PWxwKGUsZFsxXSkpJiYoZFsxXT1mKSx7ZGF0YURpbXNGb3JQb2ludDpkLHZhbHVlU3RhcnQ6cix2YWx1ZUF4aXNEaW06bCxiYXNlQXhpc0RpbTpzLHN0YWNrZWQ6ISFuLHZhbHVlRGltOnUsYmFzZURpbTpoLGJhc2VEYXRhT2Zmc2V0OmMsc3RhY2tlZE92ZXJEaW1lbnNpb246ZS5nZXRDYWxjdWxhdGlvbkluZm8oInN0YWNrZWRPdmVyRGltZW5zaW9uIil9fWZ1bmN0aW9uIG5tKHQsZSxpLG4pe3ZhciBvPU5hTjt0LnN0YWNrZWQmJihvPWkuZ2V0KGkuZ2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja2VkT3ZlckRpbWVuc2lvbiIpLG4pKSxpc05hTihvKSYmKG89dC52YWx1ZVN0YXJ0KTt2YXIgYT10LmJhc2VEYXRhT2Zmc2V0LHI9W107cmV0dXJuIHJbYV09aS5nZXQodC5iYXNlRGltLG4pLHJbMS1hXT1vLGUuZGF0YVRvUG9pbnQocil9SmcudXBkYXRlRGF0YT1mdW5jdGlvbihvLGEpe2E9dG0oYSk7dmFyIHI9dGhpcy5ncm91cCxzPW8uaG9zdE1vZGVsLGw9dGhpcy5fZGF0YSx1PXRoaXMuX3N5bWJvbEN0b3IsaD1lbShvKTtsfHxyLnJlbW92ZUFsbCgpLG8uZGlmZihsKS5hZGQoZnVuY3Rpb24odCl7dmFyIGU9by5nZXRJdGVtTGF5b3V0KHQpO2lmKFFnKG8sZSx0LGEpKXt2YXIgaT1uZXcgdShvLHQsaCk7aS5hdHRyKCJwb3NpdGlvbiIsZSksby5zZXRJdGVtR3JhcGhpY0VsKHQsaSksci5hZGQoaSl9fSkudXBkYXRlKGZ1bmN0aW9uKHQsZSl7dmFyIGk9bC5nZXRJdGVtR3JhcGhpY0VsKGUpLG49by5nZXRJdGVtTGF5b3V0KHQpO1FnKG8sbix0LGEpPyhpPyhpLnVwZGF0ZURhdGEobyx0LGgpLHNsKGkse3Bvc2l0aW9uOm59LHMpKTooaT1uZXcgdShvLHQpKS5hdHRyKCJwb3NpdGlvbiIsbiksci5hZGQoaSksby5zZXRJdGVtR3JhcGhpY0VsKHQsaSkpOnIucmVtb3ZlKGkpfSkucmVtb3ZlKGZ1bmN0aW9uKHQpe3ZhciBlPWwuZ2V0SXRlbUdyYXBoaWNFbCh0KTtlJiZlLmZhZGVPdXQoZnVuY3Rpb24oKXtyLnJlbW92ZShlKX0pfSkuZXhlY3V0ZSgpLHRoaXMuX2RhdGE9b30sSmcuaXNQZXJzaXN0ZW50PWZ1bmN0aW9uKCl7cmV0dXJuITB9LEpnLnVwZGF0ZUxheW91dD1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX2RhdGE7biYmbi5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbih0LGUpe3ZhciBpPW4uZ2V0SXRlbUxheW91dChlKTt0LmF0dHIoInBvc2l0aW9uIixpKX0pfSxKZy5pbmNyZW1lbnRhbFByZXBhcmVVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fc2VyaWVzU2NvcGU9ZW0odCksdGhpcy5fZGF0YT1udWxsLHRoaXMuZ3JvdXAucmVtb3ZlQWxsKCl9LEpnLmluY3JlbWVudGFsVXBkYXRlPWZ1bmN0aW9uKHQsZSxpKXtmdW5jdGlvbiBuKHQpe3QuaXNHcm91cHx8KHQuaW5jcmVtZW50YWw9dC51c2VIb3ZlckxheWVyPSEwKX1pPXRtKGkpO2Zvcih2YXIgbz10LnN0YXJ0O288dC5lbmQ7bysrKXt2YXIgYT1lLmdldEl0ZW1MYXlvdXQobyk7aWYoUWcoZSxhLG8saSkpe3ZhciByPW5ldyB0aGlzLl9zeW1ib2xDdG9yKGUsbyx0aGlzLl9zZXJpZXNTY29wZSk7ci50cmF2ZXJzZShuKSxyLmF0dHIoInBvc2l0aW9uIixhKSx0aGlzLmdyb3VwLmFkZChyKSxlLnNldEl0ZW1HcmFwaGljRWwobyxyKX19fSxKZy5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ncm91cCxpPXRoaXMuX2RhdGE7aSYmdD9pLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQpe3QuZmFkZU91dChmdW5jdGlvbigpe2UucmVtb3ZlKHQpfSl9KTplLnJlbW92ZUFsbCgpfTt2YXIgb209U3QsYW09TXQscm09dXQsc209YXQsbG09W10sdW09W10saG09W107ZnVuY3Rpb24gY20odCl7cmV0dXJuIGlzTmFOKHRbMF0pfHxpc05hTih0WzFdKX1mdW5jdGlvbiBkbSh0LGUsaSxuLG8sYSxyLHMsbCx1KXtyZXR1cm4ibm9uZSIhPT11JiZ1P2Z1bmN0aW9uKHQsZSxpLG4sbyxhLHIscyxsLHUsaCl7Zm9yKHZhciBjPTAsZD1pLGY9MDtmPG47ZisrKXt2YXIgcD1lW2RdO2lmKG88PWR8fGQ8MClicmVhaztpZihjbShwKSl7aWYoaCl7ZCs9YTtjb250aW51ZX1icmVha31pZihkPT09aSl0WzA8YT8ibW92ZVRvIjoibGluZVRvIl0ocFswXSxwWzFdKTtlbHNlIGlmKDA8bCl7dmFyIGc9ZVtjXSxtPSJ5Ij09PXU/MTowLHY9KHBbbV0tZ1ttXSkqbDtzbSh1bSxnKSx1bVttXT1nW21dK3Ysc20oaG0scCksaG1bbV09cFttXS12LHQuYmV6aWVyQ3VydmVUbyh1bVswXSx1bVsxXSxobVswXSxobVsxXSxwWzBdLHBbMV0pfWVsc2UgdC5saW5lVG8ocFswXSxwWzFdKTtjPWQsZCs9YX1yZXR1cm4gZn0uYXBwbHkodGhpcyxhcmd1bWVudHMpOmZ1bmN0aW9uKHQsZSxpLG4sbyxhLHIscyxsLHUsaCl7Zm9yKHZhciBjPTAsZD1pLGY9MDtmPG47ZisrKXt2YXIgcD1lW2RdO2lmKG88PWR8fGQ8MClicmVhaztpZihjbShwKSl7aWYoaCl7ZCs9YTtjb250aW51ZX1icmVha31pZihkPT09aSl0WzA8YT8ibW92ZVRvIjoibGluZVRvIl0ocFswXSxwWzFdKSxzbSh1bSxwKTtlbHNlIGlmKDA8bCl7dmFyIGc9ZCthLG09ZVtnXTtpZihoKWZvcig7bSYmY20oZVtnXSk7KW09ZVtnKz1hXTt2YXIgdj0uNSx5PWVbY107aWYoIShtPWVbZ10pfHxjbShtKSlzbShobSxwKTtlbHNle3ZhciB4LF87aWYoY20obSkmJiFoJiYobT1wKSxodChsbSxtLHkpLCJ4Ij09PXV8fCJ5Ij09PXUpe3ZhciB3PSJ4Ij09PXU/MDoxO3g9TWF0aC5hYnMocFt3XS15W3ddKSxfPU1hdGguYWJzKHBbd10tbVt3XSl9ZWxzZSB4PXl0KHAseSksXz15dChwLG0pO3JtKGhtLHAsbG0sLWwqKDEtKHY9Xy8oXyt4KSkpKX1vbSh1bSx1bSxzKSxhbSh1bSx1bSxyKSxvbShobSxobSxzKSxhbShobSxobSxyKSx0LmJlemllckN1cnZlVG8odW1bMF0sdW1bMV0saG1bMF0saG1bMV0scFswXSxwWzFdKSxybSh1bSxwLGxtLGwqdil9ZWxzZSB0LmxpbmVUbyhwWzBdLHBbMV0pO2M9ZCxkKz1hfXJldHVybiBmfS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZm0odCxlKXt2YXIgaT1bMS8wLDEvMF0sbj1bLTEvMCwtMS8wXTtpZihlKWZvcih2YXIgbz0wO288dC5sZW5ndGg7bysrKXt2YXIgYT10W29dO2FbMF08aVswXSYmKGlbMF09YVswXSksYVsxXTxpWzFdJiYoaVsxXT1hWzFdKSxhWzBdPm5bMF0mJihuWzBdPWFbMF0pLGFbMV0+blsxXSYmKG5bMV09YVsxXSl9cmV0dXJue21pbjplP2k6bixtYXg6ZT9uOml9fXZhciBwbT1Tci5leHRlbmQoe3R5cGU6ImVjLXBvbHlsaW5lIixzaGFwZTp7cG9pbnRzOltdLHNtb290aDowLHNtb290aENvbnN0cmFpbnQ6ITAsc21vb3RoTW9ub3RvbmU6bnVsbCxjb25uZWN0TnVsbHM6ITF9LHN0eWxlOntmaWxsOm51bGwsc3Ryb2tlOiIjMDAwIn0sYnJ1c2g6V3IoU3IucHJvdG90eXBlLmJydXNoKSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLnBvaW50cyxuPTAsbz1pLmxlbmd0aCxhPWZtKGksZS5zbW9vdGhDb25zdHJhaW50KTtpZihlLmNvbm5lY3ROdWxscyl7Zm9yKDswPG8mJmNtKGlbby0xXSk7by0tKTtmb3IoO248byYmY20oaVtuXSk7bisrKTt9Zm9yKDtuPG87KW4rPWRtKHQsaSxuLG8sbywxLGEubWluLGEubWF4LGUuc21vb3RoLGUuc21vb3RoTW9ub3RvbmUsZS5jb25uZWN0TnVsbHMpKzF9fSksZ209U3IuZXh0ZW5kKHt0eXBlOiJlYy1wb2x5Z29uIixzaGFwZTp7cG9pbnRzOltdLHN0YWNrZWRPblBvaW50czpbXSxzbW9vdGg6MCxzdGFja2VkT25TbW9vdGg6MCxzbW9vdGhDb25zdHJhaW50OiEwLHNtb290aE1vbm90b25lOm51bGwsY29ubmVjdE51bGxzOiExfSxicnVzaDpXcihTci5wcm90b3R5cGUuYnJ1c2gpLGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPWUucG9pbnRzLG49ZS5zdGFja2VkT25Qb2ludHMsbz0wLGE9aS5sZW5ndGgscj1lLnNtb290aE1vbm90b25lLHM9Zm0oaSxlLnNtb290aENvbnN0cmFpbnQpLGw9Zm0obixlLnNtb290aENvbnN0cmFpbnQpO2lmKGUuY29ubmVjdE51bGxzKXtmb3IoOzA8YSYmY20oaVthLTFdKTthLS0pO2Zvcig7bzxhJiZjbShpW29dKTtvKyspO31mb3IoO288YTspe3ZhciB1PWRtKHQsaSxvLGEsYSwxLHMubWluLHMubWF4LGUuc21vb3RoLHIsZS5jb25uZWN0TnVsbHMpO2RtKHQsbixvK3UtMSx1LGEsLTEsbC5taW4sbC5tYXgsZS5zdGFja2VkT25TbW9vdGgscixlLmNvbm5lY3ROdWxscyksbys9dSsxLHQuY2xvc2VQYXRoKCl9fX0pO2Z1bmN0aW9uIG1tKHQsZSxpKXt2YXIgbj10LmdldEFyZWEoKSxvPXQuZ2V0QmFzZUF4aXMoKS5pc0hvcml6b250YWwoKSxhPW4ueCxyPW4ueSxzPW4ud2lkdGgsbD1uLmhlaWdodCx1PWkuZ2V0KCJsaW5lU3R5bGUud2lkdGgiKXx8MixoPW5ldyBpcyh7c2hhcGU6e3g6YS09dS8yLHk6ci09dS8yLHdpZHRoOnMrPXUsaGVpZ2h0OmwrPXV9fSk7cmV0dXJuIGUmJihoLnNoYXBlW28/IndpZHRoIjoiaGVpZ2h0Il09MCxsbChoLHtzaGFwZTp7d2lkdGg6cyxoZWlnaHQ6bH19LGkpKSxofWZ1bmN0aW9uIHZtKHQsZSxpKXt2YXIgbj10LmdldEFyZWEoKSxvPW5ldyBVcih7c2hhcGU6e2N4Ok5sKHQuY3gsMSksY3k6TmwodC5jeSwxKSxyMDpObChuLnIwLDEpLHI6Tmwobi5yLDEpLHN0YXJ0QW5nbGU6bi5zdGFydEFuZ2xlLGVuZEFuZ2xlOm4uZW5kQW5nbGUsY2xvY2t3aXNlOm4uY2xvY2t3aXNlfX0pO3JldHVybiBlJiYoby5zaGFwZS5lbmRBbmdsZT1uLnN0YXJ0QW5nbGUsbGwobyx7c2hhcGU6e2VuZEFuZ2xlOm4uZW5kQW5nbGV9fSxpKSksb31mdW5jdGlvbiB5bSh0LGUsaSl7cmV0dXJuIHQ/InBvbGFyIj09PXQudHlwZT92bSh0LGUsaSk6ImNhcnRlc2lhbjJkIj09PXQudHlwZT9tbSh0LGUsaSk6bnVsbDpudWxsfWZ1bmN0aW9uIHhtKHQsZSl7aWYodC5sZW5ndGg9PT1lLmxlbmd0aCl7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBuPXRbaV0sbz1lW2ldO2lmKG5bMF0hPT1vWzBdfHxuWzFdIT09b1sxXSlyZXR1cm59cmV0dXJuITB9fWZ1bmN0aW9uIF9tKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdD90OnQ/LjU6MH1mdW5jdGlvbiB3bSh0LGUsaSl7Zm9yKHZhciBuPWUuZ2V0QmFzZUF4aXMoKSxvPSJ4Ij09PW4uZGltfHwicmFkaXVzIj09PW4uZGltPzA6MSxhPVtdLHI9MDtyPHQubGVuZ3RoLTE7cisrKXt2YXIgcz10W3IrMV0sbD10W3JdO2EucHVzaChsKTt2YXIgdT1bXTtzd2l0Y2goaSl7Y2FzZSJlbmQiOnVbb109c1tvXSx1WzEtb109bFsxLW9dLGEucHVzaCh1KTticmVhaztjYXNlIm1pZGRsZSI6dmFyIGg9KGxbb10rc1tvXSkvMixjPVtdO3Vbb109Y1tvXT1oLHVbMS1vXT1sWzEtb10sY1sxLW9dPXNbMS1vXSxhLnB1c2godSksYS5wdXNoKGMpO2JyZWFrO2RlZmF1bHQ6dVtvXT1sW29dLHVbMS1vXT1zWzEtb10sYS5wdXNoKHUpfX1yZXR1cm4gdFtyXSYmYS5wdXNoKHRbcl0pLGF9ZnVuY3Rpb24gYm0odCxlLGkpe3ZhciBuPXQuZ2V0KCJzaG93QWxsU3ltYm9sIiksbz0iYXV0byI9PT1uO2lmKCFufHxvKXt2YXIgYT1pLmdldEF4ZXNCeVNjYWxlKCJvcmRpbmFsIilbMF07aWYoYSYmKCFvfHwhZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldEV4dGVudCgpLG49TWF0aC5hYnMoaVsxXS1pWzBdKS90LnNjYWxlLmNvdW50KCk7aXNOYU4obikmJihuPTApO2Zvcih2YXIgbz1lLmNvdW50KCksYT1NYXRoLm1heCgxLE1hdGgucm91bmQoby81KSkscj0wO3I8bztyKz1hKWlmKDEuNSpGZy5nZXRTeW1ib2xTaXplKGUscilbdC5pc0hvcml6b250YWwoKT8xOjBdPm4pcmV0dXJuITE7cmV0dXJuITB9KGEsZSkpKXt2YXIgcj1lLm1hcERpbWVuc2lvbihhLmRpbSkscz17fTtyZXR1cm4gRShhLmdldFZpZXdMYWJlbHMoKSxmdW5jdGlvbih0KXtzW3QudGlja1ZhbHVlXT0xfSksZnVuY3Rpb24odCl7cmV0dXJuIXMuaGFzT3duUHJvcGVydHkoZS5nZXQocix0KSl9fX19ZnVuY3Rpb24gU20odCxlLGkpe2lmKCJjYXJ0ZXNpYW4yZCIhPT10LnR5cGUpcmV0dXJuIHZtKHQsZSxpKTt2YXIgbj10LmdldEJhc2VBeGlzKCkuaXNIb3Jpem9udGFsKCksbz1tbSh0LGUsaSk7aWYoIWkuZ2V0KCJjbGlwIiwhMCkpe3ZhciBhPW8uc2hhcGUscj1NYXRoLm1heChhLndpZHRoLGEuaGVpZ2h0KTtuPyhhLnktPXIsYS5oZWlnaHQrPTIqcik6KGEueC09cixhLndpZHRoKz0yKnIpfXJldHVybiBvfWdjLmV4dGVuZCh7dHlwZToibGluZSIsaW5pdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBJaSxlPW5ldyAkZzt0aGlzLmdyb3VwLmFkZChlLmdyb3VwKSx0aGlzLl9zeW1ib2xEcmF3PWUsdGhpcy5fbGluZUdyb3VwPXR9LHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5jb29yZGluYXRlU3lzdGVtLG89dGhpcy5ncm91cCxhPXQuZ2V0RGF0YSgpLHI9dC5nZXRNb2RlbCgibGluZVN0eWxlIikscz10LmdldE1vZGVsKCJhcmVhU3R5bGUiKSxsPWEubWFwQXJyYXkoYS5nZXRJdGVtTGF5b3V0KSx1PSJwb2xhciI9PT1uLnR5cGUsaD10aGlzLl9jb29yZFN5cyxjPXRoaXMuX3N5bWJvbERyYXcsZD10aGlzLl9wb2x5bGluZSxmPXRoaXMuX3BvbHlnb24scD10aGlzLl9saW5lR3JvdXAsZz10LmdldCgiYW5pbWF0aW9uIiksbT0hcy5pc0VtcHR5KCksdj1zLmdldCgib3JpZ2luIikseT1mdW5jdGlvbih0LGUsaSl7aWYoIWkudmFsdWVEaW0pcmV0dXJuW107Zm9yKHZhciBuPVtdLG89MCxhPWUuY291bnQoKTtvPGE7bysrKW4ucHVzaChubShpLHQsZSxvKSk7cmV0dXJuIG59KG4sYSxpbShuLGEsdikpLHg9dC5nZXQoInNob3dTeW1ib2wiKSxfPXgmJiF1JiZibSh0LGEsbiksdz10aGlzLl9kYXRhO3cmJncuZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCxlKXt0Ll9fdGVtcCYmKG8ucmVtb3ZlKHQpLHcuc2V0SXRlbUdyYXBoaWNFbChlLG51bGwpKX0pLHh8fGMucmVtb3ZlKCksby5hZGQocCk7dmFyIGIsUz0hdSYmdC5nZXQoInN0ZXAiKTtuJiZuLmdldEFyZWEmJnQuZ2V0KCJjbGlwIiwhMCkmJihudWxsIT0oYj1uLmdldEFyZWEoKSkud2lkdGg/KGIueC09LjEsYi55LT0uMSxiLndpZHRoKz0uMixiLmhlaWdodCs9LjIpOmIucjAmJihiLnIwLT0uNSxiLnIxKz0uNSkpLHRoaXMuX2NsaXBTaGFwZUZvclN5bWJvbD1iLGQmJmgudHlwZT09PW4udHlwZSYmUz09PXRoaXMuX3N0ZXA/KG0mJiFmP2Y9dGhpcy5fbmV3UG9seWdvbihsLHksbixnKTpmJiYhbSYmKHAucmVtb3ZlKGYpLGY9dGhpcy5fcG9seWdvbj1udWxsKSxwLnNldENsaXBQYXRoKFNtKG4sITEsdCkpLHgmJmMudXBkYXRlRGF0YShhLHtpc0lnbm9yZTpfLGNsaXBTaGFwZTpifSksYS5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbih0KXt0LnN0b3BBbmltYXRpb24oITApfSkseG0odGhpcy5fc3RhY2tlZE9uUG9pbnRzLHkpJiZ4bSh0aGlzLl9wb2ludHMsbCl8fChnP3RoaXMuX3VwZGF0ZUFuaW1hdGlvbihhLHksbixpLFMsdik6KFMmJihsPXdtKGwsbixTKSx5PXdtKHksbixTKSksZC5zZXRTaGFwZSh7cG9pbnRzOmx9KSxmJiZmLnNldFNoYXBlKHtwb2ludHM6bCxzdGFja2VkT25Qb2ludHM6eX0pKSkpOih4JiZjLnVwZGF0ZURhdGEoYSx7aXNJZ25vcmU6XyxjbGlwU2hhcGU6Yn0pLFMmJihsPXdtKGwsbixTKSx5PXdtKHksbixTKSksZD10aGlzLl9uZXdQb2x5bGluZShsLG4sZyksbSYmKGY9dGhpcy5fbmV3UG9seWdvbihsLHksbixnKSkscC5zZXRDbGlwUGF0aChTbShuLCEwLHQpKSk7dmFyIE09ZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldFZpc3VhbCgidmlzdWFsTWV0YSIpO2lmKGkmJmkubGVuZ3RoJiZ0LmNvdW50KCkmJiJjYXJ0ZXNpYW4yZCI9PT1lLnR5cGUpe2Zvcih2YXIgbixvLGE9aS5sZW5ndGgtMTswPD1hO2EtLSl7dmFyIHI9aVthXS5kaW1lbnNpb24scz10LmRpbWVuc2lvbnNbcl0sbD10LmdldERpbWVuc2lvbkluZm8ocyk7aWYoIngiPT09KG49bCYmbC5jb29yZERpbSl8fCJ5Ij09PW4pe289aVthXTticmVha319aWYobyl7dmFyIHU9ZS5nZXRBeGlzKG4pLGg9TihvLnN0b3BzLGZ1bmN0aW9uKHQpe3JldHVybntjb29yZDp1LnRvR2xvYmFsQ29vcmQodS5kYXRhVG9Db29yZCh0LnZhbHVlKSksY29sb3I6dC5jb2xvcn19KSxjPWgubGVuZ3RoLGQ9by5vdXRlckNvbG9ycy5zbGljZSgpO2MmJmhbMF0uY29vcmQ+aFtjLTFdLmNvb3JkJiYoaC5yZXZlcnNlKCksZC5yZXZlcnNlKCkpO3ZhciBmPWhbMF0uY29vcmQtMTAscD1oW2MtMV0uY29vcmQrMTAsZz1wLWY7aWYoZzwuMDAxKXJldHVybiJ0cmFuc3BhcmVudCI7RShoLGZ1bmN0aW9uKHQpe3Qub2Zmc2V0PSh0LmNvb3JkLWYpL2d9KSxoLnB1c2goe29mZnNldDpjP2hbYy0xXS5vZmZzZXQ6LjUsY29sb3I6ZFsxXXx8InRyYW5zcGFyZW50In0pLGgudW5zaGlmdCh7b2Zmc2V0OmM/aFswXS5vZmZzZXQ6LjUsY29sb3I6ZFswXXx8InRyYW5zcGFyZW50In0pO3ZhciBtPW5ldyBjcygwLDAsMCwwLGgsITApO3JldHVybiBtW25dPWYsbVtuKyIyIl09cCxtfX19KGEsbil8fGEuZ2V0VmlzdWFsKCJjb2xvciIpO2QudXNlU3R5bGUoQyhyLmdldExpbmVTdHlsZSgpLHtmaWxsOiJub25lIixzdHJva2U6TSxsaW5lSm9pbjoiYmV2ZWwifSkpO3ZhciBJPXQuZ2V0KCJzbW9vdGgiKTtpZihJPV9tKHQuZ2V0KCJzbW9vdGgiKSksZC5zZXRTaGFwZSh7c21vb3RoOkksc21vb3RoTW9ub3RvbmU6dC5nZXQoInNtb290aE1vbm90b25lIiksY29ubmVjdE51bGxzOnQuZ2V0KCJjb25uZWN0TnVsbHMiKX0pLGYpe3ZhciBUPWEuZ2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja2VkT25TZXJpZXMiKSxBPTA7Zi51c2VTdHlsZShDKHMuZ2V0QXJlYVN0eWxlKCkse2ZpbGw6TSxvcGFjaXR5Oi43LGxpbmVKb2luOiJiZXZlbCJ9KSksVCYmKEE9X20oVC5nZXQoInNtb290aCIpKSksZi5zZXRTaGFwZSh7c21vb3RoOkksc3RhY2tlZE9uU21vb3RoOkEsc21vb3RoTW9ub3RvbmU6dC5nZXQoInNtb290aE1vbm90b25lIiksY29ubmVjdE51bGxzOnQuZ2V0KCJjb25uZWN0TnVsbHMiKX0pfXRoaXMuX2RhdGE9YSx0aGlzLl9jb29yZFN5cz1uLHRoaXMuX3N0YWNrZWRPblBvaW50cz15LHRoaXMuX3BvaW50cz1sLHRoaXMuX3N0ZXA9Uyx0aGlzLl92YWx1ZU9yaWdpbj12fSxkaXNwb3NlOmZ1bmN0aW9uKCl7fSxoaWdobGlnaHQ6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dC5nZXREYXRhKCksYT1IbyhvLG4pO2lmKCEoYSBpbnN0YW5jZW9mIEFycmF5KSYmbnVsbCE9YSYmMDw9YSl7dmFyIHI9by5nZXRJdGVtR3JhcGhpY0VsKGEpO2lmKCFyKXt2YXIgcz1vLmdldEl0ZW1MYXlvdXQoYSk7aWYoIXMpcmV0dXJuO2lmKHRoaXMuX2NsaXBTaGFwZUZvclN5bWJvbCYmIXRoaXMuX2NsaXBTaGFwZUZvclN5bWJvbC5jb250YWluKHNbMF0sc1sxXSkpcmV0dXJuOyhyPW5ldyBGZyhvLGEpKS5wb3NpdGlvbj1zLHIuc2V0Wih0LmdldCgiemxldmVsIiksdC5nZXQoInoiKSksci5pZ25vcmU9aXNOYU4oc1swXSl8fGlzTmFOKHNbMV0pLHIuX190ZW1wPSEwLG8uc2V0SXRlbUdyYXBoaWNFbChhLHIpLHIuc3RvcFN5bWJvbEFuaW1hdGlvbighMCksdGhpcy5ncm91cC5hZGQocil9ci5oaWdobGlnaHQoKX1lbHNlIGdjLnByb3RvdHlwZS5oaWdobGlnaHQuY2FsbCh0aGlzLHQsZSxpLG4pfSxkb3ducGxheTpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10LmdldERhdGEoKSxhPUhvKG8sbik7aWYobnVsbCE9YSYmMDw9YSl7dmFyIHI9by5nZXRJdGVtR3JhcGhpY0VsKGEpO3ImJihyLl9fdGVtcD8oby5zZXRJdGVtR3JhcGhpY0VsKGEsbnVsbCksdGhpcy5ncm91cC5yZW1vdmUocikpOnIuZG93bnBsYXkoKSl9ZWxzZSBnYy5wcm90b3R5cGUuZG93bnBsYXkuY2FsbCh0aGlzLHQsZSxpLG4pfSxfbmV3UG9seWxpbmU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcG9seWxpbmU7cmV0dXJuIGUmJnRoaXMuX2xpbmVHcm91cC5yZW1vdmUoZSksZT1uZXcgcG0oe3NoYXBlOntwb2ludHM6dH0sc2lsZW50OiEwLHoyOjEwfSksdGhpcy5fbGluZUdyb3VwLmFkZChlKSx0aGlzLl9wb2x5bGluZT1lfSxfbmV3UG9seWdvbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3BvbHlnb247cmV0dXJuIGkmJnRoaXMuX2xpbmVHcm91cC5yZW1vdmUoaSksaT1uZXcgZ20oe3NoYXBlOntwb2ludHM6dCxzdGFja2VkT25Qb2ludHM6ZX0sc2lsZW50OiEwfSksdGhpcy5fbGluZUdyb3VwLmFkZChpKSx0aGlzLl9wb2x5Z29uPWl9LF91cGRhdGVBbmltYXRpb246ZnVuY3Rpb24odCxlLGksbixvLGEpe3ZhciByPXRoaXMuX3BvbHlsaW5lLHM9dGhpcy5fcG9seWdvbixsPXQuaG9zdE1vZGVsLHU9ZnVuY3Rpb24odCxlLGksbixvLGEscixzKXtmb3IodmFyIGw9ZnVuY3Rpb24odCxlKXt2YXIgaT1bXTtyZXR1cm4gZS5kaWZmKHQpLmFkZChmdW5jdGlvbih0KXtpLnB1c2goe2NtZDoiKyIsaWR4OnR9KX0pLnVwZGF0ZShmdW5jdGlvbih0LGUpe2kucHVzaCh7Y21kOiI9IixpZHg6ZSxpZHgxOnR9KX0pLnJlbW92ZShmdW5jdGlvbih0KXtpLnB1c2goe2NtZDoiLSIsaWR4OnR9KX0pLmV4ZWN1dGUoKSxpfSh0LGUpLHU9W10saD1bXSxjPVtdLGQ9W10sZj1bXSxwPVtdLGc9W10sbT1pbShvLGUsciksdj1pbShhLHQscykseT0wO3k8bC5sZW5ndGg7eSsrKXt2YXIgeD1sW3ldLF89ITA7c3dpdGNoKHguY21kKXtjYXNlIj0iOnZhciB3PXQuZ2V0SXRlbUxheW91dCh4LmlkeCksYj1lLmdldEl0ZW1MYXlvdXQoeC5pZHgxKTsoaXNOYU4od1swXSl8fGlzTmFOKHdbMV0pKSYmKHc9Yi5zbGljZSgpKSx1LnB1c2godyksaC5wdXNoKGIpLGMucHVzaChpW3guaWR4XSksZC5wdXNoKG5beC5pZHgxXSksZy5wdXNoKGUuZ2V0UmF3SW5kZXgoeC5pZHgxKSk7YnJlYWs7Y2FzZSIrIjp2YXIgUz14LmlkeDt1LnB1c2goby5kYXRhVG9Qb2ludChbZS5nZXQobS5kYXRhRGltc0ZvclBvaW50WzBdLFMpLGUuZ2V0KG0uZGF0YURpbXNGb3JQb2ludFsxXSxTKV0pKSxoLnB1c2goZS5nZXRJdGVtTGF5b3V0KFMpLnNsaWNlKCkpLGMucHVzaChubShtLG8sZSxTKSksZC5wdXNoKG5bU10pLGcucHVzaChlLmdldFJhd0luZGV4KFMpKTticmVhaztjYXNlIi0iOlM9eC5pZHg7dmFyIE09dC5nZXRSYXdJbmRleChTKTtNIT09Uz8odS5wdXNoKHQuZ2V0SXRlbUxheW91dChTKSksaC5wdXNoKGEuZGF0YVRvUG9pbnQoW3QuZ2V0KHYuZGF0YURpbXNGb3JQb2ludFswXSxTKSx0LmdldCh2LmRhdGFEaW1zRm9yUG9pbnRbMV0sUyldKSksYy5wdXNoKGlbU10pLGQucHVzaChubSh2LGEsdCxTKSksZy5wdXNoKE0pKTpfPSExfV8mJihmLnB1c2goeCkscC5wdXNoKHAubGVuZ3RoKSl9cC5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGdbdF0tZ1tlXX0pO3ZhciBJPVtdLFQ9W10sQT1bXSxEPVtdLEM9W107Zm9yKHk9MDt5PHAubGVuZ3RoO3krKyl7Uz1wW3ldO0lbeV09dVtTXSxUW3ldPWhbU10sQVt5XT1jW1NdLERbeV09ZFtTXSxDW3ldPWZbU119cmV0dXJue2N1cnJlbnQ6SSxuZXh0OlQsc3RhY2tlZE9uQ3VycmVudDpBLHN0YWNrZWRPbk5leHQ6RCxzdGF0dXM6Q319KHRoaXMuX2RhdGEsdCx0aGlzLl9zdGFja2VkT25Qb2ludHMsZSx0aGlzLl9jb29yZFN5cyxpLHRoaXMuX3ZhbHVlT3JpZ2luLGEpLGg9dS5jdXJyZW50LGM9dS5zdGFja2VkT25DdXJyZW50LGQ9dS5uZXh0LGY9dS5zdGFja2VkT25OZXh0O28mJihoPXdtKHUuY3VycmVudCxpLG8pLGM9d20odS5zdGFja2VkT25DdXJyZW50LGksbyksZD13bSh1Lm5leHQsaSxvKSxmPXdtKHUuc3RhY2tlZE9uTmV4dCxpLG8pKSxyLnNoYXBlLl9fcG9pbnRzPXUuY3VycmVudCxyLnNoYXBlLnBvaW50cz1oLHNsKHIse3NoYXBlOntwb2ludHM6ZH19LGwpLHMmJihzLnNldFNoYXBlKHtwb2ludHM6aCxzdGFja2VkT25Qb2ludHM6Y30pLHNsKHMse3NoYXBlOntwb2ludHM6ZCxzdGFja2VkT25Qb2ludHM6Zn19LGwpKTtmb3IodmFyIHA9W10sZz11LnN0YXR1cyxtPTA7bTxnLmxlbmd0aDttKyspe2lmKCI9Ij09PWdbbV0uY21kKXt2YXIgdj10LmdldEl0ZW1HcmFwaGljRWwoZ1ttXS5pZHgxKTt2JiZwLnB1c2goe2VsOnYscHRJZHg6bX0pfX1yLmFuaW1hdG9ycyYmci5hbmltYXRvcnMubGVuZ3RoJiZyLmFuaW1hdG9yc1swXS5kdXJpbmcoZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHAubGVuZ3RoO3QrKyl7cFt0XS5lbC5hdHRyKCJwb3NpdGlvbiIsci5zaGFwZS5fX3BvaW50c1twW3RdLnB0SWR4XSl9fSl9LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLmdyb3VwLG49dGhpcy5fZGF0YTt0aGlzLl9saW5lR3JvdXAucmVtb3ZlQWxsKCksdGhpcy5fc3ltYm9sRHJhdy5yZW1vdmUoITApLG4mJm4uZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCxlKXt0Ll9fdGVtcCYmKGkucmVtb3ZlKHQpLG4uc2V0SXRlbUdyYXBoaWNFbChlLG51bGwpKX0pLHRoaXMuX3BvbHlsaW5lPXRoaXMuX3BvbHlnb249dGhpcy5fY29vcmRTeXM9dGhpcy5fcG9pbnRzPXRoaXMuX3N0YWNrZWRPblBvaW50cz10aGlzLl9kYXRhPW51bGx9fSk7ZnVuY3Rpb24gTW0odCxyLHMpe3JldHVybntzZXJpZXNUeXBlOnQscGVyZm9ybVJhd1NlcmllczohMCxyZXNldDpmdW5jdGlvbihsLHQsZSl7dmFyIGk9bC5nZXREYXRhKCksdT1sLmdldCgic3ltYm9sIiksaD1sLmdldCgic3ltYm9sU2l6ZSIpLG49bC5nZXQoInN5bWJvbEtlZXBBc3BlY3QiKSxjPU8odSksZD1PKGgpLGY9Y3x8ZCxvPSFjJiZ1P3U6cixhPWQ/bnVsbDpoO2lmKGkuc2V0VmlzdWFsKHtsZWdlbmRTeW1ib2w6c3x8byxzeW1ib2w6byxzeW1ib2xTaXplOmEsc3ltYm9sS2VlcEFzcGVjdDpufSksIXQuaXNTZXJpZXNGaWx0ZXJlZChsKSlyZXR1cm57ZGF0YUVhY2g6aS5oYXNJdGVtT3B0aW9ufHxmP2Z1bmN0aW9uKHQsZSl7aWYoZil7dmFyIGk9bC5nZXRSYXdWYWx1ZShlKSxuPWwuZ2V0RGF0YVBhcmFtcyhlKTtjJiZ0LnNldEl0ZW1WaXN1YWwoZSwic3ltYm9sIix1KGksbikpLGQmJnQuc2V0SXRlbVZpc3VhbChlLCJzeW1ib2xTaXplIixoKGksbikpfWlmKHQuaGFzSXRlbU9wdGlvbil7dmFyIG89dC5nZXRJdGVtTW9kZWwoZSksYT1vLmdldFNoYWxsb3coInN5bWJvbCIsITApLHI9by5nZXRTaGFsbG93KCJzeW1ib2xTaXplIiwhMCkscz1vLmdldFNoYWxsb3coInN5bWJvbEtlZXBBc3BlY3QiLCEwKTtudWxsIT1hJiZ0LnNldEl0ZW1WaXN1YWwoZSwic3ltYm9sIixhKSxudWxsIT1yJiZ0LnNldEl0ZW1WaXN1YWwoZSwic3ltYm9sU2l6ZSIsciksbnVsbCE9cyYmdC5zZXRJdGVtVmlzdWFsKGUsInN5bWJvbEtlZXBBc3BlY3QiLHMpfX06bnVsbH19fX1mdW5jdGlvbiBJbSh0KXtyZXR1cm57c2VyaWVzVHlwZTp0LHBsYW46ZGMoKSxyZXNldDpmdW5jdGlvbih0KXt2YXIgZT10LmdldERhdGEoKSxjPXQuY29vcmRpbmF0ZVN5c3RlbSxkPXQucGlwZWxpbmVDb250ZXh0LmxhcmdlO2lmKGMpe3ZhciBmPU4oYy5kaW1lbnNpb25zLGZ1bmN0aW9uKHQpe3JldHVybiBlLm1hcERpbWVuc2lvbih0KX0pLnNsaWNlKDAsMikscD1mLmxlbmd0aCxpPWUuZ2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja1Jlc3VsdERpbWVuc2lvbiIpO3JldHVybiBscChlLGZbMF0pJiYoZlswXT1pKSxscChlLGZbMV0pJiYoZlsxXT1pKSxwJiZ7cHJvZ3Jlc3M6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dC5lbmQtdC5zdGFydCxuPWQmJm5ldyBGbG9hdDMyQXJyYXkoaSpwKSxvPXQuc3RhcnQsYT0wLHI9W10scz1bXTtvPHQuZW5kO28rKyl7dmFyIGw7aWYoMT09PXApe3ZhciB1PWUuZ2V0KGZbMF0sbyk7bD0haXNOYU4odSkmJmMuZGF0YVRvUG9pbnQodSxudWxsLHMpfWVsc2V7dT1yWzBdPWUuZ2V0KGZbMF0sbyk7dmFyIGg9clsxXT1lLmdldChmWzFdLG8pO2w9IWlzTmFOKHUpJiYhaXNOYU4oaCkmJmMuZGF0YVRvUG9pbnQocixudWxsLHMpfWQ/KG5bYSsrXT1sP2xbMF06TmFOLG5bYSsrXT1sP2xbMV06TmFOKTplLnNldEl0ZW1MYXlvdXQobyxsJiZsLnNsaWNlKCl8fFtOYU4sTmFOXSl9ZCYmZS5zZXRMYXlvdXQoInN5bWJvbFBvaW50cyIsbil9fX19fX1mdW5jdGlvbiBUbSh0LGUpe3JldHVybiBNYXRoLnJvdW5kKHQubGVuZ3RoLzIpfXZhciBBbT17YXZlcmFnZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPTAsbj0wO248dC5sZW5ndGg7bisrKWlzTmFOKHRbbl0pfHwoZSs9dFtuXSxpKyspO3JldHVybiAwPT09aT9OYU46ZS9pfSxzdW06ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT0wO2k8dC5sZW5ndGg7aSsrKWUrPXRbaV18fDA7cmV0dXJuIGV9LG1heDpmdW5jdGlvbih0KXtmb3IodmFyIGU9LTEvMCxpPTA7aTx0Lmxlbmd0aDtpKyspdFtpXT5lJiYoZT10W2ldKTtyZXR1cm4gaXNGaW5pdGUoZSk/ZTpOYU59LG1pbjpmdW5jdGlvbih0KXtmb3IodmFyIGU9MS8wLGk9MDtpPHQubGVuZ3RoO2krKyl0W2ldPGUmJihlPXRbaV0pO3JldHVybiBpc0Zpbml0ZShlKT9lOk5hTn0sbmVhcmVzdDpmdW5jdGlvbih0KXtyZXR1cm4gdFswXX19O2Z1bmN0aW9uIERtKHQpe3JldHVybiB0aGlzLl9heGVzW3RdfWZ1bmN0aW9uIENtKHQpe3RoaXMuX2F4ZXM9e30sdGhpcy5fZGltTGlzdD1bXSx0aGlzLm5hbWU9dHx8IiJ9ZnVuY3Rpb24gTG0odCl7Q20uY2FsbCh0aGlzLHQpfUNtLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Q20sdHlwZToiY2FydGVzaWFuIixnZXRBeGlzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9heGVzW3RdfSxnZXRBeGVzOmZ1bmN0aW9uKCl7cmV0dXJuIE4odGhpcy5fZGltTGlzdCxEbSx0aGlzKX0sZ2V0QXhlc0J5U2NhbGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLE0odGhpcy5nZXRBeGVzKCksZnVuY3Rpb24odCl7cmV0dXJuIHQuc2NhbGUudHlwZT09PWV9KX0sYWRkQXhpczpmdW5jdGlvbih0KXt2YXIgZT10LmRpbTt0aGlzLl9heGVzW2VdPXQsdGhpcy5fZGltTGlzdC5wdXNoKGUpfSxkYXRhVG9Db29yZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZGF0YUNvb3JkQ29udmVydCh0LCJkYXRhVG9Db29yZCIpfSxjb29yZFRvRGF0YTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZGF0YUNvb3JkQ29udmVydCh0LCJjb29yZFRvRGF0YSIpfSxfZGF0YUNvb3JkQ29udmVydDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLl9kaW1MaXN0LG49dCBpbnN0YW5jZW9mIEFycmF5P1tdOnt9LG89MDtvPGkubGVuZ3RoO28rKyl7dmFyIGE9aVtvXSxyPXRoaXMuX2F4ZXNbYV07blthXT1yW2VdKHRbYV0pfXJldHVybiBufX0sTG0ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpMbSx0eXBlOiJjYXJ0ZXNpYW4yZCIsZGltZW5zaW9uczpbIngiLCJ5Il0sZ2V0QmFzZUF4aXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBeGVzQnlTY2FsZSgib3JkaW5hbCIpWzBdfHx0aGlzLmdldEF4ZXNCeVNjYWxlKCJ0aW1lIilbMF18fHRoaXMuZ2V0QXhpcygieCIpfSxjb250YWluUG9pbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRBeGlzKCJ4IiksaT10aGlzLmdldEF4aXMoInkiKTtyZXR1cm4gZS5jb250YWluKGUudG9Mb2NhbENvb3JkKHRbMF0pKSYmaS5jb250YWluKGkudG9Mb2NhbENvb3JkKHRbMV0pKX0sY29udGFpbkRhdGE6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0QXhpcygieCIpLmNvbnRhaW5EYXRhKHRbMF0pJiZ0aGlzLmdldEF4aXMoInkiKS5jb250YWluRGF0YSh0WzFdKX0sZGF0YVRvUG9pbnQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuZ2V0QXhpcygieCIpLG89dGhpcy5nZXRBeGlzKCJ5Iik7cmV0dXJuKGk9aXx8W10pWzBdPW4udG9HbG9iYWxDb29yZChuLmRhdGFUb0Nvb3JkKHRbMF0pKSxpWzFdPW8udG9HbG9iYWxDb29yZChvLmRhdGFUb0Nvb3JkKHRbMV0pKSxpfSxjbGFtcERhdGE6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldEF4aXMoIngiKS5zY2FsZSxuPXRoaXMuZ2V0QXhpcygieSIpLnNjYWxlLG89aS5nZXRFeHRlbnQoKSxhPW4uZ2V0RXh0ZW50KCkscj1pLnBhcnNlKHRbMF0pLHM9bi5wYXJzZSh0WzFdKTtyZXR1cm4oZT1lfHxbXSlbMF09TWF0aC5taW4oTWF0aC5tYXgoTWF0aC5taW4ob1swXSxvWzFdKSxyKSxNYXRoLm1heChvWzBdLG9bMV0pKSxlWzFdPU1hdGgubWluKE1hdGgubWF4KE1hdGgubWluKGFbMF0sYVsxXSkscyksTWF0aC5tYXgoYVswXSxhWzFdKSksZX0scG9pbnRUb0RhdGE6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldEF4aXMoIngiKSxuPXRoaXMuZ2V0QXhpcygieSIpO3JldHVybihlPWV8fFtdKVswXT1pLmNvb3JkVG9EYXRhKGkudG9Mb2NhbENvb3JkKHRbMF0pKSxlWzFdPW4uY29vcmRUb0RhdGEobi50b0xvY2FsQ29vcmQodFsxXSkpLGV9LGdldE90aGVyQXhpczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRBeGlzKCJ4Ij09PXQuZGltPyJ5IjoieCIpfSxnZXRBcmVhOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRBeGlzKCJ4IikuZ2V0R2xvYmFsRXh0ZW50KCksZT10aGlzLmdldEF4aXMoInkiKS5nZXRHbG9iYWxFeHRlbnQoKSxpPU1hdGgubWluKHRbMF0sdFsxXSksbj1NYXRoLm1pbihlWzBdLGVbMV0pO3JldHVybiBuZXcgTWkoaSxuLE1hdGgubWF4KHRbMF0sdFsxXSktaSxNYXRoLm1heChlWzBdLGVbMV0pLW4pfX0sdyhMbSxDbSk7ZnVuY3Rpb24ga20odCxlLGksbixvKXtFZy5jYWxsKHRoaXMsdCxlLGkpLHRoaXMudHlwZT1ufHwidmFsdWUiLHRoaXMucG9zaXRpb249b3x8ImJvdHRvbSJ9a20ucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjprbSxpbmRleDowLGdldEF4ZXNPblplcm9PZjpudWxsLG1vZGVsOm51bGwsaXNIb3Jpem9udGFsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb3NpdGlvbjtyZXR1cm4idG9wIj09PXR8fCJib3R0b20iPT09dH0sZ2V0R2xvYmFsRXh0ZW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RXh0ZW50KCk7cmV0dXJuIGVbMF09dGhpcy50b0dsb2JhbENvb3JkKGVbMF0pLGVbMV09dGhpcy50b0dsb2JhbENvb3JkKGVbMV0pLHQmJmVbMF0+ZVsxXSYmZS5yZXZlcnNlKCksZX0sZ2V0T3RoZXJBeGlzOmZ1bmN0aW9uKCl7dGhpcy5ncmlkLmdldE90aGVyQXhpcygpfSxwb2ludFRvRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvb3JkVG9EYXRhKHRoaXMudG9Mb2NhbENvb3JkKHRbIngiPT09dGhpcy5kaW0/MDoxXSksZSl9LHRvTG9jYWxDb29yZDpudWxsLHRvR2xvYmFsQ29vcmQ6bnVsbH0sdyhrbSxFZyk7dmFyIFBtPXtzaG93OiEwLHpsZXZlbDowLHo6MCxpbnZlcnNlOiExLG5hbWU6IiIsbmFtZUxvY2F0aW9uOiJlbmQiLG5hbWVSb3RhdGU6bnVsbCxuYW1lVHJ1bmNhdGU6e21heFdpZHRoOm51bGwsZWxsaXBzaXM6Ii4uLiIscGxhY2Vob2xkZXI6Ii4ifSxuYW1lVGV4dFN0eWxlOnt9LG5hbWVHYXA6MTUsc2lsZW50OiExLHRyaWdnZXJFdmVudDohMSx0b29sdGlwOntzaG93OiExfSxheGlzUG9pbnRlcjp7fSxheGlzTGluZTp7c2hvdzohMCxvblplcm86ITAsb25aZXJvQXhpc0luZGV4Om51bGwsbGluZVN0eWxlOntjb2xvcjoiIzMzMyIsd2lkdGg6MSx0eXBlOiJzb2xpZCJ9LHN5bWJvbDpbIm5vbmUiLCJub25lIl0sc3ltYm9sU2l6ZTpbMTAsMTVdfSxheGlzVGljazp7c2hvdzohMCxpbnNpZGU6ITEsbGVuZ3RoOjUsbGluZVN0eWxlOnt3aWR0aDoxfX0sYXhpc0xhYmVsOntzaG93OiEwLGluc2lkZTohMSxyb3RhdGU6MCxzaG93TWluTGFiZWw6bnVsbCxzaG93TWF4TGFiZWw6bnVsbCxtYXJnaW46OCxmb250U2l6ZToxMn0sc3BsaXRMaW5lOntzaG93OiEwLGxpbmVTdHlsZTp7Y29sb3I6WyIjY2NjIl0sd2lkdGg6MSx0eXBlOiJzb2xpZCJ9fSxzcGxpdEFyZWE6e3Nob3c6ITEsYXJlYVN0eWxlOntjb2xvcjpbInJnYmEoMjUwLDI1MCwyNTAsMC4zKSIsInJnYmEoMjAwLDIwMCwyMDAsMC4zKSJdfX19LE5tPXt9O05tLmNhdGVnb3J5QXhpcz1tKHtib3VuZGFyeUdhcDohMCxkZWR1cGxpY2F0aW9uOm51bGwsc3BsaXRMaW5lOntzaG93OiExfSxheGlzVGljazp7YWxpZ25XaXRoTGFiZWw6ITEsaW50ZXJ2YWw6ImF1dG8ifSxheGlzTGFiZWw6e2ludGVydmFsOiJhdXRvIn19LFBtKSxObS52YWx1ZUF4aXM9bSh7Ym91bmRhcnlHYXA6WzAsMF0sc3BsaXROdW1iZXI6NSxtaW5vclRpY2s6e3Nob3c6ITEsc3BsaXROdW1iZXI6NSxsZW5ndGg6MyxsaW5lU3R5bGU6e319LG1pbm9yU3BsaXRMaW5lOntzaG93OiExLGxpbmVTdHlsZTp7Y29sb3I6IiNlZWUiLHdpZHRoOjF9fX0sUG0pLE5tLnRpbWVBeGlzPUMoe3NjYWxlOiEwLG1pbjoiZGF0YU1pbiIsbWF4OiJkYXRhTWF4In0sTm0udmFsdWVBeGlzKSxObS5sb2dBeGlzPUMoe3NjYWxlOiEwLGxvZ0Jhc2U6MTB9LE5tLnZhbHVlQXhpcyk7ZnVuY3Rpb24gT20oYSx0LHIsZSl7RShFbSxmdW5jdGlvbihvKXt0LmV4dGVuZCh7dHlwZTphKyJBeGlzLiIrbyxtZXJnZURlZmF1bHRBbmRUaGVtZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubGF5b3V0TW9kZSxuPWk/X3UodCk6e307bSh0LGUuZ2V0VGhlbWUoKS5nZXQobysiQXhpcyIpKSxtKHQsdGhpcy5nZXREZWZhdWx0T3B0aW9uKCkpLHQudHlwZT1yKGEsdCksaSYmeHUodCxuLGkpfSxvcHRpb25VcGRhdGVkOmZ1bmN0aW9uKCl7ImNhdGVnb3J5Ij09PXRoaXMub3B0aW9uLnR5cGUmJih0aGlzLl9fb3JkaW5hbE1ldGE9ZHAuY3JlYXRlQnlBeGlzTW9kZWwodGhpcykpfSxnZXRDYXRlZ29yaWVzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9uO2lmKCJjYXRlZ29yeSI9PT1lLnR5cGUpcmV0dXJuIHQ/ZS5kYXRhOnRoaXMuX19vcmRpbmFsTWV0YS5jYXRlZ29yaWVzfSxnZXRPcmRpbmFsTWV0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9fb3JkaW5hbE1ldGF9LGRlZmF1bHRPcHRpb246cChbe30sTm1bbysiQXhpcyJdLGVdLCEwKX0pfSksVHUucmVnaXN0ZXJTdWJUeXBlRGVmYXVsdGVyKGErIkF4aXMiLFQocixhKSl9dmFyIEVtPVsidmFsdWUiLCJjYXRlZ29yeSIsInRpbWUiLCJsb2ciXSx6bT1UdS5leHRlbmQoe3R5cGU6ImNhcnRlc2lhbjJkQXhpcyIsYXhpczpudWxsLGluaXQ6ZnVuY3Rpb24oKXt6bS5zdXBlckFwcGx5KHRoaXMsImluaXQiLGFyZ3VtZW50cyksdGhpcy5yZXNldFJhbmdlKCl9LG1lcmdlT3B0aW9uOmZ1bmN0aW9uKCl7em0uc3VwZXJBcHBseSh0aGlzLCJtZXJnZU9wdGlvbiIsYXJndW1lbnRzKSx0aGlzLnJlc2V0UmFuZ2UoKX0scmVzdG9yZURhdGE6ZnVuY3Rpb24oKXt6bS5zdXBlckFwcGx5KHRoaXMsInJlc3RvcmVEYXRhIixhcmd1bWVudHMpLHRoaXMucmVzZXRSYW5nZSgpfSxnZXRDb29yZFN5c01vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWNNb2RlbC5xdWVyeUNvbXBvbmVudHMoe21haW5UeXBlOiJncmlkIixpbmRleDp0aGlzLm9wdGlvbi5ncmlkSW5kZXgsaWQ6dGhpcy5vcHRpb24uZ3JpZElkfSlbMF19fSk7ZnVuY3Rpb24gUm0odCxlKXtyZXR1cm4gZS50eXBlfHwoZS5kYXRhPyJjYXRlZ29yeSI6InZhbHVlIil9bSh6bS5wcm90b3R5cGUsc2cpO3ZhciBCbT17b2Zmc2V0OjB9O2Z1bmN0aW9uIFZtKHQsZSl7cmV0dXJuIHQuZ2V0Q29vcmRTeXNNb2RlbCgpPT09ZX1mdW5jdGlvbiBHbSh0LGUsaSl7dGhpcy5fY29vcmRzTWFwPXt9LHRoaXMuX2Nvb3Jkc0xpc3Q9W10sdGhpcy5fYXhlc01hcD17fSx0aGlzLl9heGVzTGlzdD1bXSx0aGlzLl9pbml0Q2FydGVzaWFuKHQsZSxpKSx0aGlzLm1vZGVsPXR9T20oIngiLHptLFJtLEJtKSxPbSgieSIsem0sUm0sQm0pLFR1LmV4dGVuZCh7dHlwZToiZ3JpZCIsZGVwZW5kZW5jaWVzOlsieEF4aXMiLCJ5QXhpcyJdLGxheW91dE1vZGU6ImJveCIsY29vcmRpbmF0ZVN5c3RlbTpudWxsLGRlZmF1bHRPcHRpb246e3Nob3c6ITEsemxldmVsOjAsejowLGxlZnQ6IjEwJSIsdG9wOjYwLHJpZ2h0OiIxMCUiLGJvdHRvbTo2MCxjb250YWluTGFiZWw6ITEsYmFja2dyb3VuZENvbG9yOiJyZ2JhKDAsMCwwLDApIixib3JkZXJXaWR0aDoxLGJvcmRlckNvbG9yOiIjY2NjIn19KTt2YXIgRm09R20ucHJvdG90eXBlO2Z1bmN0aW9uIFdtKHQsZSxpLG4pe2kuZ2V0QXhlc09uWmVyb09mPWZ1bmN0aW9uKCl7cmV0dXJuIG8/W29dOltdfTt2YXIgbyxhPXRbZV0scj1pLm1vZGVsLHM9ci5nZXQoImF4aXNMaW5lLm9uWmVybyIpLGw9ci5nZXQoImF4aXNMaW5lLm9uWmVyb0F4aXNJbmRleCIpO2lmKHMpe2lmKG51bGwhPWwpSG0oYVtsXSkmJihvPWFbbF0pO2Vsc2UgZm9yKHZhciB1IGluIGEpaWYoYS5oYXNPd25Qcm9wZXJ0eSh1KSYmSG0oYVt1XSkmJiFuW2goYVt1XSldKXtvPWFbdV07YnJlYWt9byYmKG5baChvKV09ITApfWZ1bmN0aW9uIGgodCl7cmV0dXJuIHQuZGltKyJfIit0LmluZGV4fX1mdW5jdGlvbiBIbSh0KXtyZXR1cm4gdCYmImNhdGVnb3J5IiE9PXQudHlwZSYmInRpbWUiIT09dC50eXBlJiZmdW5jdGlvbih0KXt2YXIgZT10LnNjYWxlLmdldEV4dGVudCgpLGk9ZVswXSxuPWVbMV07cmV0dXJuISgwPGkmJjA8bnx8aTwwJiZuPDApfSh0KX1GbS50eXBlPSJncmlkIixGbS5heGlzUG9pbnRlckVuYWJsZWQ9ITAsRm0uZ2V0UmVjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWN0fSxGbS51cGRhdGU9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9heGVzTWFwO3RoaXMuX3VwZGF0ZVNjYWxlKHQsdGhpcy5tb2RlbCksRShpLngsZnVuY3Rpb24odCl7ZWcodC5zY2FsZSx0Lm1vZGVsKX0pLEUoaS55LGZ1bmN0aW9uKHQpe2VnKHQuc2NhbGUsdC5tb2RlbCl9KTt2YXIgbj17fTtFKGkueCxmdW5jdGlvbih0KXtXbShpLCJ5Iix0LG4pfSksRShpLnksZnVuY3Rpb24odCl7V20oaSwieCIsdCxuKX0pLHRoaXMucmVzaXplKHRoaXMubW9kZWwsZSl9LEZtLnJlc2l6ZT1mdW5jdGlvbih0LGUsaSl7dmFyIG89dnUodC5nZXRCb3hMYXlvdXRQYXJhbXMoKSx7d2lkdGg6ZS5nZXRXaWR0aCgpLGhlaWdodDplLmdldEhlaWdodCgpfSk7dGhpcy5fcmVjdD1vO3ZhciBuPXRoaXMuX2F4ZXNMaXN0O2Z1bmN0aW9uIGEoKXtFKG4sZnVuY3Rpb24odCl7dmFyIGU9dC5pc0hvcml6b250YWwoKSxpPWU/WzAsby53aWR0aF06WzAsby5oZWlnaHRdLG49dC5pbnZlcnNlPzE6MDt0LnNldEV4dGVudChpW25dLGlbMS1uXSksZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldEV4dGVudCgpLG49aVswXStpWzFdO3QudG9HbG9iYWxDb29yZD0ieCI9PT10LmRpbT9mdW5jdGlvbih0KXtyZXR1cm4gdCtlfTpmdW5jdGlvbih0KXtyZXR1cm4gbi10K2V9LHQudG9Mb2NhbENvb3JkPSJ4Ij09PXQuZGltP2Z1bmN0aW9uKHQpe3JldHVybiB0LWV9OmZ1bmN0aW9uKHQpe3JldHVybiBuLXQrZX19KHQsZT9vLng6by55KX0pfWEoKSwhaSYmdC5nZXQoImNvbnRhaW5MYWJlbCIpJiYoRShuLGZ1bmN0aW9uKHQpe2lmKCF0Lm1vZGVsLmdldCgiYXhpc0xhYmVsLmluc2lkZSIpKXt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZT10Lm1vZGVsLGk9dC5zY2FsZTtpZihlLmdldCgiYXhpc0xhYmVsLnNob3ciKSYmIWkuaXNCbGFuaygpKXt2YXIgbixvLGE9ImNhdGVnb3J5Ij09PXQudHlwZSxyPWkuZ2V0RXh0ZW50KCk7bz1hP2kuY291bnQoKToobj1pLmdldFRpY2tzKCkpLmxlbmd0aDt2YXIgcyxsLHUsaCxjLGQsZixwLGcsbT10LmdldExhYmVsTW9kZWwoKSx2PW5nKHQpLHk9MTs0MDxvJiYoeT1NYXRoLmNlaWwoby80MCkpO2Zvcih2YXIgeD0wO3g8bzt4Kz15KXt2YXIgXz12KG4/blt4XTpyWzBdK3gpLHc9bS5nZXRUZXh0UmVjdChfKSxiPShsPXcsdT1tLmdldCgicm90YXRlIil8fDAsdm9pZCAwLGg9dSpNYXRoLlBJLzE4MCxjPWwucGxhaW4oKSxkPWMud2lkdGgsZj1jLmhlaWdodCxwPWQqTWF0aC5jb3MoaCkrZipNYXRoLnNpbihoKSxnPWQqTWF0aC5zaW4oaCkrZipNYXRoLmNvcyhoKSxuZXcgTWkoYy54LGMueSxwLGcpKTtzP3MudW5pb24oYik6cz1ifXJldHVybiBzfX0odCk7aWYoZSl7dmFyIGk9dC5pc0hvcml6b250YWwoKT8iaGVpZ2h0Ijoid2lkdGgiLG49dC5tb2RlbC5nZXQoImF4aXNMYWJlbC5tYXJnaW4iKTtvW2ldLT1lW2ldK24sInRvcCI9PT10LnBvc2l0aW9uP28ueSs9ZS5oZWlnaHQrbjoibGVmdCI9PT10LnBvc2l0aW9uJiYoby54Kz1lLndpZHRoK24pfX19KSxhKCkpfSxGbS5nZXRBeGlzPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fYXhlc01hcFt0XTtpZihudWxsIT1pKXtpZihudWxsPT1lKWZvcih2YXIgbiBpbiBpKWlmKGkuaGFzT3duUHJvcGVydHkobikpcmV0dXJuIGlbbl07cmV0dXJuIGlbZV19fSxGbS5nZXRBeGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F4ZXNMaXN0LnNsaWNlKCl9LEZtLmdldENhcnRlc2lhbj1mdW5jdGlvbih0LGUpe2lmKG51bGwhPXQmJm51bGwhPWUpe3ZhciBpPSJ4Iit0KyJ5IitlO3JldHVybiB0aGlzLl9jb29yZHNNYXBbaV19Uih0KSYmKGU9dC55QXhpc0luZGV4LHQ9dC54QXhpc0luZGV4KTtmb3IodmFyIG49MCxvPXRoaXMuX2Nvb3Jkc0xpc3Q7bjxvLmxlbmd0aDtuKyspaWYob1tuXS5nZXRBeGlzKCJ4IikuaW5kZXg9PT10fHxvW25dLmdldEF4aXMoInkiKS5pbmRleD09PWUpcmV0dXJuIG9bbl19LEZtLmdldENhcnRlc2lhbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29vcmRzTGlzdC5zbGljZSgpfSxGbS5jb252ZXJ0VG9QaXhlbD1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5fZmluZENvbnZlcnRUYXJnZXQodCxlKTtyZXR1cm4gbi5jYXJ0ZXNpYW4/bi5jYXJ0ZXNpYW4uZGF0YVRvUG9pbnQoaSk6bi5heGlzP24uYXhpcy50b0dsb2JhbENvb3JkKG4uYXhpcy5kYXRhVG9Db29yZChpKSk6bnVsbH0sRm0uY29udmVydEZyb21QaXhlbD1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5fZmluZENvbnZlcnRUYXJnZXQodCxlKTtyZXR1cm4gbi5jYXJ0ZXNpYW4/bi5jYXJ0ZXNpYW4ucG9pbnRUb0RhdGEoaSk6bi5heGlzP24uYXhpcy5jb29yZFRvRGF0YShuLmF4aXMudG9Mb2NhbENvb3JkKGkpKTpudWxsfSxGbS5fZmluZENvbnZlcnRUYXJnZXQ9ZnVuY3Rpb24odCxlKXt2YXIgaSxuLG89ZS5zZXJpZXNNb2RlbCxhPWUueEF4aXNNb2RlbHx8byYmby5nZXRSZWZlcnJpbmdDb21wb25lbnRzKCJ4QXhpcyIpWzBdLHI9ZS55QXhpc01vZGVsfHxvJiZvLmdldFJlZmVycmluZ0NvbXBvbmVudHMoInlBeGlzIilbMF0scz1lLmdyaWRNb2RlbCxsPXRoaXMuX2Nvb3Jkc0xpc3Q7aWYobylfKGwsaT1vLmNvb3JkaW5hdGVTeXN0ZW0pPDAmJihpPW51bGwpO2Vsc2UgaWYoYSYmcilpPXRoaXMuZ2V0Q2FydGVzaWFuKGEuY29tcG9uZW50SW5kZXgsci5jb21wb25lbnRJbmRleCk7ZWxzZSBpZihhKW49dGhpcy5nZXRBeGlzKCJ4IixhLmNvbXBvbmVudEluZGV4KTtlbHNlIGlmKHIpbj10aGlzLmdldEF4aXMoInkiLHIuY29tcG9uZW50SW5kZXgpO2Vsc2UgaWYocyl7cy5jb29yZGluYXRlU3lzdGVtPT09dGhpcyYmKGk9dGhpcy5fY29vcmRzTGlzdFswXSl9cmV0dXJue2NhcnRlc2lhbjppLGF4aXM6bn19LEZtLmNvbnRhaW5Qb2ludD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9jb29yZHNMaXN0WzBdO2lmKGUpcmV0dXJuIGUuY29udGFpblBvaW50KHQpfSxGbS5faW5pdENhcnRlc2lhbj1mdW5jdGlvbihyLHQsZSl7dmFyIHM9e2xlZnQ6ITEscmlnaHQ6ITEsdG9wOiExLGJvdHRvbTohMX0sbD17eDp7fSx5Ont9fSx1PXt4OjAseTowfTtpZih0LmVhY2hDb21wb25lbnQoInhBeGlzIixpKCJ4IiksdGhpcyksdC5lYWNoQ29tcG9uZW50KCJ5QXhpcyIsaSgieSIpLHRoaXMpLCF1Lnh8fCF1LnkpcmV0dXJuIHRoaXMuX2F4ZXNNYXA9e30sdm9pZCh0aGlzLl9heGVzTGlzdD1bXSk7ZnVuY3Rpb24gaShhKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtpZihWbSh0LHIpKXt2YXIgaT10LmdldCgicG9zaXRpb24iKTsieCI9PT1hPyJ0b3AiIT09aSYmImJvdHRvbSIhPT1pJiYoaT1zLmJvdHRvbT8idG9wIjoiYm90dG9tIik6ImxlZnQiIT09aSYmInJpZ2h0IiE9PWkmJihpPXMubGVmdD8icmlnaHQiOiJsZWZ0Iiksc1tpXT0hMDt2YXIgbj1uZXcga20oYSxpZyh0KSxbMCwwXSx0LmdldCgidHlwZSIpLGkpLG89ImNhdGVnb3J5Ij09PW4udHlwZTtuLm9uQmFuZD1vJiZ0LmdldCgiYm91bmRhcnlHYXAiKSxuLmludmVyc2U9dC5nZXQoImludmVyc2UiKSwodC5heGlzPW4pLm1vZGVsPXQsbi5ncmlkPXRoaXMsbi5pbmRleD1lLHRoaXMuX2F4ZXNMaXN0LnB1c2gobiksbFthXVtlXT1uLHVbYV0rK319fUUoKHRoaXMuX2F4ZXNNYXA9bCkueCxmdW5jdGlvbihvLGEpe0UobC55LGZ1bmN0aW9uKHQsZSl7dmFyIGk9IngiK2ErInkiK2Usbj1uZXcgTG0oaSk7bi5ncmlkPXRoaXMsbi5tb2RlbD1yLHRoaXMuX2Nvb3Jkc01hcFtpXT1uLHRoaXMuX2Nvb3Jkc0xpc3QucHVzaChuKSxuLmFkZEF4aXMobyksbi5hZGRBeGlzKHQpfSx0aGlzKX0sdGhpcyl9LEZtLl91cGRhdGVTY2FsZT1mdW5jdGlvbihsLHUpe2Z1bmN0aW9uIGgoZSxpKXtFKGUubWFwRGltZW5zaW9uKGkuZGltLCEwKSxmdW5jdGlvbih0KXtpLnNjYWxlLnVuaW9uRXh0ZW50RnJvbURhdGEoZSx1cChlLHQpKX0pfUUodGhpcy5fYXhlc0xpc3QsZnVuY3Rpb24odCl7dC5zY2FsZS5zZXRFeHRlbnQoMS8wLC0xLzApfSksbC5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQpe2lmKFhtKHQpKXt2YXIgZT1VbSh0LGwpLGk9ZVswXSxuPWVbMV07aWYoIVZtKGksdSl8fCFWbShuLHUpKXJldHVybjt2YXIgbz10aGlzLmdldENhcnRlc2lhbihpLmNvbXBvbmVudEluZGV4LG4uY29tcG9uZW50SW5kZXgpLGE9dC5nZXREYXRhKCkscj1vLmdldEF4aXMoIngiKSxzPW8uZ2V0QXhpcygieSIpOyJsaXN0Ij09PWEudHlwZSYmKGgoYSxyLHQpLGgoYSxzLHQpKX19LHRoaXMpfSxGbS5nZXRUb29sdGlwQXhlcz1mdW5jdGlvbihuKXt2YXIgbz1bXSxhPVtdO3JldHVybiBFKHRoaXMuZ2V0Q2FydGVzaWFucygpLGZ1bmN0aW9uKHQpe3ZhciBlPW51bGwhPW4mJiJhdXRvIiE9PW4/dC5nZXRBeGlzKG4pOnQuZ2V0QmFzZUF4aXMoKSxpPXQuZ2V0T3RoZXJBeGlzKGUpO18obyxlKTwwJiZvLnB1c2goZSksXyhhLGkpPDAmJmEucHVzaChpKX0pLHtiYXNlQXhlczpvLG90aGVyQXhlczphfX07dmFyIFptPVsieEF4aXMiLCJ5QXhpcyJdO2Z1bmN0aW9uIFVtKGUpe3JldHVybiBOKFptLGZ1bmN0aW9uKHQpe3JldHVybiBlLmdldFJlZmVycmluZ0NvbXBvbmVudHModClbMF19KX1mdW5jdGlvbiBYbSh0KXtyZXR1cm4iY2FydGVzaWFuMmQiPT09dC5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKX1HbS5jcmVhdGU9ZnVuY3Rpb24obixvKXt2YXIgYT1bXTtyZXR1cm4gbi5lYWNoQ29tcG9uZW50KCJncmlkIixmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBHbSh0LG4sbyk7aS5uYW1lPSJncmlkXyIrZSxpLnJlc2l6ZSh0LG8sITApLHQuY29vcmRpbmF0ZVN5c3RlbT1pLGEucHVzaChpKX0pLG4uZWFjaFNlcmllcyhmdW5jdGlvbih0KXtpZihYbSh0KSl7dmFyIGU9VW0odCksaT1lWzBdLG49ZVsxXSxvPWkuZ2V0Q29vcmRTeXNNb2RlbCgpLmNvb3JkaW5hdGVTeXN0ZW07dC5jb29yZGluYXRlU3lzdGVtPW8uZ2V0Q2FydGVzaWFuKGkuY29tcG9uZW50SW5kZXgsbi5jb21wb25lbnRJbmRleCl9fSksYX0sR20uZGltZW5zaW9ucz1HbS5wcm90b3R5cGUuZGltZW5zaW9ucz1MbS5wcm90b3R5cGUuZGltZW5zaW9ucyxuaC5yZWdpc3RlcigiY2FydGVzaWFuMmQiLEdtKTtmdW5jdGlvbiBZbSh0LGUpe3RoaXMub3B0PWUsdGhpcy5heGlzTW9kZWw9dCxDKGUse2xhYmVsT2Zmc2V0OjAsbmFtZURpcmVjdGlvbjoxLHRpY2tEaXJlY3Rpb246MSxsYWJlbERpcmVjdGlvbjoxLHNpbGVudDohMH0pLHRoaXMuZ3JvdXA9bmV3IElpO3ZhciBpPW5ldyBJaSh7cG9zaXRpb246ZS5wb3NpdGlvbi5zbGljZSgpLHJvdGF0aW9uOmUucm90YXRpb259KTtpLnVwZGF0ZVRyYW5zZm9ybSgpLHRoaXMuX3RyYW5zZm9ybT1pLnRyYW5zZm9ybSx0aGlzLl9kdW1iR3JvdXA9aX12YXIgam09TWF0aC5QSTtZbS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOlltLGhhc0J1aWxkZXI6ZnVuY3Rpb24odCl7cmV0dXJuISFxbVt0XX0sYWRkOmZ1bmN0aW9uKHQpe3FtW3RdLmNhbGwodGhpcyl9LGdldEdyb3VwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXB9fTt2YXIgcW09e2F4aXNMaW5lOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHQsdD10aGlzLmF4aXNNb2RlbDtpZih0LmdldCgiYXhpc0xpbmUuc2hvdyIpKXt2YXIgZT10aGlzLmF4aXNNb2RlbC5heGlzLmdldEV4dGVudCgpLGk9dGhpcy5fdHJhbnNmb3JtLHI9W2VbMF0sMF0sbj1bZVsxXSwwXTtpJiYoYnQocixyLGkpLGJ0KG4sbixpKSk7dmFyIHM9TCh7bGluZUNhcDoicm91bmQifSx0LmdldE1vZGVsKCJheGlzTGluZS5saW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSk7dGhpcy5ncm91cC5hZGQobmV3IG9zKHthbmlkOiJsaW5lIixzdWJQaXhlbE9wdGltaXplOiEwLHNoYXBlOnt4MTpyWzBdLHkxOnJbMV0seDI6blswXSx5MjpuWzFdfSxzdHlsZTpzLHN0cm9rZUNvbnRhaW5UaHJlc2hvbGQ6YS5zdHJva2VDb250YWluVGhyZXNob2xkfHw1LHNpbGVudDohMCx6MjoxfSkpO3ZhciBsPXQuZ2V0KCJheGlzTGluZS5zeW1ib2wiKSxvPXQuZ2V0KCJheGlzTGluZS5zeW1ib2xTaXplIiksdT10LmdldCgiYXhpc0xpbmUuc3ltYm9sT2Zmc2V0Iil8fDA7aWYoIm51bWJlciI9PXR5cGVvZiB1JiYodT1bdSx1XSksbnVsbCE9bCl7InN0cmluZyI9PXR5cGVvZiBsJiYobD1bbCxsXSksInN0cmluZyIhPXR5cGVvZiBvJiYibnVtYmVyIiE9dHlwZW9mIG98fChvPVtvLG9dKTt2YXIgaD1vWzBdLGM9b1sxXTtFKFt7cm90YXRlOmEucm90YXRpb24rTWF0aC5QSS8yLG9mZnNldDp1WzBdLHI6MH0se3JvdGF0ZTphLnJvdGF0aW9uLU1hdGguUEkvMixvZmZzZXQ6dVsxXSxyOk1hdGguc3FydCgoclswXS1uWzBdKSooclswXS1uWzBdKSsoclsxXS1uWzFdKSooclsxXS1uWzFdKSl9XSxmdW5jdGlvbih0LGUpe2lmKCJub25lIiE9PWxbZV0mJm51bGwhPWxbZV0pe3ZhciBpPW1nKGxbZV0sLWgvMiwtYy8yLGgsYyxzLnN0cm9rZSwhMCksbj10LnIrdC5vZmZzZXQsbz1bclswXStuKk1hdGguY29zKGEucm90YXRpb24pLHJbMV0tbipNYXRoLnNpbihhLnJvdGF0aW9uKV07aS5hdHRyKHtyb3RhdGlvbjp0LnJvdGF0ZSxwb3NpdGlvbjpvLHNpbGVudDohMCx6MjoxMX0pLHRoaXMuZ3JvdXAuYWRkKGkpfX0sdGhpcyl9fX0sYXhpc1RpY2tMYWJlbDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuYXhpc01vZGVsLGU9dGhpcy5vcHQsaT1mdW5jdGlvbih0LGUsaSl7dmFyIG49ZS5heGlzLG89ZS5nZXRNb2RlbCgiYXhpc1RpY2siKTtpZighby5nZXQoInNob3ciKXx8bi5zY2FsZS5pc0JsYW5rKCkpcmV0dXJuO2Zvcih2YXIgYT1vLmdldE1vZGVsKCJsaW5lU3R5bGUiKSxyPWkudGlja0RpcmVjdGlvbipvLmdldCgibGVuZ3RoIikscz1pdihuLmdldFRpY2tzQ29vcmRzKCksdC5fdHJhbnNmb3JtLHIsQyhhLmdldExpbmVTdHlsZSgpLHtzdHJva2U6ZS5nZXQoImF4aXNMaW5lLmxpbmVTdHlsZS5jb2xvciIpfSksInRpY2tzIiksbD0wO2w8cy5sZW5ndGg7bCsrKXQuZ3JvdXAuYWRkKHNbbF0pO3JldHVybiBzfSh0aGlzLHQsZSk7IWZ1bmN0aW9uKHQsZSxpKXtpZihyZyh0LmF4aXMpKXJldHVybjt2YXIgbj10LmdldCgiYXhpc0xhYmVsLnNob3dNaW5MYWJlbCIpLG89dC5nZXQoImF4aXNMYWJlbC5zaG93TWF4TGFiZWwiKTtpPWl8fFtdO3ZhciBhPShlPWV8fFtdKVswXSxyPWVbMV0scz1lW2UubGVuZ3RoLTFdLGw9ZVtlLmxlbmd0aC0yXSx1PWlbMF0saD1pWzFdLGM9aVtpLmxlbmd0aC0xXSxkPWlbaS5sZW5ndGgtMl07ITE9PT1uPyhRbShhKSxRbSh1KSk6dHYoYSxyKSYmKG4/KFFtKHIpLFFtKGgpKTooUW0oYSksUW0odSkpKTshMT09PW8/KFFtKHMpLFFtKGMpKTp0dihsLHMpJiYobz8oUW0obCksUW0oZCkpOihRbShzKSxRbShjKSkpfSh0LGZ1bmN0aW9uKHUsaCxjKXt2YXIgZD1oLmF4aXM7aWYoIVcoYy5heGlzTGFiZWxTaG93LGguZ2V0KCJheGlzTGFiZWwuc2hvdyIpKXx8ZC5zY2FsZS5pc0JsYW5rKCkpcmV0dXJuO3ZhciBmPWguZ2V0TW9kZWwoImF4aXNMYWJlbCIpLHA9Zi5nZXQoIm1hcmdpbiIpLHQ9ZC5nZXRWaWV3TGFiZWxzKCksZT0oVyhjLmxhYmVsUm90YXRlLGYuZ2V0KCJyb3RhdGUiKSl8fDApKmptLzE4MCxnPSRtKGMucm90YXRpb24sZSxjLmxhYmVsRGlyZWN0aW9uKSxtPWguZ2V0Q2F0ZWdvcmllcyYmaC5nZXRDYXRlZ29yaWVzKCEwKSx2PVtdLHk9Sm0oaCkseD1oLmdldCgidHJpZ2dlckV2ZW50Iik7cmV0dXJuIEUodCxmdW5jdGlvbih0LGUpe3ZhciBpPXQudGlja1ZhbHVlLG49dC5mb3JtYXR0ZWRMYWJlbCxvPXQucmF3TGFiZWwsYT1mO20mJm1baV0mJm1baV0udGV4dFN0eWxlJiYoYT1uZXcgSWwobVtpXS50ZXh0U3R5bGUsZixoLmVjTW9kZWwpKTt2YXIgcj1hLmdldFRleHRDb2xvcigpfHxoLmdldCgiYXhpc0xpbmUubGluZVN0eWxlLmNvbG9yIikscz1bZC5kYXRhVG9Db29yZChpKSxjLmxhYmVsT2Zmc2V0K2MubGFiZWxEaXJlY3Rpb24qcF0sbD1uZXcgRnIoe2FuaWQ6ImxhYmVsXyIraSxwb3NpdGlvbjpzLHJvdGF0aW9uOmcucm90YXRpb24sc2lsZW50OnksejI6MTB9KTtRcyhsLnN0eWxlLGEse3RleHQ6bix0ZXh0QWxpZ246YS5nZXRTaGFsbG93KCJhbGlnbiIsITApfHxnLnRleHRBbGlnbix0ZXh0VmVydGljYWxBbGlnbjphLmdldFNoYWxsb3coInZlcnRpY2FsQWxpZ24iLCEwKXx8YS5nZXRTaGFsbG93KCJiYXNlbGluZSIsITApfHxnLnRleHRWZXJ0aWNhbEFsaWduLHRleHRGaWxsOiJmdW5jdGlvbiI9PXR5cGVvZiByP3IoImNhdGVnb3J5Ij09PWQudHlwZT9vOiJ2YWx1ZSI9PT1kLnR5cGU/aSsiIjppLGUpOnJ9KSx4JiYobC5ldmVudERhdGE9S20oaCksbC5ldmVudERhdGEudGFyZ2V0VHlwZT0iYXhpc0xhYmVsIixsLmV2ZW50RGF0YS52YWx1ZT1vKSx1Ll9kdW1iR3JvdXAuYWRkKGwpLGwudXBkYXRlVHJhbnNmb3JtKCksdi5wdXNoKGwpLHUuZ3JvdXAuYWRkKGwpLGwuZGVjb21wb3NlVHJhbnNmb3JtKCl9KSx2fSh0aGlzLHQsZSksaSksZnVuY3Rpb24odCxlLGkpe3ZhciBuPWUuYXhpcyxvPWUuZ2V0TW9kZWwoIm1pbm9yVGljayIpO2lmKCFvLmdldCgic2hvdyIpfHxuLnNjYWxlLmlzQmxhbmsoKSlyZXR1cm47dmFyIGE9bi5nZXRNaW5vclRpY2tzQ29vcmRzKCk7aWYoIWEubGVuZ3RoKXJldHVybjtmb3IodmFyIHI9by5nZXRNb2RlbCgibGluZVN0eWxlIikscz1pLnRpY2tEaXJlY3Rpb24qby5nZXQoImxlbmd0aCIpLGw9QyhyLmdldExpbmVTdHlsZSgpLEMoZS5nZXRNb2RlbCgiYXhpc1RpY2siKS5nZXRMaW5lU3R5bGUoKSx7c3Ryb2tlOmUuZ2V0KCJheGlzTGluZS5saW5lU3R5bGUuY29sb3IiKX0pKSx1PTA7dTxhLmxlbmd0aDt1KyspZm9yKHZhciBoPWl2KGFbdV0sdC5fdHJhbnNmb3JtLHMsbCwibWlub3J0aWNrc18iK3UpLGM9MDtjPGgubGVuZ3RoO2MrKyl0Lmdyb3VwLmFkZChoW2NdKX0odGhpcyx0LGUpfSxheGlzTmFtZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0LGU9dGhpcy5heGlzTW9kZWwsaT1XKHQuYXhpc05hbWUsZS5nZXQoIm5hbWUiKSk7aWYoaSl7dmFyIG4sbyxhPWUuZ2V0KCJuYW1lTG9jYXRpb24iKSxyPXQubmFtZURpcmVjdGlvbixzPWUuZ2V0TW9kZWwoIm5hbWVUZXh0U3R5bGUiKSxsPWUuZ2V0KCJuYW1lR2FwIil8fDAsdT10aGlzLmF4aXNNb2RlbC5heGlzLmdldEV4dGVudCgpLGg9dVswXT51WzFdPy0xOjEsYz1bInN0YXJ0Ij09PWE/dVswXS1oKmw6ImVuZCI9PT1hP3VbMV0raCpsOih1WzBdK3VbMV0pLzIsZXYoYSk/dC5sYWJlbE9mZnNldCtyKmw6MF0sZD1lLmdldCgibmFtZVJvdGF0ZSIpO251bGwhPWQmJihkPWQqam0vMTgwKSxldihhKT9uPSRtKHQucm90YXRpb24sbnVsbCE9ZD9kOnQucm90YXRpb24scik6KG49ZnVuY3Rpb24odCxlLGksbil7dmFyIG8sYSxyPUdsKGktdC5yb3RhdGlvbikscz1uWzBdPm5bMV0sbD0ic3RhcnQiPT09ZSYmIXN8fCJzdGFydCIhPT1lJiZzO289Rmwoci1qbS8yKT8oYT1sPyJib3R0b20iOiJ0b3AiLCJjZW50ZXIiKTpGbChyLTEuNSpqbSk/KGE9bD8idG9wIjoiYm90dG9tIiwiY2VudGVyIik6KGE9Im1pZGRsZSIscjwxLjUqam0mJmptLzI8cj9sPyJsZWZ0IjoicmlnaHQiOmw/InJpZ2h0IjoibGVmdCIpO3JldHVybntyb3RhdGlvbjpyLHRleHRBbGlnbjpvLHRleHRWZXJ0aWNhbEFsaWduOmF9fSh0LGEsZHx8MCx1KSxudWxsIT0obz10LmF4aXNOYW1lQXZhaWxhYmxlV2lkdGgpJiYobz1NYXRoLmFicyhvL01hdGguc2luKG4ucm90YXRpb24pKSxpc0Zpbml0ZShvKXx8KG89bnVsbCkpKTt2YXIgZj1zLmdldEZvbnQoKSxwPWUuZ2V0KCJuYW1lVHJ1bmNhdGUiLCEwKXx8e30sZz1wLmVsbGlwc2lzLG09Vyh0Lm5hbWVUcnVuY2F0ZU1heFdpZHRoLHAubWF4V2lkdGgsbyksdj1udWxsIT1nJiZudWxsIT1tP2h1KGksbSxmLGcse21pbkNoYXI6MixwbGFjZWhvbGRlcjpwLnBsYWNlaG9sZGVyfSk6aSx5PWUuZ2V0KCJ0b29sdGlwIiwhMCkseD1lLm1haW5UeXBlLF89e2NvbXBvbmVudFR5cGU6eCxuYW1lOmksJHZhcnM6WyJuYW1lIl19O19beCsiSW5kZXgiXT1lLmNvbXBvbmVudEluZGV4O3ZhciB3PW5ldyBGcih7YW5pZDoibmFtZSIsX19mdWxsVGV4dDppLF9fdHJ1bmNhdGVkVGV4dDp2LHBvc2l0aW9uOmMscm90YXRpb246bi5yb3RhdGlvbixzaWxlbnQ6Sm0oZSksejI6MSx0b29sdGlwOnkmJnkuc2hvdz9MKHtjb250ZW50OmksZm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGl9LGZvcm1hdHRlclBhcmFtczpffSx5KTpudWxsfSk7UXMody5zdHlsZSxzLHt0ZXh0OnYsdGV4dEZvbnQ6Zix0ZXh0RmlsbDpzLmdldFRleHRDb2xvcigpfHxlLmdldCgiYXhpc0xpbmUubGluZVN0eWxlLmNvbG9yIiksdGV4dEFsaWduOnMuZ2V0KCJhbGlnbiIpfHxuLnRleHRBbGlnbix0ZXh0VmVydGljYWxBbGlnbjpzLmdldCgidmVydGljYWxBbGlnbiIpfHxuLnRleHRWZXJ0aWNhbEFsaWdufSksZS5nZXQoInRyaWdnZXJFdmVudCIpJiYody5ldmVudERhdGE9S20oZSksdy5ldmVudERhdGEudGFyZ2V0VHlwZT0iYXhpc05hbWUiLHcuZXZlbnREYXRhLm5hbWU9aSksdGhpcy5fZHVtYkdyb3VwLmFkZCh3KSx3LnVwZGF0ZVRyYW5zZm9ybSgpLHRoaXMuZ3JvdXAuYWRkKHcpLHcuZGVjb21wb3NlVHJhbnNmb3JtKCl9fX0sS209WW0ubWFrZUF4aXNFdmVudERhdGFCYXNlPWZ1bmN0aW9uKHQpe3ZhciBlPXtjb21wb25lbnRUeXBlOnQubWFpblR5cGUsY29tcG9uZW50SW5kZXg6dC5jb21wb25lbnRJbmRleH07cmV0dXJuIGVbdC5tYWluVHlwZSsiSW5kZXgiXT10LmNvbXBvbmVudEluZGV4LGV9LCRtPVltLmlubmVyVGV4dExheW91dD1mdW5jdGlvbih0LGUsaSl7dmFyIG4sbz1HbChlLXQpO3JldHVybntyb3RhdGlvbjpvLHRleHRBbGlnbjpGbChvKT8obj0wPGk/InRvcCI6ImJvdHRvbSIsImNlbnRlciIpOkZsKG8tam0pPyhuPTA8aT8iYm90dG9tIjoidG9wIiwiY2VudGVyIik6KG49Im1pZGRsZSIsMDxvJiZvPGptPzA8aT8icmlnaHQiOiJsZWZ0IjowPGk/ImxlZnQiOiJyaWdodCIpLHRleHRWZXJ0aWNhbEFsaWduOm59fTt2YXIgSm09WW0uaXNMYWJlbFNpbGVudD1mdW5jdGlvbih0KXt2YXIgZT10LmdldCgidG9vbHRpcCIpO3JldHVybiB0LmdldCgic2lsZW50Iil8fCEodC5nZXQoInRyaWdnZXJFdmVudCIpfHxlJiZlLnNob3cpfTtmdW5jdGlvbiBRbSh0KXt0JiYodC5pZ25vcmU9ITApfWZ1bmN0aW9uIHR2KHQsZSl7dmFyIGk9dCYmdC5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpLG49ZSYmZS5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpO2lmKGkmJm4pe3ZhciBvPWllKFtdKTtyZXR1cm4gcmUobyxvLC10LnJvdGF0aW9uKSxpLmFwcGx5VHJhbnNmb3JtKG9lKFtdLG8sdC5nZXRMb2NhbFRyYW5zZm9ybSgpKSksbi5hcHBseVRyYW5zZm9ybShvZShbXSxvLGUuZ2V0TG9jYWxUcmFuc2Zvcm0oKSkpLGkuaW50ZXJzZWN0KG4pfX1mdW5jdGlvbiBldih0KXtyZXR1cm4ibWlkZGxlIj09PXR8fCJjZW50ZXIiPT09dH1mdW5jdGlvbiBpdih0LGUsaSxuLG8pe2Zvcih2YXIgYT1bXSxyPVtdLHM9W10sbD0wO2w8dC5sZW5ndGg7bCsrKXt2YXIgdT10W2xdLmNvb3JkO3JbMF09dSxzW3JbMV09MF09dSxzWzFdPWksZSYmKGJ0KHIscixlKSxidChzLHMsZSkpO3ZhciBoPW5ldyBvcyh7YW5pZDpvKyJfIit0W2xdLnRpY2tWYWx1ZSxzdWJQaXhlbE9wdGltaXplOiEwLHNoYXBlOnt4MTpyWzBdLHkxOnJbMV0seDI6c1swXSx5MjpzWzFdfSxzdHlsZTpuLHoyOjIsc2lsZW50OiEwfSk7YS5wdXNoKGgpfXJldHVybiBhfXZhciBudj1FLG92PVQ7ZnVuY3Rpb24gYXYodCxlKXt2YXIgaT17YXhlc0luZm86e30sc2VyaWVzSW52b2x2ZWQ6ITEsY29vcmRTeXNBeGVzSW5mbzp7fSxjb29yZFN5c01hcDp7fX07cmV0dXJuIGZ1bmN0aW9uKHAsZyx0KXt2YXIgYT1nLmdldENvbXBvbmVudCgidG9vbHRpcCIpLG09Zy5nZXRDb21wb25lbnQoImF4aXNQb2ludGVyIiksdj1tLmdldCgibGluayIsITApfHxbXSx5PVtdO252KHQuZ2V0Q29vcmRpbmF0ZVN5c3RlbXMoKSxmdW5jdGlvbihjKXtpZihjLmF4aXNQb2ludGVyRW5hYmxlZCl7dmFyIHQ9dXYoYy5tb2RlbCksZD1wLmNvb3JkU3lzQXhlc0luZm9bdF09e30sZj0ocC5jb29yZFN5c01hcFt0XT1jKS5tb2RlbC5nZXRNb2RlbCgidG9vbHRpcCIsYSk7aWYobnYoYy5nZXRBeGVzKCksb3YobywhMSxudWxsKSksYy5nZXRUb29sdGlwQXhlcyYmYSYmZi5nZXQoInNob3ciKSl7dmFyIGU9ImF4aXMiPT09Zi5nZXQoInRyaWdnZXIiKSxpPSJjcm9zcyI9PT1mLmdldCgiYXhpc1BvaW50ZXIudHlwZSIpLG49Yy5nZXRUb29sdGlwQXhlcyhmLmdldCgiYXhpc1BvaW50ZXIuYXhpcyIpKTsoZXx8aSkmJm52KG4uYmFzZUF4ZXMsb3YobywhaXx8ImNyb3NzIixlKSksaSYmbnYobi5vdGhlckF4ZXMsb3YobywiY3Jvc3MiLCExKSl9fWZ1bmN0aW9uIG8odCxlLGkpe3ZhciBuPWkubW9kZWwuZ2V0TW9kZWwoImF4aXNQb2ludGVyIixtKSxvPW4uZ2V0KCJzaG93Iik7aWYobyYmKCJhdXRvIiE9PW98fHR8fGx2KG4pKSl7bnVsbD09ZSYmKGU9bi5nZXQoInRyaWdnZXJUb29sdGlwIikpO3ZhciBhPShuPXQ/ZnVuY3Rpb24odCxlLGksbixvLGEpe3ZhciByPWUuZ2V0TW9kZWwoImF4aXNQb2ludGVyIikscz17fTtudihbInR5cGUiLCJzbmFwIiwibGluZVN0eWxlIiwic2hhZG93U3R5bGUiLCJsYWJlbCIsImFuaW1hdGlvbiIsImFuaW1hdGlvbkR1cmF0aW9uVXBkYXRlIiwiYW5pbWF0aW9uRWFzaW5nVXBkYXRlIiwieiJdLGZ1bmN0aW9uKHQpe3NbdF09RChyLmdldCh0KSl9KSxzLnNuYXA9ImNhdGVnb3J5IiE9PXQudHlwZSYmISFhLCJjcm9zcyI9PT1yLmdldCgidHlwZSIpJiYocy50eXBlPSJsaW5lIik7dmFyIGw9cy5sYWJlbHx8KHMubGFiZWw9e30pO2lmKG51bGw9PWwuc2hvdyYmKGwuc2hvdz0hMSksImNyb3NzIj09PW8pe3ZhciB1PXIuZ2V0KCJsYWJlbC5zaG93Iik7aWYobC5zaG93PW51bGw9PXV8fHUsIWEpe3ZhciBoPXMubGluZVN0eWxlPXIuZ2V0KCJjcm9zc1N0eWxlIik7aCYmQyhsLGgudGV4dFN0eWxlKX19cmV0dXJuIHQubW9kZWwuZ2V0TW9kZWwoImF4aXNQb2ludGVyIixuZXcgSWwocyxpLG4pKX0oaSxmLG0sZyx0LGUpOm4pLmdldCgic25hcCIpLHI9dXYoaS5tb2RlbCkscz1lfHxhfHwiY2F0ZWdvcnkiPT09aS50eXBlLGw9cC5heGVzSW5mb1tyXT17a2V5OnIsYXhpczppLGNvb3JkU3lzOmMsYXhpc1BvaW50ZXJNb2RlbDpuLHRyaWdnZXJUb29sdGlwOmUsaW52b2x2ZVNlcmllczpzLHNuYXA6YSx1c2VIYW5kbGU6bHYobiksc2VyaWVzTW9kZWxzOltdfTtkW3JdPWwscC5zZXJpZXNJbnZvbHZlZHw9czt2YXIgdT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT1lLm1vZGVsLG49ZS5kaW0sbz0wO288dC5sZW5ndGg7bysrKXt2YXIgYT10W29dfHx7fTtpZihydihhW24rIkF4aXNJZCJdLGkuaWQpfHxydihhW24rIkF4aXNJbmRleCJdLGkuY29tcG9uZW50SW5kZXgpfHxydihhW24rIkF4aXNOYW1lIl0saS5uYW1lKSlyZXR1cm4gb319KHYsaSk7aWYobnVsbCE9dSl7dmFyIGg9eVt1XXx8KHlbdV09e2F4ZXNJbmZvOnt9fSk7aC5heGVzSW5mb1tyXT1sLGgubWFwcGVyPXZbdV0ubWFwcGVyLGwubGlua0dyb3VwPWh9fX19KX0oaSx0LGUpLGkuc2VyaWVzSW52b2x2ZWQmJmZ1bmN0aW9uKG8sdCl7dC5lYWNoU2VyaWVzKGZ1bmN0aW9uKGkpe3ZhciBuPWkuY29vcmRpbmF0ZVN5c3RlbSx0PWkuZ2V0KCJ0b29sdGlwLnRyaWdnZXIiLCEwKSxlPWkuZ2V0KCJ0b29sdGlwLnNob3ciLCEwKTtuJiYibm9uZSIhPT10JiYhMSE9PXQmJiJpdGVtIiE9PXQmJiExIT09ZSYmITEhPT1pLmdldCgiYXhpc1BvaW50ZXIuc2hvdyIsITApJiZudihvLmNvb3JkU3lzQXhlc0luZm9bdXYobi5tb2RlbCldLGZ1bmN0aW9uKHQpe3ZhciBlPXQuYXhpcztuLmdldEF4aXMoZS5kaW0pPT09ZSYmKHQuc2VyaWVzTW9kZWxzLnB1c2goaSksbnVsbD09dC5zZXJpZXNEYXRhQ291bnQmJih0LnNlcmllc0RhdGFDb3VudD0wKSx0LnNlcmllc0RhdGFDb3VudCs9aS5nZXREYXRhKCkuY291bnQoKSl9KX0sdGhpcyl9KGksdCksaX1mdW5jdGlvbiBydih0LGUpe3JldHVybiJhbGwiPT09dHx8ayh0KSYmMDw9Xyh0LGUpfHx0PT09ZX1mdW5jdGlvbiBzdih0KXt2YXIgZT0odC5lY01vZGVsLmdldENvbXBvbmVudCgiYXhpc1BvaW50ZXIiKXx8e30pLmNvb3JkU3lzQXhlc0luZm87cmV0dXJuIGUmJmUuYXhlc0luZm9bdXYodCldfWZ1bmN0aW9uIGx2KHQpe3JldHVybiEhdC5nZXQoImhhbmRsZS5zaG93Iil9ZnVuY3Rpb24gdXYodCl7cmV0dXJuIHQudHlwZSsifHwiK3QuaWR9dmFyIGh2PWJmKHt0eXBlOiJheGlzIixfYXhpc1BvaW50ZXI6bnVsbCxheGlzUG9pbnRlckNsYXNzOm51bGwscmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMuYXhpc1BvaW50ZXJDbGFzcyYmZnVuY3Rpb24odCl7dmFyIGU9c3YodCk7aWYoZSl7dmFyIGk9ZS5heGlzUG9pbnRlck1vZGVsLG49ZS5heGlzLnNjYWxlLG89aS5vcHRpb24sYT1pLmdldCgic3RhdHVzIikscj1pLmdldCgidmFsdWUiKTtudWxsIT1yJiYocj1uLnBhcnNlKHIpKTt2YXIgcz1sdihpKTtudWxsPT1hJiYoby5zdGF0dXM9cz8ic2hvdyI6ImhpZGUiKTt2YXIgbD1uLmdldEV4dGVudCgpLnNsaWNlKCk7bFswXT5sWzFdJiZsLnJldmVyc2UoKSwobnVsbD09cnx8cj5sWzFdKSYmKHI9bFsxXSkscjxsWzBdJiYocj1sWzBdKSxvLnZhbHVlPXIscyYmKG8uc3RhdHVzPWUuYXhpcy5zY2FsZS5pc0JsYW5rKCk/ImhpZGUiOiJzaG93Iil9fSh0KSxodi5zdXBlckFwcGx5KHRoaXMsInJlbmRlciIsYXJndW1lbnRzKSxjdih0aGlzLHQsZSxpLG4sITApfSx1cGRhdGVBeGlzUG9pbnRlcjpmdW5jdGlvbih0LGUsaSxuLG8pe2N2KHRoaXMsdCxlLGksbiwhMSl9LHJlbW92ZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2F4aXNQb2ludGVyO2kmJmkucmVtb3ZlKGUpLGh2LnN1cGVyQXBwbHkodGhpcywicmVtb3ZlIixhcmd1bWVudHMpfSxkaXNwb3NlOmZ1bmN0aW9uKHQsZSl7ZHYodGhpcyxlKSxodi5zdXBlckFwcGx5KHRoaXMsImRpc3Bvc2UiLGFyZ3VtZW50cyl9fSk7ZnVuY3Rpb24gY3YodCxlLGksbixvLGEpe3ZhciByPWh2LmdldEF4aXNQb2ludGVyQ2xhc3ModC5heGlzUG9pbnRlckNsYXNzKTtpZihyKXt2YXIgcz1mdW5jdGlvbih0KXt2YXIgZT1zdih0KTtyZXR1cm4gZSYmZS5heGlzUG9pbnRlck1vZGVsfShlKTtzPyh0Ll9heGlzUG9pbnRlcnx8KHQuX2F4aXNQb2ludGVyPW5ldyByKSkucmVuZGVyKGUscyxuLGEpOmR2KHQsbil9fWZ1bmN0aW9uIGR2KHQsZSxpKXt2YXIgbj10Ll9heGlzUG9pbnRlcjtuJiZuLmRpc3Bvc2UoZSxpKSx0Ll9heGlzUG9pbnRlcj1udWxsfXZhciBmdj1bXTtmdW5jdGlvbiBwdih0LGUsaSl7aT1pfHx7fTt2YXIgbj10LmNvb3JkaW5hdGVTeXN0ZW0sbz1lLmF4aXMsYT17fSxyPW8uZ2V0QXhlc09uWmVyb09mKClbMF0scz1vLnBvc2l0aW9uLGw9cj8ib25aZXJvIjpzLHU9by5kaW0saD1uLmdldFJlY3QoKSxjPVtoLngsaC54K2gud2lkdGgsaC55LGgueStoLmhlaWdodF0sZD17bGVmdDowLHJpZ2h0OjEsdG9wOjAsYm90dG9tOjEsb25aZXJvOjJ9LGY9ZS5nZXQoIm9mZnNldCIpfHwwLHA9IngiPT09dT9bY1syXS1mLGNbM10rZl06W2NbMF0tZixjWzFdK2ZdO2lmKHIpe3ZhciBnPXIudG9HbG9iYWxDb29yZChyLmRhdGFUb0Nvb3JkKDApKTtwW2Qub25aZXJvXT1NYXRoLm1heChNYXRoLm1pbihnLHBbMV0pLHBbMF0pfWEucG9zaXRpb249WyJ5Ij09PXU/cFtkW2xdXTpjWzBdLCJ4Ij09PXU/cFtkW2xdXTpjWzNdXSxhLnJvdGF0aW9uPU1hdGguUEkvMiooIngiPT09dT8wOjEpO2EubGFiZWxEaXJlY3Rpb249YS50aWNrRGlyZWN0aW9uPWEubmFtZURpcmVjdGlvbj17dG9wOi0xLGJvdHRvbToxLGxlZnQ6LTEscmlnaHQ6MX1bc10sYS5sYWJlbE9mZnNldD1yP3BbZFtzXV0tcFtkLm9uWmVyb106MCxlLmdldCgiYXhpc1RpY2suaW5zaWRlIikmJihhLnRpY2tEaXJlY3Rpb249LWEudGlja0RpcmVjdGlvbiksVyhpLmxhYmVsSW5zaWRlLGUuZ2V0KCJheGlzTGFiZWwuaW5zaWRlIikpJiYoYS5sYWJlbERpcmVjdGlvbj0tYS5sYWJlbERpcmVjdGlvbik7dmFyIG09ZS5nZXQoImF4aXNMYWJlbC5yb3RhdGUiKTtyZXR1cm4gYS5sYWJlbFJvdGF0ZT0idG9wIj09PWw/LW06bSxhLnoyPTEsYX1odi5yZWdpc3RlckF4aXNQb2ludGVyQ2xhc3M9ZnVuY3Rpb24odCxlKXtmdlt0XT1lfSxodi5nZXRBeGlzUG9pbnRlckNsYXNzPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZmdlt0XX07dmFyIGd2PVsiYXhpc0xpbmUiLCJheGlzVGlja0xhYmVsIiwiYXhpc05hbWUiXSxtdj1bInNwbGl0QXJlYSIsInNwbGl0TGluZSIsIm1pbm9yU3BsaXRMaW5lIl0sdnY9aHYuZXh0ZW5kKHt0eXBlOiJjYXJ0ZXNpYW5BeGlzIixheGlzUG9pbnRlckNsYXNzOiJDYXJ0ZXNpYW5BeGlzUG9pbnRlciIscmVuZGVyOmZ1bmN0aW9uKGUsdCxpLG4pe3RoaXMuZ3JvdXAucmVtb3ZlQWxsKCk7dmFyIG89dGhpcy5fYXhpc0dyb3VwO2lmKHRoaXMuX2F4aXNHcm91cD1uZXcgSWksdGhpcy5ncm91cC5hZGQodGhpcy5fYXhpc0dyb3VwKSxlLmdldCgic2hvdyIpKXt2YXIgYT1lLmdldENvb3JkU3lzTW9kZWwoKSxyPXB2KGEsZSkscz1uZXcgWW0oZSxyKTtFKGd2LHMuYWRkLHMpLHRoaXMuX2F4aXNHcm91cC5hZGQocy5nZXRHcm91cCgpKSxFKG12LGZ1bmN0aW9uKHQpe2UuZ2V0KHQrIi5zaG93IikmJnRoaXNbIl8iK3RdKGUsYSl9LHRoaXMpLGRsKG8sdGhpcy5fYXhpc0dyb3VwLGUpLHZ2LnN1cGVyQ2FsbCh0aGlzLCJyZW5kZXIiLGUsdCxpLG4pfX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fc3BsaXRBcmVhQ29sb3JzPW51bGx9LF9zcGxpdExpbmU6ZnVuY3Rpb24odCxlKXt2YXIgaT10LmF4aXM7aWYoIWkuc2NhbGUuaXNCbGFuaygpKXt2YXIgbj10LmdldE1vZGVsKCJzcGxpdExpbmUiKSxvPW4uZ2V0TW9kZWwoImxpbmVTdHlsZSIpLGE9by5nZXQoImNvbG9yIik7YT1rKGEpP2E6W2FdO2Zvcih2YXIgcj1lLmNvb3JkaW5hdGVTeXN0ZW0uZ2V0UmVjdCgpLHM9aS5pc0hvcml6b250YWwoKSxsPTAsdT1pLmdldFRpY2tzQ29vcmRzKHt0aWNrTW9kZWw6bn0pLGg9W10sYz1bXSxkPW8uZ2V0TGluZVN0eWxlKCksZj0wO2Y8dS5sZW5ndGg7ZisrKXt2YXIgcD1pLnRvR2xvYmFsQ29vcmQodVtmXS5jb29yZCk7cz8oaFswXT1wLGhbMV09ci55LGNbMF09cCxjWzFdPXIueStyLmhlaWdodCk6KGhbMF09ci54LGhbMV09cCxjWzBdPXIueCtyLndpZHRoLGNbMV09cCk7dmFyIGc9bCsrJWEubGVuZ3RoLG09dVtmXS50aWNrVmFsdWU7dGhpcy5fYXhpc0dyb3VwLmFkZChuZXcgb3Moe2FuaWQ6bnVsbCE9bT8ibGluZV8iK3VbZl0udGlja1ZhbHVlOm51bGwsc3ViUGl4ZWxPcHRpbWl6ZTohMCxzaGFwZTp7eDE6aFswXSx5MTpoWzFdLHgyOmNbMF0seTI6Y1sxXX0sc3R5bGU6Qyh7c3Ryb2tlOmFbZ119LGQpLHNpbGVudDohMH0pKX19fSxfbWlub3JTcGxpdExpbmU6ZnVuY3Rpb24odCxlKXt2YXIgaT10LmF4aXMsbj10LmdldE1vZGVsKCJtaW5vclNwbGl0TGluZSIpLmdldE1vZGVsKCJsaW5lU3R5bGUiKSxvPWUuY29vcmRpbmF0ZVN5c3RlbS5nZXRSZWN0KCksYT1pLmlzSG9yaXpvbnRhbCgpLHI9aS5nZXRNaW5vclRpY2tzQ29vcmRzKCk7aWYoci5sZW5ndGgpZm9yKHZhciBzPVtdLGw9W10sdT1uLmdldExpbmVTdHlsZSgpLGg9MDtoPHIubGVuZ3RoO2grKylmb3IodmFyIGM9MDtjPHJbaF0ubGVuZ3RoO2MrKyl7dmFyIGQ9aS50b0dsb2JhbENvb3JkKHJbaF1bY10uY29vcmQpO2E/KHNbMF09ZCxzWzFdPW8ueSxsWzBdPWQsbFsxXT1vLnkrby5oZWlnaHQpOihzWzBdPW8ueCxzWzFdPWQsbFswXT1vLngrby53aWR0aCxsWzFdPWQpLHRoaXMuX2F4aXNHcm91cC5hZGQobmV3IG9zKHthbmlkOiJtaW5vcl9saW5lXyIrcltoXVtjXS50aWNrVmFsdWUsc3ViUGl4ZWxPcHRpbWl6ZTohMCxzaGFwZTp7eDE6c1swXSx5MTpzWzFdLHgyOmxbMF0seTI6bFsxXX0sc3R5bGU6dSxzaWxlbnQ6ITB9KSl9fSxfc3BsaXRBcmVhOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5heGlzO2lmKCFpLnNjYWxlLmlzQmxhbmsoKSl7dmFyIG49dC5nZXRNb2RlbCgic3BsaXRBcmVhIiksbz1uLmdldE1vZGVsKCJhcmVhU3R5bGUiKSxhPW8uZ2V0KCJjb2xvciIpLHI9ZS5jb29yZGluYXRlU3lzdGVtLmdldFJlY3QoKSxzPWkuZ2V0VGlja3NDb29yZHMoe3RpY2tNb2RlbDpuLGNsYW1wOiEwfSk7aWYocy5sZW5ndGgpe3ZhciBsPWEubGVuZ3RoLHU9dGhpcy5fc3BsaXRBcmVhQ29sb3JzLGg9USgpLGM9MDtpZih1KWZvcih2YXIgZD0wO2Q8cy5sZW5ndGg7ZCsrKXt2YXIgZj11LmdldChzW2RdLnRpY2tWYWx1ZSk7aWYobnVsbCE9Zil7Yz0oZisobC0xKSpkKSVsO2JyZWFrfX12YXIgcD1pLnRvR2xvYmFsQ29vcmQoc1swXS5jb29yZCksZz1vLmdldEFyZWFTdHlsZSgpO2E9ayhhKT9hOlthXTtmb3IoZD0xO2Q8cy5sZW5ndGg7ZCsrKXt2YXIgbSx2LHkseCxfPWkudG9HbG9iYWxDb29yZChzW2RdLmNvb3JkKTtwPWkuaXNIb3Jpem9udGFsKCk/KG09cCx2PXIueSx5PV8tbSx4PXIuaGVpZ2h0LG0reSk6KG09ci54LHY9cCx5PXIud2lkdGgsdisoeD1fLXYpKTt2YXIgdz1zW2QtMV0udGlja1ZhbHVlO251bGwhPXcmJmguc2V0KHcsYyksdGhpcy5fYXhpc0dyb3VwLmFkZChuZXcgaXMoe2FuaWQ6bnVsbCE9dz8iYXJlYV8iK3c6bnVsbCxzaGFwZTp7eDptLHk6dix3aWR0aDp5LGhlaWdodDp4fSxzdHlsZTpDKHtmaWxsOmFbY119LGcpLHNpbGVudDohMH0pKSxjPShjKzEpJWx9dGhpcy5fc3BsaXRBcmVhQ29sb3JzPWh9fX19KTt2di5leHRlbmQoe3R5cGU6InhBeGlzIn0pLHZ2LmV4dGVuZCh7dHlwZToieUF4aXMifSksYmYoe3R5cGU6ImdyaWQiLHJlbmRlcjpmdW5jdGlvbih0LGUpe3RoaXMuZ3JvdXAucmVtb3ZlQWxsKCksdC5nZXQoInNob3ciKSYmdGhpcy5ncm91cC5hZGQobmV3IGlzKHtzaGFwZTp0LmNvb3JkaW5hdGVTeXN0ZW0uZ2V0UmVjdCgpLHN0eWxlOkMoe2ZpbGw6dC5nZXQoImJhY2tncm91bmRDb2xvciIpfSx0LmdldEl0ZW1TdHlsZSgpKSxzaWxlbnQ6ITAsejI6LTF9KSl9fSksZmYoZnVuY3Rpb24odCl7dC54QXhpcyYmdC55QXhpcyYmIXQuZ3JpZCYmKHQuZ3JpZD17fSl9KSx5ZihNbSgibGluZSIsImNpcmNsZSIsImxpbmUiKSksdmYoSW0oImxpbmUiKSkscGYoSWQuUFJPQ0VTU09SLlNUQVRJU1RJQyx7c2VyaWVzVHlwZToibGluZSIsbW9kaWZ5T3V0cHV0RW5kOiEwLHJlc2V0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldERhdGEoKSxvPXQuZ2V0KCJzYW1wbGluZyIpLGE9dC5jb29yZGluYXRlU3lzdGVtO2lmKCJjYXJ0ZXNpYW4yZCI9PT1hLnR5cGUmJm8pe3ZhciByLHM9YS5nZXRCYXNlQXhpcygpLGw9YS5nZXRPdGhlckF4aXMocyksdT1zLmdldEV4dGVudCgpLGg9dVsxXS11WzBdLGM9TWF0aC5yb3VuZChuLmNvdW50KCkvaCk7MTxjJiYoInN0cmluZyI9PXR5cGVvZiBvP3I9QW1bb106ImZ1bmN0aW9uIj09dHlwZW9mIG8mJihyPW8pLHImJnQuc2V0RGF0YShuLmRvd25TYW1wbGUobi5tYXBEaW1lbnNpb24obC5kaW0pLDEvYyxyLFRtKSkpfX19KTt2YXIgeXY9aWMuZXh0ZW5kKHt0eXBlOiJzZXJpZXMuX19iYXNlX2Jhcl9fIixnZXRJbml0aWFsRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiBocCh0aGlzLmdldFNvdXJjZSgpLHRoaXMse3VzZUVuY29kZURlZmF1bHRlcjohMH0pfSxnZXRNYXJrZXJQb3NpdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvb3JkaW5hdGVTeXN0ZW07aWYoZSl7dmFyIGk9ZS5kYXRhVG9Qb2ludChlLmNsYW1wRGF0YSh0KSksbj10aGlzLmdldERhdGEoKSxvPW4uZ2V0TGF5b3V0KCJvZmZzZXQiKSxhPW4uZ2V0TGF5b3V0KCJzaXplIik7cmV0dXJuIGlbZS5nZXRCYXNlQXhpcygpLmlzSG9yaXpvbnRhbCgpPzA6MV0rPW8rYS8yLGl9cmV0dXJuW05hTixOYU5dfSxkZWZhdWx0T3B0aW9uOnt6bGV2ZWw6MCx6OjIsY29vcmRpbmF0ZVN5c3RlbToiY2FydGVzaWFuMmQiLGxlZ2VuZEhvdmVyTGluazohMCxiYXJNaW5IZWlnaHQ6MCxiYXJNaW5BbmdsZTowLGxhcmdlOiExLGxhcmdlVGhyZXNob2xkOjQwMCxwcm9ncmVzc2l2ZTozZTMscHJvZ3Jlc3NpdmVDaHVua01vZGU6Im1vZCIsaXRlbVN0eWxlOnt9LGVtcGhhc2lzOnt9fX0pO2Z1bmN0aW9uIHh2KHQsZSxpLG4sbyxhKXskcyh0LGUsaS5nZXRNb2RlbCgibGFiZWwiKSxpLmdldE1vZGVsKCJlbXBoYXNpcy5sYWJlbCIpLHtsYWJlbEZldGNoZXI6byxsYWJlbERhdGFJbmRleDphLGRlZmF1bHRUZXh0OkdnKG8uZ2V0RGF0YSgpLGEpLGlzUmVjdFRleHQ6ITAsYXV0b0NvbG9yOm59KSxfdih0KSxfdihlKX1mdW5jdGlvbiBfdih0LGUpeyJvdXRzaWRlIj09PXQudGV4dFBvc2l0aW9uJiYodC50ZXh0UG9zaXRpb249ZSl9eXYuZXh0ZW5kKHt0eXBlOiJzZXJpZXMuYmFyIixkZXBlbmRlbmNpZXM6WyJncmlkIiwicG9sYXIiXSxicnVzaFNlbGVjdG9yOiJyZWN0IixnZXRQcm9ncmVzc2l2ZTpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5nZXQoImxhcmdlIikmJnRoaXMuZ2V0KCJwcm9ncmVzc2l2ZSIpfSxnZXRQcm9ncmVzc2l2ZVRocmVzaG9sZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0KCJwcm9ncmVzc2l2ZVRocmVzaG9sZCIpLGU9dGhpcy5nZXQoImxhcmdlVGhyZXNob2xkIik7cmV0dXJuIHQ8ZSYmKHQ9ZSksdH0sZGVmYXVsdE9wdGlvbjp7Y2xpcDohMCxyb3VuZENhcDohMX19KTt2YXIgd3Y9cmEoW1siZmlsbCIsImNvbG9yIl0sWyJzdHJva2UiLCJib3JkZXJDb2xvciJdLFsibGluZVdpZHRoIiwiYm9yZGVyV2lkdGgiXSxbInN0cm9rZSIsImJhckJvcmRlckNvbG9yIl0sWyJsaW5lV2lkdGgiLCJiYXJCb3JkZXJXaWR0aCJdLFsib3BhY2l0eSJdLFsic2hhZG93Qmx1ciJdLFsic2hhZG93T2Zmc2V0WCJdLFsic2hhZG93T2Zmc2V0WSJdLFsic2hhZG93Q29sb3IiXV0pLGJ2PXtnZXRCYXJJdGVtU3R5bGU6ZnVuY3Rpb24odCl7dmFyIGU9d3YodGhpcyx0KTtpZih0aGlzLmdldEJvcmRlckxpbmVEYXNoKXt2YXIgaT10aGlzLmdldEJvcmRlckxpbmVEYXNoKCk7aSYmKGUubGluZURhc2g9aSl9cmV0dXJuIGV9fSxTdj1Jcyh7dHlwZToic2F1c2FnZSIsc2hhcGU6e2N4OjAsY3k6MCxyMDowLHI6MCxzdGFydEFuZ2xlOjAsZW5kQW5nbGU6MipNYXRoLlBJLGNsb2Nrd2lzZTohMH0sYnVpbGRQYXRoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5jeCxuPWUuY3ksbz1NYXRoLm1heChlLnIwfHwwLDApLGE9TWF0aC5tYXgoZS5yLDApLHI9LjUqKGEtbykscz1vK3IsbD1lLnN0YXJ0QW5nbGUsdT1lLmVuZEFuZ2xlLGg9ZS5jbG9ja3dpc2UsYz1NYXRoLmNvcyhsKSxkPU1hdGguc2luKGwpLGY9TWF0aC5jb3ModSkscD1NYXRoLnNpbih1KTsoaD91LWw8MipNYXRoLlBJOmwtdTwyKk1hdGguUEkpJiYodC5tb3ZlVG8oYypvK2ksZCpvK24pLHQuYXJjKGMqcytpLGQqcytuLHIsLU1hdGguUEkrbCxsLCFoKSksdC5hcmMoaSxuLGEsbCx1LCFoKSx0Lm1vdmVUbyhmKmEraSxwKmErbiksdC5hcmMoZipzK2kscCpzK24scix1LTIqTWF0aC5QSSx1LU1hdGguUEksIWgpLDAhPT1vJiYodC5hcmMoaSxuLG8sdSxsLGgpLHQubW92ZVRvKGMqbytpLHAqbytuKSksdC5jbG9zZVBhdGgoKX19KSxNdj1bIml0ZW1TdHlsZSIsImJhckJvcmRlcldpZHRoIl0sSXY9WzAsMF07TChJbC5wcm90b3R5cGUsYnYpLE1mKHt0eXBlOiJiYXIiLHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dGhpcy5fdXBkYXRlRHJhd01vZGUodCk7dmFyIG49dC5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKTtyZXR1cm4iY2FydGVzaWFuMmQiIT09biYmInBvbGFyIiE9PW58fCh0aGlzLl9pc0xhcmdlRHJhdz90aGlzLl9yZW5kZXJMYXJnZSh0LGUsaSk6dGhpcy5fcmVuZGVyTm9ybWFsKHQsZSxpKSksdGhpcy5ncm91cH0saW5jcmVtZW50YWxQcmVwYXJlUmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLl9jbGVhcigpLHRoaXMuX3VwZGF0ZURyYXdNb2RlKHQpfSxpbmNyZW1lbnRhbFJlbmRlcjpmdW5jdGlvbih0LGUsaSxuKXt0aGlzLl9pbmNyZW1lbnRhbFJlbmRlckxhcmdlKHQsZSl9LF91cGRhdGVEcmF3TW9kZTpmdW5jdGlvbih0KXt2YXIgZT10LnBpcGVsaW5lQ29udGV4dC5sYXJnZTsobnVsbD09dGhpcy5faXNMYXJnZURyYXd8fGVedGhpcy5faXNMYXJnZURyYXcpJiYodGhpcy5faXNMYXJnZURyYXc9ZSx0aGlzLl9jbGVhcigpKX0sX3JlbmRlck5vcm1hbDpmdW5jdGlvbihhLHQsZSl7dmFyIHIscz10aGlzLmdyb3VwLGw9YS5nZXREYXRhKCksdT10aGlzLl9kYXRhLGg9YS5jb29yZGluYXRlU3lzdGVtLGk9aC5nZXRCYXNlQXhpcygpOyJjYXJ0ZXNpYW4yZCI9PT1oLnR5cGU/cj1pLmlzSG9yaXpvbnRhbCgpOiJwb2xhciI9PT1oLnR5cGUmJihyPSJhbmdsZSI9PT1pLmRpbSk7dmFyIGM9YS5pc0FuaW1hdGlvbkVuYWJsZWQoKT9hOm51bGwsZD1hLmdldCgiY2xpcCIsITApLGY9ZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldEFyZWEmJnQuZ2V0QXJlYSgpO2lmKCJjYXJ0ZXNpYW4yZCI9PT10LnR5cGUpe3ZhciBuPXQuZ2V0QmFzZUF4aXMoKTtpZigiY2F0ZWdvcnkiIT09bi50eXBlfHwhbi5vbkJhbmQpe3ZhciBvPWUuZ2V0TGF5b3V0KCJiYW5kV2lkdGgiKTtuLmlzSG9yaXpvbnRhbCgpPyhpLngtPW8saS53aWR0aCs9MipvKTooaS55LT1vLGkuaGVpZ2h0Kz0yKm8pfX1yZXR1cm4gaX0oaCxsKTtzLnJlbW92ZUNsaXBQYXRoKCk7dmFyIHA9YS5nZXQoInJvdW5kQ2FwIiwhMCk7bC5kaWZmKHUpLmFkZChmdW5jdGlvbih0KXtpZihsLmhhc1ZhbHVlKHQpKXt2YXIgZT1sLmdldEl0ZW1Nb2RlbCh0KSxpPVB2W2gudHlwZV0obCx0LGUpO2lmKGQpaWYoRHZbaC50eXBlXShmLGkpKXJldHVybiB2b2lkIHMucmVtb3ZlKG4pO3ZhciBuPUN2W2gudHlwZV0odCxpLHIsYywhMSxwKTtsLnNldEl0ZW1HcmFwaGljRWwodCxuKSxzLmFkZChuKSxPdihuLGwsdCxlLGksYSxyLCJwb2xhciI9PT1oLnR5cGUpfX0pLnVwZGF0ZShmdW5jdGlvbih0LGUpe3ZhciBpPXUuZ2V0SXRlbUdyYXBoaWNFbChlKTtpZihsLmhhc1ZhbHVlKHQpKXt2YXIgbj1sLmdldEl0ZW1Nb2RlbCh0KSxvPVB2W2gudHlwZV0obCx0LG4pO2lmKGQpaWYoRHZbaC50eXBlXShmLG8pKXJldHVybiB2b2lkIHMucmVtb3ZlKGkpO2k/c2woaSx7c2hhcGU6b30sYyx0KTppPUN2W2gudHlwZV0odCxvLHIsYywhMCxwKSxsLnNldEl0ZW1HcmFwaGljRWwodCxpKSxzLmFkZChpKSxPdihpLGwsdCxuLG8sYSxyLCJwb2xhciI9PT1oLnR5cGUpfWVsc2Ugcy5yZW1vdmUoaSl9KS5yZW1vdmUoZnVuY3Rpb24odCl7dmFyIGU9dS5nZXRJdGVtR3JhcGhpY0VsKHQpOyJjYXJ0ZXNpYW4yZCI9PT1oLnR5cGU/ZSYmTHYodCxjLGUpOmUmJmt2KHQsYyxlKX0pLmV4ZWN1dGUoKSx0aGlzLl9kYXRhPWx9LF9yZW5kZXJMYXJnZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5fY2xlYXIoKSx6dih0LHRoaXMuZ3JvdXApO3ZhciBuPXQuZ2V0KCJjbGlwIiwhMCk/eW0odC5jb29yZGluYXRlU3lzdGVtLCExLHQpOm51bGw7bj90aGlzLmdyb3VwLnNldENsaXBQYXRoKG4pOnRoaXMuZ3JvdXAucmVtb3ZlQ2xpcFBhdGgoKX0sX2luY3JlbWVudGFsUmVuZGVyTGFyZ2U6ZnVuY3Rpb24odCxlKXt6dihlLHRoaXMuZ3JvdXAsITApfSxkaXNwb3NlOmV0LHJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLl9jbGVhcih0KX0sX2NsZWFyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ3JvdXAsaT10aGlzLl9kYXRhO2UmJmUuZ2V0KCJhbmltYXRpb24iKSYmaSYmIXRoaXMuX2lzTGFyZ2VEcmF3P2kuZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCl7InNlY3RvciI9PT10LnR5cGU/a3YodC5kYXRhSW5kZXgsZSx0KTpMdih0LmRhdGFJbmRleCxlLHQpfSk6dC5yZW1vdmVBbGwoKSx0aGlzLl9kYXRhPW51bGx9fSk7dmFyIFR2PU1hdGgubWF4LEF2PU1hdGgubWluLER2PXtjYXJ0ZXNpYW4yZDpmdW5jdGlvbih0LGUpe3ZhciBpPWUud2lkdGg8MD8tMToxLG49ZS5oZWlnaHQ8MD8tMToxO2k8MCYmKGUueCs9ZS53aWR0aCxlLndpZHRoPS1lLndpZHRoKSxuPDAmJihlLnkrPWUuaGVpZ2h0LGUuaGVpZ2h0PS1lLmhlaWdodCk7dmFyIG89VHYoZS54LHQueCksYT1BdihlLngrZS53aWR0aCx0LngrdC53aWR0aCkscj1UdihlLnksdC55KSxzPUF2KGUueStlLmhlaWdodCx0LnkrdC5oZWlnaHQpO2UueD1vLGUueT1yLGUud2lkdGg9YS1vLGUuaGVpZ2h0PXMtcjt2YXIgbD1lLndpZHRoPDB8fGUuaGVpZ2h0PDA7cmV0dXJuIGk8MCYmKGUueCs9ZS53aWR0aCxlLndpZHRoPS1lLndpZHRoKSxuPDAmJihlLnkrPWUuaGVpZ2h0LGUuaGVpZ2h0PS1lLmhlaWdodCksbH0scG9sYXI6ZnVuY3Rpb24odCl7cmV0dXJuITF9fSxDdj17Y2FydGVzaWFuMmQ6ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1uZXcgaXMoe3NoYXBlOkwoe30sZSl9KTtpZihuKXt2YXIgcj1pPyJoZWlnaHQiOiJ3aWR0aCIscz17fTthLnNoYXBlW3JdPTAsc1tyXT1lW3JdLHlsW28/InVwZGF0ZVByb3BzIjoiaW5pdFByb3BzIl0oYSx7c2hhcGU6c30sbix0KX1yZXR1cm4gYX0scG9sYXI6ZnVuY3Rpb24odCxlLGksbixvLGEpe3ZhciByPWUuc3RhcnRBbmdsZTxlLmVuZEFuZ2xlLHM9bmV3KCFpJiZhP1N2OlVyKSh7c2hhcGU6Qyh7Y2xvY2t3aXNlOnJ9LGUpfSk7aWYobil7dmFyIGw9aT8iciI6ImVuZEFuZ2xlIix1PXt9O3Muc2hhcGVbbF09aT8wOmUuc3RhcnRBbmdsZSx1W2xdPWVbbF0seWxbbz8idXBkYXRlUHJvcHMiOiJpbml0UHJvcHMiXShzLHtzaGFwZTp1fSxuLHQpfXJldHVybiBzfX07ZnVuY3Rpb24gTHYodCxlLGkpe2kuc3R5bGUudGV4dD1udWxsLHNsKGkse3NoYXBlOnt3aWR0aDowfX0sZSx0LGZ1bmN0aW9uKCl7aS5wYXJlbnQmJmkucGFyZW50LnJlbW92ZShpKX0pfWZ1bmN0aW9uIGt2KHQsZSxpKXtpLnN0eWxlLnRleHQ9bnVsbCxzbChpLHtzaGFwZTp7cjppLnNoYXBlLnIwfX0sZSx0LGZ1bmN0aW9uKCl7aS5wYXJlbnQmJmkucGFyZW50LnJlbW92ZShpKX0pfXZhciBQdj17Y2FydGVzaWFuMmQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuZ2V0SXRlbUxheW91dChlKSxvPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXQoTXYpfHwwO3JldHVybiBNYXRoLm1pbihpLE1hdGguYWJzKGUud2lkdGgpLE1hdGguYWJzKGUuaGVpZ2h0KSl9KGksbiksYT0wPG4ud2lkdGg/MTotMSxyPTA8bi5oZWlnaHQ/MTotMTtyZXR1cm57eDpuLngrYSpvLzIseTpuLnkrcipvLzIsd2lkdGg6bi53aWR0aC1hKm8saGVpZ2h0Om4uaGVpZ2h0LXIqb319LHBvbGFyOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldEl0ZW1MYXlvdXQoZSk7cmV0dXJue2N4Om4uY3gsY3k6bi5jeSxyMDpuLnIwLHI6bi5yLHN0YXJ0QW5nbGU6bi5zdGFydEFuZ2xlLGVuZEFuZ2xlOm4uZW5kQW5nbGV9fX07ZnVuY3Rpb24gTnYodCl7cmV0dXJuIG51bGwhPXQuc3RhcnRBbmdsZSYmbnVsbCE9dC5lbmRBbmdsZSYmdC5zdGFydEFuZ2xlPT09dC5lbmRBbmdsZX1mdW5jdGlvbiBPdih0LGUsaSxuLG8sYSxyLHMpe3ZhciBsPWUuZ2V0SXRlbVZpc3VhbChpLCJjb2xvciIpLHU9ZS5nZXRJdGVtVmlzdWFsKGksIm9wYWNpdHkiKSxoPWUuZ2V0VmlzdWFsKCJib3JkZXJDb2xvciIpLGM9bi5nZXRNb2RlbCgiaXRlbVN0eWxlIiksZD1uLmdldE1vZGVsKCJlbXBoYXNpcy5pdGVtU3R5bGUiKS5nZXRCYXJJdGVtU3R5bGUoKTtzfHx0LnNldFNoYXBlKCJyIixjLmdldCgiYmFyQm9yZGVyUmFkaXVzIil8fDApLHQudXNlU3R5bGUoQyh7c3Ryb2tlOk52KG8pPyJub25lIjpoLGZpbGw6TnYobyk/Im5vbmUiOmwsb3BhY2l0eTp1fSxjLmdldEJhckl0ZW1TdHlsZSgpKSk7dmFyIGY9bi5nZXRTaGFsbG93KCJjdXJzb3IiKTtmJiZ0LmF0dHIoImN1cnNvciIsZik7cj9vLmhlaWdodDpvLndpZHRoO3N8fHh2KHQuc3R5bGUsZCxuLGwsYSxpKSxOdihvKSYmKGQuZmlsbD1kLnN0cm9rZT0ibm9uZSIpLFlzKHQsZCl9dmFyIEV2PVNyLmV4dGVuZCh7dHlwZToibGFyZ2VCYXIiLHNoYXBlOntwb2ludHM6W119LGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT1lLnBvaW50cyxuPXRoaXMuX19zdGFydFBvaW50LG89dGhpcy5fX2Jhc2VEaW1JZHgsYT0wO2E8aS5sZW5ndGg7YSs9MiluW29dPWlbYStvXSx0Lm1vdmVUbyhuWzBdLG5bMV0pLHQubGluZVRvKGlbYV0saVthKzFdKX19KTtmdW5jdGlvbiB6dih0LGUsaSl7dmFyIG49dC5nZXREYXRhKCksbz1bXSxhPW4uZ2V0TGF5b3V0KCJ2YWx1ZUF4aXNIb3Jpem9udGFsIik/MTowO29bMS1hXT1uLmdldExheW91dCgidmFsdWVBeGlzU3RhcnQiKTt2YXIgcj1uZXcgRXYoe3NoYXBlOntwb2ludHM6bi5nZXRMYXlvdXQoImxhcmdlUG9pbnRzIil9LGluY3JlbWVudGFsOiEhaSxfX3N0YXJ0UG9pbnQ6byxfX2Jhc2VEaW1JZHg6YSxfX2xhcmdlRGF0YUluZGljZXM6bi5nZXRMYXlvdXQoImxhcmdlRGF0YUluZGljZXMiKSxfX2JhcldpZHRoOm4uZ2V0TGF5b3V0KCJiYXJXaWR0aCIpfSk7ZS5hZGQociksZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkuZ2V0VmlzdWFsKCJib3JkZXJDb2xvciIpfHxpLmdldFZpc3VhbCgiY29sb3IiKSxvPWUuZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZShbImNvbG9yIiwiYm9yZGVyQ29sb3IiXSk7dC51c2VTdHlsZShvKSx0LnN0eWxlLmZpbGw9bnVsbCx0LnN0eWxlLnN0cm9rZT1uLHQuc3R5bGUubGluZVdpZHRoPWkuZ2V0TGF5b3V0KCJiYXJXaWR0aCIpfShyLHQsbiksci5zZXJpZXNJbmRleD10LnNlcmllc0luZGV4LHQuZ2V0KCJzaWxlbnQiKXx8KHIub24oIm1vdXNlZG93biIsUnYpLHIub24oIm1vdXNlbW92ZSIsUnYpKX12YXIgUnY9SWMoZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuX19iYXNlRGltSWR4LG89MS1uLGE9dC5zaGFwZS5wb2ludHMscj10Ll9fbGFyZ2VEYXRhSW5kaWNlcyxzPU1hdGguYWJzKHQuX19iYXJXaWR0aC8yKSxsPXQuX19zdGFydFBvaW50W29dO0l2WzBdPWUsSXZbMV09aTtmb3IodmFyIHU9SXZbbl0saD1JdlsxLW5dLGM9dS1zLGQ9dStzLGY9MCxwPWEubGVuZ3RoLzI7ZjxwO2YrKyl7dmFyIGc9MipmLG09YVtnK25dLHY9YVtnK29dO2lmKGM8PW0mJm08PWQmJihsPD12P2w8PWgmJmg8PXY6djw9aCYmaDw9bCkpcmV0dXJuIHJbZl19cmV0dXJuLTF9KHRoaXMsdC5vZmZzZXRYLHQub2Zmc2V0WSk7dGhpcy5kYXRhSW5kZXg9MDw9ZT9lOm51bGx9LDMwLCExKTt2ZihJZC5WSVNVQUwuTEFZT1VULFQoUHAsImJhciIpKSx2ZihJZC5WSVNVQUwuUFJPR1JFU1NJVkVfTEFZT1VULE5wKSx5Zih7c2VyaWVzVHlwZToiYmFyIixyZXNldDpmdW5jdGlvbih0KXt0LmdldERhdGEoKS5zZXRWaXN1YWwoImxlZ2VuZFN5bWJvbCIsInJvdW5kUmVjdCIpfX0pO2Z1bmN0aW9uIEJ2KHQsZSxpKXtlPWsoZSkmJntjb29yZERpbWVuc2lvbnM6ZX18fEwoe30sZSk7dmFyIG49dC5nZXRTb3VyY2UoKSxvPW5wKG4sZSksYT1uZXcgV2Yobyx0KTtyZXR1cm4gYS5pbml0RGF0YShuLGkpLGF9dmFyIFZ2PXt1cGRhdGVTZWxlY3RlZE1hcDpmdW5jdGlvbih0KXt0aGlzLl90YXJnZXRMaXN0PWsodCk/dC5zbGljZSgpOltdLHRoaXMuX3NlbGVjdFRhcmdldE1hcD1TKHR8fFtdLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc2V0KGUubmFtZSxlKSx0fSxRKCkpfSxzZWxlY3Q6ZnVuY3Rpb24odCxlKXt2YXIgaT1udWxsIT1lP3RoaXMuX3RhcmdldExpc3RbZV06dGhpcy5fc2VsZWN0VGFyZ2V0TWFwLmdldCh0KTsic2luZ2xlIj09PXRoaXMuZ2V0KCJzZWxlY3RlZE1vZGUiKSYmdGhpcy5fc2VsZWN0VGFyZ2V0TWFwLmVhY2goZnVuY3Rpb24odCl7dC5zZWxlY3RlZD0hMX0pLGkmJihpLnNlbGVjdGVkPSEwKX0sdW5TZWxlY3Q6ZnVuY3Rpb24odCxlKXt2YXIgaT1udWxsIT1lP3RoaXMuX3RhcmdldExpc3RbZV06dGhpcy5fc2VsZWN0VGFyZ2V0TWFwLmdldCh0KTtpJiYoaS5zZWxlY3RlZD0hMSl9LHRvZ2dsZVNlbGVjdGVkOmZ1bmN0aW9uKHQsZSl7dmFyIGk9bnVsbCE9ZT90aGlzLl90YXJnZXRMaXN0W2VdOnRoaXMuX3NlbGVjdFRhcmdldE1hcC5nZXQodCk7aWYobnVsbCE9aSlyZXR1cm4gdGhpc1tpLnNlbGVjdGVkPyJ1blNlbGVjdCI6InNlbGVjdCJdKHQsZSksaS5zZWxlY3RlZH0saXNTZWxlY3RlZDpmdW5jdGlvbih0LGUpe3ZhciBpPW51bGwhPWU/dGhpcy5fdGFyZ2V0TGlzdFtlXTp0aGlzLl9zZWxlY3RUYXJnZXRNYXAuZ2V0KHQpO3JldHVybiBpJiZpLnNlbGVjdGVkfX07ZnVuY3Rpb24gR3YoaSxlKXt0aGlzLmdldEFsbE5hbWVzPWZ1bmN0aW9uKCl7dmFyIHQ9ZSgpO3JldHVybiB0Lm1hcEFycmF5KHQuZ2V0TmFtZSl9LHRoaXMuY29udGFpbk5hbWU9ZnVuY3Rpb24odCl7cmV0dXJuIDA8PWUoKS5pbmRleE9mTmFtZSh0KX0sdGhpcy5pbmRleE9mTmFtZT1mdW5jdGlvbih0KXtyZXR1cm4gaSgpLmluZGV4T2ZOYW1lKHQpfSx0aGlzLmdldEl0ZW1WaXN1YWw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gaSgpLmdldEl0ZW1WaXN1YWwodCxlKX19dmFyIEZ2PVNmKHt0eXBlOiJzZXJpZXMucGllIixpbml0OmZ1bmN0aW9uKHQpe0Z2LnN1cGVyQXBwbHkodGhpcywiaW5pdCIsYXJndW1lbnRzKSx0aGlzLmxlZ2VuZFZpc3VhbFByb3ZpZGVyPW5ldyBHdihBKHRoaXMuZ2V0RGF0YSx0aGlzKSxBKHRoaXMuZ2V0UmF3RGF0YSx0aGlzKSksdGhpcy51cGRhdGVTZWxlY3RlZE1hcCh0aGlzLl9jcmVhdGVTZWxlY3RhYmxlTGlzdCgpKSx0aGlzLl9kZWZhdWx0TGFiZWxMaW5lKHQpfSxtZXJnZU9wdGlvbjpmdW5jdGlvbih0KXtGdi5zdXBlckNhbGwodGhpcywibWVyZ2VPcHRpb24iLHQpLHRoaXMudXBkYXRlU2VsZWN0ZWRNYXAodGhpcy5fY3JlYXRlU2VsZWN0YWJsZUxpc3QoKSl9LGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIEJ2KHRoaXMse2Nvb3JkRGltZW5zaW9uczpbInZhbHVlIl0sZW5jb2RlRGVmYXVsdGVyOlQoWXUsdGhpcyl9KX0sX2NyZWF0ZVNlbGVjdGFibGVMaXN0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZ2V0UmF3RGF0YSgpLGU9dC5tYXBEaW1lbnNpb24oInZhbHVlIiksaT1bXSxuPTAsbz10LmNvdW50KCk7bjxvO24rKylpLnB1c2goe25hbWU6dC5nZXROYW1lKG4pLHZhbHVlOnQuZ2V0KGUsbiksc2VsZWN0ZWQ6VmgodCxuLCJzZWxlY3RlZCIpfSk7cmV0dXJuIGl9LGdldERhdGFQYXJhbXM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXREYXRhKCksaT1Gdi5zdXBlckNhbGwodGhpcywiZ2V0RGF0YVBhcmFtcyIsdCksbj1bXTtyZXR1cm4gZS5lYWNoKGUubWFwRGltZW5zaW9uKCJ2YWx1ZSIpLGZ1bmN0aW9uKHQpe24ucHVzaCh0KX0pLGkucGVyY2VudD1CbChuLHQsZS5ob3N0TW9kZWwuZ2V0KCJwZXJjZW50UHJlY2lzaW9uIikpLGkuJHZhcnMucHVzaCgicGVyY2VudCIpLGl9LF9kZWZhdWx0TGFiZWxMaW5lOmZ1bmN0aW9uKHQpe3pvKHQsImxhYmVsTGluZSIsWyJzaG93Il0pO3ZhciBlPXQubGFiZWxMaW5lLGk9dC5lbXBoYXNpcy5sYWJlbExpbmU7ZS5zaG93PWUuc2hvdyYmdC5sYWJlbC5zaG93LGkuc2hvdz1pLnNob3cmJnQuZW1waGFzaXMubGFiZWwuc2hvd30sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGxlZ2VuZEhvdmVyTGluazohMCxob3ZlckFuaW1hdGlvbjohMCxjZW50ZXI6WyI1MCUiLCI1MCUiXSxyYWRpdXM6WzAsIjc1JSJdLGNsb2Nrd2lzZTohMCxzdGFydEFuZ2xlOjkwLG1pbkFuZ2xlOjAsbWluU2hvd0xhYmVsQW5nbGU6MCxzZWxlY3RlZE9mZnNldDoxMCxob3Zlck9mZnNldDoxMCxhdm9pZExhYmVsT3ZlcmxhcDohMCxwZXJjZW50UHJlY2lzaW9uOjIsc3RpbGxTaG93WmVyb1N1bTohMCxsZWZ0OjAsdG9wOjAscmlnaHQ6MCxib3R0b206MCx3aWR0aDpudWxsLGhlaWdodDpudWxsLGxhYmVsOntyb3RhdGU6ITEsc2hvdzohMCxwb3NpdGlvbjoib3V0ZXIiLGFsaWduVG86Im5vbmUiLG1hcmdpbjoiMjUlIixibGVlZE1hcmdpbjoxMCxkaXN0YW5jZVRvTGFiZWxMaW5lOjV9LGxhYmVsTGluZTp7c2hvdzohMCxsZW5ndGg6MTUsbGVuZ3RoMjoxNSxzbW9vdGg6ITEsbGluZVN0eWxlOnt3aWR0aDoxLHR5cGU6InNvbGlkIn19LGl0ZW1TdHlsZTp7Ym9yZGVyV2lkdGg6MX0sYW5pbWF0aW9uVHlwZToiZXhwYW5zaW9uIixhbmltYXRpb25UeXBlVXBkYXRlOiJ0cmFuc2l0aW9uIixhbmltYXRpb25FYXNpbmc6ImN1YmljT3V0In19KTtmdW5jdGlvbiBXdih0LGUsaSxuKXt2YXIgbz1lLmdldERhdGEoKSxhPXRoaXMuZGF0YUluZGV4LHI9by5nZXROYW1lKGEpLHM9ZS5nZXQoInNlbGVjdGVkT2Zmc2V0Iik7bi5kaXNwYXRjaEFjdGlvbih7dHlwZToicGllVG9nZ2xlU2VsZWN0Iixmcm9tOnQsbmFtZTpyLHNlcmllc0lkOmUuaWR9KSxvLmVhY2goZnVuY3Rpb24odCl7SHYoby5nZXRJdGVtR3JhcGhpY0VsKHQpLG8uZ2V0SXRlbUxheW91dCh0KSxlLmlzU2VsZWN0ZWQoby5nZXROYW1lKHQpKSxzLGkpfSl9ZnVuY3Rpb24gSHYodCxlLGksbixvKXt2YXIgYT0oZS5zdGFydEFuZ2xlK2UuZW5kQW5nbGUpLzIscj1pP246MCxzPVtNYXRoLmNvcyhhKSpyLE1hdGguc2luKGEpKnJdO28/dC5hbmltYXRlKCkud2hlbigyMDAse3Bvc2l0aW9uOnN9KS5zdGFydCgiYm91bmNlT3V0Iik6dC5hdHRyKCJwb3NpdGlvbiIscyl9ZnVuY3Rpb24gWnYodCxlKXtJaS5jYWxsKHRoaXMpO3ZhciBpPW5ldyBVcih7ejI6Mn0pLG49bmV3IEtyLG89bmV3IEZyO3RoaXMuYWRkKGkpLHRoaXMuYWRkKG4pLHRoaXMuYWRkKG8pLHRoaXMudXBkYXRlRGF0YSh0LGUsITApfWIoRnYsVnYpO3ZhciBVdj1adi5wcm90b3R5cGU7VXYudXBkYXRlRGF0YT1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5jaGlsZEF0KDApLG89dGhpcy5jaGlsZEF0KDEpLGE9dGhpcy5jaGlsZEF0KDIpLHI9dC5ob3N0TW9kZWwscz10LmdldEl0ZW1Nb2RlbChlKSxsPXQuZ2V0SXRlbUxheW91dChlKSx1PUwoe30sbCk7dS5sYWJlbD1udWxsO3ZhciBoPXIuZ2V0U2hhbGxvdygiYW5pbWF0aW9uVHlwZVVwZGF0ZSIpO2k/KG4uc2V0U2hhcGUodSksInNjYWxlIj09PXIuZ2V0U2hhbGxvdygiYW5pbWF0aW9uVHlwZSIpPyhuLnNoYXBlLnI9bC5yMCxsbChuLHtzaGFwZTp7cjpsLnJ9fSxyLGUpKToobi5zaGFwZS5lbmRBbmdsZT1sLnN0YXJ0QW5nbGUsc2wobix7c2hhcGU6e2VuZEFuZ2xlOmwuZW5kQW5nbGV9fSxyLGUpKSk6ImV4cGFuc2lvbiI9PT1oP24uc2V0U2hhcGUodSk6c2wobix7c2hhcGU6dX0scixlKTt2YXIgYz10LmdldEl0ZW1WaXN1YWwoZSwiY29sb3IiKTtuLnVzZVN0eWxlKEMoe2xpbmVKb2luOiJiZXZlbCIsZmlsbDpjfSxzLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKSkpLG4uaG92ZXJTdHlsZT1zLmdldE1vZGVsKCJlbXBoYXNpcy5pdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKTt2YXIgZD1zLmdldFNoYWxsb3coImN1cnNvciIpO2QmJm4uYXR0cigiY3Vyc29yIixkKSxIdih0aGlzLHQuZ2V0SXRlbUxheW91dChlKSxyLmlzU2VsZWN0ZWQobnVsbCxlKSxyLmdldCgic2VsZWN0ZWRPZmZzZXQiKSxyLmdldCgiYW5pbWF0aW9uIikpO3ZhciBmPSFpJiYidHJhbnNpdGlvbiI9PT1oO3RoaXMuX3VwZGF0ZUxhYmVsKHQsZSxmKSx0aGlzLmhpZ2hEb3duT25VcGRhdGU9cy5nZXQoImhvdmVyQW5pbWF0aW9uIikmJnIuaXNBbmltYXRpb25FbmFibGVkKCk/ZnVuY3Rpb24odCxlKXsiZW1waGFzaXMiPT09ZT8oby5pZ25vcmU9by5ob3Zlcklnbm9yZSxhLmlnbm9yZT1hLmhvdmVySWdub3JlLG4uc3RvcEFuaW1hdGlvbighMCksbi5hbmltYXRlVG8oe3NoYXBlOntyOmwucityLmdldCgiaG92ZXJPZmZzZXQiKX19LDMwMCwiZWxhc3RpY091dCIpKTooby5pZ25vcmU9by5ub3JtYWxJZ25vcmUsYS5pZ25vcmU9YS5ub3JtYWxJZ25vcmUsbi5zdG9wQW5pbWF0aW9uKCEwKSxuLmFuaW1hdGVUbyh7c2hhcGU6e3I6bC5yfX0sMzAwLCJlbGFzdGljT3V0IikpfTpudWxsLFlzKHRoaXMpfSxVdi5fdXBkYXRlTGFiZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuY2hpbGRBdCgxKSxvPXRoaXMuY2hpbGRBdCgyKSxhPXQuaG9zdE1vZGVsLHI9dC5nZXRJdGVtTW9kZWwoZSkscz10LmdldEl0ZW1MYXlvdXQoZSkubGFiZWwsbD10LmdldEl0ZW1WaXN1YWwoZSwiY29sb3IiKTtpZighc3x8aXNOYU4ocy54KXx8aXNOYU4ocy55KSlvLmlnbm9yZT1vLm5vcm1hbElnbm9yZT1vLmhvdmVySWdub3JlPW4uaWdub3JlPW4ubm9ybWFsSWdub3JlPW4uaG92ZXJJZ25vcmU9ITA7ZWxzZXt2YXIgdT17cG9pbnRzOnMubGluZVBvaW50c3x8W1tzLngscy55XSxbcy54LHMueV0sW3MueCxzLnldXX0saD17eDpzLngseTpzLnl9O2k/KHNsKG4se3NoYXBlOnV9LGEsZSksc2wobyx7c3R5bGU6aH0sYSxlKSk6KG4uYXR0cih7c2hhcGU6dX0pLG8uYXR0cih7c3R5bGU6aH0pKSxvLmF0dHIoe3JvdGF0aW9uOnMucm90YXRpb24sb3JpZ2luOltzLngscy55XSx6MjoxMH0pO3ZhciBjPXIuZ2V0TW9kZWwoImxhYmVsIiksZD1yLmdldE1vZGVsKCJlbXBoYXNpcy5sYWJlbCIpLGY9ci5nZXRNb2RlbCgibGFiZWxMaW5lIikscD1yLmdldE1vZGVsKCJlbXBoYXNpcy5sYWJlbExpbmUiKTtsPXQuZ2V0SXRlbVZpc3VhbChlLCJjb2xvciIpOyRzKG8uc3R5bGUsby5ob3ZlclN0eWxlPXt9LGMsZCx7bGFiZWxGZXRjaGVyOnQuaG9zdE1vZGVsLGxhYmVsRGF0YUluZGV4OmUsZGVmYXVsdFRleHQ6cy50ZXh0LGF1dG9Db2xvcjpsLHVzZUluc2lkZVN0eWxlOiEhcy5pbnNpZGV9LHt0ZXh0QWxpZ246cy50ZXh0QWxpZ24sdGV4dFZlcnRpY2FsQWxpZ246cy52ZXJ0aWNhbEFsaWduLG9wYWNpdHk6dC5nZXRJdGVtVmlzdWFsKGUsIm9wYWNpdHkiKX0pLG8uaWdub3JlPW8ubm9ybWFsSWdub3JlPSFjLmdldCgic2hvdyIpLG8uaG92ZXJJZ25vcmU9IWQuZ2V0KCJzaG93Iiksbi5pZ25vcmU9bi5ub3JtYWxJZ25vcmU9IWYuZ2V0KCJzaG93Iiksbi5ob3Zlcklnbm9yZT0hcC5nZXQoInNob3ciKSxuLnNldFN0eWxlKHtzdHJva2U6bCxvcGFjaXR5OnQuZ2V0SXRlbVZpc3VhbChlLCJvcGFjaXR5Iil9KSxuLnNldFN0eWxlKGYuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLmdldExpbmVTdHlsZSgpKSxuLmhvdmVyU3R5bGU9cC5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCk7dmFyIGc9Zi5nZXQoInNtb290aCIpO2cmJiEwPT09ZyYmKGc9LjQpLG4uc2V0U2hhcGUoe3Ntb290aDpnfSl9fSx3KFp2LElpKTtmdW5jdGlvbiBYdihpLHQpe0UodCxmdW5jdGlvbihhKXthLnVwZGF0ZT0idXBkYXRlVmlldyIsZ2YoYSxmdW5jdGlvbih0LGUpe3ZhciBvPXt9O3JldHVybiBlLmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJzZXJpZXMiLHN1YlR5cGU6aSxxdWVyeTp0fSxmdW5jdGlvbihpKXtpW2EubWV0aG9kXSYmaVthLm1ldGhvZF0odC5uYW1lLHQuZGF0YUluZGV4KTt2YXIgbj1pLmdldERhdGEoKTtuLmVhY2goZnVuY3Rpb24odCl7dmFyIGU9bi5nZXROYW1lKHQpO29bZV09aS5pc1NlbGVjdGVkKGUpfHwhMX0pfSkse25hbWU6dC5uYW1lLHNlbGVjdGVkOm8sc2VyaWVzSWQ6dC5zZXJpZXNJZH19KX0pfWZ1bmN0aW9uIFl2KG4pe3JldHVybntnZXRUYXJnZXRTZXJpZXM6ZnVuY3Rpb24odCl7dmFyIGU9e30saT1RKCk7cmV0dXJuIHQuZWFjaFNlcmllc0J5VHlwZShuLGZ1bmN0aW9uKHQpe3QuX19wYWxldHRlU2NvcGU9ZSxpLnNldCh0LnVpZCx0KX0pLGl9LHJlc2V0OmZ1bmN0aW9uKHMsdCl7dmFyIGw9cy5nZXRSYXdEYXRhKCksdT17fSxoPXMuZ2V0RGF0YSgpO2guZWFjaChmdW5jdGlvbih0KXt2YXIgZT1oLmdldFJhd0luZGV4KHQpO3VbZV09dH0pLGwuZWFjaChmdW5jdGlvbih0KXt2YXIgZSxpPXVbdF0sbj1udWxsIT1pJiZoLmdldEl0ZW1WaXN1YWwoaSwiY29sb3IiLCEwKSxvPW51bGwhPWkmJmguZ2V0SXRlbVZpc3VhbChpLCJib3JkZXJDb2xvciIsITApO2lmKG4mJm98fChlPWwuZ2V0SXRlbU1vZGVsKHQpKSwhbil7dmFyIGE9ZS5nZXQoIml0ZW1TdHlsZS5jb2xvciIpfHxzLmdldENvbG9yRnJvbVBhbGV0dGUobC5nZXROYW1lKHQpfHx0KyIiLHMuX19wYWxldHRlU2NvcGUsbC5jb3VudCgpKTtudWxsIT1pJiZoLnNldEl0ZW1WaXN1YWwoaSwiY29sb3IiLGEpfWlmKCFvKXt2YXIgcj1lLmdldCgiaXRlbVN0eWxlLmJvcmRlckNvbG9yIik7bnVsbCE9aSYmaC5zZXRJdGVtVmlzdWFsKGksImJvcmRlckNvbG9yIixyKX19KX19fWdjLmV4dGVuZCh7dHlwZToicGllIixpbml0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IElpO3RoaXMuX3NlY3Rvckdyb3VwPXR9LHJlbmRlcjpmdW5jdGlvbih0LGUsaSxuKXtpZighbnx8bi5mcm9tIT09dGhpcy51aWQpe3ZhciBvPXQuZ2V0RGF0YSgpLGE9dGhpcy5fZGF0YSxyPXRoaXMuZ3JvdXAscz1lLmdldCgiYW5pbWF0aW9uIiksbD0hYSx1PXQuZ2V0KCJhbmltYXRpb25UeXBlIiksaD10LmdldCgiYW5pbWF0aW9uVHlwZVVwZGF0ZSIpLGM9VChXdix0aGlzLnVpZCx0LHMsaSksZD10LmdldCgic2VsZWN0ZWRNb2RlIik7aWYoby5kaWZmKGEpLmFkZChmdW5jdGlvbih0KXt2YXIgZT1uZXcgWnYobyx0KTtsJiYic2NhbGUiIT09dSYmZS5lYWNoQ2hpbGQoZnVuY3Rpb24odCl7dC5zdG9wQW5pbWF0aW9uKCEwKX0pLGQmJmUub24oImNsaWNrIixjKSxvLnNldEl0ZW1HcmFwaGljRWwodCxlKSxyLmFkZChlKX0pLnVwZGF0ZShmdW5jdGlvbih0LGUpe3ZhciBpPWEuZ2V0SXRlbUdyYXBoaWNFbChlKTtsfHwidHJhbnNpdGlvbiI9PT1ofHxpLmVhY2hDaGlsZChmdW5jdGlvbih0KXt0LnN0b3BBbmltYXRpb24oITApfSksaS51cGRhdGVEYXRhKG8sdCksaS5vZmYoImNsaWNrIiksZCYmaS5vbigiY2xpY2siLGMpLHIuYWRkKGkpLG8uc2V0SXRlbUdyYXBoaWNFbCh0LGkpfSkucmVtb3ZlKGZ1bmN0aW9uKHQpe3ZhciBlPWEuZ2V0SXRlbUdyYXBoaWNFbCh0KTtyLnJlbW92ZShlKX0pLmV4ZWN1dGUoKSxzJiYwPG8uY291bnQoKSYmKGw/InNjYWxlIiE9PXU6InRyYW5zaXRpb24iIT09aCkpe2Zvcih2YXIgZj1vLmdldEl0ZW1MYXlvdXQoMCkscD0xO2lzTmFOKGYuc3RhcnRBbmdsZSkmJnA8by5jb3VudCgpOysrcClmPW8uZ2V0SXRlbUxheW91dChwKTt2YXIgZz1NYXRoLm1heChpLmdldFdpZHRoKCksaS5nZXRIZWlnaHQoKSkvMixtPUEoci5yZW1vdmVDbGlwUGF0aCxyKTtyLnNldENsaXBQYXRoKHRoaXMuX2NyZWF0ZUNsaXBQYXRoKGYuY3gsZi5jeSxnLGYuc3RhcnRBbmdsZSxmLmNsb2Nrd2lzZSxtLHQsbCkpfWVsc2Ugci5yZW1vdmVDbGlwUGF0aCgpO3RoaXMuX2RhdGE9b319LGRpc3Bvc2U6ZnVuY3Rpb24oKXt9LF9jcmVhdGVDbGlwUGF0aDpmdW5jdGlvbih0LGUsaSxuLG8sYSxyLHMpe3ZhciBsPW5ldyBVcih7c2hhcGU6e2N4OnQsY3k6ZSxyMDowLHI6aSxzdGFydEFuZ2xlOm4sZW5kQW5nbGU6bixjbG9ja3dpc2U6b319KTtyZXR1cm4ocz9sbDpzbCkobCx7c2hhcGU6e2VuZEFuZ2xlOm4rKG8/MTotMSkqTWF0aC5QSSoyfX0scixhKSxsfSxjb250YWluUG9pbnQ6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmdldERhdGEoKS5nZXRJdGVtTGF5b3V0KDApO2lmKGkpe3ZhciBuPXRbMF0taS5jeCxvPXRbMV0taS5jeSxhPU1hdGguc3FydChuKm4rbypvKTtyZXR1cm4gYTw9aS5yJiZhPj1pLnIwfX19KTt2YXIganY9TWF0aC5QSS8xODA7ZnVuY3Rpb24gcXYobyx0LGUsaSxuLGEscixzLGwsdSl7ZnVuY3Rpb24gaCh0LGUsaSl7Zm9yKHZhciBuPXQ7bjxlJiYhKG9bbl0ueStpPmwrcik7bisrKWlmKG9bbl0ueSs9aSx0PG4mJm4rMTxlJiZvW24rMV0ueT5vW25dLnkrb1tuXS5oZWlnaHQpcmV0dXJuIHZvaWQgYyhuLGkvMik7YyhlLTEsaS8yKX1mdW5jdGlvbiBjKHQsZSl7Zm9yKHZhciBpPXQ7MDw9aSYmIShvW2ldLnktZTxsKSYmKG9baV0ueS09ZSwhKDA8aSYmb1tpXS55Pm9baS0xXS55K29baS0xXS5oZWlnaHQpKTtpLS0pO31mdW5jdGlvbiBkKHQsZSxpLG4sbyxhKXtmb3IodmFyIHI9ZT9OdW1iZXIuTUFYX1ZBTFVFOjAscz0wLGw9dC5sZW5ndGg7czxsO3MrKylpZigibm9uZSI9PT10W3NdLmxhYmVsQWxpZ25Ubyl7dmFyIHU9TWF0aC5hYnModFtzXS55LW4pLGg9dFtzXS5sZW4sYz10W3NdLmxlbjIsZD11PG8raD9NYXRoLnNxcnQoKG8raCtjKSoobytoK2MpLXUqdSk6TWF0aC5hYnModFtzXS54LWkpO2UmJnI8PWQmJihkPXItMTApLCFlJiZkPD1yJiYoZD1yKzEwKSx0W3NdLng9aStkKmEscj1kfX1vLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC55LWUueX0pO2Zvcih2YXIgZixwPTAsZz1vLmxlbmd0aCxtPVtdLHY9W10seT0wO3k8Zzt5Kyspe2lmKCJvdXRlciI9PT1vW3ldLnBvc2l0aW9uJiYibGFiZWxMaW5lIj09PW9beV0ubGFiZWxBbGlnblRvKXt2YXIgeD1vW3ldLngtdTtvW3ldLmxpbmVQb2ludHNbMV1bMF0rPXgsb1t5XS54PXV9KGY9b1t5XS55LXApPDAmJmgoeSxnLC1mKSxwPW9beV0ueStvW3ldLmhlaWdodH1yLXA8MCYmYyhnLTEscC1yKTtmb3IoeT0wO3k8Zzt5Kyspb1t5XS55Pj1lP3YucHVzaChvW3ldKTptLnB1c2gob1t5XSk7ZChtLCExLHQsZSxpLG4pLGQodiwhMCx0LGUsaSxuKX1mdW5jdGlvbiBLdih0KXtyZXR1cm4iY2VudGVyIj09PXQucG9zaXRpb259ZnVuY3Rpb24gJHYoTCxrLFAsdCxOLGUpe3ZhciBPLEUsej1MLmdldERhdGEoKSxSPVtdLEI9ITEsVj0oTC5nZXQoIm1pblNob3dMYWJlbEFuZ2xlIil8fDApKmp2O3ouZWFjaChmdW5jdGlvbih0KXt2YXIgZT16LmdldEl0ZW1MYXlvdXQodCksaT16LmdldEl0ZW1Nb2RlbCh0KSxuPWkuZ2V0TW9kZWwoImxhYmVsIiksbz1uLmdldCgicG9zaXRpb24iKXx8aS5nZXQoImVtcGhhc2lzLmxhYmVsLnBvc2l0aW9uIiksYT1uLmdldCgiZGlzdGFuY2VUb0xhYmVsTGluZSIpLHI9bi5nZXQoImFsaWduVG8iKSxzPVBsKG4uZ2V0KCJtYXJnaW4iKSxQKSxsPW4uZ2V0KCJibGVlZE1hcmdpbiIpLHU9bi5nZXRGb250KCksaD1pLmdldE1vZGVsKCJsYWJlbExpbmUiKSxjPWguZ2V0KCJsZW5ndGgiKTtjPVBsKGMsUCk7dmFyIGQ9aC5nZXQoImxlbmd0aDIiKTtpZihkPVBsKGQsUCksIShlLmFuZ2xlPFYpKXt2YXIgZixwLGcsbSx2PShlLnN0YXJ0QW5nbGUrZS5lbmRBbmdsZSkvMix5PU1hdGguY29zKHYpLHg9TWF0aC5zaW4odik7Tz1lLmN4LEU9ZS5jeTt2YXIgXyx3PUwuZ2V0Rm9ybWF0dGVkTGFiZWwodCwibm9ybWFsIil8fHouZ2V0TmFtZSh0KSxiPWNuKHcsdSxtLCJ0b3AiKSxTPSJpbnNpZGUiPT09b3x8ImlubmVyIj09PW87aWYoImNlbnRlciI9PT1vKWY9ZS5jeCxwPWUuY3ksbT0iY2VudGVyIjtlbHNle3ZhciBNPShTPyhlLnIrZS5yMCkvMip5OmUucip5KStPLEk9KFM/KGUucitlLnIwKS8yKng6ZS5yKngpK0U7aWYoZj1NKzMqeSxwPUkrMyp4LCFTKXt2YXIgVD1NK3kqKGMray1lLnIpLEE9SSt4KihjK2stZS5yKSxEPVQrKHk8MD8tMToxKSpkO2Y9ImVkZ2UiPT09cj95PDA/TitzOk4rUC1zOkQrKHk8MD8tYTphKSxnPVtbTSxJXSxbVCxBXSxbRCxwPUFdXX1tPVM/ImNlbnRlciI6ImVkZ2UiPT09cj8wPHk/InJpZ2h0IjoibGVmdCI6MDx5PyJsZWZ0IjoicmlnaHQifXZhciBDPW4uZ2V0KCJyb3RhdGUiKTtfPSJudW1iZXIiPT10eXBlb2YgQz9DKihNYXRoLlBJLzE4MCk6Qz95PDA/LXYrTWF0aC5QSTotdjowLEI9ISFfLGUubGFiZWw9e3g6Zix5OnAscG9zaXRpb246byxoZWlnaHQ6Yi5oZWlnaHQsbGVuOmMsbGVuMjpkLGxpbmVQb2ludHM6Zyx0ZXh0QWxpZ246bSx2ZXJ0aWNhbEFsaWduOiJtaWRkbGUiLHJvdGF0aW9uOl8saW5zaWRlOlMsbGFiZWxEaXN0YW5jZTphLGxhYmVsQWxpZ25UbzpyLGxhYmVsTWFyZ2luOnMsYmxlZWRNYXJnaW46bCx0ZXh0UmVjdDpiLHRleHQ6dyxmb250OnV9LFN8fFIucHVzaChlLmxhYmVsKX19KSwhQiYmTC5nZXQoImF2b2lkTGFiZWxPdmVybGFwIikmJmZ1bmN0aW9uKHQsZSxpLG4sbyxhLHIscyl7Zm9yKHZhciBsPVtdLHU9W10saD1OdW1iZXIuTUFYX1ZBTFVFLGM9LU51bWJlci5NQVhfVkFMVUUsZD0wO2Q8dC5sZW5ndGg7ZCsrKUt2KHRbZF0pfHwodFtkXS54PGU/KGg9TWF0aC5taW4oaCx0W2RdLngpLGwucHVzaCh0W2RdKSk6KGM9TWF0aC5tYXgoYyx0W2RdLngpLHUucHVzaCh0W2RdKSkpO2Zvcihxdih1LGUsaSxuLDEsMCxhLDAscyxjKSxxdihsLGUsaSxuLC0xLDAsYSwwLHMsaCksZD0wO2Q8dC5sZW5ndGg7ZCsrKXt2YXIgZj10W2RdO2lmKCFLdihmKSl7dmFyIHA9Zi5saW5lUG9pbnRzO2lmKHApe3ZhciBnLG09ImVkZ2UiPT09Zi5sYWJlbEFsaWduVG8sdj1mLnRleHRSZWN0LndpZHRoOyhnPW0/Zi54PGU/cFsyXVswXS1mLmxhYmVsRGlzdGFuY2Utci1mLmxhYmVsTWFyZ2luOnIrby1mLmxhYmVsTWFyZ2luLXBbMl1bMF0tZi5sYWJlbERpc3RhbmNlOmYueDxlP2YueC1yLWYuYmxlZWRNYXJnaW46citvLWYueC1mLmJsZWVkTWFyZ2luKTxmLnRleHRSZWN0LndpZHRoJiYoZi50ZXh0PWduKGYudGV4dCxnLGYuZm9udCksImVkZ2UiPT09Zi5sYWJlbEFsaWduVG8mJih2PWhuKGYudGV4dCxmLmZvbnQpKSk7dmFyIHk9cFsxXVswXS1wWzJdWzBdO20/Zi54PGU/cFsyXVswXT1yK2YubGFiZWxNYXJnaW4rditmLmxhYmVsRGlzdGFuY2U6cFsyXVswXT1yK28tZi5sYWJlbE1hcmdpbi12LWYubGFiZWxEaXN0YW5jZTooZi54PGU/cFsyXVswXT1mLngrZi5sYWJlbERpc3RhbmNlOnBbMl1bMF09Zi54LWYubGFiZWxEaXN0YW5jZSxwWzFdWzBdPXBbMl1bMF0reSkscFsxXVsxXT1wWzJdWzFdPWYueX19fX0oUixPLEUsayxQLHQsTixlKX12YXIgSnY9MipNYXRoLlBJLFF2PU1hdGguUEkvMTgwO2Z1bmN0aW9uIHR5KHQpe3JldHVybntzZXJpZXNUeXBlOnQscmVzZXQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmZpbmRDb21wb25lbnRzKHttYWluVHlwZToibGVnZW5kIn0pO2lmKG4mJm4ubGVuZ3RoKXt2YXIgbz10LmdldERhdGEoKTtvLmZpbHRlclNlbGYoZnVuY3Rpb24odCl7Zm9yKHZhciBlPW8uZ2V0TmFtZSh0KSxpPTA7aTxuLmxlbmd0aDtpKyspaWYoIW5baV0uaXNTZWxlY3RlZChlKSlyZXR1cm4hMTtyZXR1cm4hMH0pfX19fVh2KCJwaWUiLFt7dHlwZToicGllVG9nZ2xlU2VsZWN0IixldmVudDoicGllc2VsZWN0Y2hhbmdlZCIsbWV0aG9kOiJ0b2dnbGVTZWxlY3RlZCJ9LHt0eXBlOiJwaWVTZWxlY3QiLGV2ZW50OiJwaWVzZWxlY3RlZCIsbWV0aG9kOiJzZWxlY3QifSx7dHlwZToicGllVW5TZWxlY3QiLGV2ZW50OiJwaWV1bnNlbGVjdGVkIixtZXRob2Q6InVuU2VsZWN0In1dKSx5ZihZdigicGllIikpLHZmKFQoZnVuY3Rpb24odCxlLEEsaSl7ZS5lYWNoU2VyaWVzQnlUeXBlKHQsZnVuY3Rpb24odCl7dmFyIG89dC5nZXREYXRhKCksZT1vLm1hcERpbWVuc2lvbigidmFsdWUiKSxhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZ1KHQuZ2V0Qm94TGF5b3V0UGFyYW1zKCkse3dpZHRoOmUuZ2V0V2lkdGgoKSxoZWlnaHQ6ZS5nZXRIZWlnaHQoKX0pfSh0LEEpLGk9dC5nZXQoImNlbnRlciIpLG49dC5nZXQoInJhZGl1cyIpO2sobil8fChuPVswLG5dKSxrKGkpfHwoaT1baSxpXSk7dmFyIHI9UGwoYS53aWR0aCxBLmdldFdpZHRoKCkpLHM9UGwoYS5oZWlnaHQsQS5nZXRIZWlnaHQoKSksbD1NYXRoLm1pbihyLHMpLHU9UGwoaVswXSxyKSthLngsaD1QbChpWzFdLHMpK2EueSxjPVBsKG5bMF0sbC8yKSxkPVBsKG5bMV0sbC8yKSxmPS10LmdldCgic3RhcnRBbmdsZSIpKlF2LHA9dC5nZXQoIm1pbkFuZ2xlIikqUXYsZz0wO28uZWFjaChlLGZ1bmN0aW9uKHQpe2lzTmFOKHQpfHxnKyt9KTt2YXIgbT1vLmdldFN1bShlKSx2PU1hdGguUEkvKG18fGcpKjIseT10LmdldCgiY2xvY2t3aXNlIikseD10LmdldCgicm9zZVR5cGUiKSxfPXQuZ2V0KCJzdGlsbFNob3daZXJvU3VtIiksdz1vLmdldERhdGFFeHRlbnQoZSk7d1swXT0wO3ZhciBiPUp2LFM9MCxNPWYsST15PzE6LTE7aWYoby5lYWNoKGUsZnVuY3Rpb24odCxlKXt2YXIgaTtpZihpc05hTih0KSlvLnNldEl0ZW1MYXlvdXQoZSx7YW5nbGU6TmFOLHN0YXJ0QW5nbGU6TmFOLGVuZEFuZ2xlOk5hTixjbG9ja3dpc2U6eSxjeDp1LGN5OmgscjA6YyxyOng/TmFOOmQsdmlld1JlY3Q6YX0pO2Vsc2V7KGk9ImFyZWEiIT09eD8wPT09bSYmXz92OnQqdjpKdi9nKTxwP2ItPWk9cDpTKz10O3ZhciBuPU0rSSppO28uc2V0SXRlbUxheW91dChlLHthbmdsZTppLHN0YXJ0QW5nbGU6TSxlbmRBbmdsZTpuLGNsb2Nrd2lzZTp5LGN4OnUsY3k6aCxyMDpjLHI6eD9rbCh0LHcsW2MsZF0pOmQsdmlld1JlY3Q6YX0pLE09bn19KSxiPEp2JiZnKWlmKGI8PS4wMDEpe3ZhciBUPUp2L2c7by5lYWNoKGUsZnVuY3Rpb24odCxlKXtpZighaXNOYU4odCkpe3ZhciBpPW8uZ2V0SXRlbUxheW91dChlKTtpLmFuZ2xlPVQsaS5zdGFydEFuZ2xlPWYrSSplKlQsaS5lbmRBbmdsZT1mK0kqKGUrMSkqVH19KX1lbHNlIHY9Yi9TLE09ZixvLmVhY2goZSxmdW5jdGlvbih0LGUpe2lmKCFpc05hTih0KSl7dmFyIGk9by5nZXRJdGVtTGF5b3V0KGUpLG49aS5hbmdsZT09PXA/cDp0KnY7aS5zdGFydEFuZ2xlPU0saS5lbmRBbmdsZT1NK0kqbixNKz1JKm59fSk7JHYodCxkLGEud2lkdGgsYS5oZWlnaHQsYS54LGEueSl9KX0sInBpZSIpKSxwZih0eSgicGllIikpLGljLmV4dGVuZCh7dHlwZToic2VyaWVzLnNjYXR0ZXIiLGRlcGVuZGVuY2llczpbImdyaWQiLCJwb2xhciIsImdlbyIsInNpbmdsZUF4aXMiLCJjYWxlbmRhciJdLGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGhwKHRoaXMuZ2V0U291cmNlKCksdGhpcyx7dXNlRW5jb2RlRGVmYXVsdGVyOiEwfSl9LGJydXNoU2VsZWN0b3I6InBvaW50IixnZXRQcm9ncmVzc2l2ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uLnByb2dyZXNzaXZlO3JldHVybiBudWxsPT10P3RoaXMub3B0aW9uLmxhcmdlPzVlMzp0aGlzLmdldCgicHJvZ3Jlc3NpdmUiKTp0fSxnZXRQcm9ncmVzc2l2ZVRocmVzaG9sZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uLnByb2dyZXNzaXZlVGhyZXNob2xkO3JldHVybiBudWxsPT10P3RoaXMub3B0aW9uLmxhcmdlPzFlNDp0aGlzLmdldCgicHJvZ3Jlc3NpdmVUaHJlc2hvbGQiKTp0fSxkZWZhdWx0T3B0aW9uOntjb29yZGluYXRlU3lzdGVtOiJjYXJ0ZXNpYW4yZCIsemxldmVsOjAsejoyLGxlZ2VuZEhvdmVyTGluazohMCxob3ZlckFuaW1hdGlvbjohMCxzeW1ib2xTaXplOjEwLGxhcmdlOiExLGxhcmdlVGhyZXNob2xkOjJlMyxpdGVtU3R5bGU6e29wYWNpdHk6Ljh9LGNsaXA6ITB9fSk7dmFyIGV5PUlzKHtzaGFwZTp7cG9pbnRzOm51bGx9LHN5bWJvbFByb3h5Om51bGwsc29mdENsaXBTaGFwZTpudWxsLGJ1aWxkUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpPWUucG9pbnRzLG49ZS5zaXplLG89dGhpcy5zeW1ib2xQcm94eSxhPW8uc2hhcGU7aWYoISgodC5nZXRDb250ZXh0P3QuZ2V0Q29udGV4dCgpOnQpJiZuWzBdPDQpKWZvcih2YXIgcj0wO3I8aS5sZW5ndGg7KXt2YXIgcz1pW3IrK10sbD1pW3IrK107aXNOYU4ocyl8fGlzTmFOKGwpfHx0aGlzLnNvZnRDbGlwU2hhcGUmJiF0aGlzLnNvZnRDbGlwU2hhcGUuY29udGFpbihzLGwpfHwoYS54PXMtblswXS8yLGEueT1sLW5bMV0vMixhLndpZHRoPW5bMF0sYS5oZWlnaHQ9blsxXSxvLmJ1aWxkUGF0aCh0LGEsITApKX19LGFmdGVyQnJ1c2g6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zaGFwZSxpPWUucG9pbnRzLG49ZS5zaXplO2lmKG5bMF08NCl7dGhpcy5zZXRUcmFuc2Zvcm0odCk7Zm9yKHZhciBvPTA7bzxpLmxlbmd0aDspe3ZhciBhPWlbbysrXSxyPWlbbysrXTtpc05hTihhKXx8aXNOYU4ocil8fHRoaXMuc29mdENsaXBTaGFwZSYmIXRoaXMuc29mdENsaXBTaGFwZS5jb250YWluKGEscil8fHQuZmlsbFJlY3QoYS1uWzBdLzIsci1uWzFdLzIsblswXSxuWzFdKX10aGlzLnJlc3RvcmVUcmFuc2Zvcm0odCl9fSxmaW5kRGF0YUluZGV4OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXRoaXMuc2hhcGUsbj1pLnBvaW50cyxvPWkuc2l6ZSxhPU1hdGgubWF4KG9bMF0sNCkscj1NYXRoLm1heChvWzFdLDQpLHM9bi5sZW5ndGgvMi0xOzA8PXM7cy0tKXt2YXIgbD0yKnMsdT1uW2xdLWEvMixoPW5bMStsXS1yLzI7aWYodTw9dCYmaDw9ZSYmdDw9dSthJiZlPD1oK3IpcmV0dXJuIHN9cmV0dXJuLTF9fSk7ZnVuY3Rpb24gaXkoKXt0aGlzLmdyb3VwPW5ldyBJaX12YXIgbnk9aXkucHJvdG90eXBlO2Z1bmN0aW9uIG95KHQsZSxpKXtFZy5jYWxsKHRoaXMsdCxlLGkpLHRoaXMudHlwZT0idmFsdWUiLHRoaXMuYW5nbGU9MCx0aGlzLm5hbWU9IiIsdGhpcy5tb2RlbH1mdW5jdGlvbiBheSh0LGUsaSl7dGhpcy5fbW9kZWw9dCx0aGlzLmRpbWVuc2lvbnM9W10sdGhpcy5faW5kaWNhdG9yQXhlcz1OKHQuZ2V0SW5kaWNhdG9yTW9kZWxzKCksZnVuY3Rpb24odCxlKXt2YXIgaT0iaW5kaWNhdG9yXyIrZSxuPW5ldyBveShpLCJsb2ciPT09dC5nZXQoImF4aXNUeXBlIik/bmV3IEpwOm5ldyBTcCk7cmV0dXJuIG4ubmFtZT10LmdldCgibmFtZSIpLChuLm1vZGVsPXQpLmF4aXM9bix0aGlzLmRpbWVuc2lvbnMucHVzaChpKSxufSx0aGlzKSx0aGlzLnJlc2l6ZSh0LGkpLHRoaXMuY3gsdGhpcy5jeSx0aGlzLnIsdGhpcy5yMCx0aGlzLnN0YXJ0QW5nbGV9bnkuaXNQZXJzaXN0ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2luY3JlbWVudGFsfSxueS51cGRhdGVEYXRhPWZ1bmN0aW9uKHQsZSl7dGhpcy5ncm91cC5yZW1vdmVBbGwoKTt2YXIgaT1uZXcgZXkoe3JlY3RIb3ZlcjohMCxjdXJzb3I6ImRlZmF1bHQifSk7aS5zZXRTaGFwZSh7cG9pbnRzOnQuZ2V0TGF5b3V0KCJzeW1ib2xQb2ludHMiKX0pLHRoaXMuX3NldENvbW1vbihpLHQsITEsZSksdGhpcy5ncm91cC5hZGQoaSksdGhpcy5faW5jcmVtZW50YWw9bnVsbH0sbnkudXBkYXRlTGF5b3V0PWZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9pbmNyZW1lbnRhbCl7dmFyIG49dC5nZXRMYXlvdXQoInN5bWJvbFBvaW50cyIpO3RoaXMuZ3JvdXAuZWFjaENoaWxkKGZ1bmN0aW9uKHQpe2lmKG51bGwhPXQuc3RhcnRJbmRleCl7dmFyIGU9MioodC5lbmRJbmRleC10LnN0YXJ0SW5kZXgpLGk9NCp0LnN0YXJ0SW5kZXgqMjtuPW5ldyBGbG9hdDMyQXJyYXkobi5idWZmZXIsaSxlKX10LnNldFNoYXBlKCJwb2ludHMiLG4pfSl9fSxueS5pbmNyZW1lbnRhbFByZXBhcmVVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5ncm91cC5yZW1vdmVBbGwoKSx0aGlzLl9jbGVhckluY3JlbWVudGFsKCksMmU2PHQuY291bnQoKT8odGhpcy5faW5jcmVtZW50YWx8fCh0aGlzLl9pbmNyZW1lbnRhbD1uZXcgZnMoe3NpbGVudDohMH0pKSx0aGlzLmdyb3VwLmFkZCh0aGlzLl9pbmNyZW1lbnRhbCkpOnRoaXMuX2luY3JlbWVudGFsPW51bGx9LG55LmluY3JlbWVudGFsVXBkYXRlPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbjt0aGlzLl9pbmNyZW1lbnRhbD8obj1uZXcgZXksdGhpcy5faW5jcmVtZW50YWwuYWRkRGlzcGxheWFibGUobiwhMCkpOigobj1uZXcgZXkoe3JlY3RIb3ZlcjohMCxjdXJzb3I6ImRlZmF1bHQiLHN0YXJ0SW5kZXg6dC5zdGFydCxlbmRJbmRleDp0LmVuZH0pKS5pbmNyZW1lbnRhbD0hMCx0aGlzLmdyb3VwLmFkZChuKSksbi5zZXRTaGFwZSh7cG9pbnRzOmUuZ2V0TGF5b3V0KCJzeW1ib2xQb2ludHMiKX0pLHRoaXMuX3NldENvbW1vbihuLGUsISF0aGlzLl9pbmNyZW1lbnRhbCxpKX0sbnkuX3NldENvbW1vbj1mdW5jdGlvbihpLHQsZSxuKXt2YXIgbz10Lmhvc3RNb2RlbDtuPW58fHt9O3ZhciBhPXQuZ2V0VmlzdWFsKCJzeW1ib2xTaXplIik7aS5zZXRTaGFwZSgic2l6ZSIsYSBpbnN0YW5jZW9mIEFycmF5P2E6W2EsYV0pLGkuc29mdENsaXBTaGFwZT1uLmNsaXBTaGFwZXx8bnVsbCxpLnN5bWJvbFByb3h5PW1nKHQuZ2V0VmlzdWFsKCJzeW1ib2wiKSwwLDAsMCwwKSxpLnNldENvbG9yPWkuc3ltYm9sUHJveHkuc2V0Q29sb3I7dmFyIHI9aS5zaGFwZS5zaXplWzBdPDQ7aS51c2VTdHlsZShvLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUocj9bImNvbG9yIiwic2hhZG93Qmx1ciIsInNoYWRvd0NvbG9yIl06WyJjb2xvciJdKSk7dmFyIHM9dC5nZXRWaXN1YWwoImNvbG9yIik7cyYmaS5zZXRDb2xvcihzKSxlfHwoaS5zZXJpZXNJbmRleD1vLnNlcmllc0luZGV4LGkub24oIm1vdXNlbW92ZSIsZnVuY3Rpb24odCl7aS5kYXRhSW5kZXg9bnVsbDt2YXIgZT1pLmZpbmREYXRhSW5kZXgodC5vZmZzZXRYLHQub2Zmc2V0WSk7MDw9ZSYmKGkuZGF0YUluZGV4PWUrKGkuc3RhcnRJbmRleHx8MCkpfSkpfSxueS5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckluY3JlbWVudGFsKCksdGhpcy5faW5jcmVtZW50YWw9bnVsbCx0aGlzLmdyb3VwLnJlbW92ZUFsbCgpfSxueS5fY2xlYXJJbmNyZW1lbnRhbD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2luY3JlbWVudGFsO3QmJnQuY2xlYXJEaXNwbGF5YmxlcygpfSxNZih7dHlwZToic2NhdHRlciIscmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldERhdGEoKTt0aGlzLl91cGRhdGVTeW1ib2xEcmF3KG4sdCkudXBkYXRlRGF0YShuLHtjbGlwU2hhcGU6dGhpcy5fZ2V0Q2xpcFNoYXBlKHQpfSksdGhpcy5fZmluaXNoZWQ9ITB9LGluY3JlbWVudGFsUHJlcGFyZVJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5nZXREYXRhKCk7dGhpcy5fdXBkYXRlU3ltYm9sRHJhdyhuLHQpLmluY3JlbWVudGFsUHJlcGFyZVVwZGF0ZShuKSx0aGlzLl9maW5pc2hlZD0hMX0saW5jcmVtZW50YWxSZW5kZXI6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX3N5bWJvbERyYXcuaW5jcmVtZW50YWxVcGRhdGUodCxlLmdldERhdGEoKSx7Y2xpcFNoYXBlOnRoaXMuX2dldENsaXBTaGFwZShlKX0pLHRoaXMuX2ZpbmlzaGVkPXQuZW5kPT09ZS5nZXREYXRhKCkuY291bnQoKX0sdXBkYXRlVHJhbnNmb3JtOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldERhdGEoKTtpZih0aGlzLmdyb3VwLmRpcnR5KCksIXRoaXMuX2ZpbmlzaGVkfHwxZTQ8bi5jb3VudCgpfHwhdGhpcy5fc3ltYm9sRHJhdy5pc1BlcnNpc3RlbnQoKSlyZXR1cm57dXBkYXRlOiEwfTt2YXIgbz1JbSgpLnJlc2V0KHQpO28ucHJvZ3Jlc3MmJm8ucHJvZ3Jlc3Moe3N0YXJ0OjAsZW5kOm4uY291bnQoKX0sbiksdGhpcy5fc3ltYm9sRHJhdy51cGRhdGVMYXlvdXQobil9LF9nZXRDbGlwU2hhcGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5jb29yZGluYXRlU3lzdGVtLGk9ZSYmZS5nZXRBcmVhJiZlLmdldEFyZWEoKTtyZXR1cm4gdC5nZXQoImNsaXAiLCEwKT9pOm51bGx9LF91cGRhdGVTeW1ib2xEcmF3OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fc3ltYm9sRHJhdyxuPWUucGlwZWxpbmVDb250ZXh0LmxhcmdlO3JldHVybiBpJiZuPT09dGhpcy5faXNMYXJnZURyYXd8fChpJiZpLnJlbW92ZSgpLGk9dGhpcy5fc3ltYm9sRHJhdz1uP25ldyBpeTpuZXcgJGcsdGhpcy5faXNMYXJnZURyYXc9bix0aGlzLmdyb3VwLnJlbW92ZUFsbCgpKSx0aGlzLmdyb3VwLmFkZChpLmdyb3VwKSxpfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXt0aGlzLl9zeW1ib2xEcmF3JiZ0aGlzLl9zeW1ib2xEcmF3LnJlbW92ZSghMCksdGhpcy5fc3ltYm9sRHJhdz1udWxsfSxkaXNwb3NlOmZ1bmN0aW9uKCl7fX0pLHlmKE1tKCJzY2F0dGVyIiwiY2lyY2xlIikpLHZmKEltKCJzY2F0dGVyIikpLHcob3ksRWcpLGF5LnByb3RvdHlwZS5nZXRJbmRpY2F0b3JBeGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luZGljYXRvckF4ZXN9LGF5LnByb3RvdHlwZS5kYXRhVG9Qb2ludD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2luZGljYXRvckF4ZXNbZV07cmV0dXJuIHRoaXMuY29vcmRUb1BvaW50KGkuZGF0YVRvQ29vcmQodCksZSl9LGF5LnByb3RvdHlwZS5jb29yZFRvUG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9pbmRpY2F0b3JBeGVzW2VdLmFuZ2xlO3JldHVyblt0aGlzLmN4K3QqTWF0aC5jb3MoaSksdGhpcy5jeS10Kk1hdGguc2luKGkpXX0sYXkucHJvdG90eXBlLnBvaW50VG9EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0tdGhpcy5jeCxpPXRbMV0tdGhpcy5jeSxuPU1hdGguc3FydChlKmUraSppKTtlLz1uLGkvPW47Zm9yKHZhciBvLGE9TWF0aC5hdGFuMigtaSxlKSxyPTEvMCxzPS0xLGw9MDtsPHRoaXMuX2luZGljYXRvckF4ZXMubGVuZ3RoO2wrKyl7dmFyIHU9dGhpcy5faW5kaWNhdG9yQXhlc1tsXSxoPU1hdGguYWJzKGEtdS5hbmdsZSk7aDxyJiYobz11LHM9bCxyPWgpfXJldHVybltzLCsobyYmby5jb29yZFRvRGF0YShuKSldfSxheS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXQoImNlbnRlciIpLG49ZS5nZXRXaWR0aCgpLG89ZS5nZXRIZWlnaHQoKSxhPU1hdGgubWluKG4sbykvMjt0aGlzLmN4PVBsKGlbMF0sbiksdGhpcy5jeT1QbChpWzFdLG8pLHRoaXMuc3RhcnRBbmdsZT10LmdldCgic3RhcnRBbmdsZSIpKk1hdGguUEkvMTgwO3ZhciByPXQuZ2V0KCJyYWRpdXMiKTsic3RyaW5nIiE9dHlwZW9mIHImJiJudW1iZXIiIT10eXBlb2Ygcnx8KHI9WzAscl0pLHRoaXMucjA9UGwoclswXSxhKSx0aGlzLnI9UGwoclsxXSxhKSxFKHRoaXMuX2luZGljYXRvckF4ZXMsZnVuY3Rpb24odCxlKXt0LnNldEV4dGVudCh0aGlzLnIwLHRoaXMucik7dmFyIGk9dGhpcy5zdGFydEFuZ2xlK2UqTWF0aC5QSSoyL3RoaXMuX2luZGljYXRvckF4ZXMubGVuZ3RoO2k9TWF0aC5hdGFuMihNYXRoLnNpbihpKSxNYXRoLmNvcyhpKSksdC5hbmdsZT1pfSx0aGlzKX0sYXkucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihuLHQpe3ZhciBvPXRoaXMuX2luZGljYXRvckF4ZXMsYT10aGlzLl9tb2RlbDtFKG8sZnVuY3Rpb24odCl7dC5zY2FsZS5zZXRFeHRlbnQoMS8wLC0xLzApfSksbi5lYWNoU2VyaWVzQnlUeXBlKCJyYWRhciIsZnVuY3Rpb24odCxlKXtpZigicmFkYXIiPT09dC5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKSYmbi5nZXRDb21wb25lbnQoInJhZGFyIix0LmdldCgicmFkYXJJbmRleCIpKT09PWEpe3ZhciBpPXQuZ2V0RGF0YSgpO0UobyxmdW5jdGlvbih0KXt0LnNjYWxlLnVuaW9uRXh0ZW50RnJvbURhdGEoaSxpLm1hcERpbWVuc2lvbih0LmRpbSkpfSl9fSx0aGlzKTt2YXIgZj1hLmdldCgic3BsaXROdW1iZXIiKTtmdW5jdGlvbiBwKHQpe3ZhciBlPU1hdGgucG93KDEwLE1hdGguZmxvb3IoTWF0aC5sb2codCkvTWF0aC5MTjEwKSksaT10L2U7cmV0dXJuIDI9PT1pP2k9NTppKj0yLGkqZX1FKG8sZnVuY3Rpb24odCxlKXt2YXIgaT10Zyh0LnNjYWxlLHQubW9kZWwpO2VnKHQuc2NhbGUsdC5tb2RlbCk7dmFyIG49dC5tb2RlbCxvPXQuc2NhbGUsYT1uLmdldE1pbigpLHI9bi5nZXRNYXgoKSxzPW8uZ2V0SW50ZXJ2YWwoKTtpZihudWxsIT1hJiZudWxsIT1yKW8uc2V0RXh0ZW50KCthLCtyKSxvLnNldEludGVydmFsKChyLWEpL2YpO2Vsc2UgaWYobnVsbCE9YSlmb3IodmFyIGw7bD1hK3MqZixvLnNldEV4dGVudCgrYSxsKSxvLnNldEludGVydmFsKHMpLHM9cChzKSxsPGlbMV0mJmlzRmluaXRlKGwpJiZpc0Zpbml0ZShpWzFdKTspO2Vsc2UgaWYobnVsbCE9cilmb3IodmFyIHU7dT1yLXMqZixvLnNldEV4dGVudCh1LCtyKSxvLnNldEludGVydmFsKHMpLHM9cChzKSx1PmlbMF0mJmlzRmluaXRlKHUpJiZpc0Zpbml0ZShpWzBdKTspO2Vsc2V7dmFyIGg9by5nZXRUaWNrcygpLmxlbmd0aC0xO2Y8aCYmKHM9cChzKSk7dmFyIGM9TWF0aC5yb3VuZCgoaVswXStpWzFdKS8yL3MpKnMsZD1NYXRoLnJvdW5kKGYvMik7by5zZXRFeHRlbnQoTmwoYy1kKnMpLE5sKGMrKGYtZCkqcykpLG8uc2V0SW50ZXJ2YWwocyl9fSl9LGF5LmRpbWVuc2lvbnM9W10sYXkuY3JlYXRlPWZ1bmN0aW9uKGksbil7dmFyIG89W107cmV0dXJuIGkuZWFjaENvbXBvbmVudCgicmFkYXIiLGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBheSh0LGksbik7by5wdXNoKGUpLHQuY29vcmRpbmF0ZVN5c3RlbT1lfSksaS5lYWNoU2VyaWVzQnlUeXBlKCJyYWRhciIsZnVuY3Rpb24odCl7InJhZGFyIj09PXQuZ2V0KCJjb29yZGluYXRlU3lzdGVtIikmJih0LmNvb3JkaW5hdGVTeXN0ZW09b1t0LmdldCgicmFkYXJJbmRleCIpfHwwXSl9KSxvfSxuaC5yZWdpc3RlcigicmFkYXIiLGF5KTt2YXIgcnk9Tm0udmFsdWVBeGlzO2Z1bmN0aW9uIHN5KHQsZSl7cmV0dXJuIEMoe3Nob3c6ZX0sdCl9d2Yoe3R5cGU6InJhZGFyIixvcHRpb25VcGRhdGVkOmZ1bmN0aW9uKCl7dmFyIG89dGhpcy5nZXQoImJvdW5kYXJ5R2FwIiksYT10aGlzLmdldCgic3BsaXROdW1iZXIiKSxyPXRoaXMuZ2V0KCJzY2FsZSIpLHM9dGhpcy5nZXQoImF4aXNMaW5lIiksbD10aGlzLmdldCgiYXhpc1RpY2siKSx1PXRoaXMuZ2V0KCJheGlzVHlwZSIpLGg9dGhpcy5nZXQoImF4aXNMYWJlbCIpLGM9dGhpcy5nZXQoIm5hbWUiKSxkPXRoaXMuZ2V0KCJuYW1lLnNob3ciKSxmPXRoaXMuZ2V0KCJuYW1lLmZvcm1hdHRlciIpLHA9dGhpcy5nZXQoIm5hbWVHYXAiKSxnPXRoaXMuZ2V0KCJ0cmlnZ2VyRXZlbnQiKSx0PU4odGhpcy5nZXQoImluZGljYXRvciIpfHxbXSxmdW5jdGlvbih0KXtudWxsIT10Lm1heCYmMDx0Lm1heCYmIXQubWluP3QubWluPTA6bnVsbCE9dC5taW4mJnQubWluPDAmJiF0Lm1heCYmKHQubWF4PTApO3ZhciBlPWM7aWYobnVsbCE9dC5jb2xvciYmKGU9Qyh7Y29sb3I6dC5jb2xvcn0sYykpLHQ9bShEKHQpLHtib3VuZGFyeUdhcDpvLHNwbGl0TnVtYmVyOmEsc2NhbGU6cixheGlzTGluZTpzLGF4aXNUaWNrOmwsYXhpc1R5cGU6dSxheGlzTGFiZWw6aCxuYW1lOnQudGV4dCxuYW1lTG9jYXRpb246ImVuZCIsbmFtZUdhcDpwLG5hbWVUZXh0U3R5bGU6ZSx0cmlnZ2VyRXZlbnQ6Z30sITEpLGR8fCh0Lm5hbWU9IiIpLCJzdHJpbmciPT10eXBlb2YgZil7dmFyIGk9dC5uYW1lO3QubmFtZT1mLnJlcGxhY2UoInt2YWx1ZX0iLG51bGwhPWk/aToiIil9ZWxzZSJmdW5jdGlvbiI9PXR5cGVvZiBmJiYodC5uYW1lPWYodC5uYW1lLHQpKTt2YXIgbj1MKG5ldyBJbCh0LG51bGwsdGhpcy5lY01vZGVsKSxzZyk7cmV0dXJuIG4ubWFpblR5cGU9InJhZGFyIixuLmNvbXBvbmVudEluZGV4PXRoaXMuY29tcG9uZW50SW5kZXgsbn0sdGhpcyk7dGhpcy5nZXRJbmRpY2F0b3JNb2RlbHM9ZnVuY3Rpb24oKXtyZXR1cm4gdH19LGRlZmF1bHRPcHRpb246e3psZXZlbDowLHo6MCxjZW50ZXI6WyI1MCUiLCI1MCUiXSxyYWRpdXM6Ijc1JSIsc3RhcnRBbmdsZTo5MCxuYW1lOntzaG93OiEwfSxib3VuZGFyeUdhcDpbMCwwXSxzcGxpdE51bWJlcjo1LG5hbWVHYXA6MTUsc2NhbGU6ITEsc2hhcGU6InBvbHlnb24iLGF4aXNMaW5lOm0oe2xpbmVTdHlsZTp7Y29sb3I6IiNiYmIifX0scnkuYXhpc0xpbmUpLGF4aXNMYWJlbDpzeShyeS5heGlzTGFiZWwsITEpLGF4aXNUaWNrOnN5KHJ5LmF4aXNUaWNrLCExKSxheGlzVHlwZToiaW50ZXJ2YWwiLHNwbGl0TGluZTpzeShyeS5zcGxpdExpbmUsITApLHNwbGl0QXJlYTpzeShyeS5zcGxpdEFyZWEsITApLGluZGljYXRvcjpbXX19KTt2YXIgbHk9WyJheGlzTGluZSIsImF4aXNUaWNrTGFiZWwiLCJheGlzTmFtZSJdO2JmKHt0eXBlOiJyYWRhciIscmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLmdyb3VwLnJlbW92ZUFsbCgpLHRoaXMuX2J1aWxkQXhlcyh0KSx0aGlzLl9idWlsZFNwbGl0TGluZUFuZEFyZWEodCl9LF9idWlsZEF4ZXM6ZnVuY3Rpb24odCl7dmFyIGU9dC5jb29yZGluYXRlU3lzdGVtO0UoTihlLmdldEluZGljYXRvckF4ZXMoKSxmdW5jdGlvbih0KXtyZXR1cm4gbmV3IFltKHQubW9kZWwse3Bvc2l0aW9uOltlLmN4LGUuY3ldLHJvdGF0aW9uOnQuYW5nbGUsbGFiZWxEaXJlY3Rpb246LTEsdGlja0RpcmVjdGlvbjotMSxuYW1lRGlyZWN0aW9uOjF9KX0pLGZ1bmN0aW9uKHQpe0UobHksdC5hZGQsdCksdGhpcy5ncm91cC5hZGQodC5nZXRHcm91cCgpKX0sdGhpcyl9LF9idWlsZFNwbGl0TGluZUFuZEFyZWE6ZnVuY3Rpb24odCl7dmFyIG49dC5jb29yZGluYXRlU3lzdGVtLGU9bi5nZXRJbmRpY2F0b3JBeGVzKCk7aWYoZS5sZW5ndGgpe3ZhciBpPXQuZ2V0KCJzaGFwZSIpLG89dC5nZXRNb2RlbCgic3BsaXRMaW5lIiksYT10LmdldE1vZGVsKCJzcGxpdEFyZWEiKSxyPW8uZ2V0TW9kZWwoImxpbmVTdHlsZSIpLHM9YS5nZXRNb2RlbCgiYXJlYVN0eWxlIiksbD1vLmdldCgic2hvdyIpLHU9YS5nZXQoInNob3ciKSxoPXIuZ2V0KCJjb2xvciIpLGM9cy5nZXQoImNvbG9yIik7aD1rKGgpP2g6W2hdLGM9ayhjKT9jOltjXTt2YXIgZD1bXSxmPVtdO2lmKCJjaXJjbGUiPT09aSlmb3IodmFyIHA9ZVswXS5nZXRUaWNrc0Nvb3JkcygpLGc9bi5jeCxtPW4uY3ksdj0wO3Y8cC5sZW5ndGg7disrKXtpZihsKWRbSShkLGgsdildLnB1c2gobmV3IEhyKHtzaGFwZTp7Y3g6ZyxjeTptLHI6cFt2XS5jb29yZH19KSk7aWYodSYmdjxwLmxlbmd0aC0xKWZbSShmLGMsdildLnB1c2gobmV3IFhyKHtzaGFwZTp7Y3g6ZyxjeTptLHIwOnBbdl0uY29vcmQscjpwW3YrMV0uY29vcmR9fSkpfWVsc2V7dmFyIHkseD1OKGUsZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldFRpY2tzQ29vcmRzKCk7cmV0dXJuIHk9bnVsbD09eT9pLmxlbmd0aC0xOk1hdGgubWluKGkubGVuZ3RoLTEseSksTihpLGZ1bmN0aW9uKHQpe3JldHVybiBuLmNvb3JkVG9Qb2ludCh0LmNvb3JkLGUpfSl9KSxfPVtdO2Zvcih2PTA7djw9eTt2Kyspe2Zvcih2YXIgdz1bXSxiPTA7YjxlLmxlbmd0aDtiKyspdy5wdXNoKHhbYl1bdl0pO2lmKHdbMF0mJncucHVzaCh3WzBdLnNsaWNlKCkpLGwpZFtJKGQsaCx2KV0ucHVzaChuZXcgS3Ioe3NoYXBlOntwb2ludHM6d319KSk7aWYodSYmXylmW0koZixjLHYtMSldLnB1c2gobmV3IHFyKHtzaGFwZTp7cG9pbnRzOncuY29uY2F0KF8pfX0pKTtfPXcuc2xpY2UoKS5yZXZlcnNlKCl9fXZhciBTPXIuZ2V0TGluZVN0eWxlKCksTT1zLmdldEFyZWFTdHlsZSgpO0UoZixmdW5jdGlvbih0LGUpe3RoaXMuZ3JvdXAuYWRkKGtzKHQse3N0eWxlOkMoe3N0cm9rZToibm9uZSIsZmlsbDpjW2UlYy5sZW5ndGhdfSxNKSxzaWxlbnQ6ITB9KSl9LHRoaXMpLEUoZCxmdW5jdGlvbih0LGUpe3RoaXMuZ3JvdXAuYWRkKGtzKHQse3N0eWxlOkMoe2ZpbGw6Im5vbmUiLHN0cm9rZTpoW2UlaC5sZW5ndGhdfSxTKSxzaWxlbnQ6ITB9KSl9LHRoaXMpfWZ1bmN0aW9uIEkodCxlLGkpe3ZhciBuPWklZS5sZW5ndGg7cmV0dXJuIHRbbl09dFtuXXx8W10sbn19fSk7dmFyIHV5PWljLmV4dGVuZCh7dHlwZToic2VyaWVzLnJhZGFyIixkZXBlbmRlbmNpZXM6WyJyYWRhciJdLGluaXQ6ZnVuY3Rpb24odCl7dXkuc3VwZXJBcHBseSh0aGlzLCJpbml0Iixhcmd1bWVudHMpLHRoaXMubGVnZW5kVmlzdWFsUHJvdmlkZXI9bmV3IEd2KEEodGhpcy5nZXREYXRhLHRoaXMpLEEodGhpcy5nZXRSYXdEYXRhLHRoaXMpKX0sZ2V0SW5pdGlhbERhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gQnYodGhpcyx7Z2VuZXJhdGVDb29yZDoiaW5kaWNhdG9yXyIsZ2VuZXJhdGVDb29yZENvdW50OjEvMH0pfSxmb3JtYXRUb29sdGlwOmZ1bmN0aW9uKG4pe3ZhciBvPXRoaXMuZ2V0RGF0YSgpLHQ9dGhpcy5jb29yZGluYXRlU3lzdGVtLmdldEluZGljYXRvckF4ZXMoKSxlPXRoaXMuZ2V0RGF0YSgpLmdldE5hbWUobik7cmV0dXJuIGV1KCIiPT09ZT90aGlzLm5hbWU6ZSkrIjxici8+IitOKHQsZnVuY3Rpb24odCxlKXt2YXIgaT1vLmdldChvLm1hcERpbWVuc2lvbih0LmRpbSksbik7cmV0dXJuIGV1KHQubmFtZSsiIDogIitpKX0pLmpvaW4oIjxiciAvPiIpfSxkZWZhdWx0T3B0aW9uOnt6bGV2ZWw6MCx6OjIsY29vcmRpbmF0ZVN5c3RlbToicmFkYXIiLGxlZ2VuZEhvdmVyTGluazohMCxyYWRhckluZGV4OjAsbGluZVN0eWxlOnt3aWR0aDoyLHR5cGU6InNvbGlkIn0sbGFiZWw6e3Bvc2l0aW9uOiJ0b3AifSxzeW1ib2w6ImVtcHR5Q2lyY2xlIixzeW1ib2xTaXplOjR9fSk7TWYoe3R5cGU6InJhZGFyIixyZW5kZXI6ZnVuY3Rpb24obCx0LGUpe3ZhciBpPWwuY29vcmRpbmF0ZVN5c3RlbSxnPXRoaXMuZ3JvdXAsbT1sLmdldERhdGEoKSxzPXRoaXMuX2RhdGE7ZnVuY3Rpb24gdSh0LGUpe3ZhciBpPXQuZ2V0SXRlbVZpc3VhbChlLCJzeW1ib2wiKXx8ImNpcmNsZSIsbj10LmdldEl0ZW1WaXN1YWwoZSwiY29sb3IiKTtpZigibm9uZSIhPT1pKXt2YXIgbz1mdW5jdGlvbih0KXtyZXR1cm4gayh0KXx8KHQ9Wyt0LCt0XSksdH0odC5nZXRJdGVtVmlzdWFsKGUsInN5bWJvbFNpemUiKSksYT1tZyhpLC0xLC0xLDIsMixuKTtyZXR1cm4gYS5hdHRyKHtzdHlsZTp7c3Ryb2tlTm9TY2FsZTohMH0sejI6MTAwLHNjYWxlOltvWzBdLzIsb1sxXS8yXX0pLGF9fWZ1bmN0aW9uIGgodCxlLGksbixvLGEpe2kucmVtb3ZlQWxsKCk7Zm9yKHZhciByPTA7cjxlLmxlbmd0aC0xO3IrKyl7dmFyIHM9dShuLG8pO3MmJih0W3MuX19kaW1JZHg9cl0/KHMuYXR0cigicG9zaXRpb24iLHRbcl0pLHlsW2E/ImluaXRQcm9wcyI6InVwZGF0ZVByb3BzIl0ocyx7cG9zaXRpb246ZVtyXX0sbCxvKSk6cy5hdHRyKCJwb3NpdGlvbiIsZVtyXSksaS5hZGQocykpfX1mdW5jdGlvbiBjKHQpe3JldHVybiBOKHQsZnVuY3Rpb24odCl7cmV0dXJuW2kuY3gsaS5jeV19KX1tLmRpZmYocykuYWRkKGZ1bmN0aW9uKHQpe3ZhciBlPW0uZ2V0SXRlbUxheW91dCh0KTtpZihlKXt2YXIgaT1uZXcgcXIsbj1uZXcgS3Isbz17c2hhcGU6e3BvaW50czplfX07aS5zaGFwZS5wb2ludHM9YyhlKSxuLnNoYXBlLnBvaW50cz1jKGUpLGxsKGksbyxsLHQpLGxsKG4sbyxsLHQpO3ZhciBhPW5ldyBJaSxyPW5ldyBJaTthLmFkZChuKSxhLmFkZChpKSxhLmFkZChyKSxoKG4uc2hhcGUucG9pbnRzLGUscixtLHQsITApLG0uc2V0SXRlbUdyYXBoaWNFbCh0LGEpfX0pLnVwZGF0ZShmdW5jdGlvbih0LGUpe3ZhciBpPXMuZ2V0SXRlbUdyYXBoaWNFbChlKSxuPWkuY2hpbGRBdCgwKSxvPWkuY2hpbGRBdCgxKSxhPWkuY2hpbGRBdCgyKSxyPXtzaGFwZTp7cG9pbnRzOm0uZ2V0SXRlbUxheW91dCh0KX19O3Iuc2hhcGUucG9pbnRzJiYoaChuLnNoYXBlLnBvaW50cyxyLnNoYXBlLnBvaW50cyxhLG0sdCwhMSksc2wobixyLGwpLHNsKG8scixsKSxtLnNldEl0ZW1HcmFwaGljRWwodCxpKSl9KS5yZW1vdmUoZnVuY3Rpb24odCl7Zy5yZW1vdmUocy5nZXRJdGVtR3JhcGhpY0VsKHQpKX0pLmV4ZWN1dGUoKSxtLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQsaSl7dmFyIGU9bS5nZXRJdGVtTW9kZWwoaSksbj10LmNoaWxkQXQoMCksbz10LmNoaWxkQXQoMSksYT10LmNoaWxkQXQoMikscj1tLmdldEl0ZW1WaXN1YWwoaSwiY29sb3IiKTtnLmFkZCh0KSxuLnVzZVN0eWxlKEMoZS5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCkse2ZpbGw6Im5vbmUiLHN0cm9rZTpyfSkpLG4uaG92ZXJTdHlsZT1lLmdldE1vZGVsKCJlbXBoYXNpcy5saW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKTt2YXIgcz1lLmdldE1vZGVsKCJhcmVhU3R5bGUiKSxsPWUuZ2V0TW9kZWwoImVtcGhhc2lzLmFyZWFTdHlsZSIpLHU9cy5pc0VtcHR5KCkmJnMucGFyZW50TW9kZWwuaXNFbXB0eSgpLGg9bC5pc0VtcHR5KCkmJmwucGFyZW50TW9kZWwuaXNFbXB0eSgpO2g9aCYmdSxvLmlnbm9yZT11LG8udXNlU3R5bGUoQyhzLmdldEFyZWFTdHlsZSgpLHtmaWxsOnIsb3BhY2l0eTouN30pKSxvLmhvdmVyU3R5bGU9bC5nZXRBcmVhU3R5bGUoKTt2YXIgYz1lLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoWyJjb2xvciJdKSxkPWUuZ2V0TW9kZWwoImVtcGhhc2lzLml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZSgpLGY9ZS5nZXRNb2RlbCgibGFiZWwiKSxwPWUuZ2V0TW9kZWwoImVtcGhhc2lzLmxhYmVsIik7YS5lYWNoQ2hpbGQoZnVuY3Rpb24odCl7dC5zZXRTdHlsZShjKSx0LmhvdmVyU3R5bGU9RChkKTt2YXIgZT1tLmdldChtLmRpbWVuc2lvbnNbdC5fX2RpbUlkeF0saSk7bnVsbCE9ZSYmIWlzTmFOKGUpfHwoZT0iIiksJHModC5zdHlsZSx0LmhvdmVyU3R5bGUsZixwLHtsYWJlbEZldGNoZXI6bS5ob3N0TW9kZWwsbGFiZWxEYXRhSW5kZXg6aSxsYWJlbERpbUluZGV4OnQuX19kaW1JZHgsZGVmYXVsdFRleHQ6ZSxhdXRvQ29sb3I6cixpc1JlY3RUZXh0OiEwfSl9KSx0LmhpZ2hEb3duT25VcGRhdGU9ZnVuY3Rpb24odCxlKXtvLmF0dHIoImlnbm9yZSIsImVtcGhhc2lzIj09PWU/aDp1KX0sWXModCl9KSx0aGlzLl9kYXRhPW19LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuZ3JvdXAucmVtb3ZlQWxsKCksdGhpcy5fZGF0YT1udWxsfSxkaXNwb3NlOmZ1bmN0aW9uKCl7fX0pO2Z1bmN0aW9uIGh5KHQpe3JldHVybiFpc05hTih0WzBdKSYmIWlzTmFOKHRbMV0pfWZ1bmN0aW9uIGN5KHQpe3JldHVyblt0LmN4LHQuY3ldfXlmKFl2KCJyYWRhciIpKSx5ZihNbSgicmFkYXIiLCJjaXJjbGUiKSksdmYoZnVuY3Rpb24odCl7dC5lYWNoU2VyaWVzQnlUeXBlKCJyYWRhciIsZnVuY3Rpb24odCl7dmFyIGk9dC5nZXREYXRhKCksbz1bXSxhPXQuY29vcmRpbmF0ZVN5c3RlbTtpZihhKXt2YXIgZT1hLmdldEluZGljYXRvckF4ZXMoKTtFKGUsZnVuY3Rpb24odCxuKXtpLmVhY2goaS5tYXBEaW1lbnNpb24oZVtuXS5kaW0pLGZ1bmN0aW9uKHQsZSl7b1tlXT1vW2VdfHxbXTt2YXIgaT1hLmRhdGFUb1BvaW50KHQsbik7b1tlXVtuXT1oeShpKT9pOmN5KGEpfSl9KSxpLmVhY2goZnVuY3Rpb24odCl7dmFyIGU9SShvW3RdLGZ1bmN0aW9uKHQpe3JldHVybiBoeSh0KX0pfHxjeShhKTtvW3RdLnB1c2goZS5zbGljZSgpKSxpLnNldEl0ZW1MYXlvdXQodCxvW3RdKX0pfX0pfSkscGYodHkoInJhZGFyIikpLGZmKGZ1bmN0aW9uKGkpe3ZhciB0PWkucG9sYXI7aWYodCl7ayh0KXx8KHQ9W3RdKTt2YXIgbj1bXTtFKHQsZnVuY3Rpb24odCxlKXt0LmluZGljYXRvcj8odC50eXBlJiYhdC5zaGFwZSYmKHQuc2hhcGU9dC50eXBlKSxpLnJhZGFyPWkucmFkYXJ8fFtdLGsoaS5yYWRhcil8fChpLnJhZGFyPVtpLnJhZGFyXSksaS5yYWRhci5wdXNoKHQpKTpuLnB1c2godCl9KSxpLnBvbGFyPW59RShpLnNlcmllcyxmdW5jdGlvbih0KXt0JiYicmFkYXIiPT09dC50eXBlJiZ0LnBvbGFySW5kZXgmJih0LnJhZGFySW5kZXg9dC5wb2xhckluZGV4KX0pfSk7Zm9yKHZhciBkeT1bMTI2LDI1XSxmeT1bW1swLDMuNV0sWzcsMTEuMl0sWzE1LDExLjldLFszMCw3XSxbNDIsLjddLFs1MiwuN10sWzU2LDcuN10sWzU5LC43XSxbNjQsLjddLFs2NCwwXSxbNSwwXSxbMCwzLjVdXSxbWzEzLDE2LjFdLFsxOSwxNC43XSxbMTYsMjEuN10sWzExLDIzLjFdLFsxMywxNi4xXV0sW1sxMiwzMi4yXSxbMTQsMzguNV0sWzE1LDM4LjVdLFsxMywzMi4yXSxbMTIsMzIuMl1dLFtbMTYsNDcuNl0sWzEyLDUzLjJdLFsxMyw1My4yXSxbMTgsNDcuNl0sWzE2LDQ3LjZdXSxbWzYsNjQuNF0sWzgsNzBdLFs5LDcwXSxbOCw2NC40XSxbNiw2NC40XV0sW1syMyw4Mi42XSxbMjksNzkuOF0sWzMwLDc5LjhdLFsyNSw4Mi42XSxbMjMsODIuNl1dLFtbMzcsNzAuN10sWzQzLDYyLjNdLFs0NCw2Mi4zXSxbMzksNzAuN10sWzM3LDcwLjddXSxbWzQ4LDUxLjFdLFs1MSw0NS41XSxbNTMsNDUuNV0sWzUwLDUxLjFdLFs0OCw1MS4xXV0sW1s1MSwzNV0sWzUxLDI4LjddLFs1MywyOC43XSxbNTMsMzVdLFs1MSwzNV1dLFtbNTIsMjIuNF0sWzU1LDE3LjVdLFs1NiwxNy41XSxbNTMsMjIuNF0sWzUyLDIyLjRdXSxbWzU4LDEyLjZdLFs2Miw3XSxbNjMsN10sWzYwLDEyLjZdLFs1OCwxMi42XV0sW1swLDMuNV0sWzAsOTMuMV0sWzY0LDkzLjFdLFs2NCwwXSxbNjMsMF0sWzYzLDkyLjRdLFsxLDkyLjRdLFsxLDMuNV0sWzAsMy41XV1dLHB5PTA7cHk8ZnkubGVuZ3RoO3B5KyspZm9yKHZhciBneT0wO2d5PGZ5W3B5XS5sZW5ndGg7Z3krKylmeVtweV1bZ3ldWzBdLz0xMC41LGZ5W3B5XVtneV1bMV0vPS0xNCxmeVtweV1bZ3ldWzBdKz1keVswXSxmeVtweV1bZ3ldWzFdKz1keVsxXTt2YXIgbXk9eyLljZfmtbfor7jlspsiOlszMiw4MF0sIuW5v+S4nCI6WzAsLTEwXSwi6aaZ5rivIjpbMTAsNV0sIua+s+mXqCI6Wy0xMCwxMF0sIuWkqea0pSI6WzUsNV19LHZ5PXtSdXNzaWE6WzEwMCw2MF0sIlVuaXRlZCBTdGF0ZXMiOlstOTksMzhdLCJVbml0ZWQgU3RhdGVzIG9mIEFtZXJpY2EiOlstOTksMzhdfSx5eT1bW1sxMjMuNDUxNjUyNTI2ODU1NDcsMjUuNzM1MjcxNjQ0MDIyNjFdLFsxMjMuNDk3MzE0NDUzMTI0OTksMjUuNzM1MjcxNjQ0MDIyNjFdLFsxMjMuNDk3MzE0NDUzMTI0OTksMjUuNzUwNzM0MDY0NjAwODg0XSxbMTIzLjQ1MTY1MjUyNjg1NTQ3LDI1Ljc1MDczNDA2NDYwMDg4NF0sWzEyMy40NTE2NTI1MjY4NTU0NywyNS43MzUyNzE2NDQwMjI2MV1dXSx4eT1abygpLF95PXtsb2FkOmZ1bmN0aW9uKG4sdCl7dmFyIGU9eHkodCkucGFyc2VkO2lmKGUpcmV0dXJuIGU7dmFyIGksbz10LnNwZWNpYWxBcmVhc3x8e30sYT10Lmdlb0pTT047dHJ5e2k9YT9NZyhhKTpbXX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgZ2VvSnNvbiBmb3JtYXRcbiIrdC5tZXNzYWdlKX1yZXR1cm4gZnVuY3Rpb24odCxlKXsiY2hpbmEiPT09dCYmZS5wdXNoKG5ldyBiZygi5Y2X5rW36K+45bKbIixOKGZ5LGZ1bmN0aW9uKHQpe3JldHVybnt0eXBlOiJwb2x5Z29uIixleHRlcmlvcjp0fX0pLGR5KSl9KG4saSksRShpLGZ1bmN0aW9uKHQpe3ZhciBlPXQubmFtZTshZnVuY3Rpb24odCxlKXtpZigiY2hpbmEiPT09dCl7dmFyIGk9bXlbZS5uYW1lXTtpZihpKXt2YXIgbj1lLmNlbnRlcjtuWzBdKz1pWzBdLzEwLjUsblsxXSs9LWlbMV0vMTR9fX0obix0KSxmdW5jdGlvbih0LGUpe2lmKCJ3b3JsZCI9PT10KXt2YXIgaT12eVtlLm5hbWVdO2lmKGkpe3ZhciBuPWUuY2VudGVyO25bMF09aVswXSxuWzFdPWlbMV19fX0obix0KSxmdW5jdGlvbih0LGUpeyJjaGluYSI9PT10JiYi5Y+w5rm+Ij09PWUubmFtZSYmZS5nZW9tZXRyaWVzLnB1c2goe3R5cGU6InBvbHlnb24iLGV4dGVyaW9yOnl5WzBdfSl9KG4sdCk7dmFyIGk9b1tlXTtpJiZ0LnRyYW5zZm9ybVRvKGkubGVmdCxpLnRvcCxpLndpZHRoLGkuaGVpZ2h0KX0pLHh5KHQpLnBhcnNlZD17cmVnaW9uczppLGJvdW5kaW5nUmVjdDpmdW5jdGlvbih0KXtmb3IodmFyIGUsaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgbj10W2ldLmdldEJvdW5kaW5nUmVjdCgpOyhlPWV8fG4uY2xvbmUoKSkudW5pb24obil9cmV0dXJuIGV9KGkpfX19O3ZhciB3eT1abygpO2Z1bmN0aW9uIGJ5KHQsZSl7dmFyIGksbixvPXQuc3ZnWE1MO3RyeXtZKG51bGwhPShuPShpPW8mJmZ1bmN0aW9uKHQsZSl7cmV0dXJuKG5ldyBhZCkucGFyc2UodCxlKX0obyx7aWdub3JlVmlld0JveDohMCxpZ25vcmVSb290Q2xpcDohMH0pfHx7fSkucm9vdCkpfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBzdmcgZm9ybWF0XG4iK3QubWVzc2FnZSl9dmFyIGE9aS53aWR0aCxyPWkuaGVpZ2h0LHM9aS52aWV3Qm94UmVjdDtpZihlfHwoZT1udWxsPT1hfHxudWxsPT1yP24uZ2V0Qm91bmRpbmdSZWN0KCk6bmV3IE1pKDAsMCwwLDApLG51bGwhPWEmJihlLndpZHRoPWEpLG51bGwhPXImJihlLmhlaWdodD1yKSkscyl7dmFyIGw9bWQocyxlLndpZHRoLGUuaGVpZ2h0KSx1PW47KG49bmV3IElpKS5hZGQodSksdS5zY2FsZT1sLnNjYWxlLHUucG9zaXRpb249bC5wb3NpdGlvbn1yZXR1cm4gbi5zZXRDbGlwUGF0aChuZXcgaXMoe3NoYXBlOmUucGxhaW4oKX0pKSx7cm9vdDpuLGJvdW5kaW5nUmVjdDplfX12YXIgU3k9e2dlb0pTT046X3ksc3ZnOntsb2FkOmZ1bmN0aW9uKHQsZSl7dmFyIGk9d3koZSkub3JpZ2luUm9vdDtpZihpKXJldHVybntyb290OmksYm91bmRpbmdSZWN0Ond5KGUpLmJvdW5kaW5nUmVjdH07dmFyIG49YnkoZSk7cmV0dXJuIHd5KGUpLm9yaWdpblJvb3Q9bi5yb290LHd5KGUpLmJvdW5kaW5nUmVjdD1uLmJvdW5kaW5nUmVjdCxufSxtYWtlR3JhcGhpYzpmdW5jdGlvbih0LGUsaSl7dmFyIG49d3koZSksbz1uLnJvb3RNYXB8fChuLnJvb3RNYXA9USgpKSxhPW8uZ2V0KGkpO2lmKGEpcmV0dXJuIGE7dmFyIHI9bi5vcmlnaW5Sb290LHM9bi5ib3VuZGluZ1JlY3Q7cmV0dXJuIGE9bi5vcmlnaW5Sb290SG9zdEtleT9ieShlLHMpLnJvb3Q6KG4ub3JpZ2luUm9vdEhvc3RLZXk9aSxyKSxvLnNldChpLGEpfSxyZW1vdmVHcmFwaGljOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj13eShlKSxvPW4ucm9vdE1hcDtvJiZvLnJlbW92ZUtleShpKSxpPT09bi5vcmlnaW5Sb290SG9zdEtleSYmKG4ub3JpZ2luUm9vdEhvc3RLZXk9bnVsbCl9fX0sTXk9e2xvYWQ6ZnVuY3Rpb24obixvKXt2YXIgYSxyPVtdLHM9USgpLGw9USgpO3JldHVybiBFKFR5KG4pLGZ1bmN0aW9uKHQpe3ZhciBlPVN5W3QudHlwZV0ubG9hZChuLHQpO0UoZS5yZWdpb25zLGZ1bmN0aW9uKHQpe3ZhciBlPXQubmFtZTtvJiZvLmhhc093blByb3BlcnR5KGUpJiYodD10LmNsb25lU2hhbGxvdyhlPW9bZV0pKSxyLnB1c2godCkscy5zZXQoZSx0KSxsLnNldChlLHQuY2VudGVyKX0pO3ZhciBpPWUuYm91bmRpbmdSZWN0O2kmJihhP2EudW5pb24oaSk6YT1pLmNsb25lKCkpfSkse3JlZ2lvbnM6cixyZWdpb25zTWFwOnMsbmFtZUNvb3JkTWFwOmwsYm91bmRpbmdSZWN0OmF8fG5ldyBNaSgwLDAsMCwwKX19LG1ha2VHcmFwaGljOkl5KCJtYWtlR3JhcGhpYyIpLHJlbW92ZUdyYXBoaWM6SXkoInJlbW92ZUdyYXBoaWMiKX07ZnVuY3Rpb24gSXkoYSl7cmV0dXJuIGZ1bmN0aW9uKGksbil7dmFyIHQ9VHkoaSksbz1bXTtyZXR1cm4gRSh0LGZ1bmN0aW9uKHQpe3ZhciBlPVN5W3QudHlwZV1bYV07ZSYmby5wdXNoKGUoaSx0LG4pKX0pLG99fWZ1bmN0aW9uIFR5KHQpe3JldHVybiB5ZC5yZXRyaWV2ZU1hcCh0KXx8W119YihpYy5leHRlbmQoe3R5cGU6InNlcmllcy5tYXAiLGRlcGVuZGVuY2llczpbImdlbyJdLGxheW91dE1vZGU6ImJveCIsbmVlZHNEcmF3TWFwOiExLHNlcmllc0dyb3VwOltdLGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1Cdih0aGlzLHtjb29yZERpbWVuc2lvbnM6WyJ2YWx1ZSJdLGVuY29kZURlZmF1bHRlcjpUKFl1LHRoaXMpfSksaT1lLm1hcERpbWVuc2lvbigidmFsdWUiKSxuPVEoKSxvPVtdLGE9W10scj0wLHM9ZS5jb3VudCgpO3I8cztyKyspe3ZhciBsPWUuZ2V0TmFtZShyKTtuLnNldChsLCEwKSxvLnB1c2goe25hbWU6bCx2YWx1ZTplLmdldChpLHIpLHNlbGVjdGVkOlZoKGUsciwic2VsZWN0ZWQiKX0pfXJldHVybiBFKE15LmxvYWQodGhpcy5nZXRNYXBUeXBlKCksdGhpcy5vcHRpb24ubmFtZU1hcCkucmVnaW9ucyxmdW5jdGlvbih0KXt2YXIgZT10Lm5hbWU7bi5nZXQoZSl8fChvLnB1c2goe25hbWU6ZX0pLGEucHVzaChlKSl9KSx0aGlzLnVwZGF0ZVNlbGVjdGVkTWFwKG8pLGUuYXBwZW5kVmFsdWVzKFtdLGEpLGV9LGdldEhvc3RHZW9Nb2RlbDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uLmdlb0luZGV4O3JldHVybiBudWxsIT10P3RoaXMuZGVwZW5kZW50TW9kZWxzLmdlb1t0XTpudWxsfSxnZXRNYXBUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuZ2V0SG9zdEdlb01vZGVsKCl8fHRoaXMpLm9wdGlvbi5tYXB9LGdldFJhd1ZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RGF0YSgpO3JldHVybiBlLmdldChlLm1hcERpbWVuc2lvbigidmFsdWUiKSx0KX0sZ2V0UmVnaW9uTW9kZWw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXREYXRhKCk7cmV0dXJuIGUuZ2V0SXRlbU1vZGVsKGUuaW5kZXhPZk5hbWUodCkpfSxmb3JtYXRUb29sdGlwOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmdldERhdGEoKSxpPUtsKHRoaXMuZ2V0UmF3VmFsdWUodCkpLG49ZS5nZXROYW1lKHQpLG89dGhpcy5zZXJpZXNHcm91cCxhPVtdLHI9MDtyPG8ubGVuZ3RoO3IrKyl7dmFyIHM9b1tyXS5vcmlnaW5hbERhdGEuaW5kZXhPZk5hbWUobiksbD1lLm1hcERpbWVuc2lvbigidmFsdWUiKTtpc05hTihvW3JdLm9yaWdpbmFsRGF0YS5nZXQobCxzKSl8fGEucHVzaChldShvW3JdLm5hbWUpKX1yZXR1cm4gYS5qb2luKCIsICIpKyI8YnIgLz4iK2V1KG4rIiA6ICIraSl9LGdldFRvb2x0aXBQb3NpdGlvbjpmdW5jdGlvbih0KXtpZihudWxsIT10KXt2YXIgZT10aGlzLmdldERhdGEoKS5nZXROYW1lKHQpLGk9dGhpcy5jb29yZGluYXRlU3lzdGVtLG49aS5nZXRSZWdpb24oZSk7cmV0dXJuIG4mJmkuZGF0YVRvUG9pbnQobi5jZW50ZXIpfX0sc2V0Wm9vbTpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbi56b29tPXR9LHNldENlbnRlcjpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbi5jZW50ZXI9dH0sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNvb3JkaW5hdGVTeXN0ZW06ImdlbyIsbWFwOiIiLGxlZnQ6ImNlbnRlciIsdG9wOiJjZW50ZXIiLGFzcGVjdFNjYWxlOi43NSxzaG93TGVnZW5kU3ltYm9sOiEwLGRhdGFSYW5nZUhvdmVyTGluazohMCxib3VuZGluZ0Nvb3JkczpudWxsLGNlbnRlcjpudWxsLHpvb206MSxzY2FsZUxpbWl0Om51bGwsbGFiZWw6e3Nob3c6ITEsY29sb3I6IiMwMDAifSxpdGVtU3R5bGU6e2JvcmRlcldpZHRoOi41LGJvcmRlckNvbG9yOiIjNDQ0IixhcmVhQ29sb3I6IiNlZWUifSxlbXBoYXNpczp7bGFiZWw6e3Nob3c6ITAsY29sb3I6InJnYigxMDAsMCwwKSJ9LGl0ZW1TdHlsZTp7YXJlYUNvbG9yOiJyZ2JhKDI1NSwyMTUsMCwwLjgpIn19fX0pLFZ2KTt2YXIgQXk9IlwwX2VjX2ludGVyYWN0aW9uX211dGV4IjtmdW5jdGlvbiBEeSh0LGUpe3JldHVybiEhQ3kodClbZV19ZnVuY3Rpb24gQ3kodCl7cmV0dXJuIHRbQXldfHwodFtBeV09e30pfWZ1bmN0aW9uIEx5KGkpe3RoaXMucG9pbnRlckNoZWNrZXIsdGhpcy5fenI9aSx0aGlzLl9vcHQ9e307dmFyIHQ9QSxuPXQoa3ksdGhpcyksbz10KFB5LHRoaXMpLGE9dChOeSx0aGlzKSxyPXQoT3ksdGhpcykscz10KEV5LHRoaXMpO0N0LmNhbGwodGhpcyksdGhpcy5zZXRQb2ludGVyQ2hlY2tlcj1mdW5jdGlvbih0KXt0aGlzLnBvaW50ZXJDaGVja2VyPXR9LHRoaXMuZW5hYmxlPWZ1bmN0aW9uKHQsZSl7dGhpcy5kaXNhYmxlKCksdGhpcy5fb3B0PUMoRChlKXx8e30se3pvb21Pbk1vdXNlV2hlZWw6ITAsbW92ZU9uTW91c2VNb3ZlOiEwLG1vdmVPbk1vdXNlV2hlZWw6ITEscHJldmVudERlZmF1bHRNb3VzZU1vdmU6ITB9KSxudWxsPT10JiYodD0hMCksITAhPT10JiYibW92ZSIhPT10JiYicGFuIiE9PXR8fChpLm9uKCJtb3VzZWRvd24iLG4pLGkub24oIm1vdXNlbW92ZSIsbyksaS5vbigibW91c2V1cCIsYSkpLCEwIT09dCYmInNjYWxlIiE9PXQmJiJ6b29tIiE9PXR8fChpLm9uKCJtb3VzZXdoZWVsIixyKSxpLm9uKCJwaW5jaCIscykpfSx0aGlzLmRpc2FibGU9ZnVuY3Rpb24oKXtpLm9mZigibW91c2Vkb3duIixuKSxpLm9mZigibW91c2Vtb3ZlIixvKSxpLm9mZigibW91c2V1cCIsYSksaS5vZmYoIm1vdXNld2hlZWwiLHIpLGkub2ZmKCJwaW5jaCIscyl9LHRoaXMuZGlzcG9zZT10aGlzLmRpc2FibGUsdGhpcy5pc0RyYWdnaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RyYWdnaW5nfSx0aGlzLmlzUGluY2hpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGluY2hpbmd9fWZ1bmN0aW9uIGt5KHQpe2lmKCEoSHQodCl8fHQudGFyZ2V0JiZ0LnRhcmdldC5kcmFnZ2FibGUpKXt2YXIgZT10Lm9mZnNldFgsaT10Lm9mZnNldFk7dGhpcy5wb2ludGVyQ2hlY2tlciYmdGhpcy5wb2ludGVyQ2hlY2tlcih0LGUsaSkmJih0aGlzLl94PWUsdGhpcy5feT1pLHRoaXMuX2RyYWdnaW5nPSEwKX19ZnVuY3Rpb24gUHkodCl7aWYodGhpcy5fZHJhZ2dpbmcmJkJ5KCJtb3ZlT25Nb3VzZU1vdmUiLHQsdGhpcy5fb3B0KSYmInBpbmNoIiE9PXQuZ2VzdHVyZUV2ZW50JiYhRHkodGhpcy5fenIsImdsb2JhbFBhbiIpKXt2YXIgZT10Lm9mZnNldFgsaT10Lm9mZnNldFksbj10aGlzLl94LG89dGhpcy5feSxhPWUtbixyPWktbzt0aGlzLl94PWUsdGhpcy5feT1pLHRoaXMuX29wdC5wcmV2ZW50RGVmYXVsdE1vdXNlTW92ZSYmV3QodC5ldmVudCksUnkodGhpcywicGFuIiwibW92ZU9uTW91c2VNb3ZlIix0LHtkeDphLGR5OnIsb2xkWDpuLG9sZFk6byxuZXdYOmUsbmV3WTppfSl9fWZ1bmN0aW9uIE55KHQpe0h0KHQpfHwodGhpcy5fZHJhZ2dpbmc9ITEpfWZ1bmN0aW9uIE95KHQpe3ZhciBlPUJ5KCJ6b29tT25Nb3VzZVdoZWVsIix0LHRoaXMuX29wdCksaT1CeSgibW92ZU9uTW91c2VXaGVlbCIsdCx0aGlzLl9vcHQpLG49dC53aGVlbERlbHRhLG89TWF0aC5hYnMobiksYT10Lm9mZnNldFgscj10Lm9mZnNldFk7aWYoMCE9PW4mJihlfHxpKSl7aWYoZSl7dmFyIHM9MzxvPzEuNDoxPG8/MS4yOjEuMTt6eSh0aGlzLCJ6b29tIiwiem9vbU9uTW91c2VXaGVlbCIsdCx7c2NhbGU6MDxuP3M6MS9zLG9yaWdpblg6YSxvcmlnaW5ZOnJ9KX1pZihpKXt2YXIgbD1NYXRoLmFicyhuKTt6eSh0aGlzLCJzY3JvbGxNb3ZlIiwibW92ZU9uTW91c2VXaGVlbCIsdCx7c2Nyb2xsRGVsdGE6KDA8bj8xOi0xKSooMzxsPy40OjE8bD8uMTU6LjA1KSxvcmlnaW5YOmEsb3JpZ2luWTpyfSl9fX1mdW5jdGlvbiBFeSh0KXtEeSh0aGlzLl96ciwiZ2xvYmFsUGFuIil8fHp5KHRoaXMsInpvb20iLG51bGwsdCx7c2NhbGU6MTx0LnBpbmNoU2NhbGU/MS4xOjEvMS4xLG9yaWdpblg6dC5waW5jaFgsb3JpZ2luWTp0LnBpbmNoWX0pfWZ1bmN0aW9uIHp5KHQsZSxpLG4sbyl7dC5wb2ludGVyQ2hlY2tlciYmdC5wb2ludGVyQ2hlY2tlcihuLG8ub3JpZ2luWCxvLm9yaWdpblkpJiYoV3Qobi5ldmVudCksUnkodCxlLGksbixvKSl9ZnVuY3Rpb24gUnkodCxlLGksbixvKXtvLmlzQXZhaWxhYmxlQmVoYXZpb3I9QShCeSxudWxsLGksbiksdC50cmlnZ2VyKGUsbyl9ZnVuY3Rpb24gQnkodCxlLGkpe3ZhciBuPWlbdF07cmV0dXJuIXR8fG4mJigheihuKXx8ZS5ldmVudFtuKyJLZXkiXSl9ZnVuY3Rpb24gVnkodCxlLGkpe3ZhciBuPXQudGFyZ2V0LG89bi5wb3NpdGlvbjtvWzBdKz1lLG9bMV0rPWksbi5kaXJ0eSgpfWZ1bmN0aW9uIEd5KHQsZSxpLG4pe3ZhciBvPXQudGFyZ2V0LGE9dC56b29tTGltaXQscj1vLnBvc2l0aW9uLHM9by5zY2FsZSxsPXQuem9vbT10Lnpvb218fDE7aWYobCo9ZSxhKXt2YXIgdT1hLm1pbnx8MCxoPWEubWF4fHwxLzA7bD1NYXRoLm1heChNYXRoLm1pbihoLGwpLHUpfXZhciBjPWwvdC56b29tO3Quem9vbT1sLHJbMF0tPShpLXJbMF0pKihjLTEpLHJbMV0tPShuLXJbMV0pKihjLTEpLHNbMF0qPWMsc1sxXSo9YyxvLmRpcnR5KCl9Z2Yoe3R5cGU6InRha2VHbG9iYWxDdXJzb3IiLGV2ZW50OiJnbG9iYWxDdXJzb3JUYWtlbiIsdXBkYXRlOiJ1cGRhdGUifSxmdW5jdGlvbigpe30pLGIoTHksQ3QpO3ZhciBGeT17YXhpc1BvaW50ZXI6MSx0b29sdGlwOjEsYnJ1c2g6MX07ZnVuY3Rpb24gV3kodCxlLGkpe3ZhciBuPWUuZ2V0Q29tcG9uZW50QnlFbGVtZW50KHQudG9wVGFyZ2V0KSxvPW4mJm4uY29vcmRpbmF0ZVN5c3RlbTtyZXR1cm4gbiYmbiE9PWkmJiFGeVtuLm1haW5UeXBlXSYmbyYmby5tb2RlbCE9PWl9ZnVuY3Rpb24gSHkodCl7dmFyIGU9dC5nZXRJdGVtU3R5bGUoKSxpPXQuZ2V0KCJhcmVhQ29sb3IiKTtyZXR1cm4gbnVsbCE9aSYmKGUuZmlsbD1pKSxlfWZ1bmN0aW9uIFp5KGksdCl7dC5lYWNoQ2hpbGQoZnVuY3Rpb24oZSl7RShlLl9fcmVnaW9ucyxmdW5jdGlvbih0KXtlLnRyaWdnZXIoaS5pc1NlbGVjdGVkKHQubmFtZSk/ImVtcGhhc2lzIjoibm9ybWFsIil9KX0pfWZ1bmN0aW9uIFV5KHQsZSl7dmFyIGk9bmV3IElpO3RoaXMudWlkPUNsKCJlY19tYXBfZHJhdyIpLHRoaXMuX2NvbnRyb2xsZXI9bmV3IEx5KHQuZ2V0WnIoKSksdGhpcy5fY29udHJvbGxlckhvc3Q9e3RhcmdldDplP2k6bnVsbH0sdGhpcy5ncm91cD1pLHRoaXMuX3VwZGF0ZUdyb3VwPWUsdGhpcy5fbW91c2VEb3duRmxhZyx0aGlzLl9tYXBOYW1lLHRoaXMuX2luaXRpYWxpemVkLGkuYWRkKHRoaXMuX3JlZ2lvbnNHcm91cD1uZXcgSWkpLGkuYWRkKHRoaXMuX2JhY2tncm91bmRHcm91cD1uZXcgSWkpfVV5LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VXksZHJhdzpmdW5jdGlvbihfLHQsZSxpLG4pe3ZhciB3PSJnZW8iPT09Xy5tYWluVHlwZSxiPV8uZ2V0RGF0YSYmXy5nZXREYXRhKCk7dyYmdC5lYWNoQ29tcG9uZW50KHttYWluVHlwZToic2VyaWVzIixzdWJUeXBlOiJtYXAifSxmdW5jdGlvbih0KXtifHx0LmdldEhvc3RHZW9Nb2RlbCgpIT09X3x8KGI9dC5nZXREYXRhKCkpfSk7dmFyIG89Xy5jb29yZGluYXRlU3lzdGVtO3RoaXMuX3VwZGF0ZUJhY2tncm91bmQobyk7dmFyIFM9dGhpcy5fcmVnaW9uc0dyb3VwLE09dGhpcy5ncm91cDtvLl9yb2FtVHJhbnNmb3JtYWJsZS50cmFuc2Zvcm0mJihNLnRyYW5zZm9ybT1vLl9yb2FtVHJhbnNmb3JtYWJsZS50cmFuc2Zvcm0uc2xpY2UoKSxNLmRlY29tcG9zZVRyYW5zZm9ybSgpKTt2YXIgST1vLl9yYXdUcmFuc2Zvcm1hYmxlLnNjYWxlLFQ9by5fcmF3VHJhbnNmb3JtYWJsZS5wb3NpdGlvbjtTLnJlbW92ZUFsbCgpO3ZhciBBPVsiaXRlbVN0eWxlIl0sRD1bImVtcGhhc2lzIiwiaXRlbVN0eWxlIl0sQz1bImxhYmVsIl0sTD1bImVtcGhhc2lzIiwibGFiZWwiXSxrPVEoKTtFKG8ucmVnaW9ucyxmdW5jdGlvbih0KXt2YXIgZT1rLmdldCh0Lm5hbWUpfHxrLnNldCh0Lm5hbWUsbmV3IElpKSxhPW5ldyBocyh7c2VnbWVudElnbm9yZVRocmVzaG9sZDoxLHNoYXBlOntwYXRoczpbXX19KTtlLmFkZChhKTt2YXIgaSxuPSh4PV8uZ2V0UmVnaW9uTW9kZWwodC5uYW1lKXx8XykuZ2V0TW9kZWwoQSksbz14LmdldE1vZGVsKEQpLHI9SHkobikscz1IeShvKSxsPXguZ2V0TW9kZWwoQyksdT14LmdldE1vZGVsKEwpO2lmKGIpe2k9Yi5pbmRleE9mTmFtZSh0Lm5hbWUpO3ZhciBoPWIuZ2V0SXRlbVZpc3VhbChpLCJjb2xvciIsITApO2gmJihyLmZpbGw9aCl9ZnVuY3Rpb24gYyh0KXtyZXR1cm5bdFswXSpJWzBdK1RbMF0sdFsxXSpJWzFdK1RbMV1dfUUodC5nZW9tZXRyaWVzLGZ1bmN0aW9uKHQpe2lmKCJwb2x5Z29uIj09PXQudHlwZSl7Zm9yKHZhciBlPVtdLGk9MDtpPHQuZXh0ZXJpb3IubGVuZ3RoOysraSllLnB1c2goYyh0LmV4dGVyaW9yW2ldKSk7YS5zaGFwZS5wYXRocy5wdXNoKG5ldyBxcih7c2VnbWVudElnbm9yZVRocmVzaG9sZDoxLHNoYXBlOntwb2ludHM6ZX19KSk7Zm9yKGk9MDtpPCh0LmludGVyaW9ycz90LmludGVyaW9ycy5sZW5ndGg6MCk7KytpKXtmb3IodmFyIG49dC5pbnRlcmlvcnNbaV0sbz0oZT1bXSwwKTtvPG4ubGVuZ3RoOysrbyllLnB1c2goYyhuW29dKSk7YS5zaGFwZS5wYXRocy5wdXNoKG5ldyBxcih7c2VnbWVudElnbm9yZVRocmVzaG9sZDoxLHNoYXBlOntwb2ludHM6ZX19KSl9fX0pLGEuc2V0U3R5bGUociksYS5zdHlsZS5zdHJva2VOb1NjYWxlPSEwLGEuY3VsbGluZz0hMDt2YXIgZD1sLmdldCgic2hvdyIpLGY9dS5nZXQoInNob3ciKSxwPWImJmlzTmFOKGIuZ2V0KGIubWFwRGltZW5zaW9uKCJ2YWx1ZSIpLGkpKSxnPWImJmIuZ2V0SXRlbUxheW91dChpKTtpZih3fHxwJiYoZHx8Zil8fGcmJmcuc2hvd0xhYmVsKXt2YXIgbSx2PXc/dC5uYW1lOmk7KCFifHwwPD1pKSYmKG09Xyk7dmFyIHk9bmV3IEZyKHtwb3NpdGlvbjpjKHQuY2VudGVyLnNsaWNlKCkpLHNjYWxlOlsxL00uc2NhbGVbMF0sMS9NLnNjYWxlWzFdXSx6MjoxMCxzaWxlbnQ6ITB9KTskcyh5LnN0eWxlLHkuaG92ZXJTdHlsZT17fSxsLHUse2xhYmVsRmV0Y2hlcjptLGxhYmVsRGF0YUluZGV4OnYsZGVmYXVsdFRleHQ6dC5uYW1lLHVzZUluc2lkZVN0eWxlOiExfSx7dGV4dEFsaWduOiJjZW50ZXIiLHRleHRWZXJ0aWNhbEFsaWduOiJtaWRkbGUifSksZS5hZGQoeSl9aWYoYiliLnNldEl0ZW1HcmFwaGljRWwoaSxlKTtlbHNle3ZhciB4PV8uZ2V0UmVnaW9uTW9kZWwodC5uYW1lKTthLmV2ZW50RGF0YT17Y29tcG9uZW50VHlwZToiZ2VvIixjb21wb25lbnRJbmRleDpfLmNvbXBvbmVudEluZGV4LGdlb0luZGV4Ol8uY29tcG9uZW50SW5kZXgsbmFtZTp0Lm5hbWUscmVnaW9uOngmJngub3B0aW9ufHx7fX19KGUuX19yZWdpb25zfHwoZS5fX3JlZ2lvbnM9W10pKS5wdXNoKHQpLGUuaGlnaERvd25TaWxlbnRPblRvdWNoPSEhXy5nZXQoInNlbGVjdGVkTW9kZSIpLFlzKGUscyksUy5hZGQoZSl9KSx0aGlzLl91cGRhdGVDb250cm9sbGVyKF8sdCxlKSxmdW5jdGlvbihuLG8sYSxyLHMpe2Eub2ZmKCJjbGljayIpLGEub2ZmKCJtb3VzZWRvd24iKSxvLmdldCgic2VsZWN0ZWRNb2RlIikmJihhLm9uKCJtb3VzZWRvd24iLGZ1bmN0aW9uKCl7bi5fbW91c2VEb3duRmxhZz0hMH0pLGEub24oImNsaWNrIixmdW5jdGlvbih0KXtpZihuLl9tb3VzZURvd25GbGFnKXtuLl9tb3VzZURvd25GbGFnPSExO2Zvcih2YXIgZT10LnRhcmdldDshZS5fX3JlZ2lvbnM7KWU9ZS5wYXJlbnQ7aWYoZSl7dmFyIGk9e3R5cGU6KCJnZW8iPT09by5tYWluVHlwZT8iZ2VvIjoibWFwIikrIlRvZ2dsZVNlbGVjdCIsYmF0Y2g6TihlLl9fcmVnaW9ucyxmdW5jdGlvbih0KXtyZXR1cm57bmFtZTp0Lm5hbWUsZnJvbTpzLnVpZH19KX07aVtvLm1haW5UeXBlKyJJZCJdPW8uaWQsci5kaXNwYXRjaEFjdGlvbihpKSxaeShvLGEpfX19KSl9KHRoaXMsXyxTLGUsaSksWnkoXyxTKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fcmVnaW9uc0dyb3VwLnJlbW92ZUFsbCgpLHRoaXMuX2JhY2tncm91bmRHcm91cC5yZW1vdmVBbGwoKSx0aGlzLl9jb250cm9sbGVyLmRpc3Bvc2UoKSx0aGlzLl9tYXBOYW1lJiZNeS5yZW1vdmVHcmFwaGljKHRoaXMuX21hcE5hbWUsdGhpcy51aWQpLHRoaXMuX21hcE5hbWU9bnVsbCx0aGlzLl9jb250cm9sbGVySG9zdD17fX0sX3VwZGF0ZUJhY2tncm91bmQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5tYXA7dGhpcy5fbWFwTmFtZSE9PWUmJkUoTXkubWFrZUdyYXBoaWMoZSx0aGlzLnVpZCksZnVuY3Rpb24odCl7dGhpcy5fYmFja2dyb3VuZEdyb3VwLmFkZCh0KX0sdGhpcyksdGhpcy5fbWFwTmFtZT1lfSxfdXBkYXRlQ29udHJvbGxlcjpmdW5jdGlvbihuLHQsbyl7dmFyIGE9bi5jb29yZGluYXRlU3lzdGVtLGU9dGhpcy5fY29udHJvbGxlcixpPXRoaXMuX2NvbnRyb2xsZXJIb3N0O2kuem9vbUxpbWl0PW4uZ2V0KCJzY2FsZUxpbWl0IiksaS56b29tPWEuZ2V0Wm9vbSgpLGUuZW5hYmxlKG4uZ2V0KCJyb2FtIil8fCExKTt2YXIgcj1uLm1haW5UeXBlO2Z1bmN0aW9uIHMoKXt2YXIgdD17dHlwZToiZ2VvUm9hbSIsY29tcG9uZW50VHlwZTpyfTtyZXR1cm4gdFtyKyJJZCJdPW4uaWQsdH1lLm9mZigicGFuIikub24oInBhbiIsZnVuY3Rpb24odCl7dGhpcy5fbW91c2VEb3duRmxhZz0hMSxWeShpLHQuZHgsdC5keSksby5kaXNwYXRjaEFjdGlvbihMKHMoKSx7ZHg6dC5keCxkeTp0LmR5fSkpfSx0aGlzKSxlLm9mZigiem9vbSIpLm9uKCJ6b29tIixmdW5jdGlvbih0KXtpZih0aGlzLl9tb3VzZURvd25GbGFnPSExLEd5KGksdC5zY2FsZSx0Lm9yaWdpblgsdC5vcmlnaW5ZKSxvLmRpc3BhdGNoQWN0aW9uKEwocygpLHt6b29tOnQuc2NhbGUsb3JpZ2luWDp0Lm9yaWdpblgsb3JpZ2luWTp0Lm9yaWdpbll9KSksdGhpcy5fdXBkYXRlR3JvdXApe3ZhciBlPXRoaXMuZ3JvdXAuc2NhbGU7dGhpcy5fcmVnaW9uc0dyb3VwLnRyYXZlcnNlKGZ1bmN0aW9uKHQpeyJ0ZXh0Ij09PXQudHlwZSYmdC5hdHRyKCJzY2FsZSIsWzEvZVswXSwxL2VbMV1dKX0pfX0sdGhpcyksZS5zZXRQb2ludGVyQ2hlY2tlcihmdW5jdGlvbih0LGUsaSl7cmV0dXJuIGEuZ2V0Vmlld1JlY3RBZnRlclJvYW0oKS5jb250YWluKGUsaSkmJiFXeSh0LG8sbil9KX19O3ZhciBYeT0iX19zZXJpZXNNYXBIaWdoRG93biIsWXk9Il9fc2VyaWVzTWFwQ2FsbEtleSI7ZnVuY3Rpb24gankodCl7dmFyIGU9dGhpc1tYeV07ZSYmZS5yZWNvcmRWZXJzaW9uPT09dGhpc1tZeV0mJnF5KGUsdCl9ZnVuY3Rpb24gcXkodCxlKXt2YXIgaT10LmNpcmNsZSxuPXQubGFiZWxNb2RlbCxvPXQuaG92ZXJMYWJlbE1vZGVsLGE9dC5lbXBoYXNpc1RleHQscj10Lm5vcm1hbFRleHQ7ZT8oaS5zdHlsZS5leHRlbmRGcm9tKFFzKHt9LG8se3RleHQ6by5nZXQoInNob3ciKT9hOm51bGx9LHtpc1JlY3RUZXh0OiEwLHVzZUluc2lkZVN0eWxlOiExfSwhMCkpLGkuX19tYXBPcmlnaW5hbFoyPWkuejIsaS56Mis9eXMpOihRcyhpLnN0eWxlLG4se3RleHQ6bi5nZXQoInNob3ciKT9yOm51bGwsdGV4dFBvc2l0aW9uOm4uZ2V0U2hhbGxvdygicG9zaXRpb24iKXx8ImJvdHRvbSJ9LHtpc1JlY3RUZXh0OiEwLHVzZUluc2lkZVN0eWxlOiExfSksaS5kaXJ0eSghMSksbnVsbCE9aS5fX21hcE9yaWdpbmFsWjImJihpLnoyPWkuX19tYXBPcmlnaW5hbFoyLGkuX19tYXBPcmlnaW5hbFoyPW51bGwpKX1mdW5jdGlvbiBLeSh0LGUsaSl7dmFyIG49dC5nZXRab29tKCksbz10LmdldENlbnRlcigpLGE9ZS56b29tLHI9dC5kYXRhVG9Qb2ludChvKTtpZihudWxsIT1lLmR4JiZudWxsIT1lLmR5KXtyWzBdLT1lLmR4LHJbMV0tPWUuZHk7bz10LnBvaW50VG9EYXRhKHIpO3Quc2V0Q2VudGVyKG8pfWlmKG51bGwhPWEpe2lmKGkpe3ZhciBzPWkubWlufHwwLGw9aS5tYXh8fDEvMDthPU1hdGgubWF4KE1hdGgubWluKG4qYSxsKSxzKS9ufXQuc2NhbGVbMF0qPWEsdC5zY2FsZVsxXSo9YTt2YXIgdT10LnBvc2l0aW9uLGg9KGUub3JpZ2luWC11WzBdKSooYS0xKSxjPShlLm9yaWdpblktdVsxXSkqKGEtMSk7dVswXS09aCx1WzFdLT1jLHQudXBkYXRlVHJhbnNmb3JtKCk7bz10LnBvaW50VG9EYXRhKHIpO3Quc2V0Q2VudGVyKG8pLHQuc2V0Wm9vbShhKm4pfXJldHVybntjZW50ZXI6dC5nZXRDZW50ZXIoKSx6b29tOnQuZ2V0Wm9vbSgpfX1NZih7dHlwZToibWFwIixyZW5kZXI6ZnVuY3Rpb24odCxlLGksbil7aWYoIW58fCJtYXBUb2dnbGVTZWxlY3QiIT09bi50eXBlfHxuLmZyb20hPT10aGlzLnVpZCl7dmFyIG89dGhpcy5ncm91cDtpZihvLnJlbW92ZUFsbCgpLCF0LmdldEhvc3RHZW9Nb2RlbCgpKXtpZihuJiYiZ2VvUm9hbSI9PT1uLnR5cGUmJiJzZXJpZXMiPT09bi5jb21wb25lbnRUeXBlJiZuLnNlcmllc0lkPT09dC5pZCkoYT10aGlzLl9tYXBEcmF3KSYmby5hZGQoYS5ncm91cCk7ZWxzZSBpZih0Lm5lZWRzRHJhd01hcCl7dmFyIGE9dGhpcy5fbWFwRHJhd3x8bmV3IFV5KGksITApO28uYWRkKGEuZ3JvdXApLGEuZHJhdyh0LGUsaSx0aGlzLG4pLHRoaXMuX21hcERyYXc9YX1lbHNlIHRoaXMuX21hcERyYXcmJnRoaXMuX21hcERyYXcucmVtb3ZlKCksdGhpcy5fbWFwRHJhdz1udWxsO3QuZ2V0KCJzaG93TGVnZW5kU3ltYm9sIikmJmUuZ2V0Q29tcG9uZW50KCJsZWdlbmQiKSYmdGhpcy5fcmVuZGVyU3ltYm9scyh0LGUsaSl9fX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fbWFwRHJhdyYmdGhpcy5fbWFwRHJhdy5yZW1vdmUoKSx0aGlzLl9tYXBEcmF3PW51bGwsdGhpcy5ncm91cC5yZW1vdmVBbGwoKX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX21hcERyYXcmJnRoaXMuX21hcERyYXcucmVtb3ZlKCksdGhpcy5fbWFwRHJhdz1udWxsfSxfcmVuZGVyU3ltYm9sczpmdW5jdGlvbih4LHQsZSl7dmFyIF89eC5vcmlnaW5hbERhdGEsdz10aGlzLmdyb3VwO18uZWFjaChfLm1hcERpbWVuc2lvbigidmFsdWUiKSxmdW5jdGlvbih0LGUpe2lmKCFpc05hTih0KSl7dmFyIGk9Xy5nZXRJdGVtTGF5b3V0KGUpO2lmKGkmJmkucG9pbnQpe3ZhciBuPWkucG9pbnQsbz1pLm9mZnNldCxhPW5ldyBIcih7c3R5bGU6e2ZpbGw6eC5nZXREYXRhKCkuZ2V0VmlzdWFsKCJjb2xvciIpfSxzaGFwZTp7Y3g6blswXSs5Km8sY3k6blsxXSxyOjN9LHNpbGVudDohMCx6Mjo4KyhvPzA6eXMrMSl9KTtpZighbyl7dmFyIHI9eC5tYWluU2VyaWVzLmdldERhdGEoKSxzPV8uZ2V0TmFtZShlKSxsPXIuaW5kZXhPZk5hbWUocyksdT1fLmdldEl0ZW1Nb2RlbChlKSxoPXUuZ2V0TW9kZWwoImxhYmVsIiksYz11LmdldE1vZGVsKCJlbXBoYXNpcy5sYWJlbCIpLGQ9ci5nZXRJdGVtR3JhcGhpY0VsKGwpLGY9SCh4LmdldEZvcm1hdHRlZExhYmVsKGwsIm5vcm1hbCIpLHMpLHA9SCh4LmdldEZvcm1hdHRlZExhYmVsKGwsImVtcGhhc2lzIiksZiksZz1kW1h5XSxtPU1hdGgucmFuZG9tKCk7aWYoIWcpe2c9ZFtYeV09e307dmFyIHY9VChqeSwhMCkseT1UKGp5LCExKTtkLm9uKCJtb3VzZW92ZXIiLHYpLm9uKCJtb3VzZW91dCIseSkub24oImVtcGhhc2lzIix2KS5vbigibm9ybWFsIix5KX1MKGcse3JlY29yZFZlcnNpb246ZFtZeV09bSxjaXJjbGU6YSxsYWJlbE1vZGVsOmgsaG92ZXJMYWJlbE1vZGVsOmMsZW1waGFzaXNUZXh0OnAsbm9ybWFsVGV4dDpmfSkscXkoZywhMSl9dy5hZGQoYSl9fX0pfX0pLGdmKHt0eXBlOiJnZW9Sb2FtIixldmVudDoiZ2VvUm9hbSIsdXBkYXRlOiJ1cGRhdGVUcmFuc2Zvcm0ifSxmdW5jdGlvbihuLHQpe3ZhciBvPW4uY29tcG9uZW50VHlwZXx8InNlcmllcyI7dC5lYWNoQ29tcG9uZW50KHttYWluVHlwZTpvLHF1ZXJ5Om59LGZ1bmN0aW9uKHQpe3ZhciBlPXQuY29vcmRpbmF0ZVN5c3RlbTtpZigiZ2VvIj09PWUudHlwZSl7dmFyIGk9S3koZSxuLHQuZ2V0KCJzY2FsZUxpbWl0IikpO3Quc2V0Q2VudGVyJiZ0LnNldENlbnRlcihpLmNlbnRlciksdC5zZXRab29tJiZ0LnNldFpvb20oaS56b29tKSwic2VyaWVzIj09PW8mJkUodC5zZXJpZXNHcm91cCxmdW5jdGlvbih0KXt0LnNldENlbnRlcihpLmNlbnRlciksdC5zZXRab29tKGkuem9vbSl9KX19KX0pO3ZhciAkeT1idDtmdW5jdGlvbiBKeSgpe2ZlLmNhbGwodGhpcyl9ZnVuY3Rpb24gUXkodCl7dGhpcy5uYW1lPXQsdGhpcy56b29tTGltaXQsZmUuY2FsbCh0aGlzKSx0aGlzLl9yb2FtVHJhbnNmb3JtYWJsZT1uZXcgSnksdGhpcy5fcmF3VHJhbnNmb3JtYWJsZT1uZXcgSnksdGhpcy5fY2VudGVyLHRoaXMuX3pvb219ZnVuY3Rpb24gdHgodCxlLGksbil7dmFyIG89aS5zZXJpZXNNb2RlbCxhPW8/by5jb29yZGluYXRlU3lzdGVtOm51bGw7cmV0dXJuIGE9PT10aGlzP2FbdF0obik6bnVsbH1mdW5jdGlvbiBleCh0LGUsaSxuKXtReS5jYWxsKHRoaXMsdCksdGhpcy5tYXA9ZTt2YXIgbz1NeS5sb2FkKGUsaSk7dGhpcy5fbmFtZUNvb3JkTWFwPW8ubmFtZUNvb3JkTWFwLHRoaXMuX3JlZ2lvbnNNYXA9by5yZWdpb25zTWFwLHRoaXMuX2ludmVydExvbmdpdHV0ZT1udWxsPT1ufHxuLHRoaXMucmVnaW9ucz1vLnJlZ2lvbnMsdGhpcy5fcmVjdD1vLmJvdW5kaW5nUmVjdH1mdW5jdGlvbiBpeCh0LGUsaSxuKXt2YXIgbz1pLmdlb01vZGVsLGE9aS5zZXJpZXNNb2RlbCxyPW8/by5jb29yZGluYXRlU3lzdGVtOmE/YS5jb29yZGluYXRlU3lzdGVtfHwoYS5nZXRSZWZlcnJpbmdDb21wb25lbnRzKCJnZW8iKVswXXx8e30pLmNvb3JkaW5hdGVTeXN0ZW06bnVsbDtyZXR1cm4gcj09PXRoaXM/clt0XShuKTpudWxsfWZ1bmN0aW9uIG54KHQsZSl7dmFyIGk9dC5nZXQoImJvdW5kaW5nQ29vcmRzIik7aWYobnVsbCE9aSl7dmFyIG49aVswXSxvPWlbMV07aXNOYU4oblswXSl8fGlzTmFOKG5bMV0pfHxpc05hTihvWzBdKXx8aXNOYU4ob1sxXSl8fHRoaXMuc2V0Qm91bmRpbmdSZWN0KG5bMF0sblsxXSxvWzBdLW5bMF0sb1sxXS1uWzFdKX12YXIgYSxyPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KCkscz10LmdldCgibGF5b3V0Q2VudGVyIiksbD10LmdldCgibGF5b3V0U2l6ZSIpLHU9ZS5nZXRXaWR0aCgpLGg9ZS5nZXRIZWlnaHQoKSxjPXIud2lkdGgvci5oZWlnaHQqdGhpcy5hc3BlY3RTY2FsZSxkPSExO2lmKHMmJmwmJihzPVtQbChzWzBdLHUpLFBsKHNbMV0saCldLGw9UGwobCxNYXRoLm1pbih1LGgpKSxpc05hTihzWzBdKXx8aXNOYU4oc1sxXSl8fGlzTmFOKGwpfHwoZD0hMCkpLGQpe3ZhciBmPXt9OzE8Yz8oZi53aWR0aD1sLGYuaGVpZ2h0PWwvYyk6KGYuaGVpZ2h0PWwsZi53aWR0aD1sKmMpLGYueT1zWzFdLWYuaGVpZ2h0LzIsZi54PXNbMF0tZi53aWR0aC8yfWVsc2UoYT10LmdldEJveExheW91dFBhcmFtcygpKS5hc3BlY3Q9YyxmPXZ1KGEse3dpZHRoOnUsaGVpZ2h0Omh9KTt0aGlzLnNldFZpZXdSZWN0KGYueCxmLnksZi53aWR0aCxmLmhlaWdodCksdGhpcy5zZXRDZW50ZXIodC5nZXQoImNlbnRlciIpKSx0aGlzLnNldFpvb20odC5nZXQoInpvb20iKSl9ZnVuY3Rpb24gb3goaSx0KXtFKHQuZ2V0KCJnZW9Db29yZCIpLGZ1bmN0aW9uKHQsZSl7aS5hZGRHZW9Db29yZChlLHQpfSl9YihKeSxmZSksUXkucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpReSx0eXBlOiJ2aWV3IixkaW1lbnNpb25zOlsieCIsInkiXSxzZXRCb3VuZGluZ1JlY3Q6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIHRoaXMuX3JlY3Q9bmV3IE1pKHQsZSxpLG4pLHRoaXMuX3JlY3R9LGdldEJvdW5kaW5nUmVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWN0fSxzZXRWaWV3UmVjdDpmdW5jdGlvbih0LGUsaSxuKXt0aGlzLnRyYW5zZm9ybVRvKHQsZSxpLG4pLHRoaXMuX3ZpZXdSZWN0PW5ldyBNaSh0LGUsaSxuKX0sdHJhbnNmb3JtVG86ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dGhpcy5nZXRCb3VuZGluZ1JlY3QoKSxhPXRoaXMuX3Jhd1RyYW5zZm9ybWFibGU7YS50cmFuc2Zvcm09by5jYWxjdWxhdGVUcmFuc2Zvcm0obmV3IE1pKHQsZSxpLG4pKSxhLmRlY29tcG9zZVRyYW5zZm9ybSgpLHRoaXMuX3VwZGF0ZVRyYW5zZm9ybSgpfSxzZXRDZW50ZXI6ZnVuY3Rpb24odCl7dCYmKHRoaXMuX2NlbnRlcj10LHRoaXMuX3VwZGF0ZUNlbnRlckFuZFpvb20oKSl9LHNldFpvb206ZnVuY3Rpb24odCl7dD10fHwxO3ZhciBlPXRoaXMuem9vbUxpbWl0O2UmJihudWxsIT1lLm1heCYmKHQ9TWF0aC5taW4oZS5tYXgsdCkpLG51bGwhPWUubWluJiYodD1NYXRoLm1heChlLm1pbix0KSkpLHRoaXMuX3pvb209dCx0aGlzLl91cGRhdGVDZW50ZXJBbmRab29tKCl9LGdldERlZmF1bHRDZW50ZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEJvdW5kaW5nUmVjdCgpO3JldHVyblt0LngrdC53aWR0aC8yLHQueSt0LmhlaWdodC8yXX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NlbnRlcnx8dGhpcy5nZXREZWZhdWx0Q2VudGVyKCl9LGdldFpvb206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fem9vbXx8MX0sZ2V0Um9hbVRyYW5zZm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yb2FtVHJhbnNmb3JtYWJsZS5nZXRMb2NhbFRyYW5zZm9ybSgpfSxfdXBkYXRlQ2VudGVyQW5kWm9vbTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Jhd1RyYW5zZm9ybWFibGUuZ2V0TG9jYWxUcmFuc2Zvcm0oKSxlPXRoaXMuX3JvYW1UcmFuc2Zvcm1hYmxlLGk9dGhpcy5nZXREZWZhdWx0Q2VudGVyKCksbj10aGlzLmdldENlbnRlcigpLG89dGhpcy5nZXRab29tKCk7bj1idChbXSxuLHQpLGk9YnQoW10saSx0KSxlLm9yaWdpbj1uLGUucG9zaXRpb249W2lbMF0tblswXSxpWzFdLW5bMV1dLGUuc2NhbGU9W28sb10sdGhpcy5fdXBkYXRlVHJhbnNmb3JtKCl9LF91cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yb2FtVHJhbnNmb3JtYWJsZSxlPXRoaXMuX3Jhd1RyYW5zZm9ybWFibGU7KGUucGFyZW50PXQpLnVwZGF0ZVRyYW5zZm9ybSgpLGUudXBkYXRlVHJhbnNmb3JtKCksbmUodGhpcy50cmFuc2Zvcm18fCh0aGlzLnRyYW5zZm9ybT1bXSksZS50cmFuc2Zvcm18fGVlKCkpLHRoaXMuX3Jhd1RyYW5zZm9ybT1lLmdldExvY2FsVHJhbnNmb3JtKCksdGhpcy5pbnZUcmFuc2Zvcm09dGhpcy5pbnZUcmFuc2Zvcm18fFtdLGxlKHRoaXMuaW52VHJhbnNmb3JtLHRoaXMudHJhbnNmb3JtKSx0aGlzLmRlY29tcG9zZVRyYW5zZm9ybSgpfSxnZXRWaWV3UmVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aWV3UmVjdH0sZ2V0Vmlld1JlY3RBZnRlclJvYW06ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEJvdW5kaW5nUmVjdCgpLmNsb25lKCk7cmV0dXJuIHQuYXBwbHlUcmFuc2Zvcm0odGhpcy50cmFuc2Zvcm0pLHR9LGRhdGFUb1BvaW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lP3RoaXMuX3Jhd1RyYW5zZm9ybTp0aGlzLnRyYW5zZm9ybTtyZXR1cm4gaT1pfHxbXSxuPyR5KGksdCxuKTphdChpLHQpfSxwb2ludFRvRGF0YTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmludlRyYW5zZm9ybTtyZXR1cm4gZT8keShbXSx0LGUpOlt0WzBdLHRbMV1dfSxjb252ZXJ0VG9QaXhlbDpUKHR4LCJkYXRhVG9Qb2ludCIpLGNvbnZlcnRGcm9tUGl4ZWw6VCh0eCwicG9pbnRUb0RhdGEiKSxjb250YWluUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZ2V0Vmlld1JlY3RBZnRlclJvYW0oKS5jb250YWluKHRbMF0sdFsxXSl9fSxiKFF5LGZlKSxleC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmV4LHR5cGU6ImdlbyIsZGltZW5zaW9uczpbImxuZyIsImxhdCJdLGNvbnRhaW5Db29yZDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5yZWdpb25zLGk9MDtpPGUubGVuZ3RoO2krKylpZihlW2ldLmNvbnRhaW4odCkpcmV0dXJuITA7cmV0dXJuITF9LHRyYW5zZm9ybVRvOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KCksYT10aGlzLl9pbnZlcnRMb25naXR1dGU7bz1vLmNsb25lKCksYSYmKG8ueT0tby55LW8uaGVpZ2h0KTt2YXIgcj10aGlzLl9yYXdUcmFuc2Zvcm1hYmxlO2lmKHIudHJhbnNmb3JtPW8uY2FsY3VsYXRlVHJhbnNmb3JtKG5ldyBNaSh0LGUsaSxuKSksci5kZWNvbXBvc2VUcmFuc2Zvcm0oKSxhKXt2YXIgcz1yLnNjYWxlO3NbMV09LXNbMV19ci51cGRhdGVUcmFuc2Zvcm0oKSx0aGlzLl91cGRhdGVUcmFuc2Zvcm0oKX0sZ2V0UmVnaW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yZWdpb25zTWFwLmdldCh0KX0sZ2V0UmVnaW9uQnlDb29yZDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5yZWdpb25zLGk9MDtpPGUubGVuZ3RoO2krKylpZihlW2ldLmNvbnRhaW4odCkpcmV0dXJuIGVbaV19LGFkZEdlb0Nvb3JkOmZ1bmN0aW9uKHQsZSl7dGhpcy5fbmFtZUNvb3JkTWFwLnNldCh0LGUpfSxnZXRHZW9Db29yZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbmFtZUNvb3JkTWFwLmdldCh0KX0sZ2V0Qm91bmRpbmdSZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlY3R9LGRhdGFUb1BvaW50OmZ1bmN0aW9uKHQsZSxpKXtpZigic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMuZ2V0R2VvQ29vcmQodCkpLHQpcmV0dXJuIFF5LnByb3RvdHlwZS5kYXRhVG9Qb2ludC5jYWxsKHRoaXMsdCxlLGkpfSxjb252ZXJ0VG9QaXhlbDpUKGl4LCJkYXRhVG9Qb2ludCIpLGNvbnZlcnRGcm9tUGl4ZWw6VChpeCwicG9pbnRUb0RhdGEiKX0sYihleCxReSk7dmFyIGF4PXtkaW1lbnNpb25zOmV4LnByb3RvdHlwZS5kaW1lbnNpb25zLGNyZWF0ZTpmdW5jdGlvbih0LHMpe3ZhciBsPVtdO3QuZWFjaENvbXBvbmVudCgiZ2VvIixmdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0KCJtYXAiKSxuPXQuZ2V0KCJhc3BlY3RTY2FsZSIpLG89ITAsYT15ZC5yZXRyaWV2ZU1hcChpKTthJiZhWzBdJiYic3ZnIj09PWFbMF0udHlwZT8obnVsbD09biYmKG49MSksbz0hMSk6bnVsbD09biYmKG49Ljc1KTt2YXIgcj1uZXcgZXgoaStlLGksdC5nZXQoIm5hbWVNYXAiKSxvKTtyLmFzcGVjdFNjYWxlPW4sci56b29tTGltaXQ9dC5nZXQoInNjYWxlTGltaXQiKSxsLnB1c2gociksb3gocix0KSwodC5jb29yZGluYXRlU3lzdGVtPXIpLm1vZGVsPXQsci5yZXNpemU9bngsci5yZXNpemUodCxzKX0pLHQuZWFjaFNlcmllcyhmdW5jdGlvbih0KXtpZigiZ2VvIj09PXQuZ2V0KCJjb29yZGluYXRlU3lzdGVtIikpe3ZhciBlPXQuZ2V0KCJnZW9JbmRleCIpfHwwO3QuY29vcmRpbmF0ZVN5c3RlbT1sW2VdfX0pO3ZhciBpPXt9O3JldHVybiB0LmVhY2hTZXJpZXNCeVR5cGUoIm1hcCIsZnVuY3Rpb24odCl7aWYoIXQuZ2V0SG9zdEdlb01vZGVsKCkpe3ZhciBlPXQuZ2V0TWFwVHlwZSgpO2lbZV09aVtlXXx8W10saVtlXS5wdXNoKHQpfX0pLEUoaSxmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBleChlLGUscChOKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0KCJuYW1lTWFwIil9KSkpO2kuem9vbUxpbWl0PVcuYXBwbHkobnVsbCxOKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0KCJzY2FsZUxpbWl0Iil9KSksbC5wdXNoKGkpLGkucmVzaXplPW54LGkuYXNwZWN0U2NhbGU9dFswXS5nZXQoImFzcGVjdFNjYWxlIiksaS5yZXNpemUodFswXSxzKSxFKHQsZnVuY3Rpb24odCl7b3godC5jb29yZGluYXRlU3lzdGVtPWksdCl9KX0pLGx9LGdldEZpbGxlZFJlZ2lvbnM6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj0odHx8W10pLnNsaWNlKCksbz1RKCksYT0wO2E8bi5sZW5ndGg7YSsrKW8uc2V0KG5bYV0ubmFtZSxuW2FdKTtyZXR1cm4gRShNeS5sb2FkKGUsaSkucmVnaW9ucyxmdW5jdGlvbih0KXt2YXIgZT10Lm5hbWU7by5nZXQoZSl8fG4ucHVzaCh7bmFtZTplfSl9KSxufX07bWYoImdlbyIsYXgpO3ZmKGZ1bmN0aW9uKGkpe3ZhciBvPXt9O2kuZWFjaFNlcmllc0J5VHlwZSgibWFwIixmdW5jdGlvbih0KXt2YXIgZT10LmdldE1hcFR5cGUoKTtpZighdC5nZXRIb3N0R2VvTW9kZWwoKSYmIW9bZV0pe3ZhciBsPXt9O0UodC5zZXJpZXNHcm91cCxmdW5jdGlvbih0KXt2YXIgcj10LmNvb3JkaW5hdGVTeXN0ZW0scz10Lm9yaWdpbmFsRGF0YTt0LmdldCgic2hvd0xlZ2VuZFN5bWJvbCIpJiZpLmdldENvbXBvbmVudCgibGVnZW5kIikmJnMuZWFjaChzLm1hcERpbWVuc2lvbigidmFsdWUiKSxmdW5jdGlvbih0LGUpe3ZhciBpPXMuZ2V0TmFtZShlKSxuPXIuZ2V0UmVnaW9uKGkpO2lmKG4mJiFpc05hTih0KSl7dmFyIG89bFtpXXx8MCxhPXIuZGF0YVRvUG9pbnQobi5jZW50ZXIpO2xbaV09bysxLHMuc2V0SXRlbUxheW91dChlLHtwb2ludDphLG9mZnNldDpvfSl9fSl9KTt2YXIgbj10LmdldERhdGEoKTtuLmVhY2goZnVuY3Rpb24odCl7dmFyIGU9bi5nZXROYW1lKHQpLGk9bi5nZXRJdGVtTGF5b3V0KHQpfHx7fTtpLnNob3dMYWJlbD0hbFtlXSxuLnNldEl0ZW1MYXlvdXQodCxpKX0pLG9bZV09ITB9fSl9KSx5ZihmdW5jdGlvbih0KXt0LmVhY2hTZXJpZXNCeVR5cGUoIm1hcCIsZnVuY3Rpb24odCl7dmFyIGU9dC5nZXQoImNvbG9yIiksaT10LmdldE1vZGVsKCJpdGVtU3R5bGUiKSxuPWkuZ2V0KCJhcmVhQ29sb3IiKSxvPWkuZ2V0KCJjb2xvciIpfHxlW3Quc2VyaWVzSW5kZXglZS5sZW5ndGhdO3QuZ2V0RGF0YSgpLnNldFZpc3VhbCh7YXJlYUNvbG9yOm4sY29sb3I6b30pfSl9KSxwZihJZC5QUk9DRVNTT1IuU1RBVElTVElDLGZ1bmN0aW9uKHQpe3ZhciBuPXt9O3QuZWFjaFNlcmllc0J5VHlwZSgibWFwIixmdW5jdGlvbih0KXt2YXIgZT10LmdldEhvc3RHZW9Nb2RlbCgpLGk9ZT8ibyIrZS5pZDoiaSIrdC5nZXRNYXBUeXBlKCk7KG5baV09bltpXXx8W10pLnB1c2godCl9KSxFKG4sZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9ZnVuY3Rpb24odSxoKXt2YXIgYz17fTtyZXR1cm4gRSh1LGZ1bmN0aW9uKG4pe24uZWFjaChuLm1hcERpbWVuc2lvbigidmFsdWUiKSxmdW5jdGlvbih0LGUpe3ZhciBpPSJlYy0iK24uZ2V0TmFtZShlKTtjW2ldPWNbaV18fFtdLGlzTmFOKHQpfHxjW2ldLnB1c2godCl9KX0pLHVbMF0ubWFwKHVbMF0ubWFwRGltZW5zaW9uKCJ2YWx1ZSIpLGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLG49ImVjLSIrdVswXS5nZXROYW1lKGUpLG89MCxhPTEvMCxyPS0xLzAscz1jW25dLmxlbmd0aCxsPTA7bDxzO2wrKylhPU1hdGgubWluKGEsY1tuXVtsXSkscj1NYXRoLm1heChyLGNbbl1bbF0pLG8rPWNbbl1bbF07cmV0dXJuIGk9Im1pbiI9PT1oP2E6Im1heCI9PT1oP3I6ImF2ZXJhZ2UiPT09aD9vL3M6bywwPT09cz9OYU46aX0pfShOKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0RGF0YSgpfSksdFswXS5nZXQoIm1hcFZhbHVlQ2FsY3VsYXRpb24iKSksbj0wO248dC5sZW5ndGg7bisrKXRbbl0ub3JpZ2luYWxEYXRhPXRbbl0uZ2V0RGF0YSgpO2ZvcihuPTA7bjx0Lmxlbmd0aDtuKyspKHRbbl0uc2VyaWVzR3JvdXA9dClbbl0ubmVlZHNEcmF3TWFwPTA9PT1uJiYhdFtuXS5nZXRIb3N0R2VvTW9kZWwoKSx0W25dLnNldERhdGEoaS5jbG9uZVNoYWxsb3coKSksdFtuXS5tYWluU2VyaWVzPXRbMF19KX0pLGZmKGZ1bmN0aW9uKHQpe3ZhciBlPVtdO0UodC5zZXJpZXMsZnVuY3Rpb24odCl7dCYmIm1hcCI9PT10LnR5cGUmJihlLnB1c2godCksdC5tYXA9dC5tYXB8fHQubWFwVHlwZSxDKHQsdC5tYXBMb2NhdGlvbikpfSl9KSxYdigibWFwIixbe3R5cGU6Im1hcFRvZ2dsZVNlbGVjdCIsZXZlbnQ6Im1hcHNlbGVjdGNoYW5nZWQiLG1ldGhvZDoidG9nZ2xlU2VsZWN0ZWQifSx7dHlwZToibWFwU2VsZWN0IixldmVudDoibWFwc2VsZWN0ZWQiLG1ldGhvZDoic2VsZWN0In0se3R5cGU6Im1hcFVuU2VsZWN0IixldmVudDoibWFwdW5zZWxlY3RlZCIsbWV0aG9kOiJ1blNlbGVjdCJ9XSk7dmFyIHJ4PUUsc3g9IlwwX19saW5rX2RhdGFzIixseD0iXDBfX2xpbmtfbWFpbkRhdGEiO2Z1bmN0aW9uIHV4KGkpe3ZhciBuPWkubWFpbkRhdGEsdD1pLmRhdGFzO3R8fCh0PXttYWluOm59LGkuZGF0YXNBdHRyPXttYWluOiJkYXRhIn0pLGkuZGF0YXM9aS5tYWluRGF0YT1udWxsLHB4KG4sdCxpKSxyeCh0LGZ1bmN0aW9uKGUpe3J4KG4uVFJBTlNGRVJBQkxFX01FVEhPRFMsZnVuY3Rpb24odCl7ZS53cmFwTWV0aG9kKHQsVChoeCxpKSl9KX0pLG4ud3JhcE1ldGhvZCgiY2xvbmVTaGFsbG93IixUKGR4LGkpKSxyeChuLkNIQU5HQUJMRV9NRVRIT0RTLGZ1bmN0aW9uKHQpe24ud3JhcE1ldGhvZCh0LFQoY3gsaSkpfSksWSh0W24uZGF0YVR5cGVdPT09bil9ZnVuY3Rpb24gaHgodCxlKXtpZihmdW5jdGlvbih0KXtyZXR1cm4gdFtseF09PT10fSh0aGlzKSl7dmFyIGk9TCh7fSx0aGlzW3N4XSk7cHgoaVt0aGlzLmRhdGFUeXBlXT1lLGksdCl9ZWxzZSBneChlLHRoaXMuZGF0YVR5cGUsdGhpc1tseF0sdCk7cmV0dXJuIGV9ZnVuY3Rpb24gY3godCxlKXtyZXR1cm4gdC5zdHJ1Y3QmJnQuc3RydWN0LnVwZGF0ZSh0aGlzKSxlfWZ1bmN0aW9uIGR4KGksbil7cmV0dXJuIHJ4KG5bc3hdLGZ1bmN0aW9uKHQsZSl7dCE9PW4mJmd4KHQuY2xvbmVTaGFsbG93KCksZSxuLGkpfSksbn1mdW5jdGlvbiBmeCh0KXt2YXIgZT10aGlzW2x4XTtyZXR1cm4gbnVsbD09dHx8bnVsbD09ZT9lOmVbc3hdW3RdfWZ1bmN0aW9uIHB4KGksdCxuKXtpW3N4XT17fSxyeCh0LGZ1bmN0aW9uKHQsZSl7Z3godCxlLGksbil9KX1mdW5jdGlvbiBneCh0LGUsaSxuKXsoaVtzeF1bZV09dClbbHhdPWksdC5kYXRhVHlwZT1lLG4uc3RydWN0JiYodFtuLnN0cnVjdEF0dHJdPW4uc3RydWN0LG4uc3RydWN0W24uZGF0YXNBdHRyW2VdXT10KSx0LmdldExpbmtlZERhdGE9Znh9ZnVuY3Rpb24gbXgodCxlKXt0aGlzLm5hbWU9dHx8IiIsdGhpcy5kZXB0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5wYXJlbnROb2RlPW51bGwsdGhpcy5kYXRhSW5kZXg9LTEsdGhpcy5jaGlsZHJlbj1bXSx0aGlzLnZpZXdDaGlsZHJlbj1bXSx0aGlzLmhvc3RUcmVlPWV9ZnVuY3Rpb24gdngoZSx0LGkpe3RoaXMucm9vdCx0aGlzLmRhdGEsdGhpcy5fbm9kZXM9W10sdGhpcy5ob3N0TW9kZWw9ZSx0aGlzLmxldmVsTW9kZWxzPU4odHx8W10sZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBJbCh0LGUsZS5lY01vZGVsKX0pLHRoaXMubGVhdmVzTW9kZWw9bmV3IElsKGl8fHt9LGUsZS5lY01vZGVsKX1mdW5jdGlvbiB5eCh0LGUpe3ZhciBpPWUuY2hpbGRyZW47dC5wYXJlbnROb2RlIT09ZSYmKGkucHVzaCh0KSx0LnBhcmVudE5vZGU9ZSl9ZnVuY3Rpb24geHgodCxlKXt2YXIgaT10LmlzRXhwYW5kP3QuY2hpbGRyZW46W10sbj10LnBhcmVudE5vZGUuY2hpbGRyZW4sbz10LmhpZXJOb2RlLmk/blt0LmhpZXJOb2RlLmktMV06bnVsbDtpZihpLmxlbmd0aCl7IWZ1bmN0aW9uKHQpe3ZhciBlPXQuY2hpbGRyZW4saT1lLmxlbmd0aCxuPTAsbz0wO2Zvcig7MDw9LS1pOyl7dmFyIGE9ZVtpXTthLmhpZXJOb2RlLnByZWxpbSs9bixhLmhpZXJOb2RlLm1vZGlmaWVyKz1uLG8rPWEuaGllck5vZGUuY2hhbmdlLG4rPWEuaGllck5vZGUuc2hpZnQrb319KHQpO3ZhciBhPShpWzBdLmhpZXJOb2RlLnByZWxpbStpW2kubGVuZ3RoLTFdLmhpZXJOb2RlLnByZWxpbSkvMjtvPyh0LmhpZXJOb2RlLnByZWxpbT1vLmhpZXJOb2RlLnByZWxpbStlKHQsbyksdC5oaWVyTm9kZS5tb2RpZmllcj10LmhpZXJOb2RlLnByZWxpbS1hKTp0LmhpZXJOb2RlLnByZWxpbT1hfWVsc2UgbyYmKHQuaGllck5vZGUucHJlbGltPW8uaGllck5vZGUucHJlbGltK2UodCxvKSk7dC5wYXJlbnROb2RlLmhpZXJOb2RlLmRlZmF1bHRBbmNlc3Rvcj1mdW5jdGlvbih0LGUsaSxuKXtpZihlKXtmb3IodmFyIG89dCxhPXQscj1hLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0scz1lLGw9by5oaWVyTm9kZS5tb2RpZmllcix1PWEuaGllck5vZGUubW9kaWZpZXIsaD1yLmhpZXJOb2RlLm1vZGlmaWVyLGM9cy5oaWVyTm9kZS5tb2RpZmllcjtzPU14KHMpLGE9SXgoYSkscyYmYTspe289TXgobykscj1JeChyKSxvLmhpZXJOb2RlLmFuY2VzdG9yPXQ7dmFyIGQ9cy5oaWVyTm9kZS5wcmVsaW0rYy1hLmhpZXJOb2RlLnByZWxpbS11K24ocyxhKTswPGQmJihUeCgocD10LGc9aSwoZj1zKS5oaWVyTm9kZS5hbmNlc3Rvci5wYXJlbnROb2RlPT09cC5wYXJlbnROb2RlP2YuaGllck5vZGUuYW5jZXN0b3I6ZyksdCxkKSx1Kz1kLGwrPWQpLGMrPXMuaGllck5vZGUubW9kaWZpZXIsdSs9YS5oaWVyTm9kZS5tb2RpZmllcixsKz1vLmhpZXJOb2RlLm1vZGlmaWVyLGgrPXIuaGllck5vZGUubW9kaWZpZXJ9cyYmIU14KG8pJiYoby5oaWVyTm9kZS50aHJlYWQ9cyxvLmhpZXJOb2RlLm1vZGlmaWVyKz1jLWwpLGEmJiFJeChyKSYmKHIuaGllck5vZGUudGhyZWFkPWEsci5oaWVyTm9kZS5tb2RpZmllcis9dS1oLGk9dCl9dmFyIGYscCxnO3JldHVybiBpfSh0LG8sdC5wYXJlbnROb2RlLmhpZXJOb2RlLmRlZmF1bHRBbmNlc3Rvcnx8blswXSxlKX1mdW5jdGlvbiBfeCh0KXt2YXIgZT10LmhpZXJOb2RlLnByZWxpbSt0LnBhcmVudE5vZGUuaGllck5vZGUubW9kaWZpZXI7dC5zZXRMYXlvdXQoe3g6ZX0sITApLHQuaGllck5vZGUubW9kaWZpZXIrPXQucGFyZW50Tm9kZS5oaWVyTm9kZS5tb2RpZmllcn1mdW5jdGlvbiBieCh0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90OkF4fWZ1bmN0aW9uIFN4KHQsZSl7dmFyIGk9e307cmV0dXJuIHQtPU1hdGguUEkvMixpLng9ZSpNYXRoLmNvcyh0KSxpLnk9ZSpNYXRoLnNpbih0KSxpfWZ1bmN0aW9uIE14KHQpe3ZhciBlPXQuY2hpbGRyZW47cmV0dXJuIGUubGVuZ3RoJiZ0LmlzRXhwYW5kP2VbZS5sZW5ndGgtMV06dC5oaWVyTm9kZS50aHJlYWR9ZnVuY3Rpb24gSXgodCl7dmFyIGU9dC5jaGlsZHJlbjtyZXR1cm4gZS5sZW5ndGgmJnQuaXNFeHBhbmQ/ZVswXTp0LmhpZXJOb2RlLnRocmVhZH1mdW5jdGlvbiBUeCh0LGUsaSl7dmFyIG49aS8oZS5oaWVyTm9kZS5pLXQuaGllck5vZGUuaSk7ZS5oaWVyTm9kZS5jaGFuZ2UtPW4sZS5oaWVyTm9kZS5zaGlmdCs9aSxlLmhpZXJOb2RlLm1vZGlmaWVyKz1pLGUuaGllck5vZGUucHJlbGltKz1pLHQuaGllck5vZGUuY2hhbmdlKz1ufWZ1bmN0aW9uIEF4KHQsZSl7cmV0dXJuIHQucGFyZW50Tm9kZT09PWUucGFyZW50Tm9kZT8xOjJ9ZnVuY3Rpb24gRHgodCxlKXt2YXIgaT10LmdldEl0ZW1MYXlvdXQoZSk7cmV0dXJuIGkmJiFpc05hTihpLngpJiYhaXNOYU4oaS55KSYmIm5vbmUiIT09dC5nZXRJdGVtVmlzdWFsKGUsInN5bWJvbCIpfWZ1bmN0aW9uIEN4KHQsZSxpKXtyZXR1cm4gaS5pdGVtTW9kZWw9ZSxpLml0ZW1TdHlsZT1lLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKSxpLmhvdmVySXRlbVN0eWxlPWUuZ2V0TW9kZWwoImVtcGhhc2lzLml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZSgpLGkubGluZVN0eWxlPWUuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLmdldExpbmVTdHlsZSgpLGkubGFiZWxNb2RlbD1lLmdldE1vZGVsKCJsYWJlbCIpLGkuaG92ZXJMYWJlbE1vZGVsPWUuZ2V0TW9kZWwoImVtcGhhc2lzLmxhYmVsIiksITE9PT10LmlzRXhwYW5kJiYwIT09dC5jaGlsZHJlbi5sZW5ndGg/aS5zeW1ib2xJbm5lckNvbG9yPWkuaXRlbVN0eWxlLmZpbGw6aS5zeW1ib2xJbm5lckNvbG9yPSIjZmZmIixpfWZ1bmN0aW9uIEx4KHQsZSxpLG4sbyxhKXt2YXIgcj0haSxzPXQudHJlZS5nZXROb2RlQnlEYXRhSW5kZXgoZSksbD1zLmdldE1vZGVsKCksdT0oYT1DeChzLGwsYSksdC50cmVlLnJvb3QpLGg9cy5wYXJlbnROb2RlPT09dT9zOnMucGFyZW50Tm9kZXx8cyxjPXQuZ2V0SXRlbUdyYXBoaWNFbChoLmRhdGFJbmRleCksZD1oLmdldExheW91dCgpLGY9Yz97eDpjLnBvc2l0aW9uWzBdLHk6Yy5wb3NpdGlvblsxXSxyYXdYOmMuX19yYWRpYWxPbGRSYXdYLHJhd1k6Yy5fX3JhZGlhbE9sZFJhd1l9OmQscD1zLmdldExheW91dCgpO3I/KGk9bmV3IEZnKHQsZSxhKSkuYXR0cigicG9zaXRpb24iLFtmLngsZi55XSk6aS51cGRhdGVEYXRhKHQsZSxhKSxpLl9fcmFkaWFsT2xkUmF3WD1pLl9fcmFkaWFsUmF3WCxpLl9fcmFkaWFsT2xkUmF3WT1pLl9fcmFkaWFsUmF3WSxpLl9fcmFkaWFsUmF3WD1wLnJhd1gsaS5fX3JhZGlhbFJhd1k9cC5yYXdZLG4uYWRkKGkpLHQuc2V0SXRlbUdyYXBoaWNFbChlLGkpLHNsKGkse3Bvc2l0aW9uOltwLngscC55XX0sbyk7dmFyIGc9aS5nZXRTeW1ib2xQYXRoKCk7aWYoInJhZGlhbCI9PT1hLmxheW91dCl7dmFyIG0sdix5PXUuY2hpbGRyZW5bMF0seD15LmdldExheW91dCgpLF89eS5jaGlsZHJlbi5sZW5ndGg7aWYocC54PT09eC54JiYhMD09PXMuaXNFeHBhbmQpe3ZhciB3PXt9O3cueD0oeS5jaGlsZHJlblswXS5nZXRMYXlvdXQoKS54K3kuY2hpbGRyZW5bXy0xXS5nZXRMYXlvdXQoKS54KS8yLHcueT0oeS5jaGlsZHJlblswXS5nZXRMYXlvdXQoKS55K3kuY2hpbGRyZW5bXy0xXS5nZXRMYXlvdXQoKS55KS8yLChtPU1hdGguYXRhbjIody55LXgueSx3LngteC54KSk8MCYmKG09MipNYXRoLlBJK20pLCh2PXcueDx4LngpJiYobS09TWF0aC5QSSl9ZWxzZShtPU1hdGguYXRhbjIocC55LXgueSxwLngteC54KSk8MCYmKG09MipNYXRoLlBJK20pLDA9PT1zLmNoaWxkcmVuLmxlbmd0aHx8MCE9PXMuY2hpbGRyZW4ubGVuZ3RoJiYhMT09PXMuaXNFeHBhbmQ/KHY9cC54PHgueCkmJihtLT1NYXRoLlBJKToodj1wLng+eC54KXx8KG0tPU1hdGguUEkpO3ZhciBiPXY/ImxlZnQiOiJyaWdodCIsUz1hLmxhYmVsTW9kZWwuZ2V0KCJyb3RhdGUiKSxNPVMqKE1hdGguUEkvMTgwKTtnLnNldFN0eWxlKHt0ZXh0UG9zaXRpb246YS5sYWJlbE1vZGVsLmdldCgicG9zaXRpb24iKXx8Yix0ZXh0Um90YXRpb246bnVsbD09Uz8tbTpNLHRleHRPcmlnaW46ImNlbnRlciIsdmVydGljYWxBbGlnbjoibWlkZGxlIn0pfWlmKHMucGFyZW50Tm9kZSYmcy5wYXJlbnROb2RlIT09dSl7dmFyIEk9aS5fX2VkZ2U7c2woST1JfHwoaS5fX2VkZ2U9bmV3IGxzKHtzaGFwZTpQeChhLGYsZiksc3R5bGU6Qyh7b3BhY2l0eTowLHN0cm9rZU5vU2NhbGU6ITB9LGEubGluZVN0eWxlKX0pKSx7c2hhcGU6UHgoYSxkLHApLHN0eWxlOntvcGFjaXR5OjF9fSxvKSxuLmFkZChJKX19ZnVuY3Rpb24ga3godCxlLGksbixvLGEpe2Zvcih2YXIgcixzPXQudHJlZS5nZXROb2RlQnlEYXRhSW5kZXgoZSksbD10LnRyZWUucm9vdCx1PXMuZ2V0TW9kZWwoKSxoPShhPUN4KHMsdSxhKSxzLnBhcmVudE5vZGU9PT1sP3M6cy5wYXJlbnROb2RlfHxzKTtudWxsPT0ocj1oLmdldExheW91dCgpKTspaD1oLnBhcmVudE5vZGU9PT1sP2g6aC5wYXJlbnROb2RlfHxoO3NsKGkse3Bvc2l0aW9uOltyLngrMSxyLnkrMV19LG8sZnVuY3Rpb24oKXtuLnJlbW92ZShpKSx0LnNldEl0ZW1HcmFwaGljRWwoZSxudWxsKX0pLGkuZmFkZU91dChudWxsLHtrZWVwTGFiZWw6ITB9KTt2YXIgYz1pLl9fZWRnZTtjJiZzbChjLHtzaGFwZTpQeChhLHIsciksc3R5bGU6e29wYWNpdHk6MH19LG8sZnVuY3Rpb24oKXtuLnJlbW92ZShjKX0pfWZ1bmN0aW9uIFB4KHQsZSxpKXt2YXIgbixvLGEscixzLGwsdSxoLGM9dC5vcmllbnQ7aWYoInJhZGlhbCIhPT10LmxheW91dClyZXR1cm4gcz1lLngsdT1lLnksbD1pLngsaD1pLnksIkxSIiE9PWMmJiJSTCIhPT1jfHwobj1zKyhsLXMpKnQuY3VydmF0dXJlLG89dSxhPWwrKHMtbCkqdC5jdXJ2YXR1cmUscj1oKSwiVEIiIT09YyYmIkJUIiE9PWN8fChuPXMsbz11KyhoLXUpKnQuY3VydmF0dXJlLGE9bCxyPWgrKHUtaCkqdC5jdXJ2YXR1cmUpLHt4MTpzLHkxOnUseDI6bCx5MjpoLGNweDE6bixjcHkxOm8sY3B4MjphLGNweTI6cn07cz1lLnJhd1gsdT1lLnJhd1ksbD1pLnJhd1gsaD1pLnJhd1k7dmFyIGQ9U3gocyx1KSxmPVN4KHMsdSsoaC11KSp0LmN1cnZhdHVyZSkscD1TeChsLGgrKHUtaCkqdC5jdXJ2YXR1cmUpLGc9U3gobCxoKTtyZXR1cm57eDE6ZC54LHkxOmQueSx4MjpnLngseTI6Zy55LGNweDE6Zi54LGNweTE6Zi55LGNweDI6cC54LGNweTI6cC55fX1mdW5jdGlvbiBOeCh0LGUpe2Zvcih2YXIgaSxuPVt0XTtpPW4ucG9wKCk7KWlmKGUoaSksaS5pc0V4cGFuZCl7dmFyIG89aS5jaGlsZHJlbjtpZihvLmxlbmd0aClmb3IodmFyIGE9by5sZW5ndGgtMTswPD1hO2EtLSluLnB1c2gob1thXSl9fW14LnByb3RvdHlwZT17Y29uc3RydWN0b3I6bXgsaXNSZW1vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YUluZGV4PDB9LGVhY2hOb2RlOmZ1bmN0aW9uKHQsZSxpKXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKGk9ZSxlPXQsdD1udWxsKSx6KHQ9dHx8e30pJiYodD17b3JkZXI6dH0pO3ZhciBuLG89dC5vcmRlcnx8InByZW9yZGVyIixhPXRoaXNbdC5hdHRyfHwiY2hpbGRyZW4iXTsicHJlb3JkZXIiPT09byYmKG49ZS5jYWxsKGksdGhpcykpO2Zvcih2YXIgcj0wOyFuJiZyPGEubGVuZ3RoO3IrKylhW3JdLmVhY2hOb2RlKHQsZSxpKTsicG9zdG9yZGVyIj09PW8mJmUuY2FsbChpLHRoaXMpfSx1cGRhdGVEZXB0aEFuZEhlaWdodDpmdW5jdGlvbih0KXt2YXIgZT0wO3RoaXMuZGVwdGg9dDtmb3IodmFyIGk9MDtpPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIG49dGhpcy5jaGlsZHJlbltpXTtuLnVwZGF0ZURlcHRoQW5kSGVpZ2h0KHQrMSksbi5oZWlnaHQ+ZSYmKGU9bi5oZWlnaHQpfXRoaXMuaGVpZ2h0PWUrMX0sZ2V0Tm9kZUJ5SWQ6ZnVuY3Rpb24odCl7aWYodGhpcy5nZXRJZCgpPT09dClyZXR1cm4gdGhpcztmb3IodmFyIGU9MCxpPXRoaXMuY2hpbGRyZW4sbj1pLmxlbmd0aDtlPG47ZSsrKXt2YXIgbz1pW2VdLmdldE5vZGVCeUlkKHQpO2lmKG8pcmV0dXJuIG99fSxjb250YWluczpmdW5jdGlvbih0KXtpZih0PT09dGhpcylyZXR1cm4hMDtmb3IodmFyIGU9MCxpPXRoaXMuY2hpbGRyZW4sbj1pLmxlbmd0aDtlPG47ZSsrKXt2YXIgbz1pW2VdLmNvbnRhaW5zKHQpO2lmKG8pcmV0dXJuIG99fSxnZXRBbmNlc3RvcnM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLGk9dD90aGlzOnRoaXMucGFyZW50Tm9kZTtpOyllLnB1c2goaSksaT1pLnBhcmVudE5vZGU7cmV0dXJuIGUucmV2ZXJzZSgpLGV9LGdldFZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaG9zdFRyZWUuZGF0YTtyZXR1cm4gZS5nZXQoZS5nZXREaW1lbnNpb24odHx8InZhbHVlIiksdGhpcy5kYXRhSW5kZXgpfSxzZXRMYXlvdXQ6ZnVuY3Rpb24odCxlKXswPD10aGlzLmRhdGFJbmRleCYmdGhpcy5ob3N0VHJlZS5kYXRhLnNldEl0ZW1MYXlvdXQodGhpcy5kYXRhSW5kZXgsdCxlKX0sZ2V0TGF5b3V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG9zdFRyZWUuZGF0YS5nZXRJdGVtTGF5b3V0KHRoaXMuZGF0YUluZGV4KX0sZ2V0TW9kZWw6ZnVuY3Rpb24odCl7aWYoISh0aGlzLmRhdGFJbmRleDwwKSl7dmFyIGUsaT10aGlzLmhvc3RUcmVlLG49aS5kYXRhLmdldEl0ZW1Nb2RlbCh0aGlzLmRhdGFJbmRleCksbz10aGlzLmdldExldmVsTW9kZWwoKTtyZXR1cm4gb3x8MCE9PXRoaXMuY2hpbGRyZW4ubGVuZ3RoJiYoMD09PXRoaXMuY2hpbGRyZW4ubGVuZ3RofHwhMSE9PXRoaXMuaXNFeHBhbmQpfHwoZT10aGlzLmdldExlYXZlc01vZGVsKCkpLG4uZ2V0TW9kZWwodCwob3x8ZXx8aS5ob3N0TW9kZWwpLmdldE1vZGVsKHQpKX19LGdldExldmVsTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5ob3N0VHJlZS5sZXZlbE1vZGVsc3x8W10pW3RoaXMuZGVwdGhdfSxnZXRMZWF2ZXNNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhvc3RUcmVlLmxlYXZlc01vZGVsfSxzZXRWaXN1YWw6ZnVuY3Rpb24odCxlKXswPD10aGlzLmRhdGFJbmRleCYmdGhpcy5ob3N0VHJlZS5kYXRhLnNldEl0ZW1WaXN1YWwodGhpcy5kYXRhSW5kZXgsdCxlKX0sZ2V0VmlzdWFsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuaG9zdFRyZWUuZGF0YS5nZXRJdGVtVmlzdWFsKHRoaXMuZGF0YUluZGV4LHQsZSl9LGdldFJhd0luZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG9zdFRyZWUuZGF0YS5nZXRSYXdJbmRleCh0aGlzLmRhdGFJbmRleCl9LGdldElkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG9zdFRyZWUuZGF0YS5nZXRJZCh0aGlzLmRhdGFJbmRleCl9LGlzQW5jZXN0b3JPZjpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5wYXJlbnROb2RlO2U7KXtpZihlPT09dGhpcylyZXR1cm4hMDtlPWUucGFyZW50Tm9kZX1yZXR1cm4hMX0saXNEZXNjZW5kYW50T2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHQhPT10aGlzJiZ0LmlzQW5jZXN0b3JPZih0aGlzKX19LHZ4LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dngsdHlwZToidHJlZSIsZWFjaE5vZGU6ZnVuY3Rpb24odCxlLGkpe3RoaXMucm9vdC5lYWNoTm9kZSh0LGUsaSl9LGdldE5vZGVCeURhdGFJbmRleDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmRhdGEuZ2V0UmF3SW5kZXgodCk7cmV0dXJuIHRoaXMuX25vZGVzW2VdfSxnZXROb2RlQnlOYW1lOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnJvb3QuZ2V0Tm9kZUJ5TmFtZSh0KX0sdXBkYXRlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuZGF0YSxlPXRoaXMuX25vZGVzLGk9MCxuPWUubGVuZ3RoO2k8bjtpKyspZVtpXS5kYXRhSW5kZXg9LTE7Zm9yKGk9MCxuPXQuY291bnQoKTtpPG47aSsrKWVbdC5nZXRSYXdJbmRleChpKV0uZGF0YUluZGV4PWl9LGNsZWFyTGF5b3V0czpmdW5jdGlvbigpe3RoaXMuZGF0YS5jbGVhckl0ZW1MYXlvdXRzKCl9fSx2eC5jcmVhdGVUcmVlPWZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBzPW5ldyB2eChlLGkubGV2ZWxzLGkubGVhdmVzKSxsPVtdLHU9MTshZnVuY3Rpb24gdChlLGkpe3ZhciBuPWUudmFsdWU7dT1NYXRoLm1heCh1LGsobik/bi5sZW5ndGg6MSk7bC5wdXNoKGUpO3ZhciBvPW5ldyBteChlLm5hbWUscyk7aT95eChvLGkpOnMucm9vdD1vO3MuX25vZGVzLnB1c2gobyk7dmFyIGE9ZS5jaGlsZHJlbjtpZihhKWZvcih2YXIgcj0wO3I8YS5sZW5ndGg7cisrKXQoYVtyXSxvKX0odCkscy5yb290LnVwZGF0ZURlcHRoQW5kSGVpZ2h0KDApO3ZhciBvPW5wKGwse2Nvb3JkRGltZW5zaW9uczpbInZhbHVlIl0sZGltZW5zaW9uc0NvdW50OnV9KSxhPW5ldyBXZihvLGUpO3JldHVybiBhLmluaXREYXRhKGwpLHV4KHttYWluRGF0YTphLHN0cnVjdDpzLHN0cnVjdEF0dHI6InRyZWUifSkscy51cGRhdGUoKSxuJiZuKGEpLHN9LGljLmV4dGVuZCh7dHlwZToic2VyaWVzLnRyZWUiLGxheW91dEluZm86bnVsbCxsYXlvdXRNb2RlOiJib3giLGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXtuYW1lOnQubmFtZSxjaGlsZHJlbjp0LmRhdGF9LGk9dC5sZWF2ZXN8fHt9LG49e307bi5sZWF2ZXM9aTt2YXIgbz12eC5jcmVhdGVUcmVlKGUsdGhpcyxuLGZ1bmN0aW9uKHQpe3Qud3JhcE1ldGhvZCgiZ2V0SXRlbU1vZGVsIixmdW5jdGlvbih0LGUpe3ZhciBpPW8uZ2V0Tm9kZUJ5RGF0YUluZGV4KGUpLG49aS5nZXRMZWF2ZXNNb2RlbCgpO3JldHVybiBpLmNoaWxkcmVuLmxlbmd0aCYmaS5pc0V4cGFuZHx8KHQucGFyZW50TW9kZWw9biksdH0pfSk7dmFyIGE9MDtvLmVhY2hOb2RlKCJwcmVvcmRlciIsZnVuY3Rpb24odCl7dC5kZXB0aD5hJiYoYT10LmRlcHRoKX0pO3ZhciByPXQuZXhwYW5kQW5kQ29sbGFwc2UmJjA8PXQuaW5pdGlhbFRyZWVEZXB0aD90LmluaXRpYWxUcmVlRGVwdGg6YTtyZXR1cm4gby5yb290LmVhY2hOb2RlKCJwcmVvcmRlciIsZnVuY3Rpb24odCl7dmFyIGU9dC5ob3N0VHJlZS5kYXRhLmdldFJhd0RhdGFJdGVtKHQuZGF0YUluZGV4KTt0LmlzRXhwYW5kPWUmJm51bGwhPWUuY29sbGFwc2VkPyFlLmNvbGxhcHNlZDp0LmRlcHRoPD1yfSksby5kYXRhfSxnZXRPcmllbnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldCgib3JpZW50Iik7cmV0dXJuImhvcml6b250YWwiPT09dD90PSJMUiI6InZlcnRpY2FsIj09PXQmJih0PSJUQiIpLHR9LHNldFpvb206ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24uem9vbT10fSxzZXRDZW50ZXI6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24uY2VudGVyPXR9LGZvcm1hdFRvb2x0aXA6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZ2V0RGF0YSgpLnRyZWUsaT1lLnJvb3QuY2hpbGRyZW5bMF0sbj1lLmdldE5vZGVCeURhdGFJbmRleCh0KSxvPW4uZ2V0VmFsdWUoKSxhPW4ubmFtZTtuJiZuIT09aTspYT1uLnBhcmVudE5vZGUubmFtZSsiLiIrYSxuPW4ucGFyZW50Tm9kZTtyZXR1cm4gZXUoYSsoaXNOYU4obyl8fG51bGw9PW8/IiI6IiA6ICIrbykpfSxkZWZhdWx0T3B0aW9uOnt6bGV2ZWw6MCx6OjIsY29vcmRpbmF0ZVN5c3RlbToidmlldyIsbGVmdDoiMTIlIix0b3A6IjEyJSIscmlnaHQ6IjEyJSIsYm90dG9tOiIxMiUiLGxheW91dDoib3J0aG9nb25hbCIscm9hbTohMSxub2RlU2NhbGVSYXRpbzouNCxjZW50ZXI6bnVsbCx6b29tOjEsb3JpZW50OiJMUiIsc3ltYm9sOiJlbXB0eUNpcmNsZSIsc3ltYm9sU2l6ZTo3LGV4cGFuZEFuZENvbGxhcHNlOiEwLGluaXRpYWxUcmVlRGVwdGg6MixsaW5lU3R5bGU6e2NvbG9yOiIjY2NjIix3aWR0aDoxLjUsY3VydmVuZXNzOi41fSxpdGVtU3R5bGU6e2NvbG9yOiJsaWdodHN0ZWVsYmx1ZSIsYm9yZGVyQ29sb3I6IiNjMjM1MzEiLGJvcmRlcldpZHRoOjEuNX0sbGFiZWw6e3Nob3c6ITAsY29sb3I6IiM1NTUifSxsZWF2ZXM6e2xhYmVsOntzaG93OiEwfX0sYW5pbWF0aW9uRWFzaW5nOiJsaW5lYXIiLGFuaW1hdGlvbkR1cmF0aW9uOjcwMCxhbmltYXRpb25EdXJhdGlvblVwZGF0ZToxZTN9fSksTWYoe3R5cGU6InRyZWUiLGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLl9vbGRUcmVlLHRoaXMuX21haW5Hcm91cD1uZXcgSWksdGhpcy5fY29udHJvbGxlcj1uZXcgTHkoZS5nZXRacigpKSx0aGlzLl9jb250cm9sbGVySG9zdD17dGFyZ2V0OnRoaXMuZ3JvdXB9LHRoaXMuZ3JvdXAuYWRkKHRoaXMuX21haW5Hcm91cCl9LHJlbmRlcjpmdW5jdGlvbihuLHQsaSxlKXt2YXIgbz1uLmdldERhdGEoKSxhPW4ubGF5b3V0SW5mbyxyPXRoaXMuX21haW5Hcm91cCxzPW4uZ2V0KCJsYXlvdXQiKTsicmFkaWFsIj09PXM/ci5hdHRyKCJwb3NpdGlvbiIsW2EueCthLndpZHRoLzIsYS55K2EuaGVpZ2h0LzJdKTpyLmF0dHIoInBvc2l0aW9uIixbYS54LGEueV0pLHRoaXMuX3VwZGF0ZVZpZXdDb29yZFN5cyhuLGEscyksdGhpcy5fdXBkYXRlQ29udHJvbGxlcihuLHQsaSk7dmFyIGw9dGhpcy5fZGF0YSx1PXtleHBhbmRBbmRDb2xsYXBzZTpuLmdldCgiZXhwYW5kQW5kQ29sbGFwc2UiKSxsYXlvdXQ6cyxvcmllbnQ6bi5nZXRPcmllbnQoKSxjdXJ2YXR1cmU6bi5nZXQoImxpbmVTdHlsZS5jdXJ2ZW5lc3MiKSxzeW1ib2xSb3RhdGU6bi5nZXQoInN5bWJvbFJvdGF0ZSIpLHN5bWJvbE9mZnNldDpuLmdldCgic3ltYm9sT2Zmc2V0IiksaG92ZXJBbmltYXRpb246bi5nZXQoImhvdmVyQW5pbWF0aW9uIiksdXNlTmFtZUxhYmVsOiEwLGZhZGVJbjohMH07by5kaWZmKGwpLmFkZChmdW5jdGlvbih0KXtEeChvLHQpJiZMeChvLHQsbnVsbCxyLG4sdSl9KS51cGRhdGUoZnVuY3Rpb24odCxlKXt2YXIgaT1sLmdldEl0ZW1HcmFwaGljRWwoZSk7RHgobyx0KT9MeChvLHQsaSxyLG4sdSk6aSYma3gobCxlLGkscixuLHUpfSkucmVtb3ZlKGZ1bmN0aW9uKHQpe3ZhciBlPWwuZ2V0SXRlbUdyYXBoaWNFbCh0KTtlJiZreChsLHQsZSxyLG4sdSl9KS5leGVjdXRlKCksdGhpcy5fbm9kZVNjYWxlUmF0aW89bi5nZXQoIm5vZGVTY2FsZVJhdGlvIiksdGhpcy5fdXBkYXRlTm9kZUFuZExpbmtTY2FsZShuKSwhMD09PXUuZXhwYW5kQW5kQ29sbGFwc2UmJm8uZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCxlKXt0Lm9mZigiY2xpY2siKS5vbigiY2xpY2siLGZ1bmN0aW9uKCl7aS5kaXNwYXRjaEFjdGlvbih7dHlwZToidHJlZUV4cGFuZEFuZENvbGxhcHNlIixzZXJpZXNJZDpuLmlkLGRhdGFJbmRleDplfSl9KX0pLHRoaXMuX2RhdGE9b30sX3VwZGF0ZVZpZXdDb29yZFN5czpmdW5jdGlvbih0KXt2YXIgaT10LmdldERhdGEoKSxuPVtdO2kuZWFjaChmdW5jdGlvbih0KXt2YXIgZT1pLmdldEl0ZW1MYXlvdXQodCk7IWV8fGlzTmFOKGUueCl8fGlzTmFOKGUueSl8fG4ucHVzaChbK2UueCwrZS55XSl9KTt2YXIgZT1bXSxvPVtdO0JhKG4sZSxvKTt2YXIgYT10aGlzLl9taW4scj10aGlzLl9tYXg7b1swXS1lWzBdPT0wJiYoZVswXT1hP2FbMF06ZVswXS0xLG9bMF09cj9yWzBdOm9bMF0rMSksb1sxXS1lWzFdPT0wJiYoZVsxXT1hP2FbMV06ZVsxXS0xLG9bMV09cj9yWzFdOm9bMV0rMSk7dmFyIHM9dC5jb29yZGluYXRlU3lzdGVtPW5ldyBReTtzLnpvb21MaW1pdD10LmdldCgic2NhbGVMaW1pdCIpLHMuc2V0Qm91bmRpbmdSZWN0KGVbMF0sZVsxXSxvWzBdLWVbMF0sb1sxXS1lWzFdKSxzLnNldENlbnRlcih0LmdldCgiY2VudGVyIikpLHMuc2V0Wm9vbSh0LmdldCgiem9vbSIpKSx0aGlzLmdyb3VwLmF0dHIoe3Bvc2l0aW9uOnMucG9zaXRpb24sc2NhbGU6cy5zY2FsZX0pLHRoaXMuX3ZpZXdDb29yZFN5cz1zLHRoaXMuX21pbj1lLHRoaXMuX21heD1vfSxfdXBkYXRlQ29udHJvbGxlcjpmdW5jdGlvbihvLHQsYSl7dmFyIGU9dGhpcy5fY29udHJvbGxlcixpPXRoaXMuX2NvbnRyb2xsZXJIb3N0LHI9dGhpcy5ncm91cDtlLnNldFBvaW50ZXJDaGVja2VyKGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1yLmdldEJvdW5kaW5nUmVjdCgpO3JldHVybiBuLmFwcGx5VHJhbnNmb3JtKHIudHJhbnNmb3JtKSxuLmNvbnRhaW4oZSxpKSYmIVd5KHQsYSxvKX0pLGUuZW5hYmxlKG8uZ2V0KCJyb2FtIikpLGkuem9vbUxpbWl0PW8uZ2V0KCJzY2FsZUxpbWl0IiksaS56b29tPW8uY29vcmRpbmF0ZVN5c3RlbS5nZXRab29tKCksZS5vZmYoInBhbiIpLm9mZigiem9vbSIpLm9uKCJwYW4iLGZ1bmN0aW9uKHQpe1Z5KGksdC5keCx0LmR5KSxhLmRpc3BhdGNoQWN0aW9uKHtzZXJpZXNJZDpvLmlkLHR5cGU6InRyZWVSb2FtIixkeDp0LmR4LGR5OnQuZHl9KX0sdGhpcykub24oInpvb20iLGZ1bmN0aW9uKHQpe0d5KGksdC5zY2FsZSx0Lm9yaWdpblgsdC5vcmlnaW5ZKSxhLmRpc3BhdGNoQWN0aW9uKHtzZXJpZXNJZDpvLmlkLHR5cGU6InRyZWVSb2FtIix6b29tOnQuc2NhbGUsb3JpZ2luWDp0Lm9yaWdpblgsb3JpZ2luWTp0Lm9yaWdpbll9KSx0aGlzLl91cGRhdGVOb2RlQW5kTGlua1NjYWxlKG8pfSx0aGlzKX0sX3VwZGF0ZU5vZGVBbmRMaW5rU2NhbGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXREYXRhKCksaT10aGlzLl9nZXROb2RlR2xvYmFsU2NhbGUodCksbj1baSxpXTtlLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQsZSl7dC5hdHRyKCJzY2FsZSIsbil9KX0sX2dldE5vZGVHbG9iYWxTY2FsZTpmdW5jdGlvbih0KXt2YXIgZT10LmNvb3JkaW5hdGVTeXN0ZW07aWYoInZpZXciIT09ZS50eXBlKXJldHVybiAxO3ZhciBpPXRoaXMuX25vZGVTY2FsZVJhdGlvLG49ZS5zY2FsZSxvPW4mJm5bMF18fDE7cmV0dXJuKChlLmdldFpvb20oKS0xKSppKzEpL299LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLmRpc3Bvc2UoKSx0aGlzLl9jb250cm9sbGVySG9zdD17fX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fbWFpbkdyb3VwLnJlbW92ZUFsbCgpLHRoaXMuX2RhdGE9bnVsbH19KSxnZih7dHlwZToidHJlZUV4cGFuZEFuZENvbGxhcHNlIixldmVudDoidHJlZUV4cGFuZEFuZENvbGxhcHNlIix1cGRhdGU6InVwZGF0ZSJ9LGZ1bmN0aW9uKG4sdCl7dC5lYWNoQ29tcG9uZW50KHttYWluVHlwZToic2VyaWVzIixzdWJUeXBlOiJ0cmVlIixxdWVyeTpufSxmdW5jdGlvbih0KXt2YXIgZT1uLmRhdGFJbmRleCxpPXQuZ2V0RGF0YSgpLnRyZWUuZ2V0Tm9kZUJ5RGF0YUluZGV4KGUpO2kuaXNFeHBhbmQ9IWkuaXNFeHBhbmR9KX0pLGdmKHt0eXBlOiJ0cmVlUm9hbSIsZXZlbnQ6InRyZWVSb2FtIix1cGRhdGU6Im5vbmUifSxmdW5jdGlvbihpLHQpe3QuZWFjaENvbXBvbmVudCh7bWFpblR5cGU6InNlcmllcyIsc3ViVHlwZToidHJlZSIscXVlcnk6aX0sZnVuY3Rpb24odCl7dmFyIGU9S3kodC5jb29yZGluYXRlU3lzdGVtLGkpO3Quc2V0Q2VudGVyJiZ0LnNldENlbnRlcihlLmNlbnRlciksdC5zZXRab29tJiZ0LnNldFpvb20oZS56b29tKX0pfSk7ZnVuY3Rpb24gT3godCxlLGkpe2lmKHQmJjA8PV8oZSx0LnR5cGUpKXt2YXIgbj1pLmdldERhdGEoKS50cmVlLnJvb3Qsbz10LnRhcmdldE5vZGU7aWYoInN0cmluZyI9PXR5cGVvZiBvJiYobz1uLmdldE5vZGVCeUlkKG8pKSxvJiZuLmNvbnRhaW5zKG8pKXJldHVybntub2RlOm99O3ZhciBhPXQudGFyZ2V0Tm9kZUlkO2lmKG51bGwhPWEmJihvPW4uZ2V0Tm9kZUJ5SWQoYSkpKXJldHVybntub2RlOm99fX1mdW5jdGlvbiBFeCh0KXtmb3IodmFyIGU9W107dDspKHQ9dC5wYXJlbnROb2RlKSYmZS5wdXNoKHQpO3JldHVybiBlLnJldmVyc2UoKX1mdW5jdGlvbiB6eCh0LGUpe3JldHVybiAwPD1fKEV4KHQpLGUpfWZ1bmN0aW9uIFJ4KHQsZSl7Zm9yKHZhciBpPVtdO3Q7KXt2YXIgbj10LmRhdGFJbmRleDtpLnB1c2goe25hbWU6dC5uYW1lLGRhdGFJbmRleDpuLHZhbHVlOmUuZ2V0UmF3VmFsdWUobil9KSx0PXQucGFyZW50Tm9kZX1yZXR1cm4gaS5yZXZlcnNlKCksaX15ZihNbSgidHJlZSIsImNpcmNsZSIpKSx2ZihmdW5jdGlvbih0LGUpe3QuZWFjaFNlcmllc0J5VHlwZSgidHJlZSIsZnVuY3Rpb24odCl7IWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdnUodC5nZXRCb3hMYXlvdXRQYXJhbXMoKSx7d2lkdGg6ZS5nZXRXaWR0aCgpLGhlaWdodDplLmdldEhlaWdodCgpfSl9KHQsZSk7dC5sYXlvdXRJbmZvPWk7dmFyIG49dC5nZXQoImxheW91dCIpLG89MCxhPTAscj1udWxsO3I9InJhZGlhbCI9PT1uPyhvPTIqTWF0aC5QSSxhPU1hdGgubWluKGkuaGVpZ2h0LGkud2lkdGgpLzIsYngoZnVuY3Rpb24odCxlKXtyZXR1cm4odC5wYXJlbnROb2RlPT09ZS5wYXJlbnROb2RlPzE6MikvdC5kZXB0aH0pKToobz1pLndpZHRoLGE9aS5oZWlnaHQsYngoKSk7dmFyIHM9dC5nZXREYXRhKCkudHJlZS5yb290LGw9cy5jaGlsZHJlblswXTtpZihsKXshZnVuY3Rpb24odCl7dC5oaWVyTm9kZT17ZGVmYXVsdEFuY2VzdG9yOm51bGwsYW5jZXN0b3I6dCxwcmVsaW06MCxtb2RpZmllcjowLGNoYW5nZTowLHNoaWZ0OjAsaTowLHRocmVhZDpudWxsfTtmb3IodmFyIGUsaSxuPVt0XTtlPW4ucG9wKCk7KWlmKGk9ZS5jaGlsZHJlbixlLmlzRXhwYW5kJiZpLmxlbmd0aClmb3IodmFyIG89aS5sZW5ndGgtMTswPD1vO28tLSl7dmFyIGE9aVtvXTthLmhpZXJOb2RlPXtkZWZhdWx0QW5jZXN0b3I6bnVsbCxhbmNlc3RvcjphLHByZWxpbTowLG1vZGlmaWVyOjAsY2hhbmdlOjAsc2hpZnQ6MCxpOm8sdGhyZWFkOm51bGx9LG4ucHVzaChhKX19KHMpLGZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG4sbz1bdF0sYT1bXTtuPW8ucG9wKCk7KWlmKGEucHVzaChuKSxuLmlzRXhwYW5kKXt2YXIgcj1uLmNoaWxkcmVuO2lmKHIubGVuZ3RoKWZvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKW8ucHVzaChyW3NdKX1mb3IoO249YS5wb3AoKTspZShuLGkpfShsLHh4LHIpLHMuaGllck5vZGUubW9kaWZpZXI9LWwuaGllck5vZGUucHJlbGltLE54KGwsX3gpO3ZhciB1PWwsaD1sLGM9bDtOeChsLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0TGF5b3V0KCkueDtlPHUuZ2V0TGF5b3V0KCkueCYmKHU9dCksZT5oLmdldExheW91dCgpLngmJihoPXQpLHQuZGVwdGg+Yy5kZXB0aCYmKGM9dCl9KTt2YXIgZD11PT09aD8xOnIodSxoKS8yLGY9ZC11LmdldExheW91dCgpLngscD0wLGc9MCxtPTAsdj0wO2lmKCJyYWRpYWwiPT09bilwPW8vKGguZ2V0TGF5b3V0KCkueCtkK2YpLGc9YS8oYy5kZXB0aC0xfHwxKSxOeChsLGZ1bmN0aW9uKHQpe209KHQuZ2V0TGF5b3V0KCkueCtmKSpwLHY9KHQuZGVwdGgtMSkqZzt2YXIgZT1TeChtLHYpO3Quc2V0TGF5b3V0KHt4OmUueCx5OmUueSxyYXdYOm0scmF3WTp2fSwhMCl9KTtlbHNle3ZhciB5PXQuZ2V0T3JpZW50KCk7IlJMIj09PXl8fCJMUiI9PT15PyhnPWEvKGguZ2V0TGF5b3V0KCkueCtkK2YpLHA9by8oYy5kZXB0aC0xfHwxKSxOeChsLGZ1bmN0aW9uKHQpe3Y9KHQuZ2V0TGF5b3V0KCkueCtmKSpnLG09IkxSIj09PXk/KHQuZGVwdGgtMSkqcDpvLSh0LmRlcHRoLTEpKnAsdC5zZXRMYXlvdXQoe3g6bSx5OnZ9LCEwKX0pKToiVEIiIT09eSYmIkJUIiE9PXl8fChwPW8vKGguZ2V0TGF5b3V0KCkueCtkK2YpLGc9YS8oYy5kZXB0aC0xfHwxKSxOeChsLGZ1bmN0aW9uKHQpe209KHQuZ2V0TGF5b3V0KCkueCtmKSpwLHY9IlRCIj09PXk/KHQuZGVwdGgtMSkqZzphLSh0LmRlcHRoLTEpKmcsdC5zZXRMYXlvdXQoe3g6bSx5OnZ9LCEwKX0pKX19fSh0LGUpfSl9KSxpYy5leHRlbmQoe3R5cGU6InNlcmllcy50cmVlbWFwIixsYXlvdXRNb2RlOiJib3giLGRlcGVuZGVuY2llczpbImdyaWQiLCJwb2xhciJdLHByZXZlbnRVc2luZ0hvdmVyTGF5ZXI6ITAsX3ZpZXdSb290Om51bGwsZGVmYXVsdE9wdGlvbjp7cHJvZ3Jlc3NpdmU6MCxsZWZ0OiJjZW50ZXIiLHRvcDoibWlkZGxlIixyaWdodDpudWxsLGJvdHRvbTpudWxsLHdpZHRoOiI4MCUiLGhlaWdodDoiODAlIixzb3J0OiEwLGNsaXBXaW5kb3c6Im9yaWdpbiIsc3F1YXJlUmF0aW86LjUqKDErTWF0aC5zcXJ0KDUpKSxsZWFmRGVwdGg6bnVsbCxkcmlsbERvd25JY29uOiLilrYiLHpvb21Ub05vZGVSYXRpbzouMTAyNCxyb2FtOiEwLG5vZGVDbGljazoiem9vbVRvTm9kZSIsYW5pbWF0aW9uOiEwLGFuaW1hdGlvbkR1cmF0aW9uVXBkYXRlOjkwMCxhbmltYXRpb25FYXNpbmc6InF1aW50aWNJbk91dCIsYnJlYWRjcnVtYjp7c2hvdzohMCxoZWlnaHQ6MjIsbGVmdDoiY2VudGVyIix0b3A6ImJvdHRvbSIsZW1wdHlJdGVtV2lkdGg6MjUsaXRlbVN0eWxlOntjb2xvcjoicmdiYSgwLDAsMCwwLjcpIixib3JkZXJDb2xvcjoicmdiYSgyNTUsMjU1LDI1NSwwLjcpIixib3JkZXJXaWR0aDoxLHNoYWRvd0NvbG9yOiJyZ2JhKDE1MCwxNTAsMTUwLDEpIixzaGFkb3dCbHVyOjMsc2hhZG93T2Zmc2V0WDowLHNoYWRvd09mZnNldFk6MCx0ZXh0U3R5bGU6e2NvbG9yOiIjZmZmIn19LGVtcGhhc2lzOnt0ZXh0U3R5bGU6e319fSxsYWJlbDp7c2hvdzohMCxkaXN0YW5jZTowLHBhZGRpbmc6NSxwb3NpdGlvbjoiaW5zaWRlIixjb2xvcjoiI2ZmZiIsZWxsaXBzaXM6ITB9LHVwcGVyTGFiZWw6e3Nob3c6ITEscG9zaXRpb246WzAsIjUwJSJdLGhlaWdodDoyMCxjb2xvcjoiI2ZmZiIsZWxsaXBzaXM6ITAsdmVydGljYWxBbGlnbjoibWlkZGxlIn0saXRlbVN0eWxlOntjb2xvcjpudWxsLGNvbG9yQWxwaGE6bnVsbCxjb2xvclNhdHVyYXRpb246bnVsbCxib3JkZXJXaWR0aDowLGdhcFdpZHRoOjAsYm9yZGVyQ29sb3I6IiNmZmYiLGJvcmRlckNvbG9yU2F0dXJhdGlvbjpudWxsfSxlbXBoYXNpczp7dXBwZXJMYWJlbDp7c2hvdzohMCxwb3NpdGlvbjpbMCwiNTAlIl0sY29sb3I6IiNmZmYiLGVsbGlwc2lzOiEwLHZlcnRpY2FsQWxpZ246Im1pZGRsZSJ9fSx2aXN1YWxEaW1lbnNpb246MCx2aXN1YWxNaW46bnVsbCx2aXN1YWxNYXg6bnVsbCxjb2xvcjpbXSxjb2xvckFscGhhOm51bGwsY29sb3JTYXR1cmF0aW9uOm51bGwsY29sb3JNYXBwaW5nQnk6ImluZGV4Iix2aXNpYmxlTWluOjEwLGNoaWxkcmVuVmlzaWJsZU1pbjpudWxsLGxldmVsczpbXX0sZ2V0SW5pdGlhbERhdGE6ZnVuY3Rpb24odCxlKXt2YXIgaT17bmFtZTp0Lm5hbWUsY2hpbGRyZW46dC5kYXRhfTshZnVuY3Rpb24gaSh0KXt2YXIgbj0wO0UodC5jaGlsZHJlbixmdW5jdGlvbih0KXtpKHQpO3ZhciBlPXQudmFsdWU7ayhlKSYmKGU9ZVswXSksbis9ZX0pO3ZhciBlPXQudmFsdWU7ayhlKSYmKGU9ZVswXSk7bnVsbCE9ZSYmIWlzTmFOKGUpfHwoZT1uKTtlPDAmJihlPTApO2sodC52YWx1ZSk/dC52YWx1ZVswXT1lOnQudmFsdWU9ZX0oaSk7dmFyIG49dC5sZXZlbHN8fFtdO249dC5sZXZlbHM9ZnVuY3Rpb24odCxlKXt2YXIgbixpPWUuZ2V0KCJjb2xvciIpO2lmKCFpKXJldHVybjtpZihFKHQ9dHx8W10sZnVuY3Rpb24odCl7dmFyIGU9bmV3IElsKHQpLGk9ZS5nZXQoImNvbG9yIik7KGUuZ2V0KCJpdGVtU3R5bGUuY29sb3IiKXx8aSYmIm5vbmUiIT09aSkmJihuPSEwKX0pLCFuKXsodFswXXx8KHRbMF09e30pKS5jb2xvcj1pLnNsaWNlKCl9cmV0dXJuIHR9KG4sZSk7dmFyIG89e307cmV0dXJuIG8ubGV2ZWxzPW4sdnguY3JlYXRlVHJlZShpLHRoaXMsbykuZGF0YX0sb3B0aW9uVXBkYXRlZDpmdW5jdGlvbigpe3RoaXMucmVzZXRWaWV3Um9vdCgpfSxmb3JtYXRUb29sdGlwOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RGF0YSgpLGk9dGhpcy5nZXRSYXdWYWx1ZSh0KSxuPWsoaSk/S2woaVswXSk6S2woaSk7cmV0dXJuIGV1KGUuZ2V0TmFtZSh0KSsiOiAiK24pfSxnZXREYXRhUGFyYW1zOmZ1bmN0aW9uKHQpe3ZhciBlPWljLnByb3RvdHlwZS5nZXREYXRhUGFyYW1zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxpPXRoaXMuZ2V0RGF0YSgpLnRyZWUuZ2V0Tm9kZUJ5RGF0YUluZGV4KHQpO3JldHVybiBlLnRyZWVQYXRoSW5mbz1SeChpLHRoaXMpLGV9LHNldExheW91dEluZm86ZnVuY3Rpb24odCl7dGhpcy5sYXlvdXRJbmZvPXRoaXMubGF5b3V0SW5mb3x8e30sTCh0aGlzLmxheW91dEluZm8sdCl9LG1hcElkVG9JbmRleDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pZEluZGV4TWFwO2V8fChlPXRoaXMuX2lkSW5kZXhNYXA9USgpLHRoaXMuX2lkSW5kZXhNYXBDb3VudD0wKTt2YXIgaT1lLmdldCh0KTtyZXR1cm4gbnVsbD09aSYmZS5zZXQodCxpPXRoaXMuX2lkSW5kZXhNYXBDb3VudCsrKSxpfSxnZXRWaWV3Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aWV3Um9vdH0scmVzZXRWaWV3Um9vdDpmdW5jdGlvbih0KXt0P3RoaXMuX3ZpZXdSb290PXQ6dD10aGlzLl92aWV3Um9vdDt2YXIgZT10aGlzLmdldFJhd0RhdGEoKS50cmVlLnJvb3Q7dCYmKHQ9PT1lfHxlLmNvbnRhaW5zKHQpKXx8KHRoaXMuX3ZpZXdSb290PWUpfX0pO3ZhciBCeD01O2Z1bmN0aW9uIFZ4KHQpe3RoaXMuZ3JvdXA9bmV3IElpLHQuYWRkKHRoaXMuZ3JvdXApfWZ1bmN0aW9uIEd4KHQsZSxpLG4sbyxhKXt2YXIgcj1bW28/dDp0LUJ4LGVdLFt0K2ksZV0sW3QraSxlK25dLFtvP3Q6dC1CeCxlK25dXTtyZXR1cm4gYXx8ci5zcGxpY2UoMiwwLFt0K2krQngsZStuLzJdKSxvfHxyLnB1c2goW3QsZStuLzJdKSxyfVZ4LnByb3RvdHlwZT17Y29uc3RydWN0b3I6VngscmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXQuZ2V0TW9kZWwoImJyZWFkY3J1bWIiKSxhPXRoaXMuZ3JvdXA7aWYoYS5yZW1vdmVBbGwoKSxvLmdldCgic2hvdyIpJiZpKXt2YXIgcj1vLmdldE1vZGVsKCJpdGVtU3R5bGUiKSxzPXIuZ2V0TW9kZWwoInRleHRTdHlsZSIpLGw9e3Bvczp7bGVmdDpvLmdldCgibGVmdCIpLHJpZ2h0Om8uZ2V0KCJyaWdodCIpLHRvcDpvLmdldCgidG9wIiksYm90dG9tOm8uZ2V0KCJib3R0b20iKX0sYm94Ont3aWR0aDplLmdldFdpZHRoKCksaGVpZ2h0OmUuZ2V0SGVpZ2h0KCl9LGVtcHR5SXRlbVdpZHRoOm8uZ2V0KCJlbXB0eUl0ZW1XaWR0aCIpLHRvdGFsV2lkdGg6MCxyZW5kZXJMaXN0OltdfTt0aGlzLl9wcmVwYXJlKGksbCxzKSx0aGlzLl9yZW5kZXJDb250ZW50KHQsbCxyLHMsbikseXUoYSxsLnBvcyxsLmJveCl9fSxfcHJlcGFyZTpmdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPXQ7bjtuPW4ucGFyZW50Tm9kZSl7dmFyIG89bi5nZXRNb2RlbCgpLmdldCgibmFtZSIpLGE9aS5nZXRUZXh0UmVjdChvKSxyPU1hdGgubWF4KGEud2lkdGgrMTYsZS5lbXB0eUl0ZW1XaWR0aCk7ZS50b3RhbFdpZHRoKz1yKzgsZS5yZW5kZXJMaXN0LnB1c2goe25vZGU6bix0ZXh0Om8sd2lkdGg6cn0pfX0sX3JlbmRlckNvbnRlbnQ6ZnVuY3Rpb24odCxlLGksbixvKXtmb3IodmFyIGEscixzPTAsbD1lLmVtcHR5SXRlbVdpZHRoLHU9dC5nZXQoImJyZWFkY3J1bWIuaGVpZ2h0IiksaD1mdW5jdGlvbih0LGUsaSl7dmFyIG49ZS53aWR0aCxvPWUuaGVpZ2h0LGE9UGwodC54LG4pLHI9UGwodC55LG8pLHM9UGwodC54MixuKSxsPVBsKHQueTIsbyk7cmV0dXJuKGlzTmFOKGEpfHxpc05hTihwYXJzZUZsb2F0KHQueCkpKSYmKGE9MCksKGlzTmFOKHMpfHxpc05hTihwYXJzZUZsb2F0KHQueDIpKSkmJihzPW4pLChpc05hTihyKXx8aXNOYU4ocGFyc2VGbG9hdCh0LnkpKSkmJihyPTApLChpc05hTihsKXx8aXNOYU4ocGFyc2VGbG9hdCh0LnkyKSkpJiYobD1vKSxpPUpsKGl8fDApLHt3aWR0aDpNYXRoLm1heChzLWEtaVsxXS1pWzNdLDApLGhlaWdodDpNYXRoLm1heChsLXItaVswXS1pWzJdLDApfX0oZS5wb3MsZS5ib3gpLGM9ZS50b3RhbFdpZHRoLGQ9ZS5yZW5kZXJMaXN0LGY9ZC5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIHA9ZFtmXSxnPXAubm9kZSxtPXAud2lkdGgsdj1wLnRleHQ7Yz5oLndpZHRoJiYoYy09bS1sLG09bCx2PW51bGwpO3ZhciB5PW5ldyBxcih7c2hhcGU6e3BvaW50czpHeChzLDAsbSx1LGY9PT1kLmxlbmd0aC0xLDA9PT1mKX0sc3R5bGU6QyhpLmdldEl0ZW1TdHlsZSgpLHtsaW5lSm9pbjoiYmV2ZWwiLHRleHQ6dix0ZXh0RmlsbDpuLmdldFRleHRDb2xvcigpLHRleHRGb250Om4uZ2V0Rm9udCgpfSksejoxMCxvbmNsaWNrOlQobyxnKX0pO3RoaXMuZ3JvdXAuYWRkKHkpLGE9dCxyPWcseS5ldmVudERhdGE9e2NvbXBvbmVudFR5cGU6InNlcmllcyIsY29tcG9uZW50U3ViVHlwZToidHJlZW1hcCIsY29tcG9uZW50SW5kZXg6YS5jb21wb25lbnRJbmRleCxzZXJpZXNJbmRleDphLmNvbXBvbmVudEluZGV4LHNlcmllc05hbWU6YS5uYW1lLHNlcmllc1R5cGU6InRyZWVtYXAiLHNlbGZUeXBlOiJicmVhZGNydW1iIixub2RlRGF0YTp7ZGF0YUluZGV4OnImJnIuZGF0YUluZGV4LG5hbWU6ciYmci5uYW1lfSx0cmVlUGF0aEluZm86ciYmUngocixhKX0scys9bSs4fX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5ncm91cC5yZW1vdmVBbGwoKX19O2Z1bmN0aW9uIEZ4KHQpe3ZhciBlPSR4KHQpO3JldHVybiBlLnN0cm9rZT1lLmZpbGw9ZS5saW5lV2lkdGg9bnVsbCxlfXZhciBXeD1BLEh4PUlpLFp4PWlzLFV4PUUsWHg9WyJsYWJlbCJdLFl4PVsiZW1waGFzaXMiLCJsYWJlbCJdLGp4PVsidXBwZXJMYWJlbCJdLHF4PVsiZW1waGFzaXMiLCJ1cHBlckxhYmVsIl0sS3g9MTAsJHg9cmEoW1siZmlsbCIsImNvbG9yIl0sWyJzdHJva2UiLCJzdHJva2VDb2xvciJdLFsibGluZVdpZHRoIiwic3Ryb2tlV2lkdGgiXSxbInNoYWRvd0JsdXIiXSxbInNoYWRvd09mZnNldFgiXSxbInNoYWRvd09mZnNldFkiXSxbInNoYWRvd0NvbG9yIl1dKTtmdW5jdGlvbiBKeChkLHIscyxsLHUsaSxmLHQsZSxuKXtpZihmKXt2YXIgcD1mLmdldExheW91dCgpO2lmKHAmJnAuaXNJblZpZXcpe3ZhciBoPXAud2lkdGgsYz1wLmhlaWdodCxnPXAuYm9yZGVyV2lkdGgsbT1wLmludmlzaWJsZSx2PWYuZ2V0UmF3SW5kZXgoKSx5PXQmJnQuZ2V0UmF3SW5kZXgoKSxvPWYudmlld0NoaWxkcmVuLHg9cC51cHBlckhlaWdodCxhPW8mJm8ubGVuZ3RoLF89Zi5nZXRNb2RlbCgiaXRlbVN0eWxlIiksdz1mLmdldE1vZGVsKCJlbXBoYXNpcy5pdGVtU3R5bGUiKSxiPUEoIm5vZGVHcm91cCIsSHgpO2lmKGIpe2lmKGUuYWRkKGIpLGIuYXR0cigicG9zaXRpb24iLFtwLnh8fDAscC55fHwwXSksYi5fX3RtTm9kZVdpZHRoPWgsYi5fX3RtTm9kZUhlaWdodD1jLHAuaXNBYm92ZVZpZXdSb290KXJldHVybiBiO3ZhciBTPUEoImJhY2tncm91bmQiLFp4LG4sMSk7aWYoUyYmZnVuY3Rpb24odCxuLG8pe24uZGF0YUluZGV4PWYuZGF0YUluZGV4LG4uc2VyaWVzSW5kZXg9ZC5zZXJpZXNJbmRleCxuLnNldFNoYXBlKHt4OjAseTowLHdpZHRoOmgsaGVpZ2h0OmN9KTt2YXIgYT1mLmdldFZpc3VhbCgiYm9yZGVyQ29sb3IiLCEwKSxyPXcuZ2V0KCJib3JkZXJDb2xvciIpO0kobixmdW5jdGlvbigpe3ZhciB0PUZ4KF8pO3QuZmlsbD1hO3ZhciBlPSR4KHcpO2lmKGUuZmlsbD1yLG8pe3ZhciBpPWgtMipnO1QodCxlLGEsaSx4LHt4OmcseTowLHdpZHRoOmksaGVpZ2h0Onh9KX1lbHNlIHQudGV4dD1lLnRleHQ9bnVsbDtuLnNldFN0eWxlKHQpLFlzKG4sZSl9KSx0LmFkZChuKX0oYixTLGEmJnAudXBwZXJIZWlnaHQpLCFhKXt2YXIgTT1BKCJjb250ZW50IixaeCxuLDIpO00mJmZ1bmN0aW9uKHQsaSl7aS5kYXRhSW5kZXg9Zi5kYXRhSW5kZXgsaS5zZXJpZXNJbmRleD1kLnNlcmllc0luZGV4O3ZhciBuPU1hdGgubWF4KGgtMipnLDApLG89TWF0aC5tYXgoYy0yKmcsMCk7aS5jdWxsaW5nPSEwLGkuc2V0U2hhcGUoe3g6Zyx5Omcsd2lkdGg6bixoZWlnaHQ6b30pO3ZhciBhPWYuZ2V0VmlzdWFsKCJjb2xvciIsITApO0koaSxmdW5jdGlvbigpe3ZhciB0PUZ4KF8pO3QuZmlsbD1hO3ZhciBlPSR4KHcpO1QodCxlLGEsbixvKSxpLnNldFN0eWxlKHQpLFlzKGksZSl9KSx0LmFkZChpKX0oYixNKX1yZXR1cm4gYn19fWZ1bmN0aW9uIEkodCxlKXttP3QuaW52aXNpYmxlfHxpLnB1c2godCk6KGUoKSx0Ll9fdG1XaWxsVmlzaWJsZXx8KHQuaW52aXNpYmxlPSExKSl9ZnVuY3Rpb24gVCh0LGUsaSxuLG8sYSl7dmFyIHI9Zi5nZXRNb2RlbCgpLHM9VyhkLmdldEZvcm1hdHRlZExhYmVsKGYuZGF0YUluZGV4LCJub3JtYWwiLG51bGwsbnVsbCxhPyJ1cHBlckxhYmVsIjoibGFiZWwiKSxyLmdldCgibmFtZSIpKTtpZighYSYmcC5pc0xlYWZSb290KXt2YXIgbD1kLmdldCgiZHJpbGxEb3duSWNvbiIsITApO3M9bD9sKyIgIitzOnN9dmFyIHU9ci5nZXRNb2RlbChhP2p4Olh4KSxoPXIuZ2V0TW9kZWwoYT9xeDpZeCksYz11LmdldFNoYWxsb3coInNob3ciKTskcyh0LGUsdSxoLHtkZWZhdWx0VGV4dDpjP3M6bnVsbCxhdXRvQ29sb3I6aSxpc1JlY3RUZXh0OiEwfSksYSYmKHQudGV4dFJlY3Q9RChhKSksdC50cnVuY2F0ZT1jJiZ1LmdldCgiZWxsaXBzaXMiKT97b3V0ZXJXaWR0aDpuLG91dGVySGVpZ2h0Om8sbWluQ2hhcjoyfTpudWxsfWZ1bmN0aW9uIEEodCxlLGksbil7dmFyIG89bnVsbCE9eSYmc1t0XVt5XSxhPXVbdF07cmV0dXJuIG8/KHNbdF1beV09bnVsbCxmdW5jdGlvbih0LGUsaSl7KHRbdl09e30pLm9sZD0ibm9kZUdyb3VwIj09PWk/ZS5wb3NpdGlvbi5zbGljZSgpOkwoe30sZS5zaGFwZSl9KGEsbyx0KSk6bXx8KChvPW5ldyBlKHt6OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dCpLeCtlO3JldHVybihpLTEpL2l9KGksbil9KSkuX190bURlcHRoPWksZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRbdl09e30sbz1mLnBhcmVudE5vZGU7aWYobyYmKCFsfHwiZHJpbGxEb3duIj09PWwuZGlyZWN0aW9uKSl7dmFyIGE9MCxyPTAscz11LmJhY2tncm91bmRbby5nZXRSYXdJbmRleCgpXTshbCYmcyYmcy5vbGQmJihhPXMub2xkLndpZHRoLHI9cy5vbGQuaGVpZ2h0KSxuLm9sZD0ibm9kZUdyb3VwIj09PWk/WzAscl06e3g6YSx5OnIsd2lkdGg6MCxoZWlnaHQ6MH19bi5mYWRlaW49Im5vZGVHcm91cCIhPT1pfShhLDAsby5fX3RtU3RvcmFnZU5hbWU9dCkpLHJbdF1bdl09b319TWYoe3R5cGU6InRyZWVtYXAiLGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLl9jb250YWluZXJHcm91cCx0aGlzLl9zdG9yYWdlPXtub2RlR3JvdXA6W10sYmFja2dyb3VuZDpbXSxjb250ZW50OltdfSx0aGlzLl9vbGRUcmVlLHRoaXMuX2JyZWFkY3J1bWIsdGhpcy5fY29udHJvbGxlcix0aGlzLl9zdGF0ZT0icmVhZHkifSxyZW5kZXI6ZnVuY3Rpb24odCxlLGksbil7aWYoIShfKGUuZmluZENvbXBvbmVudHMoe21haW5UeXBlOiJzZXJpZXMiLHN1YlR5cGU6InRyZWVtYXAiLHF1ZXJ5Om59KSx0KTwwKSl7dGhpcy5zZXJpZXNNb2RlbD10LHRoaXMuYXBpPWksdGhpcy5lY01vZGVsPWU7dmFyIG89T3gobixbInRyZWVtYXBab29tVG9Ob2RlIiwidHJlZW1hcFJvb3RUb05vZGUiXSx0KSxhPW4mJm4udHlwZSxyPXQubGF5b3V0SW5mbyxzPSF0aGlzLl9vbGRUcmVlLGw9dGhpcy5fc3RvcmFnZSx1PSJ0cmVlbWFwUm9vdFRvTm9kZSI9PT1hJiZvJiZsP3tyb290Tm9kZUdyb3VwOmwubm9kZUdyb3VwW28ubm9kZS5nZXRSYXdJbmRleCgpXSxkaXJlY3Rpb246bi5kaXJlY3Rpb259Om51bGwsaD10aGlzLl9naXZlQ29udGFpbmVyR3JvdXAociksYz10aGlzLl9kb1JlbmRlcihoLHQsdSk7c3x8YSYmInRyZWVtYXBab29tVG9Ob2RlIiE9PWEmJiJ0cmVlbWFwUm9vdFRvTm9kZSIhPT1hP2MucmVuZGVyRmluYWxseSgpOnRoaXMuX2RvQW5pbWF0aW9uKGgsYyx0LHUpLHRoaXMuX3Jlc2V0Q29udHJvbGxlcihpKSx0aGlzLl9yZW5kZXJCcmVhZGNydW1iKHQsaSxvKX19LF9naXZlQ29udGFpbmVyR3JvdXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY29udGFpbmVyR3JvdXA7cmV0dXJuIGV8fChlPXRoaXMuX2NvbnRhaW5lckdyb3VwPW5ldyBIeCx0aGlzLl9pbml0RXZlbnRzKGUpLHRoaXMuZ3JvdXAuYWRkKGUpKSxlLmF0dHIoInBvc2l0aW9uIixbdC54LHQueV0pLGV9LF9kb1JlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49ZS5nZXREYXRhKCkudHJlZSxvPXRoaXMuX29sZFRyZWUsYT17bm9kZUdyb3VwOltdLGJhY2tncm91bmQ6W10sY29udGVudDpbXX0scj17bm9kZUdyb3VwOltdLGJhY2tncm91bmQ6W10sY29udGVudDpbXX0scz10aGlzLl9zdG9yYWdlLGw9W10sYz1UKEp4LGUscixzLGksYSxsKTshZnVuY3Rpb24gYShyLHMsbCx1LGgpe3U/VXgocz1yLGZ1bmN0aW9uKHQsZSl7dC5pc1JlbW92ZWQoKXx8aShlLGUpfSk6bmV3IFRmKHMscix0LHQpLmFkZChpKS51cGRhdGUoaSkucmVtb3ZlKFQoaSxudWxsKSkuZXhlY3V0ZSgpO2Z1bmN0aW9uIHQodCl7cmV0dXJuIHQuZ2V0SWQoKX1mdW5jdGlvbiBpKHQsZSl7dmFyIGk9bnVsbCE9dD9yW3RdOm51bGwsbj1udWxsIT1lP3NbZV06bnVsbCxvPWMoaSxuLGwsaCk7byYmYShpJiZpLnZpZXdDaGlsZHJlbnx8W10sbiYmbi52aWV3Q2hpbGRyZW58fFtdLG8sdSxoKzEpfX0obi5yb290P1tuLnJvb3RdOltdLG8mJm8ucm9vdD9bby5yb290XTpbXSx0LG49PT1vfHwhbywwKTt2YXIgdSxoLGQ9KGg9e25vZGVHcm91cDpbXSxiYWNrZ3JvdW5kOltdLGNvbnRlbnQ6W119LCh1PXMpJiZVeCh1LGZ1bmN0aW9uKHQsZSl7dmFyIGk9aFtlXTtVeCh0LGZ1bmN0aW9uKHQpe3QmJihpLnB1c2godCksdC5fX3RtV2lsbERlbGV0ZT0xKX0pfSksaCk7cmV0dXJuIHRoaXMuX29sZFRyZWU9bix0aGlzLl9zdG9yYWdlPXIse2xhc3RzRm9yQW5pbWF0aW9uOmEsd2lsbERlbGV0ZUVsczpkLHJlbmRlckZpbmFsbHk6ZnVuY3Rpb24oKXtVeChkLGZ1bmN0aW9uKHQpe1V4KHQsZnVuY3Rpb24odCl7dC5wYXJlbnQmJnQucGFyZW50LnJlbW92ZSh0KX0pfSksVXgobCxmdW5jdGlvbih0KXt0LmludmlzaWJsZT0hMCx0LmRpcnR5KCl9KX19fSxfZG9BbmltYXRpb246ZnVuY3Rpb24odCxhLGUscyl7aWYoZS5nZXQoImFuaW1hdGlvbiIpKXt2YXIgbD1lLmdldCgiYW5pbWF0aW9uRHVyYXRpb25VcGRhdGUiKSx1PWUuZ2V0KCJhbmltYXRpb25FYXNpbmciKSxoPWZ1bmN0aW9uKCl7dmFyIGEscj1bXSxzPXt9O3JldHVybnthZGQ6ZnVuY3Rpb24odCxlLGksbixvKXtyZXR1cm4geihuKSYmKG89bixuPTApLCFzW3QuaWRdJiYoc1t0LmlkXT0xLHIucHVzaCh7ZWw6dCx0YXJnZXQ6ZSx0aW1lOmksZGVsYXk6bixlYXNpbmc6b30pLCEwKX0sZG9uZTpmdW5jdGlvbih0KXtyZXR1cm4gYT10LHRoaXN9LHN0YXJ0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXIubGVuZ3RoLGU9MCxpPXIubGVuZ3RoO2U8aTtlKyspe3ZhciBuPXJbZV07bi5lbC5hbmltYXRlVG8obi50YXJnZXQsbi50aW1lLG4uZGVsYXksbi5lYXNpbmcsbyl9cmV0dXJuIHRoaXM7ZnVuY3Rpb24gbygpey0tdHx8KHIubGVuZ3RoPTAscz17fSxhJiZhKCkpfX19fSgpO1V4KGEud2lsbERlbGV0ZUVscyxmdW5jdGlvbih0LHIpe1V4KHQsZnVuY3Rpb24odCxlKXtpZighdC5pbnZpc2libGUpe3ZhciBpLG49dC5wYXJlbnQ7aWYocyYmImRyaWxsRG93biI9PT1zLmRpcmVjdGlvbilpPW49PT1zLnJvb3ROb2RlR3JvdXA/e3NoYXBlOnt4OjAseTowLHdpZHRoOm4uX190bU5vZGVXaWR0aCxoZWlnaHQ6bi5fX3RtTm9kZUhlaWdodH0sc3R5bGU6e29wYWNpdHk6MH19OntzdHlsZTp7b3BhY2l0eTowfX07ZWxzZXt2YXIgbz0wLGE9MDtuLl9fdG1XaWxsRGVsZXRlfHwobz1uLl9fdG1Ob2RlV2lkdGgvMixhPW4uX190bU5vZGVIZWlnaHQvMiksaT0ibm9kZUdyb3VwIj09PXI/e3Bvc2l0aW9uOltvLGFdLHN0eWxlOntvcGFjaXR5OjB9fTp7c2hhcGU6e3g6byx5OmEsd2lkdGg6MCxoZWlnaHQ6MH0sc3R5bGU6e29wYWNpdHk6MH19fWkmJmguYWRkKHQsaSxsLHUpfX0pfSksVXgodGhpcy5fc3RvcmFnZSxmdW5jdGlvbih0LG8pe1V4KHQsZnVuY3Rpb24odCxlKXt2YXIgaT1hLmxhc3RzRm9yQW5pbWF0aW9uW29dW2VdLG49e307aSYmKCJub2RlR3JvdXAiPT09bz9pLm9sZCYmKG4ucG9zaXRpb249dC5wb3NpdGlvbi5zbGljZSgpLHQuYXR0cigicG9zaXRpb24iLGkub2xkKSk6KGkub2xkJiYobi5zaGFwZT1MKHt9LHQuc2hhcGUpLHQuc2V0U2hhcGUoaS5vbGQpKSxpLmZhZGVpbj8odC5zZXRTdHlsZSgib3BhY2l0eSIsMCksbi5zdHlsZT17b3BhY2l0eToxfSk6MSE9PXQuc3R5bGUub3BhY2l0eSYmKG4uc3R5bGU9e29wYWNpdHk6MX0pKSxoLmFkZCh0LG4sbCx1KSl9KX0sdGhpcyksdGhpcy5fc3RhdGU9ImFuaW1hdGluZyIsaC5kb25lKFd4KGZ1bmN0aW9uKCl7dGhpcy5fc3RhdGU9InJlYWR5IixhLnJlbmRlckZpbmFsbHkoKX0sdGhpcykpLnN0YXJ0KCl9fSxfcmVzZXRDb250cm9sbGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2NvbnRyb2xsZXI7ZXx8KChlPXRoaXMuX2NvbnRyb2xsZXI9bmV3IEx5KHQuZ2V0WnIoKSkpLmVuYWJsZSh0aGlzLnNlcmllc01vZGVsLmdldCgicm9hbSIpKSxlLm9uKCJwYW4iLFd4KHRoaXMuX29uUGFuLHRoaXMpKSxlLm9uKCJ6b29tIixXeCh0aGlzLl9vblpvb20sdGhpcykpKTt2YXIgbj1uZXcgTWkoMCwwLHQuZ2V0V2lkdGgoKSx0LmdldEhlaWdodCgpKTtlLnNldFBvaW50ZXJDaGVja2VyKGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbi5jb250YWluKGUsaSl9KX0sX2NsZWFyQ29udHJvbGxlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NvbnRyb2xsZXI7dCYmKHQuZGlzcG9zZSgpLHQ9bnVsbCl9LF9vblBhbjpmdW5jdGlvbih0KXtpZigiYW5pbWF0aW5nIiE9PXRoaXMuX3N0YXRlJiYoMzxNYXRoLmFicyh0LmR4KXx8MzxNYXRoLmFicyh0LmR5KSkpe3ZhciBlPXRoaXMuc2VyaWVzTW9kZWwuZ2V0RGF0YSgpLnRyZWUucm9vdDtpZighZSlyZXR1cm47dmFyIGk9ZS5nZXRMYXlvdXQoKTtpZighaSlyZXR1cm47dGhpcy5hcGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6InRyZWVtYXBNb3ZlIixmcm9tOnRoaXMudWlkLHNlcmllc0lkOnRoaXMuc2VyaWVzTW9kZWwuaWQscm9vdFJlY3Q6e3g6aS54K3QuZHgseTppLnkrdC5keSx3aWR0aDppLndpZHRoLGhlaWdodDppLmhlaWdodH19KX19LF9vblpvb206ZnVuY3Rpb24odCl7dmFyIGU9dC5vcmlnaW5YLGk9dC5vcmlnaW5ZO2lmKCJhbmltYXRpbmciIT09dGhpcy5fc3RhdGUpe3ZhciBuPXRoaXMuc2VyaWVzTW9kZWwuZ2V0RGF0YSgpLnRyZWUucm9vdDtpZighbilyZXR1cm47dmFyIG89bi5nZXRMYXlvdXQoKTtpZighbylyZXR1cm47dmFyIGE9bmV3IE1pKG8ueCxvLnksby53aWR0aCxvLmhlaWdodCkscj10aGlzLnNlcmllc01vZGVsLmxheW91dEluZm87ZS09ci54LGktPXIueTt2YXIgcz1lZSgpO2FlKHMscyxbLWUsLWldKSxzZShzLHMsW3Quc2NhbGUsdC5zY2FsZV0pLGFlKHMscyxbZSxpXSksYS5hcHBseVRyYW5zZm9ybShzKSx0aGlzLmFwaS5kaXNwYXRjaEFjdGlvbih7dHlwZToidHJlZW1hcFJlbmRlciIsZnJvbTp0aGlzLnVpZCxzZXJpZXNJZDp0aGlzLnNlcmllc01vZGVsLmlkLHJvb3RSZWN0Ont4OmEueCx5OmEueSx3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH19KX19LF9pbml0RXZlbnRzOmZ1bmN0aW9uKHQpe3Qub24oImNsaWNrIixmdW5jdGlvbih0KXtpZigicmVhZHkiPT09dGhpcy5fc3RhdGUpe3ZhciBlPXRoaXMuc2VyaWVzTW9kZWwuZ2V0KCJub2RlQ2xpY2siLCEwKTtpZihlKXt2YXIgaT10aGlzLmZpbmRUYXJnZXQodC5vZmZzZXRYLHQub2Zmc2V0WSk7aWYoaSl7dmFyIG49aS5ub2RlO2lmKG4uZ2V0TGF5b3V0KCkuaXNMZWFmUm9vdCl0aGlzLl9yb290VG9Ob2RlKGkpO2Vsc2UgaWYoInpvb21Ub05vZGUiPT09ZSl0aGlzLl96b29tVG9Ob2RlKGkpO2Vsc2UgaWYoImxpbmsiPT09ZSl7dmFyIG89bi5ob3N0VHJlZS5kYXRhLmdldEl0ZW1Nb2RlbChuLmRhdGFJbmRleCksYT1vLmdldCgibGluayIsITApLHI9by5nZXQoInRhcmdldCIsITApfHwiYmxhbmsiO2EmJndpbmRvdy5vcGVuKGEscil9fX19fSx0aGlzKX0sX3JlbmRlckJyZWFkY3J1bWI6ZnVuY3Rpb24oZSx0LGkpe2k9aXx8KChpPW51bGwhPWUuZ2V0KCJsZWFmRGVwdGgiLCEwKT97bm9kZTplLmdldFZpZXdSb290KCl9OnRoaXMuZmluZFRhcmdldCh0LmdldFdpZHRoKCkvMix0LmdldEhlaWdodCgpLzIpKXx8e25vZGU6ZS5nZXREYXRhKCkudHJlZS5yb290fSksKHRoaXMuX2JyZWFkY3J1bWJ8fCh0aGlzLl9icmVhZGNydW1iPW5ldyBWeCh0aGlzLmdyb3VwKSkpLnJlbmRlcihlLHQsaS5ub2RlLFd4KGZ1bmN0aW9uKHQpeyJhbmltYXRpbmciIT09dGhpcy5fc3RhdGUmJih6eChlLmdldFZpZXdSb290KCksdCk/dGhpcy5fcm9vdFRvTm9kZSh7bm9kZTp0fSk6dGhpcy5fem9vbVRvTm9kZSh7bm9kZTp0fSkpfSx0aGlzKSl9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuX2NsZWFyQ29udHJvbGxlcigpLHRoaXMuX2NvbnRhaW5lckdyb3VwJiZ0aGlzLl9jb250YWluZXJHcm91cC5yZW1vdmVBbGwoKSx0aGlzLl9zdG9yYWdlPXtub2RlR3JvdXA6W10sYmFja2dyb3VuZDpbXSxjb250ZW50OltdfSx0aGlzLl9zdGF0ZT0icmVhZHkiLHRoaXMuX2JyZWFkY3J1bWImJnRoaXMuX2JyZWFkY3J1bWIucmVtb3ZlKCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckNvbnRyb2xsZXIoKX0sX3pvb21Ub05vZGU6ZnVuY3Rpb24odCl7dGhpcy5hcGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6InRyZWVtYXBab29tVG9Ob2RlIixmcm9tOnRoaXMudWlkLHNlcmllc0lkOnRoaXMuc2VyaWVzTW9kZWwuaWQsdGFyZ2V0Tm9kZTp0Lm5vZGV9KX0sX3Jvb3RUb05vZGU6ZnVuY3Rpb24odCl7dGhpcy5hcGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6InRyZWVtYXBSb290VG9Ob2RlIixmcm9tOnRoaXMudWlkLHNlcmllc0lkOnRoaXMuc2VyaWVzTW9kZWwuaWQsdGFyZ2V0Tm9kZTp0Lm5vZGV9KX0sZmluZFRhcmdldDpmdW5jdGlvbihvLGEpe3ZhciByO3JldHVybiB0aGlzLnNlcmllc01vZGVsLmdldFZpZXdSb290KCkuZWFjaE5vZGUoe2F0dHI6InZpZXdDaGlsZHJlbiIsb3JkZXI6InByZW9yZGVyIn0sZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc3RvcmFnZS5iYWNrZ3JvdW5kW3QuZ2V0UmF3SW5kZXgoKV07aWYoZSl7dmFyIGk9ZS50cmFuc2Zvcm1Db29yZFRvTG9jYWwobyxhKSxuPWUuc2hhcGU7aWYoIShuLng8PWlbMF0mJmlbMF08PW4ueCtuLndpZHRoJiZuLnk8PWlbMV0mJmlbMV08PW4ueStuLmhlaWdodCkpcmV0dXJuITE7cj17bm9kZTp0LG9mZnNldFg6aVswXSxvZmZzZXRZOmlbMV19fX0sdGhpcykscn19KTtmb3IodmFyIFF4PWZ1bmN0aW9uKCl7fSx0Xz1bInRyZWVtYXBab29tVG9Ob2RlIiwidHJlZW1hcFJlbmRlciIsInRyZWVtYXBNb3ZlIl0sZV89MDtlXzx0Xy5sZW5ndGg7ZV8rKylnZih7dHlwZTp0X1tlX10sdXBkYXRlOiJ1cGRhdGVWaWV3In0sUXgpO2dmKHt0eXBlOiJ0cmVlbWFwUm9vdFRvTm9kZSIsdXBkYXRlOiJ1cGRhdGVWaWV3In0sZnVuY3Rpb24obyx0KXt0LmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJzZXJpZXMiLHN1YlR5cGU6InRyZWVtYXAiLHF1ZXJ5Om99LGZ1bmN0aW9uKHQsZSl7dmFyIGk9T3gobyxbInRyZWVtYXBab29tVG9Ob2RlIiwidHJlZW1hcFJvb3RUb05vZGUiXSx0KTtpZihpKXt2YXIgbj10LmdldFZpZXdSb290KCk7biYmKG8uZGlyZWN0aW9uPXp4KG4saS5ub2RlKT8icm9sbFVwIjoiZHJpbGxEb3duIiksdC5yZXNldFZpZXdSb290KGkubm9kZSl9fSl9KTt2YXIgaV89RSxuXz1SLG9fPS0xLGFfPWZ1bmN0aW9uKHQpe3ZhciBlPXQubWFwcGluZ01ldGhvZCxpPXQudHlwZSxuPXRoaXMub3B0aW9uPUQodCk7dGhpcy50eXBlPWksdGhpcy5tYXBwaW5nTWV0aG9kPWUsdGhpcy5fbm9ybWFsaXplRGF0YT1tX1tlXTt2YXIgbz1yX1tpXTt0aGlzLmFwcGx5VmlzdWFsPW8uYXBwbHlWaXN1YWwsdGhpcy5nZXRDb2xvck1hcHBlcj1vLmdldENvbG9yTWFwcGVyLHRoaXMuX2RvTWFwPW8uX2RvTWFwW2VdLCJwaWVjZXdpc2UiPT09ZT8oc18obiksZnVuY3Rpb24oaSl7dmFyIHQ9aS5waWVjZUxpc3Q7aS5oYXNTcGVjaWFsVmlzdWFsPSExLEUodCxmdW5jdGlvbih0LGUpe3Qub3JpZ2luSW5kZXg9ZSxudWxsIT10LnZpc3VhbCYmKGkuaGFzU3BlY2lhbFZpc3VhbD0hMCl9KX0obikpOiJjYXRlZ29yeSI9PT1lP24uY2F0ZWdvcmllcz9mdW5jdGlvbih0KXt2YXIgZT10LmNhdGVnb3JpZXMsaT10LnZpc3VhbCxuPXQuY2F0ZWdvcnlNYXA9e307aWYoaV8oZSxmdW5jdGlvbih0LGUpe25bdF09ZX0pLCFrKGkpKXt2YXIgbz1bXTtSKGkpP2lfKGksZnVuY3Rpb24odCxlKXt2YXIgaT1uW2VdO29bbnVsbCE9aT9pOm9fXT10fSk6b1tvX109aSxpPWdfKHQsbyl9Zm9yKHZhciBhPWUubGVuZ3RoLTE7MDw9YTthLS0pbnVsbD09aVthXSYmKGRlbGV0ZSBuW2VbYV1dLGUucG9wKCkpfShuKTpzXyhuLCEwKTooWSgibGluZWFyIiE9PWV8fG4uZGF0YUV4dGVudCksc18obikpfTthXy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmFfLG1hcFZhbHVlVG9WaXN1YWw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbm9ybWFsaXplRGF0YSh0KTtyZXR1cm4gdGhpcy5fZG9NYXAoZSx0KX0sZ2V0Tm9ybWFsaXplcjpmdW5jdGlvbigpe3JldHVybiBBKHRoaXMuX25vcm1hbGl6ZURhdGEsdGhpcyl9fTt2YXIgcl89YV8udmlzdWFsSGFuZGxlcnM9e2NvbG9yOnthcHBseVZpc3VhbDpoXygiY29sb3IiKSxnZXRDb2xvck1hcHBlcjpmdW5jdGlvbigpe3ZhciBvPXRoaXMub3B0aW9uO3JldHVybiBBKCJjYXRlZ29yeSI9PT1vLm1hcHBpbmdNZXRob2Q/ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8KHQ9dGhpcy5fbm9ybWFsaXplRGF0YSh0KSksY18uY2FsbCh0aGlzLHQpfTpmdW5jdGlvbih0LGUsaSl7dmFyIG49ISFpO3JldHVybiBlfHwodD10aGlzLl9ub3JtYWxpemVEYXRhKHQpKSxpPUZlKHQsby5wYXJzZWRWaXN1YWwsaSksbj9pOlllKGksInJnYmEiKX0sdGhpcyl9LF9kb01hcDp7bGluZWFyOmZ1bmN0aW9uKHQpe3JldHVybiBZZShGZSh0LHRoaXMub3B0aW9uLnBhcnNlZFZpc3VhbCksInJnYmEiKX0sY2F0ZWdvcnk6Y18scGllY2V3aXNlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9cF8uY2FsbCh0aGlzLGUpO3JldHVybiBudWxsPT1pJiYoaT1ZZShGZSh0LHRoaXMub3B0aW9uLnBhcnNlZFZpc3VhbCksInJnYmEiKSksaX0sZml4ZWQ6ZF99fSxjb2xvckh1ZTpsXyhmdW5jdGlvbih0LGUpe3JldHVybiBVZSh0LGUpfSksY29sb3JTYXR1cmF0aW9uOmxfKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIFVlKHQsbnVsbCxlKX0pLGNvbG9yTGlnaHRuZXNzOmxfKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIFVlKHQsbnVsbCxudWxsLGUpfSksY29sb3JBbHBoYTpsXyhmdW5jdGlvbih0LGUpe3JldHVybiBYZSh0LGUpfSksb3BhY2l0eTp7YXBwbHlWaXN1YWw6aF8oIm9wYWNpdHkiKSxfZG9NYXA6Zl8oWzAsMV0pfSxsaWZ0Wjp7YXBwbHlWaXN1YWw6aF8oImxpZnRaIiksX2RvTWFwOntsaW5lYXI6ZF8sY2F0ZWdvcnk6ZF8scGllY2V3aXNlOmRfLGZpeGVkOmRffX0sc3ltYm9sOnthcHBseVZpc3VhbDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5tYXBWYWx1ZVRvVmlzdWFsKHQpO2lmKHoobikpaSgic3ltYm9sIixuKTtlbHNlIGlmKG5fKG4pKWZvcih2YXIgbyBpbiBuKW4uaGFzT3duUHJvcGVydHkobykmJmkobyxuW29dKX0sX2RvTWFwOntsaW5lYXI6dV8sY2F0ZWdvcnk6Y18scGllY2V3aXNlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9cF8uY2FsbCh0aGlzLGUpO3JldHVybiBudWxsPT1pJiYoaT11Xy5jYWxsKHRoaXMsdCkpLGl9LGZpeGVkOmRffX0sc3ltYm9sU2l6ZTp7YXBwbHlWaXN1YWw6aF8oInN5bWJvbFNpemUiKSxfZG9NYXA6Zl8oWzAsMV0pfX07ZnVuY3Rpb24gc18odCxlKXt2YXIgaT10LnZpc3VhbCxuPVtdO1IoaSk/aV8oaSxmdW5jdGlvbih0KXtuLnB1c2godCl9KTpudWxsIT1pJiZuLnB1c2goaSk7ZXx8MSE9PW4ubGVuZ3RofHx7Y29sb3I6MSxzeW1ib2w6MX0uaGFzT3duUHJvcGVydHkodC50eXBlKXx8KG5bMV09blswXSksZ18odCxuKX1mdW5jdGlvbiBsXyhuKXtyZXR1cm57YXBwbHlWaXN1YWw6ZnVuY3Rpb24odCxlLGkpe3Q9dGhpcy5tYXBWYWx1ZVRvVmlzdWFsKHQpLGkoImNvbG9yIixuKGUoImNvbG9yIiksdCkpfSxfZG9NYXA6Zl8oWzAsMV0pfX1mdW5jdGlvbiB1Xyh0KXt2YXIgZT10aGlzLm9wdGlvbi52aXN1YWw7cmV0dXJuIGVbTWF0aC5yb3VuZChrbCh0LFswLDFdLFswLGUubGVuZ3RoLTFdLCEwKSldfHx7fX1mdW5jdGlvbiBoXyhuKXtyZXR1cm4gZnVuY3Rpb24odCxlLGkpe2kobix0aGlzLm1hcFZhbHVlVG9WaXN1YWwodCkpfX1mdW5jdGlvbiBjXyh0KXt2YXIgZT10aGlzLm9wdGlvbi52aXN1YWw7cmV0dXJuIGVbdGhpcy5vcHRpb24ubG9vcCYmdCE9PW9fP3QlZS5sZW5ndGg6dF19ZnVuY3Rpb24gZF8oKXtyZXR1cm4gdGhpcy5vcHRpb24udmlzdWFsWzBdfWZ1bmN0aW9uIGZfKG4pe3JldHVybntsaW5lYXI6ZnVuY3Rpb24odCl7cmV0dXJuIGtsKHQsbix0aGlzLm9wdGlvbi52aXN1YWwsITApfSxjYXRlZ29yeTpjXyxwaWVjZXdpc2U6ZnVuY3Rpb24odCxlKXt2YXIgaT1wXy5jYWxsKHRoaXMsZSk7cmV0dXJuIG51bGw9PWkmJihpPWtsKHQsbix0aGlzLm9wdGlvbi52aXN1YWwsITApKSxpfSxmaXhlZDpkX319ZnVuY3Rpb24gcF8odCl7dmFyIGU9dGhpcy5vcHRpb24saT1lLnBpZWNlTGlzdDtpZihlLmhhc1NwZWNpYWxWaXN1YWwpe3ZhciBuPWlbYV8uZmluZFBpZWNlSW5kZXgodCxpKV07aWYobiYmbi52aXN1YWwpcmV0dXJuIG4udmlzdWFsW3RoaXMudHlwZV19fWZ1bmN0aW9uIGdfKHQsZSl7cmV0dXJuIHQudmlzdWFsPWUsImNvbG9yIj09PXQudHlwZSYmKHQucGFyc2VkVmlzdWFsPU4oZSxmdW5jdGlvbih0KXtyZXR1cm4gUmUodCl9KSksZX12YXIgbV89e2xpbmVhcjpmdW5jdGlvbih0KXtyZXR1cm4ga2wodCx0aGlzLm9wdGlvbi5kYXRhRXh0ZW50LFswLDFdLCEwKX0scGllY2V3aXNlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9uLnBpZWNlTGlzdCxpPWFfLmZpbmRQaWVjZUluZGV4KHQsZSwhMCk7aWYobnVsbCE9aSlyZXR1cm4ga2woaSxbMCxlLmxlbmd0aC0xXSxbMCwxXSwhMCl9LGNhdGVnb3J5OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9uLmNhdGVnb3JpZXM/dGhpcy5vcHRpb24uY2F0ZWdvcnlNYXBbdF06dDtyZXR1cm4gbnVsbD09ZT9vXzplfSxmaXhlZDpldH07ZnVuY3Rpb24gdl8odCxlLGkpe3JldHVybiB0P2U8PWk6ZTxpfWFfLmxpc3RWaXN1YWxUeXBlcz1mdW5jdGlvbigpe3ZhciBpPVtdO3JldHVybiBFKHJfLGZ1bmN0aW9uKHQsZSl7aS5wdXNoKGUpfSksaX0sYV8uYWRkVmlzdWFsSGFuZGxlcj1mdW5jdGlvbih0LGUpe3JfW3RdPWV9LGFfLmlzVmFsaWRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiByXy5oYXNPd25Qcm9wZXJ0eSh0KX0sYV8uZWFjaFZpc3VhbD1mdW5jdGlvbih0LGUsaSl7Uih0KT9FKHQsZSxpKTplLmNhbGwoaSx0KX0sYV8ubWFwVmlzdWFsPWZ1bmN0aW9uKHQsbixvKXt2YXIgYSxyPWsodCk/W106Uih0KT97fTooYT0hMCxudWxsKTtyZXR1cm4gYV8uZWFjaFZpc3VhbCh0LGZ1bmN0aW9uKHQsZSl7dmFyIGk9bi5jYWxsKG8sdCxlKTthP3I9aTpyW2VdPWl9KSxyfSxhXy5yZXRyaWV2ZVZpc3VhbHM9ZnVuY3Rpb24oaSl7dmFyIG4sbz17fTtyZXR1cm4gaSYmaV8ocl8sZnVuY3Rpb24odCxlKXtpLmhhc093blByb3BlcnR5KGUpJiYob1tlXT1pW2VdLG49ITApfSksbj9vOm51bGx9LGFfLnByZXBhcmVWaXN1YWxUeXBlcz1mdW5jdGlvbih0KXtpZihuXyh0KSl7dmFyIGk9W107aV8odCxmdW5jdGlvbih0LGUpe2kucHVzaChlKX0pLHQ9aX1lbHNle2lmKCFrKHQpKXJldHVybltdO3Q9dC5zbGljZSgpfXJldHVybiB0LnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4iY29sb3IiPT09ZSYmImNvbG9yIiE9PXQmJjA9PT10LmluZGV4T2YoImNvbG9yIik/MTotMX0pLHR9LGFfLmRlcGVuZHNPbj1mdW5jdGlvbih0LGUpe3JldHVybiJjb2xvciI9PT1lPyEoIXR8fDAhPT10LmluZGV4T2YoZSkpOnQ9PT1lfSxhXy5maW5kUGllY2VJbmRleD1mdW5jdGlvbihuLHQsZSl7Zm9yKHZhciBvLGE9MS8wLGk9MCxyPXQubGVuZ3RoO2k8cjtpKyspe3ZhciBzPXRbaV0udmFsdWU7aWYobnVsbCE9cyl7aWYocz09PW58fCJzdHJpbmciPT10eXBlb2YgcyYmcz09PW4rIiIpcmV0dXJuIGk7ZSYmYyhzLGkpfX1mb3IoaT0wLHI9dC5sZW5ndGg7aTxyO2krKyl7dmFyIGw9dFtpXSx1PWwuaW50ZXJ2YWwsaD1sLmNsb3NlO2lmKHUpe2lmKHVbMF09PT0tMS8wKXtpZih2XyhoWzFdLG4sdVsxXSkpcmV0dXJuIGl9ZWxzZSBpZih1WzFdPT09MS8wKXtpZih2XyhoWzBdLHVbMF0sbikpcmV0dXJuIGl9ZWxzZSBpZih2XyhoWzBdLHVbMF0sbikmJnZfKGhbMV0sbix1WzFdKSlyZXR1cm4gaTtlJiZjKHVbMF0saSksZSYmYyh1WzFdLGkpfX1pZihlKXJldHVybiBuPT09MS8wP3QubGVuZ3RoLTE6bj09PS0xLzA/MDpvO2Z1bmN0aW9uIGModCxlKXt2YXIgaT1NYXRoLmFicyh0LW4pO2k8YSYmKGE9aSxvPWUpfX07dmFyIHlfPWsseF89Iml0ZW1TdHlsZSIsX189e3Nlcmllc1R5cGU6InRyZWVtYXAiLHJlc2V0OmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXQuZ2V0RGF0YSgpLnRyZWUsYT1vLnJvb3Qscj10LmdldE1vZGVsKHhfKTthLmlzUmVtb3ZlZCgpfHwhZnVuY3Rpb24gbih0LGUsbyxhLHIscyl7dmFyIGw9dC5nZXRNb2RlbCgpO3ZhciBpPXQuZ2V0TGF5b3V0KCk7aWYoIWl8fGkuaW52aXNpYmxlfHwhaS5pc0luVmlldylyZXR1cm47dmFyIHU9dC5nZXRNb2RlbCh4Xyk7dmFyIGg9b1t0LmRlcHRoXTt2YXIgYz13Xyh1LGUsaCxhKTt2YXIgZD11LmdldCgiYm9yZGVyQ29sb3IiKTt2YXIgZj11LmdldCgiYm9yZGVyQ29sb3JTYXR1cmF0aW9uIik7dmFyIHA7bnVsbCE9ZiYmKHA9Yl8oYyksZz1mLGQ9bnVsbCE9KG09cCk/VWUobSxudWxsLG51bGwsZyk6bnVsbCk7dmFyIGcsbTt0LnNldFZpc3VhbCgiYm9yZGVyQ29sb3IiLGQpO3ZhciB2PXQudmlld0NoaWxkcmVuO2lmKHYmJnYubGVuZ3RoKXt2YXIgeT1NXyh0LGwsaSx1LGMsdik7RSh2LGZ1bmN0aW9uKHQsZSl7aWYodC5kZXB0aD49ci5sZW5ndGh8fHQ9PT1yW3QuZGVwdGhdKXt2YXIgaT1UXyhsLGMsdCxlLHkscyk7bih0LGksbyxhLHIscyl9fSl9ZWxzZSBwPWJfKGMpLHQuc2V0VmlzdWFsKCJjb2xvciIscCl9KGEse30sTihvLmxldmVsTW9kZWxzLGZ1bmN0aW9uKHQpe3JldHVybiB0P3QuZ2V0KHhfKTpudWxsfSkscix0LmdldFZpZXdSb290KCkuZ2V0QW5jZXN0b3JzKCksdCl9fTtmdW5jdGlvbiB3XyhpLG4sbyxhKXt2YXIgcj1MKHt9LG4pO3JldHVybiBFKFsiY29sb3IiLCJjb2xvckFscGhhIiwiY29sb3JTYXR1cmF0aW9uIl0sZnVuY3Rpb24odCl7dmFyIGU9aS5nZXQodCwhMCk7bnVsbD09ZSYmbyYmKGU9b1t0XSksbnVsbD09ZSYmKGU9blt0XSksbnVsbD09ZSYmKGU9YS5nZXQodCkpLG51bGwhPWUmJihyW3RdPWUpfSkscn1mdW5jdGlvbiBiXyh0KXt2YXIgZT1TXyh0LCJjb2xvciIpO2lmKGUpe3ZhciBpPVNfKHQsImNvbG9yQWxwaGEiKSxuPVNfKHQsImNvbG9yU2F0dXJhdGlvbiIpO3JldHVybiBuJiYoZT1VZShlLG51bGwsbnVsbCxuKSksaSYmKGU9WGUoZSxpKSksZX19ZnVuY3Rpb24gU18odCxlKXt2YXIgaT10W2VdO2lmKG51bGwhPWkmJiJub25lIiE9PWkpcmV0dXJuIGl9ZnVuY3Rpb24gTV8odCxlLGksbixvLGEpe2lmKGEmJmEubGVuZ3RoKXt2YXIgcj1JXyhlLCJjb2xvciIpfHxudWxsIT1vLmNvbG9yJiYibm9uZSIhPT1vLmNvbG9yJiYoSV8oZSwiY29sb3JBbHBoYSIpfHxJXyhlLCJjb2xvclNhdHVyYXRpb24iKSk7aWYocil7dmFyIHM9ZS5nZXQoInZpc3VhbE1pbiIpLGw9ZS5nZXQoInZpc3VhbE1heCIpLHU9aS5kYXRhRXh0ZW50LnNsaWNlKCk7bnVsbCE9cyYmczx1WzBdJiYodVswXT1zKSxudWxsIT1sJiZsPnVbMV0mJih1WzFdPWwpO3ZhciBoPWUuZ2V0KCJjb2xvck1hcHBpbmdCeSIpLGM9e3R5cGU6ci5uYW1lLGRhdGFFeHRlbnQ6dSx2aXN1YWw6ci5yYW5nZX07ImNvbG9yIiE9PWMudHlwZXx8ImluZGV4IiE9PWgmJiJpZCIhPT1oP2MubWFwcGluZ01ldGhvZD0ibGluZWFyIjooYy5tYXBwaW5nTWV0aG9kPSJjYXRlZ29yeSIsYy5sb29wPSEwKTt2YXIgZD1uZXcgYV8oYyk7cmV0dXJuIGQuX19kckNvbG9yTWFwcGluZ0J5PWgsZH19fWZ1bmN0aW9uIElfKHQsZSl7dmFyIGk9dC5nZXQoZSk7cmV0dXJuIHlfKGkpJiZpLmxlbmd0aD97bmFtZTplLHJhbmdlOml9Om51bGx9ZnVuY3Rpb24gVF8odCxlLGksbixvLGEpe3ZhciByPUwoe30sZSk7aWYobyl7dmFyIHM9by50eXBlLGw9ImNvbG9yIj09PXMmJm8uX19kckNvbG9yTWFwcGluZ0J5LHU9ImluZGV4Ij09PWw/bjoiaWQiPT09bD9hLm1hcElkVG9JbmRleChpLmdldElkKCkpOmkuZ2V0VmFsdWUodC5nZXQoInZpc3VhbERpbWVuc2lvbiIpKTtyW3NdPW8ubWFwVmFsdWVUb1Zpc3VhbCh1KX1yZXR1cm4gcn12YXIgQV89TWF0aC5tYXgsRF89TWF0aC5taW4sQ189VyxMXz1FLGtfPVsiaXRlbVN0eWxlIiwiYm9yZGVyV2lkdGgiXSxQXz1bIml0ZW1TdHlsZSIsImdhcFdpZHRoIl0sTl89WyJ1cHBlckxhYmVsIiwic2hvdyJdLE9fPVsidXBwZXJMYWJlbCIsImhlaWdodCJdLEVfPXtzZXJpZXNUeXBlOiJ0cmVlbWFwIixyZXNldDpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1pLmdldFdpZHRoKCksYT1pLmdldEhlaWdodCgpLHI9dC5vcHRpb24scz12dSh0LmdldEJveExheW91dFBhcmFtcygpLHt3aWR0aDppLmdldFdpZHRoKCksaGVpZ2h0OmkuZ2V0SGVpZ2h0KCl9KSxsPXIuc2l6ZXx8W10sdT1QbChDXyhzLndpZHRoLGxbMF0pLG8pLGg9UGwoQ18ocy5oZWlnaHQsbFsxXSksYSksYz1uJiZuLnR5cGUsZD1PeChuLFsidHJlZW1hcFpvb21Ub05vZGUiLCJ0cmVlbWFwUm9vdFRvTm9kZSJdLHQpLGY9InRyZWVtYXBSZW5kZXIiPT09Y3x8InRyZWVtYXBNb3ZlIj09PWM/bi5yb290UmVjdDpudWxsLHA9dC5nZXRWaWV3Um9vdCgpLGc9RXgocCk7aWYoInRyZWVtYXBNb3ZlIiE9PWMpe3ZhciBtPSJ0cmVlbWFwWm9vbVRvTm9kZSI9PT1jP2Z1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGEscj0oZXx8e30pLm5vZGUscz1bbixvXTtpZighcnx8cj09PWkpcmV0dXJuIHM7dmFyIGw9bipvLHU9bCp0Lm9wdGlvbi56b29tVG9Ob2RlUmF0aW87Zm9yKDthPXIucGFyZW50Tm9kZTspe2Zvcih2YXIgaD0wLGM9YS5jaGlsZHJlbixkPTAsZj1jLmxlbmd0aDtkPGY7ZCsrKWgrPWNbZF0uZ2V0VmFsdWUoKTt2YXIgcD1yLmdldFZhbHVlKCk7aWYoMD09PXApcmV0dXJuIHM7dSo9aC9wO3ZhciBnPWEuZ2V0TW9kZWwoKSxtPWcuZ2V0KGtfKSx2PU1hdGgubWF4KG0sVl8oZykpO3UrPTQqbSptKygzKm0rdikqTWF0aC5wb3codSwuNSksVmw8dSYmKHU9VmwpLHI9YX11PGwmJih1PWwpO3ZhciB5PU1hdGgucG93KHUvbCwuNSk7cmV0dXJuW24qeSxvKnldfSh0LGQscCx1LGgpOmY/W2Yud2lkdGgsZi5oZWlnaHRdOlt1LGhdLHY9ci5zb3J0O3YmJiJhc2MiIT09diYmImRlc2MiIT09diYmKHY9ImRlc2MiKTt2YXIgeT17c3F1YXJlUmF0aW86ci5zcXVhcmVSYXRpbyxzb3J0OnYsbGVhZkRlcHRoOnIubGVhZkRlcHRofTtwLmhvc3RUcmVlLmNsZWFyTGF5b3V0cygpO3ZhciB4PXt4OjAseTowLHdpZHRoOm1bMF0saGVpZ2h0Om1bMV0sYXJlYTptWzBdKm1bMV19O3Auc2V0TGF5b3V0KHgpLGZ1bmN0aW9uIHQoZSxpLG4sbyl7dmFyIGE7dmFyIHI7aWYoZS5pc1JlbW92ZWQoKSlyZXR1cm47dmFyIHM9ZS5nZXRMYXlvdXQoKTthPXMud2lkdGg7cj1zLmhlaWdodDt2YXIgbD1lLmdldE1vZGVsKCk7dmFyIHU9bC5nZXQoa18pO3ZhciBoPWwuZ2V0KFBfKS8yO3ZhciBjPVZfKGwpO3ZhciBkPU1hdGgubWF4KHUsYyk7dmFyIGY9dS1oO3ZhciBwPWQtaDt2YXIgbD1lLmdldE1vZGVsKCk7ZS5zZXRMYXlvdXQoe2JvcmRlcldpZHRoOnUsdXBwZXJIZWlnaHQ6ZCx1cHBlckxhYmVsSGVpZ2h0OmN9LCEwKTthPUFfKGEtMipmLDApO3I9QV8oci1mLXAsMCk7dmFyIGc9YSpyO3ZhciBtPXpfKGUsbCxnLGksbixvKTtpZighbS5sZW5ndGgpcmV0dXJuO3ZhciB2PXt4OmYseTpwLHdpZHRoOmEsaGVpZ2h0OnJ9O3ZhciB5PURfKGEscik7dmFyIHg9MS8wO3ZhciBfPVtdO18uYXJlYT0wO2Zvcih2YXIgdz0wLGI9bS5sZW5ndGg7dzxiOyl7dmFyIFM9bVt3XTtfLnB1c2goUyksXy5hcmVhKz1TLmdldExheW91dCgpLmFyZWE7dmFyIE09Ul8oXyx5LGkuc3F1YXJlUmF0aW8pO3g9TTw9eD8odysrLE0pOihfLmFyZWEtPV8ucG9wKCkuZ2V0TGF5b3V0KCkuYXJlYSxCXyhfLHksdixoLCExKSx5PURfKHYud2lkdGgsdi5oZWlnaHQpLF8ubGVuZ3RoPV8uYXJlYT0wLDEvMCl9Xy5sZW5ndGgmJkJfKF8seSx2LGgsITApO2lmKCFuKXt2YXIgST1sLmdldCgiY2hpbGRyZW5WaXNpYmxlTWluIik7bnVsbCE9SSYmZzxJJiYobj0hMCl9Zm9yKHZhciB3PTAsYj1tLmxlbmd0aDt3PGI7dysrKXQobVt3XSxpLG4sbysxKX0ocCx5LCExLDApO3g9cC5nZXRMYXlvdXQoKTtMXyhnLGZ1bmN0aW9uKHQsZSl7dmFyIGk9KGdbZSsxXXx8cCkuZ2V0VmFsdWUoKTt0LnNldExheW91dChMKHtkYXRhRXh0ZW50OltpLGldLGJvcmRlcldpZHRoOjAsdXBwZXJIZWlnaHQ6MH0seCkpfSl9dmFyIF89dC5nZXREYXRhKCkudHJlZS5yb290O18uc2V0TGF5b3V0KGZ1bmN0aW9uKHQsZSxpKXtpZihlKXJldHVybnt4OmUueCx5OmUueX07dmFyIG49e3g6MCx5OjB9O2lmKCFpKXJldHVybiBuO3ZhciBvPWkubm9kZSxhPW8uZ2V0TGF5b3V0KCk7aWYoIWEpcmV0dXJuIG47dmFyIHI9W2Eud2lkdGgvMixhLmhlaWdodC8yXSxzPW87Zm9yKDtzOyl7dmFyIGw9cy5nZXRMYXlvdXQoKTtyWzBdKz1sLngsclsxXSs9bC55LHM9cy5wYXJlbnROb2RlfXJldHVybnt4OnQud2lkdGgvMi1yWzBdLHk6dC5oZWlnaHQvMi1yWzFdfX0ocyxmLGQpLCEwKSx0LnNldExheW91dEluZm8ocyksZnVuY3Rpb24gZSh0LGksbixvLGEpe3ZhciByPXQuZ2V0TGF5b3V0KCk7dmFyIHM9blthXTt2YXIgbD1zJiZzPT09dDtpZihzJiYhbHx8YT09PW4ubGVuZ3RoJiZ0IT09bylyZXR1cm47dC5zZXRMYXlvdXQoe2lzSW5WaWV3OiEwLGludmlzaWJsZTohbCYmIWkuaW50ZXJzZWN0KHIpLGlzQWJvdmVWaWV3Um9vdDpsfSwhMCk7dmFyIHU9bmV3IE1pKGkueC1yLngsaS55LXIueSxpLndpZHRoLGkuaGVpZ2h0KTtMXyh0LnZpZXdDaGlsZHJlbnx8W10sZnVuY3Rpb24odCl7ZSh0LHUsbixvLGErMSl9KX0oXyxuZXcgTWkoLXMueCwtcy55LG8sYSksZyxwLDApfX07ZnVuY3Rpb24gel8odCxlLGksbixvLGEpe3ZhciByPXQuY2hpbGRyZW58fFtdLHM9bi5zb3J0OyJhc2MiIT09cyYmImRlc2MiIT09cyYmKHM9bnVsbCk7dmFyIGw9bnVsbCE9bi5sZWFmRGVwdGgmJm4ubGVhZkRlcHRoPD1hO2lmKG8mJiFsKXJldHVybiB0LnZpZXdDaGlsZHJlbj1bXTshZnVuY3Rpb24odCxuKXtuJiZ0LnNvcnQoZnVuY3Rpb24odCxlKXt2YXIgaT0iYXNjIj09PW4/dC5nZXRWYWx1ZSgpLWUuZ2V0VmFsdWUoKTplLmdldFZhbHVlKCktdC5nZXRWYWx1ZSgpO3JldHVybiAwPT1pPyJhc2MiPT09bj90LmRhdGFJbmRleC1lLmRhdGFJbmRleDplLmRhdGFJbmRleC10LmRhdGFJbmRleDppfSl9KHI9TShyLGZ1bmN0aW9uKHQpe3JldHVybiF0LmlzUmVtb3ZlZCgpfSkscyk7dmFyIHU9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj0wLG89MCxhPWUubGVuZ3RoO288YTtvKyspbis9ZVtvXS5nZXRWYWx1ZSgpO3ZhciByPXQuZ2V0KCJ2aXN1YWxEaW1lbnNpb24iKTtpZihlJiZlLmxlbmd0aClpZigidmFsdWUiPT09ciYmaSlzPVtlW2UubGVuZ3RoLTFdLmdldFZhbHVlKCksZVswXS5nZXRWYWx1ZSgpXSwiYXNjIj09PWkmJnMucmV2ZXJzZSgpO2Vsc2V7dmFyIHM9WzEvMCwtMS8wXTtMXyhlLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0VmFsdWUocik7ZTxzWzBdJiYoc1swXT1lKSxlPnNbMV0mJihzWzFdPWUpfSl9ZWxzZSBzPVtOYU4sTmFOXTtyZXR1cm57c3VtOm4sZGF0YUV4dGVudDpzfX0oZSxyLHMpO2lmKDA9PT11LnN1bSlyZXR1cm4gdC52aWV3Q2hpbGRyZW49W107aWYodS5zdW09ZnVuY3Rpb24odCxlLGksbixvKXtpZighbilyZXR1cm4gaTtmb3IodmFyIGE9dC5nZXQoInZpc2libGVNaW4iKSxyPW8ubGVuZ3RoLHM9cixsPXItMTswPD1sO2wtLSl7dmFyIHU9b1siYXNjIj09PW4/ci1sLTE6bF0uZ2V0VmFsdWUoKTt1L2kqZTxhJiYocz1sLGktPXUpfXJldHVybiJhc2MiPT09bj9vLnNwbGljZSgwLHItcyk6by5zcGxpY2UocyxyLXMpLGl9KGUsaSx1LnN1bSxzLHIpLDA9PT11LnN1bSlyZXR1cm4gdC52aWV3Q2hpbGRyZW49W107Zm9yKHZhciBoPTAsYz1yLmxlbmd0aDtoPGM7aCsrKXt2YXIgZD1yW2hdLmdldFZhbHVlKCkvdS5zdW0qaTtyW2hdLnNldExheW91dCh7YXJlYTpkfSl9cmV0dXJuIGwmJihyLmxlbmd0aCYmdC5zZXRMYXlvdXQoe2lzTGVhZlJvb3Q6ITB9LCEwKSxyLmxlbmd0aD0wKSx0LnZpZXdDaGlsZHJlbj1yLHQuc2V0TGF5b3V0KHtkYXRhRXh0ZW50OnUuZGF0YUV4dGVudH0sITApLHJ9ZnVuY3Rpb24gUl8odCxlLGkpe2Zvcih2YXIgbixvPTAsYT0xLzAscj0wLHM9dC5sZW5ndGg7cjxzO3IrKykobj10W3JdLmdldExheW91dCgpLmFyZWEpJiYobjxhJiYoYT1uKSxvPG4mJihvPW4pKTt2YXIgbD10LmFyZWEqdC5hcmVhLHU9ZSplKmk7cmV0dXJuIGw/QV8odSpvL2wsbC8odSphKSk6MS8wfWZ1bmN0aW9uIEJfKHQsZSxpLG4sbyl7dmFyIGE9ZT09PWkud2lkdGg/MDoxLHI9MS1hLHM9WyJ4IiwieSJdLGw9WyJ3aWR0aCIsImhlaWdodCJdLHU9aVtzW2FdXSxoPWU/dC5hcmVhL2U6MDsob3x8aD5pW2xbcl1dKSYmKGg9aVtsW3JdXSk7Zm9yKHZhciBjPTAsZD10Lmxlbmd0aDtjPGQ7YysrKXt2YXIgZj10W2NdLHA9e30sZz1oP2YuZ2V0TGF5b3V0KCkuYXJlYS9oOjAsbT1wW2xbcl1dPUFfKGgtMipuLDApLHY9aVtzW2FdXStpW2xbYV1dLXUseT1jPT09ZC0xfHx2PGc/djpnLHg9cFtsW2FdXT1BXyh5LTIqbiwwKTtwW3Nbcl1dPWlbc1tyXV0rRF8obixtLzIpLHBbc1thXV09dStEXyhuLHgvMiksdSs9eSxmLnNldExheW91dChwLCEwKX1pW3Nbcl1dKz1oLGlbbFtyXV0tPWh9ZnVuY3Rpb24gVl8odCl7cmV0dXJuIHQuZ2V0KE5fKT90LmdldChPXyk6MH1mdW5jdGlvbiBHXyh0KXtyZXR1cm4iX0VDXyIrdH15ZihfXyksdmYoRV8pO2Z1bmN0aW9uIEZfKHQpe3RoaXMuX2RpcmVjdGVkPXR8fCExLHRoaXMubm9kZXM9W10sdGhpcy5lZGdlcz1bXSx0aGlzLl9ub2Rlc01hcD17fSx0aGlzLl9lZGdlc01hcD17fSx0aGlzLmRhdGEsdGhpcy5lZGdlRGF0YX12YXIgV189Rl8ucHJvdG90eXBlO2Z1bmN0aW9uIEhfKHQsZSl7dGhpcy5pZD1udWxsPT10PyIiOnQsdGhpcy5pbkVkZ2VzPVtdLHRoaXMub3V0RWRnZXM9W10sdGhpcy5lZGdlcz1bXSx0aGlzLmhvc3RHcmFwaCx0aGlzLmRhdGFJbmRleD1udWxsPT1lPy0xOmV9ZnVuY3Rpb24gWl8odCxlLGkpe3RoaXMubm9kZTE9dCx0aGlzLm5vZGUyPWUsdGhpcy5kYXRhSW5kZXg9bnVsbD09aT8tMTppfVdfLnR5cGU9ImdyYXBoIixXXy5pc0RpcmVjdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RpcmVjdGVkfSxXXy5hZGROb2RlPWZ1bmN0aW9uKHQsZSl7dD1udWxsPT10PyIiK2U6IiIrdDt2YXIgaT10aGlzLl9ub2Rlc01hcDtpZighaVtHXyh0KV0pe3ZhciBuPW5ldyBIXyh0LGUpO3JldHVybihuLmhvc3RHcmFwaD10aGlzKS5ub2Rlcy5wdXNoKG4pLGlbR18odCldPW59fSxXXy5nZXROb2RlQnlJbmRleD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmRhdGEuZ2V0UmF3SW5kZXgodCk7cmV0dXJuIHRoaXMubm9kZXNbZV19LFdfLmdldE5vZGVCeUlkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ub2Rlc01hcFtHXyh0KV19LFdfLmFkZEVkZ2U9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuX25vZGVzTWFwLG89dGhpcy5fZWRnZXNNYXA7aWYoIm51bWJlciI9PXR5cGVvZiB0JiYodD10aGlzLm5vZGVzW3RdKSwibnVtYmVyIj09dHlwZW9mIGUmJihlPXRoaXMubm9kZXNbZV0pLEhfLmlzSW5zdGFuY2UodCl8fCh0PW5bR18odCldKSxIXy5pc0luc3RhbmNlKGUpfHwoZT1uW0dfKGUpXSksdCYmZSl7dmFyIGE9dC5pZCsiLSIrZS5pZDtpZighb1thXSl7dmFyIHI9bmV3IFpfKHQsZSxpKTtyZXR1cm4oci5ob3N0R3JhcGg9dGhpcykuX2RpcmVjdGVkJiYodC5vdXRFZGdlcy5wdXNoKHIpLGUuaW5FZGdlcy5wdXNoKHIpKSx0LmVkZ2VzLnB1c2gociksdCE9PWUmJmUuZWRnZXMucHVzaChyKSx0aGlzLmVkZ2VzLnB1c2gociksb1thXT1yfX19LFdfLmdldEVkZ2VCeUluZGV4PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZWRnZURhdGEuZ2V0UmF3SW5kZXgodCk7cmV0dXJuIHRoaXMuZWRnZXNbZV19LFdfLmdldEVkZ2U9ZnVuY3Rpb24odCxlKXtIXy5pc0luc3RhbmNlKHQpJiYodD10LmlkKSxIXy5pc0luc3RhbmNlKGUpJiYoZT1lLmlkKTt2YXIgaT10aGlzLl9lZGdlc01hcDtyZXR1cm4gdGhpcy5fZGlyZWN0ZWQ/aVt0KyItIitlXTppW3QrIi0iK2VdfHxpW2UrIi0iK3RdfSxXXy5lYWNoTm9kZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLm5vZGVzLG49aS5sZW5ndGgsbz0wO288bjtvKyspMDw9aVtvXS5kYXRhSW5kZXgmJnQuY2FsbChlLGlbb10sbyl9LFdfLmVhY2hFZGdlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXRoaXMuZWRnZXMsbj1pLmxlbmd0aCxvPTA7bzxuO28rKykwPD1pW29dLmRhdGFJbmRleCYmMDw9aVtvXS5ub2RlMS5kYXRhSW5kZXgmJjA8PWlbb10ubm9kZTIuZGF0YUluZGV4JiZ0LmNhbGwoZSxpW29dLG8pfSxXXy5icmVhZHRoRmlyc3RUcmF2ZXJzZT1mdW5jdGlvbih0LGUsaSxuKXtpZihIXy5pc0luc3RhbmNlKGUpfHwoZT10aGlzLl9ub2Rlc01hcFtHXyhlKV0pLGUpe2Zvcih2YXIgbz0ib3V0Ij09PWk/Im91dEVkZ2VzIjoiaW4iPT09aT8iaW5FZGdlcyI6ImVkZ2VzIixhPTA7YTx0aGlzLm5vZGVzLmxlbmd0aDthKyspdGhpcy5ub2Rlc1thXS5fX3Zpc2l0ZWQ9ITE7aWYoIXQuY2FsbChuLGUsbnVsbCkpZm9yKHZhciByPVtlXTtyLmxlbmd0aDspe3ZhciBzPXIuc2hpZnQoKSxsPXNbb107Zm9yKGE9MDthPGwubGVuZ3RoO2ErKyl7dmFyIHU9bFthXSxoPXUubm9kZTE9PT1zP3Uubm9kZTI6dS5ub2RlMTtpZighaC5fX3Zpc2l0ZWQpe2lmKHQuY2FsbChuLGgscykpcmV0dXJuO3IucHVzaChoKSxoLl9fdmlzaXRlZD0hMH19fX19LFdfLnVwZGF0ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmRhdGEsaT10aGlzLmVkZ2VEYXRhLGU9dGhpcy5ub2RlcyxuPXRoaXMuZWRnZXMsbz0wLGE9ZS5sZW5ndGg7bzxhO28rKyllW29dLmRhdGFJbmRleD0tMTtmb3Iobz0wLGE9dC5jb3VudCgpO288YTtvKyspZVt0LmdldFJhd0luZGV4KG8pXS5kYXRhSW5kZXg9bztpLmZpbHRlclNlbGYoZnVuY3Rpb24odCl7dmFyIGU9bltpLmdldFJhd0luZGV4KHQpXTtyZXR1cm4gMDw9ZS5ub2RlMS5kYXRhSW5kZXgmJjA8PWUubm9kZTIuZGF0YUluZGV4fSk7Zm9yKG89MCxhPW4ubGVuZ3RoO288YTtvKyspbltvXS5kYXRhSW5kZXg9LTE7Zm9yKG89MCxhPWkuY291bnQoKTtvPGE7bysrKW5baS5nZXRSYXdJbmRleChvKV0uZGF0YUluZGV4PW99LFdfLmNsb25lPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBGXyh0aGlzLl9kaXJlY3RlZCksZT10aGlzLm5vZGVzLGk9dGhpcy5lZGdlcyxuPTA7bjxlLmxlbmd0aDtuKyspdC5hZGROb2RlKGVbbl0uaWQsZVtuXS5kYXRhSW5kZXgpO2ZvcihuPTA7bjxpLmxlbmd0aDtuKyspe3ZhciBvPWlbbl07dC5hZGRFZGdlKG8ubm9kZTEuaWQsby5ub2RlMi5pZCxvLmRhdGFJbmRleCl9cmV0dXJuIHR9LEhfLnByb3RvdHlwZT17Y29uc3RydWN0b3I6SF8sZGVncmVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZXMubGVuZ3RofSxpbkRlZ3JlZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluRWRnZXMubGVuZ3RofSxvdXREZWdyZWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRFZGdlcy5sZW5ndGh9LGdldE1vZGVsOmZ1bmN0aW9uKHQpe2lmKCEodGhpcy5kYXRhSW5kZXg8MCkpcmV0dXJuIHRoaXMuaG9zdEdyYXBoLmRhdGEuZ2V0SXRlbU1vZGVsKHRoaXMuZGF0YUluZGV4KS5nZXRNb2RlbCh0KX19LFpfLnByb3RvdHlwZS5nZXRNb2RlbD1mdW5jdGlvbih0KXtpZighKHRoaXMuZGF0YUluZGV4PDApKXJldHVybiB0aGlzLmhvc3RHcmFwaC5lZGdlRGF0YS5nZXRJdGVtTW9kZWwodGhpcy5kYXRhSW5kZXgpLmdldE1vZGVsKHQpfTtmdW5jdGlvbiBVXyhpLG4pe3JldHVybntnZXRWYWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzW2ldW25dO3JldHVybiBlLmdldChlLmdldERpbWVuc2lvbih0fHwidmFsdWUiKSx0aGlzLmRhdGFJbmRleCl9LHNldFZpc3VhbDpmdW5jdGlvbih0LGUpezA8PXRoaXMuZGF0YUluZGV4JiZ0aGlzW2ldW25dLnNldEl0ZW1WaXN1YWwodGhpcy5kYXRhSW5kZXgsdCxlKX0sZ2V0VmlzdWFsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXNbaV1bbl0uZ2V0SXRlbVZpc3VhbCh0aGlzLmRhdGFJbmRleCx0LGUpfSxzZXRMYXlvdXQ6ZnVuY3Rpb24odCxlKXswPD10aGlzLmRhdGFJbmRleCYmdGhpc1tpXVtuXS5zZXRJdGVtTGF5b3V0KHRoaXMuZGF0YUluZGV4LHQsZSl9LGdldExheW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzW2ldW25dLmdldEl0ZW1MYXlvdXQodGhpcy5kYXRhSW5kZXgpfSxnZXRHcmFwaGljRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tpXVtuXS5nZXRJdGVtR3JhcGhpY0VsKHRoaXMuZGF0YUluZGV4KX0sZ2V0UmF3SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tpXVtuXS5nZXRSYXdJbmRleCh0aGlzLmRhdGFJbmRleCl9fX1iKEhfLFVfKCJob3N0R3JhcGgiLCJkYXRhIikpLGIoWl8sVV8oImhvc3RHcmFwaCIsImVkZ2VEYXRhIikpLEZfLk5vZGU9SF8sRl8uRWRnZT1aXyxpYShIXyksaWEoWl8pO2Z1bmN0aW9uIFhfKHQsZSxpLG4sbyl7Zm9yKHZhciBhPW5ldyBGXyhuKSxyPTA7cjx0Lmxlbmd0aDtyKyspYS5hZGROb2RlKFcodFtyXS5pZCx0W3JdLm5hbWUscikscik7dmFyIHM9W10sbD1bXSx1PTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIGg9ZVtyXSxjPWguc291cmNlLGQ9aC50YXJnZXQ7YS5hZGRFZGdlKGMsZCx1KSYmKGwucHVzaChoKSxzLnB1c2goVyhoLmlkLGMrIiA+ICIrZCkpLHUrKyl9dmFyIGYscD1pLmdldCgiY29vcmRpbmF0ZVN5c3RlbSIpO2lmKCJjYXJ0ZXNpYW4yZCI9PT1wfHwicG9sYXIiPT09cClmPWhwKHQsaSk7ZWxzZXt2YXIgZz1uaC5nZXQocCksbT1nJiYidmlldyIhPT1nLnR5cGUmJmcuZGltZW5zaW9uc3x8W107XyhtLCJ2YWx1ZSIpPDAmJm0uY29uY2F0KFsidmFsdWUiXSk7dmFyIHY9bnAodCx7Y29vcmREaW1lbnNpb25zOm19KTsoZj1uZXcgV2YodixpKSkuaW5pdERhdGEodCl9dmFyIHk9bmV3IFdmKFsidmFsdWUiXSxpKTtyZXR1cm4geS5pbml0RGF0YShsLHMpLG8mJm8oZix5KSx1eCh7bWFpbkRhdGE6ZixzdHJ1Y3Q6YSxzdHJ1Y3RBdHRyOiJncmFwaCIsZGF0YXM6e25vZGU6ZixlZGdlOnl9LGRhdGFzQXR0cjp7bm9kZToiZGF0YSIsZWRnZToiZWRnZURhdGEifX0pLGEudXBkYXRlKCksYX12YXIgWV89U2Yoe3R5cGU6InNlcmllcy5ncmFwaCIsaW5pdDpmdW5jdGlvbih0KXtZXy5zdXBlckFwcGx5KHRoaXMsImluaXQiLGFyZ3VtZW50cyk7dmFyIGU9dGhpcztmdW5jdGlvbiBpKCl7cmV0dXJuIGUuX2NhdGVnb3JpZXNEYXRhfXRoaXMubGVnZW5kVmlzdWFsUHJvdmlkZXI9bmV3IEd2KGksaSksdGhpcy5maWxsRGF0YVRleHRTdHlsZSh0LmVkZ2VzfHx0LmxpbmtzKSx0aGlzLl91cGRhdGVDYXRlZ29yaWVzRGF0YSgpfSxtZXJnZU9wdGlvbjpmdW5jdGlvbih0KXtZXy5zdXBlckFwcGx5KHRoaXMsIm1lcmdlT3B0aW9uIixhcmd1bWVudHMpLHRoaXMuZmlsbERhdGFUZXh0U3R5bGUodC5lZGdlc3x8dC5saW5rcyksdGhpcy5fdXBkYXRlQ2F0ZWdvcmllc0RhdGEoKX0sbWVyZ2VEZWZhdWx0QW5kVGhlbWU6ZnVuY3Rpb24odCl7WV8uc3VwZXJBcHBseSh0aGlzLCJtZXJnZURlZmF1bHRBbmRUaGVtZSIsYXJndW1lbnRzKSx6byh0LFsiZWRnZUxhYmVsIl0sWyJzaG93Il0pfSxnZXRJbml0aWFsRGF0YTpmdW5jdGlvbih0LHMpe3ZhciBlPXQuZWRnZXN8fHQubGlua3N8fFtdLGk9dC5kYXRhfHx0Lm5vZGVzfHxbXSxsPXRoaXM7aWYoaSYmZSlyZXR1cm4gWF8oaSxlLHRoaXMsITAsZnVuY3Rpb24odCxlKXt0LndyYXBNZXRob2QoImdldEl0ZW1Nb2RlbCIsZnVuY3Rpb24odCl7dmFyIGU9bC5fY2F0ZWdvcmllc01vZGVsc1t0LmdldFNoYWxsb3coImNhdGVnb3J5IildO3JldHVybiBlJiYoZS5wYXJlbnRNb2RlbD10LnBhcmVudE1vZGVsLHQucGFyZW50TW9kZWw9ZSksdH0pO3ZhciBpPWwuZ2V0TW9kZWwoImVkZ2VMYWJlbCIpLG49bmV3IElsKHtsYWJlbDppLm9wdGlvbn0saS5wYXJlbnRNb2RlbCxzKSxvPWwuZ2V0TW9kZWwoImVtcGhhc2lzLmVkZ2VMYWJlbCIpLGE9bmV3IElsKHtlbXBoYXNpczp7bGFiZWw6by5vcHRpb259fSxvLnBhcmVudE1vZGVsLHMpO2Z1bmN0aW9uIHIodCl7cmV0dXJuKHQ9dGhpcy5wYXJzZVBhdGgodCkpJiYibGFiZWwiPT09dFswXT9uOnQmJiJlbXBoYXNpcyI9PT10WzBdJiYibGFiZWwiPT09dFsxXT9hOnRoaXMucGFyZW50TW9kZWx9ZS53cmFwTWV0aG9kKCJnZXRJdGVtTW9kZWwiLGZ1bmN0aW9uKHQpe3JldHVybiB0LmN1c3RvbWl6ZUdldFBhcmVudChyKSx0fSl9KS5kYXRhfSxnZXRHcmFwaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldERhdGEoKS5ncmFwaH0sZ2V0RWRnZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRHcmFwaCgpLmVkZ2VEYXRhfSxnZXRDYXRlZ29yaWVzRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXRlZ29yaWVzRGF0YX0sZm9ybWF0VG9vbHRpcDpmdW5jdGlvbih0LGUsaSl7aWYoImVkZ2UiIT09aSlyZXR1cm4gWV8uc3VwZXJBcHBseSh0aGlzLCJmb3JtYXRUb29sdGlwIixhcmd1bWVudHMpO3ZhciBuPXRoaXMuZ2V0RGF0YSgpLG89dGhpcy5nZXREYXRhUGFyYW1zKHQsaSksYT1uLmdyYXBoLmdldEVkZ2VCeUluZGV4KHQpLHI9bi5nZXROYW1lKGEubm9kZTEuZGF0YUluZGV4KSxzPW4uZ2V0TmFtZShhLm5vZGUyLmRhdGFJbmRleCksbD1bXTtyZXR1cm4gbnVsbCE9ciYmbC5wdXNoKHIpLG51bGwhPXMmJmwucHVzaChzKSxsPWV1KGwuam9pbigiID4gIikpLG8udmFsdWUmJihsKz0iIDogIitldShvLnZhbHVlKSksbH0sX3VwZGF0ZUNhdGVnb3JpZXNEYXRhOmZ1bmN0aW9uKCl7dmFyIHQ9Tih0aGlzLm9wdGlvbi5jYXRlZ29yaWVzfHxbXSxmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9dC52YWx1ZT90Okwoe3ZhbHVlOjB9LHQpfSksZT1uZXcgV2YoWyJ2YWx1ZSJdLHRoaXMpO2UuaW5pdERhdGEodCksdGhpcy5fY2F0ZWdvcmllc0RhdGE9ZSx0aGlzLl9jYXRlZ29yaWVzTW9kZWxzPWUubWFwQXJyYXkoZnVuY3Rpb24odCl7cmV0dXJuIGUuZ2V0SXRlbU1vZGVsKHQsITApfSl9LHNldFpvb206ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24uem9vbT10fSxzZXRDZW50ZXI6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24uY2VudGVyPXR9LGlzQW5pbWF0aW9uRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiBZXy5zdXBlckNhbGwodGhpcywiaXNBbmltYXRpb25FbmFibGVkIikmJiEoImZvcmNlIj09PXRoaXMuZ2V0KCJsYXlvdXQiKSYmdGhpcy5nZXQoImZvcmNlLmxheW91dEFuaW1hdGlvbiIpKX0sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNvb3JkaW5hdGVTeXN0ZW06InZpZXciLGxlZ2VuZEhvdmVyTGluazohMCxob3ZlckFuaW1hdGlvbjohMCxsYXlvdXQ6bnVsbCxmb2N1c05vZGVBZGphY2VuY3k6ITEsY2lyY3VsYXI6e3JvdGF0ZUxhYmVsOiExfSxmb3JjZTp7aW5pdExheW91dDpudWxsLHJlcHVsc2lvbjpbMCw1MF0sZ3Jhdml0eTouMSxmcmljdGlvbjouNixlZGdlTGVuZ3RoOjMwLGxheW91dEFuaW1hdGlvbjohMH0sbGVmdDoiY2VudGVyIix0b3A6ImNlbnRlciIsc3ltYm9sOiJjaXJjbGUiLHN5bWJvbFNpemU6MTAsZWRnZVN5bWJvbDpbIm5vbmUiLCJub25lIl0sZWRnZVN5bWJvbFNpemU6MTAsZWRnZUxhYmVsOntwb3NpdGlvbjoibWlkZGxlIn0sZHJhZ2dhYmxlOiExLHJvYW06ITEsY2VudGVyOm51bGwsem9vbToxLG5vZGVTY2FsZVJhdGlvOi42LGxhYmVsOntzaG93OiExLGZvcm1hdHRlcjoie2J9In0saXRlbVN0eWxlOnt9LGxpbmVTdHlsZTp7Y29sb3I6IiNhYWEiLHdpZHRoOjEsY3VydmVuZXNzOjAsb3BhY2l0eTouNX0sZW1waGFzaXM6e2xhYmVsOntzaG93OiEwfX19fSksal89b3MucHJvdG90eXBlLHFfPWxzLnByb3RvdHlwZTtmdW5jdGlvbiBLXyh0KXtyZXR1cm4gaXNOYU4oK3QuY3B4MSl8fGlzTmFOKCt0LmNweTEpfXZhciAkXz1Jcyh7dHlwZToiZWMtbGluZSIsc3R5bGU6e3N0cm9rZToiIzAwMCIsZmlsbDpudWxsfSxzaGFwZTp7eDE6MCx5MTowLHgyOjAseTI6MCxwZXJjZW50OjEsY3B4MTpudWxsLGNweTE6bnVsbH0sYnVpbGRQYXRoOmZ1bmN0aW9uKHQsZSl7dGhpc1tLXyhlKT8iX2J1aWxkUGF0aExpbmUiOiJfYnVpbGRQYXRoQ3VydmUiXSh0LGUpfSxfYnVpbGRQYXRoTGluZTpqXy5idWlsZFBhdGgsX2J1aWxkUGF0aEN1cnZlOnFfLmJ1aWxkUGF0aCxwb2ludEF0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzW0tfKHRoaXMuc2hhcGUpPyJfcG9pbnRBdExpbmUiOiJfcG9pbnRBdEN1cnZlIl0odCl9LF9wb2ludEF0TGluZTpqXy5wb2ludEF0LF9wb2ludEF0Q3VydmU6cV8ucG9pbnRBdCx0YW5nZW50QXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zaGFwZSxpPUtfKGUpP1tlLngyLWUueDEsZS55Mi1lLnkxXTp0aGlzLl90YW5nZW50QXRDdXJ2ZSh0KTtyZXR1cm4gbXQoaSxpKX0sX3RhbmdlbnRBdEN1cnZlOnFfLnRhbmdlbnRBdH0pLEpfPVsiZnJvbVN5bWJvbCIsInRvU3ltYm9sIl07ZnVuY3Rpb24gUV8odCl7cmV0dXJuIl8iK3QrIlR5cGUifWZ1bmN0aW9uIHR3KHQsZSxpKXt2YXIgbj1lLmdldEl0ZW1WaXN1YWwoaSwiY29sb3IiKSxvPWUuZ2V0SXRlbVZpc3VhbChpLHQpLGE9ZS5nZXRJdGVtVmlzdWFsKGksdCsiU2l6ZSIpO2lmKG8mJiJub25lIiE9PW8pe2soYSl8fChhPVthLGFdKTt2YXIgcj1tZyhvLC1hWzBdLzIsLWFbMV0vMixhWzBdLGFbMV0sbik7cmV0dXJuIHIubmFtZT10LHJ9fWZ1bmN0aW9uIGV3KHQsZSl7dC54MT1lWzBdWzBdLHQueTE9ZVswXVsxXSx0LngyPWVbMV1bMF0sdC55Mj1lWzFdWzFdLHQucGVyY2VudD0xO3ZhciBpPWVbMl07aT8odC5jcHgxPWlbMF0sdC5jcHkxPWlbMV0pOih0LmNweDE9TmFOLHQuY3B5MT1OYU4pfWZ1bmN0aW9uIGl3KHQsZSxpKXtJaS5jYWxsKHRoaXMpLHRoaXMuX2NyZWF0ZUxpbmUodCxlLGkpfXZhciBudz1pdy5wcm90b3R5cGU7ZnVuY3Rpb24gb3codCl7dGhpcy5fY3Rvcj10fHxpdyx0aGlzLmdyb3VwPW5ldyBJaX1udy5iZWZvcmVVcGRhdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNoaWxkT2ZOYW1lKCJmcm9tU3ltYm9sIiksZT10aGlzLmNoaWxkT2ZOYW1lKCJ0b1N5bWJvbCIpLGk9dGhpcy5jaGlsZE9mTmFtZSgibGFiZWwiKTtpZih0fHxlfHwhaS5pZ25vcmUpe2Zvcih2YXIgbj0xLG89dGhpcy5wYXJlbnQ7bzspby5zY2FsZSYmKG4vPW8uc2NhbGVbMF0pLG89by5wYXJlbnQ7dmFyIGE9dGhpcy5jaGlsZE9mTmFtZSgibGluZSIpO2lmKHRoaXMuX19kaXJ0eXx8YS5fX2RpcnR5KXt2YXIgcj1hLnNoYXBlLnBlcmNlbnQscz1hLnBvaW50QXQoMCksbD1hLnBvaW50QXQociksdT1odChbXSxsLHMpO2lmKG10KHUsdSksdCl7dC5hdHRyKCJwb3NpdGlvbiIscyk7dmFyIGg9YS50YW5nZW50QXQoMCk7dC5hdHRyKCJyb3RhdGlvbiIsTWF0aC5QSS8yLU1hdGguYXRhbjIoaFsxXSxoWzBdKSksdC5hdHRyKCJzY2FsZSIsW24qcixuKnJdKX1pZihlKXtlLmF0dHIoInBvc2l0aW9uIixsKTtoPWEudGFuZ2VudEF0KDEpO2UuYXR0cigicm90YXRpb24iLC1NYXRoLlBJLzItTWF0aC5hdGFuMihoWzFdLGhbMF0pKSxlLmF0dHIoInNjYWxlIixbbipyLG4qcl0pfWlmKCFpLmlnbm9yZSl7dmFyIGMsZCxmO2kuYXR0cigicG9zaXRpb24iLGwpO3ZhciBwPTUqbjtpZigiZW5kIj09PWkuX19wb3NpdGlvbiljPVt1WzBdKnArbFswXSx1WzFdKnArbFsxXV0sZD0uODx1WzBdPyJsZWZ0Ijp1WzBdPC0uOD8icmlnaHQiOiJjZW50ZXIiLGY9Ljg8dVsxXT8idG9wIjp1WzFdPC0uOD8iYm90dG9tIjoibWlkZGxlIjtlbHNlIGlmKCJtaWRkbGUiPT09aS5fX3Bvc2l0aW9uKXt2YXIgZz1yLzIsbT1bKGg9YS50YW5nZW50QXQoZykpWzFdLC1oWzBdXSx2PWEucG9pbnRBdChnKTswPG1bMV0mJihtWzBdPS1tWzBdLG1bMV09LW1bMV0pLGM9W3ZbMF0rbVswXSpwLHZbMV0rbVsxXSpwXSxkPSJjZW50ZXIiLGY9ImJvdHRvbSI7dmFyIHk9LU1hdGguYXRhbjIoaFsxXSxoWzBdKTtsWzBdPHNbMF0mJih5PU1hdGguUEkreSksaS5hdHRyKCJyb3RhdGlvbiIseSl9ZWxzZSBjPVstdVswXSpwK3NbMF0sLXVbMV0qcCtzWzFdXSxkPS44PHVbMF0/InJpZ2h0Ijp1WzBdPC0uOD8ibGVmdCI6ImNlbnRlciIsZj0uODx1WzFdPyJib3R0b20iOnVbMV08LS44PyJ0b3AiOiJtaWRkbGUiO2kuYXR0cih7c3R5bGU6e3RleHRWZXJ0aWNhbEFsaWduOmkuX192ZXJ0aWNhbEFsaWdufHxmLHRleHRBbGlnbjppLl9fdGV4dEFsaWdufHxkfSxwb3NpdGlvbjpjLHNjYWxlOltuLG5dfSl9fX19LG53Ll9jcmVhdGVMaW5lPWZ1bmN0aW9uKGksbix0KXt2YXIgZT1pLmhvc3RNb2RlbCxvPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyAkXyh7bmFtZToibGluZSIsc3ViUGl4ZWxPcHRpbWl6ZTohMH0pO3JldHVybiBldyhlLnNoYXBlLHQpLGV9KGkuZ2V0SXRlbUxheW91dChuKSk7by5zaGFwZS5wZXJjZW50PTAsbGwobyx7c2hhcGU6e3BlcmNlbnQ6MX19LGUsbiksdGhpcy5hZGQobyk7dmFyIGE9bmV3IEZyKHtuYW1lOiJsYWJlbCIsbGluZUxhYmVsT3JpZ2luYWxPcGFjaXR5OjF9KTt0aGlzLmFkZChhKSxFKEpfLGZ1bmN0aW9uKHQpe3ZhciBlPXR3KHQsaSxuKTt0aGlzLmFkZChlKSx0aGlzW1FfKHQpXT1pLmdldEl0ZW1WaXN1YWwobix0KX0sdGhpcyksdGhpcy5fdXBkYXRlQ29tbW9uU3RsKGksbix0KX0sbncudXBkYXRlRGF0YT1mdW5jdGlvbihvLGEsdCl7dmFyIGU9by5ob3N0TW9kZWwsaT10aGlzLmNoaWxkT2ZOYW1lKCJsaW5lIiksbj1vLmdldEl0ZW1MYXlvdXQoYSkscj17c2hhcGU6e319O2V3KHIuc2hhcGUsbiksc2woaSxyLGUsYSksRShKXyxmdW5jdGlvbih0KXt2YXIgZT1vLmdldEl0ZW1WaXN1YWwoYSx0KSxpPVFfKHQpO2lmKHRoaXNbaV0hPT1lKXt0aGlzLnJlbW92ZSh0aGlzLmNoaWxkT2ZOYW1lKHQpKTt2YXIgbj10dyh0LG8sYSk7dGhpcy5hZGQobil9dGhpc1tpXT1lfSx0aGlzKSx0aGlzLl91cGRhdGVDb21tb25TdGwobyxhLHQpfSxudy5fdXBkYXRlQ29tbW9uU3RsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10Lmhvc3RNb2RlbCxvPXRoaXMuY2hpbGRPZk5hbWUoImxpbmUiKSxhPWkmJmkubGluZVN0eWxlLHI9aSYmaS5ob3ZlckxpbmVTdHlsZSxzPWkmJmkubGFiZWxNb2RlbCxsPWkmJmkuaG92ZXJMYWJlbE1vZGVsO2lmKCFpfHx0Lmhhc0l0ZW1PcHRpb24pe3ZhciB1PXQuZ2V0SXRlbU1vZGVsKGUpO2E9dS5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCkscj11LmdldE1vZGVsKCJlbXBoYXNpcy5saW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSxzPXUuZ2V0TW9kZWwoImxhYmVsIiksbD11LmdldE1vZGVsKCJlbXBoYXNpcy5sYWJlbCIpfXZhciBoPXQuZ2V0SXRlbVZpc3VhbChlLCJjb2xvciIpLGM9Wih0LmdldEl0ZW1WaXN1YWwoZSwib3BhY2l0eSIpLGEub3BhY2l0eSwxKTtvLnVzZVN0eWxlKEMoe3N0cm9rZU5vU2NhbGU6ITAsZmlsbDoibm9uZSIsc3Ryb2tlOmgsb3BhY2l0eTpjfSxhKSksby5ob3ZlclN0eWxlPXIsRShKXyxmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNoaWxkT2ZOYW1lKHQpO2UmJihlLnNldENvbG9yKGgpLGUuc2V0U3R5bGUoe29wYWNpdHk6Y30pKX0sdGhpcyk7dmFyIGQsZixwPXMuZ2V0U2hhbGxvdygic2hvdyIpLGc9bC5nZXRTaGFsbG93KCJzaG93IiksbT10aGlzLmNoaWxkT2ZOYW1lKCJsYWJlbCIpO2lmKChwfHxnKSYmKGQ9aHx8IiMwMDAiLG51bGw9PShmPW4uZ2V0Rm9ybWF0dGVkTGFiZWwoZSwibm9ybWFsIix0LmRhdGFUeXBlKSkpKXt2YXIgdj1uLmdldFJhd1ZhbHVlKGUpO2Y9bnVsbD09dj90LmdldE5hbWUoZSk6aXNGaW5pdGUodik/Tmwodik6dn12YXIgeT1wP2Y6bnVsbCx4PWc/SChuLmdldEZvcm1hdHRlZExhYmVsKGUsImVtcGhhc2lzIix0LmRhdGFUeXBlKSxmKTpudWxsLF89bS5zdHlsZTtudWxsPT15JiZudWxsPT14fHwoUXMobS5zdHlsZSxzLHt0ZXh0Onl9LHthdXRvQ29sb3I6ZH0pLG0uX190ZXh0QWxpZ249Xy50ZXh0QWxpZ24sbS5fX3ZlcnRpY2FsQWxpZ249Xy50ZXh0VmVydGljYWxBbGlnbixtLl9fcG9zaXRpb249cy5nZXQoInBvc2l0aW9uIil8fCJtaWRkbGUiKSxtLmhvdmVyU3R5bGU9bnVsbCE9eD97dGV4dDp4LHRleHRGaWxsOmwuZ2V0VGV4dENvbG9yKCEwKSxmb250U3R5bGU6bC5nZXRTaGFsbG93KCJmb250U3R5bGUiKSxmb250V2VpZ2h0OmwuZ2V0U2hhbGxvdygiZm9udFdlaWdodCIpLGZvbnRTaXplOmwuZ2V0U2hhbGxvdygiZm9udFNpemUiKSxmb250RmFtaWx5OmwuZ2V0U2hhbGxvdygiZm9udEZhbWlseSIpfTp7dGV4dDpudWxsfSxtLmlnbm9yZT0hcCYmIWcsWXModGhpcyl9LG53LmhpZ2hsaWdodD1mdW5jdGlvbigpe3RoaXMudHJpZ2dlcigiZW1waGFzaXMiKX0sbncuZG93bnBsYXk9ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoIm5vcm1hbCIpfSxudy51cGRhdGVMYXlvdXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnNldExpbmVQb2ludHModC5nZXRJdGVtTGF5b3V0KGUpKX0sbncuc2V0TGluZVBvaW50cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNoaWxkT2ZOYW1lKCJsaW5lIik7ZXcoZS5zaGFwZSx0KSxlLmRpcnR5KCl9LHcoaXcsSWkpO3ZhciBhdz1vdy5wcm90b3R5cGU7ZnVuY3Rpb24gcncodCl7dmFyIGU9dC5ob3N0TW9kZWw7cmV0dXJue2xpbmVTdHlsZTplLmdldE1vZGVsKCJsaW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSxob3ZlckxpbmVTdHlsZTplLmdldE1vZGVsKCJlbXBoYXNpcy5saW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSxsYWJlbE1vZGVsOmUuZ2V0TW9kZWwoImxhYmVsIiksaG92ZXJMYWJlbE1vZGVsOmUuZ2V0TW9kZWwoImVtcGhhc2lzLmxhYmVsIil9fWZ1bmN0aW9uIHN3KHQpe3JldHVybiBpc05hTih0WzBdKXx8aXNOYU4odFsxXSl9ZnVuY3Rpb24gbHcodCl7cmV0dXJuIXN3KHRbMF0pJiYhc3codFsxXSl9ZnVuY3Rpb24gdXcodCl7dmFyIGU9dC5jb29yZGluYXRlU3lzdGVtO2lmKCJ2aWV3IiE9PWUudHlwZSlyZXR1cm4gMTt2YXIgaT10Lm9wdGlvbi5ub2RlU2NhbGVSYXRpbyxuPWUuc2NhbGUsbz1uJiZuWzBdfHwxO3JldHVybigoZS5nZXRab29tKCktMSkqaSsxKS9vfWZ1bmN0aW9uIGh3KHQpe3ZhciBlPXQuZ2V0VmlzdWFsKCJzeW1ib2xTaXplIik7cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheSYmKGU9KGVbMF0rZVsxXSkvMiksK2V9YXcuaXNQZXJzaXN0ZW50PWZ1bmN0aW9uKCl7cmV0dXJuITB9LGF3LnVwZGF0ZURhdGE9ZnVuY3Rpb24oaSl7dmFyIG49dGhpcyxlPW4uZ3JvdXAsbz1uLl9saW5lRGF0YTtuLl9saW5lRGF0YT1pLG98fGUucmVtb3ZlQWxsKCk7dmFyIGE9cncoaSk7aS5kaWZmKG8pLmFkZChmdW5jdGlvbih0KXshZnVuY3Rpb24odCxlLGksbil7aWYoIWx3KGUuZ2V0SXRlbUxheW91dChpKSkpcmV0dXJuO3ZhciBvPW5ldyB0Ll9jdG9yKGUsaSxuKTtlLnNldEl0ZW1HcmFwaGljRWwoaSxvKSx0Lmdyb3VwLmFkZChvKX0obixpLHQsYSl9KS51cGRhdGUoZnVuY3Rpb24odCxlKXshZnVuY3Rpb24odCxlLGksbixvLGEpe3ZhciByPWUuZ2V0SXRlbUdyYXBoaWNFbChuKTtpZighbHcoaS5nZXRJdGVtTGF5b3V0KG8pKSlyZXR1cm4gdC5ncm91cC5yZW1vdmUocik7cj9yLnVwZGF0ZURhdGEoaSxvLGEpOnI9bmV3IHQuX2N0b3IoaSxvLGEpO2kuc2V0SXRlbUdyYXBoaWNFbChvLHIpLHQuZ3JvdXAuYWRkKHIpfShuLG8saSxlLHQsYSl9KS5yZW1vdmUoZnVuY3Rpb24odCl7ZS5yZW1vdmUoby5nZXRJdGVtR3JhcGhpY0VsKHQpKX0pLmV4ZWN1dGUoKX0sYXcudXBkYXRlTGF5b3V0PWZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5fbGluZURhdGE7aSYmaS5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbih0LGUpe3QudXBkYXRlTGF5b3V0KGksZSl9LHRoaXMpfSxhdy5pbmNyZW1lbnRhbFByZXBhcmVVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fc2VyaWVzU2NvcGU9cncodCksdGhpcy5fbGluZURhdGE9bnVsbCx0aGlzLmdyb3VwLnJlbW92ZUFsbCgpfSxhdy5pbmNyZW1lbnRhbFVwZGF0ZT1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkodCl7dC5pc0dyb3VwfHwodC5pbmNyZW1lbnRhbD10LnVzZUhvdmVyTGF5ZXI9ITApfWZvcih2YXIgbj10LnN0YXJ0O248dC5lbmQ7bisrKXtpZihsdyhlLmdldEl0ZW1MYXlvdXQobikpKXt2YXIgbz1uZXcgdGhpcy5fY3RvcihlLG4sdGhpcy5fc2VyaWVzU2NvcGUpO28udHJhdmVyc2UoaSksdGhpcy5ncm91cC5hZGQobyksZS5zZXRJdGVtR3JhcGhpY0VsKG4sbyl9fX0sYXcucmVtb3ZlPWZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJJbmNyZW1lbnRhbCgpLHRoaXMuX2luY3JlbWVudGFsPW51bGwsdGhpcy5ncm91cC5yZW1vdmVBbGwoKX0sYXcuX2NsZWFySW5jcmVtZW50YWw9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9pbmNyZW1lbnRhbDt0JiZ0LmNsZWFyRGlzcGxheWJsZXMoKX07dmFyIGN3PVtdLGR3PVtdLGZ3PVtdLHB3PVRhLGd3PV90LG13PU1hdGguYWJzO2Z1bmN0aW9uIHZ3KHQsZSxpKXtmb3IodmFyIG4sbz10WzBdLGE9dFsxXSxyPXRbMl0scz0xLzAsbD1pKmksdT0uMSxoPS4xO2g8PS45O2grPS4xKXtjd1swXT1wdyhvWzBdLGFbMF0sclswXSxoKSxjd1sxXT1wdyhvWzFdLGFbMV0sclsxXSxoKSwoZj1tdyhndyhjdyxlKS1sKSk8cyYmKHM9ZixuPWgpfWZvcih2YXIgYz0wO2M8MzI7YysrKXt2YXIgZD1uK3U7ZHdbMF09cHcob1swXSxhWzBdLHJbMF0sbiksZHdbMV09cHcob1sxXSxhWzFdLHJbMV0sbiksZndbMF09cHcob1swXSxhWzBdLHJbMF0sZCksZndbMV09cHcob1sxXSxhWzFdLHJbMV0sZCk7dmFyIGY9Z3coZHcsZSktbDtpZihtdyhmKTwuMDEpYnJlYWs7dmFyIHA9Z3coZncsZSktbDt1Lz0yLGY8MD8wPD1wP24rPXU6bi09dTowPD1wP24tPXU6bis9dX1yZXR1cm4gbn1mdW5jdGlvbiB5dyh0LGwpe3ZhciB1PVtdLGg9Q2EsYz1bW10sW10sW11dLGQ9W1tdLFtdXSxmPVtdO2wvPTIsdC5lYWNoRWRnZShmdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0TGF5b3V0KCksbj10LmdldFZpc3VhbCgiZnJvbVN5bWJvbCIpLG89dC5nZXRWaXN1YWwoInRvU3ltYm9sIik7aS5fX29yaWdpbmFsfHwoaS5fX29yaWdpbmFsPVtydChpWzBdKSxydChpWzFdKV0saVsyXSYmaS5fX29yaWdpbmFsLnB1c2gocnQoaVsyXSkpKTt2YXIgYT1pLl9fb3JpZ2luYWw7aWYobnVsbCE9aVsyXSl7aWYoYXQoY1swXSxhWzBdKSxhdChjWzFdLGFbMl0pLGF0KGNbMl0sYVsxXSksbiYmIm5vbmUiIT09bil7dmFyIHI9aHcodC5ub2RlMSkscz12dyhjLGFbMF0scipsKTtoKGNbMF1bMF0sY1sxXVswXSxjWzJdWzBdLHMsdSksY1swXVswXT11WzNdLGNbMV1bMF09dVs0XSxoKGNbMF1bMV0sY1sxXVsxXSxjWzJdWzFdLHMsdSksY1swXVsxXT11WzNdLGNbMV1bMV09dVs0XX1pZihvJiYibm9uZSIhPT1vKXtyPWh3KHQubm9kZTIpLHM9dncoYyxhWzFdLHIqbCk7aChjWzBdWzBdLGNbMV1bMF0sY1syXVswXSxzLHUpLGNbMV1bMF09dVsxXSxjWzJdWzBdPXVbMl0saChjWzBdWzFdLGNbMV1bMV0sY1syXVsxXSxzLHUpLGNbMV1bMV09dVsxXSxjWzJdWzFdPXVbMl19YXQoaVswXSxjWzBdKSxhdChpWzFdLGNbMl0pLGF0KGlbMl0sY1sxXSl9ZWxzZXtpZihhdChkWzBdLGFbMF0pLGF0KGRbMV0sYVsxXSksaHQoZixkWzFdLGRbMF0pLG10KGYsZiksbiYmIm5vbmUiIT09bil7cj1odyh0Lm5vZGUxKTt1dChkWzBdLGRbMF0sZixyKmwpfWlmKG8mJiJub25lIiE9PW8pe3I9aHcodC5ub2RlMik7dXQoZFsxXSxkWzFdLGYsLXIqbCl9YXQoaVswXSxkWzBdKSxhdChpWzFdLGRbMV0pfX0pfXZhciB4dz0iX19mb2N1c05vZGVBZGphY2VuY3kiLF93PSJfX3VuZm9jdXNOb2RlQWRqYWNlbmN5Iix3dz1bIml0ZW1TdHlsZSIsIm9wYWNpdHkiXSxidz1bImxpbmVTdHlsZSIsIm9wYWNpdHkiXTtmdW5jdGlvbiBTdyh0LGUpe3ZhciBpPXQuZ2V0VmlzdWFsKCJvcGFjaXR5Iik7cmV0dXJuIG51bGwhPWk/aTp0LmdldE1vZGVsKCkuZ2V0KGUpfWZ1bmN0aW9uIE13KHQsZSxpKXt2YXIgbj10LmdldEdyYXBoaWNFbCgpLG89U3codCxlKTtudWxsIT1pJiYobnVsbD09byYmKG89MSksbyo9aSksbi5kb3ducGxheSYmbi5kb3ducGxheSgpLG4udHJhdmVyc2UoZnVuY3Rpb24odCl7aWYoIXQuaXNHcm91cCl7dmFyIGU9dC5saW5lTGFiZWxPcmlnaW5hbE9wYWNpdHk7bnVsbCE9ZSYmbnVsbD09aXx8KGU9byksdC5zZXRTdHlsZSgib3BhY2l0eSIsZSl9fSl9ZnVuY3Rpb24gSXcodCxlKXt2YXIgaT1Tdyh0LGUpLG49dC5nZXRHcmFwaGljRWwoKTtuLnRyYXZlcnNlKGZ1bmN0aW9uKHQpe3QuaXNHcm91cHx8dC5zZXRTdHlsZSgib3BhY2l0eSIsaSl9KSxuLmhpZ2hsaWdodCYmbi5oaWdobGlnaHQoKX1NZih7dHlwZToiZ3JhcGgiLGluaXQ6ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgJGcsbj1uZXcgb3csbz10aGlzLmdyb3VwO3RoaXMuX2NvbnRyb2xsZXI9bmV3IEx5KGUuZ2V0WnIoKSksdGhpcy5fY29udHJvbGxlckhvc3Q9e3RhcmdldDpvfSxvLmFkZChpLmdyb3VwKSxvLmFkZChuLmdyb3VwKSx0aGlzLl9zeW1ib2xEcmF3PWksdGhpcy5fbGluZURyYXc9bix0aGlzLl9maXJzdFJlbmRlcj0hMH0scmVuZGVyOmZ1bmN0aW9uKG8sdCxhKXt2YXIgcj10aGlzLGU9by5jb29yZGluYXRlU3lzdGVtO3RoaXMuX21vZGVsPW87dmFyIGk9dGhpcy5fc3ltYm9sRHJhdyxuPXRoaXMuX2xpbmVEcmF3LHM9dGhpcy5ncm91cDtpZigidmlldyI9PT1lLnR5cGUpe3ZhciBsPXtwb3NpdGlvbjplLnBvc2l0aW9uLHNjYWxlOmUuc2NhbGV9O3RoaXMuX2ZpcnN0UmVuZGVyP3MuYXR0cihsKTpzbChzLGwsbyl9eXcoby5nZXRHcmFwaCgpLHV3KG8pKTt2YXIgdT1vLmdldERhdGEoKTtpLnVwZGF0ZURhdGEodSk7dmFyIGg9by5nZXRFZGdlRGF0YSgpO24udXBkYXRlRGF0YShoKSx0aGlzLl91cGRhdGVOb2RlQW5kTGlua1NjYWxlKCksdGhpcy5fdXBkYXRlQ29udHJvbGxlcihvLHQsYSksY2xlYXJUaW1lb3V0KHRoaXMuX2xheW91dFRpbWVvdXQpO3ZhciBjPW8uZm9yY2VMYXlvdXQsZD1vLmdldCgiZm9yY2UubGF5b3V0QW5pbWF0aW9uIik7YyYmdGhpcy5fc3RhcnRGb3JjZUxheW91dEl0ZXJhdGlvbihjLGQpLHUuZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCxlKXt2YXIgaT11LmdldEl0ZW1Nb2RlbChlKTt0Lm9mZigiZHJhZyIpLm9mZigiZHJhZ2VuZCIpO3ZhciBuPWkuZ2V0KCJkcmFnZ2FibGUiKTtuJiZ0Lm9uKCJkcmFnIixmdW5jdGlvbigpe2MmJihjLndhcm1VcCgpLHRoaXMuX2xheW91dGluZ3x8dGhpcy5fc3RhcnRGb3JjZUxheW91dEl0ZXJhdGlvbihjLGQpLGMuc2V0Rml4ZWQoZSksdS5zZXRJdGVtTGF5b3V0KGUsdC5wb3NpdGlvbikpfSx0aGlzKS5vbigiZHJhZ2VuZCIsZnVuY3Rpb24oKXtjJiZjLnNldFVuZml4ZWQoZSl9LHRoaXMpLHQuc2V0RHJhZ2dhYmxlKG4mJmMpLHRbeHddJiZ0Lm9mZigibW91c2VvdmVyIix0W3h3XSksdFtfd10mJnQub2ZmKCJtb3VzZW91dCIsdFtfd10pLGkuZ2V0KCJmb2N1c05vZGVBZGphY2VuY3kiKSYmKHQub24oIm1vdXNlb3ZlciIsdFt4d109ZnVuY3Rpb24oKXtyLl9jbGVhclRpbWVyKCksYS5kaXNwYXRjaEFjdGlvbih7dHlwZToiZm9jdXNOb2RlQWRqYWNlbmN5IixzZXJpZXNJZDpvLmlkLGRhdGFJbmRleDp0LmRhdGFJbmRleH0pfSksdC5vbigibW91c2VvdXQiLHRbX3ddPWZ1bmN0aW9uKCl7ci5fZGlzcGF0Y2hVbmZvY3VzKGEpfSkpfSx0aGlzKSx1LmdyYXBoLmVhY2hFZGdlKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0R3JhcGhpY0VsKCk7ZVt4d10mJmUub2ZmKCJtb3VzZW92ZXIiLGVbeHddKSxlW193XSYmZS5vZmYoIm1vdXNlb3V0IixlW193XSksdC5nZXRNb2RlbCgpLmdldCgiZm9jdXNOb2RlQWRqYWNlbmN5IikmJihlLm9uKCJtb3VzZW92ZXIiLGVbeHddPWZ1bmN0aW9uKCl7ci5fY2xlYXJUaW1lcigpLGEuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImZvY3VzTm9kZUFkamFjZW5jeSIsc2VyaWVzSWQ6by5pZCxlZGdlRGF0YUluZGV4OnQuZGF0YUluZGV4fSl9KSxlLm9uKCJtb3VzZW91dCIsZVtfd109ZnVuY3Rpb24oKXtyLl9kaXNwYXRjaFVuZm9jdXMoYSl9KSl9KTt2YXIgZj0iY2lyY3VsYXIiPT09by5nZXQoImxheW91dCIpJiZvLmdldCgiY2lyY3VsYXIucm90YXRlTGFiZWwiKSxwPXUuZ2V0TGF5b3V0KCJjeCIpLGc9dS5nZXRMYXlvdXQoImN5Iik7dS5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbih0LGUpe3ZhciBpPXUuZ2V0SXRlbU1vZGVsKGUpLmdldCgibGFiZWwucm90YXRlIil8fDAsbj10LmdldFN5bWJvbFBhdGgoKTtpZihmKXt2YXIgbz11LmdldEl0ZW1MYXlvdXQoZSksYT1NYXRoLmF0YW4yKG9bMV0tZyxvWzBdLXApO2E8MCYmKGE9MipNYXRoLlBJK2EpO3ZhciByPW9bMF08cDtyJiYoYS09TWF0aC5QSSk7dmFyIHM9cj8ibGVmdCI6InJpZ2h0IjtKcyhuLHt0ZXh0Um90YXRpb246LWEsdGV4dFBvc2l0aW9uOnMsdGV4dE9yaWdpbjoiY2VudGVyIn0se3RleHRQb3NpdGlvbjpzfSl9ZWxzZSBKcyhuLHt0ZXh0Um90YXRpb246aSo9TWF0aC5QSS8xODB9KX0pLHRoaXMuX2ZpcnN0UmVuZGVyPSExfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci5kaXNwb3NlKCksdGhpcy5fY29udHJvbGxlckhvc3Q9e30sdGhpcy5fY2xlYXJUaW1lcigpfSxfZGlzcGF0Y2hVbmZvY3VzOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpczt0aGlzLl9jbGVhclRpbWVyKCksdGhpcy5fdW5mb2N1c0RlbGF5VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2kuX3VuZm9jdXNEZWxheVRpbWVyPW51bGwsdC5kaXNwYXRjaEFjdGlvbih7dHlwZToidW5mb2N1c05vZGVBZGphY2VuY3kiLHNlcmllc0lkOmkuX21vZGVsLmlkfSl9LDUwMCl9LF9jbGVhclRpbWVyOmZ1bmN0aW9uKCl7dGhpcy5fdW5mb2N1c0RlbGF5VGltZXImJihjbGVhclRpbWVvdXQodGhpcy5fdW5mb2N1c0RlbGF5VGltZXIpLHRoaXMuX3VuZm9jdXNEZWxheVRpbWVyPW51bGwpfSxmb2N1c05vZGVBZGphY2VuY3k6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dGhpcy5fbW9kZWwuZ2V0RGF0YSgpLmdyYXBoLGE9bi5kYXRhSW5kZXgscj1uLmVkZ2VEYXRhSW5kZXgscz1vLmdldE5vZGVCeUluZGV4KGEpLGw9by5nZXRFZGdlQnlJbmRleChyKTsoc3x8bCkmJihvLmVhY2hOb2RlKGZ1bmN0aW9uKHQpe013KHQsd3csLjEpfSksby5lYWNoRWRnZShmdW5jdGlvbih0KXtNdyh0LGJ3LC4xKX0pLHMmJihJdyhzLHd3KSxFKHMuZWRnZXMsZnVuY3Rpb24odCl7dC5kYXRhSW5kZXg8MHx8KEl3KHQsYncpLEl3KHQubm9kZTEsd3cpLEl3KHQubm9kZTIsd3cpKX0pKSxsJiYoSXcobCxidyksSXcobC5ub2RlMSx3dyksSXcobC5ub2RlMix3dykpKX0sdW5mb2N1c05vZGVBZGphY2VuY3k6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dGhpcy5fbW9kZWwuZ2V0RGF0YSgpLmdyYXBoO28uZWFjaE5vZGUoZnVuY3Rpb24odCl7TXcodCx3dyl9KSxvLmVhY2hFZGdlKGZ1bmN0aW9uKHQpe013KHQsYncpfSl9LF9zdGFydEZvcmNlTGF5b3V0SXRlcmF0aW9uOmZ1bmN0aW9uKHQsaSl7dmFyIG49dGhpczshZnVuY3Rpb24gZSgpe3Quc3RlcChmdW5jdGlvbih0KXtuLnVwZGF0ZUxheW91dChuLl9tb2RlbCksKG4uX2xheW91dGluZz0hdCkmJihpP24uX2xheW91dFRpbWVvdXQ9c2V0VGltZW91dChlLDE2KTplKCkpfSl9KCl9LF91cGRhdGVDb250cm9sbGVyOmZ1bmN0aW9uKG8sdCxhKXt2YXIgZT10aGlzLl9jb250cm9sbGVyLGk9dGhpcy5fY29udHJvbGxlckhvc3Qscj10aGlzLmdyb3VwO2Uuc2V0UG9pbnRlckNoZWNrZXIoZnVuY3Rpb24odCxlLGkpe3ZhciBuPXIuZ2V0Qm91bmRpbmdSZWN0KCk7cmV0dXJuIG4uYXBwbHlUcmFuc2Zvcm0oci50cmFuc2Zvcm0pLG4uY29udGFpbihlLGkpJiYhV3kodCxhLG8pfSksInZpZXciPT09by5jb29yZGluYXRlU3lzdGVtLnR5cGU/KGUuZW5hYmxlKG8uZ2V0KCJyb2FtIikpLGkuem9vbUxpbWl0PW8uZ2V0KCJzY2FsZUxpbWl0IiksaS56b29tPW8uY29vcmRpbmF0ZVN5c3RlbS5nZXRab29tKCksZS5vZmYoInBhbiIpLm9mZigiem9vbSIpLm9uKCJwYW4iLGZ1bmN0aW9uKHQpe1Z5KGksdC5keCx0LmR5KSxhLmRpc3BhdGNoQWN0aW9uKHtzZXJpZXNJZDpvLmlkLHR5cGU6ImdyYXBoUm9hbSIsZHg6dC5keCxkeTp0LmR5fSl9KS5vbigiem9vbSIsZnVuY3Rpb24odCl7R3koaSx0LnNjYWxlLHQub3JpZ2luWCx0Lm9yaWdpblkpLGEuZGlzcGF0Y2hBY3Rpb24oe3Nlcmllc0lkOm8uaWQsdHlwZToiZ3JhcGhSb2FtIix6b29tOnQuc2NhbGUsb3JpZ2luWDp0Lm9yaWdpblgsb3JpZ2luWTp0Lm9yaWdpbll9KSx0aGlzLl91cGRhdGVOb2RlQW5kTGlua1NjYWxlKCkseXcoby5nZXRHcmFwaCgpLHV3KG8pKSx0aGlzLl9saW5lRHJhdy51cGRhdGVMYXlvdXQoKX0sdGhpcykpOmUuZGlzYWJsZSgpfSxfdXBkYXRlTm9kZUFuZExpbmtTY2FsZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21vZGVsLGU9dC5nZXREYXRhKCksaT11dyh0KSxuPVtpLGldO2UuZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCxlKXt0LmF0dHIoInNjYWxlIixuKX0pfSx1cGRhdGVMYXlvdXQ6ZnVuY3Rpb24odCl7eXcodC5nZXRHcmFwaCgpLHV3KHQpKSx0aGlzLl9zeW1ib2xEcmF3LnVwZGF0ZUxheW91dCgpLHRoaXMuX2xpbmVEcmF3LnVwZGF0ZUxheW91dCgpfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXt0aGlzLl9zeW1ib2xEcmF3JiZ0aGlzLl9zeW1ib2xEcmF3LnJlbW92ZSgpLHRoaXMuX2xpbmVEcmF3JiZ0aGlzLl9saW5lRHJhdy5yZW1vdmUoKX19KSxnZih7dHlwZToiZm9jdXNOb2RlQWRqYWNlbmN5IixldmVudDoiZm9jdXNOb2RlQWRqYWNlbmN5Iix1cGRhdGU6InNlcmllczpmb2N1c05vZGVBZGphY2VuY3kifSxmdW5jdGlvbigpe30pLGdmKHt0eXBlOiJ1bmZvY3VzTm9kZUFkamFjZW5jeSIsZXZlbnQ6InVuZm9jdXNOb2RlQWRqYWNlbmN5Iix1cGRhdGU6InNlcmllczp1bmZvY3VzTm9kZUFkamFjZW5jeSJ9LGZ1bmN0aW9uKCl7fSk7Z2Yoe3R5cGU6ImdyYXBoUm9hbSIsZXZlbnQ6ImdyYXBoUm9hbSIsdXBkYXRlOiJub25lIn0sZnVuY3Rpb24oaSx0KXt0LmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJzZXJpZXMiLHF1ZXJ5Oml9LGZ1bmN0aW9uKHQpe3ZhciBlPUt5KHQuY29vcmRpbmF0ZVN5c3RlbSxpKTt0LnNldENlbnRlciYmdC5zZXRDZW50ZXIoZS5jZW50ZXIpLHQuc2V0Wm9vbSYmdC5zZXRab29tKGUuem9vbSl9KX0pO2Z1bmN0aW9uIFR3KHQpe3JldHVybiB0IGluc3RhbmNlb2YgQXJyYXl8fCh0PVt0LHRdKSx0fWZ1bmN0aW9uIEF3KHQpe3ZhciBlPXQuY29vcmRpbmF0ZVN5c3RlbTtpZighZXx8InZpZXciPT09ZS50eXBlKXt2YXIgaT10LmdldEdyYXBoKCk7aS5lYWNoTm9kZShmdW5jdGlvbih0KXt2YXIgZT10LmdldE1vZGVsKCk7dC5zZXRMYXlvdXQoWytlLmdldCgieCIpLCtlLmdldCgieSIpXSl9KSxEdyhpKX19ZnVuY3Rpb24gRHcodCl7dC5lYWNoRWRnZShmdW5jdGlvbih0KXt2YXIgZT10LmdldE1vZGVsKCkuZ2V0KCJsaW5lU3R5bGUuY3VydmVuZXNzIil8fDAsaT1ydCh0Lm5vZGUxLmdldExheW91dCgpKSxuPXJ0KHQubm9kZTIuZ2V0TGF5b3V0KCkpLG89W2ksbl07K2UmJm8ucHVzaChbKGlbMF0rblswXSkvMi0oaVsxXS1uWzFdKSplLChpWzFdK25bMV0pLzItKG5bMF0taVswXSkqZV0pLHQuc2V0TGF5b3V0KG8pfSl9dmFyIEN3PU1hdGguUEksTHc9W107ZnVuY3Rpb24ga3codCxlKXt2YXIgaT10LmNvb3JkaW5hdGVTeXN0ZW07aWYoIWl8fCJ2aWV3Ij09PWkudHlwZSl7dmFyIG49aS5nZXRCb3VuZGluZ1JlY3QoKSxvPXQuZ2V0RGF0YSgpLGE9by5ncmFwaCxzPW4ud2lkdGgvMituLngsbD1uLmhlaWdodC8yK24ueSxyPU1hdGgubWluKG4ud2lkdGgsbi5oZWlnaHQpLzIsdT1vLmNvdW50KCk7by5zZXRMYXlvdXQoe2N4OnMsY3k6bH0pLHUmJihQd1tlXSh0LGksYSxvLHIscyxsLHUpLGEuZWFjaEVkZ2UoZnVuY3Rpb24odCl7dmFyIGUsaT10LmdldE1vZGVsKCkuZ2V0KCJsaW5lU3R5bGUuY3VydmVuZXNzIil8fDAsbj1ydCh0Lm5vZGUxLmdldExheW91dCgpKSxvPXJ0KHQubm9kZTIuZ2V0TGF5b3V0KCkpLGE9KG5bMF0rb1swXSkvMixyPShuWzFdK29bMV0pLzI7K2kmJihlPVtzKihpKj0zKSthKigxLWkpLGwqaStyKigxLWkpXSksdC5zZXRMYXlvdXQoW24sbyxlXSl9KSl9fXZhciBQdz17dmFsdWU6ZnVuY3Rpb24odCxlLGksbixvLGEscixzKXt2YXIgbD0wLHU9bi5nZXRTdW0oInZhbHVlIiksaD0yKk1hdGguUEkvKHV8fHMpO2kuZWFjaE5vZGUoZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRWYWx1ZSgidmFsdWUiKSxpPWgqKHU/ZToxKS8yO2wrPWksdC5zZXRMYXlvdXQoW28qTWF0aC5jb3MobCkrYSxvKk1hdGguc2luKGwpK3JdKSxsKz1pfSl9LHN5bWJvbFNpemU6ZnVuY3Rpb24odCxlLGksbixvLGEscixzKXt2YXIgbD0wO0x3Lmxlbmd0aD1zO3ZhciB1PXV3KHQpO2kuZWFjaE5vZGUoZnVuY3Rpb24odCl7dmFyIGU9aHcodCk7aXNOYU4oZSkmJihlPTIpLGU8MCYmKGU9MCksZSo9dTt2YXIgaT1NYXRoLmFzaW4oZS8yL28pO2lzTmFOKGkpJiYoaT1Ddy8yKSxMd1t0LmRhdGFJbmRleF09aSxsKz0yKml9KTt2YXIgaD0oMipDdy1sKS9zLzIsYz0wO2kuZWFjaE5vZGUoZnVuY3Rpb24odCl7dmFyIGU9aCtMd1t0LmRhdGFJbmRleF07Yys9ZSx0LnNldExheW91dChbbypNYXRoLmNvcyhjKSthLG8qTWF0aC5zaW4oYykrcl0pLGMrPWV9KX19LE53PXV0O3BmKGZ1bmN0aW9uKHQpe3ZhciBhPXQuZmluZENvbXBvbmVudHMoe21haW5UeXBlOiJsZWdlbmQifSk7YSYmYS5sZW5ndGgmJnQuZWFjaFNlcmllc0J5VHlwZSgiZ3JhcGgiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0Q2F0ZWdvcmllc0RhdGEoKSxuPXQuZ2V0R3JhcGgoKS5kYXRhLG89ZS5tYXBBcnJheShlLmdldE5hbWUpO24uZmlsdGVyU2VsZihmdW5jdGlvbih0KXt2YXIgZT1uLmdldEl0ZW1Nb2RlbCh0KS5nZXRTaGFsbG93KCJjYXRlZ29yeSIpO2lmKG51bGwhPWUpeyJudW1iZXIiPT10eXBlb2YgZSYmKGU9b1tlXSk7Zm9yKHZhciBpPTA7aTxhLmxlbmd0aDtpKyspaWYoIWFbaV0uaXNTZWxlY3RlZChlKSlyZXR1cm4hMX1yZXR1cm4hMH0pfSx0aGlzKX0pLHlmKE1tKCJncmFwaCIsImNpcmNsZSIsbnVsbCkpLHlmKGZ1bmN0aW9uKHQpe3ZhciBoPXt9O3QuZWFjaFNlcmllc0J5VHlwZSgiZ3JhcGgiLGZ1bmN0aW9uKHMpe3ZhciBsPXMuZ2V0Q2F0ZWdvcmllc0RhdGEoKSxvPXMuZ2V0RGF0YSgpLHU9e307bC5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPWwuZ2V0TmFtZSh0KTt1WyJlYy0iK2VdPXQ7dmFyIGk9bC5nZXRJdGVtTW9kZWwodCksbj1pLmdldCgiaXRlbVN0eWxlLmNvbG9yIil8fHMuZ2V0Q29sb3JGcm9tUGFsZXR0ZShlLGgpO2wuc2V0SXRlbVZpc3VhbCh0LCJjb2xvciIsbik7Zm9yKHZhciBvPVsib3BhY2l0eSIsInN5bWJvbCIsInN5bWJvbFNpemUiLCJzeW1ib2xLZWVwQXNwZWN0Il0sYT0wO2E8by5sZW5ndGg7YSsrKXt2YXIgcj1pLmdldFNoYWxsb3cob1thXSwhMCk7bnVsbCE9ciYmbC5zZXRJdGVtVmlzdWFsKHQsb1thXSxyKX19KSxsLmNvdW50KCkmJm8uZWFjaChmdW5jdGlvbih0KXt2YXIgZT1vLmdldEl0ZW1Nb2RlbCh0KS5nZXRTaGFsbG93KCJjYXRlZ29yeSIpO2lmKG51bGwhPWUpeyJzdHJpbmciPT10eXBlb2YgZSYmKGU9dVsiZWMtIitlXSk7Zm9yKHZhciBpPVsiY29sb3IiLCJvcGFjaXR5Iiwic3ltYm9sIiwic3ltYm9sU2l6ZSIsInN5bWJvbEtlZXBBc3BlY3QiXSxuPTA7bjxpLmxlbmd0aDtuKyspbnVsbD09by5nZXRJdGVtVmlzdWFsKHQsaVtuXSwhMCkmJm8uc2V0SXRlbVZpc3VhbCh0LGlbbl0sbC5nZXRJdGVtVmlzdWFsKGUsaVtuXSkpfX0pfSl9KSx5ZihmdW5jdGlvbih0KXt0LmVhY2hTZXJpZXNCeVR5cGUoImdyYXBoIixmdW5jdGlvbih0KXt2YXIgcz10LmdldEdyYXBoKCksbD10LmdldEVkZ2VEYXRhKCksZT1Udyh0LmdldCgiZWRnZVN5bWJvbCIpKSxpPVR3KHQuZ2V0KCJlZGdlU3ltYm9sU2l6ZSIpKSx1PSJsaW5lU3R5bGUuY29sb3IiLnNwbGl0KCIuIiksaD0ibGluZVN0eWxlLm9wYWNpdHkiLnNwbGl0KCIuIik7bC5zZXRWaXN1YWwoImZyb21TeW1ib2wiLGUmJmVbMF0pLGwuc2V0VmlzdWFsKCJ0b1N5bWJvbCIsZSYmZVsxXSksbC5zZXRWaXN1YWwoImZyb21TeW1ib2xTaXplIixpJiZpWzBdKSxsLnNldFZpc3VhbCgidG9TeW1ib2xTaXplIixpJiZpWzFdKSxsLnNldFZpc3VhbCgiY29sb3IiLHQuZ2V0KHUpKSxsLnNldFZpc3VhbCgib3BhY2l0eSIsdC5nZXQoaCkpLGwuZWFjaChmdW5jdGlvbih0KXt2YXIgZT1sLmdldEl0ZW1Nb2RlbCh0KSxpPXMuZ2V0RWRnZUJ5SW5kZXgodCksbj1UdyhlLmdldFNoYWxsb3coInN5bWJvbCIsITApKSxvPVR3KGUuZ2V0U2hhbGxvdygic3ltYm9sU2l6ZSIsITApKSxhPWUuZ2V0KHUpLHI9ZS5nZXQoaCk7c3dpdGNoKGEpe2Nhc2Uic291cmNlIjphPWkubm9kZTEuZ2V0VmlzdWFsKCJjb2xvciIpO2JyZWFrO2Nhc2UidGFyZ2V0IjphPWkubm9kZTIuZ2V0VmlzdWFsKCJjb2xvciIpfW5bMF0mJmkuc2V0VmlzdWFsKCJmcm9tU3ltYm9sIixuWzBdKSxuWzFdJiZpLnNldFZpc3VhbCgidG9TeW1ib2wiLG5bMV0pLG9bMF0mJmkuc2V0VmlzdWFsKCJmcm9tU3ltYm9sU2l6ZSIsb1swXSksb1sxXSYmaS5zZXRWaXN1YWwoInRvU3ltYm9sU2l6ZSIsb1sxXSksaS5zZXRWaXN1YWwoImNvbG9yIixhKSxpLnNldFZpc3VhbCgib3BhY2l0eSIscil9KX0pfSksdmYoZnVuY3Rpb24odCxlKXt0LmVhY2hTZXJpZXNCeVR5cGUoImdyYXBoIixmdW5jdGlvbih0KXt2YXIgZT10LmdldCgibGF5b3V0IiksaT10LmNvb3JkaW5hdGVTeXN0ZW07aWYoaSYmInZpZXciIT09aS50eXBlKXt2YXIgbj10LmdldERhdGEoKSxvPVtdO0UoaS5kaW1lbnNpb25zLGZ1bmN0aW9uKHQpe289by5jb25jYXQobi5tYXBEaW1lbnNpb24odCwhMCkpfSk7Zm9yKHZhciBhPTA7YTxuLmNvdW50KCk7YSsrKXtmb3IodmFyIHI9W10scz0hMSxsPTA7bDxvLmxlbmd0aDtsKyspe3ZhciB1PW4uZ2V0KG9bbF0sYSk7aXNOYU4odSl8fChzPSEwKSxyLnB1c2godSl9cz9uLnNldEl0ZW1MYXlvdXQoYSxpLmRhdGFUb1BvaW50KHIpKTpuLnNldEl0ZW1MYXlvdXQoYSxbTmFOLE5hTl0pfUR3KG4uZ3JhcGgpfWVsc2UgZSYmIm5vbmUiIT09ZXx8QXcodCl9KX0pLHZmKElkLlZJU1VBTC5QT1NUX0NIQVJUX0xBWU9VVCxmdW5jdGlvbih0KXt0LmVhY2hTZXJpZXNCeVR5cGUoImdyYXBoIixmdW5jdGlvbih0KXsiY2lyY3VsYXIiPT09dC5nZXQoImxheW91dCIpJiZrdyh0LCJzeW1ib2xTaXplIil9KX0pLHZmKGZ1bmN0aW9uKHQpe3QuZWFjaFNlcmllc0J5VHlwZSgiZ3JhcGgiLGZ1bmN0aW9uKHQpe2lmKCEobD10LmNvb3JkaW5hdGVTeXN0ZW0pfHwidmlldyI9PT1sLnR5cGUpaWYoImZvcmNlIj09PXQuZ2V0KCJsYXlvdXQiKSl7dmFyIGM9dC5wcmVzZXJ2ZWRQb2ludHN8fHt9LGQ9dC5nZXRHcmFwaCgpLGY9ZC5kYXRhLGU9ZC5lZGdlRGF0YSxpPXQuZ2V0TW9kZWwoImZvcmNlIiksbj1pLmdldCgiaW5pdExheW91dCIpO3QucHJlc2VydmVkUG9pbnRzP2YuZWFjaChmdW5jdGlvbih0KXt2YXIgZT1mLmdldElkKHQpO2Yuc2V0SXRlbUxheW91dCh0LGNbZV18fFtOYU4sTmFOXSl9KTpuJiYibm9uZSIhPT1uPyJjaXJjdWxhciI9PT1uJiZrdyh0LCJ2YWx1ZSIpOkF3KHQpO3ZhciBvPWYuZ2V0RGF0YUV4dGVudCgidmFsdWUiKSxhPWUuZ2V0RGF0YUV4dGVudCgidmFsdWUiKSxyPWkuZ2V0KCJyZXB1bHNpb24iKSxzPWkuZ2V0KCJlZGdlTGVuZ3RoIik7ayhyKXx8KHI9W3Iscl0pLGsocyl8fChzPVtzLHNdKSxzPVtzWzFdLHNbMF1dO3ZhciBsLHU9Zi5tYXBBcnJheSgidmFsdWUiLGZ1bmN0aW9uKHQsZSl7dmFyIGk9Zi5nZXRJdGVtTGF5b3V0KGUpLG49a2wodCxvLHIpO3JldHVybiBpc05hTihuKSYmKG49KHJbMF0rclsxXSkvMikse3c6bixyZXA6bixmaXhlZDpmLmdldEl0ZW1Nb2RlbChlKS5nZXQoImZpeGVkIikscDohaXx8aXNOYU4oaVswXSl8fGlzTmFOKGlbMV0pP251bGw6aX19KSxoPWUubWFwQXJyYXkoInZhbHVlIixmdW5jdGlvbih0LGUpe3ZhciBpPWQuZ2V0RWRnZUJ5SW5kZXgoZSksbj1rbCh0LGEscyk7aXNOYU4obikmJihuPShzWzBdK3NbMV0pLzIpO3ZhciBvPWkuZ2V0TW9kZWwoKTtyZXR1cm57bjE6dVtpLm5vZGUxLmRhdGFJbmRleF0sbjI6dVtpLm5vZGUyLmRhdGFJbmRleF0sZDpuLGN1cnZlbmVzczpvLmdldCgibGluZVN0eWxlLmN1cnZlbmVzcyIpfHwwLGlnbm9yZUZvcmNlTGF5b3V0Om8uZ2V0KCJpZ25vcmVGb3JjZUxheW91dCIpfX0pLHA9KGw9dC5jb29yZGluYXRlU3lzdGVtKS5nZXRCb3VuZGluZ1JlY3QoKSxnPWZ1bmN0aW9uKGYscCx0KXtmb3IodmFyIGU9dC5yZWN0LGk9ZS53aWR0aCxuPWUuaGVpZ2h0LGc9W2UueCtpLzIsZS55K24vMl0sbT1udWxsPT10LmdyYXZpdHk/LjE6dC5ncmF2aXR5LG89MDtvPGYubGVuZ3RoO28rKyl7dmFyIGE9ZltvXTthLnB8fChhLnA9b3QoaSooTWF0aC5yYW5kb20oKS0uNSkrZ1swXSxuKihNYXRoLnJhbmRvbSgpLS41KStnWzFdKSksYS5wcD1ydChhLnApLGEuZWRnZXM9bnVsbH12YXIgcj1udWxsPT10LmZyaWN0aW9uPy42OnQuZnJpY3Rpb24sdj1yO3JldHVybnt3YXJtVXA6ZnVuY3Rpb24oKXt2PS44KnJ9LHNldEZpeGVkOmZ1bmN0aW9uKHQpe2ZbdF0uZml4ZWQ9ITB9LHNldFVuZml4ZWQ6ZnVuY3Rpb24odCl7Zlt0XS5maXhlZD0hMX0sc3RlcDpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10saT1mLmxlbmd0aCxuPTA7bjxwLmxlbmd0aDtuKyspe3ZhciBvPXBbbl07aWYoIW8uaWdub3JlRm9yY2VMYXlvdXQpe3ZhciBhPW8ubjE7aHQoZSwodT1vLm4yKS5wLGEucCk7dmFyIHI9Y3QoZSktby5kLHM9dS53LyhhLncrdS53KTtpc05hTihzKSYmKHM9MCksbXQoZSxlKSxhLmZpeGVkfHxOdyhhLnAsYS5wLGUscypyKnYpLHUuZml4ZWR8fE53KHUucCx1LnAsZSwtKDEtcykqcip2KX19Zm9yKG49MDtuPGk7bisrKXsoZD1mW25dKS5maXhlZHx8KGh0KGUsZyxkLnApLE53KGQucCxkLnAsZSxtKnYpKX1mb3Iobj0wO248aTtuKyspe2E9ZltuXTtmb3IodmFyIGw9bisxO2w8aTtsKyspe3ZhciB1O2h0KGUsKHU9ZltsXSkucCxhLnApLDA9PT0ocj1jdChlKSkmJihzdChlLE1hdGgucmFuZG9tKCktLjUsTWF0aC5yYW5kb20oKS0uNSkscj0xKTt2YXIgaD0oYS5yZXArdS5yZXApL3IvcjthLmZpeGVkfHxOdyhhLnBwLGEucHAsZSxoKSx1LmZpeGVkfHxOdyh1LnBwLHUucHAsZSwtaCl9fXZhciBjPVtdO2ZvcihuPTA7bjxpO24rKyl7dmFyIGQ7KGQ9ZltuXSkuZml4ZWR8fChodChjLGQucCxkLnBwKSxOdyhkLnAsZC5wLGMsdiksYXQoZC5wcCxkLnApKX12Kj0uOTkyLHQmJnQoZixwLHY8LjAxKX19fSh1LGgse3JlY3Q6cCxncmF2aXR5OmkuZ2V0KCJncmF2aXR5IiksZnJpY3Rpb246aS5nZXQoImZyaWN0aW9uIil9KSxtPWcuc3RlcDtnLnN0ZXA9ZnVuY3Rpb24oaCl7Zm9yKHZhciB0PTAsZT11Lmxlbmd0aDt0PGU7dCsrKXVbdF0uZml4ZWQmJmF0KHVbdF0ucCxkLmdldE5vZGVCeUluZGV4KHQpLmdldExheW91dCgpKTttKGZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49MCxvPXQubGVuZ3RoO248bztuKyspdFtuXS5maXhlZHx8ZC5nZXROb2RlQnlJbmRleChuKS5zZXRMYXlvdXQodFtuXS5wKSxjW2YuZ2V0SWQobildPXRbbl0ucDtmb3Iobj0wLG89ZS5sZW5ndGg7bjxvO24rKyl7dmFyIGE9ZVtuXSxyPWQuZ2V0RWRnZUJ5SW5kZXgobikscz1hLm4xLnAsbD1hLm4yLnAsdT1yLmdldExheW91dCgpOyh1PXU/dS5zbGljZSgpOltdKVswXT11WzBdfHxbXSx1WzFdPXVbMV18fFtdLGF0KHVbMF0scyksYXQodVsxXSxsKSwrYS5jdXJ2ZW5lc3MmJih1WzJdPVsoc1swXStsWzBdKS8yLShzWzFdLWxbMV0pKmEuY3VydmVuZXNzLChzWzFdK2xbMV0pLzItKGxbMF0tc1swXSkqYS5jdXJ2ZW5lc3NdKSxyLnNldExheW91dCh1KX1oJiZoKGkpfSl9LHQuZm9yY2VMYXlvdXQ9Zyx0LnByZXNlcnZlZFBvaW50cz1jLGcuc3RlcCgpfWVsc2UgdC5mb3JjZUxheW91dD1udWxsfSl9KSxtZigiZ3JhcGhWaWV3Iix7Y3JlYXRlOmZ1bmN0aW9uKHQsZCl7dmFyIGY9W107cmV0dXJuIHQuZWFjaFNlcmllc0J5VHlwZSgiZ3JhcGgiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0KCJjb29yZGluYXRlU3lzdGVtIik7aWYoIWV8fCJ2aWV3Ij09PWUpe3ZhciBpPXQuZ2V0RGF0YSgpLG49W10sbz1bXTtCYShpLm1hcEFycmF5KGZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0SXRlbU1vZGVsKHQpO3JldHVyblsrZS5nZXQoIngiKSwrZS5nZXQoInkiKV19KSxuLG8pLG9bMF0tblswXT09MCYmKG9bMF0rPTEsblswXS09MSksb1sxXS1uWzFdPT0wJiYob1sxXSs9MSxuWzFdLT0xKTt2YXIgYT0ob1swXS1uWzBdKS8ob1sxXS1uWzFdKSxyPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldEJveExheW91dFBhcmFtcygpO3JldHVybiBuLmFzcGVjdD1pLHZ1KG4se3dpZHRoOmUuZ2V0V2lkdGgoKSxoZWlnaHQ6ZS5nZXRIZWlnaHQoKX0pfSh0LGQsYSk7aXNOYU4oYSkmJihuPVtyLngsci55XSxvPVtyLngrci53aWR0aCxyLnkrci5oZWlnaHRdKTt2YXIgcz1vWzBdLW5bMF0sbD1vWzFdLW5bMV0sdT1yLndpZHRoLGg9ci5oZWlnaHQsYz10LmNvb3JkaW5hdGVTeXN0ZW09bmV3IFF5O2Muem9vbUxpbWl0PXQuZ2V0KCJzY2FsZUxpbWl0IiksYy5zZXRCb3VuZGluZ1JlY3QoblswXSxuWzFdLHMsbCksYy5zZXRWaWV3UmVjdChyLngsci55LHUsaCksYy5zZXRDZW50ZXIodC5nZXQoImNlbnRlciIpKSxjLnNldFpvb20odC5nZXQoInpvb20iKSksZi5wdXNoKGMpfX0pLGZ9fSk7aWMuZXh0ZW5kKHt0eXBlOiJzZXJpZXMuZ2F1Z2UiLGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIEJ2KHRoaXMsWyJ2YWx1ZSJdKX0sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNlbnRlcjpbIjUwJSIsIjUwJSJdLGxlZ2VuZEhvdmVyTGluazohMCxyYWRpdXM6Ijc1JSIsc3RhcnRBbmdsZToyMjUsZW5kQW5nbGU6LTQ1LGNsb2Nrd2lzZTohMCxtaW46MCxtYXg6MTAwLHNwbGl0TnVtYmVyOjEwLGF4aXNMaW5lOntzaG93OiEwLGxpbmVTdHlsZTp7Y29sb3I6W1suMiwiIzkxYzdhZSJdLFsuOCwiIzYzODY5ZSJdLFsxLCIjYzIzNTMxIl1dLHdpZHRoOjMwfX0sc3BsaXRMaW5lOntzaG93OiEwLGxlbmd0aDozMCxsaW5lU3R5bGU6e2NvbG9yOiIjZWVlIix3aWR0aDoyLHR5cGU6InNvbGlkIn19LGF4aXNUaWNrOntzaG93OiEwLHNwbGl0TnVtYmVyOjUsbGVuZ3RoOjgsbGluZVN0eWxlOntjb2xvcjoiI2VlZSIsd2lkdGg6MSx0eXBlOiJzb2xpZCJ9fSxheGlzTGFiZWw6e3Nob3c6ITAsZGlzdGFuY2U6NSxjb2xvcjoiYXV0byJ9LHBvaW50ZXI6e3Nob3c6ITAsbGVuZ3RoOiI4MCUiLHdpZHRoOjh9LGl0ZW1TdHlsZTp7Y29sb3I6ImF1dG8ifSx0aXRsZTp7c2hvdzohMCxvZmZzZXRDZW50ZXI6WzAsIi00MCUiXSxjb2xvcjoiIzMzMyIsZm9udFNpemU6MTV9LGRldGFpbDp7c2hvdzohMCxiYWNrZ3JvdW5kQ29sb3I6InJnYmEoMCwwLDAsMCkiLGJvcmRlcldpZHRoOjAsYm9yZGVyQ29sb3I6IiNjY2MiLHdpZHRoOjEwMCxoZWlnaHQ6bnVsbCxwYWRkaW5nOls1LDEwXSxvZmZzZXRDZW50ZXI6WzAsIjQwJSJdLGNvbG9yOiJhdXRvIixmb250U2l6ZTozMH19fSk7dmFyIE93PVNyLmV4dGVuZCh7dHlwZToiZWNoYXJ0c0dhdWdlUG9pbnRlciIsc2hhcGU6e2FuZ2xlOjAsd2lkdGg6MTAscjoxMCx4OjAseTowfSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT1NYXRoLmNvcyxuPU1hdGguc2luLG89ZS5yLGE9ZS53aWR0aCxyPWUuYW5nbGUscz1lLngtaShyKSphKihvLzM8PWE/MToyKSxsPWUueS1uKHIpKmEqKG8vMzw9YT8xOjIpO3I9ZS5hbmdsZS1NYXRoLlBJLzIsdC5tb3ZlVG8ocyxsKSx0LmxpbmVUbyhlLngraShyKSphLGUueStuKHIpKmEpLHQubGluZVRvKGUueCtpKGUuYW5nbGUpKm8sZS55K24oZS5hbmdsZSkqbyksdC5saW5lVG8oZS54LWkocikqYSxlLnktbihyKSphKSx0LmxpbmVUbyhzLGwpfX0pO2Z1bmN0aW9uIEV3KHQsZSl7cmV0dXJuIGUmJigic3RyaW5nIj09dHlwZW9mIGU/dD1lLnJlcGxhY2UoInt2YWx1ZX0iLG51bGwhPXQ/dDoiIik6ImZ1bmN0aW9uIj09dHlwZW9mIGUmJih0PWUodCkpKSx0fXZhciB6dz0yKk1hdGguUEksUnc9KGdjLmV4dGVuZCh7dHlwZToiZ2F1Z2UiLHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dGhpcy5ncm91cC5yZW1vdmVBbGwoKTt2YXIgbj10LmdldCgiYXhpc0xpbmUubGluZVN0eWxlLmNvbG9yIiksbz1mdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0KCJjZW50ZXIiKSxuPWUuZ2V0V2lkdGgoKSxvPWUuZ2V0SGVpZ2h0KCksYT1NYXRoLm1pbihuLG8pO3JldHVybntjeDpQbChpWzBdLGUuZ2V0V2lkdGgoKSksY3k6UGwoaVsxXSxlLmdldEhlaWdodCgpKSxyOlBsKHQuZ2V0KCJyYWRpdXMiKSxhLzIpfX0odCxpKTt0aGlzLl9yZW5kZXJNYWluKHQsZSxpLG4sbyl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt9LF9yZW5kZXJNYWluOmZ1bmN0aW9uKHQsZSxpLG4sbyl7Zm9yKHZhciBhPXRoaXMuZ3JvdXAscj10LmdldE1vZGVsKCJheGlzTGluZSIpLHM9ci5nZXRNb2RlbCgibGluZVN0eWxlIiksbD10LmdldCgiY2xvY2t3aXNlIiksdT0tdC5nZXQoInN0YXJ0QW5nbGUiKS8xODAqTWF0aC5QSSxoPSgoZz0tdC5nZXQoImVuZEFuZ2xlIikvMTgwKk1hdGguUEkpLXUpJXp3LGM9dSxkPXMuZ2V0KCJ3aWR0aCIpLGY9ci5nZXQoInNob3ciKSxwPTA7ZiYmcDxuLmxlbmd0aDtwKyspe3ZhciBnLG09TWF0aC5taW4oTWF0aC5tYXgobltwXVswXSwwKSwxKSx2PW5ldyBVcih7c2hhcGU6e3N0YXJ0QW5nbGU6YyxlbmRBbmdsZTpnPXUraCptLGN4Om8uY3gsY3k6by5jeSxjbG9ja3dpc2U6bCxyMDpvLnItZCxyOm8ucn0sc2lsZW50OiEwfSk7di5zZXRTdHlsZSh7ZmlsbDpuW3BdWzFdfSksdi5zZXRTdHlsZShzLmdldExpbmVTdHlsZShbImNvbG9yIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJDb2xvciJdKSksYS5hZGQodiksYz1nfWZ1bmN0aW9uIHkodCl7aWYodDw9MClyZXR1cm4gblswXVsxXTtmb3IodmFyIGU9MDtlPG4ubGVuZ3RoO2UrKylpZihuW2VdWzBdPj10JiYoMD09PWU/MDpuW2UtMV1bMF0pPHQpcmV0dXJuIG5bZV1bMV07cmV0dXJuIG5bZS0xXVsxXX1pZighbCl7dmFyIHg9dTt1PWcsZz14fXRoaXMuX3JlbmRlclRpY2tzKHQsZSxpLHksbyx1LGcsbCksdGhpcy5fcmVuZGVyUG9pbnRlcih0LGUsaSx5LG8sdSxnLGwpLHRoaXMuX3JlbmRlclRpdGxlKHQsZSxpLHksbyksdGhpcy5fcmVuZGVyRGV0YWlsKHQsZSxpLHksbyl9LF9yZW5kZXJUaWNrczpmdW5jdGlvbih0LGUsaSxuLG8sYSxyLHMpe2Zvcih2YXIgbD10aGlzLmdyb3VwLHU9by5jeCxoPW8uY3ksYz1vLnIsZD0rdC5nZXQoIm1pbiIpLGY9K3QuZ2V0KCJtYXgiKSxwPXQuZ2V0TW9kZWwoInNwbGl0TGluZSIpLGc9dC5nZXRNb2RlbCgiYXhpc1RpY2siKSxtPXQuZ2V0TW9kZWwoImF4aXNMYWJlbCIpLHY9dC5nZXQoInNwbGl0TnVtYmVyIikseT1nLmdldCgic3BsaXROdW1iZXIiKSx4PVBsKHAuZ2V0KCJsZW5ndGgiKSxjKSxfPVBsKGcuZ2V0KCJsZW5ndGgiKSxjKSx3PWEsYj0oci1hKS92LFM9Yi95LE09cC5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCksST1nLmdldE1vZGVsKCJsaW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSxUPTA7VDw9djtUKyspe3ZhciBBPU1hdGguY29zKHcpLEQ9TWF0aC5zaW4odyk7aWYocC5nZXQoInNob3ciKSl7dmFyIEM9bmV3IG9zKHtzaGFwZTp7eDE6QSpjK3UseTE6RCpjK2gseDI6QSooYy14KSt1LHkyOkQqKGMteCkraH0sc3R5bGU6TSxzaWxlbnQ6ITB9KTsiYXV0byI9PT1NLnN0cm9rZSYmQy5zZXRTdHlsZSh7c3Ryb2tlOm4oVC92KX0pLGwuYWRkKEMpfWlmKG0uZ2V0KCJzaG93Iikpe3ZhciBMPUV3KE5sKFQvdiooZi1kKStkKSxtLmdldCgiZm9ybWF0dGVyIikpLGs9bS5nZXQoImRpc3RhbmNlIiksUD1uKFQvdik7bC5hZGQobmV3IEZyKHtzdHlsZTpRcyh7fSxtLHt0ZXh0OkwseDpBKihjLXgtaykrdSx5OkQqKGMteC1rKStoLHRleHRWZXJ0aWNhbEFsaWduOkQ8LS40PyJ0b3AiOi40PEQ/ImJvdHRvbSI6Im1pZGRsZSIsdGV4dEFsaWduOkE8LS40PyJsZWZ0IjouNDxBPyJyaWdodCI6ImNlbnRlciJ9LHthdXRvQ29sb3I6UH0pLHNpbGVudDohMH0pKX1pZihnLmdldCgic2hvdyIpJiZUIT09dil7Zm9yKHZhciBOPTA7Tjw9eTtOKyspe0E9TWF0aC5jb3ModyksRD1NYXRoLnNpbih3KTt2YXIgTz1uZXcgb3Moe3NoYXBlOnt4MTpBKmMrdSx5MTpEKmMraCx4MjpBKihjLV8pK3UseTI6RCooYy1fKStofSxzaWxlbnQ6ITAsc3R5bGU6SX0pOyJhdXRvIj09PUkuc3Ryb2tlJiZPLnNldFN0eWxlKHtzdHJva2U6bigoVCtOL3kpL3YpfSksbC5hZGQoTyksdys9U313LT1TfWVsc2Ugdys9Yn19LF9yZW5kZXJQb2ludGVyOmZ1bmN0aW9uKG4sdCxlLG8sYSxpLHIscyl7dmFyIGw9dGhpcy5ncm91cCx1PXRoaXMuX2RhdGE7aWYobi5nZXQoInBvaW50ZXIuc2hvdyIpKXt2YXIgaD1bK24uZ2V0KCJtaW4iKSwrbi5nZXQoIm1heCIpXSxjPVtpLHJdLGQ9bi5nZXREYXRhKCksZj1kLm1hcERpbWVuc2lvbigidmFsdWUiKTtkLmRpZmYodSkuYWRkKGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBPdyh7c2hhcGU6e2FuZ2xlOml9fSk7bGwoZSx7c2hhcGU6e2FuZ2xlOmtsKGQuZ2V0KGYsdCksaCxjLCEwKX19LG4pLGwuYWRkKGUpLGQuc2V0SXRlbUdyYXBoaWNFbCh0LGUpfSkudXBkYXRlKGZ1bmN0aW9uKHQsZSl7dmFyIGk9dS5nZXRJdGVtR3JhcGhpY0VsKGUpO3NsKGkse3NoYXBlOnthbmdsZTprbChkLmdldChmLHQpLGgsYywhMCl9fSxuKSxsLmFkZChpKSxkLnNldEl0ZW1HcmFwaGljRWwodCxpKX0pLnJlbW92ZShmdW5jdGlvbih0KXt2YXIgZT11LmdldEl0ZW1HcmFwaGljRWwodCk7bC5yZW1vdmUoZSl9KS5leGVjdXRlKCksZC5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbih0LGUpe3ZhciBpPWQuZ2V0SXRlbU1vZGVsKGUpLG49aS5nZXRNb2RlbCgicG9pbnRlciIpO3Quc2V0U2hhcGUoe3g6YS5jeCx5OmEuY3ksd2lkdGg6UGwobi5nZXQoIndpZHRoIiksYS5yKSxyOlBsKG4uZ2V0KCJsZW5ndGgiKSxhLnIpfSksdC51c2VTdHlsZShpLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKSksImF1dG8iPT09dC5zdHlsZS5maWxsJiZ0LnNldFN0eWxlKCJmaWxsIixvKGtsKGQuZ2V0KGYsZSksaCxbMCwxXSwhMCkpKSxZcyh0LGkuZ2V0TW9kZWwoImVtcGhhc2lzLml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZSgpKX0pLHRoaXMuX2RhdGE9ZH1lbHNlIHUmJnUuZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCl7bC5yZW1vdmUodCl9KX0sX3JlbmRlclRpdGxlOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9dC5nZXREYXRhKCkscj1hLm1hcERpbWVuc2lvbigidmFsdWUiKSxzPXQuZ2V0TW9kZWwoInRpdGxlIik7aWYocy5nZXQoInNob3ciKSl7dmFyIGw9cy5nZXQoIm9mZnNldENlbnRlciIpLHU9by5jeCtQbChsWzBdLG8uciksaD1vLmN5K1BsKGxbMV0sby5yKSxjPSt0LmdldCgibWluIiksZD0rdC5nZXQoIm1heCIpLGY9bihrbCh0LmdldERhdGEoKS5nZXQociwwKSxbYyxkXSxbMCwxXSwhMCkpO3RoaXMuZ3JvdXAuYWRkKG5ldyBGcih7c2lsZW50OiEwLHN0eWxlOlFzKHt9LHMse3g6dSx5OmgsdGV4dDphLmdldE5hbWUoMCksdGV4dEFsaWduOiJjZW50ZXIiLHRleHRWZXJ0aWNhbEFsaWduOiJtaWRkbGUifSx7YXV0b0NvbG9yOmYsZm9yY2VSaWNoOiEwfSl9KSl9fSxfcmVuZGVyRGV0YWlsOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9dC5nZXRNb2RlbCgiZGV0YWlsIikscj0rdC5nZXQoIm1pbiIpLHM9K3QuZ2V0KCJtYXgiKTtpZihhLmdldCgic2hvdyIpKXt2YXIgbD1hLmdldCgib2Zmc2V0Q2VudGVyIiksdT1vLmN4K1BsKGxbMF0sby5yKSxoPW8uY3krUGwobFsxXSxvLnIpLGM9UGwoYS5nZXQoIndpZHRoIiksby5yKSxkPVBsKGEuZ2V0KCJoZWlnaHQiKSxvLnIpLGY9dC5nZXREYXRhKCkscD1mLmdldChmLm1hcERpbWVuc2lvbigidmFsdWUiKSwwKSxnPW4oa2wocCxbcixzXSxbMCwxXSwhMCkpO3RoaXMuZ3JvdXAuYWRkKG5ldyBGcih7c2lsZW50OiEwLHN0eWxlOlFzKHt9LGEse3g6dSx5OmgsdGV4dDpFdyhwLGEuZ2V0KCJmb3JtYXR0ZXIiKSksdGV4dFdpZHRoOmlzTmFOKGMpP251bGw6Yyx0ZXh0SGVpZ2h0OmlzTmFOKGQpP251bGw6ZCx0ZXh0QWxpZ246ImNlbnRlciIsdGV4dFZlcnRpY2FsQWxpZ246Im1pZGRsZSJ9LHthdXRvQ29sb3I6Zyxmb3JjZVJpY2g6ITB9KX0pKX19fSksU2Yoe3R5cGU6InNlcmllcy5mdW5uZWwiLGluaXQ6ZnVuY3Rpb24odCl7Uncuc3VwZXJBcHBseSh0aGlzLCJpbml0Iixhcmd1bWVudHMpLHRoaXMubGVnZW5kVmlzdWFsUHJvdmlkZXI9bmV3IEd2KEEodGhpcy5nZXREYXRhLHRoaXMpLEEodGhpcy5nZXRSYXdEYXRhLHRoaXMpKSx0aGlzLl9kZWZhdWx0TGFiZWxMaW5lKHQpfSxnZXRJbml0aWFsRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiBCdih0aGlzLHtjb29yZERpbWVuc2lvbnM6WyJ2YWx1ZSJdLGVuY29kZURlZmF1bHRlcjpUKFl1LHRoaXMpfSl9LF9kZWZhdWx0TGFiZWxMaW5lOmZ1bmN0aW9uKHQpe3pvKHQsImxhYmVsTGluZSIsWyJzaG93Il0pO3ZhciBlPXQubGFiZWxMaW5lLGk9dC5lbXBoYXNpcy5sYWJlbExpbmU7ZS5zaG93PWUuc2hvdyYmdC5sYWJlbC5zaG93LGkuc2hvdz1pLnNob3cmJnQuZW1waGFzaXMubGFiZWwuc2hvd30sZ2V0RGF0YVBhcmFtczpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldERhdGEoKSxpPVJ3LnN1cGVyQ2FsbCh0aGlzLCJnZXREYXRhUGFyYW1zIix0KSxuPWUubWFwRGltZW5zaW9uKCJ2YWx1ZSIpLG89ZS5nZXRTdW0obik7cmV0dXJuIGkucGVyY2VudD1vPysoZS5nZXQobix0KS9vKjEwMCkudG9GaXhlZCgyKTowLGkuJHZhcnMucHVzaCgicGVyY2VudCIpLGl9LGRlZmF1bHRPcHRpb246e3psZXZlbDowLHo6MixsZWdlbmRIb3Zlckxpbms6ITAsbGVmdDo4MCx0b3A6NjAscmlnaHQ6ODAsYm90dG9tOjYwLG1pblNpemU6IjAlIixtYXhTaXplOiIxMDAlIixzb3J0OiJkZXNjZW5kaW5nIixnYXA6MCxmdW5uZWxBbGlnbjoiY2VudGVyIixsYWJlbDp7c2hvdzohMCxwb3NpdGlvbjoib3V0ZXIifSxsYWJlbExpbmU6e3Nob3c6ITAsbGVuZ3RoOjIwLGxpbmVTdHlsZTp7d2lkdGg6MSx0eXBlOiJzb2xpZCJ9fSxpdGVtU3R5bGU6e2JvcmRlckNvbG9yOiIjZmZmIixib3JkZXJXaWR0aDoxfSxlbXBoYXNpczp7bGFiZWw6e3Nob3c6ITB9fX19KSk7ZnVuY3Rpb24gQncodCxlKXtJaS5jYWxsKHRoaXMpO3ZhciBpPW5ldyBxcixuPW5ldyBLcixvPW5ldyBGcjt0aGlzLmFkZChpKSx0aGlzLmFkZChuKSx0aGlzLmFkZChvKSx0aGlzLmhpZ2hEb3duT25VcGRhdGU9ZnVuY3Rpb24odCxlKXsiZW1waGFzaXMiPT09ZT8obi5pZ25vcmU9bi5ob3Zlcklnbm9yZSxvLmlnbm9yZT1vLmhvdmVySWdub3JlKToobi5pZ25vcmU9bi5ub3JtYWxJZ25vcmUsby5pZ25vcmU9by5ub3JtYWxJZ25vcmUpfSx0aGlzLnVwZGF0ZURhdGEodCxlLCEwKX12YXIgVnc9QncucHJvdG90eXBlLEd3PVsiaXRlbVN0eWxlIiwib3BhY2l0eSJdO1Z3LnVwZGF0ZURhdGE9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuY2hpbGRBdCgwKSxvPXQuaG9zdE1vZGVsLGE9dC5nZXRJdGVtTW9kZWwoZSkscj10LmdldEl0ZW1MYXlvdXQoZSkscz10LmdldEl0ZW1Nb2RlbChlKS5nZXQoR3cpO3M9bnVsbD09cz8xOnMsbi51c2VTdHlsZSh7fSksaT8obi5zZXRTaGFwZSh7cG9pbnRzOnIucG9pbnRzfSksbi5zZXRTdHlsZSh7b3BhY2l0eTowfSksbGwobix7c3R5bGU6e29wYWNpdHk6c319LG8sZSkpOnNsKG4se3N0eWxlOntvcGFjaXR5OnN9LHNoYXBlOntwb2ludHM6ci5wb2ludHN9fSxvLGUpO3ZhciBsPWEuZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLHU9dC5nZXRJdGVtVmlzdWFsKGUsImNvbG9yIik7bi5zZXRTdHlsZShDKHtsaW5lSm9pbjoicm91bmQiLGZpbGw6dX0sbC5nZXRJdGVtU3R5bGUoWyJvcGFjaXR5Il0pKSksbi5ob3ZlclN0eWxlPWwuZ2V0TW9kZWwoImVtcGhhc2lzIikuZ2V0SXRlbVN0eWxlKCksdGhpcy5fdXBkYXRlTGFiZWwodCxlKSxZcyh0aGlzKX0sVncuX3VwZGF0ZUxhYmVsPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5jaGlsZEF0KDEpLG49dGhpcy5jaGlsZEF0KDIpLG89dC5ob3N0TW9kZWwsYT10LmdldEl0ZW1Nb2RlbChlKSxyPXQuZ2V0SXRlbUxheW91dChlKS5sYWJlbCxzPXQuZ2V0SXRlbVZpc3VhbChlLCJjb2xvciIpO3NsKGkse3NoYXBlOntwb2ludHM6ci5saW5lUG9pbnRzfHxyLmxpbmVQb2ludHN9fSxvLGUpLHNsKG4se3N0eWxlOnt4OnIueCx5OnIueX19LG8sZSksbi5hdHRyKHtyb3RhdGlvbjpyLnJvdGF0aW9uLG9yaWdpbjpbci54LHIueV0sejI6MTB9KTt2YXIgbD1hLmdldE1vZGVsKCJsYWJlbCIpLHU9YS5nZXRNb2RlbCgiZW1waGFzaXMubGFiZWwiKSxoPWEuZ2V0TW9kZWwoImxhYmVsTGluZSIpLGM9YS5nZXRNb2RlbCgiZW1waGFzaXMubGFiZWxMaW5lIik7cz10LmdldEl0ZW1WaXN1YWwoZSwiY29sb3IiKTskcyhuLnN0eWxlLG4uaG92ZXJTdHlsZT17fSxsLHUse2xhYmVsRmV0Y2hlcjp0Lmhvc3RNb2RlbCxsYWJlbERhdGFJbmRleDplLGRlZmF1bHRUZXh0OnQuZ2V0TmFtZShlKSxhdXRvQ29sb3I6cyx1c2VJbnNpZGVTdHlsZTohIXIuaW5zaWRlfSx7dGV4dEFsaWduOnIudGV4dEFsaWduLHRleHRWZXJ0aWNhbEFsaWduOnIudmVydGljYWxBbGlnbn0pLG4uaWdub3JlPW4ubm9ybWFsSWdub3JlPSFsLmdldCgic2hvdyIpLG4uaG92ZXJJZ25vcmU9IXUuZ2V0KCJzaG93IiksaS5pZ25vcmU9aS5ub3JtYWxJZ25vcmU9IWguZ2V0KCJzaG93IiksaS5ob3Zlcklnbm9yZT0hYy5nZXQoInNob3ciKSxpLnNldFN0eWxlKHtzdHJva2U6c30pLGkuc2V0U3R5bGUoaC5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCkpLGkuaG92ZXJTdHlsZT1jLmdldE1vZGVsKCJsaW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKX0sdyhCdyxJaSk7Z2MuZXh0ZW5kKHt0eXBlOiJmdW5uZWwiLHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5nZXREYXRhKCksbz10aGlzLl9kYXRhLGE9dGhpcy5ncm91cDtuLmRpZmYobykuYWRkKGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBCdyhuLHQpO24uc2V0SXRlbUdyYXBoaWNFbCh0LGUpLGEuYWRkKGUpfSkudXBkYXRlKGZ1bmN0aW9uKHQsZSl7dmFyIGk9by5nZXRJdGVtR3JhcGhpY0VsKGUpO2kudXBkYXRlRGF0YShuLHQpLGEuYWRkKGkpLG4uc2V0SXRlbUdyYXBoaWNFbCh0LGkpfSkucmVtb3ZlKGZ1bmN0aW9uKHQpe3ZhciBlPW8uZ2V0SXRlbUdyYXBoaWNFbCh0KTthLnJlbW92ZShlKX0pLmV4ZWN1dGUoKSx0aGlzLl9kYXRhPW59LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuZ3JvdXAucmVtb3ZlQWxsKCksdGhpcy5fZGF0YT1udWxsfSxkaXNwb3NlOmZ1bmN0aW9uKCl7fX0pO3lmKFl2KCJmdW5uZWwiKSksdmYoZnVuY3Rpb24odCx3LGUpe3QuZWFjaFNlcmllc0J5VHlwZSgiZnVubmVsIixmdW5jdGlvbih0KXt2YXIgbz10LmdldERhdGEoKSxhPW8ubWFwRGltZW5zaW9uKCJ2YWx1ZSIpLGU9dC5nZXQoInNvcnQiKSxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZ1KHQuZ2V0Qm94TGF5b3V0UGFyYW1zKCkse3dpZHRoOmUuZ2V0V2lkdGgoKSxoZWlnaHQ6ZS5nZXRIZWlnaHQoKX0pfSh0LHcpLGk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dC5tYXBEaW1lbnNpb24oInZhbHVlIiksbj10Lm1hcEFycmF5KGksZnVuY3Rpb24odCl7cmV0dXJuIHR9KSxvPVtdLGE9ImFzY2VuZGluZyI9PT1lLHI9MCxzPXQuY291bnQoKTtyPHM7cisrKW9bcl09cjtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT9vLnNvcnQoZSk6Im5vbmUiIT09ZSYmby5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGE/blt0XS1uW2VdOm5bZV0tblt0XX0pLG99KG8sZSkscz1bUGwodC5nZXQoIm1pblNpemUiKSxyLndpZHRoKSxQbCh0LmdldCgibWF4U2l6ZSIpLHIud2lkdGgpXSxuPW8uZ2V0RGF0YUV4dGVudChhKSxsPXQuZ2V0KCJtaW4iKSx1PXQuZ2V0KCJtYXgiKTtudWxsPT1sJiYobD1NYXRoLm1pbihuWzBdLDApKSxudWxsPT11JiYodT1uWzFdKTtmdW5jdGlvbiBoKHQsZSl7dmFyIGksbj1rbChvLmdldChhLHQpfHwwLFtsLHVdLHMsITApO3N3aXRjaChjKXtjYXNlImxlZnQiOmk9ci54O2JyZWFrO2Nhc2UiY2VudGVyIjppPXIueCsoci53aWR0aC1uKS8yO2JyZWFrO2Nhc2UicmlnaHQiOmk9ci54K3Iud2lkdGgtbn1yZXR1cm5bW2ksZV0sW2krbixlXV19dmFyIGM9dC5nZXQoImZ1bm5lbEFsaWduIiksZD10LmdldCgiZ2FwIiksZj0oci5oZWlnaHQtZCooby5jb3VudCgpLTEpKS9vLmNvdW50KCkscD1yLnk7ImFzY2VuZGluZyI9PT1lJiYoZj0tZixkPS1kLHArPXIuaGVpZ2h0LGk9aS5yZXZlcnNlKCkpO2Zvcih2YXIgZz0wO2c8aS5sZW5ndGg7ZysrKXt2YXIgbT1pW2ddLHY9aVtnKzFdLHk9by5nZXRJdGVtTW9kZWwobSkuZ2V0KCJpdGVtU3R5bGUuaGVpZ2h0Iik7bnVsbD09eT95PWY6KHk9UGwoeSxyLmhlaWdodCksImFzY2VuZGluZyI9PT1lJiYoeT0teSkpO3ZhciB4PWgobSxwKSxfPWgodixwK3kpO3ArPXkrZCxvLnNldEl0ZW1MYXlvdXQobSx7cG9pbnRzOnguY29uY2F0KF8uc2xpY2UoKS5yZXZlcnNlKCkpfSl9IWZ1bmN0aW9uKGcpe2cuZWFjaChmdW5jdGlvbih0KXt2YXIgZSxpLG4sbyxhPWcuZ2V0SXRlbU1vZGVsKHQpLHI9YS5nZXRNb2RlbCgibGFiZWwiKS5nZXQoInBvc2l0aW9uIikscz1hLmdldE1vZGVsKCJsYWJlbExpbmUiKSxsPWcuZ2V0SXRlbUxheW91dCh0KSx1PWwucG9pbnRzLGg9ImlubmVyIj09PXJ8fCJpbnNpZGUiPT09cnx8ImNlbnRlciI9PT1yfHwiaW5zaWRlTGVmdCI9PT1yfHwiaW5zaWRlUmlnaHQiPT09cjtpZihoKWU9Imluc2lkZUxlZnQiPT09cj8oaT0odVswXVswXSt1WzNdWzBdKS8yKzUsbj0odVswXVsxXSt1WzNdWzFdKS8yLCJsZWZ0Iik6Imluc2lkZVJpZ2h0Ij09PXI/KGk9KHVbMV1bMF0rdVsyXVswXSkvMi01LG49KHVbMV1bMV0rdVsyXVsxXSkvMiwicmlnaHQiKTooaT0odVswXVswXSt1WzFdWzBdK3VbMl1bMF0rdVszXVswXSkvNCxuPSh1WzBdWzFdK3VbMV1bMV0rdVsyXVsxXSt1WzNdWzFdKS80LCJjZW50ZXIiKSxvPVtbaSxuXSxbaSxuXV07ZWxzZXt2YXIgYyxkLGYscD1zLmdldCgibGVuZ3RoIik7ZT0ibGVmdCI9PT1yPyhjPSh1WzNdWzBdK3VbMF1bMF0pLzIsZD0odVszXVsxXSt1WzBdWzFdKS8yLGk9KGY9Yy1wKS01LCJyaWdodCIpOiJyaWdodCI9PT1yPyhjPSh1WzFdWzBdK3VbMl1bMF0pLzIsZD0odVsxXVsxXSt1WzJdWzFdKS8yLGk9KGY9YytwKSs1LCJsZWZ0Iik6InJpZ2h0VG9wIj09PXI/KGM9dVsxXVswXSxkPXVbMV1bMV0saT0oZj1jK3ApKzUsInRvcCIpOiJyaWdodEJvdHRvbSI9PT1yPyhjPXVbMl1bMF0sZD11WzJdWzFdLGk9KGY9YytwKSs1LCJib3R0b20iKToibGVmdFRvcCI9PT1yPyhjPXVbMF1bMF0sZD11WzFdWzFdLGk9KGY9Yy1wKS01LCJyaWdodCIpOiJsZWZ0Qm90dG9tIj09PXI/KGM9dVszXVswXSxkPXVbMl1bMV0saT0oZj1jLXApLTUsInJpZ2h0Iik6KGM9KHVbMV1bMF0rdVsyXVswXSkvMixkPSh1WzFdWzFdK3VbMl1bMV0pLzIsaT0oZj1jK3ApKzUsImxlZnQiKTtvPVtbYyxkXSxbZixkXV0sbj1kfWwubGFiZWw9e2xpbmVQb2ludHM6byx4OmkseTpuLHZlcnRpY2FsQWxpZ246Im1pZGRsZSIsdGV4dEFsaWduOmUsaW5zaWRlOmh9fSl9KG8pfSl9KSxwZih0eSgiZnVubmVsIikpO2Z1bmN0aW9uIEZ3KHQsZSxpLG4sbyl7RWcuY2FsbCh0aGlzLHQsZSxpKSx0aGlzLnR5cGU9bnx8InZhbHVlIix0aGlzLmF4aXNJbmRleD1vfUZ3LnByb3RvdHlwZT17Y29uc3RydWN0b3I6RncsbW9kZWw6bnVsbCxpc0hvcml6b250YWw6ZnVuY3Rpb24oKXtyZXR1cm4iaG9yaXpvbnRhbCIhPT10aGlzLmNvb3JkaW5hdGVTeXN0ZW0uZ2V0TW9kZWwoKS5nZXQoImxheW91dCIpfX0sdyhGdyxFZyk7ZnVuY3Rpb24gV3codCxlLGksbixvLGEpe3Q9dHx8MDt2YXIgcj1pWzFdLWlbMF07aWYobnVsbCE9byYmKG89WncobyxbMCxyXSkpLG51bGwhPWEmJihhPU1hdGgubWF4KGEsbnVsbCE9bz9vOjApKSwiYWxsIj09PW4pe3ZhciBzPU1hdGguYWJzKGVbMV0tZVswXSk7bz1hPVp3KHM9WncocyxbMCxyXSksW28sYV0pLG49MH1lWzBdPVp3KGVbMF0saSksZVsxXT1adyhlWzFdLGkpO3ZhciBsPUh3KGUsbik7ZVtuXSs9dDt2YXIgdT1vfHwwLGg9aS5zbGljZSgpO2wuc2lnbjwwP2hbMF0rPXU6aFsxXS09dSxlW25dPVp3KGVbbl0saCk7dmFyIGM9SHcoZSxuKTtyZXR1cm4gbnVsbCE9byYmKGMuc2lnbiE9PWwuc2lnbnx8Yy5zcGFuPG8pJiYoZVsxLW5dPWVbbl0rbC5zaWduKm8pLGM9SHcoZSxuKSxudWxsIT1hJiZjLnNwYW4+YSYmKGVbMS1uXT1lW25dK2Muc2lnbiphKSxlfWZ1bmN0aW9uIEh3KHQsZSl7dmFyIGk9dFtlXS10WzEtZV07cmV0dXJue3NwYW46TWF0aC5hYnMoaSksc2lnbjowPGk/LTE6aTwwPzE6ZT8tMToxfX1mdW5jdGlvbiBadyh0LGUpe3JldHVybiBNYXRoLm1pbihudWxsIT1lWzFdP2VbMV06MS8wLE1hdGgubWF4KG51bGwhPWVbMF0/ZVswXTotMS8wLHQpKX12YXIgVXc9RSxYdz1NYXRoLm1pbixZdz1NYXRoLm1heCxqdz1NYXRoLmZsb29yLHF3PU1hdGguY2VpbCxLdz1ObCwkdz1NYXRoLlBJO2Z1bmN0aW9uIEp3KHQsZSxpKXt0aGlzLl9heGVzTWFwPVEoKSx0aGlzLl9heGVzTGF5b3V0PXt9LHRoaXMuZGltZW5zaW9ucz10LmRpbWVuc2lvbnMsdGhpcy5fcmVjdCx0aGlzLl9tb2RlbD10LHRoaXMuX2luaXQodCxlLGkpfWZ1bmN0aW9uIFF3KHQsZSl7cmV0dXJuIFh3KFl3KHQsZVswXSksZVsxXSl9SncucHJvdG90eXBlPXt0eXBlOiJwYXJhbGxlbCIsY29uc3RydWN0b3I6SncsX2luaXQ6ZnVuY3Rpb24odCxyLGUpe3ZhciBpPXQuZGltZW5zaW9ucyxzPXQucGFyYWxsZWxBeGlzSW5kZXg7VXcoaSxmdW5jdGlvbih0LGUpe3ZhciBpPXNbZV0sbj1yLmdldENvbXBvbmVudCgicGFyYWxsZWxBeGlzIixpKSxvPXRoaXMuX2F4ZXNNYXAuc2V0KHQsbmV3IEZ3KHQsaWcobiksWzAsMF0sbi5nZXQoInR5cGUiKSxpKSksYT0iY2F0ZWdvcnkiPT09by50eXBlO28ub25CYW5kPWEmJm4uZ2V0KCJib3VuZGFyeUdhcCIpLG8uaW52ZXJzZT1uLmdldCgiaW52ZXJzZSIpLChuLmF4aXM9bykubW9kZWw9bixvLmNvb3JkaW5hdGVTeXN0ZW09bi5jb29yZGluYXRlU3lzdGVtPXRoaXN9LHRoaXMpfSx1cGRhdGU6ZnVuY3Rpb24odCxlKXt0aGlzLl91cGRhdGVBeGVzRnJvbVNlcmllcyh0aGlzLl9tb2RlbCx0KX0sY29udGFpblBvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21ha2VMYXlvdXRJbmZvKCksaT1lLmF4aXNCYXNlLG49ZS5sYXlvdXRCYXNlLG89ZS5waXhlbERpbUluZGV4LGE9dFsxLW9dLHI9dFtvXTtyZXR1cm4gaTw9YSYmYTw9aStlLmF4aXNMZW5ndGgmJm48PXImJnI8PW4rZS5sYXlvdXRMZW5ndGh9LGdldE1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGVsfSxfdXBkYXRlQXhlc0Zyb21TZXJpZXM6ZnVuY3Rpb24oZSxuKXtuLmVhY2hTZXJpZXMoZnVuY3Rpb24odCl7aWYoZS5jb250YWlucyh0LG4pKXt2YXIgaT10LmdldERhdGEoKTtVdyh0aGlzLmRpbWVuc2lvbnMsZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fYXhlc01hcC5nZXQodCk7ZS5zY2FsZS51bmlvbkV4dGVudEZyb21EYXRhKGksaS5tYXBEaW1lbnNpb24odCkpLGVnKGUuc2NhbGUsZS5tb2RlbCl9LHRoaXMpfX0sdGhpcyl9LHJlc2l6ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3JlY3Q9dnUodC5nZXRCb3hMYXlvdXRQYXJhbXMoKSx7d2lkdGg6ZS5nZXRXaWR0aCgpLGhlaWdodDplLmdldEhlaWdodCgpfSksdGhpcy5fbGF5b3V0QXhlcygpfSxnZXRSZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlY3R9LF9tYWtlTGF5b3V0SW5mbzpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fbW9kZWwsaT10aGlzLl9yZWN0LG49WyJ4IiwieSJdLG89WyJ3aWR0aCIsImhlaWdodCJdLGE9ZS5nZXQoImxheW91dCIpLHI9Imhvcml6b250YWwiPT09YT8wOjEscz1pW29bcl1dLGw9WzAsc10sdT10aGlzLmRpbWVuc2lvbnMubGVuZ3RoLGg9UXcoZS5nZXQoImF4aXNFeHBhbmRXaWR0aCIpLGwpLGM9UXcoZS5nZXQoImF4aXNFeHBhbmRDb3VudCIpfHwwLFswLHVdKSxkPWUuZ2V0KCJheGlzRXhwYW5kYWJsZSIpJiYzPHUmJmM8dSYmMTxjJiYwPGgmJjA8cyxmPWUuZ2V0KCJheGlzRXhwYW5kV2luZG93Iik7Zj8odD1RdyhmWzFdLWZbMF0sbCksZlsxXT1mWzBdK3QpOih0PVF3KGgqKGMtMSksbCksKGY9W2gqKGUuZ2V0KCJheGlzRXhwYW5kQ2VudGVyIil8fGp3KHUvMikpLXQvMl0pWzFdPWZbMF0rdCk7dmFyIHA9KHMtdCkvKHUtYyk7cDwzJiYocD0wKTt2YXIgZz1bancoS3coZlswXS9oLDEpKSsxLHF3KEt3KGZbMV0vaCwxKSktMV0sbT1wL2gqZlswXTtyZXR1cm57bGF5b3V0OmEscGl4ZWxEaW1JbmRleDpyLGxheW91dEJhc2U6aVtuW3JdXSxsYXlvdXRMZW5ndGg6cyxheGlzQmFzZTppW25bMS1yXV0sYXhpc0xlbmd0aDppW29bMS1yXV0sYXhpc0V4cGFuZGFibGU6ZCxheGlzRXhwYW5kV2lkdGg6aCxheGlzQ29sbGFwc2VXaWR0aDpwLGF4aXNFeHBhbmRXaW5kb3c6ZixheGlzQ291bnQ6dSx3aW5Jbm5lckluZGljZXM6ZyxheGlzRXhwYW5kV2luZG93MFBvczptfX0sX2xheW91dEF4ZXM6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLl9yZWN0LHQ9dGhpcy5fYXhlc01hcCxlPXRoaXMuZGltZW5zaW9ucyx1PXRoaXMuX21ha2VMYXlvdXRJbmZvKCksaD11LmxheW91dDt0LmVhY2goZnVuY3Rpb24odCl7dmFyIGU9WzAsdS5heGlzTGVuZ3RoXSxpPXQuaW52ZXJzZT8xOjA7dC5zZXRFeHRlbnQoZVtpXSxlWzEtaV0pfSksVXcoZSxmdW5jdGlvbih0LGUpe3ZhciBpPSh1LmF4aXNFeHBhbmRhYmxlP2Z1bmN0aW9uKHQsZSl7dmFyIGksbixvPWUubGF5b3V0TGVuZ3RoLGE9ZS5heGlzRXhwYW5kV2lkdGgscj1lLmF4aXNDb3VudCxzPWUuYXhpc0NvbGxhcHNlV2lkdGgsbD1lLndpbklubmVySW5kaWNlcyx1PXMsaD0hMTt0PGxbMF0/KGk9dCpzLG49cyk6dDw9bFsxXT8oaT1lLmF4aXNFeHBhbmRXaW5kb3cwUG9zK3QqYS1lLmF4aXNFeHBhbmRXaW5kb3dbMF0sdT1hLGg9ITApOihpPW8tKHItMS10KSpzLG49cyk7cmV0dXJue3Bvc2l0aW9uOmksYXhpc05hbWVBdmFpbGFibGVXaWR0aDp1LGF4aXNMYWJlbFNob3c6aCxuYW1lVHJ1bmNhdGVNYXhXaWR0aDpufX06ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmxheW91dExlbmd0aC8oZS5heGlzQ291bnQtMSk7cmV0dXJue3Bvc2l0aW9uOmkqdCxheGlzTmFtZUF2YWlsYWJsZVdpZHRoOmksYXhpc0xhYmVsU2hvdzohMH19KShlLHUpLG49e2hvcml6b250YWw6e3g6aS5wb3NpdGlvbix5OnUuYXhpc0xlbmd0aH0sdmVydGljYWw6e3g6MCx5OmkucG9zaXRpb259fSxvPXtob3Jpem9udGFsOiR3LzIsdmVydGljYWw6MH0sYT1bbltoXS54K2wueCxuW2hdLnkrbC55XSxyPW9baF0scz1lZSgpO3JlKHMscyxyKSxhZShzLHMsYSksdGhpcy5fYXhlc0xheW91dFt0XT17cG9zaXRpb246YSxyb3RhdGlvbjpyLHRyYW5zZm9ybTpzLGF4aXNOYW1lQXZhaWxhYmxlV2lkdGg6aS5heGlzTmFtZUF2YWlsYWJsZVdpZHRoLGF4aXNMYWJlbFNob3c6aS5heGlzTGFiZWxTaG93LG5hbWVUcnVuY2F0ZU1heFdpZHRoOmkubmFtZVRydW5jYXRlTWF4V2lkdGgsdGlja0RpcmVjdGlvbjoxLGxhYmVsRGlyZWN0aW9uOjF9fSx0aGlzKX0sZ2V0QXhpczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYXhlc01hcC5nZXQodCl9LGRhdGFUb1BvaW50OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuYXhpc0Nvb3JkVG9Qb2ludCh0aGlzLl9heGVzTWFwLmdldChlKS5kYXRhVG9Db29yZCh0KSxlKX0sZWFjaEFjdGl2ZVN0YXRlOmZ1bmN0aW9uKGUsdCxpLG4pe251bGw9PWkmJihpPTApLG51bGw9PW4mJihuPWUuY291bnQoKSk7dmFyIG89dGhpcy5fYXhlc01hcCxhPXRoaXMuZGltZW5zaW9ucyxyPVtdLHM9W107RShhLGZ1bmN0aW9uKHQpe3IucHVzaChlLm1hcERpbWVuc2lvbih0KSkscy5wdXNoKG8uZ2V0KHQpLm1vZGVsKX0pO2Zvcih2YXIgbD10aGlzLmhhc0F4aXNCcnVzaGVkKCksdT1pO3U8bjt1Kyspe3ZhciBoO2lmKGwpe2g9ImFjdGl2ZSI7Zm9yKHZhciBjPWUuZ2V0VmFsdWVzKHIsdSksZD0wLGY9YS5sZW5ndGg7ZDxmO2QrKyl7aWYoImluYWN0aXZlIj09PXNbZF0uZ2V0QWN0aXZlU3RhdGUoY1tkXSkpe2g9ImluYWN0aXZlIjticmVha319fWVsc2UgaD0ibm9ybWFsIjt0KGgsdSl9fSxoYXNBeGlzQnJ1c2hlZDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmRpbWVuc2lvbnMsZT10aGlzLl9heGVzTWFwLGk9ITEsbj0wLG89dC5sZW5ndGg7bjxvO24rKykibm9ybWFsIiE9PWUuZ2V0KHRbbl0pLm1vZGVsLmdldEFjdGl2ZVN0YXRlKCkmJihpPSEwKTtyZXR1cm4gaX0sYXhpc0Nvb3JkVG9Qb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiBobChbdCwwXSx0aGlzLl9heGVzTGF5b3V0W2VdLnRyYW5zZm9ybSl9LGdldEF4aXNMYXlvdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIEQodGhpcy5fYXhlc0xheW91dFt0XSl9LGdldFNsaWRlZEF4aXNFeHBhbmRXaW5kb3c6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFrZUxheW91dEluZm8oKSxpPWUucGl4ZWxEaW1JbmRleCxuPWUuYXhpc0V4cGFuZFdpbmRvdy5zbGljZSgpLG89blsxXS1uWzBdLGE9WzAsZS5heGlzRXhwYW5kV2lkdGgqKGUuYXhpc0NvdW50LTEpXTtpZighdGhpcy5jb250YWluUG9pbnQodCkpcmV0dXJue2JlaGF2aW9yOiJub25lIixheGlzRXhwYW5kV2luZG93Om59O3ZhciByLHM9dFtpXS1lLmxheW91dEJhc2UtZS5heGlzRXhwYW5kV2luZG93MFBvcyxsPSJzbGlkZSIsdT1lLmF4aXNDb2xsYXBzZVdpZHRoLGg9dGhpcy5fbW9kZWwuZ2V0KCJheGlzRXhwYW5kU2xpZGVUcmlnZ2VyQXJlYSIpLGM9bnVsbCE9aFswXTtpZih1KWMmJnUmJnM8bypoWzBdPyhsPSJqdW1wIixyPXMtbypoWzJdKTpjJiZ1JiZzPm8qKDEtaFswXSk/KGw9Imp1bXAiLHI9cy1vKigxLWhbMl0pKTowPD0ocj1zLW8qaFsxXSkmJihyPXMtbyooMS1oWzFdKSk8PTAmJihyPTApLChyKj1lLmF4aXNFeHBhbmRXaWR0aC91KT9XdyhyLG4sYSwiYWxsIik6bD0ibm9uZSI7ZWxzZXtvPW5bMV0tblswXTsobj1bWXcoMCxhWzFdKnMvby1vLzIpXSlbMV09WHcoYVsxXSxuWzBdK28pLG5bMF09blsxXS1vfXJldHVybntheGlzRXhwYW5kV2luZG93Om4sYmVoYXZpb3I6bH19fSxuaC5yZWdpc3RlcigicGFyYWxsZWwiLHtjcmVhdGU6ZnVuY3Rpb24obixvKXt2YXIgYT1bXTtyZXR1cm4gbi5lYWNoQ29tcG9uZW50KCJwYXJhbGxlbCIsZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgSncodCxuLG8pO2kubmFtZT0icGFyYWxsZWxfIitlLGkucmVzaXplKHQsbyksKHQuY29vcmRpbmF0ZVN5c3RlbT1pKS5tb2RlbD10LGEucHVzaChpKX0pLG4uZWFjaFNlcmllcyhmdW5jdGlvbih0KXtpZigicGFyYWxsZWwiPT09dC5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKSl7dmFyIGU9bi5xdWVyeUNvbXBvbmVudHMoe21haW5UeXBlOiJwYXJhbGxlbCIsaW5kZXg6dC5nZXQoInBhcmFsbGVsSW5kZXgiKSxpZDp0LmdldCgicGFyYWxsZWxJZCIpfSlbMF07dC5jb29yZGluYXRlU3lzdGVtPWUuY29vcmRpbmF0ZVN5c3RlbX19KSxhfX0pO3ZhciB0Yj1UdS5leHRlbmQoe3R5cGU6ImJhc2VQYXJhbGxlbEF4aXMiLGF4aXM6bnVsbCxhY3RpdmVJbnRlcnZhbHM6W10sZ2V0QXJlYVNlbGVjdFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHJhKFtbImZpbGwiLCJjb2xvciJdLFsibGluZVdpZHRoIiwiYm9yZGVyV2lkdGgiXSxbInN0cm9rZSIsImJvcmRlckNvbG9yIl0sWyJ3aWR0aCIsIndpZHRoIl0sWyJvcGFjaXR5Iiwib3BhY2l0eSJdXSkodGhpcy5nZXRNb2RlbCgiYXJlYVNlbGVjdFN0eWxlIikpfSxzZXRBY3RpdmVJbnRlcnZhbHM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5hY3RpdmVJbnRlcnZhbHM9RCh0KTtpZihlKWZvcih2YXIgaT1lLmxlbmd0aC0xOzA8PWk7aS0tKU9sKGVbaV0pfSxnZXRBY3RpdmVTdGF0ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmFjdGl2ZUludGVydmFscztpZighZS5sZW5ndGgpcmV0dXJuIm5vcm1hbCI7aWYobnVsbD09dHx8aXNOYU4odCkpcmV0dXJuImluYWN0aXZlIjtpZigxPT09ZS5sZW5ndGgpe3ZhciBpPWVbMF07aWYoaVswXTw9dCYmdDw9aVsxXSlyZXR1cm4iYWN0aXZlIn1lbHNlIGZvcih2YXIgbj0wLG89ZS5sZW5ndGg7bjxvO24rKylpZihlW25dWzBdPD10JiZ0PD1lW25dWzFdKXJldHVybiJhY3RpdmUiO3JldHVybiJpbmFjdGl2ZSJ9fSk7bSh0Yi5wcm90b3R5cGUsc2cpLE9tKCJwYXJhbGxlbCIsdGIsZnVuY3Rpb24odCxlKXtyZXR1cm4gZS50eXBlfHwoZS5kYXRhPyJjYXRlZ29yeSI6InZhbHVlIil9LHt0eXBlOiJ2YWx1ZSIsZGltOm51bGwsYXJlYVNlbGVjdFN0eWxlOnt3aWR0aDoyMCxib3JkZXJXaWR0aDoxLGJvcmRlckNvbG9yOiJyZ2JhKDE2MCwxOTcsMjMyKSIsY29sb3I6InJnYmEoMTYwLDE5NywyMzIpIixvcGFjaXR5Oi4zfSxyZWFsdGltZTohMCx6OjEwfSksVHUuZXh0ZW5kKHt0eXBlOiJwYXJhbGxlbCIsZGVwZW5kZW5jaWVzOlsicGFyYWxsZWxBeGlzIl0sY29vcmRpbmF0ZVN5c3RlbTpudWxsLGRpbWVuc2lvbnM6bnVsbCxwYXJhbGxlbEF4aXNJbmRleDpudWxsLGxheW91dE1vZGU6ImJveCIsZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejowLGxlZnQ6ODAsdG9wOjYwLHJpZ2h0OjgwLGJvdHRvbTo2MCxsYXlvdXQ6Imhvcml6b250YWwiLGF4aXNFeHBhbmRhYmxlOiExLGF4aXNFeHBhbmRDZW50ZXI6bnVsbCxheGlzRXhwYW5kQ291bnQ6MCxheGlzRXhwYW5kV2lkdGg6NTAsYXhpc0V4cGFuZFJhdGU6MTcsYXhpc0V4cGFuZERlYm91bmNlOjUwLGF4aXNFeHBhbmRTbGlkZVRyaWdnZXJBcmVhOlstLjE1LC4wNSwuNF0sYXhpc0V4cGFuZFRyaWdnZXJPbjoiY2xpY2siLHBhcmFsbGVsQXhpc0RlZmF1bHQ6bnVsbH0saW5pdDpmdW5jdGlvbigpe1R1LnByb3RvdHlwZS5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLm1lcmdlT3B0aW9uKHt9KX0sbWVyZ2VPcHRpb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb247dCYmbShlLHQsITApLHRoaXMuX2luaXREaW1lbnNpb25zKCl9LGNvbnRhaW5zOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXQoInBhcmFsbGVsSW5kZXgiKTtyZXR1cm4gbnVsbCE9aSYmZS5nZXRDb21wb25lbnQoInBhcmFsbGVsIixpKT09PXRoaXN9LHNldEF4aXNFeHBhbmQ6ZnVuY3Rpb24oZSl7RShbImF4aXNFeHBhbmRhYmxlIiwiYXhpc0V4cGFuZENlbnRlciIsImF4aXNFeHBhbmRDb3VudCIsImF4aXNFeHBhbmRXaWR0aCIsImF4aXNFeHBhbmRXaW5kb3ciXSxmdW5jdGlvbih0KXtlLmhhc093blByb3BlcnR5KHQpJiYodGhpcy5vcHRpb25bdF09ZVt0XSl9LHRoaXMpfSxfaW5pdERpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRpbWVuc2lvbnM9W10saT10aGlzLnBhcmFsbGVsQXhpc0luZGV4PVtdO0UoTSh0aGlzLmRlcGVuZGVudE1vZGVscy5wYXJhbGxlbEF4aXMsZnVuY3Rpb24odCl7cmV0dXJuKHQuZ2V0KCJwYXJhbGxlbEluZGV4Iil8fDApPT09dGhpcy5jb21wb25lbnRJbmRleH0sdGhpcyksZnVuY3Rpb24odCl7ZS5wdXNoKCJkaW0iK3QuZ2V0KCJkaW0iKSksaS5wdXNoKHQuY29tcG9uZW50SW5kZXgpfSl9fSk7Z2Yoe3R5cGU6ImF4aXNBcmVhU2VsZWN0IixldmVudDoiYXhpc0FyZWFTZWxlY3RlZCJ9LGZ1bmN0aW9uKGUsdCl7dC5lYWNoQ29tcG9uZW50KHttYWluVHlwZToicGFyYWxsZWxBeGlzIixxdWVyeTplfSxmdW5jdGlvbih0KXt0LmF4aXMubW9kZWwuc2V0QWN0aXZlSW50ZXJ2YWxzKGUuaW50ZXJ2YWxzKX0pfSksZ2YoInBhcmFsbGVsQXhpc0V4cGFuZCIsZnVuY3Rpb24oZSx0KXt0LmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJwYXJhbGxlbCIscXVlcnk6ZX0sZnVuY3Rpb24odCl7dC5zZXRBeGlzRXhwYW5kKGUpfSl9KTt2YXIgZWI9VCxpYj1FLG5iPU4sb2I9TWF0aC5taW4sYWI9TWF0aC5tYXgscmI9TWF0aC5wb3csc2I9MWU0LGxiPTYsdWI9NixoYj0iZ2xvYmFsUGFuIixjYj17dzpbMCwwXSxlOlswLDFdLG46WzEsMF0sczpbMSwxXX0sZGI9e3c6ImV3IixlOiJldyIsbjoibnMiLHM6Im5zIixuZToibmVzdyIsc3c6Im5lc3ciLG53OiJud3NlIixzZToibndzZSJ9LGZiPXticnVzaFN0eWxlOntsaW5lV2lkdGg6MixzdHJva2U6InJnYmEoMCwwLDAsMC4zKSIsZmlsbDoicmdiYSgwLDAsMCwwLjEpIn0sdHJhbnNmb3JtYWJsZTohMCxicnVzaE1vZGU6InNpbmdsZSIscmVtb3ZlT25DbGljazohMX0scGI9MDtmdW5jdGlvbiBnYih0KXtDdC5jYWxsKHRoaXMpLHRoaXMuX3pyPXQsdGhpcy5ncm91cD1uZXcgSWksdGhpcy5fYnJ1c2hUeXBlLHRoaXMuX2JydXNoT3B0aW9uLHRoaXMuX3BhbmVscyx0aGlzLl90cmFjaz1bXSx0aGlzLl9kcmFnZ2luZyx0aGlzLl9jb3ZlcnM9W10sdGhpcy5fY3JlYXRpbmdDb3Zlcix0aGlzLl9jcmVhdGluZ1BhbmVsLHRoaXMuX2VuYWJsZUdsb2JhbFBhbix0aGlzLl91aWQ9ImJydXNoQ29udHJvbGxlcl8iK3BiKyssdGhpcy5faGFuZGxlcnM9e30saWIoRmIsZnVuY3Rpb24odCxlKXt0aGlzLl9oYW5kbGVyc1tlXT1BKHQsdGhpcyl9LHRoaXMpfWZ1bmN0aW9uIG1iKHQsZSl7dmFyIGk9SGJbZS5icnVzaFR5cGVdLmNyZWF0ZUNvdmVyKHQsZSk7cmV0dXJuIGkuX19icnVzaE9wdGlvbj1lLHhiKGksZSksdC5ncm91cC5hZGQoaSksaX1mdW5jdGlvbiB2Yih0LGUpe3ZhciBpPXdiKGUpO3JldHVybiBpLmVuZENyZWF0aW5nJiYoaS5lbmRDcmVhdGluZyh0LGUpLHhiKGUsZS5fX2JydXNoT3B0aW9uKSksZX1mdW5jdGlvbiB5Yih0LGUpe3ZhciBpPWUuX19icnVzaE9wdGlvbjt3YihlKS51cGRhdGVDb3ZlclNoYXBlKHQsZSxpLnJhbmdlLGkpfWZ1bmN0aW9uIHhiKHQsZSl7dmFyIGk9ZS56O251bGw9PWkmJihpPXNiKSx0LnRyYXZlcnNlKGZ1bmN0aW9uKHQpe3Quej1pLHQuejI9aX0pfWZ1bmN0aW9uIF9iKHQsZSl7d2IoZSkudXBkYXRlQ29tbW9uKHQsZSkseWIodCxlKX1mdW5jdGlvbiB3Yih0KXtyZXR1cm4gSGJbdC5fX2JydXNoT3B0aW9uLmJydXNoVHlwZV19ZnVuY3Rpb24gYmIodCxlLGkpe3ZhciBuLG89dC5fcGFuZWxzO2lmKCFvKXJldHVybiEwO3ZhciBhPXQuX3RyYW5zZm9ybTtyZXR1cm4gaWIobyxmdW5jdGlvbih0KXt0LmlzVGFyZ2V0QnlDdXJzb3IoZSxpLGEpJiYobj10KX0pLG59ZnVuY3Rpb24gU2IodCxlKXt2YXIgaT10Ll9wYW5lbHM7aWYoIWkpcmV0dXJuITA7dmFyIG49ZS5fX2JydXNoT3B0aW9uLnBhbmVsSWQ7cmV0dXJuIG51bGw9PW58fGlbbl19ZnVuY3Rpb24gTWIoZSl7dmFyIHQ9ZS5fY292ZXJzLGk9dC5sZW5ndGg7cmV0dXJuIGliKHQsZnVuY3Rpb24odCl7ZS5ncm91cC5yZW1vdmUodCl9LGUpLHQubGVuZ3RoPTAsISFpfWZ1bmN0aW9uIEliKHQsZSl7dmFyIGk9bmIodC5fY292ZXJzLGZ1bmN0aW9uKHQpe3ZhciBlPXQuX19icnVzaE9wdGlvbixpPUQoZS5yYW5nZSk7cmV0dXJue2JydXNoVHlwZTplLmJydXNoVHlwZSxwYW5lbElkOmUucGFuZWxJZCxyYW5nZTppfX0pO3QudHJpZ2dlcigiYnJ1c2giLGkse2lzRW5kOiEhZS5pc0VuZCxyZW1vdmVPbkNsaWNrOiEhZS5yZW1vdmVPbkNsaWNrfSl9ZnVuY3Rpb24gVGIodCl7dmFyIGU9dC5sZW5ndGgtMTtyZXR1cm4gZTwwJiYoZT0wKSxbdFswXSx0W2VdXX1mdW5jdGlvbiBBYihlLGksdCxuKXt2YXIgbz1uZXcgSWk7cmV0dXJuIG8uYWRkKG5ldyBpcyh7bmFtZToibWFpbiIsc3R5bGU6a2IodCksc2lsZW50OiEwLGRyYWdnYWJsZTohMCxjdXJzb3I6Im1vdmUiLGRyaWZ0OmViKGUsaSxvLCJuc3dlIiksb25kcmFnZW5kOmViKEliLGkse2lzRW5kOiEwfSl9KSksaWIobixmdW5jdGlvbih0KXtvLmFkZChuZXcgaXMoe25hbWU6dCxzdHlsZTp7b3BhY2l0eTowfSxkcmFnZ2FibGU6ITAsc2lsZW50OiEwLGludmlzaWJsZTohMCxkcmlmdDplYihlLGksbyx0KSxvbmRyYWdlbmQ6ZWIoSWIsaSx7aXNFbmQ6ITB9KX0pKX0pLG99ZnVuY3Rpb24gRGIodCxlLGksbil7dmFyIG89bi5icnVzaFN0eWxlLmxpbmVXaWR0aHx8MCxhPWFiKG8sdWIpLHI9aVswXVswXSxzPWlbMV1bMF0sbD1yLW8vMix1PXMtby8yLGg9aVswXVsxXSxjPWlbMV1bMV0sZD1oLWErby8yLGY9Yy1hK28vMixwPWgtcixnPWMtcyxtPXArbyx2PWcrbztMYih0LGUsIm1haW4iLHIscyxwLGcpLG4udHJhbnNmb3JtYWJsZSYmKExiKHQsZSwidyIsbCx1LGEsdiksTGIodCxlLCJlIixkLHUsYSx2KSxMYih0LGUsIm4iLGwsdSxtLGEpLExiKHQsZSwicyIsbCxmLG0sYSksTGIodCxlLCJudyIsbCx1LGEsYSksTGIodCxlLCJuZSIsZCx1LGEsYSksTGIodCxlLCJzdyIsbCxmLGEsYSksTGIodCxlLCJzZSIsZCxmLGEsYSkpfWZ1bmN0aW9uIENiKG4sbyl7dmFyIHQ9by5fX2JydXNoT3B0aW9uLGE9dC50cmFuc2Zvcm1hYmxlLGU9by5jaGlsZEF0KDApO2UudXNlU3R5bGUoa2IodCkpLGUuYXR0cih7c2lsZW50OiFhLGN1cnNvcjphPyJtb3ZlIjoiZGVmYXVsdCJ9KSxpYihbInciLCJlIiwibiIsInMiLCJzZSIsInN3IiwibmUiLCJudyJdLGZ1bmN0aW9uKHQpe3ZhciBlPW8uY2hpbGRPZk5hbWUodCksaT1mdW5jdGlvbiB0KGUsaSl7e2lmKDE8aS5sZW5ndGgpe2k9aS5zcGxpdCgiIik7dmFyIG49W3QoZSxpWzBdKSx0KGUsaVsxXSldO3JldHVybiJlIiE9PW5bMF0mJiJ3IiE9PW5bMF18fG4ucmV2ZXJzZSgpLG4uam9pbigiIil9dmFyIG89e3c6ImxlZnQiLGU6InJpZ2h0IixuOiJ0b3AiLHM6ImJvdHRvbSJ9LGE9e2xlZnQ6InciLHJpZ2h0OiJlIix0b3A6Im4iLGJvdHRvbToicyJ9LG49Y2wob1tpXSx1bChlLmdyb3VwKSk7cmV0dXJuIGFbbl19fShuLHQpO2UmJmUuYXR0cih7c2lsZW50OiFhLGludmlzaWJsZTohYSxjdXJzb3I6YT9kYltpXSsiLXJlc2l6ZSI6bnVsbH0pfSl9ZnVuY3Rpb24gTGIodCxlLGksbixvLGEscil7dmFyIHM9ZS5jaGlsZE9mTmFtZShpKTtzJiZzLnNldFNoYXBlKGZ1bmN0aW9uKHQpe3ZhciBlPW9iKHRbMF1bMF0sdFsxXVswXSksaT1vYih0WzBdWzFdLHRbMV1bMV0pLG49YWIodFswXVswXSx0WzFdWzBdKSxvPWFiKHRbMF1bMV0sdFsxXVsxXSk7cmV0dXJue3g6ZSx5Omksd2lkdGg6bi1lLGhlaWdodDpvLWl9fSh6Yih0LGUsW1tuLG9dLFtuK2EsbytyXV0pKSl9ZnVuY3Rpb24ga2IodCl7cmV0dXJuIEMoe3N0cm9rZU5vU2NhbGU6ITB9LHQuYnJ1c2hTdHlsZSl9ZnVuY3Rpb24gUGIodCxlLGksbil7dmFyIG89W29iKHQsaSksb2IoZSxuKV0sYT1bYWIodCxpKSxhYihlLG4pXTtyZXR1cm5bW29bMF0sYVswXV0sW29bMV0sYVsxXV1dfWZ1bmN0aW9uIE5iKHQsZSxpLG4sbyxhLHIscyl7dmFyIGw9bi5fX2JydXNoT3B0aW9uLHU9dChsLnJhbmdlKSxoPUViKGksYSxyKTtpYihvLnNwbGl0KCIiKSxmdW5jdGlvbih0KXt2YXIgZT1jYlt0XTt1W2VbMF1dW2VbMV1dKz1oW2VbMF1dfSksbC5yYW5nZT1lKFBiKHVbMF1bMF0sdVsxXVswXSx1WzBdWzFdLHVbMV1bMV0pKSxfYihpLG4pLEliKGkse2lzRW5kOiExfSl9ZnVuY3Rpb24gT2IodCxlLGksbixvKXt2YXIgYT1lLl9fYnJ1c2hPcHRpb24ucmFuZ2Uscj1FYih0LGksbik7aWIoYSxmdW5jdGlvbih0KXt0WzBdKz1yWzBdLHRbMV0rPXJbMV19KSxfYih0LGUpLEliKHQse2lzRW5kOiExfSl9ZnVuY3Rpb24gRWIodCxlLGkpe3ZhciBuPXQuZ3JvdXAsbz1uLnRyYW5zZm9ybUNvb3JkVG9Mb2NhbChlLGkpLGE9bi50cmFuc2Zvcm1Db29yZFRvTG9jYWwoMCwwKTtyZXR1cm5bb1swXS1hWzBdLG9bMV0tYVsxXV19ZnVuY3Rpb24gemIodCxlLGkpe3ZhciBuPVNiKHQsZSk7cmV0dXJuIG4mJiEwIT09bj9uLmNsaXBQYXRoKGksdC5fdHJhbnNmb3JtKTpEKGkpfWZ1bmN0aW9uIFJiKHQpe3ZhciBlPXQuZXZlbnQ7ZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfWZ1bmN0aW9uIEJiKHQsZSxpKXtyZXR1cm4gdC5jaGlsZE9mTmFtZSgibWFpbiIpLmNvbnRhaW4oZSxpKX1mdW5jdGlvbiBWYih0LGUsaSxuKXt2YXIgbyxhPXQuX2NyZWF0aW5nQ292ZXIscj10Ll9jcmVhdGluZ1BhbmVsLHM9dC5fYnJ1c2hPcHRpb247aWYodC5fdHJhY2sucHVzaChpLnNsaWNlKCkpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuX3RyYWNrO2lmKCFlLmxlbmd0aClyZXR1cm4hMTt2YXIgaT1lW2UubGVuZ3RoLTFdLG49ZVswXSxvPWlbMF0tblswXSxhPWlbMV0tblsxXSxyPXJiKG8qbythKmEsLjUpO3JldHVybiBsYjxyfSh0KXx8YSl7aWYociYmIWEpeyJzaW5nbGUiPT09cy5icnVzaE1vZGUmJk1iKHQpO3ZhciBsPUQocyk7bC5icnVzaFR5cGU9R2IobC5icnVzaFR5cGUsciksbC5wYW5lbElkPSEwPT09cj9udWxsOnIucGFuZWxJZCxhPXQuX2NyZWF0aW5nQ292ZXI9bWIodCxsKSx0Ll9jb3ZlcnMucHVzaChhKX1pZihhKXt2YXIgdT1IYltHYih0Ll9icnVzaFR5cGUscildO2EuX19icnVzaE9wdGlvbi5yYW5nZT11LmdldENyZWF0aW5nUmFuZ2UoemIodCxhLHQuX3RyYWNrKSksbiYmKHZiKHQsYSksdS51cGRhdGVDb21tb24odCxhKSkseWIodCxhKSxvPXtpc0VuZDpufX19ZWxzZSBuJiYic2luZ2xlIj09PXMuYnJ1c2hNb2RlJiZzLnJlbW92ZU9uQ2xpY2smJmJiKHQsZSxpKSYmTWIodCkmJihvPXtpc0VuZDpuLHJlbW92ZU9uQ2xpY2s6ITB9KTtyZXR1cm4gb31mdW5jdGlvbiBHYih0LGUpe3JldHVybiJhdXRvIj09PXQ/ZS5kZWZhdWx0QnJ1c2hUeXBlOnR9Z2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpnYixlbmFibGVCcnVzaDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYnJ1c2hUeXBlJiZmdW5jdGlvbih0KXt2YXIgZT10Ll96cjsoZnVuY3Rpb24odCxlLGkpe3ZhciBuPUN5KHQpO25bZV09PT1pJiYobltlXT1udWxsKX0pKGUsaGIsdC5fdWlkKSxmdW5jdGlvbihpLHQpe2liKHQsZnVuY3Rpb24odCxlKXtpLm9mZihlLHQpfSl9KGUsdC5faGFuZGxlcnMpLHQuX2JydXNoVHlwZT10Ll9icnVzaE9wdGlvbj1udWxsfSh0aGlzKSx0LmJydXNoVHlwZSYmZnVuY3Rpb24odCxlKXt2YXIgaT10Ll96cjt0Ll9lbmFibGVHbG9iYWxQYW58fGZ1bmN0aW9uKHQsZSxpKXtDeSh0KVtlXT1pfShpLGhiLHQuX3VpZCk7KGZ1bmN0aW9uKGksdCl7aWIodCxmdW5jdGlvbih0LGUpe2kub24oZSx0KX0pfSkoaSx0Ll9oYW5kbGVycyksdC5fYnJ1c2hUeXBlPWUuYnJ1c2hUeXBlLHQuX2JydXNoT3B0aW9uPW0oRChmYiksZSwhMCl9KHRoaXMsdCksdGhpc30sc2V0UGFuZWxzOmZ1bmN0aW9uKHQpe2lmKHQmJnQubGVuZ3RoKXt2YXIgZT10aGlzLl9wYW5lbHM9e307RSh0LGZ1bmN0aW9uKHQpe2VbdC5wYW5lbElkXT1EKHQpfSl9ZWxzZSB0aGlzLl9wYW5lbHM9bnVsbDtyZXR1cm4gdGhpc30sbW91bnQ6ZnVuY3Rpb24odCl7dD10fHx7fSx0aGlzLl9lbmFibGVHbG9iYWxQYW49dC5lbmFibGVHbG9iYWxQYW47dmFyIGU9dGhpcy5ncm91cDtyZXR1cm4gdGhpcy5fenIuYWRkKGUpLGUuYXR0cih7cG9zaXRpb246dC5wb3NpdGlvbnx8WzAsMF0scm90YXRpb246dC5yb3RhdGlvbnx8MCxzY2FsZTp0LnNjYWxlfHxbMSwxXX0pLHRoaXMuX3RyYW5zZm9ybT1lLmdldExvY2FsVHJhbnNmb3JtKCksdGhpc30sZWFjaENvdmVyOmZ1bmN0aW9uKHQsZSl7aWIodGhpcy5fY292ZXJzLHQsZSl9LHVwZGF0ZUNvdmVyczpmdW5jdGlvbihvKXtvPU4obyxmdW5jdGlvbih0KXtyZXR1cm4gbShEKGZiKSx0LCEwKX0pO3ZhciBpPSJcMC1icnVzaC1pbmRleC0iLGE9dGhpcy5fY292ZXJzLHI9dGhpcy5fY292ZXJzPVtdLHM9dGhpcyxsPXRoaXMuX2NyZWF0aW5nQ292ZXI7cmV0dXJuIG5ldyBUZihhLG8sZnVuY3Rpb24odCxlKXtyZXR1cm4gbih0Ll9fYnJ1c2hPcHRpb24sZSl9LG4pLmFkZCh0KS51cGRhdGUodCkucmVtb3ZlKGZ1bmN0aW9uKHQpe2FbdF0hPT1sJiZzLmdyb3VwLnJlbW92ZShhW3RdKX0pLmV4ZWN1dGUoKSx0aGlzO2Z1bmN0aW9uIG4odCxlKXtyZXR1cm4obnVsbCE9dC5pZD90LmlkOmkrZSkrIi0iK3QuYnJ1c2hUeXBlfWZ1bmN0aW9uIHQodCxlKXt2YXIgaT1vW3RdO2lmKG51bGwhPWUmJmFbZV09PT1sKXJbdF09YVtlXTtlbHNle3ZhciBuPXJbdF09bnVsbCE9ZT8oYVtlXS5fX2JydXNoT3B0aW9uPWksYVtlXSk6dmIocyxtYihzLGkpKTtfYihzLG4pfX19LHVubW91bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVCcnVzaCghMSksTWIodGhpcyksdGhpcy5fenIucmVtb3ZlKHRoaXMuZ3JvdXApLHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLnVubW91bnQoKSx0aGlzLm9mZigpfX0sYihnYixDdCk7dmFyIEZiPXttb3VzZWRvd246ZnVuY3Rpb24odCl7aWYodGhpcy5fZHJhZ2dpbmcpV2IodGhpcyx0KTtlbHNlIGlmKCF0LnRhcmdldHx8IXQudGFyZ2V0LmRyYWdnYWJsZSl7UmIodCk7dmFyIGU9dGhpcy5ncm91cC50cmFuc2Zvcm1Db29yZFRvTG9jYWwodC5vZmZzZXRYLHQub2Zmc2V0WSk7dGhpcy5fY3JlYXRpbmdDb3Zlcj1udWxsLCh0aGlzLl9jcmVhdGluZ1BhbmVsPWJiKHRoaXMsdCxlKSkmJih0aGlzLl9kcmFnZ2luZz0hMCx0aGlzLl90cmFjaz1bZS5zbGljZSgpXSl9fSxtb3VzZW1vdmU6ZnVuY3Rpb24odCl7dmFyIGU9dC5vZmZzZXRYLGk9dC5vZmZzZXRZLG49dGhpcy5ncm91cC50cmFuc2Zvcm1Db29yZFRvTG9jYWwoZSxpKTtpZihmdW5jdGlvbih0LGUsaSl7aWYodC5fYnJ1c2hUeXBlJiYhZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuX3pyO3JldHVybiBlPDB8fGU+bi5nZXRXaWR0aCgpfHxpPDB8fGk+bi5nZXRIZWlnaHQoKX0odCxlKSl7dmFyIG49dC5fenIsbz10Ll9jb3ZlcnMsYT1iYih0LGUsaSk7aWYoIXQuX2RyYWdnaW5nKWZvcih2YXIgcj0wO3I8by5sZW5ndGg7cisrKXt2YXIgcz1vW3JdLl9fYnJ1c2hPcHRpb247aWYoYSYmKCEwPT09YXx8cy5wYW5lbElkPT09YS5wYW5lbElkKSYmSGJbcy5icnVzaFR5cGVdLmNvbnRhaW4ob1tyXSxpWzBdLGlbMV0pKXJldHVybn1hJiZuLnNldEN1cnNvclN0eWxlKCJjcm9zc2hhaXIiKX19KHRoaXMsdCxuKSx0aGlzLl9kcmFnZ2luZyl7UmIodCk7dmFyIG89VmIodGhpcyx0LG4sITEpO28mJkliKHRoaXMsbyl9fSxtb3VzZXVwOmZ1bmN0aW9uKHQpe1diKHRoaXMsdCl9fTtmdW5jdGlvbiBXYih0LGUpe2lmKHQuX2RyYWdnaW5nKXtSYihlKTt2YXIgaT1lLm9mZnNldFgsbj1lLm9mZnNldFksbz10Lmdyb3VwLnRyYW5zZm9ybUNvb3JkVG9Mb2NhbChpLG4pLGE9VmIodCxlLG8sITApO3QuX2RyYWdnaW5nPSExLHQuX3RyYWNrPVtdLHQuX2NyZWF0aW5nQ292ZXI9bnVsbCxhJiZJYih0LGEpfX12YXIgSGI9e2xpbmVYOlpiKDApLGxpbmVZOlpiKDEpLHJlY3Q6e2NyZWF0ZUNvdmVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIEFiKGViKE5iLGZ1bmN0aW9uKHQpe3JldHVybiB0fSxmdW5jdGlvbih0KXtyZXR1cm4gdH0pLHQsZSxbInciLCJlIiwibiIsInMiLCJzZSIsInN3IiwibmUiLCJudyJdKX0sZ2V0Q3JlYXRpbmdSYW5nZTpmdW5jdGlvbih0KXt2YXIgZT1UYih0KTtyZXR1cm4gUGIoZVsxXVswXSxlWzFdWzFdLGVbMF1bMF0sZVswXVsxXSl9LHVwZGF0ZUNvdmVyU2hhcGU6ZnVuY3Rpb24odCxlLGksbil7RGIodCxlLGksbil9LHVwZGF0ZUNvbW1vbjpDYixjb250YWluOkJifSxwb2x5Z29uOntjcmVhdGVDb3ZlcjpmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBJaTtyZXR1cm4gaS5hZGQobmV3IEtyKHtuYW1lOiJtYWluIixzdHlsZTprYihlKSxzaWxlbnQ6ITB9KSksaX0sZ2V0Q3JlYXRpbmdSYW5nZTpmdW5jdGlvbih0KXtyZXR1cm4gdH0sZW5kQ3JlYXRpbmc6ZnVuY3Rpb24odCxlKXtlLnJlbW92ZShlLmNoaWxkQXQoMCkpLGUuYWRkKG5ldyBxcih7bmFtZToibWFpbiIsZHJhZ2dhYmxlOiEwLGRyaWZ0OmViKE9iLHQsZSksb25kcmFnZW5kOmViKEliLHQse2lzRW5kOiEwfSl9KSl9LHVwZGF0ZUNvdmVyU2hhcGU6ZnVuY3Rpb24odCxlLGksbil7ZS5jaGlsZEF0KDApLnNldFNoYXBlKHtwb2ludHM6emIodCxlLGkpfSl9LHVwZGF0ZUNvbW1vbjpDYixjb250YWluOkJifX07ZnVuY3Rpb24gWmIobCl7cmV0dXJue2NyZWF0ZUNvdmVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIEFiKGViKE5iLGZ1bmN0aW9uKHQpe3ZhciBlPVt0LFswLDEwMF1dO3JldHVybiBsJiZlLnJldmVyc2UoKSxlfSxmdW5jdGlvbih0KXtyZXR1cm4gdFtsXX0pLHQsZSxbWyJ3IiwiZSJdLFsibiIsInMiXV1bbF0pfSxnZXRDcmVhdGluZ1JhbmdlOmZ1bmN0aW9uKHQpe3ZhciBlPVRiKHQpO3JldHVybltvYihlWzBdW2xdLGVbMV1bbF0pLGFiKGVbMF1bbF0sZVsxXVtsXSldfSx1cGRhdGVDb3ZlclNoYXBlOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvLGE9U2IodCxlKTtpZighMCE9PWEmJmEuZ2V0TGluZWFyQnJ1c2hPdGhlckV4dGVudClvPWEuZ2V0TGluZWFyQnJ1c2hPdGhlckV4dGVudChsLHQuX3RyYW5zZm9ybSk7ZWxzZXt2YXIgcj10Ll96cjtvPVswLFtyLmdldFdpZHRoKCksci5nZXRIZWlnaHQoKV1bMS1sXV19dmFyIHM9W2ksb107bCYmcy5yZXZlcnNlKCksRGIodCxlLHMsbil9LHVwZGF0ZUNvbW1vbjpDYixjb250YWluOkJifX1mdW5jdGlvbiBVYihpKXtyZXR1cm4gaT1qYihpKSxmdW5jdGlvbih0LGUpe3JldHVybiBmbCh0LGkpfX1mdW5jdGlvbiBYYihvLGEpe3JldHVybiBvPWpiKG8pLGZ1bmN0aW9uKHQpe3ZhciBlPW51bGwhPWE/YTp0LGk9ZT9vLndpZHRoOm8uaGVpZ2h0LG49ZT9vLng6by55O3JldHVybltuLG4rKGl8fDApXX19ZnVuY3Rpb24gWWIobixvLGEpe3JldHVybiBuPWpiKG4pLGZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbi5jb250YWluKGVbMF0sZVsxXSkmJiFXeSh0LG8sYSl9fWZ1bmN0aW9uIGpiKHQpe3JldHVybiBNaS5jcmVhdGUodCl9dmFyIHFiPVsiYXhpc0xpbmUiLCJheGlzVGlja0xhYmVsIiwiYXhpc05hbWUiXSxLYj1iZih7dHlwZToicGFyYWxsZWxBeGlzIixpbml0OmZ1bmN0aW9uKHQsZSl7S2Iuc3VwZXJBcHBseSh0aGlzLCJpbml0Iixhcmd1bWVudHMpLCh0aGlzLl9icnVzaENvbnRyb2xsZXI9bmV3IGdiKGUuZ2V0WnIoKSkpLm9uKCJicnVzaCIsQSh0aGlzLl9vbkJydXNoLHRoaXMpKX0scmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKCFmdW5jdGlvbih0LGUsaSl7cmV0dXJuIGkmJiJheGlzQXJlYVNlbGVjdCI9PT1pLnR5cGUmJmUuZmluZENvbXBvbmVudHMoe21haW5UeXBlOiJwYXJhbGxlbEF4aXMiLHF1ZXJ5Oml9KVswXT09PXR9KHQsZSxuKSl7dGhpcy5heGlzTW9kZWw9dCx0aGlzLmFwaT1pLHRoaXMuZ3JvdXAucmVtb3ZlQWxsKCk7dmFyIG89dGhpcy5fYXhpc0dyb3VwO2lmKHRoaXMuX2F4aXNHcm91cD1uZXcgSWksdGhpcy5ncm91cC5hZGQodGhpcy5fYXhpc0dyb3VwKSx0LmdldCgic2hvdyIpKXt2YXIgYT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmdldENvbXBvbmVudCgicGFyYWxsZWwiLHQuZ2V0KCJwYXJhbGxlbEluZGV4IikpfSh0LGUpLHI9YS5jb29yZGluYXRlU3lzdGVtLHM9dC5nZXRBcmVhU2VsZWN0U3R5bGUoKSxsPXMud2lkdGgsdT10LmF4aXMuZGltLGg9TCh7c3Ryb2tlQ29udGFpblRocmVzaG9sZDpsfSxyLmdldEF4aXNMYXlvdXQodSkpLGM9bmV3IFltKHQsaCk7RShxYixjLmFkZCxjKSx0aGlzLl9heGlzR3JvdXAuYWRkKGMuZ2V0R3JvdXAoKSksdGhpcy5fcmVmcmVzaEJydXNoQ29udHJvbGxlcihoLHMsdCxhLGwsaSk7dmFyIGQ9biYmITE9PT1uLmFuaW1hdGlvbj9udWxsOnQ7ZGwobyx0aGlzLl9heGlzR3JvdXAsZCl9fX0sX3JlZnJlc2hCcnVzaENvbnRyb2xsZXI6ZnVuY3Rpb24odCxlLGksbixvLGEpe3ZhciByPWkuYXhpcy5nZXRFeHRlbnQoKSxzPXJbMV0tclswXSxsPU1hdGgubWluKDMwLC4xKk1hdGguYWJzKHMpKSx1PU1pLmNyZWF0ZSh7eDpyWzBdLHk6LW8vMix3aWR0aDpzLGhlaWdodDpvfSk7dS54LT1sLHUud2lkdGgrPTIqbCx0aGlzLl9icnVzaENvbnRyb2xsZXIubW91bnQoe2VuYWJsZUdsb2JhbFBhbjohMCxyb3RhdGlvbjp0LnJvdGF0aW9uLHBvc2l0aW9uOnQucG9zaXRpb259KS5zZXRQYW5lbHMoW3twYW5lbElkOiJwbCIsY2xpcFBhdGg6VWIodSksaXNUYXJnZXRCeUN1cnNvcjpZYih1LGEsbiksZ2V0TGluZWFyQnJ1c2hPdGhlckV4dGVudDpYYih1LDApfV0pLmVuYWJsZUJydXNoKHticnVzaFR5cGU6ImxpbmVYIixicnVzaFN0eWxlOmUscmVtb3ZlT25DbGljazohMH0pLnVwZGF0ZUNvdmVycyhmdW5jdGlvbih0KXt2YXIgZT10LmF4aXM7cmV0dXJuIE4odC5hY3RpdmVJbnRlcnZhbHMsZnVuY3Rpb24odCl7cmV0dXJue2JydXNoVHlwZToibGluZVgiLHBhbmVsSWQ6InBsIixyYW5nZTpbZS5kYXRhVG9Db29yZCh0WzBdLCEwKSxlLmRhdGFUb0Nvb3JkKHRbMV0sITApXX19KX0oaSkpfSxfb25CcnVzaDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuYXhpc01vZGVsLG49aS5heGlzLG89Tih0LGZ1bmN0aW9uKHQpe3JldHVybltuLmNvb3JkVG9EYXRhKHQucmFuZ2VbMF0sITApLG4uY29vcmRUb0RhdGEodC5yYW5nZVsxXSwhMCldfSk7IWkub3B0aW9uLnJlYWx0aW1lIT09ZS5pc0VuZCYmIWUucmVtb3ZlT25DbGlja3x8dGhpcy5hcGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImF4aXNBcmVhU2VsZWN0IixwYXJhbGxlbEF4aXNJZDppLmlkLGludGVydmFsczpvfSl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9icnVzaENvbnRyb2xsZXIuZGlzcG9zZSgpfX0pO2JmKHt0eXBlOiJwYXJhbGxlbCIscmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLl9tb2RlbD10LHRoaXMuX2FwaT1pLHRoaXMuX2hhbmRsZXJzfHwodGhpcy5faGFuZGxlcnM9e30sRSgkYixmdW5jdGlvbih0LGUpe2kuZ2V0WnIoKS5vbihlLHRoaXMuX2hhbmRsZXJzW2VdPUEodCx0aGlzKSl9LHRoaXMpKSxUYyh0aGlzLCJfdGhyb3R0bGVkRGlzcGF0Y2hFeHBhbmQiLHQuZ2V0KCJheGlzRXhwYW5kUmF0ZSIpLCJmaXhSYXRlIil9LGRpc3Bvc2U6ZnVuY3Rpb24odCxpKXtFKHRoaXMuX2hhbmRsZXJzLGZ1bmN0aW9uKHQsZSl7aS5nZXRacigpLm9mZihlLHQpfSksdGhpcy5faGFuZGxlcnM9bnVsbH0sX3Rocm90dGxlZERpc3BhdGNoRXhwYW5kOmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3BhdGNoRXhwYW5kKHQpfSxfZGlzcGF0Y2hFeHBhbmQ6ZnVuY3Rpb24odCl7dCYmdGhpcy5fYXBpLmRpc3BhdGNoQWN0aW9uKEwoe3R5cGU6InBhcmFsbGVsQXhpc0V4cGFuZCJ9LHQpKX19KTt2YXIgJGI9e21vdXNlZG93bjpmdW5jdGlvbih0KXtKYih0aGlzLCJjbGljayIpJiYodGhpcy5fbW91c2VEb3duUG9pbnQ9W3Qub2Zmc2V0WCx0Lm9mZnNldFldKX0sbW91c2V1cDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tb3VzZURvd25Qb2ludDtpZihKYih0aGlzLCJjbGljayIpJiZlKXt2YXIgaT1bdC5vZmZzZXRYLHQub2Zmc2V0WV07aWYoNTxNYXRoLnBvdyhlWzBdLWlbMF0sMikrTWF0aC5wb3coZVsxXS1pWzFdLDIpKXJldHVybjt2YXIgbj10aGlzLl9tb2RlbC5jb29yZGluYXRlU3lzdGVtLmdldFNsaWRlZEF4aXNFeHBhbmRXaW5kb3coW3Qub2Zmc2V0WCx0Lm9mZnNldFldKTsibm9uZSIhPT1uLmJlaGF2aW9yJiZ0aGlzLl9kaXNwYXRjaEV4cGFuZCh7YXhpc0V4cGFuZFdpbmRvdzpuLmF4aXNFeHBhbmRXaW5kb3d9KX10aGlzLl9tb3VzZURvd25Qb2ludD1udWxsfSxtb3VzZW1vdmU6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX21vdXNlRG93blBvaW50JiZKYih0aGlzLCJtb3VzZW1vdmUiKSl7dmFyIGU9dGhpcy5fbW9kZWwsaT1lLmNvb3JkaW5hdGVTeXN0ZW0uZ2V0U2xpZGVkQXhpc0V4cGFuZFdpbmRvdyhbdC5vZmZzZXRYLHQub2Zmc2V0WV0pLG49aS5iZWhhdmlvcjsianVtcCI9PT1uJiZ0aGlzLl90aHJvdHRsZWREaXNwYXRjaEV4cGFuZC5kZWJvdW5jZU5leHRDYWxsKGUuZ2V0KCJheGlzRXhwYW5kRGVib3VuY2UiKSksdGhpcy5fdGhyb3R0bGVkRGlzcGF0Y2hFeHBhbmQoIm5vbmUiPT09bj9udWxsOntheGlzRXhwYW5kV2luZG93OmkuYXhpc0V4cGFuZFdpbmRvdyxhbmltYXRpb246Imp1bXAiPT09biYmbnVsbH0pfX19O2Z1bmN0aW9uIEpiKHQsZSl7dmFyIGk9dC5fbW9kZWw7cmV0dXJuIGkuZ2V0KCJheGlzRXhwYW5kYWJsZSIpJiZpLmdldCgiYXhpc0V4cGFuZFRyaWdnZXJPbiIpPT09ZX1mZihmdW5jdGlvbih0KXshZnVuY3Rpb24odCl7aWYodC5wYXJhbGxlbClyZXR1cm47dmFyIGU9ITE7RSh0LnNlcmllcyxmdW5jdGlvbih0KXt0JiYicGFyYWxsZWwiPT09dC50eXBlJiYoZT0hMCl9KSxlJiYodC5wYXJhbGxlbD1be31dKX0odCksZnVuY3Rpb24obil7RShFbyhuLnBhcmFsbGVsQXhpcyksZnVuY3Rpb24odCl7aWYoUih0KSl7dmFyIGU9dC5wYXJhbGxlbEluZGV4fHwwLGk9RW8obi5wYXJhbGxlbClbZV07aSYmaS5wYXJhbGxlbEF4aXNEZWZhdWx0JiZtKHQsaS5wYXJhbGxlbEF4aXNEZWZhdWx0LCExKX19KX0odCl9KSxpYy5leHRlbmQoe3R5cGU6InNlcmllcy5wYXJhbGxlbCIsZGVwZW5kZW5jaWVzOlsicGFyYWxsZWwiXSx2aXN1YWxDb2xvckFjY2Vzc1BhdGg6ImxpbmVTdHlsZS5jb2xvciIsZ2V0SW5pdGlhbERhdGE6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldFNvdXJjZSgpO3JldHVybiBmdW5jdGlvbih0LGUpe2lmKHQuZW5jb2RlRGVmaW5lKXJldHVybjt2YXIgaT1lLmVjTW9kZWwuZ2V0Q29tcG9uZW50KCJwYXJhbGxlbCIsZS5nZXQoInBhcmFsbGVsSW5kZXgiKSk7aWYoIWkpcmV0dXJuO3ZhciBuPXQuZW5jb2RlRGVmaW5lPVEoKTtFKGkuZGltZW5zaW9ucyxmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm4rdC5yZXBsYWNlKCJkaW0iLCIiKX0odCk7bi5zZXQodCxlKX0pfShpLHRoaXMpLGhwKGksdGhpcyl9LGdldFJhd0luZGljZXNCeUFjdGl2ZVN0YXRlOmZ1bmN0aW9uKGkpe3ZhciB0PXRoaXMuY29vcmRpbmF0ZVN5c3RlbSxuPXRoaXMuZ2V0RGF0YSgpLG89W107cmV0dXJuIHQuZWFjaEFjdGl2ZVN0YXRlKG4sZnVuY3Rpb24odCxlKXtpPT09dCYmby5wdXNoKG4uZ2V0UmF3SW5kZXgoZSkpfSksb30sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNvb3JkaW5hdGVTeXN0ZW06InBhcmFsbGVsIixwYXJhbGxlbEluZGV4OjAsbGFiZWw6e3Nob3c6ITF9LGluYWN0aXZlT3BhY2l0eTouMDUsYWN0aXZlT3BhY2l0eToxLGxpbmVTdHlsZTp7d2lkdGg6MSxvcGFjaXR5Oi40NSx0eXBlOiJzb2xpZCJ9LGVtcGhhc2lzOntsYWJlbDp7c2hvdzohMX19LHByb2dyZXNzaXZlOjUwMCxzbW9vdGg6ITEsYW5pbWF0aW9uRWFzaW5nOiJsaW5lYXIifX0pO2djLmV4dGVuZCh7dHlwZToicGFyYWxsZWwiLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhR3JvdXA9bmV3IElpLHRoaXMuZ3JvdXAuYWRkKHRoaXMuX2RhdGFHcm91cCksdGhpcy5fZGF0YSx0aGlzLl9pbml0aWFsaXplZH0scmVuZGVyOmZ1bmN0aW9uKGEsdCxlLHIpe3ZhciBpPXRoaXMuX2RhdGFHcm91cCxzPWEuZ2V0RGF0YSgpLGw9dGhpcy5fZGF0YSx1PWEuY29vcmRpbmF0ZVN5c3RlbSxoPXUuZGltZW5zaW9ucyxjPWVTKGEpO2lmKHMuZGlmZihsKS5hZGQoZnVuY3Rpb24odCl7aVModFMocyxpLHQsaCx1KSxzLHQsYyl9KS51cGRhdGUoZnVuY3Rpb24odCxlKXt2YXIgaT1sLmdldEl0ZW1HcmFwaGljRWwoZSksbj1RYihzLHQsaCx1KTtzLnNldEl0ZW1HcmFwaGljRWwodCxpKTt2YXIgbz1yJiYhMT09PXIuYW5pbWF0aW9uP251bGw6YTtzbChpLHtzaGFwZTp7cG9pbnRzOm59fSxvLHQpLGlTKGkscyx0LGMpfSkucmVtb3ZlKGZ1bmN0aW9uKHQpe3ZhciBlPWwuZ2V0SXRlbUdyYXBoaWNFbCh0KTtpLnJlbW92ZShlKX0pLmV4ZWN1dGUoKSwhdGhpcy5faW5pdGlhbGl6ZWQpe3RoaXMuX2luaXRpYWxpemVkPSEwO3ZhciBuPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10Lm1vZGVsLG89dC5nZXRSZWN0KCksYT1uZXcgaXMoe3NoYXBlOnt4Om8ueCx5Om8ueSx3aWR0aDpvLndpZHRoLGhlaWdodDpvLmhlaWdodH19KSxyPSJob3Jpem9udGFsIj09PW4uZ2V0KCJsYXlvdXQiKT8id2lkdGgiOiJoZWlnaHQiO3JldHVybiBhLnNldFNoYXBlKHIsMCksbGwoYSx7c2hhcGU6e3dpZHRoOm8ud2lkdGgsaGVpZ2h0Om8uaGVpZ2h0fX0sZSxpKSxhfSh1LGEsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5yZW1vdmVDbGlwUGF0aCgpfSl9KTtpLnNldENsaXBQYXRoKG4pfXRoaXMuX2RhdGE9c30saW5jcmVtZW50YWxQcmVwYXJlUmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLl9pbml0aWFsaXplZD0hMCx0aGlzLl9kYXRhPW51bGwsdGhpcy5fZGF0YUdyb3VwLnJlbW92ZUFsbCgpfSxpbmNyZW1lbnRhbFJlbmRlcjpmdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPWUuZ2V0RGF0YSgpLG89ZS5jb29yZGluYXRlU3lzdGVtLGE9by5kaW1lbnNpb25zLHI9ZVMoZSkscz10LnN0YXJ0O3M8dC5lbmQ7cysrKXt2YXIgbD10UyhuLHRoaXMuX2RhdGFHcm91cCxzLGEsbyk7bC5pbmNyZW1lbnRhbD0hMCxpUyhsLG4scyxyKX19LGRpc3Bvc2U6ZnVuY3Rpb24oKXt9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuX2RhdGFHcm91cCYmdGhpcy5fZGF0YUdyb3VwLnJlbW92ZUFsbCgpLHRoaXMuX2RhdGE9bnVsbH19KTtmdW5jdGlvbiBRYih0LGUsaSxuKXtmb3IodmFyIG8sYT1bXSxyPTA7cjxpLmxlbmd0aDtyKyspe3ZhciBzPWlbcl0sbD10LmdldCh0Lm1hcERpbWVuc2lvbihzKSxlKTtvPWwsKCJjYXRlZ29yeSI9PT1uLmdldEF4aXMocykudHlwZT9udWxsPT1vOm51bGw9PW98fGlzTmFOKG8pKXx8YS5wdXNoKG4uZGF0YVRvUG9pbnQobCxzKSl9cmV0dXJuIGF9ZnVuY3Rpb24gdFModCxlLGksbixvKXt2YXIgYT1RYih0LGksbixvKSxyPW5ldyBLcih7c2hhcGU6e3BvaW50czphfSxzaWxlbnQ6ITAsejI6MTB9KTtyZXR1cm4gZS5hZGQociksdC5zZXRJdGVtR3JhcGhpY0VsKGkscikscn1mdW5jdGlvbiBlUyh0KXt2YXIgZT10LmdldCgic21vb3RoIiwhMCk7cmV0dXJuITA9PT1lJiYoZT0uMykse2xpbmVTdHlsZTp0LmdldE1vZGVsKCJsaW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSxzbW9vdGg6bnVsbCE9ZT9lOi4zfX1mdW5jdGlvbiBpUyh0LGUsaSxuKXt2YXIgbz1uLmxpbmVTdHlsZTtlLmhhc0l0ZW1PcHRpb24mJihvPWUuZ2V0SXRlbU1vZGVsKGkpLmdldE1vZGVsKCJsaW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSk7dC51c2VTdHlsZShvKTt2YXIgYT10LnN0eWxlO2EuZmlsbD1udWxsLGEuc3Ryb2tlPWUuZ2V0SXRlbVZpc3VhbChpLCJjb2xvciIpLGEub3BhY2l0eT1lLmdldEl0ZW1WaXN1YWwoaSwib3BhY2l0eSIpLG4uc21vb3RoJiYodC5zaGFwZS5zbW9vdGg9bi5zbW9vdGgpfXZhciBuUz1bImxpbmVTdHlsZSIsIm5vcm1hbCIsIm9wYWNpdHkiXTt5Zih7c2VyaWVzVHlwZToicGFyYWxsZWwiLHJlc2V0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldE1vZGVsKCJpdGVtU3R5bGUiKSxvPXQuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLGE9ZS5nZXQoImNvbG9yIikscj1vLmdldCgiY29sb3IiKXx8bi5nZXQoImNvbG9yIil8fGFbdC5zZXJpZXNJbmRleCVhLmxlbmd0aF0scz10LmdldCgiaW5hY3RpdmVPcGFjaXR5IiksbD10LmdldCgiYWN0aXZlT3BhY2l0eSIpLHU9dC5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCksaD10LmNvb3JkaW5hdGVTeXN0ZW0sYz10LmdldERhdGEoKSxkPXtub3JtYWw6dS5vcGFjaXR5LGFjdGl2ZTpsLGluYWN0aXZlOnN9O3JldHVybiBjLnNldFZpc3VhbCgiY29sb3IiLHIpLHtwcm9ncmVzczpmdW5jdGlvbih0LG8pe2guZWFjaEFjdGl2ZVN0YXRlKG8sZnVuY3Rpb24odCxlKXt2YXIgaT1kW3RdO2lmKCJub3JtYWwiPT09dCYmby5oYXNJdGVtT3B0aW9uKXt2YXIgbj1vLmdldEl0ZW1Nb2RlbChlKS5nZXQoblMsITApO251bGwhPW4mJihpPW4pfW8uc2V0SXRlbVZpc3VhbChlLCJvcGFjaXR5IixpKX0sdC5zdGFydCx0LmVuZCl9fX19KTt2YXIgb1M9aWMuZXh0ZW5kKHt0eXBlOiJzZXJpZXMuc2Fua2V5IixsYXlvdXRJbmZvOm51bGwsbGV2ZWxNb2RlbHM6bnVsbCxnZXRJbml0aWFsRGF0YTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10LmVkZ2VzfHx0LmxpbmtzLG49dC5kYXRhfHx0Lm5vZGVzLG89dC5sZXZlbHMsYT10aGlzLmxldmVsTW9kZWxzPXt9LHI9MDtyPG8ubGVuZ3RoO3IrKyludWxsIT1vW3JdLmRlcHRoJiYwPD1vW3JdLmRlcHRoJiYoYVtvW3JdLmRlcHRoXT1uZXcgSWwob1tyXSx0aGlzLGUpKTtpZihuJiZpKXJldHVybiBYXyhuLGksdGhpcywhMCxmdW5jdGlvbih0LGUpe3Qud3JhcE1ldGhvZCgiZ2V0SXRlbU1vZGVsIixmdW5jdGlvbih0LG4pe3JldHVybiB0LmN1c3RvbWl6ZUdldFBhcmVudChmdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudE1vZGVsLGk9ZS5nZXREYXRhKCkuZ2V0SXRlbUxheW91dChuKS5kZXB0aDtyZXR1cm4gZS5sZXZlbE1vZGVsc1tpXXx8dGhpcy5wYXJlbnRNb2RlbH0pLHR9KSxlLndyYXBNZXRob2QoImdldEl0ZW1Nb2RlbCIsZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jdXN0b21pemVHZXRQYXJlbnQoZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnRNb2RlbCxpPWUuZ2V0R3JhcGgoKS5nZXRFZGdlQnlJbmRleChuKS5ub2RlMS5nZXRMYXlvdXQoKS5kZXB0aDtyZXR1cm4gZS5sZXZlbE1vZGVsc1tpXXx8dGhpcy5wYXJlbnRNb2RlbH0pLHR9KX0pLmRhdGF9LHNldE5vZGVQb3NpdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMub3B0aW9uLmRhdGFbdF07aS5sb2NhbFg9ZVswXSxpLmxvY2FsWT1lWzFdfSxnZXRHcmFwaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldERhdGEoKS5ncmFwaH0sZ2V0RWRnZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRHcmFwaCgpLmVkZ2VEYXRhfSxmb3JtYXRUb29sdGlwOmZ1bmN0aW9uKHQsZSxpKXtpZigiZWRnZSI9PT1pKXt2YXIgbj10aGlzLmdldERhdGFQYXJhbXModCxpKSxvPW4uZGF0YSxhPW8uc291cmNlKyIgLS0gIitvLnRhcmdldDtyZXR1cm4gbi52YWx1ZSYmKGErPSIgOiAiK24udmFsdWUpLGV1KGEpfWlmKCJub2RlIiE9PWkpcmV0dXJuIG9TLnN1cGVyQ2FsbCh0aGlzLCJmb3JtYXRUb29sdGlwIix0LGUpO3ZhciByPXRoaXMuZ2V0R3JhcGgoKS5nZXROb2RlQnlJbmRleCh0KS5nZXRMYXlvdXQoKS52YWx1ZSxzPXRoaXMuZ2V0RGF0YVBhcmFtcyh0LGkpLmRhdGEubmFtZTtpZihyKWE9cysiIDogIityO3JldHVybiBldShhKX0sb3B0aW9uVXBkYXRlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uOyEwPT09dC5mb2N1c05vZGVBZGphY2VuY3kmJih0LmZvY3VzTm9kZUFkamFjZW5jeT0iYWxsRWRnZXMiKX0sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNvb3JkaW5hdGVTeXN0ZW06InZpZXciLGxheW91dDpudWxsLGxlZnQ6IjUlIix0b3A6IjUlIixyaWdodDoiMjAlIixib3R0b206IjUlIixvcmllbnQ6Imhvcml6b250YWwiLG5vZGVXaWR0aDoyMCxub2RlR2FwOjgsZHJhZ2dhYmxlOiEwLGZvY3VzTm9kZUFkamFjZW5jeTohMSxsYXlvdXRJdGVyYXRpb25zOjMyLGxhYmVsOntzaG93OiEwLHBvc2l0aW9uOiJyaWdodCIsY29sb3I6IiMwMDAiLGZvbnRTaXplOjEyfSxsZXZlbHM6W10sbm9kZUFsaWduOiJqdXN0aWZ5IixpdGVtU3R5bGU6e2JvcmRlcldpZHRoOjEsYm9yZGVyQ29sb3I6IiMzMzMifSxsaW5lU3R5bGU6e2NvbG9yOiIjMzE0NjU2IixvcGFjaXR5Oi4yLGN1cnZlbmVzczouNX0sZW1waGFzaXM6e2xhYmVsOntzaG93OiEwfSxsaW5lU3R5bGU6e29wYWNpdHk6LjZ9fSxhbmltYXRpb25FYXNpbmc6ImxpbmVhciIsYW5pbWF0aW9uRHVyYXRpb246MWUzfX0pLGFTPVsiaXRlbVN0eWxlIiwib3BhY2l0eSJdLHJTPVsibGluZVN0eWxlIiwib3BhY2l0eSJdO2Z1bmN0aW9uIHNTKHQsZSl7cmV0dXJuIHQuZ2V0VmlzdWFsKCJvcGFjaXR5Iil8fHQuZ2V0TW9kZWwoKS5nZXQoZSl9ZnVuY3Rpb24gbFModCxlLGkpe3ZhciBuPXQuZ2V0R3JhcGhpY0VsKCksbz1zUyh0LGUpO251bGwhPWkmJihudWxsPT1vJiYobz0xKSxvKj1pKSxuLmRvd25wbGF5JiZuLmRvd25wbGF5KCksbi50cmF2ZXJzZShmdW5jdGlvbih0KXsiZ3JvdXAiIT09dC50eXBlJiZ0LnNldFN0eWxlKCJvcGFjaXR5IixvKX0pfWZ1bmN0aW9uIHVTKHQsZSl7dmFyIGk9c1ModCxlKSxuPXQuZ2V0R3JhcGhpY0VsKCk7bi5oaWdobGlnaHQmJm4uaGlnaGxpZ2h0KCksbi50cmF2ZXJzZShmdW5jdGlvbih0KXsiZ3JvdXAiIT09dC50eXBlJiZ0LnNldFN0eWxlKCJvcGFjaXR5IixpKX0pfXZhciBoUz1Jcyh7c2hhcGU6e3gxOjAseTE6MCx4MjowLHkyOjAsY3B4MTowLGNweTE6MCxjcHgyOjAsY3B5MjowLGV4dGVudDowLG9yaWVudDoiIn0sYnVpbGRQYXRoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5leHRlbnQ7dC5tb3ZlVG8oZS54MSxlLnkxKSx0LmJlemllckN1cnZlVG8oZS5jcHgxLGUuY3B5MSxlLmNweDIsZS5jcHkyLGUueDIsZS55MiksInZlcnRpY2FsIj09PWUub3JpZW50Pyh0LmxpbmVUbyhlLngyK2ksZS55MiksdC5iZXppZXJDdXJ2ZVRvKGUuY3B4MitpLGUuY3B5MixlLmNweDEraSxlLmNweTEsZS54MStpLGUueTEpKToodC5saW5lVG8oZS54MixlLnkyK2kpLHQuYmV6aWVyQ3VydmVUbyhlLmNweDIsZS5jcHkyK2ksZS5jcHgxLGUuY3B5MStpLGUueDEsZS55MStpKSksdC5jbG9zZVBhdGgoKX19KTtNZih7dHlwZToic2Fua2V5IixfbW9kZWw6bnVsbCxfZm9jdXNBZGphY2VuY3lEaXNhYmxlZDohMSxyZW5kZXI6ZnVuY3Rpb24odyx0LG4pe3ZhciBvPXRoaXMsZT13LmdldEdyYXBoKCksYj10aGlzLmdyb3VwLGk9dy5sYXlvdXRJbmZvLFM9aS53aWR0aCxNPWkuaGVpZ2h0LHU9dy5nZXREYXRhKCksST13LmdldERhdGEoImVkZ2UiKSxUPXcuZ2V0KCJvcmllbnQiKTt0aGlzLl9tb2RlbD13LGIucmVtb3ZlQWxsKCksYi5hdHRyKCJwb3NpdGlvbiIsW2kueCxpLnldKSxlLmVhY2hFZGdlKGZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBoUztlLmRhdGFJbmRleD10LmRhdGFJbmRleCxlLnNlcmllc0luZGV4PXcuc2VyaWVzSW5kZXgsZS5kYXRhVHlwZT0iZWRnZSI7dmFyIGksbixvLGEscixzLGwsdSxoPXQuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLGM9aC5nZXQoImN1cnZlbmVzcyIpLGQ9dC5ub2RlMS5nZXRMYXlvdXQoKSxmPXQubm9kZTEuZ2V0TW9kZWwoKSxwPWYuZ2V0KCJsb2NhbFgiKSxnPWYuZ2V0KCJsb2NhbFkiKSxtPXQubm9kZTIuZ2V0TGF5b3V0KCksdj10Lm5vZGUyLmdldE1vZGVsKCkseT12LmdldCgibG9jYWxYIikseD12LmdldCgibG9jYWxZIiksXz10LmdldExheW91dCgpO3N3aXRjaChlLnNoYXBlLmV4dGVudD1NYXRoLm1heCgxLF8uZHkpLHU9InZlcnRpY2FsIj09PShlLnNoYXBlLm9yaWVudD1UKT8oaT0obnVsbCE9cD9wKlM6ZC54KStfLnN5LG49KG51bGwhPWc/ZypNOmQueSkrZC5keSxvPShudWxsIT15P3kqUzptLngpK18udHkscj1pLHM9biooMS1jKSsoYT1udWxsIT14P3gqTTptLnkpKmMsbD1vLG4qYythKigxLWMpKTooaT0obnVsbCE9cD9wKlM6ZC54KStkLmR4LG49KG51bGwhPWc/ZypNOmQueSkrXy5zeSxyPWkqKDEtYykrKG89bnVsbCE9eT95KlM6bS54KSpjLHM9bixsPWkqYytvKigxLWMpLGE9KG51bGwhPXg/eCpNOm0ueSkrXy50eSksZS5zZXRTaGFwZSh7eDE6aSx5MTpuLHgyOm8seTI6YSxjcHgxOnIsY3B5MTpzLGNweDI6bCxjcHkyOnV9KSxlLnNldFN0eWxlKGguZ2V0SXRlbVN0eWxlKCkpLGUuc3R5bGUuZmlsbCl7Y2FzZSJzb3VyY2UiOmUuc3R5bGUuZmlsbD10Lm5vZGUxLmdldFZpc3VhbCgiY29sb3IiKTticmVhaztjYXNlInRhcmdldCI6ZS5zdHlsZS5maWxsPXQubm9kZTIuZ2V0VmlzdWFsKCJjb2xvciIpfVlzKGUsdC5nZXRNb2RlbCgiZW1waGFzaXMubGluZVN0eWxlIikuZ2V0SXRlbVN0eWxlKCkpLGIuYWRkKGUpLEkuc2V0SXRlbUdyYXBoaWNFbCh0LmRhdGFJbmRleCxlKX0pLGUuZWFjaE5vZGUoZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRMYXlvdXQoKSxpPXQuZ2V0TW9kZWwoKSxuPWkuZ2V0KCJsb2NhbFgiKSxvPWkuZ2V0KCJsb2NhbFkiKSxhPWkuZ2V0TW9kZWwoImxhYmVsIikscj1pLmdldE1vZGVsKCJlbXBoYXNpcy5sYWJlbCIpLHM9bmV3IGlzKHtzaGFwZTp7eDpudWxsIT1uP24qUzplLngseTpudWxsIT1vP28qTTplLnksd2lkdGg6ZS5keCxoZWlnaHQ6ZS5keX0sc3R5bGU6aS5nZXRNb2RlbCgiaXRlbVN0eWxlIikuZ2V0SXRlbVN0eWxlKCl9KSxsPXQuZ2V0TW9kZWwoImVtcGhhc2lzLml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZSgpOyRzKHMuc3R5bGUsbCxhLHIse2xhYmVsRmV0Y2hlcjp3LGxhYmVsRGF0YUluZGV4OnQuZGF0YUluZGV4LGRlZmF1bHRUZXh0OnQuaWQsaXNSZWN0VGV4dDohMH0pLHMuc2V0U3R5bGUoImZpbGwiLHQuZ2V0VmlzdWFsKCJjb2xvciIpKSxZcyhzLGwpLGIuYWRkKHMpLHUuc2V0SXRlbUdyYXBoaWNFbCh0LmRhdGFJbmRleCxzKSxzLmRhdGFUeXBlPSJub2RlIn0pLHUuZWFjaEl0ZW1HcmFwaGljRWwoZnVuY3Rpb24odCxpKXt2YXIgZT11LmdldEl0ZW1Nb2RlbChpKTtlLmdldCgiZHJhZ2dhYmxlIikmJih0LmRyaWZ0PWZ1bmN0aW9uKHQsZSl7by5fZm9jdXNBZGphY2VuY3lEaXNhYmxlZD0hMCx0aGlzLnNoYXBlLngrPXQsdGhpcy5zaGFwZS55Kz1lLHRoaXMuZGlydHkoKSxuLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJkcmFnTm9kZSIsc2VyaWVzSWQ6dy5pZCxkYXRhSW5kZXg6dS5nZXRSYXdJbmRleChpKSxsb2NhbFg6dGhpcy5zaGFwZS54L1MsbG9jYWxZOnRoaXMuc2hhcGUueS9NfSl9LHQub25kcmFnZW5kPWZ1bmN0aW9uKCl7by5fZm9jdXNBZGphY2VuY3lEaXNhYmxlZD0hMX0sdC5kcmFnZ2FibGU9ITAsdC5jdXJzb3I9Im1vdmUiKSxlLmdldCgiZm9jdXNOb2RlQWRqYWNlbmN5IikmJih0Lm9mZigibW91c2VvdmVyIikub24oIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXtvLl9mb2N1c0FkamFjZW5jeURpc2FibGVkfHwoby5fY2xlYXJUaW1lcigpLG4uZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImZvY3VzTm9kZUFkamFjZW5jeSIsc2VyaWVzSWQ6dy5pZCxkYXRhSW5kZXg6dC5kYXRhSW5kZXh9KSl9KSx0Lm9mZigibW91c2VvdXQiKS5vbigibW91c2VvdXQiLGZ1bmN0aW9uKCl7by5fZm9jdXNBZGphY2VuY3lEaXNhYmxlZHx8by5fZGlzcGF0Y2hVbmZvY3VzKG4pfSkpfSksSS5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbih0LGUpe0kuZ2V0SXRlbU1vZGVsKGUpLmdldCgiZm9jdXNOb2RlQWRqYWNlbmN5IikmJih0Lm9mZigibW91c2VvdmVyIikub24oIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXtvLl9mb2N1c0FkamFjZW5jeURpc2FibGVkfHwoby5fY2xlYXJUaW1lcigpLG4uZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImZvY3VzTm9kZUFkamFjZW5jeSIsc2VyaWVzSWQ6dy5pZCxlZGdlRGF0YUluZGV4OnQuZGF0YUluZGV4fSkpfSksdC5vZmYoIm1vdXNlb3V0Iikub24oIm1vdXNlb3V0IixmdW5jdGlvbigpe28uX2ZvY3VzQWRqYWNlbmN5RGlzYWJsZWR8fG8uX2Rpc3BhdGNoVW5mb2N1cyhuKX0pKX0pLCF0aGlzLl9kYXRhJiZ3LmdldCgiYW5pbWF0aW9uIikmJmIuc2V0Q2xpcFBhdGgoZnVuY3Rpb24odCxlLGkpe3ZhciBuPW5ldyBpcyh7c2hhcGU6e3g6dC54LTEwLHk6dC55LTEwLHdpZHRoOjAsaGVpZ2h0OnQuaGVpZ2h0KzIwfX0pO3JldHVybiBsbChuLHtzaGFwZTp7d2lkdGg6dC53aWR0aCsyMCxoZWlnaHQ6dC5oZWlnaHQrMjB9fSxlLGkpLG59KGIuZ2V0Qm91bmRpbmdSZWN0KCksdyxmdW5jdGlvbigpe2IucmVtb3ZlQ2xpcFBhdGgoKX0pKSx0aGlzLl9kYXRhPXcuZ2V0RGF0YSgpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJUaW1lcigpfSxfZGlzcGF0Y2hVbmZvY3VzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fY2xlYXJUaW1lcigpLHRoaXMuX3VuZm9jdXNEZWxheVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl91bmZvY3VzRGVsYXlUaW1lcj1udWxsLHQuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6InVuZm9jdXNOb2RlQWRqYWNlbmN5IixzZXJpZXNJZDplLl9tb2RlbC5pZH0pfSw1MDApfSxfY2xlYXJUaW1lcjpmdW5jdGlvbigpe3RoaXMuX3VuZm9jdXNEZWxheVRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3VuZm9jdXNEZWxheVRpbWVyKSx0aGlzLl91bmZvY3VzRGVsYXlUaW1lcj1udWxsKX0sZm9jdXNOb2RlQWRqYWNlbmN5OmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXRoaXMuX21vZGVsLmdldERhdGEoKSxhPW8uZ3JhcGgscj1uLmRhdGFJbmRleCxzPW8uZ2V0SXRlbU1vZGVsKHIpLGw9bi5lZGdlRGF0YUluZGV4O2lmKG51bGwhPXJ8fG51bGwhPWwpe3ZhciB1PWEuZ2V0Tm9kZUJ5SW5kZXgociksaD1hLmdldEVkZ2VCeUluZGV4KGwpO2lmKGEuZWFjaE5vZGUoZnVuY3Rpb24odCl7bFModCxhUywuMSl9KSxhLmVhY2hFZGdlKGZ1bmN0aW9uKHQpe2xTKHQsclMsLjEpfSksdSl7dVModSxhUyk7dmFyIGM9cy5nZXQoImZvY3VzTm9kZUFkamFjZW5jeSIpOyJvdXRFZGdlcyI9PT1jP0UodS5vdXRFZGdlcyxmdW5jdGlvbih0KXt0LmRhdGFJbmRleDwwfHwodVModCxyUyksdVModC5ub2RlMixhUykpfSk6ImluRWRnZXMiPT09Yz9FKHUuaW5FZGdlcyxmdW5jdGlvbih0KXt0LmRhdGFJbmRleDwwfHwodVModCxyUyksdVModC5ub2RlMSxhUykpfSk6ImFsbEVkZ2VzIj09PWMmJkUodS5lZGdlcyxmdW5jdGlvbih0KXt0LmRhdGFJbmRleDwwfHwodVModCxyUyksdVModC5ub2RlMSxhUyksdVModC5ub2RlMixhUykpfSl9aCYmKHVTKGgsclMpLHVTKGgubm9kZTEsYVMpLHVTKGgubm9kZTIsYVMpKX19LHVuZm9jdXNOb2RlQWRqYWNlbmN5OmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXRoaXMuX21vZGVsLmdldEdyYXBoKCk7by5lYWNoTm9kZShmdW5jdGlvbih0KXtsUyh0LGFTKX0pLG8uZWFjaEVkZ2UoZnVuY3Rpb24odCl7bFModCxyUyl9KX19KSxnZih7dHlwZToiZHJhZ05vZGUiLGV2ZW50OiJkcmFnbm9kZSIsdXBkYXRlOiJ1cGRhdGUifSxmdW5jdGlvbihlLHQpe3QuZWFjaENvbXBvbmVudCh7bWFpblR5cGU6InNlcmllcyIsc3ViVHlwZToic2Fua2V5IixxdWVyeTplfSxmdW5jdGlvbih0KXt0LnNldE5vZGVQb3NpdGlvbihlLmRhdGFJbmRleCxbZS5sb2NhbFgsZS5sb2NhbFldKX0pfSk7ZnVuY3Rpb24gY1ModCl7dmFyIGU9dC5ob3N0R3JhcGguZGF0YS5nZXRSYXdEYXRhSXRlbSh0LmRhdGFJbmRleCk7cmV0dXJuIG51bGwhPWUuZGVwdGgmJjA8PWUuZGVwdGh9ZnVuY3Rpb24gZFModCxsLHUsaCxjKXt2YXIgZD0idmVydGljYWwiPT09Yz8ieCI6InkiO0UodCxmdW5jdGlvbih0KXt2YXIgZSxpLG47dC5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZ2V0TGF5b3V0KClbZF0tZS5nZXRMYXlvdXQoKVtkXX0pO2Zvcih2YXIgbz0wLGE9dC5sZW5ndGgscj0idmVydGljYWwiPT09Yz8iZHgiOiJkeSIscz0wO3M8YTtzKyspMDwobj1vLShpPXRbc10pLmdldExheW91dCgpW2RdKSYmKGU9aS5nZXRMYXlvdXQoKVtkXStuLCJ2ZXJ0aWNhbCI9PT1jP2kuc2V0TGF5b3V0KHt4OmV9LCEwKTppLnNldExheW91dCh7eTplfSwhMCkpLG89aS5nZXRMYXlvdXQoKVtkXStpLmdldExheW91dCgpW3JdK2w7aWYoMDwobj1vLWwtKCJ2ZXJ0aWNhbCI9PT1jP2g6dSkpKWZvcihlPWkuZ2V0TGF5b3V0KClbZF0tbiwidmVydGljYWwiPT09Yz9pLnNldExheW91dCh7eDplfSwhMCk6aS5zZXRMYXlvdXQoe3k6ZX0sITApLG89ZSxzPWEtMjswPD1zOy0tcykwPChuPShpPXRbc10pLmdldExheW91dCgpW2RdK2kuZ2V0TGF5b3V0KClbcl0rbC1vKSYmKGU9aS5nZXRMYXlvdXQoKVtkXS1uLCJ2ZXJ0aWNhbCI9PT1jP2kuc2V0TGF5b3V0KHt4OmV9LCEwKTppLnNldExheW91dCh7eTplfSwhMCkpLG89aS5nZXRMYXlvdXQoKVtkXX0pfWZ1bmN0aW9uIGZTKHQsbyxhKXtFKHQuc2xpY2UoKS5yZXZlcnNlKCksZnVuY3Rpb24odCl7RSh0LGZ1bmN0aW9uKHQpe2lmKHQub3V0RWRnZXMubGVuZ3RoKXt2YXIgZT15Uyh0Lm91dEVkZ2VzLHBTLGEpL3lTKHQub3V0RWRnZXMsdlMsYSk7aWYoInZlcnRpY2FsIj09PWEpe3ZhciBpPXQuZ2V0TGF5b3V0KCkueCsoZS1tUyh0LGEpKSpvO3Quc2V0TGF5b3V0KHt4Oml9LCEwKX1lbHNle3ZhciBuPXQuZ2V0TGF5b3V0KCkueSsoZS1tUyh0LGEpKSpvO3Quc2V0TGF5b3V0KHt5Om59LCEwKX19fSl9KX1mdW5jdGlvbiBwUyh0LGUpe3JldHVybiBtUyh0Lm5vZGUyLGUpKnQuZ2V0VmFsdWUoKX1mdW5jdGlvbiBnUyh0LGUpe3JldHVybiBtUyh0Lm5vZGUxLGUpKnQuZ2V0VmFsdWUoKX1mdW5jdGlvbiBtUyh0LGUpe3JldHVybiJ2ZXJ0aWNhbCI9PT1lP3QuZ2V0TGF5b3V0KCkueCt0LmdldExheW91dCgpLmR4LzI6dC5nZXRMYXlvdXQoKS55K3QuZ2V0TGF5b3V0KCkuZHkvMn1mdW5jdGlvbiB2Uyh0KXtyZXR1cm4gdC5nZXRWYWx1ZSgpfWZ1bmN0aW9uIHlTKHQsZSxpKXtmb3IodmFyIG49MCxvPXQubGVuZ3RoLGE9LTE7KythPG87KXt2YXIgcj0rZS5jYWxsKHQsdFthXSxpKTtpc05hTihyKXx8KG4rPXIpfXJldHVybiBufWZ1bmN0aW9uIHhTKHQsbyxhKXtFKHQsZnVuY3Rpb24odCl7RSh0LGZ1bmN0aW9uKHQpe2lmKHQuaW5FZGdlcy5sZW5ndGgpe3ZhciBlPXlTKHQuaW5FZGdlcyxnUyxhKS95Uyh0LmluRWRnZXMsdlMsYSk7aWYoInZlcnRpY2FsIj09PWEpe3ZhciBpPXQuZ2V0TGF5b3V0KCkueCsoZS1tUyh0LGEpKSpvO3Quc2V0TGF5b3V0KHt4Oml9LCEwKX1lbHNle3ZhciBuPXQuZ2V0TGF5b3V0KCkueSsoZS1tUyh0LGEpKSpvO3Quc2V0TGF5b3V0KHt5Om59LCEwKX19fSl9KX12ZihmdW5jdGlvbih0LHUsZSl7dC5lYWNoU2VyaWVzQnlUeXBlKCJzYW5rZXkiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0KCJub2RlV2lkdGgiKSxpPXQuZ2V0KCJub2RlR2FwIiksbj1mdW5jdGlvbih0LGUpe3JldHVybiB2dSh0LmdldEJveExheW91dFBhcmFtcygpLHt3aWR0aDplLmdldFdpZHRoKCksaGVpZ2h0OmUuZ2V0SGVpZ2h0KCl9KX0odCx1KSxvPSh0LmxheW91dEluZm89bikud2lkdGgsYT1uLmhlaWdodCxyPXQuZ2V0R3JhcGgoKSxzPXIubm9kZXMsbD1yLmVkZ2VzOyFmdW5jdGlvbih0KXtFKHQsZnVuY3Rpb24odCl7dmFyIGU9eVModC5vdXRFZGdlcyx2UyksaT15Uyh0LmluRWRnZXMsdlMpLG49TWF0aC5tYXgoZSxpKTt0LnNldExheW91dCh7dmFsdWU6bn0sITApfSl9KHMpLGZ1bmN0aW9uKHQsZSxpLG4sbyxhLHIscyxsKXsoZnVuY3Rpb24odCxlLGksbixvLGEscil7Zm9yKHZhciBzPVtdLGw9W10sdT1bXSxoPVtdLGM9MCxkPTA7ZDxlLmxlbmd0aDtkKyspc1tkXT0xO2ZvcihkPTA7ZDx0Lmxlbmd0aDtkKyspbFtkXT10W2RdLmluRWRnZXMubGVuZ3RoLDA9PT1sW2RdJiZ1LnB1c2godFtkXSk7dmFyIGY9LTE7Zm9yKDt1Lmxlbmd0aDspe2Zvcih2YXIgcD0wO3A8dS5sZW5ndGg7cCsrKXt2YXIgZz11W3BdLG09Zy5ob3N0R3JhcGguZGF0YS5nZXRSYXdEYXRhSXRlbShnLmRhdGFJbmRleCksdj1udWxsIT1tLmRlcHRoJiYwPD1tLmRlcHRoO3YmJm0uZGVwdGg+ZiYmKGY9bS5kZXB0aCksZy5zZXRMYXlvdXQoe2RlcHRoOnY/bS5kZXB0aDpjfSwhMCksInZlcnRpY2FsIj09PWE/Zy5zZXRMYXlvdXQoe2R5Oml9LCEwKTpnLnNldExheW91dCh7ZHg6aX0sITApO2Zvcih2YXIgeT0wO3k8Zy5vdXRFZGdlcy5sZW5ndGg7eSsrKXt2YXIgeD1nLm91dEVkZ2VzW3ldLF89ZS5pbmRleE9mKHgpO3NbX109MDt2YXIgdz14Lm5vZGUyLGI9dC5pbmRleE9mKHcpOzA9PS0tbFtiXSYmaC5pbmRleE9mKHcpPDAmJmgucHVzaCh3KX19KytjLHU9aCxoPVtdfWZvcihkPTA7ZDxzLmxlbmd0aDtkKyspaWYoMT09PXNbZF0pdGhyb3cgbmV3IEVycm9yKCJTYW5rZXkgaXMgYSBEQUcsIHRoZSBvcmlnaW5hbCBkYXRhIGhhcyBjeWNsZSEiKTt2YXIgUz1jLTE8Zj9mOmMtMTtyJiYibGVmdCIhPT1yJiZmdW5jdGlvbih0LGUsaSxuKXtpZigicmlnaHQiPT09ZSl7Zm9yKHZhciBvPVtdLGE9dCxyPTA7YS5sZW5ndGg7KXtmb3IodmFyIHM9MDtzPGEubGVuZ3RoO3MrKyl7dmFyIGw9YVtzXTtsLnNldExheW91dCh7c2tOb2RlSGVpZ2h0OnJ9LCEwKTtmb3IodmFyIHU9MDt1PGwuaW5FZGdlcy5sZW5ndGg7dSsrKXt2YXIgaD1sLmluRWRnZXNbdV07by5pbmRleE9mKGgubm9kZTEpPDAmJm8ucHVzaChoLm5vZGUxKX19YT1vLG89W10sKytyfUUodCxmdW5jdGlvbih0KXtjUyh0KXx8dC5zZXRMYXlvdXQoe2RlcHRoOk1hdGgubWF4KDAsbi10LmdldExheW91dCgpLnNrTm9kZUhlaWdodCl9LCEwKX0pfWVsc2UianVzdGlmeSI9PT1lJiZmdW5jdGlvbih0LGUpe0UodCxmdW5jdGlvbih0KXtjUyh0KXx8dC5vdXRFZGdlcy5sZW5ndGh8fHQuc2V0TGF5b3V0KHtkZXB0aDplfSwhMCl9KX0odCxuKX0odCxyLDAsUyk7IWZ1bmN0aW9uKHQsaSxuKXtFKHQsZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRMYXlvdXQoKS5kZXB0aCppOyJ2ZXJ0aWNhbCI9PT1uP3Quc2V0TGF5b3V0KHt5OmV9LCEwKTp0LnNldExheW91dCh7eDplfSwhMCl9KX0odCwidmVydGljYWwiPT09YT8oby1pKS9TOihuLWkpL1MsYSl9KSh0LGUsaSxvLGEscyxsKSxmdW5jdGlvbih0LGUsaSxuLG8sYSxyKXt2YXIgcz1mdW5jdGlvbih0LGUpe3ZhciBpPVtdLG49InZlcnRpY2FsIj09PWU/InkiOiJ4IixvPUtvKHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0TGF5b3V0KClbbl19KTtyZXR1cm4gby5rZXlzLnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC1lfSksRShvLmtleXMsZnVuY3Rpb24odCl7aS5wdXNoKG8uYnVja2V0cy5nZXQodCkpfSksaX0odCxyKTsoZnVuY3Rpb24odCxlLG8sYSxyLHMpe3ZhciBsPTEvMDtFKHQsZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgsaT0wO0UodCxmdW5jdGlvbih0KXtpKz10LmdldExheW91dCgpLnZhbHVlfSk7dmFyIG49InZlcnRpY2FsIj09PXM/KGEtKGUtMSkqcikvaTooby0oZS0xKSpyKS9pO248bCYmKGw9bil9KSxFKHQsZnVuY3Rpb24odCl7RSh0LGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXRMYXlvdXQoKS52YWx1ZSpsOyJ2ZXJ0aWNhbCI9PT1zPyh0LnNldExheW91dCh7eDplfSwhMCksdC5zZXRMYXlvdXQoe2R4Oml9LCEwKSk6KHQuc2V0TGF5b3V0KHt5OmV9LCEwKSx0LnNldExheW91dCh7ZHk6aX0sITApKX0pfSksRShlLGZ1bmN0aW9uKHQpe3ZhciBlPSt0LmdldFZhbHVlKCkqbDt0LnNldExheW91dCh7ZHk6ZX0sITApfSl9KShzLGUsaSxuLG8sciksZFMocyxvLGksbixyKTtmb3IodmFyIGw9MTswPGE7YS0tKWZTKHMsbCo9Ljk5LHIpLGRTKHMsbyxpLG4scikseFMocyxsLHIpLGRTKHMsbyxpLG4scil9KHQsZSxhLG8sbixyLHMpLGZ1bmN0aW9uKHQsZSl7dmFyIGk9InZlcnRpY2FsIj09PWU/IngiOiJ5IjtFKHQsZnVuY3Rpb24odCl7dC5vdXRFZGdlcy5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubm9kZTIuZ2V0TGF5b3V0KClbaV0tZS5ub2RlMi5nZXRMYXlvdXQoKVtpXX0pLHQuaW5FZGdlcy5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQubm9kZTEuZ2V0TGF5b3V0KClbaV0tZS5ub2RlMS5nZXRMYXlvdXQoKVtpXX0pfSksRSh0LGZ1bmN0aW9uKHQpe3ZhciBlPTAsaT0wO0UodC5vdXRFZGdlcyxmdW5jdGlvbih0KXt0LnNldExheW91dCh7c3k6ZX0sITApLGUrPXQuZ2V0TGF5b3V0KCkuZHl9KSxFKHQuaW5FZGdlcyxmdW5jdGlvbih0KXt0LnNldExheW91dCh7dHk6aX0sITApLGkrPXQuZ2V0TGF5b3V0KCkuZHl9KX0pfSh0LHMpfShzLGwsZSxpLG8sYSwwIT09TShzLGZ1bmN0aW9uKHQpe3JldHVybiAwPT09dC5nZXRMYXlvdXQoKS52YWx1ZX0pLmxlbmd0aD8wOnQuZ2V0KCJsYXlvdXRJdGVyYXRpb25zIiksdC5nZXQoIm9yaWVudCIpLHQuZ2V0KCJub2RlQWxpZ24iKSl9KX0pLHlmKGZ1bmN0aW9uKHQsZSl7dC5lYWNoU2VyaWVzQnlUeXBlKCJzYW5rZXkiLGZ1bmN0aW9uKG4pe3ZhciB0PW4uZ2V0R3JhcGgoKS5ub2RlcztpZih0Lmxlbmd0aCl7dmFyIG89MS8wLGE9LTEvMDtFKHQsZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRMYXlvdXQoKS52YWx1ZTtlPG8mJihvPWUpLGE8ZSYmKGE9ZSl9KSxFKHQsZnVuY3Rpb24odCl7dmFyIGU9bmV3IGFfKHt0eXBlOiJjb2xvciIsbWFwcGluZ01ldGhvZDoibGluZWFyIixkYXRhRXh0ZW50OltvLGFdLHZpc3VhbDpuLmdldCgiY29sb3IiKX0pLm1hcFZhbHVlVG9WaXN1YWwodC5nZXRMYXlvdXQoKS52YWx1ZSksaT10LmdldE1vZGVsKCkuZ2V0KCJpdGVtU3R5bGUuY29sb3IiKTtudWxsIT1pP3Quc2V0VmlzdWFsKCJjb2xvciIsaSk6dC5zZXRWaXN1YWwoImNvbG9yIixlKX0pfX0pfSk7dmFyIF9TPXtfYmFzZUF4aXNEaW06bnVsbCxnZXRJbml0aWFsRGF0YTpmdW5jdGlvbih0LGUpe3ZhciBpLG4sbz1lLmdldENvbXBvbmVudCgieEF4aXMiLHRoaXMuZ2V0KCJ4QXhpc0luZGV4IikpLGE9ZS5nZXRDb21wb25lbnQoInlBeGlzIix0aGlzLmdldCgieUF4aXNJbmRleCIpKSxyPW8uZ2V0KCJ0eXBlIikscz1hLmdldCgidHlwZSIpOyJjYXRlZ29yeSI9PT1yPyh0LmxheW91dD0iaG9yaXpvbnRhbCIsaT1vLmdldE9yZGluYWxNZXRhKCksbj0hMCk6ImNhdGVnb3J5Ij09PXM/KHQubGF5b3V0PSJ2ZXJ0aWNhbCIsaT1hLmdldE9yZGluYWxNZXRhKCksbj0hMCk6dC5sYXlvdXQ9dC5sYXlvdXR8fCJob3Jpem9udGFsIjt2YXIgbD1bIngiLCJ5Il0sdT0iaG9yaXpvbnRhbCI9PT10LmxheW91dD8wOjEsaD10aGlzLl9iYXNlQXhpc0RpbT1sW3VdLGM9bFsxLXVdLGQ9W28sYV0sZj1kW3VdLmdldCgidHlwZSIpLHA9ZFsxLXVdLmdldCgidHlwZSIpLGc9dC5kYXRhO2lmKGcmJm4pe3ZhciBtPVtdO0UoZyxmdW5jdGlvbih0LGUpe3ZhciBpO3QudmFsdWUmJmsodC52YWx1ZSk/KGk9dC52YWx1ZS5zbGljZSgpLHQudmFsdWUudW5zaGlmdChlKSk6ayh0KT8oaT10LnNsaWNlKCksdC51bnNoaWZ0KGUpKTppPXQsbS5wdXNoKGkpfSksdC5kYXRhPW19dmFyIHY9dGhpcy5kZWZhdWx0VmFsdWVEaW1lbnNpb25zLHk9W3tuYW1lOmgsdHlwZTpMZihmKSxvcmRpbmFsTWV0YTppLG90aGVyRGltczp7dG9vbHRpcDohMSxpdGVtTmFtZTowfSxkaW1zRGVmOlsiYmFzZSJdfSx7bmFtZTpjLHR5cGU6TGYocCksZGltc0RlZjp2LnNsaWNlKCl9XTtyZXR1cm4gQnYodGhpcyx7Y29vcmREaW1lbnNpb25zOnksZGltZW5zaW9uc0NvdW50OnYubGVuZ3RoKzEsZW5jb2RlRGVmYXVsdGVyOlQoWHUseSx0aGlzKX0pfSxnZXRCYXNlQXhpczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2Jhc2VBeGlzRGltO3JldHVybiB0aGlzLmVjTW9kZWwuZ2V0Q29tcG9uZW50KHQrIkF4aXMiLHRoaXMuZ2V0KHQrIkF4aXNJbmRleCIpKS5heGlzfX07YihpYy5leHRlbmQoe3R5cGU6InNlcmllcy5ib3hwbG90IixkZXBlbmRlbmNpZXM6WyJ4QXhpcyIsInlBeGlzIiwiZ3JpZCJdLGRlZmF1bHRWYWx1ZURpbWVuc2lvbnM6W3tuYW1lOiJtaW4iLGRlZmF1bHRUb29sdGlwOiEwfSx7bmFtZToiUTEiLGRlZmF1bHRUb29sdGlwOiEwfSx7bmFtZToibWVkaWFuIixkZWZhdWx0VG9vbHRpcDohMH0se25hbWU6IlEzIixkZWZhdWx0VG9vbHRpcDohMH0se25hbWU6Im1heCIsZGVmYXVsdFRvb2x0aXA6ITB9XSxkaW1lbnNpb25zOm51bGwsZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNvb3JkaW5hdGVTeXN0ZW06ImNhcnRlc2lhbjJkIixsZWdlbmRIb3Zlckxpbms6ITAsaG92ZXJBbmltYXRpb246ITAsbGF5b3V0Om51bGwsYm94V2lkdGg6WzcsNTBdLGl0ZW1TdHlsZTp7Y29sb3I6IiNmZmYiLGJvcmRlcldpZHRoOjF9LGVtcGhhc2lzOntpdGVtU3R5bGU6e2JvcmRlcldpZHRoOjIsc2hhZG93Qmx1cjo1LHNoYWRvd09mZnNldFg6MixzaGFkb3dPZmZzZXRZOjIsc2hhZG93Q29sb3I6InJnYmEoMCwwLDAsMC40KSJ9fSxhbmltYXRpb25FYXNpbmc6ImVsYXN0aWNPdXQiLGFuaW1hdGlvbkR1cmF0aW9uOjgwMH19KSxfUywhMCk7dmFyIHdTPVsiaXRlbVN0eWxlIl0sYlM9WyJlbXBoYXNpcyIsIml0ZW1TdHlsZSJdLFNTPShnYy5leHRlbmQoe3R5cGU6ImJveHBsb3QiLHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG89dC5nZXREYXRhKCksYT10aGlzLmdyb3VwLHI9dGhpcy5fZGF0YTt0aGlzLl9kYXRhfHxhLnJlbW92ZUFsbCgpO3ZhciBzPSJob3Jpem9udGFsIj09PXQuZ2V0KCJsYXlvdXQiKT8xOjA7by5kaWZmKHIpLmFkZChmdW5jdGlvbih0KXtpZihvLmhhc1ZhbHVlKHQpKXt2YXIgZT1NUyhvLmdldEl0ZW1MYXlvdXQodCksbyx0LHMsITApO28uc2V0SXRlbUdyYXBoaWNFbCh0LGUpLGEuYWRkKGUpfX0pLnVwZGF0ZShmdW5jdGlvbih0LGUpe3ZhciBpPXIuZ2V0SXRlbUdyYXBoaWNFbChlKTtpZihvLmhhc1ZhbHVlKHQpKXt2YXIgbj1vLmdldEl0ZW1MYXlvdXQodCk7aT9JUyhuLGksbyx0KTppPU1TKG4sbyx0LHMpLGEuYWRkKGkpLG8uc2V0SXRlbUdyYXBoaWNFbCh0LGkpfWVsc2UgYS5yZW1vdmUoaSl9KS5yZW1vdmUoZnVuY3Rpb24odCl7dmFyIGU9ci5nZXRJdGVtR3JhcGhpY0VsKHQpO2UmJmEucmVtb3ZlKGUpfSkuZXhlY3V0ZSgpLHRoaXMuX2RhdGE9b30scmVtb3ZlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ3JvdXAsaT10aGlzLl9kYXRhO3RoaXMuX2RhdGE9bnVsbCxpJiZpLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQpe3QmJmUucmVtb3ZlKHQpfSl9LGRpc3Bvc2U6ZXR9KSxTci5leHRlbmQoe3R5cGU6ImJveHBsb3RCb3hQYXRoIixzaGFwZTp7fSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLnBvaW50cyxuPTA7Zm9yKHQubW92ZVRvKGlbbl1bMF0saVtuXVsxXSksbisrO248NDtuKyspdC5saW5lVG8oaVtuXVswXSxpW25dWzFdKTtmb3IodC5jbG9zZVBhdGgoKTtuPGkubGVuZ3RoO24rKyl0Lm1vdmVUbyhpW25dWzBdLGlbbl1bMV0pLG4rKyx0LmxpbmVUbyhpW25dWzBdLGlbbl1bMV0pfX0pKTtmdW5jdGlvbiBNUyh0LGUsaSxuLG8pe3ZhciBhPXQuZW5kcyxyPW5ldyBTUyh7c2hhcGU6e3BvaW50czpvP2Z1bmN0aW9uKHQsZSxpKXtyZXR1cm4gTih0LGZ1bmN0aW9uKHQpe3JldHVybih0PXQuc2xpY2UoKSlbZV09aS5pbml0QmFzZWxpbmUsdH0pfShhLG4sdCk6YX19KTtyZXR1cm4gSVModCxyLGUsaSxvKSxyfWZ1bmN0aW9uIElTKHQsZSxpLG4sbyl7dmFyIGE9aS5ob3N0TW9kZWw7KDAseWxbbz8iaW5pdFByb3BzIjoidXBkYXRlUHJvcHMiXSkoZSx7c2hhcGU6e3BvaW50czp0LmVuZHN9fSxhLG4pO3ZhciByPWkuZ2V0SXRlbU1vZGVsKG4pLHM9ci5nZXRNb2RlbCh3UyksbD1pLmdldEl0ZW1WaXN1YWwobiwiY29sb3IiKSx1PXMuZ2V0SXRlbVN0eWxlKFsiYm9yZGVyQ29sb3IiXSk7dS5zdHJva2U9bCx1LnN0cm9rZU5vU2NhbGU9ITAsZS51c2VTdHlsZSh1KSxlLnoyPTEwMCxZcyhlLHIuZ2V0TW9kZWwoYlMpLmdldEl0ZW1TdHlsZSgpKX12YXIgVFM9WyJpdGVtU3R5bGUiLCJib3JkZXJDb2xvciJdLEFTPUU7eWYoZnVuY3Rpb24obix0KXt2YXIgbz1uLmdldCgiY29sb3IiKTtuLmVhY2hSYXdTZXJpZXNCeVR5cGUoImJveHBsb3QiLGZ1bmN0aW9uKHQpe3ZhciBlPW9bdC5zZXJpZXNJbmRleCVvLmxlbmd0aF0saT10LmdldERhdGEoKTtpLnNldFZpc3VhbCh7bGVnZW5kU3ltYm9sOiJyb3VuZFJlY3QiLGNvbG9yOnQuZ2V0KFRTKXx8ZX0pLG4uaXNTZXJpZXNGaWx0ZXJlZCh0KXx8aS5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0SXRlbU1vZGVsKHQpO2kuc2V0SXRlbVZpc3VhbCh0LHtjb2xvcjplLmdldChUUywhMCl9KX0pfSl9KSx2ZihmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXt2YXIgbj1bXSxvPVtdO3JldHVybiB0LmVhY2hTZXJpZXNCeVR5cGUoImJveHBsb3QiLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0QmFzZUF4aXMoKSxpPV8obyxlKTtpPDAmJihpPW8ubGVuZ3RoLG9baV09ZSxuW2ldPXtheGlzOmUsc2VyaWVzTW9kZWxzOltdfSksbltpXS5zZXJpZXNNb2RlbHMucHVzaCh0KX0pLG59KHQpO0FTKGUsZnVuY3Rpb24oaSl7dmFyIHQ9aS5zZXJpZXNNb2RlbHM7dC5sZW5ndGgmJihmdW5jdGlvbih0KXt2YXIgZSxpLG49dC5heGlzLG89dC5zZXJpZXNNb2RlbHMsYT1vLmxlbmd0aCxyPXQuYm94V2lkdGhMaXN0PVtdLHM9dC5ib3hPZmZzZXRMaXN0PVtdLGw9W107aWYoImNhdGVnb3J5Ij09PW4udHlwZSlpPW4uZ2V0QmFuZFdpZHRoKCk7ZWxzZXt2YXIgdT0wO0FTKG8sZnVuY3Rpb24odCl7dT1NYXRoLm1heCh1LHQuZ2V0RGF0YSgpLmNvdW50KCkpfSksZT1uLmdldEV4dGVudCgpLE1hdGguYWJzKGVbMV0tZVswXSl9QVMobyxmdW5jdGlvbih0KXt2YXIgZT10LmdldCgiYm94V2lkdGgiKTtrKGUpfHwoZT1bZSxlXSksbC5wdXNoKFtQbChlWzBdLGkpfHwwLFBsKGVbMV0saSl8fDBdKX0pO3ZhciBoPS44KmktMixjPWgvYSouMyxkPShoLWMqKGEtMSkpL2EsZj1kLzItaC8yO0FTKG8sZnVuY3Rpb24odCxlKXtzLnB1c2goZiksZis9YytkLHIucHVzaChNYXRoLm1pbihNYXRoLm1heChkLGxbZV1bMF0pLGxbZV1bMV0pKX0pfShpKSxBUyh0LGZ1bmN0aW9uKHQsZSl7IWZ1bmN0aW9uKHQscixlKXt2YXIgcz10LmNvb3JkaW5hdGVTeXN0ZW0sbD10LmdldERhdGEoKSxhPWUvMix1PSJob3Jpem9udGFsIj09PXQuZ2V0KCJsYXlvdXQiKT8wOjEsaD0xLXUsaT1bIngiLCJ5Il0sbj1sLm1hcERpbWVuc2lvbihpW3VdKSxvPWwubWFwRGltZW5zaW9uKGlbaF0sITApO2lmKG51bGw9PW58fG8ubGVuZ3RoPDUpcmV0dXJuO2Zvcih2YXIgYz0wO2M8bC5jb3VudCgpO2MrKyl7dmFyIGQ9bC5nZXQobixjKSxmPXgoZCxvWzJdLGMpLHA9eChkLG9bMF0sYyksZz14KGQsb1sxXSxjKSxtPXgoZCxvWzNdLGMpLHY9eChkLG9bNF0sYykseT1bXTtfKHksZywwKSxfKHksbSwxKSx5LnB1c2gocCxnLHYsbSksdyh5LHApLHcoeSx2KSx3KHksZiksbC5zZXRJdGVtTGF5b3V0KGMse2luaXRCYXNlbGluZTpmW2hdLGVuZHM6eX0pfWZ1bmN0aW9uIHgodCxlLGkpe3ZhciBuLG89bC5nZXQoZSxpKSxhPVtdO3JldHVybiBhW3VdPXQsYVtoXT1vLGlzTmFOKHQpfHxpc05hTihvKT9uPVtOYU4sTmFOXToobj1zLmRhdGFUb1BvaW50KGEpKVt1XSs9cixufWZ1bmN0aW9uIF8odCxlLGkpe3ZhciBuPWUuc2xpY2UoKSxvPWUuc2xpY2UoKTtuW3VdKz1hLG9bdV0tPWEsaT90LnB1c2gobixvKTp0LnB1c2gobyxuKX1mdW5jdGlvbiB3KHQsZSl7dmFyIGk9ZS5zbGljZSgpLG49ZS5zbGljZSgpO2lbdV0tPWEsblt1XSs9YSx0LnB1c2goaSxuKX19KHQsaS5ib3hPZmZzZXRMaXN0W2VdLGkuYm94V2lkdGhMaXN0W2VdKX0pKX0pfSksYihpYy5leHRlbmQoe3R5cGU6InNlcmllcy5jYW5kbGVzdGljayIsZGVwZW5kZW5jaWVzOlsieEF4aXMiLCJ5QXhpcyIsImdyaWQiXSxkZWZhdWx0VmFsdWVEaW1lbnNpb25zOlt7bmFtZToib3BlbiIsZGVmYXVsdFRvb2x0aXA6ITB9LHtuYW1lOiJjbG9zZSIsZGVmYXVsdFRvb2x0aXA6ITB9LHtuYW1lOiJsb3dlc3QiLGRlZmF1bHRUb29sdGlwOiEwfSx7bmFtZToiaGlnaGVzdCIsZGVmYXVsdFRvb2x0aXA6ITB9XSxkaW1lbnNpb25zOm51bGwsZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoyLGNvb3JkaW5hdGVTeXN0ZW06ImNhcnRlc2lhbjJkIixsZWdlbmRIb3Zlckxpbms6ITAsaG92ZXJBbmltYXRpb246ITAsbGF5b3V0Om51bGwsY2xpcDohMCxpdGVtU3R5bGU6e2NvbG9yOiIjYzIzNTMxIixjb2xvcjA6IiMzMTQ2NTYiLGJvcmRlcldpZHRoOjEsYm9yZGVyQ29sb3I6IiNjMjM1MzEiLGJvcmRlckNvbG9yMDoiIzMxNDY1NiJ9LGVtcGhhc2lzOntpdGVtU3R5bGU6e2JvcmRlcldpZHRoOjJ9fSxiYXJNYXhXaWR0aDpudWxsLGJhck1pbldpZHRoOm51bGwsYmFyV2lkdGg6bnVsbCxsYXJnZTohMCxsYXJnZVRocmVzaG9sZDo2MDAscHJvZ3Jlc3NpdmU6M2UzLHByb2dyZXNzaXZlVGhyZXNob2xkOjFlNCxwcm9ncmVzc2l2ZUNodW5rTW9kZToibW9kIixhbmltYXRpb25VcGRhdGU6ITEsYW5pbWF0aW9uRWFzaW5nOiJsaW5lYXIiLGFuaW1hdGlvbkR1cmF0aW9uOjMwMH0sZ2V0U2hhZG93RGltOmZ1bmN0aW9uKCl7cmV0dXJuIm9wZW4ifSxicnVzaFNlbGVjdG9yOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lLmdldEl0ZW1MYXlvdXQodCk7cmV0dXJuIG4mJmkucmVjdChuLmJydXNoUmVjdCl9fSksX1MsITApO3ZhciBEUz1bIml0ZW1TdHlsZSJdLENTPVsiZW1waGFzaXMiLCJpdGVtU3R5bGUiXSxMUz1bImNvbG9yIiwiY29sb3IwIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJDb2xvcjAiXSxrUz0oZ2MuZXh0ZW5kKHt0eXBlOiJjYW5kbGVzdGljayIscmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLmdyb3VwLnJlbW92ZUNsaXBQYXRoKCksdGhpcy5fdXBkYXRlRHJhd01vZGUodCksdGhpcy5faXNMYXJnZURyYXc/dGhpcy5fcmVuZGVyTGFyZ2UodCk6dGhpcy5fcmVuZGVyTm9ybWFsKHQpfSxpbmNyZW1lbnRhbFByZXBhcmVSZW5kZXI6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX2NsZWFyKCksdGhpcy5fdXBkYXRlRHJhd01vZGUodCl9LGluY3JlbWVudGFsUmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMuX2lzTGFyZ2VEcmF3P3RoaXMuX2luY3JlbWVudGFsUmVuZGVyTGFyZ2UodCxlKTp0aGlzLl9pbmNyZW1lbnRhbFJlbmRlck5vcm1hbCh0LGUpfSxfdXBkYXRlRHJhd01vZGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5waXBlbGluZUNvbnRleHQubGFyZ2U7KG51bGw9PXRoaXMuX2lzTGFyZ2VEcmF3fHxlXnRoaXMuX2lzTGFyZ2VEcmF3KSYmKHRoaXMuX2lzTGFyZ2VEcmF3PWUsdGhpcy5fY2xlYXIoKSl9LF9yZW5kZXJOb3JtYWw6ZnVuY3Rpb24obyl7dmFyIGE9by5nZXREYXRhKCkscj10aGlzLl9kYXRhLHM9dGhpcy5ncm91cCxsPWEuZ2V0TGF5b3V0KCJpc1NpbXBsZUJveCIpLHU9by5nZXQoImNsaXAiLCEwKSx0PW8uY29vcmRpbmF0ZVN5c3RlbSxoPXQuZ2V0QXJlYSYmdC5nZXRBcmVhKCk7dGhpcy5fZGF0YXx8cy5yZW1vdmVBbGwoKSxhLmRpZmYocikuYWRkKGZ1bmN0aW9uKHQpe2lmKGEuaGFzVmFsdWUodCkpe3ZhciBlLGk9YS5nZXRJdGVtTGF5b3V0KHQpO2lmKHUmJk5TKGgsaSkpcmV0dXJuO2xsKGU9UFMoaSx0LCEwKSx7c2hhcGU6e3BvaW50czppLmVuZHN9fSxvLHQpLE9TKGUsYSx0LGwpLHMuYWRkKGUpLGEuc2V0SXRlbUdyYXBoaWNFbCh0LGUpfX0pLnVwZGF0ZShmdW5jdGlvbih0LGUpe3ZhciBpPXIuZ2V0SXRlbUdyYXBoaWNFbChlKTtpZihhLmhhc1ZhbHVlKHQpKXt2YXIgbj1hLmdldEl0ZW1MYXlvdXQodCk7dSYmTlMoaCxuKT9zLnJlbW92ZShpKTooaT9zbChpLHtzaGFwZTp7cG9pbnRzOm4uZW5kc319LG8sdCk6aT1QUyhuLHQpLE9TKGksYSx0LGwpLHMuYWRkKGkpLGEuc2V0SXRlbUdyYXBoaWNFbCh0LGkpKX1lbHNlIHMucmVtb3ZlKGkpfSkucmVtb3ZlKGZ1bmN0aW9uKHQpe3ZhciBlPXIuZ2V0SXRlbUdyYXBoaWNFbCh0KTtlJiZzLnJlbW92ZShlKX0pLmV4ZWN1dGUoKSx0aGlzLl9kYXRhPWF9LF9yZW5kZXJMYXJnZTpmdW5jdGlvbih0KXt0aGlzLl9jbGVhcigpLHpTKHQsdGhpcy5ncm91cCk7dmFyIGU9dC5nZXQoImNsaXAiLCEwKT95bSh0LmNvb3JkaW5hdGVTeXN0ZW0sITEsdCk6bnVsbDtlP3RoaXMuZ3JvdXAuc2V0Q2xpcFBhdGgoZSk6dGhpcy5ncm91cC5yZW1vdmVDbGlwUGF0aCgpfSxfaW5jcmVtZW50YWxSZW5kZXJOb3JtYWw6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGksbj1lLmdldERhdGEoKSxvPW4uZ2V0TGF5b3V0KCJpc1NpbXBsZUJveCIpO251bGwhPShpPXQubmV4dCgpKTspe3ZhciBhO09TKGE9UFMobi5nZXRJdGVtTGF5b3V0KGkpLGkpLG4saSxvKSxhLmluY3JlbWVudGFsPSEwLHRoaXMuZ3JvdXAuYWRkKGEpfX0sX2luY3JlbWVudGFsUmVuZGVyTGFyZ2U6ZnVuY3Rpb24odCxlKXt6UyhlLHRoaXMuZ3JvdXAsITApfSxyZW1vdmU6ZnVuY3Rpb24odCl7dGhpcy5fY2xlYXIoKX0sX2NsZWFyOmZ1bmN0aW9uKCl7dGhpcy5ncm91cC5yZW1vdmVBbGwoKSx0aGlzLl9kYXRhPW51bGx9LGRpc3Bvc2U6ZXR9KSxTci5leHRlbmQoe3R5cGU6Im5vcm1hbENhbmRsZXN0aWNrQm94IixzaGFwZTp7fSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLnBvaW50czt0aGlzLl9fc2ltcGxlQm94Pyh0Lm1vdmVUbyhpWzRdWzBdLGlbNF1bMV0pLHQubGluZVRvKGlbNl1bMF0saVs2XVsxXSkpOih0Lm1vdmVUbyhpWzBdWzBdLGlbMF1bMV0pLHQubGluZVRvKGlbMV1bMF0saVsxXVsxXSksdC5saW5lVG8oaVsyXVswXSxpWzJdWzFdKSx0LmxpbmVUbyhpWzNdWzBdLGlbM11bMV0pLHQuY2xvc2VQYXRoKCksdC5tb3ZlVG8oaVs0XVswXSxpWzRdWzFdKSx0LmxpbmVUbyhpWzVdWzBdLGlbNV1bMV0pLHQubW92ZVRvKGlbNl1bMF0saVs2XVsxXSksdC5saW5lVG8oaVs3XVswXSxpWzddWzFdKSl9fSkpO2Z1bmN0aW9uIFBTKHQsZSxpKXt2YXIgbj10LmVuZHM7cmV0dXJuIG5ldyBrUyh7c2hhcGU6e3BvaW50czppP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIE4odCxmdW5jdGlvbih0KXtyZXR1cm4odD10LnNsaWNlKCkpWzFdPWUuaW5pdEJhc2VsaW5lLHR9KX0obix0KTpufSx6MjoxMDB9KX1mdW5jdGlvbiBOUyh0LGUpe2Zvcih2YXIgaT0hMCxuPTA7bjxlLmVuZHMubGVuZ3RoO24rKylpZih0LmNvbnRhaW4oZS5lbmRzW25dWzBdLGUuZW5kc1tuXVsxXSkpe2k9ITE7YnJlYWt9cmV0dXJuIGl9ZnVuY3Rpb24gT1ModCxlLGksbil7dmFyIG89ZS5nZXRJdGVtTW9kZWwoaSksYT1vLmdldE1vZGVsKERTKSxyPWUuZ2V0SXRlbVZpc3VhbChpLCJjb2xvciIpLHM9ZS5nZXRJdGVtVmlzdWFsKGksImJvcmRlckNvbG9yIil8fHIsbD1hLmdldEl0ZW1TdHlsZShMUyk7dC51c2VTdHlsZShsKSx0LnN0eWxlLnN0cm9rZU5vU2NhbGU9ITAsdC5zdHlsZS5maWxsPXIsdC5zdHlsZS5zdHJva2U9cyx0Ll9fc2ltcGxlQm94PW4sWXModCxvLmdldE1vZGVsKENTKS5nZXRJdGVtU3R5bGUoKSl9dmFyIEVTPVNyLmV4dGVuZCh7dHlwZToibGFyZ2VDYW5kbGVzdGlja0JveCIsc2hhcGU6e30sYnVpbGRQYXRoOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPWUucG9pbnRzLG49MDtuPGkubGVuZ3RoOylpZih0aGlzLl9fc2lnbj09PWlbbisrXSl7dmFyIG89aVtuKytdO3QubW92ZVRvKG8saVtuKytdKSx0LmxpbmVUbyhvLGlbbisrXSl9ZWxzZSBuKz0zfX0pO2Z1bmN0aW9uIHpTKHQsZSxpKXt2YXIgbj10LmdldERhdGEoKSxvPW4uZ2V0TGF5b3V0KCJsYXJnZVBvaW50cyIpLGE9bmV3IEVTKHtzaGFwZTp7cG9pbnRzOm99LF9fc2lnbjoxfSk7ZS5hZGQoYSk7dmFyIHI9bmV3IEVTKHtzaGFwZTp7cG9pbnRzOm99LF9fc2lnbjotMX0pO2UuYWRkKHIpLFJTKDEsYSx0LG4pLFJTKC0xLHIsdCxuKSxpJiYoYS5pbmNyZW1lbnRhbD0hMCxyLmluY3JlbWVudGFsPSEwKX1mdW5jdGlvbiBSUyh0LGUsaSxuKXt2YXIgbz0wPHQ/IlAiOiJOIixhPW4uZ2V0VmlzdWFsKCJib3JkZXJDb2xvciIrbyl8fG4uZ2V0VmlzdWFsKCJjb2xvciIrbykscj1pLmdldE1vZGVsKERTKS5nZXRJdGVtU3R5bGUoTFMpO2UudXNlU3R5bGUociksZS5zdHlsZS5maWxsPW51bGwsZS5zdHlsZS5zdHJva2U9YX12YXIgQlM9WyJpdGVtU3R5bGUiLCJib3JkZXJDb2xvciJdLFZTPVsiaXRlbVN0eWxlIiwiYm9yZGVyQ29sb3IwIl0sR1M9WyJpdGVtU3R5bGUiLCJjb2xvciJdLEZTPVsiaXRlbVN0eWxlIiwiY29sb3IwIl0sV1M9e3Nlcmllc1R5cGU6ImNhbmRsZXN0aWNrIixwbGFuOmRjKCkscGVyZm9ybVJhd1NlcmllczohMCxyZXNldDpmdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0RGF0YSgpLG49dC5waXBlbGluZUNvbnRleHQubGFyZ2U7aWYoaS5zZXRWaXN1YWwoe2xlZ2VuZFN5bWJvbDoicm91bmRSZWN0Iixjb2xvclA6YSgxLHQpLGNvbG9yTjphKC0xLHQpLGJvcmRlckNvbG9yUDpyKDEsdCksYm9yZGVyQ29sb3JOOnIoLTEsdCl9KSwhZS5pc1Nlcmllc0ZpbHRlcmVkKHQpKXJldHVybiFuJiZ7cHJvZ3Jlc3M6ZnVuY3Rpb24odCxlKXt2YXIgaTtmb3IoO251bGwhPShpPXQubmV4dCgpKTspe3ZhciBuPWUuZ2V0SXRlbU1vZGVsKGkpLG89ZS5nZXRJdGVtTGF5b3V0KGkpLnNpZ247ZS5zZXRJdGVtVmlzdWFsKGkse2NvbG9yOmEobyxuKSxib3JkZXJDb2xvcjpyKG8sbil9KX19fTtmdW5jdGlvbiBhKHQsZSl7cmV0dXJuIGUuZ2V0KDA8dD9HUzpGUyl9ZnVuY3Rpb24gcih0LGUpe3JldHVybiBlLmdldCgwPHQ/QlM6VlMpfX19LEhTPSJ1bmRlZmluZWQiIT10eXBlb2YgRmxvYXQzMkFycmF5P0Zsb2F0MzJBcnJheTpBcnJheSxaUz17c2VyaWVzVHlwZToiY2FuZGxlc3RpY2siLHBsYW46ZGMoKSxyZXNldDpmdW5jdGlvbih0KXt2YXIgeD10LmNvb3JkaW5hdGVTeXN0ZW0sZT10LmdldERhdGEoKSxfPWZ1bmN0aW9uKHQsZSl7dmFyIGksbj10LmdldEJhc2VBeGlzKCksbz0iY2F0ZWdvcnkiPT09bi50eXBlP24uZ2V0QmFuZFdpZHRoKCk6KGk9bi5nZXRFeHRlbnQoKSxNYXRoLmFicyhpWzFdLWlbMF0pL2UuY291bnQoKSksYT1QbChIKHQuZ2V0KCJiYXJNYXhXaWR0aCIpLG8pLG8pLHI9UGwoSCh0LmdldCgiYmFyTWluV2lkdGgiKSwxKSxvKSxzPXQuZ2V0KCJiYXJXaWR0aCIpO3JldHVybiBudWxsIT1zP1BsKHMsbyk6TWF0aC5tYXgoTWF0aC5taW4oby8yLGEpLHIpfSh0LGUpLGk9WyJ4IiwieSJdLHc9ZS5tYXBEaW1lbnNpb24oaVswXSksbj1lLm1hcERpbWVuc2lvbihpWzFdLCEwKSxiPW5bMF0sUz1uWzFdLE09blsyXSxJPW5bM107aWYoZS5zZXRMYXlvdXQoe2NhbmRsZVdpZHRoOl8saXNTaW1wbGVCb3g6Xzw9MS4zfSksIShudWxsPT13fHxuLmxlbmd0aDw0KSlyZXR1cm57cHJvZ3Jlc3M6dC5waXBlbGluZUNvbnRleHQubGFyZ2U/ZnVuY3Rpb24odCxlKXt2YXIgaSxuLG89bmV3IEhTKDQqdC5jb3VudCksYT0wLHI9W10scz1bXTtmb3IoO251bGwhPShuPXQubmV4dCgpKTspe3ZhciBsPWUuZ2V0KHcsbiksdT1lLmdldChiLG4pLGg9ZS5nZXQoUyxuKSxjPWUuZ2V0KE0sbiksZD1lLmdldChJLG4pO2lzTmFOKGwpfHxpc05hTihjKXx8aXNOYU4oZCk/KG9bYSsrXT1OYU4sYSs9Myk6KG9bYSsrXT1VUyhlLG4sdSxoLFMpLHJbMF09bCxyWzFdPWMsaT14LmRhdGFUb1BvaW50KHIsbnVsbCxzKSxvW2ErK109aT9pWzBdOk5hTixvW2ErK109aT9pWzFdOk5hTixyWzFdPWQsaT14LmRhdGFUb1BvaW50KHIsbnVsbCxzKSxvW2ErK109aT9pWzFdOk5hTil9ZS5zZXRMYXlvdXQoImxhcmdlUG9pbnRzIixvKX06ZnVuY3Rpb24odCxlKXt2YXIgaTtmb3IoO251bGwhPShpPXQubmV4dCgpKTspe3ZhciBuPWUuZ2V0KHcsaSksbz1lLmdldChiLGkpLGE9ZS5nZXQoUyxpKSxyPWUuZ2V0KE0saSkscz1lLmdldChJLGkpLGw9TWF0aC5taW4obyxhKSx1PU1hdGgubWF4KG8sYSksaD1nKGwsbiksYz1nKHUsbiksZD1nKHIsbiksZj1nKHMsbikscD1bXTttKHAsYywwKSxtKHAsaCwxKSxwLnB1c2goeShmKSx5KGMpLHkoZCkseShoKSksZS5zZXRJdGVtTGF5b3V0KGkse3NpZ246VVMoZSxpLG8sYSxTKSxpbml0QmFzZWxpbmU6YTxvP2NbMV06aFsxXSxlbmRzOnAsYnJ1c2hSZWN0OnYocixzLG4pfSl9ZnVuY3Rpb24gZyh0LGUpe3ZhciBpPVtdO3JldHVybiBpWzBdPWUsaVsxXT10LGlzTmFOKGUpfHxpc05hTih0KT9bTmFOLE5hTl06eC5kYXRhVG9Qb2ludChpKX1mdW5jdGlvbiBtKHQsZSxpKXt2YXIgbj1lLnNsaWNlKCksbz1lLnNsaWNlKCk7blswXT1OcyhuWzBdK18vMiwxLCExKSxvWzBdPU5zKG9bMF0tXy8yLDEsITApLGk/dC5wdXNoKG4sbyk6dC5wdXNoKG8sbil9ZnVuY3Rpb24gdih0LGUsaSl7dmFyIG49Zyh0LGkpLG89ZyhlLGkpO3JldHVybiBuWzBdLT1fLzIsb1swXS09Xy8yLHt4Om5bMF0seTpuWzFdLHdpZHRoOl8saGVpZ2h0Om9bMV0tblsxXX19ZnVuY3Rpb24geSh0KXtyZXR1cm4gdFswXT1Ocyh0WzBdLDEpLHR9fX19fTtmdW5jdGlvbiBVUyh0LGUsaSxuLG8pe3JldHVybiBuPGk/LTE6aTxuPzE6MDxlP3QuZ2V0KG8sZS0xKTw9bj8xOi0xOjF9ZmYoZnVuY3Rpb24odCl7dCYmayh0LnNlcmllcykmJkUodC5zZXJpZXMsZnVuY3Rpb24odCl7Uih0KSYmImsiPT09dC50eXBlJiYodC50eXBlPSJjYW5kbGVzdGljayIpfSl9KSx5ZihXUyksdmYoWlMpLGljLmV4dGVuZCh7dHlwZToic2VyaWVzLmVmZmVjdFNjYXR0ZXIiLGRlcGVuZGVuY2llczpbImdyaWQiLCJwb2xhciJdLGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGhwKHRoaXMuZ2V0U291cmNlKCksdGhpcyx7dXNlRW5jb2RlRGVmYXVsdGVyOiEwfSl9LGJydXNoU2VsZWN0b3I6InBvaW50IixkZWZhdWx0T3B0aW9uOntjb29yZGluYXRlU3lzdGVtOiJjYXJ0ZXNpYW4yZCIsemxldmVsOjAsejoyLGxlZ2VuZEhvdmVyTGluazohMCxlZmZlY3RUeXBlOiJyaXBwbGUiLHByb2dyZXNzaXZlOjAsc2hvd0VmZmVjdE9uOiJyZW5kZXIiLHJpcHBsZUVmZmVjdDp7cGVyaW9kOjQsc2NhbGU6Mi41LGJydXNoVHlwZToiZmlsbCJ9LHN5bWJvbFNpemU6MTB9fSk7ZnVuY3Rpb24gWFModCxlKXt2YXIgaT1lLnJpcHBsZUVmZmVjdENvbG9yfHxlLmNvbG9yO3QuZWFjaENoaWxkKGZ1bmN0aW9uKHQpe3QuYXR0cih7ejplLnosemxldmVsOmUuemxldmVsLHN0eWxlOntzdHJva2U6InN0cm9rZSI9PT1lLmJydXNoVHlwZT9pOm51bGwsZmlsbDoiZmlsbCI9PT1lLmJydXNoVHlwZT9pOm51bGx9fSl9KX1mdW5jdGlvbiBZUyh0LGUpe0lpLmNhbGwodGhpcyk7dmFyIGk9bmV3IEZnKHQsZSksbj1uZXcgSWk7dGhpcy5hZGQoaSksdGhpcy5hZGQobiksbi5iZWZvcmVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmF0dHIoaS5nZXRTY2FsZSgpKX0sdGhpcy51cGRhdGVEYXRhKHQsZSl9dmFyIGpTPVlTLnByb3RvdHlwZTtqUy5zdG9wRWZmZWN0QW5pbWF0aW9uPWZ1bmN0aW9uKCl7dGhpcy5jaGlsZEF0KDEpLnJlbW92ZUFsbCgpfSxqUy5zdGFydEVmZmVjdEFuaW1hdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zeW1ib2xUeXBlLGk9dC5jb2xvcixuPXRoaXMuY2hpbGRBdCgxKSxvPTA7bzwzO28rKyl7dmFyIGE9bWcoZSwtMSwtMSwyLDIsaSk7YS5hdHRyKHtzdHlsZTp7c3Ryb2tlTm9TY2FsZTohMH0sejI6OTksc2lsZW50OiEwLHNjYWxlOlsuNSwuNV19KTt2YXIgcj0tby8zKnQucGVyaW9kK3QuZWZmZWN0T2Zmc2V0O2EuYW5pbWF0ZSgiIiwhMCkud2hlbih0LnBlcmlvZCx7c2NhbGU6W3QucmlwcGxlU2NhbGUvMix0LnJpcHBsZVNjYWxlLzJdfSkuZGVsYXkocikuc3RhcnQoKSxhLmFuaW1hdGVTdHlsZSghMCkud2hlbih0LnBlcmlvZCx7b3BhY2l0eTowfSkuZGVsYXkocikuc3RhcnQoKSxuLmFkZChhKX1YUyhuLHQpfSxqUy51cGRhdGVFZmZlY3RBbmltYXRpb249ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuX2VmZmVjdENmZyxpPXRoaXMuY2hpbGRBdCgxKSxuPVsic3ltYm9sVHlwZSIsInBlcmlvZCIsInJpcHBsZVNjYWxlIl0sbz0wO288bi5sZW5ndGg7bysrKXt2YXIgYT1uW29dO2lmKGVbYV0hPT10W2FdKXJldHVybiB0aGlzLnN0b3BFZmZlY3RBbmltYXRpb24oKSx2b2lkIHRoaXMuc3RhcnRFZmZlY3RBbmltYXRpb24odCl9WFMoaSx0KX0salMuaGlnaGxpZ2h0PWZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJlbXBoYXNpcyIpfSxqUy5kb3ducGxheT1mdW5jdGlvbigpe3RoaXMudHJpZ2dlcigibm9ybWFsIil9LGpTLnVwZGF0ZURhdGE9ZnVuY3Rpb24odCxlKXt2YXIgaT10Lmhvc3RNb2RlbDt0aGlzLmNoaWxkQXQoMCkudXBkYXRlRGF0YSh0LGUpO3ZhciBuPXRoaXMuY2hpbGRBdCgxKSxvPXQuZ2V0SXRlbU1vZGVsKGUpLGE9dC5nZXRJdGVtVmlzdWFsKGUsInN5bWJvbCIpLHI9ZnVuY3Rpb24odCl7cmV0dXJuIGsodCl8fCh0PVsrdCwrdF0pLHR9KHQuZ2V0SXRlbVZpc3VhbChlLCJzeW1ib2xTaXplIikpLHM9dC5nZXRJdGVtVmlzdWFsKGUsImNvbG9yIik7bi5hdHRyKCJzY2FsZSIsciksbi50cmF2ZXJzZShmdW5jdGlvbih0KXt0LmF0dHIoe2ZpbGw6c30pfSk7dmFyIGw9by5nZXRTaGFsbG93KCJzeW1ib2xPZmZzZXQiKTtpZihsKXt2YXIgdT1uLnBvc2l0aW9uO3VbMF09UGwobFswXSxyWzBdKSx1WzFdPVBsKGxbMV0sclsxXSl9bi5yb3RhdGlvbj0oby5nZXRTaGFsbG93KCJzeW1ib2xSb3RhdGUiKXx8MCkqTWF0aC5QSS8xODB8fDA7dmFyIGg9e307aWYoaC5zaG93RWZmZWN0T249aS5nZXQoInNob3dFZmZlY3RPbiIpLGgucmlwcGxlU2NhbGU9by5nZXQoInJpcHBsZUVmZmVjdC5zY2FsZSIpLGguYnJ1c2hUeXBlPW8uZ2V0KCJyaXBwbGVFZmZlY3QuYnJ1c2hUeXBlIiksaC5wZXJpb2Q9MWUzKm8uZ2V0KCJyaXBwbGVFZmZlY3QucGVyaW9kIiksaC5lZmZlY3RPZmZzZXQ9ZS90LmNvdW50KCksaC56PW8uZ2V0U2hhbGxvdygieiIpfHwwLGguemxldmVsPW8uZ2V0U2hhbGxvdygiemxldmVsIil8fDAsaC5zeW1ib2xUeXBlPWEsaC5jb2xvcj1zLGgucmlwcGxlRWZmZWN0Q29sb3I9by5nZXQoInJpcHBsZUVmZmVjdC5jb2xvciIpLHRoaXMub2ZmKCJtb3VzZW92ZXIiKS5vZmYoIm1vdXNlb3V0Iikub2ZmKCJlbXBoYXNpcyIpLm9mZigibm9ybWFsIiksInJlbmRlciI9PT1oLnNob3dFZmZlY3RPbil0aGlzLl9lZmZlY3RDZmc/dGhpcy51cGRhdGVFZmZlY3RBbmltYXRpb24oaCk6dGhpcy5zdGFydEVmZmVjdEFuaW1hdGlvbihoKSx0aGlzLl9lZmZlY3RDZmc9aDtlbHNle3RoaXMuX2VmZmVjdENmZz1udWxsLHRoaXMuc3RvcEVmZmVjdEFuaW1hdGlvbigpO3ZhciBjPXRoaXMuY2hpbGRBdCgwKSxkPWZ1bmN0aW9uKCl7Yy5oaWdobGlnaHQoKSwicmVuZGVyIiE9PWguc2hvd0VmZmVjdE9uJiZ0aGlzLnN0YXJ0RWZmZWN0QW5pbWF0aW9uKGgpfSxmPWZ1bmN0aW9uKCl7Yy5kb3ducGxheSgpLCJyZW5kZXIiIT09aC5zaG93RWZmZWN0T24mJnRoaXMuc3RvcEVmZmVjdEFuaW1hdGlvbigpfTt0aGlzLm9uKCJtb3VzZW92ZXIiLGQsdGhpcykub24oIm1vdXNlb3V0IixmLHRoaXMpLm9uKCJlbXBoYXNpcyIsZCx0aGlzKS5vbigibm9ybWFsIixmLHRoaXMpfXRoaXMuX2VmZmVjdENmZz1ofSxqUy5mYWRlT3V0PWZ1bmN0aW9uKHQpe3RoaXMub2ZmKCJtb3VzZW92ZXIiKS5vZmYoIm1vdXNlb3V0Iikub2ZmKCJlbXBoYXNpcyIpLm9mZigibm9ybWFsIiksdCYmdCgpfSx3KFlTLElpKSxNZih7dHlwZToiZWZmZWN0U2NhdHRlciIsaW5pdDpmdW5jdGlvbigpe3RoaXMuX3N5bWJvbERyYXc9bmV3ICRnKFlTKX0scmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldERhdGEoKSxvPXRoaXMuX3N5bWJvbERyYXc7by51cGRhdGVEYXRhKG4pLHRoaXMuZ3JvdXAuYWRkKG8uZ3JvdXApfSx1cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuZ2V0RGF0YSgpO3RoaXMuZ3JvdXAuZGlydHkoKTt2YXIgbz1JbSgpLnJlc2V0KHQpO28ucHJvZ3Jlc3MmJm8ucHJvZ3Jlc3Moe3N0YXJ0OjAsZW5kOm4uY291bnQoKX0sbiksdGhpcy5fc3ltYm9sRHJhdy51cGRhdGVMYXlvdXQobil9LF91cGRhdGVHcm91cFRyYW5zZm9ybTpmdW5jdGlvbih0KXt2YXIgZT10LmNvb3JkaW5hdGVTeXN0ZW07ZSYmZS5nZXRSb2FtVHJhbnNmb3JtJiYodGhpcy5ncm91cC50cmFuc2Zvcm09dWUoZS5nZXRSb2FtVHJhbnNmb3JtKCkpLHRoaXMuZ3JvdXAuZGVjb21wb3NlVHJhbnNmb3JtKCkpfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXt0aGlzLl9zeW1ib2xEcmF3JiZ0aGlzLl9zeW1ib2xEcmF3LnJlbW92ZShlKX0sZGlzcG9zZTpmdW5jdGlvbigpe319KSx5ZihNbSgiZWZmZWN0U2NhdHRlciIsImNpcmNsZSIpKSx2ZihJbSgiZWZmZWN0U2NhdHRlciIpKTt2YXIgcVM9InVuZGVmaW5lZCI9PXR5cGVvZiBVaW50MzJBcnJheT9BcnJheTpVaW50MzJBcnJheSxLUz0idW5kZWZpbmVkIj09dHlwZW9mIEZsb2F0NjRBcnJheT9BcnJheTpGbG9hdDY0QXJyYXk7ZnVuY3Rpb24gJFModCl7dmFyIGU9dC5kYXRhO2UmJmVbMF0mJmVbMF1bMF0mJmVbMF1bMF0uY29vcmQmJih0LmRhdGE9TihlLGZ1bmN0aW9uKHQpe3ZhciBlPXtjb29yZHM6W3RbMF0uY29vcmQsdFsxXS5jb29yZF19O3JldHVybiB0WzBdLm5hbWUmJihlLmZyb21OYW1lPXRbMF0ubmFtZSksdFsxXS5uYW1lJiYoZS50b05hbWU9dFsxXS5uYW1lKSxwKFtlLHRbMF0sdFsxXV0pfSkpfXZhciBKUz1pYy5leHRlbmQoe3R5cGU6InNlcmllcy5saW5lcyIsZGVwZW5kZW5jaWVzOlsiZ3JpZCIsInBvbGFyIl0sdmlzdWFsQ29sb3JBY2Nlc3NQYXRoOiJsaW5lU3R5bGUuY29sb3IiLGluaXQ6ZnVuY3Rpb24odCl7dC5kYXRhPXQuZGF0YXx8W10sJFModCk7dmFyIGU9dGhpcy5fcHJvY2Vzc0ZsYXRDb29yZHNBcnJheSh0LmRhdGEpO3RoaXMuX2ZsYXRDb29yZHM9ZS5mbGF0Q29vcmRzLHRoaXMuX2ZsYXRDb29yZHNPZmZzZXQ9ZS5mbGF0Q29vcmRzT2Zmc2V0LGUuZmxhdENvb3JkcyYmKHQuZGF0YT1uZXcgRmxvYXQzMkFycmF5KGUuY291bnQpKSxKUy5zdXBlckFwcGx5KHRoaXMsImluaXQiLGFyZ3VtZW50cyl9LG1lcmdlT3B0aW9uOmZ1bmN0aW9uKHQpe2lmKHQuZGF0YT10LmRhdGF8fFtdLCRTKHQpLHQuZGF0YSl7dmFyIGU9dGhpcy5fcHJvY2Vzc0ZsYXRDb29yZHNBcnJheSh0LmRhdGEpO3RoaXMuX2ZsYXRDb29yZHM9ZS5mbGF0Q29vcmRzLHRoaXMuX2ZsYXRDb29yZHNPZmZzZXQ9ZS5mbGF0Q29vcmRzT2Zmc2V0LGUuZmxhdENvb3JkcyYmKHQuZGF0YT1uZXcgRmxvYXQzMkFycmF5KGUuY291bnQpKX1KUy5zdXBlckFwcGx5KHRoaXMsIm1lcmdlT3B0aW9uIixhcmd1bWVudHMpfSxhcHBlbmREYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3Byb2Nlc3NGbGF0Q29vcmRzQXJyYXkodC5kYXRhKTtlLmZsYXRDb29yZHMmJih0aGlzLl9mbGF0Q29vcmRzPyh0aGlzLl9mbGF0Q29vcmRzPXR0KHRoaXMuX2ZsYXRDb29yZHMsZS5mbGF0Q29vcmRzKSx0aGlzLl9mbGF0Q29vcmRzT2Zmc2V0PXR0KHRoaXMuX2ZsYXRDb29yZHNPZmZzZXQsZS5mbGF0Q29vcmRzT2Zmc2V0KSk6KHRoaXMuX2ZsYXRDb29yZHM9ZS5mbGF0Q29vcmRzLHRoaXMuX2ZsYXRDb29yZHNPZmZzZXQ9ZS5mbGF0Q29vcmRzT2Zmc2V0KSx0LmRhdGE9bmV3IEZsb2F0MzJBcnJheShlLmNvdW50KSksdGhpcy5nZXRSYXdEYXRhKCkuYXBwZW5kRGF0YSh0LmRhdGEpfSxfZ2V0Q29vcmRzRnJvbUl0ZW1Nb2RlbDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldERhdGEoKS5nZXRJdGVtTW9kZWwodCk7cmV0dXJuIGUub3B0aW9uIGluc3RhbmNlb2YgQXJyYXk/ZS5vcHRpb246ZS5nZXRTaGFsbG93KCJjb29yZHMiKX0sZ2V0TGluZUNvb3Jkc0NvdW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9mbGF0Q29vcmRzT2Zmc2V0P3RoaXMuX2ZsYXRDb29yZHNPZmZzZXRbMip0KzFdOnRoaXMuX2dldENvb3Jkc0Zyb21JdGVtTW9kZWwodCkubGVuZ3RofSxnZXRMaW5lQ29vcmRzOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fZmxhdENvb3Jkc09mZnNldCl7Zm9yKHZhciBpPXRoaXMuX2ZsYXRDb29yZHNPZmZzZXRbMip0XSxuPXRoaXMuX2ZsYXRDb29yZHNPZmZzZXRbMip0KzFdLG89MDtvPG47bysrKWVbb109ZVtvXXx8W10sZVtvXVswXT10aGlzLl9mbGF0Q29vcmRzW2krMipvXSxlW29dWzFdPXRoaXMuX2ZsYXRDb29yZHNbaSsyKm8rMV07cmV0dXJuIG59dmFyIGE9dGhpcy5fZ2V0Q29vcmRzRnJvbUl0ZW1Nb2RlbCh0KTtmb3Iobz0wO288YS5sZW5ndGg7bysrKWVbb109ZVtvXXx8W10sZVtvXVswXT1hW29dWzBdLGVbb11bMV09YVtvXVsxXTtyZXR1cm4gYS5sZW5ndGh9LF9wcm9jZXNzRmxhdENvb3Jkc0FycmF5OmZ1bmN0aW9uKHQpe3ZhciBlPTA7aWYodGhpcy5fZmxhdENvb3JkcyYmKGU9dGhpcy5fZmxhdENvb3Jkcy5sZW5ndGgpLCJudW1iZXIiIT10eXBlb2YgdFswXSlyZXR1cm57ZmxhdENvb3Jkc09mZnNldDpudWxsLGZsYXRDb29yZHM6bnVsbCxjb3VudDp0Lmxlbmd0aH07Zm9yKHZhciBpPXQubGVuZ3RoLG49bmV3IHFTKGkpLG89bmV3IEtTKGkpLGE9MCxyPTAscz0wLGw9MDtsPGk7KXtzKys7dmFyIHU9dFtsKytdO25bcisrXT1hK2UsbltyKytdPXU7Zm9yKHZhciBoPTA7aDx1O2grKyl7dmFyIGM9dFtsKytdLGQ9dFtsKytdO29bYSsrXT1jLG9bYSsrXT1kfX1yZXR1cm57ZmxhdENvb3Jkc09mZnNldDpuZXcgVWludDMyQXJyYXkobi5idWZmZXIsMCxyKSxmbGF0Q29vcmRzOm8sY291bnQ6c319LGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQsZSl7dmFyIGE9bmV3IFdmKFsidmFsdWUiXSx0aGlzKTtyZXR1cm4gYS5oYXNJdGVtT3B0aW9uPSExLGEuaW5pdERhdGEodC5kYXRhLFtdLGZ1bmN0aW9uKHQsZSxpLG4pe2lmKHQgaW5zdGFuY2VvZiBBcnJheSlyZXR1cm4gTmFOO2EuaGFzSXRlbU9wdGlvbj0hMDt2YXIgbz10LnZhbHVlO3JldHVybiBudWxsIT1vP28gaW5zdGFuY2VvZiBBcnJheT9vW25dOm86dm9pZCAwfSksYX0sZm9ybWF0VG9vbHRpcDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldERhdGEoKS5nZXRJdGVtTW9kZWwodCksaT1lLmdldCgibmFtZSIpO2lmKGkpcmV0dXJuIGk7dmFyIG49ZS5nZXQoImZyb21OYW1lIiksbz1lLmdldCgidG9OYW1lIiksYT1bXTtyZXR1cm4gbnVsbCE9biYmYS5wdXNoKG4pLG51bGwhPW8mJmEucHVzaChvKSxldShhLmpvaW4oIiA+ICIpKX0scHJldmVudEluY3JlbWVudGFsOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmdldCgiZWZmZWN0LnNob3ciKX0sZ2V0UHJvZ3Jlc3NpdmU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbi5wcm9ncmVzc2l2ZTtyZXR1cm4gbnVsbD09dD90aGlzLm9wdGlvbi5sYXJnZT8xZTQ6dGhpcy5nZXQoInByb2dyZXNzaXZlIik6dH0sZ2V0UHJvZ3Jlc3NpdmVUaHJlc2hvbGQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbi5wcm9ncmVzc2l2ZVRocmVzaG9sZDtyZXR1cm4gbnVsbD09dD90aGlzLm9wdGlvbi5sYXJnZT8yZTQ6dGhpcy5nZXQoInByb2dyZXNzaXZlVGhyZXNob2xkIik6dH0sZGVmYXVsdE9wdGlvbjp7Y29vcmRpbmF0ZVN5c3RlbToiZ2VvIix6bGV2ZWw6MCx6OjIsbGVnZW5kSG92ZXJMaW5rOiEwLGhvdmVyQW5pbWF0aW9uOiEwLHhBeGlzSW5kZXg6MCx5QXhpc0luZGV4OjAsc3ltYm9sOlsibm9uZSIsIm5vbmUiXSxzeW1ib2xTaXplOlsxMCwxMF0sZ2VvSW5kZXg6MCxlZmZlY3Q6e3Nob3c6ITEscGVyaW9kOjQsY29uc3RhbnRTcGVlZDowLHN5bWJvbDoiY2lyY2xlIixzeW1ib2xTaXplOjMsbG9vcDohMCx0cmFpbExlbmd0aDouMn0sbGFyZ2U6ITEsbGFyZ2VUaHJlc2hvbGQ6MmUzLHBvbHlsaW5lOiExLGNsaXA6ITAsbGFiZWw6e3Nob3c6ITEscG9zaXRpb246ImVuZCJ9LGxpbmVTdHlsZTp7b3BhY2l0eTouNX19fSk7ZnVuY3Rpb24gUVModCxlLGkpe0lpLmNhbGwodGhpcyksdGhpcy5hZGQodGhpcy5jcmVhdGVMaW5lKHQsZSxpKSksdGhpcy5fdXBkYXRlRWZmZWN0U3ltYm9sKHQsZSl9dmFyIHRNPVFTLnByb3RvdHlwZTtmdW5jdGlvbiBlTSh0LGUsaSl7SWkuY2FsbCh0aGlzKSx0aGlzLl9jcmVhdGVQb2x5bGluZSh0LGUsaSl9dE0uY3JlYXRlTGluZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIG5ldyBpdyh0LGUsaSl9LHRNLl91cGRhdGVFZmZlY3RTeW1ib2w9ZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldEl0ZW1Nb2RlbChlKS5nZXRNb2RlbCgiZWZmZWN0Iiksbj1pLmdldCgic3ltYm9sU2l6ZSIpLG89aS5nZXQoInN5bWJvbCIpO2sobil8fChuPVtuLG5dKTt2YXIgYT1pLmdldCgiY29sb3IiKXx8dC5nZXRJdGVtVmlzdWFsKGUsImNvbG9yIikscj10aGlzLmNoaWxkQXQoMSk7dGhpcy5fc3ltYm9sVHlwZSE9PW8mJih0aGlzLnJlbW92ZShyKSwocj1tZyhvLC0uNSwtLjUsMSwxLGEpKS56Mj0xMDAsci5jdWxsaW5nPSEwLHRoaXMuYWRkKHIpKSxyJiYoci5zZXRTdHlsZSgic2hhZG93Q29sb3IiLGEpLHIuc2V0U3R5bGUoaS5nZXRJdGVtU3R5bGUoWyJjb2xvciJdKSksci5hdHRyKCJzY2FsZSIsbiksci5zZXRDb2xvcihhKSxyLmF0dHIoInNjYWxlIixuKSx0aGlzLl9zeW1ib2xUeXBlPW8sdGhpcy5fdXBkYXRlRWZmZWN0QW5pbWF0aW9uKHQsaSxlKSl9LHRNLl91cGRhdGVFZmZlY3RBbmltYXRpb249ZnVuY3Rpb24oZSx0LGkpe3ZhciBuPXRoaXMuY2hpbGRBdCgxKTtpZihuKXt2YXIgbz10aGlzLGE9ZS5nZXRJdGVtTGF5b3V0KGkpLHI9MWUzKnQuZ2V0KCJwZXJpb2QiKSxzPXQuZ2V0KCJsb29wIiksbD10LmdldCgiY29uc3RhbnRTcGVlZCIpLHU9Vyh0LmdldCgiZGVsYXkiKSxmdW5jdGlvbih0KXtyZXR1cm4gdC9lLmNvdW50KCkqci8zfSksaD0iZnVuY3Rpb24iPT10eXBlb2YgdTtpZihuLmlnbm9yZT0hMCx0aGlzLnVwZGF0ZUFuaW1hdGlvblBvaW50cyhuLGEpLDA8bCYmKHI9dGhpcy5nZXRMaW5lTGVuZ3RoKG4pL2wqMWUzKSxyIT09dGhpcy5fcGVyaW9kfHxzIT09dGhpcy5fbG9vcCl7bi5zdG9wQW5pbWF0aW9uKCk7dmFyIGM9dTtoJiYoYz11KGkpKSwwPG4uX190JiYoYz0tcipuLl9fdCksbi5fX3Q9MDt2YXIgZD1uLmFuaW1hdGUoIiIscykud2hlbihyLHtfX3Q6MX0pLmRlbGF5KGMpLmR1cmluZyhmdW5jdGlvbigpe28udXBkYXRlU3ltYm9sUG9zaXRpb24obil9KTtzfHxkLmRvbmUoZnVuY3Rpb24oKXtvLnJlbW92ZShuKX0pLGQuc3RhcnQoKX10aGlzLl9wZXJpb2Q9cix0aGlzLl9sb29wPXN9fSx0TS5nZXRMaW5lTGVuZ3RoPWZ1bmN0aW9uKHQpe3JldHVybiB5dCh0Ll9fcDEsdC5fX2NwMSkreXQodC5fX2NwMSx0Ll9fcDIpfSx0TS51cGRhdGVBbmltYXRpb25Qb2ludHM9ZnVuY3Rpb24odCxlKXt0Ll9fcDE9ZVswXSx0Ll9fcDI9ZVsxXSx0Ll9fY3AxPWVbMl18fFsoZVswXVswXStlWzFdWzBdKS8yLChlWzBdWzFdK2VbMV1bMV0pLzJdfSx0TS51cGRhdGVEYXRhPWZ1bmN0aW9uKHQsZSxpKXt0aGlzLmNoaWxkQXQoMCkudXBkYXRlRGF0YSh0LGUsaSksdGhpcy5fdXBkYXRlRWZmZWN0U3ltYm9sKHQsZSl9LHRNLnVwZGF0ZVN5bWJvbFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXQuX19wMSxpPXQuX19wMixuPXQuX19jcDEsbz10Ll9fdCxhPXQucG9zaXRpb24scj1UYSxzPUFhO2FbMF09cihlWzBdLG5bMF0saVswXSxvKSxhWzFdPXIoZVsxXSxuWzFdLGlbMV0sbyk7dmFyIGw9cyhlWzBdLG5bMF0saVswXSxvKSx1PXMoZVsxXSxuWzFdLGlbMV0sbyk7dC5yb3RhdGlvbj0tTWF0aC5hdGFuMih1LGwpLU1hdGguUEkvMix0Lmlnbm9yZT0hMX0sdE0udXBkYXRlTGF5b3V0PWZ1bmN0aW9uKHQsZSl7dGhpcy5jaGlsZEF0KDApLnVwZGF0ZUxheW91dCh0LGUpO3ZhciBpPXQuZ2V0SXRlbU1vZGVsKGUpLmdldE1vZGVsKCJlZmZlY3QiKTt0aGlzLl91cGRhdGVFZmZlY3RBbmltYXRpb24odCxpLGUpfSx3KFFTLElpKTt2YXIgaU09ZU0ucHJvdG90eXBlO2Z1bmN0aW9uIG5NKHQsZSxpKXtRUy5jYWxsKHRoaXMsdCxlLGkpLHRoaXMuX2xhc3RGcmFtZT0wLHRoaXMuX2xhc3RGcmFtZVBlcmNlbnQ9MH1pTS5fY3JlYXRlUG9seWxpbmU9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuZ2V0SXRlbUxheW91dChlKSxvPW5ldyBLcih7c2hhcGU6e3BvaW50czpufX0pO3RoaXMuYWRkKG8pLHRoaXMuX3VwZGF0ZUNvbW1vblN0bCh0LGUsaSl9LGlNLnVwZGF0ZURhdGE9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuaG9zdE1vZGVsO3NsKHRoaXMuY2hpbGRBdCgwKSx7c2hhcGU6e3BvaW50czp0LmdldEl0ZW1MYXlvdXQoZSl9fSxuLGUpLHRoaXMuX3VwZGF0ZUNvbW1vblN0bCh0LGUsaSl9LGlNLl91cGRhdGVDb21tb25TdGw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuY2hpbGRBdCgwKSxvPXQuZ2V0SXRlbU1vZGVsKGUpLGE9dC5nZXRJdGVtVmlzdWFsKGUsImNvbG9yIikscj1pJiZpLmxpbmVTdHlsZSxzPWkmJmkuaG92ZXJMaW5lU3R5bGU7aSYmIXQuaGFzSXRlbU9wdGlvbnx8KHI9by5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCkscz1vLmdldE1vZGVsKCJlbXBoYXNpcy5saW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSksbi51c2VTdHlsZShDKHtzdHJva2VOb1NjYWxlOiEwLGZpbGw6Im5vbmUiLHN0cm9rZTphfSxyKSksbi5ob3ZlclN0eWxlPXMsWXModGhpcyl9LGlNLnVwZGF0ZUxheW91dD1mdW5jdGlvbih0LGUpe3RoaXMuY2hpbGRBdCgwKS5zZXRTaGFwZSgicG9pbnRzIix0LmdldEl0ZW1MYXlvdXQoZSkpfSx3KGVNLElpKTt2YXIgb009bk0ucHJvdG90eXBlO29NLmNyZWF0ZUxpbmU9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBuZXcgZU0odCxlLGkpfSxvTS51cGRhdGVBbmltYXRpb25Qb2ludHM9ZnVuY3Rpb24odCxlKXt0aGlzLl9wb2ludHM9ZTtmb3IodmFyIGk9WzBdLG49MCxvPTE7bzxlLmxlbmd0aDtvKyspe3ZhciBhPWVbby0xXSxyPWVbb107bis9eXQoYSxyKSxpLnB1c2gobil9aWYoMCE9PW4pe2ZvcihvPTA7bzxpLmxlbmd0aDtvKyspaVtvXS89bjt0aGlzLl9vZmZzZXRzPWksdGhpcy5fbGVuZ3RoPW59fSxvTS5nZXRMaW5lTGVuZ3RoPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZW5ndGh9LG9NLnVwZGF0ZVN5bWJvbFBvc2l0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXQuX190LGk9dGhpcy5fcG9pbnRzLG49dGhpcy5fb2Zmc2V0cyxvPWkubGVuZ3RoO2lmKG4pe3ZhciBhPXRoaXMuX2xhc3RGcmFtZTtpZihlPHRoaXMuX2xhc3RGcmFtZVBlcmNlbnQpe2ZvcihyPU1hdGgubWluKGErMSxvLTEpOzA8PXImJiEobltyXTw9ZSk7ci0tKTtyPU1hdGgubWluKHIsby0yKX1lbHNle2Zvcih2YXIgcj1hO3I8byYmIShuW3JdPmUpO3IrKyk7cj1NYXRoLm1pbihyLTEsby0yKX13dCh0LnBvc2l0aW9uLGlbcl0saVtyKzFdLChlLW5bcl0pLyhuW3IrMV0tbltyXSkpO3ZhciBzPWlbcisxXVswXS1pW3JdWzBdLGw9aVtyKzFdWzFdLWlbcl1bMV07dC5yb3RhdGlvbj0tTWF0aC5hdGFuMihsLHMpLU1hdGguUEkvMix0aGlzLl9sYXN0RnJhbWU9cix0aGlzLl9sYXN0RnJhbWVQZXJjZW50PWUsdC5pZ25vcmU9ITF9fSx3KG5NLFFTKTt2YXIgYU09SXMoe3NoYXBlOntwb2x5bGluZTohMSxjdXJ2ZW5lc3M6MCxzZWdzOltdfSxidWlsZFBhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLnNlZ3Msbj1lLmN1cnZlbmVzcztpZihlLnBvbHlsaW5lKWZvcih2YXIgbz0wO288aS5sZW5ndGg7KXt2YXIgYT1pW28rK107aWYoMDxhKXt0Lm1vdmVUbyhpW28rK10saVtvKytdKTtmb3IodmFyIHI9MTtyPGE7cisrKXQubGluZVRvKGlbbysrXSxpW28rK10pfX1lbHNlIGZvcihvPTA7bzxpLmxlbmd0aDspe3ZhciBzPWlbbysrXSxsPWlbbysrXSx1PWlbbysrXSxoPWlbbysrXTtpZih0Lm1vdmVUbyhzLGwpLDA8bil7dmFyIGM9KHMrdSkvMi0obC1oKSpuLGQ9KGwraCkvMi0odS1zKSpuO3QucXVhZHJhdGljQ3VydmVUbyhjLGQsdSxoKX1lbHNlIHQubGluZVRvKHUsaCl9fSxmaW5kRGF0YUluZGV4OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zaGFwZSxuPWkuc2VncyxvPWkuY3VydmVuZXNzO2lmKGkucG9seWxpbmUpZm9yKHZhciBhPTAscj0wO3I8bi5sZW5ndGg7KXt2YXIgcz1uW3IrK107aWYoMDxzKWZvcih2YXIgbD1uW3IrK10sdT1uW3IrK10saD0xO2g8cztoKyspe2lmKG5yKGwsdSxjPW5bcisrXSxkPW5bcisrXSkpcmV0dXJuIGF9YSsrfWVsc2UgZm9yKGE9MCxyPTA7cjxuLmxlbmd0aDspe2w9bltyKytdLHU9bltyKytdO3ZhciBjPW5bcisrXSxkPW5bcisrXTtpZigwPG8pe2lmKGFyKGwsdSwobCtjKS8yLSh1LWQpKm8sKHUrZCkvMi0oYy1sKSpvLGMsZCkpcmV0dXJuIGF9ZWxzZSBpZihucihsLHUsYyxkKSlyZXR1cm4gYTthKyt9cmV0dXJuLTF9fSk7ZnVuY3Rpb24gck0oKXt0aGlzLmdyb3VwPW5ldyBJaX12YXIgc009ck0ucHJvdG90eXBlO3NNLmlzUGVyc2lzdGVudD1mdW5jdGlvbigpe3JldHVybiF0aGlzLl9pbmNyZW1lbnRhbH0sc00udXBkYXRlRGF0YT1mdW5jdGlvbih0KXt0aGlzLmdyb3VwLnJlbW92ZUFsbCgpO3ZhciBlPW5ldyBhTSh7cmVjdEhvdmVyOiEwLGN1cnNvcjoiZGVmYXVsdCJ9KTtlLnNldFNoYXBlKHtzZWdzOnQuZ2V0TGF5b3V0KCJsaW5lc1BvaW50cyIpfSksdGhpcy5fc2V0Q29tbW9uKGUsdCksdGhpcy5ncm91cC5hZGQoZSksdGhpcy5faW5jcmVtZW50YWw9bnVsbH0sc00uaW5jcmVtZW50YWxQcmVwYXJlVXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXAucmVtb3ZlQWxsKCksdGhpcy5fY2xlYXJJbmNyZW1lbnRhbCgpLDVlNTx0LmNvdW50KCk/KHRoaXMuX2luY3JlbWVudGFsfHwodGhpcy5faW5jcmVtZW50YWw9bmV3IGZzKHtzaWxlbnQ6ITB9KSksdGhpcy5ncm91cC5hZGQodGhpcy5faW5jcmVtZW50YWwpKTp0aGlzLl9pbmNyZW1lbnRhbD1udWxsfSxzTS5pbmNyZW1lbnRhbFVwZGF0ZT1mdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBhTTtpLnNldFNoYXBlKHtzZWdzOmUuZ2V0TGF5b3V0KCJsaW5lc1BvaW50cyIpfSksdGhpcy5fc2V0Q29tbW9uKGksZSwhIXRoaXMuX2luY3JlbWVudGFsKSx0aGlzLl9pbmNyZW1lbnRhbD90aGlzLl9pbmNyZW1lbnRhbC5hZGREaXNwbGF5YWJsZShpLCEwKTooaS5yZWN0SG92ZXI9ITAsaS5jdXJzb3I9ImRlZmF1bHQiLGkuX19zdGFydEluZGV4PXQuc3RhcnQsdGhpcy5ncm91cC5hZGQoaSkpfSxzTS5yZW1vdmU9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckluY3JlbWVudGFsKCksdGhpcy5faW5jcmVtZW50YWw9bnVsbCx0aGlzLmdyb3VwLnJlbW92ZUFsbCgpfSxzTS5fc2V0Q29tbW9uPWZ1bmN0aW9uKGksdCxlKXt2YXIgbj10Lmhvc3RNb2RlbDtpLnNldFNoYXBlKHtwb2x5bGluZTpuLmdldCgicG9seWxpbmUiKSxjdXJ2ZW5lc3M6bi5nZXQoImxpbmVTdHlsZS5jdXJ2ZW5lc3MiKX0pLGkudXNlU3R5bGUobi5nZXRNb2RlbCgibGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCkpLGkuc3R5bGUuc3Ryb2tlTm9TY2FsZT0hMDt2YXIgbz10LmdldFZpc3VhbCgiY29sb3IiKTtvJiZpLnNldFN0eWxlKCJzdHJva2UiLG8pLGkuc2V0U3R5bGUoImZpbGwiKSxlfHwoaS5zZXJpZXNJbmRleD1uLnNlcmllc0luZGV4LGkub24oIm1vdXNlbW92ZSIsZnVuY3Rpb24odCl7aS5kYXRhSW5kZXg9bnVsbDt2YXIgZT1pLmZpbmREYXRhSW5kZXgodC5vZmZzZXRYLHQub2Zmc2V0WSk7MDxlJiYoaS5kYXRhSW5kZXg9ZStpLl9fc3RhcnRJbmRleCl9KSl9LHNNLl9jbGVhckluY3JlbWVudGFsPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faW5jcmVtZW50YWw7dCYmdC5jbGVhckRpc3BsYXlibGVzKCl9O3ZhciBsTT17c2VyaWVzVHlwZToibGluZXMiLHBsYW46ZGMoKSxyZXNldDpmdW5jdGlvbihnKXt2YXIgbT1nLmNvb3JkaW5hdGVTeXN0ZW0sdj1nLmdldCgicG9seWxpbmUiKSx5PWcucGlwZWxpbmVDb250ZXh0LmxhcmdlO3JldHVybntwcm9ncmVzczpmdW5jdGlvbih0LGUpe3ZhciBpPVtdO2lmKHkpe3ZhciBuLG89dC5lbmQtdC5zdGFydDtpZih2KXtmb3IodmFyIGE9MCxyPXQuc3RhcnQ7cjx0LmVuZDtyKyspYSs9Zy5nZXRMaW5lQ29vcmRzQ291bnQocik7bj1uZXcgRmxvYXQzMkFycmF5KG8rMiphKX1lbHNlIG49bmV3IEZsb2F0MzJBcnJheSg0Km8pO3ZhciBzPTAsbD1bXTtmb3Iocj10LnN0YXJ0O3I8dC5lbmQ7cisrKXt2YXIgdT1nLmdldExpbmVDb29yZHMocixpKTt2JiYobltzKytdPXUpO2Zvcih2YXIgaD0wO2g8dTtoKyspbD1tLmRhdGFUb1BvaW50KGlbaF0sITEsbCksbltzKytdPWxbMF0sbltzKytdPWxbMV19ZS5zZXRMYXlvdXQoImxpbmVzUG9pbnRzIixuKX1lbHNlIGZvcihyPXQuc3RhcnQ7cjx0LmVuZDtyKyspe3ZhciBjPWUuZ2V0SXRlbU1vZGVsKHIpLGQ9KHU9Zy5nZXRMaW5lQ29vcmRzKHIsaSksW10pO2lmKHYpZm9yKHZhciBmPTA7Zjx1O2YrKylkLnB1c2gobS5kYXRhVG9Qb2ludChpW2ZdKSk7ZWxzZXtkWzBdPW0uZGF0YVRvUG9pbnQoaVswXSksZFsxXT1tLmRhdGFUb1BvaW50KGlbMV0pO3ZhciBwPWMuZ2V0KCJsaW5lU3R5bGUuY3VydmVuZXNzIik7K3AmJihkWzJdPVsoZFswXVswXStkWzFdWzBdKS8yLShkWzBdWzFdLWRbMV1bMV0pKnAsKGRbMF1bMV0rZFsxXVsxXSkvMi0oZFsxXVswXS1kWzBdWzBdKSpwXSl9ZS5zZXRJdGVtTGF5b3V0KHIsZCl9fX19fTtmdW5jdGlvbiB1TSh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIEFycmF5fHwodD1bdCx0XSksdH1NZih7dHlwZToibGluZXMiLGluaXQ6ZnVuY3Rpb24oKXt9LHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5nZXREYXRhKCksbz10aGlzLl91cGRhdGVMaW5lRHJhdyhuLHQpLGE9dC5nZXQoInpsZXZlbCIpLHI9dC5nZXQoImVmZmVjdC50cmFpbExlbmd0aCIpLHM9aS5nZXRacigpLGw9InN2ZyI9PT1zLnBhaW50ZXIuZ2V0VHlwZSgpO2x8fHMucGFpbnRlci5nZXRMYXllcihhKS5jbGVhcighMCksbnVsbD09dGhpcy5fbGFzdFpsZXZlbHx8bHx8cy5jb25maWdMYXllcih0aGlzLl9sYXN0WmxldmVsLHttb3Rpb25CbHVyOiExfSksdGhpcy5fc2hvd0VmZmVjdCh0KSYmciYmKGx8fHMuY29uZmlnTGF5ZXIoYSx7bW90aW9uQmx1cjohMCxsYXN0RnJhbWVBbHBoYTpNYXRoLm1heChNYXRoLm1pbihyLzEwKy45LDEpLDApfSkpLG8udXBkYXRlRGF0YShuKTt2YXIgdT10LmdldCgiY2xpcCIsITApJiZ5bSh0LmNvb3JkaW5hdGVTeXN0ZW0sITEsdCk7dT90aGlzLmdyb3VwLnNldENsaXBQYXRoKHUpOnRoaXMuZ3JvdXAucmVtb3ZlQ2xpcFBhdGgoKSx0aGlzLl9sYXN0WmxldmVsPWEsdGhpcy5fZmluaXNoZWQ9ITB9LGluY3JlbWVudGFsUHJlcGFyZVJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5nZXREYXRhKCk7dGhpcy5fdXBkYXRlTGluZURyYXcobix0KS5pbmNyZW1lbnRhbFByZXBhcmVVcGRhdGUobiksdGhpcy5fY2xlYXJMYXllcihpKSx0aGlzLl9maW5pc2hlZD0hMX0saW5jcmVtZW50YWxSZW5kZXI6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX2xpbmVEcmF3LmluY3JlbWVudGFsVXBkYXRlKHQsZS5nZXREYXRhKCkpLHRoaXMuX2ZpbmlzaGVkPXQuZW5kPT09ZS5nZXREYXRhKCkuY291bnQoKX0sdXBkYXRlVHJhbnNmb3JtOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmdldERhdGEoKSxvPXQucGlwZWxpbmVDb250ZXh0O2lmKCF0aGlzLl9maW5pc2hlZHx8by5sYXJnZXx8by5wcm9ncmVzc2l2ZVJlbmRlcilyZXR1cm57dXBkYXRlOiEwfTt2YXIgYT1sTS5yZXNldCh0KTthLnByb2dyZXNzJiZhLnByb2dyZXNzKHtzdGFydDowLGVuZDpuLmNvdW50KCl9LG4pLHRoaXMuX2xpbmVEcmF3LnVwZGF0ZUxheW91dCgpLHRoaXMuX2NsZWFyTGF5ZXIoaSl9LF91cGRhdGVMaW5lRHJhdzpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2xpbmVEcmF3LG49dGhpcy5fc2hvd0VmZmVjdChlKSxvPSEhZS5nZXQoInBvbHlsaW5lIiksYT1lLnBpcGVsaW5lQ29udGV4dC5sYXJnZTtyZXR1cm4gaSYmbj09PXRoaXMuX2hhc0VmZmV0JiZvPT09dGhpcy5faXNQb2x5bGluZSYmYT09PXRoaXMuX2lzTGFyZ2VEcmF3fHwoaSYmaS5yZW1vdmUoKSxpPXRoaXMuX2xpbmVEcmF3PWE/bmV3IHJNOm5ldyBvdyhvP24/bk06ZU06bj9RUzppdyksdGhpcy5faGFzRWZmZXQ9bix0aGlzLl9pc1BvbHlsaW5lPW8sdGhpcy5faXNMYXJnZURyYXc9YSx0aGlzLmdyb3VwLnJlbW92ZUFsbCgpKSx0aGlzLmdyb3VwLmFkZChpLmdyb3VwKSxpfSxfc2hvd0VmZmVjdDpmdW5jdGlvbih0KXtyZXR1cm4hIXQuZ2V0KCJlZmZlY3Quc2hvdyIpfSxfY2xlYXJMYXllcjpmdW5jdGlvbih0KXt2YXIgZT10LmdldFpyKCk7InN2ZyI9PT1lLnBhaW50ZXIuZ2V0VHlwZSgpfHxudWxsPT10aGlzLl9sYXN0WmxldmVsfHxlLnBhaW50ZXIuZ2V0TGF5ZXIodGhpcy5fbGFzdFpsZXZlbCkuY2xlYXIoITApfSxyZW1vdmU6ZnVuY3Rpb24odCxlKXt0aGlzLl9saW5lRHJhdyYmdGhpcy5fbGluZURyYXcucmVtb3ZlKCksdGhpcy5fbGluZURyYXc9bnVsbCx0aGlzLl9jbGVhckxheWVyKGUpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7fX0pO3ZhciBoTT0ibGluZVN0eWxlLm9wYWNpdHkiLnNwbGl0KCIuIiksY009e3Nlcmllc1R5cGU6ImxpbmVzIixyZXNldDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dU0odC5nZXQoInN5bWJvbCIpKSxvPXVNKHQuZ2V0KCJzeW1ib2xTaXplIikpLGE9dC5nZXREYXRhKCk7cmV0dXJuIGEuc2V0VmlzdWFsKCJmcm9tU3ltYm9sIixuJiZuWzBdKSxhLnNldFZpc3VhbCgidG9TeW1ib2wiLG4mJm5bMV0pLGEuc2V0VmlzdWFsKCJmcm9tU3ltYm9sU2l6ZSIsbyYmb1swXSksYS5zZXRWaXN1YWwoInRvU3ltYm9sU2l6ZSIsbyYmb1sxXSksYS5zZXRWaXN1YWwoIm9wYWNpdHkiLHQuZ2V0KGhNKSkse2RhdGFFYWNoOmEuaGFzSXRlbU9wdGlvbj9mdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0SXRlbU1vZGVsKGUpLG49dU0oaS5nZXRTaGFsbG93KCJzeW1ib2wiLCEwKSksbz11TShpLmdldFNoYWxsb3coInN5bWJvbFNpemUiLCEwKSksYT1pLmdldChoTSk7blswXSYmdC5zZXRJdGVtVmlzdWFsKGUsImZyb21TeW1ib2wiLG5bMF0pLG5bMV0mJnQuc2V0SXRlbVZpc3VhbChlLCJ0b1N5bWJvbCIsblsxXSksb1swXSYmdC5zZXRJdGVtVmlzdWFsKGUsImZyb21TeW1ib2xTaXplIixvWzBdKSxvWzFdJiZ0LnNldEl0ZW1WaXN1YWwoZSwidG9TeW1ib2xTaXplIixvWzFdKSx0LnNldEl0ZW1WaXN1YWwoZSwib3BhY2l0eSIsYSl9Om51bGx9fX07dmYobE0pLHlmKGNNKSxpYy5leHRlbmQoe3R5cGU6InNlcmllcy5oZWF0bWFwIixnZXRJbml0aWFsRGF0YTpmdW5jdGlvbih0LGUpe3JldHVybiBocCh0aGlzLmdldFNvdXJjZSgpLHRoaXMse2dlbmVyYXRlQ29vcmQ6InZhbHVlIn0pfSxwcmV2ZW50SW5jcmVtZW50YWw6ZnVuY3Rpb24oKXt2YXIgdD1uaC5nZXQodGhpcy5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKSk7aWYodCYmdC5kaW1lbnNpb25zKXJldHVybiJsbmciPT09dC5kaW1lbnNpb25zWzBdJiYibGF0Ij09PXQuZGltZW5zaW9uc1sxXX0sZGVmYXVsdE9wdGlvbjp7Y29vcmRpbmF0ZVN5c3RlbToiY2FydGVzaWFuMmQiLHpsZXZlbDowLHo6MixnZW9JbmRleDowLGJsdXJTaXplOjMwLHBvaW50U2l6ZToyMCxtYXhPcGFjaXR5OjEsbWluT3BhY2l0eTowfX0pO2Z1bmN0aW9uIGRNKCl7dmFyIHQ9ZygpO3RoaXMuY2FudmFzPXQsdGhpcy5ibHVyU2l6ZT0zMCx0aGlzLnBvaW50U2l6ZT0yMCx0aGlzLm1heE9wYWNpdHk9MSx0aGlzLm1pbk9wYWNpdHk9MCx0aGlzLl9ncmFkaWVudFBpeGVscz17fX1kTS5wcm90b3R5cGU9e3VwZGF0ZTpmdW5jdGlvbih0LGUsaSxuLG8sYSl7dmFyIHI9dGhpcy5fZ2V0QnJ1c2goKSxzPXRoaXMuX2dldEdyYWRpZW50KHQsbywiaW5SYW5nZSIpLGw9dGhpcy5fZ2V0R3JhZGllbnQodCxvLCJvdXRPZlJhbmdlIiksdT10aGlzLnBvaW50U2l6ZSt0aGlzLmJsdXJTaXplLGg9dGhpcy5jYW52YXMsYz1oLmdldENvbnRleHQoIjJkIiksZD10Lmxlbmd0aDtoLndpZHRoPWUsaC5oZWlnaHQ9aTtmb3IodmFyIGY9MDtmPGQ7KytmKXt2YXIgcD10W2ZdLGc9cFswXSxtPXBbMV0sdj1uKHBbMl0pO2MuZ2xvYmFsQWxwaGE9dixjLmRyYXdJbWFnZShyLGctdSxtLXUpfWlmKCFoLndpZHRofHwhaC5oZWlnaHQpcmV0dXJuIGg7Zm9yKHZhciB5PWMuZ2V0SW1hZ2VEYXRhKDAsMCxoLndpZHRoLGguaGVpZ2h0KSx4PXkuZGF0YSxfPTAsdz14Lmxlbmd0aCxiPXRoaXMubWluT3BhY2l0eSxTPXRoaXMubWF4T3BhY2l0eS1iO188dzspe3Y9eFtfKzNdLzI1Njt2YXIgTT00Kk1hdGguZmxvb3IoMjU1KnYpO2lmKDA8dil7dmFyIEk9YSh2KT9zOmw7MDx2JiYodj12KlMrYikseFtfKytdPUlbTV0seFtfKytdPUlbMStNXSx4W18rK109SVsyK01dLHhbXysrXT1JWzMrTV0qdioyNTZ9ZWxzZSBfKz00fXJldHVybiBjLnB1dEltYWdlRGF0YSh5LDAsMCksaH0sX2dldEJydXNoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fYnJ1c2hDYW52YXN8fCh0aGlzLl9icnVzaENhbnZhcz1nKCkpLGU9dGhpcy5wb2ludFNpemUrdGhpcy5ibHVyU2l6ZSxpPTIqZTt0LndpZHRoPWksdC5oZWlnaHQ9aTt2YXIgbj10LmdldENvbnRleHQoIjJkIik7cmV0dXJuIG4uY2xlYXJSZWN0KDAsMCxpLGkpLG4uc2hhZG93T2Zmc2V0WD1pLG4uc2hhZG93Qmx1cj10aGlzLmJsdXJTaXplLG4uc2hhZG93Q29sb3I9IiMwMDAiLG4uYmVnaW5QYXRoKCksbi5hcmMoLWUsZSx0aGlzLnBvaW50U2l6ZSwwLDIqTWF0aC5QSSwhMCksbi5jbG9zZVBhdGgoKSxuLmZpbGwoKSx0fSxfZ2V0R3JhZGllbnQ6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj10aGlzLl9ncmFkaWVudFBpeGVscyxvPW5baV18fChuW2ldPW5ldyBVaW50OENsYW1wZWRBcnJheSgxMDI0KSksYT1bMCwwLDAsMF0scj0wLHM9MDtzPDI1NjtzKyspZVtpXShzLzI1NSwhMCxhKSxvW3IrK109YVswXSxvW3IrK109YVsxXSxvW3IrK109YVsyXSxvW3IrK109YVszXTtyZXR1cm4gb319LE1mKHt0eXBlOiJoZWF0bWFwIixyZW5kZXI6ZnVuY3Rpb24oaSx0LGUpe3ZhciBuO3QuZWFjaENvbXBvbmVudCgidmlzdWFsTWFwIixmdW5jdGlvbihlKXtlLmVhY2hUYXJnZXRTZXJpZXMoZnVuY3Rpb24odCl7dD09PWkmJihuPWUpfSl9KSx0aGlzLmdyb3VwLnJlbW92ZUFsbCgpLHRoaXMuX2luY3JlbWVudGFsRGlzcGxheWFibGU9bnVsbDt2YXIgbz1pLmNvb3JkaW5hdGVTeXN0ZW07ImNhcnRlc2lhbjJkIj09PW8udHlwZXx8ImNhbGVuZGFyIj09PW8udHlwZT90aGlzLl9yZW5kZXJPbkNhcnRlc2lhbkFuZENhbGVuZGFyKGksZSwwLGkuZ2V0RGF0YSgpLmNvdW50KCkpOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGltZW5zaW9ucztyZXR1cm4ibG5nIj09PWVbMF0mJiJsYXQiPT09ZVsxXX0obykmJnRoaXMuX3JlbmRlck9uR2VvKG8saSxuLGUpfSxpbmNyZW1lbnRhbFByZXBhcmVSZW5kZXI6ZnVuY3Rpb24odCxlLGkpe3RoaXMuZ3JvdXAucmVtb3ZlQWxsKCl9LGluY3JlbWVudGFsUmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe2UuY29vcmRpbmF0ZVN5c3RlbSYmdGhpcy5fcmVuZGVyT25DYXJ0ZXNpYW5BbmRDYWxlbmRhcihlLG4sdC5zdGFydCx0LmVuZCwhMCl9LF9yZW5kZXJPbkNhcnRlc2lhbkFuZENhbGVuZGFyOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGEscixzPXQuY29vcmRpbmF0ZVN5c3RlbTtpZigiY2FydGVzaWFuMmQiPT09cy50eXBlKXt2YXIgbD1zLmdldEF4aXMoIngiKSx1PXMuZ2V0QXhpcygieSIpO2E9bC5nZXRCYW5kV2lkdGgoKSxyPXUuZ2V0QmFuZFdpZHRoKCl9Zm9yKHZhciBoPXRoaXMuZ3JvdXAsYz10LmdldERhdGEoKSxkPSJlbXBoYXNpcy5pdGVtU3R5bGUiLGY9ImVtcGhhc2lzLmxhYmVsIixwPXQuZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZShbImNvbG9yIl0pLGc9dC5nZXRNb2RlbChkKS5nZXRJdGVtU3R5bGUoKSxtPXQuZ2V0TW9kZWwoImxhYmVsIiksdj10LmdldE1vZGVsKGYpLHk9cy50eXBlLHg9ImNhcnRlc2lhbjJkIj09PXk/W2MubWFwRGltZW5zaW9uKCJ4IiksYy5tYXBEaW1lbnNpb24oInkiKSxjLm1hcERpbWVuc2lvbigidmFsdWUiKV06W2MubWFwRGltZW5zaW9uKCJ0aW1lIiksYy5tYXBEaW1lbnNpb24oInZhbHVlIildLF89aTtfPG47XysrKXt2YXIgdztpZigiY2FydGVzaWFuMmQiPT09eSl7aWYoaXNOYU4oYy5nZXQoeFsyXSxfKSkpY29udGludWU7dmFyIGI9cy5kYXRhVG9Qb2ludChbYy5nZXQoeFswXSxfKSxjLmdldCh4WzFdLF8pXSk7dz1uZXcgaXMoe3NoYXBlOnt4Ok1hdGguZmxvb3IoYlswXS1hLzIpLHk6TWF0aC5mbG9vcihiWzFdLXIvMiksd2lkdGg6TWF0aC5jZWlsKGEpLGhlaWdodDpNYXRoLmNlaWwocil9LHN0eWxlOntmaWxsOmMuZ2V0SXRlbVZpc3VhbChfLCJjb2xvciIpLG9wYWNpdHk6Yy5nZXRJdGVtVmlzdWFsKF8sIm9wYWNpdHkiKX19KX1lbHNle2lmKGlzTmFOKGMuZ2V0KHhbMV0sXykpKWNvbnRpbnVlO3c9bmV3IGlzKHt6MjoxLHNoYXBlOnMuZGF0YVRvUmVjdChbYy5nZXQoeFswXSxfKV0pLmNvbnRlbnRTaGFwZSxzdHlsZTp7ZmlsbDpjLmdldEl0ZW1WaXN1YWwoXywiY29sb3IiKSxvcGFjaXR5OmMuZ2V0SXRlbVZpc3VhbChfLCJvcGFjaXR5Iil9fSl9dmFyIFM9Yy5nZXRJdGVtTW9kZWwoXyk7Yy5oYXNJdGVtT3B0aW9uJiYocD1TLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoWyJjb2xvciJdKSxnPVMuZ2V0TW9kZWwoZCkuZ2V0SXRlbVN0eWxlKCksbT1TLmdldE1vZGVsKCJsYWJlbCIpLHY9Uy5nZXRNb2RlbChmKSk7dmFyIE09dC5nZXRSYXdWYWx1ZShfKSxJPSItIjtNJiZudWxsIT1NWzJdJiYoST1NWzJdKSwkcyhwLGcsbSx2LHtsYWJlbEZldGNoZXI6dCxsYWJlbERhdGFJbmRleDpfLGRlZmF1bHRUZXh0OkksaXNSZWN0VGV4dDohMH0pLHcuc2V0U3R5bGUocCksWXModyxjLmhhc0l0ZW1PcHRpb24/ZzpMKHt9LGcpKSwody5pbmNyZW1lbnRhbD1vKSYmKHcudXNlSG92ZXJMYXllcj0hMCksaC5hZGQodyksYy5zZXRJdGVtR3JhcGhpY0VsKF8sdyl9fSxfcmVuZGVyT25HZW86ZnVuY3Rpb24obyx0LGUsaSl7dmFyIG49ZS50YXJnZXRWaXN1YWxzLmluUmFuZ2UsYT1lLnRhcmdldFZpc3VhbHMub3V0T2ZSYW5nZSxyPXQuZ2V0RGF0YSgpLHM9dGhpcy5faG1MYXllcnx8dGhpcy5faG1MYXllcnx8bmV3IGRNO3MuYmx1clNpemU9dC5nZXQoImJsdXJTaXplIikscy5wb2ludFNpemU9dC5nZXQoInBvaW50U2l6ZSIpLHMubWluT3BhY2l0eT10LmdldCgibWluT3BhY2l0eSIpLHMubWF4T3BhY2l0eT10LmdldCgibWF4T3BhY2l0eSIpO3ZhciBsPW8uZ2V0Vmlld1JlY3QoKS5jbG9uZSgpLHU9by5nZXRSb2FtVHJhbnNmb3JtKCk7bC5hcHBseVRyYW5zZm9ybSh1KTt2YXIgaD1NYXRoLm1heChsLngsMCksYz1NYXRoLm1heChsLnksMCksZD1NYXRoLm1pbihsLndpZHRoK2wueCxpLmdldFdpZHRoKCkpLGY9TWF0aC5taW4obC5oZWlnaHQrbC55LGkuZ2V0SGVpZ2h0KCkpLHA9ZC1oLGc9Zi1jLG09W3IubWFwRGltZW5zaW9uKCJsbmciKSxyLm1hcERpbWVuc2lvbigibGF0Iiksci5tYXBEaW1lbnNpb24oInZhbHVlIildLHY9ci5tYXBBcnJheShtLGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1vLmRhdGFUb1BvaW50KFt0LGVdKTtyZXR1cm4gblswXS09aCxuWzFdLT1jLG4ucHVzaChpKSxufSkseT1lLmdldEV4dGVudCgpLHg9InZpc3VhbE1hcC5jb250aW51b3VzIj09PWUudHlwZT9mdW5jdGlvbih0LGUpe3ZhciBpPXRbMV0tdFswXTtyZXR1cm4gZT1bKGVbMF0tdFswXSkvaSwoZVsxXS10WzBdKS9pXSxmdW5jdGlvbih0KXtyZXR1cm4gdD49ZVswXSYmdDw9ZVsxXX19KHksZS5vcHRpb24ucmFuZ2UpOmZ1bmN0aW9uKGUsbixvKXt2YXIgaT1lWzFdLWVbMF0sYT0obj1OKG4sZnVuY3Rpb24odCl7cmV0dXJue2ludGVydmFsOlsodC5pbnRlcnZhbFswXS1lWzBdKS9pLCh0LmludGVydmFsWzFdLWVbMF0pL2ldfX0pKS5sZW5ndGgscj0wO3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIGU9cjtlPGE7ZSsrKXtpZigoaT1uW2VdLmludGVydmFsKVswXTw9dCYmdDw9aVsxXSl7cj1lO2JyZWFrfX1pZihlPT09YSlmb3IoZT1yLTE7MDw9ZTtlLS0pe3ZhciBpO2lmKChpPW5bZV0uaW50ZXJ2YWwpWzBdPD10JiZ0PD1pWzFdKXtyPWU7YnJlYWt9fXJldHVybiAwPD1lJiZlPGEmJm9bZV19fSh5LGUuZ2V0UGllY2VMaXN0KCksZS5vcHRpb24uc2VsZWN0ZWQpO3MudXBkYXRlKHYscCxnLG4uY29sb3IuZ2V0Tm9ybWFsaXplcigpLHtpblJhbmdlOm4uY29sb3IuZ2V0Q29sb3JNYXBwZXIoKSxvdXRPZlJhbmdlOmEuY29sb3IuZ2V0Q29sb3JNYXBwZXIoKX0seCk7dmFyIF89bmV3IHFuKHtzdHlsZTp7d2lkdGg6cCxoZWlnaHQ6Zyx4OmgseTpjLGltYWdlOnMuY2FudmFzfSxzaWxlbnQ6ITB9KTt0aGlzLmdyb3VwLmFkZChfKX0sZGlzcG9zZTpmdW5jdGlvbigpe319KTt2YXIgZk09eXYuZXh0ZW5kKHt0eXBlOiJzZXJpZXMucGljdG9yaWFsQmFyIixkZXBlbmRlbmNpZXM6WyJncmlkIl0sZGVmYXVsdE9wdGlvbjp7c3ltYm9sOiJjaXJjbGUiLHN5bWJvbFNpemU6bnVsbCxzeW1ib2xSb3RhdGU6bnVsbCxzeW1ib2xQb3NpdGlvbjpudWxsLHN5bWJvbE9mZnNldDpudWxsLHN5bWJvbE1hcmdpbjpudWxsLHN5bWJvbFJlcGVhdDohMSxzeW1ib2xSZXBlYXREaXJlY3Rpb246ImVuZCIsc3ltYm9sQ2xpcDohMSxzeW1ib2xCb3VuZGluZ0RhdGE6bnVsbCxzeW1ib2xQYXR0ZXJuU2l6ZTo0MDAsYmFyR2FwOiItMTAwJSIscHJvZ3Jlc3NpdmU6MCxob3ZlckFuaW1hdGlvbjohMX0sZ2V0SW5pdGlhbERhdGE6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RhY2s9bnVsbCxmTS5zdXBlckFwcGx5KHRoaXMsImdldEluaXRpYWxEYXRhIixhcmd1bWVudHMpfX0pLHBNPVsiaXRlbVN0eWxlIiwiYm9yZGVyV2lkdGgiXSxnTT1be3h5OiJ4Iix3aDoid2lkdGgiLGluZGV4OjAscG9zRGVzYzpbImxlZnQiLCJyaWdodCJdfSx7eHk6InkiLHdoOiJoZWlnaHQiLGluZGV4OjEscG9zRGVzYzpbInRvcCIsImJvdHRvbSJdfV0sbU09bmV3IEhyO01mKHt0eXBlOiJwaWN0b3JpYWxCYXIiLHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpcy5ncm91cCxzPXQuZ2V0RGF0YSgpLGw9dGhpcy5fZGF0YSxuPXQuY29vcmRpbmF0ZVN5c3RlbSxvPSEhbi5nZXRCYXNlQXhpcygpLmlzSG9yaXpvbnRhbCgpLGE9bi5ncmlkLmdldFJlY3QoKSx1PXtlY1NpemU6e3dpZHRoOmkuZ2V0V2lkdGgoKSxoZWlnaHQ6aS5nZXRIZWlnaHQoKX0sc2VyaWVzTW9kZWw6dCxjb29yZFN5czpuLGNvb3JkU3lzRXh0ZW50OltbYS54LGEueCthLndpZHRoXSxbYS55LGEueSthLmhlaWdodF1dLGlzSG9yaXpvbnRhbDpvLHZhbHVlRGltOmdNWytvXSxjYXRlZ29yeURpbTpnTVsxLW9dfTtyZXR1cm4gcy5kaWZmKGwpLmFkZChmdW5jdGlvbih0KXtpZihzLmhhc1ZhbHVlKHQpKXt2YXIgZT1NTShzLHQpLGk9dk0ocyx0LGUsdSksbj1ETShzLHUsaSk7cy5zZXRJdGVtR3JhcGhpY0VsKHQsbiksci5hZGQobiksTk0obix1LGkpfX0pLnVwZGF0ZShmdW5jdGlvbih0LGUpe3ZhciBpPWwuZ2V0SXRlbUdyYXBoaWNFbChlKTtpZihzLmhhc1ZhbHVlKHQpKXt2YXIgbj1NTShzLHQpLG89dk0ocyx0LG4sdSksYT1MTShzLG8pO2kmJmEhPT1pLl9fcGljdG9yaWFsU2hhcGVTdHImJihyLnJlbW92ZShpKSxzLnNldEl0ZW1HcmFwaGljRWwodCxudWxsKSxpPW51bGwpLGk/ZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkuYW5pbWF0aW9uTW9kZWwsbz1pLmRhdGFJbmRleDtzbCh0Ll9fcGljdG9yaWFsQnVuZGxlLHtwb3NpdGlvbjppLmJ1bmRsZVBvc2l0aW9uLnNsaWNlKCl9LG4sbyksaS5zeW1ib2xSZXBlYXQ/X00odCxlLGksITApOndNKHQsZSxpLCEwKTtiTSh0LGksITApLFNNKHQsZSxpLCEwKX0oaSx1LG8pOmk9RE0ocyx1LG8sITApLHMuc2V0SXRlbUdyYXBoaWNFbCh0LGkpLGkuX19waWN0b3JpYWxTeW1ib2xNZXRhPW8sci5hZGQoaSksTk0oaSx1LG8pfWVsc2Ugci5yZW1vdmUoaSl9KS5yZW1vdmUoZnVuY3Rpb24odCl7dmFyIGU9bC5nZXRJdGVtR3JhcGhpY0VsKHQpO2UmJkNNKGwsdCxlLl9fcGljdG9yaWFsU3ltYm9sTWV0YS5hbmltYXRpb25Nb2RlbCxlKX0pLmV4ZWN1dGUoKSx0aGlzLl9kYXRhPXMsdGhpcy5ncm91cH0sZGlzcG9zZTpldCxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLmdyb3VwLG49dGhpcy5fZGF0YTtlLmdldCgiYW5pbWF0aW9uIik/biYmbi5lYWNoSXRlbUdyYXBoaWNFbChmdW5jdGlvbih0KXtDTShuLHQuZGF0YUluZGV4LGUsdCl9KTppLnJlbW92ZUFsbCgpfX0pO2Z1bmN0aW9uIHZNKHQsZSxpLG4pe3ZhciBvPXQuZ2V0SXRlbUxheW91dChlKSxhPWkuZ2V0KCJzeW1ib2xSZXBlYXQiKSxyPWkuZ2V0KCJzeW1ib2xDbGlwIikscz1pLmdldCgic3ltYm9sUG9zaXRpb24iKXx8InN0YXJ0IixsPShpLmdldCgic3ltYm9sUm90YXRlIil8fDApKk1hdGguUEkvMTgwfHwwLHU9aS5nZXQoInN5bWJvbFBhdHRlcm5TaXplIil8fDIsaD1pLmlzQW5pbWF0aW9uRW5hYmxlZCgpLGM9e2RhdGFJbmRleDplLGxheW91dDpvLGl0ZW1Nb2RlbDppLHN5bWJvbFR5cGU6dC5nZXRJdGVtVmlzdWFsKGUsInN5bWJvbCIpfHwiY2lyY2xlIixjb2xvcjp0LmdldEl0ZW1WaXN1YWwoZSwiY29sb3IiKSxzeW1ib2xDbGlwOnIsc3ltYm9sUmVwZWF0OmEsc3ltYm9sUmVwZWF0RGlyZWN0aW9uOmkuZ2V0KCJzeW1ib2xSZXBlYXREaXJlY3Rpb24iKSxzeW1ib2xQYXR0ZXJuU2l6ZTp1LHJvdGF0aW9uOmwsYW5pbWF0aW9uTW9kZWw6aD9pOm51bGwsaG92ZXJBbmltYXRpb246aCYmaS5nZXQoImhvdmVyQW5pbWF0aW9uIiksejI6aS5nZXRTaGFsbG93KCJ6IiwhMCl8fDB9OyFmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhLHI9bi52YWx1ZURpbSxzPXQuZ2V0KCJzeW1ib2xCb3VuZGluZ0RhdGEiKSxsPW4uY29vcmRTeXMuZ2V0T3RoZXJBeGlzKG4uY29vcmRTeXMuZ2V0QmFzZUF4aXMoKSksdT1sLnRvR2xvYmFsQ29vcmQobC5kYXRhVG9Db29yZCgwKSksaD0xLSsoaVtyLndoXTw9MCk7aWYoayhzKSl7dmFyIGM9W3lNKGwsc1swXSktdSx5TShsLHNbMV0pLXVdO2NbMV08Y1swXSYmYy5yZXZlcnNlKCksYT1jW2hdfWVsc2UgYT1udWxsIT1zP3lNKGwscyktdTplP24uY29vcmRTeXNFeHRlbnRbci5pbmRleF1baF0tdTppW3Iud2hdO28uYm91bmRpbmdMZW5ndGg9YSxlJiYoby5yZXBlYXRDdXRMZW5ndGg9aVtyLndoXSk7by5weFNpZ249MDxhPzE6YTwwPy0xOjB9KGksYSxvLG4sYyksZnVuY3Rpb24odCxlLGksbixvLGEscixzLGwsdSl7dmFyIGg9bC52YWx1ZURpbSxjPWwuY2F0ZWdvcnlEaW0sZD1NYXRoLmFicyhpW2Mud2hdKSxmPXQuZ2V0SXRlbVZpc3VhbChlLCJzeW1ib2xTaXplIik7Zj1rKGYpP2Yuc2xpY2UoKToobnVsbD09ZiYmKGY9IjEwMCUiKSxbZixmXSk7ZltjLmluZGV4XT1QbChmW2MuaW5kZXhdLGQpLGZbaC5pbmRleF09UGwoZltoLmluZGV4XSxuP2Q6TWF0aC5hYnMoYSkpLHUuc3ltYm9sU2l6ZT1mLCh1LnN5bWJvbFNjYWxlPVtmWzBdL3MsZlsxXS9zXSlbaC5pbmRleF0qPShsLmlzSG9yaXpvbnRhbD8tMToxKSpyfSh0LGUsbyxhLDAsYy5ib3VuZGluZ0xlbmd0aCxjLnB4U2lnbix1LG4sYyksZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT10LmdldChwTSl8fDA7YSYmKG1NLmF0dHIoe3NjYWxlOmUuc2xpY2UoKSxyb3RhdGlvbjppfSksbU0udXBkYXRlVHJhbnNmb3JtKCksYS89bU0uZ2V0TGluZVNjYWxlKCksYSo9ZVtuLnZhbHVlRGltLmluZGV4XSk7by52YWx1ZUxpbmVXaWR0aD1hfShpLGMuc3ltYm9sU2NhbGUsbCxuLGMpO3ZhciBkPWMuc3ltYm9sU2l6ZSxmPWkuZ2V0KCJzeW1ib2xPZmZzZXQiKTtyZXR1cm4gayhmKSYmKGY9W1BsKGZbMF0sZFswXSksUGwoZlsxXSxkWzFdKV0pLGZ1bmN0aW9uKHQsZSxpLG4sbyxhLHIscyxsLHUsaCxjKXt2YXIgZD1oLmNhdGVnb3J5RGltLGY9aC52YWx1ZURpbSxwPWMucHhTaWduLGc9TWF0aC5tYXgoZVtmLmluZGV4XStzLDApLG09ZztpZihuKXt2YXIgdj1NYXRoLmFicyhsKSx5PVcodC5nZXQoInN5bWJvbE1hcmdpbiIpLCIxNSUiKSsiIix4PSExO3kubGFzdEluZGV4T2YoIiEiKT09PXkubGVuZ3RoLTEmJih4PSEwLHk9eS5zbGljZSgwLHkubGVuZ3RoLTEpKSx5PVBsKHksZVtmLmluZGV4XSk7dmFyIF89TWF0aC5tYXgoZysyKnksMCksdz14PzA6Mip5LGI9amwobiksUz1iP246T00oKHYrdykvXyk7Xz1nKzIqKHk9KHYtUypnKS8yLyh4P1M6Uy0xKSksdz14PzA6Mip5LGJ8fCJmaXhlZCI9PT1ufHwoUz11P09NKChNYXRoLmFicyh1KSt3KS9fKTowKSxtPVMqXy13LGMucmVwZWF0VGltZXM9UyxjLnN5bWJvbE1hcmdpbj15fXZhciBNPXAqKG0vMiksST1jLnBhdGhQb3NpdGlvbj1bXTtJW2QuaW5kZXhdPWlbZC53aF0vMixJW2YuaW5kZXhdPSJzdGFydCI9PT1yP006ImVuZCI9PT1yP2wtTTpsLzIsYSYmKElbMF0rPWFbMF0sSVsxXSs9YVsxXSk7dmFyIFQ9Yy5idW5kbGVQb3NpdGlvbj1bXTtUW2QuaW5kZXhdPWlbZC54eV0sVFtmLmluZGV4XT1pW2YueHldO3ZhciBBPWMuYmFyUmVjdFNoYXBlPUwoe30saSk7QVtmLndoXT1wKk1hdGgubWF4KE1hdGguYWJzKGlbZi53aF0pLE1hdGguYWJzKElbZi5pbmRleF0rTSkpLEFbZC53aF09aVtkLndoXTt2YXIgRD1jLmNsaXBTaGFwZT17fTtEW2QueHldPS1pW2QueHldLERbZC53aF09aC5lY1NpemVbZC53aF0sRFtmLnh5XT0wLERbZi53aF09aVtmLndoXX0oaSxkLG8sYSwwLGYscyxjLnZhbHVlTGluZVdpZHRoLGMuYm91bmRpbmdMZW5ndGgsYy5yZXBlYXRDdXRMZW5ndGgsbixjKSxjfWZ1bmN0aW9uIHlNKHQsZSl7cmV0dXJuIHQudG9HbG9iYWxDb29yZCh0LmRhdGFUb0Nvb3JkKHQuc2NhbGUucGFyc2UoZSkpKX1mdW5jdGlvbiB4TSh0KXt2YXIgZT10LnN5bWJvbFBhdHRlcm5TaXplLGk9bWcodC5zeW1ib2xUeXBlLC1lLzIsLWUvMixlLGUsdC5jb2xvcik7cmV0dXJuIGkuYXR0cih7Y3VsbGluZzohMH0pLCJpbWFnZSIhPT1pLnR5cGUmJmkuc2V0U3R5bGUoe3N0cm9rZU5vU2NhbGU6ITB9KSxpfWZ1bmN0aW9uIF9NKHQsZSxvLGkpe3ZhciBuPXQuX19waWN0b3JpYWxCdW5kbGUsYT1vLnN5bWJvbFNpemUscj1vLnZhbHVlTGluZVdpZHRoLHM9by5wYXRoUG9zaXRpb24sbD1lLnZhbHVlRGltLHU9by5yZXBlYXRUaW1lc3x8MCxoPTAsYz1hW2UudmFsdWVEaW0uaW5kZXhdK3IrMipvLnN5bWJvbE1hcmdpbjtmb3Ioa00odCxmdW5jdGlvbih0KXt0Ll9fcGljdG9yaWFsQW5pbWF0aW9uSW5kZXg9aCx0Ll9fcGljdG9yaWFsUmVwZWF0VGltZXM9dSxoPHU/UE0odCxudWxsLHAoaCksbyxpKTpQTSh0LG51bGwse3NjYWxlOlswLDBdfSxvLGksZnVuY3Rpb24oKXtuLnJlbW92ZSh0KX0pLEFNKHQsbyksaCsrfSk7aDx1O2grKyl7dmFyIGQ9eE0obyk7ZC5fX3BpY3RvcmlhbEFuaW1hdGlvbkluZGV4PWgsZC5fX3BpY3RvcmlhbFJlcGVhdFRpbWVzPXUsbi5hZGQoZCk7dmFyIGY9cChoKTtQTShkLHtwb3NpdGlvbjpmLnBvc2l0aW9uLHNjYWxlOlswLDBdfSx7c2NhbGU6Zi5zY2FsZSxyb3RhdGlvbjpmLnJvdGF0aW9ufSxvLGkpLGQub24oIm1vdXNlb3ZlciIsZykub24oIm1vdXNlb3V0IixtKSxBTShkLG8pfWZ1bmN0aW9uIHAodCl7dmFyIGU9cy5zbGljZSgpLGk9by5weFNpZ24sbj10O3JldHVybigic3RhcnQiPT09by5zeW1ib2xSZXBlYXREaXJlY3Rpb24/MDxpOmk8MCkmJihuPXUtMS10KSxlW2wuaW5kZXhdPWMqKG4tdS8yKy41KStzW2wuaW5kZXhdLHtwb3NpdGlvbjplLHNjYWxlOm8uc3ltYm9sU2NhbGUuc2xpY2UoKSxyb3RhdGlvbjpvLnJvdGF0aW9ufX1mdW5jdGlvbiBnKCl7a00odCxmdW5jdGlvbih0KXt0LnRyaWdnZXIoImVtcGhhc2lzIil9KX1mdW5jdGlvbiBtKCl7a00odCxmdW5jdGlvbih0KXt0LnRyaWdnZXIoIm5vcm1hbCIpfSl9fWZ1bmN0aW9uIHdNKHQsZSxpLG4pe3ZhciBvPXQuX19waWN0b3JpYWxCdW5kbGUsYT10Ll9fcGljdG9yaWFsTWFpblBhdGg7YT9QTShhLG51bGwse3Bvc2l0aW9uOmkucGF0aFBvc2l0aW9uLnNsaWNlKCksc2NhbGU6aS5zeW1ib2xTY2FsZS5zbGljZSgpLHJvdGF0aW9uOmkucm90YXRpb259LGksbik6KGE9dC5fX3BpY3RvcmlhbE1haW5QYXRoPXhNKGkpLG8uYWRkKGEpLFBNKGEse3Bvc2l0aW9uOmkucGF0aFBvc2l0aW9uLnNsaWNlKCksc2NhbGU6WzAsMF0scm90YXRpb246aS5yb3RhdGlvbn0se3NjYWxlOmkuc3ltYm9sU2NhbGUuc2xpY2UoKX0saSxuKSxhLm9uKCJtb3VzZW92ZXIiLGZ1bmN0aW9uKCl7dGhpcy50cmlnZ2VyKCJlbXBoYXNpcyIpfSkub24oIm1vdXNlb3V0IixmdW5jdGlvbigpe3RoaXMudHJpZ2dlcigibm9ybWFsIil9KSksQU0oYSxpKX1mdW5jdGlvbiBiTSh0LGUsaSl7dmFyIG49TCh7fSxlLmJhclJlY3RTaGFwZSksbz10Ll9fcGljdG9yaWFsQmFyUmVjdDtvP1BNKG8sbnVsbCx7c2hhcGU6bn0sZSxpKToobz10Ll9fcGljdG9yaWFsQmFyUmVjdD1uZXcgaXMoe3oyOjIsc2hhcGU6bixzaWxlbnQ6ITAsc3R5bGU6e3N0cm9rZToidHJhbnNwYXJlbnQiLGZpbGw6InRyYW5zcGFyZW50IixsaW5lV2lkdGg6MH19KSx0LmFkZChvKSl9ZnVuY3Rpb24gU00odCxlLGksbil7aWYoaS5zeW1ib2xDbGlwKXt2YXIgbz10Ll9fcGljdG9yaWFsQ2xpcFBhdGgsYT1MKHt9LGkuY2xpcFNoYXBlKSxyPWUudmFsdWVEaW0scz1pLmFuaW1hdGlvbk1vZGVsLGw9aS5kYXRhSW5kZXg7aWYobylzbChvLHtzaGFwZTphfSxzLGwpO2Vsc2V7YVtyLndoXT0wLG89bmV3IGlzKHtzaGFwZTphfSksdC5fX3BpY3RvcmlhbEJ1bmRsZS5zZXRDbGlwUGF0aChvKSx0Ll9fcGljdG9yaWFsQ2xpcFBhdGg9bzt2YXIgdT17fTt1W3Iud2hdPWkuY2xpcFNoYXBlW3Iud2hdLHlsW24/InVwZGF0ZVByb3BzIjoiaW5pdFByb3BzIl0obyx7c2hhcGU6dX0scyxsKX19fWZ1bmN0aW9uIE1NKHQsZSl7dmFyIGk9dC5nZXRJdGVtTW9kZWwoZSk7cmV0dXJuIGkuZ2V0QW5pbWF0aW9uRGVsYXlQYXJhbXM9SU0saS5pc0FuaW1hdGlvbkVuYWJsZWQ9VE0saX1mdW5jdGlvbiBJTSh0KXtyZXR1cm57aW5kZXg6dC5fX3BpY3RvcmlhbEFuaW1hdGlvbkluZGV4LGNvdW50OnQuX19waWN0b3JpYWxSZXBlYXRUaW1lc319ZnVuY3Rpb24gVE0oKXtyZXR1cm4gdGhpcy5wYXJlbnRNb2RlbC5pc0FuaW1hdGlvbkVuYWJsZWQoKSYmISF0aGlzLmdldFNoYWxsb3coImFuaW1hdGlvbiIpfWZ1bmN0aW9uIEFNKHQsZSl7dC5vZmYoImVtcGhhc2lzIikub2ZmKCJub3JtYWwiKTt2YXIgaT1lLnN5bWJvbFNjYWxlLnNsaWNlKCk7ZS5ob3ZlckFuaW1hdGlvbiYmdC5vbigiZW1waGFzaXMiLGZ1bmN0aW9uKCl7dGhpcy5hbmltYXRlVG8oe3NjYWxlOlsxLjEqaVswXSwxLjEqaVsxXV19LDQwMCwiZWxhc3RpY091dCIpfSkub24oIm5vcm1hbCIsZnVuY3Rpb24oKXt0aGlzLmFuaW1hdGVUbyh7c2NhbGU6aS5zbGljZSgpfSw0MDAsImVsYXN0aWNPdXQiKX0pfWZ1bmN0aW9uIERNKHQsZSxpLG4pe3ZhciBvPW5ldyBJaSxhPW5ldyBJaTtyZXR1cm4gby5hZGQoYSksKG8uX19waWN0b3JpYWxCdW5kbGU9YSkuYXR0cigicG9zaXRpb24iLGkuYnVuZGxlUG9zaXRpb24uc2xpY2UoKSksaS5zeW1ib2xSZXBlYXQ/X00obyxlLGkpOndNKG8sMCxpKSxiTShvLGksbiksU00obyxlLGksbiksby5fX3BpY3RvcmlhbFNoYXBlU3RyPUxNKHQsaSksby5fX3BpY3RvcmlhbFN5bWJvbE1ldGE9aSxvfWZ1bmN0aW9uIENNKHQsZSxpLG4pe3ZhciBvPW4uX19waWN0b3JpYWxCYXJSZWN0O28mJihvLnN0eWxlLnRleHQ9bnVsbCk7dmFyIGE9W107a00obixmdW5jdGlvbih0KXthLnB1c2godCl9KSxuLl9fcGljdG9yaWFsTWFpblBhdGgmJmEucHVzaChuLl9fcGljdG9yaWFsTWFpblBhdGgpLG4uX19waWN0b3JpYWxDbGlwUGF0aCYmKGk9bnVsbCksRShhLGZ1bmN0aW9uKHQpe3NsKHQse3NjYWxlOlswLDBdfSxpLGUsZnVuY3Rpb24oKXtuLnBhcmVudCYmbi5wYXJlbnQucmVtb3ZlKG4pfSl9KSx0LnNldEl0ZW1HcmFwaGljRWwoZSxudWxsKX1mdW5jdGlvbiBMTSh0LGUpe3JldHVyblt0LmdldEl0ZW1WaXN1YWwoZS5kYXRhSW5kZXgsInN5bWJvbCIpfHwibm9uZSIsISFlLnN5bWJvbFJlcGVhdCwhIWUuc3ltYm9sQ2xpcF0uam9pbigiOiIpfWZ1bmN0aW9uIGtNKGUsaSxuKXtFKGUuX19waWN0b3JpYWxCdW5kbGUuY2hpbGRyZW4oKSxmdW5jdGlvbih0KXt0IT09ZS5fX3BpY3RvcmlhbEJhclJlY3QmJmkuY2FsbChuLHQpfSl9ZnVuY3Rpb24gUE0odCxlLGksbixvLGEpe2UmJnQuYXR0cihlKSxuLnN5bWJvbENsaXAmJiFvP2kmJnQuYXR0cihpKTppJiZ5bFtvPyJ1cGRhdGVQcm9wcyI6ImluaXRQcm9wcyJdKHQsaSxuLmFuaW1hdGlvbk1vZGVsLG4uZGF0YUluZGV4LGEpfWZ1bmN0aW9uIE5NKHQsZSxpKXt2YXIgbj1pLmNvbG9yLG89aS5kYXRhSW5kZXgsYT1pLml0ZW1Nb2RlbCxyPWEuZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZShbImNvbG9yIl0pLHM9YS5nZXRNb2RlbCgiZW1waGFzaXMuaXRlbVN0eWxlIikuZ2V0SXRlbVN0eWxlKCksbD1hLmdldFNoYWxsb3coImN1cnNvciIpO2tNKHQsZnVuY3Rpb24odCl7dC5zZXRDb2xvcihuKSx0LnNldFN0eWxlKEMoe2ZpbGw6bixvcGFjaXR5Omkub3BhY2l0eX0scikpLFlzKHQscyksbCYmKHQuY3Vyc29yPWwpLHQuejI9aS56Mn0pO3ZhciB1PXt9LGg9KGUudmFsdWVEaW0ucG9zRGVzY1srKDA8aS5ib3VuZGluZ0xlbmd0aCldLHQuX19waWN0b3JpYWxCYXJSZWN0KTt4dihoLnN0eWxlLHUsYSxuLGUuc2VyaWVzTW9kZWwsbyksWXMoaCx1KX1mdW5jdGlvbiBPTSh0KXt2YXIgZT1NYXRoLnJvdW5kKHQpO3JldHVybiBNYXRoLmFicyh0LWUpPDFlLTQ/ZTpNYXRoLmNlaWwodCl9dmYoVChQcCwicGljdG9yaWFsQmFyIikpLHlmKE1tKCJwaWN0b3JpYWxCYXIiLCJyb3VuZFJlY3QiKSk7ZnVuY3Rpb24gRU0odCxlLGksbixvKXtFZy5jYWxsKHRoaXMsdCxlLGkpLHRoaXMudHlwZT1ufHwidmFsdWUiLHRoaXMucG9zaXRpb249b3x8ImJvdHRvbSIsdGhpcy5vcmllbnQ9bnVsbH1mdW5jdGlvbiB6TSh0LGUsaSl7dGhpcy5kaW1lbnNpb249InNpbmdsZSIsdGhpcy5kaW1lbnNpb25zPVsic2luZ2xlIl0sdGhpcy5fYXhpcz1udWxsLHRoaXMuX3JlY3QsdGhpcy5faW5pdCh0LGUsaSksdGhpcy5tb2RlbD10fWZ1bmN0aW9uIFJNKHQsZSl7ZT1lfHx7fTt2YXIgaT10LmNvb3JkaW5hdGVTeXN0ZW0sbj10LmF4aXMsbz17fSxhPW4ucG9zaXRpb24scj1uLm9yaWVudCxzPWkuZ2V0UmVjdCgpLGw9W3MueCxzLngrcy53aWR0aCxzLnkscy55K3MuaGVpZ2h0XSx1PXtob3Jpem9udGFsOnt0b3A6bFsyXSxib3R0b206bFszXX0sdmVydGljYWw6e2xlZnQ6bFswXSxyaWdodDpsWzFdfX07by5wb3NpdGlvbj1bInZlcnRpY2FsIj09PXI/dS52ZXJ0aWNhbFthXTpsWzBdLCJob3Jpem9udGFsIj09PXI/dS5ob3Jpem9udGFsW2FdOmxbM11dO28ucm90YXRpb249TWF0aC5QSS8yKntob3Jpem9udGFsOjAsdmVydGljYWw6MX1bcl07by5sYWJlbERpcmVjdGlvbj1vLnRpY2tEaXJlY3Rpb249by5uYW1lRGlyZWN0aW9uPXt0b3A6LTEsYm90dG9tOjEscmlnaHQ6MSxsZWZ0Oi0xfVthXSx0LmdldCgiYXhpc1RpY2suaW5zaWRlIikmJihvLnRpY2tEaXJlY3Rpb249LW8udGlja0RpcmVjdGlvbiksVyhlLmxhYmVsSW5zaWRlLHQuZ2V0KCJheGlzTGFiZWwuaW5zaWRlIikpJiYoby5sYWJlbERpcmVjdGlvbj0tby5sYWJlbERpcmVjdGlvbik7dmFyIGg9ZS5yb3RhdGU7cmV0dXJuIG51bGw9PWgmJihoPXQuZ2V0KCJheGlzTGFiZWwucm90YXRlIikpLG8ubGFiZWxSb3RhdGlvbj0idG9wIj09PWE/LWg6aCxvLnoyPTEsb31FTS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkVNLG1vZGVsOm51bGwsaXNIb3Jpem9udGFsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wb3NpdGlvbjtyZXR1cm4idG9wIj09PXR8fCJib3R0b20iPT09dH0scG9pbnRUb0RhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlU3lzdGVtLnBvaW50VG9EYXRhKHQsZSlbMF19LHRvR2xvYmFsQ29vcmQ6bnVsbCx0b0xvY2FsQ29vcmQ6bnVsbH0sdyhFTSxFZyksbmgucmVnaXN0ZXIoInNpbmdsZSIse2NyZWF0ZTpmdW5jdGlvbihuLG8pe3ZhciBhPVtdO3JldHVybiBuLmVhY2hDb21wb25lbnQoInNpbmdsZUF4aXMiLGZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IHpNKHQsbixvKTtpLm5hbWU9InNpbmdsZV8iK2UsaS5yZXNpemUodCxvKSx0LmNvb3JkaW5hdGVTeXN0ZW09aSxhLnB1c2goaSl9KSxuLmVhY2hTZXJpZXMoZnVuY3Rpb24odCl7aWYoInNpbmdsZUF4aXMiPT09dC5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKSl7dmFyIGU9bi5xdWVyeUNvbXBvbmVudHMoe21haW5UeXBlOiJzaW5nbGVBeGlzIixpbmRleDp0LmdldCgic2luZ2xlQXhpc0luZGV4IiksaWQ6dC5nZXQoInNpbmdsZUF4aXNJZCIpfSlbMF07dC5jb29yZGluYXRlU3lzdGVtPWUmJmUuY29vcmRpbmF0ZVN5c3RlbX19KSxhfSxkaW1lbnNpb25zOih6TS5wcm90b3R5cGU9e3R5cGU6InNpbmdsZUF4aXMiLGF4aXNQb2ludGVyRW5hYmxlZDohMCxjb25zdHJ1Y3Rvcjp6TSxfaW5pdDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5kaW1lbnNpb24sbz1uZXcgRU0obixpZyh0KSxbMCwwXSx0LmdldCgidHlwZSIpLHQuZ2V0KCJwb3NpdGlvbiIpKSxhPSJjYXRlZ29yeSI9PT1vLnR5cGU7by5vbkJhbmQ9YSYmdC5nZXQoImJvdW5kYXJ5R2FwIiksby5pbnZlcnNlPXQuZ2V0KCJpbnZlcnNlIiksby5vcmllbnQ9dC5nZXQoIm9yaWVudCIpLCh0LmF4aXM9bykubW9kZWw9dCwoby5jb29yZGluYXRlU3lzdGVtPXRoaXMpLl9heGlzPW99LHVwZGF0ZTpmdW5jdGlvbih0LGUpe3QuZWFjaFNlcmllcyhmdW5jdGlvbih0KXtpZih0LmNvb3JkaW5hdGVTeXN0ZW09PT10aGlzKXt2YXIgZT10LmdldERhdGEoKTtFKGUubWFwRGltZW5zaW9uKHRoaXMuZGltZW5zaW9uLCEwKSxmdW5jdGlvbih0KXt0aGlzLl9heGlzLnNjYWxlLnVuaW9uRXh0ZW50RnJvbURhdGEoZSx0KX0sdGhpcyksZWcodGhpcy5fYXhpcy5zY2FsZSx0aGlzLl9heGlzLm1vZGVsKX19LHRoaXMpfSxyZXNpemU6ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWN0PXZ1KHtsZWZ0OnQuZ2V0KCJsZWZ0IiksdG9wOnQuZ2V0KCJ0b3AiKSxyaWdodDp0LmdldCgicmlnaHQiKSxib3R0b206dC5nZXQoImJvdHRvbSIpLHdpZHRoOnQuZ2V0KCJ3aWR0aCIpLGhlaWdodDp0LmdldCgiaGVpZ2h0Iil9LHt3aWR0aDplLmdldFdpZHRoKCksaGVpZ2h0OmUuZ2V0SGVpZ2h0KCl9KSx0aGlzLl9hZGp1c3RBeGlzKCl9LGdldFJlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVjdH0sX2FkanVzdEF4aXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yZWN0LGU9dGhpcy5fYXhpcyxpPWUuaXNIb3Jpem9udGFsKCksbj1pP1swLHQud2lkdGhdOlswLHQuaGVpZ2h0XSxvPWUucmV2ZXJzZT8xOjA7ZS5zZXRFeHRlbnQobltvXSxuWzEtb10pLHRoaXMuX3VwZGF0ZUF4aXNUcmFuc2Zvcm0oZSxpP3QueDp0LnkpfSxfdXBkYXRlQXhpc1RyYW5zZm9ybTpmdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0RXh0ZW50KCksbj1pWzBdK2lbMV0sbz10LmlzSG9yaXpvbnRhbCgpO3QudG9HbG9iYWxDb29yZD1vP2Z1bmN0aW9uKHQpe3JldHVybiB0K2V9OmZ1bmN0aW9uKHQpe3JldHVybiBuLXQrZX0sdC50b0xvY2FsQ29vcmQ9bz9mdW5jdGlvbih0KXtyZXR1cm4gdC1lfTpmdW5jdGlvbih0KXtyZXR1cm4gbi10K2V9fSxnZXRBeGlzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F4aXN9LGdldEJhc2VBeGlzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F4aXN9LGdldEF4ZXM6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5fYXhpc119LGdldFRvb2x0aXBBeGVzOmZ1bmN0aW9uKCl7cmV0dXJue2Jhc2VBeGVzOlt0aGlzLmdldEF4aXMoKV19fSxjb250YWluUG9pbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRSZWN0KCksaT10aGlzLmdldEF4aXMoKTtyZXR1cm4iaG9yaXpvbnRhbCI9PT1pLm9yaWVudD9pLmNvbnRhaW4oaS50b0xvY2FsQ29vcmQodFswXSkpJiZ0WzFdPj1lLnkmJnRbMV08PWUueStlLmhlaWdodDppLmNvbnRhaW4oaS50b0xvY2FsQ29vcmQodFsxXSkpJiZ0WzBdPj1lLnkmJnRbMF08PWUueStlLmhlaWdodH0scG9pbnRUb0RhdGE6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRBeGlzKCk7cmV0dXJuW2UuY29vcmRUb0RhdGEoZS50b0xvY2FsQ29vcmQodFsiaG9yaXpvbnRhbCI9PT1lLm9yaWVudD8wOjFdKSldfSxkYXRhVG9Qb2ludDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldEF4aXMoKSxpPXRoaXMuZ2V0UmVjdCgpLG49W10sbz0iaG9yaXpvbnRhbCI9PT1lLm9yaWVudD8wOjE7cmV0dXJuIHQgaW5zdGFuY2VvZiBBcnJheSYmKHQ9dFswXSksbltvXT1lLnRvR2xvYmFsQ29vcmQoZS5kYXRhVG9Db29yZCgrdCkpLG5bMS1vXT0wPT1vP2kueStpLmhlaWdodC8yOmkueCtpLndpZHRoLzIsbn19KS5kaW1lbnNpb25zfSk7dmFyIEJNPVsiYXhpc0xpbmUiLCJheGlzVGlja0xhYmVsIiwiYXhpc05hbWUiXSxWTT0ic3BsaXRMaW5lIixHTT1odi5leHRlbmQoe3R5cGU6InNpbmdsZUF4aXMiLGF4aXNQb2ludGVyQ2xhc3M6IlNpbmdsZUF4aXNQb2ludGVyIixyZW5kZXI6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dGhpcy5ncm91cDtvLnJlbW92ZUFsbCgpO3ZhciBhPVJNKHQpLHI9bmV3IFltKHQsYSk7RShCTSxyLmFkZCxyKSxvLmFkZChyLmdldEdyb3VwKCkpLHQuZ2V0KFZNKyIuc2hvdyIpJiZ0aGlzWyJfIitWTV0odCksR00uc3VwZXJDYWxsKHRoaXMsInJlbmRlciIsdCxlLGksbil9LF9zcGxpdExpbmU6ZnVuY3Rpb24odCl7dmFyIGU9dC5heGlzO2lmKCFlLnNjYWxlLmlzQmxhbmsoKSl7dmFyIGk9dC5nZXRNb2RlbCgic3BsaXRMaW5lIiksbj1pLmdldE1vZGVsKCJsaW5lU3R5bGUiKSxvPW4uZ2V0KCJ3aWR0aCIpLGE9bi5nZXQoImNvbG9yIik7YT1hIGluc3RhbmNlb2YgQXJyYXk/YTpbYV07Zm9yKHZhciByPXQuY29vcmRpbmF0ZVN5c3RlbS5nZXRSZWN0KCkscz1lLmlzSG9yaXpvbnRhbCgpLGw9W10sdT0wLGg9ZS5nZXRUaWNrc0Nvb3Jkcyh7dGlja01vZGVsOml9KSxjPVtdLGQ9W10sZj0wO2Y8aC5sZW5ndGg7KytmKXt2YXIgcD1lLnRvR2xvYmFsQ29vcmQoaFtmXS5jb29yZCk7cz8oY1swXT1wLGNbMV09ci55LGRbMF09cCxkWzFdPXIueStyLmhlaWdodCk6KGNbMF09ci54LGNbMV09cCxkWzBdPXIueCtyLndpZHRoLGRbMV09cCk7dmFyIGc9dSsrJWEubGVuZ3RoO2xbZ109bFtnXXx8W10sbFtnXS5wdXNoKG5ldyBvcyh7c3ViUGl4ZWxPcHRpbWl6ZTohMCxzaGFwZTp7eDE6Y1swXSx5MTpjWzFdLHgyOmRbMF0seTI6ZFsxXX0sc3R5bGU6e2xpbmVXaWR0aDpvfSxzaWxlbnQ6ITB9KSl9Zm9yKGY9MDtmPGwubGVuZ3RoOysrZil0aGlzLmdyb3VwLmFkZChrcyhsW2ZdLHtzdHlsZTp7c3Ryb2tlOmFbZiVhLmxlbmd0aF0sbGluZURhc2g6bi5nZXRMaW5lRGFzaChvKSxsaW5lV2lkdGg6b30sc2lsZW50OiEwfSkpfX19KSxGTT1UdS5leHRlbmQoe3R5cGU6InNpbmdsZUF4aXMiLGxheW91dE1vZGU6ImJveCIsYXhpczpudWxsLGNvb3JkaW5hdGVTeXN0ZW06bnVsbCxnZXRDb29yZFN5c01vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSk7bShGTS5wcm90b3R5cGUsc2cpLE9tKCJzaW5nbGUiLEZNLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUudHlwZXx8KGUuZGF0YT8iY2F0ZWdvcnkiOiJ2YWx1ZSIpfSx7bGVmdDoiNSUiLHRvcDoiNSUiLHJpZ2h0OiI1JSIsYm90dG9tOiI1JSIsdHlwZToidmFsdWUiLHBvc2l0aW9uOiJib3R0b20iLG9yaWVudDoiaG9yaXpvbnRhbCIsYXhpc0xpbmU6e3Nob3c6ITAsbGluZVN0eWxlOnt3aWR0aDoxLHR5cGU6InNvbGlkIn19LHRvb2x0aXA6e3Nob3c6ITB9LGF4aXNUaWNrOntzaG93OiEwLGxlbmd0aDo2LGxpbmVTdHlsZTp7d2lkdGg6MX19LGF4aXNMYWJlbDp7c2hvdzohMCxpbnRlcnZhbDoiYXV0byJ9LHNwbGl0TGluZTp7c2hvdzohMCxsaW5lU3R5bGU6e3R5cGU6ImRhc2hlZCIsb3BhY2l0eTouMn19fSk7ZnVuY3Rpb24gV00odCxlKXt2YXIgaSxuPVtdLG89dC5zZXJpZXNJbmRleDtpZihudWxsPT1vfHwhKGk9ZS5nZXRTZXJpZXNCeUluZGV4KG8pKSlyZXR1cm57cG9pbnQ6W119O3ZhciBhPWkuZ2V0RGF0YSgpLHI9SG8oYSx0KTtpZihudWxsPT1yfHxyPDB8fGsocikpcmV0dXJue3BvaW50OltdfTt2YXIgcz1hLmdldEl0ZW1HcmFwaGljRWwociksbD1pLmNvb3JkaW5hdGVTeXN0ZW07aWYoaS5nZXRUb29sdGlwUG9zaXRpb24pbj1pLmdldFRvb2x0aXBQb3NpdGlvbihyKXx8W107ZWxzZSBpZihsJiZsLmRhdGFUb1BvaW50KW49bC5kYXRhVG9Qb2ludChhLmdldFZhbHVlcyhOKGwuZGltZW5zaW9ucyxmdW5jdGlvbih0KXtyZXR1cm4gYS5tYXBEaW1lbnNpb24odCl9KSxyLCEwKSl8fFtdO2Vsc2UgaWYocyl7dmFyIHU9cy5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpO3UuYXBwbHlUcmFuc2Zvcm0ocy50cmFuc2Zvcm0pLG49W3UueCt1LndpZHRoLzIsdS55K3UuaGVpZ2h0LzJdfXJldHVybntwb2ludDpuLGVsOnN9fXZhciBITT1FLFpNPVQsVU09Wm8oKTtmdW5jdGlvbiBYTSh0LGUsaSxuLG8pe3ZhciBhPXQuYXhpcztpZighYS5zY2FsZS5pc0JsYW5rKCkmJmEuY29udGFpbkRhdGEoZSkpaWYodC5pbnZvbHZlU2VyaWVzKXt2YXIgcj1mdW5jdGlvbihsLHQpe3ZhciB1PXQuYXhpcyxoPXUuZGltLGM9bCxkPVtdLGY9TnVtYmVyLk1BWF9WQUxVRSxwPS0xO3JldHVybiBITSh0LnNlcmllc01vZGVscyxmdW5jdGlvbihlLHQpe3ZhciBpLG4sbz1lLmdldERhdGEoKS5tYXBEaW1lbnNpb24oaCwhMCk7aWYoZS5nZXRBeGlzVG9vbHRpcERhdGEpe3ZhciBhPWUuZ2V0QXhpc1Rvb2x0aXBEYXRhKG8sbCx1KTtuPWEuZGF0YUluZGljZXMsaT1hLm5lc3Rlc3RWYWx1ZX1lbHNle2lmKCEobj1lLmdldERhdGEoKS5pbmRpY2VzT2ZOZWFyZXN0KG9bMF0sbCwiY2F0ZWdvcnkiPT09dS50eXBlPy41Om51bGwpKS5sZW5ndGgpcmV0dXJuO2k9ZS5nZXREYXRhKCkuZ2V0KG9bMF0sblswXSl9aWYobnVsbCE9aSYmaXNGaW5pdGUoaSkpe3ZhciByPWwtaSxzPU1hdGguYWJzKHIpO3M8PWYmJigoczxmfHwwPD1yJiZwPDApJiYoZj1zLHA9cixjPWksZC5sZW5ndGg9MCksSE0obixmdW5jdGlvbih0KXtkLnB1c2goe3Nlcmllc0luZGV4OmUuc2VyaWVzSW5kZXgsZGF0YUluZGV4SW5zaWRlOnQsZGF0YUluZGV4OmUuZ2V0RGF0YSgpLmdldFJhd0luZGV4KHQpfSl9KSl9fSkse3BheWxvYWRCYXRjaDpkLHNuYXBUb1ZhbHVlOmN9fShlLHQpLHM9ci5wYXlsb2FkQmF0Y2gsbD1yLnNuYXBUb1ZhbHVlO3NbMF0mJm51bGw9PW8uc2VyaWVzSW5kZXgmJkwobyxzWzBdKSwhbiYmdC5zbmFwJiZhLmNvbnRhaW5EYXRhKGwpJiZudWxsIT1sJiYoZT1sKSxpLnNob3dQb2ludGVyKHQsZSxzLG8pLGkuc2hvd1Rvb2x0aXAodCxyLGwpfWVsc2UgaS5zaG93UG9pbnRlcih0LGUpfWZ1bmN0aW9uIFlNKHQsZSxpLG4pe3RbZS5rZXldPXt2YWx1ZTppLHBheWxvYWRCYXRjaDpufX1mdW5jdGlvbiBqTSh0LGUsaSxuKXt2YXIgbz1pLnBheWxvYWRCYXRjaCxhPWUuYXhpcyxyPWEubW9kZWwscz1lLmF4aXNQb2ludGVyTW9kZWw7aWYoZS50cmlnZ2VyVG9vbHRpcCYmby5sZW5ndGgpe3ZhciBsPWUuY29vcmRTeXMubW9kZWwsdT11dihsKSxoPXQubWFwW3VdO2h8fChoPXQubWFwW3VdPXtjb29yZFN5c0lkOmwuaWQsY29vcmRTeXNJbmRleDpsLmNvbXBvbmVudEluZGV4LGNvb3JkU3lzVHlwZTpsLnR5cGUsY29vcmRTeXNNYWluVHlwZTpsLm1haW5UeXBlLGRhdGFCeUF4aXM6W119LHQubGlzdC5wdXNoKGgpKSxoLmRhdGFCeUF4aXMucHVzaCh7YXhpc0RpbTphLmRpbSxheGlzSW5kZXg6ci5jb21wb25lbnRJbmRleCxheGlzVHlwZTpyLnR5cGUsYXhpc0lkOnIuaWQsdmFsdWU6bix2YWx1ZUxhYmVsT3B0OntwcmVjaXNpb246cy5nZXQoImxhYmVsLnByZWNpc2lvbiIpLGZvcm1hdHRlcjpzLmdldCgibGFiZWwuZm9ybWF0dGVyIil9LHNlcmllc0RhdGFJbmRpY2VzOm8uc2xpY2UoKX0pfX1mdW5jdGlvbiBxTSh0KXt2YXIgZT10LmF4aXMubW9kZWwsaT17fSxuPWkuYXhpc0RpbT10LmF4aXMuZGltO3JldHVybiBpLmF4aXNJbmRleD1pW24rIkF4aXNJbmRleCJdPWUuY29tcG9uZW50SW5kZXgsaS5heGlzTmFtZT1pW24rIkF4aXNOYW1lIl09ZS5uYW1lLGkuYXhpc0lkPWlbbisiQXhpc0lkIl09ZS5pZCxpfWZ1bmN0aW9uIEtNKHQpe3JldHVybiF0fHxudWxsPT10WzBdfHxpc05hTih0WzBdKXx8bnVsbD09dFsxXXx8aXNOYU4odFsxXSl9d2Yoe3R5cGU6ImF4aXNQb2ludGVyIixjb29yZFN5c0F4ZXNJbmZvOm51bGwsZGVmYXVsdE9wdGlvbjp7c2hvdzoiYXV0byIsdHJpZ2dlck9uOm51bGwsemxldmVsOjAsejo1MCx0eXBlOiJsaW5lIixzbmFwOiExLHRyaWdnZXJUb29sdGlwOiEwLHZhbHVlOm51bGwsc3RhdHVzOm51bGwsbGluazpbXSxhbmltYXRpb246bnVsbCxhbmltYXRpb25EdXJhdGlvblVwZGF0ZToyMDAsbGluZVN0eWxlOntjb2xvcjoiI2FhYSIsd2lkdGg6MSx0eXBlOiJzb2xpZCJ9LHNoYWRvd1N0eWxlOntjb2xvcjoicmdiYSgxNTAsMTUwLDE1MCwwLjMpIn0sbGFiZWw6e3Nob3c6ITAsZm9ybWF0dGVyOm51bGwscHJlY2lzaW9uOiJhdXRvIixtYXJnaW46Myxjb2xvcjoiI2ZmZiIscGFkZGluZzpbNSw3LDUsN10sYmFja2dyb3VuZENvbG9yOiJhdXRvIixib3JkZXJDb2xvcjpudWxsLGJvcmRlcldpZHRoOjAsc2hhZG93Qmx1cjozLHNoYWRvd0NvbG9yOiIjYWFhIn0saGFuZGxlOntzaG93OiExLGljb246Ik0xMC43LDExLjl2LTEuM0g5LjN2MS4zYy00LjksMC4zLTguOCw0LjQtOC44LDkuNGMwLDUsMy45LDkuMSw4LjgsOS40aDEuM2M0LjktMC4zLDguOC00LjQsOC44LTkuNEMxOS41LDE2LjMsMTUuNiwxMi4yLDEwLjcsMTEuOXogTTEzLjMsMjQuNEg2Ljd2LTEuMmg2LjZ6IE0xMy4zLDIySDYuN3YtMS4yaDYuNnogTTEzLjMsMTkuNkg2Ljd2LTEuMmg2LjZ6IixzaXplOjQ1LG1hcmdpbjo1MCxjb2xvcjoiIzMzMyIsc2hhZG93Qmx1cjozLHNoYWRvd0NvbG9yOiIjYWFhIixzaGFkb3dPZmZzZXRYOjAsc2hhZG93T2Zmc2V0WToyLHRocm90dGxlOjQwfX19KTt2YXIgJE09Wm8oKSxKTT1FO2Z1bmN0aW9uIFFNKHQsZSxpKXtpZighdi5ub2RlKXt2YXIgbj1lLmdldFpyKCk7JE0obikucmVjb3Jkc3x8KCRNKG4pLnJlY29yZHM9e30pLGZ1bmN0aW9uKG8sYSl7aWYoJE0obykuaW5pdGlhbGl6ZWQpcmV0dXJuO2Z1bmN0aW9uIHQodCxuKXtvLm9uKHQsZnVuY3Rpb24oZSl7dmFyIGk9ZnVuY3Rpb24oaSl7dmFyIG49e3Nob3dUaXA6W10saGlkZVRpcDpbXX0sbz1mdW5jdGlvbih0KXt2YXIgZT1uW3QudHlwZV07ZT9lLnB1c2godCk6KHQuZGlzcGF0Y2hBY3Rpb249byxpLmRpc3BhdGNoQWN0aW9uKHQpKX07cmV0dXJue2Rpc3BhdGNoQWN0aW9uOm8scGVuZGluZ3M6bn19KGEpO0pNKCRNKG8pLnJlY29yZHMsZnVuY3Rpb24odCl7dCYmbih0LGUsaS5kaXNwYXRjaEFjdGlvbil9KSxmdW5jdGlvbih0LGUpe3ZhciBpLG49dC5zaG93VGlwLmxlbmd0aCxvPXQuaGlkZVRpcC5sZW5ndGg7bj9pPXQuc2hvd1RpcFtuLTFdOm8mJihpPXQuaGlkZVRpcFtvLTFdKTtpJiYoaS5kaXNwYXRjaEFjdGlvbj1udWxsLGUuZGlzcGF0Y2hBY3Rpb24oaSkpfShpLnBlbmRpbmdzLGEpfSl9JE0obykuaW5pdGlhbGl6ZWQ9ITAsdCgiY2xpY2siLFQoZUksImNsaWNrIikpLHQoIm1vdXNlbW92ZSIsVChlSSwibW91c2Vtb3ZlIikpLHQoImdsb2JhbG91dCIsdEkpfShuLGUpLCgkTShuKS5yZWNvcmRzW3RdfHwoJE0obikucmVjb3Jkc1t0XT17fSkpLmhhbmRsZXI9aX19ZnVuY3Rpb24gdEkodCxlLGkpe3QuaGFuZGxlcigibGVhdmUiLG51bGwsaSl9ZnVuY3Rpb24gZUkodCxlLGksbil7ZS5oYW5kbGVyKHQsaSxuKX1mdW5jdGlvbiBpSSh0LGUpe2lmKCF2Lm5vZGUpe3ZhciBpPWUuZ2V0WnIoKTsoJE0oaSkucmVjb3Jkc3x8e30pW3RdJiYoJE0oaSkucmVjb3Jkc1t0XT1udWxsKX19dmFyIG5JPWJmKHt0eXBlOiJheGlzUG9pbnRlciIscmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lLmdldENvbXBvbmVudCgidG9vbHRpcCIpLG89dC5nZXQoInRyaWdnZXJPbiIpfHxuJiZuLmdldCgidHJpZ2dlck9uIil8fCJtb3VzZW1vdmV8Y2xpY2siO1FNKCJheGlzUG9pbnRlciIsaSxmdW5jdGlvbih0LGUsaSl7Im5vbmUiIT09byYmKCJsZWF2ZSI9PT10fHwwPD1vLmluZGV4T2YodCkpJiZpKHt0eXBlOiJ1cGRhdGVBeGlzUG9pbnRlciIsY3VyclRyaWdnZXI6dCx4OmUmJmUub2Zmc2V0WCx5OmUmJmUub2Zmc2V0WX0pfSl9LHJlbW92ZTpmdW5jdGlvbih0LGUpe2lJKGUuZ2V0WnIoKSwiYXhpc1BvaW50ZXIiKSxuSS5zdXBlckFwcGx5KHRoaXMuX21vZGVsLCJyZW1vdmUiLGFyZ3VtZW50cyl9LGRpc3Bvc2U6ZnVuY3Rpb24odCxlKXtpSSgiYXhpc1BvaW50ZXIiLGUpLG5JLnN1cGVyQXBwbHkodGhpcy5fbW9kZWwsImRpc3Bvc2UiLGFyZ3VtZW50cyl9fSksb0k9Wm8oKSxhST1ELHJJPUE7ZnVuY3Rpb24gc0koKXt9ZnVuY3Rpb24gbEkodCxlLGksbil7IWZ1bmN0aW9uIGkobix0KXt7aWYoUihuKSYmUih0KSl7dmFyIG89ITA7cmV0dXJuIEUodCxmdW5jdGlvbih0LGUpe289byYmaShuW2VdLHQpfSksISFvfXJldHVybiBuPT09dH19KG9JKGkpLmxhc3RQcm9wLG4pJiYob0koaSkubGFzdFByb3A9bixlP3NsKGksbix0KTooaS5zdG9wQW5pbWF0aW9uKCksaS5hdHRyKG4pKSl9ZnVuY3Rpb24gdUkodCxlKXt0W2UuZ2V0KCJsYWJlbC5zaG93Iik/InNob3ciOiJoaWRlIl0oKX1mdW5jdGlvbiBoSSh0KXtyZXR1cm57cG9zaXRpb246dC5wb3NpdGlvbi5zbGljZSgpLHJvdGF0aW9uOnQucm90YXRpb258fDB9fWZ1bmN0aW9uIGNJKHQsZSxpKXt2YXIgbj1lLmdldCgieiIpLG89ZS5nZXQoInpsZXZlbCIpO3QmJnQudHJhdmVyc2UoZnVuY3Rpb24odCl7Imdyb3VwIiE9PXQudHlwZSYmKG51bGwhPW4mJih0Lno9biksbnVsbCE9byYmKHQuemxldmVsPW8pLHQuc2lsZW50PWkpfSl9ZnVuY3Rpb24gZEkodCl7dmFyIGUsaT10LmdldCgidHlwZSIpLG49dC5nZXRNb2RlbChpKyJTdHlsZSIpO3JldHVybiJsaW5lIj09PWk/KGU9bi5nZXRMaW5lU3R5bGUoKSkuZmlsbD1udWxsOiJzaGFkb3ciPT09aSYmKChlPW4uZ2V0QXJlYVN0eWxlKCkpLnN0cm9rZT1udWxsKSxlfWZ1bmN0aW9uIGZJKHQsZSxpLG4sbyl7dmFyIGE9cEkoaS5nZXQoInZhbHVlIiksZS5heGlzLGUuZWNNb2RlbCxpLmdldCgic2VyaWVzRGF0YUluZGljZXMiKSx7cHJlY2lzaW9uOmkuZ2V0KCJsYWJlbC5wcmVjaXNpb24iKSxmb3JtYXR0ZXI6aS5nZXQoImxhYmVsLmZvcm1hdHRlciIpfSkscj1pLmdldE1vZGVsKCJsYWJlbCIpLHM9Smwoci5nZXQoInBhZGRpbmciKXx8MCksbD1yLmdldEZvbnQoKSx1PWNuKGEsbCksaD1vLnBvc2l0aW9uLGM9dS53aWR0aCtzWzFdK3NbM10sZD11LmhlaWdodCtzWzBdK3NbMl0sZj1vLmFsaWduOyJyaWdodCI9PT1mJiYoaFswXS09YyksImNlbnRlciI9PT1mJiYoaFswXS09Yy8yKTt2YXIgcD1vLnZlcnRpY2FsQWxpZ247ImJvdHRvbSI9PT1wJiYoaFsxXS09ZCksIm1pZGRsZSI9PT1wJiYoaFsxXS09ZC8yKSxmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1uLmdldFdpZHRoKCksYT1uLmdldEhlaWdodCgpO3RbMF09TWF0aC5taW4odFswXStlLG8pLWUsdFsxXT1NYXRoLm1pbih0WzFdK2ksYSktaSx0WzBdPU1hdGgubWF4KHRbMF0sMCksdFsxXT1NYXRoLm1heCh0WzFdLDApfShoLGMsZCxuKTt2YXIgZz1yLmdldCgiYmFja2dyb3VuZENvbG9yIik7ZyYmImF1dG8iIT09Z3x8KGc9ZS5nZXQoImF4aXNMaW5lLmxpbmVTdHlsZS5jb2xvciIpKSx0LmxhYmVsPXtzaGFwZTp7eDowLHk6MCx3aWR0aDpjLGhlaWdodDpkLHI6ci5nZXQoImJvcmRlclJhZGl1cyIpfSxwb3NpdGlvbjpoLnNsaWNlKCksc3R5bGU6e3RleHQ6YSx0ZXh0Rm9udDpsLHRleHRGaWxsOnIuZ2V0VGV4dENvbG9yKCksdGV4dFBvc2l0aW9uOiJpbnNpZGUiLHRleHRQYWRkaW5nOnMsZmlsbDpnLHN0cm9rZTpyLmdldCgiYm9yZGVyQ29sb3IiKXx8InRyYW5zcGFyZW50IixsaW5lV2lkdGg6ci5nZXQoImJvcmRlcldpZHRoIil8fDAsc2hhZG93Qmx1cjpyLmdldCgic2hhZG93Qmx1ciIpLHNoYWRvd0NvbG9yOnIuZ2V0KCJzaGFkb3dDb2xvciIpLHNoYWRvd09mZnNldFg6ci5nZXQoInNoYWRvd09mZnNldFgiKSxzaGFkb3dPZmZzZXRZOnIuZ2V0KCJzaGFkb3dPZmZzZXRZIil9LHoyOjEwfX1mdW5jdGlvbiBwSSh0LGUsbyxpLG4pe3Q9ZS5zY2FsZS5wYXJzZSh0KTt2YXIgYT1lLnNjYWxlLmdldExhYmVsKHQse3ByZWNpc2lvbjpuLnByZWNpc2lvbn0pLHI9bi5mb3JtYXR0ZXI7aWYocil7dmFyIHM9e3ZhbHVlOm9nKGUsdCksYXhpc0RpbWVuc2lvbjplLmRpbSxheGlzSW5kZXg6ZS5pbmRleCxzZXJpZXNEYXRhOltdfTtFKGksZnVuY3Rpb24odCl7dmFyIGU9by5nZXRTZXJpZXNCeUluZGV4KHQuc2VyaWVzSW5kZXgpLGk9dC5kYXRhSW5kZXhJbnNpZGUsbj1lJiZlLmdldERhdGFQYXJhbXMoaSk7biYmcy5zZXJpZXNEYXRhLnB1c2gobil9KSx6KHIpP2E9ci5yZXBsYWNlKCJ7dmFsdWV9IixhKTpPKHIpJiYoYT1yKHMpKX1yZXR1cm4gYX1mdW5jdGlvbiBnSSh0LGUsaSl7dmFyIG49ZWUoKTtyZXR1cm4gcmUobixuLGkucm90YXRpb24pLGFlKG4sbixpLnBvc2l0aW9uKSxobChbdC5kYXRhVG9Db29yZChlKSwoaS5sYWJlbE9mZnNldHx8MCkrKGkubGFiZWxEaXJlY3Rpb258fDEpKihpLmxhYmVsTWFyZ2lufHwwKV0sbil9ZnVuY3Rpb24gbUkodCxlLGksbixvLGEpe3ZhciByPVltLmlubmVyVGV4dExheW91dChpLnJvdGF0aW9uLDAsaS5sYWJlbERpcmVjdGlvbik7aS5sYWJlbE1hcmdpbj1vLmdldCgibGFiZWwubWFyZ2luIiksZkkoZSxuLG8sYSx7cG9zaXRpb246Z0kobi5heGlzLHQsaSksYWxpZ246ci50ZXh0QWxpZ24sdmVydGljYWxBbGlnbjpyLnRleHRWZXJ0aWNhbEFsaWdufSl9ZnVuY3Rpb24gdkkodCxlLGkpe3JldHVybnt4MTp0W2k9aXx8MF0seTE6dFsxLWldLHgyOmVbaV0seTI6ZVsxLWldfX1mdW5jdGlvbiB5SSh0LGUsaSl7cmV0dXJue3g6dFtpPWl8fDBdLHk6dFsxLWldLHdpZHRoOmVbaV0saGVpZ2h0OmVbMS1pXX19ZnVuY3Rpb24geEkodCxlLGksbixvLGEpe3JldHVybntjeDp0LGN5OmUscjA6aSxyOm4sc3RhcnRBbmdsZTpvLGVuZEFuZ2xlOmEsY2xvY2t3aXNlOiEwfX10YSgoc0kucHJvdG90eXBlPXtfZ3JvdXA6bnVsbCxfbGFzdEdyYXBoaWNLZXk6bnVsbCxfaGFuZGxlOm51bGwsX2RyYWdnaW5nOiExLF9sYXN0VmFsdWU6bnVsbCxfbGFzdFN0YXR1czpudWxsLF9wYXlsb2FkSW5mbzpudWxsLGFuaW1hdGlvblRocmVzaG9sZDoxNSxyZW5kZXI6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89ZS5nZXQoInZhbHVlIiksYT1lLmdldCgic3RhdHVzIik7aWYodGhpcy5fYXhpc01vZGVsPXQsdGhpcy5fYXhpc1BvaW50ZXJNb2RlbD1lLHRoaXMuX2FwaT1pLG58fHRoaXMuX2xhc3RWYWx1ZSE9PW98fHRoaXMuX2xhc3RTdGF0dXMhPT1hKXt0aGlzLl9sYXN0VmFsdWU9byx0aGlzLl9sYXN0U3RhdHVzPWE7dmFyIHI9dGhpcy5fZ3JvdXAscz10aGlzLl9oYW5kbGU7aWYoIWF8fCJoaWRlIj09PWEpcmV0dXJuIHImJnIuaGlkZSgpLHZvaWQocyYmcy5oaWRlKCkpO3ImJnIuc2hvdygpLHMmJnMuc2hvdygpO3ZhciBsPXt9O3RoaXMubWFrZUVsT3B0aW9uKGwsbyx0LGUsaSk7dmFyIHU9bC5ncmFwaGljS2V5O3UhPT10aGlzLl9sYXN0R3JhcGhpY0tleSYmdGhpcy5jbGVhcihpKSx0aGlzLl9sYXN0R3JhcGhpY0tleT11O3ZhciBoPXRoaXMuX21vdmVBbmltYXRpb249dGhpcy5kZXRlcm1pbmVBbmltYXRpb24odCxlKTtpZihyKXt2YXIgYz1UKGxJLGUsaCk7dGhpcy51cGRhdGVQb2ludGVyRWwocixsLGMsZSksdGhpcy51cGRhdGVMYWJlbEVsKHIsbCxjLGUpfWVsc2Ugcj10aGlzLl9ncm91cD1uZXcgSWksdGhpcy5jcmVhdGVQb2ludGVyRWwocixsLHQsZSksdGhpcy5jcmVhdGVMYWJlbEVsKHIsbCx0LGUpLGkuZ2V0WnIoKS5hZGQocik7Y0kocixlLCEwKSx0aGlzLl9yZW5kZXJIYW5kbGUobyl9fSxyZW1vdmU6ZnVuY3Rpb24odCl7dGhpcy5jbGVhcih0KX0sZGlzcG9zZTpmdW5jdGlvbih0KXt0aGlzLmNsZWFyKHQpfSxkZXRlcm1pbmVBbmltYXRpb246ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmdldCgiYW5pbWF0aW9uIiksbj10LmF4aXMsbz0iY2F0ZWdvcnkiPT09bi50eXBlLGE9ZS5nZXQoInNuYXAiKTtpZighYSYmIW8pcmV0dXJuITE7aWYoImF1dG8iIT09aSYmbnVsbCE9aSlyZXR1cm4hMD09PWk7dmFyIHI9dGhpcy5hbmltYXRpb25UaHJlc2hvbGQ7aWYobyYmbi5nZXRCYW5kV2lkdGgoKT5yKXJldHVybiEwO2lmKGEpe3ZhciBzPXN2KHQpLnNlcmllc0RhdGFDb3VudCxsPW4uZ2V0RXh0ZW50KCk7cmV0dXJuIE1hdGguYWJzKGxbMF0tbFsxXSkvcz5yfXJldHVybiExfSxtYWtlRWxPcHRpb246ZnVuY3Rpb24odCxlLGksbixvKXt9LGNyZWF0ZVBvaW50ZXJFbDpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1lLnBvaW50ZXI7aWYobyl7dmFyIGE9b0kodCkucG9pbnRlckVsPW5ldyB5bFtvLnR5cGVdKGFJKGUucG9pbnRlcikpO3QuYWRkKGEpfX0sY3JlYXRlTGFiZWxFbDpmdW5jdGlvbih0LGUsaSxuKXtpZihlLmxhYmVsKXt2YXIgbz1vSSh0KS5sYWJlbEVsPW5ldyBpcyhhSShlLmxhYmVsKSk7dC5hZGQobyksdUkobyxuKX19LHVwZGF0ZVBvaW50ZXJFbDpmdW5jdGlvbih0LGUsaSl7dmFyIG49b0kodCkucG9pbnRlckVsO24mJmUucG9pbnRlciYmKG4uc2V0U3R5bGUoZS5wb2ludGVyLnN0eWxlKSxpKG4se3NoYXBlOmUucG9pbnRlci5zaGFwZX0pKX0sdXBkYXRlTGFiZWxFbDpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1vSSh0KS5sYWJlbEVsO28mJihvLnNldFN0eWxlKGUubGFiZWwuc3R5bGUpLGkobyx7c2hhcGU6ZS5sYWJlbC5zaGFwZSxwb3NpdGlvbjplLmxhYmVsLnBvc2l0aW9ufSksdUkobyxuKSl9LF9yZW5kZXJIYW5kbGU6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2RyYWdnaW5nJiZ0aGlzLnVwZGF0ZUhhbmRsZVRyYW5zZm9ybSl7dmFyIGUsaT10aGlzLl9heGlzUG9pbnRlck1vZGVsLG49dGhpcy5fYXBpLmdldFpyKCksbz10aGlzLl9oYW5kbGUsYT1pLmdldE1vZGVsKCJoYW5kbGUiKSxyPWkuZ2V0KCJzdGF0dXMiKTtpZighYS5nZXQoInNob3ciKXx8IXJ8fCJoaWRlIj09PXIpcmV0dXJuIG8mJm4ucmVtb3ZlKG8pLHZvaWQodGhpcy5faGFuZGxlPW51bGwpO3RoaXMuX2hhbmRsZXx8KGU9ITAsbz10aGlzLl9oYW5kbGU9cGwoYS5nZXQoImljb24iKSx7Y3Vyc29yOiJtb3ZlIixkcmFnZ2FibGU6ITAsb25tb3VzZW1vdmU6ZnVuY3Rpb24odCl7V3QodC5ldmVudCl9LG9ubW91c2Vkb3duOnJJKHRoaXMuX29uSGFuZGxlRHJhZ01vdmUsdGhpcywwLDApLGRyaWZ0OnJJKHRoaXMuX29uSGFuZGxlRHJhZ01vdmUsdGhpcyksb25kcmFnZW5kOnJJKHRoaXMuX29uSGFuZGxlRHJhZ0VuZCx0aGlzKX0pLG4uYWRkKG8pKSxjSShvLGksITEpO28uc2V0U3R5bGUoYS5nZXRJdGVtU3R5bGUobnVsbCxbImNvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsIm9wYWNpdHkiLCJzaGFkb3dDb2xvciIsInNoYWRvd0JsdXIiLCJzaGFkb3dPZmZzZXRYIiwic2hhZG93T2Zmc2V0WSJdKSk7dmFyIHM9YS5nZXQoInNpemUiKTtrKHMpfHwocz1bcyxzXSksby5hdHRyKCJzY2FsZSIsW3NbMF0vMixzWzFdLzJdKSxUYyh0aGlzLCJfZG9EaXNwYXRjaEF4aXNQb2ludGVyIixhLmdldCgidGhyb3R0bGUiKXx8MCwiZml4UmF0ZSIpLHRoaXMuX21vdmVIYW5kbGVUb1ZhbHVlKHQsZSl9fSxfbW92ZUhhbmRsZVRvVmFsdWU6ZnVuY3Rpb24odCxlKXtsSSh0aGlzLl9heGlzUG9pbnRlck1vZGVsLCFlJiZ0aGlzLl9tb3ZlQW5pbWF0aW9uLHRoaXMuX2hhbmRsZSxoSSh0aGlzLmdldEhhbmRsZVRyYW5zZm9ybSh0LHRoaXMuX2F4aXNNb2RlbCx0aGlzLl9heGlzUG9pbnRlck1vZGVsKSkpfSxfb25IYW5kbGVEcmFnTW92ZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2hhbmRsZTtpZihpKXt0aGlzLl9kcmFnZ2luZz0hMDt2YXIgbj10aGlzLnVwZGF0ZUhhbmRsZVRyYW5zZm9ybShoSShpKSxbdCxlXSx0aGlzLl9heGlzTW9kZWwsdGhpcy5fYXhpc1BvaW50ZXJNb2RlbCk7dGhpcy5fcGF5bG9hZEluZm89bixpLnN0b3BBbmltYXRpb24oKSxpLmF0dHIoaEkobikpLG9JKGkpLmxhc3RQcm9wPW51bGwsdGhpcy5fZG9EaXNwYXRjaEF4aXNQb2ludGVyKCl9fSxfZG9EaXNwYXRjaEF4aXNQb2ludGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5faGFuZGxlKXt2YXIgdD10aGlzLl9wYXlsb2FkSW5mbyxlPXRoaXMuX2F4aXNNb2RlbDt0aGlzLl9hcGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6InVwZGF0ZUF4aXNQb2ludGVyIix4OnQuY3Vyc29yUG9pbnRbMF0seTp0LmN1cnNvclBvaW50WzFdLHRvb2x0aXBPcHRpb246dC50b29sdGlwT3B0aW9uLGF4ZXNJbmZvOlt7YXhpc0RpbTplLmF4aXMuZGltLGF4aXNJbmRleDplLmNvbXBvbmVudEluZGV4fV19KX19LF9vbkhhbmRsZURyYWdFbmQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fZHJhZ2dpbmc9ITEsdGhpcy5faGFuZGxlKXt2YXIgZT10aGlzLl9heGlzUG9pbnRlck1vZGVsLmdldCgidmFsdWUiKTt0aGlzLl9tb3ZlSGFuZGxlVG9WYWx1ZShlKSx0aGlzLl9hcGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImhpZGVUaXAifSl9fSxnZXRIYW5kbGVUcmFuc2Zvcm06bnVsbCx1cGRhdGVIYW5kbGVUcmFuc2Zvcm06bnVsbCxjbGVhcjpmdW5jdGlvbih0KXt0aGlzLl9sYXN0VmFsdWU9bnVsbCx0aGlzLl9sYXN0U3RhdHVzPW51bGw7dmFyIGU9dC5nZXRacigpLGk9dGhpcy5fZ3JvdXAsbj10aGlzLl9oYW5kbGU7ZSYmaSYmKHRoaXMuX2xhc3RHcmFwaGljS2V5PW51bGwsaSYmZS5yZW1vdmUoaSksbiYmZS5yZW1vdmUobiksdGhpcy5fZ3JvdXA9bnVsbCx0aGlzLl9oYW5kbGU9bnVsbCx0aGlzLl9wYXlsb2FkSW5mbz1udWxsKX0sZG9DbGVhcjpmdW5jdGlvbigpe30sYnVpbGRMYWJlbDpmdW5jdGlvbih0LGUsaSl7cmV0dXJue3g6dFtpPWl8fDBdLHk6dFsxLWldLHdpZHRoOmVbaV0saGVpZ2h0OmVbMS1pXX19fSkuY29uc3RydWN0b3I9c0kpO3ZhciBfST1zSS5leHRlbmQoe21ha2VFbE9wdGlvbjpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhPWkuYXhpcyxyPWEuZ3JpZCxzPW4uZ2V0KCJ0eXBlIiksbD13SShyLGEpLmdldE90aGVyQXhpcyhhKS5nZXRHbG9iYWxFeHRlbnQoKSx1PWEudG9HbG9iYWxDb29yZChhLmRhdGFUb0Nvb3JkKGUsITApKTtpZihzJiYibm9uZSIhPT1zKXt2YXIgaD1kSShuKSxjPWJJW3NdKGEsdSxsKTtjLnN0eWxlPWgsdC5ncmFwaGljS2V5PWMudHlwZSx0LnBvaW50ZXI9Y31tSShlLHQscHYoci5tb2RlbCxpKSxpLG4sbyl9LGdldEhhbmRsZVRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSl7dmFyIG49cHYoZS5heGlzLmdyaWQubW9kZWwsZSx7bGFiZWxJbnNpZGU6ITF9KTtyZXR1cm4gbi5sYWJlbE1hcmdpbj1pLmdldCgiaGFuZGxlLm1hcmdpbiIpLHtwb3NpdGlvbjpnSShlLmF4aXMsdCxuKSxyb3RhdGlvbjpuLnJvdGF0aW9uKyhuLmxhYmVsRGlyZWN0aW9uPDA/TWF0aC5QSTowKX19LHVwZGF0ZUhhbmRsZVRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1pLmF4aXMsYT1vLmdyaWQscj1vLmdldEdsb2JhbEV4dGVudCghMCkscz13SShhLG8pLmdldE90aGVyQXhpcyhvKS5nZXRHbG9iYWxFeHRlbnQoKSxsPSJ4Ij09PW8uZGltPzA6MSx1PXQucG9zaXRpb247dVtsXSs9ZVtsXSx1W2xdPU1hdGgubWluKHJbMV0sdVtsXSksdVtsXT1NYXRoLm1heChyWzBdLHVbbF0pO3ZhciBoPShzWzFdK3NbMF0pLzIsYz1baCxoXTtjW2xdPXVbbF07cmV0dXJue3Bvc2l0aW9uOnUscm90YXRpb246dC5yb3RhdGlvbixjdXJzb3JQb2ludDpjLHRvb2x0aXBPcHRpb246W3t2ZXJ0aWNhbEFsaWduOiJtaWRkbGUifSx7YWxpZ246ImNlbnRlciJ9XVtsXX19fSk7ZnVuY3Rpb24gd0kodCxlKXt2YXIgaT17fTtyZXR1cm4gaVtlLmRpbSsiQXhpc0luZGV4Il09ZS5pbmRleCx0LmdldENhcnRlc2lhbihpKX12YXIgYkk9e2xpbmU6ZnVuY3Rpb24odCxlLGkpe3JldHVybnt0eXBlOiJMaW5lIixzdWJQaXhlbE9wdGltaXplOiEwLHNoYXBlOnZJKFtlLGlbMF1dLFtlLGlbMV1dLFNJKHQpKX19LHNoYWRvdzpmdW5jdGlvbih0LGUsaSl7dmFyIG49TWF0aC5tYXgoMSx0LmdldEJhbmRXaWR0aCgpKSxvPWlbMV0taVswXTtyZXR1cm57dHlwZToiUmVjdCIsc2hhcGU6eUkoW2Utbi8yLGlbMF1dLFtuLG9dLFNJKHQpKX19fTtmdW5jdGlvbiBTSSh0KXtyZXR1cm4ieCI9PT10LmRpbT8wOjF9aHYucmVnaXN0ZXJBeGlzUG9pbnRlckNsYXNzKCJDYXJ0ZXNpYW5BeGlzUG9pbnRlciIsX0kpLGZmKGZ1bmN0aW9uKHQpe2lmKHQpe3QuYXhpc1BvaW50ZXImJjAhPT10LmF4aXNQb2ludGVyLmxlbmd0aHx8KHQuYXhpc1BvaW50ZXI9e30pO3ZhciBlPXQuYXhpc1BvaW50ZXIubGluaztlJiYhayhlKSYmKHQuYXhpc1BvaW50ZXIubGluaz1bZV0pfX0pLHBmKElkLlBST0NFU1NPUi5TVEFUSVNUSUMsZnVuY3Rpb24odCxlKXt0LmdldENvbXBvbmVudCgiYXhpc1BvaW50ZXIiKS5jb29yZFN5c0F4ZXNJbmZvPWF2KHQsZSl9KSxnZih7dHlwZToidXBkYXRlQXhpc1BvaW50ZXIiLGV2ZW50OiJ1cGRhdGVBeGlzUG9pbnRlciIsdXBkYXRlOiI6dXBkYXRlQXhpc1BvaW50ZXIifSxmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5jdXJyVHJpZ2dlcixyPVt0LngsdC55XSxvPXQsYT10LmRpc3BhdGNoQWN0aW9ufHxBKGkuZGlzcGF0Y2hBY3Rpb24saSkscz1lLmdldENvbXBvbmVudCgiYXhpc1BvaW50ZXIiKS5jb29yZFN5c0F4ZXNJbmZvO2lmKHMpe0tNKHIpJiYocj1XTSh7c2VyaWVzSW5kZXg6by5zZXJpZXNJbmRleCxkYXRhSW5kZXg6by5kYXRhSW5kZXh9LGUpLnBvaW50KTt2YXIgbD1LTShyKSx1PW8uYXhlc0luZm8saD1zLmF4ZXNJbmZvLGM9ImxlYXZlIj09PW58fEtNKHIpLGQ9e30sZj17fSxwPXtsaXN0OltdLG1hcDp7fX0sZz17c2hvd1BvaW50ZXI6Wk0oWU0sZiksc2hvd1Rvb2x0aXA6Wk0oak0scCl9O0hNKHMuY29vcmRTeXNNYXAsZnVuY3Rpb24odCxlKXt2YXIgYT1sfHx0LmNvbnRhaW5Qb2ludChyKTtITShzLmNvb3JkU3lzQXhlc0luZm9bZV0sZnVuY3Rpb24odCxlKXt2YXIgaT10LmF4aXMsbj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0wO2k8KHR8fFtdKS5sZW5ndGg7aSsrKXt2YXIgbj10W2ldO2lmKGUuYXhpcy5kaW09PT1uLmF4aXNEaW0mJmUuYXhpcy5tb2RlbC5jb21wb25lbnRJbmRleD09PW4uYXhpc0luZGV4KXJldHVybiBufX0odSx0KTtpZighYyYmYSYmKCF1fHxuKSl7dmFyIG89biYmbi52YWx1ZTtudWxsIT1vfHxsfHwobz1pLnBvaW50VG9EYXRhKHIpKSxudWxsIT1vJiZYTSh0LG8sZywhMSxkKX19KX0pO3ZhciBtPXt9O3JldHVybiBITShoLGZ1bmN0aW9uKG8sdCl7dmFyIGE9by5saW5rR3JvdXA7YSYmIWZbdF0mJkhNKGEuYXhlc0luZm8sZnVuY3Rpb24odCxlKXt2YXIgaT1mW2VdO2lmKHQhPT1vJiZpKXt2YXIgbj1pLnZhbHVlO2EubWFwcGVyJiYobj1vLmF4aXMuc2NhbGUucGFyc2UoYS5tYXBwZXIobixxTSh0KSxxTShvKSkpKSxtW28ua2V5XT1ufX0pfSksSE0obSxmdW5jdGlvbih0LGUpe1hNKGhbZV0sdCxnLCEwLGQpfSksZnVuY3Rpb24obyx0LGUpe3ZhciBhPWUuYXhlc0luZm89W107SE0odCxmdW5jdGlvbih0LGUpe3ZhciBpPXQuYXhpc1BvaW50ZXJNb2RlbC5vcHRpb24sbj1vW2VdO24/KHQudXNlSGFuZGxlfHwoaS5zdGF0dXM9InNob3ciKSxpLnZhbHVlPW4udmFsdWUsaS5zZXJpZXNEYXRhSW5kaWNlcz0obi5wYXlsb2FkQmF0Y2h8fFtdKS5zbGljZSgpKTp0LnVzZUhhbmRsZXx8KGkuc3RhdHVzPSJoaWRlIiksInNob3ciPT09aS5zdGF0dXMmJmEucHVzaCh7YXhpc0RpbTp0LmF4aXMuZGltLGF4aXNJbmRleDp0LmF4aXMubW9kZWwuY29tcG9uZW50SW5kZXgsdmFsdWU6aS52YWx1ZX0pfSl9KGYsaCxkKSxmdW5jdGlvbih0LGUsaSxuKXtpZihLTShlKXx8IXQubGlzdC5sZW5ndGgpcmV0dXJuIG4oe3R5cGU6ImhpZGVUaXAifSk7dmFyIG89KCh0Lmxpc3RbMF0uZGF0YUJ5QXhpc1swXXx8e30pLnNlcmllc0RhdGFJbmRpY2VzfHxbXSlbMF18fHt9O24oe3R5cGU6InNob3dUaXAiLGVzY2FwZUNvbm5lY3Q6ITAseDplWzBdLHk6ZVsxXSx0b29sdGlwT3B0aW9uOmkudG9vbHRpcE9wdGlvbixwb3NpdGlvbjppLnBvc2l0aW9uLGRhdGFJbmRleEluc2lkZTpvLmRhdGFJbmRleEluc2lkZSxkYXRhSW5kZXg6by5kYXRhSW5kZXgsc2VyaWVzSW5kZXg6by5zZXJpZXNJbmRleCxkYXRhQnlDb29yZFN5czp0Lmxpc3R9KX0ocCxyLHQsYSksZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkuZ2V0WnIoKSxvPSJheGlzUG9pbnRlckxhc3RIaWdobGlnaHRzIixhPVVNKG4pW29dfHx7fSxyPVVNKG4pW29dPXt9O0hNKHQsZnVuY3Rpb24odCxlKXt2YXIgaT10LmF4aXNQb2ludGVyTW9kZWwub3B0aW9uOyJzaG93Ij09PWkuc3RhdHVzJiZITShpLnNlcmllc0RhdGFJbmRpY2VzLGZ1bmN0aW9uKHQpe3ZhciBlPXQuc2VyaWVzSW5kZXgrIiB8ICIrdC5kYXRhSW5kZXg7cltlXT10fSl9KTt2YXIgcz1bXSxsPVtdO0UoYSxmdW5jdGlvbih0LGUpe3JbZV18fGwucHVzaCh0KX0pLEUocixmdW5jdGlvbih0LGUpe2FbZV18fHMucHVzaCh0KX0pLGwubGVuZ3RoJiZpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJkb3ducGxheSIsZXNjYXBlQ29ubmVjdDohMCxiYXRjaDpsfSkscy5sZW5ndGgmJmkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImhpZ2hsaWdodCIsZXNjYXBlQ29ubmVjdDohMCxiYXRjaDpzfSl9KGgsMCxpKSxkfX0pO3ZhciBNST1bIngiLCJ5Il0sSUk9WyJ3aWR0aCIsImhlaWdodCJdLFRJPXNJLmV4dGVuZCh7bWFrZUVsT3B0aW9uOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9aS5heGlzLHI9YS5jb29yZGluYXRlU3lzdGVtLHM9Q0kociwxLURJKGEpKSxsPXIuZGF0YVRvUG9pbnQoZSlbMF0sdT1uLmdldCgidHlwZSIpO2lmKHUmJiJub25lIiE9PXUpe3ZhciBoPWRJKG4pLGM9QUlbdV0oYSxsLHMpO2Muc3R5bGU9aCx0LmdyYXBoaWNLZXk9Yy50eXBlLHQucG9pbnRlcj1jfW1JKGUsdCxSTShpKSxpLG4sbyl9LGdldEhhbmRsZVRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSl7dmFyIG49Uk0oZSx7bGFiZWxJbnNpZGU6ITF9KTtyZXR1cm4gbi5sYWJlbE1hcmdpbj1pLmdldCgiaGFuZGxlLm1hcmdpbiIpLHtwb3NpdGlvbjpnSShlLmF4aXMsdCxuKSxyb3RhdGlvbjpuLnJvdGF0aW9uKyhuLmxhYmVsRGlyZWN0aW9uPDA/TWF0aC5QSTowKX19LHVwZGF0ZUhhbmRsZVRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1pLmF4aXMsYT1vLmNvb3JkaW5hdGVTeXN0ZW0scj1ESShvKSxzPUNJKGEsciksbD10LnBvc2l0aW9uO2xbcl0rPWVbcl0sbFtyXT1NYXRoLm1pbihzWzFdLGxbcl0pLGxbcl09TWF0aC5tYXgoc1swXSxsW3JdKTt2YXIgdT1DSShhLDEtciksaD0odVsxXSt1WzBdKS8yLGM9W2gsaF07cmV0dXJuIGNbcl09bFtyXSx7cG9zaXRpb246bCxyb3RhdGlvbjp0LnJvdGF0aW9uLGN1cnNvclBvaW50OmMsdG9vbHRpcE9wdGlvbjp7dmVydGljYWxBbGlnbjoibWlkZGxlIn19fX0pLEFJPXtsaW5lOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm57dHlwZToiTGluZSIsc3ViUGl4ZWxPcHRpbWl6ZTohMCxzaGFwZTp2SShbZSxpWzBdXSxbZSxpWzFdXSxESSh0KSl9fSxzaGFkb3c6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuZ2V0QmFuZFdpZHRoKCksbz1pWzFdLWlbMF07cmV0dXJue3R5cGU6IlJlY3QiLHNoYXBlOnlJKFtlLW4vMixpWzBdXSxbbixvXSxESSh0KSl9fX07ZnVuY3Rpb24gREkodCl7cmV0dXJuIHQuaXNIb3Jpem9udGFsKCk/MDoxfWZ1bmN0aW9uIENJKHQsZSl7dmFyIGk9dC5nZXRSZWN0KCk7cmV0dXJuW2lbTUlbZV1dLGlbTUlbZV1dK2lbSUlbZV1dXX1odi5yZWdpc3RlckF4aXNQb2ludGVyQ2xhc3MoIlNpbmdsZUF4aXNQb2ludGVyIixUSSksYmYoe3R5cGU6InNpbmdsZSJ9KTt2YXIgTEk9aWMuZXh0ZW5kKHt0eXBlOiJzZXJpZXMudGhlbWVSaXZlciIsZGVwZW5kZW5jaWVzOlsic2luZ2xlQXhpcyJdLG5hbWVNYXA6bnVsbCxpbml0OmZ1bmN0aW9uKHQpe0xJLnN1cGVyQXBwbHkodGhpcywiaW5pdCIsYXJndW1lbnRzKSx0aGlzLmxlZ2VuZFZpc3VhbFByb3ZpZGVyPW5ldyBHdihBKHRoaXMuZ2V0RGF0YSx0aGlzKSxBKHRoaXMuZ2V0UmF3RGF0YSx0aGlzKSl9LGZpeERhdGE6ZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGgsaT1Lbyh0LGZ1bmN0aW9uKHQpe3JldHVybiB0WzJdfSksbj1bXTtpLmJ1Y2tldHMuZWFjaChmdW5jdGlvbih0LGUpe24ucHVzaCh7bmFtZTplLGRhdGFMaXN0OnR9KX0pO2Zvcih2YXIgbz1uLmxlbmd0aCxhPS0xLHI9LTEscz0wO3M8bzsrK3Mpe3ZhciBsPW5bc10uZGF0YUxpc3QubGVuZ3RoO2E8bCYmKGE9bCxyPXMpfWZvcih2YXIgdT0wO3U8bzsrK3UpaWYodSE9PXIpZm9yKHZhciBoPW5bdV0ubmFtZSxjPTA7YzxhOysrYyl7Zm9yKHZhciBkPW5bcl0uZGF0YUxpc3RbY11bMF0sZj1uW3VdLmRhdGFMaXN0Lmxlbmd0aCxwPS0xLGc9MDtnPGY7KytnKXtpZihuW3VdLmRhdGFMaXN0W2ddWzBdPT09ZCl7cD1nO2JyZWFrfX0tMT09PXAmJih0W2VdPVtdLHRbZV1bMF09ZCx0W2VdWzFdPTAsdFtlXVsyXT1oLGUrKyl9cmV0dXJuIHR9LGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPWUucXVlcnlDb21wb25lbnRzKHttYWluVHlwZToic2luZ2xlQXhpcyIsaW5kZXg6dGhpcy5nZXQoInNpbmdsZUF4aXNJbmRleCIpLGlkOnRoaXMuZ2V0KCJzaW5nbGVBeGlzSWQiKX0pWzBdLmdldCgidHlwZSIpLG49TSh0LmRhdGEsZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXRbMl19KSxvPXRoaXMuZml4RGF0YShufHxbXSksYT1bXSxyPXRoaXMubmFtZU1hcD1RKCkscz0wLGw9MDtsPG8ubGVuZ3RoOysrbClhLnB1c2gob1tsXVsyXSksci5nZXQob1tsXVsyXSl8fChyLnNldChvW2xdWzJdLHMpLHMrKyk7dmFyIHU9bnAobyx7Y29vcmREaW1lbnNpb25zOlsic2luZ2xlIl0sZGltZW5zaW9uc0RlZmluZTpbe25hbWU6InRpbWUiLHR5cGU6TGYoaSl9LHtuYW1lOiJ2YWx1ZSIsdHlwZToiZmxvYXQifSx7bmFtZToibmFtZSIsdHlwZToib3JkaW5hbCJ9XSxlbmNvZGVEZWZpbmU6e3NpbmdsZTowLHZhbHVlOjEsaXRlbU5hbWU6Mn19KSxoPW5ldyBXZih1LHRoaXMpO3JldHVybiBoLmluaXREYXRhKG8pLGh9LGdldExheWVyU2VyaWVzOmZ1bmN0aW9uKCl7Zm9yKHZhciBpPXRoaXMuZ2V0RGF0YSgpLHQ9aS5jb3VudCgpLGU9W10sbj0wO248dDsrK24pZVtuXT1uO3ZhciBvPWkubWFwRGltZW5zaW9uKCJzaW5nbGUiKSxhPUtvKGUsZnVuY3Rpb24odCl7cmV0dXJuIGkuZ2V0KCJuYW1lIix0KX0pLHI9W107cmV0dXJuIGEuYnVja2V0cy5lYWNoKGZ1bmN0aW9uKHQsZSl7dC5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkuZ2V0KG8sdCktaS5nZXQobyxlKX0pLHIucHVzaCh7bmFtZTplLGluZGljZXM6dH0pfSkscn0sZ2V0QXhpc1Rvb2x0aXBEYXRhOmZ1bmN0aW9uKHQsZSxpKXtrKHQpfHwodD10P1t0XTpbXSk7Zm9yKHZhciBuLG89dGhpcy5nZXREYXRhKCksYT10aGlzLmdldExheWVyU2VyaWVzKCkscj1bXSxzPWEubGVuZ3RoLGw9MDtsPHM7KytsKXtmb3IodmFyIHU9TnVtYmVyLk1BWF9WQUxVRSxoPS0xLGM9YVtsXS5pbmRpY2VzLmxlbmd0aCxkPTA7ZDxjOysrZCl7dmFyIGY9by5nZXQodFswXSxhW2xdLmluZGljZXNbZF0pLHA9TWF0aC5hYnMoZi1lKTtwPD11JiYobj1mLHU9cCxoPWFbbF0uaW5kaWNlc1tkXSl9ci5wdXNoKGgpfXJldHVybntkYXRhSW5kaWNlczpyLG5lc3Rlc3RWYWx1ZTpufX0sZm9ybWF0VG9vbHRpcDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldERhdGEoKSxpPWUuZ2V0TmFtZSh0KSxuPWUuZ2V0KGUubWFwRGltZW5zaW9uKCJ2YWx1ZSIpLHQpO3JldHVybiFpc05hTihuKSYmbnVsbCE9bnx8KG49Ii0iKSxldShpKyIgOiAiK24pfSxkZWZhdWx0T3B0aW9uOnt6bGV2ZWw6MCx6OjIsY29vcmRpbmF0ZVN5c3RlbToic2luZ2xlQXhpcyIsYm91bmRhcnlHYXA6WyIxMCUiLCIxMCUiXSxzaW5nbGVBeGlzSW5kZXg6MCxhbmltYXRpb25FYXNpbmc6ImxpbmVhciIsbGFiZWw6e21hcmdpbjo0LHNob3c6ITAscG9zaXRpb246ImxlZnQiLGNvbG9yOiIjMDAwIixmb250U2l6ZToxMX0sZW1waGFzaXM6e2xhYmVsOntzaG93OiEwfX19fSk7TWYoe3R5cGU6InRoZW1lUml2ZXIiLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLl9sYXllcnM9W119LHJlbmRlcjpmdW5jdGlvbihiLHQsZSl7dmFyIFM9Yi5nZXREYXRhKCksTT10aGlzLmdyb3VwLEk9Yi5nZXRMYXllclNlcmllcygpLGk9Uy5nZXRMYXlvdXQoImxheW91dEluZm8iKSxuPWkucmVjdCxvPWkuYm91bmRhcnlHYXA7ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdC5uYW1lfU0uYXR0cigicG9zaXRpb24iLFswLG4ueStvWzBdXSk7dmFyIHI9bmV3IFRmKHRoaXMuX2xheWVyc1Nlcmllc3x8W10sSSxhLGEpLFQ9e307ZnVuY3Rpb24gcyh0LGUsaSl7dmFyIG49dGhpcy5fbGF5ZXJzO2lmKCJyZW1vdmUiIT09dCl7Zm9yKHZhciBvLGEscixzPVtdLGw9W10sdT1JW2VdLmluZGljZXMsaD0wO2g8dS5sZW5ndGg7aCsrKXt2YXIgYz1TLmdldEl0ZW1MYXlvdXQodVtoXSksZD1jLngsZj1jLnkwLHA9Yy55O3MucHVzaChbZCxmXSksbC5wdXNoKFtkLGYrcF0pLG89Uy5nZXRJdGVtVmlzdWFsKHVbaF0sImNvbG9yIil9dmFyIGc9Uy5nZXRJdGVtTGF5b3V0KHVbMF0pLG09Uy5nZXRJdGVtTW9kZWwodVtoLTFdKSx2PW0uZ2V0TW9kZWwoImxhYmVsIikseT12LmdldCgibWFyZ2luIik7aWYoImFkZCI9PT10KXt2YXIgeD1UW2VdPW5ldyBJaTthPW5ldyBnbSh7c2hhcGU6e3BvaW50czpzLHN0YWNrZWRPblBvaW50czpsLHNtb290aDouNCxzdGFja2VkT25TbW9vdGg6LjQsc21vb3RoQ29uc3RyYWludDohMX0sejI6MH0pLHI9bmV3IEZyKHtzdHlsZTp7eDpnLngteSx5OmcueTArZy55LzJ9fSkseC5hZGQoYSkseC5hZGQociksTS5hZGQoeCksYS5zZXRDbGlwUGF0aChmdW5jdGlvbih0LGUsaSl7dmFyIG49bmV3IGlzKHtzaGFwZTp7eDp0LngtMTAseTp0LnktMTAsd2lkdGg6MCxoZWlnaHQ6dC5oZWlnaHQrMjB9fSk7cmV0dXJuIGxsKG4se3NoYXBlOnt3aWR0aDp0LndpZHRoKzIwLGhlaWdodDp0LmhlaWdodCsyMH19LGUsaSksbn0oYS5nZXRCb3VuZGluZ1JlY3QoKSxiLGZ1bmN0aW9uKCl7YS5yZW1vdmVDbGlwUGF0aCgpfSkpfWVsc2V7eD1uW2ldO2E9eC5jaGlsZEF0KDApLHI9eC5jaGlsZEF0KDEpLE0uYWRkKHgpLFRbZV09eCxzbChhLHtzaGFwZTp7cG9pbnRzOnMsc3RhY2tlZE9uUG9pbnRzOmx9fSxiKSxzbChyLHtzdHlsZTp7eDpnLngteSx5OmcueTArZy55LzJ9fSxiKX12YXIgXz1tLmdldE1vZGVsKCJlbXBoYXNpcy5pdGVtU3R5bGUiKSx3PW0uZ2V0TW9kZWwoIml0ZW1TdHlsZSIpO1FzKHIuc3R5bGUsdix7dGV4dDp2LmdldCgic2hvdyIpP2IuZ2V0Rm9ybWF0dGVkTGFiZWwodVtoLTFdLCJub3JtYWwiKXx8Uy5nZXROYW1lKHVbaC0xXSk6bnVsbCx0ZXh0VmVydGljYWxBbGlnbjoibWlkZGxlIn0pLGEuc2V0U3R5bGUoTCh7ZmlsbDpvfSx3LmdldEl0ZW1TdHlsZShbImNvbG9yIl0pKSksWXMoYSxfLmdldEl0ZW1TdHlsZSgpKX1lbHNlIE0ucmVtb3ZlKG5bZV0pfXIuYWRkKEEocyx0aGlzLCJhZGQiKSkudXBkYXRlKEEocyx0aGlzLCJ1cGRhdGUiKSkucmVtb3ZlKEEocyx0aGlzLCJyZW1vdmUiKSkuZXhlY3V0ZSgpLHRoaXMuX2xheWVyc1Nlcmllcz1JLHRoaXMuX2xheWVycz1UfSxkaXNwb3NlOmZ1bmN0aW9uKCl7fX0pO2Z1bmN0aW9uIGtJKGksdCxlKXtpZihpLmNvdW50KCkpZm9yKHZhciBuLG89dC5jb29yZGluYXRlU3lzdGVtLGE9dC5nZXRMYXllclNlcmllcygpLHI9aS5tYXBEaW1lbnNpb24oInNpbmdsZSIpLHM9aS5tYXBEaW1lbnNpb24oInZhbHVlIiksbD1OKGEsZnVuY3Rpb24odCl7cmV0dXJuIE4odC5pbmRpY2VzLGZ1bmN0aW9uKHQpe3ZhciBlPW8uZGF0YVRvUG9pbnQoaS5nZXQocix0KSk7cmV0dXJuIGVbMV09aS5nZXQocyx0KSxlfSl9KSx1PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxpPXRbMF0ubGVuZ3RoLG49W10sbz1bXSxhPTAscj17fSxzPTA7czxpOysrcyl7Zm9yKHZhciBsPTAsdT0wO2w8ZTsrK2wpdSs9dFtsXVtzXVsxXTthPHUmJihhPXUpLG4ucHVzaCh1KX1mb3IodmFyIGg9MDtoPGk7KytoKW9baF09KGEtbltoXSkvMjtmb3IodmFyIGM9YT0wO2M8aTsrK2Mpe3ZhciBkPW5bY10rb1tjXTthPGQmJihhPWQpfXJldHVybiByLnkwPW8sci5tYXg9YSxyfShsKSxoPXUueTAsYz1lL3UubWF4LGQ9YS5sZW5ndGgsZj1hWzBdLmluZGljZXMubGVuZ3RoLHA9MDtwPGY7KytwKXtuPWhbcF0qYyxpLnNldEl0ZW1MYXlvdXQoYVswXS5pbmRpY2VzW3BdLHtsYXllckluZGV4OjAseDpsWzBdW3BdWzBdLHkwOm4seTpsWzBdW3BdWzFdKmN9KTtmb3IodmFyIGc9MTtnPGQ7KytnKW4rPWxbZy0xXVtwXVsxXSpjLGkuc2V0SXRlbUxheW91dChhW2ddLmluZGljZXNbcF0se2xheWVySW5kZXg6Zyx4OmxbZ11bcF1bMF0seTA6bix5OmxbZ11bcF1bMV0qY30pfX12ZihmdW5jdGlvbih0LGUpe3QuZWFjaFNlcmllc0J5VHlwZSgidGhlbWVSaXZlciIsZnVuY3Rpb24odCl7dmFyIGU9dC5nZXREYXRhKCksaT10LmNvb3JkaW5hdGVTeXN0ZW0sbj17fSxvPWkuZ2V0UmVjdCgpO24ucmVjdD1vO3ZhciBhPXQuZ2V0KCJib3VuZGFyeUdhcCIpLHI9aS5nZXRBeGlzKCk7KG4uYm91bmRhcnlHYXA9YSwiaG9yaXpvbnRhbCI9PT1yLm9yaWVudCk/KGFbMF09UGwoYVswXSxvLmhlaWdodCksYVsxXT1QbChhWzFdLG8uaGVpZ2h0KSxrSShlLHQsby5oZWlnaHQtYVswXS1hWzFdKSk6KGFbMF09UGwoYVswXSxvLndpZHRoKSxhWzFdPVBsKGFbMV0sby53aWR0aCksa0koZSx0LG8ud2lkdGgtYVswXS1hWzFdKSk7ZS5zZXRMYXlvdXQoImxheW91dEluZm8iLG4pfSl9KSx5ZihmdW5jdGlvbih0KXt0LmVhY2hTZXJpZXNCeVR5cGUoInRoZW1lUml2ZXIiLGZ1bmN0aW9uKG8pe3ZhciBhPW8uZ2V0RGF0YSgpLHI9by5nZXRSYXdEYXRhKCkscz1vLmdldCgiY29sb3IiKSxsPVEoKTthLmVhY2goZnVuY3Rpb24odCl7bC5zZXQoYS5nZXRSYXdJbmRleCh0KSx0KX0pLHIuZWFjaChmdW5jdGlvbih0KXt2YXIgZT1yLmdldE5hbWUodCksaT1zWyhvLm5hbWVNYXAuZ2V0KGUpLTEpJXMubGVuZ3RoXTtyLnNldEl0ZW1WaXN1YWwodCwiY29sb3IiLGkpO3ZhciBuPWwuZ2V0KHQpO251bGwhPW4mJmEuc2V0SXRlbVZpc3VhbChuLCJjb2xvciIsaSl9KX0pfSkscGYodHkoInRoZW1lUml2ZXIiKSksaWMuZXh0ZW5kKHt0eXBlOiJzZXJpZXMuc3VuYnVyc3QiLF92aWV3Um9vdDpudWxsLGdldEluaXRpYWxEYXRhOmZ1bmN0aW9uKHQsZSl7dmFyIGk9e25hbWU6dC5uYW1lLGNoaWxkcmVuOnQuZGF0YX07IWZ1bmN0aW9uIGkodCl7dmFyIG49MDtFKHQuY2hpbGRyZW4sZnVuY3Rpb24odCl7aSh0KTt2YXIgZT10LnZhbHVlO2soZSkmJihlPWVbMF0pLG4rPWV9KTt2YXIgZT10LnZhbHVlO2soZSkmJihlPWVbMF0pO251bGwhPWUmJiFpc05hTihlKXx8KGU9bik7ZTwwJiYoZT0wKTtrKHQudmFsdWUpP3QudmFsdWVbMF09ZTp0LnZhbHVlPWV9KGkpO3ZhciBuPXQubGV2ZWxzfHxbXSxvPXt9O3JldHVybiBvLmxldmVscz1uLHZ4LmNyZWF0ZVRyZWUoaSx0aGlzLG8pLmRhdGF9LG9wdGlvblVwZGF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnJlc2V0Vmlld1Jvb3QoKX0sZ2V0RGF0YVBhcmFtczpmdW5jdGlvbih0KXt2YXIgZT1pYy5wcm90b3R5cGUuZ2V0RGF0YVBhcmFtcy5hcHBseSh0aGlzLGFyZ3VtZW50cyksaT10aGlzLmdldERhdGEoKS50cmVlLmdldE5vZGVCeURhdGFJbmRleCh0KTtyZXR1cm4gZS50cmVlUGF0aEluZm89UngoaSx0aGlzKSxlfSxkZWZhdWx0T3B0aW9uOnt6bGV2ZWw6MCx6OjIsY2VudGVyOlsiNTAlIiwiNTAlIl0scmFkaXVzOlswLCI3NSUiXSxjbG9ja3dpc2U6ITAsc3RhcnRBbmdsZTo5MCxtaW5BbmdsZTowLHBlcmNlbnRQcmVjaXNpb246MixzdGlsbFNob3daZXJvU3VtOiEwLGhpZ2hsaWdodFBvbGljeToiZGVzY2VuZGFudCIsbm9kZUNsaWNrOiJyb290VG9Ob2RlIixyZW5kZXJMYWJlbEZvclplcm9EYXRhOiExLGxhYmVsOntyb3RhdGU6InJhZGlhbCIsc2hvdzohMCxvcGFjaXR5OjEsYWxpZ246ImNlbnRlciIscG9zaXRpb246Imluc2lkZSIsZGlzdGFuY2U6NSxzaWxlbnQ6ITAsZW1waGFzaXM6e319LGl0ZW1TdHlsZTp7Ym9yZGVyV2lkdGg6MSxib3JkZXJDb2xvcjoid2hpdGUiLGJvcmRlclR5cGU6InNvbGlkIixzaGFkb3dCbHVyOjAsc2hhZG93Q29sb3I6InJnYmEoMCwgMCwgMCwgMC4yKSIsc2hhZG93T2Zmc2V0WDowLHNoYWRvd09mZnNldFk6MCxvcGFjaXR5OjEsZW1waGFzaXM6e30saGlnaGxpZ2h0OntvcGFjaXR5OjF9LGRvd25wbGF5OntvcGFjaXR5Oi45fX0sYW5pbWF0aW9uVHlwZToiZXhwYW5zaW9uIixhbmltYXRpb25EdXJhdGlvbjoxZTMsYW5pbWF0aW9uRHVyYXRpb25VcGRhdGU6NTAwLGFuaW1hdGlvbkVhc2luZzoiY3ViaWNPdXQiLGRhdGE6W10sbGV2ZWxzOltdLHNvcnQ6ImRlc2MifSxnZXRWaWV3Um9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aWV3Um9vdH0scmVzZXRWaWV3Um9vdDpmdW5jdGlvbih0KXt0P3RoaXMuX3ZpZXdSb290PXQ6dD10aGlzLl92aWV3Um9vdDt2YXIgZT10aGlzLmdldFJhd0RhdGEoKS50cmVlLnJvb3Q7dCYmKHQ9PT1lfHxlLmNvbnRhaW5zKHQpKXx8KHRoaXMuX3ZpZXdSb290PWUpfX0pO3ZhciBQST0ibm9uZSIsTkk9ImFuY2VzdG9yIixPST0ic2VsZiIsRUk9Mix6ST00O2Z1bmN0aW9uIFJJKHQsZSxpKXtJaS5jYWxsKHRoaXMpO3ZhciBuPW5ldyBVcih7ejI6RUl9KTtuLnNlcmllc0luZGV4PWUuc2VyaWVzSW5kZXg7dmFyIG89bmV3IEZyKHt6Mjp6SSxzaWxlbnQ6dC5nZXRNb2RlbCgibGFiZWwiKS5nZXQoInNpbGVudCIpfSk7ZnVuY3Rpb24gYSgpe28uaWdub3JlPW8uaG92ZXJJZ25vcmV9ZnVuY3Rpb24gcigpe28uaWdub3JlPW8ubm9ybWFsSWdub3JlfXRoaXMuYWRkKG4pLHRoaXMuYWRkKG8pLHRoaXMudXBkYXRlRGF0YSghMCx0LCJub3JtYWwiLGUsaSksdGhpcy5vbigiZW1waGFzaXMiLGEpLm9uKCJub3JtYWwiLHIpLm9uKCJtb3VzZW92ZXIiLGEpLm9uKCJtb3VzZW91dCIscil9dmFyIEJJPVJJLnByb3RvdHlwZTtCSS51cGRhdGVEYXRhPWZ1bmN0aW9uKHQsZSxpLG4sbyl7KHRoaXMubm9kZT1lKS5waWVjZT10aGlzLG49bnx8dGhpcy5fc2VyaWVzTW9kZWwsbz1vfHx0aGlzLl9lY01vZGVsO3ZhciBhPXRoaXMuY2hpbGRBdCgwKTthLmRhdGFJbmRleD1lLmRhdGFJbmRleDt2YXIgcj1lLmdldE1vZGVsKCkscz1lLmdldExheW91dCgpLGw9TCh7fSxzKTtsLmxhYmVsPW51bGw7dmFyIHU9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXQuZ2V0VmlzdWFsKCJjb2xvciIpLG89dC5nZXRWaXN1YWwoInZpc3VhbE1ldGEiKTtvJiYwIT09by5sZW5ndGh8fChuPW51bGwpO3ZhciBhPXQuZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLmdldCgiY29sb3IiKTt7aWYoYSlyZXR1cm4gYTtpZihuKXJldHVybiBuO2lmKDA9PT10LmRlcHRoKXJldHVybiBpLm9wdGlvbi5jb2xvclswXTt2YXIgcj1pLm9wdGlvbi5jb2xvci5sZW5ndGg7YT1pLm9wdGlvbi5jb2xvcltmdW5jdGlvbih0KXt2YXIgZT10O2Zvcig7MTxlLmRlcHRoOyllPWUucGFyZW50Tm9kZTtyZXR1cm4gXyh0LmdldEFuY2VzdG9ycygpWzBdLmNoaWxkcmVuLGUpfSh0KSVyXX1yZXR1cm4gYX0oZSwwLG8pOyFmdW5jdGlvbih0LGUsaSl7ZS5nZXREYXRhKCkuc2V0SXRlbVZpc3VhbCh0LmRhdGFJbmRleCwiY29sb3IiLGkpfShlLG4sdSk7dmFyIGgsYz1yLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKTsibm9ybWFsIj09PWk/aD1jOmg9bShyLmdldE1vZGVsKGkrIi5pdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKSxjKTtoPUMoe2xpbmVKb2luOiJiZXZlbCIsZmlsbDpoLmZpbGx8fHV9LGgpLHQ/KGEuc2V0U2hhcGUobCksYS5zaGFwZS5yPXMucjAsc2woYSx7c2hhcGU6e3I6cy5yfX0sbixlLmRhdGFJbmRleCksYS51c2VTdHlsZShoKSk6Im9iamVjdCI9PXR5cGVvZiBoLmZpbGwmJmguZmlsbC50eXBlfHwib2JqZWN0Ij09dHlwZW9mIGEuc3R5bGUuZmlsbCYmYS5zdHlsZS5maWxsLnR5cGU/KHNsKGEse3NoYXBlOmx9LG4pLGEudXNlU3R5bGUoaCkpOnNsKGEse3NoYXBlOmwsc3R5bGU6aH0sbiksdGhpcy5fdXBkYXRlTGFiZWwobix1LGkpO3ZhciBkPXIuZ2V0U2hhbGxvdygiY3Vyc29yIik7aWYoZCYmYS5hdHRyKCJjdXJzb3IiLGQpLHQpe3ZhciBmPW4uZ2V0U2hhbGxvdygiaGlnaGxpZ2h0UG9saWN5Iik7dGhpcy5faW5pdEV2ZW50cyhhLGUsbixmKX10aGlzLl9zZXJpZXNNb2RlbD1ufHx0aGlzLl9zZXJpZXNNb2RlbCx0aGlzLl9lY01vZGVsPW98fHRoaXMuX2VjTW9kZWx9LEJJLm9uRW1waGFzaXM9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpczt0aGlzLm5vZGUuaG9zdFRyZWUucm9vdC5lYWNoTm9kZShmdW5jdGlvbih0KXt0LnBpZWNlJiYoaS5ub2RlPT09dD90LnBpZWNlLnVwZGF0ZURhdGEoITEsdCwiZW1waGFzaXMiKTohZnVuY3Rpb24odCxlLGkpe3JldHVybiBpIT09UEkmJihpPT09T0k/dD09PWU6aT09PU5JP3Q9PT1lfHx0LmlzQW5jZXN0b3JPZihlKTp0PT09ZXx8dC5pc0Rlc2NlbmRhbnRPZihlKSl9KHQsaS5ub2RlLGUpP2UhPT1QSSYmdC5waWVjZS5jaGlsZEF0KDApLnRyaWdnZXIoImRvd25wbGF5Iik6dC5waWVjZS5jaGlsZEF0KDApLnRyaWdnZXIoImhpZ2hsaWdodCIpKX0pfSxCSS5vbk5vcm1hbD1mdW5jdGlvbigpe3RoaXMubm9kZS5ob3N0VHJlZS5yb290LmVhY2hOb2RlKGZ1bmN0aW9uKHQpe3QucGllY2UmJnQucGllY2UudXBkYXRlRGF0YSghMSx0LCJub3JtYWwiKX0pfSxCSS5vbkhpZ2hsaWdodD1mdW5jdGlvbigpe3RoaXMudXBkYXRlRGF0YSghMSx0aGlzLm5vZGUsImhpZ2hsaWdodCIpfSxCSS5vbkRvd25wbGF5PWZ1bmN0aW9uKCl7dGhpcy51cGRhdGVEYXRhKCExLHRoaXMubm9kZSwiZG93bnBsYXkiKX0sQkkuX3VwZGF0ZUxhYmVsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLm5vZGUuZ2V0TW9kZWwoKSxvPW4uZ2V0TW9kZWwoImxhYmVsIiksYT0ibm9ybWFsIj09PWl8fCJlbXBoYXNpcyI9PT1pP286bi5nZXRNb2RlbChpKyIubGFiZWwiKSxyPW4uZ2V0TW9kZWwoImVtcGhhc2lzLmxhYmVsIikscz1XKHQuZ2V0Rm9ybWF0dGVkTGFiZWwodGhpcy5ub2RlLmRhdGFJbmRleCxpLG51bGwsbnVsbCwibGFiZWwiKSx0aGlzLm5vZGUubmFtZSk7ITE9PT1TKCJzaG93IikmJihzPSIiKTt2YXIgbD10aGlzLm5vZGUuZ2V0TGF5b3V0KCksdT1hLmdldCgibWluQW5nbGUiKTtudWxsPT11JiYodT1vLmdldCgibWluQW5nbGUiKSksdT11LzE4MCpNYXRoLlBJO3ZhciBoPWwuZW5kQW5nbGUtbC5zdGFydEFuZ2xlO251bGwhPXUmJk1hdGguYWJzKGgpPHUmJihzPSIiKTt2YXIgYz10aGlzLmNoaWxkQXQoMSk7JHMoYy5zdHlsZSxjLmhvdmVyU3R5bGV8fHt9LG8scix7ZGVmYXVsdFRleHQ6YS5nZXRTaGFsbG93KCJzaG93Iik/czpudWxsLGF1dG9Db2xvcjplLHVzZUluc2lkZVN0eWxlOiEwfSk7dmFyIGQsZj0obC5zdGFydEFuZ2xlK2wuZW5kQW5nbGUpLzIscD1NYXRoLmNvcyhmKSxnPU1hdGguc2luKGYpLG09UygicG9zaXRpb24iKSx2PVMoImRpc3RhbmNlIil8fDAseT1TKCJhbGlnbiIpOyJvdXRzaWRlIj09PW0/KGQ9bC5yK3YseT1mPk1hdGguUEkvMj8icmlnaHQiOiJsZWZ0Iik6eSYmImNlbnRlciIhPT15PyJsZWZ0Ij09PXk/KGQ9bC5yMCt2LGY+TWF0aC5QSS8yJiYoeT0icmlnaHQiKSk6InJpZ2h0Ij09PXkmJihkPWwuci12LGY+TWF0aC5QSS8yJiYoeT0ibGVmdCIpKTooZD0obC5yK2wucjApLzIseT0iY2VudGVyIiksYy5hdHRyKCJzdHlsZSIse3RleHQ6cyx0ZXh0QWxpZ246eSx0ZXh0VmVydGljYWxBbGlnbjpTKCJ2ZXJ0aWNhbEFsaWduIil8fCJtaWRkbGUiLG9wYWNpdHk6Uygib3BhY2l0eSIpfSk7dmFyIHg9ZCpwK2wuY3gsXz1kKmcrbC5jeTtjLmF0dHIoInBvc2l0aW9uIixbeCxfXSk7dmFyIHc9Uygicm90YXRlIiksYj0wO2Z1bmN0aW9uIFModCl7dmFyIGU9YS5nZXQodCk7cmV0dXJuIG51bGw9PWU/by5nZXQodCk6ZX0icmFkaWFsIj09PXc/KGI9LWYpPC1NYXRoLlBJLzImJihiKz1NYXRoLlBJKToidGFuZ2VudGlhbCI9PT13PyhiPU1hdGguUEkvMi1mKT5NYXRoLlBJLzI/Yi09TWF0aC5QSTpiPC1NYXRoLlBJLzImJihiKz1NYXRoLlBJKToibnVtYmVyIj09dHlwZW9mIHcmJihiPXcqTWF0aC5QSS8xODApLGMuYXR0cigicm90YXRpb24iLGIpfSxCSS5faW5pdEV2ZW50cz1mdW5jdGlvbih0LGUsaSxuKXt0Lm9mZigibW91c2VvdmVyIikub2ZmKCJtb3VzZW91dCIpLm9mZigiZW1waGFzaXMiKS5vZmYoIm5vcm1hbCIpO2Z1bmN0aW9uIG8oKXtyLm9uRW1waGFzaXMobil9ZnVuY3Rpb24gYSgpe3Iub25Ob3JtYWwoKX12YXIgcj10aGlzO2kuaXNBbmltYXRpb25FbmFibGVkKCkmJnQub24oIm1vdXNlb3ZlciIsbykub24oIm1vdXNlb3V0IixhKS5vbigiZW1waGFzaXMiLG8pLm9uKCJub3JtYWwiLGEpLm9uKCJkb3ducGxheSIsZnVuY3Rpb24oKXtyLm9uRG93bnBsYXkoKX0pLm9uKCJoaWdobGlnaHQiLGZ1bmN0aW9uKCl7ci5vbkhpZ2hsaWdodCgpfSl9LHcoUkksSWkpO2djLmV4dGVuZCh7dHlwZToic3VuYnVyc3QiLGluaXQ6ZnVuY3Rpb24oKXt9LHJlbmRlcjpmdW5jdGlvbihvLGEsdCxlKXt2YXIgbj10aGlzO3RoaXMuc2VyaWVzTW9kZWw9byx0aGlzLmFwaT10LHRoaXMuZWNNb2RlbD1hO3ZhciByPW8uZ2V0RGF0YSgpLHM9ci50cmVlLnJvb3QsaT1vLmdldFZpZXdSb290KCksbD10aGlzLmdyb3VwLHU9by5nZXQoInJlbmRlckxhYmVsRm9yWmVyb0RhdGEiKSxoPVtdO2kuZWFjaE5vZGUoZnVuY3Rpb24odCl7aC5wdXNoKHQpfSk7dmFyIGM9dGhpcy5fb2xkQ2hpbGRyZW58fFtdO2lmKGZ1bmN0aW9uKGksbil7aWYoMD09PWkubGVuZ3RoJiYwPT09bi5sZW5ndGgpcmV0dXJuO2Z1bmN0aW9uIHQodCl7cmV0dXJuIHQuZ2V0SWQoKX1mdW5jdGlvbiBlKHQsZSl7IWZ1bmN0aW9uKHQsZSl7dXx8IXR8fHQuZ2V0VmFsdWUoKXx8KHQ9bnVsbCk7aWYodCE9PXMmJmUhPT1zKWlmKGUmJmUucGllY2UpdD8oZS5waWVjZS51cGRhdGVEYXRhKCExLHQsIm5vcm1hbCIsbyxhKSxyLnNldEl0ZW1HcmFwaGljRWwodC5kYXRhSW5kZXgsZS5waWVjZSkpOmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybjt0LnBpZWNlJiYobC5yZW1vdmUodC5waWVjZSksdC5waWVjZT1udWxsKX0oZSk7ZWxzZSBpZih0KXt2YXIgaT1uZXcgUkkodCxvLGEpO2wuYWRkKGkpLHIuc2V0SXRlbUdyYXBoaWNFbCh0LmRhdGFJbmRleCxpKX19KG51bGw9PXQ/bnVsbDppW3RdLG51bGw9PWU/bnVsbDpuW2VdKX1uZXcgVGYobixpLHQsdCkuYWRkKGUpLnVwZGF0ZShlKS5yZW1vdmUoVChlLG51bGwpKS5leGVjdXRlKCl9KGgsYyksZnVuY3Rpb24odCxlKXtpZigwPGUuZGVwdGgpe24udmlydHVhbFBpZWNlP24udmlydHVhbFBpZWNlLnVwZGF0ZURhdGEoITEsdCwibm9ybWFsIixvLGEpOihuLnZpcnR1YWxQaWVjZT1uZXcgUkkodCxvLGEpLGwuYWRkKG4udmlydHVhbFBpZWNlKSksZS5waWVjZS5fb25jbGlja0V2ZW50JiZlLnBpZWNlLm9mZigiY2xpY2siLGUucGllY2UuX29uY2xpY2tFdmVudCk7dmFyIGk9ZnVuY3Rpb24odCl7bi5fcm9vdFRvTm9kZShlLnBhcmVudE5vZGUpfTtlLnBpZWNlLl9vbmNsaWNrRXZlbnQ9aSxuLnZpcnR1YWxQaWVjZS5vbigiY2xpY2siLGkpfWVsc2Ugbi52aXJ0dWFsUGllY2UmJihsLnJlbW92ZShuLnZpcnR1YWxQaWVjZSksbi52aXJ0dWFsUGllY2U9bnVsbCl9KHMsaSksZSYmZS5oaWdobGlnaHQmJmUuaGlnaGxpZ2h0LnBpZWNlKXt2YXIgZD1vLmdldFNoYWxsb3coImhpZ2hsaWdodFBvbGljeSIpO2UuaGlnaGxpZ2h0LnBpZWNlLm9uRW1waGFzaXMoZCl9ZWxzZSBpZihlJiZlLnVuaGlnaGxpZ2h0KXt2YXIgZj10aGlzLnZpcnR1YWxQaWVjZTshZiYmcy5jaGlsZHJlbi5sZW5ndGgmJihmPXMuY2hpbGRyZW5bMF0ucGllY2UpLGYmJmYub25Ob3JtYWwoKX10aGlzLl9pbml0RXZlbnRzKCksdGhpcy5fb2xkQ2hpbGRyZW49aH0sZGlzcG9zZTpmdW5jdGlvbigpe30sX2luaXRFdmVudHM6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGEpe3ZhciByPSExO3Muc2VyaWVzTW9kZWwuZ2V0Vmlld1Jvb3QoKS5lYWNoTm9kZShmdW5jdGlvbih0KXtpZighciYmdC5waWVjZSYmdC5waWVjZS5jaGlsZEF0KDApPT09YS50YXJnZXQpe3ZhciBlPXQuZ2V0TW9kZWwoKS5nZXQoIm5vZGVDbGljayIpO2lmKCJyb290VG9Ob2RlIj09PWUpcy5fcm9vdFRvTm9kZSh0KTtlbHNlIGlmKCJsaW5rIj09PWUpe3ZhciBpPXQuZ2V0TW9kZWwoKSxuPWkuZ2V0KCJsaW5rIik7aWYobil7dmFyIG89aS5nZXQoInRhcmdldCIsITApfHwiX2JsYW5rIjt3aW5kb3cub3BlbihuLG8pfX1yPSEwfX0pfXZhciBzPXRoaXM7dGhpcy5ncm91cC5fb25jbGlja0V2ZW50JiZ0aGlzLmdyb3VwLm9mZigiY2xpY2siLHRoaXMuZ3JvdXAuX29uY2xpY2tFdmVudCksdGhpcy5ncm91cC5vbigiY2xpY2siLHQpLHRoaXMuZ3JvdXAuX29uY2xpY2tFdmVudD10fSxfcm9vdFRvTm9kZTpmdW5jdGlvbih0KXt0IT09dGhpcy5zZXJpZXNNb2RlbC5nZXRWaWV3Um9vdCgpJiZ0aGlzLmFwaS5kaXNwYXRjaEFjdGlvbih7dHlwZToic3VuYnVyc3RSb290VG9Ob2RlIixmcm9tOnRoaXMudWlkLHNlcmllc0lkOnRoaXMuc2VyaWVzTW9kZWwuaWQsdGFyZ2V0Tm9kZTp0fSl9LGNvbnRhaW5Qb2ludDpmdW5jdGlvbih0LGUpe3ZhciBpPWUuZ2V0RGF0YSgpLmdldEl0ZW1MYXlvdXQoMCk7aWYoaSl7dmFyIG49dFswXS1pLmN4LG89dFsxXS1pLmN5LGE9TWF0aC5zcXJ0KG4qbitvKm8pO3JldHVybiBhPD1pLnImJmE+PWkucjB9fX0pO3ZhciBWST0ic3VuYnVyc3RSb290VG9Ob2RlIjtnZih7dHlwZTpWSSx1cGRhdGU6InVwZGF0ZVZpZXcifSxmdW5jdGlvbihvLHQpe3QuZWFjaENvbXBvbmVudCh7bWFpblR5cGU6InNlcmllcyIsc3ViVHlwZToic3VuYnVyc3QiLHF1ZXJ5Om99LGZ1bmN0aW9uKHQsZSl7dmFyIGk9T3gobyxbVkldLHQpO2lmKGkpe3ZhciBuPXQuZ2V0Vmlld1Jvb3QoKTtuJiYoby5kaXJlY3Rpb249engobixpLm5vZGUpPyJyb2xsVXAiOiJkcmlsbERvd24iKSx0LnJlc2V0Vmlld1Jvb3QoaS5ub2RlKX19KX0pO3ZhciBHST0ic3VuYnVyc3RIaWdobGlnaHQiO2dmKHt0eXBlOkdJLHVwZGF0ZToidXBkYXRlVmlldyJ9LGZ1bmN0aW9uKG4sdCl7dC5lYWNoQ29tcG9uZW50KHttYWluVHlwZToic2VyaWVzIixzdWJUeXBlOiJzdW5idXJzdCIscXVlcnk6bn0sZnVuY3Rpb24odCxlKXt2YXIgaT1PeChuLFtHSV0sdCk7aSYmKG4uaGlnaGxpZ2h0PWkubm9kZSl9KX0pO2dmKHt0eXBlOiJzdW5idXJzdFVuaGlnaGxpZ2h0Iix1cGRhdGU6InVwZGF0ZVZpZXcifSxmdW5jdGlvbihpLHQpe3QuZWFjaENvbXBvbmVudCh7bWFpblR5cGU6InNlcmllcyIsc3ViVHlwZToic3VuYnVyc3QiLHF1ZXJ5Oml9LGZ1bmN0aW9uKHQsZSl7aS51bmhpZ2hsaWdodD0hMH0pfSk7dmFyIEZJPU1hdGguUEkvMTgwO2Z1bmN0aW9uIFdJKHQsZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpcmV0dXJuIHQuc29ydChlKTt2YXIgbj0iYXNjIj09PWU7cmV0dXJuIHQuc29ydChmdW5jdGlvbih0LGUpe3ZhciBpPSh0LmdldFZhbHVlKCktZS5nZXRWYWx1ZSgpKSoobj8xOi0xKTtyZXR1cm4gMD09aT8odC5kYXRhSW5kZXgtZS5kYXRhSW5kZXgpKihuPy0xOjEpOml9KX1mdW5jdGlvbiBISShhLHIpe3JldHVybiByPXJ8fFswLDBdLE4oWyJ4IiwieSJdLGZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRBeGlzKHQpLG49cltlXSxvPWFbZV0vMjtyZXR1cm4iY2F0ZWdvcnkiPT09aS50eXBlP2kuZ2V0QmFuZFdpZHRoKCk6TWF0aC5hYnMoaS5kYXRhVG9Db29yZChuLW8pLWkuZGF0YVRvQ29vcmQobitvKSl9LHRoaXMpfXlmKFQoWXYsInN1bmJ1cnN0IikpLHZmKFQoZnVuY3Rpb24odCxlLEMsaSl7ZS5lYWNoU2VyaWVzQnlUeXBlKHQsZnVuY3Rpb24odCl7dmFyIGU9dC5nZXQoImNlbnRlciIpLGk9dC5nZXQoInJhZGl1cyIpO2soaSl8fChpPVswLGldKSxrKGUpfHwoZT1bZSxlXSk7dmFyIG49Qy5nZXRXaWR0aCgpLG89Qy5nZXRIZWlnaHQoKSxoPU1hdGgubWluKG4sbyksYz1QbChlWzBdLG4pLGQ9UGwoZVsxXSxvKSxmPVBsKGlbMF0saC8yKSxhPVBsKGlbMV0saC8yKSxyPS10LmdldCgic3RhcnRBbmdsZSIpKkZJLHA9dC5nZXQoIm1pbkFuZ2xlIikqRkksZz10LmdldERhdGEoKS50cmVlLnJvb3Qscz10LmdldFZpZXdSb290KCksbT1zLmRlcHRoLGw9dC5nZXQoInNvcnQiKTtudWxsIT1sJiYhZnVuY3Rpb24gZSh0LGkpe3ZhciBuPXQuY2hpbGRyZW58fFtdO3QuY2hpbGRyZW49V0kobixpKTtuLmxlbmd0aCYmRSh0LmNoaWxkcmVuLGZ1bmN0aW9uKHQpe2UodCxpKX0pfShzLGwpO3ZhciB1PTA7RShzLmNoaWxkcmVuLGZ1bmN0aW9uKHQpe2lzTmFOKHQuZ2V0VmFsdWUoKSl8fHUrK30pO3ZhciB2PXMuZ2V0VmFsdWUoKSx5PU1hdGguUEkvKHZ8fHUpKjIseD0wPHMuZGVwdGgsXz1zLmhlaWdodC0oeD8tMToxKSx3PShhLWYpLyhffHwxKSxiPXQuZ2V0KCJjbG9ja3dpc2UiKSxTPXQuZ2V0KCJzdGlsbFNob3daZXJvU3VtIiksTT1iPzE6LTEsST1mdW5jdGlvbih0LGUpe2lmKHQpe3ZhciBpPWU7aWYodCE9PWcpe3ZhciBuPXQuZ2V0VmFsdWUoKSxvPTA9PT12JiZTP3k6bip5O288cCYmKG89cCksaT1lK00qbzt2YXIgYT10LmRlcHRoLW0tKHg/LTE6MSkscj1mK3cqYSxzPWYrdyooMSthKSxsPXQuZ2V0TW9kZWwoKTtudWxsIT1sLmdldCgicjAiKSYmKHI9UGwobC5nZXQoInIwIiksaC8yKSksbnVsbCE9bC5nZXQoInIiKSYmKHM9UGwobC5nZXQoInIiKSxoLzIpKSx0LnNldExheW91dCh7YW5nbGU6byxzdGFydEFuZ2xlOmUsZW5kQW5nbGU6aSxjbG9ja3dpc2U6YixjeDpjLGN5OmQscjA6cixyOnN9KX1pZih0LmNoaWxkcmVuJiZ0LmNoaWxkcmVuLmxlbmd0aCl7dmFyIHU9MDtFKHQuY2hpbGRyZW4sZnVuY3Rpb24odCl7dSs9SSh0LGUrdSl9KX1yZXR1cm4gaS1lfX07aWYoeCl7dmFyIFQ9ZixBPWYrdyxEPTIqTWF0aC5QSTtnLnNldExheW91dCh7YW5nbGU6RCxzdGFydEFuZ2xlOnIsZW5kQW5nbGU6citELGNsb2Nrd2lzZTpiLGN4OmMsY3k6ZCxyMDpULHI6QX0pfUkocyxyKX0pfSwic3VuYnVyc3QiKSkscGYoVCh0eSwic3VuYnVyc3QiKSk7ZnVuY3Rpb24gWkkoYSxyKXtyZXR1cm4gcj1yfHxbMCwwXSxOKFswLDFdLGZ1bmN0aW9uKHQpe3ZhciBlPXJbdF0saT1hW3RdLzIsbj1bXSxvPVtdO3JldHVybiBuW3RdPWUtaSxvW3RdPWUraSxuWzEtdF09b1sxLXRdPXJbMS10XSxNYXRoLmFicyh0aGlzLmRhdGFUb1BvaW50KG4pW3RdLXRoaXMuZGF0YVRvUG9pbnQobylbdF0pfSx0aGlzKX1mdW5jdGlvbiBVSSh0LGUpe3ZhciBpPXRoaXMuZ2V0QXhpcygpLG49ZSBpbnN0YW5jZW9mIEFycmF5P2VbMF06ZSxvPSh0IGluc3RhbmNlb2YgQXJyYXk/dFswXTp0KS8yO3JldHVybiJjYXRlZ29yeSI9PT1pLnR5cGU/aS5nZXRCYW5kV2lkdGgoKTpNYXRoLmFicyhpLmRhdGFUb0Nvb3JkKG4tbyktaS5kYXRhVG9Db29yZChuK28pKX1mdW5jdGlvbiBYSShzLGwpe3JldHVybiBOKFsiUmFkaXVzIiwiQW5nbGUiXSxmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXNbImdldCIrdCsiQXhpcyJdKCksbj1sW2VdLG89c1tlXS8yLGE9ImRhdGFUbyIrdCxyPSJjYXRlZ29yeSI9PT1pLnR5cGU/aS5nZXRCYW5kV2lkdGgoKTpNYXRoLmFicyhpW2FdKG4tbyktaVthXShuK28pKTtyZXR1cm4iQW5nbGUiPT09dCYmKHI9cipNYXRoLlBJLzE4MCkscn0sdGhpcyl9dmFyIFlJPXhzLGpJPVsiaXRlbVN0eWxlIl0scUk9WyJlbXBoYXNpcyIsIml0ZW1TdHlsZSJdLEtJPVsibGFiZWwiXSwkST1bImVtcGhhc2lzIiwibGFiZWwiXSxKST0iZVwwXDAiLFFJPXtjYXJ0ZXNpYW4yZDpmdW5jdGlvbihlKXt2YXIgdD1lLmdyaWQuZ2V0UmVjdCgpO3JldHVybntjb29yZFN5czp7dHlwZToiY2FydGVzaWFuMmQiLHg6dC54LHk6dC55LHdpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0fSxhcGk6e2Nvb3JkOmZ1bmN0aW9uKHQpe3JldHVybiBlLmRhdGFUb1BvaW50KHQpfSxzaXplOkEoSEksZSl9fX0sZ2VvOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0Qm91bmRpbmdSZWN0KCk7cmV0dXJue2Nvb3JkU3lzOnt0eXBlOiJnZW8iLHg6dC54LHk6dC55LHdpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0LHpvb206ZS5nZXRab29tKCl9LGFwaTp7Y29vcmQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUuZGF0YVRvUG9pbnQodCl9LHNpemU6QShaSSxlKX19fSxzaW5nbGVBeGlzOmZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0UmVjdCgpO3JldHVybntjb29yZFN5czp7dHlwZToic2luZ2xlQXhpcyIseDp0LngseTp0Lnksd2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9LGFwaTp7Y29vcmQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUuZGF0YVRvUG9pbnQodCl9LHNpemU6QShVSSxlKX19fSxwb2xhcjpmdW5jdGlvbihvKXt2YXIgYT1vLmdldFJhZGl1c0F4aXMoKSxyPW8uZ2V0QW5nbGVBeGlzKCksdD1hLmdldEV4dGVudCgpO3JldHVybiB0WzBdPnRbMV0mJnQucmV2ZXJzZSgpLHtjb29yZFN5czp7dHlwZToicG9sYXIiLGN4Om8uY3gsY3k6by5jeSxyOnRbMV0scjA6dFswXX0sYXBpOntjb29yZDpBKGZ1bmN0aW9uKHQpe3ZhciBlPWEuZGF0YVRvUmFkaXVzKHRbMF0pLGk9ci5kYXRhVG9BbmdsZSh0WzFdKSxuPW8uY29vcmRUb1BvaW50KFtlLGldKTtyZXR1cm4gbi5wdXNoKGUsaSpNYXRoLlBJLzE4MCksbn0pLHNpemU6QShYSSxvKX19fSxjYWxlbmRhcjpmdW5jdGlvbihpKXt2YXIgdD1pLmdldFJlY3QoKSxlPWkuZ2V0UmFuZ2VJbmZvKCk7cmV0dXJue2Nvb3JkU3lzOnt0eXBlOiJjYWxlbmRhciIseDp0LngseTp0Lnksd2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHQsY2VsbFdpZHRoOmkuZ2V0Q2VsbFdpZHRoKCksY2VsbEhlaWdodDppLmdldENlbGxIZWlnaHQoKSxyYW5nZUluZm86e3N0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kLHdlZWtzOmUud2Vla3MsZGF5Q291bnQ6ZS5hbGxEYXl9fSxhcGk6e2Nvb3JkOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkuZGF0YVRvUG9pbnQodCxlKX19fX19O2Z1bmN0aW9uIHRUKHQsZSxpLG4sbyl7bnVsbD09aVt0XXx8b3x8KGVbdF09aVt0XSxpW3RdPW5bdF0pfWZ1bmN0aW9uIGVUKGEscixlLHQpe3ZhciBpPWEuZ2V0KCJyZW5kZXJJdGVtIiksbj1hLmNvb3JkaW5hdGVTeXN0ZW0sbz17fTtuJiYobz1uLnByZXBhcmVDdXN0b21zP24ucHJlcGFyZUN1c3RvbXMoKTpRSVtuLnR5cGVdKG4pKTt2YXIgcyxsLHUsaCxjLGQ9Qyh7Z2V0V2lkdGg6dC5nZXRXaWR0aCxnZXRIZWlnaHQ6dC5nZXRIZWlnaHQsZ2V0WnI6dC5nZXRacixnZXREZXZpY2VQaXhlbFJhdGlvOnQuZ2V0RGV2aWNlUGl4ZWxSYXRpbyx2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT1lJiYoZT1zKSxyLmdldChyLmdldERpbWVuc2lvbih0fHwwKSxlKX0sc3R5bGU6ZnVuY3Rpb24odCxlKXtudWxsPT1lJiYoZT1zKSxnKGUpO3ZhciBpPWwuZ2V0TW9kZWwoakkpLmdldEl0ZW1TdHlsZSgpO251bGwhPWMmJihpLmZpbGw9Yyk7dmFyIG49ci5nZXRJdGVtVmlzdWFsKGUsIm9wYWNpdHkiKTtudWxsIT1uJiYoaS5vcGFjaXR5PW4pO3ZhciBvPXQ/clQodCx1KTp1O3JldHVybiBRcyhpLG8sbnVsbCx7YXV0b0NvbG9yOmMsaXNSZWN0VGV4dDohMH0pLGkudGV4dD1vLmdldFNoYWxsb3coInNob3ciKT9IKGEuZ2V0Rm9ybWF0dGVkTGFiZWwoZSwibm9ybWFsIiksR2cocixlKSk6bnVsbCx0JiZzVChpLHQpLGl9LHN0eWxlRW1waGFzaXM6ZnVuY3Rpb24odCxlKXtudWxsPT1lJiYoZT1zKSxnKGUpO3ZhciBpPWwuZ2V0TW9kZWwocUkpLmdldEl0ZW1TdHlsZSgpLG49dD9yVCh0LGgpOmg7cmV0dXJuIFFzKGksbixudWxsLHtpc1JlY3RUZXh0OiEwfSwhMCksaS50ZXh0PW4uZ2V0U2hhbGxvdygic2hvdyIpP1ooYS5nZXRGb3JtYXR0ZWRMYWJlbChlLCJlbXBoYXNpcyIpLGEuZ2V0Rm9ybWF0dGVkTGFiZWwoZSwibm9ybWFsIiksR2cocixlKSk6bnVsbCx0JiZzVChpLHQpLGl9LHZpc3VhbDpmdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT1lJiYoZT1zKSxyLmdldEl0ZW1WaXN1YWwoZSx0KX0sYmFyTGF5b3V0OmZ1bmN0aW9uKHQpe2lmKG4uZ2V0QmFzZUF4aXMpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT1bXSxpPXQuYXhpcztpZigiY2F0ZWdvcnkiPT09aS50eXBlKXtmb3IodmFyIG49aS5nZXRCYW5kV2lkdGgoKSxvPTA7bzx0LmNvdW50O28rKyllLnB1c2goQyh7YmFuZFdpZHRoOm4sYXhpc0tleToiYXhpczAiLHN0YWNrSWQ6TXArb30sdCkpO3ZhciBhPUxwKGUpLHI9W107Zm9yKG89MDtvPHQuY291bnQ7bysrKXt2YXIgcz1hLmF4aXMwW01wK29dO3Mub2Zmc2V0Q2VudGVyPXMub2Zmc2V0K3Mud2lkdGgvMixyLnB1c2gocyl9cmV0dXJuIHJ9fShDKHtheGlzOm4uZ2V0QmFzZUF4aXMoKX0sdCkpfX0sY3VycmVudFNlcmllc0luZGljZXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRDdXJyZW50U2VyaWVzSW5kaWNlcygpfSxmb250OmZ1bmN0aW9uKHQpe3JldHVybiBhbCh0LGUpfX0sby5hcGl8fHt9KSxmPXtjb250ZXh0Ont9LHNlcmllc0lkOmEuaWQsc2VyaWVzTmFtZTphLm5hbWUsc2VyaWVzSW5kZXg6YS5zZXJpZXNJbmRleCxjb29yZFN5czpvLmNvb3JkU3lzLGRhdGFJbnNpZGVMZW5ndGg6ci5jb3VudCgpLGVuY29kZTpmdW5jdGlvbihvKXt2YXIgYT17fTtyZXR1cm4gRShvLmRpbWVuc2lvbnMsZnVuY3Rpb24odCxlKXt2YXIgaT1vLmdldERpbWVuc2lvbkluZm8odCk7aWYoIWkuaXNFeHRyYUNvb3JkKXt2YXIgbj1pLmNvb3JkRGltOyhhW25dPWFbbl18fFtdKVtpLmNvb3JkRGltSW5kZXhdPWV9fSksYX0oYS5nZXREYXRhKCkpfSxwPSEwO3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiBzPXQscD0hMCxpJiZpKEMoe2RhdGFJbmRleEluc2lkZTp0LGRhdGFJbmRleDpyLmdldFJhd0luZGV4KHQpLGFjdGlvblR5cGU6ZT9lLnR5cGU6bnVsbH0sZiksZCl9O2Z1bmN0aW9uIGcodCl7bnVsbD09dCYmKHQ9cykscCYmKGw9ci5nZXRJdGVtTW9kZWwodCksdT1sLmdldE1vZGVsKEtJKSxoPWwuZ2V0TW9kZWwoJEkpLGM9ci5nZXRJdGVtVmlzdWFsKHQsImNvbG9yIikscD0hMSl9fWZ1bmN0aW9uIGlUKHQsZSxpLG4sbyxhKXtyZXR1cm4odD1uVCh0LGUsaSxuLG8sYSwhMCkpJiZhLnNldEl0ZW1HcmFwaGljRWwoZSx0KSx0fWZ1bmN0aW9uIG5UKHQsZSxpLG4sbyxhLHIpe3ZhciBzPSFpLGw9KGk9aXx8e30pLnR5cGUsdT1pLnNoYXBlLGg9aS5zdHlsZTtpZih0JiYoc3x8bnVsbCE9bCYmbCE9PXQuX19jdXN0b21HcmFwaGljVHlwZXx8InBhdGgiPT09bCYmZnVuY3Rpb24odCl7cmV0dXJuIHQmJih0Lmhhc093blByb3BlcnR5KCJwYXRoRGF0YSIpfHx0Lmhhc093blByb3BlcnR5KCJkIikpfSh1KSYmdVQodSkhPT10Ll9fY3VzdG9tUGF0aERhdGF8fCJpbWFnZSI9PT1sJiZoVChoLCJpbWFnZSIpJiZoLmltYWdlIT09dC5fX2N1c3RvbUltYWdlUGF0aHx8InRleHQiPT09bCYmaFQodSwidGV4dCIpJiZoLnRleHQhPT10Ll9fY3VzdG9tVGV4dCkmJihvLnJlbW92ZSh0KSx0PW51bGwpLCFzKXt2YXIgYz0hdDtyZXR1cm4gZnVuY3Rpb24oZSx0LGksbixvLGEscil7dmFyIHM9e30sbD1pLnN0eWxlfHx7fTtpZihpLnNoYXBlJiYocy5zaGFwZT1EKGkuc2hhcGUpKSxpLnBvc2l0aW9uJiYocy5wb3NpdGlvbj1pLnBvc2l0aW9uLnNsaWNlKCkpLGkuc2NhbGUmJihzLnNjYWxlPWkuc2NhbGUuc2xpY2UoKSksaS5vcmlnaW4mJihzLm9yaWdpbj1pLm9yaWdpbi5zbGljZSgpKSxpLnJvdGF0aW9uJiYocy5yb3RhdGlvbj1pLnJvdGF0aW9uKSwiaW1hZ2UiPT09ZS50eXBlJiZpLnN0eWxlKXt2YXIgdT1zLnN0eWxlPXt9O0UoWyJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24odCl7dFQodCx1LGwsZS5zdHlsZSxhKX0pfWlmKCJ0ZXh0Ij09PWUudHlwZSYmaS5zdHlsZSl7dT1zLnN0eWxlPXt9O0UoWyJ4IiwieSJdLGZ1bmN0aW9uKHQpe3RUKHQsdSxsLGUuc3R5bGUsYSl9KSwhbC5oYXNPd25Qcm9wZXJ0eSgidGV4dEZpbGwiKSYmbC5maWxsJiYobC50ZXh0RmlsbD1sLmZpbGwpLCFsLmhhc093blByb3BlcnR5KCJ0ZXh0U3Ryb2tlIikmJmwuc3Ryb2tlJiYobC50ZXh0U3Ryb2tlPWwuc3Ryb2tlKX1pZigiZ3JvdXAiIT09ZS50eXBlJiYoZS51c2VTdHlsZShsKSxhKSl7ZS5zdHlsZS5vcGFjaXR5PTA7dmFyIGg9bC5vcGFjaXR5O251bGw9PWgmJihoPTEpLGxsKGUse3N0eWxlOntvcGFjaXR5Omh9fSxuLHQpfWE/ZS5hdHRyKHMpOnNsKGUscyxuLHQpLGkuaGFzT3duUHJvcGVydHkoInoyIikmJmUuYXR0cigiejIiLGkuejJ8fDApLGkuaGFzT3duUHJvcGVydHkoInNpbGVudCIpJiZlLmF0dHIoInNpbGVudCIsaS5zaWxlbnQpLGkuaGFzT3duUHJvcGVydHkoImludmlzaWJsZSIpJiZlLmF0dHIoImludmlzaWJsZSIsaS5pbnZpc2libGUpLGkuaGFzT3duUHJvcGVydHkoImlnbm9yZSIpJiZlLmF0dHIoImlnbm9yZSIsaS5pZ25vcmUpLGkuaGFzT3duUHJvcGVydHkoImluZm8iKSYmZS5hdHRyKCJpbmZvIixpLmluZm8pO3ZhciBjPWkuc3R5bGVFbXBoYXNpcztGcyhlLGMpLHImJmpzKGUsITEhPT1jKX0odD10fHxmdW5jdGlvbih0KXt2YXIgZSxpPXQudHlwZTtpZigicGF0aCI9PT1pKXt2YXIgbj10LnNoYXBlLG89bnVsbCE9bi53aWR0aCYmbnVsbCE9bi5oZWlnaHQ/e3g6bi54fHwwLHk6bi55fHwwLHdpZHRoOm4ud2lkdGgsaGVpZ2h0Om4uaGVpZ2h0fTpudWxsLGE9dVQobik7KGU9RHMoYSxudWxsLG8sbi5sYXlvdXR8fCJjZW50ZXIiKSkuX19jdXN0b21QYXRoRGF0YT1hfWVsc2UgaWYoImltYWdlIj09PWkpKGU9bmV3IHFuKHt9KSkuX19jdXN0b21JbWFnZVBhdGg9dC5zdHlsZS5pbWFnZTtlbHNlIGlmKCJ0ZXh0Ij09PWkpKGU9bmV3IEZyKHt9KSkuX19jdXN0b21UZXh0PXQuc3R5bGUudGV4dDtlbHNlIGlmKCJncm91cCI9PT1pKWU9bmV3IElpO2Vsc2V7aWYoImNvbXBvdW5kUGF0aCI9PT1pKXRocm93IG5ldyBFcnJvcignImNvbXBvdW5kUGF0aCIgaXMgbm90IHN1cHBvcnRlZCB5ZXQuJyk7ZT1uZXcoQXMoaSkpfXJldHVybiBlLl9fY3VzdG9tR3JhcGhpY1R5cGU9aSxlLm5hbWU9dC5uYW1lLGV9KGkpLGUsaSxuLDAsYyxyKSwiZ3JvdXAiPT09bCYmZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1pLmNoaWxkcmVuLHI9YT9hLmxlbmd0aDowLHM9aS4kbWVyZ2VDaGlsZHJlbixsPSJieU5hbWUiPT09c3x8aS5kaWZmQ2hpbGRyZW5CeU5hbWUsdT0hMT09PXM7aWYoIXImJiFsJiYhdSlyZXR1cm47aWYobClyZXR1cm4gZnVuY3Rpb24odCl7bmV3IFRmKHQub2xkQ2hpbGRyZW4sdC5uZXdDaGlsZHJlbixvVCxvVCx0KS5hZGQoYVQpLnVwZGF0ZShhVCkucmVtb3ZlKGxUKS5leGVjdXRlKCl9KHtvbGRDaGlsZHJlbjp0LmNoaWxkcmVuKCl8fFtdLG5ld0NoaWxkcmVuOmF8fFtdLGRhdGFJbmRleDplLGFuaW1hdGFibGVNb2RlbDpuLGdyb3VwOnQsZGF0YTpvfSk7dSYmdC5yZW1vdmVBbGwoKTtmb3IodmFyIGg9MDtoPHI7aCsrKWFbaF0mJm5UKHQuY2hpbGRBdChoKSxlLGFbaF0sbix0LG8pfSh0LGUsaSxuLGEpLG8uYWRkKHQpLHR9fWZ1bmN0aW9uIG9UKHQsZSl7dmFyIGk9dCYmdC5uYW1lO3JldHVybiBudWxsIT1pP2k6SkkrZX1mdW5jdGlvbiBhVCh0LGUpe3ZhciBpPXRoaXMuY29udGV4dCxuPW51bGwhPXQ/aS5uZXdDaGlsZHJlblt0XTpudWxsO25UKG51bGwhPWU/aS5vbGRDaGlsZHJlbltlXTpudWxsLGkuZGF0YUluZGV4LG4saS5hbmltYXRhYmxlTW9kZWwsaS5ncm91cCxpLmRhdGEpfWZ1bmN0aW9uIHJUKGksdCl7dmFyIG49bmV3IElsKHt9LHQpO3JldHVybiBFKFlJLGZ1bmN0aW9uKHQsZSl7aS5oYXNPd25Qcm9wZXJ0eSh0KSYmKG4ub3B0aW9uW2VdPWlbdF0pfSksbn1mdW5jdGlvbiBzVCh0LGUpe2Zvcih2YXIgaSBpbiBlKSFlLmhhc093blByb3BlcnR5KGkpJiZZSS5oYXNPd25Qcm9wZXJ0eShpKXx8KHRbaV09ZVtpXSl9ZnVuY3Rpb24gbFQodCl7dmFyIGU9dGhpcy5jb250ZXh0LGk9ZS5vbGRDaGlsZHJlblt0XTtpJiZlLmdyb3VwLnJlbW92ZShpKX1mdW5jdGlvbiB1VCh0KXtyZXR1cm4gdCYmKHQucGF0aERhdGF8fHQuZCl9ZnVuY3Rpb24gaFQodCxlKXtyZXR1cm4gdCYmdC5oYXNPd25Qcm9wZXJ0eShlKX1mdW5jdGlvbiBjVCh0KXtyZXR1cm4gdC5nZXQoInN0YWNrIil8fCJfX2VjX3N0YWNrXyIrdC5zZXJpZXNJbmRleH1mdW5jdGlvbiBkVCh0LGUpe3JldHVybiBlLmRpbSt0Lm1vZGVsLmNvbXBvbmVudEluZGV4fWZ1bmN0aW9uIGZUKHQsZSl7RWcuY2FsbCh0aGlzLCJyYWRpdXMiLHQsZSksdGhpcy50eXBlPSJjYXRlZ29yeSJ9aWMuZXh0ZW5kKHt0eXBlOiJzZXJpZXMuY3VzdG9tIixkZXBlbmRlbmNpZXM6WyJncmlkIiwicG9sYXIiLCJnZW8iLCJzaW5nbGVBeGlzIiwiY2FsZW5kYXIiXSxkZWZhdWx0T3B0aW9uOntjb29yZGluYXRlU3lzdGVtOiJjYXJ0ZXNpYW4yZCIsemxldmVsOjAsejoyLGxlZ2VuZEhvdmVyTGluazohMCx1c2VUcmFuc2Zvcm06ITAsY2xpcDohMX0sZ2V0SW5pdGlhbERhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gaHAodGhpcy5nZXRTb3VyY2UoKSx0aGlzKX0sZ2V0RGF0YVBhcmFtczpmdW5jdGlvbih0LGUsaSl7dmFyIG49aWMucHJvdG90eXBlLmdldERhdGFQYXJhbXMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBpJiYobi5pbmZvPWkuaW5mbyksbn19KSxnYy5leHRlbmQoe3R5cGU6ImN1c3RvbSIsX2RhdGE6bnVsbCxyZW5kZXI6ZnVuY3Rpb24oaSx0LGUsbil7dmFyIG89dGhpcy5fZGF0YSxhPWkuZ2V0RGF0YSgpLHI9dGhpcy5ncm91cCxzPWVUKGksYSx0LGUpO2EuZGlmZihvKS5hZGQoZnVuY3Rpb24odCl7aVQobnVsbCx0LHModCxuKSxpLHIsYSl9KS51cGRhdGUoZnVuY3Rpb24odCxlKXtpVChvLmdldEl0ZW1HcmFwaGljRWwoZSksdCxzKHQsbiksaSxyLGEpfSkucmVtb3ZlKGZ1bmN0aW9uKHQpe3ZhciBlPW8uZ2V0SXRlbUdyYXBoaWNFbCh0KTtlJiZyLnJlbW92ZShlKX0pLmV4ZWN1dGUoKTt2YXIgbD1pLmdldCgiY2xpcCIsITApP3ltKGkuY29vcmRpbmF0ZVN5c3RlbSwhMSxpKTpudWxsO2w/ci5zZXRDbGlwUGF0aChsKTpyLnJlbW92ZUNsaXBQYXRoKCksdGhpcy5fZGF0YT1hfSxpbmNyZW1lbnRhbFByZXBhcmVSZW5kZXI6ZnVuY3Rpb24odCxlLGkpe3RoaXMuZ3JvdXAucmVtb3ZlQWxsKCksdGhpcy5fZGF0YT1udWxsfSxpbmNyZW1lbnRhbFJlbmRlcjpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhPWUuZ2V0RGF0YSgpLHI9ZVQoZSxhLGksbik7ZnVuY3Rpb24gcyh0KXt0LmlzR3JvdXB8fCh0LmluY3JlbWVudGFsPSEwLHQudXNlSG92ZXJMYXllcj0hMCl9Zm9yKHZhciBsPXQuc3RhcnQ7bDx0LmVuZDtsKyspe2lUKG51bGwsbCxyKGwsbyksZSx0aGlzLmdyb3VwLGEpLnRyYXZlcnNlKHMpfX0sZGlzcG9zZTpldCxmaWx0ZXJGb3JFeHBvc2VkRXZlbnQ6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89ZS5lbGVtZW50O2lmKG51bGw9PW98fGkubmFtZT09PW8pcmV0dXJuITA7Zm9yKDsoaT1pLnBhcmVudCkmJmkhPT10aGlzLmdyb3VwOylpZihpLm5hbWU9PT1vKXJldHVybiEwO3JldHVybiExfX0pLGZULnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZlQscG9pbnRUb0RhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5wb2xhci5wb2ludFRvRGF0YSh0LGUpWyJyYWRpdXMiPT09dGhpcy5kaW0/MDoxXX0sZGF0YVRvUmFkaXVzOkVnLnByb3RvdHlwZS5kYXRhVG9Db29yZCxyYWRpdXNUb0RhdGE6RWcucHJvdG90eXBlLmNvb3JkVG9EYXRhfSx3KGZULEVnKTt2YXIgcFQ9Wm8oKTtmdW5jdGlvbiBnVCh0LGUpe2U9ZXx8WzAsMzYwXSxFZy5jYWxsKHRoaXMsImFuZ2xlIix0LGUpLHRoaXMudHlwZT0iY2F0ZWdvcnkifWdULnByb3RvdHlwZT17Y29uc3RydWN0b3I6Z1QscG9pbnRUb0RhdGE6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5wb2xhci5wb2ludFRvRGF0YSh0LGUpWyJyYWRpdXMiPT09dGhpcy5kaW0/MDoxXX0sZGF0YVRvQW5nbGU6RWcucHJvdG90eXBlLmRhdGFUb0Nvb3JkLGFuZ2xlVG9EYXRhOkVnLnByb3RvdHlwZS5jb29yZFRvRGF0YSxjYWxjdWxhdGVDYXRlZ29yeUludGVydmFsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRMYWJlbE1vZGVsKCksZT10aGlzLnNjYWxlLGk9ZS5nZXRFeHRlbnQoKSxuPWUuY291bnQoKTtpZihpWzFdLWlbMF08MSlyZXR1cm4gMDt2YXIgbz1pWzBdLGE9dGhpcy5kYXRhVG9Db29yZChvKzEpLXRoaXMuZGF0YVRvQ29vcmQobykscj1NYXRoLmFicyhhKSxzPWNuKG8sdC5nZXRGb250KCksImNlbnRlciIsInRvcCIpLGw9TWF0aC5tYXgocy5oZWlnaHQsNykvcjtpc05hTihsKSYmKGw9MS8wKTt2YXIgdT1NYXRoLm1heCgwLE1hdGguZmxvb3IobCkpLGg9cFQodGhpcy5tb2RlbCksYz1oLmxhc3RBdXRvSW50ZXJ2YWwsZD1oLmxhc3RUaWNrQ291bnQ7cmV0dXJuIG51bGwhPWMmJm51bGwhPWQmJk1hdGguYWJzKGMtdSk8PTEmJk1hdGguYWJzKGQtbik8PTEmJnU8Yz91PWM6KGgubGFzdFRpY2tDb3VudD1uLGgubGFzdEF1dG9JbnRlcnZhbD11KSx1fX0sdyhnVCxFZyk7ZnVuY3Rpb24gbVQodCl7dGhpcy5uYW1lPXR8fCIiLHRoaXMuY3g9MCx0aGlzLmN5PTAsdGhpcy5fcmFkaXVzQXhpcz1uZXcgZlQsdGhpcy5fYW5nbGVBeGlzPW5ldyBnVCx0aGlzLl9yYWRpdXNBeGlzLnBvbGFyPXRoaXMuX2FuZ2xlQXhpcy5wb2xhcj10aGlzfW1ULnByb3RvdHlwZT17dHlwZToicG9sYXIiLGF4aXNQb2ludGVyRW5hYmxlZDohMCxjb25zdHJ1Y3RvcjptVCxkaW1lbnNpb25zOlsicmFkaXVzIiwiYW5nbGUiXSxtb2RlbDpudWxsLGNvbnRhaW5Qb2ludDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnBvaW50VG9Db29yZCh0KTtyZXR1cm4gdGhpcy5fcmFkaXVzQXhpcy5jb250YWluKGVbMF0pJiZ0aGlzLl9hbmdsZUF4aXMuY29udGFpbihlWzFdKX0sY29udGFpbkRhdGE6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3JhZGl1c0F4aXMuY29udGFpbkRhdGEodFswXSkmJnRoaXMuX2FuZ2xlQXhpcy5jb250YWluRGF0YSh0WzFdKX0sZ2V0QXhpczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1siXyIrdCsiQXhpcyJdfSxnZXRBeGVzOmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuX3JhZGl1c0F4aXMsdGhpcy5fYW5nbGVBeGlzXX0sZ2V0QXhlc0J5U2NhbGU6ZnVuY3Rpb24odCl7dmFyIGU9W10saT10aGlzLl9hbmdsZUF4aXMsbj10aGlzLl9yYWRpdXNBeGlzO3JldHVybiBpLnNjYWxlLnR5cGU9PT10JiZlLnB1c2goaSksbi5zY2FsZS50eXBlPT09dCYmZS5wdXNoKG4pLGV9LGdldEFuZ2xlQXhpczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmdsZUF4aXN9LGdldFJhZGl1c0F4aXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmFkaXVzQXhpc30sZ2V0T3RoZXJBeGlzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2FuZ2xlQXhpcztyZXR1cm4gdD09PWU/dGhpcy5fcmFkaXVzQXhpczplfSxnZXRCYXNlQXhpczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF4ZXNCeVNjYWxlKCJvcmRpbmFsIilbMF18fHRoaXMuZ2V0QXhlc0J5U2NhbGUoInRpbWUiKVswXXx8dGhpcy5nZXRBbmdsZUF4aXMoKX0sZ2V0VG9vbHRpcEF4ZXM6ZnVuY3Rpb24odCl7dmFyIGU9bnVsbCE9dCYmImF1dG8iIT09dD90aGlzLmdldEF4aXModCk6dGhpcy5nZXRCYXNlQXhpcygpO3JldHVybntiYXNlQXhlczpbZV0sb3RoZXJBeGVzOlt0aGlzLmdldE90aGVyQXhpcyhlKV19fSxkYXRhVG9Qb2ludDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNvb3JkVG9Qb2ludChbdGhpcy5fcmFkaXVzQXhpcy5kYXRhVG9SYWRpdXModFswXSxlKSx0aGlzLl9hbmdsZUF4aXMuZGF0YVRvQW5nbGUodFsxXSxlKV0pfSxwb2ludFRvRGF0YTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMucG9pbnRUb0Nvb3JkKHQpO3JldHVyblt0aGlzLl9yYWRpdXNBeGlzLnJhZGl1c1RvRGF0YShpWzBdLGUpLHRoaXMuX2FuZ2xlQXhpcy5hbmdsZVRvRGF0YShpWzFdLGUpXX0scG9pbnRUb0Nvb3JkOmZ1bmN0aW9uKHQpe3ZhciBlPXRbMF0tdGhpcy5jeCxpPXRbMV0tdGhpcy5jeSxuPXRoaXMuZ2V0QW5nbGVBeGlzKCksbz1uLmdldEV4dGVudCgpLGE9TWF0aC5taW4ob1swXSxvWzFdKSxyPU1hdGgubWF4KG9bMF0sb1sxXSk7bi5pbnZlcnNlP2E9ci0zNjA6cj1hKzM2MDt2YXIgcz1NYXRoLnNxcnQoZSplK2kqaSk7ZS89cyxpLz1zO2Zvcih2YXIgbD1NYXRoLmF0YW4yKC1pLGUpL01hdGguUEkqMTgwLHU9bDxhPzE6LTE7bDxhfHxyPGw7KWwrPTM2MCp1O3JldHVybltzLGxdfSxjb29yZFRvUG9pbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dFswXSxpPXRbMV0vMTgwKk1hdGguUEk7cmV0dXJuW01hdGguY29zKGkpKmUrdGhpcy5jeCwtTWF0aC5zaW4oaSkqZSt0aGlzLmN5XX0sZ2V0QXJlYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QW5nbGVBeGlzKCksZT10aGlzLmdldFJhZGl1c0F4aXMoKS5nZXRFeHRlbnQoKS5zbGljZSgpO2VbMF0+ZVsxXSYmZS5yZXZlcnNlKCk7dmFyIGk9dC5nZXRFeHRlbnQoKSxuPU1hdGguUEkvMTgwO3JldHVybntjeDp0aGlzLmN4LGN5OnRoaXMuY3kscjA6ZVswXSxyOmVbMV0sc3RhcnRBbmdsZTotaVswXSpuLGVuZEFuZ2xlOi1pWzFdKm4sY2xvY2t3aXNlOnQuaW52ZXJzZSxjb250YWluOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC10aGlzLmN4LG49ZS10aGlzLmN5LG89aSppK24qbixhPXRoaXMucixyPXRoaXMucjA7cmV0dXJuIG88PWEqYSYmcipyPD1vfX19fTt2YXIgdlQ9VHUuZXh0ZW5kKHt0eXBlOiJwb2xhckF4aXMiLGF4aXM6bnVsbCxnZXRDb29yZFN5c01vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWNNb2RlbC5xdWVyeUNvbXBvbmVudHMoe21haW5UeXBlOiJwb2xhciIsaW5kZXg6dGhpcy5vcHRpb24ucG9sYXJJbmRleCxpZDp0aGlzLm9wdGlvbi5wb2xhcklkfSlbMF19fSk7bSh2VC5wcm90b3R5cGUsc2cpO3ZhciB5VD17c3BsaXROdW1iZXI6NX07ZnVuY3Rpb24geFQodCxlKXtyZXR1cm4gZS50eXBlfHwoZS5kYXRhPyJjYXRlZ29yeSI6InZhbHVlIil9ZnVuY3Rpb24gX1QodCxlKXt2YXIgaT10aGlzLG49aS5nZXRBbmdsZUF4aXMoKSxvPWkuZ2V0UmFkaXVzQXhpcygpO2lmKG4uc2NhbGUuc2V0RXh0ZW50KDEvMCwtMS8wKSxvLnNjYWxlLnNldEV4dGVudCgxLzAsLTEvMCksdC5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQpe2lmKHQuY29vcmRpbmF0ZVN5c3RlbT09PWkpe3ZhciBlPXQuZ2V0RGF0YSgpO0UoZS5tYXBEaW1lbnNpb24oInJhZGl1cyIsITApLGZ1bmN0aW9uKHQpe28uc2NhbGUudW5pb25FeHRlbnRGcm9tRGF0YShlLHVwKGUsdCkpfSksRShlLm1hcERpbWVuc2lvbigiYW5nbGUiLCEwKSxmdW5jdGlvbih0KXtuLnNjYWxlLnVuaW9uRXh0ZW50RnJvbURhdGEoZSx1cChlLHQpKX0pfX0pLGVnKG4uc2NhbGUsbi5tb2RlbCksZWcoby5zY2FsZSxvLm1vZGVsKSwiY2F0ZWdvcnkiPT09bi50eXBlJiYhbi5vbkJhbmQpe3ZhciBhPW4uZ2V0RXh0ZW50KCkscj0zNjAvbi5zY2FsZS5jb3VudCgpO24uaW52ZXJzZT9hWzFdKz1yOmFbMV0tPXIsbi5zZXRFeHRlbnQoYVswXSxhWzFdKX19ZnVuY3Rpb24gd1QodCxlKXtpZih0LnR5cGU9ZS5nZXQoInR5cGUiKSx0LnNjYWxlPWlnKGUpLHQub25CYW5kPWUuZ2V0KCJib3VuZGFyeUdhcCIpJiYiY2F0ZWdvcnkiPT09dC50eXBlLHQuaW52ZXJzZT1lLmdldCgiaW52ZXJzZSIpLCJhbmdsZUF4aXMiPT09ZS5tYWluVHlwZSl7dC5pbnZlcnNlXj1lLmdldCgiY2xvY2t3aXNlIik7dmFyIGk9ZS5nZXQoInN0YXJ0QW5nbGUiKTt0LnNldEV4dGVudChpLGkrKHQuaW52ZXJzZT8tMzYwOjM2MCkpfShlLmF4aXM9dCkubW9kZWw9ZX1PbSgiYW5nbGUiLHZULHhULHtzdGFydEFuZ2xlOjkwLGNsb2Nrd2lzZTohMCxzcGxpdE51bWJlcjoxMixheGlzTGFiZWw6e3JvdGF0ZTohMX19KSxPbSgicmFkaXVzIix2VCx4VCx5VCksd2Yoe3R5cGU6InBvbGFyIixkZXBlbmRlbmNpZXM6WyJwb2xhckF4aXMiLCJhbmdsZUF4aXMiXSxjb29yZGluYXRlU3lzdGVtOm51bGwsZmluZEF4aXNNb2RlbDpmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdGhpcy5lY01vZGVsLmVhY2hDb21wb25lbnQodCxmdW5jdGlvbih0KXt0LmdldENvb3JkU3lzTW9kZWwoKT09PXRoaXMmJihlPXQpfSx0aGlzKSxlfSxkZWZhdWx0T3B0aW9uOnt6bGV2ZWw6MCx6OjAsY2VudGVyOlsiNTAlIiwiNTAlIl0scmFkaXVzOiI4MCUifX0pLG5oLnJlZ2lzdGVyKCJwb2xhciIse2RpbWVuc2lvbnM6bVQucHJvdG90eXBlLmRpbWVuc2lvbnMsY3JlYXRlOmZ1bmN0aW9uKGkscyl7dmFyIGw9W107cmV0dXJuIGkuZWFjaENvbXBvbmVudCgicG9sYXIiLGZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IG1UKGUpO2kudXBkYXRlPV9UO3ZhciBuPWkuZ2V0UmFkaXVzQXhpcygpLG89aS5nZXRBbmdsZUF4aXMoKSxhPXQuZmluZEF4aXNNb2RlbCgicmFkaXVzQXhpcyIpLHI9dC5maW5kQXhpc01vZGVsKCJhbmdsZUF4aXMiKTt3VChuLGEpLHdUKG8sciksZnVuY3Rpb24odCxlLGkpe3ZhciBuPWUuZ2V0KCJjZW50ZXIiKSxvPWkuZ2V0V2lkdGgoKSxhPWkuZ2V0SGVpZ2h0KCk7dC5jeD1QbChuWzBdLG8pLHQuY3k9UGwoblsxXSxhKTt2YXIgcj10LmdldFJhZGl1c0F4aXMoKSxzPU1hdGgubWluKG8sYSkvMixsPWUuZ2V0KCJyYWRpdXMiKTtudWxsPT1sP2w9WzAsIjEwMCUiXTprKGwpfHwobD1bMCxsXSksbD1bUGwobFswXSxzKSxQbChsWzFdLHMpXSxyLmludmVyc2U/ci5zZXRFeHRlbnQobFsxXSxsWzBdKTpyLnNldEV4dGVudChsWzBdLGxbMV0pfShpLHQscyksbC5wdXNoKGkpLCh0LmNvb3JkaW5hdGVTeXN0ZW09aSkubW9kZWw9dH0pLGkuZWFjaFNlcmllcyhmdW5jdGlvbih0KXtpZigicG9sYXIiPT09dC5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKSl7dmFyIGU9aS5xdWVyeUNvbXBvbmVudHMoe21haW5UeXBlOiJwb2xhciIsaW5kZXg6dC5nZXQoInBvbGFySW5kZXgiKSxpZDp0LmdldCgicG9sYXJJZCIpfSlbMF07dC5jb29yZGluYXRlU3lzdGVtPWUuY29vcmRpbmF0ZVN5c3RlbX19KSxsfX0pO3ZhciBiVD1bImF4aXNMaW5lIiwiYXhpc0xhYmVsIiwiYXhpc1RpY2siLCJtaW5vclRpY2siLCJzcGxpdExpbmUiLCJtaW5vclNwbGl0TGluZSIsInNwbGl0QXJlYSJdO2Z1bmN0aW9uIFNUKHQsZSxpKXtlWzFdPmVbMF0mJihlPWUuc2xpY2UoKS5yZXZlcnNlKCkpO3ZhciBuPXQuY29vcmRUb1BvaW50KFtlWzBdLGldKSxvPXQuY29vcmRUb1BvaW50KFtlWzFdLGldKTtyZXR1cm57eDE6blswXSx5MTpuWzFdLHgyOm9bMF0seTI6b1sxXX19ZnVuY3Rpb24gTVQodCl7cmV0dXJuIHQuZ2V0UmFkaXVzQXhpcygpLmludmVyc2U/MDoxfWZ1bmN0aW9uIElUKHQpe3ZhciBlPXRbMF0saT10W3QubGVuZ3RoLTFdO2UmJmkmJk1hdGguYWJzKE1hdGguYWJzKGUuY29vcmQtaS5jb29yZCktMzYwKTwxZS00JiZ0LnBvcCgpfWh2LmV4dGVuZCh7dHlwZToiYW5nbGVBeGlzIixheGlzUG9pbnRlckNsYXNzOiJQb2xhckF4aXNQb2ludGVyIixyZW5kZXI6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmdyb3VwLnJlbW92ZUFsbCgpLGUuZ2V0KCJzaG93Iikpe3ZhciBpPWUuYXhpcyxuPWkucG9sYXIsbz1uLmdldFJhZGl1c0F4aXMoKS5nZXRFeHRlbnQoKSxhPWkuZ2V0VGlja3NDb29yZHMoKSxyPWkuZ2V0TWlub3JUaWNrc0Nvb3JkcygpLHM9TihpLmdldFZpZXdMYWJlbHMoKSxmdW5jdGlvbih0KXtyZXR1cm4odD1EKHQpKS5jb29yZD1pLmRhdGFUb0Nvb3JkKHQudGlja1ZhbHVlKSx0fSk7SVQocyksSVQoYSksRShiVCxmdW5jdGlvbih0KXshZS5nZXQodCsiLnNob3ciKXx8aS5zY2FsZS5pc0JsYW5rKCkmJiJheGlzTGluZSIhPT10fHx0aGlzWyJfIit0XShlLG4sYSxyLG8scyl9LHRoaXMpfX0sX2F4aXNMaW5lOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGEscj10LmdldE1vZGVsKCJheGlzTGluZS5saW5lU3R5bGUiKSxzPU1UKGUpLGw9cz8wOjE7KGE9MD09PW9bbF0/bmV3IEhyKHtzaGFwZTp7Y3g6ZS5jeCxjeTplLmN5LHI6b1tzXX0sc3R5bGU6ci5nZXRMaW5lU3R5bGUoKSx6MjoxLHNpbGVudDohMH0pOm5ldyBYcih7c2hhcGU6e2N4OmUuY3gsY3k6ZS5jeSxyOm9bc10scjA6b1tsXX0sc3R5bGU6ci5nZXRMaW5lU3R5bGUoKSx6MjoxLHNpbGVudDohMH0pKS5zdHlsZS5maWxsPW51bGwsdGhpcy5ncm91cC5hZGQoYSl9LF9heGlzVGljazpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhPXQuZ2V0TW9kZWwoImF4aXNUaWNrIikscj0oYS5nZXQoImluc2lkZSIpPy0xOjEpKmEuZ2V0KCJsZW5ndGgiKSxzPW9bTVQoZSldLGw9TihpLGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgb3Moe3NoYXBlOlNUKGUsW3MscytyXSx0LmNvb3JkKX0pfSk7dGhpcy5ncm91cC5hZGQoa3MobCx7c3R5bGU6QyhhLmdldE1vZGVsKCJsaW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSx7c3Ryb2tlOnQuZ2V0KCJheGlzTGluZS5saW5lU3R5bGUuY29sb3IiKX0pfSkpfSxfbWlub3JUaWNrOmZ1bmN0aW9uKHQsZSxpLG4sbyl7aWYobi5sZW5ndGgpe2Zvcih2YXIgYT10LmdldE1vZGVsKCJheGlzVGljayIpLHI9dC5nZXRNb2RlbCgibWlub3JUaWNrIikscz0oYS5nZXQoImluc2lkZSIpPy0xOjEpKnIuZ2V0KCJsZW5ndGgiKSxsPW9bTVQoZSldLHU9W10saD0wO2g8bi5sZW5ndGg7aCsrKWZvcih2YXIgYz0wO2M8bltoXS5sZW5ndGg7YysrKXUucHVzaChuZXcgb3Moe3NoYXBlOlNUKGUsW2wsbCtzXSxuW2hdW2NdLmNvb3JkKX0pKTt0aGlzLmdyb3VwLmFkZChrcyh1LHtzdHlsZTpDKHIuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLmdldExpbmVTdHlsZSgpLEMoYS5nZXRMaW5lU3R5bGUoKSx7c3Ryb2tlOnQuZ2V0KCJheGlzTGluZS5saW5lU3R5bGUuY29sb3IiKX0pKX0pKX19LF9heGlzTGFiZWw6ZnVuY3Rpb24oYyxkLHQsZSxmLGkpe3ZhciBwPWMuZ2V0Q2F0ZWdvcmllcyghMCksZz1jLmdldE1vZGVsKCJheGlzTGFiZWwiKSxtPWcuZ2V0KCJtYXJnaW4iKSx2PWMuZ2V0KCJ0cmlnZ2VyRXZlbnQiKTtFKGksZnVuY3Rpb24odCxlKXt2YXIgaT1nLG49dC50aWNrVmFsdWUsbz1mW01UKGQpXSxhPWQuY29vcmRUb1BvaW50KFtvK20sdC5jb29yZF0pLHI9ZC5jeCxzPWQuY3ksbD1NYXRoLmFicyhhWzBdLXIpL288LjM/ImNlbnRlciI6YVswXT5yPyJsZWZ0IjoicmlnaHQiLHU9TWF0aC5hYnMoYVsxXS1zKS9vPC4zPyJtaWRkbGUiOmFbMV0+cz8idG9wIjoiYm90dG9tIjtwJiZwW25dJiZwW25dLnRleHRTdHlsZSYmKGk9bmV3IElsKHBbbl0udGV4dFN0eWxlLGcsZy5lY01vZGVsKSk7dmFyIGg9bmV3IEZyKHtzaWxlbnQ6WW0uaXNMYWJlbFNpbGVudChjKX0pO3RoaXMuZ3JvdXAuYWRkKGgpLFFzKGguc3R5bGUsaSx7eDphWzBdLHk6YVsxXSx0ZXh0RmlsbDppLmdldFRleHRDb2xvcigpfHxjLmdldCgiYXhpc0xpbmUubGluZVN0eWxlLmNvbG9yIiksdGV4dDp0LmZvcm1hdHRlZExhYmVsLHRleHRBbGlnbjpsLHRleHRWZXJ0aWNhbEFsaWduOnV9KSx2JiYoaC5ldmVudERhdGE9WW0ubWFrZUF4aXNFdmVudERhdGFCYXNlKGMpLGguZXZlbnREYXRhLnRhcmdldFR5cGU9ImF4aXNMYWJlbCIsaC5ldmVudERhdGEudmFsdWU9dC5yYXdMYWJlbCl9LHRoaXMpfSxfc3BsaXRMaW5lOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9dC5nZXRNb2RlbCgic3BsaXRMaW5lIikuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLHI9YS5nZXQoImNvbG9yIikscz0wO3I9ciBpbnN0YW5jZW9mIEFycmF5P3I6W3JdO2Zvcih2YXIgbD1bXSx1PTA7dTxpLmxlbmd0aDt1Kyspe3ZhciBoPXMrKyVyLmxlbmd0aDtsW2hdPWxbaF18fFtdLGxbaF0ucHVzaChuZXcgb3Moe3NoYXBlOlNUKGUsbyxpW3VdLmNvb3JkKX0pKX1mb3IodT0wO3U8bC5sZW5ndGg7dSsrKXRoaXMuZ3JvdXAuYWRkKGtzKGxbdV0se3N0eWxlOkMoe3N0cm9rZTpyW3Ulci5sZW5ndGhdfSxhLmdldExpbmVTdHlsZSgpKSxzaWxlbnQ6ITAsejp0LmdldCgieiIpfSkpfSxfbWlub3JTcGxpdExpbmU6ZnVuY3Rpb24odCxlLGksbixvKXtpZihuLmxlbmd0aCl7Zm9yKHZhciBhPXQuZ2V0TW9kZWwoIm1pbm9yU3BsaXRMaW5lIikuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLHI9W10scz0wO3M8bi5sZW5ndGg7cysrKWZvcih2YXIgbD0wO2w8bltzXS5sZW5ndGg7bCsrKXIucHVzaChuZXcgb3Moe3NoYXBlOlNUKGUsbyxuW3NdW2xdLmNvb3JkKX0pKTt0aGlzLmdyb3VwLmFkZChrcyhyLHtzdHlsZTphLmdldExpbmVTdHlsZSgpLHNpbGVudDohMCx6OnQuZ2V0KCJ6Iil9KSl9fSxfc3BsaXRBcmVhOmZ1bmN0aW9uKHQsZSxpLG4sbyl7aWYoaS5sZW5ndGgpe3ZhciBhPXQuZ2V0TW9kZWwoInNwbGl0QXJlYSIpLmdldE1vZGVsKCJhcmVhU3R5bGUiKSxyPWEuZ2V0KCJjb2xvciIpLHM9MDtyPXIgaW5zdGFuY2VvZiBBcnJheT9yOltyXTtmb3IodmFyIGw9W10sdT1NYXRoLlBJLzE4MCxoPS1pWzBdLmNvb3JkKnUsYz1NYXRoLm1pbihvWzBdLG9bMV0pLGQ9TWF0aC5tYXgob1swXSxvWzFdKSxmPXQuZ2V0KCJjbG9ja3dpc2UiKSxwPTE7cDxpLmxlbmd0aDtwKyspe3ZhciBnPXMrKyVyLmxlbmd0aDtsW2ddPWxbZ118fFtdLGxbZ10ucHVzaChuZXcgVXIoe3NoYXBlOntjeDplLmN4LGN5OmUuY3kscjA6YyxyOmQsc3RhcnRBbmdsZTpoLGVuZEFuZ2xlOi1pW3BdLmNvb3JkKnUsY2xvY2t3aXNlOmZ9LHNpbGVudDohMH0pKSxoPS1pW3BdLmNvb3JkKnV9Zm9yKHA9MDtwPGwubGVuZ3RoO3ArKyl0aGlzLmdyb3VwLmFkZChrcyhsW3BdLHtzdHlsZTpDKHtmaWxsOnJbcCVyLmxlbmd0aF19LGEuZ2V0QXJlYVN0eWxlKCkpLHNpbGVudDohMH0pKX19fSk7dmFyIFRUPVsiYXhpc0xpbmUiLCJheGlzVGlja0xhYmVsIiwiYXhpc05hbWUiXSxBVD1bInNwbGl0TGluZSIsInNwbGl0QXJlYSIsIm1pbm9yU3BsaXRMaW5lIl07aHYuZXh0ZW5kKHt0eXBlOiJyYWRpdXNBeGlzIixheGlzUG9pbnRlckNsYXNzOiJQb2xhckF4aXNQb2ludGVyIixyZW5kZXI6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmdyb3VwLnJlbW92ZUFsbCgpLGUuZ2V0KCJzaG93Iikpe3ZhciBpPWUuYXhpcyxuPWkucG9sYXIsbz1uLmdldEFuZ2xlQXhpcygpLGE9aS5nZXRUaWNrc0Nvb3JkcygpLHI9aS5nZXRNaW5vclRpY2tzQ29vcmRzKCkscz1vLmdldEV4dGVudCgpWzBdLGw9aS5nZXRFeHRlbnQoKSx1PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm57cG9zaXRpb246W3QuY3gsdC5jeV0scm90YXRpb246aS8xODAqTWF0aC5QSSxsYWJlbERpcmVjdGlvbjotMSx0aWNrRGlyZWN0aW9uOi0xLG5hbWVEaXJlY3Rpb246MSxsYWJlbFJvdGF0ZTplLmdldE1vZGVsKCJheGlzTGFiZWwiKS5nZXQoInJvdGF0ZSIpLHoyOjF9fShuLGUscyksaD1uZXcgWW0oZSx1KTtFKFRULGguYWRkLGgpLHRoaXMuZ3JvdXAuYWRkKGguZ2V0R3JvdXAoKSksRShBVCxmdW5jdGlvbih0KXtlLmdldCh0KyIuc2hvdyIpJiYhaS5zY2FsZS5pc0JsYW5rKCkmJnRoaXNbIl8iK3RdKGUsbixzLGwsYSxyKX0sdGhpcyl9fSxfc3BsaXRMaW5lOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9dC5nZXRNb2RlbCgic3BsaXRMaW5lIikuZ2V0TW9kZWwoImxpbmVTdHlsZSIpLHI9YS5nZXQoImNvbG9yIikscz0wO3I9ciBpbnN0YW5jZW9mIEFycmF5P3I6W3JdO2Zvcih2YXIgbD1bXSx1PTA7dTxvLmxlbmd0aDt1Kyspe3ZhciBoPXMrKyVyLmxlbmd0aDtsW2hdPWxbaF18fFtdLGxbaF0ucHVzaChuZXcgSHIoe3NoYXBlOntjeDplLmN4LGN5OmUuY3kscjpvW3VdLmNvb3JkfX0pKX1mb3IodT0wO3U8bC5sZW5ndGg7dSsrKXRoaXMuZ3JvdXAuYWRkKGtzKGxbdV0se3N0eWxlOkMoe3N0cm9rZTpyW3Ulci5sZW5ndGhdLGZpbGw6bnVsbH0sYS5nZXRMaW5lU3R5bGUoKSksc2lsZW50OiEwfSkpfSxfbWlub3JTcGxpdExpbmU6ZnVuY3Rpb24odCxlLGksbixvLGEpe2lmKGEubGVuZ3RoKXtmb3IodmFyIHI9dC5nZXRNb2RlbCgibWlub3JTcGxpdExpbmUiKS5nZXRNb2RlbCgibGluZVN0eWxlIikscz1bXSxsPTA7bDxhLmxlbmd0aDtsKyspZm9yKHZhciB1PTA7dTxhW2xdLmxlbmd0aDt1Kyspcy5wdXNoKG5ldyBIcih7c2hhcGU6e2N4OmUuY3gsY3k6ZS5jeSxyOmFbbF1bdV0uY29vcmR9fSkpO3RoaXMuZ3JvdXAuYWRkKGtzKHMse3N0eWxlOkMoe2ZpbGw6bnVsbH0sci5nZXRMaW5lU3R5bGUoKSksc2lsZW50OiEwfSkpfX0sX3NwbGl0QXJlYTpmdW5jdGlvbih0LGUsaSxuLG8pe2lmKG8ubGVuZ3RoKXt2YXIgYT10LmdldE1vZGVsKCJzcGxpdEFyZWEiKS5nZXRNb2RlbCgiYXJlYVN0eWxlIikscj1hLmdldCgiY29sb3IiKSxzPTA7cj1yIGluc3RhbmNlb2YgQXJyYXk/cjpbcl07Zm9yKHZhciBsPVtdLHU9b1swXS5jb29yZCxoPTE7aDxvLmxlbmd0aDtoKyspe3ZhciBjPXMrKyVyLmxlbmd0aDtsW2NdPWxbY118fFtdLGxbY10ucHVzaChuZXcgVXIoe3NoYXBlOntjeDplLmN4LGN5OmUuY3kscjA6dSxyOm9baF0uY29vcmQsc3RhcnRBbmdsZTowLGVuZEFuZ2xlOjIqTWF0aC5QSX0sc2lsZW50OiEwfSkpLHU9b1toXS5jb29yZH1mb3IoaD0wO2g8bC5sZW5ndGg7aCsrKXRoaXMuZ3JvdXAuYWRkKGtzKGxbaF0se3N0eWxlOkMoe2ZpbGw6cltoJXIubGVuZ3RoXX0sYS5nZXRBcmVhU3R5bGUoKSksc2lsZW50OiEwfSkpfX19KTt2YXIgRFQ9c0kuZXh0ZW5kKHttYWtlRWxPcHRpb246ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1pLmF4aXM7ImFuZ2xlIj09PWEuZGltJiYodGhpcy5hbmltYXRpb25UaHJlc2hvbGQ9TWF0aC5QSS8xOCk7dmFyIHIscz1hLnBvbGFyLGw9cy5nZXRPdGhlckF4aXMoYSkuZ2V0RXh0ZW50KCk7cj1hWyJkYXRhVG8iK3V1KGEuZGltKV0oZSk7dmFyIHU9bi5nZXQoInR5cGUiKTtpZih1JiYibm9uZSIhPT11KXt2YXIgaD1kSShuKSxjPUNUW3VdKGEscyxyLGwsaCk7Yy5zdHlsZT1oLHQuZ3JhcGhpY0tleT1jLnR5cGUsdC5wb2ludGVyPWN9dmFyIGQ9bi5nZXQoImxhYmVsLm1hcmdpbiIpO2ZJKHQsaSxuLG8sZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1lLmF4aXMscj1hLmRhdGFUb0Nvb3JkKHQpLHM9bi5nZXRBbmdsZUF4aXMoKS5nZXRFeHRlbnQoKVswXTtzPXMvMTgwKk1hdGguUEk7dmFyIGwsdSxoLGM9bi5nZXRSYWRpdXNBeGlzKCkuZ2V0RXh0ZW50KCk7aWYoInJhZGl1cyI9PT1hLmRpbSl7dmFyIGQ9ZWUoKTtyZShkLGQscyksYWUoZCxkLFtuLmN4LG4uY3ldKSxsPWhsKFtyLC1vXSxkKTt2YXIgZj1lLmdldE1vZGVsKCJheGlzTGFiZWwiKS5nZXQoInJvdGF0ZSIpfHwwLHA9WW0uaW5uZXJUZXh0TGF5b3V0KHMsZipNYXRoLlBJLzE4MCwtMSk7dT1wLnRleHRBbGlnbixoPXAudGV4dFZlcnRpY2FsQWxpZ259ZWxzZXt2YXIgZz1jWzFdO2w9bi5jb29yZFRvUG9pbnQoW2crbyxyXSk7dmFyIG09bi5jeCx2PW4uY3k7dT1NYXRoLmFicyhsWzBdLW0pL2c8LjM/ImNlbnRlciI6bFswXT5tPyJsZWZ0IjoicmlnaHQiLGg9TWF0aC5hYnMobFsxXS12KS9nPC4zPyJtaWRkbGUiOmxbMV0+dj8idG9wIjoiYm90dG9tIn1yZXR1cm57cG9zaXRpb246bCxhbGlnbjp1LHZlcnRpY2FsQWxpZ246aH19KGUsaSwwLHMsZCkpfX0pO3ZhciBDVD17bGluZTpmdW5jdGlvbih0LGUsaSxuLG8pe3JldHVybiJhbmdsZSI9PT10LmRpbT97dHlwZToiTGluZSIsc2hhcGU6dkkoZS5jb29yZFRvUG9pbnQoW25bMF0saV0pLGUuY29vcmRUb1BvaW50KFtuWzFdLGldKSl9Ont0eXBlOiJDaXJjbGUiLHNoYXBlOntjeDplLmN4LGN5OmUuY3kscjppfX19LHNoYWRvdzpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhPU1hdGgubWF4KDEsdC5nZXRCYW5kV2lkdGgoKSkscj1NYXRoLlBJLzE4MDtyZXR1cm4iYW5nbGUiPT09dC5kaW0/e3R5cGU6IlNlY3RvciIsc2hhcGU6eEkoZS5jeCxlLmN5LG5bMF0sblsxXSwoLWktYS8yKSpyLChhLzItaSkqcil9Ont0eXBlOiJTZWN0b3IiLHNoYXBlOnhJKGUuY3gsZS5jeSxpLWEvMixpK2EvMiwwLDIqTWF0aC5QSSl9fX07ZnVuY3Rpb24gTFQobix0KXt0LnVwZGF0ZT0idXBkYXRlVmlldyIsZ2YodCxmdW5jdGlvbih0LGUpe3ZhciBpPXt9O3JldHVybiBlLmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJnZW8iLHF1ZXJ5OnR9LGZ1bmN0aW9uKGUpe2Vbbl0odC5uYW1lKSxFKGUuY29vcmRpbmF0ZVN5c3RlbS5yZWdpb25zLGZ1bmN0aW9uKHQpe2lbdC5uYW1lXT1lLmlzU2VsZWN0ZWQodC5uYW1lKXx8ITF9KX0pLHtzZWxlY3RlZDppLG5hbWU6dC5uYW1lfX0pfWh2LnJlZ2lzdGVyQXhpc1BvaW50ZXJDbGFzcygiUG9sYXJBeGlzUG9pbnRlciIsRFQpLHZmKFQoZnVuY3Rpb24odCxlLGkpe3ZhciBOPXt9LE89ZnVuY3Rpb24odCl7dmFyIGc9e307RSh0LGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXREYXRhKCksbj10LmNvb3JkaW5hdGVTeXN0ZW0sbz1uLmdldEJhc2VBeGlzKCksYT1kVChuLG8pLHI9by5nZXRFeHRlbnQoKSxzPSJjYXRlZ29yeSI9PT1vLnR5cGU/by5nZXRCYW5kV2lkdGgoKTpNYXRoLmFicyhyWzFdLXJbMF0pL2kuY291bnQoKSxsPWdbYV18fHtiYW5kV2lkdGg6cyxyZW1haW5lZFdpZHRoOnMsYXV0b1dpZHRoQ291bnQ6MCxjYXRlZ29yeUdhcDoiMjAlIixnYXA6IjMwJSIsc3RhY2tzOnt9fSx1PWwuc3RhY2tzO2dbYV09bDt2YXIgaD1jVCh0KTt1W2hdfHxsLmF1dG9XaWR0aENvdW50KyssdVtoXT11W2hdfHx7d2lkdGg6MCxtYXhXaWR0aDowfTt2YXIgYz1QbCh0LmdldCgiYmFyV2lkdGgiKSxzKSxkPVBsKHQuZ2V0KCJiYXJNYXhXaWR0aCIpLHMpLGY9dC5nZXQoImJhckdhcCIpLHA9dC5nZXQoImJhckNhdGVnb3J5R2FwIik7YyYmIXVbaF0ud2lkdGgmJihjPU1hdGgubWluKGwucmVtYWluZWRXaWR0aCxjKSx1W2hdLndpZHRoPWMsbC5yZW1haW5lZFdpZHRoLT1jKSxkJiYodVtoXS5tYXhXaWR0aD1kKSxudWxsIT1mJiYobC5nYXA9ZiksbnVsbCE9cCYmKGwuY2F0ZWdvcnlHYXA9cCl9KTt2YXIgZD17fTtyZXR1cm4gRShnLGZ1bmN0aW9uKHQsaSl7ZFtpXT17fTt2YXIgZT10LnN0YWNrcyxuPXQuYmFuZFdpZHRoLG89UGwodC5jYXRlZ29yeUdhcCxuKSxhPVBsKHQuZ2FwLDEpLHI9dC5yZW1haW5lZFdpZHRoLHM9dC5hdXRvV2lkdGhDb3VudCxsPShyLW8pLyhzKyhzLTEpKmEpO2w9TWF0aC5tYXgobCwwKSxFKGUsZnVuY3Rpb24odCxlKXt2YXIgaT10Lm1heFdpZHRoO2kmJmk8bCYmKGk9TWF0aC5taW4oaSxyKSx0LndpZHRoJiYoaT1NYXRoLm1pbihpLHQud2lkdGgpKSxyLT1pLHQud2lkdGg9aSxzLS0pfSksbD0oci1vKS8ocysocy0xKSphKSxsPU1hdGgubWF4KGwsMCk7dmFyIHUsaD0wO0UoZSxmdW5jdGlvbih0LGUpe3Qud2lkdGh8fCh0LndpZHRoPWwpLGgrPSh1PXQpLndpZHRoKigxK2EpfSksdSYmKGgtPXUud2lkdGgqYSk7dmFyIGM9LWgvMjtFKGUsZnVuY3Rpb24odCxlKXtkW2ldW2VdPWRbaV1bZV18fHtvZmZzZXQ6Yyx3aWR0aDp0LndpZHRofSxjKz10LndpZHRoKigxK2EpfSl9KSxkfShNKGUuZ2V0U2VyaWVzQnlUeXBlKHQpLGZ1bmN0aW9uKHQpe3JldHVybiFlLmlzU2VyaWVzRmlsdGVyZWQodCkmJnQuY29vcmRpbmF0ZVN5c3RlbSYmInBvbGFyIj09PXQuY29vcmRpbmF0ZVN5c3RlbS50eXBlfSkpO2UuZWFjaFNlcmllc0J5VHlwZSh0LGZ1bmN0aW9uKHQpe2lmKCJwb2xhciI9PT10LmNvb3JkaW5hdGVTeXN0ZW0udHlwZSl7dmFyIGU9dC5nZXREYXRhKCksaT10LmNvb3JkaW5hdGVTeXN0ZW0sbj1pLmdldEJhc2VBeGlzKCksbz1kVChpLG4pLGE9Y1QodCkscj1PW29dW2FdLHM9ci5vZmZzZXQsbD1yLndpZHRoLHU9aS5nZXRPdGhlckF4aXMobiksaD10LmNvb3JkaW5hdGVTeXN0ZW0uY3gsYz10LmNvb3JkaW5hdGVTeXN0ZW0uY3ksZD10LmdldCgiYmFyTWluSGVpZ2h0Iil8fDAsZj10LmdldCgiYmFyTWluQW5nbGUiKXx8MDtOW2FdPU5bYV18fFtdO2Zvcih2YXIgcD1lLm1hcERpbWVuc2lvbih1LmRpbSksZz1lLm1hcERpbWVuc2lvbihuLmRpbSksbT1scChlLHApLHY9InJhZGl1cyIhPT1uLmRpbXx8IXQuZ2V0KCJyb3VuZENhcCIsITApLHk9dS5nZXRFeHRlbnQoKVswXSx4PTAsXz1lLmNvdW50KCk7eDxfO3grKyl7dmFyIHc9ZS5nZXQocCx4KSxiPWUuZ2V0KGcseCk7aWYoIWlzTmFOKHcpKXt2YXIgUyxNLEksVCxBPTA8PXc/InAiOiJuIixEPXk7aWYobSYmKE5bYV1bYl18fChOW2FdW2JdPXtwOnksbjp5fSksRD1OW2FdW2JdW0FdKSwicmFkaXVzIj09PXUuZGltKXt2YXIgQz11LmRhdGFUb1JhZGl1cyh3KS15LEw9bi5kYXRhVG9BbmdsZShiKTtNYXRoLmFicyhDKTxkJiYoQz0oQzwwPy0xOjEpKmQpLE09KFM9RCkrQyxUPShJPUwtcyktbCxtJiYoTlthXVtiXVtBXT1NKX1lbHNle3ZhciBrPXUuZGF0YVRvQW5nbGUodyx2KS15LFA9bi5kYXRhVG9SYWRpdXMoYik7TWF0aC5hYnMoayk8ZiYmKGs9KGs8MD8tMToxKSpmKSxNPShTPVArcykrbCxUPShJPUQpK2ssbSYmKE5bYV1bYl1bQV09VCl9ZS5zZXRJdGVtTGF5b3V0KHgse2N4OmgsY3k6YyxyMDpTLHI6TSxzdGFydEFuZ2xlOi1JKk1hdGguUEkvMTgwLGVuZEFuZ2xlOi1UKk1hdGguUEkvMTgwfSl9fX19LHRoaXMpfSwiYmFyIikpLGJmKHt0eXBlOiJwb2xhciJ9KSxiKFR1LmV4dGVuZCh7dHlwZToiZ2VvIixjb29yZGluYXRlU3lzdGVtOm51bGwsbGF5b3V0TW9kZToiYm94Iixpbml0OmZ1bmN0aW9uKHQpe1R1LnByb3RvdHlwZS5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSx6byh0LCJsYWJlbCIsWyJzaG93Il0pfSxvcHRpb25VcGRhdGVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb24saT10aGlzO3QucmVnaW9ucz1heC5nZXRGaWxsZWRSZWdpb25zKHQucmVnaW9ucyx0Lm1hcCx0Lm5hbWVNYXApLHRoaXMuX29wdGlvbk1vZGVsTWFwPVModC5yZWdpb25zfHxbXSxmdW5jdGlvbih0LGUpe3JldHVybiBlLm5hbWUmJnQuc2V0KGUubmFtZSxuZXcgSWwoZSxpKSksdH0sUSgpKSx0aGlzLnVwZGF0ZVNlbGVjdGVkTWFwKHQucmVnaW9ucyl9LGRlZmF1bHRPcHRpb246e3psZXZlbDowLHo6MCxzaG93OiEwLGxlZnQ6ImNlbnRlciIsdG9wOiJjZW50ZXIiLGFzcGVjdFNjYWxlOm51bGwsc2lsZW50OiExLG1hcDoiIixib3VuZGluZ0Nvb3JkczpudWxsLGNlbnRlcjpudWxsLHpvb206MSxzY2FsZUxpbWl0Om51bGwsbGFiZWw6e3Nob3c6ITEsY29sb3I6IiMwMDAifSxpdGVtU3R5bGU6e2JvcmRlcldpZHRoOi41LGJvcmRlckNvbG9yOiIjNDQ0Iixjb2xvcjoiI2VlZSJ9LGVtcGhhc2lzOntsYWJlbDp7c2hvdzohMCxjb2xvcjoicmdiKDEwMCwwLDApIn0saXRlbVN0eWxlOntjb2xvcjoicmdiYSgyNTUsMjE1LDAsMC44KSJ9fSxyZWdpb25zOltdfSxnZXRSZWdpb25Nb2RlbDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fb3B0aW9uTW9kZWxNYXAuZ2V0KHQpfHxuZXcgSWwobnVsbCx0aGlzLHRoaXMuZWNNb2RlbCl9LGdldEZvcm1hdHRlZExhYmVsOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRSZWdpb25Nb2RlbCh0KS5nZXQoImxhYmVsIisoIm5vcm1hbCI9PT1lPyIuIjplKyIuIikrImZvcm1hdHRlciIpLG49e25hbWU6dH07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGk/KG4uc3RhdHVzPWUsaShuKSk6InN0cmluZyI9PXR5cGVvZiBpP2kucmVwbGFjZSgie2F9IixudWxsIT10P3Q6IiIpOnZvaWQgMH0sc2V0Wm9vbTpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbi56b29tPXR9LHNldENlbnRlcjpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbi5jZW50ZXI9dH19KSxWdiksYmYoe3R5cGU6ImdlbyIsaW5pdDpmdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBVeShlLCEwKTt0aGlzLl9tYXBEcmF3PWksdGhpcy5ncm91cC5hZGQoaS5ncm91cCl9LHJlbmRlcjpmdW5jdGlvbih0LGUsaSxuKXtpZighbnx8Imdlb1RvZ2dsZVNlbGVjdCIhPT1uLnR5cGV8fG4uZnJvbSE9PXRoaXMudWlkKXt2YXIgbz10aGlzLl9tYXBEcmF3O3QuZ2V0KCJzaG93Iik/by5kcmF3KHQsZSxpLHRoaXMsbik6dGhpcy5fbWFwRHJhdy5ncm91cC5yZW1vdmVBbGwoKSx0aGlzLmdyb3VwLnNpbGVudD10LmdldCgic2lsZW50Iil9fSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fbWFwRHJhdyYmdGhpcy5fbWFwRHJhdy5yZW1vdmUoKX19KSxMVCgidG9nZ2xlU2VsZWN0ZWQiLHt0eXBlOiJnZW9Ub2dnbGVTZWxlY3QiLGV2ZW50OiJnZW9zZWxlY3RjaGFuZ2VkIn0pLExUKCJzZWxlY3QiLHt0eXBlOiJnZW9TZWxlY3QiLGV2ZW50OiJnZW9zZWxlY3RlZCJ9KSxMVCgidW5TZWxlY3QiLHt0eXBlOiJnZW9VblNlbGVjdCIsZXZlbnQ6Imdlb3Vuc2VsZWN0ZWQifSk7ZnVuY3Rpb24ga1QodCxlLGkpe3RoaXMuX21vZGVsPXR9ZnVuY3Rpb24gUFQodCxlLGksbil7dmFyIG89aS5jYWxlbmRhck1vZGVsLGE9aS5zZXJpZXNNb2RlbCxyPW8/by5jb29yZGluYXRlU3lzdGVtOmE/YS5jb29yZGluYXRlU3lzdGVtOm51bGw7cmV0dXJuIHI9PT10aGlzP3JbdF0obik6bnVsbH1rVC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmtULHR5cGU6ImNhbGVuZGFyIixkaW1lbnNpb25zOlsidGltZSIsInZhbHVlIl0sZ2V0RGltZW5zaW9uc0luZm86ZnVuY3Rpb24oKXtyZXR1cm5be25hbWU6InRpbWUiLHR5cGU6InRpbWUifSwidmFsdWUiXX0sZ2V0UmFuZ2VJbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JhbmdlSW5mb30sZ2V0TW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZWx9LGdldFJlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVjdH0sZ2V0Q2VsbFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N3fSxnZXRDZWxsSGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NofSxnZXRPcmllbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50fSxnZXRGaXJzdERheU9mV2VlazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maXJzdERheU9mV2Vla30sZ2V0RGF0ZUluZm86ZnVuY3Rpb24odCl7dmFyIGU9KHQ9SGwodCkpLmdldEZ1bGxZZWFyKCksaT10LmdldE1vbnRoKCkrMTtpPWk8MTA/IjAiK2k6aTt2YXIgbj10LmdldERhdGUoKTtuPW48MTA/IjAiK246bjt2YXIgbz10LmdldERheSgpO3JldHVybnt5OmUsbTppLGQ6bixkYXk6bz1NYXRoLmFicygobys3LXRoaXMuZ2V0Rmlyc3REYXlPZldlZWsoKSklNyksdGltZTp0LmdldFRpbWUoKSxmb3JtYXRlZERhdGU6ZSsiLSIraSsiLSIrbixkYXRlOnR9fSxnZXROZXh0TkRheTpmdW5jdGlvbih0LGUpe3JldHVybiAwPT09KGU9ZXx8MCl8fCh0PW5ldyBEYXRlKHRoaXMuZ2V0RGF0ZUluZm8odCkudGltZSkpLnNldERhdGUodC5nZXREYXRlKCkrZSksdGhpcy5nZXREYXRlSW5mbyh0KX0sdXBkYXRlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fZmlyc3REYXlPZldlZWs9K3RoaXMuX21vZGVsLmdldE1vZGVsKCJkYXlMYWJlbCIpLmdldCgiZmlyc3REYXkiKSx0aGlzLl9vcmllbnQ9dGhpcy5fbW9kZWwuZ2V0KCJvcmllbnQiKSx0aGlzLl9saW5lV2lkdGg9dGhpcy5fbW9kZWwuZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLmdldEl0ZW1TdHlsZSgpLmxpbmVXaWR0aHx8MCx0aGlzLl9yYW5nZUluZm89dGhpcy5fZ2V0UmFuZ2VJbmZvKHRoaXMuX2luaXRSYW5nZU9wdGlvbigpKTt2YXIgaT10aGlzLl9yYW5nZUluZm8ud2Vla3N8fDEsbj1bIndpZHRoIiwiaGVpZ2h0Il0sbz10aGlzLl9tb2RlbC5nZXQoImNlbGxTaXplIikuc2xpY2UoKSxhPXRoaXMuX21vZGVsLmdldEJveExheW91dFBhcmFtcygpLHI9Imhvcml6b250YWwiPT09dGhpcy5fb3JpZW50P1tpLDddOls3LGldO0UoWzAsMV0sZnVuY3Rpb24odCl7dShvLHQpJiYoYVtuW3RdXT1vW3RdKnJbdF0pfSk7dmFyIHM9e3dpZHRoOmUuZ2V0V2lkdGgoKSxoZWlnaHQ6ZS5nZXRIZWlnaHQoKX0sbD10aGlzLl9yZWN0PXZ1KGEscyk7ZnVuY3Rpb24gdSh0LGUpe3JldHVybiBudWxsIT10W2VdJiYiYXV0byIhPT10W2VdfUUoWzAsMV0sZnVuY3Rpb24odCl7dShvLHQpfHwob1t0XT1sW25bdF1dL3JbdF0pfSksdGhpcy5fc3c9b1swXSx0aGlzLl9zaD1vWzFdfSxkYXRhVG9Qb2ludDpmdW5jdGlvbih0LGUpe2sodCkmJih0PXRbMF0pLG51bGw9PWUmJihlPSEwKTt2YXIgaT10aGlzLmdldERhdGVJbmZvKHQpLG49dGhpcy5fcmFuZ2VJbmZvLG89aS5mb3JtYXRlZERhdGU7aWYoZSYmIShpLnRpbWU+PW4uc3RhcnQudGltZSYmaS50aW1lPG4uZW5kLnRpbWUrODY0ZTUpKXJldHVybltOYU4sTmFOXTt2YXIgYT1pLmRheSxyPXRoaXMuX2dldFJhbmdlSW5mbyhbbi5zdGFydC50aW1lLG9dKS5udGhXZWVrO3JldHVybiJ2ZXJ0aWNhbCI9PT10aGlzLl9vcmllbnQ/W3RoaXMuX3JlY3QueCthKnRoaXMuX3N3K3RoaXMuX3N3LzIsdGhpcy5fcmVjdC55K3IqdGhpcy5fc2grdGhpcy5fc2gvMl06W3RoaXMuX3JlY3QueCtyKnRoaXMuX3N3K3RoaXMuX3N3LzIsdGhpcy5fcmVjdC55K2EqdGhpcy5fc2grdGhpcy5fc2gvMl19LHBvaW50VG9EYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucG9pbnRUb0RhdGUodCk7cmV0dXJuIGUmJmUudGltZX0sZGF0YVRvUmVjdDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZGF0YVRvUG9pbnQodCxlKTtyZXR1cm57Y29udGVudFNoYXBlOnt4OmlbMF0tKHRoaXMuX3N3LXRoaXMuX2xpbmVXaWR0aCkvMix5OmlbMV0tKHRoaXMuX3NoLXRoaXMuX2xpbmVXaWR0aCkvMix3aWR0aDp0aGlzLl9zdy10aGlzLl9saW5lV2lkdGgsaGVpZ2h0OnRoaXMuX3NoLXRoaXMuX2xpbmVXaWR0aH0sY2VudGVyOmksdGw6W2lbMF0tdGhpcy5fc3cvMixpWzFdLXRoaXMuX3NoLzJdLHRyOltpWzBdK3RoaXMuX3N3LzIsaVsxXS10aGlzLl9zaC8yXSxicjpbaVswXSt0aGlzLl9zdy8yLGlbMV0rdGhpcy5fc2gvMl0sYmw6W2lbMF0tdGhpcy5fc3cvMixpWzFdK3RoaXMuX3NoLzJdfX0scG9pbnRUb0RhdGU6ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5mbG9vcigodFswXS10aGlzLl9yZWN0LngpL3RoaXMuX3N3KSsxLGk9TWF0aC5mbG9vcigodFsxXS10aGlzLl9yZWN0LnkpL3RoaXMuX3NoKSsxLG49dGhpcy5fcmFuZ2VJbmZvLnJhbmdlO3JldHVybiJ2ZXJ0aWNhbCI9PT10aGlzLl9vcmllbnQ/dGhpcy5fZ2V0RGF0ZUJ5V2Vla3NBbmREYXkoaSxlLTEsbik6dGhpcy5fZ2V0RGF0ZUJ5V2Vla3NBbmREYXkoZSxpLTEsbil9LGNvbnZlcnRUb1BpeGVsOlQoUFQsImRhdGFUb1BvaW50IiksY29udmVydEZyb21QaXhlbDpUKFBULCJwb2ludFRvRGF0YSIpLF9pbml0UmFuZ2VPcHRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tb2RlbC5nZXQoInJhbmdlIiksZT10O2lmKGsoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksL15cZHs0fSQvLnRlc3QoZSkmJih0PVtlKyItMDEtMDEiLGUrIi0xMi0zMSJdKSwvXlxkezR9W1wvfC1dXGR7MSwyfSQvLnRlc3QoZSkpe3ZhciBpPXRoaXMuZ2V0RGF0ZUluZm8oZSksbj1pLmRhdGU7bi5zZXRNb250aChuLmdldE1vbnRoKCkrMSk7dmFyIG89dGhpcy5nZXROZXh0TkRheShuLC0xKTt0PVtpLmZvcm1hdGVkRGF0ZSxvLmZvcm1hdGVkRGF0ZV19L15cZHs0fVtcL3wtXVxkezEsMn1bXC98LV1cZHsxLDJ9JC8udGVzdChlKSYmKHQ9W2UsZV0pO3ZhciBhPXRoaXMuX2dldFJhbmdlSW5mbyh0KTtyZXR1cm4gYS5zdGFydC50aW1lPmEuZW5kLnRpbWUmJnQucmV2ZXJzZSgpLHR9LF9nZXRSYW5nZUluZm86ZnVuY3Rpb24odCl7dmFyIGU7KHQ9W3RoaXMuZ2V0RGF0ZUluZm8odFswXSksdGhpcy5nZXREYXRlSW5mbyh0WzFdKV0pWzBdLnRpbWU+dFsxXS50aW1lJiYoZT0hMCx0LnJldmVyc2UoKSk7dmFyIGk9TWF0aC5mbG9vcih0WzFdLnRpbWUvODY0ZTUpLU1hdGguZmxvb3IodFswXS50aW1lLzg2NGU1KSsxLG49bmV3IERhdGUodFswXS50aW1lKSxvPW4uZ2V0RGF0ZSgpLGE9dFsxXS5kYXRlLmdldERhdGUoKTtpZihuLnNldERhdGUobytpLTEpLG4uZ2V0RGF0ZSgpIT09YSlmb3IodmFyIHI9MDxuLmdldFRpbWUoKS10WzFdLnRpbWU/MTotMTtuLmdldERhdGUoKSE9PWEmJjA8KG4uZ2V0VGltZSgpLXRbMV0udGltZSkqcjspaS09cixuLnNldERhdGUobytpLTEpO3ZhciBzPU1hdGguZmxvb3IoKGkrdFswXS5kYXkrNikvNyksbD1lPzEtczpzLTE7cmV0dXJuIGUmJnQucmV2ZXJzZSgpLHtyYW5nZTpbdFswXS5mb3JtYXRlZERhdGUsdFsxXS5mb3JtYXRlZERhdGVdLHN0YXJ0OnRbMF0sZW5kOnRbMV0sYWxsRGF5Omksd2Vla3M6cyxudGhXZWVrOmwsZndlZWs6dFswXS5kYXksbHdlZWs6dFsxXS5kYXl9fSxfZ2V0RGF0ZUJ5V2Vla3NBbmREYXk6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuX2dldFJhbmdlSW5mbyhpKTtpZih0Pm4ud2Vla3N8fDA9PT10JiZlPG4uZndlZWt8fHQ9PT1uLndlZWtzJiZlPm4ubHdlZWspcmV0dXJuITE7dmFyIG89NyoodC0xKS1uLmZ3ZWVrK2UsYT1uZXcgRGF0ZShuLnN0YXJ0LnRpbWUpO3JldHVybiBhLnNldERhdGUobi5zdGFydC5kK28pLHRoaXMuZ2V0RGF0ZUluZm8oYSl9fSxrVC5kaW1lbnNpb25zPWtULnByb3RvdHlwZS5kaW1lbnNpb25zLGtULmdldERpbWVuc2lvbnNJbmZvPWtULnByb3RvdHlwZS5nZXREaW1lbnNpb25zSW5mbyxrVC5jcmVhdGU9ZnVuY3Rpb24oaSxuKXt2YXIgbz1bXTtyZXR1cm4gaS5lYWNoQ29tcG9uZW50KCJjYWxlbmRhciIsZnVuY3Rpb24odCl7dmFyIGU9bmV3IGtUKHQsaSxuKTtvLnB1c2goZSksdC5jb29yZGluYXRlU3lzdGVtPWV9KSxpLmVhY2hTZXJpZXMoZnVuY3Rpb24odCl7ImNhbGVuZGFyIj09PXQuZ2V0KCJjb29yZGluYXRlU3lzdGVtIikmJih0LmNvb3JkaW5hdGVTeXN0ZW09b1t0LmdldCgiY2FsZW5kYXJJbmRleCIpfHwwXSl9KSxvfSxuaC5yZWdpc3RlcigiY2FsZW5kYXIiLGtUKTt2YXIgTlQ9VHUuZXh0ZW5kKHt0eXBlOiJjYWxlbmRhciIsY29vcmRpbmF0ZVN5c3RlbTpudWxsLGRlZmF1bHRPcHRpb246e3psZXZlbDowLHo6MixsZWZ0OjgwLHRvcDo2MCxjZWxsU2l6ZToyMCxvcmllbnQ6Imhvcml6b250YWwiLHNwbGl0TGluZTp7c2hvdzohMCxsaW5lU3R5bGU6e2NvbG9yOiIjMDAwIix3aWR0aDoxLHR5cGU6InNvbGlkIn19LGl0ZW1TdHlsZTp7Y29sb3I6IiNmZmYiLGJvcmRlcldpZHRoOjEsYm9yZGVyQ29sb3I6IiNjY2MifSxkYXlMYWJlbDp7c2hvdzohMCxmaXJzdERheTowLHBvc2l0aW9uOiJzdGFydCIsbWFyZ2luOiI1MCUiLG5hbWVNYXA6ImVuIixjb2xvcjoiIzAwMCJ9LG1vbnRoTGFiZWw6e3Nob3c6ITAscG9zaXRpb246InN0YXJ0IixtYXJnaW46NSxhbGlnbjoiY2VudGVyIixuYW1lTWFwOiJlbiIsZm9ybWF0dGVyOm51bGwsY29sb3I6IiMwMDAifSx5ZWFyTGFiZWw6e3Nob3c6ITAscG9zaXRpb246bnVsbCxtYXJnaW46MzAsZm9ybWF0dGVyOm51bGwsY29sb3I6IiNjY2MiLGZvbnRGYW1pbHk6InNhbnMtc2VyaWYiLGZvbnRXZWlnaHQ6ImJvbGRlciIsZm9udFNpemU6MjB9fSxpbml0OmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPV91KHQpO05ULnN1cGVyQXBwbHkodGhpcywiaW5pdCIsYXJndW1lbnRzKSxPVCh0LG8pfSxtZXJnZU9wdGlvbjpmdW5jdGlvbih0LGUpe05ULnN1cGVyQXBwbHkodGhpcywibWVyZ2VPcHRpb24iLGFyZ3VtZW50cyksT1QodGhpcy5vcHRpb24sdCl9fSk7ZnVuY3Rpb24gT1QodCxlKXt2YXIgaT10LmNlbGxTaXplO2soaSk/MT09PWkubGVuZ3RoJiYoaVsxXT1pWzBdKTppPXQuY2VsbFNpemU9W2ksaV07dmFyIG49TihbMCwxXSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9dFtwdVtlXVswXV18fG51bGwhPXRbcHVbZV1bMV1dJiZudWxsIT10W3B1W2VdWzJdXX0oZSx0KSYmKGlbdF09ImF1dG8iKSxudWxsIT1pW3RdJiYiYXV0byIhPT1pW3RdfSk7eHUodCxlLHt0eXBlOiJib3giLGlnbm9yZVNpemU6bn0pfXZhciBFVD17RU46WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiXSxDTjpbIuS4gOaciCIsIuS6jOaciCIsIuS4ieaciCIsIuWbm+aciCIsIuS6lOaciCIsIuWFreaciCIsIuS4g+aciCIsIuWFq+aciCIsIuS5neaciCIsIuWNgeaciCIsIuWNgeS4gOaciCIsIuWNgeS6jOaciCJdfSx6VD17RU46WyJTIiwiTSIsIlQiLCJXIiwiVCIsIkYiLCJTIl0sQ046WyLml6UiLCLkuIAiLCLkuowiLCLkuIkiLCLlm5siLCLkupQiLCLlha0iXX07YmYoe3R5cGU6ImNhbGVuZGFyIixfdGxwb2ludHM6bnVsbCxfYmxwb2ludHM6bnVsbCxfZmlyc3REYXlPZk1vbnRoOm51bGwsX2ZpcnN0RGF5UG9pbnRzOm51bGwscmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLmdyb3VwO24ucmVtb3ZlQWxsKCk7dmFyIG89dC5jb29yZGluYXRlU3lzdGVtLGE9by5nZXRSYW5nZUluZm8oKSxyPW8uZ2V0T3JpZW50KCk7dGhpcy5fcmVuZGVyRGF5UmVjdCh0LGEsbiksdGhpcy5fcmVuZGVyTGluZXModCxhLHIsbiksdGhpcy5fcmVuZGVyWWVhclRleHQodCxhLHIsbiksdGhpcy5fcmVuZGVyTW9udGhUZXh0KHQscixuKSx0aGlzLl9yZW5kZXJXZWVrVGV4dCh0LGEscixuKX0sX3JlbmRlckRheVJlY3Q6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj10LmNvb3JkaW5hdGVTeXN0ZW0sbz10LmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKSxhPW4uZ2V0Q2VsbFdpZHRoKCkscj1uLmdldENlbGxIZWlnaHQoKSxzPWUuc3RhcnQudGltZTtzPD1lLmVuZC50aW1lO3M9bi5nZXROZXh0TkRheShzLDEpLnRpbWUpe3ZhciBsPW4uZGF0YVRvUmVjdChbc10sITEpLnRsLHU9bmV3IGlzKHtzaGFwZTp7eDpsWzBdLHk6bFsxXSx3aWR0aDphLGhlaWdodDpyfSxjdXJzb3I6ImRlZmF1bHQiLHN0eWxlOm99KTtpLmFkZCh1KX19LF9yZW5kZXJMaW5lczpmdW5jdGlvbihpLHQsbixvKXt2YXIgYT10aGlzLHI9aS5jb29yZGluYXRlU3lzdGVtLHM9aS5nZXRNb2RlbCgic3BsaXRMaW5lLmxpbmVTdHlsZSIpLmdldExpbmVTdHlsZSgpLGw9aS5nZXQoInNwbGl0TGluZS5zaG93IiksZT1zLmxpbmVXaWR0aDt0aGlzLl90bHBvaW50cz1bXSx0aGlzLl9ibHBvaW50cz1bXSx0aGlzLl9maXJzdERheU9mTW9udGg9W10sdGhpcy5fZmlyc3REYXlQb2ludHM9W107Zm9yKHZhciB1PXQuc3RhcnQsaD0wO3UudGltZTw9dC5lbmQudGltZTtoKyspe2QodS5mb3JtYXRlZERhdGUpLDA9PT1oJiYodT1yLmdldERhdGVJbmZvKHQuc3RhcnQueSsiLSIrdC5zdGFydC5tKSk7dmFyIGM9dS5kYXRlO2Muc2V0TW9udGgoYy5nZXRNb250aCgpKzEpLHU9ci5nZXREYXRlSW5mbyhjKX1mdW5jdGlvbiBkKHQpe2EuX2ZpcnN0RGF5T2ZNb250aC5wdXNoKHIuZ2V0RGF0ZUluZm8odCkpLGEuX2ZpcnN0RGF5UG9pbnRzLnB1c2goci5kYXRhVG9SZWN0KFt0XSwhMSkudGwpO3ZhciBlPWEuX2dldExpbmVQb2ludHNPZk9uZVdlZWsoaSx0LG4pO2EuX3RscG9pbnRzLnB1c2goZVswXSksYS5fYmxwb2ludHMucHVzaChlW2UubGVuZ3RoLTFdKSxsJiZhLl9kcmF3U3BsaXRsaW5lKGUscyxvKX1kKHIuZ2V0TmV4dE5EYXkodC5lbmQudGltZSwxKS5mb3JtYXRlZERhdGUpLGwmJnRoaXMuX2RyYXdTcGxpdGxpbmUoYS5fZ2V0RWRnZXNQb2ludHMoYS5fdGxwb2ludHMsZSxuKSxzLG8pLGwmJnRoaXMuX2RyYXdTcGxpdGxpbmUoYS5fZ2V0RWRnZXNQb2ludHMoYS5fYmxwb2ludHMsZSxuKSxzLG8pfSxfZ2V0RWRnZXNQb2ludHM6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPVt0WzBdLnNsaWNlKCksdFt0Lmxlbmd0aC0xXS5zbGljZSgpXSxvPSJob3Jpem9udGFsIj09PWk/MDoxO3JldHVybiBuWzBdW29dPW5bMF1bb10tZS8yLG5bMV1bb109blsxXVtvXStlLzIsbn0sX2RyYXdTcGxpdGxpbmU6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPW5ldyBLcih7ejI6MjAsc2hhcGU6e3BvaW50czp0fSxzdHlsZTplfSk7aS5hZGQobil9LF9nZXRMaW5lUG9pbnRzT2ZPbmVXZWVrOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10LmNvb3JkaW5hdGVTeXN0ZW07ZT1uLmdldERhdGVJbmZvKGUpO2Zvcih2YXIgbz1bXSxhPTA7YTw3O2ErKyl7dmFyIHI9bi5nZXROZXh0TkRheShlLnRpbWUsYSkscz1uLmRhdGFUb1JlY3QoW3IudGltZV0sITEpO29bMipyLmRheV09cy50bCxvWzIqci5kYXkrMV09c1siaG9yaXpvbnRhbCI9PT1pPyJibCI6InRyIl19cmV0dXJuIG99LF9mb3JtYXR0ZXJMYWJlbDpmdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdCYmdD9hdSh0LGUpOiJmdW5jdGlvbiI9PXR5cGVvZiB0P3QoZSk6ZS5uYW1lTWFwfSxfeWVhclRleHRQb3NpdGlvbkNvbnRyb2w6ZnVuY3Rpb24odCxlLGksbixvKXtlPWUuc2xpY2UoKTt2YXIgYT1bImNlbnRlciIsImJvdHRvbSJdOyJib3R0b20iPT09bj8oZVsxXSs9byxhPVsiY2VudGVyIiwidG9wIl0pOiJsZWZ0Ij09PW4/ZVswXS09bzoicmlnaHQiPT09bj8oZVswXSs9byxhPVsiY2VudGVyIiwidG9wIl0pOmVbMV0tPW87dmFyIHI9MDtyZXR1cm4ibGVmdCIhPT1uJiYicmlnaHQiIT09bnx8KHI9TWF0aC5QSS8yKSx7cm90YXRpb246cixwb3NpdGlvbjplLHN0eWxlOnt0ZXh0QWxpZ246YVswXSx0ZXh0VmVydGljYWxBbGlnbjphWzFdfX19LF9yZW5kZXJZZWFyVGV4dDpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10LmdldE1vZGVsKCJ5ZWFyTGFiZWwiKTtpZihvLmdldCgic2hvdyIpKXt2YXIgYT1vLmdldCgibWFyZ2luIikscj1vLmdldCgicG9zaXRpb24iKTtyPXJ8fCgiaG9yaXpvbnRhbCIhPT1pPyJ0b3AiOiJsZWZ0Iik7dmFyIHM9W3RoaXMuX3RscG9pbnRzW3RoaXMuX3RscG9pbnRzLmxlbmd0aC0xXSx0aGlzLl9ibHBvaW50c1swXV0sbD0oc1swXVswXStzWzFdWzBdKS8yLHU9KHNbMF1bMV0rc1sxXVsxXSkvMixoPSJob3Jpem9udGFsIj09PWk/MDoxLGM9e3RvcDpbbCxzW2hdWzFdXSxib3R0b206W2wsc1sxLWhdWzFdXSxsZWZ0OltzWzEtaF1bMF0sdV0scmlnaHQ6W3NbaF1bMF0sdV19LGQ9ZS5zdGFydC55OytlLmVuZC55PitlLnN0YXJ0LnkmJihkPWQrIi0iK2UuZW5kLnkpO3ZhciBmPW8uZ2V0KCJmb3JtYXR0ZXIiKSxwPXtzdGFydDplLnN0YXJ0LnksZW5kOmUuZW5kLnksbmFtZU1hcDpkfSxnPXRoaXMuX2Zvcm1hdHRlckxhYmVsKGYscCksbT1uZXcgRnIoe3oyOjMwfSk7UXMobS5zdHlsZSxvLHt0ZXh0Omd9KSxtLmF0dHIodGhpcy5feWVhclRleHRQb3NpdGlvbkNvbnRyb2wobSxjW3JdLGkscixhKSksbi5hZGQobSl9fSxfbW9udGhUZXh0UG9zaXRpb25Db250cm9sOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9ImxlZnQiLHI9InRvcCIscz10WzBdLGw9dFsxXTtyZXR1cm4iaG9yaXpvbnRhbCI9PT1pPyhsKz1vLGUmJihhPSJjZW50ZXIiKSwic3RhcnQiPT09biYmKHI9ImJvdHRvbSIpKToocys9byxlJiYocj0ibWlkZGxlIiksInN0YXJ0Ij09PW4mJihhPSJyaWdodCIpKSx7eDpzLHk6bCx0ZXh0QWxpZ246YSx0ZXh0VmVydGljYWxBbGlnbjpyfX0sX3JlbmRlck1vbnRoVGV4dDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dC5nZXRNb2RlbCgibW9udGhMYWJlbCIpO2lmKG4uZ2V0KCJzaG93Iikpe3ZhciBvPW4uZ2V0KCJuYW1lTWFwIiksYT1uLmdldCgibWFyZ2luIikscj1uLmdldCgicG9zaXRpb24iKSxzPW4uZ2V0KCJhbGlnbiIpLGw9W3RoaXMuX3RscG9pbnRzLHRoaXMuX2JscG9pbnRzXTt6KG8pJiYobz1FVFtvLnRvVXBwZXJDYXNlKCldfHxbXSk7dmFyIHU9InN0YXJ0Ij09PXI/MDoxLGg9Imhvcml6b250YWwiPT09ZT8wOjE7YT0ic3RhcnQiPT09cj8tYTphO2Zvcih2YXIgYz0iY2VudGVyIj09PXMsZD0wO2Q8bFt1XS5sZW5ndGgtMTtkKyspe3ZhciBmPWxbdV1bZF0uc2xpY2UoKSxwPXRoaXMuX2ZpcnN0RGF5T2ZNb250aFtkXTtpZihjKXt2YXIgZz10aGlzLl9maXJzdERheVBvaW50c1tkXTtmW2hdPShnW2hdK2xbMF1bZCsxXVtoXSkvMn12YXIgbT1uLmdldCgiZm9ybWF0dGVyIiksdj1vWytwLm0tMV0seT17eXl5eTpwLnkseXk6KHAueSsiIikuc2xpY2UoMiksTU06cC5tLE06K3AubSxuYW1lTWFwOnZ9LHg9dGhpcy5fZm9ybWF0dGVyTGFiZWwobSx5KSxfPW5ldyBGcih7ejI6MzB9KTtMKFFzKF8uc3R5bGUsbix7dGV4dDp4fSksdGhpcy5fbW9udGhUZXh0UG9zaXRpb25Db250cm9sKGYsYyxlLHIsYSkpLGkuYWRkKF8pfX19LF93ZWVrVGV4dFBvc2l0aW9uQ29udHJvbDpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhPSJjZW50ZXIiLHI9Im1pZGRsZSIscz10WzBdLGw9dFsxXSx1PSJzdGFydCI9PT1pO3JldHVybiJob3Jpem9udGFsIj09PWU/KHM9cytuKyh1PzE6LTEpKm9bMF0vMixhPXU/InJpZ2h0IjoibGVmdCIpOihsPWwrbisodT8xOi0xKSpvWzFdLzIscj11PyJib3R0b20iOiJ0b3AiKSx7eDpzLHk6bCx0ZXh0QWxpZ246YSx0ZXh0VmVydGljYWxBbGlnbjpyfX0sX3JlbmRlcldlZWtUZXh0OmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXQuZ2V0TW9kZWwoImRheUxhYmVsIik7aWYoby5nZXQoInNob3ciKSl7dmFyIGE9dC5jb29yZGluYXRlU3lzdGVtLHI9by5nZXQoInBvc2l0aW9uIikscz1vLmdldCgibmFtZU1hcCIpLGw9by5nZXQoIm1hcmdpbiIpLHU9YS5nZXRGaXJzdERheU9mV2VlaygpO3oocykmJihzPXpUW3MudG9VcHBlckNhc2UoKV18fFtdKTt2YXIgaD1hLmdldE5leHRORGF5KGUuZW5kLnRpbWUsNy1lLmx3ZWVrKS50aW1lLGM9W2EuZ2V0Q2VsbFdpZHRoKCksYS5nZXRDZWxsSGVpZ2h0KCldO2w9UGwobCxjWyJob3Jpem9udGFsIj09PWk/MDoxXSksInN0YXJ0Ij09PXImJihoPWEuZ2V0TmV4dE5EYXkoZS5zdGFydC50aW1lLC0oNytlLmZ3ZWVrKSkudGltZSxsPS1sKTtmb3IodmFyIGQ9MDtkPDc7ZCsrKXt2YXIgZixwPWEuZ2V0TmV4dE5EYXkoaCxkKSxnPWEuZGF0YVRvUmVjdChbcC50aW1lXSwhMSkuY2VudGVyO2Y9TWF0aC5hYnMoKGQrdSklNyk7dmFyIG09bmV3IEZyKHt6MjozMH0pO0woUXMobS5zdHlsZSxvLHt0ZXh0OnNbZl19KSx0aGlzLl93ZWVrVGV4dFBvc2l0aW9uQ29udHJvbChnLGkscixsLGMpKSxuLmFkZChtKX19fX0pO3ZhciBSVD17cGF0aDpudWxsLGNvbXBvdW5kUGF0aDpudWxsLGdyb3VwOklpLGltYWdlOnFuLHRleHQ6RnJ9O2ZmKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZ3JhcGhpYztrKGUpP2VbMF0mJmVbMF0uZWxlbWVudHM/dC5ncmFwaGljPVt0LmdyYXBoaWNbMF1dOnQuZ3JhcGhpYz1be2VsZW1lbnRzOmV9XTplJiYhZS5lbGVtZW50cyYmKHQuZ3JhcGhpYz1be2VsZW1lbnRzOltlXX1dKX0pO3ZhciBCVD13Zih7dHlwZToiZ3JhcGhpYyIsZGVmYXVsdE9wdGlvbjp7ZWxlbWVudHM6W10scGFyZW50SWQ6bnVsbH0sX2VsT3B0aW9uc1RvVXBkYXRlOm51bGwsbWVyZ2VPcHRpb246ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb24uZWxlbWVudHM7dGhpcy5vcHRpb24uZWxlbWVudHM9bnVsbCxCVC5zdXBlckFwcGx5KHRoaXMsIm1lcmdlT3B0aW9uIixhcmd1bWVudHMpLHRoaXMub3B0aW9uLmVsZW1lbnRzPWV9LG9wdGlvblVwZGF0ZWQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm9wdGlvbixuPShlP2k6dCkuZWxlbWVudHMsbz1pLmVsZW1lbnRzPWU/W106aS5lbGVtZW50cyxhPVtdO3RoaXMuX2ZsYXR0ZW4obixhKTt2YXIgcj1WbyhvLGEpO0dvKHIpO3ZhciBzPXRoaXMuX2VsT3B0aW9uc1RvVXBkYXRlPVtdO0UocixmdW5jdGlvbih0LGUpe3ZhciBpPXQub3B0aW9uO2kmJihzLnB1c2goaSksZnVuY3Rpb24odCxlKXt2YXIgaT10LmV4aXN0O2lmKGUuaWQ9dC5rZXlJbmZvLmlkLCFlLnR5cGUmJmkmJihlLnR5cGU9aS50eXBlKSxudWxsPT1lLnBhcmVudElkKXt2YXIgbj1lLnBhcmVudE9wdGlvbjtuP2UucGFyZW50SWQ9bi5pZDppJiYoZS5wYXJlbnRJZD1pLnBhcmVudElkKX1lLnBhcmVudE9wdGlvbj1udWxsfSh0LGkpLGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1MKHt9LGkpLG89dFtlXSxhPWkuJGFjdGlvbnx8Im1lcmdlIjsibWVyZ2UiPT09YT9vPyhtKG8sbiwhMCkseHUobyxuLHtpZ25vcmVTaXplOiEwfSksd3UoaSxvKSk6dFtlXT1uOiJyZXBsYWNlIj09PWE/dFtlXT1uOiJyZW1vdmUiPT09YSYmbyYmKHRbZV09bnVsbCl9KG8sZSxpKSxmdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybjt0Lmh2PWUuaHY9W0ZUKGUsWyJsZWZ0IiwicmlnaHQiXSksRlQoZSxbInRvcCIsImJvdHRvbSJdKV0sImdyb3VwIj09PXQudHlwZSYmKG51bGw9PXQud2lkdGgmJih0LndpZHRoPWUud2lkdGg9MCksbnVsbD09dC5oZWlnaHQmJih0LmhlaWdodD1lLmhlaWdodD0wKSl9KG9bZV0saSkpfSx0aGlzKTtmb3IodmFyIGw9by5sZW5ndGgtMTswPD1sO2wtLSludWxsPT1vW2xdP28uc3BsaWNlKGwsMSk6ZGVsZXRlIG9bbF0uJGFjdGlvbn0sX2ZsYXR0ZW46ZnVuY3Rpb24odCxpLG4pe0UodCxmdW5jdGlvbih0KXtpZih0KXtuJiYodC5wYXJlbnRPcHRpb249biksaS5wdXNoKHQpO3ZhciBlPXQuY2hpbGRyZW47Imdyb3VwIj09PXQudHlwZSYmZSYmdGhpcy5fZmxhdHRlbihlLGksdCksZGVsZXRlIHQuY2hpbGRyZW59fSx0aGlzKX0sdXNlRWxPcHRpb25zVG9VcGRhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9lbE9wdGlvbnNUb1VwZGF0ZTtyZXR1cm4gdGhpcy5fZWxPcHRpb25zVG9VcGRhdGU9bnVsbCx0fX0pO2Z1bmN0aW9uIFZUKHQsZSxpLG4pe3ZhciBvPWkudHlwZSxhPW5ldyhSVC5oYXNPd25Qcm9wZXJ0eShvKT9SVFtvXTpBcyhvKSkoaSk7ZS5hZGQoYSksbi5zZXQodCxhKSxhLl9fZWNHcmFwaGljSWQ9dH1mdW5jdGlvbiBHVCh0LGUpe3ZhciBpPXQmJnQucGFyZW50O2kmJigiZ3JvdXAiPT09dC50eXBlJiZ0LnRyYXZlcnNlKGZ1bmN0aW9uKHQpe0dUKHQsZSl9KSxlLnJlbW92ZUtleSh0Ll9fZWNHcmFwaGljSWQpLGkucmVtb3ZlKHQpKX1mdW5jdGlvbiBGVChlLHQpe3ZhciBpO3JldHVybiBFKHQsZnVuY3Rpb24odCl7bnVsbCE9ZVt0XSYmImF1dG8iIT09ZVt0XSYmKGk9ITApfSksaX1iZih7dHlwZToiZ3JhcGhpYyIsaW5pdDpmdW5jdGlvbih0LGUpe3RoaXMuX2VsTWFwPVEoKSx0aGlzLl9sYXN0R3JhcGhpY01vZGVsfSxyZW5kZXI6ZnVuY3Rpb24odCxlLGkpe3QhPT10aGlzLl9sYXN0R3JhcGhpY01vZGVsJiZ0aGlzLl9jbGVhcigpLHRoaXMuX2xhc3RHcmFwaGljTW9kZWw9dCx0aGlzLl91cGRhdGVFbGVtZW50cyh0KSx0aGlzLl9yZWxvY2F0ZSh0LGkpfSxfdXBkYXRlRWxlbWVudHM6ZnVuY3Rpb24odSl7dmFyIHQ9dS51c2VFbE9wdGlvbnNUb1VwZGF0ZSgpO2lmKHQpe3ZhciBoPXRoaXMuX2VsTWFwLGM9dGhpcy5ncm91cDtFKHQsZnVuY3Rpb24odCl7dmFyIGU9dC4kYWN0aW9uLGk9dC5pZCxuPWguZ2V0KGkpLG89dC5wYXJlbnRJZCxhPW51bGwhPW8/aC5nZXQobyk6YyxyPXQuc3R5bGU7InRleHQiPT09dC50eXBlJiZyJiYodC5odiYmdC5odlsxXSYmKHIudGV4dFZlcnRpY2FsQWxpZ249ci50ZXh0QmFzZWxpbmU9bnVsbCksIXIuaGFzT3duUHJvcGVydHkoInRleHRGaWxsIikmJnIuZmlsbCYmKHIudGV4dEZpbGw9ci5maWxsKSwhci5oYXNPd25Qcm9wZXJ0eSgidGV4dFN0cm9rZSIpJiZyLnN0cm9rZSYmKHIudGV4dFN0cm9rZT1yLnN0cm9rZSkpO3ZhciBzPWZ1bmN0aW9uKGUpe3JldHVybiBlPUwoe30sZSksRShbImlkIiwicGFyZW50SWQiLCIkYWN0aW9uIiwiaHYiLCJib3VuZGluZyJdLmNvbmNhdChmdSksZnVuY3Rpb24odCl7ZGVsZXRlIGVbdF19KSxlfSh0KTtlJiYibWVyZ2UiIT09ZT8icmVwbGFjZSI9PT1lPyhHVChuLGgpLFZUKGksYSxzLGgpKToicmVtb3ZlIj09PWUmJkdUKG4saCk6bj9uLmF0dHIocyk6VlQoaSxhLHMsaCk7dmFyIGw9aC5nZXQoaSk7bCYmKGwuX19lY0dyYXBoaWNXaWR0aE9wdGlvbj10LndpZHRoLGwuX19lY0dyYXBoaWNIZWlnaHRPcHRpb249dC5oZWlnaHQsZnVuY3Rpb24odCxlKXt2YXIgaT10LmV2ZW50RGF0YTt0LnNpbGVudHx8dC5pZ25vcmV8fGl8fChpPXQuZXZlbnREYXRhPXtjb21wb25lbnRUeXBlOiJncmFwaGljIixjb21wb25lbnRJbmRleDplLmNvbXBvbmVudEluZGV4LG5hbWU6dC5uYW1lfSk7aSYmKGkuaW5mbz10LmluZm8pfShsLHUpKX0pfX0sX3JlbG9jYXRlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXQub3B0aW9uLmVsZW1lbnRzLG49dGhpcy5ncm91cCxvPXRoaXMuX2VsTWFwLGE9ZS5nZXRXaWR0aCgpLHI9ZS5nZXRIZWlnaHQoKSxzPTA7czxpLmxlbmd0aDtzKyspe3ZhciBsPWlbc107aWYoKGg9by5nZXQobC5pZCkpJiZoLmlzR3JvdXApe3ZhciB1PShjPWgucGFyZW50KT09PW47aC5fX2VjR3JhcGhpY1dpZHRoPVBsKGguX19lY0dyYXBoaWNXaWR0aE9wdGlvbix1P2E6Yy5fX2VjR3JhcGhpY1dpZHRoKXx8MCxoLl9fZWNHcmFwaGljSGVpZ2h0PVBsKGguX19lY0dyYXBoaWNIZWlnaHRPcHRpb24sdT9yOmMuX19lY0dyYXBoaWNIZWlnaHQpfHwwfX1mb3Iocz1pLmxlbmd0aC0xOzA8PXM7cy0tKXt2YXIgaCxjO2w9aVtzXTtpZihoPW8uZ2V0KGwuaWQpKXl1KGgsbCwoYz1oLnBhcmVudCk9PT1uP3t3aWR0aDphLGhlaWdodDpyfTp7d2lkdGg6Yy5fX2VjR3JhcGhpY1dpZHRoLGhlaWdodDpjLl9fZWNHcmFwaGljSGVpZ2h0fSxudWxsLHtodjpsLmh2LGJvdW5kaW5nTW9kZTpsLmJvdW5kaW5nfSl9fSxfY2xlYXI6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9lbE1hcDtlLmVhY2goZnVuY3Rpb24odCl7R1QodCxlKX0pLHRoaXMuX2VsTWFwPVEoKX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX2NsZWFyKCl9fSk7dmFyIFdUPXt9O2Z1bmN0aW9uIEhUKHQsZSl7V1RbdF09ZX1mdW5jdGlvbiBaVCh0KXtyZXR1cm4gV1RbdF19dmFyIFVUPXdmKHt0eXBlOiJ0b29sYm94IixsYXlvdXRNb2RlOnt0eXBlOiJib3giLGlnbm9yZVNpemU6ITB9LG9wdGlvblVwZGF0ZWQ6ZnVuY3Rpb24oKXtVVC5zdXBlckFwcGx5KHRoaXMsIm9wdGlvblVwZGF0ZWQiLGFyZ3VtZW50cyksRSh0aGlzLm9wdGlvbi5mZWF0dXJlLGZ1bmN0aW9uKHQsZSl7dmFyIGk9WlQoZSk7aSYmbSh0LGkuZGVmYXVsdE9wdGlvbil9KX0sZGVmYXVsdE9wdGlvbjp7c2hvdzohMCx6OjYsemxldmVsOjAsb3JpZW50OiJob3Jpem9udGFsIixsZWZ0OiJyaWdodCIsdG9wOiJ0b3AiLGJhY2tncm91bmRDb2xvcjoidHJhbnNwYXJlbnQiLGJvcmRlckNvbG9yOiIjY2NjIixib3JkZXJSYWRpdXM6MCxib3JkZXJXaWR0aDowLHBhZGRpbmc6NSxpdGVtU2l6ZToxNSxpdGVtR2FwOjgsc2hvd1RpdGxlOiEwLGljb25TdHlsZTp7Ym9yZGVyQ29sb3I6IiM2NjYiLGNvbG9yOiJub25lIn0sZW1waGFzaXM6e2ljb25TdHlsZTp7Ym9yZGVyQ29sb3I6IiMzRTk4QzUifX0sdG9vbHRpcDp7c2hvdzohMX19fSk7ZnVuY3Rpb24gWFQodCxlKXt2YXIgaT1KbChlLmdldCgicGFkZGluZyIpKSxuPWUuZ2V0SXRlbVN0eWxlKFsiY29sb3IiLCJvcGFjaXR5Il0pO3JldHVybiBuLmZpbGw9ZS5nZXQoImJhY2tncm91bmRDb2xvciIpLHQ9bmV3IGlzKHtzaGFwZTp7eDp0LngtaVszXSx5OnQueS1pWzBdLHdpZHRoOnQud2lkdGgraVsxXStpWzNdLGhlaWdodDp0LmhlaWdodCtpWzBdK2lbMl0scjplLmdldCgiYm9yZGVyUmFkaXVzIil9LHN0eWxlOm4sc2lsZW50OiEwLHoyOi0xfSl9YmYoe3R5cGU6InRvb2xib3giLHJlbmRlcjpmdW5jdGlvbihoLGMsZCxsKXt2YXIgZj10aGlzLmdyb3VwO2lmKGYucmVtb3ZlQWxsKCksaC5nZXQoInNob3ciKSl7dmFyIHA9K2guZ2V0KCJpdGVtU2l6ZSIpLHU9aC5nZXQoImZlYXR1cmUiKXx8e30sZz10aGlzLl9mZWF0dXJlc3x8KHRoaXMuX2ZlYXR1cmVzPXt9KSxtPVtdO0UodSxmdW5jdGlvbih0LGUpe20ucHVzaChlKX0pLG5ldyBUZih0aGlzLl9mZWF0dXJlTmFtZXN8fFtdLG0pLmFkZCh0KS51cGRhdGUodCkucmVtb3ZlKFQodCxudWxsKSkuZXhlY3V0ZSgpLHRoaXMuX2ZlYXR1cmVOYW1lcz1tLGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lLmdldEJveExheW91dFBhcmFtcygpLG89ZS5nZXQoInBhZGRpbmciKSxhPXt3aWR0aDppLmdldFdpZHRoKCksaGVpZ2h0OmkuZ2V0SGVpZ2h0KCl9LHI9dnUobixhLG8pO211KGUuZ2V0KCJvcmllbnQiKSx0LGUuZ2V0KCJpdGVtR2FwIiksci53aWR0aCxyLmhlaWdodCkseXUodCxuLGEsbyl9KGYsaCxkKSxmLmFkZChYVChmLmdldEJvdW5kaW5nUmVjdCgpLGgpKSxmLmVhY2hDaGlsZChmdW5jdGlvbih0KXt2YXIgZT10Ll9fdGl0bGUsaT10LmhvdmVyU3R5bGU7aWYoaSYmZSl7dmFyIG49Y24oZSxTbihpKSksbz10LnBvc2l0aW9uWzBdK2YucG9zaXRpb25bMF0sYT0hMTt0LnBvc2l0aW9uWzFdK2YucG9zaXRpb25bMV0rcCtuLmhlaWdodD5kLmdldEhlaWdodCgpJiYoaS50ZXh0UG9zaXRpb249InRvcCIsYT0hMCk7dmFyIHI9YT8tNS1uLmhlaWdodDpwKzg7bytuLndpZHRoLzI+ZC5nZXRXaWR0aCgpPyhpLnRleHRQb3NpdGlvbj1bIjEwMCUiLHJdLGkudGV4dEFsaWduPSJyaWdodCIpOm8tbi53aWR0aC8yPDAmJihpLnRleHRQb3NpdGlvbj1bMCxyXSxpLnRleHRBbGlnbj0ibGVmdCIpfX0pfWZ1bmN0aW9uIHQodCxlKXt2YXIgaSxuPW1bdF0sbz1tW2VdLGE9dVtuXSxyPW5ldyBJbChhLGgsaC5lY01vZGVsKTtpZihsJiZudWxsIT1sLm5ld1RpdGxlJiYoYS50aXRsZT1sLm5ld1RpdGxlKSxuJiYhbyl7aWYoZnVuY3Rpb24odCl7cmV0dXJuIDA9PT10LmluZGV4T2YoIm15Iil9KG4pKWk9e21vZGVsOnIsb25jbGljazpyLm9wdGlvbi5vbmNsaWNrLGZlYXR1cmVOYW1lOm59O2Vsc2V7dmFyIHM9WlQobik7aWYoIXMpcmV0dXJuO2k9bmV3IHMocixjLGQpfWdbbl09aX1lbHNle2lmKCEoaT1nW29dKSlyZXR1cm47aS5tb2RlbD1yLGkuZWNNb2RlbD1jLGkuYXBpPWR9bnx8IW8/ci5nZXQoInNob3ciKSYmIWkudW51c2FibGU/KGZ1bmN0aW9uKG8sYSx0KXt2YXIgcj1vLmdldE1vZGVsKCJpY29uU3R5bGUiKSxzPW8uZ2V0TW9kZWwoImVtcGhhc2lzLmljb25TdHlsZSIpLGU9YS5nZXRJY29ucz9hLmdldEljb25zKCk6by5nZXQoImljb24iKSxsPW8uZ2V0KCJ0aXRsZSIpfHx7fTtpZigic3RyaW5nIj09dHlwZW9mIGUpe3ZhciBpPWUsbj1sO2w9e30sKGU9e30pW3RdPWksbFt0XT1ufXZhciB1PW8uaWNvblBhdGhzPXt9O0UoZSxmdW5jdGlvbih0LGUpe3ZhciBpPXBsKHQse30se3g6LXAvMix5Oi1wLzIsd2lkdGg6cCxoZWlnaHQ6cH0pO2kuc2V0U3R5bGUoci5nZXRJdGVtU3R5bGUoKSksaS5ob3ZlclN0eWxlPXMuZ2V0SXRlbVN0eWxlKCksaS5zZXRTdHlsZSh7dGV4dDpsW2VdLHRleHRBbGlnbjpzLmdldCgidGV4dEFsaWduIiksdGV4dEJvcmRlclJhZGl1czpzLmdldCgidGV4dEJvcmRlclJhZGl1cyIpLHRleHRQYWRkaW5nOnMuZ2V0KCJ0ZXh0UGFkZGluZyIpLHRleHRGaWxsOm51bGx9KTt2YXIgbj1oLmdldE1vZGVsKCJ0b29sdGlwIik7biYmbi5nZXQoInNob3ciKSYmaS5hdHRyKCJ0b29sdGlwIixMKHtjb250ZW50OmxbZV0sZm9ybWF0dGVyOm4uZ2V0KCJmb3JtYXR0ZXIiLCEwKXx8ZnVuY3Rpb24oKXtyZXR1cm4gbFtlXX0sZm9ybWF0dGVyUGFyYW1zOntjb21wb25lbnRUeXBlOiJ0b29sYm94IixuYW1lOmUsdGl0bGU6bFtlXSwkdmFyczpbIm5hbWUiLCJ0aXRsZSJdfSxwb3NpdGlvbjpuLmdldCgicG9zaXRpb24iLCEwKXx8ImJvdHRvbSJ9LG4ub3B0aW9uKSksWXMoaSksaC5nZXQoInNob3dUaXRsZSIpJiYoaS5fX3RpdGxlPWxbZV0saS5vbigibW91c2VvdmVyIixmdW5jdGlvbigpe3ZhciB0PXMuZ2V0SXRlbVN0eWxlKCksZT0idmVydGljYWwiPT09aC5nZXQoIm9yaWVudCIpP251bGw9PWguZ2V0KCJyaWdodCIpPyJyaWdodCI6ImxlZnQiOm51bGw9PWguZ2V0KCJib3R0b20iKT8iYm90dG9tIjoidG9wIjtpLnNldFN0eWxlKHt0ZXh0RmlsbDpzLmdldCgidGV4dEZpbGwiKXx8dC5maWxsfHx0LnN0cm9rZXx8IiMwMDAiLHRleHRCYWNrZ3JvdW5kQ29sb3I6cy5nZXQoInRleHRCYWNrZ3JvdW5kQ29sb3IiKSx0ZXh0UG9zaXRpb246cy5nZXQoInRleHRQb3NpdGlvbiIpfHxlfSl9KS5vbigibW91c2VvdXQiLGZ1bmN0aW9uKCl7aS5zZXRTdHlsZSh7dGV4dEZpbGw6bnVsbCx0ZXh0QmFja2dyb3VuZENvbG9yOm51bGx9KX0pKSxpLnRyaWdnZXIoby5nZXQoImljb25TdGF0dXMuIitlKXx8Im5vcm1hbCIpLGYuYWRkKGkpLGkub24oImNsaWNrIixBKGEub25jbGljayxhLGMsZCxlKSksdVtlXT1pfSl9KHIsaSxuKSxyLnNldEljb25TdGF0dXM9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm9wdGlvbixuPXRoaXMuaWNvblBhdGhzO2kuaWNvblN0YXR1cz1pLmljb25TdGF0dXN8fHt9LGkuaWNvblN0YXR1c1t0XT1lLG5bdF0mJm5bdF0udHJpZ2dlcihlKX0saS5yZW5kZXImJmkucmVuZGVyKHIsYyxkLGwpKTppLnJlbW92ZSYmaS5yZW1vdmUoYyxkKTppLmRpc3Bvc2UmJmkuZGlzcG9zZShjLGQpfX0sdXBkYXRlVmlldzpmdW5jdGlvbih0LGUsaSxuKXtFKHRoaXMuX2ZlYXR1cmVzLGZ1bmN0aW9uKHQpe3QudXBkYXRlVmlldyYmdC51cGRhdGVWaWV3KHQubW9kZWwsZSxpLG4pfSl9LHJlbW92ZTpmdW5jdGlvbihlLGkpe0UodGhpcy5fZmVhdHVyZXMsZnVuY3Rpb24odCl7dC5yZW1vdmUmJnQucmVtb3ZlKGUsaSl9KSx0aGlzLmdyb3VwLnJlbW92ZUFsbCgpfSxkaXNwb3NlOmZ1bmN0aW9uKGUsaSl7RSh0aGlzLl9mZWF0dXJlcyxmdW5jdGlvbih0KXt0LmRpc3Bvc2UmJnQuZGlzcG9zZShlLGkpfSl9fSk7dmFyIFlUPUNjLnRvb2xib3guc2F2ZUFzSW1hZ2U7ZnVuY3Rpb24galQodCl7dGhpcy5tb2RlbD10fWpULmRlZmF1bHRPcHRpb249e3Nob3c6ITAsaWNvbjoiTTQuNywyMi45TDI5LjMsNDUuNUw1NC43LDIzLjRNNC42LDQzLjZMNC42LDU4TDUzLjgsNThMNTMuOCw0My42TTI5LjIsNDUuMUwyOS4yLDAiLHRpdGxlOllULnRpdGxlLHR5cGU6InBuZyIsY29ubmVjdGVkQmFja2dyb3VuZENvbG9yOiIjZmZmIixuYW1lOiIiLGV4Y2x1ZGVDb21wb25lbnRzOlsidG9vbGJveCJdLHBpeGVsUmF0aW86MSxsYW5nOllULmxhbmcuc2xpY2UoKX0salQucHJvdG90eXBlLnVudXNhYmxlPSF2LmNhbnZhc1N1cHBvcnRlZCxqVC5wcm90b3R5cGUub25jbGljaz1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMubW9kZWwsbj1pLmdldCgibmFtZSIpfHx0LmdldCgidGl0bGUuMC50ZXh0Iil8fCJlY2hhcnRzIixvPWkuZ2V0KCJ0eXBlIiwhMCl8fCJwbmciLGE9ZS5nZXRDb25uZWN0ZWREYXRhVVJMKHt0eXBlOm8sYmFja2dyb3VuZENvbG9yOmkuZ2V0KCJiYWNrZ3JvdW5kQ29sb3IiLCEwKXx8dC5nZXQoImJhY2tncm91bmRDb2xvciIpfHwiI2ZmZiIsY29ubmVjdGVkQmFja2dyb3VuZENvbG9yOmkuZ2V0KCJjb25uZWN0ZWRCYWNrZ3JvdW5kQ29sb3IiKSxleGNsdWRlQ29tcG9uZW50czppLmdldCgiZXhjbHVkZUNvbXBvbmVudHMiKSxwaXhlbFJhdGlvOmkuZ2V0KCJwaXhlbFJhdGlvIil9KTtpZigiZnVuY3Rpb24iIT10eXBlb2YgTW91c2VFdmVudHx8di5icm93c2VyLmllfHx2LmJyb3dzZXIuZWRnZSlpZih3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2Ipe2Zvcih2YXIgcj1hdG9iKGEuc3BsaXQoIiwiKVsxXSkscz1yLmxlbmd0aCxsPW5ldyBVaW50OEFycmF5KHMpO3MtLTspbFtzXT1yLmNoYXJDb2RlQXQocyk7dmFyIHU9bmV3IEJsb2IoW2xdKTt3aW5kb3cubmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IodSxuKyIuIitvKX1lbHNle3ZhciBoPWkuZ2V0KCJsYW5nIiksYz0nPGJvZHkgc3R5bGU9Im1hcmdpbjowOyI+PGltZyBzcmM9IicrYSsnIiBzdHlsZT0ibWF4LXdpZHRoOjEwMCU7IiB0aXRsZT0iJysoaCYmaFswXXx8IiIpKyciIC8+PC9ib2R5Pic7d2luZG93Lm9wZW4oKS5kb2N1bWVudC53cml0ZShjKX1lbHNle3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtkLmRvd25sb2FkPW4rIi4iK28sZC50YXJnZXQ9Il9ibGFuayIsZC5ocmVmPWE7dmFyIGY9bmV3IE1vdXNlRXZlbnQoImNsaWNrIix7dmlldzp3aW5kb3csYnViYmxlczohMCxjYW5jZWxhYmxlOiExfSk7ZC5kaXNwYXRjaEV2ZW50KGYpfX0sSFQoInNhdmVBc0ltYWdlIixqVCk7dmFyIHFUPUNjLnRvb2xib3gubWFnaWNUeXBlLEtUPSJfX2VjX21hZ2ljVHlwZV9zdGFja19fIjtmdW5jdGlvbiAkVCh0KXt0aGlzLm1vZGVsPXR9JFQuZGVmYXVsdE9wdGlvbj17c2hvdzohMCx0eXBlOltdLGljb246e2xpbmU6Ik00LjEsMjguOWg3LjFsOS4zLTIybDcuNCwzOGw5LjctMTkuN2wzLDEyLjhoMTQuOU00LjEsNThoNTEuNCIsYmFyOiJNNi43LDIyLjloMTBWNDhoLTEwVjIyLjl6TTI0LjksMTNoMTB2MzVoLTEwVjEzek00My4yLDJoMTB2NDZoLTEwVjJ6TTMuMSw1OGg1My43IixzdGFjazoiTTguMiwzOC40bC04LjQsNC4xbDMwLjYsMTUuM0w2MCw0Mi41bC04LjEtNC4xbC0yMS41LDExTDguMiwzOC40eiBNNTEuOSwzMGwtOC4xLDQuMmwtMTMuNCw2LjlsLTEzLjktNi45TDguMiwzMGwtOC40LDQuMmw4LjQsNC4ybDIyLjIsMTFsMjEuNS0xMWw4LjEtNC4yTDUxLjksMzB6IE01MS45LDIxLjdsLTguMSw0LjJMMzUuNywzMGwtNS4zLDIuOEwyNC45LDMwbC04LjQtNC4xbC04LjMtNC4ybC04LjQsNC4yTDguMiwzMGw4LjMsNC4ybDEzLjksNi45bDEzLjQtNi45bDguMS00LjJsOC4xLTQuMUw1MS45LDIxLjd6TTMwLjQsMi4yTC0wLjIsMTcuNWw4LjQsNC4xbDguMyw0LjJsOC40LDQuMmw1LjUsMi43bDUuMy0yLjdsOC4xLTQuMmw4LjEtNC4ybDguMS00LjFMMzAuNCwyLjJ6In0sdGl0bGU6RChxVC50aXRsZSksb3B0aW9uOnt9LHNlcmllc0luZGV4Ont9fTt2YXIgSlQ9JFQucHJvdG90eXBlO0pULmdldEljb25zPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5tb2RlbCxlPXQuZ2V0KCJpY29uIiksaT17fTtyZXR1cm4gRSh0LmdldCgidHlwZSIpLGZ1bmN0aW9uKHQpe2VbdF0mJihpW3RdPWVbdF0pfSksaX07dmFyIFFUPXtsaW5lOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKCJiYXIiPT09dClyZXR1cm4gbSh7aWQ6ZSx0eXBlOiJsaW5lIixkYXRhOmkuZ2V0KCJkYXRhIiksc3RhY2s6aS5nZXQoInN0YWNrIiksbWFya1BvaW50OmkuZ2V0KCJtYXJrUG9pbnQiKSxtYXJrTGluZTppLmdldCgibWFya0xpbmUiKX0sbi5nZXQoIm9wdGlvbi5saW5lIil8fHt9LCEwKX0sYmFyOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKCJsaW5lIj09PXQpcmV0dXJuIG0oe2lkOmUsdHlwZToiYmFyIixkYXRhOmkuZ2V0KCJkYXRhIiksc3RhY2s6aS5nZXQoInN0YWNrIiksbWFya1BvaW50OmkuZ2V0KCJtYXJrUG9pbnQiKSxtYXJrTGluZTppLmdldCgibWFya0xpbmUiKX0sbi5nZXQoIm9wdGlvbi5iYXIiKXx8e30sITApfSxzdGFjazpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1pLmdldCgic3RhY2siKT09PUtUO2lmKCJsaW5lIj09PXR8fCJiYXIiPT09dClyZXR1cm4gbi5zZXRJY29uU3RhdHVzKCJzdGFjayIsbz8ibm9ybWFsIjoiZW1waGFzaXMiKSxtKHtpZDplLHN0YWNrOm8/IiI6S1R9LG4uZ2V0KCJvcHRpb24uc3RhY2siKXx8e30sITApfX0sdEE9W1sibGluZSIsImJhciJdLFsic3RhY2siXV07SlQub25jbGljaz1mdW5jdGlvbih1LHQsaCl7dmFyIGM9dGhpcy5tb2RlbCxlPWMuZ2V0KCJzZXJpZXNJbmRleC4iK2gpO2lmKFFUW2hdKXt2YXIgaSxkPXtzZXJpZXM6W119O2lmKEUodEEsZnVuY3Rpb24odCl7MDw9Xyh0LGgpJiZFKHQsZnVuY3Rpb24odCl7Yy5zZXRJY29uU3RhdHVzKHQsIm5vcm1hbCIpfSl9KSxjLnNldEljb25TdGF0dXMoaCwiZW1waGFzaXMiKSx1LmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJzZXJpZXMiLHF1ZXJ5Om51bGw9PWU/bnVsbDp7c2VyaWVzSW5kZXg6ZX19LGZ1bmN0aW9uKHQpe3ZhciBlPXQuc3ViVHlwZSxpPXQuaWQsbj1RVFtoXShlLGksdCxjKTtuJiYoQyhuLHQub3B0aW9uKSxkLnNlcmllcy5wdXNoKG4pKTt2YXIgbz10LmNvb3JkaW5hdGVTeXN0ZW07aWYobyYmImNhcnRlc2lhbjJkIj09PW8udHlwZSYmKCJsaW5lIj09PWh8fCJiYXIiPT09aCkpe3ZhciBhPW8uZ2V0QXhlc0J5U2NhbGUoIm9yZGluYWwiKVswXTtpZihhKXt2YXIgcj1hLmRpbSsiQXhpcyIscz11LnF1ZXJ5Q29tcG9uZW50cyh7bWFpblR5cGU6cixpbmRleDp0LmdldChuYW1lKyJJbmRleCIpLGlkOnQuZ2V0KG5hbWUrIklkIil9KVswXS5jb21wb25lbnRJbmRleDtkW3JdPWRbcl18fFtdO2Zvcih2YXIgbD0wO2w8PXM7bCsrKWRbcl1bc109ZFtyXVtzXXx8e307ZFtyXVtzXS5ib3VuZGFyeUdhcD0iYmFyIj09PWh9fX0pLCJzdGFjayI9PT1oKWk9ZC5zZXJpZXMmJmQuc2VyaWVzWzBdJiZkLnNlcmllc1swXS5zdGFjaz09PUtUP20oe3N0YWNrOnFULnRpdGxlLnRpbGVkfSxxVC50aXRsZSk6RChxVC50aXRsZSk7dC5kaXNwYXRjaEFjdGlvbih7dHlwZToiY2hhbmdlTWFnaWNUeXBlIixjdXJyZW50VHlwZTpoLG5ld09wdGlvbjpkLG5ld1RpdGxlOml9KX19LGdmKHt0eXBlOiJjaGFuZ2VNYWdpY1R5cGUiLGV2ZW50OiJtYWdpY1R5cGVDaGFuZ2VkIix1cGRhdGU6InByZXBhcmVBbmRVcGRhdGUifSxmdW5jdGlvbih0LGUpe2UubWVyZ2VPcHRpb24odC5uZXdPcHRpb24pfSksSFQoIm1hZ2ljVHlwZSIsJFQpO3ZhciBlQT1DYy50b29sYm94LmRhdGFWaWV3LGlBPW5ldyBBcnJheSg2MCkuam9pbigiLSIpLG5BPSJcdCI7ZnVuY3Rpb24gb0EodCl7dmFyIGU9ZnVuY3Rpb24odCl7dmFyIG89e30sYT1bXSxyPVtdO3JldHVybiB0LmVhY2hSYXdTZXJpZXMoZnVuY3Rpb24odCl7dmFyIGU9dC5jb29yZGluYXRlU3lzdGVtO2lmKCFlfHwiY2FydGVzaWFuMmQiIT09ZS50eXBlJiYicG9sYXIiIT09ZS50eXBlKWEucHVzaCh0KTtlbHNle3ZhciBpPWUuZ2V0QmFzZUF4aXMoKTtpZigiY2F0ZWdvcnkiPT09aS50eXBlKXt2YXIgbj1pLmRpbSsiXyIraS5pbmRleDtvW25dfHwob1tuXT17Y2F0ZWdvcnlBeGlzOmksdmFsdWVBeGlzOmUuZ2V0T3RoZXJBeGlzKGkpLHNlcmllczpbXX0sci5wdXNoKHtheGlzRGltOmkuZGltLGF4aXNJbmRleDppLmluZGV4fSkpLG9bbl0uc2VyaWVzLnB1c2godCl9ZWxzZSBhLnB1c2godCl9fSkse3Nlcmllc0dyb3VwQnlDYXRlZ29yeUF4aXM6byxvdGhlcjphLG1ldGE6cn19KHQpO3JldHVybnt2YWx1ZTpNKFtmdW5jdGlvbih0KXt2YXIgaD1bXTtyZXR1cm4gRSh0LGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5jYXRlZ29yeUF4aXMsbj10LnZhbHVlQXhpcy5kaW0sbz1bIiAiXS5jb25jYXQoTih0LnNlcmllcyxmdW5jdGlvbih0KXtyZXR1cm4gdC5uYW1lfSkpLGE9W2kubW9kZWwuZ2V0Q2F0ZWdvcmllcygpXTtFKHQuc2VyaWVzLGZ1bmN0aW9uKHQpe2EucHVzaCh0LmdldFJhd0RhdGEoKS5tYXBBcnJheShuLGZ1bmN0aW9uKHQpe3JldHVybiB0fSkpfSk7Zm9yKHZhciByPVtvLmpvaW4obkEpXSxzPTA7czxhWzBdLmxlbmd0aDtzKyspe2Zvcih2YXIgbD1bXSx1PTA7dTxhLmxlbmd0aDt1KyspbC5wdXNoKGFbdV1bc10pO3IucHVzaChsLmpvaW4obkEpKX1oLnB1c2goci5qb2luKCJcbiIpKX0pLGguam9pbigiXG5cbiIraUErIlxuXG4iKX0oZS5zZXJpZXNHcm91cEJ5Q2F0ZWdvcnlBeGlzKSxmdW5jdGlvbih0KXtyZXR1cm4gTih0LGZ1bmN0aW9uKHQpe3ZhciBvPXQuZ2V0UmF3RGF0YSgpLGE9W3QubmFtZV0scj1bXTtyZXR1cm4gby5lYWNoKG8uZGltZW5zaW9ucyxmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9YXJndW1lbnRzW3QtMV0saT1vLmdldE5hbWUoZSksbj0wO248dC0xO24rKylyW25dPWFyZ3VtZW50c1tuXTthLnB1c2goKGk/aStuQToiIikrci5qb2luKG5BKSl9KSxhLmpvaW4oIlxuIil9KS5qb2luKCJcblxuIitpQSsiXG5cbiIpfShlLm90aGVyKV0sZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvW1xuXHRcc10vZywiIil9KS5qb2luKCJcblxuIitpQSsiXG5cbiIpLG1ldGE6ZS5tZXRhfX1mdW5jdGlvbiBhQSh0KXtyZXR1cm4gdC5yZXBsYWNlKC9eXHNccyovLCIiKS5yZXBsYWNlKC9cc1xzKiQvLCIiKX12YXIgckE9bmV3IFJlZ0V4cCgiWyIrbkErIl0rIiwiZyIpO2Z1bmN0aW9uIHNBKHQsYSl7dmFyIGU9dC5zcGxpdChuZXcgUmVnRXhwKCJcbioiK2lBKyJcbioiLCJnIikpLHI9e3NlcmllczpbXX07cmV0dXJuIEUoZSxmdW5jdGlvbih0LGUpe2lmKGZ1bmN0aW9uKHQpe2lmKDA8PXQuc2xpY2UoMCx0LmluZGV4T2YoIlxuIikpLmluZGV4T2YobkEpKXJldHVybiEwfSh0KSl7dmFyIGk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuc3BsaXQoL1xuKy9nKSxpPVtdLG49TihhQShlLnNoaWZ0KCkpLnNwbGl0KHJBKSxmdW5jdGlvbih0KXtyZXR1cm57bmFtZTp0LGRhdGE6W119fSksbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgYT1hQShlW29dKS5zcGxpdChyQSk7aS5wdXNoKGEuc2hpZnQoKSk7Zm9yKHZhciByPTA7cjxhLmxlbmd0aDtyKyspbltyXSYmKG5bcl0uZGF0YVtvXT1hW3JdKX1yZXR1cm57c2VyaWVzOm4sY2F0ZWdvcmllczppfX0odCksbj1hW2VdLG89bi5heGlzRGltKyJBeGlzIjtuJiYocltvXT1yW29dfHxbXSxyW29dW24uYXhpc0luZGV4XT17ZGF0YTppLmNhdGVnb3JpZXN9LHIuc2VyaWVzPXIuc2VyaWVzLmNvbmNhdChpLnNlcmllcykpfWVsc2V7aT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zcGxpdCgvXG4rL2cpLGk9YUEoZS5zaGlmdCgpKSxuPVtdLG89MDtvPGUubGVuZ3RoO28rKyl7dmFyIGEscj1hQShlW29dKS5zcGxpdChyQSkscz0iIixsPSExO2E9aXNOYU4oclswXSk/KGw9ITAscz1yWzBdLHI9ci5zbGljZSgxKSxuW29dPXtuYW1lOnMsdmFsdWU6W119LG5bb10udmFsdWUpOm5bb109W107Zm9yKHZhciB1PTA7dTxyLmxlbmd0aDt1KyspYS5wdXNoKCtyW3VdKTsxPT09YS5sZW5ndGgmJihsP25bb10udmFsdWU9YVswXTpuW29dPWFbMF0pfXJldHVybntuYW1lOmksZGF0YTpufX0odCk7ci5zZXJpZXMucHVzaChpKX19KSxyfWZ1bmN0aW9uIGxBKHQpe3RoaXMuX2RvbT1udWxsLHRoaXMubW9kZWw9dH1sQS5kZWZhdWx0T3B0aW9uPXtzaG93OiEwLHJlYWRPbmx5OiExLG9wdGlvblRvQ29udGVudDpudWxsLGNvbnRlbnRUb09wdGlvbjpudWxsLGljb246Ik0xNy41LDE3LjNIMzMgTTE3LjUsMTcuM0gzMyBNNDUuNCwyOS41aC0yOCBNMTEuNSwydjU2SDUxVjE0LjhMMzguNCwySDExLjV6IE0zOC40LDIuMnYxMi43SDUxIE00NS40LDQxLjdoLTI4Iix0aXRsZTpEKGVBLnRpdGxlKSxsYW5nOkQoZUEubGFuZyksYmFja2dyb3VuZENvbG9yOiIjZmZmIix0ZXh0Q29sb3I6IiMwMDAiLHRleHRhcmVhQ29sb3I6IiNmZmYiLHRleHRhcmVhQm9yZGVyQ29sb3I6IiMzMzMiLGJ1dHRvbkNvbG9yOiIjYzIzNTMxIixidXR0b25UZXh0Q29sb3I6IiNmZmYifSxsQS5wcm90b3R5cGUub25jbGljaz1mdW5jdGlvbih0LGUpe3ZhciBpPWUuZ2V0RG9tKCksbj10aGlzLm1vZGVsO3RoaXMuX2RvbSYmaS5yZW1vdmVDaGlsZCh0aGlzLl9kb20pO3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO28uc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDo1cHg7dG9wOjVweDtib3R0b206NXB4O3JpZ2h0OjVweDsiLG8uc3R5bGUuYmFja2dyb3VuZENvbG9yPW4uZ2V0KCJiYWNrZ3JvdW5kQ29sb3IiKXx8IiNmZmYiO3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImg0Iikscj1uLmdldCgibGFuZyIpfHxbXTthLmlubmVySFRNTD1yWzBdfHxuLmdldCgidGl0bGUiKSxhLnN0eWxlLmNzc1RleHQ9Im1hcmdpbjogMTBweCAyMHB4OyIsYS5zdHlsZS5jb2xvcj1uLmdldCgidGV4dENvbG9yIik7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpO3Muc3R5bGUuY3NzVGV4dD0iZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO292ZXJmbG93OmF1dG87Ijt2YXIgdT1uLmdldCgib3B0aW9uVG9Db250ZW50IiksaD1uLmdldCgiY29udGVudFRvT3B0aW9uIiksYz1vQSh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdSl7dmFyIGQ9dShlLmdldE9wdGlvbigpKTsic3RyaW5nIj09dHlwZW9mIGQ/cy5pbm5lckhUTUw9ZDpHKGQpJiZzLmFwcGVuZENoaWxkKGQpfWVsc2Ugcy5hcHBlbmRDaGlsZChsKSxsLnJlYWRPbmx5PW4uZ2V0KCJyZWFkT25seSIpLGwuc3R5bGUuY3NzVGV4dD0id2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtmb250LWZhbWlseTptb25vc3BhY2U7Zm9udC1zaXplOjE0cHg7bGluZS1oZWlnaHQ6MS42cmVtOyIsbC5zdHlsZS5jb2xvcj1uLmdldCgidGV4dENvbG9yIiksbC5zdHlsZS5ib3JkZXJDb2xvcj1uLmdldCgidGV4dGFyZWFCb3JkZXJDb2xvciIpLGwuc3R5bGUuYmFja2dyb3VuZENvbG9yPW4uZ2V0KCJ0ZXh0YXJlYUNvbG9yIiksbC52YWx1ZT1jLnZhbHVlO3ZhciBmPWMubWV0YSxwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Auc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjA7bGVmdDowO3JpZ2h0OjA7Ijt2YXIgZz0iZmxvYXQ6cmlnaHQ7bWFyZ2luLXJpZ2h0OjIwcHg7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzoycHggNXB4O2ZvbnQtc2l6ZToxMnB4O2JvcmRlci1yYWRpdXM6M3B4IixtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Zys9IjtiYWNrZ3JvdW5kLWNvbG9yOiIrbi5nZXQoImJ1dHRvbkNvbG9yIiksZys9Ijtjb2xvcjoiK24uZ2V0KCJidXR0b25UZXh0Q29sb3IiKTt2YXIgeT10aGlzO2Z1bmN0aW9uIHgoKXtpLnJlbW92ZUNoaWxkKG8pLHkuX2RvbT1udWxsfUZ0KG0sImNsaWNrIix4KSxGdCh2LCJjbGljayIsZnVuY3Rpb24oKXt2YXIgdDt0cnl7dD0iZnVuY3Rpb24iPT10eXBlb2YgaD9oKHMsZS5nZXRPcHRpb24oKSk6c0EobC52YWx1ZSxmKX1jYXRjaCh0KXt0aHJvdyB4KCksbmV3IEVycm9yKCJEYXRhIHZpZXcgZm9ybWF0IGVycm9yICIrdCl9dCYmZS5kaXNwYXRjaEFjdGlvbih7dHlwZToiY2hhbmdlRGF0YVZpZXciLG5ld09wdGlvbjp0fSkseCgpfSksbS5pbm5lckhUTUw9clsxXSx2LmlubmVySFRNTD1yWzJdLHYuc3R5bGUuY3NzVGV4dD1nLG0uc3R5bGUuY3NzVGV4dD1nLG4uZ2V0KCJyZWFkT25seSIpfHxwLmFwcGVuZENoaWxkKHYpLHAuYXBwZW5kQ2hpbGQobSksby5hcHBlbmRDaGlsZChhKSxvLmFwcGVuZENoaWxkKHMpLG8uYXBwZW5kQ2hpbGQocCkscy5zdHlsZS5oZWlnaHQ9aS5jbGllbnRIZWlnaHQtODArInB4IixpLmFwcGVuZENoaWxkKG8pLHRoaXMuX2RvbT1vfSxsQS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7dGhpcy5fZG9tJiZlLmdldERvbSgpLnJlbW92ZUNoaWxkKHRoaXMuX2RvbSl9LGxBLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKHQsZSl7dGhpcy5yZW1vdmUodCxlKX0sSFQoImRhdGFWaWV3IixsQSksZ2Yoe3R5cGU6ImNoYW5nZURhdGFWaWV3IixldmVudDoiZGF0YVZpZXdDaGFuZ2VkIix1cGRhdGU6InByZXBhcmVBbmRVcGRhdGUifSxmdW5jdGlvbih0LG4pe3ZhciBvPVtdO0UodC5uZXdPcHRpb24uc2VyaWVzLGZ1bmN0aW9uKHQpe3ZhciBlPW4uZ2V0U2VyaWVzQnlOYW1lKHQubmFtZSlbMF07aWYoZSl7dmFyIGk9ZS5nZXQoImRhdGEiKTtvLnB1c2goe25hbWU6dC5uYW1lLGRhdGE6ZnVuY3Rpb24odCxuKXtyZXR1cm4gTih0LGZ1bmN0aW9uKHQsZSl7dmFyIGk9biYmbltlXTtyZXR1cm4gUihpKSYmIWsoaSk/KFIodCkmJiFrKHQpJiYodD10LnZhbHVlKSxDKHt2YWx1ZTp0fSxpKSk6dH0pfSh0LmRhdGEsaSl9KX1lbHNlIG8ucHVzaChMKHt0eXBlOiJzY2F0dGVyIn0sdCkpfSksbi5tZXJnZU9wdGlvbihDKHtzZXJpZXM6b30sdC5uZXdPcHRpb24pKX0pO3ZhciB1QT1FLGhBPV8sY0E9VCxkQT1bImRhdGFUb1BvaW50IiwicG9pbnRUb0RhdGEiXSxmQT1bImdyaWQiLCJ4QXhpcyIsInlBeGlzIiwiZ2VvIiwiZ3JhcGgiLCJwb2xhciIsInJhZGl1c0F4aXMiLCJhbmdsZUF4aXMiLCJibWFwIl07ZnVuY3Rpb24gcEEodCxlLGkpe3ZhciBuPXRoaXMuX3RhcmdldEluZm9MaXN0PVtdLG89e30sYT12QShlLHQpO3VBKHlBLGZ1bmN0aW9uKHQsZSl7aSYmaS5pbmNsdWRlJiYhKDA8PWhBKGkuaW5jbHVkZSxlKSl8fHQoYSxuLG8pfSl9dmFyIGdBPXBBLnByb3RvdHlwZTtmdW5jdGlvbiBtQSh0KXtyZXR1cm4gdFswXT50WzFdJiZ0LnJldmVyc2UoKSx0fWZ1bmN0aW9uIHZBKHQsZSl7cmV0dXJuIFhvKHQsZSx7aW5jbHVkZU1haW5UeXBlczpmQX0pfWdBLnNldE91dHB1dFJhbmdlcz1mdW5jdGlvbih0LGUpe3RoaXMubWF0Y2hPdXRwdXRSYW5nZXModCxlLGZ1bmN0aW9uKHQsZSxpKXtpZigodC5jb29yZFJhbmdlc3x8KHQuY29vcmRSYW5nZXM9W10pKS5wdXNoKGUpLCF0LmNvb3JkUmFuZ2Upe3QuY29vcmRSYW5nZT1lO3ZhciBuPXdBW3QuYnJ1c2hUeXBlXSgwLGksZSk7dC5fX3JhbmdlT2Zmc2V0PXtvZmZzZXQ6U0FbdC5icnVzaFR5cGVdKG4udmFsdWVzLHQucmFuZ2UsWzEsMV0pLHh5TWluTWF4Om4ueHlNaW5NYXh9fX0pfSxnQS5tYXRjaE91dHB1dFJhbmdlcz1mdW5jdGlvbih0LG4sbyl7dUEodCxmdW5jdGlvbihpKXt2YXIgdD10aGlzLmZpbmRUYXJnZXRJbmZvKGksbik7dCYmITAhPT10JiZFKHQuY29vcmRTeXNlcyxmdW5jdGlvbih0KXt2YXIgZT13QVtpLmJydXNoVHlwZV0oMSx0LGkucmFuZ2UpO28oaSxlLnZhbHVlcyx0LG4pfSl9LHRoaXMpfSxnQS5zZXRJbnB1dFJhbmdlcz1mdW5jdGlvbih0LG8pe3VBKHQsZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kVGFyZ2V0SW5mbyh0LG8pO2lmKHQucmFuZ2U9dC5yYW5nZXx8W10sZSYmITAhPT1lKXt0LnBhbmVsSWQ9ZS5wYW5lbElkO3ZhciBpPXdBW3QuYnJ1c2hUeXBlXSgwLGUuY29vcmRTeXMsdC5jb29yZFJhbmdlKSxuPXQuX19yYW5nZU9mZnNldDt0LnJhbmdlPW4/U0FbdC5icnVzaFR5cGVdKGkudmFsdWVzLG4ub2Zmc2V0LGZ1bmN0aW9uKHQsZSl7dmFyIGk9SUEodCksbj1JQShlKSxvPVtpWzBdL25bMF0saVsxXS9uWzFdXTtyZXR1cm4gaXNOYU4ob1swXSkmJihvWzBdPTEpLGlzTmFOKG9bMV0pJiYob1sxXT0xKSxvfShpLnh5TWluTWF4LG4ueHlNaW5NYXgpKTppLnZhbHVlc319LHRoaXMpfSxnQS5tYWtlUGFuZWxPcHRzPWZ1bmN0aW9uKGksbil7cmV0dXJuIE4odGhpcy5fdGFyZ2V0SW5mb0xpc3QsZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRQYW5lbFJlY3QoKTtyZXR1cm57cGFuZWxJZDp0LnBhbmVsSWQsZGVmYXVsdEJydXNoVHlwZTpuJiZuKHQpLGNsaXBQYXRoOlViKGUpLGlzVGFyZ2V0QnlDdXJzb3I6WWIoZSxpLHQuY29vcmRTeXNNb2RlbCksZ2V0TGluZWFyQnJ1c2hPdGhlckV4dGVudDpYYihlKX19KX0sZ0EuY29udHJvbFNlcmllcz1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5maW5kVGFyZ2V0SW5mbyh0LGkpO3JldHVybiEwPT09bnx8biYmMDw9aEEobi5jb29yZFN5c2VzLGUuY29vcmRpbmF0ZVN5c3RlbSl9LGdBLmZpbmRUYXJnZXRJbmZvPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXRoaXMuX3RhcmdldEluZm9MaXN0LG49dkEoZSx0KSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBhPWlbb10scj10LnBhbmVsSWQ7aWYocil7aWYoYS5wYW5lbElkPT09cilyZXR1cm4gYX1lbHNlIGZvcihvPTA7bzx4QS5sZW5ndGg7bysrKWlmKHhBW29dKG4sYSkpcmV0dXJuIGF9cmV0dXJuITB9O3ZhciB5QT17Z3JpZDpmdW5jdGlvbih0LG4pe3ZhciBvPXQueEF4aXNNb2RlbHMsYT10LnlBeGlzTW9kZWxzLGU9dC5ncmlkTW9kZWxzLGk9USgpLHI9e30scz17fTsob3x8YXx8ZSkmJih1QShvLGZ1bmN0aW9uKHQpe3ZhciBlPXQuYXhpcy5ncmlkLm1vZGVsO2kuc2V0KGUuaWQsZSkscltlLmlkXT0hMH0pLHVBKGEsZnVuY3Rpb24odCl7dmFyIGU9dC5heGlzLmdyaWQubW9kZWw7aS5zZXQoZS5pZCxlKSxzW2UuaWRdPSEwfSksdUEoZSxmdW5jdGlvbih0KXtpLnNldCh0LmlkLHQpLHJbdC5pZF09ITAsc1t0LmlkXT0hMH0pLGkuZWFjaChmdW5jdGlvbih0KXt2YXIgZT10LmNvb3JkaW5hdGVTeXN0ZW0saT1bXTt1QShlLmdldENhcnRlc2lhbnMoKSxmdW5jdGlvbih0LGUpeygwPD1oQShvLHQuZ2V0QXhpcygieCIpLm1vZGVsKXx8MDw9aEEoYSx0LmdldEF4aXMoInkiKS5tb2RlbCkpJiZpLnB1c2godCl9KSxuLnB1c2goe3BhbmVsSWQ6ImdyaWQtLSIrdC5pZCxncmlkTW9kZWw6dCxjb29yZFN5c01vZGVsOnQsY29vcmRTeXM6aVswXSxjb29yZFN5c2VzOmksZ2V0UGFuZWxSZWN0Ol9BLmdyaWQseEF4aXNEZWNsYXJlZDpyW3QuaWRdLHlBeGlzRGVjbGFyZWQ6c1t0LmlkXX0pfSkpfSxnZW86ZnVuY3Rpb24odCxpKXt1QSh0Lmdlb01vZGVscyxmdW5jdGlvbih0KXt2YXIgZT10LmNvb3JkaW5hdGVTeXN0ZW07aS5wdXNoKHtwYW5lbElkOiJnZW8tLSIrdC5pZCxnZW9Nb2RlbDp0LGNvb3JkU3lzTW9kZWw6dCxjb29yZFN5czplLGNvb3JkU3lzZXM6W2VdLGdldFBhbmVsUmVjdDpfQS5nZW99KX0pfX0seEE9W2Z1bmN0aW9uKHQsZSl7dmFyIGk9dC54QXhpc01vZGVsLG49dC55QXhpc01vZGVsLG89dC5ncmlkTW9kZWw7cmV0dXJuIW8mJmkmJihvPWkuYXhpcy5ncmlkLm1vZGVsKSwhbyYmbiYmKG89bi5heGlzLmdyaWQubW9kZWwpLG8mJm89PT1lLmdyaWRNb2RlbH0sZnVuY3Rpb24odCxlKXt2YXIgaT10Lmdlb01vZGVsO3JldHVybiBpJiZpPT09ZS5nZW9Nb2RlbH1dLF9BPXtncmlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmRTeXMuZ3JpZC5nZXRSZWN0KCkuY2xvbmUoKX0sZ2VvOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb29yZFN5cyxlPXQuZ2V0Qm91bmRpbmdSZWN0KCkuY2xvbmUoKTtyZXR1cm4gZS5hcHBseVRyYW5zZm9ybSh1bCh0KSksZX19LHdBPXtsaW5lWDpjQShiQSwwKSxsaW5lWTpjQShiQSwxKSxyZWN0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lW2RBW3RdXShbaVswXVswXSxpWzFdWzBdXSksbz1lW2RBW3RdXShbaVswXVsxXSxpWzFdWzFdXSksYT1bbUEoW25bMF0sb1swXV0pLG1BKFtuWzFdLG9bMV1dKV07cmV0dXJue3ZhbHVlczphLHh5TWluTWF4OmF9fSxwb2x5Z29uOmZ1bmN0aW9uKGksbix0KXt2YXIgbz1bWzEvMCwtMS8wXSxbMS8wLC0xLzBdXTtyZXR1cm57dmFsdWVzOk4odCxmdW5jdGlvbih0KXt2YXIgZT1uW2RBW2ldXSh0KTtyZXR1cm4gb1swXVswXT1NYXRoLm1pbihvWzBdWzBdLGVbMF0pLG9bMV1bMF09TWF0aC5taW4ob1sxXVswXSxlWzFdKSxvWzBdWzFdPU1hdGgubWF4KG9bMF1bMV0sZVswXSksb1sxXVsxXT1NYXRoLm1heChvWzFdWzFdLGVbMV0pLGV9KSx4eU1pbk1heDpvfX19O2Z1bmN0aW9uIGJBKHQsZSxpLG4pe3ZhciBvPWkuZ2V0QXhpcyhbIngiLCJ5Il1bdF0pLGE9bUEoTihbMCwxXSxmdW5jdGlvbih0KXtyZXR1cm4gZT9vLmNvb3JkVG9EYXRhKG8udG9Mb2NhbENvb3JkKG5bdF0pKTpvLnRvR2xvYmFsQ29vcmQoby5kYXRhVG9Db29yZChuW3RdKSl9KSkscj1bXTtyZXR1cm4gclt0XT1hLHJbMS10XT1bTmFOLE5hTl0se3ZhbHVlczphLHh5TWluTWF4OnJ9fXZhciBTQT17bGluZVg6Y0EoTUEsMCksbGluZVk6Y0EoTUEsMSkscmVjdDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuW1t0WzBdWzBdLWlbMF0qZVswXVswXSx0WzBdWzFdLWlbMF0qZVswXVsxXV0sW3RbMV1bMF0taVsxXSplWzFdWzBdLHRbMV1bMV0taVsxXSplWzFdWzFdXV19LHBvbHlnb246ZnVuY3Rpb24odCxpLG4pe3JldHVybiBOKHQsZnVuY3Rpb24odCxlKXtyZXR1cm5bdFswXS1uWzBdKmlbZV1bMF0sdFsxXS1uWzFdKmlbZV1bMV1dfSl9fTtmdW5jdGlvbiBNQSh0LGUsaSxuKXtyZXR1cm5bZVswXS1uW3RdKmlbMF0sZVsxXS1uW3RdKmlbMV1dfWZ1bmN0aW9uIElBKHQpe3JldHVybiB0P1t0WzBdWzFdLXRbMF1bMF0sdFsxXVsxXS10WzFdWzBdXTpbTmFOLE5hTl19dmFyIFRBPUUsQUE9IlwwX2VjX2hpc3Rfc3RvcmUiO2Z1bmN0aW9uIERBKHQpe3ZhciBlPXRbQUFdO3JldHVybiBlPWV8fCh0W0FBXT1be31dKX1UdS5yZWdpc3RlclN1YlR5cGVEZWZhdWx0ZXIoImRhdGFab29tIixmdW5jdGlvbigpe3JldHVybiJzbGlkZXIifSk7dmFyIENBPVsiY2FydGVzaWFuMmQiLCJwb2xhciIsInNpbmdsZUF4aXMiXTt2YXIgTEEsa0EsUEEsTkEsT0E9KGtBPVsiYXhpc0luZGV4IiwiYXhpcyIsImluZGV4IiwiaWQiXSxQQT1OKExBPShMQT1bIngiLCJ5IiwieiIsInJhZGl1cyIsImFuZ2xlIiwic2luZ2xlIl0pLnNsaWNlKCksdXUpLE5BPU4oa0E9KGtBfHxbXSkuc2xpY2UoKSx1dSksZnVuY3Rpb24obyxhKXtFKExBLGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXtuYW1lOnQsY2FwaXRhbDpQQVtlXX0sbj0wO248a0EubGVuZ3RoO24rKylpW2tBW25dXT10K05BW25dO28uY2FsbChhLGkpfSl9KTtmdW5jdGlvbiBFQShvLGEscil7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlLGk9e25vZGVzOltdLHJlY29yZHM6e319O2lmKGEoZnVuY3Rpb24odCl7aS5yZWNvcmRzW3QubmFtZV09e319KSwhdClyZXR1cm4gaTtmb3Iocyh0LGkpO2U9ITEsbyhuKSxlOyk7ZnVuY3Rpb24gbih0KXshZnVuY3Rpb24odCxlKXtyZXR1cm4gMDw9XyhlLm5vZGVzLHQpfSh0LGkpJiZmdW5jdGlvbih0LGkpe3ZhciBuPSExO3JldHVybiBhKGZ1bmN0aW9uKGUpe0Uocih0LGUpfHxbXSxmdW5jdGlvbih0KXtpLnJlY29yZHNbZS5uYW1lXVt0XSYmKG49ITApfSl9KSxufSh0LGkpJiYocyh0LGkpLGU9ITApfXJldHVybiBpfTtmdW5jdGlvbiBzKHQsaSl7aS5ub2Rlcy5wdXNoKHQpLGEoZnVuY3Rpb24oZSl7RShyKHQsZSl8fFtdLGZ1bmN0aW9uKHQpe2kucmVjb3Jkc1tlLm5hbWVdW3RdPSEwfSl9KX19ZnVuY3Rpb24gekEodCxlLGksbil7dGhpcy5fZGltTmFtZT10LHRoaXMuX2F4aXNJbmRleD1lLHRoaXMuX3ZhbHVlV2luZG93LHRoaXMuX3BlcmNlbnRXaW5kb3csdGhpcy5fZGF0YUV4dGVudCx0aGlzLl9taW5NYXhTcGFuLHRoaXMuZWNNb2RlbD1uLHRoaXMuX2RhdGFab29tTW9kZWw9aX12YXIgUkE9RSxCQT1PbDtmdW5jdGlvbiBWQSh0LGUpe3ZhciBpPXQuZ2V0QXhpc01vZGVsKCksbj10Ll9wZXJjZW50V2luZG93LG89dC5fdmFsdWVXaW5kb3c7aWYobil7dmFyIGE9UmwobyxbMCw1MDBdKTthPU1hdGgubWluKGEsMjApO3ZhciByPWV8fDA9PT1uWzBdJiYxMDA9PT1uWzFdO2kuc2V0UmFuZ2Uocj9udWxsOitvWzBdLnRvRml4ZWQoYSkscj9udWxsOitvWzFdLnRvRml4ZWQoYSkpfX16QS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnpBLGhvc3RlZEJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9kYXRhWm9vbU1vZGVsPT09dH0sZ2V0RGF0YVZhbHVlV2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZhbHVlV2luZG93LnNsaWNlKCl9LGdldERhdGFQZXJjZW50V2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BlcmNlbnRXaW5kb3cuc2xpY2UoKX0sZ2V0VGFyZ2V0U2VyaWVzTW9kZWxzOmZ1bmN0aW9uKCl7dmFyIG49W10sbz10aGlzLmVjTW9kZWw7cmV0dXJuIG8uZWFjaFNlcmllcyhmdW5jdGlvbih0KXtpZihmdW5jdGlvbih0KXtyZXR1cm4gMDw9XyhDQSx0KX0odC5nZXQoImNvb3JkaW5hdGVTeXN0ZW0iKSkpe3ZhciBlPXRoaXMuX2RpbU5hbWUsaT1vLnF1ZXJ5Q29tcG9uZW50cyh7bWFpblR5cGU6ZSsiQXhpcyIsaW5kZXg6dC5nZXQoZSsiQXhpc0luZGV4IiksaWQ6dC5nZXQoZSsiQXhpc0lkIil9KVswXTt0aGlzLl9heGlzSW5kZXg9PT0oaSYmaS5jb21wb25lbnRJbmRleCkmJm4ucHVzaCh0KX19LHRoaXMpLG59LGdldEF4aXNNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVjTW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMuX2RpbU5hbWUrIkF4aXMiLHRoaXMuX2F4aXNJbmRleCl9LGdldE90aGVyQXhpc01vZGVsOmZ1bmN0aW9uKCl7dmFyIHQsZSxpLG49dGhpcy5fZGltTmFtZSxvPXRoaXMuZWNNb2RlbCxhPXRoaXMuZ2V0QXhpc01vZGVsKCk7cmV0dXJuIHQ9IngiPT09bnx8InkiPT09bj8oZT0iZ3JpZEluZGV4IiwieCI9PT1uPyJ5IjoieCIpOihlPSJwb2xhckluZGV4IiwiYW5nbGUiPT09bj8icmFkaXVzIjoiYW5nbGUiKSxvLmVhY2hDb21wb25lbnQodCsiQXhpcyIsZnVuY3Rpb24odCl7KHQuZ2V0KGUpfHwwKT09PShhLmdldChlKXx8MCkmJihpPXQpfSksaX0sZ2V0TWluTWF4U3BhbjpmdW5jdGlvbigpe3JldHVybiBEKHRoaXMuX21pbk1heFNwYW4pfSxjYWxjdWxhdGVEYXRhV2luZG93OmZ1bmN0aW9uKG8pe3ZhciBhLHI9dGhpcy5fZGF0YUV4dGVudCxzPXRoaXMuZ2V0QXhpc01vZGVsKCkuYXhpcy5zY2FsZSxsPXRoaXMuX2RhdGFab29tTW9kZWwuZ2V0UmFuZ2VQcm9wTW9kZSgpLHU9WzAsMTAwXSxoPVtdLGM9W107UkEoWyJzdGFydCIsImVuZCJdLGZ1bmN0aW9uKHQsZSl7dmFyIGk9b1t0XSxuPW9bdCsiVmFsdWUiXTsicGVyY2VudCI9PT1sW2VdPyhudWxsPT1pJiYoaT11W2VdKSxuPXMucGFyc2Uoa2woaSx1LHIpKSk6KGE9ITAsaT1rbChuPW51bGw9PW4/cltlXTpzLnBhcnNlKG4pLHIsdSkpLGNbZV09bixoW2VdPWl9KSxCQShjKSxCQShoKTt2YXIgZD10aGlzLl9taW5NYXhTcGFuO2Z1bmN0aW9uIHQodCxlLGksbixvKXt2YXIgYT1vPyJTcGFuIjoiVmFsdWVTcGFuIjtXdygwLHQsaSwiYWxsIixkWyJtaW4iK2FdLGRbIm1heCIrYV0pO2Zvcih2YXIgcj0wO3I8MjtyKyspZVtyXT1rbCh0W3JdLGksbiwhMCksbyYmKGVbcl09cy5wYXJzZShlW3JdKSl9cmV0dXJuIGE/dChjLGgscix1LCExKTp0KGgsYyx1LHIsITApLHt2YWx1ZVdpbmRvdzpjLHBlcmNlbnRXaW5kb3c6aH19LHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHQ9PT10aGlzLl9kYXRhWm9vbU1vZGVsKXt2YXIgZT10aGlzLmdldFRhcmdldFNlcmllc01vZGVscygpO3RoaXMuX2RhdGFFeHRlbnQ9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPVsxLzAsLTEvMF07UkEoaSxmdW5jdGlvbih0KXt2YXIgaT10LmdldERhdGEoKTtpJiZSQShpLm1hcERpbWVuc2lvbihlLCEwKSxmdW5jdGlvbih0KXt2YXIgZT1pLmdldEFwcHJveGltYXRlRXh0ZW50KHQpO2VbMF08blswXSYmKG5bMF09ZVswXSksZVsxXT5uWzFdJiYoblsxXT1lWzFdKX0pfSksblsxXTxuWzBdJiYobj1bTmFOLE5hTl0pO3JldHVybiBmdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0QXhpc01vZGVsKCksbj1pLmdldE1pbighMCksbz0iY2F0ZWdvcnkiPT09aS5nZXQoInR5cGUiKSxhPW8mJmkuZ2V0Q2F0ZWdvcmllcygpLmxlbmd0aDtudWxsIT1uJiYiZGF0YU1pbiIhPT1uJiYiZnVuY3Rpb24iIT10eXBlb2Ygbj9lWzBdPW46byYmKGVbMF09MDxhPzA6TmFOKTt2YXIgcj1pLmdldE1heCghMCk7bnVsbCE9ciYmImRhdGFNYXgiIT09ciYmImZ1bmN0aW9uIiE9dHlwZW9mIHI/ZVsxXT1yOm8mJihlWzFdPTA8YT9hLTE6TmFOKTtpLmdldCgic2NhbGUiLCEwKXx8KDA8ZVswXSYmKGVbMF09MCksZVsxXTwwJiYoZVsxXT0wKSl9KHQsbiksbn0odGhpcyx0aGlzLl9kaW1OYW1lLGUpLGZ1bmN0aW9uKG4pe3ZhciBvPW4uX21pbk1heFNwYW49e30sYT1uLl9kYXRhWm9vbU1vZGVsLHI9bi5fZGF0YUV4dGVudDtSQShbIm1pbiIsIm1heCJdLGZ1bmN0aW9uKHQpe3ZhciBlPWEuZ2V0KHQrIlNwYW4iKSxpPWEuZ2V0KHQrIlZhbHVlU3BhbiIpO251bGwhPWkmJihpPW4uZ2V0QXhpc01vZGVsKCkuYXhpcy5zY2FsZS5wYXJzZShpKSksbnVsbCE9aT9lPWtsKHJbMF0raSxyLFswLDEwMF0sITApOm51bGwhPWUmJihpPWtsKGUsWzAsMTAwXSxyLCEwKS1yWzBdKSxvW3QrIlNwYW4iXT1lLG9bdCsiVmFsdWVTcGFuIl09aX0pfSh0aGlzKTt2YXIgaT10aGlzLmNhbGN1bGF0ZURhdGFXaW5kb3codC5zZXR0bGVkT3B0aW9uKTt0aGlzLl92YWx1ZVdpbmRvdz1pLnZhbHVlV2luZG93LHRoaXMuX3BlcmNlbnRXaW5kb3c9aS5wZXJjZW50V2luZG93LFZBKHRoaXMpfX0scmVzdG9yZTpmdW5jdGlvbih0KXt0PT09dGhpcy5fZGF0YVpvb21Nb2RlbCYmKHRoaXMuX3ZhbHVlV2luZG93PXRoaXMuX3BlcmNlbnRXaW5kb3c9bnVsbCxWQSh0aGlzLCEwKSl9LGZpbHRlckRhdGE6ZnVuY3Rpb24odCxlKXtpZih0PT09dGhpcy5fZGF0YVpvb21Nb2RlbCl7dmFyIG49dGhpcy5fZGltTmFtZSxpPXRoaXMuZ2V0VGFyZ2V0U2VyaWVzTW9kZWxzKCksbz10LmdldCgiZmlsdGVyTW9kZSIpLGM9dGhpcy5fdmFsdWVXaW5kb3c7Im5vbmUiIT09byYmUkEoaSxmdW5jdGlvbihpKXt2YXIgdT1pLmdldERhdGEoKSxoPXUubWFwRGltZW5zaW9uKG4sITApO2gubGVuZ3RoJiYoIndlYWtGaWx0ZXIiPT09bz91LmZpbHRlclNlbGYoZnVuY3Rpb24odCl7Zm9yKHZhciBlLGksbixvPTA7bzxoLmxlbmd0aDtvKyspe3ZhciBhPXUuZ2V0KGhbb10sdCkscj0haXNOYU4oYSkscz1hPGNbMF0sbD1hPmNbMV07aWYociYmIXMmJiFsKXJldHVybiEwO3ImJihuPSEwKSxzJiYoZT0hMCksbCYmKGk9ITApfXJldHVybiBuJiZlJiZpfSk6UkEoaCxmdW5jdGlvbih0KXtpZigiZW1wdHkiPT09bylpLnNldERhdGEodT11Lm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdD49Y1swXSYmdDw9Y1sxXX0odCk/dDpOYU59KSk7ZWxzZXt2YXIgZT17fTtlW3RdPWMsdS5zZWxlY3RSYW5nZShlKX19KSxSQShoLGZ1bmN0aW9uKHQpe3Uuc2V0QXBwcm94aW1hdGVFeHRlbnQoYyx0KX0pKX0pfX19O3ZhciBHQT1FLEZBPU9BLFdBPXdmKHt0eXBlOiJkYXRhWm9vbSIsZGVwZW5kZW5jaWVzOlsieEF4aXMiLCJ5QXhpcyIsInpBeGlzIiwicmFkaXVzQXhpcyIsImFuZ2xlQXhpcyIsInNpbmdsZUF4aXMiLCJzZXJpZXMiXSxkZWZhdWx0T3B0aW9uOnt6bGV2ZWw6MCx6OjQsb3JpZW50Om51bGwseEF4aXNJbmRleDpudWxsLHlBeGlzSW5kZXg6bnVsbCxmaWx0ZXJNb2RlOiJmaWx0ZXIiLHRocm90dGxlOm51bGwsc3RhcnQ6MCxlbmQ6MTAwLHN0YXJ0VmFsdWU6bnVsbCxlbmRWYWx1ZTpudWxsLG1pblNwYW46bnVsbCxtYXhTcGFuOm51bGwsbWluVmFsdWVTcGFuOm51bGwsbWF4VmFsdWVTcGFuOm51bGwscmFuZ2VNb2RlOm51bGx9LGluaXQ6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX2RhdGFJbnRlcnZhbEJ5QXhpcz17fSx0aGlzLl9kYXRhSW5mbz17fSx0aGlzLl9heGlzUHJveGllcz17fSx0aGlzLnRleHRTdHlsZU1vZGVsLHRoaXMuX2F1dG9UaHJvdHRsZT0hMCx0aGlzLl9yYW5nZVByb3BNb2RlPVsicGVyY2VudCIsInBlcmNlbnQiXTt2YXIgbj1IQSh0KTt0aGlzLnNldHRsZWRPcHRpb249bix0aGlzLm1lcmdlRGVmYXVsdEFuZFRoZW1lKHQsaSksdGhpcy5kb0luaXQobil9LG1lcmdlT3B0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPUhBKHQpO20odGhpcy5vcHRpb24sdCwhMCksbSh0aGlzLnNldHRsZWRPcHRpb24sZSwhMCksdGhpcy5kb0luaXQoZSl9LGRvSW5pdDpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbjt2LmNhbnZhc1N1cHBvcnRlZHx8KGkucmVhbHRpbWU9ITEpLHRoaXMuX3NldERlZmF1bHRUaHJvdHRsZSh0KSxaQSh0aGlzLHQpO3ZhciBuPXRoaXMuc2V0dGxlZE9wdGlvbjtHQShbWyJzdGFydCIsInN0YXJ0VmFsdWUiXSxbImVuZCIsImVuZFZhbHVlIl1dLGZ1bmN0aW9uKHQsZSl7InZhbHVlIj09PXRoaXMuX3JhbmdlUHJvcE1vZGVbZV0mJihpW3RbMF1dPW5bdFswXV09bnVsbCl9LHRoaXMpLHRoaXMudGV4dFN0eWxlTW9kZWw9dGhpcy5nZXRNb2RlbCgidGV4dFN0eWxlIiksdGhpcy5fcmVzZXRUYXJnZXQoKSx0aGlzLl9naXZlQXhpc1Byb3hpZXMoKX0sX2dpdmVBeGlzUHJveGllczpmdW5jdGlvbigpe3ZhciByPXRoaXMuX2F4aXNQcm94aWVzO3RoaXMuZWFjaFRhcmdldEF4aXMoZnVuY3Rpb24odCxlLGksbil7dmFyIG89dGhpcy5kZXBlbmRlbnRNb2RlbHNbdC5heGlzXVtlXSxhPW8uX19kekF4aXNQcm94eXx8KG8uX19kekF4aXNQcm94eT1uZXcgekEodC5uYW1lLGUsdGhpcyxuKSk7clt0Lm5hbWUrIl8iK2VdPWF9LHRoaXMpfSxfcmVzZXRUYXJnZXQ6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLm9wdGlvbix0PXRoaXMuX2p1ZGdlQXV0b01vZGUoKTtGQShmdW5jdGlvbih0KXt2YXIgZT10LmF4aXNJbmRleDtpW2VdPUVvKGlbZV0pfSx0aGlzKSwiYXhpc0luZGV4Ij09PXQ/dGhpcy5fYXV0b1NldEF4aXNJbmRleCgpOiJvcmllbnQiPT09dCYmdGhpcy5fYXV0b1NldE9yaWVudCgpfSxfanVkZ2VBdXRvTW9kZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9uLGk9ITE7RkEoZnVuY3Rpb24odCl7bnVsbCE9ZVt0LmF4aXNJbmRleF0mJihpPSEwKX0sdGhpcyk7dmFyIHQ9ZS5vcmllbnQ7cmV0dXJuIG51bGw9PXQmJmk/Im9yaWVudCI6aT92b2lkIDA6KG51bGw9PXQmJihlLm9yaWVudD0iaG9yaXpvbnRhbCIpLCJheGlzSW5kZXgiKX0sX2F1dG9TZXRBeGlzSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYT0hMCxlPXRoaXMuZ2V0KCJvcmllbnQiLCEwKSxyPXRoaXMub3B0aW9uLHQ9dGhpcy5kZXBlbmRlbnRNb2RlbHM7aWYoYSl7dmFyIGk9InZlcnRpY2FsIj09PWU/InkiOiJ4Ijt0W2krIkF4aXMiXS5sZW5ndGg/KHJbaSsiQXhpc0luZGV4Il09WzBdLGE9ITEpOkdBKHQuc2luZ2xlQXhpcyxmdW5jdGlvbih0KXthJiZ0LmdldCgib3JpZW50IiwhMCk9PT1lJiYoci5zaW5nbGVBeGlzSW5kZXg9W3QuY29tcG9uZW50SW5kZXhdLGE9ITEpfSl9YSYmRkEoZnVuY3Rpb24odCl7aWYoYSl7dmFyIGU9W10saT10aGlzLmRlcGVuZGVudE1vZGVsc1t0LmF4aXNdO2lmKGkubGVuZ3RoJiYhZS5sZW5ndGgpZm9yKHZhciBuPTAsbz1pLmxlbmd0aDtuPG87bisrKSJjYXRlZ29yeSI9PT1pW25dLmdldCgidHlwZSIpJiZlLnB1c2gobik7KHJbdC5heGlzSW5kZXhdPWUpLmxlbmd0aCYmKGE9ITEpfX0sdGhpcyksYSYmdGhpcy5lY01vZGVsLmVhY2hTZXJpZXMoZnVuY3Rpb24obyl7dGhpcy5faXNTZXJpZXNIYXNBbGxBeGVzVHlwZU9mKG8sInZhbHVlIikmJkZBKGZ1bmN0aW9uKHQpe3ZhciBlPXJbdC5heGlzSW5kZXhdLGk9by5nZXQodC5heGlzSW5kZXgpLG49by5nZXQodC5heGlzSWQpO18oZSxpPW8uZWNNb2RlbC5xdWVyeUNvbXBvbmVudHMoe21haW5UeXBlOnQuYXhpcyxpbmRleDppLGlkOm59KVswXS5jb21wb25lbnRJbmRleCk8MCYmZS5wdXNoKGkpfSl9LHRoaXMpfSxfYXV0b1NldE9yaWVudDpmdW5jdGlvbigpe3ZhciBlO3RoaXMuZWFjaFRhcmdldEF4aXMoZnVuY3Rpb24odCl7ZT1lfHx0Lm5hbWV9LHRoaXMpLHRoaXMub3B0aW9uLm9yaWVudD0ieSI9PT1lPyJ2ZXJ0aWNhbCI6Imhvcml6b250YWwifSxfaXNTZXJpZXNIYXNBbGxBeGVzVHlwZU9mOmZ1bmN0aW9uKG4sbyl7dmFyIGE9ITA7cmV0dXJuIEZBKGZ1bmN0aW9uKHQpe3ZhciBlPW4uZ2V0KHQuYXhpc0luZGV4KSxpPXRoaXMuZGVwZW5kZW50TW9kZWxzW3QuYXhpc11bZV07aSYmaS5nZXQoInR5cGUiKT09PW98fChhPSExKX0sdGhpcyksYX0sX3NldERlZmF1bHRUaHJvdHRsZTpmdW5jdGlvbih0KXtpZih0Lmhhc093blByb3BlcnR5KCJ0aHJvdHRsZSIpJiYodGhpcy5fYXV0b1Rocm90dGxlPSExKSx0aGlzLl9hdXRvVGhyb3R0bGUpe3ZhciBlPXRoaXMuZWNNb2RlbC5vcHRpb247dGhpcy5vcHRpb24udGhyb3R0bGU9ZS5hbmltYXRpb24mJjA8ZS5hbmltYXRpb25EdXJhdGlvblVwZGF0ZT8xMDA6MjB9fSxnZXRGaXJzdFRhcmdldEF4aXNNb2RlbDpmdW5jdGlvbigpe3ZhciBpO3JldHVybiBGQShmdW5jdGlvbih0KXtpZihudWxsPT1pKXt2YXIgZT10aGlzLmdldCh0LmF4aXNJbmRleCk7ZS5sZW5ndGgmJihpPXRoaXMuZGVwZW5kZW50TW9kZWxzW3QuYXhpc11bZVswXV0pfX0sdGhpcyksaX0sZWFjaFRhcmdldEF4aXM6ZnVuY3Rpb24oaSxuKXt2YXIgbz10aGlzLmVjTW9kZWw7RkEoZnVuY3Rpb24oZSl7R0EodGhpcy5nZXQoZS5heGlzSW5kZXgpLGZ1bmN0aW9uKHQpe2kuY2FsbChuLGUsdCx0aGlzLG8pfSx0aGlzKX0sdGhpcyl9LGdldEF4aXNQcm94eTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9heGlzUHJveGllc1t0KyJfIitlXX0sZ2V0QXhpc01vZGVsOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRBeGlzUHJveHkodCxlKTtyZXR1cm4gaSYmaS5nZXRBeGlzTW9kZWwoKX0sc2V0UmF3UmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb24sbj10aGlzLnNldHRsZWRPcHRpb247R0EoW1sic3RhcnQiLCJzdGFydFZhbHVlIl0sWyJlbmQiLCJlbmRWYWx1ZSJdXSxmdW5jdGlvbih0KXtudWxsPT1lW3RbMF1dJiZudWxsPT1lW3RbMV1dfHwoaVt0WzBdXT1uW3RbMF1dPWVbdFswXV0saVt0WzFdXT1uW3RbMV1dPWVbdFsxXV0pfSx0aGlzKSxaQSh0aGlzLGUpfSxzZXRDYWxjdWxhdGVkUmFuZ2U6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcy5vcHRpb247R0EoWyJzdGFydCIsInN0YXJ0VmFsdWUiLCJlbmQiLCJlbmRWYWx1ZSJdLGZ1bmN0aW9uKHQpe2lbdF09ZVt0XX0pfSxnZXRQZXJjZW50UmFuZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmZpbmRSZXByZXNlbnRhdGl2ZUF4aXNQcm94eSgpO2lmKHQpcmV0dXJuIHQuZ2V0RGF0YVBlcmNlbnRXaW5kb3coKX0sZ2V0VmFsdWVSYW5nZTpmdW5jdGlvbih0LGUpe2lmKG51bGwhPXR8fG51bGwhPWUpcmV0dXJuIHRoaXMuZ2V0QXhpc1Byb3h5KHQsZSkuZ2V0RGF0YVZhbHVlV2luZG93KCk7dmFyIGk9dGhpcy5maW5kUmVwcmVzZW50YXRpdmVBeGlzUHJveHkoKTtyZXR1cm4gaT9pLmdldERhdGFWYWx1ZVdpbmRvdygpOnZvaWQgMH0sZmluZFJlcHJlc2VudGF0aXZlQXhpc1Byb3h5OmZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuIHQuX19kekF4aXNQcm94eTt2YXIgZT10aGlzLl9heGlzUHJveGllcztmb3IodmFyIGkgaW4gZSlpZihlLmhhc093blByb3BlcnR5KGkpJiZlW2ldLmhvc3RlZEJ5KHRoaXMpKXJldHVybiBlW2ldO2Zvcih2YXIgaSBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkoaSkmJiFlW2ldLmhvc3RlZEJ5KHRoaXMpKXJldHVybiBlW2ldfSxnZXRSYW5nZVByb3BNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JhbmdlUHJvcE1vZGUuc2xpY2UoKX19KTtmdW5jdGlvbiBIQShlKXt2YXIgaT17fTtyZXR1cm4gR0EoWyJzdGFydCIsImVuZCIsInN0YXJ0VmFsdWUiLCJlbmRWYWx1ZSIsInRocm90dGxlIl0sZnVuY3Rpb24odCl7ZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKGlbdF09ZVt0XSl9KSxpfWZ1bmN0aW9uIFpBKHQsbyl7dmFyIGE9dC5fcmFuZ2VQcm9wTW9kZSxyPXQuZ2V0KCJyYW5nZU1vZGUiKTtHQShbWyJzdGFydCIsInN0YXJ0VmFsdWUiXSxbImVuZCIsImVuZFZhbHVlIl1dLGZ1bmN0aW9uKHQsZSl7dmFyIGk9bnVsbCE9b1t0WzBdXSxuPW51bGwhPW9bdFsxXV07aSYmIW4/YVtlXT0icGVyY2VudCI6IWkmJm4/YVtlXT0idmFsdWUiOnI/YVtlXT1yW2VdOmkmJihhW2VdPSJwZXJjZW50Iil9KX12YXIgVUE9aGMuZXh0ZW5kKHt0eXBlOiJkYXRhWm9vbSIscmVuZGVyOmZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMuZGF0YVpvb21Nb2RlbD10LHRoaXMuZWNNb2RlbD1lLHRoaXMuYXBpPWl9LGdldFRhcmdldENvb3JkSW5mbzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGF0YVpvb21Nb2RlbCxvPXRoaXMuZWNNb2RlbCxhPXt9O3JldHVybiB0LmVhY2hUYXJnZXRBeGlzKGZ1bmN0aW9uKHQsZSl7dmFyIGk9by5nZXRDb21wb25lbnQodC5heGlzLGUpO2lmKGkpe3ZhciBuPWkuZ2V0Q29vcmRTeXNNb2RlbCgpO24mJmZ1bmN0aW9uKHQsZSxpLG4pe2Zvcih2YXIgbyxhPTA7YTxpLmxlbmd0aDthKyspaWYoaVthXS5tb2RlbD09PXQpe289aVthXTticmVha31vfHxpLnB1c2gobz17bW9kZWw6dCxheGlzTW9kZWxzOltdLGNvb3JkSW5kZXg6bn0pO28uYXhpc01vZGVscy5wdXNoKGUpfShuLGksYVtuLm1haW5UeXBlXXx8KGFbbi5tYWluVHlwZV09W10pLG4uY29tcG9uZW50SW5kZXgpfX0sdGhpcyksYX19KTtXQS5leHRlbmQoe3R5cGU6ImRhdGFab29tLnNlbGVjdCJ9KSxVQS5leHRlbmQoe3R5cGU6ImRhdGFab29tLnNlbGVjdCJ9KSxwZih7Z2V0VGFyZ2V0U2VyaWVzOmZ1bmN0aW9uKHQpe3ZhciBuPVEoKTtyZXR1cm4gdC5lYWNoQ29tcG9uZW50KCJkYXRhWm9vbSIsZnVuY3Rpb24odCl7dC5lYWNoVGFyZ2V0QXhpcyhmdW5jdGlvbih0LGUsaSl7RShpLmdldEF4aXNQcm94eSh0Lm5hbWUsZSkuZ2V0VGFyZ2V0U2VyaWVzTW9kZWxzKCksZnVuY3Rpb24odCl7bi5zZXQodC51aWQsdCl9KX0pfSksbn0sbW9kaWZ5T3V0cHV0RW5kOiEwLG92ZXJhbGxSZXNldDpmdW5jdGlvbih0LG4pe3QuZWFjaENvbXBvbmVudCgiZGF0YVpvb20iLGZ1bmN0aW9uKHQpe3QuZWFjaFRhcmdldEF4aXMoZnVuY3Rpb24odCxlLGkpe2kuZ2V0QXhpc1Byb3h5KHQubmFtZSxlKS5yZXNldChpLG4pfSksdC5lYWNoVGFyZ2V0QXhpcyhmdW5jdGlvbih0LGUsaSl7aS5nZXRBeGlzUHJveHkodC5uYW1lLGUpLmZpbHRlckRhdGEoaSxuKX0pfSksdC5lYWNoQ29tcG9uZW50KCJkYXRhWm9vbSIsZnVuY3Rpb24odCl7dmFyIGU9dC5maW5kUmVwcmVzZW50YXRpdmVBeGlzUHJveHkoKSxpPWUuZ2V0RGF0YVBlcmNlbnRXaW5kb3coKSxuPWUuZ2V0RGF0YVZhbHVlV2luZG93KCk7dC5zZXRDYWxjdWxhdGVkUmFuZ2Uoe3N0YXJ0OmlbMF0sZW5kOmlbMV0sc3RhcnRWYWx1ZTpuWzBdLGVuZFZhbHVlOm5bMV19KX0pfX0pLGdmKCJkYXRhWm9vbSIsZnVuY3Rpb24oaSx0KXt2YXIgbj1FQShBKHQuZWFjaENvbXBvbmVudCx0LCJkYXRhWm9vbSIpLE9BLGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZ2V0KGUuYXhpc0luZGV4KX0pLG89W107dC5lYWNoQ29tcG9uZW50KHttYWluVHlwZToiZGF0YVpvb20iLHF1ZXJ5Oml9LGZ1bmN0aW9uKHQsZSl7by5wdXNoLmFwcGx5KG8sbih0KS5ub2Rlcyl9KSxFKG8sZnVuY3Rpb24odCxlKXt0LnNldFJhd1JhbmdlKHtzdGFydDppLnN0YXJ0LGVuZDppLmVuZCxzdGFydFZhbHVlOmkuc3RhcnRWYWx1ZSxlbmRWYWx1ZTppLmVuZFZhbHVlfSl9KX0pO3ZhciBYQT1DYy50b29sYm94LmRhdGFab29tLFlBPUU7ZnVuY3Rpb24gakEodCxlLGkpeyh0aGlzLl9icnVzaENvbnRyb2xsZXI9bmV3IGdiKGkuZ2V0WnIoKSkpLm9uKCJicnVzaCIsQSh0aGlzLl9vbkJydXNoLHRoaXMpKS5tb3VudCgpLHRoaXMuX2lzWm9vbUFjdGl2ZX1qQS5kZWZhdWx0T3B0aW9uPXtzaG93OiEwLGZpbHRlck1vZGU6ImZpbHRlciIsaWNvbjp7em9vbToiTTAsMTMuNWgyNi45IE0xMy41LDI2LjlWMCBNMzIuMSwxMy41SDU4VjU4SDEzLjUgVjMyLjEiLGJhY2s6Ik0yMiwxLjRMOS45LDEzLjVsMTIuMywxMi4zIE0xMC4zLDEzLjVINTQuOXY0NC42IEgxMC4zdi0yNiJ9LHRpdGxlOkQoWEEudGl0bGUpfTt2YXIgcUE9akEucHJvdG90eXBlO3FBLnJlbmRlcj1mdW5jdGlvbih0LGUsaSxuKXt0aGlzLm1vZGVsPXQsdGhpcy5lY01vZGVsPWUsdGhpcy5hcGk9aSxmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhPWkuX2lzWm9vbUFjdGl2ZTtuJiYidGFrZUdsb2JhbEN1cnNvciI9PT1uLnR5cGUmJihhPSJkYXRhWm9vbVNlbGVjdCI9PT1uLmtleSYmbi5kYXRhWm9vbVNlbGVjdEFjdGl2ZSk7aS5faXNab29tQWN0aXZlPWEsdC5zZXRJY29uU3RhdHVzKCJ6b29tIixhPyJlbXBoYXNpcyI6Im5vcm1hbCIpO3ZhciByPW5ldyBwQSgkQSh0Lm9wdGlvbiksZSx7aW5jbHVkZTpbImdyaWQiXX0pO2kuX2JydXNoQ29udHJvbGxlci5zZXRQYW5lbHMoci5tYWtlUGFuZWxPcHRzKG8sZnVuY3Rpb24odCl7cmV0dXJuIHQueEF4aXNEZWNsYXJlZCYmIXQueUF4aXNEZWNsYXJlZD8ibGluZVgiOiF0LnhBeGlzRGVjbGFyZWQmJnQueUF4aXNEZWNsYXJlZD8ibGluZVkiOiJyZWN0In0pKS5lbmFibGVCcnVzaCghIWEmJnticnVzaFR5cGU6ImF1dG8iLGJydXNoU3R5bGU6e2xpbmVXaWR0aDowLGZpbGw6InJnYmEoMCwwLDAsMC4yKSJ9fSl9KHQsZSx0aGlzLG4saSksZnVuY3Rpb24odCxlKXt0LnNldEljb25TdGF0dXMoImJhY2siLDE8ZnVuY3Rpb24odCl7cmV0dXJuIERBKHQpLmxlbmd0aH0oZSk/ImVtcGhhc2lzIjoibm9ybWFsIil9KHQsZSl9LHFBLm9uY2xpY2s9ZnVuY3Rpb24odCxlLGkpe0tBW2ldLmNhbGwodGhpcyl9LHFBLnJlbW92ZT1mdW5jdGlvbih0LGUpe3RoaXMuX2JydXNoQ29udHJvbGxlci51bm1vdW50KCl9LHFBLmRpc3Bvc2U9ZnVuY3Rpb24odCxlKXt0aGlzLl9icnVzaENvbnRyb2xsZXIuZGlzcG9zZSgpfTt2YXIgS0E9e3pvb206ZnVuY3Rpb24oKXt2YXIgdD0hdGhpcy5faXNab29tQWN0aXZlO3RoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJ0YWtlR2xvYmFsQ3Vyc29yIixrZXk6ImRhdGFab29tU2VsZWN0IixkYXRhWm9vbVNlbGVjdEFjdGl2ZTp0fSl9LGJhY2s6ZnVuY3Rpb24oKXt0aGlzLl9kaXNwYXRjaFpvb21BY3Rpb24oZnVuY3Rpb24odCl7dmFyIG49REEodCksZT1uW24ubGVuZ3RoLTFdOzE8bi5sZW5ndGgmJm4ucG9wKCk7dmFyIG89e307cmV0dXJuIFRBKGUsZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9bi5sZW5ndGgtMTswPD1pO2ktLSl7aWYodD1uW2ldW2VdKXtvW2VdPXQ7YnJlYWt9fX0pLG99KHRoaXMuZWNNb2RlbCkpfX07ZnVuY3Rpb24gJEEoZSl7dmFyIGk9e307cmV0dXJuIEUoWyJ4QXhpc0luZGV4IiwieUF4aXNJbmRleCJdLGZ1bmN0aW9uKHQpe2lbdF09ZVt0XSxudWxsPT1pW3RdJiYoaVt0XT0iYWxsIiksITEhPT1pW3RdJiYibm9uZSIhPT1pW3RdfHwoaVt0XT1bXSl9KSxpfXFBLl9vbkJydXNoPWZ1bmN0aW9uKHQsZSl7aWYoZS5pc0VuZCYmdC5sZW5ndGgpe3ZhciBzPXt9LGw9dGhpcy5lY01vZGVsO3RoaXMuX2JydXNoQ29udHJvbGxlci51cGRhdGVDb3ZlcnMoW10pLG5ldyBwQSgkQSh0aGlzLm1vZGVsLm9wdGlvbiksbCx7aW5jbHVkZTpbImdyaWQiXX0pLm1hdGNoT3V0cHV0UmFuZ2VzKHQsbCxmdW5jdGlvbih0LGUsaSl7aWYoImNhcnRlc2lhbjJkIj09PWkudHlwZSl7dmFyIG49dC5icnVzaFR5cGU7InJlY3QiPT09bj8obygieCIsaSxlWzBdKSxvKCJ5IixpLGVbMV0pKTpvKHtsaW5lWDoieCIsbGluZVk6InkifVtuXSxpLGUpfX0pLGZ1bmN0aW9uKGEsdCl7dmFyIHI9REEoYSk7VEEodCxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT1yLmxlbmd0aC0xOzA8PWk7aS0tKXtpZihyW2ldW2VdKWJyZWFrfWlmKGk8MCl7dmFyIG49YS5xdWVyeUNvbXBvbmVudHMoe21haW5UeXBlOiJkYXRhWm9vbSIsc3ViVHlwZToic2VsZWN0IixpZDplfSlbMF07aWYobil7dmFyIG89bi5nZXRQZXJjZW50UmFuZ2UoKTtyWzBdW2VdPXtkYXRhWm9vbUlkOmUsc3RhcnQ6b1swXSxlbmQ6b1sxXX19fX0pLHIucHVzaCh0KX0obCxzKSx0aGlzLl9kaXNwYXRjaFpvb21BY3Rpb24ocyl9ZnVuY3Rpb24gbyh0LGUsaSl7dmFyIG49ZS5nZXRBeGlzKHQpLG89bi5tb2RlbCxhPWZ1bmN0aW9uKGUsaSx0KXt2YXIgbjtyZXR1cm4gdC5lYWNoQ29tcG9uZW50KHttYWluVHlwZToiZGF0YVpvb20iLHN1YlR5cGU6InNlbGVjdCJ9LGZ1bmN0aW9uKHQpe3QuZ2V0QXhpc01vZGVsKGUsaS5jb21wb25lbnRJbmRleCkmJihuPXQpfSksbn0odCxvLGwpLHI9YS5maW5kUmVwcmVzZW50YXRpdmVBeGlzUHJveHkobykuZ2V0TWluTWF4U3BhbigpO251bGw9PXIubWluVmFsdWVTcGFuJiZudWxsPT1yLm1heFZhbHVlU3Bhbnx8KGk9V3coMCxpLnNsaWNlKCksbi5zY2FsZS5nZXRFeHRlbnQoKSwwLHIubWluVmFsdWVTcGFuLHIubWF4VmFsdWVTcGFuKSksYSYmKHNbYS5pZF09e2RhdGFab29tSWQ6YS5pZCxzdGFydFZhbHVlOmlbMF0sZW5kVmFsdWU6aVsxXX0pfX0scUEuX2Rpc3BhdGNoWm9vbUFjdGlvbj1mdW5jdGlvbih0KXt2YXIgaT1bXTtZQSh0LGZ1bmN0aW9uKHQsZSl7aS5wdXNoKEQodCkpfSksaS5sZW5ndGgmJnRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJkYXRhWm9vbSIsZnJvbTp0aGlzLnVpZCxiYXRjaDppfSl9LEhUKCJkYXRhWm9vbSIsakEpLGZmKGZ1bmN0aW9uKHMpe2lmKHMpe3ZhciBsPXMuZGF0YVpvb218fChzLmRhdGFab29tPVtdKTtrKGwpfHwocy5kYXRhWm9vbT1sPVtsXSk7dmFyIHQ9cy50b29sYm94O2lmKHQmJihrKHQpJiYodD10WzBdKSx0JiZ0LmZlYXR1cmUpKXt2YXIgZT10LmZlYXR1cmUuZGF0YVpvb207aSgieEF4aXMiLGUpLGkoInlBeGlzIixlKX19ZnVuY3Rpb24gaShuLG8pe2lmKG8pe3ZhciBhPW4rIkluZGV4IixyPW9bYV07bnVsbD09cnx8ImFsbCI9PT1yfHxrKHIpfHwocj0hMT09PXJ8fCJub25lIj09PXI/W106W3JdKSxmdW5jdGlvbih0LGUpe3ZhciBpPXNbdF07ayhpKXx8KGk9aT9baV06W10pO1lBKGksZSl9KG4sZnVuY3Rpb24odCxlKXtpZihudWxsPT1yfHwiYWxsIj09PXJ8fC0xIT09XyhyLGUpKXt2YXIgaT17dHlwZToic2VsZWN0IiwkZnJvbVRvb2xib3g6ITAsZmlsdGVyTW9kZTpvLmZpbHRlck1vZGV8fCJmaWx0ZXIiLGlkOiJcMF9lY19cMHRvb2xib3gtZGF0YVpvb21fIituK2V9O2lbYV09ZSxsLnB1c2goaSl9fSl9fX0pO3ZhciBKQT1DYy50b29sYm94LnJlc3RvcmU7ZnVuY3Rpb24gUUEodCl7dGhpcy5tb2RlbD10fVFBLmRlZmF1bHRPcHRpb249e3Nob3c6ITAsaWNvbjoiTTMuOCwzMy40IE00NywxOC45aDkuOFY4LjcgTTU2LjMsMjAuMSBDNTIuMSw5LDQwLjUsMC42LDI2LjgsMi4xQzEyLjYsMy43LDEuNiwxNi4yLDIuMSwzMC42IE0xMyw0MS4xSDMuMXYxMC4yIE0zLjcsMzkuOWM0LjIsMTEuMSwxNS44LDE5LjUsMjkuNSwxOCBjMTQuMi0xLjYsMjUuMi0xNC4xLDI0LjctMjguNSIsdGl0bGU6SkEudGl0bGV9LFFBLnByb3RvdHlwZS5vbmNsaWNrPWZ1bmN0aW9uKHQsZSxpKXshZnVuY3Rpb24odCl7dFtBQV09bnVsbH0odCksZS5kaXNwYXRjaEFjdGlvbih7dHlwZToicmVzdG9yZSIsZnJvbTp0aGlzLnVpZH0pfSxIVCgicmVzdG9yZSIsUUEpLGdmKHt0eXBlOiJyZXN0b3JlIixldmVudDoicmVzdG9yZSIsdXBkYXRlOiJwcmVwYXJlQW5kVXBkYXRlIn0sZnVuY3Rpb24odCxlKXtlLnJlc2V0T3B0aW9uKCJyZWNyZWF0ZSIpfSksd2Yoe3R5cGU6InRvb2x0aXAiLGRlcGVuZGVuY2llczpbImF4aXNQb2ludGVyIl0sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejo2MCxzaG93OiEwLHNob3dDb250ZW50OiEwLHRyaWdnZXI6Iml0ZW0iLHRyaWdnZXJPbjoibW91c2Vtb3ZlfGNsaWNrIixhbHdheXNTaG93Q29udGVudDohMSxkaXNwbGF5TW9kZToic2luZ2xlIixyZW5kZXJNb2RlOiJhdXRvIixjb25maW5lOiExLHNob3dEZWxheTowLGhpZGVEZWxheToxMDAsdHJhbnNpdGlvbkR1cmF0aW9uOi40LGVudGVyYWJsZTohMSxiYWNrZ3JvdW5kQ29sb3I6InJnYmEoNTAsNTAsNTAsMC43KSIsYm9yZGVyQ29sb3I6IiMzMzMiLGJvcmRlclJhZGl1czo0LGJvcmRlcldpZHRoOjAscGFkZGluZzo1LGV4dHJhQ3NzVGV4dDoiIixheGlzUG9pbnRlcjp7dHlwZToibGluZSIsYXhpczoiYXV0byIsYW5pbWF0aW9uOiJhdXRvIixhbmltYXRpb25EdXJhdGlvblVwZGF0ZToyMDAsYW5pbWF0aW9uRWFzaW5nVXBkYXRlOiJleHBvbmVudGlhbE91dCIsY3Jvc3NTdHlsZTp7Y29sb3I6IiM5OTkiLHdpZHRoOjEsdHlwZToiZGFzaGVkIix0ZXh0U3R5bGU6e319fSx0ZXh0U3R5bGU6e2NvbG9yOiIjZmZmIixmb250U2l6ZToxNH19fSk7dmFyIHREPUUsZUQ9JGwsaUQ9WyIiLCItd2Via2l0LSIsIi1tb3otIiwiLW8tIl07ZnVuY3Rpb24gbkQobyl7dmFyIGE9W10sdD1vLmdldCgidHJhbnNpdGlvbkR1cmF0aW9uIiksZT1vLmdldCgiYmFja2dyb3VuZENvbG9yIiksaT1vLmdldE1vZGVsKCJ0ZXh0U3R5bGUiKSxuPW8uZ2V0KCJwYWRkaW5nIik7cmV0dXJuIHQmJmEucHVzaChmdW5jdGlvbih0KXt2YXIgZT0iY3ViaWMtYmV6aWVyKDAuMjMsIDEsIDAuMzIsIDEpIixpPSJsZWZ0ICIrdCsicyAiK2UrIix0b3AgIit0KyJzICIrZTtyZXR1cm4gTihpRCxmdW5jdGlvbih0KXtyZXR1cm4gdCsidHJhbnNpdGlvbjoiK2l9KS5qb2luKCI7Iil9KHQpKSxlJiYodi5jYW52YXNTdXBwb3J0ZWQ/YS5wdXNoKCJiYWNrZ3JvdW5kLUNvbG9yOiIrZSk6KGEucHVzaCgiYmFja2dyb3VuZC1Db2xvcjojIitHZShlKSksYS5wdXNoKCJmaWx0ZXI6YWxwaGEob3BhY2l0eT03MCkiKSkpLHREKFsid2lkdGgiLCJjb2xvciIsInJhZGl1cyJdLGZ1bmN0aW9uKHQpe3ZhciBlPSJib3JkZXItIit0LGk9ZUQoZSksbj1vLmdldChpKTtudWxsIT1uJiZhLnB1c2goZSsiOiIrbisoImNvbG9yIj09PXQ/IiI6InB4IikpfSksYS5wdXNoKGZ1bmN0aW9uKGkpe3ZhciBuPVtdLHQ9aS5nZXQoImZvbnRTaXplIiksZT1pLmdldFRleHRDb2xvcigpO3JldHVybiBlJiZuLnB1c2goImNvbG9yOiIrZSksbi5wdXNoKCJmb250OiIraS5nZXRGb250KCkpLHQmJm4ucHVzaCgibGluZS1oZWlnaHQ6IitNYXRoLnJvdW5kKDMqdC8yKSsicHgiKSx0RChbImRlY29yYXRpb24iLCJhbGlnbiJdLGZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0KHQpO2UmJm4ucHVzaCgidGV4dC0iK3QrIjoiK2UpfSksbi5qb2luKCI7Iil9KGkpKSxudWxsIT1uJiZhLnB1c2goInBhZGRpbmc6IitKbChuKS5qb2luKCJweCAiKSsicHgiKSxhLmpvaW4oIjsiKSsiOyJ9ZnVuY3Rpb24gb0QoaSx0KXtpZih2Lnd4YSlyZXR1cm4gbnVsbDt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxuPXRoaXMuX3pyPXQuZ2V0WnIoKTt0aGlzLmVsPWUsdGhpcy5feD10LmdldFdpZHRoKCkvMix0aGlzLl95PXQuZ2V0SGVpZ2h0KCkvMixpLmFwcGVuZENoaWxkKGUpLHRoaXMuX2NvbnRhaW5lcj1pLHRoaXMuX3Nob3c9ITEsdGhpcy5faGlkZVRpbWVvdXQ7dmFyIG89dGhpcztlLm9ubW91c2VlbnRlcj1mdW5jdGlvbigpe28uX2VudGVyYWJsZSYmKGNsZWFyVGltZW91dChvLl9oaWRlVGltZW91dCksby5fc2hvdz0hMCksby5faW5Db250ZW50PSEwfSxlLm9ubW91c2Vtb3ZlPWZ1bmN0aW9uKHQpe2lmKHQ9dHx8d2luZG93LmV2ZW50LCFvLl9lbnRlcmFibGUpe3ZhciBlPW4uaGFuZGxlcjtHdChpLHQsITApLGUuZGlzcGF0Y2goIm1vdXNlbW92ZSIsdCl9fSxlLm9ubW91c2VsZWF2ZT1mdW5jdGlvbigpe28uX2VudGVyYWJsZSYmby5fc2hvdyYmby5oaWRlTGF0ZXIoby5faGlkZURlbGF5KSxvLl9pbkNvbnRlbnQ9ITF9fWZ1bmN0aW9uIGFEKHQpe3RoaXMuX3pyPXQuZ2V0WnIoKSx0aGlzLl9zaG93PSExLHRoaXMuX2hpZGVUaW1lb3V0fW9ELnByb3RvdHlwZT17Y29uc3RydWN0b3I6b0QsX2VudGVyYWJsZTohMCx1cGRhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250YWluZXIsZT10LmN1cnJlbnRTdHlsZXx8ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0KSxpPXQuc3R5bGU7ImFic29sdXRlIiE9PWkucG9zaXRpb24mJiJhYnNvbHV0ZSIhPT1lLnBvc2l0aW9uJiYoaS5wb3NpdGlvbj0icmVsYXRpdmUiKX0sc2hvdzpmdW5jdGlvbih0KXtjbGVhclRpbWVvdXQodGhpcy5faGlkZVRpbWVvdXQpO3ZhciBlPXRoaXMuZWw7ZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmJsb2NrO2JvcmRlci1zdHlsZTpzb2xpZDt3aGl0ZS1zcGFjZTpub3dyYXA7ei1pbmRleDo5OTk5OTk5OyIrbkQodCkrIjtsZWZ0OiIrdGhpcy5feCsicHg7dG9wOiIrdGhpcy5feSsicHg7IisodC5nZXQoImV4dHJhQ3NzVGV4dCIpfHwiIiksZS5zdHlsZS5kaXNwbGF5PWUuaW5uZXJIVE1MPyJibG9jayI6Im5vbmUiLGUuc3R5bGUucG9pbnRlckV2ZW50cz10aGlzLl9lbnRlcmFibGU/ImF1dG8iOiJub25lIix0aGlzLl9zaG93PSEwfSxzZXRDb250ZW50OmZ1bmN0aW9uKHQpe3RoaXMuZWwuaW5uZXJIVE1MPW51bGw9PXQ/IiI6dH0sc2V0RW50ZXJhYmxlOmZ1bmN0aW9uKHQpe3RoaXMuX2VudGVyYWJsZT10fSxnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbDtyZXR1cm5bdC5jbGllbnRXaWR0aCx0LmNsaWVudEhlaWdodF19LG1vdmVUbzpmdW5jdGlvbih0LGUpe3ZhciBpLG49dGhpcy5fenI7biYmbi5wYWludGVyJiYoaT1uLnBhaW50ZXIuZ2V0Vmlld3BvcnRSb290T2Zmc2V0KCkpJiYodCs9aS5vZmZzZXRMZWZ0LGUrPWkub2Zmc2V0VG9wKTt2YXIgbz10aGlzLmVsLnN0eWxlO28ubGVmdD10KyJweCIsby50b3A9ZSsicHgiLHRoaXMuX3g9dCx0aGlzLl95PWV9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLmVsLnN0eWxlLmRpc3BsYXk9Im5vbmUiLHRoaXMuX3Nob3c9ITF9LGhpZGVMYXRlcjpmdW5jdGlvbih0KXshdGhpcy5fc2hvd3x8dGhpcy5faW5Db250ZW50JiZ0aGlzLl9lbnRlcmFibGV8fCh0Pyh0aGlzLl9oaWRlRGVsYXk9dCx0aGlzLl9zaG93PSExLHRoaXMuX2hpZGVUaW1lb3V0PXNldFRpbWVvdXQoQSh0aGlzLmhpZGUsdGhpcyksdCkpOnRoaXMuaGlkZSgpKX0saXNTaG93OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nob3d9LGdldE91dGVyU2l6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZWwuY2xpZW50V2lkdGgsZT10aGlzLmVsLmNsaWVudEhlaWdodDtpZihkb2N1bWVudC5kZWZhdWx0VmlldyYmZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSl7dmFyIGk9ZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtpJiYodCs9cGFyc2VJbnQoaS5ib3JkZXJMZWZ0V2lkdGgsMTApK3BhcnNlSW50KGkuYm9yZGVyUmlnaHRXaWR0aCwxMCksZSs9cGFyc2VJbnQoaS5ib3JkZXJUb3BXaWR0aCwxMCkrcGFyc2VJbnQoaS5ib3JkZXJCb3R0b21XaWR0aCwxMCkpfXJldHVybnt3aWR0aDp0LGhlaWdodDplfX19LGFELnByb3RvdHlwZT17Y29uc3RydWN0b3I6YUQsX2VudGVyYWJsZTohMCx1cGRhdGU6ZnVuY3Rpb24oKXt9LHNob3c6ZnVuY3Rpb24odCl7dGhpcy5faGlkZVRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLl9oaWRlVGltZW91dCksdGhpcy5lbC5hdHRyKCJzaG93IiwhMCksdGhpcy5fc2hvdz0hMH0sc2V0Q29udGVudDpmdW5jdGlvbih0LGUsaSl7dGhpcy5lbCYmdGhpcy5fenIucmVtb3ZlKHRoaXMuZWwpO2Zvcih2YXIgbj17fSxvPXQsYT0ie21hcmtlciIscj1vLmluZGV4T2YoYSk7MDw9cjspe3ZhciBzPW8uaW5kZXhPZigifH0iKSxsPW8uc3Vic3RyKHIrYS5sZW5ndGgscy1yLWEubGVuZ3RoKTstMTxsLmluZGV4T2YoInN1YiIpP25bIm1hcmtlciIrbF09e3RleHRXaWR0aDo0LHRleHRIZWlnaHQ6NCx0ZXh0Qm9yZGVyUmFkaXVzOjIsdGV4dEJhY2tncm91bmRDb2xvcjplW2xdLHRleHRPZmZzZXQ6WzMsMF19Om5bIm1hcmtlciIrbF09e3RleHRXaWR0aDoxMCx0ZXh0SGVpZ2h0OjEwLHRleHRCb3JkZXJSYWRpdXM6NSx0ZXh0QmFja2dyb3VuZENvbG9yOmVbbF19LHI9KG89by5zdWJzdHIocysxKSkuaW5kZXhPZigie21hcmtlciIpfXRoaXMuZWw9bmV3IEZyKHtzdHlsZTp7cmljaDpuLHRleHQ6dCx0ZXh0TGluZUhlaWdodDoyMCx0ZXh0QmFja2dyb3VuZENvbG9yOmkuZ2V0KCJiYWNrZ3JvdW5kQ29sb3IiKSx0ZXh0Qm9yZGVyUmFkaXVzOmkuZ2V0KCJib3JkZXJSYWRpdXMiKSx0ZXh0RmlsbDppLmdldCgidGV4dFN0eWxlLmNvbG9yIiksdGV4dFBhZGRpbmc6aS5nZXQoInBhZGRpbmciKX0sejppLmdldCgieiIpfSksdGhpcy5fenIuYWRkKHRoaXMuZWwpO3ZhciB1PXRoaXM7dGhpcy5lbC5vbigibW91c2VvdmVyIixmdW5jdGlvbigpe3UuX2VudGVyYWJsZSYmKGNsZWFyVGltZW91dCh1Ll9oaWRlVGltZW91dCksdS5fc2hvdz0hMCksdS5faW5Db250ZW50PSEwfSksdGhpcy5lbC5vbigibW91c2VvdXQiLGZ1bmN0aW9uKCl7dS5fZW50ZXJhYmxlJiZ1Ll9zaG93JiZ1LmhpZGVMYXRlcih1Ll9oaWRlRGVsYXkpLHUuX2luQ29udGVudD0hMX0pfSxzZXRFbnRlcmFibGU6ZnVuY3Rpb24odCl7dGhpcy5fZW50ZXJhYmxlPXR9LGdldFNpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsLmdldEJvdW5kaW5nUmVjdCgpO3JldHVyblt0LndpZHRoLHQuaGVpZ2h0XX0sbW92ZVRvOmZ1bmN0aW9uKHQsZSl7dGhpcy5lbCYmdGhpcy5lbC5hdHRyKCJwb3NpdGlvbiIsW3QsZV0pfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5lbCYmdGhpcy5lbC5oaWRlKCksdGhpcy5fc2hvdz0hMX0saGlkZUxhdGVyOmZ1bmN0aW9uKHQpeyF0aGlzLl9zaG93fHx0aGlzLl9pbkNvbnRlbnQmJnRoaXMuX2VudGVyYWJsZXx8KHQ/KHRoaXMuX2hpZGVEZWxheT10LHRoaXMuX3Nob3c9ITEsdGhpcy5faGlkZVRpbWVvdXQ9c2V0VGltZW91dChBKHRoaXMuaGlkZSx0aGlzKSx0KSk6dGhpcy5oaWRlKCkpfSxpc1Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hvd30sZ2V0T3V0ZXJTaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRTaXplKCk7cmV0dXJue3dpZHRoOnRbMF0saGVpZ2h0OnRbMV19fX07dmFyIHJEPUEsc0Q9RSxsRD1QbCx1RD1uZXcgaXMoe3NoYXBlOnt4Oi0xLHk6LTEsd2lkdGg6MixoZWlnaHQ6Mn19KTtmdW5jdGlvbiBoRCh0KXtmb3IodmFyIGU9dC5wb3AoKTt0Lmxlbmd0aDspe3ZhciBpPXQucG9wKCk7aSYmKElsLmlzSW5zdGFuY2UoaSkmJihpPWkuZ2V0KCJ0b29sdGlwIiwhMCkpLCJzdHJpbmciPT10eXBlb2YgaSYmKGk9e2Zvcm1hdHRlcjppfSksZT1uZXcgSWwoaSxlLGUuZWNNb2RlbCkpfXJldHVybiBlfWZ1bmN0aW9uIGNEKHQsZSl7cmV0dXJuIHQuZGlzcGF0Y2hBY3Rpb258fEEoZS5kaXNwYXRjaEFjdGlvbixlKX1mdW5jdGlvbiBkRCh0KXtyZXR1cm4iY2VudGVyIj09PXR8fCJtaWRkbGUiPT09dH1iZih7dHlwZToidG9vbHRpcCIsaW5pdDpmdW5jdGlvbih0LGUpe2lmKCF2Lm5vZGUpe3ZhciBpLG49dC5nZXRDb21wb25lbnQoInRvb2x0aXAiKS5nZXQoInJlbmRlck1vZGUiKTt0aGlzLl9yZW5kZXJNb2RlPXFvKG4pLCJodG1sIj09PXRoaXMuX3JlbmRlck1vZGU/KGk9bmV3IG9EKGUuZ2V0RG9tKCksZSksdGhpcy5fbmV3TGluZT0iPGJyLz4iKTooaT1uZXcgYUQoZSksdGhpcy5fbmV3TGluZT0iXG4iKSx0aGlzLl90b29sdGlwQ29udGVudD1pfX0scmVuZGVyOmZ1bmN0aW9uKHQsZSxpKXtpZighdi5ub2RlKXt0aGlzLmdyb3VwLnJlbW92ZUFsbCgpLHRoaXMuX3Rvb2x0aXBNb2RlbD10LHRoaXMuX2VjTW9kZWw9ZSx0aGlzLl9hcGk9aSx0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXM9bnVsbCx0aGlzLl9hbHdheXNTaG93Q29udGVudD10LmdldCgiYWx3YXlzU2hvd0NvbnRlbnQiKTt2YXIgbj10aGlzLl90b29sdGlwQ29udGVudDtuLnVwZGF0ZSgpLG4uc2V0RW50ZXJhYmxlKHQuZ2V0KCJlbnRlcmFibGUiKSksdGhpcy5faW5pdEdsb2JhbExpc3RlbmVyKCksdGhpcy5fa2VlcFNob3coKX19LF9pbml0R2xvYmFsTGlzdGVuZXI6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl90b29sdGlwTW9kZWwuZ2V0KCJ0cmlnZ2VyT24iKTtRTSgiaXRlbVRvb2x0aXAiLHRoaXMuX2FwaSxyRChmdW5jdGlvbih0LGUsaSl7Im5vbmUiIT09biYmKDA8PW4uaW5kZXhPZih0KT90aGlzLl90cnlTaG93KGUsaSk6ImxlYXZlIj09PXQmJnRoaXMuX2hpZGUoaSkpfSx0aGlzKSl9LF9rZWVwU2hvdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Rvb2x0aXBNb2RlbCxlPXRoaXMuX2VjTW9kZWwsaT10aGlzLl9hcGk7aWYobnVsbCE9dGhpcy5fbGFzdFgmJm51bGwhPXRoaXMuX2xhc3RZJiYibm9uZSIhPT10LmdldCgidHJpZ2dlck9uIikpe3ZhciBuPXRoaXM7Y2xlYXJUaW1lb3V0KHRoaXMuX3JlZnJlc2hVcGRhdGVUaW1lb3V0KSx0aGlzLl9yZWZyZXNoVXBkYXRlVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5pc0Rpc3Bvc2VkKCl8fG4ubWFudWFsbHlTaG93VGlwKHQsZSxpLHt4Om4uX2xhc3RYLHk6bi5fbGFzdFl9KX0pfX0sbWFudWFsbHlTaG93VGlwOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKG4uZnJvbSE9PXRoaXMudWlkJiYhdi5ub2RlKXt2YXIgbz1jRChuLGkpO3RoaXMuX3RpY2tldD0iIjt2YXIgYT1uLmRhdGFCeUNvb3JkU3lzO2lmKG4udG9vbHRpcCYmbnVsbCE9bi54JiZudWxsIT1uLnkpe3ZhciByPXVEO3IucG9zaXRpb249W24ueCxuLnldLHIudXBkYXRlKCksci50b29sdGlwPW4udG9vbHRpcCx0aGlzLl90cnlTaG93KHtvZmZzZXRYOm4ueCxvZmZzZXRZOm4ueSx0YXJnZXQ6cn0sbyl9ZWxzZSBpZihhKXRoaXMuX3RyeVNob3coe29mZnNldFg6bi54LG9mZnNldFk6bi55LHBvc2l0aW9uOm4ucG9zaXRpb24sZXZlbnQ6e30sZGF0YUJ5Q29vcmRTeXM6bi5kYXRhQnlDb29yZFN5cyx0b29sdGlwT3B0aW9uOm4udG9vbHRpcE9wdGlvbn0sbyk7ZWxzZSBpZihudWxsIT1uLnNlcmllc0luZGV4KXtpZih0aGlzLl9tYW51YWxseUF4aXNTaG93VGlwKHQsZSxpLG4pKXJldHVybjt2YXIgcz1XTShuLGUpLGw9cy5wb2ludFswXSx1PXMucG9pbnRbMV07bnVsbCE9bCYmbnVsbCE9dSYmdGhpcy5fdHJ5U2hvdyh7b2Zmc2V0WDpsLG9mZnNldFk6dSxwb3NpdGlvbjpuLnBvc2l0aW9uLHRhcmdldDpzLmVsLGV2ZW50Ont9fSxvKX1lbHNlIG51bGwhPW4ueCYmbnVsbCE9bi55JiYoaS5kaXNwYXRjaEFjdGlvbih7dHlwZToidXBkYXRlQXhpc1BvaW50ZXIiLHg6bi54LHk6bi55fSksdGhpcy5fdHJ5U2hvdyh7b2Zmc2V0WDpuLngsb2Zmc2V0WTpuLnkscG9zaXRpb246bi5wb3NpdGlvbix0YXJnZXQ6aS5nZXRacigpLmZpbmRIb3ZlcihuLngsbi55KS50YXJnZXQsZXZlbnQ6e319LG8pKX19LG1hbnVhbGx5SGlkZVRpcDpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10aGlzLl90b29sdGlwQ29udGVudDshdGhpcy5fYWx3YXlzU2hvd0NvbnRlbnQmJnRoaXMuX3Rvb2x0aXBNb2RlbCYmby5oaWRlTGF0ZXIodGhpcy5fdG9vbHRpcE1vZGVsLmdldCgiaGlkZURlbGF5IikpLHRoaXMuX2xhc3RYPXRoaXMuX2xhc3RZPW51bGwsbi5mcm9tIT09dGhpcy51aWQmJnRoaXMuX2hpZGUoY0QobixpKSl9LF9tYW51YWxseUF4aXNTaG93VGlwOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPW4uc2VyaWVzSW5kZXgsYT1uLmRhdGFJbmRleCxyPWUuZ2V0Q29tcG9uZW50KCJheGlzUG9pbnRlciIpLmNvb3JkU3lzQXhlc0luZm87aWYobnVsbCE9byYmbnVsbCE9YSYmbnVsbCE9cil7dmFyIHM9ZS5nZXRTZXJpZXNCeUluZGV4KG8pO2lmKHMpaWYoImF4aXMiPT09KHQ9aEQoW3MuZ2V0RGF0YSgpLmdldEl0ZW1Nb2RlbChhKSxzLChzLmNvb3JkaW5hdGVTeXN0ZW18fHt9KS5tb2RlbCx0XSkpLmdldCgidHJpZ2dlciIpKXJldHVybiBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJ1cGRhdGVBeGlzUG9pbnRlciIsc2VyaWVzSW5kZXg6byxkYXRhSW5kZXg6YSxwb3NpdGlvbjpuLnBvc2l0aW9ufSksITB9fSxfdHJ5U2hvdzpmdW5jdGlvbih0LGUpe3ZhciBpPXQudGFyZ2V0O2lmKHRoaXMuX3Rvb2x0aXBNb2RlbCl7dGhpcy5fbGFzdFg9dC5vZmZzZXRYLHRoaXMuX2xhc3RZPXQub2Zmc2V0WTt2YXIgbj10LmRhdGFCeUNvb3JkU3lzO24mJm4ubGVuZ3RoP3RoaXMuX3Nob3dBeGlzVG9vbHRpcChuLHQpOmkmJm51bGwhPWkuZGF0YUluZGV4Pyh0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXM9bnVsbCx0aGlzLl9zaG93U2VyaWVzSXRlbVRvb2x0aXAodCxpLGUpKTppJiZpLnRvb2x0aXA/KHRoaXMuX2xhc3REYXRhQnlDb29yZFN5cz1udWxsLHRoaXMuX3Nob3dDb21wb25lbnRJdGVtVG9vbHRpcCh0LGksZSkpOih0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXM9bnVsbCx0aGlzLl9oaWRlKGUpKX19LF9zaG93T3JNb3ZlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXQoInNob3dEZWxheSIpO2U9QShlLHRoaXMpLGNsZWFyVGltZW91dCh0aGlzLl9zaG93VGltb3V0KSwwPGk/dGhpcy5fc2hvd1RpbW91dD1zZXRUaW1lb3V0KGUsaSk6ZSgpfSxfc2hvd0F4aXNUb29sdGlwOmZ1bmN0aW9uKHQsZSl7dmFyIGQ9dGhpcy5fZWNNb2RlbCxpPXRoaXMuX3Rvb2x0aXBNb2RlbCxuPVtlLm9mZnNldFgsZS5vZmZzZXRZXSxvPVtdLGY9W10sYT1oRChbZS50b29sdGlwT3B0aW9uLGldKSxwPXRoaXMuX3JlbmRlck1vZGUscj10aGlzLl9uZXdMaW5lLGc9e307c0QodCxmdW5jdGlvbih0KXtzRCh0LmRhdGFCeUF4aXMsZnVuY3Rpb24ocyl7dmFyIGw9ZC5nZXRDb21wb25lbnQocy5heGlzRGltKyJBeGlzIixzLmF4aXNJbmRleCksdT1zLnZhbHVlLGg9W107aWYobCYmbnVsbCE9dSl7dmFyIGM9cEkodSxsLmF4aXMsZCxzLnNlcmllc0RhdGFJbmRpY2VzLHMudmFsdWVMYWJlbE9wdCk7RShzLnNlcmllc0RhdGFJbmRpY2VzLGZ1bmN0aW9uKHQpe3ZhciBlPWQuZ2V0U2VyaWVzQnlJbmRleCh0LnNlcmllc0luZGV4KSxpPXQuZGF0YUluZGV4SW5zaWRlLG49ZSYmZS5nZXREYXRhUGFyYW1zKGkpO2lmKG4uYXhpc0RpbT1zLmF4aXNEaW0sbi5heGlzSW5kZXg9cy5heGlzSW5kZXgsbi5heGlzVHlwZT1zLmF4aXNUeXBlLG4uYXhpc0lkPXMuYXhpc0lkLG4uYXhpc1ZhbHVlPW9nKGwuYXhpcyx1KSxuLmF4aXNWYWx1ZUxhYmVsPWMsbil7Zi5wdXNoKG4pO3ZhciBvLGE9ZS5mb3JtYXRUb29sdGlwKGksITAsbnVsbCxwKTtpZihSKGEpKXtvPWEuaHRtbDt2YXIgcj1hLm1hcmtlcnM7bShnLHIpfWVsc2Ugbz1hO2gucHVzaChvKX19KTt2YXIgdD1jOyJodG1sIiE9PXA/by5wdXNoKGguam9pbihyKSk6by5wdXNoKCh0P2V1KHQpK3I6IiIpK2guam9pbihyKSl9fSl9LHRoaXMpLG8ucmV2ZXJzZSgpLG89by5qb2luKHRoaXMuX25ld0xpbmUrdGhpcy5fbmV3TGluZSk7dmFyIHM9ZS5wb3NpdGlvbjt0aGlzLl9zaG93T3JNb3ZlKGEsZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVDb250ZW50Tm90Q2hhbmdlZE9uQXhpcyh0KT90aGlzLl91cGRhdGVQb3NpdGlvbihhLHMsblswXSxuWzFdLHRoaXMuX3Rvb2x0aXBDb250ZW50LGYpOnRoaXMuX3Nob3dUb29sdGlwQ29udGVudChhLG8sZixNYXRoLnJhbmRvbSgpLG5bMF0sblsxXSxzLHZvaWQgMCxnKX0pfSxfc2hvd1Nlcmllc0l0ZW1Ub29sdGlwOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLl9lY01vZGVsLG89ZS5zZXJpZXNJbmRleCxhPW4uZ2V0U2VyaWVzQnlJbmRleChvKSxyPWUuZGF0YU1vZGVsfHxhLHM9ZS5kYXRhSW5kZXgsbD1lLmRhdGFUeXBlLHU9ci5nZXREYXRhKCksaD1oRChbdS5nZXRJdGVtTW9kZWwocykscixhJiYoYS5jb29yZGluYXRlU3lzdGVtfHx7fSkubW9kZWwsdGhpcy5fdG9vbHRpcE1vZGVsXSksYz1oLmdldCgidHJpZ2dlciIpO2lmKG51bGw9PWN8fCJpdGVtIj09PWMpe3ZhciBkLGYscD1yLmdldERhdGFQYXJhbXMocyxsKSxnPXIuZm9ybWF0VG9vbHRpcChzLCExLGwsdGhpcy5fcmVuZGVyTW9kZSk7Zj1SKGcpPyhkPWcuaHRtbCxnLm1hcmtlcnMpOihkPWcsbnVsbCk7dmFyIG09Iml0ZW1fIityLm5hbWUrIl8iK3M7dGhpcy5fc2hvd09yTW92ZShoLGZ1bmN0aW9uKCl7dGhpcy5fc2hvd1Rvb2x0aXBDb250ZW50KGgsZCxwLG0sdC5vZmZzZXRYLHQub2Zmc2V0WSx0LnBvc2l0aW9uLHQudGFyZ2V0LGYpfSksaSh7dHlwZToic2hvd1RpcCIsZGF0YUluZGV4SW5zaWRlOnMsZGF0YUluZGV4OnUuZ2V0UmF3SW5kZXgocyksc2VyaWVzSW5kZXg6byxmcm9tOnRoaXMudWlkfSl9fSxfc2hvd0NvbXBvbmVudEl0ZW1Ub29sdGlwOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lLnRvb2x0aXA7aWYoInN0cmluZyI9PXR5cGVvZiBuKXtuPXtjb250ZW50Om4sZm9ybWF0dGVyOm59fXZhciBvPW5ldyBJbChuLHRoaXMuX3Rvb2x0aXBNb2RlbCx0aGlzLl9lY01vZGVsKSxhPW8uZ2V0KCJjb250ZW50Iikscj1NYXRoLnJhbmRvbSgpO3RoaXMuX3Nob3dPck1vdmUobyxmdW5jdGlvbigpe3RoaXMuX3Nob3dUb29sdGlwQ29udGVudChvLGEsby5nZXQoImZvcm1hdHRlclBhcmFtcyIpfHx7fSxyLHQub2Zmc2V0WCx0Lm9mZnNldFksdC5wb3NpdGlvbixlKX0pLGkoe3R5cGU6InNob3dUaXAiLGZyb206dGhpcy51aWR9KX0sX3Nob3dUb29sdGlwQ29udGVudDpmdW5jdGlvbihpLHQsbixlLG8sYSxyLHMsbCl7aWYodGhpcy5fdGlja2V0PSIiLGkuZ2V0KCJzaG93Q29udGVudCIpJiZpLmdldCgic2hvdyIpKXt2YXIgdT10aGlzLl90b29sdGlwQ29udGVudCxoPWkuZ2V0KCJmb3JtYXR0ZXIiKTtyPXJ8fGkuZ2V0KCJwb3NpdGlvbiIpO3ZhciBjPXQ7aWYoaCYmInN0cmluZyI9PXR5cGVvZiBoKWM9b3UoaCxuLCEwKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBoKXt2YXIgZD1yRChmdW5jdGlvbih0LGUpe3Q9PT10aGlzLl90aWNrZXQmJih1LnNldENvbnRlbnQoZSxsLGkpLHRoaXMuX3VwZGF0ZVBvc2l0aW9uKGkscixvLGEsdSxuLHMpKX0sdGhpcyk7dGhpcy5fdGlja2V0PWUsYz1oKG4sZSxkKX11LnNldENvbnRlbnQoYyxsLGkpLHUuc2hvdyhpKSx0aGlzLl91cGRhdGVQb3NpdGlvbihpLHIsbyxhLHUsbixzKX19LF91cGRhdGVQb3NpdGlvbjpmdW5jdGlvbih0LGUsaSxuLG8sYSxyKXt2YXIgcz10aGlzLl9hcGkuZ2V0V2lkdGgoKSxsPXRoaXMuX2FwaS5nZXRIZWlnaHQoKTtlPWV8fHQuZ2V0KCJwb3NpdGlvbiIpO3ZhciB1PW8uZ2V0U2l6ZSgpLGg9dC5nZXQoImFsaWduIiksYz10LmdldCgidmVydGljYWxBbGlnbiIpLGQ9ciYmci5nZXRCb3VuZGluZ1JlY3QoKS5jbG9uZSgpO2lmKHImJmQuYXBwbHlUcmFuc2Zvcm0oci50cmFuc2Zvcm0pLCJmdW5jdGlvbiI9PXR5cGVvZiBlJiYoZT1lKFtpLG5dLGEsby5lbCxkLHt2aWV3U2l6ZTpbcyxsXSxjb250ZW50U2l6ZTp1LnNsaWNlKCl9KSksayhlKSlpPWxEKGVbMF0scyksbj1sRChlWzFdLGwpO2Vsc2UgaWYoUihlKSl7ZS53aWR0aD11WzBdLGUuaGVpZ2h0PXVbMV07dmFyIGY9dnUoZSx7d2lkdGg6cyxoZWlnaHQ6bH0pO2k9Zi54LG49Zi55LGM9aD1udWxsfWVsc2UgaWYoInN0cmluZyI9PXR5cGVvZiBlJiZyKXtpPShwPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1pWzBdLG89aVsxXSxhPTAscj0wLHM9ZS53aWR0aCxsPWUuaGVpZ2h0O3N3aXRjaCh0KXtjYXNlImluc2lkZSI6YT1lLngrcy8yLW4vMixyPWUueStsLzItby8yO2JyZWFrO2Nhc2UidG9wIjphPWUueCtzLzItbi8yLHI9ZS55LW8tNTticmVhaztjYXNlImJvdHRvbSI6YT1lLngrcy8yLW4vMixyPWUueStsKzU7YnJlYWs7Y2FzZSJsZWZ0IjphPWUueC1uLTUscj1lLnkrbC8yLW8vMjticmVhaztjYXNlInJpZ2h0IjphPWUueCtzKzUscj1lLnkrbC8yLW8vMn1yZXR1cm5bYSxyXX0oZSxkLHUpKVswXSxuPXBbMV19ZWxzZXt2YXIgcDtpPShwPWZ1bmN0aW9uKHQsZSxpLG4sbyxhLHIpe3ZhciBzPWkuZ2V0T3V0ZXJTaXplKCksbD1zLndpZHRoLHU9cy5oZWlnaHQ7bnVsbCE9YSYmKG48dCtsK2E/dC09bCthOnQrPWEpO251bGwhPXImJihvPGUrdStyP2UtPXUrcjplKz1yKTtyZXR1cm5bdCxlXX0oaSxuLG8scyxsLGg/bnVsbDoyMCxjP251bGw6MjApKVswXSxuPXBbMV19aCYmKGktPWREKGgpP3VbMF0vMjoicmlnaHQiPT09aD91WzBdOjApLGMmJihuLT1kRChjKT91WzFdLzI6ImJvdHRvbSI9PT1jP3VbMV06MCksdC5nZXQoImNvbmZpbmUiKSYmKGk9KHA9ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1pLmdldE91dGVyU2l6ZSgpLHI9YS53aWR0aCxzPWEuaGVpZ2h0O3JldHVybiB0PU1hdGgubWluKHQrcixuKS1yLGU9TWF0aC5taW4oZStzLG8pLXMsdD1NYXRoLm1heCh0LDApLGU9TWF0aC5tYXgoZSwwKSxbdCxlXX0oaSxuLG8scyxsKSlbMF0sbj1wWzFdKTtvLm1vdmVUbyhpLG4pfSxfdXBkYXRlQ29udGVudE5vdENoYW5nZWRPbkF4aXM6ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5fbGFzdERhdGFCeUNvb3JkU3lzLHI9ISF0JiZ0Lmxlbmd0aD09PW4ubGVuZ3RoO3JldHVybiByJiZzRCh0LGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5kYXRhQnlBeGlzfHx7fSxhPShuW2VdfHx7fSkuZGF0YUJ5QXhpc3x8W107KHImPWkubGVuZ3RoPT09YS5sZW5ndGgpJiZzRChpLGZ1bmN0aW9uKHQsZSl7dmFyIGk9YVtlXXx8e30sbj10LnNlcmllc0RhdGFJbmRpY2VzfHxbXSxvPWkuc2VyaWVzRGF0YUluZGljZXN8fFtdOyhyJj10LnZhbHVlPT09aS52YWx1ZSYmdC5heGlzVHlwZT09PWkuYXhpc1R5cGUmJnQuYXhpc0lkPT09aS5heGlzSWQmJm4ubGVuZ3RoPT09by5sZW5ndGgpJiZzRChuLGZ1bmN0aW9uKHQsZSl7dmFyIGk9b1tlXTtyJj10LnNlcmllc0luZGV4PT09aS5zZXJpZXNJbmRleCYmdC5kYXRhSW5kZXg9PT1pLmRhdGFJbmRleH0pfSl9KSx0aGlzLl9sYXN0RGF0YUJ5Q29vcmRTeXM9biwhIXJ9LF9oaWRlOmZ1bmN0aW9uKHQpe3RoaXMuX2xhc3REYXRhQnlDb29yZFN5cz1udWxsLHQoe3R5cGU6ImhpZGVUaXAiLGZyb206dGhpcy51aWR9KX0sZGlzcG9zZTpmdW5jdGlvbih0LGUpe3Yubm9kZXx8KHRoaXMuX3Rvb2x0aXBDb250ZW50LmhpZGUoKSxpSSgiaXRlbVRvb2x0aXAiLGUpKX19KSxnZih7dHlwZToic2hvd1RpcCIsZXZlbnQ6InNob3dUaXAiLHVwZGF0ZToidG9vbHRpcDptYW51YWxseVNob3dUaXAifSxmdW5jdGlvbigpe30pLGdmKHt0eXBlOiJoaWRlVGlwIixldmVudDoiaGlkZVRpcCIsdXBkYXRlOiJ0b29sdGlwOm1hbnVhbGx5SGlkZVRpcCJ9LGZ1bmN0aW9uKCl7fSk7dmFyIGZEPVsicmVjdCIsInBvbHlnb24iLCJrZWVwIiwiY2xlYXIiXTt2YXIgcEQ9RTtmdW5jdGlvbiBnRCh0KXtpZih0KWZvcih2YXIgZSBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkoZSkpcmV0dXJuITB9ZnVuY3Rpb24gbUQodCxlLGEpe3ZhciBpPXt9O3JldHVybiBwRChlLGZ1bmN0aW9uKG4pe3ZhciBvPWlbbl09ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5fX2hpZGRlbj10LnByb3RvdHlwZSxuZXcgdH0oKTtwRCh0W25dLGZ1bmN0aW9uKHQsZSl7aWYoYV8uaXNWYWxpZFR5cGUoZSkpe3ZhciBpPXt0eXBlOmUsdmlzdWFsOnR9O2EmJmEoaSxuKSxvW2VdPW5ldyBhXyhpKSwib3BhY2l0eSI9PT1lJiYoKGk9RChpKSkudHlwZT0iY29sb3JBbHBoYSIsby5fX2hpZGRlbi5fX2FscGhhRm9yT3BhY2l0eT1uZXcgYV8oaSkpfX0pfSksaX1mdW5jdGlvbiB2RChlLGksdCl7dmFyIG47RSh0LGZ1bmN0aW9uKHQpe2kuaGFzT3duUHJvcGVydHkodCkmJmdEKGlbdF0pJiYobj0hMCl9KSxuJiZFKHQsZnVuY3Rpb24odCl7aS5oYXNPd25Qcm9wZXJ0eSh0KSYmZ0QoaVt0XSk/ZVt0XT1EKGlbdF0pOmRlbGV0ZSBlW3RdfSl9dmFyIHlEPXtsaW5lWDp4RCgwKSxsaW5lWTp4RCgxKSxyZWN0Ontwb2ludDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHQmJmkuYm91bmRpbmdSZWN0LmNvbnRhaW4odFswXSx0WzFdKX0scmVjdDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHQmJmkuYm91bmRpbmdSZWN0LmludGVyc2VjdCh0KX19LHBvbHlnb246e3BvaW50OmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdCYmaS5ib3VuZGluZ1JlY3QuY29udGFpbih0WzBdLHRbMV0pJiZ3ZyhpLnJhbmdlLHRbMF0sdFsxXSl9LHJlY3Q6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkucmFuZ2U7aWYoIXR8fG4ubGVuZ3RoPD0xKXJldHVybiExO3ZhciBvPXQueCxhPXQueSxyPXQud2lkdGgscz10LmhlaWdodCxsPW5bMF07cmV0dXJuISEod2cobixvLGEpfHx3ZyhuLG8rcixhKXx8d2cobixvLGErcyl8fHdnKG4sbytyLGErcyl8fE1pLmNyZWF0ZSh0KS5jb250YWluKGxbMF0sbFsxXSl8fGdsKG8sYSxvK3IsYSxuKXx8Z2wobyxhLG8sYStzLG4pfHxnbChvK3IsYSxvK3IsYStzLG4pfHxnbChvLGErcyxvK3IsYStzLG4pKXx8dm9pZCAwfX19O2Z1bmN0aW9uIHhEKGEpe3ZhciByPVsieCIsInkiXSxzPVsid2lkdGgiLCJoZWlnaHQiXTtyZXR1cm57cG9pbnQ6ZnVuY3Rpb24odCxlLGkpe2lmKHQpe3ZhciBuPWkucmFuZ2U7cmV0dXJuIF9EKHRbYV0sbil9fSxyZWN0OmZ1bmN0aW9uKHQsZSxpKXtpZih0KXt2YXIgbj1pLnJhbmdlLG89W3RbclthXV0sdFtyW2FdXSt0W3NbYV1dXTtyZXR1cm4gb1sxXTxvWzBdJiZvLnJldmVyc2UoKSxfRChvWzBdLG4pfHxfRChvWzFdLG4pfHxfRChuWzBdLG8pfHxfRChuWzFdLG8pfX19fWZ1bmN0aW9uIF9EKHQsZSl7cmV0dXJuIGVbMF08PXQmJnQ8PWVbMV19dmFyIHdEPVsiaW5CcnVzaCIsIm91dE9mQnJ1c2giXSxiRD0iX19lY0JydXNoU2VsZWN0IixTRD0iX19lY0luQnJ1c2hTZWxlY3RFdmVudCIsTUQ9SWQuVklTVUFMLkJSVVNIO2Z1bmN0aW9uIElEKHQsZSl7aWYoIXQuaXNEaXNwb3NlZCgpKXt2YXIgaT10LmdldFpyKCk7aVtTRF09ITAsdC5kaXNwYXRjaEFjdGlvbih7dHlwZToiYnJ1c2hTZWxlY3QiLGJhdGNoOmV9KSxpW1NEXT0hMX19ZnVuY3Rpb24gVEQodCxlLGksbil7Zm9yKHZhciBvPTAsYT1lLmxlbmd0aDtvPGE7bysrKXt2YXIgcj1lW29dO2lmKHRbci5icnVzaFR5cGVdKG4saSxyLnNlbGVjdG9ycyxyKSlyZXR1cm4hMH19ZnVuY3Rpb24gQUQodCl7dmFyIHI9dC5icnVzaFNlbGVjdG9yO2lmKHoocikpe3ZhciBlPVtdO3JldHVybiBFKHlELGZ1bmN0aW9uKGEsdCl7ZVt0XT1mdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1lLmdldEl0ZW1MYXlvdXQodCk7cmV0dXJuIGFbcl0obyxpLG4pfX0pLGV9aWYoTyhyKSl7dmFyIGk9e307cmV0dXJuIEUoeUQsZnVuY3Rpb24odCxlKXtpW2VdPXJ9KSxpfXJldHVybiByfXZmKE1ELGZ1bmN0aW9uKGUsdCxpKXtlLmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJicnVzaCJ9LGZ1bmN0aW9uKHQpe2kmJiJ0YWtlR2xvYmFsQ3Vyc29yIj09PWkudHlwZSYmdC5zZXRCcnVzaE9wdGlvbigiYnJ1c2giPT09aS5rZXk/aS5icnVzaE9wdGlvbjp7YnJ1c2hUeXBlOiExfSksKHQuYnJ1c2hUYXJnZXRNYW5hZ2VyPW5ldyBwQSh0Lm9wdGlvbixlKSkuc2V0SW5wdXRSYW5nZXModC5hcmVhcyxlKX0pfSkseWYoTUQsZnVuY3Rpb24ocCx0LGUpe3ZhciBvLGcsbT1bXTtwLmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJicnVzaCJ9LGZ1bmN0aW9uKGEsdCl7dmFyIHM9e2JydXNoSWQ6YS5pZCxicnVzaEluZGV4OnQsYnJ1c2hOYW1lOmEubmFtZSxhcmVhczpEKGEuYXJlYXMpLHNlbGVjdGVkOltdfTttLnB1c2gocyk7dmFyIGU9YS5vcHRpb24saT1lLmJydXNoTGluayxuPVtdLGw9W10sdT1bXSxoPTA7dHx8KG89ZS50aHJvdHRsZVR5cGUsZz1lLnRocm90dGxlRGVsYXkpO3ZhciByPU4oYS5hcmVhcyxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIG49aS5zZWxlY3RvcnM9e307cmV0dXJuIEUoeURbaS5icnVzaFR5cGVdLGZ1bmN0aW9uKGUsdCl7blt0XT1mdW5jdGlvbih0KXtyZXR1cm4gZSh0LG4saSl9fSksaX0oQyh7Ym91bmRpbmdSZWN0OkREW3QuYnJ1c2hUeXBlXSh0KX0sdCkpfSksYz1tRChhLm9wdGlvbix3RCxmdW5jdGlvbih0KXt0Lm1hcHBpbmdNZXRob2Q9ImZpeGVkIn0pO2Z1bmN0aW9uIGQodCl7cmV0dXJuImFsbCI9PT1pfHxuW3RdfWZ1bmN0aW9uIGYodCl7cmV0dXJuISF0Lmxlbmd0aH1rKGkpJiZFKGksZnVuY3Rpb24odCl7blt0XT0xfSkscC5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQsZSl7dmFyIGk9dVtlXT1bXTsicGFyYWxsZWwiPT09dC5zdWJUeXBlP2Z1bmN0aW9uKHQsZSl7dmFyIGk9dC5jb29yZGluYXRlU3lzdGVtO2h8PWkuaGFzQXhpc0JydXNoZWQoKSxkKGUpJiZpLmVhY2hBY3RpdmVTdGF0ZSh0LmdldERhdGEoKSxmdW5jdGlvbih0LGUpeyJhY3RpdmUiPT09dCYmKGxbZV09MSl9KX0odCxlKTpmdW5jdGlvbihlLHQsaSl7dmFyIG49QUQoZSk7aWYoIW58fGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5vcHRpb24uc2VyaWVzSW5kZXg7cmV0dXJuIG51bGwhPWkmJiJhbGwiIT09aSYmKGsoaSk/XyhpLGUpPDA6ZSE9PWkpfShhLHQpKXJldHVybjtpZihFKHIsZnVuY3Rpb24odCl7blt0LmJydXNoVHlwZV0mJmEuYnJ1c2hUYXJnZXRNYW5hZ2VyLmNvbnRyb2xTZXJpZXModCxlLHApJiZpLnB1c2godCksaHw9ZihpKX0pLGQodCkmJmYoaSkpe3ZhciBvPWUuZ2V0RGF0YSgpO28uZWFjaChmdW5jdGlvbih0KXtURChuLGksbyx0KSYmKGxbdF09MSl9KX19KHQsZSxpKX0pLHAuZWFjaFNlcmllcyhmdW5jdGlvbih0LGUpe3ZhciBpPXtzZXJpZXNJZDp0LmlkLHNlcmllc0luZGV4OmUsc2VyaWVzTmFtZTp0Lm5hbWUsZGF0YUluZGV4OltdfTtzLnNlbGVjdGVkLnB1c2goaSk7dmFyIG49QUQodCksbz11W2VdLGE9dC5nZXREYXRhKCkscj1kKGUpP2Z1bmN0aW9uKHQpe3JldHVybiBsW3RdPyhpLmRhdGFJbmRleC5wdXNoKGEuZ2V0UmF3SW5kZXgodCkpLCJpbkJydXNoIik6Im91dE9mQnJ1c2gifTpmdW5jdGlvbih0KXtyZXR1cm4gVEQobixvLGEsdCk/KGkuZGF0YUluZGV4LnB1c2goYS5nZXRSYXdJbmRleCh0KSksImluQnJ1c2giKToib3V0T2ZCcnVzaCJ9OyhkKGUpP2g6ZihvKSkmJmZ1bmN0aW9uKHQsdSxoLGMsZCxmKXt2YXIgcCxnPXt9O2Z1bmN0aW9uIG0odCl7cmV0dXJuIGguZ2V0SXRlbVZpc3VhbChwLHQpfWZ1bmN0aW9uIHYodCxlKXtoLnNldEl0ZW1WaXN1YWwocCx0LGUpfWZ1bmN0aW9uIGUodCxlKXtwPW51bGw9PWY/dDplO3ZhciBpPWguZ2V0UmF3RGF0YUl0ZW0ocCk7aWYoIWl8fCExIT09aS52aXN1YWxNYXApZm9yKHZhciBuPWMuY2FsbChkLHQpLG89dVtuXSxhPWdbbl0scj0wLHM9YS5sZW5ndGg7cjxzO3IrKyl7dmFyIGw9YVtyXTtvW2xdJiZvW2xdLmFwcGx5VmlzdWFsKHQsbSx2KX19RSh0LGZ1bmN0aW9uKHQpe3ZhciBlPWFfLnByZXBhcmVWaXN1YWxUeXBlcyh1W3RdKTtnW3RdPWV9KSxudWxsPT1mP2guZWFjaChlKTpoLmVhY2goW2ZdLGUpfSh3RCxjLGEscil9KX0pLGZ1bmN0aW9uKHQsZSxpLG4sbyl7aWYoIW8pcmV0dXJuO3ZhciBhPXQuZ2V0WnIoKTtpZihhW1NEXSlyZXR1cm47YVtiRF18fChhW2JEXT1JRCk7VGMoYSxiRCxpLGUpKHQsbil9KHQsbyxnLG0sZSl9KTt2YXIgREQ9e2xpbmVYOmV0LGxpbmVZOmV0LHJlY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIENEKHQucmFuZ2UpfSxwb2x5Z29uOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpPXQucmFuZ2Usbj0wLG89aS5sZW5ndGg7bjxvO24rKyl7ZT1lfHxbWzEvMCwtMS8wXSxbMS8wLC0xLzBdXTt2YXIgYT1pW25dO2FbMF08ZVswXVswXSYmKGVbMF1bMF09YVswXSksYVswXT5lWzBdWzFdJiYoZVswXVsxXT1hWzBdKSxhWzFdPGVbMV1bMF0mJihlWzFdWzBdPWFbMV0pLGFbMV0+ZVsxXVsxXSYmKGVbMV1bMV09YVsxXSl9cmV0dXJuIGUmJkNEKGUpfX07ZnVuY3Rpb24gQ0QodCl7cmV0dXJuIG5ldyBNaSh0WzBdWzBdLHRbMV1bMF0sdFswXVsxXS10WzBdWzBdLHRbMV1bMV0tdFsxXVswXSl9dmFyIExEPVsiI2RkZCJdO3dmKHt0eXBlOiJicnVzaCIsZGVwZW5kZW5jaWVzOlsiZ2VvIiwiZ3JpZCIsInhBeGlzIiwieUF4aXMiLCJwYXJhbGxlbCIsInNlcmllcyJdLGRlZmF1bHRPcHRpb246e3Rvb2xib3g6bnVsbCxicnVzaExpbms6bnVsbCxzZXJpZXNJbmRleDoiYWxsIixnZW9JbmRleDpudWxsLHhBeGlzSW5kZXg6bnVsbCx5QXhpc0luZGV4Om51bGwsYnJ1c2hUeXBlOiJyZWN0IixicnVzaE1vZGU6InNpbmdsZSIsdHJhbnNmb3JtYWJsZTohMCxicnVzaFN0eWxlOntib3JkZXJXaWR0aDoxLGNvbG9yOiJyZ2JhKDEyMCwxNDAsMTgwLDAuMykiLGJvcmRlckNvbG9yOiJyZ2JhKDEyMCwxNDAsMTgwLDAuOCkifSx0aHJvdHRsZVR5cGU6ImZpeFJhdGUiLHRocm90dGxlRGVsYXk6MCxyZW1vdmVPbkNsaWNrOiEwLHo6MWU0fSxhcmVhczpbXSxicnVzaFR5cGU6bnVsbCxicnVzaE9wdGlvbjp7fSxjb29yZEluZm9MaXN0OltdLG9wdGlvblVwZGF0ZWQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm9wdGlvbjtlfHx2RChpLHQsWyJpbkJydXNoIiwib3V0T2ZCcnVzaCJdKTt2YXIgbj1pLmluQnJ1c2g9aS5pbkJydXNofHx7fTtpLm91dE9mQnJ1c2g9aS5vdXRPZkJydXNofHx7Y29sb3I6TER9LG4uaGFzT3duUHJvcGVydHkoImxpZnRaIil8fChuLmxpZnRaPTUpfSxzZXRBcmVhczpmdW5jdGlvbih0KXt0JiYodGhpcy5hcmVhcz1OKHQsZnVuY3Rpb24odCl7cmV0dXJuIGtEKHRoaXMub3B0aW9uLHQpfSx0aGlzKSl9LHNldEJydXNoT3B0aW9uOmZ1bmN0aW9uKHQpe3RoaXMuYnJ1c2hPcHRpb249a0QodGhpcy5vcHRpb24sdCksdGhpcy5icnVzaFR5cGU9dGhpcy5icnVzaE9wdGlvbi5icnVzaFR5cGV9fSk7ZnVuY3Rpb24ga0QodCxlKXtyZXR1cm4gbSh7YnJ1c2hUeXBlOnQuYnJ1c2hUeXBlLGJydXNoTW9kZTp0LmJydXNoTW9kZSx0cmFuc2Zvcm1hYmxlOnQudHJhbnNmb3JtYWJsZSxicnVzaFN0eWxlOm5ldyBJbCh0LmJydXNoU3R5bGUpLmdldEl0ZW1TdHlsZSgpLHJlbW92ZU9uQ2xpY2s6dC5yZW1vdmVPbkNsaWNrLHo6dC56fSxlLCEwKX1mdW5jdGlvbiBQRCh0LGUsaSxuKXtuJiZuLiRmcm9tPT09dC5pZHx8dGhpcy5fYnJ1c2hDb250cm9sbGVyLnNldFBhbmVscyh0LmJydXNoVGFyZ2V0TWFuYWdlci5tYWtlUGFuZWxPcHRzKGkpKS5lbmFibGVCcnVzaCh0LmJydXNoT3B0aW9uKS51cGRhdGVDb3ZlcnModC5hcmVhcy5zbGljZSgpKX1iZih7dHlwZToiYnJ1c2giLGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLmVjTW9kZWw9dCx0aGlzLmFwaT1lLHRoaXMubW9kZWwsKHRoaXMuX2JydXNoQ29udHJvbGxlcj1uZXcgZ2IoZS5nZXRacigpKSkub24oImJydXNoIixBKHRoaXMuX29uQnJ1c2gsdGhpcykpLm1vdW50KCl9LHJlbmRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tb2RlbD10LFBELmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdXBkYXRlVHJhbnNmb3JtOlBELHVwZGF0ZVZpZXc6UEQsZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX2JydXNoQ29udHJvbGxlci5kaXNwb3NlKCl9LF9vbkJydXNoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5tb2RlbC5pZDt0aGlzLm1vZGVsLmJydXNoVGFyZ2V0TWFuYWdlci5zZXRPdXRwdXRSYW5nZXModCx0aGlzLmVjTW9kZWwpLGUuaXNFbmQmJiFlLnJlbW92ZU9uQ2xpY2t8fHRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJicnVzaCIsYnJ1c2hJZDppLGFyZWFzOkQodCksJGZyb206aX0pLGUuaXNFbmQmJnRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJicnVzaEVuZCIsYnJ1c2hJZDppLGFyZWFzOkQodCksJGZyb206aX0pfX0pLGdmKHt0eXBlOiJicnVzaCIsZXZlbnQ6ImJydXNoIn0sZnVuY3Rpb24oZSx0KXt0LmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJicnVzaCIscXVlcnk6ZX0sZnVuY3Rpb24odCl7dC5zZXRBcmVhcyhlLmFyZWFzKX0pfSksZ2Yoe3R5cGU6ImJydXNoU2VsZWN0IixldmVudDoiYnJ1c2hTZWxlY3RlZCIsdXBkYXRlOiJub25lIn0sZnVuY3Rpb24oKXt9KSxnZih7dHlwZToiYnJ1c2hFbmQiLGV2ZW50OiJicnVzaEVuZCIsdXBkYXRlOiJub25lIn0sZnVuY3Rpb24oKXt9KTt2YXIgTkQ9Q2MudG9vbGJveC5icnVzaDtmdW5jdGlvbiBPRCh0LGUsaSl7dGhpcy5tb2RlbD10LHRoaXMuZWNNb2RlbD1lLHRoaXMuYXBpPWksdGhpcy5fYnJ1c2hUeXBlLHRoaXMuX2JydXNoTW9kZX1PRC5kZWZhdWx0T3B0aW9uPXtzaG93OiEwLHR5cGU6WyJyZWN0IiwicG9seWdvbiIsImxpbmVYIiwibGluZVkiLCJrZWVwIiwiY2xlYXIiXSxpY29uOntyZWN0OiJNNy4zLDM0LjcgTTAuNCwxMFYtMC4yaDkuOCBNODkuNiwxMFYtMC4yaC05LjggTTAuNCw2MHYxMC4yaDkuOCBNODkuNiw2MHYxMC4yaC05LjggTTEyLjMsMjIuNFYxMC41aDEzLjEgTTMzLjYsMTAuNWg3LjggTTQ5LjEsMTAuNWg3LjggTTc3LjUsMjIuNFYxMC41aC0xMyBNMTIuMywzMS4xdjguMiBNNzcuNywzMS4xdjguMiBNMTIuMyw0Ny42djExLjloMTMuMSBNMzMuNiw1OS41aDcuNiBNNDkuMSw1OS41IGg3LjcgTTc3LjUsNDcuNnYxMS45aC0xMyIscG9seWdvbjoiTTU1LjIsMzQuOWMxLjcsMCwzLjEsMS40LDMuMSwzLjFzLTEuNCwzLjEtMy4xLDMuMSBzLTMuMS0xLjQtMy4xLTMuMVM1My41LDM0LjksNTUuMiwzNC45eiBNNTAuNCw1MWMxLjcsMCwzLjEsMS40LDMuMSwzLjFjMCwxLjctMS40LDMuMS0zLjEsMy4xYy0xLjcsMC0zLjEtMS40LTMuMS0zLjEgQzQ3LjMsNTIuNCw0OC43LDUxLDUwLjQsNTF6IE01NS42LDM3LjFsMS41LTcuOCBNNjAuMSwxMy41bDEuNi04LjdsLTcuOCw0IE01OSwxOWwtMSw1LjMgTTI0LDE2LjFsNi40LDQuOWw2LjQtMy4zIE00OC41LDExLjYgbC01LjksMy4xIE0xOS4xLDEyLjhMOS43LDUuMWwxLjEsNy43IE0xMy40LDI5LjhsMSw3LjNsNi42LDEuNiBNMTEuNiwxOC40bDEsNi4xIE0zMi44LDQxLjkgTTI2LjYsNDAuNCBNMjcuMyw0MC4ybDYuMSwxLjYgTTQ5LjksNTIuMWwtNS42LTcuNmwtNC45LTEuMiIsbGluZVg6Ik0xNS4yLDMwIE0xOS43LDE1LjZWMS45SDI5IE0zNC44LDEuOUg0MC40IE01NS4zLDE1LjZWMS45SDQ1LjkgTTE5LjcsNDQuNFY1OC4xSDI5IE0zNC44LDU4LjFINDAuNCBNNTUuMyw0NC40IFY1OC4xSDQ1LjkgTTEyLjUsMjAuM2wtOS40LDkuNmw5LjYsOS44IE0zLjEsMjkuOWgxNi41IE02Mi41LDIwLjNsOS40LDkuNkw2Mi4zLDM5LjcgTTcxLjksMjkuOUg1NS40IixsaW5lWToiTTM4LjgsNy43IE01Mi43LDEyaDEzLjJ2OSBNNjUuOSwyNi42VjMyIE01Mi43LDQ2LjNoMTMuMnYtOSBNMjQuOSwxMkgxMS44djkgTTExLjgsMjYuNlYzMiBNMjQuOSw0Ni4zSDExLjh2LTkgTTQ4LjIsNS4xbC05LjMtOWwtOS40LDkuMiBNMzguOS0zLjlWMTIgTTQ4LjIsNTMuM2wtOS4zLDlsLTkuNC05LjIgTTM4LjksNjIuM1Y0Ni40IixrZWVwOiJNNCwxMC41VjFoMTAuMyBNMjAuNywxaDYuMSBNMzMsMWg2LjEgTTU1LjQsMTAuNVYxSDQ1LjIgTTQsMTcuM3Y2LjYgTTU1LjYsMTcuM3Y2LjYgTTQsMzAuNVY0MGgxMC4zIE0yMC43LDQwIGg2LjEgTTMzLDQwaDYuMSBNNTUuNCwzMC41VjQwSDQ1LjIgTTIxLDE4LjloNjIuOXY0OC42SDIxVjE4Ljl6IixjbGVhcjoiTTIyLDE0LjdsMzAuOSwzMSBNNTIuOSwxNC43TDIyLDQ1LjcgTTQuNywxNi44VjQuMmgxMy4xIE0yNiw0LjJoNy44IE00MS42LDQuMmg3LjggTTcwLjMsMTYuOFY0LjJINTcuMiBNNC43LDI1Ljl2OC42IE03MC4zLDI1Ljl2OC42IE00LjcsNDMuMnYxMi42aDEzLjEgTTI2LDU1LjhoNy44IE00MS42LDU1LjhoNy44IE03MC4zLDQzLjJ2MTIuNkg1Ny4yIn0sdGl0bGU6RChORC50aXRsZSl9O3ZhciBFRD1PRC5wcm90b3R5cGU7RUQucmVuZGVyPUVELnVwZGF0ZVZpZXc9ZnVuY3Rpb24oZSx0LGkpe3ZhciBuLG8sYTt0LmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJicnVzaCJ9LGZ1bmN0aW9uKHQpe249dC5icnVzaFR5cGUsbz10LmJydXNoT3B0aW9uLmJydXNoTW9kZXx8InNpbmdsZSIsYXw9dC5hcmVhcy5sZW5ndGh9KSx0aGlzLl9icnVzaFR5cGU9bix0aGlzLl9icnVzaE1vZGU9byxFKGUuZ2V0KCJ0eXBlIiwhMCksZnVuY3Rpb24odCl7ZS5zZXRJY29uU3RhdHVzKHQsKCJrZWVwIj09PXQ/Im11bHRpcGxlIj09PW86ImNsZWFyIj09PXQ/YTp0PT09bik/ImVtcGhhc2lzIjoibm9ybWFsIil9KX0sRUQuZ2V0SWNvbnM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1vZGVsLGU9dC5nZXQoImljb24iLCEwKSxpPXt9O3JldHVybiBFKHQuZ2V0KCJ0eXBlIiwhMCksZnVuY3Rpb24odCl7ZVt0XSYmKGlbdF09ZVt0XSl9KSxpfSxFRC5vbmNsaWNrPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLl9icnVzaFR5cGUsbz10aGlzLl9icnVzaE1vZGU7ImNsZWFyIj09PWk/KGUuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImF4aXNBcmVhU2VsZWN0IixpbnRlcnZhbHM6W119KSxlLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJicnVzaCIsY29tbWFuZDoiY2xlYXIiLGFyZWFzOltdfSkpOmUuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6InRha2VHbG9iYWxDdXJzb3IiLGtleToiYnJ1c2giLGJydXNoT3B0aW9uOnticnVzaFR5cGU6ImtlZXAiPT09aT9uOm4hPT1pJiZpLGJydXNoTW9kZToia2VlcCI9PT1pPyJtdWx0aXBsZSI9PT1vPyJzaW5nbGUiOiJtdWx0aXBsZSI6b319KX0sSFQoImJydXNoIixPRCksZmYoZnVuY3Rpb24odCxlKXt2YXIgaT10JiZ0LmJydXNoO2lmKGsoaSl8fChpPWk/W2ldOltdKSxpLmxlbmd0aCl7dmFyIG49W107RShpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuaGFzT3duUHJvcGVydHkoInRvb2xib3giKT90LnRvb2xib3g6W107ZSBpbnN0YW5jZW9mIEFycmF5JiYobj1uLmNvbmNhdChlKSl9KTt2YXIgbz10JiZ0LnRvb2xib3g7ayhvKSYmKG89b1swXSksb3x8KG89e2ZlYXR1cmU6e319LHQudG9vbGJveD1bb10pO3ZhciBhPW8uZmVhdHVyZXx8KG8uZmVhdHVyZT17fSkscj1hLmJydXNofHwoYS5icnVzaD17fSkscz1yLnR5cGV8fChyLnR5cGU9W10pO3MucHVzaC5hcHBseShzLG4pLGZ1bmN0aW9uKGkpe3ZhciBlPXt9O0UoaSxmdW5jdGlvbih0KXtlW3RdPTF9KSxpLmxlbmd0aD0wLEUoZSxmdW5jdGlvbih0LGUpe2kucHVzaChlKX0pfShzKSxlJiYhcy5sZW5ndGgmJnMucHVzaC5hcHBseShzLGZEKX19KSx3Zih7dHlwZToidGl0bGUiLGxheW91dE1vZGU6e3R5cGU6ImJveCIsaWdub3JlU2l6ZTohMH0sZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejo2LHNob3c6ITAsdGV4dDoiIix0YXJnZXQ6ImJsYW5rIixzdWJ0ZXh0OiIiLHN1YnRhcmdldDoiYmxhbmsiLGxlZnQ6MCx0b3A6MCxiYWNrZ3JvdW5kQ29sb3I6InJnYmEoMCwwLDAsMCkiLGJvcmRlckNvbG9yOiIjY2NjIixib3JkZXJXaWR0aDowLHBhZGRpbmc6NSxpdGVtR2FwOjEwLHRleHRTdHlsZTp7Zm9udFNpemU6MTgsZm9udFdlaWdodDoiYm9sZGVyIixjb2xvcjoiIzMzMyJ9LHN1YnRleHRTdHlsZTp7Y29sb3I6IiNhYWEifX19KSxiZih7dHlwZToidGl0bGUiLHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7aWYodGhpcy5ncm91cC5yZW1vdmVBbGwoKSx0LmdldCgic2hvdyIpKXt2YXIgbj10aGlzLmdyb3VwLG89dC5nZXRNb2RlbCgidGV4dFN0eWxlIiksYT10LmdldE1vZGVsKCJzdWJ0ZXh0U3R5bGUiKSxyPXQuZ2V0KCJ0ZXh0QWxpZ24iKSxzPUgodC5nZXQoInRleHRCYXNlbGluZSIpLHQuZ2V0KCJ0ZXh0VmVydGljYWxBbGlnbiIpKSxsPW5ldyBGcih7c3R5bGU6UXMoe30sbyx7dGV4dDp0LmdldCgidGV4dCIpLHRleHRGaWxsOm8uZ2V0VGV4dENvbG9yKCl9LHtkaXNhYmxlQm94OiEwfSksejI6MTB9KSx1PWwuZ2V0Qm91bmRpbmdSZWN0KCksaD10LmdldCgic3VidGV4dCIpLGM9bmV3IEZyKHtzdHlsZTpRcyh7fSxhLHt0ZXh0OmgsdGV4dEZpbGw6YS5nZXRUZXh0Q29sb3IoKSx5OnUuaGVpZ2h0K3QuZ2V0KCJpdGVtR2FwIiksdGV4dFZlcnRpY2FsQWxpZ246InRvcCJ9LHtkaXNhYmxlQm94OiEwfSksejI6MTB9KSxkPXQuZ2V0KCJsaW5rIiksZj10LmdldCgic3VibGluayIpLHA9dC5nZXQoInRyaWdnZXJFdmVudCIsITApO2wuc2lsZW50PSFkJiYhcCxjLnNpbGVudD0hZiYmIXAsZCYmbC5vbigiY2xpY2siLGZ1bmN0aW9uKCl7d2luZG93Lm9wZW4oZCwiXyIrdC5nZXQoInRhcmdldCIpKX0pLGYmJmMub24oImNsaWNrIixmdW5jdGlvbigpe3dpbmRvdy5vcGVuKGYsIl8iK3QuZ2V0KCJzdWJ0YXJnZXQiKSl9KSxsLmV2ZW50RGF0YT1jLmV2ZW50RGF0YT1wP3tjb21wb25lbnRUeXBlOiJ0aXRsZSIsY29tcG9uZW50SW5kZXg6dC5jb21wb25lbnRJbmRleH06bnVsbCxuLmFkZChsKSxoJiZuLmFkZChjKTt2YXIgZz1uLmdldEJvdW5kaW5nUmVjdCgpLG09dC5nZXRCb3hMYXlvdXRQYXJhbXMoKTttLndpZHRoPWcud2lkdGgsbS5oZWlnaHQ9Zy5oZWlnaHQ7dmFyIHY9dnUobSx7d2lkdGg6aS5nZXRXaWR0aCgpLGhlaWdodDppLmdldEhlaWdodCgpfSx0LmdldCgicGFkZGluZyIpKTtyfHwoIm1pZGRsZSI9PT0ocj10LmdldCgibGVmdCIpfHx0LmdldCgicmlnaHQiKSkmJihyPSJjZW50ZXIiKSwicmlnaHQiPT09cj92LngrPXYud2lkdGg6ImNlbnRlciI9PT1yJiYodi54Kz12LndpZHRoLzIpKSxzfHwoImNlbnRlciI9PT0ocz10LmdldCgidG9wIil8fHQuZ2V0KCJib3R0b20iKSkmJihzPSJtaWRkbGUiKSwiYm90dG9tIj09PXM/di55Kz12LmhlaWdodDoibWlkZGxlIj09PXMmJih2LnkrPXYuaGVpZ2h0LzIpLHM9c3x8InRvcCIpLG4uYXR0cigicG9zaXRpb24iLFt2Lngsdi55XSk7dmFyIHk9e3RleHRBbGlnbjpyLHRleHRWZXJ0aWNhbEFsaWduOnN9O2wuc2V0U3R5bGUoeSksYy5zZXRTdHlsZSh5KSxnPW4uZ2V0Qm91bmRpbmdSZWN0KCk7dmFyIHg9di5tYXJnaW4sXz10LmdldEl0ZW1TdHlsZShbImNvbG9yIiwib3BhY2l0eSJdKTtfLmZpbGw9dC5nZXQoImJhY2tncm91bmRDb2xvciIpO3ZhciB3PW5ldyBpcyh7c2hhcGU6e3g6Zy54LXhbM10seTpnLnkteFswXSx3aWR0aDpnLndpZHRoK3hbMV0reFszXSxoZWlnaHQ6Zy5oZWlnaHQreFswXSt4WzJdLHI6dC5nZXQoImJvcmRlclJhZGl1cyIpfSxzdHlsZTpfLHN1YlBpeGVsT3B0aW1pemU6ITAsc2lsZW50OiEwfSk7bi5hZGQodyl9fX0pO2Z1bmN0aW9uIHpEKHQpe3ZhciBlPXQuaXRlbVN0eWxlfHwodC5pdGVtU3R5bGU9e30pLGk9ZS5lbXBoYXNpc3x8KGUuZW1waGFzaXM9e30pLG49dC5sYWJlbHx8dC5sYWJlbHx8e30sbz1uLm5vcm1hbHx8KG4ubm9ybWFsPXt9KSxhPXtub3JtYWw6MSxlbXBoYXNpczoxfTtFKG4sZnVuY3Rpb24odCxlKXthW2VdfHxSRChvLGUpfHwob1tlXT10KX0pLGkubGFiZWwmJiFSRChuLCJlbXBoYXNpcyIpJiYobi5lbXBoYXNpcz1pLmxhYmVsLGRlbGV0ZSBpLmxhYmVsKX1mdW5jdGlvbiBSRCh0LGUpe3JldHVybiB0Lmhhc093blByb3BlcnR5KGUpfVR1LnJlZ2lzdGVyU3ViVHlwZURlZmF1bHRlcigidGltZWxpbmUiLGZ1bmN0aW9uKCl7cmV0dXJuInNsaWRlciJ9KSxnZih7dHlwZToidGltZWxpbmVDaGFuZ2UiLGV2ZW50OiJ0aW1lbGluZUNoYW5nZWQiLHVwZGF0ZToicHJlcGFyZUFuZFVwZGF0ZSJ9LGZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5nZXRDb21wb25lbnQoInRpbWVsaW5lIik7cmV0dXJuIGkmJm51bGwhPXQuY3VycmVudEluZGV4JiYoaS5zZXRDdXJyZW50SW5kZXgodC5jdXJyZW50SW5kZXgpLCFpLmdldCgibG9vcCIsITApJiZpLmlzSW5kZXhNYXgoKSYmaS5zZXRQbGF5U3RhdGUoITEpKSxlLnJlc2V0T3B0aW9uKCJ0aW1lbGluZSIpLEMoe2N1cnJlbnRJbmRleDppLm9wdGlvbi5jdXJyZW50SW5kZXh9LHQpfSksZ2Yoe3R5cGU6InRpbWVsaW5lUGxheUNoYW5nZSIsZXZlbnQ6InRpbWVsaW5lUGxheUNoYW5nZWQiLHVwZGF0ZToidXBkYXRlIn0sZnVuY3Rpb24odCxlKXt2YXIgaT1lLmdldENvbXBvbmVudCgidGltZWxpbmUiKTtpJiZudWxsIT10LnBsYXlTdGF0ZSYmaS5zZXRQbGF5U3RhdGUodC5wbGF5U3RhdGUpfSk7dmFyIEJEPVR1LmV4dGVuZCh7dHlwZToidGltZWxpbmUiLGxheW91dE1vZGU6ImJveCIsZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejo0LHNob3c6ITAsYXhpc1R5cGU6InRpbWUiLHJlYWx0aW1lOiEwLGxlZnQ6IjIwJSIsdG9wOm51bGwscmlnaHQ6IjIwJSIsYm90dG9tOjAsd2lkdGg6bnVsbCxoZWlnaHQ6NDAscGFkZGluZzo1LGNvbnRyb2xQb3NpdGlvbjoibGVmdCIsYXV0b1BsYXk6ITEscmV3aW5kOiExLGxvb3A6ITAscGxheUludGVydmFsOjJlMyxjdXJyZW50SW5kZXg6MCxpdGVtU3R5bGU6e30sbGFiZWw6e2NvbG9yOiIjMDAwIn0sZGF0YTpbXX0saW5pdDpmdW5jdGlvbih0LGUsaSl7dGhpcy5fZGF0YSx0aGlzLl9uYW1lcyx0aGlzLm1lcmdlRGVmYXVsdEFuZFRoZW1lKHQsaSksdGhpcy5faW5pdERhdGEoKX0sbWVyZ2VPcHRpb246ZnVuY3Rpb24odCl7QkQuc3VwZXJBcHBseSh0aGlzLCJtZXJnZU9wdGlvbiIsYXJndW1lbnRzKSx0aGlzLl9pbml0RGF0YSgpfSxzZXRDdXJyZW50SW5kZXg6ZnVuY3Rpb24odCl7bnVsbD09dCYmKHQ9dGhpcy5vcHRpb24uY3VycmVudEluZGV4KTt2YXIgZT10aGlzLl9kYXRhLmNvdW50KCk7dGhpcy5vcHRpb24ubG9vcD90PSh0JWUrZSklZTooZTw9dCYmKHQ9ZS0xKSx0PDAmJih0PTApKSx0aGlzLm9wdGlvbi5jdXJyZW50SW5kZXg9dH0sZ2V0Q3VycmVudEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uLmN1cnJlbnRJbmRleH0saXNJbmRleE1heDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEN1cnJlbnRJbmRleCgpPj10aGlzLl9kYXRhLmNvdW50KCktMX0sc2V0UGxheVN0YXRlOmZ1bmN0aW9uKHQpe3RoaXMub3B0aW9uLmF1dG9QbGF5PSEhdH0sZ2V0UGxheVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLm9wdGlvbi5hdXRvUGxheX0sX2luaXREYXRhOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb24sZT10LmRhdGF8fFtdLGk9dC5heGlzVHlwZSxvPXRoaXMuX25hbWVzPVtdO2lmKCJjYXRlZ29yeSI9PT1pKXt2YXIgYT1bXTtFKGUsZnVuY3Rpb24odCxlKXt2YXIgaSxuPUJvKHQpO1IodCk/KGk9RCh0KSkudmFsdWU9ZTppPWUsYS5wdXNoKGkpLHoobil8fG51bGwhPW4mJiFpc05hTihuKXx8KG49IiIpLG8ucHVzaChuKyIiKX0pLGU9YX12YXIgbj17Y2F0ZWdvcnk6Im9yZGluYWwiLHRpbWU6InRpbWUifVtpXXx8Im51bWJlciI7KHRoaXMuX2RhdGE9bmV3IFdmKFt7bmFtZToidmFsdWUiLHR5cGU6bn1dLHRoaXMpKS5pbml0RGF0YShlLG8pfSxnZXREYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9LGdldENhdGVnb3JpZXM6ZnVuY3Rpb24oKXtpZigiY2F0ZWdvcnkiPT09dGhpcy5nZXQoImF4aXNUeXBlIikpcmV0dXJuIHRoaXMuX25hbWVzLnNsaWNlKCl9fSk7YihCRC5leHRlbmQoe3R5cGU6InRpbWVsaW5lLnNsaWRlciIsZGVmYXVsdE9wdGlvbjp7YmFja2dyb3VuZENvbG9yOiJyZ2JhKDAsMCwwLDApIixib3JkZXJDb2xvcjoiI2NjYyIsYm9yZGVyV2lkdGg6MCxvcmllbnQ6Imhvcml6b250YWwiLGludmVyc2U6ITEsdG9vbHRpcDp7dHJpZ2dlcjoiaXRlbSJ9LHN5bWJvbDoiZW1wdHlDaXJjbGUiLHN5bWJvbFNpemU6MTAsbGluZVN0eWxlOntzaG93OiEwLHdpZHRoOjIsY29sb3I6IiMzMDQ2NTQifSxsYWJlbDp7cG9zaXRpb246ImF1dG8iLHNob3c6ITAsaW50ZXJ2YWw6ImF1dG8iLHJvdGF0ZTowLGNvbG9yOiIjMzA0NjU0In0saXRlbVN0eWxlOntjb2xvcjoiIzMwNDY1NCIsYm9yZGVyV2lkdGg6MX0sY2hlY2twb2ludFN0eWxlOntzeW1ib2w6ImNpcmNsZSIsc3ltYm9sU2l6ZToxMyxjb2xvcjoiI2MyMzUzMSIsYm9yZGVyV2lkdGg6NSxib3JkZXJDb2xvcjoicmdiYSgxOTQsNTMsNDksIDAuNSkiLGFuaW1hdGlvbjohMCxhbmltYXRpb25EdXJhdGlvbjozMDAsYW5pbWF0aW9uRWFzaW5nOiJxdWludGljSW5PdXQifSxjb250cm9sU3R5bGU6e3Nob3c6ITAsc2hvd1BsYXlCdG46ITAsc2hvd1ByZXZCdG46ITAsc2hvd05leHRCdG46ITAsaXRlbVNpemU6MjIsaXRlbUdhcDoxMixwb3NpdGlvbjoibGVmdCIscGxheUljb246InBhdGg6Ly9NMzEuNiw1M0MxNy41LDUzLDYsNDEuNSw2LDI3LjRTMTcuNSwxLjgsMzEuNiwxLjhDNDUuNywxLjgsNTcuMiwxMy4zLDU3LjIsMjcuNFM0NS43LDUzLDMxLjYsNTN6IE0zMS42LDMuMyBDMTguNCwzLjMsNy41LDE0LjEsNy41LDI3LjRjMCwxMy4zLDEwLjgsMjQuMSwyNC4xLDI0LjFDNDQuOSw1MS41LDU1LjcsNDAuNyw1NS43LDI3LjRDNTUuNywxNC4xLDQ0LjksMy4zLDMxLjYsMy4zeiBNMjQuOSwyMS4zIGMwLTIuMiwxLjYtMy4xLDMuNS0ybDEwLjUsNi4xYzEuODk5LDEuMSwxLjg5OSwyLjksMCw0bC0xMC41LDYuMWMtMS45LDEuMS0zLjUsMC4yLTMuNS0yVjIxLjN6IixzdG9wSWNvbjoicGF0aDovL00zMC45LDUzLjJDMTYuOCw1My4yLDUuMyw0MS43LDUuMywyNy42UzE2LjgsMiwzMC45LDJDNDUsMiw1Ni40LDEzLjUsNTYuNCwyNy42UzQ1LDUzLjIsMzAuOSw1My4yeiBNMzAuOSwzLjVDMTcuNiwzLjUsNi44LDE0LjQsNi44LDI3LjZjMCwxMy4zLDEwLjgsMjQuMSwyNC4xMDEsMjQuMUM0NC4yLDUxLjcsNTUsNDAuOSw1NSwyNy42QzU0LjksMTQuNCw0NC4xLDMuNSwzMC45LDMuNXogTTM2LjksMzUuOGMwLDAuNjAxLTAuNCwxLTAuOSwxaC0xLjNjLTAuNSwwLTAuOS0wLjM5OS0wLjktMVYxOS41YzAtMC42LDAuNC0xLDAuOS0xSDM2YzAuNSwwLDAuOSwwLjQsMC45LDFWMzUuOHogTTI3LjgsMzUuOCBjMCwwLjYwMS0wLjQsMS0wLjksMWgtMS4zYy0wLjUsMC0wLjktMC4zOTktMC45LTFWMTkuNWMwLTAuNiwwLjQtMSwwLjktMUgyN2MwLjUsMCwwLjksMC40LDAuOSwxTDI3LjgsMzUuOEwyNy44LDM1Ljh6IixuZXh0SWNvbjoicGF0aDovL00xOC42LDUwLjhsMjIuNS0yMi41YzAuMi0wLjIsMC4zLTAuNCwwLjMtMC43YzAtMC4zLTAuMS0wLjUtMC4zLTAuN0wxOC43LDQuNGMtMC4xLTAuMS0wLjItMC4zLTAuMi0wLjUgYzAtMC40LDAuMy0wLjgsMC44LTAuOGMwLjIsMCwwLjUsMC4xLDAuNiwwLjNsMjMuNSwyMy41bDAsMGMwLjIsMC4yLDAuMywwLjQsMC4zLDAuN2MwLDAuMy0wLjEsMC41LTAuMywwLjdsLTAuMSwwLjFMMTkuNyw1MiBjLTAuMSwwLjEtMC4zLDAuMi0wLjUsMC4yYy0wLjQsMC0wLjgtMC4zLTAuOC0wLjhDMTguNCw1MS4yLDE4LjUsNTEsMTguNiw1MC44eiIscHJldkljb246InBhdGg6Ly9NNDMsNTIuOEwyMC40LDMwLjNjLTAuMi0wLjItMC4zLTAuNC0wLjMtMC43YzAtMC4zLDAuMS0wLjUsMC4zLTAuN0w0Mi45LDYuNGMwLjEtMC4xLDAuMi0wLjMsMC4yLTAuNSBjMC0wLjQtMC4zLTAuOC0wLjgtMC44Yy0wLjIsMC0wLjUsMC4xLTAuNiwwLjNMMTguMywyOC44bDAsMGMtMC4yLDAuMi0wLjMsMC40LTAuMywwLjdjMCwwLjMsMC4xLDAuNSwwLjMsMC43bDAuMSwwLjFMNDEuOSw1NCBjMC4xLDAuMSwwLjMsMC4yLDAuNSwwLjJjMC40LDAsMC44LTAuMywwLjgtMC44QzQzLjIsNTMuMiw0My4xLDUzLDQzLDUyLjh6Iixjb2xvcjoiIzMwNDY1NCIsYm9yZGVyQ29sb3I6IiMzMDQ2NTQiLGJvcmRlcldpZHRoOjF9LGVtcGhhc2lzOntsYWJlbDp7c2hvdzohMCxjb2xvcjoiI2MyMzUzMSJ9LGl0ZW1TdHlsZTp7Y29sb3I6IiNjMjM1MzEifSxjb250cm9sU3R5bGU6e2NvbG9yOiIjYzIzNTMxIixib3JkZXJDb2xvcjoiI2MyMzUzMSIsYm9yZGVyV2lkdGg6Mn19LGRhdGE6W119fSksRmgpO2Z1bmN0aW9uIFZEKHQsZSxpLG4pe0VnLmNhbGwodGhpcyx0LGUsaSksdGhpcy50eXBlPW58fCJ2YWx1ZSIsdGhpcy5tb2RlbD1udWxsfXZhciBHRD1oYy5leHRlbmQoe3R5cGU6InRpbWVsaW5lIn0pO1ZELnByb3RvdHlwZT17Y29uc3RydWN0b3I6VkQsZ2V0TGFiZWxNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsLmdldE1vZGVsKCJsYWJlbCIpfSxpc0hvcml6b250YWw6ZnVuY3Rpb24oKXtyZXR1cm4iaG9yaXpvbnRhbCI9PT10aGlzLm1vZGVsLmdldCgib3JpZW50Iil9fSx3KFZELEVnKTt2YXIgRkQ9QSxXRD1FLEhEPU1hdGguUEk7ZnVuY3Rpb24gWkQodCxlLGksbixvLGEpe3ZhciByPWUuZ2V0KCJjb2xvciIpO28/KG8uc2V0Q29sb3IociksaS5hZGQobyksYSYmYS5vblVwZGF0ZShvKSk6KChvPW1nKHQuZ2V0KCJzeW1ib2wiKSwtMSwtMSwyLDIscikpLnNldFN0eWxlKCJzdHJva2VOb1NjYWxlIiwhMCksaS5hZGQobyksYSYmYS5vbkNyZWF0ZShvKSk7dmFyIHM9ZS5nZXRJdGVtU3R5bGUoWyJjb2xvciIsInN5bWJvbCIsInN5bWJvbFNpemUiXSk7by5zZXRTdHlsZShzKSxuPW0oe3JlY3RIb3ZlcjohMCx6MjoxMDB9LG4sITApO3ZhciBsPXQuZ2V0KCJzeW1ib2xTaXplIik7KGw9bCBpbnN0YW5jZW9mIEFycmF5P2wuc2xpY2UoKTpbK2wsK2xdKVswXS89MixsWzFdLz0yLG4uc2NhbGU9bDt2YXIgdT10LmdldCgic3ltYm9sT2Zmc2V0Iik7aWYodSl7dmFyIGg9bi5wb3NpdGlvbj1uLnBvc2l0aW9ufHxbMCwwXTtoWzBdKz1QbCh1WzBdLGxbMF0pLGhbMV0rPVBsKHVbMV0sbFsxXSl9dmFyIGM9dC5nZXQoInN5bWJvbFJvdGF0ZSIpO3JldHVybiBuLnJvdGF0aW9uPShjfHwwKSpNYXRoLlBJLzE4MHx8MCxvLmF0dHIobiksby51cGRhdGVUcmFuc2Zvcm0oKSxvfWZ1bmN0aW9uIFVEKHQsZSxpLG4sbyl7aWYoIXQuZHJhZ2dpbmcpe3ZhciBhPW4uZ2V0TW9kZWwoImNoZWNrcG9pbnRTdHlsZSIpLHI9aS5kYXRhVG9Db29yZChuLmdldERhdGEoKS5nZXQoWyJ2YWx1ZSJdLGUpKTtvfHwhYS5nZXQoImFuaW1hdGlvbiIsITApP3QuYXR0cih7cG9zaXRpb246W3IsMF19KToodC5zdG9wQW5pbWF0aW9uKCEwKSx0LmFuaW1hdGVUbyh7cG9zaXRpb246W3IsMF19LGEuZ2V0KCJhbmltYXRpb25EdXJhdGlvbiIsITApLGEuZ2V0KCJhbmltYXRpb25FYXNpbmciLCEwKSkpfX1HRC5leHRlbmQoe3R5cGU6InRpbWVsaW5lLnNsaWRlciIsaW5pdDpmdW5jdGlvbih0LGUpe3RoaXMuYXBpPWUsdGhpcy5fYXhpcyx0aGlzLl92aWV3UmVjdCx0aGlzLl90aW1lcix0aGlzLl9jdXJyZW50UG9pbnRlcix0aGlzLl9tYWluR3JvdXAsdGhpcy5fbGFiZWxHcm91cH0scmVuZGVyOmZ1bmN0aW9uKGUsdCxpLG4pe2lmKHRoaXMubW9kZWw9ZSx0aGlzLmFwaT1pLHRoaXMuZWNNb2RlbD10LHRoaXMuZ3JvdXAucmVtb3ZlQWxsKCksZS5nZXQoInNob3ciLCEwKSl7dmFyIG89dGhpcy5fbGF5b3V0KGUsaSksYT10aGlzLl9jcmVhdGVHcm91cCgibWFpbkdyb3VwIikscj10aGlzLl9jcmVhdGVHcm91cCgibGFiZWxHcm91cCIpLHM9dGhpcy5fYXhpcz10aGlzLl9jcmVhdGVBeGlzKG8sZSk7ZS5mb3JtYXRUb29sdGlwPWZ1bmN0aW9uKHQpe3JldHVybiBldShzLnNjYWxlLmdldExhYmVsKHQpKX0sV0QoWyJBeGlzTGluZSIsIkF4aXNUaWNrIiwiQ29udHJvbCIsIkN1cnJlbnRQb2ludGVyIl0sZnVuY3Rpb24odCl7dGhpc1siX3JlbmRlciIrdF0obyxhLHMsZSl9LHRoaXMpLHRoaXMuX3JlbmRlckF4aXNMYWJlbChvLHIscyxlKSx0aGlzLl9wb3NpdGlvbihvLGUpfXRoaXMuX2RvUGxheVN0b3AoKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJUaW1lcigpLHRoaXMuZ3JvdXAucmVtb3ZlQWxsKCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9jbGVhclRpbWVyKCl9LF9sYXlvdXQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10LmdldCgibGFiZWwucG9zaXRpb24iKSxuPXQuZ2V0KCJvcmllbnQiKSxvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZ1KHQuZ2V0Qm94TGF5b3V0UGFyYW1zKCkse3dpZHRoOmUuZ2V0V2lkdGgoKSxoZWlnaHQ6ZS5nZXRIZWlnaHQoKX0sdC5nZXQoInBhZGRpbmciKSl9KHQsZSk7bnVsbD09aXx8ImF1dG8iPT09aT9pPSJob3Jpem9udGFsIj09PW4/by55K28uaGVpZ2h0LzI8ZS5nZXRIZWlnaHQoKS8yPyItIjoiKyI6by54K28ud2lkdGgvMjxlLmdldFdpZHRoKCkvMj8iKyI6Ii0iOmlzTmFOKGkpJiYoaT17aG9yaXpvbnRhbDp7dG9wOiItIixib3R0b206IisifSx2ZXJ0aWNhbDp7bGVmdDoiLSIscmlnaHQ6IisifX1bbl1baV0pO3ZhciBhLHIscyxsLHU9e2hvcml6b250YWw6ImNlbnRlciIsdmVydGljYWw6MDw9aXx8IisiPT09aT8ibGVmdCI6InJpZ2h0In0saD17aG9yaXpvbnRhbDowPD1pfHwiKyI9PT1pPyJ0b3AiOiJib3R0b20iLHZlcnRpY2FsOiJtaWRkbGUifSxjPXtob3Jpem9udGFsOjAsdmVydGljYWw6SEQvMn0sZD0idmVydGljYWwiPT09bj9vLmhlaWdodDpvLndpZHRoLGY9dC5nZXRNb2RlbCgiY29udHJvbFN0eWxlIikscD1mLmdldCgic2hvdyIsITApLGc9cD9mLmdldCgiaXRlbVNpemUiKTowLG09cD9mLmdldCgiaXRlbUdhcCIpOjAsdj1nK20seT10LmdldCgibGFiZWwucm90YXRlIil8fDA7eT15KkhELzE4MDt2YXIgeD1mLmdldCgicG9zaXRpb24iLCEwKSxfPXAmJmYuZ2V0KCJzaG93UGxheUJ0biIsITApLHc9cCYmZi5nZXQoInNob3dQcmV2QnRuIiwhMCksYj1wJiZmLmdldCgic2hvd05leHRCdG4iLCEwKSxTPTAsTT1kO3JldHVybiJsZWZ0Ij09PXh8fCJib3R0b20iPT09eD8oXyYmKGE9WzAsMF0sUys9diksdyYmKHI9W1MsMF0sUys9dikpOihfJiYoYT1bTS1nLDBdLE0tPXYpLHcmJihyPVswLDBdLFMrPXYpKSxiJiYocz1bTS1nLDBdLE0tPXYpLGw9W1MsTV0sdC5nZXQoImludmVyc2UiKSYmbC5yZXZlcnNlKCkse3ZpZXdSZWN0Om8sbWFpbkxlbmd0aDpkLG9yaWVudDpuLHJvdGF0aW9uOmNbbl0sbGFiZWxSb3RhdGlvbjp5LGxhYmVsUG9zT3B0OmksbGFiZWxBbGlnbjp0LmdldCgibGFiZWwuYWxpZ24iKXx8dVtuXSxsYWJlbEJhc2VsaW5lOnQuZ2V0KCJsYWJlbC52ZXJ0aWNhbEFsaWduIil8fHQuZ2V0KCJsYWJlbC5iYXNlbGluZSIpfHxoW25dLHBsYXlQb3NpdGlvbjphLHByZXZCdG5Qb3NpdGlvbjpyLG5leHRCdG5Qb3NpdGlvbjpzLGF4aXNFeHRlbnQ6bCxjb250cm9sU2l6ZTpnLGNvbnRyb2xHYXA6bX19LF9wb3NpdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX21haW5Hcm91cCxuPXRoaXMuX2xhYmVsR3JvdXAsbz10LnZpZXdSZWN0O2lmKCJ2ZXJ0aWNhbCI9PT10Lm9yaWVudCl7dmFyIGE9ZWUoKSxyPW8ueCxzPW8ueStvLmhlaWdodDthZShhLGEsWy1yLC1zXSkscmUoYSxhLC1IRC8yKSxhZShhLGEsW3Isc10pLChvPW8uY2xvbmUoKSkuYXBwbHlUcmFuc2Zvcm0oYSl9dmFyIGw9bShvKSx1PW0oaS5nZXRCb3VuZGluZ1JlY3QoKSksaD1tKG4uZ2V0Qm91bmRpbmdSZWN0KCkpLGM9aS5wb3NpdGlvbixkPW4ucG9zaXRpb247ZFswXT1jWzBdPWxbMF1bMF07dmFyIGYscD10LmxhYmVsUG9zT3B0O2lzTmFOKHApPyh2KGMsdSxsLDEsZj0iKyI9PT1wPzA6MSksdihkLGgsbCwxLDEtZikpOih2KGMsdSxsLDEsZj0wPD1wPzA6MSksZFsxXT1jWzFdK3ApO2Z1bmN0aW9uIGcodCl7dmFyIGU9dC5wb3NpdGlvbjt0Lm9yaWdpbj1bbFswXVswXS1lWzBdLGxbMV1bMF0tZVsxXV19ZnVuY3Rpb24gbSh0KXtyZXR1cm5bW3QueCx0LngrdC53aWR0aF0sW3QueSx0LnkrdC5oZWlnaHRdXX1mdW5jdGlvbiB2KHQsZSxpLG4sbyl7dFtuXSs9aVtuXVtvXS1lW25dW29dfWkuYXR0cigicG9zaXRpb24iLGMpLG4uYXR0cigicG9zaXRpb24iLGQpLGkucm90YXRpb249bi5yb3RhdGlvbj10LnJvdGF0aW9uLGcoaSksZyhuKX0sX2NyZWF0ZUF4aXM6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmdldERhdGEoKSxuPWUuZ2V0KCJheGlzVHlwZSIpLG89aWcoZSxuKTtvLmdldFRpY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIGkubWFwQXJyYXkoWyJ2YWx1ZSJdLGZ1bmN0aW9uKHQpe3JldHVybiB0fSl9O3ZhciBhPWkuZ2V0RGF0YUV4dGVudCgidmFsdWUiKTtvLnNldEV4dGVudChhWzBdLGFbMV0pLG8ubmljZVRpY2tzKCk7dmFyIHI9bmV3IFZEKCJ2YWx1ZSIsbyx0LmF4aXNFeHRlbnQsbik7cmV0dXJuIHIubW9kZWw9ZSxyfSxfY3JlYXRlR3JvdXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpc1siXyIrdF09bmV3IElpO3JldHVybiB0aGlzLmdyb3VwLmFkZChlKSxlfSxfcmVuZGVyQXhpc0xpbmU6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89aS5nZXRFeHRlbnQoKTtuLmdldCgibGluZVN0eWxlLnNob3ciKSYmZS5hZGQobmV3IG9zKHtzaGFwZTp7eDE6b1swXSx5MTowLHgyOm9bMV0seTI6MH0sc3R5bGU6TCh7bGluZUNhcDoicm91bmQifSxuLmdldE1vZGVsKCJsaW5lU3R5bGUiKS5nZXRMaW5lU3R5bGUoKSksc2lsZW50OiEwLHoyOjF9KSl9LF9yZW5kZXJBeGlzVGljazpmdW5jdGlvbih0LHMsbCx1KXt2YXIgaD11LmdldERhdGEoKSxlPWwuc2NhbGUuZ2V0VGlja3MoKTtXRChlLGZ1bmN0aW9uKHQpe3ZhciBlPWwuZGF0YVRvQ29vcmQodCksaT1oLmdldEl0ZW1Nb2RlbCh0KSxuPWkuZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLG89aS5nZXRNb2RlbCgiZW1waGFzaXMuaXRlbVN0eWxlIiksYT17cG9zaXRpb246W2UsMF0sb25jbGljazpGRCh0aGlzLl9jaGFuZ2VUaW1lbGluZSx0aGlzLHQpfSxyPVpEKGksbixzLGEpO1lzKHIsby5nZXRJdGVtU3R5bGUoKSksaS5nZXQoInRvb2x0aXAiKT8oci5kYXRhSW5kZXg9dCxyLmRhdGFNb2RlbD11KTpyLmRhdGFJbmRleD1yLmRhdGFNb2RlbD1udWxsfSx0aGlzKX0sX3JlbmRlckF4aXNMYWJlbDpmdW5jdGlvbihzLGwsdSx0KXtpZih1LmdldExhYmVsTW9kZWwoKS5nZXQoInNob3ciKSl7dmFyIGg9dC5nZXREYXRhKCksZT11LmdldFZpZXdMYWJlbHMoKTtXRChlLGZ1bmN0aW9uKHQpe3ZhciBlPXQudGlja1ZhbHVlLGk9aC5nZXRJdGVtTW9kZWwoZSksbj1pLmdldE1vZGVsKCJsYWJlbCIpLG89aS5nZXRNb2RlbCgiZW1waGFzaXMubGFiZWwiKSxhPXUuZGF0YVRvQ29vcmQodC50aWNrVmFsdWUpLHI9bmV3IEZyKHtwb3NpdGlvbjpbYSwwXSxyb3RhdGlvbjpzLmxhYmVsUm90YXRpb24tcy5yb3RhdGlvbixvbmNsaWNrOkZEKHRoaXMuX2NoYW5nZVRpbWVsaW5lLHRoaXMsZSksc2lsZW50OiExfSk7UXMoci5zdHlsZSxuLHt0ZXh0OnQuZm9ybWF0dGVkTGFiZWwsdGV4dEFsaWduOnMubGFiZWxBbGlnbix0ZXh0VmVydGljYWxBbGlnbjpzLmxhYmVsQmFzZWxpbmV9KSxsLmFkZChyKSxZcyhyLFFzKHt9LG8pKX0sdGhpcyl9fSxfcmVuZGVyQ29udHJvbDpmdW5jdGlvbih0LGEsZSxyKXt2YXIgcz10LmNvbnRyb2xTaXplLGw9dC5yb3RhdGlvbix1PXIuZ2V0TW9kZWwoImNvbnRyb2xTdHlsZSIpLmdldEl0ZW1TdHlsZSgpLGg9ci5nZXRNb2RlbCgiZW1waGFzaXMuY29udHJvbFN0eWxlIikuZ2V0SXRlbVN0eWxlKCksYz1bMCwtcy8yLHMsc10saT1yLmdldFBsYXlTdGF0ZSgpLG49ci5nZXQoImludmVyc2UiLCEwKTtmdW5jdGlvbiBvKHQsZSxpLG4pe2lmKHQpe3ZhciBvPWZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBEcyh0LmdldChlKS5yZXBsYWNlKC9ecGF0aDpcL1wvLywiIiksRChufHx7fSksbmV3IE1pKGlbMF0saVsxXSxpWzJdLGlbM10pLCJjZW50ZXIiKX0ocixlLGMse3Bvc2l0aW9uOnQsb3JpZ2luOltzLzIsMF0scm90YXRpb246bj8tbDowLHJlY3RIb3ZlcjohMCxzdHlsZTp1LG9uY2xpY2s6aX0pO2EuYWRkKG8pLFlzKG8saCl9fW8odC5uZXh0QnRuUG9zaXRpb24sImNvbnRyb2xTdHlsZS5uZXh0SWNvbiIsRkQodGhpcy5fY2hhbmdlVGltZWxpbmUsdGhpcyxuPyItIjoiKyIpKSxvKHQucHJldkJ0blBvc2l0aW9uLCJjb250cm9sU3R5bGUucHJldkljb24iLEZEKHRoaXMuX2NoYW5nZVRpbWVsaW5lLHRoaXMsbj8iKyI6Ii0iKSksbyh0LnBsYXlQb3NpdGlvbiwiY29udHJvbFN0eWxlLiIrKGk/InN0b3BJY29uIjoicGxheUljb24iKSxGRCh0aGlzLl9oYW5kbGVQbGF5Q2xpY2ssdGhpcywhaSksITApfSxfcmVuZGVyQ3VycmVudFBvaW50ZXI6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89bi5nZXREYXRhKCksYT1uLmdldEN1cnJlbnRJbmRleCgpLHI9by5nZXRJdGVtTW9kZWwoYSkuZ2V0TW9kZWwoImNoZWNrcG9pbnRTdHlsZSIpLHM9dGhpcyxsPXtvbkNyZWF0ZTpmdW5jdGlvbih0KXt0LmRyYWdnYWJsZT0hMCx0LmRyaWZ0PUZEKHMuX2hhbmRsZVBvaW50ZXJEcmFnLHMpLHQub25kcmFnZW5kPUZEKHMuX2hhbmRsZVBvaW50ZXJEcmFnZW5kLHMpLFVEKHQsYSxpLG4sITApfSxvblVwZGF0ZTpmdW5jdGlvbih0KXtVRCh0LGEsaSxuKX19O3RoaXMuX2N1cnJlbnRQb2ludGVyPVpEKHIscix0aGlzLl9tYWluR3JvdXAse30sdGhpcy5fY3VycmVudFBvaW50ZXIsbCl9LF9oYW5kbGVQbGF5Q2xpY2s6ZnVuY3Rpb24odCl7dGhpcy5fY2xlYXJUaW1lcigpLHRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJ0aW1lbGluZVBsYXlDaGFuZ2UiLHBsYXlTdGF0ZTp0LGZyb206dGhpcy51aWR9KX0sX2hhbmRsZVBvaW50ZXJEcmFnOmZ1bmN0aW9uKHQsZSxpKXt0aGlzLl9jbGVhclRpbWVyKCksdGhpcy5fcG9pbnRlckNoYW5nZVRpbWVsaW5lKFtpLm9mZnNldFgsaS5vZmZzZXRZXSl9LF9oYW5kbGVQb2ludGVyRHJhZ2VuZDpmdW5jdGlvbih0KXt0aGlzLl9wb2ludGVyQ2hhbmdlVGltZWxpbmUoW3Qub2Zmc2V0WCx0Lm9mZnNldFldLCEwKX0sX3BvaW50ZXJDaGFuZ2VUaW1lbGluZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3RvQXhpc0Nvb3JkKHQpWzBdLG49T2wodGhpcy5fYXhpcy5nZXRFeHRlbnQoKS5zbGljZSgpKTtpPm5bMV0mJihpPW5bMV0pLGk8blswXSYmKGk9blswXSksdGhpcy5fY3VycmVudFBvaW50ZXIucG9zaXRpb25bMF09aSx0aGlzLl9jdXJyZW50UG9pbnRlci5kaXJ0eSgpO3ZhciBvPXRoaXMuX2ZpbmROZWFyZXN0VGljayhpKSxhPXRoaXMubW9kZWw7KGV8fG8hPT1hLmdldEN1cnJlbnRJbmRleCgpJiZhLmdldCgicmVhbHRpbWUiKSkmJnRoaXMuX2NoYW5nZVRpbWVsaW5lKG8pfSxfZG9QbGF5U3RvcDpmdW5jdGlvbigpe3RoaXMuX2NsZWFyVGltZXIoKSx0aGlzLm1vZGVsLmdldFBsYXlTdGF0ZSgpJiYodGhpcy5fdGltZXI9c2V0VGltZW91dChGRChmdW5jdGlvbigpe3ZhciB0PXRoaXMubW9kZWw7dGhpcy5fY2hhbmdlVGltZWxpbmUodC5nZXRDdXJyZW50SW5kZXgoKSsodC5nZXQoInJld2luZCIsITApPy0xOjEpKX0sdGhpcyksdGhpcy5tb2RlbC5nZXQoInBsYXlJbnRlcnZhbCIpKSl9LF90b0F4aXNDb29yZDpmdW5jdGlvbih0KXtyZXR1cm4gaGwodCx0aGlzLl9tYWluR3JvdXAuZ2V0TG9jYWxUcmFuc2Zvcm0oKSwhMCl9LF9maW5kTmVhcmVzdFRpY2s6ZnVuY3Rpb24obyl7dmFyIGEsdD10aGlzLm1vZGVsLmdldERhdGEoKSxyPTEvMCxzPXRoaXMuX2F4aXM7cmV0dXJuIHQuZWFjaChbInZhbHVlIl0sZnVuY3Rpb24odCxlKXt2YXIgaT1zLmRhdGFUb0Nvb3JkKHQpLG49TWF0aC5hYnMoaS1vKTtuPHImJihyPW4sYT1lKX0pLGF9LF9jbGVhclRpbWVyOmZ1bmN0aW9uKCl7dGhpcy5fdGltZXImJihjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpLHRoaXMuX3RpbWVyPW51bGwpfSxfY2hhbmdlVGltZWxpbmU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tb2RlbC5nZXRDdXJyZW50SW5kZXgoKTsiKyI9PT10P3Q9ZSsxOiItIj09PXQmJih0PWUtMSksdGhpcy5hcGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6InRpbWVsaW5lQ2hhbmdlIixjdXJyZW50SW5kZXg6dCxmcm9tOnRoaXMudWlkfSl9fSksZmYoZnVuY3Rpb24odCl7dmFyIGU9dCYmdC50aW1lbGluZTtrKGUpfHwoZT1lP1tlXTpbXSksRShlLGZ1bmN0aW9uKHQpe3QmJmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxpPXtudW1iZXI6InZhbHVlIix0aW1lOiJ0aW1lIn07aVtlXSYmKHQuYXhpc1R5cGU9aVtlXSxkZWxldGUgdC50eXBlKTtpZih6RCh0KSxSRCh0LCJjb250cm9sUG9zaXRpb24iKSl7dmFyIG49dC5jb250cm9sU3R5bGV8fCh0LmNvbnRyb2xTdHlsZT17fSk7UkQobiwicG9zaXRpb24iKXx8KG4ucG9zaXRpb249dC5jb250cm9sUG9zaXRpb24pLCJub25lIiE9PW4ucG9zaXRpb258fFJEKG4sInNob3ciKXx8KG4uc2hvdz0hMSxkZWxldGUgbi5wb3NpdGlvbiksZGVsZXRlIHQuY29udHJvbFBvc2l0aW9ufUUodC5kYXRhfHxbXSxmdW5jdGlvbih0KXtSKHQpJiYhayh0KSYmKCFSRCh0LCJ2YWx1ZSIpJiZSRCh0LCJuYW1lIikmJih0LnZhbHVlPXQubmFtZSksekQodCkpfSl9KHQpfSl9KTt2YXIgWEQ9S2wsWUQ9ZXU7ZnVuY3Rpb24gakQodCl7em8odCwibGFiZWwiLFsic2hvdyJdKX12YXIgcUQ9d2Yoe3R5cGU6Im1hcmtlciIsZGVwZW5kZW5jaWVzOlsic2VyaWVzIiwiZ3JpZCIsInBvbGFyIiwiZ2VvIl0saW5pdDpmdW5jdGlvbih0LGUsaSl7dGhpcy5tZXJnZURlZmF1bHRBbmRUaGVtZSh0LGkpLHRoaXMuX21lcmdlT3B0aW9uKHQsaSwhMSwhMCl9LGlzQW5pbWF0aW9uRW5hYmxlZDpmdW5jdGlvbigpe2lmKHYubm9kZSlyZXR1cm4hMTt2YXIgdD10aGlzLl9faG9zdFNlcmllcztyZXR1cm4gdGhpcy5nZXRTaGFsbG93KCJhbmltYXRpb24iKSYmdCYmdC5pc0FuaW1hdGlvbkVuYWJsZWQoKX0sbWVyZ2VPcHRpb246ZnVuY3Rpb24odCxlKXt0aGlzLl9tZXJnZU9wdGlvbih0LGUsITEsITEpfSxfbWVyZ2VPcHRpb246ZnVuY3Rpb24odCxuLGUsbyl7dmFyIGE9dGhpcy5jb25zdHJ1Y3RvcixyPXRoaXMubWFpblR5cGUrIk1vZGVsIjtlfHxuLmVhY2hTZXJpZXMoZnVuY3Rpb24odCl7dmFyIGU9dC5nZXQodGhpcy5tYWluVHlwZSwhMCksaT10W3JdO2UmJmUuZGF0YT8oaT9pLl9tZXJnZU9wdGlvbihlLG4sITApOihvJiZqRChlKSxFKGUuZGF0YSxmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQXJyYXk/KGpEKHRbMF0pLGpEKHRbMV0pKTpqRCh0KX0pLEwoaT1uZXcgYShlLHRoaXMsbikse21haW5UeXBlOnRoaXMubWFpblR5cGUsc2VyaWVzSW5kZXg6dC5zZXJpZXNJbmRleCxuYW1lOnQubmFtZSxjcmVhdGVkQnlTZWxmOiEwfSksaS5fX2hvc3RTZXJpZXM9dCksdFtyXT1pKTp0W3JdPW51bGx9LHRoaXMpfSxmb3JtYXRUb29sdGlwOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RGF0YSgpLGk9dGhpcy5nZXRSYXdWYWx1ZSh0KSxuPWsoaSk/TihpLFhEKS5qb2luKCIsICIpOlhEKGkpLG89ZS5nZXROYW1lKHQpLGE9WUQodGhpcy5uYW1lKTtyZXR1cm4gbnVsbD09aSYmIW98fChhKz0iPGJyIC8+IiksbyYmKGErPVlEKG8pLG51bGwhPWkmJihhKz0iIDogIikpLG51bGwhPWkmJihhKz1ZRChuKSksYX0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhfSxzZXREYXRhOmZ1bmN0aW9uKHQpe3RoaXMuX2RhdGE9dH19KTtiKHFELEZoKSxxRC5leHRlbmQoe3R5cGU6Im1hcmtQb2ludCIsZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejo1LHN5bWJvbDoicGluIixzeW1ib2xTaXplOjUwLHRvb2x0aXA6e3RyaWdnZXI6Iml0ZW0ifSxsYWJlbDp7c2hvdzohMCxwb3NpdGlvbjoiaW5zaWRlIn0saXRlbVN0eWxlOntib3JkZXJXaWR0aDoyfSxlbXBoYXNpczp7bGFiZWw6e3Nob3c6ITB9fX19KTt2YXIgS0Q9XztmdW5jdGlvbiAkRCh0LGUsaSxuLG8sYSl7dmFyIHI9W10scz1scChlLG4pP2UuZ2V0Q2FsY3VsYXRpb25JbmZvKCJzdGFja1Jlc3VsdERpbWVuc2lvbiIpOm4sbD1vQyhlLHMsdCksdT1lLmluZGljZXNPZk5lYXJlc3QocyxsKVswXTtyW29dPWUuZ2V0KGksdSksclthXT1lLmdldChuLHUpO3ZhciBoPUVsKGUuZ2V0KG4sdSkpO3JldHVybiAwPD0oaD1NYXRoLm1pbihoLDIwKSkmJihyW2FdPStyW2FdLnRvRml4ZWQoaCkpLHJ9dmFyIEpEPVQsUUQ9e21pbjpKRCgkRCwibWluIiksbWF4OkpEKCRELCJtYXgiKSxhdmVyYWdlOkpEKCRELCJhdmVyYWdlIil9O2Z1bmN0aW9uIHRDKHQsZSl7dmFyIGk9dC5nZXREYXRhKCksbj10LmNvb3JkaW5hdGVTeXN0ZW07aWYoZSYmIWZ1bmN0aW9uKHQpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KHQueCkpJiYhaXNOYU4ocGFyc2VGbG9hdCh0LnkpKX0oZSkmJiFrKGUuY29vcmQpJiZuKXt2YXIgbz1uLmRpbWVuc2lvbnMsYT1lQyhlLGksbix0KTtpZigoZT1EKGUpKS50eXBlJiZRRFtlLnR5cGVdJiZhLmJhc2VBeGlzJiZhLnZhbHVlQXhpcyl7dmFyIHI9S0QobyxhLmJhc2VBeGlzLmRpbSkscz1LRChvLGEudmFsdWVBeGlzLmRpbSk7ZS5jb29yZD1RRFtlLnR5cGVdKGksYS5iYXNlRGF0YURpbSxhLnZhbHVlRGF0YURpbSxyLHMpLGUudmFsdWU9ZS5jb29yZFtzXX1lbHNle2Zvcih2YXIgbD1bbnVsbCE9ZS54QXhpcz9lLnhBeGlzOmUucmFkaXVzQXhpcyxudWxsIT1lLnlBeGlzP2UueUF4aXM6ZS5hbmdsZUF4aXNdLHU9MDt1PDI7dSsrKVFEW2xbdV1dJiYobFt1XT1vQyhpLGkubWFwRGltZW5zaW9uKG9bdV0pLGxbdV0pKTtlLmNvb3JkPWx9fXJldHVybiBlfWZ1bmN0aW9uIGVDKHQsZSxpLG4pe3ZhciBvPXt9O3JldHVybiBudWxsIT10LnZhbHVlSW5kZXh8fG51bGwhPXQudmFsdWVEaW0/KG8udmFsdWVEYXRhRGltPW51bGwhPXQudmFsdWVJbmRleD9lLmdldERpbWVuc2lvbih0LnZhbHVlSW5kZXgpOnQudmFsdWVEaW0sby52YWx1ZUF4aXM9aS5nZXRBeGlzKGZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5nZXREYXRhKCksbj1pLmRpbWVuc2lvbnM7ZT1pLmdldERpbWVuc2lvbihlKTtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGE9aS5nZXREaW1lbnNpb25JbmZvKG5bb10pO2lmKGEubmFtZT09PWUpcmV0dXJuIGEuY29vcmREaW19fShuLG8udmFsdWVEYXRhRGltKSksby5iYXNlQXhpcz1pLmdldE90aGVyQXhpcyhvLnZhbHVlQXhpcyksby5iYXNlRGF0YURpbT1lLm1hcERpbWVuc2lvbihvLmJhc2VBeGlzLmRpbSkpOihvLmJhc2VBeGlzPW4uZ2V0QmFzZUF4aXMoKSxvLnZhbHVlQXhpcz1pLmdldE90aGVyQXhpcyhvLmJhc2VBeGlzKSxvLmJhc2VEYXRhRGltPWUubWFwRGltZW5zaW9uKG8uYmFzZUF4aXMuZGltKSxvLnZhbHVlRGF0YURpbT1lLm1hcERpbWVuc2lvbihvLnZhbHVlQXhpcy5kaW0pKSxvfWZ1bmN0aW9uIGlDKHQsZSl7cmV0dXJuISh0JiZ0LmNvbnRhaW5EYXRhJiZlLmNvb3JkJiYhZnVuY3Rpb24odCl7cmV0dXJuIShpc05hTihwYXJzZUZsb2F0KHQueCkpJiZpc05hTihwYXJzZUZsb2F0KHQueSkpKX0oZSkpfHx0LmNvbnRhaW5EYXRhKGUuY29vcmQpfWZ1bmN0aW9uIG5DKHQsZSxpLG4pe3JldHVybiBuPDI/dC5jb29yZCYmdC5jb29yZFtuXTp0LnZhbHVlfWZ1bmN0aW9uIG9DKHQsZSxpKXtpZigiYXZlcmFnZSIhPT1pKXJldHVybiJtZWRpYW4iPT09aT90LmdldE1lZGlhbihlKTp0LmdldERhdGFFeHRlbnQoZSwhMClbIm1heCI9PT1pPzE6MF07dmFyIG49MCxvPTA7cmV0dXJuIHQuZWFjaChlLGZ1bmN0aW9uKHQsZSl7aXNOYU4odCl8fChuKz10LG8rKyl9KSxuL299dmFyIGFDPWJmKHt0eXBlOiJtYXJrZXIiLGluaXQ6ZnVuY3Rpb24oKXt0aGlzLm1hcmtlckdyb3VwTWFwPVEoKX0scmVuZGVyOmZ1bmN0aW9uKHQsaSxuKXt2YXIgZT10aGlzLm1hcmtlckdyb3VwTWFwO2UuZWFjaChmdW5jdGlvbih0KXt0Ll9fa2VlcD0hMX0pO3ZhciBvPXRoaXMudHlwZSsiTW9kZWwiO2kuZWFjaFNlcmllcyhmdW5jdGlvbih0KXt2YXIgZT10W29dO2UmJnRoaXMucmVuZGVyU2VyaWVzKHQsZSxpLG4pfSx0aGlzKSxlLmVhY2goZnVuY3Rpb24odCl7dC5fX2tlZXB8fHRoaXMuZ3JvdXAucmVtb3ZlKHQuZ3JvdXApfSx0aGlzKX0scmVuZGVyU2VyaWVzOmZ1bmN0aW9uKCl7fX0pO2Z1bmN0aW9uIHJDKHMsbCx1KXt2YXIgaD1sLmNvb3JkaW5hdGVTeXN0ZW07cy5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBlLGk9cy5nZXRJdGVtTW9kZWwodCksbj1QbChpLmdldCgieCIpLHUuZ2V0V2lkdGgoKSksbz1QbChpLmdldCgieSIpLHUuZ2V0SGVpZ2h0KCkpO2lmKGlzTmFOKG4pfHxpc05hTihvKSl7aWYobC5nZXRNYXJrZXJQb3NpdGlvbillPWwuZ2V0TWFya2VyUG9zaXRpb24ocy5nZXRWYWx1ZXMocy5kaW1lbnNpb25zLHQpKTtlbHNlIGlmKGgpe3ZhciBhPXMuZ2V0KGguZGltZW5zaW9uc1swXSx0KSxyPXMuZ2V0KGguZGltZW5zaW9uc1sxXSx0KTtlPWguZGF0YVRvUG9pbnQoW2Escl0pfX1lbHNlIGU9W24sb107aXNOYU4obil8fChlWzBdPW4pLGlzTmFOKG8pfHwoZVsxXT1vKSxzLnNldEl0ZW1MYXlvdXQodCxlKX0pfWFDLmV4dGVuZCh7dHlwZToibWFya1BvaW50Iix1cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24odCxlLGkpe2UuZWFjaFNlcmllcyhmdW5jdGlvbih0KXt2YXIgZT10Lm1hcmtQb2ludE1vZGVsO2UmJihyQyhlLmdldERhdGEoKSx0LGkpLHRoaXMubWFya2VyR3JvdXBNYXAuZ2V0KHQuaWQpLnVwZGF0ZUxheW91dChlKSl9LHRoaXMpfSxyZW5kZXJTZXJpZXM6ZnVuY3Rpb24odCxsLGUsaSl7dmFyIG49dC5jb29yZGluYXRlU3lzdGVtLG89dC5pZCx1PXQuZ2V0RGF0YSgpLGE9dGhpcy5tYXJrZXJHcm91cE1hcCxyPWEuZ2V0KG8pfHxhLnNldChvLG5ldyAkZyksaD1mdW5jdGlvbih0LGUsaSl7dmFyIG47bj10P04odCYmdC5kaW1lbnNpb25zLGZ1bmN0aW9uKHQpe3JldHVybiBDKHtuYW1lOnR9LGUuZ2V0RGF0YSgpLmdldERpbWVuc2lvbkluZm8oZS5nZXREYXRhKCkubWFwRGltZW5zaW9uKHQpKXx8e30pfSk6W3tuYW1lOiJ2YWx1ZSIsdHlwZToiZmxvYXQifV07dmFyIG89bmV3IFdmKG4saSksYT1OKGkuZ2V0KCJkYXRhIiksVCh0QyxlKSk7dCYmKGE9TShhLFQoaUMsdCkpKTtyZXR1cm4gby5pbml0RGF0YShhLG51bGwsdD9uQzpmdW5jdGlvbih0KXtyZXR1cm4gdC52YWx1ZX0pLG99KG4sdCxsKTtsLnNldERhdGEoaCksckMobC5nZXREYXRhKCksdCxpKSxoLmVhY2goZnVuY3Rpb24odCl7dmFyIGU9aC5nZXRJdGVtTW9kZWwodCksaT1lLmdldFNoYWxsb3coInN5bWJvbCIpLG49ZS5nZXRTaGFsbG93KCJzeW1ib2xTaXplIiksbz1PKGkpLGE9TyhuKTtpZihvfHxhKXt2YXIgcj1sLmdldFJhd1ZhbHVlKHQpLHM9bC5nZXREYXRhUGFyYW1zKHQpO28mJihpPWkocixzKSksYSYmKG49bihyLHMpKX1oLnNldEl0ZW1WaXN1YWwodCx7c3ltYm9sOmksc3ltYm9sU2l6ZTpuLGNvbG9yOmUuZ2V0KCJpdGVtU3R5bGUuY29sb3IiKXx8dS5nZXRWaXN1YWwoImNvbG9yIil9KX0pLHIudXBkYXRlRGF0YShoKSx0aGlzLmdyb3VwLmFkZChyLmdyb3VwKSxoLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQpe3QudHJhdmVyc2UoZnVuY3Rpb24odCl7dC5kYXRhTW9kZWw9bH0pfSksci5fX2tlZXA9ITAsci5ncm91cC5zaWxlbnQ9bC5nZXQoInNpbGVudCIpfHx0LmdldCgic2lsZW50Iil9fSksZmYoZnVuY3Rpb24odCl7dC5tYXJrUG9pbnQ9dC5tYXJrUG9pbnR8fHt9fSkscUQuZXh0ZW5kKHt0eXBlOiJtYXJrTGluZSIsZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejo1LHN5bWJvbDpbImNpcmNsZSIsImFycm93Il0sc3ltYm9sU2l6ZTpbOCwxNl0scHJlY2lzaW9uOjIsdG9vbHRpcDp7dHJpZ2dlcjoiaXRlbSJ9LGxhYmVsOntzaG93OiEwLHBvc2l0aW9uOiJlbmQifSxsaW5lU3R5bGU6e3R5cGU6ImRhc2hlZCJ9LGVtcGhhc2lzOntsYWJlbDp7c2hvdzohMH0sbGluZVN0eWxlOnt3aWR0aDozfX0sYW5pbWF0aW9uRWFzaW5nOiJsaW5lYXIifX0pO2Z1bmN0aW9uIHNDKHQsZSxpLG4pe3ZhciBvPXQuZ2V0RGF0YSgpLGE9bi50eXBlO2lmKCFrKG4pJiYoIm1pbiI9PT1hfHwibWF4Ij09PWF8fCJhdmVyYWdlIj09PWF8fCJtZWRpYW4iPT09YXx8bnVsbCE9bi54QXhpc3x8bnVsbCE9bi55QXhpcykpe3ZhciByLHM7aWYobnVsbCE9bi55QXhpc3x8bnVsbCE9bi54QXhpcylyPWUuZ2V0QXhpcyhudWxsIT1uLnlBeGlzPyJ5IjoieCIpLHM9VyhuLnlBeGlzLG4ueEF4aXMpO2Vsc2V7dmFyIGw9ZUMobixvLGUsdCk7cj1sLnZhbHVlQXhpcyxzPW9DKG8sdXAobyxsLnZhbHVlRGF0YURpbSksYSl9dmFyIHU9IngiPT09ci5kaW0/MDoxLGg9MS11LGM9RChuKSxkPXt9O2MudHlwZT1udWxsLGMuY29vcmQ9W10sZC5jb29yZD1bXSxjLmNvb3JkW2hdPS0xLzAsZC5jb29yZFtoXT0xLzA7dmFyIGY9aS5nZXQoInByZWNpc2lvbiIpOzA8PWYmJiJudW1iZXIiPT10eXBlb2YgcyYmKHM9K3MudG9GaXhlZChNYXRoLm1pbihmLDIwKSkpLGMuY29vcmRbdV09ZC5jb29yZFt1XT1zLG49W2MsZCx7dHlwZTphLHZhbHVlSW5kZXg6bi52YWx1ZUluZGV4LHZhbHVlOnN9XX1yZXR1cm4obj1bdEModCxuWzBdKSx0Qyh0LG5bMV0pLEwoe30sblsyXSldKVsyXS50eXBlPW5bMl0udHlwZXx8IiIsbShuWzJdLG5bMF0pLG0oblsyXSxuWzFdKSxufWZ1bmN0aW9uIGxDKHQpe3JldHVybiFpc05hTih0KSYmIWlzRmluaXRlKHQpfWZ1bmN0aW9uIHVDKHQsZSxpLG4pe3ZhciBvPTEtdCxhPW4uZGltZW5zaW9uc1t0XTtyZXR1cm4gbEMoZVtvXSkmJmxDKGlbb10pJiZlW3RdPT09aVt0XSYmbi5nZXRBeGlzKGEpLmNvbnRhaW5EYXRhKGVbdF0pfWZ1bmN0aW9uIGhDKHQsZSl7aWYoImNhcnRlc2lhbjJkIj09PXQudHlwZSl7dmFyIGk9ZVswXS5jb29yZCxuPWVbMV0uY29vcmQ7aWYoaSYmbiYmKHVDKDEsaSxuLHQpfHx1QygwLGksbix0KSkpcmV0dXJuITB9cmV0dXJuIGlDKHQsZVswXSkmJmlDKHQsZVsxXSl9ZnVuY3Rpb24gY0ModCxlLGksbixvKXt2YXIgYSxyPW4uY29vcmRpbmF0ZVN5c3RlbSxzPXQuZ2V0SXRlbU1vZGVsKGUpLGw9UGwocy5nZXQoIngiKSxvLmdldFdpZHRoKCkpLHU9UGwocy5nZXQoInkiKSxvLmdldEhlaWdodCgpKTtpZihpc05hTihsKXx8aXNOYU4odSkpe2lmKG4uZ2V0TWFya2VyUG9zaXRpb24pYT1uLmdldE1hcmtlclBvc2l0aW9uKHQuZ2V0VmFsdWVzKHQuZGltZW5zaW9ucyxlKSk7ZWxzZXt2YXIgaD1yLmRpbWVuc2lvbnMsYz10LmdldChoWzBdLGUpLGQ9dC5nZXQoaFsxXSxlKTthPXIuZGF0YVRvUG9pbnQoW2MsZF0pfWlmKCJjYXJ0ZXNpYW4yZCI9PT1yLnR5cGUpe3ZhciBmPXIuZ2V0QXhpcygieCIpLHA9ci5nZXRBeGlzKCJ5Iik7aD1yLmRpbWVuc2lvbnM7bEModC5nZXQoaFswXSxlKSk/YVswXT1mLnRvR2xvYmFsQ29vcmQoZi5nZXRFeHRlbnQoKVtpPzA6MV0pOmxDKHQuZ2V0KGhbMV0sZSkpJiYoYVsxXT1wLnRvR2xvYmFsQ29vcmQocC5nZXRFeHRlbnQoKVtpPzA6MV0pKX1pc05hTihsKXx8KGFbMF09bCksaXNOYU4odSl8fChhWzFdPXUpfWVsc2UgYT1bbCx1XTt0LnNldEl0ZW1MYXlvdXQoZSxhKX1hQy5leHRlbmQoe3R5cGU6Im1hcmtMaW5lIix1cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24odCxlLGEpe2UuZWFjaFNlcmllcyhmdW5jdGlvbihlKXt2YXIgdD1lLm1hcmtMaW5lTW9kZWw7aWYodCl7dmFyIGk9dC5nZXREYXRhKCksbj10Ll9fZnJvbSxvPXQuX190bztuLmVhY2goZnVuY3Rpb24odCl7Y0Mobix0LCEwLGUsYSksY0Mobyx0LCExLGUsYSl9KSxpLmVhY2goZnVuY3Rpb24odCl7aS5zZXRJdGVtTGF5b3V0KHQsW24uZ2V0SXRlbUxheW91dCh0KSxvLmdldEl0ZW1MYXlvdXQodCldKX0pLHRoaXMubWFya2VyR3JvdXBNYXAuZ2V0KGUuaWQpLnVwZGF0ZUxheW91dCgpfX0sdGhpcyl9LHJlbmRlclNlcmllczpmdW5jdGlvbihvLGksdCxhKXt2YXIgZT1vLmNvb3JkaW5hdGVTeXN0ZW0sbj1vLmlkLHI9by5nZXREYXRhKCkscz10aGlzLm1hcmtlckdyb3VwTWFwLGw9cy5nZXQobil8fHMuc2V0KG4sbmV3IG93KTt0aGlzLmdyb3VwLmFkZChsLmdyb3VwKTt2YXIgdT1mdW5jdGlvbih0LGUsaSl7dmFyIG47bj10P04odCYmdC5kaW1lbnNpb25zLGZ1bmN0aW9uKHQpe3JldHVybiBDKHtuYW1lOnR9LGUuZ2V0RGF0YSgpLmdldERpbWVuc2lvbkluZm8oZS5nZXREYXRhKCkubWFwRGltZW5zaW9uKHQpKXx8e30pfSk6W3tuYW1lOiJ2YWx1ZSIsdHlwZToiZmxvYXQifV07dmFyIG89bmV3IFdmKG4saSksYT1uZXcgV2YobixpKSxyPW5ldyBXZihbXSxpKSxzPU4oaS5nZXQoImRhdGEiKSxUKHNDLGUsdCxpKSk7dCYmKHM9TShzLFQoaEMsdCkpKTt2YXIgbD10P25DOmZ1bmN0aW9uKHQpe3JldHVybiB0LnZhbHVlfTtyZXR1cm4gby5pbml0RGF0YShOKHMsZnVuY3Rpb24odCl7cmV0dXJuIHRbMF19KSxudWxsLGwpLGEuaW5pdERhdGEoTihzLGZ1bmN0aW9uKHQpe3JldHVybiB0WzFdfSksbnVsbCxsKSxyLmluaXREYXRhKE4ocyxmdW5jdGlvbih0KXtyZXR1cm4gdFsyXX0pKSxyLmhhc0l0ZW1PcHRpb249ITAse2Zyb206byx0bzphLGxpbmU6cn19KGUsbyxpKSxoPXUuZnJvbSxjPXUudG8sZD11LmxpbmU7aS5fX2Zyb209aCxpLl9fdG89YyxpLnNldERhdGEoZCk7dmFyIGY9aS5nZXQoInN5bWJvbCIpLHA9aS5nZXQoInN5bWJvbFNpemUiKTtmdW5jdGlvbiBnKHQsZSxpKXt2YXIgbj10LmdldEl0ZW1Nb2RlbChlKTtjQyh0LGUsaSxvLGEpLHQuc2V0SXRlbVZpc3VhbChlLHtzeW1ib2xTaXplOm4uZ2V0KCJzeW1ib2xTaXplIil8fHBbaT8wOjFdLHN5bWJvbDpuLmdldCgic3ltYm9sIiwhMCl8fGZbaT8wOjFdLGNvbG9yOm4uZ2V0KCJpdGVtU3R5bGUuY29sb3IiKXx8ci5nZXRWaXN1YWwoImNvbG9yIil9KX1rKGYpfHwoZj1bZixmXSksIm51bWJlciI9PXR5cGVvZiBwJiYocD1bcCxwXSksdS5mcm9tLmVhY2goZnVuY3Rpb24odCl7ZyhoLHQsITApLGcoYyx0LCExKX0pLGQuZWFjaChmdW5jdGlvbih0KXt2YXIgZT1kLmdldEl0ZW1Nb2RlbCh0KS5nZXQoImxpbmVTdHlsZS5jb2xvciIpO2Quc2V0SXRlbVZpc3VhbCh0LHtjb2xvcjplfHxoLmdldEl0ZW1WaXN1YWwodCwiY29sb3IiKX0pLGQuc2V0SXRlbUxheW91dCh0LFtoLmdldEl0ZW1MYXlvdXQodCksYy5nZXRJdGVtTGF5b3V0KHQpXSksZC5zZXRJdGVtVmlzdWFsKHQse2Zyb21TeW1ib2xTaXplOmguZ2V0SXRlbVZpc3VhbCh0LCJzeW1ib2xTaXplIiksZnJvbVN5bWJvbDpoLmdldEl0ZW1WaXN1YWwodCwic3ltYm9sIiksdG9TeW1ib2xTaXplOmMuZ2V0SXRlbVZpc3VhbCh0LCJzeW1ib2xTaXplIiksdG9TeW1ib2w6Yy5nZXRJdGVtVmlzdWFsKHQsInN5bWJvbCIpfSl9KSxsLnVwZGF0ZURhdGEoZCksdS5saW5lLmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQsZSl7dC50cmF2ZXJzZShmdW5jdGlvbih0KXt0LmRhdGFNb2RlbD1pfSl9KSxsLl9fa2VlcD0hMCxsLmdyb3VwLnNpbGVudD1pLmdldCgic2lsZW50Iil8fG8uZ2V0KCJzaWxlbnQiKX19KSxmZihmdW5jdGlvbih0KXt0Lm1hcmtMaW5lPXQubWFya0xpbmV8fHt9fSkscUQuZXh0ZW5kKHt0eXBlOiJtYXJrQXJlYSIsZGVmYXVsdE9wdGlvbjp7emxldmVsOjAsejoxLHRvb2x0aXA6e3RyaWdnZXI6Iml0ZW0ifSxhbmltYXRpb246ITEsbGFiZWw6e3Nob3c6ITAscG9zaXRpb246InRvcCJ9LGl0ZW1TdHlsZTp7Ym9yZGVyV2lkdGg6MH0sZW1waGFzaXM6e2xhYmVsOntzaG93OiEwLHBvc2l0aW9uOiJ0b3AifX19fSk7ZnVuY3Rpb24gZEModCxlLGksbil7dmFyIG89dEModCxuWzBdKSxhPXRDKHQsblsxXSkscj1XLHM9by5jb29yZCxsPWEuY29vcmQ7c1swXT1yKHNbMF0sLTEvMCksc1sxXT1yKHNbMV0sLTEvMCksbFswXT1yKGxbMF0sMS8wKSxsWzFdPXIobFsxXSwxLzApO3ZhciB1PXAoW3t9LG8sYV0pO3JldHVybiB1LmNvb3JkPVtvLmNvb3JkLGEuY29vcmRdLHUueDA9by54LHUueTA9by55LHUueDE9YS54LHUueTE9YS55LHV9ZnVuY3Rpb24gZkModCl7cmV0dXJuIWlzTmFOKHQpJiYhaXNGaW5pdGUodCl9ZnVuY3Rpb24gcEModCxlLGkpe3ZhciBuPTEtdDtyZXR1cm4gZkMoZVtuXSkmJmZDKGlbbl0pfWZ1bmN0aW9uIGdDKHQsZSl7dmFyIGk9ZS5jb29yZFswXSxuPWUuY29vcmRbMV07cmV0dXJuISgiY2FydGVzaWFuMmQiIT09dC50eXBlfHwhaXx8IW58fCFwQygxLGksbikmJiFwQygwLGksbikpfHwoaUModCx7Y29vcmQ6aSx4OmUueDAseTplLnkwfSl8fGlDKHQse2Nvb3JkOm4seDplLngxLHk6ZS55MX0pKX1mdW5jdGlvbiBtQyh0LGUsaSxuLG8pe3ZhciBhLHI9bi5jb29yZGluYXRlU3lzdGVtLHM9dC5nZXRJdGVtTW9kZWwoZSksbD1QbChzLmdldChpWzBdKSxvLmdldFdpZHRoKCkpLHU9UGwocy5nZXQoaVsxXSksby5nZXRIZWlnaHQoKSk7aWYoaXNOYU4obCl8fGlzTmFOKHUpKXtpZihuLmdldE1hcmtlclBvc2l0aW9uKWE9bi5nZXRNYXJrZXJQb3NpdGlvbih0LmdldFZhbHVlcyhpLGUpKTtlbHNle3ZhciBoPVtmPXQuZ2V0KGlbMF0sZSkscD10LmdldChpWzFdLGUpXTtyLmNsYW1wRGF0YSYmci5jbGFtcERhdGEoaCxoKSxhPXIuZGF0YVRvUG9pbnQoaCwhMCl9aWYoImNhcnRlc2lhbjJkIj09PXIudHlwZSl7dmFyIGM9ci5nZXRBeGlzKCJ4IiksZD1yLmdldEF4aXMoInkiKSxmPXQuZ2V0KGlbMF0sZSkscD10LmdldChpWzFdLGUpO2ZDKGYpP2FbMF09Yy50b0dsb2JhbENvb3JkKGMuZ2V0RXh0ZW50KClbIngwIj09PWlbMF0/MDoxXSk6ZkMocCkmJihhWzFdPWQudG9HbG9iYWxDb29yZChkLmdldEV4dGVudCgpWyJ5MCI9PT1pWzFdPzA6MV0pKX1pc05hTihsKXx8KGFbMF09bCksaXNOYU4odSl8fChhWzFdPXUpfWVsc2UgYT1bbCx1XTtyZXR1cm4gYX12YXIgdkM9W1sieDAiLCJ5MCJdLFsieDEiLCJ5MCJdLFsieDEiLCJ5MSJdLFsieDAiLCJ5MSJdXTthQy5leHRlbmQoe3R5cGU6Im1hcmtBcmVhIix1cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24odCxlLG8pe2UuZWFjaFNlcmllcyhmdW5jdGlvbihpKXt2YXIgdD1pLm1hcmtBcmVhTW9kZWw7aWYodCl7dmFyIG49dC5nZXREYXRhKCk7bi5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PU4odkMsZnVuY3Rpb24odCl7cmV0dXJuIG1DKG4sZSx0LGksbyl9KTtuLnNldEl0ZW1MYXlvdXQoZSx0KSxuLmdldEl0ZW1HcmFwaGljRWwoZSkuc2V0U2hhcGUoInBvaW50cyIsdCl9KX19LHRoaXMpfSxyZW5kZXJTZXJpZXM6ZnVuY3Rpb24oaSxyLHQsbil7dmFyIGU9aS5jb29yZGluYXRlU3lzdGVtLG89aS5pZCxhPWkuZ2V0RGF0YSgpLHM9dGhpcy5tYXJrZXJHcm91cE1hcCxsPXMuZ2V0KG8pfHxzLnNldChvLHtncm91cDpuZXcgSWl9KTt0aGlzLmdyb3VwLmFkZChsLmdyb3VwKSxsLl9fa2VlcD0hMDt2YXIgdT1mdW5jdGlvbih0LGksZSl7dmFyIG4sbztvPXQ/KG49Tih0JiZ0LmRpbWVuc2lvbnMsZnVuY3Rpb24odCl7dmFyIGU9aS5nZXREYXRhKCk7cmV0dXJuIEMoe25hbWU6dH0sZS5nZXREaW1lbnNpb25JbmZvKGUubWFwRGltZW5zaW9uKHQpKXx8e30pfSksbmV3IFdmKE4oWyJ4MCIsInkwIiwieDEiLCJ5MSJdLGZ1bmN0aW9uKHQsZSl7cmV0dXJue25hbWU6dCx0eXBlOm5bZSUyXS50eXBlfX0pLGUpKTpuZXcgV2Yobj1be25hbWU6InZhbHVlIix0eXBlOiJmbG9hdCJ9XSxlKTt2YXIgYT1OKGUuZ2V0KCJkYXRhIiksVChkQyxpLHQsZSkpO3QmJihhPU0oYSxUKGdDLHQpKSk7dmFyIHI9dD9mdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gdC5jb29yZFtNYXRoLmZsb29yKG4vMildW24lMl19OmZ1bmN0aW9uKHQpe3JldHVybiB0LnZhbHVlfTtyZXR1cm4gby5pbml0RGF0YShhLG51bGwsciksby5oYXNJdGVtT3B0aW9uPSEwLG99KGUsaSxyKTtyLnNldERhdGEodSksdS5lYWNoKGZ1bmN0aW9uKGUpe3Uuc2V0SXRlbUxheW91dChlLE4odkMsZnVuY3Rpb24odCl7cmV0dXJuIG1DKHUsZSx0LGksbil9KSksdS5zZXRJdGVtVmlzdWFsKGUse2NvbG9yOmEuZ2V0VmlzdWFsKCJjb2xvciIpfSl9KSx1LmRpZmYobC5fX2RhdGEpLmFkZChmdW5jdGlvbih0KXt2YXIgZT1uZXcgcXIoe3NoYXBlOntwb2ludHM6dS5nZXRJdGVtTGF5b3V0KHQpfX0pO3Uuc2V0SXRlbUdyYXBoaWNFbCh0LGUpLGwuZ3JvdXAuYWRkKGUpfSkudXBkYXRlKGZ1bmN0aW9uKHQsZSl7dmFyIGk9bC5fX2RhdGEuZ2V0SXRlbUdyYXBoaWNFbChlKTtzbChpLHtzaGFwZTp7cG9pbnRzOnUuZ2V0SXRlbUxheW91dCh0KX19LHIsdCksbC5ncm91cC5hZGQoaSksdS5zZXRJdGVtR3JhcGhpY0VsKHQsaSl9KS5yZW1vdmUoZnVuY3Rpb24odCl7dmFyIGU9bC5fX2RhdGEuZ2V0SXRlbUdyYXBoaWNFbCh0KTtsLmdyb3VwLnJlbW92ZShlKX0pLmV4ZWN1dGUoKSx1LmVhY2hJdGVtR3JhcGhpY0VsKGZ1bmN0aW9uKHQsZSl7dmFyIGk9dS5nZXRJdGVtTW9kZWwoZSksbj1pLmdldE1vZGVsKCJsYWJlbCIpLG89aS5nZXRNb2RlbCgiZW1waGFzaXMubGFiZWwiKSxhPXUuZ2V0SXRlbVZpc3VhbChlLCJjb2xvciIpO3QudXNlU3R5bGUoQyhpLmdldE1vZGVsKCJpdGVtU3R5bGUiKS5nZXRJdGVtU3R5bGUoKSx7ZmlsbDpYZShhLC40KSxzdHJva2U6YX0pKSx0LmhvdmVyU3R5bGU9aS5nZXRNb2RlbCgiZW1waGFzaXMuaXRlbVN0eWxlIikuZ2V0SXRlbVN0eWxlKCksJHModC5zdHlsZSx0LmhvdmVyU3R5bGUsbixvLHtsYWJlbEZldGNoZXI6cixsYWJlbERhdGFJbmRleDplLGRlZmF1bHRUZXh0OnUuZ2V0TmFtZShlKXx8IiIsaXNSZWN0VGV4dDohMCxhdXRvQ29sb3I6YX0pLFlzKHQse30pLHQuZGF0YU1vZGVsPXJ9KSxsLl9fZGF0YT11LGwuZ3JvdXAuc2lsZW50PXIuZ2V0KCJzaWxlbnQiKXx8aS5nZXQoInNpbGVudCIpfX0pLGZmKGZ1bmN0aW9uKHQpe3QubWFya0FyZWE9dC5tYXJrQXJlYXx8e319KTt2YXIgeUM9Q2MubGVnZW5kLnNlbGVjdG9yLHhDPXthbGw6e3R5cGU6ImFsbCIsdGl0bGU6RCh5Qy5hbGwpfSxpbnZlcnNlOnt0eXBlOiJpbnZlcnNlIix0aXRsZTpEKHlDLmludmVyc2UpfX0sX0M9d2Yoe3R5cGU6ImxlZ2VuZC5wbGFpbiIsZGVwZW5kZW5jaWVzOlsic2VyaWVzIl0sbGF5b3V0TW9kZTp7dHlwZToiYm94IixpZ25vcmVTaXplOiEwfSxpbml0OmZ1bmN0aW9uKHQsZSxpKXt0aGlzLm1lcmdlRGVmYXVsdEFuZFRoZW1lKHQsaSksdC5zZWxlY3RlZD10LnNlbGVjdGVkfHx7fSx0aGlzLl91cGRhdGVTZWxlY3Rvcih0KX0sbWVyZ2VPcHRpb246ZnVuY3Rpb24odCl7X0Muc3VwZXJDYWxsKHRoaXMsIm1lcmdlT3B0aW9uIix0KSx0aGlzLl91cGRhdGVTZWxlY3Rvcih0KX0sX3VwZGF0ZVNlbGVjdG9yOmZ1bmN0aW9uKHQpe3ZhciBpPXQuc2VsZWN0b3I7ITA9PT1pJiYoaT10LnNlbGVjdG9yPVsiYWxsIiwiaW52ZXJzZSJdKSxrKGkpJiZFKGksZnVuY3Rpb24odCxlKXt6KHQpJiYodD17dHlwZTp0fSksaVtlXT1tKHQseENbdC50eXBlXSl9KX0sb3B0aW9uVXBkYXRlZDpmdW5jdGlvbigpe3RoaXMuX3VwZGF0ZURhdGEodGhpcy5lY01vZGVsKTt2YXIgdD10aGlzLl9kYXRhO2lmKHRbMF0mJiJzaW5nbGUiPT09dGhpcy5nZXQoInNlbGVjdGVkTW9kZSIpKXtmb3IodmFyIGU9ITEsaT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgbj10W2ldLmdldCgibmFtZSIpO2lmKHRoaXMuaXNTZWxlY3RlZChuKSl7dGhpcy5zZWxlY3QobiksZT0hMDticmVha319ZXx8dGhpcy5zZWxlY3QodFswXS5nZXQoIm5hbWUiKSl9fSxfdXBkYXRlRGF0YTpmdW5jdGlvbihvKXt2YXIgYT1bXSxyPVtdO28uZWFjaFJhd1NlcmllcyhmdW5jdGlvbih0KXt2YXIgZSxpPXQubmFtZTtpZihyLnB1c2goaSksdC5sZWdlbmRWaXN1YWxQcm92aWRlcil7dmFyIG49dC5sZWdlbmRWaXN1YWxQcm92aWRlci5nZXRBbGxOYW1lcygpO28uaXNTZXJpZXNGaWx0ZXJlZCh0KXx8KHI9ci5jb25jYXQobikpLG4ubGVuZ3RoP2E9YS5jb25jYXQobik6ZT0hMH1lbHNlIGU9ITA7ZSYmRm8odCkmJmEucHVzaCh0Lm5hbWUpfSksdGhpcy5fYXZhaWxhYmxlTmFtZXM9cjt2YXIgdD1OKHRoaXMuZ2V0KCJkYXRhIil8fGEsZnVuY3Rpb24odCl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiB0JiYibnVtYmVyIiE9dHlwZW9mIHR8fCh0PXtuYW1lOnR9KSxuZXcgSWwodCx0aGlzLHRoaXMuZWNNb2RlbCl9LHRoaXMpO3RoaXMuX2RhdGE9dH0sZ2V0RGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhfSxzZWxlY3Q6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb24uc2VsZWN0ZWQ7InNpbmdsZSI9PT10aGlzLmdldCgic2VsZWN0ZWRNb2RlIikmJkUodGhpcy5fZGF0YSxmdW5jdGlvbih0KXtlW3QuZ2V0KCJuYW1lIildPSExfSk7ZVt0XT0hMH0sdW5TZWxlY3Q6ZnVuY3Rpb24odCl7InNpbmdsZSIhPT10aGlzLmdldCgic2VsZWN0ZWRNb2RlIikmJih0aGlzLm9wdGlvbi5zZWxlY3RlZFt0XT0hMSl9LHRvZ2dsZVNlbGVjdGVkOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9uLnNlbGVjdGVkO2UuaGFzT3duUHJvcGVydHkodCl8fChlW3RdPSEwKSx0aGlzW2VbdF0/InVuU2VsZWN0Ijoic2VsZWN0Il0odCl9LGFsbFNlbGVjdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEsZT10aGlzLm9wdGlvbi5zZWxlY3RlZDtFKHQsZnVuY3Rpb24odCl7ZVt0LmdldCgibmFtZSIsITApXT0hMH0pfSxpbnZlcnNlU2VsZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YSxpPXRoaXMub3B0aW9uLnNlbGVjdGVkO0UodCxmdW5jdGlvbih0KXt2YXIgZT10LmdldCgibmFtZSIsITApO2kuaGFzT3duUHJvcGVydHkoZSl8fChpW2VdPSEwKSxpW2VdPSFpW2VdfSl9LGlzU2VsZWN0ZWQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb24uc2VsZWN0ZWQ7cmV0dXJuIShlLmhhc093blByb3BlcnR5KHQpJiYhZVt0XSkmJjA8PV8odGhpcy5fYXZhaWxhYmxlTmFtZXMsdCl9LGdldE9yaWVudDpmdW5jdGlvbigpe3JldHVybiJ2ZXJ0aWNhbCI9PT10aGlzLmdldCgib3JpZW50Iik/e2luZGV4OjEsbmFtZToidmVydGljYWwifTp7aW5kZXg6MCxuYW1lOiJob3Jpem9udGFsIn19LGRlZmF1bHRPcHRpb246e3psZXZlbDowLHo6NCxzaG93OiEwLG9yaWVudDoiaG9yaXpvbnRhbCIsbGVmdDoiY2VudGVyIix0b3A6MCxhbGlnbjoiYXV0byIsYmFja2dyb3VuZENvbG9yOiJyZ2JhKDAsMCwwLDApIixib3JkZXJDb2xvcjoiI2NjYyIsYm9yZGVyUmFkaXVzOjAsYm9yZGVyV2lkdGg6MCxwYWRkaW5nOjUsaXRlbUdhcDoxMCxpdGVtV2lkdGg6MjUsaXRlbUhlaWdodDoxNCxpbmFjdGl2ZUNvbG9yOiIjY2NjIixpbmFjdGl2ZUJvcmRlckNvbG9yOiIjY2NjIixpdGVtU3R5bGU6e2JvcmRlcldpZHRoOjB9LHRleHRTdHlsZTp7Y29sb3I6IiMzMzMifSxzZWxlY3RlZE1vZGU6ITAsc2VsZWN0b3I6ITEsc2VsZWN0b3JMYWJlbDp7c2hvdzohMCxib3JkZXJSYWRpdXM6MTAscGFkZGluZzpbMyw1LDMsNV0sZm9udFNpemU6MTIsZm9udEZhbWlseToiIHNhbnMtc2VyaWYiLGNvbG9yOiIjNjY2Iixib3JkZXJXaWR0aDoxLGJvcmRlckNvbG9yOiIjNjY2In0sZW1waGFzaXM6e3NlbGVjdG9yTGFiZWw6e3Nob3c6ITAsY29sb3I6IiNlZWUiLGJhY2tncm91bmRDb2xvcjoiIzY2NiJ9fSxzZWxlY3RvclBvc2l0aW9uOiJhdXRvIixzZWxlY3Rvckl0ZW1HYXA6NyxzZWxlY3RvckJ1dHRvbkdhcDoxMCx0b29sdGlwOntzaG93OiExfX19KTtmdW5jdGlvbiB3Qyh0LGUsaSl7dmFyIG8sYT17fSxyPSJ0b2dnbGVTZWxlY3RlZCI9PT10O3JldHVybiBpLmVhY2hDb21wb25lbnQoImxlZ2VuZCIsZnVuY3Rpb24obil7ciYmbnVsbCE9bz9uW28/InNlbGVjdCI6InVuU2VsZWN0Il0oZS5uYW1lKToiYWxsU2VsZWN0Ij09PXR8fCJpbnZlcnNlU2VsZWN0Ij09PXQ/blt0XSgpOihuW3RdKGUubmFtZSksbz1uLmlzU2VsZWN0ZWQoZS5uYW1lKSksRShuLmdldERhdGEoKSxmdW5jdGlvbih0KXt2YXIgZT10LmdldCgibmFtZSIpO2lmKCJcbiIhPT1lJiYiIiE9PWUpe3ZhciBpPW4uaXNTZWxlY3RlZChlKTthLmhhc093blByb3BlcnR5KGUpP2FbZV09YVtlXSYmaTphW2VdPWl9fSl9KSwiYWxsU2VsZWN0Ij09PXR8fCJpbnZlcnNlU2VsZWN0Ij09PXQ/e3NlbGVjdGVkOmF9OntuYW1lOmUubmFtZSxzZWxlY3RlZDphfX1nZigibGVnZW5kVG9nZ2xlU2VsZWN0IiwibGVnZW5kc2VsZWN0Y2hhbmdlZCIsVCh3QywidG9nZ2xlU2VsZWN0ZWQiKSksZ2YoImxlZ2VuZEFsbFNlbGVjdCIsImxlZ2VuZHNlbGVjdGFsbCIsVCh3QywiYWxsU2VsZWN0IikpLGdmKCJsZWdlbmRJbnZlcnNlU2VsZWN0IiwibGVnZW5kaW52ZXJzZXNlbGVjdCIsVCh3QywiaW52ZXJzZVNlbGVjdCIpKSxnZigibGVnZW5kU2VsZWN0IiwibGVnZW5kc2VsZWN0ZWQiLFQod0MsInNlbGVjdCIpKSxnZigibGVnZW5kVW5TZWxlY3QiLCJsZWdlbmR1bnNlbGVjdGVkIixUKHdDLCJ1blNlbGVjdCIpKTt2YXIgYkM9VCxTQz1FLE1DPUlpLElDPWJmKHt0eXBlOiJsZWdlbmQucGxhaW4iLG5ld2xpbmVEaXNhYmxlZDohMSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5ncm91cC5hZGQodGhpcy5fY29udGVudEdyb3VwPW5ldyBNQyksdGhpcy5fYmFja2dyb3VuZEVsLHRoaXMuZ3JvdXAuYWRkKHRoaXMuX3NlbGVjdG9yR3JvdXA9bmV3IE1DKSx0aGlzLl9pc0ZpcnN0UmVuZGVyPSEwfSxnZXRDb250ZW50R3JvdXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGVudEdyb3VwfSxnZXRTZWxlY3Rvckdyb3VwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdG9yR3JvdXB9LHJlbmRlcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5faXNGaXJzdFJlbmRlcjtpZih0aGlzLl9pc0ZpcnN0UmVuZGVyPSExLHRoaXMucmVzZXRJbm5lcigpLHQuZ2V0KCJzaG93IiwhMCkpe3ZhciBvPXQuZ2V0KCJhbGlnbiIpLGE9dC5nZXQoIm9yaWVudCIpO28mJiJhdXRvIiE9PW98fChvPSJyaWdodCI9PT10LmdldCgibGVmdCIpJiYidmVydGljYWwiPT09YT8icmlnaHQiOiJsZWZ0Iik7dmFyIHI9dC5nZXQoInNlbGVjdG9yIiwhMCkscz10LmdldCgic2VsZWN0b3JQb3NpdGlvbiIsITApOyFyfHxzJiYiYXV0byIhPT1zfHwocz0iaG9yaXpvbnRhbCI9PT1hPyJlbmQiOiJzdGFydCIpLHRoaXMucmVuZGVySW5uZXIobyx0LGUsaSxyLGEscyk7dmFyIGw9dC5nZXRCb3hMYXlvdXRQYXJhbXMoKSx1PXt3aWR0aDppLmdldFdpZHRoKCksaGVpZ2h0OmkuZ2V0SGVpZ2h0KCl9LGg9dC5nZXQoInBhZGRpbmciKSxjPXZ1KGwsdSxoKSxkPXRoaXMubGF5b3V0SW5uZXIodCxvLGMsbixyLHMpLGY9dnUoQyh7d2lkdGg6ZC53aWR0aCxoZWlnaHQ6ZC5oZWlnaHR9LGwpLHUsaCk7dGhpcy5ncm91cC5hdHRyKCJwb3NpdGlvbiIsW2YueC1kLngsZi55LWQueV0pLHRoaXMuZ3JvdXAuYWRkKHRoaXMuX2JhY2tncm91bmRFbD1YVChkLHQpKX19LHJlc2V0SW5uZXI6ZnVuY3Rpb24oKXt0aGlzLmdldENvbnRlbnRHcm91cCgpLnJlbW92ZUFsbCgpLHRoaXMuX2JhY2tncm91bmRFbCYmdGhpcy5ncm91cC5yZW1vdmUodGhpcy5fYmFja2dyb3VuZEVsKSx0aGlzLmdldFNlbGVjdG9yR3JvdXAoKS5yZW1vdmVBbGwoKX0scmVuZGVySW5uZXI6ZnVuY3Rpb24odSxoLGMsZCx0LGUsaSl7dmFyIGY9dGhpcy5nZXRDb250ZW50R3JvdXAoKSxwPVEoKSxnPWguZ2V0KCJzZWxlY3RlZE1vZGUiKSxtPVtdO2MuZWFjaFJhd1NlcmllcyhmdW5jdGlvbih0KXt0LmdldCgibGVnZW5kSG92ZXJMaW5rIil8fG0ucHVzaCh0LmlkKX0pLFNDKGguZ2V0RGF0YSgpLGZ1bmN0aW9uKGEscil7dmFyIHM9YS5nZXQoIm5hbWUiKTtpZih0aGlzLm5ld2xpbmVEaXNhYmxlZHx8IiIhPT1zJiYiXG4iIT09cyl7dmFyIHQ9Yy5nZXRTZXJpZXNCeU5hbWUocylbMF07aWYoIXAuZ2V0KHMpKWlmKHQpe3ZhciBlPXQuZ2V0RGF0YSgpLGk9ZS5nZXRWaXN1YWwoImNvbG9yIiksbj1lLmdldFZpc3VhbCgiYm9yZGVyQ29sb3IiKTsiZnVuY3Rpb24iPT10eXBlb2YgaSYmKGk9aSh0LmdldERhdGFQYXJhbXMoMCkpKSwiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49bih0LmdldERhdGFQYXJhbXMoMCkpKTt2YXIgbz1lLmdldFZpc3VhbCgibGVnZW5kU3ltYm9sIil8fCJyb3VuZFJlY3QiLGw9ZS5nZXRWaXN1YWwoInN5bWJvbCIpO3RoaXMuX2NyZWF0ZUl0ZW0ocyxyLGEsaCxvLGwsdSxpLG4sZykub24oImNsaWNrIixiQyhBQyxzLG51bGwsZCxtKSkub24oIm1vdXNlb3ZlciIsYkMoREMsdC5uYW1lLG51bGwsZCxtKSkub24oIm1vdXNlb3V0IixiQyhDQyx0Lm5hbWUsbnVsbCxkLG0pKSxwLnNldChzLCEwKX1lbHNlIGMuZWFjaFJhd1NlcmllcyhmdW5jdGlvbih0KXtpZighcC5nZXQocykmJnQubGVnZW5kVmlzdWFsUHJvdmlkZXIpe3ZhciBlPXQubGVnZW5kVmlzdWFsUHJvdmlkZXI7aWYoIWUuY29udGFpbk5hbWUocykpcmV0dXJuO3ZhciBpPWUuaW5kZXhPZk5hbWUocyksbj1lLmdldEl0ZW1WaXN1YWwoaSwiY29sb3IiKSxvPWUuZ2V0SXRlbVZpc3VhbChpLCJib3JkZXJDb2xvciIpO3RoaXMuX2NyZWF0ZUl0ZW0ocyxyLGEsaCwicm91bmRSZWN0IixudWxsLHUsbixvLGcpLm9uKCJjbGljayIsYkMoQUMsbnVsbCxzLGQsbSkpLm9uKCJtb3VzZW92ZXIiLGJDKERDLG51bGwscyxkLG0pKS5vbigibW91c2VvdXQiLGJDKENDLG51bGwscyxkLG0pKSxwLnNldChzLCEwKX19LHRoaXMpfWVsc2UgZi5hZGQobmV3IE1DKHtuZXdsaW5lOiEwfSkpfSx0aGlzKSx0JiZ0aGlzLl9jcmVhdGVTZWxlY3Rvcih0LGgsZCxlLGkpfSxfY3JlYXRlU2VsZWN0b3I6ZnVuY3Rpb24odCxhLHIsZSxpKXt2YXIgcz10aGlzLmdldFNlbGVjdG9yR3JvdXAoKTtTQyh0LGZ1bmN0aW9uKHQpeyFmdW5jdGlvbih0KXt2YXIgZT10LnR5cGUsaT1uZXcgRnIoe3N0eWxlOnt4OjAseTowLGFsaWduOiJjZW50ZXIiLHZlcnRpY2FsQWxpZ246Im1pZGRsZSJ9LG9uY2xpY2s6ZnVuY3Rpb24oKXtyLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJhbGwiPT09ZT8ibGVnZW5kQWxsU2VsZWN0IjoibGVnZW5kSW52ZXJzZVNlbGVjdCJ9KX19KTtzLmFkZChpKTt2YXIgbj1hLmdldE1vZGVsKCJzZWxlY3RvckxhYmVsIiksbz1hLmdldE1vZGVsKCJlbXBoYXNpcy5zZWxlY3RvckxhYmVsIik7JHMoaS5zdHlsZSxpLmhvdmVyU3R5bGU9e30sbixvLHtkZWZhdWx0VGV4dDp0LnRpdGxlLGlzUmVjdFRleHQ6ITF9KSxZcyhpKX0odCl9KX0sX2NyZWF0ZUl0ZW06ZnVuY3Rpb24odCxlLGksbixvLGEscixzLGwsdSl7dmFyIGg9bi5nZXQoIml0ZW1XaWR0aCIpLGM9bi5nZXQoIml0ZW1IZWlnaHQiKSxkPW4uZ2V0KCJpbmFjdGl2ZUNvbG9yIiksZj1uLmdldCgiaW5hY3RpdmVCb3JkZXJDb2xvciIpLHA9bi5nZXQoInN5bWJvbEtlZXBBc3BlY3QiKSxnPW4uZ2V0TW9kZWwoIml0ZW1TdHlsZSIpLG09bi5pc1NlbGVjdGVkKHQpLHY9bmV3IE1DLHk9aS5nZXRNb2RlbCgidGV4dFN0eWxlIikseD1pLmdldCgiaWNvbiIpLF89aS5nZXRNb2RlbCgidG9vbHRpcCIpLHc9Xy5wYXJlbnRNb2RlbCxiPW1nKG89eHx8bywwLDAsaCxjLG0/czpkLG51bGw9PXB8fHApO2lmKHYuYWRkKFRDKGIsbyxnLGwsZixtKSksIXgmJmEmJihhIT09b3x8Im5vbmUiPT09YSkpe3ZhciBTPS44KmM7Im5vbmUiPT09YSYmKGE9ImNpcmNsZSIpO3ZhciBNPW1nKGEsKGgtUykvMiwoYy1TKS8yLFMsUyxtP3M6ZCxudWxsPT1wfHxwKTt2LmFkZChUQyhNLGEsZyxsLGYsbSkpfXZhciBJPSJsZWZ0Ij09PXI/aCs1Oi01LFQ9cixBPW4uZ2V0KCJmb3JtYXR0ZXIiKSxEPXQ7InN0cmluZyI9PXR5cGVvZiBBJiZBP0Q9QS5yZXBsYWNlKCJ7bmFtZX0iLG51bGwhPXQ/dDoiIik6ImZ1bmN0aW9uIj09dHlwZW9mIEEmJihEPUEodCkpLHYuYWRkKG5ldyBGcih7c3R5bGU6UXMoe30seSx7dGV4dDpELHg6SSx5OmMvMix0ZXh0RmlsbDptP3kuZ2V0VGV4dENvbG9yKCk6ZCx0ZXh0QWxpZ246VCx0ZXh0VmVydGljYWxBbGlnbjoibWlkZGxlIn0pfSkpO3ZhciBDPW5ldyBpcyh7c2hhcGU6di5nZXRCb3VuZGluZ1JlY3QoKSxpbnZpc2libGU6ITAsdG9vbHRpcDpfLmdldCgic2hvdyIpP0woe2NvbnRlbnQ6dCxmb3JtYXR0ZXI6dy5nZXQoImZvcm1hdHRlciIsITApfHxmdW5jdGlvbigpe3JldHVybiB0fSxmb3JtYXR0ZXJQYXJhbXM6e2NvbXBvbmVudFR5cGU6ImxlZ2VuZCIsbGVnZW5kSW5kZXg6bi5jb21wb25lbnRJbmRleCxuYW1lOnQsJHZhcnM6WyJuYW1lIl19fSxfLm9wdGlvbik6bnVsbH0pO3JldHVybiB2LmFkZChDKSx2LmVhY2hDaGlsZChmdW5jdGlvbih0KXt0LnNpbGVudD0hMH0pLEMuc2lsZW50PSF1LHRoaXMuZ2V0Q29udGVudEdyb3VwKCkuYWRkKHYpLFlzKHYpLHYuX19sZWdlbmREYXRhSW5kZXg9ZSx2fSxsYXlvdXRJbm5lcjpmdW5jdGlvbih0LGUsaSxuLG8sYSl7dmFyIHI9dGhpcy5nZXRDb250ZW50R3JvdXAoKSxzPXRoaXMuZ2V0U2VsZWN0b3JHcm91cCgpO211KHQuZ2V0KCJvcmllbnQiKSxyLHQuZ2V0KCJpdGVtR2FwIiksaS53aWR0aCxpLmhlaWdodCk7dmFyIGw9ci5nZXRCb3VuZGluZ1JlY3QoKSx1PVstbC54LC1sLnldO2lmKG8pe211KCJob3Jpem9udGFsIixzLHQuZ2V0KCJzZWxlY3Rvckl0ZW1HYXAiLCEwKSk7dmFyIGg9cy5nZXRCb3VuZGluZ1JlY3QoKSxjPVstaC54LC1oLnldLGQ9dC5nZXQoInNlbGVjdG9yQnV0dG9uR2FwIiwhMCksZj10LmdldE9yaWVudCgpLmluZGV4LHA9MD09PWY/IndpZHRoIjoiaGVpZ2h0IixnPTA9PT1mPyJoZWlnaHQiOiJ3aWR0aCIsbT0wPT09Zj8ieSI6IngiOyJlbmQiPT09YT9jW2ZdKz1sW3BdK2Q6dVtmXSs9aFtwXStkLGNbMS1mXSs9bFtnXS8yLWhbZ10vMixzLmF0dHIoInBvc2l0aW9uIixjKSxyLmF0dHIoInBvc2l0aW9uIix1KTt2YXIgdj17eDowLHk6MH07cmV0dXJuIHZbcF09bFtwXStkK2hbcF0sdltnXT1NYXRoLm1heChsW2ddLGhbZ10pLHZbbV09TWF0aC5taW4oMCxoW21dK2NbMS1mXSksdn1yZXR1cm4gci5hdHRyKCJwb3NpdGlvbiIsdSksdGhpcy5ncm91cC5nZXRCb3VuZGluZ1JlY3QoKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5nZXRDb250ZW50R3JvdXAoKS5yZW1vdmVBbGwoKSx0aGlzLl9pc0ZpcnN0UmVuZGVyPSEwfX0pO2Z1bmN0aW9uIFRDKHQsZSxpLG4sbyxhKXt2YXIgcjtyZXR1cm4ibGluZSIhPT1lJiZlLmluZGV4T2YoImVtcHR5Iik8MD8ocj1pLmdldEl0ZW1TdHlsZSgpLHQuc3R5bGUuc3Ryb2tlPW4sYXx8KHIuc3Ryb2tlPW8pKTpyPWkuZ2V0SXRlbVN0eWxlKFsiYm9yZGVyV2lkdGgiLCJib3JkZXJDb2xvciJdKSx0LnNldFN0eWxlKHIpfWZ1bmN0aW9uIEFDKHQsZSxpLG4pe0NDKHQsZSxpLG4pLGkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImxlZ2VuZFRvZ2dsZVNlbGVjdCIsbmFtZTpudWxsIT10P3Q6ZX0pLERDKHQsZSxpLG4pfWZ1bmN0aW9uIERDKHQsZSxpLG4pe3ZhciBvPWkuZ2V0WnIoKS5zdG9yYWdlLmdldERpc3BsYXlMaXN0KClbMF07byYmby51c2VIb3ZlckxheWVyfHxpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJoaWdobGlnaHQiLHNlcmllc05hbWU6dCxuYW1lOmUsZXhjbHVkZVNlcmllc0lkOm59KX1mdW5jdGlvbiBDQyh0LGUsaSxuKXt2YXIgbz1pLmdldFpyKCkuc3RvcmFnZS5nZXREaXNwbGF5TGlzdCgpWzBdO28mJm8udXNlSG92ZXJMYXllcnx8aS5kaXNwYXRjaEFjdGlvbih7dHlwZToiZG93bnBsYXkiLHNlcmllc05hbWU6dCxuYW1lOmUsZXhjbHVkZVNlcmllc0lkOm59KX1wZihJZC5QUk9DRVNTT1IuU0VSSUVTX0ZJTFRFUixmdW5jdGlvbih0KXt2YXIgaT10LmZpbmRDb21wb25lbnRzKHttYWluVHlwZToibGVnZW5kIn0pO2kmJmkubGVuZ3RoJiZ0LmZpbHRlclNlcmllcyhmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPGkubGVuZ3RoO2UrKylpZighaVtlXS5pc1NlbGVjdGVkKHQubmFtZSkpcmV0dXJuITE7cmV0dXJuITB9KX0pLFR1LnJlZ2lzdGVyU3ViVHlwZURlZmF1bHRlcigibGVnZW5kIixmdW5jdGlvbigpe3JldHVybiJwbGFpbiJ9KTt2YXIgTEM9X0MuZXh0ZW5kKHt0eXBlOiJsZWdlbmQuc2Nyb2xsIixzZXRTY3JvbGxEYXRhSW5kZXg6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24uc2Nyb2xsRGF0YUluZGV4PXR9LGRlZmF1bHRPcHRpb246e3Njcm9sbERhdGFJbmRleDowLHBhZ2VCdXR0b25JdGVtR2FwOjUscGFnZUJ1dHRvbkdhcDpudWxsLHBhZ2VCdXR0b25Qb3NpdGlvbjoiZW5kIixwYWdlRm9ybWF0dGVyOiJ7Y3VycmVudH0ve3RvdGFsfSIscGFnZUljb25zOntob3Jpem9udGFsOlsiTTAsMEwxMiwtMTBMMTIsMTB6IiwiTTAsMEwtMTIsLTEwTC0xMiwxMHoiXSx2ZXJ0aWNhbDpbIk0wLDBMMjAsMEwxMCwtMjB6IiwiTTAsMEwyMCwwTDEwLDIweiJdfSxwYWdlSWNvbkNvbG9yOiIjMmY0NTU0IixwYWdlSWNvbkluYWN0aXZlQ29sb3I6IiNhYWEiLHBhZ2VJY29uU2l6ZToxNSxwYWdlVGV4dFN0eWxlOntjb2xvcjoiIzMzMyJ9LGFuaW1hdGlvbkR1cmF0aW9uVXBkYXRlOjgwMH0saW5pdDpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1fdSh0KTtMQy5zdXBlckNhbGwodGhpcywiaW5pdCIsdCxlLGksbiksa0ModGhpcyx0LG8pfSxtZXJnZU9wdGlvbjpmdW5jdGlvbih0LGUpe0xDLnN1cGVyQ2FsbCh0aGlzLCJtZXJnZU9wdGlvbiIsdCxlKSxrQyh0aGlzLHRoaXMub3B0aW9uLHQpfX0pO2Z1bmN0aW9uIGtDKHQsZSxpKXt2YXIgbj1bMSwxXTtuW3QuZ2V0T3JpZW50KCkuaW5kZXhdPTAseHUoZSxpLHt0eXBlOiJib3giLGlnbm9yZVNpemU6bn0pfXZhciBQQz1JaSxOQz1bIndpZHRoIiwiaGVpZ2h0Il0sT0M9WyJ4IiwieSJdLEVDPUlDLmV4dGVuZCh7dHlwZToibGVnZW5kLnNjcm9sbCIsbmV3bGluZURpc2FibGVkOiEwLGluaXQ6ZnVuY3Rpb24oKXtFQy5zdXBlckNhbGwodGhpcywiaW5pdCIpLHRoaXMuX2N1cnJlbnRJbmRleD0wLHRoaXMuZ3JvdXAuYWRkKHRoaXMuX2NvbnRhaW5lckdyb3VwPW5ldyBQQyksdGhpcy5fY29udGFpbmVyR3JvdXAuYWRkKHRoaXMuZ2V0Q29udGVudEdyb3VwKCkpLHRoaXMuZ3JvdXAuYWRkKHRoaXMuX2NvbnRyb2xsZXJHcm91cD1uZXcgUEMpLHRoaXMuX3Nob3dDb250cm9sbGVyfSxyZXNldElubmVyOmZ1bmN0aW9uKCl7RUMuc3VwZXJDYWxsKHRoaXMsInJlc2V0SW5uZXIiKSx0aGlzLl9jb250cm9sbGVyR3JvdXAucmVtb3ZlQWxsKCksdGhpcy5fY29udGFpbmVyR3JvdXAucmVtb3ZlQ2xpcFBhdGgoKSx0aGlzLl9jb250YWluZXJHcm91cC5fX3JlY3RTaXplPW51bGx9LHJlbmRlcklubmVyOmZ1bmN0aW9uKHQsbyxlLGEsaSxuLHIpe3ZhciBzPXRoaXM7RUMuc3VwZXJDYWxsKHRoaXMsInJlbmRlcklubmVyIix0LG8sZSxhLGksbixyKTt2YXIgbD10aGlzLl9jb250cm9sbGVyR3JvdXAsdT1vLmdldCgicGFnZUljb25TaXplIiwhMCk7ayh1KXx8KHU9W3UsdV0pLGMoInBhZ2VQcmV2IiwwKTt2YXIgaD1vLmdldE1vZGVsKCJwYWdlVGV4dFN0eWxlIik7ZnVuY3Rpb24gYyh0LGUpe3ZhciBpPXQrIkRhdGFJbmRleCIsbj1wbChvLmdldCgicGFnZUljb25zIiwhMClbby5nZXRPcmllbnQoKS5uYW1lXVtlXSx7b25jbGljazpBKHMuX3BhZ2VHbyxzLGksbyxhKX0se3g6LXVbMF0vMix5Oi11WzFdLzIsd2lkdGg6dVswXSxoZWlnaHQ6dVsxXX0pO24ubmFtZT10LGwuYWRkKG4pfWwuYWRkKG5ldyBGcih7bmFtZToicGFnZVRleHQiLHN0eWxlOnt0ZXh0RmlsbDpoLmdldFRleHRDb2xvcigpLGZvbnQ6aC5nZXRGb250KCksdGV4dFZlcnRpY2FsQWxpZ246Im1pZGRsZSIsdGV4dEFsaWduOiJjZW50ZXIifSxzaWxlbnQ6ITB9KSksYygicGFnZU5leHQiLDEpfSxsYXlvdXRJbm5lcjpmdW5jdGlvbih0LGUsaSxuLG8sYSl7dmFyIHI9dGhpcy5nZXRTZWxlY3Rvckdyb3VwKCkscz10LmdldE9yaWVudCgpLmluZGV4LGw9TkNbc10sdT1PQ1tzXSxoPU5DWzEtc10sYz1PQ1sxLXNdO28mJm11KCJob3Jpem9udGFsIixyLHQuZ2V0KCJzZWxlY3Rvckl0ZW1HYXAiLCEwKSk7dmFyIGQ9dC5nZXQoInNlbGVjdG9yQnV0dG9uR2FwIiwhMCksZj1yLmdldEJvdW5kaW5nUmVjdCgpLHA9Wy1mLngsLWYueV0sZz1EKGkpO28mJihnW2xdPWlbbF0tZltsXS1kKTt2YXIgbT10aGlzLl9sYXlvdXRDb250ZW50QW5kQ29udHJvbGxlcih0LG4sZyxzLGwsaCxjKTtpZihvKXtpZigiZW5kIj09PWEpcFtzXSs9bVtsXStkO2Vsc2V7dmFyIHY9ZltsXStkO3Bbc10tPXYsbVt1XS09dn1tW2xdKz1mW2xdK2QscFsxLXNdKz1tW2NdK21baF0vMi1mW2hdLzIsbVtoXT1NYXRoLm1heChtW2hdLGZbaF0pLG1bY109TWF0aC5taW4obVtjXSxmW2NdK3BbMS1zXSksci5hdHRyKCJwb3NpdGlvbiIscCl9cmV0dXJuIG19LF9sYXlvdXRDb250ZW50QW5kQ29udHJvbGxlcjpmdW5jdGlvbih0LGUsaSxuLG8sYSxyKXt2YXIgcz10aGlzLmdldENvbnRlbnRHcm91cCgpLGw9dGhpcy5fY29udGFpbmVyR3JvdXAsdT10aGlzLl9jb250cm9sbGVyR3JvdXA7bXUodC5nZXQoIm9yaWVudCIpLHMsdC5nZXQoIml0ZW1HYXAiKSxuP2kud2lkdGg6bnVsbCxuP251bGw6aS5oZWlnaHQpLG11KCJob3Jpem9udGFsIix1LHQuZ2V0KCJwYWdlQnV0dG9uSXRlbUdhcCIsITApKTt2YXIgaD1zLmdldEJvdW5kaW5nUmVjdCgpLGM9dS5nZXRCb3VuZGluZ1JlY3QoKSxkPXRoaXMuX3Nob3dDb250cm9sbGVyPWhbb10+aVtvXSxmPVstaC54LC1oLnldO2V8fChmW25dPXMucG9zaXRpb25bbl0pO3ZhciBwPVswLDBdLGc9Wy1jLngsLWMueV0sbT1IKHQuZ2V0KCJwYWdlQnV0dG9uR2FwIiwhMCksdC5nZXQoIml0ZW1HYXAiLCEwKSk7ZCYmKCJlbmQiPT09dC5nZXQoInBhZ2VCdXR0b25Qb3NpdGlvbiIsITApP2dbbl0rPWlbb10tY1tvXTpwW25dKz1jW29dK20pO2dbMS1uXSs9aFthXS8yLWNbYV0vMixzLmF0dHIoInBvc2l0aW9uIixmKSxsLmF0dHIoInBvc2l0aW9uIixwKSx1LmF0dHIoInBvc2l0aW9uIixnKTt2YXIgdj17eDowLHk6MH07aWYodltvXT1kP2lbb106aFtvXSx2W2FdPU1hdGgubWF4KGhbYV0sY1thXSksdltyXT1NYXRoLm1pbigwLGNbcl0rZ1sxLW5dKSxsLl9fcmVjdFNpemU9aVtvXSxkKXt2YXIgeT17eDowLHk6MH07eVtvXT1NYXRoLm1heChpW29dLWNbb10tbSwwKSx5W2FdPXZbYV0sbC5zZXRDbGlwUGF0aChuZXcgaXMoe3NoYXBlOnl9KSksbC5fX3JlY3RTaXplPXlbb119ZWxzZSB1LmVhY2hDaGlsZChmdW5jdGlvbih0KXt0LmF0dHIoe2ludmlzaWJsZTohMCxzaWxlbnQ6ITB9KX0pO3ZhciB4PXRoaXMuX2dldFBhZ2VJbmZvKHQpO3JldHVybiBudWxsIT14LnBhZ2VJbmRleCYmc2wocyx7cG9zaXRpb246eC5jb250ZW50UG9zaXRpb259LGQmJnQpLHRoaXMuX3VwZGF0ZVBhZ2VJbmZvVmlldyh0LHgpLHZ9LF9wYWdlR286ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuX2dldFBhZ2VJbmZvKGUpW3RdO251bGwhPW4mJmkuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImxlZ2VuZFNjcm9sbCIsc2Nyb2xsRGF0YUluZGV4Om4sbGVnZW5kSWQ6ZS5pZH0pfSxfdXBkYXRlUGFnZUluZm9WaWV3OmZ1bmN0aW9uKG4sbyl7dmFyIGE9dGhpcy5fY29udHJvbGxlckdyb3VwO0UoWyJwYWdlUHJldiIsInBhZ2VOZXh0Il0sZnVuY3Rpb24odCl7dmFyIGU9bnVsbCE9b1t0KyJEYXRhSW5kZXgiXSxpPWEuY2hpbGRPZk5hbWUodCk7aSYmKGkuc2V0U3R5bGUoImZpbGwiLGU/bi5nZXQoInBhZ2VJY29uQ29sb3IiLCEwKTpuLmdldCgicGFnZUljb25JbmFjdGl2ZUNvbG9yIiwhMCkpLGkuY3Vyc29yPWU/InBvaW50ZXIiOiJkZWZhdWx0Iil9KTt2YXIgdD1hLmNoaWxkT2ZOYW1lKCJwYWdlVGV4dCIpLGU9bi5nZXQoInBhZ2VGb3JtYXR0ZXIiKSxpPW8ucGFnZUluZGV4LHI9bnVsbCE9aT9pKzE6MCxzPW8ucGFnZUNvdW50O3QmJmUmJnQuc2V0U3R5bGUoInRleHQiLHooZSk/ZS5yZXBsYWNlKCJ7Y3VycmVudH0iLHIpLnJlcGxhY2UoInt0b3RhbH0iLHMpOmUoe2N1cnJlbnQ6cix0b3RhbDpzfSkpfSxfZ2V0UGFnZUluZm86ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXQoInNjcm9sbERhdGFJbmRleCIsITApLGk9dGhpcy5nZXRDb250ZW50R3JvdXAoKSxuPXRoaXMuX2NvbnRhaW5lckdyb3VwLl9fcmVjdFNpemUsbz10LmdldE9yaWVudCgpLmluZGV4LGE9TkNbb10scj1PQ1tvXSxzPXRoaXMuX2ZpbmRUYXJnZXRJdGVtSW5kZXgoZSksbD1pLmNoaWxkcmVuKCksdT1sW3NdLGg9bC5sZW5ndGgsYz1oPzE6MCxkPXtjb250ZW50UG9zaXRpb246aS5wb3NpdGlvbi5zbGljZSgpLHBhZ2VDb3VudDpjLHBhZ2VJbmRleDpjLTEscGFnZVByZXZEYXRhSW5kZXg6bnVsbCxwYWdlTmV4dERhdGFJbmRleDpudWxsfTtpZighdSlyZXR1cm4gZDt2YXIgZj15KHUpO2QuY29udGVudFBvc2l0aW9uW29dPS1mLnM7Zm9yKHZhciBwPXMrMSxnPWYsbT1mLHY9bnVsbDtwPD1oOysrcCkoISh2PXkobFtwXSkpJiZtLmU+Zy5zK258fHYmJiF4KHYsZy5zKSkmJihnPW0uaT5nLmk/bTp2KSYmKG51bGw9PWQucGFnZU5leHREYXRhSW5kZXgmJihkLnBhZ2VOZXh0RGF0YUluZGV4PWcuaSksKytkLnBhZ2VDb3VudCksbT12O2ZvcihwPXMtMSxnPWYsbT1mLHY9bnVsbDstMTw9cDstLXApKHY9eShsW3BdKSkmJngobSx2LnMpfHwhKGcuaTxtLmkpfHwobT1nLG51bGw9PWQucGFnZVByZXZEYXRhSW5kZXgmJihkLnBhZ2VQcmV2RGF0YUluZGV4PWcuaSksKytkLnBhZ2VDb3VudCwrK2QucGFnZUluZGV4KSxnPXY7cmV0dXJuIGQ7ZnVuY3Rpb24geSh0KXtpZih0KXt2YXIgZT10LmdldEJvdW5kaW5nUmVjdCgpLGk9ZVtyXSt0LnBvc2l0aW9uW29dO3JldHVybntzOmksZTppK2VbYV0saTp0Ll9fbGVnZW5kRGF0YUluZGV4fX19ZnVuY3Rpb24geCh0LGUpe3JldHVybiB0LmU+PWUmJnQuczw9ZStufX0sX2ZpbmRUYXJnZXRJdGVtSW5kZXg6ZnVuY3Rpb24obil7dmFyIG8sYSx0PXRoaXMuZ2V0Q29udGVudEdyb3VwKCk7cmV0dXJuIHRoaXMuX3Nob3dDb250cm9sbGVyJiZ0LmVhY2hDaGlsZChmdW5jdGlvbih0LGUpe3ZhciBpPXQuX19sZWdlbmREYXRhSW5kZXg7bnVsbD09YSYmbnVsbCE9aSYmKGE9ZSksaT09PW4mJihvPWUpfSksbnVsbCE9bz9vOmF9fSk7Z2YoImxlZ2VuZFNjcm9sbCIsImxlZ2VuZHNjcm9sbCIsZnVuY3Rpb24odCxlKXt2YXIgaT10LnNjcm9sbERhdGFJbmRleDtudWxsIT1pJiZlLmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJsZWdlbmQiLHN1YlR5cGU6InNjcm9sbCIscXVlcnk6dH0sZnVuY3Rpb24odCl7dC5zZXRTY3JvbGxEYXRhSW5kZXgoaSl9KX0pO1dBLmV4dGVuZCh7dHlwZToiZGF0YVpvb20uc2xpZGVyIixsYXlvdXRNb2RlOiJib3giLGRlZmF1bHRPcHRpb246e3Nob3c6ITAscmlnaHQ6InBoIix0b3A6InBoIix3aWR0aDoicGgiLGhlaWdodDoicGgiLGxlZnQ6bnVsbCxib3R0b206bnVsbCxiYWNrZ3JvdW5kQ29sb3I6InJnYmEoNDcsNjksODQsMCkiLGRhdGFCYWNrZ3JvdW5kOntsaW5lU3R5bGU6e2NvbG9yOiIjMmY0NTU0Iix3aWR0aDouNSxvcGFjaXR5Oi4zfSxhcmVhU3R5bGU6e2NvbG9yOiJyZ2JhKDQ3LDY5LDg0LDAuMykiLG9wYWNpdHk6LjN9fSxib3JkZXJDb2xvcjoiI2RkZCIsZmlsbGVyQ29sb3I6InJnYmEoMTY3LDE4MywyMDQsMC40KSIsaGFuZGxlSWNvbjoiTTguMiwxMy42VjMuOUg2LjN2OS43SDMuMXYxNC45aDMuM3Y5LjdoMS44di05LjdoMy4zVjEzLjZIOC4yeiBNOS43LDI0LjRINC44di0xLjRoNC45VjI0LjR6IE05LjcsMTkuMUg0Ljh2LTEuNGg0LjlWMTkuMXoiLGhhbmRsZVNpemU6IjEwMCUiLGhhbmRsZVN0eWxlOntjb2xvcjoiI2E3YjdjYyJ9LGxhYmVsUHJlY2lzaW9uOm51bGwsbGFiZWxGb3JtYXR0ZXI6bnVsbCxzaG93RGV0YWlsOiEwLHNob3dEYXRhU2hhZG93OiJhdXRvIixyZWFsdGltZTohMCx6b29tTG9jazohMSx0ZXh0U3R5bGU6e2NvbG9yOiIjMzMzIn19fSk7dmFyIHpDPWlzLFJDPWtsLEJDPU9sLFZDPUEsR0M9RSxGQz0iaG9yaXpvbnRhbCIsV0M9InZlcnRpY2FsIixIQz1bImxpbmUiLCJiYXIiLCJjYW5kbGVzdGljayIsInNjYXR0ZXIiXSxaQz1VQS5leHRlbmQoe3R5cGU6ImRhdGFab29tLnNsaWRlciIsaW5pdDpmdW5jdGlvbih0LGUpe3RoaXMuX2Rpc3BsYXlhYmxlcz17fSx0aGlzLl9vcmllbnQsdGhpcy5fcmFuZ2UsdGhpcy5faGFuZGxlRW5kcyx0aGlzLl9zaXplLHRoaXMuX2hhbmRsZVdpZHRoLHRoaXMuX2hhbmRsZUhlaWdodCx0aGlzLl9sb2NhdGlvbix0aGlzLl9kcmFnZ2luZyx0aGlzLl9kYXRhU2hhZG93SW5mbyx0aGlzLmFwaT1lfSxyZW5kZXI6ZnVuY3Rpb24odCxlLGksbil7WkMuc3VwZXJBcHBseSh0aGlzLCJyZW5kZXIiLGFyZ3VtZW50cyksVGModGhpcywiX2Rpc3BhdGNoWm9vbUFjdGlvbiIsdGhpcy5kYXRhWm9vbU1vZGVsLmdldCgidGhyb3R0bGUiKSwiZml4UmF0ZSIpLHRoaXMuX29yaWVudD10LmdldCgib3JpZW50IiksITEhPT10aGlzLmRhdGFab29tTW9kZWwuZ2V0KCJzaG93Iik/KG4mJiJkYXRhWm9vbSI9PT1uLnR5cGUmJm4uZnJvbT09PXRoaXMudWlkfHx0aGlzLl9idWlsZFZpZXcoKSx0aGlzLl91cGRhdGVWaWV3KCkpOnRoaXMuZ3JvdXAucmVtb3ZlQWxsKCl9LHJlbW92ZTpmdW5jdGlvbigpe1pDLnN1cGVyQXBwbHkodGhpcywicmVtb3ZlIixhcmd1bWVudHMpLEFjKHRoaXMsIl9kaXNwYXRjaFpvb21BY3Rpb24iKX0sZGlzcG9zZTpmdW5jdGlvbigpe1pDLnN1cGVyQXBwbHkodGhpcywiZGlzcG9zZSIsYXJndW1lbnRzKSxBYyh0aGlzLCJfZGlzcGF0Y2hab29tQWN0aW9uIil9LF9idWlsZFZpZXc6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdyb3VwO3QucmVtb3ZlQWxsKCksdGhpcy5fcmVzZXRMb2NhdGlvbigpLHRoaXMuX3Jlc2V0SW50ZXJ2YWwoKTt2YXIgZT10aGlzLl9kaXNwbGF5YWJsZXMuYmFyR3JvdXA9bmV3IElpO3RoaXMuX3JlbmRlckJhY2tncm91bmQoKSx0aGlzLl9yZW5kZXJIYW5kbGUoKSx0aGlzLl9yZW5kZXJEYXRhU2hhZG93KCksdC5hZGQoZSksdGhpcy5fcG9zaXRpb25Hcm91cCgpfSxfcmVzZXRMb2NhdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZGF0YVpvb21Nb2RlbCxlPXRoaXMuYXBpLGk9dGhpcy5fZmluZENvb3JkUmVjdCgpLG49e3dpZHRoOmUuZ2V0V2lkdGgoKSxoZWlnaHQ6ZS5nZXRIZWlnaHQoKX0sbz10aGlzLl9vcmllbnQ9PT1GQz97cmlnaHQ6bi53aWR0aC1pLngtaS53aWR0aCx0b3A6bi5oZWlnaHQtMzAtNyx3aWR0aDppLndpZHRoLGhlaWdodDozMH06e3JpZ2h0OjcsdG9wOmkueSx3aWR0aDozMCxoZWlnaHQ6aS5oZWlnaHR9LGE9X3UodC5vcHRpb24pO0UoWyJyaWdodCIsInRvcCIsIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24odCl7InBoIj09PWFbdF0mJihhW3RdPW9bdF0pfSk7dmFyIHI9dnUoYSxuLHQucGFkZGluZyk7dGhpcy5fbG9jYXRpb249e3g6ci54LHk6ci55fSx0aGlzLl9zaXplPVtyLndpZHRoLHIuaGVpZ2h0XSx0aGlzLl9vcmllbnQ9PT1XQyYmdGhpcy5fc2l6ZS5yZXZlcnNlKCl9LF9wb3NpdGlvbkdyb3VwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ncm91cCxlPXRoaXMuX2xvY2F0aW9uLGk9dGhpcy5fb3JpZW50LG49dGhpcy5kYXRhWm9vbU1vZGVsLmdldEZpcnN0VGFyZ2V0QXhpc01vZGVsKCksbz1uJiZuLmdldCgiaW52ZXJzZSIpLGE9dGhpcy5fZGlzcGxheWFibGVzLmJhckdyb3VwLHI9KHRoaXMuX2RhdGFTaGFkb3dJbmZvfHx7fSkub3RoZXJBeGlzSW52ZXJzZTthLmF0dHIoaSE9PUZDfHxvP2k9PT1GQyYmbz97c2NhbGU6cj9bLTEsMV06Wy0xLC0xXX06aSE9PVdDfHxvP3tzY2FsZTpyP1stMSwtMV06Wy0xLDFdLHJvdGF0aW9uOk1hdGguUEkvMn06e3NjYWxlOnI/WzEsLTFdOlsxLDFdLHJvdGF0aW9uOk1hdGguUEkvMn06e3NjYWxlOnI/WzEsMV06WzEsLTFdfSk7dmFyIHM9dC5nZXRCb3VuZGluZ1JlY3QoW2FdKTt0LmF0dHIoInBvc2l0aW9uIixbZS54LXMueCxlLnktcy55XSl9LF9nZXRWaWV3RXh0ZW50OmZ1bmN0aW9uKCl7cmV0dXJuWzAsdGhpcy5fc2l6ZVswXV19LF9yZW5kZXJCYWNrZ3JvdW5kOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kYXRhWm9vbU1vZGVsLGU9dGhpcy5fc2l6ZSxpPXRoaXMuX2Rpc3BsYXlhYmxlcy5iYXJHcm91cDtpLmFkZChuZXcgekMoe3NpbGVudDohMCxzaGFwZTp7eDowLHk6MCx3aWR0aDplWzBdLGhlaWdodDplWzFdfSxzdHlsZTp7ZmlsbDp0LmdldCgiYmFja2dyb3VuZENvbG9yIil9LHoyOi00MH0pKSxpLmFkZChuZXcgekMoe3NoYXBlOnt4OjAseTowLHdpZHRoOmVbMF0saGVpZ2h0OmVbMV19LHN0eWxlOntmaWxsOiJ0cmFuc3BhcmVudCJ9LHoyOjAsb25jbGljazpBKHRoaXMuX29uQ2xpY2tQYW5lbENsaWNrLHRoaXMpfSkpfSxfcmVuZGVyRGF0YVNoYWRvdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGFTaGFkb3dJbmZvPXRoaXMuX3ByZXBhcmVEYXRhU2hhZG93SW5mbygpO2lmKHQpe3ZhciBlPXRoaXMuX3NpemUsaT10LnNlcmllcyxuPWkuZ2V0UmF3RGF0YSgpLG89aS5nZXRTaGFkb3dEaW0/aS5nZXRTaGFkb3dEaW0oKTp0Lm90aGVyRGltO2lmKG51bGwhPW8pe3ZhciBhPW4uZ2V0RGF0YUV4dGVudChvKSxyPS4zKihhWzFdLWFbMF0pO2E9W2FbMF0tcixhWzFdK3JdO3ZhciBzLGw9WzAsZVsxXV0sdT1bMCxlWzBdXSxoPVtbZVswXSwwXSxbMCwwXV0sYz1bXSxkPXVbMV0vKG4uY291bnQoKS0xKSxmPTAscD1NYXRoLnJvdW5kKG4uY291bnQoKS9lWzBdKTtuLmVhY2goW29dLGZ1bmN0aW9uKHQsZSl7aWYoMDxwJiZlJXApZis9ZDtlbHNle3ZhciBpPW51bGw9PXR8fGlzTmFOKHQpfHwiIj09PXQsbj1pPzA6UkModCxhLGwsITApO2kmJiFzJiZlPyhoLnB1c2goW2hbaC5sZW5ndGgtMV1bMF0sMF0pLGMucHVzaChbY1tjLmxlbmd0aC0xXVswXSwwXSkpOiFpJiZzJiYoaC5wdXNoKFtmLDBdKSxjLnB1c2goW2YsMF0pKSxoLnB1c2goW2Ysbl0pLGMucHVzaChbZixuXSksZis9ZCxzPWl9fSk7dmFyIGc9dGhpcy5kYXRhWm9vbU1vZGVsO3RoaXMuX2Rpc3BsYXlhYmxlcy5iYXJHcm91cC5hZGQobmV3IHFyKHtzaGFwZTp7cG9pbnRzOmh9LHN0eWxlOkMoe2ZpbGw6Zy5nZXQoImRhdGFCYWNrZ3JvdW5kQ29sb3IiKX0sZy5nZXRNb2RlbCgiZGF0YUJhY2tncm91bmQuYXJlYVN0eWxlIikuZ2V0QXJlYVN0eWxlKCkpLHNpbGVudDohMCx6MjotMjB9KSksdGhpcy5fZGlzcGxheWFibGVzLmJhckdyb3VwLmFkZChuZXcgS3Ioe3NoYXBlOntwb2ludHM6Y30sc3R5bGU6Zy5nZXRNb2RlbCgiZGF0YUJhY2tncm91bmQubGluZVN0eWxlIikuZ2V0TGluZVN0eWxlKCksc2lsZW50OiEwLHoyOi0xOX0pKX19fSxfcHJlcGFyZURhdGFTaGFkb3dJbmZvOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5kYXRhWm9vbU1vZGVsLHM9dC5nZXQoInNob3dEYXRhU2hhZG93Iik7aWYoITEhPT1zKXt2YXIgbCx1PXRoaXMuZWNNb2RlbDtyZXR1cm4gdC5lYWNoVGFyZ2V0QXhpcyhmdW5jdGlvbihhLHIpe0UodC5nZXRBeGlzUHJveHkoYS5uYW1lLHIpLmdldFRhcmdldFNlcmllc01vZGVscygpLGZ1bmN0aW9uKHQpe2lmKCEobHx8ITAhPT1zJiZfKEhDLHQuZ2V0KCJ0eXBlIikpPDApKXt2YXIgZSxpPXUuZ2V0Q29tcG9uZW50KGEuYXhpcyxyKS5heGlzLG49ZnVuY3Rpb24odCl7cmV0dXJue3g6InkiLHk6IngiLHJhZGl1czoiYW5nbGUiLGFuZ2xlOiJyYWRpdXMifVt0XX0oYS5uYW1lKSxvPXQuY29vcmRpbmF0ZVN5c3RlbTtudWxsIT1uJiZvLmdldE90aGVyQXhpcyYmKGU9by5nZXRPdGhlckF4aXMoaSkuaW52ZXJzZSksbj10LmdldERhdGEoKS5tYXBEaW1lbnNpb24obiksbD17dGhpc0F4aXM6aSxzZXJpZXM6dCx0aGlzRGltOmEubmFtZSxvdGhlckRpbTpuLG90aGVyQXhpc0ludmVyc2U6ZX19fSx0aGlzKX0sdGhpcyksbH19LF9yZW5kZXJIYW5kbGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kaXNwbGF5YWJsZXMsYT10LmhhbmRsZXM9W10scj10LmhhbmRsZUxhYmVscz1bXSxzPXRoaXMuX2Rpc3BsYXlhYmxlcy5iYXJHcm91cCxlPXRoaXMuX3NpemUsbD10aGlzLmRhdGFab29tTW9kZWw7cy5hZGQodC5maWxsZXI9bmV3IHpDKHtkcmFnZ2FibGU6ITAsY3Vyc29yOlVDKHRoaXMuX29yaWVudCksZHJpZnQ6VkModGhpcy5fb25EcmFnTW92ZSx0aGlzLCJhbGwiKSxvbmRyYWdzdGFydDpWQyh0aGlzLl9zaG93RGF0YUluZm8sdGhpcywhMCksb25kcmFnZW5kOlZDKHRoaXMuX29uRHJhZ0VuZCx0aGlzKSxvbm1vdXNlb3ZlcjpWQyh0aGlzLl9zaG93RGF0YUluZm8sdGhpcywhMCksb25tb3VzZW91dDpWQyh0aGlzLl9zaG93RGF0YUluZm8sdGhpcywhMSksc3R5bGU6e2ZpbGw6bC5nZXQoImZpbGxlckNvbG9yIiksdGV4dFBvc2l0aW9uOiJpbnNpZGUifX0pKSxzLmFkZChuZXcgekMoe3NpbGVudDohMCxzdWJQaXhlbE9wdGltaXplOiEwLHNoYXBlOnt4OjAseTowLHdpZHRoOmVbMF0saGVpZ2h0OmVbMV19LHN0eWxlOntzdHJva2U6bC5nZXQoImRhdGFCYWNrZ3JvdW5kQ29sb3IiKXx8bC5nZXQoImJvcmRlckNvbG9yIiksbGluZVdpZHRoOjEsZmlsbDoicmdiYSgwLDAsMCwwKSJ9fSkpLEdDKFswLDFdLGZ1bmN0aW9uKHQpe3ZhciBlPXBsKGwuZ2V0KCJoYW5kbGVJY29uIikse2N1cnNvcjpVQyh0aGlzLl9vcmllbnQpLGRyYWdnYWJsZTohMCxkcmlmdDpWQyh0aGlzLl9vbkRyYWdNb3ZlLHRoaXMsdCksb25kcmFnZW5kOlZDKHRoaXMuX29uRHJhZ0VuZCx0aGlzKSxvbm1vdXNlb3ZlcjpWQyh0aGlzLl9zaG93RGF0YUluZm8sdGhpcywhMCksb25tb3VzZW91dDpWQyh0aGlzLl9zaG93RGF0YUluZm8sdGhpcywhMSl9LHt4Oi0xLHk6MCx3aWR0aDoyLGhlaWdodDoyfSksaT1lLmdldEJvdW5kaW5nUmVjdCgpO3RoaXMuX2hhbmRsZUhlaWdodD1QbChsLmdldCgiaGFuZGxlU2l6ZSIpLHRoaXMuX3NpemVbMV0pLHRoaXMuX2hhbmRsZVdpZHRoPWkud2lkdGgvaS5oZWlnaHQqdGhpcy5faGFuZGxlSGVpZ2h0LGUuc2V0U3R5bGUobC5nZXRNb2RlbCgiaGFuZGxlU3R5bGUiKS5nZXRJdGVtU3R5bGUoKSk7dmFyIG49bC5nZXQoImhhbmRsZUNvbG9yIik7bnVsbCE9biYmKGUuc3R5bGUuZmlsbD1uKSxzLmFkZChhW3RdPWUpO3ZhciBvPWwudGV4dFN0eWxlTW9kZWw7dGhpcy5ncm91cC5hZGQoclt0XT1uZXcgRnIoe3NpbGVudDohMCxpbnZpc2libGU6ITAsc3R5bGU6e3g6MCx5OjAsdGV4dDoiIix0ZXh0VmVydGljYWxBbGlnbjoibWlkZGxlIix0ZXh0QWxpZ246ImNlbnRlciIsdGV4dEZpbGw6by5nZXRUZXh0Q29sb3IoKSx0ZXh0Rm9udDpvLmdldEZvbnQoKX0sejI6MTB9KSl9LHRoaXMpfSxfcmVzZXRJbnRlcnZhbDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3JhbmdlPXRoaXMuZGF0YVpvb21Nb2RlbC5nZXRQZXJjZW50UmFuZ2UoKSxlPXRoaXMuX2dldFZpZXdFeHRlbnQoKTt0aGlzLl9oYW5kbGVFbmRzPVtSQyh0WzBdLFswLDEwMF0sZSwhMCksUkModFsxXSxbMCwxMDBdLGUsITApXX0sX3VwZGF0ZUludGVydmFsOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5kYXRhWm9vbU1vZGVsLG49dGhpcy5faGFuZGxlRW5kcyxvPXRoaXMuX2dldFZpZXdFeHRlbnQoKSxhPWkuZmluZFJlcHJlc2VudGF0aXZlQXhpc1Byb3h5KCkuZ2V0TWluTWF4U3BhbigpLHI9WzAsMTAwXTtXdyhlLG4sbyxpLmdldCgiem9vbUxvY2siKT8iYWxsIjp0LG51bGwhPWEubWluU3Bhbj9SQyhhLm1pblNwYW4scixvLCEwKTpudWxsLG51bGwhPWEubWF4U3Bhbj9SQyhhLm1heFNwYW4scixvLCEwKTpudWxsKTt2YXIgcz10aGlzLl9yYW5nZSxsPXRoaXMuX3JhbmdlPUJDKFtSQyhuWzBdLG8sciwhMCksUkMoblsxXSxvLHIsITApXSk7cmV0dXJuIXN8fHNbMF0hPT1sWzBdfHxzWzFdIT09bFsxXX0sX3VwZGF0ZVZpZXc6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5fZGlzcGxheWFibGVzLG89dGhpcy5faGFuZGxlRW5kcyxlPUJDKG8uc2xpY2UoKSksYT10aGlzLl9zaXplO0dDKFswLDFdLGZ1bmN0aW9uKHQpe3ZhciBlPW4uaGFuZGxlc1t0XSxpPXRoaXMuX2hhbmRsZUhlaWdodDtlLmF0dHIoe3NjYWxlOltpLzIsaS8yXSxwb3NpdGlvbjpbb1t0XSxhWzFdLzItaS8yXX0pfSx0aGlzKSxuLmZpbGxlci5zZXRTaGFwZSh7eDplWzBdLHk6MCx3aWR0aDplWzFdLWVbMF0saGVpZ2h0OmFbMV19KSx0aGlzLl91cGRhdGVEYXRhSW5mbyh0KX0sX3VwZGF0ZURhdGFJbmZvOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZGF0YVpvb21Nb2RlbCxhPXRoaXMuX2Rpc3BsYXlhYmxlcyxyPWEuaGFuZGxlTGFiZWxzLHM9dGhpcy5fb3JpZW50LGw9WyIiLCIiXTtpZihlLmdldCgic2hvd0RldGFpbCIpKXt2YXIgaT1lLmZpbmRSZXByZXNlbnRhdGl2ZUF4aXNQcm94eSgpO2lmKGkpe3ZhciBuPWkuZ2V0QXhpc01vZGVsKCkuYXhpcyxvPXRoaXMuX3JhbmdlLHU9dD9pLmNhbGN1bGF0ZURhdGFXaW5kb3coe3N0YXJ0Om9bMF0sZW5kOm9bMV19KS52YWx1ZVdpbmRvdzppLmdldERhdGFWYWx1ZVdpbmRvdygpO2w9W3RoaXMuX2Zvcm1hdExhYmVsKHVbMF0sbiksdGhpcy5fZm9ybWF0TGFiZWwodVsxXSxuKV19fXZhciBoPUJDKHRoaXMuX2hhbmRsZUVuZHMuc2xpY2UoKSk7ZnVuY3Rpb24gYyh0KXt2YXIgZT11bChhLmhhbmRsZXNbdF0ucGFyZW50LHRoaXMuZ3JvdXApLGk9Y2woMD09PXQ/InJpZ2h0IjoibGVmdCIsZSksbj10aGlzLl9oYW5kbGVXaWR0aC8yKzUsbz1obChbaFt0XSsoMD09PXQ/LW46biksdGhpcy5fc2l6ZVsxXS8yXSxlKTtyW3RdLnNldFN0eWxlKHt4Om9bMF0seTpvWzFdLHRleHRWZXJ0aWNhbEFsaWduOnM9PT1GQz8ibWlkZGxlIjppLHRleHRBbGlnbjpzPT09RkM/aToiY2VudGVyIix0ZXh0OmxbdF19KX1jLmNhbGwodGhpcywwKSxjLmNhbGwodGhpcywxKX0sX2Zvcm1hdExhYmVsOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5kYXRhWm9vbU1vZGVsLG49aS5nZXQoImxhYmVsRm9ybWF0dGVyIiksbz1pLmdldCgibGFiZWxQcmVjaXNpb24iKTtudWxsIT1vJiYiYXV0byIhPT1vfHwobz1lLmdldFBpeGVsUHJlY2lzaW9uKCkpO3ZhciBhPW51bGw9PXR8fGlzTmFOKHQpPyIiOiJjYXRlZ29yeSI9PT1lLnR5cGV8fCJ0aW1lIj09PWUudHlwZT9lLnNjYWxlLmdldExhYmVsKE1hdGgucm91bmQodCkpOnQudG9GaXhlZChNYXRoLm1pbihvLDIwKSk7cmV0dXJuIE8obik/bih0LGEpOnoobik/bi5yZXBsYWNlKCJ7dmFsdWV9IixhKTphfSxfc2hvd0RhdGFJbmZvOmZ1bmN0aW9uKHQpe3Q9dGhpcy5fZHJhZ2dpbmd8fHQ7dmFyIGU9dGhpcy5fZGlzcGxheWFibGVzLmhhbmRsZUxhYmVscztlWzBdLmF0dHIoImludmlzaWJsZSIsIXQpLGVbMV0uYXR0cigiaW52aXNpYmxlIiwhdCl9LF9vbkRyYWdNb3ZlOmZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMuX2RyYWdnaW5nPSEwLFd0KG4uZXZlbnQpO3ZhciBvPWhsKFtlLGldLHRoaXMuX2Rpc3BsYXlhYmxlcy5iYXJHcm91cC5nZXRMb2NhbFRyYW5zZm9ybSgpLCEwKSxhPXRoaXMuX3VwZGF0ZUludGVydmFsKHQsb1swXSkscj10aGlzLmRhdGFab29tTW9kZWwuZ2V0KCJyZWFsdGltZSIpO3RoaXMuX3VwZGF0ZVZpZXcoIXIpLGEmJnImJnRoaXMuX2Rpc3BhdGNoWm9vbUFjdGlvbigpfSxfb25EcmFnRW5kOmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ2dpbmc9ITEsdGhpcy5fc2hvd0RhdGFJbmZvKCExKSx0aGlzLmRhdGFab29tTW9kZWwuZ2V0KCJyZWFsdGltZSIpfHx0aGlzLl9kaXNwYXRjaFpvb21BY3Rpb24oKX0sX29uQ2xpY2tQYW5lbENsaWNrOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3NpemUsaT10aGlzLl9kaXNwbGF5YWJsZXMuYmFyR3JvdXAudHJhbnNmb3JtQ29vcmRUb0xvY2FsKHQub2Zmc2V0WCx0Lm9mZnNldFkpO2lmKCEoaVswXTwwfHxpWzBdPmVbMF18fGlbMV08MHx8aVsxXT5lWzFdKSl7dmFyIG49dGhpcy5faGFuZGxlRW5kcyxvPShuWzBdK25bMV0pLzIsYT10aGlzLl91cGRhdGVJbnRlcnZhbCgiYWxsIixpWzBdLW8pO3RoaXMuX3VwZGF0ZVZpZXcoKSxhJiZ0aGlzLl9kaXNwYXRjaFpvb21BY3Rpb24oKX19LF9kaXNwYXRjaFpvb21BY3Rpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yYW5nZTt0aGlzLmFwaS5kaXNwYXRjaEFjdGlvbih7dHlwZToiZGF0YVpvb20iLGZyb206dGhpcy51aWQsZGF0YVpvb21JZDp0aGlzLmRhdGFab29tTW9kZWwuaWQsc3RhcnQ6dFswXSxlbmQ6dFsxXX0pfSxfZmluZENvb3JkUmVjdDpmdW5jdGlvbigpe3ZhciBpO2lmKEdDKHRoaXMuZ2V0VGFyZ2V0Q29vcmRJbmZvKCksZnVuY3Rpb24odCl7aWYoIWkmJnQubGVuZ3RoKXt2YXIgZT10WzBdLm1vZGVsLmNvb3JkaW5hdGVTeXN0ZW07aT1lLmdldFJlY3QmJmUuZ2V0UmVjdCgpfX0pLCFpKXt2YXIgdD10aGlzLmFwaS5nZXRXaWR0aCgpLGU9dGhpcy5hcGkuZ2V0SGVpZ2h0KCk7aT17eDouMip0LHk6LjIqZSx3aWR0aDouNip0LGhlaWdodDouNiplfX1yZXR1cm4gaX19KTtmdW5jdGlvbiBVQyh0KXtyZXR1cm4idmVydGljYWwiPT09dD8ibnMtcmVzaXplIjoiZXctcmVzaXplIn1XQS5leHRlbmQoe3R5cGU6ImRhdGFab29tLmluc2lkZSIsZGVmYXVsdE9wdGlvbjp7ZGlzYWJsZWQ6ITEsem9vbUxvY2s6ITEsem9vbU9uTW91c2VXaGVlbDohMCxtb3ZlT25Nb3VzZU1vdmU6ITAsbW92ZU9uTW91c2VXaGVlbDohMSxwcmV2ZW50RGVmYXVsdE1vdXNlTW92ZTohMH19KTt2YXIgWEM9IlwwX2VjX2RhdGFab29tX3JvYW1zIjtmdW5jdGlvbiBZQyh0LG4pe3ZhciBlPXFDKHQpLG89bi5kYXRhWm9vbUlkLGE9bi5jb29yZElkO0UoZSxmdW5jdGlvbih0LGUpe3ZhciBpPXQuZGF0YVpvb21JbmZvcztpW29dJiZfKG4uYWxsQ29vcmRJZHMsYSk8MCYmKGRlbGV0ZSBpW29dLHQuY291bnQtLSl9KSxLQyhlKTt2YXIgaT1lW2FdO2l8fCgoaT1lW2FdPXtjb29yZElkOmEsZGF0YVpvb21JbmZvczp7fSxjb3VudDowfSkuY29udHJvbGxlcj1mdW5jdGlvbih0LHIpe3ZhciBlPW5ldyBMeSh0LmdldFpyKCkpO3JldHVybiBFKFsicGFuIiwiem9vbSIsInNjcm9sbE1vdmUiXSxmdW5jdGlvbihhKXtlLm9uKGEsZnVuY3Rpb24obil7dmFyIG89W107RShyLmRhdGFab29tSW5mb3MsZnVuY3Rpb24odCl7aWYobi5pc0F2YWlsYWJsZUJlaGF2aW9yKHQuZGF0YVpvb21Nb2RlbC5vcHRpb24pKXt2YXIgZT0odC5nZXRSYW5nZXx8e30pW2FdLGk9ZSYmZShyLmNvbnRyb2xsZXIsbik7IXQuZGF0YVpvb21Nb2RlbC5nZXQoImRpc2FibGVkIiwhMCkmJmkmJm8ucHVzaCh7ZGF0YVpvb21JZDp0LmRhdGFab29tSWQsc3RhcnQ6aVswXSxlbmQ6aVsxXX0pfX0pLG8ubGVuZ3RoJiZyLmRpc3BhdGNoQWN0aW9uKG8pfSl9KSxlfSh0LGkpLGkuZGlzcGF0Y2hBY3Rpb249VCgkQyx0KSksaS5kYXRhWm9vbUluZm9zW29dfHxpLmNvdW50KyssaS5kYXRhWm9vbUluZm9zW29dPW47dmFyIHI9ZnVuY3Rpb24odCl7dmFyIG4sbz17dHlwZV90cnVlOjIsdHlwZV9tb3ZlOjEsdHlwZV9mYWxzZTowLHR5cGVfdW5kZWZpbmVkOi0xfSxhPSEwO3JldHVybiBFKHQsZnVuY3Rpb24odCl7dmFyIGU9dC5kYXRhWm9vbU1vZGVsLGk9IWUuZ2V0KCJkaXNhYmxlZCIsITApJiYoIWUuZ2V0KCJ6b29tTG9jayIsITApfHwibW92ZSIpO29bInR5cGVfIituXTxvWyJ0eXBlXyIraV0mJihuPWkpLGEmPWUuZ2V0KCJwcmV2ZW50RGVmYXVsdE1vdXNlTW92ZSIsITApfSkse2NvbnRyb2xUeXBlOm4sb3B0Ont6b29tT25Nb3VzZVdoZWVsOiEwLG1vdmVPbk1vdXNlTW92ZTohMCxtb3ZlT25Nb3VzZVdoZWVsOiEwLHByZXZlbnREZWZhdWx0TW91c2VNb3ZlOiEhYX19fShpLmRhdGFab29tSW5mb3MpO2kuY29udHJvbGxlci5lbmFibGUoci5jb250cm9sVHlwZSxyLm9wdCksaS5jb250cm9sbGVyLnNldFBvaW50ZXJDaGVja2VyKG4uY29udGFpbnNQb2ludCksVGMoaSwiZGlzcGF0Y2hBY3Rpb24iLG4uZGF0YVpvb21Nb2RlbC5nZXQoInRocm90dGxlIiwhMCksImZpeFJhdGUiKX1mdW5jdGlvbiBqQyh0KXtyZXR1cm4gdC50eXBlKyJcMF8iK3QuaWR9ZnVuY3Rpb24gcUModCl7dmFyIGU9dC5nZXRacigpO3JldHVybiBlW1hDXXx8KGVbWENdPXt9KX1mdW5jdGlvbiBLQyhpKXtFKGksZnVuY3Rpb24odCxlKXt0LmNvdW50fHwodC5jb250cm9sbGVyLmRpc3Bvc2UoKSxkZWxldGUgaVtlXSl9KX1mdW5jdGlvbiAkQyh0LGUpe3QuZGlzcGF0Y2hBY3Rpb24oe3R5cGU6ImRhdGFab29tIixiYXRjaDplfSl9dmFyIEpDPUEsUUM9VUEuZXh0ZW5kKHt0eXBlOiJkYXRhWm9vbS5pbnNpZGUiLGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLl9yYW5nZX0scmVuZGVyOmZ1bmN0aW9uKHIsdCxzLGUpe1FDLnN1cGVyQXBwbHkodGhpcywicmVuZGVyIixhcmd1bWVudHMpLHRoaXMuX3JhbmdlPXIuZ2V0UGVyY2VudFJhbmdlKCksRSh0aGlzLmdldFRhcmdldENvb3JkSW5mbygpLGZ1bmN0aW9uKHQsbyl7dmFyIGE9Tih0LGZ1bmN0aW9uKHQpe3JldHVybiBqQyh0Lm1vZGVsKX0pO0UodCxmdW5jdGlvbihlKXt2YXIgbj1lLm1vZGVsLGk9e307RShbInBhbiIsInpvb20iLCJzY3JvbGxNb3ZlIl0sZnVuY3Rpb24odCl7aVt0XT1KQyh0TFt0XSx0aGlzLGUsbyl9LHRoaXMpLFlDKHMse2Nvb3JkSWQ6akMobiksYWxsQ29vcmRJZHM6YSxjb250YWluc1BvaW50OmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbi5jb29yZGluYXRlU3lzdGVtLmNvbnRhaW5Qb2ludChbZSxpXSl9LGRhdGFab29tSWQ6ci5pZCxkYXRhWm9vbU1vZGVsOnIsZ2V0UmFuZ2U6aX0pfSx0aGlzKX0sdGhpcyl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXshZnVuY3Rpb24odCxpKXt2YXIgZT1xQyh0KTtFKGUsZnVuY3Rpb24odCl7dC5jb250cm9sbGVyLmRpc3Bvc2UoKTt2YXIgZT10LmRhdGFab29tSW5mb3M7ZVtpXSYmKGRlbGV0ZSBlW2ldLHQuY291bnQtLSl9KSxLQyhlKX0odGhpcy5hcGksdGhpcy5kYXRhWm9vbU1vZGVsLmlkKSxRQy5zdXBlckFwcGx5KHRoaXMsImRpc3Bvc2UiLGFyZ3VtZW50cyksdGhpcy5fcmFuZ2U9bnVsbH19KSx0TD17em9vbTpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10aGlzLl9yYW5nZSxhPW8uc2xpY2UoKSxyPXQuYXhpc01vZGVsc1swXTtpZihyKXt2YXIgcz1uTFtlXShudWxsLFtuLm9yaWdpblgsbi5vcmlnaW5ZXSxyLGksdCksbD0oMDxzLnNpZ25hbD9zLnBpeGVsU3RhcnQrcy5waXhlbExlbmd0aC1zLnBpeGVsOnMucGl4ZWwtcy5waXhlbFN0YXJ0KS9zLnBpeGVsTGVuZ3RoKihhWzFdLWFbMF0pK2FbMF0sdT1NYXRoLm1heCgxL24uc2NhbGUsMCk7YVswXT0oYVswXS1sKSp1K2wsYVsxXT0oYVsxXS1sKSp1K2w7dmFyIGg9dGhpcy5kYXRhWm9vbU1vZGVsLmZpbmRSZXByZXNlbnRhdGl2ZUF4aXNQcm94eSgpLmdldE1pbk1heFNwYW4oKTtyZXR1cm4gV3coMCxhLFswLDEwMF0sMCxoLm1pblNwYW4saC5tYXhTcGFuKSx0aGlzLl9yYW5nZT1hLG9bMF0hPT1hWzBdfHxvWzFdIT09YVsxXT9hOnZvaWQgMH19LHBhbjplTChmdW5jdGlvbih0LGUsaSxuLG8sYSl7dmFyIHI9bkxbbl0oW2Eub2xkWCxhLm9sZFldLFthLm5ld1gsYS5uZXdZXSxlLG8saSk7cmV0dXJuIHIuc2lnbmFsKih0WzFdLXRbMF0pKnIucGl4ZWwvci5waXhlbExlbmd0aH0pLHNjcm9sbE1vdmU6ZUwoZnVuY3Rpb24odCxlLGksbixvLGEpe3JldHVybiBuTFtuXShbMCwwXSxbYS5zY3JvbGxEZWx0YSxhLnNjcm9sbERlbHRhXSxlLG8saSkuc2lnbmFsKih0WzFdLXRbMF0pKmEuc2Nyb2xsRGVsdGF9KX07ZnVuY3Rpb24gZUwobCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBvPXRoaXMuX3JhbmdlLGE9by5zbGljZSgpLHI9dC5heGlzTW9kZWxzWzBdO2lmKHIpe3ZhciBzPWwoYSxyLHQsZSxpLG4pO3JldHVybiBXdyhzLGEsWzAsMTAwXSwiYWxsIiksdGhpcy5fcmFuZ2U9YSxvWzBdIT09YVswXXx8b1sxXSE9PWFbMV0/YTp2b2lkIDB9fX1mdW5jdGlvbiBpTCh0KXt2YXIgZT10JiZ0LnZpc3VhbE1hcDtrKGUpfHwoZT1lP1tlXTpbXSksb0woZSxmdW5jdGlvbih0KXtpZih0KXthTCh0LCJzcGxpdExpc3QiKSYmIWFMKHQsInBpZWNlcyIpJiYodC5waWVjZXM9dC5zcGxpdExpc3QsZGVsZXRlIHQuc3BsaXRMaXN0KTt2YXIgZT10LnBpZWNlcztlJiZrKGUpJiZvTChlLGZ1bmN0aW9uKHQpe1IodCkmJihhTCh0LCJzdGFydCIpJiYhYUwodCwibWluIikmJih0Lm1pbj10LnN0YXJ0KSxhTCh0LCJlbmQiKSYmIWFMKHQsIm1heCIpJiYodC5tYXg9dC5lbmQpKX0pfX0pfXZhciBuTD17Z3JpZDpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBhPWkuYXhpcyxyPXt9LHM9by5tb2RlbC5jb29yZGluYXRlU3lzdGVtLmdldFJlY3QoKTtyZXR1cm4gdD10fHxbMCwwXSwieCI9PT1hLmRpbT8oci5waXhlbD1lWzBdLXRbMF0sci5waXhlbExlbmd0aD1zLndpZHRoLHIucGl4ZWxTdGFydD1zLngsci5zaWduYWw9YS5pbnZlcnNlPzE6LTEpOihyLnBpeGVsPWVbMV0tdFsxXSxyLnBpeGVsTGVuZ3RoPXMuaGVpZ2h0LHIucGl4ZWxTdGFydD1zLnksci5zaWduYWw9YS5pbnZlcnNlPy0xOjEpLHJ9LHBvbGFyOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9aS5heGlzLHI9e30scz1vLm1vZGVsLmNvb3JkaW5hdGVTeXN0ZW0sbD1zLmdldFJhZGl1c0F4aXMoKS5nZXRFeHRlbnQoKSx1PXMuZ2V0QW5nbGVBeGlzKCkuZ2V0RXh0ZW50KCk7cmV0dXJuIHQ9dD9zLnBvaW50VG9Db29yZCh0KTpbMCwwXSxlPXMucG9pbnRUb0Nvb3JkKGUpLCJyYWRpdXNBeGlzIj09PWkubWFpblR5cGU/KHIucGl4ZWw9ZVswXS10WzBdLHIucGl4ZWxMZW5ndGg9bFsxXS1sWzBdLHIucGl4ZWxTdGFydD1sWzBdLHIuc2lnbmFsPWEuaW52ZXJzZT8xOi0xKTooci5waXhlbD1lWzFdLXRbMV0sci5waXhlbExlbmd0aD11WzFdLXVbMF0sci5waXhlbFN0YXJ0PXVbMF0sci5zaWduYWw9YS5pbnZlcnNlPy0xOjEpLHJ9LHNpbmdsZUF4aXM6ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgYT1pLmF4aXMscj1vLm1vZGVsLmNvb3JkaW5hdGVTeXN0ZW0uZ2V0UmVjdCgpLHM9e307cmV0dXJuIHQ9dHx8WzAsMF0sImhvcml6b250YWwiPT09YS5vcmllbnQ/KHMucGl4ZWw9ZVswXS10WzBdLHMucGl4ZWxMZW5ndGg9ci53aWR0aCxzLnBpeGVsU3RhcnQ9ci54LHMuc2lnbmFsPWEuaW52ZXJzZT8xOi0xKToocy5waXhlbD1lWzFdLXRbMV0scy5waXhlbExlbmd0aD1yLmhlaWdodCxzLnBpeGVsU3RhcnQ9ci55LHMuc2lnbmFsPWEuaW52ZXJzZT8tMToxKSxzfX0sb0w9RTtmdW5jdGlvbiBhTCh0LGUpe3JldHVybiB0JiZ0Lmhhc093blByb3BlcnR5JiZ0Lmhhc093blByb3BlcnR5KGUpfVR1LnJlZ2lzdGVyU3ViVHlwZURlZmF1bHRlcigidmlzdWFsTWFwIixmdW5jdGlvbih0KXtyZXR1cm4gdC5jYXRlZ29yaWVzfHwodC5waWVjZXM/MDx0LnBpZWNlcy5sZW5ndGg6MDx0LnNwbGl0TnVtYmVyKSYmIXQuY2FsY3VsYWJsZT8icGllY2V3aXNlIjoiY29udGludW91cyJ9KTt2YXIgckw9SWQuVklTVUFMLkNPTVBPTkVOVDtmdW5jdGlvbiBzTCh0LGUsaSxuKXtmb3IodmFyIG89ZS50YXJnZXRWaXN1YWxzW25dLGE9YV8ucHJlcGFyZVZpc3VhbFR5cGVzKG8pLHI9e2NvbG9yOnQuZ2V0RGF0YSgpLmdldFZpc3VhbCgiY29sb3IiKX0scz0wLGw9YS5sZW5ndGg7czxsO3MrKyl7dmFyIHU9YVtzXSxoPW9bIm9wYWNpdHkiPT09dT8iX19hbHBoYUZvck9wYWNpdHkiOnVdO2gmJmguYXBwbHlWaXN1YWwoaSxjLGQpfXJldHVybiByLmNvbG9yO2Z1bmN0aW9uIGModCl7cmV0dXJuIHJbdF19ZnVuY3Rpb24gZCh0LGUpe3JbdF09ZX19eWYockwse2NyZWF0ZU9uQWxsU2VyaWVzOiEwLHJlc2V0OmZ1bmN0aW9uKGksdCl7dmFyIG49W107cmV0dXJuIHQuZWFjaENvbXBvbmVudCgidmlzdWFsTWFwIixmdW5jdGlvbih0KXt2YXIgZT1pLnBpcGVsaW5lQ29udGV4dDshdC5pc1RhcmdldFNlcmllcyhpKXx8ZSYmZS5sYXJnZXx8bi5wdXNoKGZ1bmN0aW9uKHQsZixwLGcpe3ZhciBtPXt9O3JldHVybiBFKHQsZnVuY3Rpb24odCl7dmFyIGU9YV8ucHJlcGFyZVZpc3VhbFR5cGVzKGZbdF0pO21bdF09ZX0pLHtwcm9ncmVzczpmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIGkuZ2V0SXRlbVZpc3VhbChvLHQpfWZ1bmN0aW9uIG4odCxlKXtpLnNldEl0ZW1WaXN1YWwobyx0LGUpfXZhciBvO2ZvcihudWxsIT1nJiYoZz1pLmdldERpbWVuc2lvbihnKSk7bnVsbCE9KG89dC5uZXh0KCkpOyl7dmFyIGE9aS5nZXRSYXdEYXRhSXRlbShvKTtpZighYXx8ITEhPT1hLnZpc3VhbE1hcClmb3IodmFyIHI9bnVsbCE9Zz9pLmdldChnLG8sITApOm8scz1wKHIpLGw9ZltzXSx1PW1bc10saD0wLGM9dS5sZW5ndGg7aDxjO2grKyl7dmFyIGQ9dVtoXTtsW2RdJiZsW2RdLmFwcGx5VmlzdWFsKHIsZSxuKX19fX19KHQuc3RhdGVMaXN0LHQudGFyZ2V0VmlzdWFscyxBKHQuZ2V0VmFsdWVTdGF0ZSx0KSx0LmdldERhdGFEaW1lbnNpb24oaS5nZXREYXRhKCkpKSl9KSxufX0pLHlmKHJMLHtjcmVhdGVPbkFsbFNlcmllczohMCxyZXNldDpmdW5jdGlvbihvLHQpe3ZhciBhPW8uZ2V0RGF0YSgpLHI9W107dC5lYWNoQ29tcG9uZW50KCJ2aXN1YWxNYXAiLGZ1bmN0aW9uKHQpe2lmKHQuaXNUYXJnZXRTZXJpZXMobykpe3ZhciBlPXQuZ2V0VmlzdWFsTWV0YShBKHNMLG51bGwsbyx0KSl8fHtzdG9wczpbXSxvdXRlckNvbG9yczpbXX0saT10LmdldERhdGFEaW1lbnNpb24oYSksbj1hLmdldERpbWVuc2lvbkluZm8oaSk7bnVsbCE9biYmKGUuZGltZW5zaW9uPW4uaW5kZXgsci5wdXNoKGUpKX19KSxvLmdldERhdGEoKS5zZXRWaXN1YWwoInZpc3VhbE1ldGEiLHIpfX0pO3ZhciBsTD1mdW5jdGlvbih0LGUsaSl7dmFyIG49RCgodUxbdF18fHt9KVtlXSk7cmV0dXJuIGkmJmsobik/bltuLmxlbmd0aC0xXTpufSx1TD17Y29sb3I6e2FjdGl2ZTpbIiMwMDZlZGQiLCIjZTBmZmZmIl0saW5hY3RpdmU6WyJyZ2JhKDAsMCwwLDApIl19LGNvbG9ySHVlOnthY3RpdmU6WzAsMzYwXSxpbmFjdGl2ZTpbMCwwXX0sY29sb3JTYXR1cmF0aW9uOnthY3RpdmU6Wy4zLDFdLGluYWN0aXZlOlswLDBdfSxjb2xvckxpZ2h0bmVzczp7YWN0aXZlOlsuOSwuNV0saW5hY3RpdmU6WzAsMF19LGNvbG9yQWxwaGE6e2FjdGl2ZTpbLjMsMV0saW5hY3RpdmU6WzAsMF19LG9wYWNpdHk6e2FjdGl2ZTpbLjMsMV0saW5hY3RpdmU6WzAsMF19LHN5bWJvbDp7YWN0aXZlOlsiY2lyY2xlIiwicm91bmRSZWN0IiwiZGlhbW9uZCJdLGluYWN0aXZlOlsibm9uZSJdfSxzeW1ib2xTaXplOnthY3RpdmU6WzEwLDUwXSxpbmFjdGl2ZTpbMCwwXX19LGhMPWFfLm1hcFZpc3VhbCxjTD1hXy5lYWNoVmlzdWFsLGRMPWssZkw9RSxwTD1PbCxnTD1rbCxtTD13Zih7dHlwZToidmlzdWFsTWFwIixkZXBlbmRlbmNpZXM6WyJzZXJpZXMiXSxzdGF0ZUxpc3Q6WyJpblJhbmdlIiwib3V0T2ZSYW5nZSJdLHJlcGxhY2FibGVPcHRpb25LZXlzOlsiaW5SYW5nZSIsIm91dE9mUmFuZ2UiLCJ0YXJnZXQiLCJjb250cm9sbGVyIiwiY29sb3IiXSxkYXRhQm91bmQ6Wy0xLzAsMS8wXSxsYXlvdXRNb2RlOnt0eXBlOiJib3giLGlnbm9yZVNpemU6ITB9LGRlZmF1bHRPcHRpb246e3Nob3c6ITAsemxldmVsOjAsejo0LHNlcmllc0luZGV4OiJhbGwiLG1pbjowLG1heDoyMDAsZGltZW5zaW9uOm51bGwsaW5SYW5nZTpudWxsLG91dE9mUmFuZ2U6bnVsbCxsZWZ0OjAscmlnaHQ6bnVsbCx0b3A6bnVsbCxib3R0b206MCxpdGVtV2lkdGg6bnVsbCxpdGVtSGVpZ2h0Om51bGwsaW52ZXJzZTohMSxvcmllbnQ6InZlcnRpY2FsIixiYWNrZ3JvdW5kQ29sb3I6InJnYmEoMCwwLDAsMCkiLGJvcmRlckNvbG9yOiIjY2NjIixjb250ZW50Q29sb3I6IiM1NzkzZjMiLGluYWN0aXZlQ29sb3I6IiNhYWEiLGJvcmRlcldpZHRoOjAscGFkZGluZzo1LHRleHRHYXA6MTAscHJlY2lzaW9uOjAsY29sb3I6bnVsbCxmb3JtYXR0ZXI6bnVsbCx0ZXh0Om51bGwsdGV4dFN0eWxlOntjb2xvcjoiIzMzMyJ9fSxpbml0OmZ1bmN0aW9uKHQsZSxpKXt0aGlzLl9kYXRhRXh0ZW50LHRoaXMudGFyZ2V0VmlzdWFscz17fSx0aGlzLmNvbnRyb2xsZXJWaXN1YWxzPXt9LHRoaXMudGV4dFN0eWxlTW9kZWwsdGhpcy5pdGVtU2l6ZSx0aGlzLm1lcmdlRGVmYXVsdEFuZFRoZW1lKHQsaSl9LG9wdGlvblVwZGF0ZWQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm9wdGlvbjt2LmNhbnZhc1N1cHBvcnRlZHx8KGkucmVhbHRpbWU9ITEpLGV8fHZEKGksdCx0aGlzLnJlcGxhY2FibGVPcHRpb25LZXlzKSx0aGlzLnRleHRTdHlsZU1vZGVsPXRoaXMuZ2V0TW9kZWwoInRleHRTdHlsZSIpLHRoaXMucmVzZXRJdGVtU2l6ZSgpLHRoaXMuY29tcGxldGVWaXN1YWxPcHRpb24oKX0scmVzZXRWaXN1YWw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdGF0ZUxpc3Q7dD1BKHQsdGhpcyksdGhpcy5jb250cm9sbGVyVmlzdWFscz1tRCh0aGlzLm9wdGlvbi5jb250cm9sbGVyLGUsdCksdGhpcy50YXJnZXRWaXN1YWxzPW1EKHRoaXMub3B0aW9uLnRhcmdldCxlLHQpfSxnZXRUYXJnZXRTZXJpZXNJbmRpY2VzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb24uc2VyaWVzSW5kZXgsaT1bXTtyZXR1cm4gbnVsbD09dHx8ImFsbCI9PT10P3RoaXMuZWNNb2RlbC5lYWNoU2VyaWVzKGZ1bmN0aW9uKHQsZSl7aS5wdXNoKGUpfSk6aT1Fbyh0KSxpfSxlYWNoVGFyZ2V0U2VyaWVzOmZ1bmN0aW9uKGUsaSl7RSh0aGlzLmdldFRhcmdldFNlcmllc0luZGljZXMoKSxmdW5jdGlvbih0KXtlLmNhbGwoaSx0aGlzLmVjTW9kZWwuZ2V0U2VyaWVzQnlJbmRleCh0KSl9LHRoaXMpfSxpc1RhcmdldFNlcmllczpmdW5jdGlvbihlKXt2YXIgaT0hMTtyZXR1cm4gdGhpcy5lYWNoVGFyZ2V0U2VyaWVzKGZ1bmN0aW9uKHQpe3Q9PT1lJiYoaT0hMCl9KSxpfSxmb3JtYXRWYWx1ZVRleHQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuLG8sYT10aGlzLm9wdGlvbixyPWEucHJlY2lzaW9uLHM9dGhpcy5kYXRhQm91bmQsbD1hLmZvcm1hdHRlcjtyZXR1cm4gaT1pfHxbIjwiLCI+Il0sayh0KSYmKHQ9dC5zbGljZSgpLG49ITApLG89ZT90Om4/W3UodFswXSksdSh0WzFdKV06dSh0KSx6KGwpP2wucmVwbGFjZSgie3ZhbHVlfSIsbj9vWzBdOm8pLnJlcGxhY2UoInt2YWx1ZTJ9IixuP29bMV06byk6TyhsKT9uP2wodFswXSx0WzFdKTpsKHQpOm4/dFswXT09PXNbMF0/aVswXSsiICIrb1sxXTp0WzFdPT09c1sxXT9pWzFdKyIgIitvWzBdOm9bMF0rIiAtICIrb1sxXTpvO2Z1bmN0aW9uIHUodCl7cmV0dXJuIHQ9PT1zWzBdPyJtaW4iOnQ9PT1zWzFdPyJtYXgiOigrdCkudG9GaXhlZChNYXRoLm1pbihyLDIwKSl9fSxyZXNldEV4dGVudDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uLGU9cEwoW3QubWluLHQubWF4XSk7dGhpcy5fZGF0YUV4dGVudD1lfSxnZXREYXRhRGltZW5zaW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9uLmRpbWVuc2lvbixpPXQuZGltZW5zaW9ucztpZihudWxsIT1lfHxpLmxlbmd0aCl7aWYobnVsbCE9ZSlyZXR1cm4gdC5nZXREaW1lbnNpb24oZSk7Zm9yKHZhciBuPXQuZGltZW5zaW9ucyxvPW4ubGVuZ3RoLTE7MDw9bztvLS0pe3ZhciBhPW5bb107aWYoIXQuZ2V0RGltZW5zaW9uSW5mbyhhKS5pc0NhbGN1bGF0aW9uQ29vcmQpcmV0dXJuIGF9fX0sZ2V0RXh0ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFFeHRlbnQuc2xpY2UoKX0sY29tcGxldGVWaXN1YWxPcHRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVjTW9kZWwsZT10aGlzLm9wdGlvbixpPXtpblJhbmdlOmUuaW5SYW5nZSxvdXRPZlJhbmdlOmUub3V0T2ZSYW5nZX0sbj1lLnRhcmdldHx8KGUudGFyZ2V0PXt9KSxvPWUuY29udHJvbGxlcnx8KGUuY29udHJvbGxlcj17fSk7bShuLGkpLG0obyxpKTt2YXIgdT10aGlzLmlzQ2F0ZWdvcnkoKTtmdW5jdGlvbiBhKG4pe2RMKGUuY29sb3IpJiYhbi5pblJhbmdlJiYobi5pblJhbmdlPXtjb2xvcjplLmNvbG9yLnNsaWNlKCkucmV2ZXJzZSgpfSksbi5pblJhbmdlPW4uaW5SYW5nZXx8e2NvbG9yOnQuZ2V0KCJncmFkaWVudENvbG9yIil9LGZMKHRoaXMuc3RhdGVMaXN0LGZ1bmN0aW9uKHQpe3ZhciBlPW5bdF07aWYoeihlKSl7dmFyIGk9bEwoZSwiYWN0aXZlIix1KTtpPyhuW3RdPXt9LG5bdF1bZV09aSk6ZGVsZXRlIG5bdF19fSx0aGlzKX1hLmNhbGwodGhpcyxuKSxhLmNhbGwodGhpcyxvKSxmdW5jdGlvbih0LGUsaSl7dmFyIG49dFtlXSxvPXRbaV07biYmIW8mJihvPXRbaV09e30sZkwobixmdW5jdGlvbih0LGUpe2lmKGFfLmlzVmFsaWRUeXBlKGUpKXt2YXIgaT1sTChlLCJpbmFjdGl2ZSIsdSk7bnVsbCE9aSYmKG9bZV09aSwiY29sb3IiIT09ZXx8by5oYXNPd25Qcm9wZXJ0eSgib3BhY2l0eSIpfHxvLmhhc093blByb3BlcnR5KCJjb2xvckFscGhhIil8fChvLm9wYWNpdHk9WzAsMF0pKX19KSl9LmNhbGwodGhpcyxuLCJpblJhbmdlIiwib3V0T2ZSYW5nZSIpLGZ1bmN0aW9uKGEpe3ZhciByPShhLmluUmFuZ2V8fHt9KS5zeW1ib2x8fChhLm91dE9mUmFuZ2V8fHt9KS5zeW1ib2wscz0oYS5pblJhbmdlfHx7fSkuc3ltYm9sU2l6ZXx8KGEub3V0T2ZSYW5nZXx8e30pLnN5bWJvbFNpemUsbD10aGlzLmdldCgiaW5hY3RpdmVDb2xvciIpO2ZMKHRoaXMuc3RhdGVMaXN0LGZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaXRlbVNpemUsaT1hW3RdO251bGw9PShpPWl8fChhW3RdPXtjb2xvcjp1P2w6W2xdfSkpLnN5bWJvbCYmKGkuc3ltYm9sPXImJkQocil8fCh1PyJyb3VuZFJlY3QiOlsicm91bmRSZWN0Il0pKSxudWxsPT1pLnN5bWJvbFNpemUmJihpLnN5bWJvbFNpemU9cyYmRChzKXx8KHU/ZVswXTpbZVswXSxlWzBdXSkpLGkuc3ltYm9sPWhMKGkuc3ltYm9sLGZ1bmN0aW9uKHQpe3JldHVybiJub25lIj09PXR8fCJzcXVhcmUiPT09dD8icm91bmRSZWN0Ijp0fSk7dmFyIG49aS5zeW1ib2xTaXplO2lmKG51bGwhPW4pe3ZhciBvPS0xLzA7Y0wobixmdW5jdGlvbih0KXtvPHQmJihvPXQpfSksaS5zeW1ib2xTaXplPWhMKG4sZnVuY3Rpb24odCl7cmV0dXJuIGdMKHQsWzAsb10sWzAsZVswXV0sITApfSl9fSx0aGlzKX0uY2FsbCh0aGlzLG8pfSxyZXNldEl0ZW1TaXplOmZ1bmN0aW9uKCl7dGhpcy5pdGVtU2l6ZT1bcGFyc2VGbG9hdCh0aGlzLmdldCgiaXRlbVdpZHRoIikpLHBhcnNlRmxvYXQodGhpcy5nZXQoIml0ZW1IZWlnaHQiKSldfSxpc0NhdGVnb3J5OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLm9wdGlvbi5jYXRlZ29yaWVzfSxzZXRTZWxlY3RlZDpldCxnZXRWYWx1ZVN0YXRlOmV0LGdldFZpc3VhbE1ldGE6ZXR9KSx2TD1bMjAsMTQwXSx5TD1tTC5leHRlbmQoe3R5cGU6InZpc3VhbE1hcC5jb250aW51b3VzIixkZWZhdWx0T3B0aW9uOnthbGlnbjoiYXV0byIsY2FsY3VsYWJsZTohMSxyYW5nZTpudWxsLHJlYWx0aW1lOiEwLGl0ZW1IZWlnaHQ6bnVsbCxpdGVtV2lkdGg6bnVsbCxob3Zlckxpbms6ITAsaG92ZXJMaW5rRGF0YVNpemU6bnVsbCxob3ZlckxpbmtPbkhhbmRsZTpudWxsfSxvcHRpb25VcGRhdGVkOmZ1bmN0aW9uKHQsZSl7eUwuc3VwZXJBcHBseSh0aGlzLCJvcHRpb25VcGRhdGVkIixhcmd1bWVudHMpLHRoaXMucmVzZXRFeHRlbnQoKSx0aGlzLnJlc2V0VmlzdWFsKGZ1bmN0aW9uKHQpe3QubWFwcGluZ01ldGhvZD0ibGluZWFyIix0LmRhdGFFeHRlbnQ9dGhpcy5nZXRFeHRlbnQoKX0pLHRoaXMuX3Jlc2V0UmFuZ2UoKX0scmVzZXRJdGVtU2l6ZTpmdW5jdGlvbigpe3lMLnN1cGVyQXBwbHkodGhpcywicmVzZXRJdGVtU2l6ZSIsYXJndW1lbnRzKTt2YXIgdD10aGlzLml0ZW1TaXplOyJob3Jpem9udGFsIj09PXRoaXMuX29yaWVudCYmdC5yZXZlcnNlKCksbnVsbCE9dFswXSYmIWlzTmFOKHRbMF0pfHwodFswXT12TFswXSksbnVsbCE9dFsxXSYmIWlzTmFOKHRbMV0pfHwodFsxXT12TFsxXSl9LF9yZXNldFJhbmdlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRFeHRlbnQoKSxlPXRoaXMub3B0aW9uLnJhbmdlOyFlfHxlLmF1dG8/KHQuYXV0bz0xLHRoaXMub3B0aW9uLnJhbmdlPXQpOmsoZSkmJihlWzBdPmVbMV0mJmUucmV2ZXJzZSgpLGVbMF09TWF0aC5tYXgoZVswXSx0WzBdKSxlWzFdPU1hdGgubWluKGVbMV0sdFsxXSkpfSxjb21wbGV0ZVZpc3VhbE9wdGlvbjpmdW5jdGlvbigpe21MLnByb3RvdHlwZS5jb21wbGV0ZVZpc3VhbE9wdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyksRSh0aGlzLnN0YXRlTGlzdCxmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbi5jb250cm9sbGVyW3RdLnN5bWJvbFNpemU7ZSYmZVswXSE9PWVbMV0mJihlWzBdPTApfSx0aGlzKX0sc2V0U2VsZWN0ZWQ6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24ucmFuZ2U9dC5zbGljZSgpLHRoaXMuX3Jlc2V0UmFuZ2UoKX0sZ2V0U2VsZWN0ZWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEV4dGVudCgpLGU9T2woKHRoaXMuZ2V0KCJyYW5nZSIpfHxbXSkuc2xpY2UoKSk7cmV0dXJuIGVbMF0+dFsxXSYmKGVbMF09dFsxXSksZVsxXT50WzFdJiYoZVsxXT10WzFdKSxlWzBdPHRbMF0mJihlWzBdPXRbMF0pLGVbMV08dFswXSYmKGVbMV09dFswXSksZX0sZ2V0VmFsdWVTdGF0ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbi5yYW5nZSxpPXRoaXMuZ2V0RXh0ZW50KCk7cmV0dXJuKGVbMF08PWlbMF18fGVbMF08PXQpJiYoZVsxXT49aVsxXXx8dDw9ZVsxXSk/ImluUmFuZ2UiOiJvdXRPZlJhbmdlIn0sZmluZFRhcmdldERhdGFJbmRpY2VzOmZ1bmN0aW9uKG4pe3ZhciBvPVtdO3JldHVybiB0aGlzLmVhY2hUYXJnZXRTZXJpZXMoZnVuY3Rpb24odCl7dmFyIGk9W10sZT10LmdldERhdGEoKTtlLmVhY2godGhpcy5nZXREYXRhRGltZW5zaW9uKGUpLGZ1bmN0aW9uKHQsZSl7blswXTw9dCYmdDw9blsxXSYmaS5wdXNoKGUpfSx0aGlzKSxvLnB1c2goe3Nlcmllc0lkOnQuaWQsZGF0YUluZGV4Oml9KX0sdGhpcyksb30sZ2V0VmlzdWFsTWV0YTpmdW5jdGlvbihpKXt2YXIgdD14TCh0aGlzLCJvdXRPZlJhbmdlIix0aGlzLmdldEV4dGVudCgpKSxlPXhMKHRoaXMsImluUmFuZ2UiLHRoaXMub3B0aW9uLnJhbmdlLnNsaWNlKCkpLG49W107ZnVuY3Rpb24gbyh0LGUpe24ucHVzaCh7dmFsdWU6dCxjb2xvcjppKHQsZSl9KX1mb3IodmFyIGE9MCxyPTAscz1lLmxlbmd0aCxsPXQubGVuZ3RoO3I8bCYmKCFlLmxlbmd0aHx8dFtyXTw9ZVswXSk7cisrKXRbcl08ZVthXSYmbyh0W3JdLCJvdXRPZlJhbmdlIik7Zm9yKHZhciB1PTE7YTxzO2ErKyx1PTApdSYmbi5sZW5ndGgmJm8oZVthXSwib3V0T2ZSYW5nZSIpLG8oZVthXSwiaW5SYW5nZSIpO2Zvcih1PTE7cjxsO3IrKykoIWUubGVuZ3RofHxlW2UubGVuZ3RoLTFdPHRbcl0pJiYodSYmKG4ubGVuZ3RoJiZvKG5bbi5sZW5ndGgtMV0udmFsdWUsIm91dE9mUmFuZ2UiKSx1PTApLG8odFtyXSwib3V0T2ZSYW5nZSIpKTt2YXIgaD1uLmxlbmd0aDtyZXR1cm57c3RvcHM6bixvdXRlckNvbG9yczpbaD9uWzBdLmNvbG9yOiJ0cmFuc3BhcmVudCIsaD9uW2gtMV0uY29sb3I6InRyYW5zcGFyZW50Il19fX0pO2Z1bmN0aW9uIHhMKHQsZSxpKXtpZihpWzBdPT09aVsxXSlyZXR1cm4gaS5zbGljZSgpO2Zvcih2YXIgbj0oaVsxXS1pWzBdKS8yMDAsbz1pWzBdLGE9W10scj0wO3I8PTIwMCYmbzxpWzFdO3IrKylhLnB1c2gobyksbys9bjtyZXR1cm4gYS5wdXNoKGlbMV0pLGF9dmFyIF9MPWJmKHt0eXBlOiJ2aXN1YWxNYXAiLGF1dG9Qb3NpdGlvblZhbHVlczp7bGVmdDoxLHJpZ2h0OjEsdG9wOjEsYm90dG9tOjF9LGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLmVjTW9kZWw9dCx0aGlzLmFwaT1lLHRoaXMudmlzdWFsTWFwTW9kZWx9LHJlbmRlcjpmdW5jdGlvbih0LGUsaSxuKXshMSE9PSh0aGlzLnZpc3VhbE1hcE1vZGVsPXQpLmdldCgic2hvdyIpP3RoaXMuZG9SZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuZ3JvdXAucmVtb3ZlQWxsKCl9LHJlbmRlckJhY2tncm91bmQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52aXN1YWxNYXBNb2RlbCxpPUpsKGUuZ2V0KCJwYWRkaW5nIil8fDApLG49dC5nZXRCb3VuZGluZ1JlY3QoKTt0LmFkZChuZXcgaXMoe3oyOi0xLHNpbGVudDohMCxzaGFwZTp7eDpuLngtaVszXSx5Om4ueS1pWzBdLHdpZHRoOm4ud2lkdGgraVszXStpWzFdLGhlaWdodDpuLmhlaWdodCtpWzBdK2lbMl19LHN0eWxlOntmaWxsOmUuZ2V0KCJiYWNrZ3JvdW5kQ29sb3IiKSxzdHJva2U6ZS5nZXQoImJvcmRlckNvbG9yIiksbGluZVdpZHRoOmUuZ2V0KCJib3JkZXJXaWR0aCIpfX0pKX0sZ2V0Q29udHJvbGxlclZpc3VhbDpmdW5jdGlvbihpLG4sbyl7dmFyIHQ9KG89b3x8e30pLmZvcmNlU3RhdGUsZT10aGlzLnZpc3VhbE1hcE1vZGVsLGE9e307aWYoInN5bWJvbCI9PT1uJiYoYS5zeW1ib2w9ZS5nZXQoIml0ZW1TeW1ib2wiKSksImNvbG9yIj09PW4pe3ZhciByPWUuZ2V0KCJjb250ZW50Q29sb3IiKTthLmNvbG9yPXJ9ZnVuY3Rpb24gcyh0KXtyZXR1cm4gYVt0XX1mdW5jdGlvbiBsKHQsZSl7YVt0XT1lfXZhciB1PWUuY29udHJvbGxlclZpc3VhbHNbdHx8ZS5nZXRWYWx1ZVN0YXRlKGkpXTtyZXR1cm4gRShhXy5wcmVwYXJlVmlzdWFsVHlwZXModSksZnVuY3Rpb24odCl7dmFyIGU9dVt0XTtvLmNvbnZlcnRPcGFjaXR5VG9BbHBoYSYmIm9wYWNpdHkiPT09dCYmKHQ9ImNvbG9yQWxwaGEiLGU9dS5fX2FscGhhRm9yT3BhY2l0eSksYV8uZGVwZW5kc09uKHQsbikmJmUmJmUuYXBwbHlWaXN1YWwoaSxzLGwpfSksYVtuXX0scG9zaXRpb25Hcm91cDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZpc3VhbE1hcE1vZGVsLGk9dGhpcy5hcGk7eXUodCxlLmdldEJveExheW91dFBhcmFtcygpLHt3aWR0aDppLmdldFdpZHRoKCksaGVpZ2h0OmkuZ2V0SGVpZ2h0KCl9KX0sZG9SZW5kZXI6ZXR9KTtmdW5jdGlvbiB3TCh0LGUsaSl7dmFyIG49dC5vcHRpb24sbz1uLmFsaWduO2lmKG51bGwhPW8mJiJhdXRvIiE9PW8pcmV0dXJuIG87Zm9yKHZhciBhPXt3aWR0aDplLmdldFdpZHRoKCksaGVpZ2h0OmUuZ2V0SGVpZ2h0KCl9LHI9Imhvcml6b250YWwiPT09bi5vcmllbnQ/MTowLHM9W1sibGVmdCIsInJpZ2h0Iiwid2lkdGgiXSxbInRvcCIsImJvdHRvbSIsImhlaWdodCJdXSxsPXNbcl0sdT1bMCxudWxsLDEwXSxoPXt9LGM9MDtjPDM7YysrKWhbc1sxLXJdW2NdXT11W2NdLGhbbFtjXV09Mj09PWM/aVswXTpuW2xbY11dO3ZhciBkPVtbIngiLCJ3aWR0aCIsM10sWyJ5IiwiaGVpZ2h0IiwwXV1bcl0sZj12dShoLGEsbi5wYWRkaW5nKTtyZXR1cm4gbFsoZi5tYXJnaW5bZFsyXV18fDApK2ZbZFswXV0rLjUqZltkWzFdXTwuNSphW2RbMV1dPzA6MV19ZnVuY3Rpb24gYkwodCxlKXtyZXR1cm4gRSh0fHxbXSxmdW5jdGlvbih0KXtudWxsIT10LmRhdGFJbmRleCYmKHQuZGF0YUluZGV4SW5zaWRlPXQuZGF0YUluZGV4LHQuZGF0YUluZGV4PW51bGwpLHQuaGlnaGxpZ2h0S2V5PSJ2aXN1YWxNYXAiKyhlP2UuY29tcG9uZW50SW5kZXg6IiIpfSksdH12YXIgU0w9a2wsTUw9RSxJTD1NYXRoLm1pbixUTD1NYXRoLm1heCxBTD1fTC5leHRlbmQoe3R5cGU6InZpc3VhbE1hcC5jb250aW51b3VzIixpbml0OmZ1bmN0aW9uKCl7QUwuc3VwZXJBcHBseSh0aGlzLCJpbml0Iixhcmd1bWVudHMpLHRoaXMuX3NoYXBlcz17fSx0aGlzLl9kYXRhSW50ZXJ2YWw9W10sdGhpcy5faGFuZGxlRW5kcz1bXSx0aGlzLl9vcmllbnQsdGhpcy5fdXNlSGFuZGxlLHRoaXMuX2hvdmVyTGlua0RhdGFJbmRpY2VzPVtdLHRoaXMuX2RyYWdnaW5nLHRoaXMuX2hvdmVyaW5nfSxkb1JlbmRlcjpmdW5jdGlvbih0LGUsaSxuKXtuJiYic2VsZWN0RGF0YVJhbmdlIj09PW4udHlwZSYmbi5mcm9tPT09dGhpcy51aWR8fHRoaXMuX2J1aWxkVmlldygpfSxfYnVpbGRWaWV3OmZ1bmN0aW9uKCl7dGhpcy5ncm91cC5yZW1vdmVBbGwoKTt2YXIgdD10aGlzLnZpc3VhbE1hcE1vZGVsLGU9dGhpcy5ncm91cDt0aGlzLl9vcmllbnQ9dC5nZXQoIm9yaWVudCIpLHRoaXMuX3VzZUhhbmRsZT10LmdldCgiY2FsY3VsYWJsZSIpLHRoaXMuX3Jlc2V0SW50ZXJ2YWwoKSx0aGlzLl9yZW5kZXJCYXIoZSk7dmFyIGk9dC5nZXQoInRleHQiKTt0aGlzLl9yZW5kZXJFbmRzVGV4dChlLGksMCksdGhpcy5fcmVuZGVyRW5kc1RleHQoZSxpLDEpLHRoaXMuX3VwZGF0ZVZpZXcoITApLHRoaXMucmVuZGVyQmFja2dyb3VuZChlKSx0aGlzLl91cGRhdGVWaWV3KCksdGhpcy5fZW5hYmxlSG92ZXJMaW5rVG9TZXJpZXMoKSx0aGlzLl9lbmFibGVIb3ZlckxpbmtGcm9tU2VyaWVzKCksdGhpcy5wb3NpdGlvbkdyb3VwKGUpfSxfcmVuZGVyRW5kc1RleHQ6ZnVuY3Rpb24odCxlLGkpe2lmKGUpe3ZhciBuPWVbMS1pXTtuPW51bGwhPW4/bisiIjoiIjt2YXIgbz10aGlzLnZpc3VhbE1hcE1vZGVsLGE9by5nZXQoInRleHRHYXAiKSxyPW8uaXRlbVNpemUscz10aGlzLl9zaGFwZXMuYmFyR3JvdXAsbD10aGlzLl9hcHBseVRyYW5zZm9ybShbclswXS8yLDA9PT1pPy1hOnJbMV0rYV0scyksdT10aGlzLl9hcHBseVRyYW5zZm9ybSgwPT09aT8iYm90dG9tIjoidG9wIixzKSxoPXRoaXMuX29yaWVudCxjPXRoaXMudmlzdWFsTWFwTW9kZWwudGV4dFN0eWxlTW9kZWw7dGhpcy5ncm91cC5hZGQobmV3IEZyKHtzdHlsZTp7eDpsWzBdLHk6bFsxXSx0ZXh0VmVydGljYWxBbGlnbjoiaG9yaXpvbnRhbCI9PT1oPyJtaWRkbGUiOnUsdGV4dEFsaWduOiJob3Jpem9udGFsIj09PWg/dToiY2VudGVyIix0ZXh0Om4sdGV4dEZvbnQ6Yy5nZXRGb250KCksdGV4dEZpbGw6Yy5nZXRUZXh0Q29sb3IoKX19KSl9fSxfcmVuZGVyQmFyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudmlzdWFsTWFwTW9kZWwsaT10aGlzLl9zaGFwZXMsbj1lLml0ZW1TaXplLG89dGhpcy5fb3JpZW50LGE9dGhpcy5fdXNlSGFuZGxlLHI9d0woZSx0aGlzLmFwaSxuKSxzPWkuYmFyR3JvdXA9dGhpcy5fY3JlYXRlQmFyR3JvdXAocik7cy5hZGQoaS5vdXRPZlJhbmdlPURMKCkpLHMuYWRkKGkuaW5SYW5nZT1ETChudWxsLGE/TEwodGhpcy5fb3JpZW50KTpudWxsLEEodGhpcy5fZHJhZ0hhbmRsZSx0aGlzLCJhbGwiLCExKSxBKHRoaXMuX2RyYWdIYW5kbGUsdGhpcywiYWxsIiwhMCkpKTt2YXIgbD1lLnRleHRTdHlsZU1vZGVsLmdldFRleHRSZWN0KCLlm70iKSx1PVRMKGwud2lkdGgsbC5oZWlnaHQpO2EmJihpLmhhbmRsZVRodW1icz1bXSxpLmhhbmRsZUxhYmVscz1bXSxpLmhhbmRsZUxhYmVsUG9pbnRzPVtdLHRoaXMuX2NyZWF0ZUhhbmRsZShzLDAsbix1LG8sciksdGhpcy5fY3JlYXRlSGFuZGxlKHMsMSxuLHUsbyxyKSksdGhpcy5fY3JlYXRlSW5kaWNhdG9yKHMsbix1LG8pLHQuYWRkKHMpfSxfY3JlYXRlSGFuZGxlOmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIGE9QSh0aGlzLl9kcmFnSGFuZGxlLHRoaXMsZSwhMSkscj1BKHRoaXMuX2RyYWdIYW5kbGUsdGhpcyxlLCEwKSxzPURMKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PT10P1tbMCwwXSxbZSwwXSxbZSwtZV1dOltbMCwwXSxbZSwwXSxbZSxlXV19KGUsbiksTEwodGhpcy5fb3JpZW50KSxhLHIpO3MucG9zaXRpb25bMF09aVswXSx0LmFkZChzKTt2YXIgbD10aGlzLnZpc3VhbE1hcE1vZGVsLnRleHRTdHlsZU1vZGVsLHU9bmV3IEZyKHtkcmFnZ2FibGU6ITAsZHJpZnQ6YSxvbm1vdXNlbW92ZTpmdW5jdGlvbih0KXtXdCh0LmV2ZW50KX0sb25kcmFnZW5kOnIsc3R5bGU6e3g6MCx5OjAsdGV4dDoiIix0ZXh0Rm9udDpsLmdldEZvbnQoKSx0ZXh0RmlsbDpsLmdldFRleHRDb2xvcigpfX0pO3RoaXMuZ3JvdXAuYWRkKHUpO3ZhciBoPVsiaG9yaXpvbnRhbCI9PT1vP24vMjoxLjUqbiwiaG9yaXpvbnRhbCI9PT1vPzA9PT1lPy0xLjUqbjoxLjUqbjowPT09ZT8tbi8yOm4vMl0sYz10aGlzLl9zaGFwZXM7Yy5oYW5kbGVUaHVtYnNbZV09cyxjLmhhbmRsZUxhYmVsUG9pbnRzW2VdPWgsYy5oYW5kbGVMYWJlbHNbZV09dX0sX2NyZWF0ZUluZGljYXRvcjpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz1ETChbWzAsMF1dLCJtb3ZlIik7by5wb3NpdGlvblswXT1lWzBdLG8uYXR0cih7aW52aXNpYmxlOiEwLHNpbGVudDohMH0pLHQuYWRkKG8pO3ZhciBhPXRoaXMudmlzdWFsTWFwTW9kZWwudGV4dFN0eWxlTW9kZWwscj1uZXcgRnIoe3NpbGVudDohMCxpbnZpc2libGU6ITAsc3R5bGU6e3g6MCx5OjAsdGV4dDoiIix0ZXh0Rm9udDphLmdldEZvbnQoKSx0ZXh0RmlsbDphLmdldFRleHRDb2xvcigpfX0pO3RoaXMuZ3JvdXAuYWRkKHIpO3ZhciBzPVsiaG9yaXpvbnRhbCI9PT1uP2kvMjo5LDBdLGw9dGhpcy5fc2hhcGVzO2wuaW5kaWNhdG9yPW8sbC5pbmRpY2F0b3JMYWJlbD1yLGwuaW5kaWNhdG9yTGFiZWxQb2ludD1zfSxfZHJhZ0hhbmRsZTpmdW5jdGlvbih0LGUsaSxuKXtpZih0aGlzLl91c2VIYW5kbGUpe2lmKHRoaXMuX2RyYWdnaW5nPSFlLCFlKXt2YXIgbz10aGlzLl9hcHBseVRyYW5zZm9ybShbaSxuXSx0aGlzLl9zaGFwZXMuYmFyR3JvdXAsITApO3RoaXMuX3VwZGF0ZUludGVydmFsKHQsb1sxXSksdGhpcy5fdXBkYXRlVmlldygpfWU9PT0hdGhpcy52aXN1YWxNYXBNb2RlbC5nZXQoInJlYWx0aW1lIikmJnRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOiJzZWxlY3REYXRhUmFuZ2UiLGZyb206dGhpcy51aWQsdmlzdWFsTWFwSWQ6dGhpcy52aXN1YWxNYXBNb2RlbC5pZCxzZWxlY3RlZDp0aGlzLl9kYXRhSW50ZXJ2YWwuc2xpY2UoKX0pLGU/dGhpcy5faG92ZXJpbmd8fHRoaXMuX2NsZWFySG92ZXJMaW5rVG9TZXJpZXMoKTpDTCh0aGlzLnZpc3VhbE1hcE1vZGVsKSYmdGhpcy5fZG9Ib3ZlckxpbmtUb1Nlcmllcyh0aGlzLl9oYW5kbGVFbmRzW3RdLCExKX19LF9yZXNldEludGVydmFsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52aXN1YWxNYXBNb2RlbCxlPXRoaXMuX2RhdGFJbnRlcnZhbD10LmdldFNlbGVjdGVkKCksaT10LmdldEV4dGVudCgpLG49WzAsdC5pdGVtU2l6ZVsxXV07dGhpcy5faGFuZGxlRW5kcz1bU0woZVswXSxpLG4sITApLFNMKGVbMV0saSxuLCEwKV19LF91cGRhdGVJbnRlcnZhbDpmdW5jdGlvbih0LGUpe2U9ZXx8MDt2YXIgaT10aGlzLnZpc3VhbE1hcE1vZGVsLG49dGhpcy5faGFuZGxlRW5kcyxvPVswLGkuaXRlbVNpemVbMV1dO1d3KGUsbixvLHQsMCk7dmFyIGE9aS5nZXRFeHRlbnQoKTt0aGlzLl9kYXRhSW50ZXJ2YWw9W1NMKG5bMF0sbyxhLCEwKSxTTChuWzFdLG8sYSwhMCldfSxfdXBkYXRlVmlldzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZpc3VhbE1hcE1vZGVsLGk9ZS5nZXRFeHRlbnQoKSxuPXRoaXMuX3NoYXBlcyxvPVswLGUuaXRlbVNpemVbMV1dLGE9dD9vOnRoaXMuX2hhbmRsZUVuZHMscj10aGlzLl9jcmVhdGVCYXJWaXN1YWwodGhpcy5fZGF0YUludGVydmFsLGksYSwiaW5SYW5nZSIpLHM9dGhpcy5fY3JlYXRlQmFyVmlzdWFsKGksaSxvLCJvdXRPZlJhbmdlIik7bi5pblJhbmdlLnNldFN0eWxlKHtmaWxsOnIuYmFyQ29sb3Isb3BhY2l0eTpyLm9wYWNpdHl9KS5zZXRTaGFwZSgicG9pbnRzIixyLmJhclBvaW50cyksbi5vdXRPZlJhbmdlLnNldFN0eWxlKHtmaWxsOnMuYmFyQ29sb3Isb3BhY2l0eTpzLm9wYWNpdHl9KS5zZXRTaGFwZSgicG9pbnRzIixzLmJhclBvaW50cyksdGhpcy5fdXBkYXRlSGFuZGxlKGEscil9LF9jcmVhdGVCYXJWaXN1YWw6ZnVuY3Rpb24odCxlLGksbil7dmFyIG89e2ZvcmNlU3RhdGU6bixjb252ZXJ0T3BhY2l0eVRvQWxwaGE6ITB9LGE9dGhpcy5fbWFrZUNvbG9yR3JhZGllbnQodCxvKSxyPVt0aGlzLmdldENvbnRyb2xsZXJWaXN1YWwodFswXSwic3ltYm9sU2l6ZSIsbyksdGhpcy5nZXRDb250cm9sbGVyVmlzdWFsKHRbMV0sInN5bWJvbFNpemUiLG8pXSxzPXRoaXMuX2NyZWF0ZUJhclBvaW50cyhpLHIpO3JldHVybntiYXJDb2xvcjpuZXcgY3MoMCwwLDAsMSxhKSxiYXJQb2ludHM6cyxoYW5kbGVzQ29sb3I6W2FbMF0uY29sb3IsYVthLmxlbmd0aC0xXS5jb2xvcl19fSxfbWFrZUNvbG9yR3JhZGllbnQ6ZnVuY3Rpb24odCxlKXt2YXIgaT1bXSxuPSh0WzFdLXRbMF0pLzEwMDtpLnB1c2goe2NvbG9yOnRoaXMuZ2V0Q29udHJvbGxlclZpc3VhbCh0WzBdLCJjb2xvciIsZSksb2Zmc2V0OjB9KTtmb3IodmFyIG89MTtvPDEwMDtvKyspe3ZhciBhPXRbMF0rbipvO2lmKGE+dFsxXSlicmVhaztpLnB1c2goe2NvbG9yOnRoaXMuZ2V0Q29udHJvbGxlclZpc3VhbChhLCJjb2xvciIsZSksb2Zmc2V0Om8vMTAwfSl9cmV0dXJuIGkucHVzaCh7Y29sb3I6dGhpcy5nZXRDb250cm9sbGVyVmlzdWFsKHRbMV0sImNvbG9yIixlKSxvZmZzZXQ6MX0pLGl9LF9jcmVhdGVCYXJQb2ludHM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnZpc3VhbE1hcE1vZGVsLml0ZW1TaXplO3JldHVybltbaVswXS1lWzBdLHRbMF1dLFtpWzBdLHRbMF1dLFtpWzBdLHRbMV1dLFtpWzBdLWVbMV0sdFsxXV1dfSxfY3JlYXRlQmFyR3JvdXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fb3JpZW50LGk9dGhpcy52aXN1YWxNYXBNb2RlbC5nZXQoImludmVyc2UiKTtyZXR1cm4gbmV3IElpKCJob3Jpem9udGFsIiE9PWV8fGk/Imhvcml6b250YWwiPT09ZSYmaT97c2NhbGU6ImJvdHRvbSI9PT10P1stMSwxXTpbMSwxXSxyb3RhdGlvbjotTWF0aC5QSS8yfToidmVydGljYWwiIT09ZXx8aT97c2NhbGU6ImxlZnQiPT09dD9bMSwxXTpbLTEsMV19OntzY2FsZToibGVmdCI9PT10P1sxLC0xXTpbLTEsLTFdfTp7c2NhbGU6ImJvdHRvbSI9PT10P1sxLDFdOlstMSwxXSxyb3RhdGlvbjpNYXRoLlBJLzJ9KX0sX3VwZGF0ZUhhbmRsZTpmdW5jdGlvbihuLG8pe2lmKHRoaXMuX3VzZUhhbmRsZSl7dmFyIGE9dGhpcy5fc2hhcGVzLHI9dGhpcy52aXN1YWxNYXBNb2RlbCxzPWEuaGFuZGxlVGh1bWJzLGw9YS5oYW5kbGVMYWJlbHM7TUwoWzAsMV0sZnVuY3Rpb24odCl7dmFyIGU9c1t0XTtlLnNldFN0eWxlKCJmaWxsIixvLmhhbmRsZXNDb2xvclt0XSksZS5wb3NpdGlvblsxXT1uW3RdO3ZhciBpPWhsKGEuaGFuZGxlTGFiZWxQb2ludHNbdF0sdWwoZSx0aGlzLmdyb3VwKSk7bFt0XS5zZXRTdHlsZSh7eDppWzBdLHk6aVsxXSx0ZXh0OnIuZm9ybWF0VmFsdWVUZXh0KHRoaXMuX2RhdGFJbnRlcnZhbFt0XSksdGV4dFZlcnRpY2FsQWxpZ246Im1pZGRsZSIsdGV4dEFsaWduOnRoaXMuX2FwcGx5VHJhbnNmb3JtKCJob3Jpem9udGFsIj09PXRoaXMuX29yaWVudD8wPT09dD8iYm90dG9tIjoidG9wIjoibGVmdCIsYS5iYXJHcm91cCl9KX0sdGhpcyl9fSxfc2hvd0luZGljYXRvcjpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10aGlzLnZpc3VhbE1hcE1vZGVsLGE9by5nZXRFeHRlbnQoKSxyPW8uaXRlbVNpemUscz1bMCxyWzFdXSxsPVNMKHQsYSxzLCEwKSx1PXRoaXMuX3NoYXBlcyxoPXUuaW5kaWNhdG9yO2lmKGgpe2gucG9zaXRpb25bMV09bCxoLmF0dHIoImludmlzaWJsZSIsITEpLGguc2V0U2hhcGUoInBvaW50cyIsZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIHQ/W1swLC1JTChlLFRMKGksMCkpXSxbNiwwXSxbMCxJTChlLFRMKG4taSwwKSldXTpbWzAsMF0sWzUsLTVdLFs1LDVdXX0oISFpLG4sbCxyWzFdKSk7dmFyIGM9dGhpcy5nZXRDb250cm9sbGVyVmlzdWFsKHQsImNvbG9yIix7Y29udmVydE9wYWNpdHlUb0FscGhhOiEwfSk7aC5zZXRTdHlsZSgiZmlsbCIsYyk7dmFyIGQ9aGwodS5pbmRpY2F0b3JMYWJlbFBvaW50LHVsKGgsdGhpcy5ncm91cCkpLGY9dS5pbmRpY2F0b3JMYWJlbDtmLmF0dHIoImludmlzaWJsZSIsITEpO3ZhciBwPXRoaXMuX2FwcGx5VHJhbnNmb3JtKCJsZWZ0Iix1LmJhckdyb3VwKSxnPXRoaXMuX29yaWVudDtmLnNldFN0eWxlKHt0ZXh0OihpfHwiIikrby5mb3JtYXRWYWx1ZVRleHQoZSksdGV4dFZlcnRpY2FsQWxpZ246Imhvcml6b250YWwiPT09Zz9wOiJtaWRkbGUiLHRleHRBbGlnbjoiaG9yaXpvbnRhbCI9PT1nPyJjZW50ZXIiOnAseDpkWzBdLHk6ZFsxXX0pfX0sX2VuYWJsZUhvdmVyTGlua1RvU2VyaWVzOmZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLl9zaGFwZXMuYmFyR3JvdXAub24oIm1vdXNlbW92ZSIsZnVuY3Rpb24odCl7aWYobi5faG92ZXJpbmc9ITAsIW4uX2RyYWdnaW5nKXt2YXIgZT1uLnZpc3VhbE1hcE1vZGVsLml0ZW1TaXplLGk9bi5fYXBwbHlUcmFuc2Zvcm0oW3Qub2Zmc2V0WCx0Lm9mZnNldFldLG4uX3NoYXBlcy5iYXJHcm91cCwhMCwhMCk7aVsxXT1JTChUTCgwLGlbMV0pLGVbMV0pLG4uX2RvSG92ZXJMaW5rVG9TZXJpZXMoaVsxXSwwPD1pWzBdJiZpWzBdPD1lWzBdKX19KS5vbigibW91c2VvdXQiLGZ1bmN0aW9uKCl7bi5faG92ZXJpbmc9ITEsbi5fZHJhZ2dpbmd8fG4uX2NsZWFySG92ZXJMaW5rVG9TZXJpZXMoKX0pfSxfZW5hYmxlSG92ZXJMaW5rRnJvbVNlcmllczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuYXBpLmdldFpyKCk7dGhpcy52aXN1YWxNYXBNb2RlbC5vcHRpb24uaG92ZXJMaW5rPyh0Lm9uKCJtb3VzZW92ZXIiLHRoaXMuX2hvdmVyTGlua0Zyb21TZXJpZXNNb3VzZU92ZXIsdGhpcyksdC5vbigibW91c2VvdXQiLHRoaXMuX2hpZGVJbmRpY2F0b3IsdGhpcykpOnRoaXMuX2NsZWFySG92ZXJMaW5rRnJvbVNlcmllcygpfSxfZG9Ib3ZlckxpbmtUb1NlcmllczpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMudmlzdWFsTWFwTW9kZWwsbj1pLml0ZW1TaXplO2lmKGkub3B0aW9uLmhvdmVyTGluayl7dmFyIG89WzAsblsxXV0sYT1pLmdldEV4dGVudCgpO3Q9SUwoVEwob1swXSx0KSxvWzFdKTt2YXIgcj1mdW5jdGlvbih0LGUsaSl7dmFyIG49NixvPXQuZ2V0KCJob3ZlckxpbmtEYXRhU2l6ZSIpO28mJihuPVNMKG8sZSxpLCEwKS8yKTtyZXR1cm4gbn0oaSxhLG8pLHM9W3Qtcix0K3JdLGw9U0wodCxvLGEsITApLHU9W1NMKHNbMF0sbyxhLCEwKSxTTChzWzFdLG8sYSwhMCldO3NbMF08b1swXSYmKHVbMF09LTEvMCksb1sxXTxzWzFdJiYodVsxXT0xLzApLGUmJih1WzBdPT09LTEvMD90aGlzLl9zaG93SW5kaWNhdG9yKGwsdVsxXSwiPCAiLHIpOnVbMV09PT0xLzA/dGhpcy5fc2hvd0luZGljYXRvcihsLHVbMF0sIj4gIixyKTp0aGlzLl9zaG93SW5kaWNhdG9yKGwsbCwi4omIICIscikpO3ZhciBoPXRoaXMuX2hvdmVyTGlua0RhdGFJbmRpY2VzLGM9W107KGV8fENMKGkpKSYmKGM9dGhpcy5faG92ZXJMaW5rRGF0YUluZGljZXM9aS5maW5kVGFyZ2V0RGF0YUluZGljZXModSkpO3ZhciBkPWZ1bmN0aW9uKHQsZSl7dmFyIGk9e30sbj17fTtyZXR1cm4gbyh0fHxbXSxpKSxvKGV8fFtdLG4saSksW2EoaSksYShuKV07ZnVuY3Rpb24gbyh0LGUsaSl7Zm9yKHZhciBuPTAsbz10Lmxlbmd0aDtuPG87bisrKWZvcih2YXIgYT10W25dLnNlcmllc0lkLHI9RW8odFtuXS5kYXRhSW5kZXgpLHM9aSYmaVthXSxsPTAsdT1yLmxlbmd0aDtsPHU7bCsrKXt2YXIgaD1yW2xdO3MmJnNbaF0/c1toXT1udWxsOihlW2FdfHwoZVthXT17fSkpW2hdPTF9fWZ1bmN0aW9uIGEodCxlKXt2YXIgaT1bXTtmb3IodmFyIG4gaW4gdClpZih0Lmhhc093blByb3BlcnR5KG4pJiZudWxsIT10W25dKWlmKGUpaS5wdXNoKCtuKTtlbHNle3ZhciBvPWEodFtuXSwhMCk7by5sZW5ndGgmJmkucHVzaCh7c2VyaWVzSWQ6bixkYXRhSW5kZXg6b30pfXJldHVybiBpfX0oaCxjKTt0aGlzLl9kaXNwYXRjaEhpZ2hEb3duKCJkb3ducGxheSIsYkwoZFswXSxpKSksdGhpcy5fZGlzcGF0Y2hIaWdoRG93bigiaGlnaGxpZ2h0IixiTChkWzFdLGkpKX19LF9ob3ZlckxpbmtGcm9tU2VyaWVzTW91c2VPdmVyOmZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0LGk9dGhpcy52aXN1YWxNYXBNb2RlbDtpZihlJiZudWxsIT1lLmRhdGFJbmRleCl7dmFyIG49dGhpcy5lY01vZGVsLmdldFNlcmllc0J5SW5kZXgoZS5zZXJpZXNJbmRleCk7aWYoaS5pc1RhcmdldFNlcmllcyhuKSl7dmFyIG89bi5nZXREYXRhKGUuZGF0YVR5cGUpLGE9by5nZXQoaS5nZXREYXRhRGltZW5zaW9uKG8pLGUuZGF0YUluZGV4LCEwKTtpc05hTihhKXx8dGhpcy5fc2hvd0luZGljYXRvcihhLGEpfX19LF9oaWRlSW5kaWNhdG9yOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc2hhcGVzO3QuaW5kaWNhdG9yJiZ0LmluZGljYXRvci5hdHRyKCJpbnZpc2libGUiLCEwKSx0LmluZGljYXRvckxhYmVsJiZ0LmluZGljYXRvckxhYmVsLmF0dHIoImludmlzaWJsZSIsITApfSxfY2xlYXJIb3ZlckxpbmtUb1NlcmllczpmdW5jdGlvbigpe3RoaXMuX2hpZGVJbmRpY2F0b3IoKTt2YXIgdD10aGlzLl9ob3ZlckxpbmtEYXRhSW5kaWNlczt0aGlzLl9kaXNwYXRjaEhpZ2hEb3duKCJkb3ducGxheSIsYkwodCx0aGlzLnZpc3VhbE1hcE1vZGVsKSksdC5sZW5ndGg9MH0sX2NsZWFySG92ZXJMaW5rRnJvbVNlcmllczpmdW5jdGlvbigpe3RoaXMuX2hpZGVJbmRpY2F0b3IoKTt2YXIgdD10aGlzLmFwaS5nZXRacigpO3Qub2ZmKCJtb3VzZW92ZXIiLHRoaXMuX2hvdmVyTGlua0Zyb21TZXJpZXNNb3VzZU92ZXIpLHQub2ZmKCJtb3VzZW91dCIsdGhpcy5faGlkZUluZGljYXRvcil9LF9hcHBseVRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSxuKXt2YXIgbz11bChlLG4/bnVsbDp0aGlzLmdyb3VwKTtyZXR1cm4geWxbayh0KT8iYXBwbHlUcmFuc2Zvcm0iOiJ0cmFuc2Zvcm1EaXJlY3Rpb24iXSh0LG8saSl9LF9kaXNwYXRjaEhpZ2hEb3duOmZ1bmN0aW9uKHQsZSl7ZSYmZS5sZW5ndGgmJnRoaXMuYXBpLmRpc3BhdGNoQWN0aW9uKHt0eXBlOnQsYmF0Y2g6ZX0pfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJIb3ZlckxpbmtGcm9tU2VyaWVzKCksdGhpcy5fY2xlYXJIb3ZlckxpbmtUb1NlcmllcygpfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckhvdmVyTGlua0Zyb21TZXJpZXMoKSx0aGlzLl9jbGVhckhvdmVyTGlua1RvU2VyaWVzKCl9fSk7ZnVuY3Rpb24gREwodCxlLGksbil7cmV0dXJuIG5ldyBxcih7c2hhcGU6e3BvaW50czp0fSxkcmFnZ2FibGU6ISFpLGN1cnNvcjplLGRyaWZ0Omksb25tb3VzZW1vdmU6ZnVuY3Rpb24odCl7V3QodC5ldmVudCl9LG9uZHJhZ2VuZDpufSl9ZnVuY3Rpb24gQ0wodCl7dmFyIGU9dC5nZXQoImhvdmVyTGlua09uSGFuZGxlIik7cmV0dXJuISEobnVsbD09ZT90LmdldCgicmVhbHRpbWUiKTplKX1mdW5jdGlvbiBMTCh0KXtyZXR1cm4idmVydGljYWwiPT09dD8ibnMtcmVzaXplIjoiZXctcmVzaXplIn1nZih7dHlwZToic2VsZWN0RGF0YVJhbmdlIixldmVudDoiZGF0YVJhbmdlU2VsZWN0ZWQiLHVwZGF0ZToidXBkYXRlIn0sZnVuY3Rpb24oZSx0KXt0LmVhY2hDb21wb25lbnQoe21haW5UeXBlOiJ2aXN1YWxNYXAiLHF1ZXJ5OmV9LGZ1bmN0aW9uKHQpe3Quc2V0U2VsZWN0ZWQoZS5zZWxlY3RlZCl9KX0pLGZmKGlMKTt2YXIga0w9bUwuZXh0ZW5kKHt0eXBlOiJ2aXN1YWxNYXAucGllY2V3aXNlIixkZWZhdWx0T3B0aW9uOntzZWxlY3RlZDpudWxsLG1pbk9wZW46ITEsbWF4T3BlbjohMSxhbGlnbjoiYXV0byIsaXRlbVdpZHRoOjIwLGl0ZW1IZWlnaHQ6MTQsaXRlbVN5bWJvbDoicm91bmRSZWN0IixwaWVjZUxpc3Q6bnVsbCxjYXRlZ29yaWVzOm51bGwsc3BsaXROdW1iZXI6NSxzZWxlY3RlZE1vZGU6Im11bHRpcGxlIixpdGVtR2FwOjEwLGhvdmVyTGluazohMCxzaG93TGFiZWw6bnVsbH0sb3B0aW9uVXBkYXRlZDpmdW5jdGlvbih0LGUpe2tMLnN1cGVyQXBwbHkodGhpcywib3B0aW9uVXBkYXRlZCIsYXJndW1lbnRzKSx0aGlzLl9waWVjZUxpc3Q9W10sdGhpcy5yZXNldEV4dGVudCgpO3ZhciBpPXRoaXMuX21vZGU9dGhpcy5fZGV0ZXJtaW5lTW9kZSgpO1BMW3RoaXMuX21vZGVdLmNhbGwodGhpcyksdGhpcy5fcmVzZXRTZWxlY3RlZCh0LGUpO3ZhciBuPXRoaXMub3B0aW9uLmNhdGVnb3JpZXM7dGhpcy5yZXNldFZpc3VhbChmdW5jdGlvbih0LGUpeyJjYXRlZ29yaWVzIj09PWk/KHQubWFwcGluZ01ldGhvZD0iY2F0ZWdvcnkiLHQuY2F0ZWdvcmllcz1EKG4pKToodC5kYXRhRXh0ZW50PXRoaXMuZ2V0RXh0ZW50KCksdC5tYXBwaW5nTWV0aG9kPSJwaWVjZXdpc2UiLHQucGllY2VMaXN0PU4odGhpcy5fcGllY2VMaXN0LGZ1bmN0aW9uKHQpe3Q9RCh0KTtyZXR1cm4iaW5SYW5nZSIhPT1lJiYodC52aXN1YWw9bnVsbCksdH0pKX0pfSxjb21wbGV0ZVZpc3VhbE9wdGlvbjpmdW5jdGlvbigpe3ZhciBuPXRoaXMub3B0aW9uLGk9e30sdD1hXy5saXN0VmlzdWFsVHlwZXMoKSxvPXRoaXMuaXNDYXRlZ29yeSgpO2Z1bmN0aW9uIGEodCxlLGkpe3JldHVybiB0JiZ0W2VdJiYoUih0W2VdKT90W2VdLmhhc093blByb3BlcnR5KGkpOnRbZV09PT1pKX1FKG4ucGllY2VzLGZ1bmN0aW9uKGUpe0UodCxmdW5jdGlvbih0KXtlLmhhc093blByb3BlcnR5KHQpJiYoaVt0XT0xKX0pfSksRShpLGZ1bmN0aW9uKHQsZSl7dmFyIGk9MDtFKHRoaXMuc3RhdGVMaXN0LGZ1bmN0aW9uKHQpe2l8PWEobix0LGUpfHxhKG4udGFyZ2V0LHQsZSl9LHRoaXMpLGl8fEUodGhpcy5zdGF0ZUxpc3QsZnVuY3Rpb24odCl7KG5bdF18fChuW3RdPXt9KSlbZV09bEwoZSwiaW5SYW5nZSI9PT10PyJhY3RpdmUiOiJpbmFjdGl2ZSIsbyl9KX0sdGhpcyksbUwucHJvdG90eXBlLmNvbXBsZXRlVmlzdWFsT3B0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sX3Jlc2V0U2VsZWN0ZWQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm9wdGlvbixuPXRoaXMuX3BpZWNlTGlzdCxvPShlP2k6dCkuc2VsZWN0ZWR8fHt9O2lmKGkuc2VsZWN0ZWQ9byxFKG4sZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldFNlbGVjdGVkTWFwS2V5KHQpO28uaGFzT3duUHJvcGVydHkoaSl8fChvW2ldPSEwKX0sdGhpcyksInNpbmdsZSI9PT1pLnNlbGVjdGVkTW9kZSl7dmFyIGE9ITE7RShuLGZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRTZWxlY3RlZE1hcEtleSh0KTtvW2ldJiYoYT9vW2ldPSExOmE9ITApfSx0aGlzKX19LGdldFNlbGVjdGVkTWFwS2V5OmZ1bmN0aW9uKHQpe3JldHVybiJjYXRlZ29yaWVzIj09PXRoaXMuX21vZGU/dC52YWx1ZSsiIjp0LmluZGV4KyIifSxnZXRQaWVjZUxpc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGllY2VMaXN0fSxfZGV0ZXJtaW5lTW9kZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uO3JldHVybiB0LnBpZWNlcyYmMDx0LnBpZWNlcy5sZW5ndGg/InBpZWNlcyI6dGhpcy5vcHRpb24uY2F0ZWdvcmllcz8iY2F0ZWdvcmllcyI6InNwbGl0TnVtYmVyIn0sc2V0U2VsZWN0ZWQ6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb24uc2VsZWN0ZWQ9RCh0KX0sZ2V0VmFsdWVTdGF0ZTpmdW5jdGlvbih0KXt2YXIgZT1hXy5maW5kUGllY2VJbmRleCh0LHRoaXMuX3BpZWNlTGlzdCk7cmV0dXJuIG51bGwhPWUmJnRoaXMub3B0aW9uLnNlbGVjdGVkW3RoaXMuZ2V0U2VsZWN0ZWRNYXBLZXkodGhpcy5fcGllY2VMaXN0W2VdKV0/ImluUmFuZ2UiOiJvdXRPZlJhbmdlIn0sZmluZFRhcmdldERhdGFJbmRpY2VzOmZ1bmN0aW9uKG4pe3ZhciBvPVtdO3JldHVybiB0aGlzLmVhY2hUYXJnZXRTZXJpZXMoZnVuY3Rpb24odCl7dmFyIGk9W10sZT10LmdldERhdGEoKTtlLmVhY2godGhpcy5nZXREYXRhRGltZW5zaW9uKGUpLGZ1bmN0aW9uKHQsZSl7YV8uZmluZFBpZWNlSW5kZXgodCx0aGlzLl9waWVjZUxpc3QpPT09biYmaS5wdXNoKGUpfSx0aGlzKSxvLnB1c2goe3Nlcmllc0lkOnQuaWQsZGF0YUluZGV4Oml9KX0sdGhpcyksb30sZ2V0UmVwcmVzZW50VmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU7aWYodGhpcy5pc0NhdGVnb3J5KCkpZT10LnZhbHVlO2Vsc2UgaWYobnVsbCE9dC52YWx1ZSllPXQudmFsdWU7ZWxzZXt2YXIgaT10LmludGVydmFsfHxbXTtlPWlbMF09PT0tMS8wJiZpWzFdPT09MS8wPzA6KGlbMF0raVsxXSkvMn1yZXR1cm4gZX0sZ2V0VmlzdWFsTWV0YTpmdW5jdGlvbihvKXtpZighdGhpcy5pc0NhdGVnb3J5KCkpe3ZhciBhPVtdLHI9W10scz10aGlzLHQ9dGhpcy5fcGllY2VMaXN0LnNsaWNlKCk7aWYodC5sZW5ndGgpe3ZhciBlPXRbMF0uaW50ZXJ2YWxbMF07ZSE9PS0xLzAmJnQudW5zaGlmdCh7aW50ZXJ2YWw6Wy0xLzAsZV19KSwoZT10W3QubGVuZ3RoLTFdLmludGVydmFsWzFdKSE9PTEvMCYmdC5wdXNoKHtpbnRlcnZhbDpbZSwxLzBdfSl9ZWxzZSB0LnB1c2goe2ludGVydmFsOlstMS8wLDEvMF19KTt2YXIgaT0tMS8wO3JldHVybiBFKHQsZnVuY3Rpb24odCl7dmFyIGU9dC5pbnRlcnZhbDtlJiYoZVswXT5pJiZuKFtpLGVbMF1dLCJvdXRPZlJhbmdlIiksbihlLnNsaWNlKCkpLGk9ZVsxXSl9LHRoaXMpLHtzdG9wczphLG91dGVyQ29sb3JzOnJ9fWZ1bmN0aW9uIG4odCxlKXt2YXIgaT1zLmdldFJlcHJlc2VudFZhbHVlKHtpbnRlcnZhbDp0fSk7ZT1lfHxzLmdldFZhbHVlU3RhdGUoaSk7dmFyIG49byhpLGUpO3RbMF09PT0tMS8wP3JbMF09bjp0WzFdPT09MS8wP3JbMV09bjphLnB1c2goe3ZhbHVlOnRbMF0sY29sb3I6bn0se3ZhbHVlOnRbMV0sY29sb3I6bn0pfX19KSxQTD17c3BsaXROdW1iZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbixlPXRoaXMuX3BpZWNlTGlzdCxpPU1hdGgubWluKHQucHJlY2lzaW9uLDIwKSxuPXRoaXMuZ2V0RXh0ZW50KCksbz10LnNwbGl0TnVtYmVyO289TWF0aC5tYXgocGFyc2VJbnQobywxMCksMSksdC5zcGxpdE51bWJlcj1vO2Zvcih2YXIgYT0oblsxXS1uWzBdKS9vOythLnRvRml4ZWQoaSkhPT1hJiZpPDU7KWkrKzt0LnByZWNpc2lvbj1pLGE9K2EudG9GaXhlZChpKTt2YXIgcj0wO3QubWluT3BlbiYmZS5wdXNoKHtpbmRleDpyKyssaW50ZXJ2YWw6Wy0xLzAsblswXV0sY2xvc2U6WzAsMF19KTtmb3IodmFyIHM9blswXSxsPXIrbztyPGw7cys9YSl7dmFyIHU9cj09PW8tMT9uWzFdOnMrYTtlLnB1c2goe2luZGV4OnIrKyxpbnRlcnZhbDpbcyx1XSxjbG9zZTpbMSwxXX0pfXQubWF4T3BlbiYmZS5wdXNoKHtpbmRleDpyKyssaW50ZXJ2YWw6W25bMV0sMS8wXSxjbG9zZTpbMCwwXX0pLFlsKGUpLEUoZSxmdW5jdGlvbih0KXt0LnRleHQ9dGhpcy5mb3JtYXRWYWx1ZVRleHQodC5pbnRlcnZhbCl9LHRoaXMpfSxjYXRlZ29yaWVzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb247RSh0LmNhdGVnb3JpZXMsZnVuY3Rpb24odCl7dGhpcy5fcGllY2VMaXN0LnB1c2goe3RleHQ6dGhpcy5mb3JtYXRWYWx1ZVRleHQodCwhMCksdmFsdWU6dH0pfSx0aGlzKSxOTCh0LHRoaXMuX3BpZWNlTGlzdCl9LHBpZWNlczpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uLGQ9dGhpcy5fcGllY2VMaXN0O0UodC5waWVjZXMsZnVuY3Rpb24odCxlKXtSKHQpfHwodD17dmFsdWU6dH0pO3ZhciBpPXt0ZXh0OiIiLGluZGV4OmV9O2lmKG51bGwhPXQubGFiZWwmJihpLnRleHQ9dC5sYWJlbCksdC5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSl7dmFyIG49aS52YWx1ZT10LnZhbHVlO2kuaW50ZXJ2YWw9W24sbl0saS5jbG9zZT1bMSwxXX1lbHNle2Zvcih2YXIgbz1pLmludGVydmFsPVtdLGE9aS5jbG9zZT1bMCwwXSxyPVsxLDAsMV0scz1bLTEvMCwxLzBdLGw9W10sdT0wO3U8Mjt1Kyspe2Zvcih2YXIgaD1bWyJndGUiLCJndCIsIm1pbiJdLFsibHRlIiwibHQiLCJtYXgiXV1bdV0sYz0wO2M8MyYmbnVsbD09b1t1XTtjKyspb1t1XT10W2hbY11dLGFbdV09cltjXSxsW3VdPTI9PT1jO251bGw9PW9bdV0mJihvW3VdPXNbdV0pfWxbMF0mJm9bMV09PT0xLzAmJihhWzBdPTApLGxbMV0mJm9bMF09PT0tMS8wJiYoYVsxXT0wKSxvWzBdPT09b1sxXSYmYVswXSYmYVsxXSYmKGkudmFsdWU9b1swXSl9aS52aXN1YWw9YV8ucmV0cmlldmVWaXN1YWxzKHQpLGQucHVzaChpKX0sdGhpcyksTkwodCxkKSxZbChkKSxFKGQsZnVuY3Rpb24odCl7dmFyIGU9dC5jbG9zZSxpPVtbIjwiLCLiiaQiXVtlWzFdXSxbIj4iLCLiiaUiXVtlWzBdXV07dC50ZXh0PXQudGV4dHx8dGhpcy5mb3JtYXRWYWx1ZVRleHQobnVsbCE9dC52YWx1ZT90LnZhbHVlOnQuaW50ZXJ2YWwsITEsaSl9LHRoaXMpfX07ZnVuY3Rpb24gTkwodCxlKXt2YXIgaT10LmludmVyc2U7KCJ2ZXJ0aWNhbCI9PT10Lm9yaWVudD8haTppKSYmZS5yZXZlcnNlKCl9X0wuZXh0ZW5kKHt0eXBlOiJ2aXN1YWxNYXAucGllY2V3aXNlIixkb1JlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ3JvdXA7YS5yZW1vdmVBbGwoKTt2YXIgcj10aGlzLnZpc3VhbE1hcE1vZGVsLHM9ci5nZXQoInRleHRHYXAiKSx0PXIudGV4dFN0eWxlTW9kZWwsbD10LmdldEZvbnQoKSx1PXQuZ2V0VGV4dENvbG9yKCksaD10aGlzLl9nZXRJdGVtQWxpZ24oKSxjPXIuaXRlbVNpemUsZT10aGlzLl9nZXRWaWV3RGF0YSgpLGk9ZS5lbmRzVGV4dCxkPVcoci5nZXQoInNob3dMYWJlbCIsITApLCFpKTtpJiZ0aGlzLl9yZW5kZXJFbmRzVGV4dChhLGlbMF0sYyxkLGgpLEUoZS52aWV3UGllY2VMaXN0LGZ1bmN0aW9uKHQpe3ZhciBlPXQucGllY2UsaT1uZXcgSWk7aS5vbmNsaWNrPUEodGhpcy5fb25JdGVtQ2xpY2ssdGhpcyxlKSx0aGlzLl9lbmFibGVIb3ZlckxpbmsoaSx0LmluZGV4SW5Nb2RlbFBpZWNlTGlzdCk7dmFyIG49ci5nZXRSZXByZXNlbnRWYWx1ZShlKTtpZih0aGlzLl9jcmVhdGVJdGVtU3ltYm9sKGksbixbMCwwLGNbMF0sY1sxXV0pLGQpe3ZhciBvPXRoaXMudmlzdWFsTWFwTW9kZWwuZ2V0VmFsdWVTdGF0ZShuKTtpLmFkZChuZXcgRnIoe3N0eWxlOnt4OiJyaWdodCI9PT1oPy1zOmNbMF0rcyx5OmNbMV0vMix0ZXh0OmUudGV4dCx0ZXh0VmVydGljYWxBbGlnbjoibWlkZGxlIix0ZXh0QWxpZ246aCx0ZXh0Rm9udDpsLHRleHRGaWxsOnUsb3BhY2l0eToib3V0T2ZSYW5nZSI9PT1vPy41OjF9fSkpfWEuYWRkKGkpfSx0aGlzKSxpJiZ0aGlzLl9yZW5kZXJFbmRzVGV4dChhLGlbMV0sYyxkLGgpLG11KHIuZ2V0KCJvcmllbnQiKSxhLHIuZ2V0KCJpdGVtR2FwIikpLHRoaXMucmVuZGVyQmFja2dyb3VuZChhKSx0aGlzLnBvc2l0aW9uR3JvdXAoYSl9LF9lbmFibGVIb3Zlckxpbms6ZnVuY3Rpb24odCxpKXtmdW5jdGlvbiBlKHQpe3ZhciBlPXRoaXMudmlzdWFsTWFwTW9kZWw7ZS5vcHRpb24uaG92ZXJMaW5rJiZ0aGlzLmFwaS5kaXNwYXRjaEFjdGlvbih7dHlwZTp0LGJhdGNoOmJMKGUuZmluZFRhcmdldERhdGFJbmRpY2VzKGkpLGUpfSl9dC5vbigibW91c2VvdmVyIixBKGUsdGhpcywiaGlnaGxpZ2h0IikpLm9uKCJtb3VzZW91dCIsQShlLHRoaXMsImRvd25wbGF5IikpfSxfZ2V0SXRlbUFsaWduOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52aXN1YWxNYXBNb2RlbCxlPXQub3B0aW9uO2lmKCJ2ZXJ0aWNhbCI9PT1lLm9yaWVudClyZXR1cm4gd0wodCx0aGlzLmFwaSx0Lml0ZW1TaXplKTt2YXIgaT1lLmFsaWduO3JldHVybiBpJiYiYXV0byIhPT1pfHwoaT0ibGVmdCIpLGl9LF9yZW5kZXJFbmRzVGV4dDpmdW5jdGlvbih0LGUsaSxuLG8pe2lmKGUpe3ZhciBhPW5ldyBJaSxyPXRoaXMudmlzdWFsTWFwTW9kZWwudGV4dFN0eWxlTW9kZWw7YS5hZGQobmV3IEZyKHtzdHlsZTp7eDpuPyJyaWdodCI9PT1vP2lbMF06MDppWzBdLzIseTppWzFdLzIsdGV4dFZlcnRpY2FsQWxpZ246Im1pZGRsZSIsdGV4dEFsaWduOm4/bzoiY2VudGVyIix0ZXh0OmUsdGV4dEZvbnQ6ci5nZXRGb250KCksdGV4dEZpbGw6ci5nZXRUZXh0Q29sb3IoKX19KSksdC5hZGQoYSl9fSxfZ2V0Vmlld0RhdGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZpc3VhbE1hcE1vZGVsLGU9Tih0LmdldFBpZWNlTGlzdCgpLGZ1bmN0aW9uKHQsZSl7cmV0dXJue3BpZWNlOnQsaW5kZXhJbk1vZGVsUGllY2VMaXN0OmV9fSksaT10LmdldCgidGV4dCIpLG49dC5nZXQoIm9yaWVudCIpLG89dC5nZXQoImludmVyc2UiKTtyZXR1cm4oImhvcml6b250YWwiPT09bj9vOiFvKT9lLnJldmVyc2UoKTppPWkmJmkuc2xpY2UoKS5yZXZlcnNlKCkse3ZpZXdQaWVjZUxpc3Q6ZSxlbmRzVGV4dDppfX0sX2NyZWF0ZUl0ZW1TeW1ib2w6ZnVuY3Rpb24odCxlLGkpe3QuYWRkKG1nKHRoaXMuZ2V0Q29udHJvbGxlclZpc3VhbChlLCJzeW1ib2wiKSxpWzBdLGlbMV0saVsyXSxpWzNdLHRoaXMuZ2V0Q29udHJvbGxlclZpc3VhbChlLCJjb2xvciIpKSl9LF9vbkl0ZW1DbGljazpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZpc3VhbE1hcE1vZGVsLGk9ZS5vcHRpb24sbj1EKGkuc2VsZWN0ZWQpLG89ZS5nZXRTZWxlY3RlZE1hcEtleSh0KTsic2luZ2xlIj09PWkuc2VsZWN0ZWRNb2RlPyhuW29dPSEwLEUobixmdW5jdGlvbih0LGUpe25bZV09ZT09PW99KSk6bltvXT0hbltvXSx0aGlzLmFwaS5kaXNwYXRjaEFjdGlvbih7dHlwZToic2VsZWN0RGF0YVJhbmdlIixmcm9tOnRoaXMudWlkLHZpc3VhbE1hcElkOnRoaXMudmlzdWFsTWFwTW9kZWwuaWQsc2VsZWN0ZWQ6bn0pfX0pO2ZmKGlMKTt2YXIgT0wsRUw9InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sIix6TD0idW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvdz9udWxsOndpbmRvdyxSTD0hMSxCTD16TCYmekwuZG9jdW1lbnQ7ZnVuY3Rpb24gVkwodCl7cmV0dXJuIE9MKHQpfWlmKEJMJiYhdi5jYW52YXNTdXBwb3J0ZWQpdHJ5e0JMLm5hbWVzcGFjZXMuenJ2bWx8fEJMLm5hbWVzcGFjZXMuYWRkKCJ6cnZtbCIsRUwpLE9MPWZ1bmN0aW9uKHQpe3JldHVybiBCTC5jcmVhdGVFbGVtZW50KCI8enJ2bWw6Iit0KycgY2xhc3M9Inpydm1sIj4nKX19Y2F0Y2godCl7T0w9ZnVuY3Rpb24odCl7cmV0dXJuIEJMLmNyZWF0ZUVsZW1lbnQoIjwiK3QrJyB4bWxucz0iJytFTCsnIiBjbGFzcz0ienJ2bWwiPicpfX12YXIgR0wsRkw9aXIuQ01ELFdMPU1hdGgucm91bmQsSEw9TWF0aC5zcXJ0LFpMPU1hdGguYWJzLFVMPU1hdGguY29zLFhMPU1hdGguc2luLFlMPU1hdGgubWF4O2lmKCF2LmNhbnZhc1N1cHBvcnRlZCl7dmFyIGpMPSIsIixxTD0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0IixLTD0yMTYwMCwkTD1LTC8yLEpMPWZ1bmN0aW9uKHQpe3Quc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowO3dpZHRoOjFweDtoZWlnaHQ6MXB4OyIsdC5jb29yZHNpemU9S0wrIiwiK0tMLHQuY29vcmRvcmlnaW49IjAsMCJ9LFFMPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4icmdiKCIrW3QsZSxpXS5qb2luKCIsIikrIikifSx0az1mdW5jdGlvbih0LGUpe2UmJnQmJmUucGFyZW50Tm9kZSE9PXQmJnQuYXBwZW5kQ2hpbGQoZSl9LGVrPWZ1bmN0aW9uKHQsZSl7ZSYmdCYmZS5wYXJlbnROb2RlPT09dCYmdC5yZW1vdmVDaGlsZChlKX0saWs9ZnVuY3Rpb24odCxlLGkpe3JldHVybiAxZTUqKHBhcnNlRmxvYXQodCl8fDApKzFlMyoocGFyc2VGbG9hdChlKXx8MCkraX0sbms9SG4sb2s9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPVJlKGUpO2k9K2ksaXNOYU4oaSkmJihpPTEpLG4mJih0LmNvbG9yPVFMKG5bMF0sblsxXSxuWzJdKSx0Lm9wYWNpdHk9aSpuWzNdKX0sYWs9ZnVuY3Rpb24odCxlLGksbil7dmFyIG89ImZpbGwiPT09ZSxhPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSlbMF07bnVsbCE9aVtlXSYmIm5vbmUiIT09aVtlXSYmKG98fCFvJiZpLmxpbmVXaWR0aCk/KHRbbz8iZmlsbGVkIjoic3Ryb2tlZCJdPSJ0cnVlIixpW2VdaW5zdGFuY2VvZiBzcyYmZWsodCxhKSxhPWF8fFZMKGUpLG8/ZnVuY3Rpb24odCxlLGkpe3ZhciBuLG8sYT1lLmZpbGw7aWYobnVsbCE9YSlpZihhIGluc3RhbmNlb2Ygc3Mpe3ZhciByLHM9MCxsPVswLDBdLHU9MCxoPTEsYz1pLmdldEJvdW5kaW5nUmVjdCgpLGQ9Yy53aWR0aCxmPWMuaGVpZ2h0O2lmKCJsaW5lYXIiPT09YS50eXBlKXtyPSJncmFkaWVudCI7dmFyIHA9aS50cmFuc2Zvcm0sZz1bYS54KmQsYS55KmZdLG09W2EueDIqZCxhLnkyKmZdO3AmJihidChnLGcscCksYnQobSxtLHApKTt2YXIgdj1tWzBdLWdbMF0seT1tWzFdLWdbMV07KHM9MTgwKk1hdGguYXRhbjIodix5KS9NYXRoLlBJKTwwJiYocys9MzYwKSxzPDFlLTYmJihzPTApfWVsc2V7cj0iZ3JhZGllbnRyYWRpYWwiO2c9W2EueCpkLGEueSpmXSxwPWkudHJhbnNmb3JtO3ZhciB4PWkuc2NhbGUsXz1kLHc9ZjtsPVsoZ1swXS1jLngpL18sKGdbMV0tYy55KS93XSxwJiZidChnLGcscCksXy89eFswXSpLTCx3Lz14WzFdKktMO3ZhciBiPVlMKF8sdyk7dT0wL2IsaD0yKmEuci9iLXV9dmFyIFM9YS5jb2xvclN0b3BzLnNsaWNlKCk7Uy5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQub2Zmc2V0LWUub2Zmc2V0fSk7Zm9yKHZhciBNPVMubGVuZ3RoLEk9W10sVD1bXSxBPTA7QTxNO0ErKyl7dmFyIEQ9U1tBXSxDPShuPUQuY29sb3Isdm9pZCAwLG89UmUobiksW1FMKG9bMF0sb1sxXSxvWzJdKSxvWzNdXSk7VC5wdXNoKEQub2Zmc2V0KmgrdSsiICIrQ1swXSksMCE9PUEmJkEhPT1NLTF8fEkucHVzaChDKX1pZigyPD1NKXt2YXIgTD1JWzBdWzBdLGs9SVsxXVswXSxQPUlbMF1bMV0qZS5vcGFjaXR5LE49SVsxXVsxXSplLm9wYWNpdHk7dC50eXBlPXIsdC5tZXRob2Q9Im5vbmUiLHQuZm9jdXM9IjEwMCUiLHQuYW5nbGU9cyx0LmNvbG9yPUwsdC5jb2xvcjI9ayx0LmNvbG9ycz1ULmpvaW4oIiwiKSx0Lm9wYWNpdHk9Tix0Lm9wYWNpdHkyPVB9InJhZGlhbCI9PT1yJiYodC5mb2N1c3Bvc2l0aW9uPWwuam9pbigiLCIpKX1lbHNlIG9rKHQsYSxlLm9wYWNpdHkpfShhLGksbik6ZnVuY3Rpb24odCxlKXtlLmxpbmVEYXNoJiYodC5kYXNoc3R5bGU9ZS5saW5lRGFzaC5qb2luKCIgIikpLG51bGw9PWUuc3Ryb2tlfHxlLnN0cm9rZSBpbnN0YW5jZW9mIHNzfHxvayh0LGUuc3Ryb2tlLGUub3BhY2l0eSl9KGEsaSksdGsodCxhKSk6KHRbbz8iZmlsbGVkIjoic3Ryb2tlZCJdPSJmYWxzZSIsZWsodCxhKSl9LHJrPVtbXSxbXSxbXV07U3IucHJvdG90eXBlLmJydXNoVk1MPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuc3R5bGUsaT10aGlzLl92bWxFbDtpfHwoaT1WTCgic2hhcGUiKSxKTChpKSx0aGlzLl92bWxFbD1pKSxhayhpLCJmaWxsIixlLHRoaXMpLGFrKGksInN0cm9rZSIsZSx0aGlzKTt2YXIgbj10aGlzLnRyYW5zZm9ybSxvPW51bGwhPW4sYT1pLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzdHJva2UiKVswXTtpZihhKXt2YXIgcj1lLmxpbmVXaWR0aDtpZihvJiYhZS5zdHJva2VOb1NjYWxlKXt2YXIgcz1uWzBdKm5bM10tblsxXSpuWzJdO3IqPUhMKFpMKHMpKX1hLndlaWdodD1yKyJweCJ9dmFyIGw9dGhpcy5wYXRofHwodGhpcy5wYXRoPW5ldyBpcik7dGhpcy5fX2RpcnR5UGF0aCYmKGwuYmVnaW5QYXRoKCksbC5zdWJQaXhlbE9wdGltaXplPSExLHRoaXMuYnVpbGRQYXRoKGwsdGhpcy5zaGFwZSksbC50b1N0YXRpYygpLHRoaXMuX19kaXJ0eVBhdGg9ITEpLGkucGF0aD1mdW5jdGlvbih0LGUpe3ZhciBpLG4sbyxhLHIscyxsPUZMLk0sdT1GTC5DLGg9RkwuTCxjPUZMLkEsZD1GTC5RLGY9W10scD10LmRhdGEsZz10LmxlbigpO2ZvcihhPTA7YTxnOyl7c3dpdGNoKG49IiIsaT0wLG89cFthKytdKXtjYXNlIGw6bj0iIG0gIixpPTEscj1wW2ErK10scz1wW2ErK10scmtbMF1bMF09cixya1swXVsxXT1zO2JyZWFrO2Nhc2UgaDpuPSIgbCAiLGk9MSxyPXBbYSsrXSxzPXBbYSsrXSxya1swXVswXT1yLHJrWzBdWzFdPXM7YnJlYWs7Y2FzZSBkOmNhc2UgdTpuPSIgYyAiLGk9Mzt2YXIgbSx2LHk9cFthKytdLHg9cFthKytdLF89cFthKytdLHc9cFthKytdO289PT1kPyhfPSgobT1fKSsyKnkpLzMsdz0oKHY9dykrMip4KS8zLHk9KHIrMip5KS8zLHg9KHMrMip4KS8zKToobT1wW2ErK10sdj1wW2ErK10pLHJrWzBdWzBdPXkscmtbMF1bMV09eCxya1sxXVswXT1fLHJrWzFdWzFdPXcscj1ya1syXVswXT1tLHM9cmtbMl1bMV09djticmVhaztjYXNlIGM6dmFyIGI9MCxTPTAsTT0xLEk9MSxUPTA7ZSYmKGI9ZVs0XSxTPWVbNV0sTT1ITChlWzBdKmVbMF0rZVsxXSplWzFdKSxJPUhMKGVbMl0qZVsyXStlWzNdKmVbM10pLFQ9TWF0aC5hdGFuMigtZVsxXS9JLGVbMF0vTSkpO3ZhciBBPXBbYSsrXSxEPXBbYSsrXSxDPXBbYSsrXSxMPXBbYSsrXSxrPXBbYSsrXStULFA9cFthKytdK2srVDthKys7dmFyIE49cFthKytdLE89QStVTChrKSpDLEU9RCtYTChrKSpMLHo9KHk9QStVTChQKSpDLHg9RCtYTChQKSpMLE4/IiB3YSAiOiIgYXQgIik7TWF0aC5hYnMoTy15KTwxZS00JiYoLjAxPE1hdGguYWJzKFAtayk/TiYmKE8rPS4wMTI1KTpNYXRoLmFicyhFLUQpPDFlLTQ/TiYmTzxBfHwhTiYmQTxPP3gtPS4wMTI1OngrPS4wMTI1Ok4mJkU8RHx8IU4mJkQ8RT95Kz0uMDEyNTp5LT0uMDEyNSksZi5wdXNoKHosV0woKChBLUMpKk0rYikqS0wtJEwpLGpMLFdMKCgoRC1MKSpJK1MpKktMLSRMKSxqTCxXTCgoKEErQykqTStiKSpLTC0kTCksakwsV0woKChEK0wpKkkrUykqS0wtJEwpLGpMLFdMKChPKk0rYikqS0wtJEwpLGpMLFdMKChFKkkrUykqS0wtJEwpLGpMLFdMKCh5Kk0rYikqS0wtJEwpLGpMLFdMKCh4KkkrUykqS0wtJEwpKSxyPXkscz14O2JyZWFrO2Nhc2UgRkwuUjp2YXIgUj1ya1swXSxCPXJrWzFdO1JbMF09cFthKytdLFJbMV09cFthKytdLEJbMF09UlswXStwW2ErK10sQlsxXT1SWzFdK3BbYSsrXSxlJiYoYnQoUixSLGUpLGJ0KEIsQixlKSksUlswXT1XTChSWzBdKktMLSRMKSxCWzBdPVdMKEJbMF0qS0wtJEwpLFJbMV09V0woUlsxXSpLTC0kTCksQlsxXT1XTChCWzFdKktMLSRMKSxmLnB1c2goIiBtICIsUlswXSxqTCxSWzFdLCIgbCAiLEJbMF0sakwsUlsxXSwiIGwgIixCWzBdLGpMLEJbMV0sIiBsICIsUlswXSxqTCxCWzFdKTticmVhaztjYXNlIEZMLlo6Zi5wdXNoKCIgeCAiKX1pZigwPGkpe2YucHVzaChuKTtmb3IodmFyIFY9MDtWPGk7VisrKXt2YXIgRz1ya1tWXTtlJiZidChHLEcsZSksZi5wdXNoKFdMKEdbMF0qS0wtJEwpLGpMLFdMKEdbMV0qS0wtJEwpLFY8aS0xP2pMOiIiKX19fXJldHVybiBmLmpvaW4oIiIpfShsLHRoaXMudHJhbnNmb3JtKSxpLnN0eWxlLnpJbmRleD1payh0aGlzLnpsZXZlbCx0aGlzLnosdGhpcy56MiksdGsodCxpKSxudWxsIT1lLnRleHQ/dGhpcy5kcmF3UmVjdFRleHQodCx0aGlzLmdldEJvdW5kaW5nUmVjdCgpKTp0aGlzLnJlbW92ZVJlY3RUZXh0KHQpfSxTci5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24odCl7ZWsodCx0aGlzLl92bWxFbCksdGhpcy5yZW1vdmVSZWN0VGV4dCh0KX0sU3IucHJvdG90eXBlLm9uQWRkPWZ1bmN0aW9uKHQpe3RrKHQsdGhpcy5fdm1sRWwpLHRoaXMuYXBwZW5kUmVjdFRleHQodCl9O3FuLnByb3RvdHlwZS5icnVzaFZNTD1mdW5jdGlvbih0KXt2YXIgZSxpLG49dGhpcy5zdHlsZSxvPW4uaW1hZ2U7aWYoZnVuY3Rpb24odCl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiB0JiZ0LnRhZ05hbWUmJiJJTUciPT09dC50YWdOYW1lLnRvVXBwZXJDYXNlKCl9KG8pKXt2YXIgYT1vLnNyYztpZihhPT09dGhpcy5faW1hZ2VTcmMpZT10aGlzLl9pbWFnZVdpZHRoLGk9dGhpcy5faW1hZ2VIZWlnaHQ7ZWxzZXt2YXIgcj1vLnJ1bnRpbWVTdHlsZSxzPXIud2lkdGgsbD1yLmhlaWdodDtyLndpZHRoPSJhdXRvIixyLmhlaWdodD0iYXV0byIsZT1vLndpZHRoLGk9by5oZWlnaHQsci53aWR0aD1zLHIuaGVpZ2h0PWwsdGhpcy5faW1hZ2VTcmM9YSx0aGlzLl9pbWFnZVdpZHRoPWUsdGhpcy5faW1hZ2VIZWlnaHQ9aX1vPWF9ZWxzZSBvPT09dGhpcy5faW1hZ2VTcmMmJihlPXRoaXMuX2ltYWdlV2lkdGgsaT10aGlzLl9pbWFnZUhlaWdodCk7aWYobyl7dmFyIHU9bi54fHwwLGg9bi55fHwwLGM9bi53aWR0aCxkPW4uaGVpZ2h0LGY9bi5zV2lkdGgscD1uLnNIZWlnaHQsZz1uLnN4fHwwLG09bi5zeXx8MCx2PWYmJnAseT10aGlzLl92bWxFbDt5fHwoeT1CTC5jcmVhdGVFbGVtZW50KCJkaXYiKSxKTCh5KSx0aGlzLl92bWxFbD15KTt2YXIgeCxfPXkuc3R5bGUsdz0hMSxiPTEsUz0xO2lmKHRoaXMudHJhbnNmb3JtJiYoeD10aGlzLnRyYW5zZm9ybSxiPUhMKHhbMF0qeFswXSt4WzFdKnhbMV0pLFM9SEwoeFsyXSp4WzJdK3hbM10qeFszXSksdz14WzFdfHx4WzJdKSx3KXt2YXIgTT1bdSxoXSxJPVt1K2MsaF0sVD1bdSxoK2RdLEE9W3UrYyxoK2RdO2J0KE0sTSx4KSxidChJLEkseCksYnQoVCxULHgpLGJ0KEEsQSx4KTt2YXIgRD1ZTChNWzBdLElbMF0sVFswXSxBWzBdKSxDPVlMKE1bMV0sSVsxXSxUWzFdLEFbMV0pLEw9W107TC5wdXNoKCJNMTE9Iix4WzBdL2IsakwsIk0xMj0iLHhbMl0vUyxqTCwiTTIxPSIseFsxXS9iLGpMLCJNMjI9Iix4WzNdL1MsakwsIkR4PSIsV0wodSpiK3hbNF0pLGpMLCJEeT0iLFdMKGgqUyt4WzVdKSksXy5wYWRkaW5nPSIwICIrV0woRCkrInB4ICIrV0woQykrInB4IDAiLF8uZmlsdGVyPXFMKyIuTWF0cml4KCIrTC5qb2luKCIiKSsiLCBTaXppbmdNZXRob2Q9Y2xpcCkifWVsc2UgeCYmKHU9dSpiK3hbNF0saD1oKlMreFs1XSksXy5maWx0ZXI9IiIsXy5sZWZ0PVdMKHUpKyJweCIsXy50b3A9V0woaCkrInB4Ijt2YXIgaz10aGlzLl9pbWFnZUVsLFA9dGhpcy5fY3JvcEVsO2t8fChrPUJMLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuX2ltYWdlRWw9ayk7dmFyIE49ay5zdHlsZTtpZih2KXtpZihlJiZpKU4ud2lkdGg9V0woYiplKmMvZikrInB4IixOLmhlaWdodD1XTChTKmkqZC9wKSsicHgiO2Vsc2V7dmFyIE89bmV3IEltYWdlLEU9dGhpcztPLm9ubG9hZD1mdW5jdGlvbigpe08ub25sb2FkPW51bGwsZT1PLndpZHRoLGk9Ty5oZWlnaHQsTi53aWR0aD1XTChiKmUqYy9mKSsicHgiLE4uaGVpZ2h0PVdMKFMqaSpkL3ApKyJweCIsRS5faW1hZ2VXaWR0aD1lLEUuX2ltYWdlSGVpZ2h0PWksRS5faW1hZ2VTcmM9b30sTy5zcmM9b31QfHwoKFA9QkwuY3JlYXRlRWxlbWVudCgiZGl2IikpLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iLHRoaXMuX2Nyb3BFbD1QKTt2YXIgej1QLnN0eWxlO3oud2lkdGg9V0woKGMrZypjL2YpKmIpLHouaGVpZ2h0PVdMKChkK20qZC9wKSpTKSx6LmZpbHRlcj1xTCsiLk1hdHJpeChEeD0iKy1nKmMvZipiKyIsRHk9IistbSpkL3AqUysiKSIsUC5wYXJlbnROb2RlfHx5LmFwcGVuZENoaWxkKFApLGsucGFyZW50Tm9kZSE9PVAmJlAuYXBwZW5kQ2hpbGQoayl9ZWxzZSBOLndpZHRoPVdMKGIqYykrInB4IixOLmhlaWdodD1XTChTKmQpKyJweCIseS5hcHBlbmRDaGlsZChrKSxQJiZQLnBhcmVudE5vZGUmJih5LnJlbW92ZUNoaWxkKFApLHRoaXMuX2Nyb3BFbD1udWxsKTt2YXIgUj0iIixCPW4ub3BhY2l0eTtCPDEmJihSKz0iLkFscGhhKG9wYWNpdHk9IitXTCgxMDAqQikrIikgIiksUis9cUwrIi5BbHBoYUltYWdlTG9hZGVyKHNyYz0iK28rIiwgU2l6aW5nTWV0aG9kPXNjYWxlKSIsTi5maWx0ZXI9Uix5LnN0eWxlLnpJbmRleD1payh0aGlzLnpsZXZlbCx0aGlzLnosdGhpcy56MiksdGsodCx5KSxudWxsIT1uLnRleHQmJnRoaXMuZHJhd1JlY3RUZXh0KHQsdGhpcy5nZXRCb3VuZGluZ1JlY3QoKSl9fSxxbi5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24odCl7ZWsodCx0aGlzLl92bWxFbCksdGhpcy5fdm1sRWw9bnVsbCx0aGlzLl9jcm9wRWw9bnVsbCx0aGlzLl9pbWFnZUVsPW51bGwsdGhpcy5yZW1vdmVSZWN0VGV4dCh0KX0scW4ucHJvdG90eXBlLm9uQWRkPWZ1bmN0aW9uKHQpe3RrKHQsdGhpcy5fdm1sRWwpLHRoaXMuYXBwZW5kUmVjdFRleHQodCl9O3ZhciBzayxsaz0ibm9ybWFsIix1az17fSxoaz0wLGNrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO0dMPWZ1bmN0aW9uKHQsZSl7dmFyIGk9Qkw7c2t8fCgoc2s9aS5jcmVhdGVFbGVtZW50KCJkaXYiKSkuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7dG9wOi0yMDAwMHB4O2xlZnQ6MDtwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOm5vbmU7d2hpdGUtc3BhY2U6cHJlOyIsQkwuYm9keS5hcHBlbmRDaGlsZChzaykpO3RyeXtzay5zdHlsZS5mb250PWV9Y2F0Y2godCl7fXJldHVybiBzay5pbm5lckhUTUw9IiIsc2suYXBwZW5kQ2hpbGQoaS5jcmVhdGVUZXh0Tm9kZSh0KSkse3dpZHRoOnNrLm9mZnNldFdpZHRofX0sdW5bIm1lYXN1cmVUZXh0Il09R0w7Zm9yKHZhciBkaz1uZXcgTWksZms9ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dGhpcy5zdHlsZTt0aGlzLl9fZGlydHkmJmtuKG8pO3ZhciBhPW8udGV4dDtpZihudWxsIT1hJiYoYSs9IiIpLGEpe2lmKG8ucmljaCl7dmFyIHI9d24oYSxvKTthPVtdO2Zvcih2YXIgcz0wO3M8ci5saW5lcy5sZW5ndGg7cysrKXtmb3IodmFyIGw9ci5saW5lc1tzXS50b2tlbnMsdT1bXSxoPTA7aDxsLmxlbmd0aDtoKyspdS5wdXNoKGxbaF0udGV4dCk7YS5wdXNoKHUuam9pbigiIikpfWE9YS5qb2luKCJcbiIpfXZhciBjLGQsZj1vLnRleHRBbGlnbixwPW8udGV4dFZlcnRpY2FsQWxpZ24sZz1mdW5jdGlvbih0KXt2YXIgZT11a1t0XTtpZighZSl7MTAwPGhrJiYoaGs9MCx1az17fSk7dmFyIGksbj1jay5zdHlsZTt0cnl7bi5mb250PXQsaT1uLmZvbnRGYW1pbHkuc3BsaXQoIiwiKVswXX1jYXRjaCh0KXt9ZT17c3R5bGU6bi5mb250U3R5bGV8fGxrLHZhcmlhbnQ6bi5mb250VmFyaWFudHx8bGssd2VpZ2h0Om4uZm9udFdlaWdodHx8bGssc2l6ZTowfHBhcnNlRmxvYXQobi5mb250U2l6ZXx8MTIpLGZhbWlseTppfHwiTWljcm9zb2Z0IFlhSGVpIn0sdWtbdF09ZSxoaysrfXJldHVybiBlfShvLmZvbnQpLG09Zy5zdHlsZSsiICIrZy52YXJpYW50KyIgIitnLndlaWdodCsiICIrZy5zaXplKydweCAiJytnLmZhbWlseSsnIic7aT1pfHxjbihhLG0sZixwLG8udGV4dFBhZGRpbmcsby50ZXh0TGluZUhlaWdodCk7dmFyIHY9dGhpcy50cmFuc2Zvcm07aWYodiYmIW4mJihkay5jb3B5KGUpLGRrLmFwcGx5VHJhbnNmb3JtKHYpLGU9ZGspLG4pYz1lLngsZD1lLnk7ZWxzZXt2YXIgeT1vLnRleHRQb3NpdGlvbjtpZih5IGluc3RhbmNlb2YgQXJyYXkpYz1lLngrbmsoeVswXSxlLndpZHRoKSxkPWUueStuayh5WzFdLGUuaGVpZ2h0KSxmPWZ8fCJsZWZ0IjtlbHNle3ZhciB4PXRoaXMuY2FsY3VsYXRlVGV4dFBvc2l0aW9uP3RoaXMuY2FsY3VsYXRlVGV4dFBvc2l0aW9uKHt9LG8sZSk6cG4oe30sbyxlKTtjPXgueCxkPXgueSxmPWZ8fHgudGV4dEFsaWduLHA9cHx8eC50ZXh0VmVydGljYWxBbGlnbn19Yz1kbihjLGkud2lkdGgsZiksZD1mbihkLGkuaGVpZ2h0LHApLGQrPWkuaGVpZ2h0LzI7dmFyIF8sdyxiLFM9VkwsTT10aGlzLl90ZXh0Vm1sRWw7TT93PShfPShiPU0uZmlyc3RDaGlsZCkubmV4dFNpYmxpbmcpLm5leHRTaWJsaW5nOihNPVMoImxpbmUiKSxfPVMoInBhdGgiKSx3PVMoInRleHRwYXRoIiksYj1TKCJza2V3Iiksdy5zdHlsZVsidi10ZXh0LWFsaWduIl09ImxlZnQiLEpMKE0pLF8udGV4dHBhdGhvaz0hMCx3Lm9uPSEwLE0uZnJvbT0iMCAwIixNLnRvPSIxMDAwIDAuMDUiLHRrKE0sYiksdGsoTSxfKSx0ayhNLHcpLHRoaXMuX3RleHRWbWxFbD1NKTt2YXIgST1bYyxkXSxUPU0uc3R5bGU7diYmbj8oYnQoSSxJLHYpLGIub249ITAsYi5tYXRyaXg9dlswXS50b0ZpeGVkKDMpK2pMK3ZbMl0udG9GaXhlZCgzKStqTCt2WzFdLnRvRml4ZWQoMykrakwrdlszXS50b0ZpeGVkKDMpKyIsMCwwIixiLm9mZnNldD0oV0woSVswXSl8fDApKyIsIisoV0woSVsxXSl8fDApLGIub3JpZ2luPSIwIDAiLFQubGVmdD0iMHB4IixULnRvcD0iMHB4Iik6KGIub249ITEsVC5sZWZ0PVdMKGMpKyJweCIsVC50b3A9V0woZCkrInB4Iiksdy5zdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuIFN0cmluZyh0KS5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvIi9nLCImcXVvdDsiKX0oYSk7dHJ5e3cuc3R5bGUuZm9udD1tfWNhdGNoKHQpe31hayhNLCJmaWxsIix7ZmlsbDpvLnRleHRGaWxsLG9wYWNpdHk6by5vcGFjaXR5fSx0aGlzKSxhayhNLCJzdHJva2UiLHtzdHJva2U6by50ZXh0U3Ryb2tlLG9wYWNpdHk6by5vcGFjaXR5LGxpbmVEYXNoOm8ubGluZURhc2h8fG51bGx9LHRoaXMpLE0uc3R5bGUuekluZGV4PWlrKHRoaXMuemxldmVsLHRoaXMueix0aGlzLnoyKSx0ayh0LE0pfX0scGs9ZnVuY3Rpb24odCl7ZWsodCx0aGlzLl90ZXh0Vm1sRWwpLHRoaXMuX3RleHRWbWxFbD1udWxsfSxnaz1mdW5jdGlvbih0KXt0ayh0LHRoaXMuX3RleHRWbWxFbCl9LG1rPVtYbixqbixxbixTcixGcl0sdms9MDt2azxtay5sZW5ndGg7dmsrKyl7dmFyIHlrPW1rW3ZrXS5wcm90b3R5cGU7eWsuZHJhd1JlY3RUZXh0PWZrLHlrLnJlbW92ZVJlY3RUZXh0PXBrLHlrLmFwcGVuZFJlY3RUZXh0PWdrfUZyLnByb3RvdHlwZS5icnVzaFZNTD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnN0eWxlO251bGwhPWUudGV4dD90aGlzLmRyYXdSZWN0VGV4dCh0LHt4OmUueHx8MCx5OmUueXx8MCx3aWR0aDowLGhlaWdodDowfSx0aGlzLmdldEJvdW5kaW5nUmVjdCgpLCEwKTp0aGlzLnJlbW92ZVJlY3RUZXh0KHQpfSxGci5wcm90b3R5cGUub25SZW1vdmU9ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVSZWN0VGV4dCh0KX0sRnIucHJvdG90eXBlLm9uQWRkPWZ1bmN0aW9uKHQpe3RoaXMuYXBwZW5kUmVjdFRleHQodCl9fWZ1bmN0aW9uIHhrKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX1mdW5jdGlvbiBfayh0LGUpeyFmdW5jdGlvbigpe2lmKCFSTCYmQkwpe1JMPSEwO3ZhciB0PUJMLnN0eWxlU2hlZXRzO3QubGVuZ3RoPDMxP0JMLmNyZWF0ZVN0eWxlU2hlZXQoKS5hZGRSdWxlKCIuenJ2bWwiLCJiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKSIpOnRbMF0uYWRkUnVsZSgiLnpydm1sIiwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTCkiKX19KCksdGhpcy5yb290PXQsdGhpcy5zdG9yYWdlPWU7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iiksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpLnN0eWxlLmNzc1RleHQ9ImRpc3BsYXk6aW5saW5lLWJsb2NrO292ZXJmbG93OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDozMDBweDtoZWlnaHQ6MTUwcHg7IixuLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDsiLHQuYXBwZW5kQ2hpbGQoaSksdGhpcy5fdm1sUm9vdD1uLHRoaXMuX3ZtbFZpZXdwb3J0PWksdGhpcy5yZXNpemUoKTt2YXIgbz1lLmRlbEZyb21TdG9yYWdlLGE9ZS5hZGRUb1N0b3JhZ2U7ZS5kZWxGcm9tU3RvcmFnZT1mdW5jdGlvbih0KXtvLmNhbGwoZSx0KSx0JiZ0Lm9uUmVtb3ZlJiZ0Lm9uUmVtb3ZlKG4pfSxlLmFkZFRvU3RvcmFnZT1mdW5jdGlvbih0KXt0Lm9uQWRkJiZ0Lm9uQWRkKG4pLGEuY2FsbChlLHQpfSx0aGlzLl9maXJzdFBhaW50PSEwfV9rLnByb3RvdHlwZT17Y29uc3RydWN0b3I6X2ssZ2V0VHlwZTpmdW5jdGlvbigpe3JldHVybiJ2bWwifSxnZXRWaWV3cG9ydFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm1sVmlld3BvcnR9LGdldFZpZXdwb3J0Um9vdE9mZnNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Vmlld3BvcnRSb290KCk7aWYodClyZXR1cm57b2Zmc2V0TGVmdDp0Lm9mZnNldExlZnR8fDAsb2Zmc2V0VG9wOnQub2Zmc2V0VG9wfHwwfX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3RvcmFnZS5nZXREaXNwbGF5TGlzdCghMCwhMCk7dGhpcy5fcGFpbnRMaXN0KHQpfSxfcGFpbnRMaXN0OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl92bWxSb290LGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXTtuLmludmlzaWJsZXx8bi5pZ25vcmU/KG4uX19hbHJlYWR5Tm90VmlzaWJsZXx8bi5vblJlbW92ZShlKSxuLl9fYWxyZWFkeU5vdFZpc2libGU9ITApOihuLl9fYWxyZWFkeU5vdFZpc2libGUmJm4ub25BZGQoZSksbi5fX2FscmVhZHlOb3RWaXNpYmxlPSExLG4uX19kaXJ0eSYmKG4uYmVmb3JlQnJ1c2gmJm4uYmVmb3JlQnJ1c2goKSwobi5icnVzaFZNTHx8bi5icnVzaCkuY2FsbChuLGUpLG4uYWZ0ZXJCcnVzaCYmbi5hZnRlckJydXNoKCkpKSxuLl9fZGlydHk9ITF9dGhpcy5fZmlyc3RQYWludCYmKHRoaXMuX3ZtbFZpZXdwb3J0LmFwcGVuZENoaWxkKGUpLHRoaXMuX2ZpcnN0UGFpbnQ9ITEpfSxyZXNpemU6ZnVuY3Rpb24odCxlKXt0PW51bGw9PXQ/dGhpcy5fZ2V0V2lkdGgoKTp0LGU9bnVsbD09ZT90aGlzLl9nZXRIZWlnaHQoKTplO2lmKHRoaXMuX3dpZHRoIT09dHx8dGhpcy5faGVpZ2h0IT09ZSl7dGhpcy5fd2lkdGg9dCx0aGlzLl9oZWlnaHQ9ZTt2YXIgaT10aGlzLl92bWxWaWV3cG9ydC5zdHlsZTtpLndpZHRoPXQrInB4IixpLmhlaWdodD1lKyJweCJ9fSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5yb290LmlubmVySFRNTD0iIix0aGlzLl92bWxSb290PXRoaXMuX3ZtbFZpZXdwb3J0PXRoaXMuc3RvcmFnZT1udWxsfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hlaWdodH0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl92bWxWaWV3cG9ydCYmdGhpcy5yb290LnJlbW92ZUNoaWxkKHRoaXMuX3ZtbFZpZXdwb3J0KX0sX2dldFdpZHRoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yb290LGU9dC5jdXJyZW50U3R5bGU7cmV0dXJuKHQuY2xpZW50V2lkdGh8fHhrKGUud2lkdGgpKS14ayhlLnBhZGRpbmdMZWZ0KS14ayhlLnBhZGRpbmdSaWdodCl8MH0sX2dldEhlaWdodDpmdW5jdGlvbigpe3ZhciB0PXRoaXMucm9vdCxlPXQuY3VycmVudFN0eWxlO3JldHVybih0LmNsaWVudEhlaWdodHx8eGsoZS5oZWlnaHQpKS14ayhlLnBhZGRpbmdUb3ApLXhrKGUucGFkZGluZ0JvdHRvbSl8MH19LEUoWyJnZXRMYXllciIsImluc2VydExheWVyIiwiZWFjaExheWVyIiwiZWFjaEJ1aWx0aW5MYXllciIsImVhY2hPdGhlckxheWVyIiwiZ2V0TGF5ZXJzIiwibW9kTGF5ZXIiLCJkZWxMYXllciIsImNsZWFyTGF5ZXIiLCJ0b0RhdGFVUkwiLCJwYXRoVG9JbWFnZSJdLGZ1bmN0aW9uKHQpe19rLnByb3RvdHlwZVt0XT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtmaSgnSW4gSUU4LjAgVk1MIG1vZGUgcGFpbnRlciBub3Qgc3VwcG9ydCBtZXRob2QgIicrdCsnIicpfX0odCl9KSxEbygidm1sIixfayk7ZnVuY3Rpb24gd2sodCl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHQpfXZhciBiaz1pci5DTUQsU2s9QXJyYXkucHJvdG90eXBlLmpvaW4sTWs9Im5vbmUiLElrPU1hdGgucm91bmQsVGs9TWF0aC5zaW4sQWs9TWF0aC5jb3MsRGs9TWF0aC5QSSxDaz0yKk1hdGguUEksTGs9MTgwL0RrLGtrPTFlLTQ7ZnVuY3Rpb24gUGsodCl7cmV0dXJuIElrKDFlNCp0KS8xZTR9ZnVuY3Rpb24gTmsodCl7cmV0dXJuIHQ8a2smJi1razx0fWZ1bmN0aW9uIE9rKHQsZSl7ZSYmRWsodCwidHJhbnNmb3JtIiwibWF0cml4KCIrU2suY2FsbChlLCIsIikrIikiKX1mdW5jdGlvbiBFayh0LGUsaSl7aSYmKCJsaW5lYXIiPT09aS50eXBlfHwicmFkaWFsIj09PWkudHlwZSl8fHQuc2V0QXR0cmlidXRlKGUsaSl9ZnVuY3Rpb24gemsodCxlLGksbil7aWYoZnVuY3Rpb24odCxlKXt2YXIgaT1lP3QudGV4dEZpbGw6dC5maWxsO3JldHVybiBudWxsIT1pJiZpIT09TWt9KGUsaSkpe3ZhciBvPWk/ZS50ZXh0RmlsbDplLmZpbGw7RWsodCwiZmlsbCIsbz0idHJhbnNwYXJlbnQiPT09bz9NazpvKSxFayh0LCJmaWxsLW9wYWNpdHkiLG51bGwhPWUuZmlsbE9wYWNpdHk/ZS5maWxsT3BhY2l0eSplLm9wYWNpdHk6ZS5vcGFjaXR5KX1lbHNlIEVrKHQsImZpbGwiLE1rKTtpZihmdW5jdGlvbih0LGUpe3ZhciBpPWU/dC50ZXh0U3Ryb2tlOnQuc3Ryb2tlO3JldHVybiBudWxsIT1pJiZpIT09TWt9KGUsaSkpe3ZhciBhPWk/ZS50ZXh0U3Ryb2tlOmUuc3Ryb2tlO0VrKHQsInN0cm9rZSIsYT0idHJhbnNwYXJlbnQiPT09YT9NazphKSxFayh0LCJzdHJva2Utd2lkdGgiLChpP2UudGV4dFN0cm9rZVdpZHRoOmUubGluZVdpZHRoKS8oIWkmJmUuc3Ryb2tlTm9TY2FsZT9uLmdldExpbmVTY2FsZSgpOjEpKSxFayh0LCJwYWludC1vcmRlciIsaT8ic3Ryb2tlIjoiZmlsbCIpLEVrKHQsInN0cm9rZS1vcGFjaXR5IixudWxsIT1lLnN0cm9rZU9wYWNpdHk/ZS5zdHJva2VPcGFjaXR5OmUub3BhY2l0eSksZS5saW5lRGFzaD8oRWsodCwic3Ryb2tlLWRhc2hhcnJheSIsZS5saW5lRGFzaC5qb2luKCIsIikpLEVrKHQsInN0cm9rZS1kYXNob2Zmc2V0IixJayhlLmxpbmVEYXNoT2Zmc2V0fHwwKSkpOkVrKHQsInN0cm9rZS1kYXNoYXJyYXkiLCIiKSxlLmxpbmVDYXAmJkVrKHQsInN0cm9rZS1saW5lY2FwIixlLmxpbmVDYXApLGUubGluZUpvaW4mJkVrKHQsInN0cm9rZS1saW5lam9pbiIsZS5saW5lSm9pbiksZS5taXRlckxpbWl0JiZFayh0LCJzdHJva2UtbWl0ZXJsaW1pdCIsZS5taXRlckxpbWl0KX1lbHNlIEVrKHQsInN0cm9rZSIsTWspfXZhciBSaz17fTtSay5icnVzaD1mdW5jdGlvbih0KXt2YXIgZT10LnN0eWxlLGk9dC5fX3N2Z0VsO2l8fChpPXdrKCJwYXRoIiksdC5fX3N2Z0VsPWkpLHQucGF0aHx8dC5jcmVhdGVQYXRoUHJveHkoKTt2YXIgbj10LnBhdGg7aWYodC5fX2RpcnR5UGF0aCl7bi5iZWdpblBhdGgoKSxuLnN1YlBpeGVsT3B0aW1pemU9ITEsdC5idWlsZFBhdGgobix0LnNoYXBlKSx0Ll9fZGlydHlQYXRoPSExO3ZhciBvPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxpPXQuZGF0YSxuPXQubGVuKCksbz0wO288bjspe3ZhciBhPSIiLHI9MDtzd2l0Y2goaVtvKytdKXtjYXNlIGJrLk06YT0iTSIscj0yO2JyZWFrO2Nhc2UgYmsuTDphPSJMIixyPTI7YnJlYWs7Y2FzZSBiay5ROmE9IlEiLHI9NDticmVhaztjYXNlIGJrLkM6YT0iQyIscj02O2JyZWFrO2Nhc2UgYmsuQTp2YXIgcz1pW28rK10sbD1pW28rK10sdT1pW28rK10saD1pW28rK10sYz1pW28rK10sZD1pW28rK10sZj1pW28rK10scD1pW28rK10sZz1NYXRoLmFicyhkKSxtPU5rKGctQ2spfHwocD9Dazw9ZDpDazw9LWQpLHY9MDxkP2QlQ2s6ZCVDaytDayx5PSExO3k9ISFtfHwhTmsoZykmJkRrPD12PT0hIXA7dmFyIHg9UGsocyt1KkFrKGMpKSxfPVBrKGwraCpUayhjKSk7bSYmKGQ9cD9Day0xZS00OjFlLTQtQ2sseT0hMCw5PT09byYmZS5wdXNoKCJNIix4LF8pKTt2YXIgdz1QayhzK3UqQWsoYytkKSksYj1QayhsK2gqVGsoYytkKSk7ZS5wdXNoKCJBIixQayh1KSxQayhoKSxJayhmKkxrKSwreSwrcCx3LGIpO2JyZWFrO2Nhc2UgYmsuWjphPSJaIjticmVhaztjYXNlIGJrLlI6dz1QayhpW28rK10pLGI9UGsoaVtvKytdKTt2YXIgUz1QayhpW28rK10pLE09UGsoaVtvKytdKTtlLnB1c2goIk0iLHcsYiwiTCIsdytTLGIsIkwiLHcrUyxiK00sIkwiLHcsYitNLCJMIix3LGIpfWEmJmUucHVzaChhKTtmb3IodmFyIEk9MDtJPHI7SSsrKWUucHVzaChQayhpW28rK10pKX1yZXR1cm4gZS5qb2luKCIgIil9KG4pO28uaW5kZXhPZigiTmFOIik8MCYmRWsoaSwiZCIsbyl9emsoaSxlLCExLHQpLE9rKGksdC50cmFuc2Zvcm0pLG51bGwhPWUudGV4dD9aayh0LHQuZ2V0Qm91bmRpbmdSZWN0KCkpOlhrKHQpfTt2YXIgQms9e2JydXNoOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc3R5bGUsaT1lLmltYWdlO2kgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50JiYoaT1pLnNyYyk7aWYoaSl7dmFyIG49ZS54fHwwLG89ZS55fHwwLGE9ZS53aWR0aCxyPWUuaGVpZ2h0LHM9dC5fX3N2Z0VsO3N8fChzPXdrKCJpbWFnZSIpLHQuX19zdmdFbD1zKSxpIT09dC5fX2ltYWdlU3JjJiYoZnVuY3Rpb24odCxlLGkpe3Quc2V0QXR0cmlidXRlTlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLGUsaSl9KHMsImhyZWYiLGkpLHQuX19pbWFnZVNyYz1pKSxFayhzLCJ3aWR0aCIsYSksRWsocywiaGVpZ2h0IixyKSxFayhzLCJ4IixuKSxFayhzLCJ5IixvKSxPayhzLHQudHJhbnNmb3JtKSxudWxsIT1lLnRleHQ/WmsodCx0LmdldEJvdW5kaW5nUmVjdCgpKTpYayh0KX19fSxWaz17fSxHaz1uZXcgTWksRms9e30sV2s9W10sSGs9e2xlZnQ6InN0YXJ0IixyaWdodDoiZW5kIixjZW50ZXI6Im1pZGRsZSIsbWlkZGxlOiJtaWRkbGUifSxaaz1mdW5jdGlvbih0LGUpe3ZhciBpPXQuc3R5bGUsbj10LnRyYW5zZm9ybSxvPXQgaW5zdGFuY2VvZiBGcnx8aS50cmFuc2Zvcm1UZXh0O3QuX19kaXJ0eSYma24oaSk7dmFyIGE9aS50ZXh0O2lmKG51bGwhPWEmJihhKz0iIiksVW4oYSxpKSl7bnVsbD09YSYmKGE9IiIpLCFvJiZuJiYoR2suY29weShlKSxHay5hcHBseVRyYW5zZm9ybShuKSxlPUdrKTt2YXIgcj10Ll9fdGV4dFN2Z0VsO3J8fChyPXdrKCJ0ZXh0IiksdC5fX3RleHRTdmdFbD1yKTt2YXIgcz1yLnN0eWxlLGw9aS5mb250fHxsbix1PXIuX19jb21wdXRlZEZvbnQ7bCE9PXIuX19zdHlsZUZvbnQmJihzLmZvbnQ9ci5fX3N0eWxlRm9udD1sLHU9ci5fX2NvbXB1dGVkRm9udD1zLmZvbnQpO3ZhciBoPWkudGV4dFBhZGRpbmcsYz1pLnRleHRMaW5lSGVpZ2h0LGQ9dC5fX3RleHRDb3RlbnRCbG9jaztkJiYhdC5fX2RpcnR5VGV4dHx8KGQ9dC5fX3RleHRDb3RlbnRCbG9jaz1fbihhLHUsaCxjLGkudHJ1bmNhdGUpKTt2YXIgZj1kLm91dGVySGVpZ2h0LHA9ZC5saW5lSGVpZ2h0O1ZuKEZrLHQsaSxlKTt2YXIgZz1Gay5iYXNlWCxtPUZrLmJhc2VZLHY9RmsudGV4dEFsaWdufHwibGVmdCIseT1Gay50ZXh0VmVydGljYWxBbGlnbjshZnVuY3Rpb24odCxlLGksbixvLGEscil7aWUoV2spLGUmJmkmJm5lKFdrLGkpO3ZhciBzPW4udGV4dFJvdGF0aW9uO2lmKG8mJnMpe3ZhciBsPW4udGV4dE9yaWdpbjsiY2VudGVyIj09PWw/KGE9by53aWR0aC8yK28ueCxyPW8uaGVpZ2h0LzIrby55KTpsJiYoYT1sWzBdK28ueCxyPWxbMV0rby55KSxXa1s0XS09YSxXa1s1XS09cixyZShXayxXayxzKSxXa1s0XSs9YSxXa1s1XSs9cn1Payh0LFdrKX0ocixvLG4saSxlLGcsbSk7dmFyIHg9ZyxfPWZuKG0sZix5KTtoJiYoeD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuInJpZ2h0Ij09PWU/dC1pWzFdOiJjZW50ZXIiPT09ZT90K2lbM10vMi1pWzFdLzI6dCtpWzNdfShnLHYsaCksXys9aFswXSksXys9cC8yLHprKHIsaSwhMCx0KTt2YXIgdz1kLmNhbkNhY2hlQnlUZXh0U3RyaW5nLGI9dC5fX3RzcGFuTGlzdHx8KHQuX190c3Bhbkxpc3Q9W10pLFM9Yi5sZW5ndGg7aWYodyYmdC5fX2NhbkNhY2hlQnlUZXh0U3RyaW5nJiZ0Ll9fdGV4dD09PWEpe2lmKHQuX19kaXJ0eVRleHQmJlMpZm9yKHZhciBNPTA7TTxTOysrTSlVayhiW01dLHYseCxfK00qcCl9ZWxzZXt0Ll9fdGV4dD1hLHQuX19jYW5DYWNoZUJ5VGV4dFN0cmluZz13O3ZhciBJPWQubGluZXMsVD1JLmxlbmd0aDtmb3IoTT0wO008VDtNKyspe3ZhciBBPWJbTV0sRD1JW01dO0E/QS5fX3pyVGV4dCE9PUQmJihBLmlubmVySFRNTD0iIixBLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKEQpKSk6KEE9YltNXT13aygidHNwYW4iKSxyLmFwcGVuZENoaWxkKEEpLEEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoRCkpKSxVayhBLHYseCxfK00qcCl9aWYoVDxTKXtmb3IoO008UztNKyspci5yZW1vdmVDaGlsZChiW01dKTtiLmxlbmd0aD1UfX19fTtmdW5jdGlvbiBVayh0LGUsaSxuKXtFayh0LCJkb21pbmFudC1iYXNlbGluZSIsIm1pZGRsZSIpLEVrKHQsInRleHQtYW5jaG9yIixIa1tlXSksRWsodCwieCIsaSksRWsodCwieSIsbil9ZnVuY3Rpb24gWGsodCl7dCYmdC5fX3RleHRTdmdFbCYmKHQuX190ZXh0U3ZnRWwucGFyZW50Tm9kZSYmdC5fX3RleHRTdmdFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQuX190ZXh0U3ZnRWwpLHQuX190ZXh0U3ZnRWw9bnVsbCx0Ll9fdHNwYW5MaXN0PVtdLHQuX190ZXh0PW51bGwpfWZ1bmN0aW9uIFlrKCl7fWZ1bmN0aW9uIGprKHQsZSl7Zm9yKHZhciBpPTAsbj1lLmxlbmd0aCxvPTAsYT0wO2k8bjtpKyspe3ZhciByPWVbaV07aWYoci5yZW1vdmVkKXtmb3Iocz1bXSxsPWE7bDxhK3IuY291bnQ7bCsrKXMucHVzaChsKTtyLmluZGljZXM9cyxhKz1yLmNvdW50fWVsc2V7Zm9yKHZhciBzPVtdLGw9bztsPG8rci5jb3VudDtsKyspcy5wdXNoKGwpO3IuaW5kaWNlcz1zLG8rPXIuY291bnQsci5hZGRlZHx8KGErPXIuY291bnQpfX1yZXR1cm4gZX1Way5kcmF3UmVjdFRleHQ9WmssVmsuYnJ1c2g9ZnVuY3Rpb24odCl7bnVsbCE9dC5zdHlsZS50ZXh0P1prKHQsITEpOlhrKHQpfSxZay5wcm90b3R5cGU9e2RpZmY6ZnVuY3Rpb24obCx1LHQpe3Q9dHx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWV9LHRoaXMuZXF1YWxzPXQ7dmFyIGg9dGhpcztsPWwuc2xpY2UoKTt2YXIgYz0odT11LnNsaWNlKCkpLmxlbmd0aCxkPWwubGVuZ3RoLGY9MSxlPWMrZCxwPVt7bmV3UG9zOi0xLGNvbXBvbmVudHM6W119XSxpPXRoaXMuZXh0cmFjdENvbW1vbihwWzBdLHUsbCwwKTtpZihwWzBdLm5ld1BvcysxPj1jJiZkPD1pKzEpe2Zvcih2YXIgbj1bXSxvPTA7bzx1Lmxlbmd0aDtvKyspbi5wdXNoKG8pO3JldHVyblt7aW5kaWNlczpuLGNvdW50OnUubGVuZ3RofV19ZnVuY3Rpb24gYSgpe2Zvcih2YXIgdD0tMSpmO3Q8PWY7dCs9Mil7dmFyIGUsaT1wW3QtMV0sbj1wW3QrMV0sbz0obj9uLm5ld1BvczowKS10O2kmJihwW3QtMV09dm9pZCAwKTt2YXIgYT1pJiZpLm5ld1BvcysxPGMscj1uJiYwPD1vJiZvPGQ7aWYoYXx8cil7aWYoIWF8fHImJmkubmV3UG9zPG4ubmV3UG9zPyhlPXtuZXdQb3M6KHM9bikubmV3UG9zLGNvbXBvbmVudHM6cy5jb21wb25lbnRzLnNsaWNlKDApfSxoLnB1c2hDb21wb25lbnQoZS5jb21wb25lbnRzLHZvaWQgMCwhMCkpOigoZT1pKS5uZXdQb3MrKyxoLnB1c2hDb21wb25lbnQoZS5jb21wb25lbnRzLCEwLHZvaWQgMCkpLG89aC5leHRyYWN0Q29tbW9uKGUsdSxsLHQpLGUubmV3UG9zKzE+PWMmJmQ8PW8rMSlyZXR1cm4gamsoaCxlLmNvbXBvbmVudHMsdSxsKTtwW3RdPWV9ZWxzZSBwW3RdPXZvaWQgMH12YXIgcztmKyt9Zm9yKDtmPD1lOyl7dmFyIHI9YSgpO2lmKHIpcmV0dXJuIHJ9fSxwdXNoQ29tcG9uZW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10W3QubGVuZ3RoLTFdO24mJm4uYWRkZWQ9PT1lJiZuLnJlbW92ZWQ9PT1pP3RbdC5sZW5ndGgtMV09e2NvdW50Om4uY291bnQrMSxhZGRlZDplLHJlbW92ZWQ6aX06dC5wdXNoKHtjb3VudDoxLGFkZGVkOmUscmVtb3ZlZDppfSl9LGV4dHJhY3RDb21tb246ZnVuY3Rpb24odCxlLGksbil7Zm9yKHZhciBvPWUubGVuZ3RoLGE9aS5sZW5ndGgscj10Lm5ld1BvcyxzPXItbixsPTA7cisxPG8mJnMrMTxhJiZ0aGlzLmVxdWFscyhlW3IrMV0saVtzKzFdKTspcisrLHMrKyxsKys7cmV0dXJuIGwmJnQuY29tcG9uZW50cy5wdXNoKHtjb3VudDpsfSksdC5uZXdQb3M9cixzfSx0b2tlbml6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5zbGljZSgpfSxqb2luOmZ1bmN0aW9uKHQpe3JldHVybiB0LnNsaWNlKCl9fTt2YXIgcWs9bmV3IFlrO2Z1bmN0aW9uIEtrKHQsZSxpLG4sbyl7dGhpcy5fenJJZD10LHRoaXMuX3N2Z1Jvb3Q9ZSx0aGlzLl90YWdOYW1lcz0ic3RyaW5nIj09dHlwZW9mIGk/W2ldOmksdGhpcy5fbWFya0xhYmVsPW4sdGhpcy5fZG9tTmFtZT1vfHwiX2RvbSIsdGhpcy5uZXh0SWQ9MH1mdW5jdGlvbiAkayh0LGUpe0trLmNhbGwodGhpcyx0LGUsWyJsaW5lYXJHcmFkaWVudCIsInJhZGlhbEdyYWRpZW50Il0sIl9fZ3JhZGllbnRfaW5fdXNlX18iKX1mdW5jdGlvbiBKayh0LGUpe0trLmNhbGwodGhpcyx0LGUsImNsaXBQYXRoIiwiX19jbGlwcGF0aF9pbl91c2VfXyIpfWZ1bmN0aW9uIFFrKHQsZSl7S2suY2FsbCh0aGlzLHQsZSxbImZpbHRlciJdLCJfX2ZpbHRlcl9pbl91c2VfXyIsIl9zaGFkb3dEb20iKX1mdW5jdGlvbiB0UCh0KXtyZXR1cm4gdCYmKHQuc2hhZG93Qmx1cnx8dC5zaGFkb3dPZmZzZXRYfHx0LnNoYWRvd09mZnNldFl8fHQudGV4dFNoYWRvd0JsdXJ8fHQudGV4dFNoYWRvd09mZnNldFh8fHQudGV4dFNoYWRvd09mZnNldFkpfWZ1bmN0aW9uIGVQKHQpe3JldHVybiBwYXJzZUludCh0LDEwKX1mdW5jdGlvbiBpUCh0LGUpe3JldHVybiBlJiZ0JiZlLnBhcmVudE5vZGUhPT10fWZ1bmN0aW9uIG5QKHQsZSxpKXtpZihpUCh0LGUpJiZpKXt2YXIgbj1pLm5leHRTaWJsaW5nO24/dC5pbnNlcnRCZWZvcmUoZSxuKTp0LmFwcGVuZENoaWxkKGUpfX1mdW5jdGlvbiBvUCh0LGUpe2lmKGlQKHQsZSkpe3ZhciBpPXQuZmlyc3RDaGlsZDtpP3QuaW5zZXJ0QmVmb3JlKGUsaSk6dC5hcHBlbmRDaGlsZChlKX19ZnVuY3Rpb24gYVAodCxlKXtlJiZ0JiZlLnBhcmVudE5vZGU9PT10JiZ0LnJlbW92ZUNoaWxkKGUpfWZ1bmN0aW9uIHJQKHQpe3JldHVybiB0Ll9fdGV4dFN2Z0VsfWZ1bmN0aW9uIHNQKHQpe3JldHVybiB0Ll9fc3ZnRWx9S2sucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQ9d2ssS2sucHJvdG90eXBlLmdldERlZnM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc3ZnUm9vdCxuPXRoaXMuX3N2Z1Jvb3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRlZnMiKTtyZXR1cm4gMD09PW4ubGVuZ3RoP3Q/KChuPWUuaW5zZXJ0QmVmb3JlKHRoaXMuY3JlYXRlRWxlbWVudCgiZGVmcyIpLGUuZmlyc3RDaGlsZCkpLmNvbnRhaW5zfHwobi5jb250YWlucz1mdW5jdGlvbih0KXt2YXIgZT1uLmNoaWxkcmVuO2lmKCFlKXJldHVybiExO2Zvcih2YXIgaT1lLmxlbmd0aC0xOzA8PWk7LS1pKWlmKGVbaV09PT10KXJldHVybiEwO3JldHVybiExfSksbik6bnVsbDpuWzBdfSxLay5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7aWYodCl7dmFyIGk9dGhpcy5nZXREZWZzKCExKTtpZih0W3RoaXMuX2RvbU5hbWVdJiZpLmNvbnRhaW5zKHRbdGhpcy5fZG9tTmFtZV0pKSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlKHQpO2Vsc2V7dmFyIG49dGhpcy5hZGQodCk7biYmKHRbdGhpcy5fZG9tTmFtZV09bil9fX0sS2sucHJvdG90eXBlLmFkZERvbT1mdW5jdGlvbih0KXt0aGlzLmdldERlZnMoITApLmFwcGVuZENoaWxkKHQpfSxLay5wcm90b3R5cGUucmVtb3ZlRG9tPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RGVmcyghMSk7ZSYmdFt0aGlzLl9kb21OYW1lXSYmKGUucmVtb3ZlQ2hpbGQodFt0aGlzLl9kb21OYW1lXSksdFt0aGlzLl9kb21OYW1lXT1udWxsKX0sS2sucHJvdG90eXBlLmdldERvbXM9ZnVuY3Rpb24oKXt2YXIgaT10aGlzLmdldERlZnMoITEpO2lmKCFpKXJldHVybltdO3ZhciBuPVtdO3JldHVybiBFKHRoaXMuX3RhZ05hbWVzLGZ1bmN0aW9uKHQpe3ZhciBlPWkuZ2V0RWxlbWVudHNCeVRhZ05hbWUodCk7bj1uLmNvbmNhdChbXS5zbGljZS5jYWxsKGUpKX0pLG59LEtrLnByb3RvdHlwZS5tYXJrQWxsVW51c2VkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXREb21zKCksZT10aGlzO0UodCxmdW5jdGlvbih0KXt0W2UuX21hcmtMYWJlbF09IjAifSl9LEtrLnByb3RvdHlwZS5tYXJrVXNlZD1mdW5jdGlvbih0KXt0JiYodFt0aGlzLl9tYXJrTGFiZWxdPSIxIil9LEtrLnByb3RvdHlwZS5yZW1vdmVVbnVzZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldERlZnMoITEpO2lmKGUpe3ZhciB0PXRoaXMuZ2V0RG9tcygpLGk9dGhpcztFKHQsZnVuY3Rpb24odCl7IjEiIT09dFtpLl9tYXJrTGFiZWxdJiZlLnJlbW92ZUNoaWxkKHQpfSl9fSxLay5wcm90b3R5cGUuZ2V0U3ZnUHJveHk9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBTcj9Sazp0IGluc3RhbmNlb2YgcW4/Qms6dCBpbnN0YW5jZW9mIEZyP1ZrOlJrfSxLay5wcm90b3R5cGUuZ2V0VGV4dFN2Z0VsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX190ZXh0U3ZnRWx9LEtrLnByb3RvdHlwZS5nZXRTdmdFbGVtZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fc3ZnRWx9LHcoJGssS2spLCRrLnByb3RvdHlwZS5hZGRXaXRob3V0VXBkYXRlPWZ1bmN0aW9uKGEscil7aWYociYmci5zdHlsZSl7dmFyIHM9dGhpcztFKFsiZmlsbCIsInN0cm9rZSJdLGZ1bmN0aW9uKHQpe2lmKHIuc3R5bGVbdF0mJigibGluZWFyIj09PXIuc3R5bGVbdF0udHlwZXx8InJhZGlhbCI9PT1yLnN0eWxlW3RdLnR5cGUpKXt2YXIgZSxpPXIuc3R5bGVbdF0sbj1zLmdldERlZnMoITApO2kuX2RvbT8oZT1pLl9kb20sbi5jb250YWlucyhpLl9kb20pfHxzLmFkZERvbShlKSk6ZT1zLmFkZChpKSxzLm1hcmtVc2VkKHIpO3ZhciBvPWUuZ2V0QXR0cmlidXRlKCJpZCIpO2Euc2V0QXR0cmlidXRlKHQsInVybCgjIitvKyIpIil9fSl9fSwkay5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlO2lmKCJsaW5lYXIiPT09dC50eXBlKWU9dGhpcy5jcmVhdGVFbGVtZW50KCJsaW5lYXJHcmFkaWVudCIpO2Vsc2V7aWYoInJhZGlhbCIhPT10LnR5cGUpcmV0dXJuIGZpKCJJbGxlZ2FsIGdyYWRpZW50IHR5cGUuIiksbnVsbDtlPXRoaXMuY3JlYXRlRWxlbWVudCgicmFkaWFsR3JhZGllbnQiKX1yZXR1cm4gdC5pZD10LmlkfHx0aGlzLm5leHRJZCsrLGUuc2V0QXR0cmlidXRlKCJpZCIsInpyIit0aGlzLl96cklkKyItZ3JhZGllbnQtIit0LmlkKSx0aGlzLnVwZGF0ZURvbSh0LGUpLHRoaXMuYWRkRG9tKGUpLGV9LCRrLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oaSl7dmFyIG49dGhpcztLay5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyxpLGZ1bmN0aW9uKCl7dmFyIHQ9aS50eXBlLGU9aS5fZG9tLnRhZ05hbWU7ImxpbmVhciI9PT10JiYibGluZWFyR3JhZGllbnQiPT09ZXx8InJhZGlhbCI9PT10JiYicmFkaWFsR3JhZGllbnQiPT09ZT9uLnVwZGF0ZURvbShpLGkuX2RvbSk6KG4ucmVtb3ZlRG9tKGkpLG4uYWRkKGkpKX0pfSwkay5wcm90b3R5cGUudXBkYXRlRG9tPWZ1bmN0aW9uKHQsZSl7aWYoImxpbmVhciI9PT10LnR5cGUpZS5zZXRBdHRyaWJ1dGUoIngxIix0LngpLGUuc2V0QXR0cmlidXRlKCJ5MSIsdC55KSxlLnNldEF0dHJpYnV0ZSgieDIiLHQueDIpLGUuc2V0QXR0cmlidXRlKCJ5MiIsdC55Mik7ZWxzZXtpZigicmFkaWFsIiE9PXQudHlwZSlyZXR1cm4gdm9pZCBmaSgiSWxsZWdhbCBncmFkaWVudCB0eXBlLiIpO2Uuc2V0QXR0cmlidXRlKCJjeCIsdC54KSxlLnNldEF0dHJpYnV0ZSgiY3kiLHQueSksZS5zZXRBdHRyaWJ1dGUoInIiLHQucil9dC5nbG9iYWw/ZS5zZXRBdHRyaWJ1dGUoImdyYWRpZW50VW5pdHMiLCJ1c2VyU3BhY2VPblVzZSIpOmUuc2V0QXR0cmlidXRlKCJncmFkaWVudFVuaXRzIiwib2JqZWN0Qm91bmRpbmdCb3giKSxlLmlubmVySFRNTD0iIjtmb3IodmFyIGk9dC5jb2xvclN0b3BzLG49MCxvPWkubGVuZ3RoO248bzsrK24pe3ZhciBhPXRoaXMuY3JlYXRlRWxlbWVudCgic3RvcCIpO2Euc2V0QXR0cmlidXRlKCJvZmZzZXQiLDEwMCppW25dLm9mZnNldCsiJSIpO3ZhciByPWlbbl0uY29sb3I7aWYoci5pbmRleE9mKCExKSl7dmFyIHM9UmUocilbM10sbD1HZShyKTthLnNldEF0dHJpYnV0ZSgic3RvcC1jb2xvciIsIiMiK2wpLGEuc2V0QXR0cmlidXRlKCJzdG9wLW9wYWNpdHkiLHMpfWVsc2UgYS5zZXRBdHRyaWJ1dGUoInN0b3AtY29sb3IiLGlbbl0uY29sb3IpO2UuYXBwZW5kQ2hpbGQoYSl9dC5fZG9tPWV9LCRrLnByb3RvdHlwZS5tYXJrVXNlZD1mdW5jdGlvbih0KXtpZih0LnN0eWxlKXt2YXIgZT10LnN0eWxlLmZpbGw7ZSYmZS5fZG9tJiZLay5wcm90b3R5cGUubWFya1VzZWQuY2FsbCh0aGlzLGUuX2RvbSksKGU9dC5zdHlsZS5zdHJva2UpJiZlLl9kb20mJktrLnByb3RvdHlwZS5tYXJrVXNlZC5jYWxsKHRoaXMsZS5fZG9tKX19LHcoSmssS2spLEprLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRTdmdFbGVtZW50KHQpO2UmJnRoaXMudXBkYXRlRG9tKGUsdC5fX2NsaXBQYXRocywhMSk7dmFyIGk9dGhpcy5nZXRUZXh0U3ZnRWxlbWVudCh0KTtpJiZ0aGlzLnVwZGF0ZURvbShpLHQuX19jbGlwUGF0aHMsITApLHRoaXMubWFya1VzZWQodCl9LEprLnByb3RvdHlwZS51cGRhdGVEb209ZnVuY3Rpb24odCxlLGkpe2lmKGUmJjA8ZS5sZW5ndGgpe3ZhciBuLG8sYT10aGlzLmdldERlZnMoITApLHI9ZVswXSxzPWk/Il90ZXh0RG9tIjoiX2RvbSI7cltzXT8obz1yW3NdLmdldEF0dHJpYnV0ZSgiaWQiKSxuPXJbc10sYS5jb250YWlucyhuKXx8YS5hcHBlbmRDaGlsZChuKSk6KG89InpyIit0aGlzLl96cklkKyItY2xpcC0iK3RoaXMubmV4dElkLCsrdGhpcy5uZXh0SWQsKG49dGhpcy5jcmVhdGVFbGVtZW50KCJjbGlwUGF0aCIpKS5zZXRBdHRyaWJ1dGUoImlkIixvKSxhLmFwcGVuZENoaWxkKG4pLHJbc109bik7dmFyIGw9dGhpcy5nZXRTdmdQcm94eShyKTtpZihyLnRyYW5zZm9ybSYmci5wYXJlbnQuaW52VHJhbnNmb3JtJiYhaSl7dmFyIHU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoci50cmFuc2Zvcm0pO29lKHIudHJhbnNmb3JtLHIucGFyZW50LmludlRyYW5zZm9ybSxyLnRyYW5zZm9ybSksbC5icnVzaChyKSxyLnRyYW5zZm9ybT11fWVsc2UgbC5icnVzaChyKTt2YXIgaD10aGlzLmdldFN2Z0VsZW1lbnQocik7bi5pbm5lckhUTUw9IiIsbi5hcHBlbmRDaGlsZChoLmNsb25lTm9kZSgpKSx0LnNldEF0dHJpYnV0ZSgiY2xpcC1wYXRoIiwidXJsKCMiK28rIikiKSwxPGUubGVuZ3RoJiZ0aGlzLnVwZGF0ZURvbShuLGUuc2xpY2UoMSksaSl9ZWxzZSB0JiZ0LnNldEF0dHJpYnV0ZSgiY2xpcC1wYXRoIiwibm9uZSIpfSxKay5wcm90b3R5cGUubWFya1VzZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0Ll9fY2xpcFBhdGhzJiZFKHQuX19jbGlwUGF0aHMsZnVuY3Rpb24odCl7dC5fZG9tJiZLay5wcm90b3R5cGUubWFya1VzZWQuY2FsbChlLHQuX2RvbSksdC5fdGV4dERvbSYmS2sucHJvdG90eXBlLm1hcmtVc2VkLmNhbGwoZSx0Ll90ZXh0RG9tKX0pfSx3KFFrLEtrKSxRay5wcm90b3R5cGUuYWRkV2l0aG91dFVwZGF0ZT1mdW5jdGlvbih0LGUpe2lmKGUmJnRQKGUuc3R5bGUpKXt2YXIgaTtpZihlLl9zaGFkb3dEb20paT1lLl9zaGFkb3dEb20sdGhpcy5nZXREZWZzKCEwKS5jb250YWlucyhlLl9zaGFkb3dEb20pfHx0aGlzLmFkZERvbShpKTtlbHNlIGk9dGhpcy5hZGQoZSk7dGhpcy5tYXJrVXNlZChlKTt2YXIgbj1pLmdldEF0dHJpYnV0ZSgiaWQiKTt0LnN0eWxlLmZpbHRlcj0idXJsKCMiK24rIikifX0sUWsucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNyZWF0ZUVsZW1lbnQoImZpbHRlciIpO3JldHVybiB0Ll9zaGFkb3dEb21JZD10Ll9zaGFkb3dEb21JZHx8dGhpcy5uZXh0SWQrKyxlLnNldEF0dHJpYnV0ZSgiaWQiLCJ6ciIrdGhpcy5fenJJZCsiLXNoYWRvdy0iK3QuX3NoYWRvd0RvbUlkKSx0aGlzLnVwZGF0ZURvbSh0LGUpLHRoaXMuYWRkRG9tKGUpLGV9LFFrLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXtpZih0UChlLnN0eWxlKSl7dmFyIGk9dGhpcztLay5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyxlLGZ1bmN0aW9uKCl7aS51cGRhdGVEb20oZSxlLl9zaGFkb3dEb20pfSl9ZWxzZSB0aGlzLnJlbW92ZSh0LGUpfSxRay5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQsZSl7bnVsbCE9ZS5fc2hhZG93RG9tSWQmJih0aGlzLnJlbW92ZURvbSh0KSx0LnN0eWxlLmZpbHRlcj0iIil9LFFrLnByb3RvdHlwZS51cGRhdGVEb209ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJmZURyb3BTaGFkb3ciKTtpPTA9PT1pLmxlbmd0aD90aGlzLmNyZWF0ZUVsZW1lbnQoImZlRHJvcFNoYWRvdyIpOmlbMF07dmFyIG4sbyxhLHIscz10LnN0eWxlLGw9dC5zY2FsZSYmdC5zY2FsZVswXXx8MSx1PXQuc2NhbGUmJnQuc2NhbGVbMV18fDE7aWYocy5zaGFkb3dCbHVyfHxzLnNoYWRvd09mZnNldFh8fHMuc2hhZG93T2Zmc2V0WSluPXMuc2hhZG93T2Zmc2V0WHx8MCxvPXMuc2hhZG93T2Zmc2V0WXx8MCxhPXMuc2hhZG93Qmx1cixyPXMuc2hhZG93Q29sb3I7ZWxzZXtpZighcy50ZXh0U2hhZG93Qmx1cilyZXR1cm4gdm9pZCB0aGlzLnJlbW92ZURvbShlLHMpO249cy50ZXh0U2hhZG93T2Zmc2V0WHx8MCxvPXMudGV4dFNoYWRvd09mZnNldFl8fDAsYT1zLnRleHRTaGFkb3dCbHVyLHI9cy50ZXh0U2hhZG93Q29sb3J9aS5zZXRBdHRyaWJ1dGUoImR4IixuL2wpLGkuc2V0QXR0cmlidXRlKCJkeSIsby91KSxpLnNldEF0dHJpYnV0ZSgiZmxvb2QtY29sb3IiLHIpO3ZhciBoPWEvMi9sKyIgIithLzIvdTtpLnNldEF0dHJpYnV0ZSgic3RkRGV2aWF0aW9uIixoKSxlLnNldEF0dHJpYnV0ZSgieCIsIi0xMDAlIiksZS5zZXRBdHRyaWJ1dGUoInkiLCItMTAwJSIpLGUuc2V0QXR0cmlidXRlKCJ3aWR0aCIsTWF0aC5jZWlsKGEvMioyMDApKyIlIiksZS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsTWF0aC5jZWlsKGEvMioyMDApKyIlIiksZS5hcHBlbmRDaGlsZChpKSx0Ll9zaGFkb3dEb209ZX0sUWsucHJvdG90eXBlLm1hcmtVc2VkPWZ1bmN0aW9uKHQpe3QuX3NoYWRvd0RvbSYmS2sucHJvdG90eXBlLm1hcmtVc2VkLmNhbGwodGhpcyx0Ll9zaGFkb3dEb20pfTtmdW5jdGlvbiBsUCh0LGUsaSxuKXt0aGlzLnJvb3Q9dCx0aGlzLnN0b3JhZ2U9ZSx0aGlzLl9vcHRzPWk9TCh7fSxpfHx7fSk7dmFyIG89d2soInN2ZyIpO28uc2V0QXR0cmlidXRlKCJ4bWxucyIsImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiksby5zZXRBdHRyaWJ1dGUoInZlcnNpb24iLCIxLjEiKSxvLnNldEF0dHJpYnV0ZSgiYmFzZVByb2ZpbGUiLCJmdWxsIiksby5zdHlsZS5jc3NUZXh0PSJ1c2VyLXNlbGVjdDpub25lO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDsiLHRoaXMuZ3JhZGllbnRNYW5hZ2VyPW5ldyAkayhuLG8pLHRoaXMuY2xpcFBhdGhNYW5hZ2VyPW5ldyBKayhuLG8pLHRoaXMuc2hhZG93TWFuYWdlcj1uZXcgUWsobixvKTt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTthLnN0eWxlLmNzc1RleHQ9Im92ZXJmbG93OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZSIsdGhpcy5fc3ZnUm9vdD1vLHRoaXMuX3ZpZXdwb3J0PWEsdC5hcHBlbmRDaGlsZChhKSxhLmFwcGVuZENoaWxkKG8pLHRoaXMucmVzaXplKGkud2lkdGgsaS5oZWlnaHQpLHRoaXMuX3Zpc2libGVMaXN0PVtdfWxQLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bFAsZ2V0VHlwZTpmdW5jdGlvbigpe3JldHVybiJzdmcifSxnZXRWaWV3cG9ydFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmlld3BvcnR9LGdldFZpZXdwb3J0Um9vdE9mZnNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Vmlld3BvcnRSb290KCk7aWYodClyZXR1cm57b2Zmc2V0TGVmdDp0Lm9mZnNldExlZnR8fDAsb2Zmc2V0VG9wOnQub2Zmc2V0VG9wfHwwfX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3RvcmFnZS5nZXREaXNwbGF5TGlzdCghMCk7dGhpcy5fcGFpbnRMaXN0KHQpfSxzZXRCYWNrZ3JvdW5kQ29sb3I6ZnVuY3Rpb24odCl7dGhpcy5fdmlld3BvcnQuc3R5bGUuYmFja2dyb3VuZD10fSxfcGFpbnRMaXN0OmZ1bmN0aW9uKHQpe3RoaXMuZ3JhZGllbnRNYW5hZ2VyLm1hcmtBbGxVbnVzZWQoKSx0aGlzLmNsaXBQYXRoTWFuYWdlci5tYXJrQWxsVW51c2VkKCksdGhpcy5zaGFkb3dNYW5hZ2VyLm1hcmtBbGxVbnVzZWQoKTt2YXIgZSxpLG49dGhpcy5fc3ZnUm9vdCxvPXRoaXMuX3Zpc2libGVMaXN0LGE9dC5sZW5ndGgscj1bXTtmb3IoZT0wO2U8YTtlKyspe3ZhciBzPXRbZV0sbD0oaT1zKWluc3RhbmNlb2YgU3I/Ums6aSBpbnN0YW5jZW9mIHFuP0JrOmkgaW5zdGFuY2VvZiBGcj9WazpSayx1PXNQKHMpfHxyUChzKTtzLmludmlzaWJsZXx8KHMuX19kaXJ0eSYmKGwmJmwuYnJ1c2gocyksdGhpcy5jbGlwUGF0aE1hbmFnZXIudXBkYXRlKHMpLHMuc3R5bGUmJih0aGlzLmdyYWRpZW50TWFuYWdlci51cGRhdGUocy5zdHlsZS5maWxsKSx0aGlzLmdyYWRpZW50TWFuYWdlci51cGRhdGUocy5zdHlsZS5zdHJva2UpLHRoaXMuc2hhZG93TWFuYWdlci51cGRhdGUodSxzKSkscy5fX2RpcnR5PSExKSxyLnB1c2gocykpfXZhciBoLGM9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBxay5kaWZmKHQsZSxpKX0obyxyKTtmb3IoZT0wO2U8Yy5sZW5ndGg7ZSsrKXtpZigocD1jW2VdKS5yZW1vdmVkKWZvcih2YXIgZD0wO2Q8cC5jb3VudDtkKyspe3U9c1Aocz1vW3AuaW5kaWNlc1tkXV0pO3ZhciBmPXJQKHMpO2FQKG4sdSksYVAobixmKX19Zm9yKGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIHA7aWYoKHA9Y1tlXSkuYWRkZWQpZm9yKGQ9MDtkPHAuY291bnQ7ZCsrKXt1PXNQKHM9cltwLmluZGljZXNbZF1dKSxmPXJQKHMpO2g/blAobix1LGgpOm9QKG4sdSksdT9uUChuLGYsdSk6aD9uUChuLGYsaCk6b1AobixmKSxuUChuLGYsdSksaD1mfHx1fHxoLHRoaXMuZ3JhZGllbnRNYW5hZ2VyLmFkZFdpdGhvdXRVcGRhdGUodXx8ZixzKSx0aGlzLnNoYWRvd01hbmFnZXIuYWRkV2l0aG91dFVwZGF0ZSh1fHxmLHMpLHRoaXMuY2xpcFBhdGhNYW5hZ2VyLm1hcmtVc2VkKHMpfWVsc2UgaWYoIXAucmVtb3ZlZClmb3IoZD0wO2Q8cC5jb3VudDtkKyspe3U9c1Aocz1yW3AuaW5kaWNlc1tkXV0pLGY9clAocyksdT1zUChzKSxmPXJQKHMpO3RoaXMuZ3JhZGllbnRNYW5hZ2VyLm1hcmtVc2VkKHMpLHRoaXMuZ3JhZGllbnRNYW5hZ2VyLmFkZFdpdGhvdXRVcGRhdGUodXx8ZixzKSx0aGlzLnNoYWRvd01hbmFnZXIubWFya1VzZWQocyksdGhpcy5zaGFkb3dNYW5hZ2VyLmFkZFdpdGhvdXRVcGRhdGUodXx8ZixzKSx0aGlzLmNsaXBQYXRoTWFuYWdlci5tYXJrVXNlZChzKSxmJiZuUChuLGYsdSksaD11fHxmfHxofX10aGlzLmdyYWRpZW50TWFuYWdlci5yZW1vdmVVbnVzZWQoKSx0aGlzLmNsaXBQYXRoTWFuYWdlci5yZW1vdmVVbnVzZWQoKSx0aGlzLnNoYWRvd01hbmFnZXIucmVtb3ZlVW51c2VkKCksdGhpcy5fdmlzaWJsZUxpc3Q9cn0sX2dldERlZnM6ZnVuY3Rpb24odCl7dmFyIG4sZT10aGlzLl9zdmdSb290O3JldHVybiAwIT09KG49dGhpcy5fc3ZnUm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGVmcyIpKS5sZW5ndGg/blswXTp0Pygobj1lLmluc2VydEJlZm9yZSh3aygiZGVmcyIpLGUuZmlyc3RDaGlsZCkpLmNvbnRhaW5zfHwobi5jb250YWlucz1mdW5jdGlvbih0KXt2YXIgZT1uLmNoaWxkcmVuO2lmKCFlKXJldHVybiExO2Zvcih2YXIgaT1lLmxlbmd0aC0xOzA8PWk7LS1pKWlmKGVbaV09PT10KXJldHVybiEwO3JldHVybiExfSksbik6bnVsbH0scmVzaXplOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fdmlld3BvcnQ7aS5zdHlsZS5kaXNwbGF5PSJub25lIjt2YXIgbj10aGlzLl9vcHRzO2lmKG51bGwhPXQmJihuLndpZHRoPXQpLG51bGwhPWUmJihuLmhlaWdodD1lKSx0PXRoaXMuX2dldFNpemUoMCksZT10aGlzLl9nZXRTaXplKDEpLGkuc3R5bGUuZGlzcGxheT0iIix0aGlzLl93aWR0aCE9PXR8fHRoaXMuX2hlaWdodCE9PWUpe3RoaXMuX3dpZHRoPXQsdGhpcy5faGVpZ2h0PWU7dmFyIG89aS5zdHlsZTtvLndpZHRoPXQrInB4IixvLmhlaWdodD1lKyJweCI7dmFyIGE9dGhpcy5fc3ZnUm9vdDthLnNldEF0dHJpYnV0ZSgid2lkdGgiLHQpLGEuc2V0QXR0cmlidXRlKCJoZWlnaHQiLGUpfX0sZ2V0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2lkdGh9LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWlnaHR9LF9nZXRTaXplOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX29wdHMsaT1bIndpZHRoIiwiaGVpZ2h0Il1bdF0sbj1bImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0Il1bdF0sbz1bInBhZGRpbmdMZWZ0IiwicGFkZGluZ1RvcCJdW3RdLGE9WyJwYWRkaW5nUmlnaHQiLCJwYWRkaW5nQm90dG9tIl1bdF07aWYobnVsbCE9ZVtpXSYmImF1dG8iIT09ZVtpXSlyZXR1cm4gcGFyc2VGbG9hdChlW2ldKTt2YXIgcj10aGlzLnJvb3Qscz1kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHIpO3JldHVybihyW25dfHxlUChzW2ldKXx8ZVAoci5zdHlsZVtpXSkpLShlUChzW29dKXx8MCktKGVQKHNbYV0pfHwwKXwwfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5yb290LmlubmVySFRNTD0iIix0aGlzLl9zdmdSb290PXRoaXMuX3ZpZXdwb3J0PXRoaXMuc3RvcmFnZT1udWxsfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuX3ZpZXdwb3J0JiZ0aGlzLnJvb3QucmVtb3ZlQ2hpbGQodGhpcy5fdmlld3BvcnQpfSxwYXRoVG9EYXRhVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVmcmVzaCgpLCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD1VVEYtOCwiK3RoaXMuX3N2Z1Jvb3Qub3V0ZXJIVE1MfX0sRShbImdldExheWVyIiwiaW5zZXJ0TGF5ZXIiLCJlYWNoTGF5ZXIiLCJlYWNoQnVpbHRpbkxheWVyIiwiZWFjaE90aGVyTGF5ZXIiLCJnZXRMYXllcnMiLCJtb2RMYXllciIsImRlbExheWVyIiwiY2xlYXJMYXllciIsInRvRGF0YVVSTCIsInBhdGhUb0ltYWdlIl0sZnVuY3Rpb24odCl7bFAucHJvdG90eXBlW3RdPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe2ZpKCdJbiBTVkcgbW9kZSBwYWludGVyIG5vdCBzdXBwb3J0IG1ldGhvZCAiJyt0KyciJyl9fSh0KX0pLERvKCJzdmciLGxQKSx0LnZlcnNpb249IjQuNi4wIix0LmRlcGVuZGVuY2llcz17enJlbmRlcjoiNC4yLjAifSx0LlBSSU9SSVRZPUlkLHQuaW5pdD1mdW5jdGlvbih0LGUsaSl7dmFyIG49Y2YodCk7aWYobilyZXR1cm4gbjt2YXIgbz1uZXcga2QodCxlLGkpO3JldHVybiBvLmlkPSJlY18iK3JmKyssb2Zbby5pZF09byxqbyh0LGxmLG8uaWQpLGZ1bmN0aW9uKG4pe3ZhciBvPSJfX2Nvbm5lY3RVcGRhdGVTdGF0dXMiO2Z1bmN0aW9uIGEodCxlKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7dFtpXVtvXT1lfX13ZChLZCxmdW5jdGlvbih0LGUpe24uX21lc3NhZ2VDZW50ZXIub24oZSxmdW5jdGlvbih0KXtpZihhZltuLmdyb3VwXSYmMCE9PW5bb10pe2lmKHQmJnQuZXNjYXBlQ29ubmVjdClyZXR1cm47dmFyIGU9bi5tYWtlQWN0aW9uRnJvbUV2ZW50KHQpLGk9W107d2Qob2YsZnVuY3Rpb24odCl7dCE9PW4mJnQuZ3JvdXA9PT1uLmdyb3VwJiZpLnB1c2godCl9KSxhKGksMCksd2QoaSxmdW5jdGlvbih0KXsxIT09dFtvXSYmdC5kaXNwYXRjaEFjdGlvbihlKX0pLGEoaSwyKX19KX0pfShvKSxvfSx0LmNvbm5lY3Q9ZnVuY3Rpb24oZSl7aWYoayhlKSl7dmFyIHQ9ZTtlPW51bGwsd2QodCxmdW5jdGlvbih0KXtudWxsIT10Lmdyb3VwJiYoZT10Lmdyb3VwKX0pLGU9ZXx8ImdfIitzZisrLHdkKHQsZnVuY3Rpb24odCl7dC5ncm91cD1lfSl9cmV0dXJuIGFmW2VdPSEwLGV9LHQuZGlzQ29ubmVjdD11Zix0LmRpc2Nvbm5lY3Q9aGYsdC5kaXNwb3NlPWZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgdD90PW9mW3RdOnQgaW5zdGFuY2VvZiBrZHx8KHQ9Y2YodCkpLHQgaW5zdGFuY2VvZiBrZCYmIXQuaXNEaXNwb3NlZCgpJiZ0LmRpc3Bvc2UoKX0sdC5nZXRJbnN0YW5jZUJ5RG9tPWNmLHQuZ2V0SW5zdGFuY2VCeUlkPWZ1bmN0aW9uKHQpe3JldHVybiBvZlt0XX0sdC5yZWdpc3RlclRoZW1lPWRmLHQucmVnaXN0ZXJQcmVwcm9jZXNzb3I9ZmYsdC5yZWdpc3RlclByb2Nlc3Nvcj1wZix0LnJlZ2lzdGVyUG9zdFVwZGF0ZT1mdW5jdGlvbih0KXtRZC5wdXNoKHQpfSx0LnJlZ2lzdGVyQWN0aW9uPWdmLHQucmVnaXN0ZXJDb29yZGluYXRlU3lzdGVtPW1mLHQuZ2V0Q29vcmRpbmF0ZVN5c3RlbURpbWVuc2lvbnM9ZnVuY3Rpb24odCl7dmFyIGU9bmguZ2V0KHQpO2lmKGUpcmV0dXJuIGUuZ2V0RGltZW5zaW9uc0luZm8/ZS5nZXREaW1lbnNpb25zSW5mbygpOmUuZGltZW5zaW9ucy5zbGljZSgpfSx0LnJlZ2lzdGVyTGF5b3V0PXZmLHQucmVnaXN0ZXJWaXN1YWw9eWYsdC5yZWdpc3RlckxvYWRpbmc9X2YsdC5leHRlbmRDb21wb25lbnRNb2RlbD13Zix0LmV4dGVuZENvbXBvbmVudFZpZXc9YmYsdC5leHRlbmRTZXJpZXNNb2RlbD1TZix0LmV4dGVuZENoYXJ0Vmlldz1NZix0LnNldENhbnZhc0NyZWF0b3I9ZnVuY3Rpb24odCl7ZigiY3JlYXRlQ2FudmFzIix0KX0sdC5yZWdpc3Rlck1hcD1mdW5jdGlvbih0LGUsaSl7eWQucmVnaXN0ZXJNYXAodCxlLGkpfSx0LmdldE1hcD1mdW5jdGlvbih0KXt2YXIgZT15ZC5yZXRyaWV2ZU1hcCh0KTtyZXR1cm4gZSYmZVswXSYme2dlb0pzb246ZVswXS5nZW9KU09OLHNwZWNpYWxBcmVhczplWzBdLnNwZWNpYWxBcmVhc319LHQuZGF0YVRvb2w9e30sdC56cmVuZGVyPUxvLHQubnVtYmVyPXFsLHQuZm9ybWF0PWN1LHQudGhyb3R0bGU9SWMsdC5oZWxwZXI9eWcsdC5tYXRyaXg9aGUsdC52ZWN0b3I9SXQsdC5jb2xvcj1qZSx0LnBhcnNlR2VvSlNPTj1NZyx0LnBhcnNlR2VvSnNvbj1SZyx0LnV0aWw9QmcsdC5ncmFwaGljPVZnLHQuTGlzdD1XZix0Lk1vZGVsPUlsLHQuQXhpcz1FZyx0LmVudj12fSk7Cg=="},{"meta":{"name":"layer.js","url":"https://lib.baomitu.com/layer/2.3/layer.js","ts":1591001487157,"mimetype":"text/javascript"},"source":"LyohIGxheWVyLXYyLjMg5by55bGC57uE5Lu2IExpY2Vuc2UgTEdQTCAgaHR0cDovL2xheWVyLmxheXVpLmNvbS8gQnkg6LSk5b+DICovCjshZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7dmFyIGMsZCxlPXtnZXRQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuc2NyaXB0cyxiPWFbYS5sZW5ndGgtMV0sYz1iLnNyYztpZighYi5nZXRBdHRyaWJ1dGUoIm1lcmdlIikpcmV0dXJuIGMuc3Vic3RyaW5nKDAsYy5sYXN0SW5kZXhPZigiLyIpKzEpfSgpLGVudGVyOmZ1bmN0aW9uKGEpezEzPT09YS5rZXlDb2RlJiZhLnByZXZlbnREZWZhdWx0KCl9LGNvbmZpZzp7fSxlbmQ6e30sYnRuOlsiJiN4Nzg2RTsmI3g1QjlBOyIsIiYjeDUzRDY7JiN4NkQ4ODsiXSx0eXBlOlsiZGlhbG9nIiwicGFnZSIsImlmcmFtZSIsImxvYWRpbmciLCJ0aXBzIl19LGY9e3Y6IjIuMyIsaWU2OiEhYS5BY3RpdmVYT2JqZWN0JiYhYS5YTUxIdHRwUmVxdWVzdCxpbmRleDowLHBhdGg6ZS5nZXRQYXRoLGNvbmZpZzpmdW5jdGlvbihhLGIpe3ZhciBkPTA7cmV0dXJuIGE9YXx8e30sZi5jYWNoZT1lLmNvbmZpZz1jLmV4dGVuZChlLmNvbmZpZyxhKSxmLnBhdGg9ZS5jb25maWcucGF0aHx8Zi5wYXRoLCJzdHJpbmciPT10eXBlb2YgYS5leHRlbmQmJihhLmV4dGVuZD1bYS5leHRlbmRdKSxmLnVzZSgic2tpbi9sYXllci5jc3MiLGEuZXh0ZW5kJiZhLmV4dGVuZC5sZW5ndGg+MD9mdW5jdGlvbiBnKCl7dmFyIGM9YS5leHRlbmQ7Zi51c2UoY1tjW2RdP2Q6ZC0xXSxkPGMubGVuZ3RoP2Z1bmN0aW9uKCl7cmV0dXJuKytkLGd9KCk6Yil9KCk6YiksdGhpc30sdXNlOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1jKCJoZWFkIilbMF0sYT1hLnJlcGxhY2UoL1xzL2csIiIpLGc9L1wuY3NzJC8udGVzdChhKSxoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZz8ibGluayI6InNjcmlwdCIpLGk9ImxheXVpX2xheWVyXyIrYS5yZXBsYWNlKC9cLnxcLy9nLCIiKTtyZXR1cm4gZi5wYXRoPyhnJiYoaC5yZWw9InN0eWxlc2hlZXQiKSxoW2c/ImhyZWYiOiJzcmMiXT0vXmh0dHA6XC9cLy8udGVzdChhKT9hOmYucGF0aCthLGguaWQ9aSxjKCIjIitpKVswXXx8ZS5hcHBlbmRDaGlsZChoKSxmdW5jdGlvbiBqKCl7KGc/MTk4OT09PXBhcnNlSW50KGMoIiMiK2kpLmNzcygid2lkdGgiKSk6ZltkfHxpXSk/ZnVuY3Rpb24oKXtiJiZiKCk7dHJ5e2d8fGUucmVtb3ZlQ2hpbGQoaCl9Y2F0Y2goYSl7fX0oKTpzZXRUaW1lb3V0KGosMTAwKX0oKSx0aGlzKTp2b2lkIDB9LHJlYWR5OmZ1bmN0aW9uKGEsYil7dmFyIGQ9ImZ1bmN0aW9uIj09dHlwZW9mIGE7cmV0dXJuIGQmJihiPWEpLGYuY29uZmlnKGMuZXh0ZW5kKGUuY29uZmlnLGZ1bmN0aW9uKCl7cmV0dXJuIGQ/e306e3BhdGg6YX19KCkpLGIpLHRoaXN9LGFsZXJ0OmZ1bmN0aW9uKGEsYixkKXt2YXIgZT0iZnVuY3Rpb24iPT10eXBlb2YgYjtyZXR1cm4gZSYmKGQ9YiksZi5vcGVuKGMuZXh0ZW5kKHtjb250ZW50OmEseWVzOmR9LGU/e306YikpfSxjb25maXJtOmZ1bmN0aW9uKGEsYixkLGcpe3ZhciBoPSJmdW5jdGlvbiI9PXR5cGVvZiBiO3JldHVybiBoJiYoZz1kLGQ9YiksZi5vcGVuKGMuZXh0ZW5kKHtjb250ZW50OmEsYnRuOmUuYnRuLHllczpkLGJ0bjI6Z30saD97fTpiKSl9LG1zZzpmdW5jdGlvbihhLGQsZyl7dmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIGQsaj1lLmNvbmZpZy5za2luLGs9KGo/aisiICIraisiLW1zZyI6IiIpfHwibGF5dWktbGF5ZXItbXNnIixsPWguYW5pbS5sZW5ndGgtMTtyZXR1cm4gaSYmKGc9ZCksZi5vcGVuKGMuZXh0ZW5kKHtjb250ZW50OmEsdGltZTozZTMsc2hhZGU6ITEsc2tpbjprLHRpdGxlOiExLGNsb3NlQnRuOiExLGJ0bjohMSxlbmQ6Z30saSYmIWUuY29uZmlnLnNraW4/e3NraW46aysiIGxheXVpLWxheWVyLWh1aSIsc2hpZnQ6bH06ZnVuY3Rpb24oKXtyZXR1cm4gZD1kfHx7fSwoLTE9PT1kLmljb258fGQuaWNvbj09PWImJiFlLmNvbmZpZy5za2luKSYmKGQuc2tpbj1rKyIgIisoZC5za2lufHwibGF5dWktbGF5ZXItaHVpIikpLGR9KCkpKX0sbG9hZDpmdW5jdGlvbihhLGIpe3JldHVybiBmLm9wZW4oYy5leHRlbmQoe3R5cGU6MyxpY29uOmF8fDAsc2hhZGU6LjAxfSxiKSl9LHRpcHM6ZnVuY3Rpb24oYSxiLGQpe3JldHVybiBmLm9wZW4oYy5leHRlbmQoe3R5cGU6NCxjb250ZW50OlthLGJdLGNsb3NlQnRuOiExLHRpbWU6M2UzLHNoYWRlOiExLG1heFdpZHRoOjIxMH0sZCkpfX0sZz1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuaW5kZXg9KytmLmluZGV4LGIuY29uZmlnPWMuZXh0ZW5kKHt9LGIuY29uZmlnLGUuY29uZmlnLGEpLGIuY3JlYXQoKX07Zy5wdD1nLnByb3RvdHlwZTt2YXIgaD1bImxheXVpLWxheWVyIiwiLmxheXVpLWxheWVyLXRpdGxlIiwiLmxheXVpLWxheWVyLW1haW4iLCIubGF5dWktbGF5ZXItZGlhbG9nIiwibGF5dWktbGF5ZXItaWZyYW1lIiwibGF5dWktbGF5ZXItY29udGVudCIsImxheXVpLWxheWVyLWJ0biIsImxheXVpLWxheWVyLWNsb3NlIl07aC5hbmltPVsibGF5ZXItYW5pbSIsImxheWVyLWFuaW0tMDEiLCJsYXllci1hbmltLTAyIiwibGF5ZXItYW5pbS0wMyIsImxheWVyLWFuaW0tMDQiLCJsYXllci1hbmltLTA1IiwibGF5ZXItYW5pbS0wNiJdLGcucHQuY29uZmlnPXt0eXBlOjAsc2hhZGU6LjMsZml4OiEwLG1vdmU6aFsxXSx0aXRsZToiJiN4NEZFMTsmI3g2MDZGOyIsb2Zmc2V0OiJhdXRvIixhcmVhOiJhdXRvIixjbG9zZUJ0bjoxLHRpbWU6MCx6SW5kZXg6MTk4OTEwMTQsbWF4V2lkdGg6MzYwLHNoaWZ0OjAsaWNvbjotMSxzY3JvbGxiYXI6ITAsdGlwczoyfSxnLnB0LnZlc3NlbD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmluZGV4LGY9Yy5jb25maWcsZz1mLnpJbmRleCtkLGk9Im9iamVjdCI9PXR5cGVvZiBmLnRpdGxlLGo9Zi5tYXhtaW4mJigxPT09Zi50eXBlfHwyPT09Zi50eXBlKSxrPWYudGl0bGU/JzxkaXYgY2xhc3M9ImxheXVpLWxheWVyLXRpdGxlIiBzdHlsZT0iJysoaT9mLnRpdGxlWzFdOiIiKSsnIj4nKyhpP2YudGl0bGVbMF06Zi50aXRsZSkrIjwvZGl2PiI6IiI7cmV0dXJuIGYuekluZGV4PWcsYihbZi5zaGFkZT8nPGRpdiBjbGFzcz0ibGF5dWktbGF5ZXItc2hhZGUiIGlkPSJsYXl1aS1sYXllci1zaGFkZScrZCsnIiB0aW1lcz0iJytkKyciIHN0eWxlPSInKygiei1pbmRleDoiKyhnLTEpKyI7IGJhY2tncm91bmQtY29sb3I6IisoZi5zaGFkZVsxXXx8IiMwMDAiKSsiOyBvcGFjaXR5OiIrKGYuc2hhZGVbMF18fGYuc2hhZGUpKyI7IGZpbHRlcjphbHBoYShvcGFjaXR5PSIrKDEwMCpmLnNoYWRlWzBdfHwxMDAqZi5zaGFkZSkrIik7IikrJyI+PC9kaXY+JzoiIiwnPGRpdiBjbGFzcz0iJytoWzBdKyIgIisoaC5hbmltW2Yuc2hpZnRdfHwiIikrKCIgbGF5dWktbGF5ZXItIitlLnR5cGVbZi50eXBlXSkrKDAhPWYudHlwZSYmMiE9Zi50eXBlfHxmLnNoYWRlPyIiOiIgbGF5dWktbGF5ZXItYm9yZGVyIikrIiAiKyhmLnNraW58fCIiKSsnIiBpZD0iJytoWzBdK2QrJyIgdHlwZT0iJytlLnR5cGVbZi50eXBlXSsnIiB0aW1lcz0iJytkKyciIHNob3d0aW1lPSInK2YudGltZSsnIiBjb25UeXBlPSInKyhhPyJvYmplY3QiOiJzdHJpbmciKSsnIiBzdHlsZT0iei1pbmRleDogJytnKyI7IHdpZHRoOiIrZi5hcmVhWzBdKyI7aGVpZ2h0OiIrZi5hcmVhWzFdKyhmLmZpeD8iIjoiO3Bvc2l0aW9uOmFic29sdXRlOyIpKyciPicrKGEmJjIhPWYudHlwZT8iIjprKSsnPGRpdiBpZD0iJysoZi5pZHx8IiIpKyciIGNsYXNzPSJsYXl1aS1sYXllci1jb250ZW50JysoMD09Zi50eXBlJiYtMSE9PWYuaWNvbj8iIGxheXVpLWxheWVyLXBhZGRpbmciOiIiKSsoMz09Zi50eXBlPyIgbGF5dWktbGF5ZXItbG9hZGluZyIrZi5pY29uOiIiKSsnIj4nKygwPT1mLnR5cGUmJi0xIT09Zi5pY29uPyc8aSBjbGFzcz0ibGF5dWktbGF5ZXItaWNvIGxheXVpLWxheWVyLWljbycrZi5pY29uKyciPjwvaT4nOiIiKSsoMT09Zi50eXBlJiZhPyIiOmYuY29udGVudHx8IiIpKyc8L2Rpdj48c3BhbiBjbGFzcz0ibGF5dWktbGF5ZXItc2V0d2luIj4nK2Z1bmN0aW9uKCl7dmFyIGE9aj8nPGEgY2xhc3M9ImxheXVpLWxheWVyLW1pbiIgaHJlZj0iamF2YXNjcmlwdDo7Ij48Y2l0ZT48L2NpdGU+PC9hPjxhIGNsYXNzPSJsYXl1aS1sYXllci1pY28gbGF5dWktbGF5ZXItbWF4IiBocmVmPSJqYXZhc2NyaXB0OjsiPjwvYT4nOiIiO3JldHVybiBmLmNsb3NlQnRuJiYoYSs9JzxhIGNsYXNzPSJsYXl1aS1sYXllci1pY28gJytoWzddKyIgIitoWzddKyhmLnRpdGxlP2YuY2xvc2VCdG46ND09Zi50eXBlPyIxIjoiMiIpKyciIGhyZWY9ImphdmFzY3JpcHQ6OyI+PC9hPicpLGF9KCkrIjwvc3Bhbj4iKyhmLmJ0bj9mdW5jdGlvbigpe3ZhciBhPSIiOyJzdHJpbmciPT10eXBlb2YgZi5idG4mJihmLmJ0bj1bZi5idG5dKTtmb3IodmFyIGI9MCxjPWYuYnRuLmxlbmd0aDtjPmI7YisrKWErPSc8YSBjbGFzcz0iJytoWzZdK2IrJyI+JytmLmJ0bltiXSsiPC9hPiI7cmV0dXJuJzxkaXYgY2xhc3M9IicraFs2XSsnIj4nK2ErIjwvZGl2PiJ9KCk6IiIpKyI8L2Rpdj4iXSxrKSxjfSxnLnB0LmNyZWF0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnLGc9YS5pbmRleCxpPWIuY29udGVudCxqPSJvYmplY3QiPT10eXBlb2YgaTtpZighYygiIyIrYi5pZClbMF0pe3N3aXRjaCgic3RyaW5nIj09dHlwZW9mIGIuYXJlYSYmKGIuYXJlYT0iYXV0byI9PT1iLmFyZWE/WyIiLCIiXTpbYi5hcmVhLCIiXSksYi50eXBlKXtjYXNlIDA6Yi5idG49ImJ0biJpbiBiP2IuYnRuOmUuYnRuWzBdLGYuY2xvc2VBbGwoImRpYWxvZyIpO2JyZWFrO2Nhc2UgMjp2YXIgaT1iLmNvbnRlbnQ9aj9iLmNvbnRlbnQ6W2IuY29udGVudHx8Imh0dHA6Ly9sYXllci5sYXl1aS5jb20iLCJhdXRvIl07Yi5jb250ZW50PSc8aWZyYW1lIHNjcm9sbGluZz0iJysoYi5jb250ZW50WzFdfHwiYXV0byIpKyciIGFsbG93dHJhbnNwYXJlbmN5PSJ0cnVlIiBpZD0iJytoWzRdK2crJyIgbmFtZT0iJytoWzRdK2crJyIgb25sb2FkPSJ0aGlzLmNsYXNzTmFtZT1cJ1wnOyIgY2xhc3M9ImxheXVpLWxheWVyLWxvYWQiIGZyYW1lYm9yZGVyPSIwIiBzcmM9IicrYi5jb250ZW50WzBdKyciPjwvaWZyYW1lPic7YnJlYWs7Y2FzZSAzOmIudGl0bGU9ITEsYi5jbG9zZUJ0bj0hMSwtMT09PWIuaWNvbiYmMD09PWIuaWNvbixmLmNsb3NlQWxsKCJsb2FkaW5nIik7YnJlYWs7Y2FzZSA0Omp8fChiLmNvbnRlbnQ9W2IuY29udGVudCwiYm9keSJdKSxiLmZvbGxvdz1iLmNvbnRlbnRbMV0sYi5jb250ZW50PWIuY29udGVudFswXSsnPGkgY2xhc3M9ImxheXVpLWxheWVyLVRpcHNHIj48L2k+JyxiLnRpdGxlPSExLGIuZml4PSExLGIudGlwcz0ib2JqZWN0Ij09dHlwZW9mIGIudGlwcz9iLnRpcHM6W2IudGlwcywhMF0sYi50aXBzTW9yZXx8Zi5jbG9zZUFsbCgidGlwcyIpfWEudmVzc2VsKGosZnVuY3Rpb24oZCxlKXtjKCJib2R5IikuYXBwZW5kKGRbMF0pLGo/ZnVuY3Rpb24oKXsyPT1iLnR5cGV8fDQ9PWIudHlwZT9mdW5jdGlvbigpe2MoImJvZHkiKS5hcHBlbmQoZFsxXSl9KCk6ZnVuY3Rpb24oKXtpLnBhcmVudHMoIi4iK2hbMF0pWzBdfHwoaS5zaG93KCkuYWRkQ2xhc3MoImxheXVpLWxheWVyLXdyYXAiKS53cmFwKGRbMV0pLGMoIiMiK2hbMF0rZykuZmluZCgiLiIraFs1XSkuYmVmb3JlKGUpKX0oKX0oKTpjKCJib2R5IikuYXBwZW5kKGRbMV0pLGEubGF5ZXJvPWMoIiMiK2hbMF0rZyksYi5zY3JvbGxiYXJ8fGguaHRtbC5jc3MoIm92ZXJmbG93IiwiaGlkZGVuIikuYXR0cigibGF5ZXItZnVsbCIsZyl9KS5hdXRvKGcpLDI9PWIudHlwZSYmZi5pZTYmJmEubGF5ZXJvLmZpbmQoImlmcmFtZSIpLmF0dHIoInNyYyIsaVswXSksYyhkb2N1bWVudCkub2ZmKCJrZXlkb3duIixlLmVudGVyKS5vbigia2V5ZG93biIsZS5lbnRlciksYS5sYXllcm8ub24oImtleWRvd24iLGZ1bmN0aW9uKGEpe2MoZG9jdW1lbnQpLm9mZigia2V5ZG93biIsZS5lbnRlcil9KSw0PT1iLnR5cGU/YS50aXBzKCk6YS5vZmZzZXQoKSxiLmZpeCYmZC5vbigicmVzaXplIixmdW5jdGlvbigpe2Eub2Zmc2V0KCksKC9eXGQrJSQvLnRlc3QoYi5hcmVhWzBdKXx8L15cZCslJC8udGVzdChiLmFyZWFbMV0pKSYmYS5hdXRvKGcpLDQ9PWIudHlwZSYmYS50aXBzKCl9KSxiLnRpbWU8PTB8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmNsb3NlKGEuaW5kZXgpfSxiLnRpbWUpLGEubW92ZSgpLmNhbGxiYWNrKCl9fSxnLnB0LmF1dG89ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXthPWcuZmluZChhKSxhLmhlaWdodChpWzFdLWotay0yKigwfHBhcnNlRmxvYXQoYS5jc3MoInBhZGRpbmciKSkpKX12YXIgZT10aGlzLGY9ZS5jb25maWcsZz1jKCIjIitoWzBdK2EpOyIiPT09Zi5hcmVhWzBdJiZmLm1heFdpZHRoPjAmJigvTVNJRSA3Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiZmLmJ0biYmZy53aWR0aChnLmlubmVyV2lkdGgoKSksZy5vdXRlcldpZHRoKCk+Zi5tYXhXaWR0aCYmZy53aWR0aChmLm1heFdpZHRoKSk7dmFyIGk9W2cuaW5uZXJXaWR0aCgpLGcuaW5uZXJIZWlnaHQoKV0saj1nLmZpbmQoaFsxXSkub3V0ZXJIZWlnaHQoKXx8MCxrPWcuZmluZCgiLiIraFs2XSkub3V0ZXJIZWlnaHQoKXx8MDtzd2l0Y2goZi50eXBlKXtjYXNlIDI6YigiaWZyYW1lIik7YnJlYWs7ZGVmYXVsdDoiIj09PWYuYXJlYVsxXT9mLmZpeCYmaVsxXT49ZC5oZWlnaHQoKSYmKGlbMV09ZC5oZWlnaHQoKSxiKCIuIitoWzVdKSk6YigiLiIraFs1XSl9cmV0dXJuIGV9LGcucHQub2Zmc2V0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnLGM9YS5sYXllcm8sZT1bYy5vdXRlcldpZHRoKCksYy5vdXRlckhlaWdodCgpXSxmPSJvYmplY3QiPT10eXBlb2YgYi5vZmZzZXQ7YS5vZmZzZXRUb3A9KGQuaGVpZ2h0KCktZVsxXSkvMixhLm9mZnNldExlZnQ9KGQud2lkdGgoKS1lWzBdKS8yLGY/KGEub2Zmc2V0VG9wPWIub2Zmc2V0WzBdLGEub2Zmc2V0TGVmdD1iLm9mZnNldFsxXXx8YS5vZmZzZXRMZWZ0KToiYXV0byIhPT1iLm9mZnNldCYmKGEub2Zmc2V0VG9wPWIub2Zmc2V0LCJyYiI9PT1iLm9mZnNldCYmKGEub2Zmc2V0VG9wPWQuaGVpZ2h0KCktZVsxXSxhLm9mZnNldExlZnQ9ZC53aWR0aCgpLWVbMF0pKSxiLmZpeHx8KGEub2Zmc2V0VG9wPS8lJC8udGVzdChhLm9mZnNldFRvcCk/ZC5oZWlnaHQoKSpwYXJzZUZsb2F0KGEub2Zmc2V0VG9wKS8xMDA6cGFyc2VGbG9hdChhLm9mZnNldFRvcCksYS5vZmZzZXRMZWZ0PS8lJC8udGVzdChhLm9mZnNldExlZnQpP2Qud2lkdGgoKSpwYXJzZUZsb2F0KGEub2Zmc2V0TGVmdCkvMTAwOnBhcnNlRmxvYXQoYS5vZmZzZXRMZWZ0KSxhLm9mZnNldFRvcCs9ZC5zY3JvbGxUb3AoKSxhLm9mZnNldExlZnQrPWQuc2Nyb2xsTGVmdCgpKSxjLmNzcyh7dG9wOmEub2Zmc2V0VG9wLGxlZnQ6YS5vZmZzZXRMZWZ0fSl9LGcucHQudGlwcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbmZpZyxlPWEubGF5ZXJvLGY9W2Uub3V0ZXJXaWR0aCgpLGUub3V0ZXJIZWlnaHQoKV0sZz1jKGIuZm9sbG93KTtnWzBdfHwoZz1jKCJib2R5IikpO3ZhciBpPXt3aWR0aDpnLm91dGVyV2lkdGgoKSxoZWlnaHQ6Zy5vdXRlckhlaWdodCgpLHRvcDpnLm9mZnNldCgpLnRvcCxsZWZ0Omcub2Zmc2V0KCkubGVmdH0saj1lLmZpbmQoIi5sYXl1aS1sYXllci1UaXBzRyIpLGs9Yi50aXBzWzBdO2IudGlwc1sxXXx8ai5yZW1vdmUoKSxpLmF1dG9MZWZ0PWZ1bmN0aW9uKCl7aS5sZWZ0K2ZbMF0tZC53aWR0aCgpPjA/KGkudGlwTGVmdD1pLmxlZnQraS53aWR0aC1mWzBdLGouY3NzKHtyaWdodDoxMixsZWZ0OiJhdXRvIn0pKTppLnRpcExlZnQ9aS5sZWZ0fSxpLndoZXJlPVtmdW5jdGlvbigpe2kuYXV0b0xlZnQoKSxpLnRpcFRvcD1pLnRvcC1mWzFdLTEwLGoucmVtb3ZlQ2xhc3MoImxheXVpLWxheWVyLVRpcHNCIikuYWRkQ2xhc3MoImxheXVpLWxheWVyLVRpcHNUIikuY3NzKCJib3JkZXItcmlnaHQtY29sb3IiLGIudGlwc1sxXSl9LGZ1bmN0aW9uKCl7aS50aXBMZWZ0PWkubGVmdCtpLndpZHRoKzEwLGkudGlwVG9wPWkudG9wLGoucmVtb3ZlQ2xhc3MoImxheXVpLWxheWVyLVRpcHNMIikuYWRkQ2xhc3MoImxheXVpLWxheWVyLVRpcHNSIikuY3NzKCJib3JkZXItYm90dG9tLWNvbG9yIixiLnRpcHNbMV0pfSxmdW5jdGlvbigpe2kuYXV0b0xlZnQoKSxpLnRpcFRvcD1pLnRvcCtpLmhlaWdodCsxMCxqLnJlbW92ZUNsYXNzKCJsYXl1aS1sYXllci1UaXBzVCIpLmFkZENsYXNzKCJsYXl1aS1sYXllci1UaXBzQiIpLmNzcygiYm9yZGVyLXJpZ2h0LWNvbG9yIixiLnRpcHNbMV0pfSxmdW5jdGlvbigpe2kudGlwTGVmdD1pLmxlZnQtZlswXS0xMCxpLnRpcFRvcD1pLnRvcCxqLnJlbW92ZUNsYXNzKCJsYXl1aS1sYXllci1UaXBzUiIpLmFkZENsYXNzKCJsYXl1aS1sYXllci1UaXBzTCIpLmNzcygiYm9yZGVyLWJvdHRvbS1jb2xvciIsYi50aXBzWzFdKX1dLGkud2hlcmVbay0xXSgpLDE9PT1rP2kudG9wLShkLnNjcm9sbFRvcCgpK2ZbMV0rMTYpPDAmJmkud2hlcmVbMl0oKToyPT09az9kLndpZHRoKCktKGkubGVmdCtpLndpZHRoK2ZbMF0rMTYpPjB8fGkud2hlcmVbM10oKTozPT09az9pLnRvcC1kLnNjcm9sbFRvcCgpK2kuaGVpZ2h0K2ZbMV0rMTYtZC5oZWlnaHQoKT4wJiZpLndoZXJlWzBdKCk6ND09PWsmJmZbMF0rMTYtaS5sZWZ0PjAmJmkud2hlcmVbMV0oKSxlLmZpbmQoIi4iK2hbNV0pLmNzcyh7ImJhY2tncm91bmQtY29sb3IiOmIudGlwc1sxXSwicGFkZGluZy1yaWdodCI6Yi5jbG9zZUJ0bj8iMzBweCI6IiJ9KSxlLmNzcyh7bGVmdDppLnRpcExlZnQsdG9wOmkudGlwVG9wfSl9LGcucHQubW92ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbmZpZyxlPXtzZXRZOjAsbW92ZUxheWVyOmZ1bmN0aW9uKCl7dmFyIGE9ZS5sYXllcm8sYj1wYXJzZUludChhLmNzcygibWFyZ2luLWxlZnQiKSksYz1wYXJzZUludChlLm1vdmUuY3NzKCJsZWZ0IikpOzA9PT1ifHwoYy09YiksImZpeGVkIiE9PWEuY3NzKCJwb3NpdGlvbiIpJiYoYy09YS5wYXJlbnQoKS5vZmZzZXQoKS5sZWZ0LGUuc2V0WT0wKSxhLmNzcyh7bGVmdDpjLHRvcDpwYXJzZUludChlLm1vdmUuY3NzKCJ0b3AiKSktZS5zZXRZfSl9fSxmPWEubGF5ZXJvLmZpbmQoYi5tb3ZlKTtyZXR1cm4gYi5tb3ZlJiZmLmF0dHIoIm1vdmUiLCJvayIpLGYuY3NzKHtjdXJzb3I6Yi5tb3ZlPyJtb3ZlIjoiYXV0byJ9KSxjKGIubW92ZSkub24oIm1vdXNlZG93biIsZnVuY3Rpb24oYSl7aWYoYS5wcmV2ZW50RGVmYXVsdCgpLCJvayI9PT1jKHRoaXMpLmF0dHIoIm1vdmUiKSl7ZS5pc21vdmU9ITAsZS5sYXllcm89Yyh0aGlzKS5wYXJlbnRzKCIuIitoWzBdKTt2YXIgZj1lLmxheWVyby5vZmZzZXQoKS5sZWZ0LGc9ZS5sYXllcm8ub2Zmc2V0KCkudG9wLGk9ZS5sYXllcm8ub3V0ZXJXaWR0aCgpLTYsaj1lLmxheWVyby5vdXRlckhlaWdodCgpLTY7YygiI2xheXVpLWxheWVyLW1vdmVzIilbMF18fGMoImJvZHkiKS5hcHBlbmQoJzxkaXYgaWQ9ImxheXVpLWxheWVyLW1vdmVzIiBjbGFzcz0ibGF5dWktbGF5ZXItbW92ZXMiIHN0eWxlPSJsZWZ0OicrZisicHg7IHRvcDoiK2crInB4OyB3aWR0aDoiK2krInB4OyBoZWlnaHQ6IitqKydweDsgei1pbmRleDoyMTQ3NDgzNTg0Ij48L2Rpdj4nKSxlLm1vdmU9YygiI2xheXVpLWxheWVyLW1vdmVzIiksYi5tb3ZlVHlwZSYmZS5tb3ZlLmNzcyh7dmlzaWJpbGl0eToiaGlkZGVuIn0pLGUubW92ZVg9YS5wYWdlWC1lLm1vdmUucG9zaXRpb24oKS5sZWZ0LGUubW92ZVk9YS5wYWdlWS1lLm1vdmUucG9zaXRpb24oKS50b3AsImZpeGVkIiE9PWUubGF5ZXJvLmNzcygicG9zaXRpb24iKXx8KGUuc2V0WT1kLnNjcm9sbFRvcCgpKX19KSxjKGRvY3VtZW50KS5tb3VzZW1vdmUoZnVuY3Rpb24oYSl7aWYoZS5pc21vdmUpe3ZhciBjPWEucGFnZVgtZS5tb3ZlWCxmPWEucGFnZVktZS5tb3ZlWTtpZihhLnByZXZlbnREZWZhdWx0KCksIWIubW92ZU91dCl7ZS5zZXRZPWQuc2Nyb2xsVG9wKCk7dmFyIGc9ZC53aWR0aCgpLWUubW92ZS5vdXRlcldpZHRoKCksaD1lLnNldFk7MD5jJiYoYz0wKSxjPmcmJihjPWcpLGg+ZiYmKGY9aCksZj5kLmhlaWdodCgpLWUubW92ZS5vdXRlckhlaWdodCgpK2Uuc2V0WSYmKGY9ZC5oZWlnaHQoKS1lLm1vdmUub3V0ZXJIZWlnaHQoKStlLnNldFkpfWUubW92ZS5jc3Moe2xlZnQ6Yyx0b3A6Zn0pLGIubW92ZVR5cGUmJmUubW92ZUxheWVyKCksYz1mPWc9aD1udWxsfX0pLm1vdXNldXAoZnVuY3Rpb24oKXt0cnl7ZS5pc21vdmUmJihlLm1vdmVMYXllcigpLGUubW92ZS5yZW1vdmUoKSxiLm1vdmVFbmQmJmIubW92ZUVuZCgpKSxlLmlzbW92ZT0hMX1jYXRjaChhKXtlLmlzbW92ZT0hMX19KSxhfSxnLnB0LmNhbGxiYWNrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciBhPWcuY2FuY2VsJiZnLmNhbmNlbChiLmluZGV4LGQpO2E9PT0hMXx8Zi5jbG9zZShiLmluZGV4KX12YXIgYj10aGlzLGQ9Yi5sYXllcm8sZz1iLmNvbmZpZztiLm9wZW5MYXllcigpLGcuc3VjY2VzcyYmKDI9PWcudHlwZT9kLmZpbmQoImlmcmFtZSIpLm9uKCJsb2FkIixmdW5jdGlvbigpe2cuc3VjY2VzcyhkLGIuaW5kZXgpfSk6Zy5zdWNjZXNzKGQsYi5pbmRleCkpLGYuaWU2JiZiLklFNihkKSxkLmZpbmQoIi4iK2hbNl0pLmNoaWxkcmVuKCJhIikub24oImNsaWNrIixmdW5jdGlvbigpe3ZhciBhPWModGhpcykuaW5kZXgoKTtpZigwPT09YSlnLnllcz9nLnllcyhiLmluZGV4LGQpOmcuYnRuMT9nLmJ0bjEoYi5pbmRleCxkKTpmLmNsb3NlKGIuaW5kZXgpO2Vsc2V7dmFyIGU9Z1siYnRuIisoYSsxKV0mJmdbImJ0biIrKGErMSldKGIuaW5kZXgsZCk7ZT09PSExfHxmLmNsb3NlKGIuaW5kZXgpfX0pLGQuZmluZCgiLiIraFs3XSkub24oImNsaWNrIixhKSxnLnNoYWRlQ2xvc2UmJmMoIiNsYXl1aS1sYXllci1zaGFkZSIrYi5pbmRleCkub24oImNsaWNrIixmdW5jdGlvbigpe2YuY2xvc2UoYi5pbmRleCl9KSxkLmZpbmQoIi5sYXl1aS1sYXllci1taW4iKS5vbigiY2xpY2siLGZ1bmN0aW9uKCl7Zi5taW4oYi5pbmRleCxnKSxnLm1pbiYmZy5taW4oZCl9KSxkLmZpbmQoIi5sYXl1aS1sYXllci1tYXgiKS5vbigiY2xpY2siLGZ1bmN0aW9uKCl7Yyh0aGlzKS5oYXNDbGFzcygibGF5dWktbGF5ZXItbWF4bWluIik/KGYucmVzdG9yZShiLmluZGV4KSxnLnJlc3RvcmUmJmcucmVzdG9yZShkKSk6KGYuZnVsbChiLmluZGV4LGcpLGcuZnVsbCYmZy5mdWxsKGQpKX0pLGcuZW5kJiYoZS5lbmRbYi5pbmRleF09Zy5lbmQpfSxlLnJlc2VsZWN0PWZ1bmN0aW9uKCl7Yy5lYWNoKGMoInNlbGVjdCIpLGZ1bmN0aW9uKGEsYil7dmFyIGQ9Yyh0aGlzKTtkLnBhcmVudHMoIi4iK2hbMF0pWzBdfHwxPT1kLmF0dHIoImxheWVyIikmJmMoIi4iK2hbMF0pLmxlbmd0aDwxJiZkLnJlbW92ZUF0dHIoImxheWVyIikuc2hvdygpLGQ9bnVsbH0pfSxnLnB0LklFNj1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7YS5jc3Moe3RvcDpmKyhlLmNvbmZpZy5maXg/ZC5zY3JvbGxUb3AoKTowKX0pfXZhciBlPXRoaXMsZj1hLm9mZnNldCgpLnRvcDtiKCksZC5zY3JvbGwoYiksYygic2VsZWN0IikuZWFjaChmdW5jdGlvbihhLGIpe3ZhciBkPWModGhpcyk7ZC5wYXJlbnRzKCIuIitoWzBdKVswXXx8Im5vbmUiPT09ZC5jc3MoImRpc3BsYXkiKXx8ZC5hdHRyKHtsYXllcjoiMSJ9KS5oaWRlKCksZD1udWxsfSl9LGcucHQub3BlbkxheWVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztmLnpJbmRleD1hLmNvbmZpZy56SW5kZXgsZi5zZXRUb3A9ZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oKXtmLnpJbmRleCsrLGEuY3NzKCJ6LWluZGV4IixmLnpJbmRleCsxKX07cmV0dXJuIGYuekluZGV4PXBhcnNlSW50KGFbMF0uc3R5bGUuekluZGV4KSxhLm9uKCJtb3VzZWRvd24iLGIpLGYuekluZGV4fX0sZS5yZWNvcmQ9ZnVuY3Rpb24oYSl7dmFyIGI9W2Eub3V0ZXJXaWR0aCgpLGEub3V0ZXJIZWlnaHQoKSxhLnBvc2l0aW9uKCkudG9wLGEucG9zaXRpb24oKS5sZWZ0K3BhcnNlRmxvYXQoYS5jc3MoIm1hcmdpbi1sZWZ0IikpXTthLmZpbmQoIi5sYXl1aS1sYXllci1tYXgiKS5hZGRDbGFzcygibGF5dWktbGF5ZXItbWF4bWluIiksYS5hdHRyKHthcmVhOmJ9KX0sZS5yZXNjb2xsYmFyPWZ1bmN0aW9uKGEpe2guaHRtbC5hdHRyKCJsYXllci1mdWxsIik9PWEmJihoLmh0bWxbMF0uc3R5bGUucmVtb3ZlUHJvcGVydHk/aC5odG1sWzBdLnN0eWxlLnJlbW92ZVByb3BlcnR5KCJvdmVyZmxvdyIpOmguaHRtbFswXS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoIm92ZXJmbG93IiksaC5odG1sLnJlbW92ZUF0dHIoImxheWVyLWZ1bGwiKSl9LGEubGF5ZXI9ZixmLmdldENoaWxkRnJhbWU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj1ifHxjKCIuIitoWzRdKS5hdHRyKCJ0aW1lcyIpLGMoIiMiK2hbMF0rYikuZmluZCgiaWZyYW1lIikuY29udGVudHMoKS5maW5kKGEpfSxmLmdldEZyYW1lSW5kZXg9ZnVuY3Rpb24oYSl7cmV0dXJuIGMoIiMiK2EpLnBhcmVudHMoIi4iK2hbNF0pLmF0dHIoInRpbWVzIil9LGYuaWZyYW1lQXV0bz1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj1mLmdldENoaWxkRnJhbWUoImh0bWwiLGEpLm91dGVySGVpZ2h0KCksZD1jKCIjIitoWzBdK2EpLGU9ZC5maW5kKGhbMV0pLm91dGVySGVpZ2h0KCl8fDAsZz1kLmZpbmQoIi4iK2hbNl0pLm91dGVySGVpZ2h0KCl8fDA7ZC5jc3Moe2hlaWdodDpiK2UrZ30pLGQuZmluZCgiaWZyYW1lIikuY3NzKHtoZWlnaHQ6Yn0pfX0sZi5pZnJhbWVTcmM9ZnVuY3Rpb24oYSxiKXtjKCIjIitoWzBdK2EpLmZpbmQoImlmcmFtZSIpLmF0dHIoInNyYyIsYil9LGYuc3R5bGU9ZnVuY3Rpb24oYSxiKXt2YXIgZD1jKCIjIitoWzBdK2EpLGY9ZC5hdHRyKCJ0eXBlIiksZz1kLmZpbmQoaFsxXSkub3V0ZXJIZWlnaHQoKXx8MCxpPWQuZmluZCgiLiIraFs2XSkub3V0ZXJIZWlnaHQoKXx8MDsoZj09PWUudHlwZVsxXXx8Zj09PWUudHlwZVsyXSkmJihkLmNzcyhiKSxmPT09ZS50eXBlWzJdJiZkLmZpbmQoImlmcmFtZSIpLmNzcyh7aGVpZ2h0OnBhcnNlRmxvYXQoYi5oZWlnaHQpLWctaX0pKX0sZi5taW49ZnVuY3Rpb24oYSxiKXt2YXIgZD1jKCIjIitoWzBdK2EpLGc9ZC5maW5kKGhbMV0pLm91dGVySGVpZ2h0KCl8fDA7ZS5yZWNvcmQoZCksZi5zdHlsZShhLHt3aWR0aDoxODAsaGVpZ2h0Omcsb3ZlcmZsb3c6ImhpZGRlbiJ9KSxkLmZpbmQoIi5sYXl1aS1sYXllci1taW4iKS5oaWRlKCksInBhZ2UiPT09ZC5hdHRyKCJ0eXBlIikmJmQuZmluZChoWzRdKS5oaWRlKCksZS5yZXNjb2xsYmFyKGEpfSxmLnJlc3RvcmU9ZnVuY3Rpb24oYSl7dmFyIGI9YygiIyIraFswXSthKSxkPWIuYXR0cigiYXJlYSIpLnNwbGl0KCIsIik7Yi5hdHRyKCJ0eXBlIik7Zi5zdHlsZShhLHt3aWR0aDpwYXJzZUZsb2F0KGRbMF0pLGhlaWdodDpwYXJzZUZsb2F0KGRbMV0pLHRvcDpwYXJzZUZsb2F0KGRbMl0pLGxlZnQ6cGFyc2VGbG9hdChkWzNdKSxvdmVyZmxvdzoidmlzaWJsZSJ9KSxiLmZpbmQoIi5sYXl1aS1sYXllci1tYXgiKS5yZW1vdmVDbGFzcygibGF5dWktbGF5ZXItbWF4bWluIiksYi5maW5kKCIubGF5dWktbGF5ZXItbWluIikuc2hvdygpLCJwYWdlIj09PWIuYXR0cigidHlwZSIpJiZiLmZpbmQoaFs0XSkuc2hvdygpLGUucmVzY29sbGJhcihhKX0sZi5mdWxsPWZ1bmN0aW9uKGEpe3ZhciBiLGc9YygiIyIraFswXSthKTtlLnJlY29yZChnKSxoLmh0bWwuYXR0cigibGF5ZXItZnVsbCIpfHxoLmh0bWwuY3NzKCJvdmVyZmxvdyIsImhpZGRlbiIpLmF0dHIoImxheWVyLWZ1bGwiLGEpLGNsZWFyVGltZW91dChiKSxiPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYj0iZml4ZWQiPT09Zy5jc3MoInBvc2l0aW9uIik7Zi5zdHlsZShhLHt0b3A6Yj8wOmQuc2Nyb2xsVG9wKCksbGVmdDpiPzA6ZC5zY3JvbGxMZWZ0KCksd2lkdGg6ZC53aWR0aCgpLGhlaWdodDpkLmhlaWdodCgpfSksZy5maW5kKCIubGF5dWktbGF5ZXItbWluIikuaGlkZSgpfSwxMDApfSxmLnRpdGxlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9YygiIyIraFswXSsoYnx8Zi5pbmRleCkpLmZpbmQoaFsxXSk7ZC5odG1sKGEpfSxmLmNsb3NlPWZ1bmN0aW9uKGEpe3ZhciBiPWMoIiMiK2hbMF0rYSksZD1iLmF0dHIoInR5cGUiKTtpZihiWzBdKXtpZihkPT09ZS50eXBlWzFdJiYib2JqZWN0Ij09PWIuYXR0cigiY29uVHlwZSIpKXtiLmNoaWxkcmVuKCI6bm90KC4iK2hbNV0rIikiKS5yZW1vdmUoKTtmb3IodmFyIGc9MDsyPmc7ZysrKWIuZmluZCgiLmxheXVpLWxheWVyLXdyYXAiKS51bndyYXAoKS5oaWRlKCl9ZWxzZXtpZihkPT09ZS50eXBlWzJdKXRyeXt2YXIgaT1jKCIjIitoWzRdK2EpWzBdO2kuY29udGVudFdpbmRvdy5kb2N1bWVudC53cml0ZSgiIiksaS5jb250ZW50V2luZG93LmNsb3NlKCksYi5maW5kKCIuIitoWzVdKVswXS5yZW1vdmVDaGlsZChpKX1jYXRjaChqKXt9YlswXS5pbm5lckhUTUw9IiIsYi5yZW1vdmUoKX1jKCIjbGF5dWktbGF5ZXItbW92ZXMsICNsYXl1aS1sYXllci1zaGFkZSIrYSkucmVtb3ZlKCksZi5pZTYmJmUucmVzZWxlY3QoKSxlLnJlc2NvbGxiYXIoYSksYyhkb2N1bWVudCkub2ZmKCJrZXlkb3duIixlLmVudGVyKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5lbmRbYV0mJmUuZW5kW2FdKCksZGVsZXRlIGUuZW5kW2FdfX0sZi5jbG9zZUFsbD1mdW5jdGlvbihhKXtjLmVhY2goYygiLiIraFswXSksZnVuY3Rpb24oKXt2YXIgYj1jKHRoaXMpLGQ9YT9iLmF0dHIoInR5cGUiKT09PWE6MTtkJiZmLmNsb3NlKGIuYXR0cigidGltZXMiKSksZD1udWxsfSl9O3ZhciBpPWYuY2FjaGV8fHt9LGo9ZnVuY3Rpb24oYSl7cmV0dXJuIGkuc2tpbj8iICIraS5za2luKyIgIitpLnNraW4rIi0iK2E6IiJ9O2YucHJvbXB0PWZ1bmN0aW9uKGEsYil7YT1hfHx7fSwiZnVuY3Rpb24iPT10eXBlb2YgYSYmKGI9YSk7dmFyIGQsZT0yPT1hLmZvcm1UeXBlPyc8dGV4dGFyZWEgY2xhc3M9ImxheXVpLWxheWVyLWlucHV0Ij4nKyhhLnZhbHVlfHwiIikrIjwvdGV4dGFyZWE+IjpmdW5jdGlvbigpe3JldHVybic8aW5wdXQgdHlwZT0iJysoMT09YS5mb3JtVHlwZT8icGFzc3dvcmQiOiJ0ZXh0IikrJyIgY2xhc3M9ImxheXVpLWxheWVyLWlucHV0IiB2YWx1ZT0iJysoYS52YWx1ZXx8IiIpKyciPid9KCk7cmV0dXJuIGYub3BlbihjLmV4dGVuZCh7YnRuOlsiJiN4Nzg2RTsmI3g1QjlBOyIsIiYjeDUzRDY7JiN4NkQ4ODsiXSxjb250ZW50OmUsc2tpbjoibGF5dWktbGF5ZXItcHJvbXB0IitqKCJwcm9tcHQiKSxzdWNjZXNzOmZ1bmN0aW9uKGEpe2Q9YS5maW5kKCIubGF5dWktbGF5ZXItaW5wdXQiKSxkLmZvY3VzKCl9LHllczpmdW5jdGlvbihjKXt2YXIgZT1kLnZhbCgpOyIiPT09ZT9kLmZvY3VzKCk6ZS5sZW5ndGg+KGEubWF4bGVuZ3RofHw1MDApP2YudGlwcygiJiN4NjcwMDsmI3g1OTFBOyYjeDhGOTM7JiN4NTE2NTsiKyhhLm1heGxlbmd0aHx8NTAwKSsiJiN4NEUyQTsmI3g1QjU3OyYjeDY1NzA7IixkLHt0aXBzOjF9KTpiJiZiKGUsYyxkKX19LGEpKX0sZi50YWI9ZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj1hLnRhYnx8e307cmV0dXJuIGYub3BlbihjLmV4dGVuZCh7dHlwZToxLHNraW46ImxheXVpLWxheWVyLXRhYiIraigidGFiIiksdGl0bGU6ZnVuY3Rpb24oKXt2YXIgYT1iLmxlbmd0aCxjPTEsZD0iIjtpZihhPjApZm9yKGQ9JzxzcGFuIGNsYXNzPSJsYXl1aS1sYXllci10YWJub3ciPicrYlswXS50aXRsZSsiPC9zcGFuPiI7YT5jO2MrKylkKz0iPHNwYW4+IitiW2NdLnRpdGxlKyI8L3NwYW4+IjtyZXR1cm4gZH0oKSxjb250ZW50Oic8dWwgY2xhc3M9ImxheXVpLWxheWVyLXRhYm1haW4iPicrZnVuY3Rpb24oKXt2YXIgYT1iLmxlbmd0aCxjPTEsZD0iIjtpZihhPjApZm9yKGQ9JzxsaSBjbGFzcz0ibGF5dWktbGF5ZXItdGFibGkgeHVib3hfdGFiX2xheWVyIj4nKyhiWzBdLmNvbnRlbnR8fCJubyBjb250ZW50IikrIjwvbGk+IjthPmM7YysrKWQrPSc8bGkgY2xhc3M9ImxheXVpLWxheWVyLXRhYmxpIj4nKyhiW2NdLmNvbnRlbnR8fCJubyAgY29udGVudCIpKyI8L2xpPiI7cmV0dXJuIGR9KCkrIjwvdWw+IixzdWNjZXNzOmZ1bmN0aW9uKGIpe3ZhciBkPWIuZmluZCgiLmxheXVpLWxheWVyLXRpdGxlIikuY2hpbGRyZW4oKSxlPWIuZmluZCgiLmxheXVpLWxheWVyLXRhYm1haW4iKS5jaGlsZHJlbigpO2Qub24oIm1vdXNlZG93biIsZnVuY3Rpb24oYil7Yi5zdG9wUHJvcGFnYXRpb24/Yi5zdG9wUHJvcGFnYXRpb24oKTpiLmNhbmNlbEJ1YmJsZT0hMDt2YXIgZD1jKHRoaXMpLGY9ZC5pbmRleCgpO2QuYWRkQ2xhc3MoImxheXVpLWxheWVyLXRhYm5vdyIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoImxheXVpLWxheWVyLXRhYm5vdyIpLGUuZXEoZikuc2hvdygpLnNpYmxpbmdzKCkuaGlkZSgpLCJmdW5jdGlvbiI9PXR5cGVvZiBhLmNoYW5nZSYmYS5jaGFuZ2UoZil9KX19LGEpKX0sZi5waG90b3M9ZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGcoYSxiLGMpe3ZhciBkPW5ldyBJbWFnZTtyZXR1cm4gZC5zcmM9YSxkLmNvbXBsZXRlP2IoZCk6KGQub25sb2FkPWZ1bmN0aW9uKCl7ZC5vbmxvYWQ9bnVsbCxiKGQpfSx2b2lkKGQub25lcnJvcj1mdW5jdGlvbihhKXtkLm9uZXJyb3I9bnVsbCxjKGEpfSkpfXZhciBoPXt9O2lmKGI9Ynx8e30sYi5waG90b3Mpe3ZhciBpPWIucGhvdG9zLmNvbnN0cnVjdG9yPT09T2JqZWN0LGs9aT9iLnBob3Rvczp7fSxsPWsuZGF0YXx8W10sbT1rLnN0YXJ0fHwwO2lmKGguaW1nSW5kZXg9KDB8bSkrMSxiLmltZz1iLmltZ3x8ImltZyIsaSl7aWYoMD09PWwubGVuZ3RoKXJldHVybiBmLm1zZygiJiN4NkNBMTsmI3g2NzA5OyYjeDU2RkU7JiN4NzI0NzsiKX1lbHNle3ZhciBuPWMoYi5waG90b3MpLG89ZnVuY3Rpb24oKXtsPVtdLG4uZmluZChiLmltZykuZWFjaChmdW5jdGlvbihhKXt2YXIgYj1jKHRoaXMpO2IuYXR0cigibGF5ZXItaW5kZXgiLGEpLGwucHVzaCh7YWx0OmIuYXR0cigiYWx0IikscGlkOmIuYXR0cigibGF5ZXItcGlkIiksc3JjOmIuYXR0cigibGF5ZXItc3JjIil8fGIuYXR0cigic3JjIiksdGh1bWI6Yi5hdHRyKCJzcmMiKX0pfSl9O2lmKG8oKSwwPT09bC5sZW5ndGgpcmV0dXJuO2lmKGR8fG4ub24oImNsaWNrIixiLmltZyxmdW5jdGlvbigpe3ZhciBhPWModGhpcyksZD1hLmF0dHIoImxheWVyLWluZGV4Iik7Zi5waG90b3MoYy5leHRlbmQoYix7cGhvdG9zOntzdGFydDpkLGRhdGE6bCx0YWI6Yi50YWJ9LGZ1bGw6Yi5mdWxsfSksITApLG8oKX0pLCFkKXJldHVybn1oLmltZ3ByZXY9ZnVuY3Rpb24oYSl7aC5pbWdJbmRleC0tLGguaW1nSW5kZXg8MSYmKGguaW1nSW5kZXg9bC5sZW5ndGgpLGgudGFiaW1nKGEpfSxoLmltZ25leHQ9ZnVuY3Rpb24oYSxiKXtoLmltZ0luZGV4KyssaC5pbWdJbmRleD5sLmxlbmd0aCYmKGguaW1nSW5kZXg9MSxiKXx8aC50YWJpbWcoYSl9LGgua2V5dXA9ZnVuY3Rpb24oYSl7aWYoIWguZW5kKXt2YXIgYj1hLmtleUNvZGU7YS5wcmV2ZW50RGVmYXVsdCgpLDM3PT09Yj9oLmltZ3ByZXYoITApOjM5PT09Yj9oLmltZ25leHQoITApOjI3PT09YiYmZi5jbG9zZShoLmluZGV4KX19LGgudGFiaW1nPWZ1bmN0aW9uKGEpe2wubGVuZ3RoPD0xfHwoay5zdGFydD1oLmltZ0luZGV4LTEsZi5jbG9zZShoLmluZGV4KSxmLnBob3RvcyhiLCEwLGEpKX0saC5ldmVudD1mdW5jdGlvbigpe2guYmlnaW1nLmhvdmVyKGZ1bmN0aW9uKCl7aC5pbWdzZWUuc2hvdygpfSxmdW5jdGlvbigpe2guaW1nc2VlLmhpZGUoKX0pLGguYmlnaW1nLmZpbmQoIi5sYXl1aS1sYXllci1pbWdwcmV2Iikub24oImNsaWNrIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksaC5pbWdwcmV2KCl9KSxoLmJpZ2ltZy5maW5kKCIubGF5dWktbGF5ZXItaW1nbmV4dCIpLm9uKCJjbGljayIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGguaW1nbmV4dCgpfSksYyhkb2N1bWVudCkub24oImtleXVwIixoLmtleXVwKX0saC5sb2FkaT1mLmxvYWQoMSx7c2hhZGU6InNoYWRlImluIGI/ITE6Ljksc2Nyb2xsYmFyOiExfSksZyhsW21dLnNyYyxmdW5jdGlvbihkKXtmLmNsb3NlKGgubG9hZGkpLGguaW5kZXg9Zi5vcGVuKGMuZXh0ZW5kKHt0eXBlOjEsYXJlYTpmdW5jdGlvbigpe3ZhciBlPVtkLndpZHRoLGQuaGVpZ2h0XSxmPVtjKGEpLndpZHRoKCktNTAsYyhhKS5oZWlnaHQoKS01MF07cmV0dXJuIWIuZnVsbCYmZVswXT5mWzBdJiYoZVswXT1mWzBdLGVbMV09ZVswXSpkLmhlaWdodC9kLndpZHRoKSxbZVswXSsicHgiLGVbMV0rInB4Il19KCksdGl0bGU6ITEsc2hhZGU6Ljksc2hhZGVDbG9zZTohMCxjbG9zZUJ0bjohMSxtb3ZlOiIubGF5dWktbGF5ZXItcGhpbWcgaW1nIixtb3ZlVHlwZToxLHNjcm9sbGJhcjohMSxtb3ZlT3V0OiEwLHNoaWZ0OjUqTWF0aC5yYW5kb20oKXwwLHNraW46ImxheXVpLWxheWVyLXBob3RvcyIraigicGhvdG9zIiksY29udGVudDonPGRpdiBjbGFzcz0ibGF5dWktbGF5ZXItcGhpbWciPjxpbWcgc3JjPSInK2xbbV0uc3JjKyciIGFsdD0iJysobFttXS5hbHR8fCIiKSsnIiBsYXllci1waWQ9IicrbFttXS5waWQrJyI+PGRpdiBjbGFzcz0ibGF5dWktbGF5ZXItaW1nc2VlIj4nKyhsLmxlbmd0aD4xPyc8c3BhbiBjbGFzcz0ibGF5dWktbGF5ZXItaW1ndWlkZSI+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0ibGF5dWktbGF5ZXItaWNvbmV4dCBsYXl1aS1sYXllci1pbWdwcmV2Ij48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDo7IiBjbGFzcz0ibGF5dWktbGF5ZXItaWNvbmV4dCBsYXl1aS1sYXllci1pbWduZXh0Ij48L2E+PC9zcGFuPic6IiIpKyc8ZGl2IGNsYXNzPSJsYXl1aS1sYXllci1pbWdiYXIiIHN0eWxlPSJkaXNwbGF5OicrKGU/ImJsb2NrIjoiIikrJyI+PHNwYW4gY2xhc3M9ImxheXVpLWxheWVyLWltZ3RpdCI+PGEgaHJlZj0iamF2YXNjcmlwdDo7Ij4nKyhsW21dLmFsdHx8IiIpKyI8L2E+PGVtPiIraC5pbWdJbmRleCsiLyIrbC5sZW5ndGgrIjwvZW0+PC9zcGFuPjwvZGl2PjwvZGl2PjwvZGl2PiIsc3VjY2VzczpmdW5jdGlvbihhLGMpe2guYmlnaW1nPWEuZmluZCgiLmxheXVpLWxheWVyLXBoaW1nIiksaC5pbWdzZWU9YS5maW5kKCIubGF5dWktbGF5ZXItaW1ndWlkZSwubGF5dWktbGF5ZXItaW1nYmFyIiksaC5ldmVudChhKSxiLnRhYiYmYi50YWIobFttXSxhKX0sZW5kOmZ1bmN0aW9uKCl7aC5lbmQ9ITAsYyhkb2N1bWVudCkub2ZmKCJrZXl1cCIsaC5rZXl1cCl9fSxiKSl9LGZ1bmN0aW9uKCl7Zi5jbG9zZShoLmxvYWRpKSxmLm1zZygiJiN4NUY1MzsmI3g1MjREOyYjeDU2RkU7JiN4NzI0NzsmI3g1NzMwOyYjeDU3NDA7JiN4NUYwMjsmI3g1RTM4Ozxicj4mI3g2NjJGOyYjeDU0MjY7JiN4N0VFNzsmI3g3RUVEOyYjeDY3RTU7JiN4NzcwQjsmI3g0RTBCOyYjeDRFMDA7JiN4NUYyMDsmI3hGRjFGOyIse3RpbWU6M2U0LGJ0bjpbIiYjeDRFMEI7JiN4NEUwMDsmI3g1RjIwOyIsIiYjeDRFMEQ7JiN4NzcwQjsmI3g0RTg2OyJdLHllczpmdW5jdGlvbigpe2wubGVuZ3RoPjEmJmguaW1nbmV4dCghMCwhMCl9fSl9KX19LGUucnVuPWZ1bmN0aW9uKCl7Yz1qUXVlcnksZD1jKGEpLGguaHRtbD1jKCJodG1sIiksZi5vcGVuPWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBnKGEpO3JldHVybiBiLmluZGV4fX0sImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZT9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gZS5ydW4oKSxmfSk6ZnVuY3Rpb24oKXtlLnJ1bigpLGYudXNlKCJza2luL2xheWVyLmNzcyIpfSgpfSh3aW5kb3cpOw=="},{"meta":{"name":"Reflect.min.js","url":"https://lib.baomitu.com/reflect-metadata/0.1.13/Reflect.min.js","ts":1591001487158,"mimetype":"text/javascript"},"source":"dmFyIFJlZmxlY3Q7IWZ1bmN0aW9uKG8peyFmdW5jdGlvbih0KXt2YXIgZT0ib2JqZWN0Ij09dHlwZW9mIGdsb2JhbD9nbG9iYWw6Im9iamVjdCI9PXR5cGVvZiBzZWxmP3NlbGY6Im9iamVjdCI9PXR5cGVvZiB0aGlzP3RoaXM6RnVuY3Rpb24oInJldHVybiB0aGlzOyIpKCkscj1uKG8pO2Z1bmN0aW9uIG4ocixuKXtyZXR1cm4gZnVuY3Rpb24odCxlKXsiZnVuY3Rpb24iIT10eXBlb2Ygclt0XSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsdCx7Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmV9KSxuJiZuKHQsZSl9fXZvaWQgMD09PWUuUmVmbGVjdD9lLlJlZmxlY3Q9bzpyPW4oZS5SZWZsZWN0LHIpLGZ1bmN0aW9uKHQpe3ZhciBmPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksZT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sLGk9ZSYmdm9pZCAwIT09U3ltYm9sLnRvUHJpbWl0aXZlP1N5bWJvbC50b1ByaW1pdGl2ZToiQEB0b1ByaW1pdGl2ZSIscz1lJiZ2b2lkIDAhPT1TeW1ib2wuaXRlcmF0b3I/U3ltYm9sLml0ZXJhdG9yOiJAQGl0ZXJhdG9yIixyPSJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuY3JlYXRlLG49e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5LG89IXImJiFuLGM9e2NyZWF0ZTpyP2Z1bmN0aW9uKCl7cmV0dXJuIFUoT2JqZWN0LmNyZWF0ZShudWxsKSl9Om4/ZnVuY3Rpb24oKXtyZXR1cm4gVSh7X19wcm90b19fOm51bGx9KX06ZnVuY3Rpb24oKXtyZXR1cm4gVSh7fSl9LGhhczpvP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIGYuY2FsbCh0LGUpfTpmdW5jdGlvbih0LGUpe3JldHVybiBlIGluIHR9LGdldDpvP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIGYuY2FsbCh0LGUpP3RbZV06dm9pZCAwfTpmdW5jdGlvbih0LGUpe3JldHVybiB0W2VdfX0sdT1PYmplY3QuZ2V0UHJvdG90eXBlT2YoRnVuY3Rpb24pLGE9Im9iamVjdCI9PXR5cGVvZiBwcm9jZXNzJiZwcm9jZXNzLmVudiYmInRydWUiPT09cHJvY2Vzcy5lbnYuUkVGTEVDVF9NRVRBREFUQV9VU0VfTUFQX1BPTFlGSUxMLGg9YXx8ImZ1bmN0aW9uIiE9dHlwZW9mIE1hcHx8ImZ1bmN0aW9uIiE9dHlwZW9mIE1hcC5wcm90b3R5cGUuZW50cmllcz9mdW5jdGlvbigpe3ZhciBvPXt9LHI9W10sZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuX2luZGV4PTAsdGhpcy5fa2V5cz10LHRoaXMuX3ZhbHVlcz1lLHRoaXMuX3NlbGVjdG9yPXJ9cmV0dXJuIHQucHJvdG90eXBlWyJAQGl0ZXJhdG9yIl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGVbc109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2luZGV4O2lmKDA8PXQmJnQ8dGhpcy5fa2V5cy5sZW5ndGgpe3ZhciBlPXRoaXMuX3NlbGVjdG9yKHRoaXMuX2tleXNbdF0sdGhpcy5fdmFsdWVzW3RdKTtyZXR1cm4gdCsxPj10aGlzLl9rZXlzLmxlbmd0aD8odGhpcy5faW5kZXg9LTEsdGhpcy5fa2V5cz1yLHRoaXMuX3ZhbHVlcz1yKTp0aGlzLl9pbmRleCsrLHt2YWx1ZTplLGRvbmU6ITF9fXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19LHQucHJvdG90eXBlLnRocm93PWZ1bmN0aW9uKHQpe3Rocm93IDA8PXRoaXMuX2luZGV4JiYodGhpcy5faW5kZXg9LTEsdGhpcy5fa2V5cz1yLHRoaXMuX3ZhbHVlcz1yKSx0fSx0LnByb3RvdHlwZS5yZXR1cm49ZnVuY3Rpb24odCl7cmV0dXJuIDA8PXRoaXMuX2luZGV4JiYodGhpcy5faW5kZXg9LTEsdGhpcy5fa2V5cz1yLHRoaXMuX3ZhbHVlcz1yKSx7dmFsdWU6dCxkb25lOiEwfX0sdH0oKTtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5fa2V5cz1bXSx0aGlzLl92YWx1ZXM9W10sdGhpcy5fY2FjaGVLZXk9byx0aGlzLl9jYWNoZUluZGV4PS0yfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa2V5cy5sZW5ndGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiAwPD10aGlzLl9maW5kKHQsITEpfSx0LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZmluZCh0LCExKTtyZXR1cm4gMDw9ZT90aGlzLl92YWx1ZXNbZV06dm9pZCAwfSx0LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLl9maW5kKHQsITApO3JldHVybiB0aGlzLl92YWx1ZXNbcl09ZSx0aGlzfSx0LnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZmluZCh0LCExKTtpZigwPD1lKXtmb3IodmFyIHI9dGhpcy5fa2V5cy5sZW5ndGgsbj1lKzE7bjxyO24rKyl0aGlzLl9rZXlzW24tMV09dGhpcy5fa2V5c1tuXSx0aGlzLl92YWx1ZXNbbi0xXT10aGlzLl92YWx1ZXNbbl07cmV0dXJuIHRoaXMuX2tleXMubGVuZ3RoLS0sdGhpcy5fdmFsdWVzLmxlbmd0aC0tLHQ9PT10aGlzLl9jYWNoZUtleSYmKHRoaXMuX2NhY2hlS2V5PW8sdGhpcy5fY2FjaGVJbmRleD0tMiksITB9cmV0dXJuITF9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fa2V5cy5sZW5ndGg9MCx0aGlzLl92YWx1ZXMubGVuZ3RoPTAsdGhpcy5fY2FjaGVLZXk9byx0aGlzLl9jYWNoZUluZGV4PS0yfSx0LnByb3RvdHlwZS5rZXlzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMuX2tleXMsdGhpcy5fdmFsdWVzLG4pfSx0LnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy5fa2V5cyx0aGlzLl92YWx1ZXMsaSl9LHQucHJvdG90eXBlLmVudHJpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy5fa2V5cyx0aGlzLl92YWx1ZXMsdSl9LHQucHJvdG90eXBlWyJAQGl0ZXJhdG9yIl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbnRyaWVzKCl9LHQucHJvdG90eXBlW3NdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfSx0LnByb3RvdHlwZS5fZmluZD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWNoZUtleSE9PXQmJih0aGlzLl9jYWNoZUluZGV4PXRoaXMuX2tleXMuaW5kZXhPZih0aGlzLl9jYWNoZUtleT10KSksdGhpcy5fY2FjaGVJbmRleDwwJiZlJiYodGhpcy5fY2FjaGVJbmRleD10aGlzLl9rZXlzLmxlbmd0aCx0aGlzLl9rZXlzLnB1c2godCksdGhpcy5fdmFsdWVzLnB1c2godm9pZCAwKSksdGhpcy5fY2FjaGVJbmRleH0sdH0oKTtmdW5jdGlvbiBuKHQsZSl7cmV0dXJuIHR9ZnVuY3Rpb24gaSh0LGUpe3JldHVybiBlfWZ1bmN0aW9uIHUodCxlKXtyZXR1cm5bdCxlXX19KCk6TWFwLHk9YXx8ImZ1bmN0aW9uIiE9dHlwZW9mIFNldHx8ImZ1bmN0aW9uIiE9dHlwZW9mIFNldC5wcm90b3R5cGUuZW50cmllcz9mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLl9tYXA9bmV3IGh9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAuc2l6ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21hcC5oYXModCl9LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbWFwLnNldCh0LHQpLHRoaXN9LHQucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbWFwLmRlbGV0ZSh0KX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9tYXAuY2xlYXIoKX0sdC5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAua2V5cygpfSx0LnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwLnZhbHVlcygpfSx0LnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcC5lbnRyaWVzKCl9LHQucHJvdG90eXBlWyJAQGl0ZXJhdG9yIl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZXlzKCl9LHQucHJvdG90eXBlW3NdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2V5cygpfSx0fSgpOlNldCxwPW5ldyhhfHwiZnVuY3Rpb24iIT10eXBlb2YgV2Vha01hcD9mdW5jdGlvbigpe3ZhciBpPTE2LGU9Yy5jcmVhdGUoKSxyPW4oKTtyZXR1cm4gZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5fa2V5PW4oKX1yZXR1cm4gdC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3ZhciBlPW8odCwhMSk7cmV0dXJuIHZvaWQgMCE9PWUmJmMuaGFzKGUsdGhpcy5fa2V5KX0sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3ZhciBlPW8odCwhMSk7cmV0dXJuIHZvaWQgMCE9PWU/Yy5nZXQoZSx0aGlzLl9rZXkpOnZvaWQgMH0sdC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7dmFyIHI9byh0LCEwKTtyZXR1cm4gclt0aGlzLl9rZXldPWUsdGhpc30sdC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQpe3ZhciBlPW8odCwhMSk7cmV0dXJuIHZvaWQgMCE9PWUmJmRlbGV0ZSBlW3RoaXMuX2tleV19LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fa2V5PW4oKX0sdH0oKTtmdW5jdGlvbiBuKCl7Zm9yKHZhciB0O3Q9IkBAV2Vha01hcEBAIithKCksYy5oYXMoZSx0KTspO3JldHVybiBlW3RdPSEwLHR9ZnVuY3Rpb24gbyh0LGUpe2lmKCFmLmNhbGwodCxyKSl7aWYoIWUpcmV0dXJuO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIse3ZhbHVlOmMuY3JlYXRlKCl9KX1yZXR1cm4gdFtyXX1mdW5jdGlvbiB1KHQsZSl7Zm9yKHZhciByPTA7cjxlOysrcil0W3JdPTI1NSpNYXRoLnJhbmRvbSgpfDA7cmV0dXJuIHR9ZnVuY3Rpb24gYSgpe3ZhciB0LGU9KHQ9aSwiZnVuY3Rpb24iIT10eXBlb2YgVWludDhBcnJheT91KG5ldyBBcnJheSh0KSx0KToidW5kZWZpbmVkIiE9dHlwZW9mIGNyeXB0bz9jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KHQpKToidW5kZWZpbmVkIiE9dHlwZW9mIG1zQ3J5cHRvP21zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSh0KSk6dShuZXcgVWludDhBcnJheSh0KSx0KSk7ZVs2XT03OSZlWzZdfDY0LGVbOF09MTkxJmVbOF18MTI4O2Zvcih2YXIgcj0iIixuPTA7bjxpOysrbil7dmFyIG89ZVtuXTs0IT09biYmNiE9PW4mJjghPT1ufHwocis9Ii0iKSxvPDE2JiYocis9IjAiKSxyKz1vLnRvU3RyaW5nKDE2KS50b0xvd2VyQ2FzZSgpfXJldHVybiByfX0oKTpXZWFrTWFwKTtmdW5jdGlvbiBsKHQsZSl7Zm9yKHZhciByPXQubGVuZ3RoLTE7MDw9cjstLXIpe3ZhciBuPXRbcl0sbz1uKGUpO2lmKCFPKG8pJiYhaihvKSl7aWYoIVIobykpdGhyb3cgbmV3IFR5cGVFcnJvcjtlPW99fXJldHVybiBlfWZ1bmN0aW9uIHYodCxlLHIsbil7Zm9yKHZhciBvPXQubGVuZ3RoLTE7MDw9bzstLW8pe3ZhciBpPXRbb10sdT1pKGUscixuKTtpZighTyh1KSYmIWoodSkpe2lmKCF4KHUpKXRocm93IG5ldyBUeXBlRXJyb3I7bj11fX1yZXR1cm4gbn1mdW5jdGlvbiBfKHQsZSxyKXt2YXIgbj1wLmdldCh0KTtpZihPKG4pKXtpZighcilyZXR1cm47bj1uZXcgaCxwLnNldCh0LG4pfXZhciBvPW4uZ2V0KGUpO2lmKE8obykpe2lmKCFyKXJldHVybjtvPW5ldyBoLG4uc2V0KGUsbyl9cmV0dXJuIG99ZnVuY3Rpb24gZCh0LGUscil7dmFyIG49dyh0LGUscik7aWYobilyZXR1cm4hMDt2YXIgbz1MKGUpO3JldHVybiFqKG8pJiZkKHQsbyxyKX1mdW5jdGlvbiB3KHQsZSxyKXt2YXIgbj1fKGUsciwhMSk7cmV0dXJuIU8obikmJiEhbi5oYXModCl9ZnVuY3Rpb24gZyh0LGUscil7dmFyIG49dyh0LGUscik7aWYobilyZXR1cm4gYih0LGUscik7dmFyIG89TChlKTtyZXR1cm4gaihvKT92b2lkIDA6Zyh0LG8scil9ZnVuY3Rpb24gYih0LGUscil7dmFyIG49XyhlLHIsITEpO2lmKCFPKG4pKXJldHVybiBuLmdldCh0KX1mdW5jdGlvbiBrKHQsZSxyLG4pe3ZhciBvPV8ocixuLCEwKTtvLnNldCh0LGUpfWZ1bmN0aW9uIG0odCxlKXt2YXIgcj1FKHQsZSksbj1MKHQpO2lmKG51bGw9PT1uKXJldHVybiByO3ZhciBvPW0obixlKTtpZihvLmxlbmd0aDw9MClyZXR1cm4gcjtpZihyLmxlbmd0aDw9MClyZXR1cm4gbztmb3IodmFyIGk9bmV3IHksdT1bXSxhPTAsZj1yO2E8Zi5sZW5ndGg7YSsrKXt2YXIgYz1mW2FdLHM9aS5oYXMoYyk7c3x8KGkuYWRkKGMpLHUucHVzaChjKSl9Zm9yKHZhciBoPTAscD1vO2g8cC5sZW5ndGg7aCsrKXt2YXIgYz1wW2hdLHM9aS5oYXMoYyk7c3x8KGkuYWRkKGMpLHUucHVzaChjKSl9cmV0dXJuIHV9ZnVuY3Rpb24gRSh0LGUpe3ZhciByPVtdLG49Xyh0LGUsITEpO2lmKE8obikpcmV0dXJuIHI7Zm9yKHZhciBvLGk9bi5rZXlzKCksdT1mdW5jdGlvbih0KXt2YXIgZT1LKHQscyk7aWYoIVMoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgcj1lLmNhbGwodCk7aWYoIXgocikpdGhyb3cgbmV3IFR5cGVFcnJvcjtyZXR1cm4gcn0oaSksYT0wOzspe3ZhciBmPSh2b2lkIDAsIShvPXUubmV4dCgpKS5kb25lJiZvKTtpZighZilyZXR1cm4gci5sZW5ndGg9YSxyO3ZhciBjPWYudmFsdWU7dHJ5e3JbYV09Y31jYXRjaCh0KXt0cnl7eih1KX1maW5hbGx5e3Rocm93IHR9fWErK319ZnVuY3Rpb24gVCh0KXtpZihudWxsPT09dClyZXR1cm4gMTtzd2l0Y2godHlwZW9mIHQpe2Nhc2UidW5kZWZpbmVkIjpyZXR1cm4gMDtjYXNlImJvb2xlYW4iOnJldHVybiAyO2Nhc2Uic3RyaW5nIjpyZXR1cm4gMztjYXNlInN5bWJvbCI6cmV0dXJuIDQ7Y2FzZSJudW1iZXIiOnJldHVybiA1O2Nhc2Uib2JqZWN0IjpyZXR1cm4gbnVsbD09PXQ/MTo2O2RlZmF1bHQ6cmV0dXJuIDZ9fWZ1bmN0aW9uIE8odCl7cmV0dXJuIHZvaWQgMD09PXR9ZnVuY3Rpb24gaih0KXtyZXR1cm4gbnVsbD09PXR9ZnVuY3Rpb24geCh0KXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIHQ/bnVsbCE9PXQ6ImZ1bmN0aW9uIj09dHlwZW9mIHR9ZnVuY3Rpb24gTSh0LGUpe3N3aXRjaChUKHQpKXtjYXNlIDA6Y2FzZSAxOmNhc2UgMjpjYXNlIDM6Y2FzZSA0OmNhc2UgNTpyZXR1cm4gdH12YXIgcj0zPT09ZT8ic3RyaW5nIjo1PT09ZT8ibnVtYmVyIjoiZGVmYXVsdCIsbj1LKHQsaSk7aWYodm9pZCAwPT09bilyZXR1cm4gZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIj09PWUpe3ZhciByPXQudG9TdHJpbmc7aWYoUyhyKSl7dmFyIG49ci5jYWxsKHQpO2lmKCF4KG4pKXJldHVybiBufXZhciBvPXQudmFsdWVPZjtpZihTKG8pKXt2YXIgbj1vLmNhbGwodCk7aWYoIXgobikpcmV0dXJuIG59fWVsc2V7dmFyIG89dC52YWx1ZU9mO2lmKFMobykpe3ZhciBuPW8uY2FsbCh0KTtpZigheChuKSlyZXR1cm4gbn12YXIgaT10LnRvU3RyaW5nO2lmKFMoaSkpe3ZhciBuPWkuY2FsbCh0KTtpZigheChuKSlyZXR1cm4gbn19dGhyb3cgbmV3IFR5cGVFcnJvcn0odCwiZGVmYXVsdCI9PT1yPyJudW1iZXIiOnIpO3ZhciBvPW4uY2FsbCh0LHIpO2lmKHgobykpdGhyb3cgbmV3IFR5cGVFcnJvcjtyZXR1cm4gb31mdW5jdGlvbiBBKHQpe3ZhciBlPU0odCwzKTtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGU/ZToiIitlfWZ1bmN0aW9uIFAodCl7cmV0dXJuIEFycmF5LmlzQXJyYXk/QXJyYXkuaXNBcnJheSh0KTp0IGluc3RhbmNlb2YgT2JqZWN0P3QgaW5zdGFuY2VvZiBBcnJheToiW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpfWZ1bmN0aW9uIFModCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHR9ZnVuY3Rpb24gUih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdH1mdW5jdGlvbiBJKHQpe3N3aXRjaChUKHQpKXtjYXNlIDM6Y2FzZSA0OnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fWZ1bmN0aW9uIEsodCxlKXt2YXIgcj10W2VdO2lmKG51bGwhPXIpe2lmKCFTKHIpKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIHJ9fWZ1bmN0aW9uIHoodCl7dmFyIGU9dC5yZXR1cm47ZSYmZS5jYWxsKHQpfWZ1bmN0aW9uIEwodCl7dmFyIGU9T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0fHx0PT09dSlyZXR1cm4gZTtpZihlIT09dSlyZXR1cm4gZTt2YXIgcj10LnByb3RvdHlwZSxuPXImJk9iamVjdC5nZXRQcm90b3R5cGVPZihyKTtpZihudWxsPT1ufHxuPT09T2JqZWN0LnByb3RvdHlwZSlyZXR1cm4gZTt2YXIgbz1uLmNvbnN0cnVjdG9yO3JldHVybiJmdW5jdGlvbiIhPXR5cGVvZiBvP2U6bz09PXQ/ZTpvfWZ1bmN0aW9uIFUodCl7cmV0dXJuIHQuX189dm9pZCAwLGRlbGV0ZSB0Ll9fLHR9dCgiZGVjb3JhdGUiLGZ1bmN0aW9uKHQsZSxyLG4pe3tpZihPKHIpKXtpZighUCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKCFSKGUpKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIGwodCxlKX1pZighUCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKCF4KGUpKXRocm93IG5ldyBUeXBlRXJyb3I7aWYoIXgobikmJiFPKG4pJiYhaihuKSl0aHJvdyBuZXcgVHlwZUVycm9yO3JldHVybiBqKG4pJiYobj12b2lkIDApLHI9QShyKSx2KHQsZSxyLG4pfX0pLHQoIm1ldGFkYXRhIixmdW5jdGlvbihyLG4pe2Z1bmN0aW9uIHQodCxlKXtpZigheCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKCFPKGUpJiYhSShlKSl0aHJvdyBuZXcgVHlwZUVycm9yO2socixuLHQsZSl9cmV0dXJuIHR9KSx0KCJkZWZpbmVNZXRhZGF0YSIsZnVuY3Rpb24odCxlLHIsbil7aWYoIXgocikpdGhyb3cgbmV3IFR5cGVFcnJvcjtPKG4pfHwobj1BKG4pKTtyZXR1cm4gayh0LGUscixuKX0pLHQoImhhc01ldGFkYXRhIixmdW5jdGlvbih0LGUscil7aWYoIXgoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcjtPKHIpfHwocj1BKHIpKTtyZXR1cm4gZCh0LGUscil9KSx0KCJoYXNPd25NZXRhZGF0YSIsZnVuY3Rpb24odCxlLHIpe2lmKCF4KGUpKXRocm93IG5ldyBUeXBlRXJyb3I7TyhyKXx8KHI9QShyKSk7cmV0dXJuIHcodCxlLHIpfSksdCgiZ2V0TWV0YWRhdGEiLGZ1bmN0aW9uKHQsZSxyKXtpZigheChlKSl0aHJvdyBuZXcgVHlwZUVycm9yO08ocil8fChyPUEocikpO3JldHVybiBnKHQsZSxyKX0pLHQoImdldE93bk1ldGFkYXRhIixmdW5jdGlvbih0LGUscil7aWYoIXgoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcjtPKHIpfHwocj1BKHIpKTtyZXR1cm4gYih0LGUscil9KSx0KCJnZXRNZXRhZGF0YUtleXMiLGZ1bmN0aW9uKHQsZSl7aWYoIXgodCkpdGhyb3cgbmV3IFR5cGVFcnJvcjtPKGUpfHwoZT1BKGUpKTtyZXR1cm4gbSh0LGUpfSksdCgiZ2V0T3duTWV0YWRhdGFLZXlzIixmdW5jdGlvbih0LGUpe2lmKCF4KHQpKXRocm93IG5ldyBUeXBlRXJyb3I7TyhlKXx8KGU9QShlKSk7cmV0dXJuIEUodCxlKX0pLHQoImRlbGV0ZU1ldGFkYXRhIixmdW5jdGlvbih0LGUscil7aWYoIXgoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcjtPKHIpfHwocj1BKHIpKTt2YXIgbj1fKGUsciwhMSk7aWYoTyhuKSlyZXR1cm4hMTtpZighbi5kZWxldGUodCkpcmV0dXJuITE7aWYoMDxuLnNpemUpcmV0dXJuITA7dmFyIG89cC5nZXQoZSk7cmV0dXJuIG8uZGVsZXRlKHIpLDA8by5zaXplfHxwLmRlbGV0ZShlKSwhMH0pfShyKX0oKX0oUmVmbGVjdHx8KFJlZmxlY3Q9e30pKTs="},{"meta":{"name":"vue.min.js","url":"https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js","ts":1591001487094,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjExCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUodCk6KGU9ZXx8c2VsZikuVnVlPXQoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgZT1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiB0KGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIG51bGwhPWV9ZnVuY3Rpb24gcihlKXtyZXR1cm4hMD09PWV9ZnVuY3Rpb24gaShlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8InN5bWJvbCI9PXR5cGVvZiBlfHwiYm9vbGVhbiI9PXR5cGVvZiBlfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGwhPT1lJiYib2JqZWN0Ij09dHlwZW9mIGV9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKGUpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKGUpfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9cGFyc2VGbG9hdChTdHJpbmcoZSkpO3JldHVybiB0Pj0wJiZNYXRoLmZsb29yKHQpPT09dCYmaXNGaW5pdGUoZSl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gbihlKSYmImZ1bmN0aW9uIj09dHlwZW9mIGUudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIGUuY2F0Y2h9ZnVuY3Rpb24gbChlKXtyZXR1cm4gbnVsbD09ZT8iIjpBcnJheS5pc0FycmF5KGUpfHxzKGUpJiZlLnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeShlLG51bGwsMik6U3RyaW5nKGUpfWZ1bmN0aW9uIGYoZSl7dmFyIHQ9cGFyc2VGbG9hdChlKTtyZXR1cm4gaXNOYU4odCk/ZTp0fWZ1bmN0aW9uIHAoZSx0KXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPWUuc3BsaXQoIiwiKSxpPTA7aTxyLmxlbmd0aDtpKyspbltyW2ldXT0hMDtyZXR1cm4gdD9mdW5jdGlvbihlKXtyZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbihlKXtyZXR1cm4gbltlXX19dmFyIGQ9cCgic2xvdCxjb21wb25lbnQiLCEwKSx2PXAoImtleSxyZWYsc2xvdCxzbG90LXNjb3BlLGlzIik7ZnVuY3Rpb24gaChlLHQpe2lmKGUubGVuZ3RoKXt2YXIgbj1lLmluZGV4T2YodCk7aWYobj4tMSlyZXR1cm4gZS5zcGxpY2UobiwxKX19dmFyIG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiB5KGUsdCl7cmV0dXJuIG0uY2FsbChlLHQpfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHRbbl18fCh0W25dPWUobikpfX12YXIgXz0vLShcdykvZyxiPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShfLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/dC50b1VwcGVyQ2FzZSgpOiIifSl9KSwkPWcoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKX0pLHc9L1xCKFtBLVpdKS9nLEM9ZyhmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKHcsIi0kMSIpLnRvTG93ZXJDYXNlKCl9KTt2YXIgeD1GdW5jdGlvbi5wcm90b3R5cGUuYmluZD9mdW5jdGlvbihlLHQpe3JldHVybiBlLmJpbmQodCl9OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihuKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO3JldHVybiByP3I+MT9lLmFwcGx5KHQsYXJndW1lbnRzKTplLmNhbGwodCxuKTplLmNhbGwodCl9cmV0dXJuIG4uX2xlbmd0aD1lLmxlbmd0aCxufTtmdW5jdGlvbiBrKGUsdCl7dD10fHwwO2Zvcih2YXIgbj1lLmxlbmd0aC10LHI9bmV3IEFycmF5KG4pO24tLTspcltuXT1lW24rdF07cmV0dXJuIHJ9ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBPKGUpe2Zvcih2YXIgdD17fSxuPTA7bjxlLmxlbmd0aDtuKyspZVtuXSYmQSh0LGVbbl0pO3JldHVybiB0fWZ1bmN0aW9uIFMoZSx0LG4pe312YXIgVD1mdW5jdGlvbihlLHQsbil7cmV0dXJuITF9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Z1bmN0aW9uIE4oZSx0KXtpZihlPT09dClyZXR1cm4hMDt2YXIgbj1vKGUpLHI9byh0KTtpZighbnx8IXIpcmV0dXJuIW4mJiFyJiZTdHJpbmcoZSk9PT1TdHJpbmcodCk7dHJ5e3ZhciBpPUFycmF5LmlzQXJyYXkoZSksYT1BcnJheS5pc0FycmF5KHQpO2lmKGkmJmEpcmV0dXJuIGUubGVuZ3RoPT09dC5sZW5ndGgmJmUuZXZlcnkoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTihlLHRbbl0pfSk7aWYoZSBpbnN0YW5jZW9mIERhdGUmJnQgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlLmdldFRpbWUoKT09PXQuZ2V0VGltZSgpO2lmKGl8fGEpcmV0dXJuITE7dmFyIHM9T2JqZWN0LmtleXMoZSksYz1PYmplY3Qua2V5cyh0KTtyZXR1cm4gcy5sZW5ndGg9PT1jLmxlbmd0aCYmcy5ldmVyeShmdW5jdGlvbihuKXtyZXR1cm4gTihlW25dLHRbbl0pfSl9Y2F0Y2goZSl7cmV0dXJuITF9fWZ1bmN0aW9uIGooZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihOKGVbbl0sdCkpcmV0dXJuIG47cmV0dXJuLTF9ZnVuY3Rpb24gRChlKXt2YXIgdD0hMTtyZXR1cm4gZnVuY3Rpb24oKXt0fHwodD0hMCxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fXZhciBMPSJkYXRhLXNlcnZlci1yZW5kZXJlZCIsTT1bImNvbXBvbmVudCIsImRpcmVjdGl2ZSIsImZpbHRlciJdLEk9WyJiZWZvcmVDcmVhdGUiLCJjcmVhdGVkIiwiYmVmb3JlTW91bnQiLCJtb3VudGVkIiwiYmVmb3JlVXBkYXRlIiwidXBkYXRlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZWQiLCJkZWFjdGl2YXRlZCIsImVycm9yQ2FwdHVyZWQiLCJzZXJ2ZXJQcmVmZXRjaCJdLEY9e29wdGlvbk1lcmdlU3RyYXRlZ2llczpPYmplY3QuY3JlYXRlKG51bGwpLHNpbGVudDohMSxwcm9kdWN0aW9uVGlwOiExLGRldnRvb2xzOiExLHBlcmZvcm1hbmNlOiExLGVycm9ySGFuZGxlcjpudWxsLHdhcm5IYW5kbGVyOm51bGwsaWdub3JlZEVsZW1lbnRzOltdLGtleUNvZGVzOk9iamVjdC5jcmVhdGUobnVsbCksaXNSZXNlcnZlZFRhZzpULGlzUmVzZXJ2ZWRBdHRyOlQsaXNVbmtub3duRWxlbWVudDpULGdldFRhZ05hbWVzcGFjZTpTLHBhcnNlUGxhdGZvcm1UYWdOYW1lOkUsbXVzdFVzZVByb3A6VCxhc3luYzohMCxfbGlmZWN5Y2xlSG9va3M6SX0sUD0vYS16QS1aXHUwMEI3XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMzdEXHUwMzdGLVx1MUZGRlx1MjAwQy1cdTIwMERcdTIwM0YtXHUyMDQwXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkQvO2Z1bmN0aW9uIFIoZSx0LG4scil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7dmFsdWU6bixlbnVtZXJhYmxlOiEhcix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KX12YXIgSD1uZXcgUmVnRXhwKCJbXiIrUC5zb3VyY2UrIi4kX1xcZF0iKTt2YXIgQixVPSJfX3Byb3RvX18iaW57fSx6PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93LFY9InVuZGVmaW5lZCIhPXR5cGVvZiBXWEVudmlyb25tZW50JiYhIVdYRW52aXJvbm1lbnQucGxhdGZvcm0sSz1WJiZXWEVudmlyb25tZW50LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksSj16JiZ3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHE9SiYmL21zaWV8dHJpZGVudC8udGVzdChKKSxXPUomJkouaW5kZXhPZigibXNpZSA5LjAiKT4wLFo9SiYmSi5pbmRleE9mKCJlZGdlLyIpPjAsRz0oSiYmSi5pbmRleE9mKCJhbmRyb2lkIiksSiYmL2lwaG9uZXxpcGFkfGlwb2R8aW9zLy50ZXN0KEopfHwiaW9zIj09PUspLFg9KEomJi9jaHJvbWVcL1xkKy8udGVzdChKKSxKJiYvcGhhbnRvbWpzLy50ZXN0KEopLEomJkoubWF0Y2goL2ZpcmVmb3hcLyhcZCspLykpLFk9e30ud2F0Y2gsUT0hMTtpZih6KXRyeXt2YXIgZWU9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGVlLCJwYXNzaXZlIix7Z2V0OmZ1bmN0aW9uKCl7UT0hMH19KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidGVzdC1wYXNzaXZlIixudWxsLGVlKX1jYXRjaChlKXt9dmFyIHRlPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PUImJihCPSF6JiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLEJ9LG5lPXomJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIHJlKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYvbmF0aXZlIGNvZGUvLnRlc3QoZS50b1N0cmluZygpKX12YXIgaWUsb2U9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJnJlKFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmcmUoUmVmbGVjdC5vd25LZXlzKTtpZT0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmcmUoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09dGhpcy5zZXRbZV19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLnNldFtlXT0hMH0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSxlfSgpO3ZhciBhZT1TLHNlPTAsY2U9ZnVuY3Rpb24oKXt0aGlzLmlkPXNlKyssdGhpcy5zdWJzPVtdfTtjZS5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKGUpe3RoaXMuc3Vicy5wdXNoKGUpfSxjZS5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKGUpe2godGhpcy5zdWJzLGUpfSxjZS5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Y2UudGFyZ2V0JiZjZS50YXJnZXQuYWRkRGVwKHRoaXMpfSxjZS5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuc3Vicy5zbGljZSgpLHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspZVt0XS51cGRhdGUoKX0sY2UudGFyZ2V0PW51bGw7dmFyIHVlPVtdO2Z1bmN0aW9uIGxlKGUpe3VlLnB1c2goZSksY2UudGFyZ2V0PWV9ZnVuY3Rpb24gZmUoKXt1ZS5wb3AoKSxjZS50YXJnZXQ9dWVbdWUubGVuZ3RoLTFdfXZhciBwZT1mdW5jdGlvbihlLHQsbixyLGksbyxhLHMpe3RoaXMudGFnPWUsdGhpcy5kYXRhPXQsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPWksdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PW8sdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9dCYmdC5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZGU9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtkZS5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGUucHJvdG90eXBlLGRlKTt2YXIgdmU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9IiIpO3ZhciB0PW5ldyBwZTtyZXR1cm4gdC50ZXh0PWUsdC5pc0NvbW1lbnQ9ITAsdH07ZnVuY3Rpb24gaGUoZSl7cmV0dXJuIG5ldyBwZSh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcoZSkpfWZ1bmN0aW9uIG1lKGUpe3ZhciB0PW5ldyBwZShlLnRhZyxlLmRhdGEsZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5zbGljZSgpLGUudGV4dCxlLmVsbSxlLmNvbnRleHQsZS5jb21wb25lbnRPcHRpb25zLGUuYXN5bmNGYWN0b3J5KTtyZXR1cm4gdC5ucz1lLm5zLHQuaXNTdGF0aWM9ZS5pc1N0YXRpYyx0LmtleT1lLmtleSx0LmlzQ29tbWVudD1lLmlzQ29tbWVudCx0LmZuQ29udGV4dD1lLmZuQ29udGV4dCx0LmZuT3B0aW9ucz1lLmZuT3B0aW9ucyx0LmZuU2NvcGVJZD1lLmZuU2NvcGVJZCx0LmFzeW5jTWV0YT1lLmFzeW5jTWV0YSx0LmlzQ2xvbmVkPSEwLHR9dmFyIHllPUFycmF5LnByb3RvdHlwZSxnZT1PYmplY3QuY3JlYXRlKHllKTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9eWVbZV07UihnZSxlLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBpLG89dC5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKGUpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjppPW47YnJlYWs7Y2FzZSJzcGxpY2UiOmk9bi5zbGljZSgyKX1yZXR1cm4gaSYmYS5vYnNlcnZlQXJyYXkoaSksYS5kZXAubm90aWZ5KCksb30pfSk7dmFyIF9lPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdlKSxiZT0hMDtmdW5jdGlvbiAkZShlKXtiZT1lfXZhciB3ZT1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnZhbHVlPWUsdGhpcy5kZXA9bmV3IGNlLHRoaXMudm1Db3VudD0wLFIoZSwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KGUpPyhVPyh0PWdlLGUuX19wcm90b19fPXQpOmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPW4ubGVuZ3RoO3I8aTtyKyspe3ZhciBvPW5bcl07UihlLG8sdFtvXSl9fShlLGdlLF9lKSx0aGlzLm9ic2VydmVBcnJheShlKSk6dGhpcy53YWxrKGUpfTtmdW5jdGlvbiBDZShlLHQpe3ZhciBuO2lmKG8oZSkmJiEoZSBpbnN0YW5jZW9mIHBlKSlyZXR1cm4geShlLCJfX29iX18iKSYmZS5fX29iX18gaW5zdGFuY2VvZiB3ZT9uPWUuX19vYl9fOmJlJiYhdGUoKSYmKEFycmF5LmlzQXJyYXkoZSl8fHMoZSkpJiZPYmplY3QuaXNFeHRlbnNpYmxlKGUpJiYhZS5faXNWdWUmJihuPW5ldyB3ZShlKSksdCYmbiYmbi52bUNvdW50Kyssbn1mdW5jdGlvbiB4ZShlLHQsbixyLGkpe3ZhciBvPW5ldyBjZSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZighYXx8ITEhPT1hLmNvbmZpZ3VyYWJsZSl7dmFyIHM9YSYmYS5nZXQsYz1hJiZhLnNldDtzJiYhY3x8MiE9PWFyZ3VtZW50cy5sZW5ndGh8fChuPWVbdF0pO3ZhciB1PSFpJiZDZShuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1zP3MuY2FsbChlKTpuO3JldHVybiBjZS50YXJnZXQmJihvLmRlcGVuZCgpLHUmJih1LmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KHQpJiZmdW5jdGlvbiBlKHQpe2Zvcih2YXIgbj12b2lkIDAscj0wLGk9dC5sZW5ndGg7cjxpO3IrKykobj10W3JdKSYmbi5fX29iX18mJm4uX19vYl9fLmRlcC5kZXBlbmQoKSxBcnJheS5pc0FycmF5KG4pJiZlKG4pfSh0KSkpLHR9LHNldDpmdW5jdGlvbih0KXt2YXIgcj1zP3MuY2FsbChlKTpuO3Q9PT1yfHx0IT10JiZyIT1yfHxzJiYhY3x8KGM/Yy5jYWxsKGUsdCk6bj10LHU9IWkmJkNlKHQpLG8ubm90aWZ5KCkpfX0pfX1mdW5jdGlvbiBrZShlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSYmYyh0KSlyZXR1cm4gZS5sZW5ndGg9TWF0aC5tYXgoZS5sZW5ndGgsdCksZS5zcGxpY2UodCwxLG4pLG47aWYodCBpbiBlJiYhKHQgaW4gT2JqZWN0LnByb3RvdHlwZSkpcmV0dXJuIGVbdF09bixuO3ZhciByPWUuX19vYl9fO3JldHVybiBlLl9pc1Z1ZXx8ciYmci52bUNvdW50P246cj8oeGUoci52YWx1ZSx0LG4pLHIuZGVwLm5vdGlmeSgpLG4pOihlW3RdPW4sbil9ZnVuY3Rpb24gQWUoZSx0KXtpZihBcnJheS5pc0FycmF5KGUpJiZjKHQpKWUuc3BsaWNlKHQsMSk7ZWxzZXt2YXIgbj1lLl9fb2JfXztlLl9pc1Z1ZXx8biYmbi52bUNvdW50fHx5KGUsdCkmJihkZWxldGUgZVt0XSxuJiZuLmRlcC5ub3RpZnkoKSl9fXdlLnByb3RvdHlwZS53YWxrPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1PYmplY3Qua2V5cyhlKSxuPTA7bjx0Lmxlbmd0aDtuKyspeGUoZSx0W25dKX0sd2UucHJvdG90eXBlLm9ic2VydmVBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoO3Q8bjt0KyspQ2UoZVt0XSl9O3ZhciBPZT1GLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztmdW5jdGlvbiBTZShlLHQpe2lmKCF0KXJldHVybiBlO2Zvcih2YXIgbixyLGksbz1vZT9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksYT0wO2E8by5sZW5ndGg7YSsrKSJfX29iX18iIT09KG49b1thXSkmJihyPWVbbl0saT10W25dLHkoZSxuKT9yIT09aSYmcyhyKSYmcyhpKSYmU2UocixpKTprZShlLG4saSkpO3JldHVybiBlfWZ1bmN0aW9uIFRlKGUsdCxuKXtyZXR1cm4gbj9mdW5jdGlvbigpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQsaT0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwobixuKTplO3JldHVybiByP1NlKHIsaSk6aX06dD9lP2Z1bmN0aW9uKCl7cmV0dXJuIFNlKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbCh0aGlzLHRoaXMpOnQsImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSl9OnQ6ZX1mdW5jdGlvbiBFZShlLHQpe3ZhciBuPXQ/ZT9lLmNvbmNhdCh0KTpBcnJheS5pc0FycmF5KHQpP3Q6W3RdOmU7cmV0dXJuIG4/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoO24rKyktMT09PXQuaW5kZXhPZihlW25dKSYmdC5wdXNoKGVbbl0pO3JldHVybiB0fShuKTpufWZ1bmN0aW9uIE5lKGUsdCxuLHIpe3ZhciBpPU9iamVjdC5jcmVhdGUoZXx8bnVsbCk7cmV0dXJuIHQ/QShpLHQpOml9T2UuZGF0YT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/VGUoZSx0LG4pOnQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6VGUoZSx0KX0sSS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2VdPUVlfSksTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09lW2UrInMiXT1OZX0pLE9lLndhdGNoPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKGU9PT1ZJiYoZT12b2lkIDApLHQ9PT1ZJiYodD12b2lkIDApLCF0KXJldHVybiBPYmplY3QuY3JlYXRlKGV8fG51bGwpO2lmKCFlKXJldHVybiB0O3ZhciBpPXt9O2Zvcih2YXIgbyBpbiBBKGksZSksdCl7dmFyIGE9aVtvXSxzPXRbb107YSYmIUFycmF5LmlzQXJyYXkoYSkmJihhPVthXSksaVtvXT1hP2EuY29uY2F0KHMpOkFycmF5LmlzQXJyYXkocyk/czpbc119cmV0dXJuIGl9LE9lLnByb3BzPU9lLm1ldGhvZHM9T2UuaW5qZWN0PU9lLmNvbXB1dGVkPWZ1bmN0aW9uKGUsdCxuLHIpe2lmKCFlKXJldHVybiB0O3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIEEoaSxlKSx0JiZBKGksdCksaX0sT2UucHJvdmlkZT1UZTt2YXIgamU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9lOnR9O2Z1bmN0aW9uIERlKGUsdCxuKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHQ9dC5vcHRpb25zKSxmdW5jdGlvbihlLHQpe3ZhciBuPWUucHJvcHM7aWYobil7dmFyIHIsaSxvPXt9O2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHI9bi5sZW5ndGg7ci0tOykic3RyaW5nIj09dHlwZW9mKGk9bltyXSkmJihvW2IoaSldPXt0eXBlOm51bGx9KTtlbHNlIGlmKHMobikpZm9yKHZhciBhIGluIG4paT1uW2FdLG9bYihhKV09cyhpKT9pOnt0eXBlOml9O2UucHJvcHM9b319KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5pbmplY3Q7aWYobil7dmFyIHI9ZS5pbmplY3Q9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKylyW25baV1dPXtmcm9tOm5baV19O2Vsc2UgaWYocyhuKSlmb3IodmFyIG8gaW4gbil7dmFyIGE9bltvXTtyW29dPXMoYSk/QSh7ZnJvbTpvfSxhKTp7ZnJvbTphfX19fSh0KSxmdW5jdGlvbihlKXt2YXIgdD1lLmRpcmVjdGl2ZXM7aWYodClmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTsiZnVuY3Rpb24iPT10eXBlb2YgciYmKHRbbl09e2JpbmQ6cix1cGRhdGU6cn0pfX0odCksIXQuX2Jhc2UmJih0LmV4dGVuZHMmJihlPURlKGUsdC5leHRlbmRzLG4pKSx0Lm1peGlucykpZm9yKHZhciByPTAsaT10Lm1peGlucy5sZW5ndGg7cjxpO3IrKyllPURlKGUsdC5taXhpbnNbcl0sbik7dmFyIG8sYT17fTtmb3IobyBpbiBlKWMobyk7Zm9yKG8gaW4gdCl5KGUsbyl8fGMobyk7ZnVuY3Rpb24gYyhyKXt2YXIgaT1PZVtyXXx8amU7YVtyXT1pKGVbcl0sdFtyXSxuLHIpfXJldHVybiBhfWZ1bmN0aW9uIExlKGUsdCxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2Ygbil7dmFyIGk9ZVt0XTtpZih5KGksbikpcmV0dXJuIGlbbl07dmFyIG89YihuKTtpZih5KGksbykpcmV0dXJuIGlbb107dmFyIGE9JChvKTtyZXR1cm4geShpLGEpP2lbYV06aVtuXXx8aVtvXXx8aVthXX19ZnVuY3Rpb24gTWUoZSx0LG4scil7dmFyIGk9dFtlXSxvPSF5KG4sZSksYT1uW2VdLHM9UGUoQm9vbGVhbixpLnR5cGUpO2lmKHM+LTEpaWYobyYmIXkoaSwiZGVmYXVsdCIpKWE9ITE7ZWxzZSBpZigiIj09PWF8fGE9PT1DKGUpKXt2YXIgYz1QZShTdHJpbmcsaS50eXBlKTsoYzwwfHxzPGMpJiYoYT0hMCl9aWYodm9pZCAwPT09YSl7YT1mdW5jdGlvbihlLHQsbil7aWYoIXkodCwiZGVmYXVsdCIpKXJldHVybjt2YXIgcj10LmRlZmF1bHQ7aWYoZSYmZS4kb3B0aW9ucy5wcm9wc0RhdGEmJnZvaWQgMD09PWUuJG9wdGlvbnMucHJvcHNEYXRhW25dJiZ2b2lkIDAhPT1lLl9wcm9wc1tuXSlyZXR1cm4gZS5fcHJvcHNbbl07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJiJGdW5jdGlvbiIhPT1JZSh0LnR5cGUpP3IuY2FsbChlKTpyfShyLGksZSk7dmFyIHU9YmU7JGUoITApLENlKGEpLCRlKHUpfXJldHVybiBhfWZ1bmN0aW9uIEllKGUpe3ZhciB0PWUmJmUudG9TdHJpbmcoKS5tYXRjaCgvXlxzKmZ1bmN0aW9uIChcdyspLyk7cmV0dXJuIHQ/dFsxXToiIn1mdW5jdGlvbiBGZShlLHQpe3JldHVybiBJZShlKT09PUllKHQpfWZ1bmN0aW9uIFBlKGUsdCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEZlKHQsZSk/MDotMTtmb3IodmFyIG49MCxyPXQubGVuZ3RoO248cjtuKyspaWYoRmUodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBSZShlLHQsbil7bGUoKTt0cnl7aWYodClmb3IodmFyIHI9dDtyPXIuJHBhcmVudDspe3ZhciBpPXIuJG9wdGlvbnMuZXJyb3JDYXB0dXJlZDtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXRyeXtpZighMT09PWlbb10uY2FsbChyLGUsdCxuKSlyZXR1cm59Y2F0Y2goZSl7QmUoZSxyLCJlcnJvckNhcHR1cmVkIGhvb2siKX19QmUoZSx0LG4pfWZpbmFsbHl7ZmUoKX19ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgbzt0cnl7KG89bj9lLmFwcGx5KHQsbik6ZS5jYWxsKHQpKSYmIW8uX2lzVnVlJiZ1KG8pJiYhby5faGFuZGxlZCYmKG8uY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFJlKGUscixpKyIgKFByb21pc2UvYXN5bmMpIil9KSxvLl9oYW5kbGVkPSEwKX1jYXRjaChlKXtSZShlLHIsaSl9cmV0dXJuIG99ZnVuY3Rpb24gQmUoZSx0LG4pe2lmKEYuZXJyb3JIYW5kbGVyKXRyeXtyZXR1cm4gRi5lcnJvckhhbmRsZXIuY2FsbChudWxsLGUsdCxuKX1jYXRjaCh0KXt0IT09ZSYmVWUodCxudWxsLCJjb25maWcuZXJyb3JIYW5kbGVyIil9VWUoZSx0LG4pfWZ1bmN0aW9uIFVlKGUsdCxuKXtpZigheiYmIVZ8fCJ1bmRlZmluZWQiPT10eXBlb2YgY29uc29sZSl0aHJvdyBlO2NvbnNvbGUuZXJyb3IoZSl9dmFyIHplLFZlPSExLEtlPVtdLEplPSExO2Z1bmN0aW9uIHFlKCl7SmU9ITE7dmFyIGU9S2Uuc2xpY2UoMCk7S2UubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWlmKCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSYmcmUoUHJvbWlzZSkpe3ZhciBXZT1Qcm9taXNlLnJlc29sdmUoKTt6ZT1mdW5jdGlvbigpe1dlLnRoZW4ocWUpLEcmJnNldFRpbWVvdXQoUyl9LFZlPSEwfWVsc2UgaWYocXx8InVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwhcmUoTXV0YXRpb25PYnNlcnZlcikmJiJbb2JqZWN0IE11dGF0aW9uT2JzZXJ2ZXJDb25zdHJ1Y3Rvcl0iIT09TXV0YXRpb25PYnNlcnZlci50b1N0cmluZygpKXplPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0SW1tZWRpYXRlJiZyZShzZXRJbW1lZGlhdGUpP2Z1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKHFlKX06ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHFlLDApfTtlbHNle3ZhciBaZT0xLEdlPW5ldyBNdXRhdGlvbk9ic2VydmVyKHFlKSxYZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShTdHJpbmcoWmUpKTtHZS5vYnNlcnZlKFhlLHtjaGFyYWN0ZXJEYXRhOiEwfSksemU9ZnVuY3Rpb24oKXtaZT0oWmUrMSklMixYZS5kYXRhPVN0cmluZyhaZSl9LFZlPSEwfWZ1bmN0aW9uIFllKGUsdCl7dmFyIG47aWYoS2UucHVzaChmdW5jdGlvbigpe2lmKGUpdHJ5e2UuY2FsbCh0KX1jYXRjaChlKXtSZShlLHQsIm5leHRUaWNrIil9ZWxzZSBuJiZuKHQpfSksSmV8fChKZT0hMCx6ZSgpKSwhZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtuPWV9KX12YXIgUWU9bmV3IGllO2Z1bmN0aW9uIGV0KGUpeyFmdW5jdGlvbiBlKHQsbil7dmFyIHIsaTt2YXIgYT1BcnJheS5pc0FycmF5KHQpO2lmKCFhJiYhbyh0KXx8T2JqZWN0LmlzRnJvemVuKHQpfHx0IGluc3RhbmNlb2YgcGUpcmV0dXJuO2lmKHQuX19vYl9fKXt2YXIgcz10Ll9fb2JfXy5kZXAuaWQ7aWYobi5oYXMocykpcmV0dXJuO24uYWRkKHMpfWlmKGEpZm9yKHI9dC5sZW5ndGg7ci0tOyllKHRbcl0sbik7ZWxzZSBmb3IoaT1PYmplY3Qua2V5cyh0KSxyPWkubGVuZ3RoO3ItLTspZSh0W2lbcl1dLG4pfShlLFFlKSxRZS5jbGVhcigpfXZhciB0dD1nKGZ1bmN0aW9uKGUpe3ZhciB0PSImIj09PWUuY2hhckF0KDApLG49In4iPT09KGU9dD9lLnNsaWNlKDEpOmUpLmNoYXJBdCgwKSxyPSIhIj09PShlPW4/ZS5zbGljZSgxKTplKS5jaGFyQXQoMCk7cmV0dXJue25hbWU6ZT1yP2Uuc2xpY2UoMSk6ZSxvbmNlOm4sY2FwdHVyZTpyLHBhc3NpdmU6dH19KTtmdW5jdGlvbiBudChlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZT1hcmd1bWVudHMscj1uLmZucztpZighQXJyYXkuaXNBcnJheShyKSlyZXR1cm4gSGUocixudWxsLGFyZ3VtZW50cyx0LCJ2LW9uIGhhbmRsZXIiKTtmb3IodmFyIGk9ci5zbGljZSgpLG89MDtvPGkubGVuZ3RoO28rKylIZShpW29dLG51bGwsZSx0LCJ2LW9uIGhhbmRsZXIiKX1yZXR1cm4gbi5mbnM9ZSxufWZ1bmN0aW9uIHJ0KGUsbixpLG8sYSxzKXt2YXIgYyx1LGwsZjtmb3IoYyBpbiBlKXU9ZVtjXSxsPW5bY10sZj10dChjKSx0KHUpfHwodChsKT8odCh1LmZucykmJih1PWVbY109bnQodSxzKSkscihmLm9uY2UpJiYodT1lW2NdPWEoZi5uYW1lLHUsZi5jYXB0dXJlKSksaShmLm5hbWUsdSxmLmNhcHR1cmUsZi5wYXNzaXZlLGYucGFyYW1zKSk6dSE9PWwmJihsLmZucz11LGVbY109bCkpO2ZvcihjIGluIG4pdChlW2NdKSYmbygoZj10dChjKSkubmFtZSxuW2NdLGYuY2FwdHVyZSl9ZnVuY3Rpb24gaXQoZSxpLG8pe3ZhciBhO2UgaW5zdGFuY2VvZiBwZSYmKGU9ZS5kYXRhLmhvb2t8fChlLmRhdGEuaG9vaz17fSkpO3ZhciBzPWVbaV07ZnVuY3Rpb24gYygpe28uYXBwbHkodGhpcyxhcmd1bWVudHMpLGgoYS5mbnMsYyl9dChzKT9hPW50KFtjXSk6bihzLmZucykmJnIocy5tZXJnZWQpPyhhPXMpLmZucy5wdXNoKGMpOmE9bnQoW3MsY10pLGEubWVyZ2VkPSEwLGVbaV09YX1mdW5jdGlvbiBvdChlLHQscixpLG8pe2lmKG4odCkpe2lmKHkodCxyKSlyZXR1cm4gZVtyXT10W3JdLG98fGRlbGV0ZSB0W3JdLCEwO2lmKHkodCxpKSlyZXR1cm4gZVtyXT10W2ldLG98fGRlbGV0ZSB0W2ldLCEwfXJldHVybiExfWZ1bmN0aW9uIGF0KGUpe3JldHVybiBpKGUpP1toZShlKV06QXJyYXkuaXNBcnJheShlKT9mdW5jdGlvbiBlKG8sYSl7dmFyIHM9W107dmFyIGMsdSxsLGY7Zm9yKGM9MDtjPG8ubGVuZ3RoO2MrKyl0KHU9b1tjXSl8fCJib29sZWFuIj09dHlwZW9mIHV8fChsPXMubGVuZ3RoLTEsZj1zW2xdLEFycmF5LmlzQXJyYXkodSk/dS5sZW5ndGg+MCYmKHN0KCh1PWUodSwoYXx8IiIpKyJfIitjKSlbMF0pJiZzdChmKSYmKHNbbF09aGUoZi50ZXh0K3VbMF0udGV4dCksdS5zaGlmdCgpKSxzLnB1c2guYXBwbHkocyx1KSk6aSh1KT9zdChmKT9zW2xdPWhlKGYudGV4dCt1KToiIiE9PXUmJnMucHVzaChoZSh1KSk6c3QodSkmJnN0KGYpP3NbbF09aGUoZi50ZXh0K3UudGV4dCk6KHIoby5faXNWTGlzdCkmJm4odS50YWcpJiZ0KHUua2V5KSYmbihhKSYmKHUua2V5PSJfX3ZsaXN0IithKyJfIitjKyJfXyIpLHMucHVzaCh1KSkpO3JldHVybiBzfShlKTp2b2lkIDB9ZnVuY3Rpb24gc3QoZSl7cmV0dXJuIG4oZSkmJm4oZS50ZXh0KSYmITE9PT1lLmlzQ29tbWVudH1mdW5jdGlvbiBjdChlLHQpe2lmKGUpe2Zvcih2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9b2U/UmVmbGVjdC5vd25LZXlzKGUpOk9iamVjdC5rZXlzKGUpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTtpZigiX19vYl9fIiE9PW8pe2Zvcih2YXIgYT1lW29dLmZyb20scz10O3M7KXtpZihzLl9wcm92aWRlZCYmeShzLl9wcm92aWRlZCxhKSl7bltvXT1zLl9wcm92aWRlZFthXTticmVha31zPXMuJHBhcmVudH1pZighcyYmImRlZmF1bHQiaW4gZVtvXSl7dmFyIGM9ZVtvXS5kZWZhdWx0O25bb109ImZ1bmN0aW9uIj09dHlwZW9mIGM/Yy5jYWxsKHQpOmN9fX1yZXR1cm4gbn19ZnVuY3Rpb24gdXQoZSx0KXtpZighZXx8IWUubGVuZ3RoKXJldHVybnt9O2Zvcih2YXIgbj17fSxyPTAsaT1lLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1lW3JdLGE9by5kYXRhO2lmKGEmJmEuYXR0cnMmJmEuYXR0cnMuc2xvdCYmZGVsZXRlIGEuYXR0cnMuc2xvdCxvLmNvbnRleHQhPT10JiZvLmZuQ29udGV4dCE9PXR8fCFhfHxudWxsPT1hLnNsb3QpKG4uZGVmYXVsdHx8KG4uZGVmYXVsdD1bXSkpLnB1c2gobyk7ZWxzZXt2YXIgcz1hLnNsb3QsYz1uW3NdfHwobltzXT1bXSk7InRlbXBsYXRlIj09PW8udGFnP2MucHVzaC5hcHBseShjLG8uY2hpbGRyZW58fFtdKTpjLnB1c2gobyl9fWZvcih2YXIgdSBpbiBuKW5bdV0uZXZlcnkobHQpJiZkZWxldGUgblt1XTtyZXR1cm4gbn1mdW5jdGlvbiBsdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJiFlLmFzeW5jRmFjdG9yeXx8IiAiPT09ZS50ZXh0fWZ1bmN0aW9uIGZ0KHQsbixyKXt2YXIgaSxvPU9iamVjdC5rZXlzKG4pLmxlbmd0aD4wLGE9dD8hIXQuJHN0YWJsZTohbyxzPXQmJnQuJGtleTtpZih0KXtpZih0Ll9ub3JtYWxpemVkKXJldHVybiB0Ll9ub3JtYWxpemVkO2lmKGEmJnImJnIhPT1lJiZzPT09ci4ka2V5JiYhbyYmIXIuJGhhc05vcm1hbClyZXR1cm4gcjtmb3IodmFyIGMgaW4gaT17fSx0KXRbY10mJiIkIiE9PWNbMF0mJihpW2NdPXB0KG4sYyx0W2NdKSl9ZWxzZSBpPXt9O2Zvcih2YXIgdSBpbiBuKXUgaW4gaXx8KGlbdV09ZHQobix1KSk7cmV0dXJuIHQmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJih0Ll9ub3JtYWxpemVkPWkpLFIoaSwiJHN0YWJsZSIsYSksUihpLCIka2V5IixzKSxSKGksIiRoYXNOb3JtYWwiLG8pLGl9ZnVuY3Rpb24gcHQoZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD9uLmFwcGx5KG51bGwsYXJndW1lbnRzKTpuKHt9KTtyZXR1cm4oZT1lJiYib2JqZWN0Ij09dHlwZW9mIGUmJiFBcnJheS5pc0FycmF5KGUpP1tlXTphdChlKSkmJigwPT09ZS5sZW5ndGh8fDE9PT1lLmxlbmd0aCYmZVswXS5pc0NvbW1lbnQpP3ZvaWQgMDplfTtyZXR1cm4gbi5wcm94eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxyfWZ1bmN0aW9uIGR0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGVbdF19fWZ1bmN0aW9uIHZ0KGUsdCl7dmFyIHIsaSxhLHMsYztpZihBcnJheS5pc0FycmF5KGUpfHwic3RyaW5nIj09dHlwZW9mIGUpZm9yKHI9bmV3IEFycmF5KGUubGVuZ3RoKSxpPTAsYT1lLmxlbmd0aDtpPGE7aSsrKXJbaV09dChlW2ldLGkpO2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiBlKWZvcihyPW5ldyBBcnJheShlKSxpPTA7aTxlO2krKylyW2ldPXQoaSsxLGkpO2Vsc2UgaWYobyhlKSlpZihvZSYmZVtTeW1ib2wuaXRlcmF0b3JdKXtyPVtdO2Zvcih2YXIgdT1lW1N5bWJvbC5pdGVyYXRvcl0oKSxsPXUubmV4dCgpOyFsLmRvbmU7KXIucHVzaCh0KGwudmFsdWUsci5sZW5ndGgpKSxsPXUubmV4dCgpfWVsc2UgZm9yKHM9T2JqZWN0LmtleXMoZSkscj1uZXcgQXJyYXkocy5sZW5ndGgpLGk9MCxhPXMubGVuZ3RoO2k8YTtpKyspYz1zW2ldLHJbaV09dChlW2NdLGMsaSk7cmV0dXJuIG4ocil8fChyPVtdKSxyLl9pc1ZMaXN0PSEwLHJ9ZnVuY3Rpb24gaHQoZSx0LG4scil7dmFyIGksbz10aGlzLiRzY29wZWRTbG90c1tlXTtvPyhuPW58fHt9LHImJihuPUEoQSh7fSxyKSxuKSksaT1vKG4pfHx0KTppPXRoaXMuJHNsb3RzW2VdfHx0O3ZhciBhPW4mJm4uc2xvdDtyZXR1cm4gYT90aGlzLiRjcmVhdGVFbGVtZW50KCJ0ZW1wbGF0ZSIse3Nsb3Q6YX0saSk6aX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gTGUodGhpcy4kb3B0aW9ucywiZmlsdGVycyIsZSl8fEV9ZnVuY3Rpb24geXQoZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT8tMT09PWUuaW5kZXhPZih0KTplIT09dH1mdW5jdGlvbiBndChlLHQsbixyLGkpe3ZhciBvPUYua2V5Q29kZXNbdF18fG47cmV0dXJuIGkmJnImJiFGLmtleUNvZGVzW3RdP3l0KGkscik6bz95dChvLGUpOnI/QyhyKSE9PXQ6dm9pZCAwfWZ1bmN0aW9uIF90KGUsdCxuLHIsaSl7aWYobilpZihvKG4pKXt2YXIgYTtBcnJheS5pc0FycmF5KG4pJiYobj1PKG4pKTt2YXIgcz1mdW5jdGlvbihvKXtpZigiY2xhc3MiPT09b3x8InN0eWxlIj09PW98fHYobykpYT1lO2Vsc2V7dmFyIHM9ZS5hdHRycyYmZS5hdHRycy50eXBlO2E9cnx8Ri5tdXN0VXNlUHJvcCh0LHMsbyk/ZS5kb21Qcm9wc3x8KGUuZG9tUHJvcHM9e30pOmUuYXR0cnN8fChlLmF0dHJzPXt9KX12YXIgYz1iKG8pLHU9QyhvKTtjIGluIGF8fHUgaW4gYXx8KGFbb109bltvXSxpJiYoKGUub258fChlLm9uPXt9KSlbInVwZGF0ZToiK29dPWZ1bmN0aW9uKGUpe25bb109ZX0pKX07Zm9yKHZhciBjIGluIG4pcyhjKX1lbHNlO3JldHVybiBlfWZ1bmN0aW9uIGJ0KGUsdCl7dmFyIG49dGhpcy5fc3RhdGljVHJlZXN8fCh0aGlzLl9zdGF0aWNUcmVlcz1bXSkscj1uW2VdO3JldHVybiByJiYhdD9yOih3dChyPW5bZV09dGhpcy4kb3B0aW9ucy5zdGF0aWNSZW5kZXJGbnNbZV0uY2FsbCh0aGlzLl9yZW5kZXJQcm94eSxudWxsLHRoaXMpLCJfX3N0YXRpY19fIitlLCExKSxyKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIHd0KGUsIl9fb25jZV9fIit0KyhuPyJfIituOiIiKSwhMCksZX1mdW5jdGlvbiB3dChlLHQsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdJiYic3RyaW5nIiE9dHlwZW9mIGVbcl0mJkN0KGVbcl0sdCsiXyIrcixuKTtlbHNlIEN0KGUsdCxuKX1mdW5jdGlvbiBDdChlLHQsbil7ZS5pc1N0YXRpYz0hMCxlLmtleT10LGUuaXNPbmNlPW59ZnVuY3Rpb24geHQoZSx0KXtpZih0KWlmKHModCkpe3ZhciBuPWUub249ZS5vbj9BKHt9LGUub24pOnt9O2Zvcih2YXIgciBpbiB0KXt2YXIgaT1uW3JdLG89dFtyXTtuW3JdPWk/W10uY29uY2F0KGksbyk6b319ZWxzZTtyZXR1cm4gZX1mdW5jdGlvbiBrdChlLHQsbixyKXt0PXR8fHskc3RhYmxlOiFufTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG89ZVtpXTtBcnJheS5pc0FycmF5KG8pP2t0KG8sdCxuKTpvJiYoby5wcm94eSYmKG8uZm4ucHJveHk9ITApLHRbby5rZXldPW8uZm4pfXJldHVybiByJiYodC4ka2V5PXIpLHR9ZnVuY3Rpb24gQXQoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRbbl07InN0cmluZyI9PXR5cGVvZiByJiZyJiYoZVt0W25dXT10W24rMV0pfXJldHVybiBlfWZ1bmN0aW9uIE90KGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP3QrZTplfWZ1bmN0aW9uIFN0KGUpe2UuX289JHQsZS5fbj1mLGUuX3M9bCxlLl9sPXZ0LGUuX3Q9aHQsZS5fcT1OLGUuX2k9aixlLl9tPWJ0LGUuX2Y9bXQsZS5faz1ndCxlLl9iPV90LGUuX3Y9aGUsZS5fZT12ZSxlLl91PWt0LGUuX2c9eHQsZS5fZD1BdCxlLl9wPU90fWZ1bmN0aW9uIFR0KHQsbixpLG8sYSl7dmFyIHMsYz10aGlzLHU9YS5vcHRpb25zO3kobywiX3VpZCIpPyhzPU9iamVjdC5jcmVhdGUobykpLl9vcmlnaW5hbD1vOihzPW8sbz1vLl9vcmlnaW5hbCk7dmFyIGw9cih1Ll9jb21waWxlZCksZj0hbDt0aGlzLmRhdGE9dCx0aGlzLnByb3BzPW4sdGhpcy5jaGlsZHJlbj1pLHRoaXMucGFyZW50PW8sdGhpcy5saXN0ZW5lcnM9dC5vbnx8ZSx0aGlzLmluamVjdGlvbnM9Y3QodS5pbmplY3QsbyksdGhpcy5zbG90cz1mdW5jdGlvbigpe3JldHVybiBjLiRzbG90c3x8ZnQodC5zY29wZWRTbG90cyxjLiRzbG90cz11dChpLG8pKSxjLiRzbG90c30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInNjb3BlZFNsb3RzIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZnQodC5zY29wZWRTbG90cyx0aGlzLnNsb3RzKCkpfX0pLGwmJih0aGlzLiRvcHRpb25zPXUsdGhpcy4kc2xvdHM9dGhpcy5zbG90cygpLHRoaXMuJHNjb3BlZFNsb3RzPWZ0KHQuc2NvcGVkU2xvdHMsdGhpcy4kc2xvdHMpKSx1Ll9zY29wZUlkP3RoaXMuX2M9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9UHQocyxlLHQsbixyLGYpO3JldHVybiBpJiYhQXJyYXkuaXNBcnJheShpKSYmKGkuZm5TY29wZUlkPXUuX3Njb3BlSWQsaS5mbkNvbnRleHQ9byksaX06dGhpcy5fYz1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gUHQocyxlLHQsbixyLGYpfX1mdW5jdGlvbiBFdChlLHQsbixyLGkpe3ZhciBvPW1lKGUpO3JldHVybiBvLmZuQ29udGV4dD1uLG8uZm5PcHRpb25zPXIsdC5zbG90JiYoKG8uZGF0YXx8KG8uZGF0YT17fSkpLnNsb3Q9dC5zbG90KSxvfWZ1bmN0aW9uIE50KGUsdCl7Zm9yKHZhciBuIGluIHQpZVtiKG4pXT10W25dfVN0KFR0LnByb3RvdHlwZSk7dmFyIGp0PXtpbml0OmZ1bmN0aW9uKGUsdCl7aWYoZS5jb21wb25lbnRJbnN0YW5jZSYmIWUuY29tcG9uZW50SW5zdGFuY2UuX2lzRGVzdHJveWVkJiZlLmRhdGEua2VlcEFsaXZlKXt2YXIgcj1lO2p0LnByZXBhdGNoKHIscil9ZWxzZXsoZS5jb21wb25lbnRJbnN0YW5jZT1mdW5jdGlvbihlLHQpe3ZhciByPXtfaXNDb21wb25lbnQ6ITAsX3BhcmVudFZub2RlOmUscGFyZW50OnR9LGk9ZS5kYXRhLmlubGluZVRlbXBsYXRlO24oaSkmJihyLnJlbmRlcj1pLnJlbmRlcixyLnN0YXRpY1JlbmRlckZucz1pLnN0YXRpY1JlbmRlckZucyk7cmV0dXJuIG5ldyBlLmNvbXBvbmVudE9wdGlvbnMuQ3RvcihyKX0oZSxXdCkpLiRtb3VudCh0P2UuZWxtOnZvaWQgMCx0KX19LHByZXBhdGNoOmZ1bmN0aW9uKHQsbil7dmFyIHI9bi5jb21wb25lbnRPcHRpb25zOyFmdW5jdGlvbih0LG4scixpLG8pe3ZhciBhPWkuZGF0YS5zY29wZWRTbG90cyxzPXQuJHNjb3BlZFNsb3RzLGM9ISEoYSYmIWEuJHN0YWJsZXx8cyE9PWUmJiFzLiRzdGFibGV8fGEmJnQuJHNjb3BlZFNsb3RzLiRrZXkhPT1hLiRrZXkpLHU9ISEob3x8dC4kb3B0aW9ucy5fcmVuZGVyQ2hpbGRyZW58fGMpO3QuJG9wdGlvbnMuX3BhcmVudFZub2RlPWksdC4kdm5vZGU9aSx0Ll92bm9kZSYmKHQuX3Zub2RlLnBhcmVudD1pKTtpZih0LiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbj1vLHQuJGF0dHJzPWkuZGF0YS5hdHRyc3x8ZSx0LiRsaXN0ZW5lcnM9cnx8ZSxuJiZ0LiRvcHRpb25zLnByb3BzKXskZSghMSk7Zm9yKHZhciBsPXQuX3Byb3BzLGY9dC4kb3B0aW9ucy5fcHJvcEtleXN8fFtdLHA9MDtwPGYubGVuZ3RoO3ArKyl7dmFyIGQ9ZltwXSx2PXQuJG9wdGlvbnMucHJvcHM7bFtkXT1NZShkLHYsbix0KX0kZSghMCksdC4kb3B0aW9ucy5wcm9wc0RhdGE9bn1yPXJ8fGU7dmFyIGg9dC4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzO3QuJG9wdGlvbnMuX3BhcmVudExpc3RlbmVycz1yLHF0KHQscixoKSx1JiYodC4kc2xvdHM9dXQobyxpLmNvbnRleHQpLHQuJGZvcmNlVXBkYXRlKCkpfShuLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2Usci5wcm9wc0RhdGEsci5saXN0ZW5lcnMsbixyLmNoaWxkcmVuKX0saW5zZXJ0OmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5jb250ZXh0LHI9ZS5jb21wb25lbnRJbnN0YW5jZTtyLl9pc01vdW50ZWR8fChyLl9pc01vdW50ZWQ9ITAsWXQociwibW91bnRlZCIpKSxlLmRhdGEua2VlcEFsaXZlJiYobi5faXNNb3VudGVkPygodD1yKS5faW5hY3RpdmU9ITEsZW4ucHVzaCh0KSk6WHQociwhMCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29tcG9uZW50SW5zdGFuY2U7dC5faXNEZXN0cm95ZWR8fChlLmRhdGEua2VlcEFsaXZlP2Z1bmN0aW9uIGUodCxuKXtpZihuJiYodC5fZGlyZWN0SW5hY3RpdmU9ITAsR3QodCkpKXJldHVybjtpZighdC5faW5hY3RpdmUpe3QuX2luYWN0aXZlPSEwO2Zvcih2YXIgcj0wO3I8dC4kY2hpbGRyZW4ubGVuZ3RoO3IrKyllKHQuJGNoaWxkcmVuW3JdKTtZdCh0LCJkZWFjdGl2YXRlZCIpfX0odCwhMCk6dC4kZGVzdHJveSgpKX19LER0PU9iamVjdC5rZXlzKGp0KTtmdW5jdGlvbiBMdChpLGEscyxjLGwpe2lmKCF0KGkpKXt2YXIgZj1zLiRvcHRpb25zLl9iYXNlO2lmKG8oaSkmJihpPWYuZXh0ZW5kKGkpKSwiZnVuY3Rpb24iPT10eXBlb2YgaSl7dmFyIHA7aWYodChpLmNpZCkmJnZvaWQgMD09PShpPWZ1bmN0aW9uKGUsaSl7aWYocihlLmVycm9yKSYmbihlLmVycm9yQ29tcCkpcmV0dXJuIGUuZXJyb3JDb21wO2lmKG4oZS5yZXNvbHZlZCkpcmV0dXJuIGUucmVzb2x2ZWQ7dmFyIGE9SHQ7YSYmbihlLm93bmVycykmJi0xPT09ZS5vd25lcnMuaW5kZXhPZihhKSYmZS5vd25lcnMucHVzaChhKTtpZihyKGUubG9hZGluZykmJm4oZS5sb2FkaW5nQ29tcCkpcmV0dXJuIGUubG9hZGluZ0NvbXA7aWYoYSYmIW4oZS5vd25lcnMpKXt2YXIgcz1lLm93bmVycz1bYV0sYz0hMCxsPW51bGwsZj1udWxsO2EuJG9uKCJob29rOmRlc3Ryb3llZCIsZnVuY3Rpb24oKXtyZXR1cm4gaChzLGEpfSk7dmFyIHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj1zLmxlbmd0aDt0PG47dCsrKXNbdF0uJGZvcmNlVXBkYXRlKCk7ZSYmKHMubGVuZ3RoPTAsbnVsbCE9PWwmJihjbGVhclRpbWVvdXQobCksbD1udWxsKSxudWxsIT09ZiYmKGNsZWFyVGltZW91dChmKSxmPW51bGwpKX0sZD1EKGZ1bmN0aW9uKHQpe2UucmVzb2x2ZWQ9QnQodCxpKSxjP3MubGVuZ3RoPTA6cCghMCl9KSx2PUQoZnVuY3Rpb24odCl7bihlLmVycm9yQ29tcCkmJihlLmVycm9yPSEwLHAoITApKX0pLG09ZShkLHYpO3JldHVybiBvKG0pJiYodShtKT90KGUucmVzb2x2ZWQpJiZtLnRoZW4oZCx2KTp1KG0uY29tcG9uZW50KSYmKG0uY29tcG9uZW50LnRoZW4oZCx2KSxuKG0uZXJyb3IpJiYoZS5lcnJvckNvbXA9QnQobS5lcnJvcixpKSksbihtLmxvYWRpbmcpJiYoZS5sb2FkaW5nQ29tcD1CdChtLmxvYWRpbmcsaSksMD09PW0uZGVsYXk/ZS5sb2FkaW5nPSEwOmw9c2V0VGltZW91dChmdW5jdGlvbigpe2w9bnVsbCx0KGUucmVzb2x2ZWQpJiZ0KGUuZXJyb3IpJiYoZS5sb2FkaW5nPSEwLHAoITEpKX0sbS5kZWxheXx8MjAwKSksbihtLnRpbWVvdXQpJiYoZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj1udWxsLHQoZS5yZXNvbHZlZCkmJnYobnVsbCl9LG0udGltZW91dCkpKSksYz0hMSxlLmxvYWRpbmc/ZS5sb2FkaW5nQ29tcDplLnJlc29sdmVkfX0ocD1pLGYpKSlyZXR1cm4gZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbz12ZSgpO3JldHVybiBvLmFzeW5jRmFjdG9yeT1lLG8uYXN5bmNNZXRhPXtkYXRhOnQsY29udGV4dDpuLGNoaWxkcmVuOnIsdGFnOml9LG99KHAsYSxzLGMsbCk7YT1hfHx7fSwkbihpKSxuKGEubW9kZWwpJiZmdW5jdGlvbihlLHQpe3ZhciByPWUubW9kZWwmJmUubW9kZWwucHJvcHx8InZhbHVlIixpPWUubW9kZWwmJmUubW9kZWwuZXZlbnR8fCJpbnB1dCI7KHQuYXR0cnN8fCh0LmF0dHJzPXt9KSlbcl09dC5tb2RlbC52YWx1ZTt2YXIgbz10Lm9ufHwodC5vbj17fSksYT1vW2ldLHM9dC5tb2RlbC5jYWxsYmFjaztuKGEpPyhBcnJheS5pc0FycmF5KGEpPy0xPT09YS5pbmRleE9mKHMpOmEhPT1zKSYmKG9baV09W3NdLmNvbmNhdChhKSk6b1tpXT1zfShpLm9wdGlvbnMsYSk7dmFyIGQ9ZnVuY3Rpb24oZSxyLGkpe3ZhciBvPXIub3B0aW9ucy5wcm9wcztpZighdChvKSl7dmFyIGE9e30scz1lLmF0dHJzLGM9ZS5wcm9wcztpZihuKHMpfHxuKGMpKWZvcih2YXIgdSBpbiBvKXt2YXIgbD1DKHUpO290KGEsYyx1LGwsITApfHxvdChhLHMsdSxsLCExKX1yZXR1cm4gYX19KGEsaSk7aWYocihpLm9wdGlvbnMuZnVuY3Rpb25hbCkpcmV0dXJuIGZ1bmN0aW9uKHQscixpLG8sYSl7dmFyIHM9dC5vcHRpb25zLGM9e30sdT1zLnByb3BzO2lmKG4odSkpZm9yKHZhciBsIGluIHUpY1tsXT1NZShsLHUscnx8ZSk7ZWxzZSBuKGkuYXR0cnMpJiZOdChjLGkuYXR0cnMpLG4oaS5wcm9wcykmJk50KGMsaS5wcm9wcyk7dmFyIGY9bmV3IFR0KGksYyxhLG8sdCkscD1zLnJlbmRlci5jYWxsKG51bGwsZi5fYyxmKTtpZihwIGluc3RhbmNlb2YgcGUpcmV0dXJuIEV0KHAsaSxmLnBhcmVudCxzKTtpZihBcnJheS5pc0FycmF5KHApKXtmb3IodmFyIGQ9YXQocCl8fFtdLHY9bmV3IEFycmF5KGQubGVuZ3RoKSxoPTA7aDxkLmxlbmd0aDtoKyspdltoXT1FdChkW2hdLGksZi5wYXJlbnQscyk7cmV0dXJuIHZ9fShpLGQsYSxzLGMpO3ZhciB2PWEub247aWYoYS5vbj1hLm5hdGl2ZU9uLHIoaS5vcHRpb25zLmFic3RyYWN0KSl7dmFyIG09YS5zbG90O2E9e30sbSYmKGEuc2xvdD1tKX0hZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuaG9va3x8KGUuaG9vaz17fSksbj0wO248RHQubGVuZ3RoO24rKyl7dmFyIHI9RHRbbl0saT10W3JdLG89anRbcl07aT09PW98fGkmJmkuX21lcmdlZHx8KHRbcl09aT9NdChvLGkpOm8pfX0oYSk7dmFyIHk9aS5vcHRpb25zLm5hbWV8fGw7cmV0dXJuIG5ldyBwZSgidnVlLWNvbXBvbmVudC0iK2kuY2lkKyh5PyItIit5OiIiKSxhLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHMse0N0b3I6aSxwcm9wc0RhdGE6ZCxsaXN0ZW5lcnM6dix0YWc6bCxjaGlsZHJlbjpjfSxwKX19fWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49ZnVuY3Rpb24obixyKXtlKG4sciksdChuLHIpfTtyZXR1cm4gbi5fbWVyZ2VkPSEwLG59dmFyIEl0PTEsRnQ9MjtmdW5jdGlvbiBQdChlLGEscyxjLHUsbCl7cmV0dXJuKEFycmF5LmlzQXJyYXkocyl8fGkocykpJiYodT1jLGM9cyxzPXZvaWQgMCkscihsKSYmKHU9RnQpLGZ1bmN0aW9uKGUsaSxhLHMsYyl7aWYobihhKSYmbihhLl9fb2JfXykpcmV0dXJuIHZlKCk7bihhKSYmbihhLmlzKSYmKGk9YS5pcyk7aWYoIWkpcmV0dXJuIHZlKCk7QXJyYXkuaXNBcnJheShzKSYmImZ1bmN0aW9uIj09dHlwZW9mIHNbMF0mJigoYT1hfHx7fSkuc2NvcGVkU2xvdHM9e2RlZmF1bHQ6c1swXX0scy5sZW5ndGg9MCk7Yz09PUZ0P3M9YXQocyk6Yz09PUl0JiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylpZihBcnJheS5pc0FycmF5KGVbdF0pKXJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGUpO3JldHVybiBlfShzKSk7dmFyIHUsbDtpZigic3RyaW5nIj09dHlwZW9mIGkpe3ZhciBmO2w9ZS4kdm5vZGUmJmUuJHZub2RlLm5zfHxGLmdldFRhZ05hbWVzcGFjZShpKSx1PUYuaXNSZXNlcnZlZFRhZyhpKT9uZXcgcGUoRi5wYXJzZVBsYXRmb3JtVGFnTmFtZShpKSxhLHMsdm9pZCAwLHZvaWQgMCxlKTphJiZhLnByZXx8IW4oZj1MZShlLiRvcHRpb25zLCJjb21wb25lbnRzIixpKSk/bmV3IHBlKGksYSxzLHZvaWQgMCx2b2lkIDAsZSk6THQoZixhLGUscyxpKX1lbHNlIHU9THQoaSxhLGUscyk7cmV0dXJuIEFycmF5LmlzQXJyYXkodSk/dTpuKHUpPyhuKGwpJiZmdW5jdGlvbiBlKGksbyxhKXtpLm5zPW87ImZvcmVpZ25PYmplY3QiPT09aS50YWcmJihvPXZvaWQgMCxhPSEwKTtpZihuKGkuY2hpbGRyZW4pKWZvcih2YXIgcz0wLGM9aS5jaGlsZHJlbi5sZW5ndGg7czxjO3MrKyl7dmFyIHU9aS5jaGlsZHJlbltzXTtuKHUudGFnKSYmKHQodS5ucyl8fHIoYSkmJiJzdmciIT09dS50YWcpJiZlKHUsbyxhKX19KHUsbCksbihhKSYmZnVuY3Rpb24oZSl7byhlLnN0eWxlKSYmZXQoZS5zdHlsZSk7byhlLmNsYXNzKSYmZXQoZS5jbGFzcyl9KGEpLHUpOnZlKCl9KGUsYSxzLGMsdSl9dmFyIFJ0LEh0PW51bGw7ZnVuY3Rpb24gQnQoZSx0KXtyZXR1cm4oZS5fX2VzTW9kdWxlfHxvZSYmIk1vZHVsZSI9PT1lW1N5bWJvbC50b1N0cmluZ1RhZ10pJiYoZT1lLmRlZmF1bHQpLG8oZSk/dC5leHRlbmQoZSk6ZX1mdW5jdGlvbiBVdChlKXtyZXR1cm4gZS5pc0NvbW1lbnQmJmUuYXN5bmNGYWN0b3J5fWZ1bmN0aW9uIHp0KGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciByPWVbdF07aWYobihyKSYmKG4oci5jb21wb25lbnRPcHRpb25zKXx8VXQocikpKXJldHVybiByfX1mdW5jdGlvbiBWdChlLHQpe1J0LiRvbihlLHQpfWZ1bmN0aW9uIEt0KGUsdCl7UnQuJG9mZihlLHQpfWZ1bmN0aW9uIEp0KGUsdCl7dmFyIG49UnQ7cmV0dXJuIGZ1bmN0aW9uIHIoKXtudWxsIT09dC5hcHBseShudWxsLGFyZ3VtZW50cykmJm4uJG9mZihlLHIpfX1mdW5jdGlvbiBxdChlLHQsbil7UnQ9ZSxydCh0LG58fHt9LFZ0LEt0LEp0LGUpLFJ0PXZvaWQgMH12YXIgV3Q9bnVsbDtmdW5jdGlvbiBadChlKXt2YXIgdD1XdDtyZXR1cm4gV3Q9ZSxmdW5jdGlvbigpe1d0PXR9fWZ1bmN0aW9uIEd0KGUpe2Zvcig7ZSYmKGU9ZS4kcGFyZW50KTspaWYoZS5faW5hY3RpdmUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gWHQoZSx0KXtpZih0KXtpZihlLl9kaXJlY3RJbmFjdGl2ZT0hMSxHdChlKSlyZXR1cm59ZWxzZSBpZihlLl9kaXJlY3RJbmFjdGl2ZSlyZXR1cm47aWYoZS5faW5hY3RpdmV8fG51bGw9PT1lLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITE7Zm9yKHZhciBuPTA7bjxlLiRjaGlsZHJlbi5sZW5ndGg7bisrKVh0KGUuJGNoaWxkcmVuW25dKTtZdChlLCJhY3RpdmF0ZWQiKX19ZnVuY3Rpb24gWXQoZSx0KXtsZSgpO3ZhciBuPWUuJG9wdGlvbnNbdF0scj10KyIgaG9vayI7aWYobilmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspSGUobltpXSxlLG51bGwsZSxyKTtlLl9oYXNIb29rRXZlbnQmJmUuJGVtaXQoImhvb2s6Iit0KSxmZSgpfXZhciBRdD1bXSxlbj1bXSx0bj17fSxubj0hMSxybj0hMSxvbj0wO3ZhciBhbj0wLHNuPURhdGUubm93O2lmKHomJiFxKXt2YXIgY249d2luZG93LnBlcmZvcm1hbmNlO2NuJiYiZnVuY3Rpb24iPT10eXBlb2YgY24ubm93JiZzbigpPmRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpLnRpbWVTdGFtcCYmKHNuPWZ1bmN0aW9uKCl7cmV0dXJuIGNuLm5vdygpfSl9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0O2Zvcihhbj1zbigpLHJuPSEwLFF0LnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pZC10LmlkfSksb249MDtvbjxRdC5sZW5ndGg7b24rKykoZT1RdFtvbl0pLmJlZm9yZSYmZS5iZWZvcmUoKSx0PWUuaWQsdG5bdF09bnVsbCxlLnJ1bigpO3ZhciBuPWVuLnNsaWNlKCkscj1RdC5zbGljZSgpO29uPVF0Lmxlbmd0aD1lbi5sZW5ndGg9MCx0bj17fSxubj1ybj0hMSxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLl9pbmFjdGl2ZT0hMCxYdChlW3RdLCEwKX0obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7Zm9yKDt0LS07KXt2YXIgbj1lW3RdLHI9bi52bTtyLl93YXRjaGVyPT09biYmci5faXNNb3VudGVkJiYhci5faXNEZXN0cm95ZWQmJll0KHIsInVwZGF0ZWQiKX19KHIpLG5lJiZGLmRldnRvb2xzJiZuZS5lbWl0KCJmbHVzaCIpfXZhciBsbj0wLGZuPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dGhpcy52bT1lLGkmJihlLl93YXRjaGVyPXRoaXMpLGUuX3dhdGNoZXJzLnB1c2godGhpcykscj8odGhpcy5kZWVwPSEhci5kZWVwLHRoaXMudXNlcj0hIXIudXNlcix0aGlzLmxhenk9ISFyLmxhenksdGhpcy5zeW5jPSEhci5zeW5jLHRoaXMuYmVmb3JlPXIuYmVmb3JlKTp0aGlzLmRlZXA9dGhpcy51c2VyPXRoaXMubGF6eT10aGlzLnN5bmM9ITEsdGhpcy5jYj1uLHRoaXMuaWQ9Kytsbix0aGlzLmFjdGl2ZT0hMCx0aGlzLmRpcnR5PXRoaXMubGF6eSx0aGlzLmRlcHM9W10sdGhpcy5uZXdEZXBzPVtdLHRoaXMuZGVwSWRzPW5ldyBpZSx0aGlzLm5ld0RlcElkcz1uZXcgaWUsdGhpcy5leHByZXNzaW9uPSIiLCJmdW5jdGlvbiI9PXR5cGVvZiB0P3RoaXMuZ2V0dGVyPXQ6KHRoaXMuZ2V0dGVyPWZ1bmN0aW9uKGUpe2lmKCFILnRlc3QoZSkpe3ZhciB0PWUuc3BsaXQoIi4iKTtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe2lmKCFlKXJldHVybjtlPWVbdFtuXV19cmV0dXJuIGV9fX0odCksdGhpcy5nZXR0ZXJ8fCh0aGlzLmdldHRlcj1TKSksdGhpcy52YWx1ZT10aGlzLmxhenk/dm9pZCAwOnRoaXMuZ2V0KCl9O2ZuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZTtsZSh0aGlzKTt2YXIgdD10aGlzLnZtO3RyeXtlPXRoaXMuZ2V0dGVyLmNhbGwodCx0KX1jYXRjaChlKXtpZighdGhpcy51c2VyKXRocm93IGU7UmUoZSx0LCdnZXR0ZXIgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZmluYWxseXt0aGlzLmRlZXAmJmV0KGUpLGZlKCksdGhpcy5jbGVhbnVwRGVwcygpfXJldHVybiBlfSxmbi5wcm90b3R5cGUuYWRkRGVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQ7dGhpcy5uZXdEZXBJZHMuaGFzKHQpfHwodGhpcy5uZXdEZXBJZHMuYWRkKHQpLHRoaXMubmV3RGVwcy5wdXNoKGUpLHRoaXMuZGVwSWRzLmhhcyh0KXx8ZS5hZGRTdWIodGhpcykpfSxmbi5wcm90b3R5cGUuY2xlYW51cERlcHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5kZXBzLmxlbmd0aDtlLS07KXt2YXIgdD10aGlzLmRlcHNbZV07dGhpcy5uZXdEZXBJZHMuaGFzKHQuaWQpfHx0LnJlbW92ZVN1Yih0aGlzKX12YXIgbj10aGlzLmRlcElkczt0aGlzLmRlcElkcz10aGlzLm5ld0RlcElkcyx0aGlzLm5ld0RlcElkcz1uLHRoaXMubmV3RGVwSWRzLmNsZWFyKCksbj10aGlzLmRlcHMsdGhpcy5kZXBzPXRoaXMubmV3RGVwcyx0aGlzLm5ld0RlcHM9bix0aGlzLm5ld0RlcHMubGVuZ3RoPTB9LGZuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmxhenk/dGhpcy5kaXJ0eT0hMDp0aGlzLnN5bmM/dGhpcy5ydW4oKTpmdW5jdGlvbihlKXt2YXIgdD1lLmlkO2lmKG51bGw9PXRuW3RdKXtpZih0blt0XT0hMCxybil7Zm9yKHZhciBuPVF0Lmxlbmd0aC0xO24+b24mJlF0W25dLmlkPmUuaWQ7KW4tLTtRdC5zcGxpY2UobisxLDAsZSl9ZWxzZSBRdC5wdXNoKGUpO25ufHwobm49ITAsWWUodW4pKX19KHRoaXMpfSxmbi5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3ZhciBlPXRoaXMuZ2V0KCk7aWYoZSE9PXRoaXMudmFsdWV8fG8oZSl8fHRoaXMuZGVlcCl7dmFyIHQ9dGhpcy52YWx1ZTtpZih0aGlzLnZhbHVlPWUsdGhpcy51c2VyKXRyeXt0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfWNhdGNoKGUpe1JlKGUsdGhpcy52bSwnY2FsbGJhY2sgZm9yIHdhdGNoZXIgIicrdGhpcy5leHByZXNzaW9uKyciJyl9ZWxzZSB0aGlzLmNiLmNhbGwodGhpcy52bSxlLHQpfX19LGZuLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbigpe3RoaXMudmFsdWU9dGhpcy5nZXQoKSx0aGlzLmRpcnR5PSExfSxmbi5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuZGVwcy5sZW5ndGg7ZS0tOyl0aGlzLmRlcHNbZV0uZGVwZW5kKCl9LGZuLnByb3RvdHlwZS50ZWFyZG93bj1mdW5jdGlvbigpe2lmKHRoaXMuYWN0aXZlKXt0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkfHxoKHRoaXMudm0uX3dhdGNoZXJzLHRoaXMpO2Zvcih2YXIgZT10aGlzLmRlcHMubGVuZ3RoO2UtLTspdGhpcy5kZXBzW2VdLnJlbW92ZVN1Yih0aGlzKTt0aGlzLmFjdGl2ZT0hMX19O3ZhciBwbj17ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OlMsc2V0OlN9O2Z1bmN0aW9uIGRuKGUsdCxuKXtwbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0XVtuXX0scG4uc2V0PWZ1bmN0aW9uKGUpe3RoaXNbdF1bbl09ZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbixwbil9ZnVuY3Rpb24gdm4oZSl7ZS5fd2F0Y2hlcnM9W107dmFyIHQ9ZS4kb3B0aW9uczt0LnByb3BzJiZmdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnMucHJvcHNEYXRhfHx7fSxyPWUuX3Byb3BzPXt9LGk9ZS4kb3B0aW9ucy5fcHJvcEtleXM9W107ZS4kcGFyZW50JiYkZSghMSk7dmFyIG89ZnVuY3Rpb24obyl7aS5wdXNoKG8pO3ZhciBhPU1lKG8sdCxuLGUpO3hlKHIsbyxhKSxvIGluIGV8fGRuKGUsIl9wcm9wcyIsbyl9O2Zvcih2YXIgYSBpbiB0KW8oYSk7JGUoITApfShlLHQucHJvcHMpLHQubWV0aG9kcyYmZnVuY3Rpb24oZSx0KXtlLiRvcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWVbbl09ImZ1bmN0aW9uIiE9dHlwZW9mIHRbbl0/Uzp4KHRbbl0sZSl9KGUsdC5tZXRob2RzKSx0LmRhdGE/ZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5kYXRhO3ModD1lLl9kYXRhPSJmdW5jdGlvbiI9PXR5cGVvZiB0P2Z1bmN0aW9uKGUsdCl7bGUoKTt0cnl7cmV0dXJuIGUuY2FsbCh0LHQpfWNhdGNoKGUpe3JldHVybiBSZShlLHQsImRhdGEoKSIpLHt9fWZpbmFsbHl7ZmUoKX19KHQsZSk6dHx8e30pfHwodD17fSk7dmFyIG49T2JqZWN0LmtleXModCkscj1lLiRvcHRpb25zLnByb3BzLGk9KGUuJG9wdGlvbnMubWV0aG9kcyxuLmxlbmd0aCk7Zm9yKDtpLS07KXt2YXIgbz1uW2ldO3ImJnkocixvKXx8KGE9dm9pZCAwLDM2IT09KGE9KG8rIiIpLmNoYXJDb2RlQXQoMCkpJiY5NSE9PWEmJmRuKGUsIl9kYXRhIixvKSl9dmFyIGE7Q2UodCwhMCl9KGUpOkNlKGUuX2RhdGE9e30sITApLHQuY29tcHV0ZWQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5fY29tcHV0ZWRXYXRjaGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGUoKTtmb3IodmFyIGkgaW4gdCl7dmFyIG89dFtpXSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvP286by5nZXQ7cnx8KG5baV09bmV3IGZuKGUsYXx8UyxTLGhuKSksaSBpbiBlfHxtbihlLGksbyl9fShlLHQuY29tcHV0ZWQpLHQud2F0Y2gmJnQud2F0Y2ghPT1ZJiZmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dO2lmKEFycmF5LmlzQXJyYXkocikpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspX24oZSxuLHJbaV0pO2Vsc2UgX24oZSxuLHIpfX0oZSx0LndhdGNoKX12YXIgaG49e2xhenk6ITB9O2Z1bmN0aW9uIG1uKGUsdCxuKXt2YXIgcj0hdGUoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8ocG4uZ2V0PXI/eW4odCk6Z24obikscG4uc2V0PVMpOihwbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP3luKHQpOmduKG4uZ2V0KTpTLHBuLnNldD1uLnNldHx8UyksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxwbil9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1tlXTtpZih0KXJldHVybiB0LmRpcnR5JiZ0LmV2YWx1YXRlKCksY2UudGFyZ2V0JiZ0LmRlcGVuZCgpLHQudmFsdWV9fWZ1bmN0aW9uIGduKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24gX24oZSx0LG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49ZVtuXSksZS4kd2F0Y2godCxuLHIpfXZhciBibj0wO2Z1bmN0aW9uICRuKGUpe3ZhciB0PWUub3B0aW9ucztpZihlLnN1cGVyKXt2YXIgbj0kbihlLnN1cGVyKTtpZihuIT09ZS5zdXBlck9wdGlvbnMpe2Uuc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLm9wdGlvbnMscj1lLnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBpIGluIG4pbltpXSE9PXJbaV0mJih0fHwodD17fSksdFtpXT1uW2ldKTtyZXR1cm4gdH0oZSk7ciYmQShlLmV4dGVuZE9wdGlvbnMsciksKHQ9ZS5vcHRpb25zPURlKG4sZS5leHRlbmRPcHRpb25zKSkubmFtZSYmKHQuY29tcG9uZW50c1t0Lm5hbWVdPWUpfX1yZXR1cm4gdH1mdW5jdGlvbiB3bihlKXt0aGlzLl9pbml0KGUpfWZ1bmN0aW9uIENuKGUpe2UuY2lkPTA7dmFyIHQ9MTtlLmV4dGVuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxpPWUuX0N0b3J8fChlLl9DdG9yPXt9KTtpZihpW3JdKXJldHVybiBpW3JdO3ZhciBvPWUubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbihlKXt0aGlzLl9pbml0KGUpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9dCsrLGEub3B0aW9ucz1EZShuLm9wdGlvbnMsZSksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiB0KWRuKGUucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKGUpe3ZhciB0PWUub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gdCltbihlLnByb3RvdHlwZSxuLHRbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2FbZV09bltlXX0pLG8mJihhLm9wdGlvbnMuY29tcG9uZW50c1tvXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPWUsYS5zZWFsZWRPcHRpb25zPUEoe30sYS5vcHRpb25zKSxpW3JdPWEsYX19ZnVuY3Rpb24geG4oZSl7cmV0dXJuIGUmJihlLkN0b3Iub3B0aW9ucy5uYW1lfHxlLnRhZyl9ZnVuY3Rpb24ga24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLmluZGV4T2YodCk+LTE6InN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiwiKS5pbmRleE9mKHQpPi0xOihuPWUsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJmUudGVzdCh0KSk7dmFyIG59ZnVuY3Rpb24gQW4oZSx0KXt2YXIgbj1lLmNhY2hlLHI9ZS5rZXlzLGk9ZS5fdm5vZGU7Zm9yKHZhciBvIGluIG4pe3ZhciBhPW5bb107aWYoYSl7dmFyIHM9eG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhdChzKSYmT24obixvLHIsaSl9fX1mdW5jdGlvbiBPbihlLHQsbixyKXt2YXIgaT1lW3RdOyFpfHxyJiZpLnRhZz09PXIudGFnfHxpLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksZVt0XT1udWxsLGgobix0KX0hZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl91aWQ9Ym4rKyxuLl9pc1Z1ZT0hMCx0JiZ0Ll9pc0NvbXBvbmVudD9mdW5jdGlvbihlLHQpe3ZhciBuPWUuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZShlLmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9dC5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9dC5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgaT1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9aS5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPWkubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPWkuY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPWkudGFnLHQucmVuZGVyJiYobi5yZW5kZXI9dC5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9dC5zdGF0aWNSZW5kZXJGbnMpfShuLHQpOm4uJG9wdGlvbnM9RGUoJG4obi5jb25zdHJ1Y3RvciksdHx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucyxuPXQucGFyZW50O2lmKG4mJiF0LmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaChlKX1lLiRwYXJlbnQ9bixlLiRyb290PW4/bi4kcm9vdDplLGUuJGNoaWxkcmVuPVtdLGUuJHJlZnM9e30sZS5fd2F0Y2hlcj1udWxsLGUuX2luYWN0aXZlPW51bGwsZS5fZGlyZWN0SW5hY3RpdmU9ITEsZS5faXNNb3VudGVkPSExLGUuX2lzRGVzdHJveWVkPSExLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKGUpe2UuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLGUuX2hhc0hvb2tFdmVudD0hMTt2YXIgdD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7dCYmcXQoZSx0KX0obiksZnVuY3Rpb24odCl7dC5fdm5vZGU9bnVsbCx0Ll9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPXQuJG9wdGlvbnMscj10LiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxpPXImJnIuY29udGV4dDt0LiRzbG90cz11dChuLl9yZW5kZXJDaGlsZHJlbixpKSx0LiRzY29wZWRTbG90cz1lLHQuX2M9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMSl9LHQuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIFB0KHQsZSxuLHIsaSwhMCl9O3ZhciBvPXImJnIuZGF0YTt4ZSh0LCIkYXR0cnMiLG8mJm8uYXR0cnN8fGUsbnVsbCwhMCkseGUodCwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHxlLG51bGwsITApfShuKSxZdChuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbihlKXt2YXIgdD1jdChlLiRvcHRpb25zLmluamVjdCxlKTt0JiYoJGUoITEpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7eGUoZSxuLHRbbl0pfSksJGUoITApKX0obiksdm4obiksZnVuY3Rpb24oZSl7dmFyIHQ9ZS4kb3B0aW9ucy5wcm92aWRlO3QmJihlLl9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwoZSk6dCl9KG4pLFl0KG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KHduKSxmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRkYXRhIix0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIiRwcm9wcyIsbiksZS5wcm90b3R5cGUuJHNldD1rZSxlLnByb3RvdHlwZS4kZGVsZXRlPUFlLGUucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbihlLHQsbil7aWYocyh0KSlyZXR1cm4gX24odGhpcyxlLHQsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IGZuKHRoaXMsZSx0LG4pO2lmKG4uaW1tZWRpYXRlKXRyeXt0LmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaChlKXtSZShlLHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0od24pLGZ1bmN0aW9uKGUpe3ZhciB0PS9eaG9vazovO2UucHJvdG90eXBlLiRvbj1mdW5jdGlvbihlLG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIGk9MCxvPWUubGVuZ3RoO2k8bztpKyspci4kb24oZVtpXSxuKTtlbHNlKHIuX2V2ZW50c1tlXXx8KHIuX2V2ZW50c1tlXT1bXSkpLnB1c2gobiksdC50ZXN0KGUpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYoZSxyKSx0LmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj10LG4uJG9uKGUsciksbn0sZS5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciByPTAsaT1lLmxlbmd0aDtyPGk7cisrKW4uJG9mZihlW3JdLHQpO3JldHVybiBufXZhciBvLGE9bi5fZXZlbnRzW2VdO2lmKCFhKXJldHVybiBuO2lmKCF0KXJldHVybiBuLl9ldmVudHNbZV09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChvPWFbc10pPT09dHx8by5mbj09PXQpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LGUucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZih0KXt0PXQubGVuZ3RoPjE/ayh0KTp0O2Zvcih2YXIgbj1rKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJytlKyciJyxpPTAsbz10Lmxlbmd0aDtpPG87aSsrKUhlKHRbaV0sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fSh3biksZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1uLiRlbCxpPW4uX3Zub2RlLG89WnQobik7bi5fdm5vZGU9ZSxuLiRlbD1pP24uX19wYXRjaF9fKGksZSk6bi5fX3BhdGNoX18obi4kZWwsZSx0LCExKSxvKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LGUucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LGUucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighZS5faXNCZWluZ0Rlc3Ryb3llZCl7WXQoZSwiYmVmb3JlRGVzdHJveSIpLGUuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIHQ9ZS4kcGFyZW50OyF0fHx0Ll9pc0JlaW5nRGVzdHJveWVkfHxlLiRvcHRpb25zLmFic3RyYWN0fHxoKHQuJGNoaWxkcmVuLGUpLGUuX3dhdGNoZXImJmUuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49ZS5fd2F0Y2hlcnMubGVuZ3RoO24tLTspZS5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTtlLl9kYXRhLl9fb2JfXyYmZS5fZGF0YS5fX29iX18udm1Db3VudC0tLGUuX2lzRGVzdHJveWVkPSEwLGUuX19wYXRjaF9fKGUuX3Zub2RlLG51bGwpLFl0KGUsImRlc3Ryb3llZCIpLGUuJG9mZigpLGUuJGVsJiYoZS4kZWwuX192dWVfXz1udWxsKSxlLiR2bm9kZSYmKGUuJHZub2RlLnBhcmVudD1udWxsKX19fSh3biksZnVuY3Rpb24oZSl7U3QoZS5wcm90b3R5cGUpLGUucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gWWUoZSx0aGlzKX0sZS5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXQuJG9wdGlvbnMscj1uLnJlbmRlcixpPW4uX3BhcmVudFZub2RlO2kmJih0LiRzY29wZWRTbG90cz1mdChpLmRhdGEuc2NvcGVkU2xvdHMsdC4kc2xvdHMsdC4kc2NvcGVkU2xvdHMpKSx0LiR2bm9kZT1pO3RyeXtIdD10LGU9ci5jYWxsKHQuX3JlbmRlclByb3h5LHQuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe1JlKG4sdCwicmVuZGVyIiksZT10Ll92bm9kZX1maW5hbGx5e0h0PW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkoZSkmJjE9PT1lLmxlbmd0aCYmKGU9ZVswXSksZSBpbnN0YW5jZW9mIHBlfHwoZT12ZSgpKSxlLnBhcmVudD1pLGV9fSh3bik7dmFyIFNuPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxUbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpTbixleGNsdWRlOlNuLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gdGhpcy5jYWNoZSlPbih0aGlzLmNhY2hlLGUsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKHQpe0FuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGtuKHQsZSl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbih0KXtBbihlLGZ1bmN0aW9uKGUpe3JldHVybiFrbih0LGUpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc2xvdHMuZGVmYXVsdCx0PXp0KGUpLG49dCYmdC5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPXhuKG4pLGk9dGhpcy5pbmNsdWRlLG89dGhpcy5leGNsdWRlO2lmKGkmJighcnx8IWtuKGkscikpfHxvJiZyJiZrbihvLHIpKXJldHVybiB0O3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT10LmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTp0LmtleTthW2NdPyh0LmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsaChzLGMpLHMucHVzaChjKSk6KGFbY109dCxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmT24oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSx0LmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiB0fHxlJiZlWzBdfX19OyFmdW5jdGlvbihlKXt2YXIgdD17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZ9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiY29uZmlnIix0KSxlLnV0aWw9e3dhcm46YWUsZXh0ZW5kOkEsbWVyZ2VPcHRpb25zOkRlLGRlZmluZVJlYWN0aXZlOnhlfSxlLnNldD1rZSxlLmRlbGV0ZT1BZSxlLm5leHRUaWNrPVllLGUub2JzZXJ2YWJsZT1mdW5jdGlvbihlKXtyZXR1cm4gQ2UoZSksZX0sZS5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uub3B0aW9uc1t0KyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLGUub3B0aW9ucy5fYmFzZT1lLEEoZS5vcHRpb25zLmNvbXBvbmVudHMsVG4pLGZ1bmN0aW9uKGUpe2UudXNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZih0LmluZGV4T2YoZSk+LTEpcmV0dXJuIHRoaXM7dmFyIG49ayhhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgZS5pbnN0YWxsP2UuaW5zdGFsbC5hcHBseShlLG4pOiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmFwcGx5KG51bGwsbiksdC5wdXNoKGUpLHRoaXN9fShlKSxmdW5jdGlvbihlKXtlLm1peGluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnM9RGUodGhpcy5vcHRpb25zLGUpLHRoaXN9fShlKSxDbihlKSxmdW5jdGlvbihlKXtNLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PXQmJnMobikmJihuLm5hbWU9bi5uYW1lfHxlLG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT10JiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1t0KyJzIl1bZV09bixuKTp0aGlzLm9wdGlvbnNbdCsicyJdW2VdfX0pfShlKX0od24pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDp0ZX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3bi5wcm90b3R5cGUsIiRzc3JDb250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHZub2RlJiZ0aGlzLiR2bm9kZS5zc3JDb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3biwiRnVuY3Rpb25hbFJlbmRlckNvbnRleHQiLHt2YWx1ZTpUdH0pLHduLnZlcnNpb249IjIuNi4xMSI7dmFyIEVuPXAoInN0eWxlLGNsYXNzIiksTm49cCgiaW5wdXQsdGV4dGFyZWEsb3B0aW9uLHNlbGVjdCxwcm9ncmVzcyIpLGpuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4idmFsdWUiPT09biYmTm4oZSkmJiJidXR0b24iIT09dHx8InNlbGVjdGVkIj09PW4mJiJvcHRpb24iPT09ZXx8ImNoZWNrZWQiPT09biYmImlucHV0Ij09PWV8fCJtdXRlZCI9PT1uJiYidmlkZW8iPT09ZX0sRG49cCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksTG49cCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLE1uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhuKHQpfHwiZmFsc2UiPT09dD8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09ZSYmTG4odCk/dDoidHJ1ZSJ9LEluPXAoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxGbj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24oZSl7cmV0dXJuIjoiPT09ZS5jaGFyQXQoNSkmJiJ4bGluayI9PT1lLnNsaWNlKDAsNSl9LFJuPWZ1bmN0aW9uKGUpe3JldHVybiBQbihlKT9lLnNsaWNlKDYsZS5sZW5ndGgpOiIifSxIbj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZXx8ITE9PT1lfTtmdW5jdGlvbiBCbihlKXtmb3IodmFyIHQ9ZS5kYXRhLHI9ZSxpPWU7bihpLmNvbXBvbmVudEluc3RhbmNlKTspKGk9aS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZpLmRhdGEmJih0PVVuKGkuZGF0YSx0KSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJih0PVVuKHQsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYobihlKXx8bih0KSlyZXR1cm4gem4oZSxWbih0KSk7cmV0dXJuIiJ9KHQuc3RhdGljQ2xhc3MsdC5jbGFzcyl9ZnVuY3Rpb24gVW4oZSx0KXtyZXR1cm57c3RhdGljQ2xhc3M6em4oZS5zdGF0aWNDbGFzcyx0LnN0YXRpY0NsYXNzKSxjbGFzczpuKGUuY2xhc3MpP1tlLmNsYXNzLHQuY2xhc3NdOnQuY2xhc3N9fWZ1bmN0aW9uIHpuKGUsdCl7cmV0dXJuIGU/dD9lKyIgIit0OmU6dHx8IiJ9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9IiIsaT0wLG89ZS5sZW5ndGg7aTxvO2krKyluKHQ9Vm4oZVtpXSkpJiYiIiE9PXQmJihyJiYocis9IiAiKSxyKz10KTtyZXR1cm4gcn0oZSk6byhlKT9mdW5jdGlvbihlKXt2YXIgdD0iIjtmb3IodmFyIG4gaW4gZSllW25dJiYodCYmKHQrPSIgIiksdCs9bik7cmV0dXJuIHR9KGUpOiJzdHJpbmciPT10eXBlb2YgZT9lOiIifXZhciBLbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEpuPXAoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290IikscW49cCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbihlKXtyZXR1cm4gSm4oZSl8fHFuKGUpfTtmdW5jdGlvbiBabihlKXtyZXR1cm4gcW4oZSk/InN2ZyI6Im1hdGgiPT09ZT8ibWF0aCI6dm9pZCAwfXZhciBHbj1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBYbj1wKCJ0ZXh0LG51bWJlcixwYXNzd29yZCxzZWFyY2gsZW1haWwsdGVsLHVybCIpO2Z1bmN0aW9uIFluKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtyZXR1cm4gdHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIGV9dmFyIFFuPU9iamVjdC5mcmVlemUoe2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiJzZWxlY3QiIT09ZT9uOih0LmRhdGEmJnQuZGF0YS5hdHRycyYmdm9pZCAwIT09dC5kYXRhLmF0dHJzLm11bHRpcGxlJiZuLnNldEF0dHJpYnV0ZSgibXVsdGlwbGUiLCJtdWx0aXBsZSIpLG4pfSxjcmVhdGVFbGVtZW50TlM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKEtuW2VdLHQpfSxjcmVhdGVUZXh0Tm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSl9LGNyZWF0ZUNvbW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoZSl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLHQsbil7ZS5pbnNlcnRCZWZvcmUodCxuKX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSx0KXtlLnJlbW92ZUNoaWxkKHQpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlLHQpe2UuYXBwZW5kQ2hpbGQodCl9LHBhcmVudE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZX0sbmV4dFNpYmxpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGUubmV4dFNpYmxpbmd9LHRhZ05hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnTmFtZX0sc2V0VGV4dENvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlLnRleHRDb250ZW50PXR9LHNldFN0eWxlU2NvcGU6ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSh0LCIiKX19KSxlcj17Y3JlYXRlOmZ1bmN0aW9uKGUsdCl7dHIodCl9LHVwZGF0ZTpmdW5jdGlvbihlLHQpe2UuZGF0YS5yZWYhPT10LmRhdGEucmVmJiYodHIoZSwhMCksdHIodCkpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3RyKGUsITApfX07ZnVuY3Rpb24gdHIoZSx0KXt2YXIgcj1lLmRhdGEucmVmO2lmKG4ocikpe3ZhciBpPWUuY29udGV4dCxvPWUuY29tcG9uZW50SW5zdGFuY2V8fGUuZWxtLGE9aS4kcmVmczt0P0FycmF5LmlzQXJyYXkoYVtyXSk/aChhW3JdLG8pOmFbcl09PT1vJiYoYVtyXT12b2lkIDApOmUuZGF0YS5yZWZJbkZvcj9BcnJheS5pc0FycmF5KGFbcl0pP2Fbcl0uaW5kZXhPZihvKTwwJiZhW3JdLnB1c2gobyk6YVtyXT1bb106YVtyXT1vfX12YXIgbnI9bmV3IHBlKCIiLHt9LFtdKSxycj1bImNyZWF0ZSIsImFjdGl2YXRlIiwidXBkYXRlIiwicmVtb3ZlIiwiZGVzdHJveSJdO2Z1bmN0aW9uIGlyKGUsaSl7cmV0dXJuIGUua2V5PT09aS5rZXkmJihlLnRhZz09PWkudGFnJiZlLmlzQ29tbWVudD09PWkuaXNDb21tZW50JiZuKGUuZGF0YSk9PT1uKGkuZGF0YSkmJmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0IiE9PWUudGFnKXJldHVybiEwO3ZhciByLGk9bihyPWUuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlLG89bihyPXQuZGF0YSkmJm4ocj1yLmF0dHJzKSYmci50eXBlO3JldHVybiBpPT09b3x8WG4oaSkmJlhuKG8pfShlLGkpfHxyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSYmZS5hc3luY0ZhY3Rvcnk9PT1pLmFzeW5jRmFjdG9yeSYmdChpLmFzeW5jRmFjdG9yeS5lcnJvcikpfWZ1bmN0aW9uIG9yKGUsdCxyKXt2YXIgaSxvLGE9e307Zm9yKGk9dDtpPD1yOysraSluKG89ZVtpXS5rZXkpJiYoYVtvXT1pKTtyZXR1cm4gYX12YXIgYXI9e2NyZWF0ZTpzcix1cGRhdGU6c3IsZGVzdHJveTpmdW5jdGlvbihlKXtzcihlLG5yKX19O2Z1bmN0aW9uIHNyKGUsdCl7KGUuZGF0YS5kaXJlY3RpdmVzfHx0LmRhdGEuZGlyZWN0aXZlcykmJmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG89ZT09PW5yLGE9dD09PW5yLHM9dXIoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSxjPXVyKHQuZGF0YS5kaXJlY3RpdmVzLHQuY29udGV4dCksdT1bXSxsPVtdO2ZvcihuIGluIGMpcj1zW25dLGk9Y1tuXSxyPyhpLm9sZFZhbHVlPXIudmFsdWUsaS5vbGRBcmc9ci5hcmcsZnIoaSwidXBkYXRlIix0LGUpLGkuZGVmJiZpLmRlZi5jb21wb25lbnRVcGRhdGVkJiZsLnB1c2goaSkpOihmcihpLCJiaW5kIix0LGUpLGkuZGVmJiZpLmRlZi5pbnNlcnRlZCYmdS5wdXNoKGkpKTtpZih1Lmxlbmd0aCl7dmFyIGY9ZnVuY3Rpb24oKXtmb3IodmFyIG49MDtuPHUubGVuZ3RoO24rKylmcih1W25dLCJpbnNlcnRlZCIsdCxlKX07bz9pdCh0LCJpbnNlcnQiLGYpOmYoKX1sLmxlbmd0aCYmaXQodCwicG9zdHBhdGNoIixmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248bC5sZW5ndGg7bisrKWZyKGxbbl0sImNvbXBvbmVudFVwZGF0ZWQiLHQsZSl9KTtpZighbylmb3IobiBpbiBzKWNbbl18fGZyKHNbbl0sInVuYmluZCIsZSxlLGEpfShlLHQpfXZhciBjcj1PYmplY3QuY3JlYXRlKG51bGwpO2Z1bmN0aW9uIHVyKGUsdCl7dmFyIG4scixpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoIWUpcmV0dXJuIGk7Zm9yKG49MDtuPGUubGVuZ3RoO24rKykocj1lW25dKS5tb2RpZmllcnN8fChyLm1vZGlmaWVycz1jciksaVtscihyKV09cixyLmRlZj1MZSh0LiRvcHRpb25zLCJkaXJlY3RpdmVzIixyLm5hbWUpO3JldHVybiBpfWZ1bmN0aW9uIGxyKGUpe3JldHVybiBlLnJhd05hbWV8fGUubmFtZSsiLiIrT2JqZWN0LmtleXMoZS5tb2RpZmllcnN8fHt9KS5qb2luKCIuIil9ZnVuY3Rpb24gZnIoZSx0LG4scixpKXt2YXIgbz1lLmRlZiYmZS5kZWZbdF07aWYobyl0cnl7byhuLmVsbSxlLG4scixpKX1jYXRjaChyKXtSZShyLG4uY29udGV4dCwiZGlyZWN0aXZlICIrZS5uYW1lKyIgIit0KyIgaG9vayIpfX12YXIgcHI9W2VyLGFyXTtmdW5jdGlvbiBkcihlLHIpe3ZhciBpPXIuY29tcG9uZW50T3B0aW9ucztpZighKG4oaSkmJiExPT09aS5DdG9yLm9wdGlvbnMuaW5oZXJpdEF0dHJzfHx0KGUuZGF0YS5hdHRycykmJnQoci5kYXRhLmF0dHJzKSkpe3ZhciBvLGEscz1yLmVsbSxjPWUuZGF0YS5hdHRyc3x8e30sdT1yLmRhdGEuYXR0cnN8fHt9O2ZvcihvIGluIG4odS5fX29iX18pJiYodT1yLmRhdGEuYXR0cnM9QSh7fSx1KSksdSlhPXVbb10sY1tvXSE9PWEmJnZyKHMsbyxhKTtmb3IobyBpbihxfHxaKSYmdS52YWx1ZSE9PWMudmFsdWUmJnZyKHMsInZhbHVlIix1LnZhbHVlKSxjKXQodVtvXSkmJihQbihvKT9zLnJlbW92ZUF0dHJpYnV0ZU5TKEZuLFJuKG8pKTpEbihvKXx8cy5yZW1vdmVBdHRyaWJ1dGUobykpfX1mdW5jdGlvbiB2cihlLHQsbil7ZS50YWdOYW1lLmluZGV4T2YoIi0iKT4tMT9ocihlLHQsbik6SW4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGUodCk6KG49ImFsbG93ZnVsbHNjcmVlbiI9PT10JiYiRU1CRUQiPT09ZS50YWdOYW1lPyJ0cnVlIjp0LGUuc2V0QXR0cmlidXRlKHQsbikpOkRuKHQpP2Uuc2V0QXR0cmlidXRlKHQsTW4odCxuKSk6UG4odCk/SG4obik/ZS5yZW1vdmVBdHRyaWJ1dGVOUyhGbixSbih0KSk6ZS5zZXRBdHRyaWJ1dGVOUyhGbix0LG4pOmhyKGUsdCxuKX1mdW5jdGlvbiBocihlLHQsbil7aWYoSG4obikpZS5yZW1vdmVBdHRyaWJ1dGUodCk7ZWxzZXtpZihxJiYhVyYmIlRFWFRBUkVBIj09PWUudGFnTmFtZSYmInBsYWNlaG9sZGVyIj09PXQmJiIiIT09biYmIWUuX19pZXBoKXt2YXIgcj1mdW5jdGlvbih0KXt0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpfTtlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixyKSxlLl9faWVwaD0hMH1lLnNldEF0dHJpYnV0ZSh0LG4pfX12YXIgbXI9e2NyZWF0ZTpkcix1cGRhdGU6ZHJ9O2Z1bmN0aW9uIHlyKGUscil7dmFyIGk9ci5lbG0sbz1yLmRhdGEsYT1lLmRhdGE7aWYoISh0KG8uc3RhdGljQ2xhc3MpJiZ0KG8uY2xhc3MpJiYodChhKXx8dChhLnN0YXRpY0NsYXNzKSYmdChhLmNsYXNzKSkpKXt2YXIgcz1CbihyKSxjPWkuX3RyYW5zaXRpb25DbGFzc2VzO24oYykmJihzPXpuKHMsVm4oYykpKSxzIT09aS5fcHJldkNsYXNzJiYoaS5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKSxpLl9wcmV2Q2xhc3M9cyl9fXZhciBncixfcixiciwkcix3cixDcix4cj17Y3JlYXRlOnlyLHVwZGF0ZTp5cn0sa3I9L1tcdykuK1wtXyRcXV0vO2Z1bmN0aW9uIEFyKGUpe3ZhciB0LG4scixpLG8sYT0hMSxzPSExLGM9ITEsdT0hMSxsPTAsZj0wLHA9MCxkPTA7Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKylpZihuPXQsdD1lLmNoYXJDb2RlQXQociksYSkzOT09PXQmJjkyIT09biYmKGE9ITEpO2Vsc2UgaWYocykzND09PXQmJjkyIT09biYmKHM9ITEpO2Vsc2UgaWYoYyk5Nj09PXQmJjkyIT09biYmKGM9ITEpO2Vsc2UgaWYodSk0Nz09PXQmJjkyIT09biYmKHU9ITEpO2Vsc2UgaWYoMTI0IT09dHx8MTI0PT09ZS5jaGFyQ29kZUF0KHIrMSl8fDEyND09PWUuY2hhckNvZGVBdChyLTEpfHxsfHxmfHxwKXtzd2l0Y2godCl7Y2FzZSAzNDpzPSEwO2JyZWFrO2Nhc2UgMzk6YT0hMDticmVhaztjYXNlIDk2OmM9ITA7YnJlYWs7Y2FzZSA0MDpwKys7YnJlYWs7Y2FzZSA0MTpwLS07YnJlYWs7Y2FzZSA5MTpmKys7YnJlYWs7Y2FzZSA5MzpmLS07YnJlYWs7Y2FzZSAxMjM6bCsrO2JyZWFrO2Nhc2UgMTI1OmwtLX1pZig0Nz09PXQpe2Zvcih2YXIgdj1yLTEsaD12b2lkIDA7dj49MCYmIiAiPT09KGg9ZS5jaGFyQXQodikpO3YtLSk7aCYma3IudGVzdChoKXx8KHU9ITApfX1lbHNlIHZvaWQgMD09PWk/KGQ9cisxLGk9ZS5zbGljZSgwLHIpLnRyaW0oKSk6bSgpO2Z1bmN0aW9uIG0oKXsob3x8KG89W10pKS5wdXNoKGUuc2xpY2UoZCxyKS50cmltKCkpLGQ9cisxfWlmKHZvaWQgMD09PWk/aT1lLnNsaWNlKDAscikudHJpbSgpOjAhPT1kJiZtKCksbylmb3Iocj0wO3I8by5sZW5ndGg7cisrKWk9T3IoaSxvW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBPcihlLHQpe3ZhciBuPXQuaW5kZXhPZigiKCIpO2lmKG48MClyZXR1cm4nX2YoIicrdCsnIikoJytlKyIpIjt2YXIgcj10LnNsaWNlKDAsbiksaT10LnNsaWNlKG4rMSk7cmV0dXJuJ19mKCInK3IrJyIpKCcrZSsoIikiIT09aT8iLCIraTppKX1mdW5jdGlvbiBTcihlLHQpe2NvbnNvbGUuZXJyb3IoIltWdWUgY29tcGlsZXJdOiAiK2UpfWZ1bmN0aW9uIFRyKGUsdCl7cmV0dXJuIGU/ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGVbdF19KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KTpbXX1mdW5jdGlvbiBFcihlLHQsbixyLGkpeyhlLnByb3BzfHwoZS5wcm9wcz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24gTnIoZSx0LG4scixpKXsoaT9lLmR5bmFtaWNBdHRyc3x8KGUuZHluYW1pY0F0dHJzPVtdKTplLmF0dHJzfHwoZS5hdHRycz1bXSkpLnB1c2goUnIoe25hbWU6dCx2YWx1ZTpuLGR5bmFtaWM6aX0scikpLGUucGxhaW49ITF9ZnVuY3Rpb24ganIoZSx0LG4scil7ZS5hdHRyc01hcFt0XT1uLGUuYXR0cnNMaXN0LnB1c2goUnIoe25hbWU6dCx2YWx1ZTpufSxyKSl9ZnVuY3Rpb24gRHIoZSx0LG4scixpLG8sYSxzKXsoZS5kaXJlY3RpdmVzfHwoZS5kaXJlY3RpdmVzPVtdKSkucHVzaChScih7bmFtZTp0LHJhd05hbWU6bix2YWx1ZTpyLGFyZzppLGlzRHluYW1pY0FyZzpvLG1vZGlmaWVyczphfSxzKSksZS5wbGFpbj0hMX1mdW5jdGlvbiBMcihlLHQsbil7cmV0dXJuIG4/Il9wKCIrdCsnLCInK2UrJyIpJzplK3R9ZnVuY3Rpb24gTXIodCxuLHIsaSxvLGEscyxjKXt2YXIgdTsoaT1pfHxlKS5yaWdodD9jP249IigiK24rIik9PT0nY2xpY2snPydjb250ZXh0bWVudSc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJjb250ZXh0bWVudSIsZGVsZXRlIGkucmlnaHQpOmkubWlkZGxlJiYoYz9uPSIoIituKyIpPT09J2NsaWNrJz8nbW91c2V1cCc6KCIrbisiKSI6ImNsaWNrIj09PW4mJihuPSJtb3VzZXVwIikpLGkuY2FwdHVyZSYmKGRlbGV0ZSBpLmNhcHR1cmUsbj1McigiISIsbixjKSksaS5vbmNlJiYoZGVsZXRlIGkub25jZSxuPUxyKCJ+IixuLGMpKSxpLnBhc3NpdmUmJihkZWxldGUgaS5wYXNzaXZlLG49THIoIiYiLG4sYykpLGkubmF0aXZlPyhkZWxldGUgaS5uYXRpdmUsdT10Lm5hdGl2ZUV2ZW50c3x8KHQubmF0aXZlRXZlbnRzPXt9KSk6dT10LmV2ZW50c3x8KHQuZXZlbnRzPXt9KTt2YXIgbD1Scih7dmFsdWU6ci50cmltKCksZHluYW1pYzpjfSxzKTtpIT09ZSYmKGwubW9kaWZpZXJzPWkpO3ZhciBmPXVbbl07QXJyYXkuaXNBcnJheShmKT9vP2YudW5zaGlmdChsKTpmLnB1c2gobCk6dVtuXT1mP28/W2wsZl06W2YsbF06bCx0LnBsYWluPSExfWZ1bmN0aW9uIElyKGUsdCxuKXt2YXIgcj1GcihlLCI6Iit0KXx8RnIoZSwidi1iaW5kOiIrdCk7aWYobnVsbCE9cilyZXR1cm4gQXIocik7aWYoITEhPT1uKXt2YXIgaT1GcihlLHQpO2lmKG51bGwhPWkpcmV0dXJuIEpTT04uc3RyaW5naWZ5KGkpfX1mdW5jdGlvbiBGcihlLHQsbil7dmFyIHI7aWYobnVsbCE9KHI9ZS5hdHRyc01hcFt0XSkpZm9yKHZhciBpPWUuYXR0cnNMaXN0LG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYoaVtvXS5uYW1lPT09dCl7aS5zcGxpY2UobywxKTticmVha31yZXR1cm4gbiYmZGVsZXRlIGUuYXR0cnNNYXBbdF0scn1mdW5jdGlvbiBQcihlLHQpe2Zvcih2YXIgbj1lLmF0dHJzTGlzdCxyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXt2YXIgbz1uW3JdO2lmKHQudGVzdChvLm5hbWUpKXJldHVybiBuLnNwbGljZShyLDEpLG99fWZ1bmN0aW9uIFJyKGUsdCl7cmV0dXJuIHQmJihudWxsIT10LnN0YXJ0JiYoZS5zdGFydD10LnN0YXJ0KSxudWxsIT10LmVuZCYmKGUuZW5kPXQuZW5kKSksZX1mdW5jdGlvbiBIcihlLHQsbil7dmFyIHI9bnx8e30saT1yLm51bWJlcixvPSIkJHYiO3IudHJpbSYmKG89Iih0eXBlb2YgJCR2ID09PSAnc3RyaW5nJz8gJCR2LnRyaW0oKTogJCR2KSIpLGkmJihvPSJfbigiK28rIikiKTt2YXIgYT1Ccih0LG8pO2UubW9kZWw9e3ZhbHVlOiIoIit0KyIpIixleHByZXNzaW9uOkpTT04uc3RyaW5naWZ5KHQpLGNhbGxiYWNrOiJmdW5jdGlvbiAoJCR2KSB7IithKyJ9In19ZnVuY3Rpb24gQnIoZSx0KXt2YXIgbj1mdW5jdGlvbihlKXtpZihlPWUudHJpbSgpLGdyPWUubGVuZ3RoLGUuaW5kZXhPZigiWyIpPDB8fGUubGFzdEluZGV4T2YoIl0iKTxnci0xKXJldHVybigkcj1lLmxhc3RJbmRleE9mKCIuIikpPi0xP3tleHA6ZS5zbGljZSgwLCRyKSxrZXk6JyInK2Uuc2xpY2UoJHIrMSkrJyInfTp7ZXhwOmUsa2V5Om51bGx9O19yPWUsJHI9d3I9Q3I9MDtmb3IoOyF6cigpOylWcihicj1VcigpKT9Kcihicik6OTE9PT1iciYmS3IoYnIpO3JldHVybntleHA6ZS5zbGljZSgwLHdyKSxrZXk6ZS5zbGljZSh3cisxLENyKX19KGUpO3JldHVybiBudWxsPT09bi5rZXk/ZSsiPSIrdDoiJHNldCgiK24uZXhwKyIsICIrbi5rZXkrIiwgIit0KyIpIn1mdW5jdGlvbiBVcigpe3JldHVybiBfci5jaGFyQ29kZUF0KCsrJHIpfWZ1bmN0aW9uIHpyKCl7cmV0dXJuICRyPj1ncn1mdW5jdGlvbiBWcihlKXtyZXR1cm4gMzQ9PT1lfHwzOT09PWV9ZnVuY3Rpb24gS3IoZSl7dmFyIHQ9MTtmb3Iod3I9JHI7IXpyKCk7KWlmKFZyKGU9VXIoKSkpSnIoZSk7ZWxzZSBpZig5MT09PWUmJnQrKyw5Mz09PWUmJnQtLSwwPT09dCl7Q3I9JHI7YnJlYWt9fWZ1bmN0aW9uIEpyKGUpe2Zvcih2YXIgdD1lOyF6cigpJiYoZT1VcigpKSE9PXQ7KTt9dmFyIHFyLFdyPSJfX3IiLFpyPSJfX2MiO2Z1bmN0aW9uIEdyKGUsdCxuKXt2YXIgcj1xcjtyZXR1cm4gZnVuY3Rpb24gaSgpe251bGwhPT10LmFwcGx5KG51bGwsYXJndW1lbnRzKSYmUXIoZSxpLG4scil9fXZhciBYcj1WZSYmIShYJiZOdW1iZXIoWFsxXSk8PTUzKTtmdW5jdGlvbiBZcihlLHQsbixyKXtpZihYcil7dmFyIGk9YW4sbz10O3Q9by5fd3JhcHBlcj1mdW5jdGlvbihlKXtpZihlLnRhcmdldD09PWUuY3VycmVudFRhcmdldHx8ZS50aW1lU3RhbXA+PWl8fGUudGltZVN0YW1wPD0wfHxlLnRhcmdldC5vd25lckRvY3VtZW50IT09ZG9jdW1lbnQpcmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1xci5hZGRFdmVudExpc3RlbmVyKGUsdCxRP3tjYXB0dXJlOm4scGFzc2l2ZTpyfTpuKX1mdW5jdGlvbiBRcihlLHQsbixyKXsocnx8cXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0Ll93cmFwcGVyfHx0LG4pfWZ1bmN0aW9uIGVpKGUscil7aWYoIXQoZS5kYXRhLm9uKXx8IXQoci5kYXRhLm9uKSl7dmFyIGk9ci5kYXRhLm9ufHx7fSxvPWUuZGF0YS5vbnx8e307cXI9ci5lbG0sZnVuY3Rpb24oZSl7aWYobihlW1dyXSkpe3ZhciB0PXE/ImNoYW5nZSI6ImlucHV0IjtlW3RdPVtdLmNvbmNhdChlW1dyXSxlW3RdfHxbXSksZGVsZXRlIGVbV3JdfW4oZVtacl0pJiYoZS5jaGFuZ2U9W10uY29uY2F0KGVbWnJdLGUuY2hhbmdlfHxbXSksZGVsZXRlIGVbWnJdKX0oaSkscnQoaSxvLFlyLFFyLEdyLHIuY29udGV4dCkscXI9dm9pZCAwfX12YXIgdGksbmk9e2NyZWF0ZTplaSx1cGRhdGU6ZWl9O2Z1bmN0aW9uIHJpKGUscil7aWYoIXQoZS5kYXRhLmRvbVByb3BzKXx8IXQoci5kYXRhLmRvbVByb3BzKSl7dmFyIGksbyxhPXIuZWxtLHM9ZS5kYXRhLmRvbVByb3BzfHx7fSxjPXIuZGF0YS5kb21Qcm9wc3x8e307Zm9yKGkgaW4gbihjLl9fb2JfXykmJihjPXIuZGF0YS5kb21Qcm9wcz1BKHt9LGMpKSxzKWkgaW4gY3x8KGFbaV09IiIpO2ZvcihpIGluIGMpe2lmKG89Y1tpXSwidGV4dENvbnRlbnQiPT09aXx8ImlubmVySFRNTCI9PT1pKXtpZihyLmNoaWxkcmVuJiYoci5jaGlsZHJlbi5sZW5ndGg9MCksbz09PXNbaV0pY29udGludWU7MT09PWEuY2hpbGROb2Rlcy5sZW5ndGgmJmEucmVtb3ZlQ2hpbGQoYS5jaGlsZE5vZGVzWzBdKX1pZigidmFsdWUiPT09aSYmIlBST0dSRVNTIiE9PWEudGFnTmFtZSl7YS5fdmFsdWU9bzt2YXIgdT10KG8pPyIiOlN0cmluZyhvKTtpaShhLHUpJiYoYS52YWx1ZT11KX1lbHNlIGlmKCJpbm5lckhUTUwiPT09aSYmcW4oYS50YWdOYW1lKSYmdChhLmlubmVySFRNTCkpeyh0aT10aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTD0iPHN2Zz4iK28rIjwvc3ZnPiI7Zm9yKHZhciBsPXRpLmZpcnN0Q2hpbGQ7YS5maXJzdENoaWxkOylhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCk7Zm9yKDtsLmZpcnN0Q2hpbGQ7KWEuYXBwZW5kQ2hpbGQobC5maXJzdENoaWxkKX1lbHNlIGlmKG8hPT1zW2ldKXRyeXthW2ldPW99Y2F0Y2goZSl7fX19fWZ1bmN0aW9uIGlpKGUsdCl7cmV0dXJuIWUuY29tcG9zaW5nJiYoIk9QVElPTiI9PT1lLnRhZ05hbWV8fGZ1bmN0aW9uKGUsdCl7dmFyIG49ITA7dHJ5e249ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCE9PWV9Y2F0Y2goZSl7fXJldHVybiBuJiZlLnZhbHVlIT09dH0oZSx0KXx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnZhbHVlLGk9ZS5fdk1vZGlmaWVycztpZihuKGkpKXtpZihpLm51bWJlcilyZXR1cm4gZihyKSE9PWYodCk7aWYoaS50cmltKXJldHVybiByLnRyaW0oKSE9PXQudHJpbSgpfXJldHVybiByIT09dH0oZSx0KSl9dmFyIG9pPXtjcmVhdGU6cmksdXBkYXRlOnJpfSxhaT1nKGZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49LzooLispLztyZXR1cm4gZS5zcGxpdCgvOyg/IVteKF0qXCkpL2cpLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHI9ZS5zcGxpdChuKTtyLmxlbmd0aD4xJiYodFtyWzBdLnRyaW0oKV09clsxXS50cmltKCkpfX0pLHR9KTtmdW5jdGlvbiBzaShlKXt2YXIgdD1jaShlLnN0eWxlKTtyZXR1cm4gZS5zdGF0aWNTdHlsZT9BKGUuc3RhdGljU3R5bGUsdCk6dH1mdW5jdGlvbiBjaShlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9PKGUpOiJzdHJpbmciPT10eXBlb2YgZT9haShlKTplfXZhciB1aSxsaT0vXi0tLyxmaT0vXHMqIWltcG9ydGFudCQvLHBpPWZ1bmN0aW9uKGUsdCxuKXtpZihsaS50ZXN0KHQpKWUuc3R5bGUuc2V0UHJvcGVydHkodCxuKTtlbHNlIGlmKGZpLnRlc3QobikpZS5zdHlsZS5zZXRQcm9wZXJ0eShDKHQpLG4ucmVwbGFjZShmaSwiIiksImltcG9ydGFudCIpO2Vsc2V7dmFyIHI9dmkodCk7aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIGk9MCxvPW4ubGVuZ3RoO2k8bztpKyspZS5zdHlsZVtyXT1uW2ldO2Vsc2UgZS5zdHlsZVtyXT1ufX0sZGk9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHZpPWcoZnVuY3Rpb24oZSl7aWYodWk9dWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCJmaWx0ZXIiIT09KGU9YihlKSkmJmUgaW4gdWkpcmV0dXJuIGU7Zm9yKHZhciB0PWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPTA7bjxkaS5sZW5ndGg7bisrKXt2YXIgcj1kaVtuXSt0O2lmKHIgaW4gdWkpcmV0dXJuIHJ9fSk7ZnVuY3Rpb24gaGkoZSxyKXt2YXIgaT1yLmRhdGEsbz1lLmRhdGE7aWYoISh0KGkuc3RhdGljU3R5bGUpJiZ0KGkuc3R5bGUpJiZ0KG8uc3RhdGljU3R5bGUpJiZ0KG8uc3R5bGUpKSl7dmFyIGEscyxjPXIuZWxtLHU9by5zdGF0aWNTdHlsZSxsPW8ubm9ybWFsaXplZFN0eWxlfHxvLnN0eWxlfHx7fSxmPXV8fGwscD1jaShyLmRhdGEuc3R5bGUpfHx7fTtyLmRhdGEubm9ybWFsaXplZFN0eWxlPW4ocC5fX29iX18pP0Eoe30scCk6cDt2YXIgZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI9e307aWYodClmb3IodmFyIGk9ZTtpLmNvbXBvbmVudEluc3RhbmNlOykoaT1pLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZSkmJmkuZGF0YSYmKG49c2koaS5kYXRhKSkmJkEocixuKTsobj1zaShlLmRhdGEpKSYmQShyLG4pO2Zvcih2YXIgbz1lO289by5wYXJlbnQ7KW8uZGF0YSYmKG49c2koby5kYXRhKSkmJkEocixuKTtyZXR1cm4gcn0ociwhMCk7Zm9yKHMgaW4gZil0KGRbc10pJiZwaShjLHMsIiIpO2ZvcihzIGluIGQpKGE9ZFtzXSkhPT1mW3NdJiZwaShjLHMsbnVsbD09YT8iIjphKX19dmFyIG1pPXtjcmVhdGU6aGksdXBkYXRlOmhpfSx5aT0vXHMrLztmdW5jdGlvbiBnaShlLHQpe2lmKHQmJih0PXQudHJpbSgpKSlpZihlLmNsYXNzTGlzdCl0LmluZGV4T2YoIiAiKT4tMT90LnNwbGl0KHlpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCl9KTplLmNsYXNzTGlzdC5hZGQodCk7ZWxzZXt2YXIgbj0iICIrKGUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiO24uaW5kZXhPZigiICIrdCsiICIpPDAmJmUuc2V0QXR0cmlidXRlKCJjbGFzcyIsKG4rdCkudHJpbSgpKX19ZnVuY3Rpb24gX2koZSx0KXtpZih0JiYodD10LnRyaW0oKSkpaWYoZS5jbGFzc0xpc3QpdC5pbmRleE9mKCIgIik+LTE/dC5zcGxpdCh5aSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpfSk6ZS5jbGFzc0xpc3QucmVtb3ZlKHQpLGUuY2xhc3NMaXN0Lmxlbmd0aHx8ZS5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIik7ZWxzZXtmb3IodmFyIG49IiAiKyhlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIixyPSIgIit0KyIgIjtuLmluZGV4T2Yocik+PTA7KW49bi5yZXBsYWNlKHIsIiAiKTsobj1uLnRyaW0oKSk/ZS5zZXRBdHRyaWJ1dGUoImNsYXNzIixuKTplLnJlbW92ZUF0dHJpYnV0ZSgiY2xhc3MiKX19ZnVuY3Rpb24gYmkoZSl7aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdD17fTtyZXR1cm4hMSE9PWUuY3NzJiZBKHQsJGkoZS5uYW1lfHwidiIpKSxBKHQsZSksdH1yZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/JGkoZSk6dm9pZCAwfX12YXIgJGk9ZyhmdW5jdGlvbihlKXtyZXR1cm57ZW50ZXJDbGFzczplKyItZW50ZXIiLGVudGVyVG9DbGFzczplKyItZW50ZXItdG8iLGVudGVyQWN0aXZlQ2xhc3M6ZSsiLWVudGVyLWFjdGl2ZSIsbGVhdmVDbGFzczplKyItbGVhdmUiLGxlYXZlVG9DbGFzczplKyItbGVhdmUtdG8iLGxlYXZlQWN0aXZlQ2xhc3M6ZSsiLWxlYXZlLWFjdGl2ZSJ9fSksd2k9eiYmIVcsQ2k9InRyYW5zaXRpb24iLHhpPSJhbmltYXRpb24iLGtpPSJ0cmFuc2l0aW9uIixBaT0idHJhbnNpdGlvbmVuZCIsT2k9ImFuaW1hdGlvbiIsU2k9ImFuaW1hdGlvbmVuZCI7d2kmJih2b2lkIDA9PT13aW5kb3cub250cmFuc2l0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kJiYoa2k9IldlYmtpdFRyYW5zaXRpb24iLEFpPSJ3ZWJraXRUcmFuc2l0aW9uRW5kIiksdm9pZCAwPT09d2luZG93Lm9uYW5pbWF0aW9uZW5kJiZ2b2lkIDAhPT13aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQmJihPaT0iV2Via2l0QW5pbWF0aW9uIixTaT0id2Via2l0QW5pbWF0aW9uRW5kIikpO3ZhciBUaT16P3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKHdpbmRvdyk6c2V0VGltZW91dDpmdW5jdGlvbihlKXtyZXR1cm4gZSgpfTtmdW5jdGlvbiBFaShlKXtUaShmdW5jdGlvbigpe1RpKGUpfSl9ZnVuY3Rpb24gTmkoZSx0KXt2YXIgbj1lLl90cmFuc2l0aW9uQ2xhc3Nlc3x8KGUuX3RyYW5zaXRpb25DbGFzc2VzPVtdKTtuLmluZGV4T2YodCk8MCYmKG4ucHVzaCh0KSxnaShlLHQpKX1mdW5jdGlvbiBqaShlLHQpe2UuX3RyYW5zaXRpb25DbGFzc2VzJiZoKGUuX3RyYW5zaXRpb25DbGFzc2VzLHQpLF9pKGUsdCl9ZnVuY3Rpb24gRGkoZSx0LG4pe3ZhciByPU1pKGUsdCksaT1yLnR5cGUsbz1yLnRpbWVvdXQsYT1yLnByb3BDb3VudDtpZighaSlyZXR1cm4gbigpO3ZhciBzPWk9PT1DaT9BaTpTaSxjPTAsdT1mdW5jdGlvbigpe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihzLGwpLG4oKX0sbD1mdW5jdGlvbih0KXt0LnRhcmdldD09PWUmJisrYz49YSYmdSgpfTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YzxhJiZ1KCl9LG8rMSksZS5hZGRFdmVudExpc3RlbmVyKHMsbCl9dmFyIExpPS9cYih0cmFuc2Zvcm18YWxsKSgsfCQpLztmdW5jdGlvbiBNaShlLHQpe3ZhciBuLHI9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSksaT0ocltraSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLG89KHJba2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSxhPUlpKGksbykscz0ocltPaSsiRGVsYXkiXXx8IiIpLnNwbGl0KCIsICIpLGM9KHJbT2krIkR1cmF0aW9uIl18fCIiKS5zcGxpdCgiLCAiKSx1PUlpKHMsYyksbD0wLGY9MDtyZXR1cm4gdD09PUNpP2E+MCYmKG49Q2ksbD1hLGY9by5sZW5ndGgpOnQ9PT14aT91PjAmJihuPXhpLGw9dSxmPWMubGVuZ3RoKTpmPShuPShsPU1hdGgubWF4KGEsdSkpPjA/YT51P0NpOnhpOm51bGwpP249PT1DaT9vLmxlbmd0aDpjLmxlbmd0aDowLHt0eXBlOm4sdGltZW91dDpsLHByb3BDb3VudDpmLGhhc1RyYW5zZm9ybTpuPT09Q2kmJkxpLnRlc3QocltraSsiUHJvcGVydHkiXSl9fWZ1bmN0aW9uIElpKGUsdCl7Zm9yKDtlLmxlbmd0aDx0Lmxlbmd0aDspZT1lLmNvbmNhdChlKTtyZXR1cm4gTWF0aC5tYXguYXBwbHkobnVsbCx0Lm1hcChmdW5jdGlvbih0LG4pe3JldHVybiBGaSh0KStGaShlW25dKX0pKX1mdW5jdGlvbiBGaShlKXtyZXR1cm4gMWUzKk51bWJlcihlLnNsaWNlKDAsLTEpLnJlcGxhY2UoIiwiLCIuIikpfWZ1bmN0aW9uIFBpKGUscil7dmFyIGk9ZS5lbG07bihpLl9sZWF2ZUNiKSYmKGkuX2xlYXZlQ2IuY2FuY2VsbGVkPSEwLGkuX2xlYXZlQ2IoKSk7dmFyIGE9YmkoZS5kYXRhLnRyYW5zaXRpb24pO2lmKCF0KGEpJiYhbihpLl9lbnRlckNiKSYmMT09PWkubm9kZVR5cGUpe2Zvcih2YXIgcz1hLmNzcyxjPWEudHlwZSx1PWEuZW50ZXJDbGFzcyxsPWEuZW50ZXJUb0NsYXNzLHA9YS5lbnRlckFjdGl2ZUNsYXNzLGQ9YS5hcHBlYXJDbGFzcyx2PWEuYXBwZWFyVG9DbGFzcyxoPWEuYXBwZWFyQWN0aXZlQ2xhc3MsbT1hLmJlZm9yZUVudGVyLHk9YS5lbnRlcixnPWEuYWZ0ZXJFbnRlcixfPWEuZW50ZXJDYW5jZWxsZWQsYj1hLmJlZm9yZUFwcGVhciwkPWEuYXBwZWFyLHc9YS5hZnRlckFwcGVhcixDPWEuYXBwZWFyQ2FuY2VsbGVkLHg9YS5kdXJhdGlvbixrPVd0LEE9V3QuJHZub2RlO0EmJkEucGFyZW50OylrPUEuY29udGV4dCxBPUEucGFyZW50O3ZhciBPPSFrLl9pc01vdW50ZWR8fCFlLmlzUm9vdEluc2VydDtpZighT3x8JHx8IiI9PT0kKXt2YXIgUz1PJiZkP2Q6dSxUPU8mJmg/aDpwLEU9TyYmdj92OmwsTj1PJiZifHxtLGo9TyYmImZ1bmN0aW9uIj09dHlwZW9mICQ/JDp5LEw9TyYmd3x8ZyxNPU8mJkN8fF8sST1mKG8oeCk/eC5lbnRlcjp4KSxGPSExIT09cyYmIVcsUD1CaShqKSxSPWkuX2VudGVyQ2I9RChmdW5jdGlvbigpe0YmJihqaShpLEUpLGppKGksVCkpLFIuY2FuY2VsbGVkPyhGJiZqaShpLFMpLE0mJk0oaSkpOkwmJkwoaSksaS5fZW50ZXJDYj1udWxsfSk7ZS5kYXRhLnNob3d8fGl0KGUsImluc2VydCIsZnVuY3Rpb24oKXt2YXIgdD1pLnBhcmVudE5vZGUsbj10JiZ0Ll9wZW5kaW5nJiZ0Ll9wZW5kaW5nW2Uua2V5XTtuJiZuLnRhZz09PWUudGFnJiZuLmVsbS5fbGVhdmVDYiYmbi5lbG0uX2xlYXZlQ2IoKSxqJiZqKGksUil9KSxOJiZOKGkpLEYmJihOaShpLFMpLE5pKGksVCksRWkoZnVuY3Rpb24oKXtqaShpLFMpLFIuY2FuY2VsbGVkfHwoTmkoaSxFKSxQfHwoSGkoSSk/c2V0VGltZW91dChSLEkpOkRpKGksYyxSKSkpfSkpLGUuZGF0YS5zaG93JiYociYmcigpLGomJmooaSxSKSksRnx8UHx8UigpfX19ZnVuY3Rpb24gUmkoZSxyKXt2YXIgaT1lLmVsbTtuKGkuX2VudGVyQ2IpJiYoaS5fZW50ZXJDYi5jYW5jZWxsZWQ9ITAsaS5fZW50ZXJDYigpKTt2YXIgYT1iaShlLmRhdGEudHJhbnNpdGlvbik7aWYodChhKXx8MSE9PWkubm9kZVR5cGUpcmV0dXJuIHIoKTtpZighbihpLl9sZWF2ZUNiKSl7dmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmxlYXZlQ2xhc3MsbD1hLmxlYXZlVG9DbGFzcyxwPWEubGVhdmVBY3RpdmVDbGFzcyxkPWEuYmVmb3JlTGVhdmUsdj1hLmxlYXZlLGg9YS5hZnRlckxlYXZlLG09YS5sZWF2ZUNhbmNlbGxlZCx5PWEuZGVsYXlMZWF2ZSxnPWEuZHVyYXRpb24sXz0hMSE9PXMmJiFXLGI9QmkodiksJD1mKG8oZyk/Zy5sZWF2ZTpnKSx3PWkuX2xlYXZlQ2I9RChmdW5jdGlvbigpe2kucGFyZW50Tm9kZSYmaS5wYXJlbnROb2RlLl9wZW5kaW5nJiYoaS5wYXJlbnROb2RlLl9wZW5kaW5nW2Uua2V5XT1udWxsKSxfJiYoamkoaSxsKSxqaShpLHApKSx3LmNhbmNlbGxlZD8oXyYmamkoaSx1KSxtJiZtKGkpKToocigpLGgmJmgoaSkpLGkuX2xlYXZlQ2I9bnVsbH0pO3k/eShDKTpDKCl9ZnVuY3Rpb24gQygpe3cuY2FuY2VsbGVkfHwoIWUuZGF0YS5zaG93JiZpLnBhcmVudE5vZGUmJigoaS5wYXJlbnROb2RlLl9wZW5kaW5nfHwoaS5wYXJlbnROb2RlLl9wZW5kaW5nPXt9KSlbZS5rZXldPWUpLGQmJmQoaSksXyYmKE5pKGksdSksTmkoaSxwKSxFaShmdW5jdGlvbigpe2ppKGksdSksdy5jYW5jZWxsZWR8fChOaShpLGwpLGJ8fChIaSgkKT9zZXRUaW1lb3V0KHcsJCk6RGkoaSxjLHcpKSl9KSksdiYmdihpLHcpLF98fGJ8fHcoKSl9fWZ1bmN0aW9uIEhpKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmIWlzTmFOKGUpfWZ1bmN0aW9uIEJpKGUpe2lmKHQoZSkpcmV0dXJuITE7dmFyIHI9ZS5mbnM7cmV0dXJuIG4ocik/QmkoQXJyYXkuaXNBcnJheShyKT9yWzBdOnIpOihlLl9sZW5ndGh8fGUubGVuZ3RoKT4xfWZ1bmN0aW9uIFVpKGUsdCl7ITAhPT10LmRhdGEuc2hvdyYmUGkodCl9dmFyIHppPWZ1bmN0aW9uKGUpe3ZhciBvLGEscz17fSxjPWUubW9kdWxlcyx1PWUubm9kZU9wcztmb3Iobz0wO288cnIubGVuZ3RoOysrbylmb3Ioc1tycltvXV09W10sYT0wO2E8Yy5sZW5ndGg7KythKW4oY1thXVtycltvXV0pJiZzW3JyW29dXS5wdXNoKGNbYV1bcnJbb11dKTtmdW5jdGlvbiBsKGUpe3ZhciB0PXUucGFyZW50Tm9kZShlKTtuKHQpJiZ1LnJlbW92ZUNoaWxkKHQsZSl9ZnVuY3Rpb24gZihlLHQsaSxvLGEsYyxsKXtpZihuKGUuZWxtKSYmbihjKSYmKGU9Y1tsXT1tZShlKSksZS5pc1Jvb3RJbnNlcnQ9IWEsIWZ1bmN0aW9uKGUsdCxpLG8pe3ZhciBhPWUuZGF0YTtpZihuKGEpKXt2YXIgYz1uKGUuY29tcG9uZW50SW5zdGFuY2UpJiZhLmtlZXBBbGl2ZTtpZihuKGE9YS5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMSksbihlLmNvbXBvbmVudEluc3RhbmNlKSlyZXR1cm4gZChlLHQpLHYoaSxlLmVsbSxvKSxyKGMpJiZmdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG8sYT1lO2EuY29tcG9uZW50SW5zdGFuY2U7KWlmKGE9YS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUsbihvPWEuZGF0YSkmJm4obz1vLnRyYW5zaXRpb24pKXtmb3Iobz0wO288cy5hY3RpdmF0ZS5sZW5ndGg7KytvKXMuYWN0aXZhdGVbb10obnIsYSk7dC5wdXNoKGEpO2JyZWFrfXYocixlLmVsbSxpKX0oZSx0LGksbyksITB9fShlLHQsaSxvKSl7dmFyIGY9ZS5kYXRhLHA9ZS5jaGlsZHJlbixtPWUudGFnO24obSk/KGUuZWxtPWUubnM/dS5jcmVhdGVFbGVtZW50TlMoZS5ucyxtKTp1LmNyZWF0ZUVsZW1lbnQobSxlKSxnKGUpLGgoZSxwLHQpLG4oZikmJnkoZSx0KSx2KGksZS5lbG0sbykpOnIoZS5pc0NvbW1lbnQpPyhlLmVsbT11LmNyZWF0ZUNvbW1lbnQoZS50ZXh0KSx2KGksZS5lbG0sbykpOihlLmVsbT11LmNyZWF0ZVRleHROb2RlKGUudGV4dCksdihpLGUuZWxtLG8pKX19ZnVuY3Rpb24gZChlLHQpe24oZS5kYXRhLnBlbmRpbmdJbnNlcnQpJiYodC5wdXNoLmFwcGx5KHQsZS5kYXRhLnBlbmRpbmdJbnNlcnQpLGUuZGF0YS5wZW5kaW5nSW5zZXJ0PW51bGwpLGUuZWxtPWUuY29tcG9uZW50SW5zdGFuY2UuJGVsLG0oZSk/KHkoZSx0KSxnKGUpKToodHIoZSksdC5wdXNoKGUpKX1mdW5jdGlvbiB2KGUsdCxyKXtuKGUpJiYobihyKT91LnBhcmVudE5vZGUocik9PT1lJiZ1Lmluc2VydEJlZm9yZShlLHQscik6dS5hcHBlbmRDaGlsZChlLHQpKX1mdW5jdGlvbiBoKGUsdCxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKWYodFtyXSxuLGUuZWxtLG51bGwsITAsdCxyKTtlbHNlIGkoZS50ZXh0KSYmdS5hcHBlbmRDaGlsZChlLmVsbSx1LmNyZWF0ZVRleHROb2RlKFN0cmluZyhlLnRleHQpKSl9ZnVuY3Rpb24gbShlKXtmb3IoO2UuY29tcG9uZW50SW5zdGFuY2U7KWU9ZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGU7cmV0dXJuIG4oZS50YWcpfWZ1bmN0aW9uIHkoZSx0KXtmb3IodmFyIHI9MDtyPHMuY3JlYXRlLmxlbmd0aDsrK3Ipcy5jcmVhdGVbcl0obnIsZSk7bihvPWUuZGF0YS5ob29rKSYmKG4oby5jcmVhdGUpJiZvLmNyZWF0ZShucixlKSxuKG8uaW5zZXJ0KSYmdC5wdXNoKGUpKX1mdW5jdGlvbiBnKGUpe3ZhciB0O2lmKG4odD1lLmZuU2NvcGVJZCkpdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpO2Vsc2UgZm9yKHZhciByPWU7cjspbih0PXIuY29udGV4dCkmJm4odD10LiRvcHRpb25zLl9zY29wZUlkKSYmdS5zZXRTdHlsZVNjb3BlKGUuZWxtLHQpLHI9ci5wYXJlbnQ7bih0PVd0KSYmdCE9PWUuY29udGV4dCYmdCE9PWUuZm5Db250ZXh0JiZuKHQ9dC4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZShlLmVsbSx0KX1mdW5jdGlvbiBfKGUsdCxuLHIsaSxvKXtmb3IoO3I8PWk7KytyKWYobltyXSxvLGUsdCwhMSxuLHIpfWZ1bmN0aW9uIGIoZSl7dmFyIHQscixpPWUuZGF0YTtpZihuKGkpKWZvcihuKHQ9aS5ob29rKSYmbih0PXQuZGVzdHJveSkmJnQoZSksdD0wO3Q8cy5kZXN0cm95Lmxlbmd0aDsrK3Qpcy5kZXN0cm95W3RdKGUpO2lmKG4odD1lLmNoaWxkcmVuKSlmb3Iocj0wO3I8ZS5jaGlsZHJlbi5sZW5ndGg7KytyKWIoZS5jaGlsZHJlbltyXSl9ZnVuY3Rpb24gJChlLHQscil7Zm9yKDt0PD1yOysrdCl7dmFyIGk9ZVt0XTtuKGkpJiYobihpLnRhZyk/KHcoaSksYihpKSk6bChpLmVsbSkpfX1mdW5jdGlvbiB3KGUsdCl7aWYobih0KXx8bihlLmRhdGEpKXt2YXIgcixpPXMucmVtb3ZlLmxlbmd0aCsxO2ZvcihuKHQpP3QubGlzdGVuZXJzKz1pOnQ9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7MD09LS1uLmxpc3RlbmVycyYmbChlKX1yZXR1cm4gbi5saXN0ZW5lcnM9dCxufShlLmVsbSxpKSxuKHI9ZS5jb21wb25lbnRJbnN0YW5jZSkmJm4ocj1yLl92bm9kZSkmJm4oci5kYXRhKSYmdyhyLHQpLHI9MDtyPHMucmVtb3ZlLmxlbmd0aDsrK3Ipcy5yZW1vdmVbcl0oZSx0KTtuKHI9ZS5kYXRhLmhvb2spJiZuKHI9ci5yZW1vdmUpP3IoZSx0KTp0KCl9ZWxzZSBsKGUuZWxtKX1mdW5jdGlvbiBDKGUsdCxyLGkpe2Zvcih2YXIgbz1yO288aTtvKyspe3ZhciBhPXRbb107aWYobihhKSYmaXIoZSxhKSlyZXR1cm4gb319ZnVuY3Rpb24geChlLGksbyxhLGMsbCl7aWYoZSE9PWkpe24oaS5lbG0pJiZuKGEpJiYoaT1hW2NdPW1lKGkpKTt2YXIgcD1pLmVsbT1lLmVsbTtpZihyKGUuaXNBc3luY1BsYWNlaG9sZGVyKSluKGkuYXN5bmNGYWN0b3J5LnJlc29sdmVkKT9PKGUuZWxtLGksbyk6aS5pc0FzeW5jUGxhY2Vob2xkZXI9ITA7ZWxzZSBpZihyKGkuaXNTdGF0aWMpJiZyKGUuaXNTdGF0aWMpJiZpLmtleT09PWUua2V5JiYocihpLmlzQ2xvbmVkKXx8cihpLmlzT25jZSkpKWkuY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZTtlbHNle3ZhciBkLHY9aS5kYXRhO24odikmJm4oZD12Lmhvb2spJiZuKGQ9ZC5wcmVwYXRjaCkmJmQoZSxpKTt2YXIgaD1lLmNoaWxkcmVuLHk9aS5jaGlsZHJlbjtpZihuKHYpJiZtKGkpKXtmb3IoZD0wO2Q8cy51cGRhdGUubGVuZ3RoOysrZClzLnVwZGF0ZVtkXShlLGkpO24oZD12Lmhvb2spJiZuKGQ9ZC51cGRhdGUpJiZkKGUsaSl9dChpLnRleHQpP24oaCkmJm4oeSk/aCE9PXkmJmZ1bmN0aW9uKGUscixpLG8sYSl7Zm9yKHZhciBzLGMsbCxwPTAsZD0wLHY9ci5sZW5ndGgtMSxoPXJbMF0sbT1yW3ZdLHk9aS5sZW5ndGgtMSxnPWlbMF0sYj1pW3ldLHc9IWE7cDw9diYmZDw9eTspdChoKT9oPXJbKytwXTp0KG0pP209clstLXZdOmlyKGgsZyk/KHgoaCxnLG8saSxkKSxoPXJbKytwXSxnPWlbKytkXSk6aXIobSxiKT8oeChtLGIsbyxpLHkpLG09clstLXZdLGI9aVstLXldKTppcihoLGIpPyh4KGgsYixvLGkseSksdyYmdS5pbnNlcnRCZWZvcmUoZSxoLmVsbSx1Lm5leHRTaWJsaW5nKG0uZWxtKSksaD1yWysrcF0sYj1pWy0teV0pOmlyKG0sZyk/KHgobSxnLG8saSxkKSx3JiZ1Lmluc2VydEJlZm9yZShlLG0uZWxtLGguZWxtKSxtPXJbLS12XSxnPWlbKytkXSk6KHQocykmJihzPW9yKHIscCx2KSksdChjPW4oZy5rZXkpP3NbZy5rZXldOkMoZyxyLHAsdikpP2YoZyxvLGUsaC5lbG0sITEsaSxkKTppcihsPXJbY10sZyk/KHgobCxnLG8saSxkKSxyW2NdPXZvaWQgMCx3JiZ1Lmluc2VydEJlZm9yZShlLGwuZWxtLGguZWxtKSk6ZihnLG8sZSxoLmVsbSwhMSxpLGQpLGc9aVsrK2RdKTtwPnY/XyhlLHQoaVt5KzFdKT9udWxsOmlbeSsxXS5lbG0saSxkLHksbyk6ZD55JiYkKHIscCx2KX0ocCxoLHksbyxsKTpuKHkpPyhuKGUudGV4dCkmJnUuc2V0VGV4dENvbnRlbnQocCwiIiksXyhwLG51bGwseSwwLHkubGVuZ3RoLTEsbykpOm4oaCk/JChoLDAsaC5sZW5ndGgtMSk6bihlLnRleHQpJiZ1LnNldFRleHRDb250ZW50KHAsIiIpOmUudGV4dCE9PWkudGV4dCYmdS5zZXRUZXh0Q29udGVudChwLGkudGV4dCksbih2KSYmbihkPXYuaG9vaykmJm4oZD1kLnBvc3RwYXRjaCkmJmQoZSxpKX19fWZ1bmN0aW9uIGsoZSx0LGkpe2lmKHIoaSkmJm4oZS5wYXJlbnQpKWUucGFyZW50LmRhdGEucGVuZGluZ0luc2VydD10O2Vsc2UgZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDsrK28pdFtvXS5kYXRhLmhvb2suaW5zZXJ0KHRbb10pfXZhciBBPXAoImF0dHJzLGNsYXNzLHN0YXRpY0NsYXNzLHN0YXRpY1N0eWxlLGtleSIpO2Z1bmN0aW9uIE8oZSx0LGksbyl7dmFyIGEscz10LnRhZyxjPXQuZGF0YSx1PXQuY2hpbGRyZW47aWYobz1vfHxjJiZjLnByZSx0LmVsbT1lLHIodC5pc0NvbW1lbnQpJiZuKHQuYXN5bmNGYWN0b3J5KSlyZXR1cm4gdC5pc0FzeW5jUGxhY2Vob2xkZXI9ITAsITA7aWYobihjKSYmKG4oYT1jLmhvb2spJiZuKGE9YS5pbml0KSYmYSh0LCEwKSxuKGE9dC5jb21wb25lbnRJbnN0YW5jZSkpKXJldHVybiBkKHQsaSksITA7aWYobihzKSl7aWYobih1KSlpZihlLmhhc0NoaWxkTm9kZXMoKSlpZihuKGE9YykmJm4oYT1hLmRvbVByb3BzKSYmbihhPWEuaW5uZXJIVE1MKSl7aWYoYSE9PWUuaW5uZXJIVE1MKXJldHVybiExfWVsc2V7Zm9yKHZhciBsPSEwLGY9ZS5maXJzdENoaWxkLHA9MDtwPHUubGVuZ3RoO3ArKyl7aWYoIWZ8fCFPKGYsdVtwXSxpLG8pKXtsPSExO2JyZWFrfWY9Zi5uZXh0U2libGluZ31pZighbHx8ZilyZXR1cm4hMX1lbHNlIGgodCx1LGkpO2lmKG4oYykpe3ZhciB2PSExO2Zvcih2YXIgbSBpbiBjKWlmKCFBKG0pKXt2PSEwLHkodCxpKTticmVha30hdiYmYy5jbGFzcyYmZXQoYy5jbGFzcyl9fWVsc2UgZS5kYXRhIT09dC50ZXh0JiYoZS5kYXRhPXQudGV4dCk7cmV0dXJuITB9cmV0dXJuIGZ1bmN0aW9uKGUsaSxvLGEpe2lmKCF0KGkpKXt2YXIgYyxsPSExLHA9W107aWYodChlKSlsPSEwLGYoaSxwKTtlbHNle3ZhciBkPW4oZS5ub2RlVHlwZSk7aWYoIWQmJmlyKGUsaSkpeChlLGkscCxudWxsLG51bGwsYSk7ZWxzZXtpZihkKXtpZigxPT09ZS5ub2RlVHlwZSYmZS5oYXNBdHRyaWJ1dGUoTCkmJihlLnJlbW92ZUF0dHJpYnV0ZShMKSxvPSEwKSxyKG8pJiZPKGUsaSxwKSlyZXR1cm4gayhpLHAsITApLGU7Yz1lLGU9bmV3IHBlKHUudGFnTmFtZShjKS50b0xvd2VyQ2FzZSgpLHt9LFtdLHZvaWQgMCxjKX12YXIgdj1lLmVsbSxoPXUucGFyZW50Tm9kZSh2KTtpZihmKGkscCx2Ll9sZWF2ZUNiP251bGw6aCx1Lm5leHRTaWJsaW5nKHYpKSxuKGkucGFyZW50KSlmb3IodmFyIHk9aS5wYXJlbnQsZz1tKGkpO3k7KXtmb3IodmFyIF89MDtfPHMuZGVzdHJveS5sZW5ndGg7KytfKXMuZGVzdHJveVtfXSh5KTtpZih5LmVsbT1pLmVsbSxnKXtmb3IodmFyIHc9MDt3PHMuY3JlYXRlLmxlbmd0aDsrK3cpcy5jcmVhdGVbd10obnIseSk7dmFyIEM9eS5kYXRhLmhvb2suaW5zZXJ0O2lmKEMubWVyZ2VkKWZvcih2YXIgQT0xO0E8Qy5mbnMubGVuZ3RoO0ErKylDLmZuc1tBXSgpfWVsc2UgdHIoeSk7eT15LnBhcmVudH1uKGgpPyQoW2VdLDAsMCk6bihlLnRhZykmJmIoZSl9fXJldHVybiBrKGkscCxsKSxpLmVsbX1uKGUpJiZiKGUpfX0oe25vZGVPcHM6UW4sbW9kdWxlczpbbXIseHIsbmksb2ksbWksej97Y3JlYXRlOlVpLGFjdGl2YXRlOlVpLHJlbW92ZTpmdW5jdGlvbihlLHQpeyEwIT09ZS5kYXRhLnNob3c/UmkoZSx0KTp0KCl9fTp7fV0uY29uY2F0KHByKX0pO1cmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5hY3RpdmVFbGVtZW50O2UmJmUudm1vZGVsJiZYaShlLCJpbnB1dCIpfSk7dmFyIFZpPXtpbnNlcnRlZDpmdW5jdGlvbihlLHQsbixyKXsic2VsZWN0Ij09PW4udGFnPyhyLmVsbSYmIXIuZWxtLl92T3B0aW9ucz9pdChuLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7VmkuY29tcG9uZW50VXBkYXRlZChlLHQsbil9KTpLaShlLHQsbi5jb250ZXh0KSxlLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpKTooInRleHRhcmVhIj09PW4udGFnfHxYbihlLnR5cGUpKSYmKGUuX3ZNb2RpZmllcnM9dC5tb2RpZmllcnMsdC5tb2RpZmllcnMubGF6eXx8KGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25zdGFydCIsWmkpLGUuYWRkRXZlbnRMaXN0ZW5lcigiY29tcG9zaXRpb25lbmQiLEdpKSxlLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsR2kpLFcmJihlLnZtb2RlbD0hMCkpKX0sY29tcG9uZW50VXBkYXRlZDpmdW5jdGlvbihlLHQsbil7aWYoInNlbGVjdCI9PT1uLnRhZyl7S2koZSx0LG4uY29udGV4dCk7dmFyIHI9ZS5fdk9wdGlvbnMsaT1lLl92T3B0aW9ucz1bXS5tYXAuY2FsbChlLm9wdGlvbnMsV2kpO2lmKGkuc29tZShmdW5jdGlvbihlLHQpe3JldHVybiFOKGUsclt0XSl9KSkoZS5tdWx0aXBsZT90LnZhbHVlLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIHFpKGUsaSl9KTp0LnZhbHVlIT09dC5vbGRWYWx1ZSYmcWkodC52YWx1ZSxpKSkmJlhpKGUsImNoYW5nZSIpfX19O2Z1bmN0aW9uIEtpKGUsdCxuKXtKaShlLHQsbiksKHF8fFopJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7SmkoZSx0LG4pfSwwKX1mdW5jdGlvbiBKaShlLHQsbil7dmFyIHI9dC52YWx1ZSxpPWUubXVsdGlwbGU7aWYoIWl8fEFycmF5LmlzQXJyYXkocikpe2Zvcih2YXIgbyxhLHM9MCxjPWUub3B0aW9ucy5sZW5ndGg7czxjO3MrKylpZihhPWUub3B0aW9uc1tzXSxpKW89aihyLFdpKGEpKT4tMSxhLnNlbGVjdGVkIT09byYmKGEuc2VsZWN0ZWQ9byk7ZWxzZSBpZihOKFdpKGEpLHIpKXJldHVybiB2b2lkKGUuc2VsZWN0ZWRJbmRleCE9PXMmJihlLnNlbGVjdGVkSW5kZXg9cykpO2l8fChlLnNlbGVjdGVkSW5kZXg9LTEpfX1mdW5jdGlvbiBxaShlLHQpe3JldHVybiB0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVybiFOKHQsZSl9KX1mdW5jdGlvbiBXaShlKXtyZXR1cm4iX3ZhbHVlImluIGU/ZS5fdmFsdWU6ZS52YWx1ZX1mdW5jdGlvbiBaaShlKXtlLnRhcmdldC5jb21wb3Npbmc9ITB9ZnVuY3Rpb24gR2koZSl7ZS50YXJnZXQuY29tcG9zaW5nJiYoZS50YXJnZXQuY29tcG9zaW5nPSExLFhpKGUudGFyZ2V0LCJpbnB1dCIpKX1mdW5jdGlvbiBYaShlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIik7bi5pbml0RXZlbnQodCwhMCwhMCksZS5kaXNwYXRjaEV2ZW50KG4pfWZ1bmN0aW9uIFlpKGUpe3JldHVybiFlLmNvbXBvbmVudEluc3RhbmNlfHxlLmRhdGEmJmUuZGF0YS50cmFuc2l0aW9uP2U6WWkoZS5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpfXZhciBRaT17bW9kZWw6Vmksc2hvdzp7YmluZDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dC52YWx1ZSxpPShuPVlpKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbixvPWUuX192T3JpZ2luYWxEaXNwbGF5PSJub25lIj09PWUuc3R5bGUuZGlzcGxheT8iIjplLnN0eWxlLmRpc3BsYXk7ciYmaT8obi5kYXRhLnNob3c9ITAsUGkobixmdW5jdGlvbigpe2Uuc3R5bGUuZGlzcGxheT1vfSkpOmUuc3R5bGUuZGlzcGxheT1yP286Im5vbmUifSx1cGRhdGU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQudmFsdWU7IXIhPSF0Lm9sZFZhbHVlJiYoKG49WWkobikpLmRhdGEmJm4uZGF0YS50cmFuc2l0aW9uPyhuLmRhdGEuc2hvdz0hMCxyP1BpKG4sZnVuY3Rpb24oKXtlLnN0eWxlLmRpc3BsYXk9ZS5fX3ZPcmlnaW5hbERpc3BsYXl9KTpSaShuLGZ1bmN0aW9uKCl7ZS5zdHlsZS5kaXNwbGF5PSJub25lIn0pKTplLnN0eWxlLmRpc3BsYXk9cj9lLl9fdk9yaWdpbmFsRGlzcGxheToibm9uZSIpfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0LG4scixpKXtpfHwoZS5zdHlsZS5kaXNwbGF5PWUuX192T3JpZ2luYWxEaXNwbGF5KX19fSxlbz17bmFtZTpTdHJpbmcsYXBwZWFyOkJvb2xlYW4sY3NzOkJvb2xlYW4sbW9kZTpTdHJpbmcsdHlwZTpTdHJpbmcsZW50ZXJDbGFzczpTdHJpbmcsbGVhdmVDbGFzczpTdHJpbmcsZW50ZXJUb0NsYXNzOlN0cmluZyxsZWF2ZVRvQ2xhc3M6U3RyaW5nLGVudGVyQWN0aXZlQ2xhc3M6U3RyaW5nLGxlYXZlQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhckNsYXNzOlN0cmluZyxhcHBlYXJBY3RpdmVDbGFzczpTdHJpbmcsYXBwZWFyVG9DbGFzczpTdHJpbmcsZHVyYXRpb246W051bWJlcixTdHJpbmcsT2JqZWN0XX07ZnVuY3Rpb24gdG8oZSl7dmFyIHQ9ZSYmZS5jb21wb25lbnRPcHRpb25zO3JldHVybiB0JiZ0LkN0b3Iub3B0aW9ucy5hYnN0cmFjdD90byh6dCh0LmNoaWxkcmVuKSk6ZX1mdW5jdGlvbiBubyhlKXt2YXIgdD17fSxuPWUuJG9wdGlvbnM7Zm9yKHZhciByIGluIG4ucHJvcHNEYXRhKXRbcl09ZVtyXTt2YXIgaT1uLl9wYXJlbnRMaXN0ZW5lcnM7Zm9yKHZhciBvIGluIGkpdFtiKG8pXT1pW29dO3JldHVybiB0fWZ1bmN0aW9uIHJvKGUsdCl7aWYoL1xkLWtlZXAtYWxpdmUkLy50ZXN0KHQudGFnKSlyZXR1cm4gZSgia2VlcC1hbGl2ZSIse3Byb3BzOnQuY29tcG9uZW50T3B0aW9ucy5wcm9wc0RhdGF9KX12YXIgaW89ZnVuY3Rpb24oZSl7cmV0dXJuIGUudGFnfHxVdChlKX0sb289ZnVuY3Rpb24oZSl7cmV0dXJuInNob3ciPT09ZS5uYW1lfSxhbz17bmFtZToidHJhbnNpdGlvbiIscHJvcHM6ZW8sYWJzdHJhY3Q6ITAscmVuZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLiRzbG90cy5kZWZhdWx0O2lmKG4mJihuPW4uZmlsdGVyKGlvKSkubGVuZ3RoKXt2YXIgcj10aGlzLm1vZGUsbz1uWzBdO2lmKGZ1bmN0aW9uKGUpe2Zvcig7ZT1lLnBhcmVudDspaWYoZS5kYXRhLnRyYW5zaXRpb24pcmV0dXJuITB9KHRoaXMuJHZub2RlKSlyZXR1cm4gbzt2YXIgYT10byhvKTtpZighYSlyZXR1cm4gbztpZih0aGlzLl9sZWF2aW5nKXJldHVybiBybyhlLG8pO3ZhciBzPSJfX3RyYW5zaXRpb24tIit0aGlzLl91aWQrIi0iO2Eua2V5PW51bGw9PWEua2V5P2EuaXNDb21tZW50P3MrImNvbW1lbnQiOnMrYS50YWc6aShhLmtleSk/MD09PVN0cmluZyhhLmtleSkuaW5kZXhPZihzKT9hLmtleTpzK2Eua2V5OmEua2V5O3ZhciBjPShhLmRhdGF8fChhLmRhdGE9e30pKS50cmFuc2l0aW9uPW5vKHRoaXMpLHU9dGhpcy5fdm5vZGUsbD10byh1KTtpZihhLmRhdGEuZGlyZWN0aXZlcyYmYS5kYXRhLmRpcmVjdGl2ZXMuc29tZShvbykmJihhLmRhdGEuc2hvdz0hMCksbCYmbC5kYXRhJiYhZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5rZXk9PT1lLmtleSYmdC50YWc9PT1lLnRhZ30oYSxsKSYmIVV0KGwpJiYoIWwuY29tcG9uZW50SW5zdGFuY2V8fCFsLmNvbXBvbmVudEluc3RhbmNlLl92bm9kZS5pc0NvbW1lbnQpKXt2YXIgZj1sLmRhdGEudHJhbnNpdGlvbj1BKHt9LGMpO2lmKCJvdXQtaW4iPT09cilyZXR1cm4gdGhpcy5fbGVhdmluZz0hMCxpdChmLCJhZnRlckxlYXZlIixmdW5jdGlvbigpe3QuX2xlYXZpbmc9ITEsdC4kZm9yY2VVcGRhdGUoKX0pLHJvKGUsbyk7aWYoImluLW91dCI9PT1yKXtpZihVdChhKSlyZXR1cm4gdTt2YXIgcCxkPWZ1bmN0aW9uKCl7cCgpfTtpdChjLCJhZnRlckVudGVyIixkKSxpdChjLCJlbnRlckNhbmNlbGxlZCIsZCksaXQoZiwiZGVsYXlMZWF2ZSIsZnVuY3Rpb24oZSl7cD1lfSl9fXJldHVybiBvfX19LHNvPUEoe3RhZzpTdHJpbmcsbW92ZUNsYXNzOlN0cmluZ30sZW8pO2Z1bmN0aW9uIGNvKGUpe2UuZWxtLl9tb3ZlQ2ImJmUuZWxtLl9tb3ZlQ2IoKSxlLmVsbS5fZW50ZXJDYiYmZS5lbG0uX2VudGVyQ2IoKX1mdW5jdGlvbiB1byhlKXtlLmRhdGEubmV3UG9zPWUuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIGxvKGUpe3ZhciB0PWUuZGF0YS5wb3Msbj1lLmRhdGEubmV3UG9zLHI9dC5sZWZ0LW4ubGVmdCxpPXQudG9wLW4udG9wO2lmKHJ8fGkpe2UuZGF0YS5tb3ZlZD0hMDt2YXIgbz1lLmVsbS5zdHlsZTtvLnRyYW5zZm9ybT1vLldlYmtpdFRyYW5zZm9ybT0idHJhbnNsYXRlKCIrcisicHgsIitpKyJweCkiLG8udHJhbnNpdGlvbkR1cmF0aW9uPSIwcyJ9fWRlbGV0ZSBzby5tb2RlO3ZhciBmbz17VHJhbnNpdGlvbjphbyxUcmFuc2l0aW9uR3JvdXA6e3Byb3BzOnNvLGJlZm9yZU1vdW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3VwZGF0ZTt0aGlzLl91cGRhdGU9ZnVuY3Rpb24obixyKXt2YXIgaT1adChlKTtlLl9fcGF0Y2hfXyhlLl92bm9kZSxlLmtlcHQsITEsITApLGUuX3Zub2RlPWUua2VwdCxpKCksdC5jYWxsKGUsbixyKX19LHJlbmRlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50YWd8fHRoaXMuJHZub2RlLmRhdGEudGFnfHwic3BhbiIsbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9dGhpcy5wcmV2Q2hpbGRyZW49dGhpcy5jaGlsZHJlbixpPXRoaXMuJHNsb3RzLmRlZmF1bHR8fFtdLG89dGhpcy5jaGlsZHJlbj1bXSxhPW5vKHRoaXMpLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGM9aVtzXTtjLnRhZyYmbnVsbCE9Yy5rZXkmJjAhPT1TdHJpbmcoYy5rZXkpLmluZGV4T2YoIl9fdmxpc3QiKSYmKG8ucHVzaChjKSxuW2Mua2V5XT1jLChjLmRhdGF8fChjLmRhdGE9e30pKS50cmFuc2l0aW9uPWEpfWlmKHIpe2Zvcih2YXIgdT1bXSxsPVtdLGY9MDtmPHIubGVuZ3RoO2YrKyl7dmFyIHA9cltmXTtwLmRhdGEudHJhbnNpdGlvbj1hLHAuZGF0YS5wb3M9cC5lbG0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbltwLmtleV0/dS5wdXNoKHApOmwucHVzaChwKX10aGlzLmtlcHQ9ZSh0LG51bGwsdSksdGhpcy5yZW1vdmVkPWx9cmV0dXJuIGUodCxudWxsLG8pfSx1cGRhdGVkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcmV2Q2hpbGRyZW4sdD10aGlzLm1vdmVDbGFzc3x8KHRoaXMubmFtZXx8InYiKSsiLW1vdmUiO2UubGVuZ3RoJiZ0aGlzLmhhc01vdmUoZVswXS5lbG0sdCkmJihlLmZvckVhY2goY28pLGUuZm9yRWFjaCh1byksZS5mb3JFYWNoKGxvKSx0aGlzLl9yZWZsb3c9ZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQsZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKGUuZGF0YS5tb3ZlZCl7dmFyIG49ZS5lbG0scj1uLnN0eWxlO05pKG4sdCksci50cmFuc2Zvcm09ci5XZWJraXRUcmFuc2Zvcm09ci50cmFuc2l0aW9uRHVyYXRpb249IiIsbi5hZGRFdmVudExpc3RlbmVyKEFpLG4uX21vdmVDYj1mdW5jdGlvbiBlKHIpe3ImJnIudGFyZ2V0IT09bnx8ciYmIS90cmFuc2Zvcm0kLy50ZXN0KHIucHJvcGVydHlOYW1lKXx8KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihBaSxlKSxuLl9tb3ZlQ2I9bnVsbCxqaShuLHQpKX0pfX0pKX0sbWV0aG9kczp7aGFzTW92ZTpmdW5jdGlvbihlLHQpe2lmKCF3aSlyZXR1cm4hMTtpZih0aGlzLl9oYXNNb3ZlKXJldHVybiB0aGlzLl9oYXNNb3ZlO3ZhciBuPWUuY2xvbmVOb2RlKCk7ZS5fdHJhbnNpdGlvbkNsYXNzZXMmJmUuX3RyYW5zaXRpb25DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oZSl7X2kobixlKX0pLGdpKG4sdCksbi5zdHlsZS5kaXNwbGF5PSJub25lIix0aGlzLiRlbC5hcHBlbmRDaGlsZChuKTt2YXIgcj1NaShuKTtyZXR1cm4gdGhpcy4kZWwucmVtb3ZlQ2hpbGQobiksdGhpcy5faGFzTW92ZT1yLmhhc1RyYW5zZm9ybX19fX07d24uY29uZmlnLm11c3RVc2VQcm9wPWpuLHduLmNvbmZpZy5pc1Jlc2VydmVkVGFnPVduLHduLmNvbmZpZy5pc1Jlc2VydmVkQXR0cj1Fbix3bi5jb25maWcuZ2V0VGFnTmFtZXNwYWNlPVpuLHduLmNvbmZpZy5pc1Vua25vd25FbGVtZW50PWZ1bmN0aW9uKGUpe2lmKCF6KXJldHVybiEwO2lmKFduKGUpKXJldHVybiExO2lmKGU9ZS50b0xvd2VyQ2FzZSgpLG51bGwhPUduW2VdKXJldHVybiBHbltlXTt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpO3JldHVybiBlLmluZGV4T2YoIi0iKT4tMT9HbltlXT10LmNvbnN0cnVjdG9yPT09d2luZG93LkhUTUxVbmtub3duRWxlbWVudHx8dC5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MRWxlbWVudDpHbltlXT0vSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KHQudG9TdHJpbmcoKSl9LEEod24ub3B0aW9ucy5kaXJlY3RpdmVzLFFpKSxBKHduLm9wdGlvbnMuY29tcG9uZW50cyxmbyksd24ucHJvdG90eXBlLl9fcGF0Y2hfXz16P3ppOlMsd24ucHJvdG90eXBlLiRtb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGUuJGVsPXQsZS4kb3B0aW9ucy5yZW5kZXJ8fChlLiRvcHRpb25zLnJlbmRlcj12ZSksWXQoZSwiYmVmb3JlTW91bnQiKSxyPWZ1bmN0aW9uKCl7ZS5fdXBkYXRlKGUuX3JlbmRlcigpLG4pfSxuZXcgZm4oZSxyLFMse2JlZm9yZTpmdW5jdGlvbigpe2UuX2lzTW91bnRlZCYmIWUuX2lzRGVzdHJveWVkJiZZdChlLCJiZWZvcmVVcGRhdGUiKX19LCEwKSxuPSExLG51bGw9PWUuJHZub2RlJiYoZS5faXNNb3VudGVkPSEwLFl0KGUsIm1vdW50ZWQiKSksZX0odGhpcyxlPWUmJno/WW4oZSk6dm9pZCAwLHQpfSx6JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ri5kZXZ0b29scyYmbmUmJm5lLmVtaXQoImluaXQiLHduKX0sMCk7dmFyIHBvPS9ce1x7KCg/Oi58XHI/XG4pKz8pXH1cfS9nLHZvPS9bLS4qKz9eJHt9KCl8W1xdXC9cXF0vZyxobz1nKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0ucmVwbGFjZSh2bywiXFwkJiIpLG49ZVsxXS5yZXBsYWNlKHZvLCJcXCQmIik7cmV0dXJuIG5ldyBSZWdFeHAodCsiKCg/Oi58XFxuKSs/KSIrbiwiZyIpfSk7dmFyIG1vPXtzdGF0aWNLZXlzOlsic3RhdGljQ2xhc3MiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsImNsYXNzIik7biYmKGUuc3RhdGljQ2xhc3M9SlNPTi5zdHJpbmdpZnkobikpO3ZhciByPUlyKGUsImNsYXNzIiwhMSk7ciYmKGUuY2xhc3NCaW5kaW5nPXIpfSxnZW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PSIiO3JldHVybiBlLnN0YXRpY0NsYXNzJiYodCs9InN0YXRpY0NsYXNzOiIrZS5zdGF0aWNDbGFzcysiLCIpLGUuY2xhc3NCaW5kaW5nJiYodCs9ImNsYXNzOiIrZS5jbGFzc0JpbmRpbmcrIiwiKSx0fX07dmFyIHlvLGdvPXtzdGF0aWNLZXlzOlsic3RhdGljU3R5bGUiXSx0cmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7dC53YXJuO3ZhciBuPUZyKGUsInN0eWxlIik7biYmKGUuc3RhdGljU3R5bGU9SlNPTi5zdHJpbmdpZnkoYWkobikpKTt2YXIgcj1JcihlLCJzdHlsZSIsITEpO3ImJihlLnN0eWxlQmluZGluZz1yKX0sZ2VuRGF0YTpmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZS5zdGF0aWNTdHlsZSYmKHQrPSJzdGF0aWNTdHlsZToiK2Uuc3RhdGljU3R5bGUrIiwiKSxlLnN0eWxlQmluZGluZyYmKHQrPSJzdHlsZTooIitlLnN0eWxlQmluZGluZysiKSwiKSx0fX0sX289ZnVuY3Rpb24oZSl7cmV0dXJuKHlvPXlvfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWUseW8udGV4dENvbnRlbnR9LGJvPXAoImFyZWEsYmFzZSxicixjb2wsZW1iZWQsZnJhbWUsaHIsaW1nLGlucHV0LGlzaW5kZXgsa2V5Z2VuLGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyIiksJG89cCgiY29sZ3JvdXAsZGQsZHQsbGksb3B0aW9ucyxwLHRkLHRmb290LHRoLHRoZWFkLHRyLHNvdXJjZSIpLHdvPXAoImFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxiYXNlLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNvbCxjb2xncm91cCxkZCxkZXRhaWxzLGRpYWxvZyxkaXYsZGwsZHQsZmllbGRzZXQsZmlnY2FwdGlvbixmaWd1cmUsZm9vdGVyLGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaGVhZCxoZWFkZXIsaGdyb3VwLGhyLGh0bWwsbGVnZW5kLGxpLG1lbnVpdGVtLG1ldGEsb3B0Z3JvdXAsb3B0aW9uLHBhcmFtLHJwLHJ0LHNvdXJjZSxzdHlsZSxzdW1tYXJ5LHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRpdGxlLHRyLHRyYWNrIiksQ289L15ccyooW15ccyInPD5cLz1dKykoPzpccyooPSlccyooPzoiKFteIl0qKSIrfCcoW14nXSopJyt8KFteXHMiJz08PmBdKykpKT8vLHhvPS9eXHMqKCg/OnYtW1x3LV0rOnxAfDp8IylcW1tePV0rXF1bXlxzIic8PlwvPV0qKSg/OlxzKig9KVxzKig/OiIoW14iXSopIit8JyhbXiddKiknK3woW15ccyInPTw+YF0rKSkpPy8sa289IlthLXpBLVpfXVtcXC1cXC4wLTlfYS16QS1aIitQLnNvdXJjZSsiXSoiLEFvPSIoKD86IitrbysiXFw6KT8iK2tvKyIpIixPbz1uZXcgUmVnRXhwKCJePCIrQW8pLFNvPS9eXHMqKFwvPyk+LyxUbz1uZXcgUmVnRXhwKCJePFxcLyIrQW8rIltePl0qPiIpLEVvPS9ePCFET0NUWVBFIFtePl0rPi9pLE5vPS9ePCFcLS0vLGpvPS9ePCFcWy8sRG89cCgic2NyaXB0LHN0eWxlLHRleHRhcmVhIiwhMCksTG89e30sTW89eyImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIicsIiZhbXA7IjoiJiIsIiYjMTA7IjoiXG4iLCImIzk7IjoiXHQiLCImIzM5OyI6IicifSxJbz0vJig/Omx0fGd0fHF1b3R8YW1wfCMzOSk7L2csRm89LyYoPzpsdHxndHxxdW90fGFtcHwjMzl8IzEwfCM5KTsvZyxQbz1wKCJwcmUsdGV4dGFyZWEiLCEwKSxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZQbyhlKSYmIlxuIj09PXRbMF19O2Z1bmN0aW9uIEhvKGUsdCl7dmFyIG49dD9GbzpJbztyZXR1cm4gZS5yZXBsYWNlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIE1vW2VdfSl9dmFyIEJvLFVvLHpvLFZvLEtvLEpvLHFvLFdvLFpvPS9eQHxedi1vbjovLEdvPS9edi18XkB8Xjp8XiMvLFhvPS8oW1xzXFNdKj8pXHMrKD86aW58b2YpXHMrKFtcc1xTXSopLyxZbz0vLChbXixcfVxdXSopKD86LChbXixcfVxdXSopKT8kLyxRbz0vXlwofFwpJC9nLGVhPS9eXFsuKlxdJC8sdGE9LzooLiopJC8sbmE9L146fF5cLnxedi1iaW5kOi8scmE9L1wuW14uXF1dKyg/PVteXF1dKiQpL2csaWE9L152LXNsb3QoOnwkKXxeIy8sb2E9L1tcclxuXS8sYWE9L1xzKy9nLHNhPWcoX28pLGNhPSJfZW1wdHlfIjtmdW5jdGlvbiB1YShlLHQsbil7cmV0dXJue3R5cGU6MSx0YWc6ZSxhdHRyc0xpc3Q6dCxhdHRyc01hcDptYSh0KSxyYXdBdHRyc01hcDp7fSxwYXJlbnQ6bixjaGlsZHJlbjpbXX19ZnVuY3Rpb24gbGEoZSx0KXtCbz10Lndhcm58fFNyLEpvPXQuaXNQcmVUYWd8fFQscW89dC5tdXN0VXNlUHJvcHx8VCxXbz10LmdldFRhZ05hbWVzcGFjZXx8VDt0LmlzUmVzZXJ2ZWRUYWc7em89VHIodC5tb2R1bGVzLCJ0cmFuc2Zvcm1Ob2RlIiksVm89VHIodC5tb2R1bGVzLCJwcmVUcmFuc2Zvcm1Ob2RlIiksS289VHIodC5tb2R1bGVzLCJwb3N0VHJhbnNmb3JtTm9kZSIpLFVvPXQuZGVsaW1pdGVyczt2YXIgbixyLGk9W10sbz0hMSE9PXQucHJlc2VydmVXaGl0ZXNwYWNlLGE9dC53aGl0ZXNwYWNlLHM9ITEsYz0hMTtmdW5jdGlvbiB1KGUpe2lmKGwoZSksc3x8ZS5wcm9jZXNzZWR8fChlPWZhKGUsdCkpLGkubGVuZ3RofHxlPT09bnx8bi5pZiYmKGUuZWxzZWlmfHxlLmVsc2UpJiZkYShuLHtleHA6ZS5lbHNlaWYsYmxvY2s6ZX0pLHImJiFlLmZvcmJpZGRlbilpZihlLmVsc2VpZnx8ZS5lbHNlKWE9ZSwodT1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aDtmb3IoO3QtLTspe2lmKDE9PT1lW3RdLnR5cGUpcmV0dXJuIGVbdF07ZS5wb3AoKX19KHIuY2hpbGRyZW4pKSYmdS5pZiYmZGEodSx7ZXhwOmEuZWxzZWlmLGJsb2NrOmF9KTtlbHNle2lmKGUuc2xvdFNjb3BlKXt2YXIgbz1lLnNsb3RUYXJnZXR8fCciZGVmYXVsdCInOyhyLnNjb3BlZFNsb3RzfHwoci5zY29wZWRTbG90cz17fSkpW29dPWV9ci5jaGlsZHJlbi5wdXNoKGUpLGUucGFyZW50PXJ9dmFyIGEsdTtlLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFlLnNsb3RTY29wZX0pLGwoZSksZS5wcmUmJihzPSExKSxKbyhlLnRhZykmJihjPSExKTtmb3IodmFyIGY9MDtmPEtvLmxlbmd0aDtmKyspS29bZl0oZSx0KX1mdW5jdGlvbiBsKGUpe2lmKCFjKWZvcih2YXIgdDsodD1lLmNoaWxkcmVuW2UuY2hpbGRyZW4ubGVuZ3RoLTFdKSYmMz09PXQudHlwZSYmIiAiPT09dC50ZXh0OyllLmNoaWxkcmVuLnBvcCgpfXJldHVybiBmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9W10sbz10LmV4cGVjdEhUTUwsYT10LmlzVW5hcnlUYWd8fFQscz10LmNhbkJlTGVmdE9wZW5UYWd8fFQsYz0wO2U7KXtpZihuPWUsciYmRG8ocikpe3ZhciB1PTAsbD1yLnRvTG93ZXJDYXNlKCksZj1Mb1tsXXx8KExvW2xdPW5ldyBSZWdFeHAoIihbXFxzXFxTXSo/KSg8LyIrbCsiW14+XSo+KSIsImkiKSkscD1lLnJlcGxhY2UoZixmdW5jdGlvbihlLG4scil7cmV0dXJuIHU9ci5sZW5ndGgsRG8obCl8fCJub3NjcmlwdCI9PT1sfHwobj1uLnJlcGxhY2UoLzwhXC0tKFtcc1xTXSo/KS0tPi9nLCIkMSIpLnJlcGxhY2UoLzwhXFtDREFUQVxbKFtcc1xTXSo/KV1dPi9nLCIkMSIpKSxSbyhsLG4pJiYobj1uLnNsaWNlKDEpKSx0LmNoYXJzJiZ0LmNoYXJzKG4pLCIifSk7Yys9ZS5sZW5ndGgtcC5sZW5ndGgsZT1wLEEobCxjLXUsYyl9ZWxzZXt2YXIgZD1lLmluZGV4T2YoIjwiKTtpZigwPT09ZCl7aWYoTm8udGVzdChlKSl7dmFyIHY9ZS5pbmRleE9mKCItLVx4M2UiKTtpZih2Pj0wKXt0LnNob3VsZEtlZXBDb21tZW50JiZ0LmNvbW1lbnQoZS5zdWJzdHJpbmcoNCx2KSxjLGMrdiszKSxDKHYrMyk7Y29udGludWV9fWlmKGpvLnRlc3QoZSkpe3ZhciBoPWUuaW5kZXhPZigiXT4iKTtpZihoPj0wKXtDKGgrMik7Y29udGludWV9fXZhciBtPWUubWF0Y2goRW8pO2lmKG0pe0MobVswXS5sZW5ndGgpO2NvbnRpbnVlfXZhciB5PWUubWF0Y2goVG8pO2lmKHkpe3ZhciBnPWM7Qyh5WzBdLmxlbmd0aCksQSh5WzFdLGcsYyk7Y29udGludWV9dmFyIF89eCgpO2lmKF8pe2soXyksUm8oXy50YWdOYW1lLGUpJiZDKDEpO2NvbnRpbnVlfX12YXIgYj12b2lkIDAsJD12b2lkIDAsdz12b2lkIDA7aWYoZD49MCl7Zm9yKCQ9ZS5zbGljZShkKTshKFRvLnRlc3QoJCl8fE9vLnRlc3QoJCl8fE5vLnRlc3QoJCl8fGpvLnRlc3QoJCl8fCh3PSQuaW5kZXhPZigiPCIsMSkpPDApOylkKz13LCQ9ZS5zbGljZShkKTtiPWUuc3Vic3RyaW5nKDAsZCl9ZDwwJiYoYj1lKSxiJiZDKGIubGVuZ3RoKSx0LmNoYXJzJiZiJiZ0LmNoYXJzKGIsYy1iLmxlbmd0aCxjKX1pZihlPT09bil7dC5jaGFycyYmdC5jaGFycyhlKTticmVha319ZnVuY3Rpb24gQyh0KXtjKz10LGU9ZS5zdWJzdHJpbmcodCl9ZnVuY3Rpb24geCgpe3ZhciB0PWUubWF0Y2goT28pO2lmKHQpe3ZhciBuLHIsaT17dGFnTmFtZTp0WzFdLGF0dHJzOltdLHN0YXJ0OmN9O2ZvcihDKHRbMF0ubGVuZ3RoKTshKG49ZS5tYXRjaChTbykpJiYocj1lLm1hdGNoKHhvKXx8ZS5tYXRjaChDbykpOylyLnN0YXJ0PWMsQyhyWzBdLmxlbmd0aCksci5lbmQ9YyxpLmF0dHJzLnB1c2gocik7aWYobilyZXR1cm4gaS51bmFyeVNsYXNoPW5bMV0sQyhuWzBdLmxlbmd0aCksaS5lbmQ9YyxpfX1mdW5jdGlvbiBrKGUpe3ZhciBuPWUudGFnTmFtZSxjPWUudW5hcnlTbGFzaDtvJiYoInAiPT09ciYmd28obikmJkEocikscyhuKSYmcj09PW4mJkEobikpO2Zvcih2YXIgdT1hKG4pfHwhIWMsbD1lLmF0dHJzLmxlbmd0aCxmPW5ldyBBcnJheShsKSxwPTA7cDxsO3ArKyl7dmFyIGQ9ZS5hdHRyc1twXSx2PWRbM118fGRbNF18fGRbNV18fCIiLGg9ImEiPT09biYmImhyZWYiPT09ZFsxXT90LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzO2ZbcF09e25hbWU6ZFsxXSx2YWx1ZTpIbyh2LGgpfX11fHwoaS5wdXNoKHt0YWc6bixsb3dlckNhc2VkVGFnOm4udG9Mb3dlckNhc2UoKSxhdHRyczpmLHN0YXJ0OmUuc3RhcnQsZW5kOmUuZW5kfSkscj1uKSx0LnN0YXJ0JiZ0LnN0YXJ0KG4sZix1LGUuc3RhcnQsZS5lbmQpfWZ1bmN0aW9uIEEoZSxuLG8pe3ZhciBhLHM7aWYobnVsbD09biYmKG49YyksbnVsbD09byYmKG89YyksZSlmb3Iocz1lLnRvTG93ZXJDYXNlKCksYT1pLmxlbmd0aC0xO2E+PTAmJmlbYV0ubG93ZXJDYXNlZFRhZyE9PXM7YS0tKTtlbHNlIGE9MDtpZihhPj0wKXtmb3IodmFyIHU9aS5sZW5ndGgtMTt1Pj1hO3UtLSl0LmVuZCYmdC5lbmQoaVt1XS50YWcsbixvKTtpLmxlbmd0aD1hLHI9YSYmaVthLTFdLnRhZ31lbHNlImJyIj09PXM/dC5zdGFydCYmdC5zdGFydChlLFtdLCEwLG4sbyk6InAiPT09cyYmKHQuc3RhcnQmJnQuc3RhcnQoZSxbXSwhMSxuLG8pLHQuZW5kJiZ0LmVuZChlLG4sbykpfUEoKX0oZSx7d2FybjpCbyxleHBlY3RIVE1MOnQuZXhwZWN0SFRNTCxpc1VuYXJ5VGFnOnQuaXNVbmFyeVRhZyxjYW5CZUxlZnRPcGVuVGFnOnQuY2FuQmVMZWZ0T3BlblRhZyxzaG91bGREZWNvZGVOZXdsaW5lczp0LnNob3VsZERlY29kZU5ld2xpbmVzLHNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZjp0LnNob3VsZERlY29kZU5ld2xpbmVzRm9ySHJlZixzaG91bGRLZWVwQ29tbWVudDp0LmNvbW1lbnRzLG91dHB1dFNvdXJjZVJhbmdlOnQub3V0cHV0U291cmNlUmFuZ2Usc3RhcnQ6ZnVuY3Rpb24oZSxvLGEsbCxmKXt2YXIgcD1yJiZyLm5zfHxXbyhlKTtxJiYic3ZnIj09PXAmJihvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWVbbl07eWEudGVzdChyLm5hbWUpfHwoci5uYW1lPXIubmFtZS5yZXBsYWNlKGdhLCIiKSx0LnB1c2gocikpfXJldHVybiB0fShvKSk7dmFyIGQsdj11YShlLG8scik7cCYmKHYubnM9cCksInN0eWxlIiE9PShkPXYpLnRhZyYmKCJzY3JpcHQiIT09ZC50YWd8fGQuYXR0cnNNYXAudHlwZSYmInRleHQvamF2YXNjcmlwdCIhPT1kLmF0dHJzTWFwLnR5cGUpfHx0ZSgpfHwodi5mb3JiaWRkZW49ITApO2Zvcih2YXIgaD0wO2g8Vm8ubGVuZ3RoO2grKyl2PVZvW2hdKHYsdCl8fHY7c3x8KCFmdW5jdGlvbihlKXtudWxsIT1GcihlLCJ2LXByZSIpJiYoZS5wcmU9ITApfSh2KSx2LnByZSYmKHM9ITApKSxKbyh2LnRhZykmJihjPSEwKSxzP2Z1bmN0aW9uKGUpe3ZhciB0PWUuYXR0cnNMaXN0LG49dC5sZW5ndGg7aWYobilmb3IodmFyIHI9ZS5hdHRycz1uZXcgQXJyYXkobiksaT0wO2k8bjtpKyspcltpXT17bmFtZTp0W2ldLm5hbWUsdmFsdWU6SlNPTi5zdHJpbmdpZnkodFtpXS52YWx1ZSl9LG51bGwhPXRbaV0uc3RhcnQmJihyW2ldLnN0YXJ0PXRbaV0uc3RhcnQscltpXS5lbmQ9dFtpXS5lbmQpO2Vsc2UgZS5wcmV8fChlLnBsYWluPSEwKX0odik6di5wcm9jZXNzZWR8fChwYSh2KSxmdW5jdGlvbihlKXt2YXIgdD1GcihlLCJ2LWlmIik7aWYodCllLmlmPXQsZGEoZSx7ZXhwOnQsYmxvY2s6ZX0pO2Vsc2V7bnVsbCE9RnIoZSwidi1lbHNlIikmJihlLmVsc2U9ITApO3ZhciBuPUZyKGUsInYtZWxzZS1pZiIpO24mJihlLmVsc2VpZj1uKX19KHYpLGZ1bmN0aW9uKGUpe251bGwhPUZyKGUsInYtb25jZSIpJiYoZS5vbmNlPSEwKX0odikpLG58fChuPXYpLGE/dSh2KToocj12LGkucHVzaCh2KSl9LGVuZDpmdW5jdGlvbihlLHQsbil7dmFyIG89aVtpLmxlbmd0aC0xXTtpLmxlbmd0aC09MSxyPWlbaS5sZW5ndGgtMV0sdShvKX0sY2hhcnM6ZnVuY3Rpb24oZSx0LG4pe2lmKHImJighcXx8InRleHRhcmVhIiE9PXIudGFnfHxyLmF0dHJzTWFwLnBsYWNlaG9sZGVyIT09ZSkpe3ZhciBpLHUsbCxmPXIuY2hpbGRyZW47aWYoZT1jfHxlLnRyaW0oKT8ic2NyaXB0Ij09PShpPXIpLnRhZ3x8InN0eWxlIj09PWkudGFnP2U6c2EoZSk6Zi5sZW5ndGg/YT8iY29uZGVuc2UiPT09YSYmb2EudGVzdChlKT8iIjoiICI6bz8iICI6IiI6IiIpY3x8ImNvbmRlbnNlIiE9PWF8fChlPWUucmVwbGFjZShhYSwiICIpKSwhcyYmIiAiIT09ZSYmKHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10P2hvKHQpOnBvO2lmKG4udGVzdChlKSl7Zm9yKHZhciByLGksbyxhPVtdLHM9W10sYz1uLmxhc3RJbmRleD0wO3I9bi5leGVjKGUpOyl7KGk9ci5pbmRleCk+YyYmKHMucHVzaChvPWUuc2xpY2UoYyxpKSksYS5wdXNoKEpTT04uc3RyaW5naWZ5KG8pKSk7dmFyIHU9QXIoclsxXS50cmltKCkpO2EucHVzaCgiX3MoIit1KyIpIikscy5wdXNoKHsiQGJpbmRpbmciOnV9KSxjPWkrclswXS5sZW5ndGh9cmV0dXJuIGM8ZS5sZW5ndGgmJihzLnB1c2gobz1lLnNsaWNlKGMpKSxhLnB1c2goSlNPTi5zdHJpbmdpZnkobykpKSx7ZXhwcmVzc2lvbjphLmpvaW4oIisiKSx0b2tlbnM6c319fShlLFVvKSk/bD17dHlwZToyLGV4cHJlc3Npb246dS5leHByZXNzaW9uLHRva2Vuczp1LnRva2Vucyx0ZXh0OmV9OiIgIj09PWUmJmYubGVuZ3RoJiYiICI9PT1mW2YubGVuZ3RoLTFdLnRleHR8fChsPXt0eXBlOjMsdGV4dDplfSksbCYmZi5wdXNoKGwpfX0sY29tbWVudDpmdW5jdGlvbihlLHQsbil7aWYocil7dmFyIGk9e3R5cGU6Myx0ZXh0OmUsaXNDb21tZW50OiEwfTtyLmNoaWxkcmVuLnB1c2goaSl9fX0pLG59ZnVuY3Rpb24gZmEoZSx0KXt2YXIgbixyOyhyPUlyKG49ZSwia2V5IikpJiYobi5rZXk9ciksZS5wbGFpbj0hZS5rZXkmJiFlLnNjb3BlZFNsb3RzJiYhZS5hdHRyc0xpc3QubGVuZ3RoLGZ1bmN0aW9uKGUpe3ZhciB0PUlyKGUsInJlZiIpO3QmJihlLnJlZj10LGUucmVmSW5Gb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtmb3IoO3Q7KXtpZih2b2lkIDAhPT10LmZvcilyZXR1cm4hMDt0PXQucGFyZW50fXJldHVybiExfShlKSl9KGUpLGZ1bmN0aW9uKGUpe3ZhciB0OyJ0ZW1wbGF0ZSI9PT1lLnRhZz8odD1GcihlLCJzY29wZSIpLGUuc2xvdFNjb3BlPXR8fEZyKGUsInNsb3Qtc2NvcGUiKSk6KHQ9RnIoZSwic2xvdC1zY29wZSIpKSYmKGUuc2xvdFNjb3BlPXQpO3ZhciBuPUlyKGUsInNsb3QiKTtuJiYoZS5zbG90VGFyZ2V0PSciIic9PT1uPyciZGVmYXVsdCInOm4sZS5zbG90VGFyZ2V0RHluYW1pYz0hKCFlLmF0dHJzTWFwWyI6c2xvdCJdJiYhZS5hdHRyc01hcFsidi1iaW5kOnNsb3QiXSksInRlbXBsYXRlIj09PWUudGFnfHxlLnNsb3RTY29wZXx8TnIoZSwic2xvdCIsbixmdW5jdGlvbihlLHQpe3JldHVybiBlLnJhd0F0dHJzTWFwWyI6Iit0XXx8ZS5yYXdBdHRyc01hcFsidi1iaW5kOiIrdF18fGUucmF3QXR0cnNNYXBbdF19KGUsInNsb3QiKSkpO2lmKCJ0ZW1wbGF0ZSI9PT1lLnRhZyl7dmFyIHI9UHIoZSxpYSk7aWYocil7dmFyIGk9dmEociksbz1pLm5hbWUsYT1pLmR5bmFtaWM7ZS5zbG90VGFyZ2V0PW8sZS5zbG90VGFyZ2V0RHluYW1pYz1hLGUuc2xvdFNjb3BlPXIudmFsdWV8fGNhfX1lbHNle3ZhciBzPVByKGUsaWEpO2lmKHMpe3ZhciBjPWUuc2NvcGVkU2xvdHN8fChlLnNjb3BlZFNsb3RzPXt9KSx1PXZhKHMpLGw9dS5uYW1lLGY9dS5keW5hbWljLHA9Y1tsXT11YSgidGVtcGxhdGUiLFtdLGUpO3Auc2xvdFRhcmdldD1sLHAuc2xvdFRhcmdldER5bmFtaWM9ZixwLmNoaWxkcmVuPWUuY2hpbGRyZW4uZmlsdGVyKGZ1bmN0aW9uKGUpe2lmKCFlLnNsb3RTY29wZSlyZXR1cm4gZS5wYXJlbnQ9cCwhMH0pLHAuc2xvdFNjb3BlPXMudmFsdWV8fGNhLGUuY2hpbGRyZW49W10sZS5wbGFpbj0hMX19fShlKSxmdW5jdGlvbihlKXsic2xvdCI9PT1lLnRhZyYmKGUuc2xvdE5hbWU9SXIoZSwibmFtZSIpKX0oZSksZnVuY3Rpb24oZSl7dmFyIHQ7KHQ9SXIoZSwiaXMiKSkmJihlLmNvbXBvbmVudD10KTtudWxsIT1GcihlLCJpbmxpbmUtdGVtcGxhdGUiKSYmKGUuaW5saW5lVGVtcGxhdGU9ITApfShlKTtmb3IodmFyIGk9MDtpPHpvLmxlbmd0aDtpKyspZT16b1tpXShlLHQpfHxlO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLGEscyxjLHU9ZS5hdHRyc0xpc3Q7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYocj1pPXVbdF0ubmFtZSxvPXVbdF0udmFsdWUsR28udGVzdChyKSlpZihlLmhhc0JpbmRpbmdzPSEwLChhPWhhKHIucmVwbGFjZShHbywiIikpKSYmKHI9ci5yZXBsYWNlKHJhLCIiKSksbmEudGVzdChyKSlyPXIucmVwbGFjZShuYSwiIiksbz1BcihvKSwoYz1lYS50ZXN0KHIpKSYmKHI9ci5zbGljZSgxLC0xKSksYSYmKGEucHJvcCYmIWMmJiJpbm5lckh0bWwiPT09KHI9YihyKSkmJihyPSJpbm5lckhUTUwiKSxhLmNhbWVsJiYhYyYmKHI9YihyKSksYS5zeW5jJiYocz1CcihvLCIkZXZlbnQiKSxjP01yKGUsJyJ1cGRhdGU6IisoJytyKyIpIixzLG51bGwsITEsMCx1W3RdLCEwKTooTXIoZSwidXBkYXRlOiIrYihyKSxzLG51bGwsITEsMCx1W3RdKSxDKHIpIT09YihyKSYmTXIoZSwidXBkYXRlOiIrQyhyKSxzLG51bGwsITEsMCx1W3RdKSkpKSxhJiZhLnByb3B8fCFlLmNvbXBvbmVudCYmcW8oZS50YWcsZS5hdHRyc01hcC50eXBlLHIpP0VyKGUscixvLHVbdF0sYyk6TnIoZSxyLG8sdVt0XSxjKTtlbHNlIGlmKFpvLnRlc3Qocikpcj1yLnJlcGxhY2UoWm8sIiIpLChjPWVhLnRlc3QocikpJiYocj1yLnNsaWNlKDEsLTEpKSxNcihlLHIsbyxhLCExLDAsdVt0XSxjKTtlbHNle3ZhciBsPShyPXIucmVwbGFjZShHbywiIikpLm1hdGNoKHRhKSxmPWwmJmxbMV07Yz0hMSxmJiYocj1yLnNsaWNlKDAsLShmLmxlbmd0aCsxKSksZWEudGVzdChmKSYmKGY9Zi5zbGljZSgxLC0xKSxjPSEwKSksRHIoZSxyLGksbyxmLGMsYSx1W3RdKX1lbHNlIE5yKGUscixKU09OLnN0cmluZ2lmeShvKSx1W3RdKSwhZS5jb21wb25lbnQmJiJtdXRlZCI9PT1yJiZxbyhlLnRhZyxlLmF0dHJzTWFwLnR5cGUscikmJkVyKGUsciwidHJ1ZSIsdVt0XSl9KGUpLGV9ZnVuY3Rpb24gcGEoZSl7dmFyIHQ7aWYodD1GcihlLCJ2LWZvciIpKXt2YXIgbj1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKFhvKTtpZighdClyZXR1cm47dmFyIG49e307bi5mb3I9dFsyXS50cmltKCk7dmFyIHI9dFsxXS50cmltKCkucmVwbGFjZShRbywiIiksaT1yLm1hdGNoKFlvKTtpPyhuLmFsaWFzPXIucmVwbGFjZShZbywiIikudHJpbSgpLG4uaXRlcmF0b3IxPWlbMV0udHJpbSgpLGlbMl0mJihuLml0ZXJhdG9yMj1pWzJdLnRyaW0oKSkpOm4uYWxpYXM9cjtyZXR1cm4gbn0odCk7biYmQShlLG4pfX1mdW5jdGlvbiBkYShlLHQpe2UuaWZDb25kaXRpb25zfHwoZS5pZkNvbmRpdGlvbnM9W10pLGUuaWZDb25kaXRpb25zLnB1c2godCl9ZnVuY3Rpb24gdmEoZSl7dmFyIHQ9ZS5uYW1lLnJlcGxhY2UoaWEsIiIpO3JldHVybiB0fHwiIyIhPT1lLm5hbWVbMF0mJih0PSJkZWZhdWx0IiksZWEudGVzdCh0KT97bmFtZTp0LnNsaWNlKDEsLTEpLGR5bmFtaWM6ITB9OntuYW1lOiciJyt0KyciJyxkeW5hbWljOiExfX1mdW5jdGlvbiBoYShlKXt2YXIgdD1lLm1hdGNoKHJhKTtpZih0KXt2YXIgbj17fTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe25bZS5zbGljZSgxKV09ITB9KSxufX1mdW5jdGlvbiBtYShlKXtmb3IodmFyIHQ9e30sbj0wLHI9ZS5sZW5ndGg7bjxyO24rKyl0W2Vbbl0ubmFtZV09ZVtuXS52YWx1ZTtyZXR1cm4gdH12YXIgeWE9L154bWxuczpOU1xkKy8sZ2E9L15OU1xkKzovO2Z1bmN0aW9uIF9hKGUpe3JldHVybiB1YShlLnRhZyxlLmF0dHJzTGlzdC5zbGljZSgpLGUucGFyZW50KX12YXIgYmE9W21vLGdvLHtwcmVUcmFuc2Zvcm1Ob2RlOmZ1bmN0aW9uKGUsdCl7aWYoImlucHV0Ij09PWUudGFnKXt2YXIgbixyPWUuYXR0cnNNYXA7aWYoIXJbInYtbW9kZWwiXSlyZXR1cm47aWYoKHJbIjp0eXBlIl18fHJbInYtYmluZDp0eXBlIl0pJiYobj1JcihlLCJ0eXBlIikpLHIudHlwZXx8bnx8IXJbInYtYmluZCJdfHwobj0iKCIrclsidi1iaW5kIl0rIikudHlwZSIpLG4pe3ZhciBpPUZyKGUsInYtaWYiLCEwKSxvPWk/IiYmKCIraSsiKSI6IiIsYT1udWxsIT1GcihlLCJ2LWVsc2UiLCEwKSxzPUZyKGUsInYtZWxzZS1pZiIsITApLGM9X2EoZSk7cGEoYyksanIoYywidHlwZSIsImNoZWNrYm94IiksZmEoYyx0KSxjLnByb2Nlc3NlZD0hMCxjLmlmPSIoIituKyIpPT09J2NoZWNrYm94JyIrbyxkYShjLHtleHA6Yy5pZixibG9jazpjfSk7dmFyIHU9X2EoZSk7RnIodSwidi1mb3IiLCEwKSxqcih1LCJ0eXBlIiwicmFkaW8iKSxmYSh1LHQpLGRhKGMse2V4cDoiKCIrbisiKT09PSdyYWRpbyciK28sYmxvY2s6dX0pO3ZhciBsPV9hKGUpO3JldHVybiBGcihsLCJ2LWZvciIsITApLGpyKGwsIjp0eXBlIixuKSxmYShsLHQpLGRhKGMse2V4cDppLGJsb2NrOmx9KSxhP2MuZWxzZT0hMDpzJiYoYy5lbHNlaWY9cyksY319fX1dO3ZhciAkYSx3YSxDYT17ZXhwZWN0SFRNTDohMCxtb2R1bGVzOmJhLGRpcmVjdGl2ZXM6e21vZGVsOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LnZhbHVlLGk9dC5tb2RpZmllcnMsbz1lLnRhZyxhPWUuYXR0cnNNYXAudHlwZTtpZihlLmNvbXBvbmVudClyZXR1cm4gSHIoZSxyLGkpLCExO2lmKCJzZWxlY3QiPT09bykhZnVuY3Rpb24oZSx0LG4pe3ZhciByPSd2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9ICJfdmFsdWUiIGluIG8gPyBvLl92YWx1ZSA6IG8udmFsdWU7cmV0dXJuICcrKG4mJm4ubnVtYmVyPyJfbih2YWwpIjoidmFsIikrIn0pOyI7cj1yKyIgIitCcih0LCIkZXZlbnQudGFyZ2V0Lm11bHRpcGxlID8gJCRzZWxlY3RlZFZhbCA6ICQkc2VsZWN0ZWRWYWxbMF0iKSxNcihlLCJjaGFuZ2UiLHIsbnVsbCwhMCl9KGUscixpKTtlbHNlIGlmKCJpbnB1dCI9PT1vJiYiY2hlY2tib3giPT09YSkhZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4mJm4ubnVtYmVyLGk9SXIoZSwidmFsdWUiKXx8Im51bGwiLG89SXIoZSwidHJ1ZS12YWx1ZSIpfHwidHJ1ZSIsYT1JcihlLCJmYWxzZS12YWx1ZSIpfHwiZmFsc2UiO0VyKGUsImNoZWNrZWQiLCJBcnJheS5pc0FycmF5KCIrdCsiKT9faSgiK3QrIiwiK2krIik+LTEiKygidHJ1ZSI9PT1vPyI6KCIrdCsiKSI6IjpfcSgiK3QrIiwiK28rIikiKSksTXIoZSwiY2hhbmdlIiwidmFyICQkYT0iK3QrIiwkJGVsPSRldmVudC50YXJnZXQsJCRjPSQkZWwuY2hlY2tlZD8oIitvKyIpOigiK2ErIik7aWYoQXJyYXkuaXNBcnJheSgkJGEpKXt2YXIgJCR2PSIrKHI/Il9uKCIraSsiKSI6aSkrIiwkJGk9X2koJCRhLCQkdik7aWYoJCRlbC5jaGVja2VkKXskJGk8MCYmKCIrQnIodCwiJCRhLmNvbmNhdChbJCR2XSkiKSsiKX1lbHNleyQkaT4tMSYmKCIrQnIodCwiJCRhLnNsaWNlKDAsJCRpKS5jb25jYXQoJCRhLnNsaWNlKCQkaSsxKSkiKSsiKX19ZWxzZXsiK0JyKHQsIiQkYyIpKyJ9IixudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW8mJiJyYWRpbyI9PT1hKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9biYmbi5udW1iZXIsaT1JcihlLCJ2YWx1ZSIpfHwibnVsbCI7RXIoZSwiY2hlY2tlZCIsIl9xKCIrdCsiLCIrKGk9cj8iX24oIitpKyIpIjppKSsiKSIpLE1yKGUsImNoYW5nZSIsQnIodCxpKSxudWxsLCEwKX0oZSxyLGkpO2Vsc2UgaWYoImlucHV0Ij09PW98fCJ0ZXh0YXJlYSI9PT1vKSFmdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5hdHRyc01hcC50eXBlLGk9bnx8e30sbz1pLmxhenksYT1pLm51bWJlcixzPWkudHJpbSxjPSFvJiYicmFuZ2UiIT09cix1PW8/ImNoYW5nZSI6InJhbmdlIj09PXI/V3I6ImlucHV0IixsPSIkZXZlbnQudGFyZ2V0LnZhbHVlIjtzJiYobD0iJGV2ZW50LnRhcmdldC52YWx1ZS50cmltKCkiKSxhJiYobD0iX24oIitsKyIpIik7dmFyIGY9QnIodCxsKTtjJiYoZj0iaWYoJGV2ZW50LnRhcmdldC5jb21wb3NpbmcpcmV0dXJuOyIrZiksRXIoZSwidmFsdWUiLCIoIit0KyIpIiksTXIoZSx1LGYsbnVsbCwhMCksKHN8fGEpJiZNcihlLCJibHVyIiwiJGZvcmNlVXBkYXRlKCkiKX0oZSxyLGkpO2Vsc2UgaWYoIUYuaXNSZXNlcnZlZFRhZyhvKSlyZXR1cm4gSHIoZSxyLGkpLCExO3JldHVybiEwfSx0ZXh0OmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwidGV4dENvbnRlbnQiLCJfcygiK3QudmFsdWUrIikiLHQpfSxodG1sOmZ1bmN0aW9uKGUsdCl7dC52YWx1ZSYmRXIoZSwiaW5uZXJIVE1MIiwiX3MoIit0LnZhbHVlKyIpIix0KX19LGlzUHJlVGFnOmZ1bmN0aW9uKGUpe3JldHVybiJwcmUiPT09ZX0saXNVbmFyeVRhZzpibyxtdXN0VXNlUHJvcDpqbixjYW5CZUxlZnRPcGVuVGFnOiRvLGlzUmVzZXJ2ZWRUYWc6V24sZ2V0VGFnTmFtZXNwYWNlOlpuLHN0YXRpY0tleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQuc3RhdGljS2V5c3x8W10pfSxbXSkuam9pbigiLCIpfShiYSl9LHhhPWcoZnVuY3Rpb24oZSl7cmV0dXJuIHAoInR5cGUsdGFnLGF0dHJzTGlzdCxhdHRyc01hcCxwbGFpbixwYXJlbnQsY2hpbGRyZW4sYXR0cnMsc3RhcnQsZW5kLHJhd0F0dHJzTWFwIisoZT8iLCIrZToiIikpfSk7ZnVuY3Rpb24ga2EoZSx0KXtlJiYoJGE9eGEodC5zdGF0aWNLZXlzfHwiIiksd2E9dC5pc1Jlc2VydmVkVGFnfHxULGZ1bmN0aW9uIGUodCl7dC5zdGF0aWM9ZnVuY3Rpb24oZSl7aWYoMj09PWUudHlwZSlyZXR1cm4hMTtpZigzPT09ZS50eXBlKXJldHVybiEwO3JldHVybiEoIWUucHJlJiYoZS5oYXNCaW5kaW5nc3x8ZS5pZnx8ZS5mb3J8fGQoZS50YWcpfHwhd2EoZS50YWcpfHxmdW5jdGlvbihlKXtmb3IoO2UucGFyZW50Oyl7aWYoInRlbXBsYXRlIiE9PShlPWUucGFyZW50KS50YWcpcmV0dXJuITE7aWYoZS5mb3IpcmV0dXJuITB9cmV0dXJuITF9KGUpfHwhT2JqZWN0LmtleXMoZSkuZXZlcnkoJGEpKSl9KHQpO2lmKDE9PT10LnR5cGUpe2lmKCF3YSh0LnRhZykmJiJzbG90IiE9PXQudGFnJiZudWxsPT10LmF0dHJzTWFwWyJpbmxpbmUtdGVtcGxhdGUiXSlyZXR1cm47Zm9yKHZhciBuPTAscj10LmNoaWxkcmVuLmxlbmd0aDtuPHI7bisrKXt2YXIgaT10LmNoaWxkcmVuW25dO2UoaSksaS5zdGF0aWN8fCh0LnN0YXRpYz0hMSl9aWYodC5pZkNvbmRpdGlvbnMpZm9yKHZhciBvPTEsYT10LmlmQ29uZGl0aW9ucy5sZW5ndGg7bzxhO28rKyl7dmFyIHM9dC5pZkNvbmRpdGlvbnNbb10uYmxvY2s7ZShzKSxzLnN0YXRpY3x8KHQuc3RhdGljPSExKX19fShlKSxmdW5jdGlvbiBlKHQsbil7aWYoMT09PXQudHlwZSl7aWYoKHQuc3RhdGljfHx0Lm9uY2UpJiYodC5zdGF0aWNJbkZvcj1uKSx0LnN0YXRpYyYmdC5jaGlsZHJlbi5sZW5ndGgmJigxIT09dC5jaGlsZHJlbi5sZW5ndGh8fDMhPT10LmNoaWxkcmVuWzBdLnR5cGUpKXJldHVybiB2b2lkKHQuc3RhdGljUm9vdD0hMCk7aWYodC5zdGF0aWNSb290PSExLHQuY2hpbGRyZW4pZm9yKHZhciByPTAsaT10LmNoaWxkcmVuLmxlbmd0aDtyPGk7cisrKWUodC5jaGlsZHJlbltyXSxufHwhIXQuZm9yKTtpZih0LmlmQ29uZGl0aW9ucylmb3IodmFyIG89MSxhPXQuaWZDb25kaXRpb25zLmxlbmd0aDtvPGE7bysrKWUodC5pZkNvbmRpdGlvbnNbb10uYmxvY2ssbil9fShlLCExKSl9dmFyIEFhPS9eKFtcdyRfXSt8XChbXildKj9cKSlccyo9PnxeZnVuY3Rpb24oPzpccytbXHckXSspP1xzKlwoLyxPYT0vXChbXildKj9cKTsqJC8sU2E9L15bQS1aYS16XyRdW1x3JF0qKD86XC5bQS1aYS16XyRdW1x3JF0qfFxbJ1teJ10qPyddfFxbIlteIl0qPyJdfFxbXGQrXXxcW1tBLVphLXpfJF1bXHckXSpdKSokLyxUYT17ZXNjOjI3LHRhYjo5LGVudGVyOjEzLHNwYWNlOjMyLHVwOjM4LGxlZnQ6MzcscmlnaHQ6MzksZG93bjo0MCxkZWxldGU6WzgsNDZdfSxFYT17ZXNjOlsiRXNjIiwiRXNjYXBlIl0sdGFiOiJUYWIiLGVudGVyOiJFbnRlciIsc3BhY2U6WyIgIiwiU3BhY2ViYXIiXSx1cDpbIlVwIiwiQXJyb3dVcCJdLGxlZnQ6WyJMZWZ0IiwiQXJyb3dMZWZ0Il0scmlnaHQ6WyJSaWdodCIsIkFycm93UmlnaHQiXSxkb3duOlsiRG93biIsIkFycm93RG93biJdLGRlbGV0ZTpbIkJhY2tzcGFjZSIsIkRlbGV0ZSIsIkRlbCJdfSxOYT1mdW5jdGlvbihlKXtyZXR1cm4iaWYoIitlKyIpcmV0dXJuIG51bGw7In0samE9e3N0b3A6IiRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsiLHByZXZlbnQ6IiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyIsc2VsZjpOYSgiJGV2ZW50LnRhcmdldCAhPT0gJGV2ZW50LmN1cnJlbnRUYXJnZXQiKSxjdHJsOk5hKCIhJGV2ZW50LmN0cmxLZXkiKSxzaGlmdDpOYSgiISRldmVudC5zaGlmdEtleSIpLGFsdDpOYSgiISRldmVudC5hbHRLZXkiKSxtZXRhOk5hKCIhJGV2ZW50Lm1ldGFLZXkiKSxsZWZ0Ok5hKCInYnV0dG9uJyBpbiAkZXZlbnQgJiYgJGV2ZW50LmJ1dHRvbiAhPT0gMCIpLG1pZGRsZTpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDEiKSxyaWdodDpOYSgiJ2J1dHRvbicgaW4gJGV2ZW50ICYmICRldmVudC5idXR0b24gIT09IDIiKX07ZnVuY3Rpb24gRGEoZSx0KXt2YXIgbj10PyJuYXRpdmVPbjoiOiJvbjoiLHI9IiIsaT0iIjtmb3IodmFyIG8gaW4gZSl7dmFyIGE9TGEoZVtvXSk7ZVtvXSYmZVtvXS5keW5hbWljP2krPW8rIiwiK2ErIiwiOnIrPSciJytvKyciOicrYSsiLCJ9cmV0dXJuIHI9InsiK3Iuc2xpY2UoMCwtMSkrIn0iLGk/bisiX2QoIityKyIsWyIraS5zbGljZSgwLC0xKSsiXSkiOm4rcn1mdW5jdGlvbiBMYShlKXtpZighZSlyZXR1cm4iZnVuY3Rpb24oKXt9IjtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiJbIitlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gTGEoZSl9KS5qb2luKCIsIikrIl0iO3ZhciB0PVNhLnRlc3QoZS52YWx1ZSksbj1BYS50ZXN0KGUudmFsdWUpLHI9U2EudGVzdChlLnZhbHVlLnJlcGxhY2UoT2EsIiIpKTtpZihlLm1vZGlmaWVycyl7dmFyIGk9IiIsbz0iIixhPVtdO2Zvcih2YXIgcyBpbiBlLm1vZGlmaWVycylpZihqYVtzXSlvKz1qYVtzXSxUYVtzXSYmYS5wdXNoKHMpO2Vsc2UgaWYoImV4YWN0Ij09PXMpe3ZhciBjPWUubW9kaWZpZXJzO28rPU5hKFsiY3RybCIsInNoaWZ0IiwiYWx0IiwibWV0YSJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hY1tlXX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iJGV2ZW50LiIrZSsiS2V5In0pLmpvaW4oInx8IikpfWVsc2UgYS5wdXNoKHMpO3JldHVybiBhLmxlbmd0aCYmKGkrPWZ1bmN0aW9uKGUpe3JldHVybiJpZighJGV2ZW50LnR5cGUuaW5kZXhPZigna2V5JykmJiIrZS5tYXAoTWEpLmpvaW4oIiYmIikrIilyZXR1cm4gbnVsbDsifShhKSksbyYmKGkrPW8pLCJmdW5jdGlvbigkZXZlbnQpeyIraSsodD8icmV0dXJuICIrZS52YWx1ZSsiKCRldmVudCkiOm4/InJldHVybiAoIitlLnZhbHVlKyIpKCRldmVudCkiOnI/InJldHVybiAiK2UudmFsdWU6ZS52YWx1ZSkrIn0ifXJldHVybiB0fHxuP2UudmFsdWU6ImZ1bmN0aW9uKCRldmVudCl7Iisocj8icmV0dXJuICIrZS52YWx1ZTplLnZhbHVlKSsifSJ9ZnVuY3Rpb24gTWEoZSl7dmFyIHQ9cGFyc2VJbnQoZSwxMCk7aWYodClyZXR1cm4iJGV2ZW50LmtleUNvZGUhPT0iK3Q7dmFyIG49VGFbZV0scj1FYVtlXTtyZXR1cm4iX2soJGV2ZW50LmtleUNvZGUsIitKU09OLnN0cmluZ2lmeShlKSsiLCIrSlNPTi5zdHJpbmdpZnkobikrIiwkZXZlbnQua2V5LCIrSlNPTi5zdHJpbmdpZnkocikrIikifXZhciBJYT17b246ZnVuY3Rpb24oZSx0KXtlLndyYXBMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuIl9nKCIrZSsiLCIrdC52YWx1ZSsiKSJ9fSxiaW5kOmZ1bmN0aW9uKGUsdCl7ZS53cmFwRGF0YT1mdW5jdGlvbihuKXtyZXR1cm4iX2IoIituKyIsJyIrZS50YWcrIicsIit0LnZhbHVlKyIsIisodC5tb2RpZmllcnMmJnQubW9kaWZpZXJzLnByb3A/InRydWUiOiJmYWxzZSIpKyh0Lm1vZGlmaWVycyYmdC5tb2RpZmllcnMuc3luYz8iLHRydWUiOiIiKSsiKSJ9fSxjbG9hazpTfSxGYT1mdW5jdGlvbihlKXt0aGlzLm9wdGlvbnM9ZSx0aGlzLndhcm49ZS53YXJufHxTcix0aGlzLnRyYW5zZm9ybXM9VHIoZS5tb2R1bGVzLCJ0cmFuc2Zvcm1Db2RlIiksdGhpcy5kYXRhR2VuRm5zPVRyKGUubW9kdWxlcywiZ2VuRGF0YSIpLHRoaXMuZGlyZWN0aXZlcz1BKEEoe30sSWEpLGUuZGlyZWN0aXZlcyk7dmFyIHQ9ZS5pc1Jlc2VydmVkVGFnfHxUO3RoaXMubWF5YmVDb21wb25lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmNvbXBvbmVudHx8IXQoZS50YWcpfSx0aGlzLm9uY2VJZD0wLHRoaXMuc3RhdGljUmVuZGVyRm5zPVtdLHRoaXMucHJlPSExfTtmdW5jdGlvbiBQYShlLHQpe3ZhciBuPW5ldyBGYSh0KTtyZXR1cm57cmVuZGVyOiJ3aXRoKHRoaXMpe3JldHVybiAiKyhlP1JhKGUsbik6J19jKCJkaXYiKScpKyJ9IixzdGF0aWNSZW5kZXJGbnM6bi5zdGF0aWNSZW5kZXJGbnN9fWZ1bmN0aW9uIFJhKGUsdCl7aWYoZS5wYXJlbnQmJihlLnByZT1lLnByZXx8ZS5wYXJlbnQucHJlKSxlLnN0YXRpY1Jvb3QmJiFlLnN0YXRpY1Byb2Nlc3NlZClyZXR1cm4gSGEoZSx0KTtpZihlLm9uY2UmJiFlLm9uY2VQcm9jZXNzZWQpcmV0dXJuIEJhKGUsdCk7aWYoZS5mb3ImJiFlLmZvclByb2Nlc3NlZClyZXR1cm4gemEoZSx0KTtpZihlLmlmJiYhZS5pZlByb2Nlc3NlZClyZXR1cm4gVWEoZSx0KTtpZigidGVtcGxhdGUiIT09ZS50YWd8fGUuc2xvdFRhcmdldHx8dC5wcmUpe2lmKCJzbG90Ij09PWUudGFnKXJldHVybiBmdW5jdGlvbihlLHQpe3ZhciBuPWUuc2xvdE5hbWV8fCciZGVmYXVsdCInLHI9cWEoZSx0KSxpPSJfdCgiK24rKHI/IiwiK3I6IiIpLG89ZS5hdHRyc3x8ZS5keW5hbWljQXR0cnM/R2EoKGUuYXR0cnN8fFtdKS5jb25jYXQoZS5keW5hbWljQXR0cnN8fFtdKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6YihlLm5hbWUpLHZhbHVlOmUudmFsdWUsZHluYW1pYzplLmR5bmFtaWN9fSkpOm51bGwsYT1lLmF0dHJzTWFwWyJ2LWJpbmQiXTshbyYmIWF8fHJ8fChpKz0iLG51bGwiKTtvJiYoaSs9IiwiK28pO2EmJihpKz0obz8iIjoiLG51bGwiKSsiLCIrYSk7cmV0dXJuIGkrIikifShlLHQpO3ZhciBuO2lmKGUuY29tcG9uZW50KW49ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuaW5saW5lVGVtcGxhdGU/bnVsbDpxYSh0LG4sITApO3JldHVybiJfYygiK2UrIiwiK1ZhKHQsbikrKHI/IiwiK3I6IiIpKyIpIn0oZS5jb21wb25lbnQsZSx0KTtlbHNle3ZhciByOyghZS5wbGFpbnx8ZS5wcmUmJnQubWF5YmVDb21wb25lbnQoZSkpJiYocj1WYShlLHQpKTt2YXIgaT1lLmlubGluZVRlbXBsYXRlP251bGw6cWEoZSx0LCEwKTtuPSJfYygnIitlLnRhZysiJyIrKHI/IiwiK3I6IiIpKyhpPyIsIitpOiIiKSsiKSJ9Zm9yKHZhciBvPTA7bzx0LnRyYW5zZm9ybXMubGVuZ3RoO28rKyluPXQudHJhbnNmb3Jtc1tvXShlLG4pO3JldHVybiBufXJldHVybiBxYShlLHQpfHwidm9pZCAwIn1mdW5jdGlvbiBIYShlLHQpe2Uuc3RhdGljUHJvY2Vzc2VkPSEwO3ZhciBuPXQucHJlO3JldHVybiBlLnByZSYmKHQucHJlPWUucHJlKSx0LnN0YXRpY1JlbmRlckZucy5wdXNoKCJ3aXRoKHRoaXMpe3JldHVybiAiK1JhKGUsdCkrIn0iKSx0LnByZT1uLCJfbSgiKyh0LnN0YXRpY1JlbmRlckZucy5sZW5ndGgtMSkrKGUuc3RhdGljSW5Gb3I/Iix0cnVlIjoiIikrIikifWZ1bmN0aW9uIEJhKGUsdCl7aWYoZS5vbmNlUHJvY2Vzc2VkPSEwLGUuaWYmJiFlLmlmUHJvY2Vzc2VkKXJldHVybiBVYShlLHQpO2lmKGUuc3RhdGljSW5Gb3Ipe2Zvcih2YXIgbj0iIixyPWUucGFyZW50O3I7KXtpZihyLmZvcil7bj1yLmtleTticmVha31yPXIucGFyZW50fXJldHVybiBuPyJfbygiK1JhKGUsdCkrIiwiK3Qub25jZUlkKysrIiwiK24rIikiOlJhKGUsdCl9cmV0dXJuIEhhKGUsdCl9ZnVuY3Rpb24gVWEoZSx0LG4scil7cmV0dXJuIGUuaWZQcm9jZXNzZWQ9ITAsZnVuY3Rpb24gZSh0LG4scixpKXtpZighdC5sZW5ndGgpcmV0dXJuIGl8fCJfZSgpIjt2YXIgbz10LnNoaWZ0KCk7cmV0dXJuIG8uZXhwPyIoIitvLmV4cCsiKT8iK2Eoby5ibG9jaykrIjoiK2UodCxuLHIsaSk6IiIrYShvLmJsb2NrKTtmdW5jdGlvbiBhKGUpe3JldHVybiByP3IoZSxuKTplLm9uY2U/QmEoZSxuKTpSYShlLG4pfX0oZS5pZkNvbmRpdGlvbnMuc2xpY2UoKSx0LG4scil9ZnVuY3Rpb24gemEoZSx0LG4scil7dmFyIGk9ZS5mb3Isbz1lLmFsaWFzLGE9ZS5pdGVyYXRvcjE/IiwiK2UuaXRlcmF0b3IxOiIiLHM9ZS5pdGVyYXRvcjI/IiwiK2UuaXRlcmF0b3IyOiIiO3JldHVybiBlLmZvclByb2Nlc3NlZD0hMCwocnx8Il9sIikrIigoIitpKyIpLGZ1bmN0aW9uKCIrbythK3MrIil7cmV0dXJuICIrKG58fFJhKShlLHQpKyJ9KSJ9ZnVuY3Rpb24gVmEoZSx0KXt2YXIgbj0ieyIscj1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZGlyZWN0aXZlcztpZighbilyZXR1cm47dmFyIHIsaSxvLGEscz0iZGlyZWN0aXZlczpbIixjPSExO2ZvcihyPTAsaT1uLmxlbmd0aDtyPGk7cisrKXtvPW5bcl0sYT0hMDt2YXIgdT10LmRpcmVjdGl2ZXNbby5uYW1lXTt1JiYoYT0hIXUoZSxvLHQud2FybikpLGEmJihjPSEwLHMrPSd7bmFtZToiJytvLm5hbWUrJyIscmF3TmFtZToiJytvLnJhd05hbWUrJyInKyhvLnZhbHVlPyIsdmFsdWU6KCIrby52YWx1ZSsiKSxleHByZXNzaW9uOiIrSlNPTi5zdHJpbmdpZnkoby52YWx1ZSk6IiIpKyhvLmFyZz8iLGFyZzoiKyhvLmlzRHluYW1pY0FyZz9vLmFyZzonIicrby5hcmcrJyInKToiIikrKG8ubW9kaWZpZXJzPyIsbW9kaWZpZXJzOiIrSlNPTi5zdHJpbmdpZnkoby5tb2RpZmllcnMpOiIiKSsifSwiKX1pZihjKXJldHVybiBzLnNsaWNlKDAsLTEpKyJdIn0oZSx0KTtyJiYobis9cisiLCIpLGUua2V5JiYobis9ImtleToiK2Uua2V5KyIsIiksZS5yZWYmJihuKz0icmVmOiIrZS5yZWYrIiwiKSxlLnJlZkluRm9yJiYobis9InJlZkluRm9yOnRydWUsIiksZS5wcmUmJihuKz0icHJlOnRydWUsIiksZS5jb21wb25lbnQmJihuKz0ndGFnOiInK2UudGFnKyciLCcpO2Zvcih2YXIgaT0wO2k8dC5kYXRhR2VuRm5zLmxlbmd0aDtpKyspbis9dC5kYXRhR2VuRm5zW2ldKGUpO2lmKGUuYXR0cnMmJihuKz0iYXR0cnM6IitHYShlLmF0dHJzKSsiLCIpLGUucHJvcHMmJihuKz0iZG9tUHJvcHM6IitHYShlLnByb3BzKSsiLCIpLGUuZXZlbnRzJiYobis9RGEoZS5ldmVudHMsITEpKyIsIiksZS5uYXRpdmVFdmVudHMmJihuKz1EYShlLm5hdGl2ZUV2ZW50cywhMCkrIiwiKSxlLnNsb3RUYXJnZXQmJiFlLnNsb3RTY29wZSYmKG4rPSJzbG90OiIrZS5zbG90VGFyZ2V0KyIsIiksZS5zY29wZWRTbG90cyYmKG4rPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmZvcnx8T2JqZWN0LmtleXModCkuc29tZShmdW5jdGlvbihlKXt2YXIgbj10W2VdO3JldHVybiBuLnNsb3RUYXJnZXREeW5hbWljfHxuLmlmfHxuLmZvcnx8S2Eobil9KSxpPSEhZS5pZjtpZighcilmb3IodmFyIG89ZS5wYXJlbnQ7bzspe2lmKG8uc2xvdFNjb3BlJiZvLnNsb3RTY29wZSE9PWNhfHxvLmZvcil7cj0hMDticmVha31vLmlmJiYoaT0hMCksbz1vLnBhcmVudH12YXIgYT1PYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIEphKHRbZV0sbil9KS5qb2luKCIsIik7cmV0dXJuInNjb3BlZFNsb3RzOl91KFsiK2ErIl0iKyhyPyIsbnVsbCx0cnVlIjoiIikrKCFyJiZpPyIsbnVsbCxmYWxzZSwiK2Z1bmN0aW9uKGUpe3ZhciB0PTUzODEsbj1lLmxlbmd0aDtmb3IoO247KXQ9MzMqdF5lLmNoYXJDb2RlQXQoLS1uKTtyZXR1cm4gdD4+PjB9KGEpOiIiKSsiKSJ9KGUsZS5zY29wZWRTbG90cyx0KSsiLCIpLGUubW9kZWwmJihuKz0ibW9kZWw6e3ZhbHVlOiIrZS5tb2RlbC52YWx1ZSsiLGNhbGxiYWNrOiIrZS5tb2RlbC5jYWxsYmFjaysiLGV4cHJlc3Npb246IitlLm1vZGVsLmV4cHJlc3Npb24rIn0sIiksZS5pbmxpbmVUZW1wbGF0ZSl7dmFyIG89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNoaWxkcmVuWzBdO2lmKG4mJjE9PT1uLnR5cGUpe3ZhciByPVBhKG4sdC5vcHRpb25zKTtyZXR1cm4iaW5saW5lVGVtcGxhdGU6e3JlbmRlcjpmdW5jdGlvbigpeyIrci5yZW5kZXIrIn0sc3RhdGljUmVuZGVyRm5zOlsiK3Iuc3RhdGljUmVuZGVyRm5zLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24oKXsiK2UrIn0ifSkuam9pbigiLCIpKyJdfSJ9fShlLHQpO28mJihuKz1vKyIsIil9cmV0dXJuIG49bi5yZXBsYWNlKC8sJC8sIiIpKyJ9IixlLmR5bmFtaWNBdHRycyYmKG49Il9iKCIrbisnLCInK2UudGFnKyciLCcrR2EoZS5keW5hbWljQXR0cnMpKyIpIiksZS53cmFwRGF0YSYmKG49ZS53cmFwRGF0YShuKSksZS53cmFwTGlzdGVuZXJzJiYobj1lLndyYXBMaXN0ZW5lcnMobikpLG59ZnVuY3Rpb24gS2EoZSl7cmV0dXJuIDE9PT1lLnR5cGUmJigic2xvdCI9PT1lLnRhZ3x8ZS5jaGlsZHJlbi5zb21lKEthKSl9ZnVuY3Rpb24gSmEoZSx0KXt2YXIgbj1lLmF0dHJzTWFwWyJzbG90LXNjb3BlIl07aWYoZS5pZiYmIWUuaWZQcm9jZXNzZWQmJiFuKXJldHVybiBVYShlLHQsSmEsIm51bGwiKTtpZihlLmZvciYmIWUuZm9yUHJvY2Vzc2VkKXJldHVybiB6YShlLHQsSmEpO3ZhciByPWUuc2xvdFNjb3BlPT09Y2E/IiI6U3RyaW5nKGUuc2xvdFNjb3BlKSxpPSJmdW5jdGlvbigiK3IrIil7cmV0dXJuICIrKCJ0ZW1wbGF0ZSI9PT1lLnRhZz9lLmlmJiZuPyIoIitlLmlmKyIpPyIrKHFhKGUsdCl8fCJ1bmRlZmluZWQiKSsiOnVuZGVmaW5lZCI6cWEoZSx0KXx8InVuZGVmaW5lZCI6UmEoZSx0KSkrIn0iLG89cj8iIjoiLHByb3h5OnRydWUiO3JldHVybiJ7a2V5OiIrKGUuc2xvdFRhcmdldHx8JyJkZWZhdWx0IicpKyIsZm46IitpK28rIn0ifWZ1bmN0aW9uIHFhKGUsdCxuLHIsaSl7dmFyIG89ZS5jaGlsZHJlbjtpZihvLmxlbmd0aCl7dmFyIGE9b1swXTtpZigxPT09by5sZW5ndGgmJmEuZm9yJiYidGVtcGxhdGUiIT09YS50YWcmJiJzbG90IiE9PWEudGFnKXt2YXIgcz1uP3QubWF5YmVDb21wb25lbnQoYSk/IiwxIjoiLDAiOiIiO3JldHVybiIiKyhyfHxSYSkoYSx0KStzfXZhciBjPW4/ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBpPWVbcl07aWYoMT09PWkudHlwZSl7aWYoV2EoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBXYShlLmJsb2NrKX0pKXtuPTI7YnJlYWt9KHQoaSl8fGkuaWZDb25kaXRpb25zJiZpLmlmQ29uZGl0aW9ucy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUuYmxvY2spfSkpJiYobj0xKX19cmV0dXJuIG59KG8sdC5tYXliZUNvbXBvbmVudCk6MCx1PWl8fFphO3JldHVybiJbIitvLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdShlLHQpfSkuam9pbigiLCIpKyJdIisoYz8iLCIrYzoiIil9fWZ1bmN0aW9uIFdhKGUpe3JldHVybiB2b2lkIDAhPT1lLmZvcnx8InRlbXBsYXRlIj09PWUudGFnfHwic2xvdCI9PT1lLnRhZ31mdW5jdGlvbiBaYShlLHQpe3JldHVybiAxPT09ZS50eXBlP1JhKGUsdCk6Mz09PWUudHlwZSYmZS5pc0NvbW1lbnQ/KHI9ZSwiX2UoIitKU09OLnN0cmluZ2lmeShyLnRleHQpKyIpIik6Il92KCIrKDI9PT0obj1lKS50eXBlP24uZXhwcmVzc2lvbjpYYShKU09OLnN0cmluZ2lmeShuLnRleHQpKSkrIikiO3ZhciBuLHJ9ZnVuY3Rpb24gR2EoZSl7Zm9yKHZhciB0PSIiLG49IiIscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLG89WGEoaS52YWx1ZSk7aS5keW5hbWljP24rPWkubmFtZSsiLCIrbysiLCI6dCs9JyInK2kubmFtZSsnIjonK28rIiwifXJldHVybiB0PSJ7Iit0LnNsaWNlKDAsLTEpKyJ9IixuPyJfZCgiK3QrIixbIituLnNsaWNlKDAsLTEpKyJdKSI6dH1mdW5jdGlvbiBYYShlKXtyZXR1cm4gZS5yZXBsYWNlKC9cdTIwMjgvZywiXFx1MjAyOCIpLnJlcGxhY2UoL1x1MjAyOS9nLCJcXHUyMDI5Iil9bmV3IFJlZ0V4cCgiXFxiIisiZG8saWYsZm9yLGxldCxuZXcsdHJ5LHZhcixjYXNlLGVsc2Usd2l0aCxhd2FpdCxicmVhayxjYXRjaCxjbGFzcyxjb25zdCxzdXBlcix0aHJvdyx3aGlsZSx5aWVsZCxkZWxldGUsZXhwb3J0LGltcG9ydCxyZXR1cm4sc3dpdGNoLGRlZmF1bHQsZXh0ZW5kcyxmaW5hbGx5LGNvbnRpbnVlLGRlYnVnZ2VyLGZ1bmN0aW9uLGFyZ3VtZW50cyIuc3BsaXQoIiwiKS5qb2luKCJcXGJ8XFxiIikrIlxcYiIpO2Z1bmN0aW9uIFlhKGUsdCl7dHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oZSl9Y2F0Y2gobil7cmV0dXJuIHQucHVzaCh7ZXJyOm4sY29kZTplfSksU319ZnVuY3Rpb24gUWEoZSl7dmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZnVuY3Rpb24obixyLGkpeyhyPUEoe30scikpLndhcm47ZGVsZXRlIHIud2Fybjt2YXIgbz1yLmRlbGltaXRlcnM/U3RyaW5nKHIuZGVsaW1pdGVycykrbjpuO2lmKHRbb10pcmV0dXJuIHRbb107dmFyIGE9ZShuLHIpLHM9e30sYz1bXTtyZXR1cm4gcy5yZW5kZXI9WWEoYS5yZW5kZXIsYykscy5zdGF0aWNSZW5kZXJGbnM9YS5zdGF0aWNSZW5kZXJGbnMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBZYShlLGMpfSksdFtvXT1zfX12YXIgZXMsdHMsbnM9KGVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49bGEoZS50cmltKCksdCk7ITEhPT10Lm9wdGltaXplJiZrYShuLHQpO3ZhciByPVBhKG4sdCk7cmV0dXJue2FzdDpuLHJlbmRlcjpyLnJlbmRlcixzdGF0aWNSZW5kZXJGbnM6ci5zdGF0aWNSZW5kZXJGbnN9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIHI9T2JqZWN0LmNyZWF0ZShlKSxpPVtdLG89W107aWYobilmb3IodmFyIGEgaW4gbi5tb2R1bGVzJiYoci5tb2R1bGVzPShlLm1vZHVsZXN8fFtdKS5jb25jYXQobi5tb2R1bGVzKSksbi5kaXJlY3RpdmVzJiYoci5kaXJlY3RpdmVzPUEoT2JqZWN0LmNyZWF0ZShlLmRpcmVjdGl2ZXN8fG51bGwpLG4uZGlyZWN0aXZlcykpLG4pIm1vZHVsZXMiIT09YSYmImRpcmVjdGl2ZXMiIT09YSYmKHJbYV09blthXSk7ci53YXJuPWZ1bmN0aW9uKGUsdCxuKXsobj9vOmkpLnB1c2goZSl9O3ZhciBzPWVzKHQudHJpbSgpLHIpO3JldHVybiBzLmVycm9ycz1pLHMudGlwcz1vLHN9cmV0dXJue2NvbXBpbGU6dCxjb21waWxlVG9GdW5jdGlvbnM6UWEodCl9fSkoQ2EpLHJzPShucy5jb21waWxlLG5zLmNvbXBpbGVUb0Z1bmN0aW9ucyk7ZnVuY3Rpb24gaXMoZSl7cmV0dXJuKHRzPXRzfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSkuaW5uZXJIVE1MPWU/JzxhIGhyZWY9IlxuIi8+JzonPGRpdiBhPSJcbiIvPicsdHMuaW5uZXJIVE1MLmluZGV4T2YoIiYjMTA7Iik+MH12YXIgb3M9ISF6JiZpcyghMSksYXM9ISF6JiZpcyghMCksc3M9ZyhmdW5jdGlvbihlKXt2YXIgdD1ZbihlKTtyZXR1cm4gdCYmdC5pbm5lckhUTUx9KSxjcz13bi5wcm90b3R5cGUuJG1vdW50O3JldHVybiB3bi5wcm90b3R5cGUuJG1vdW50PWZ1bmN0aW9uKGUsdCl7aWYoKGU9ZSYmWW4oZSkpPT09ZG9jdW1lbnQuYm9keXx8ZT09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudClyZXR1cm4gdGhpczt2YXIgbj10aGlzLiRvcHRpb25zO2lmKCFuLnJlbmRlcil7dmFyIHI9bi50ZW1wbGF0ZTtpZihyKWlmKCJzdHJpbmciPT10eXBlb2YgcikiIyI9PT1yLmNoYXJBdCgwKSYmKHI9c3MocikpO2Vsc2V7aWYoIXIubm9kZVR5cGUpcmV0dXJuIHRoaXM7cj1yLmlubmVySFRNTH1lbHNlIGUmJihyPWZ1bmN0aW9uKGUpe2lmKGUub3V0ZXJIVE1MKXJldHVybiBlLm91dGVySFRNTDt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChlLmNsb25lTm9kZSghMCkpLHQuaW5uZXJIVE1MfShlKSk7aWYocil7dmFyIGk9cnMocix7b3V0cHV0U291cmNlUmFuZ2U6ITEsc2hvdWxkRGVjb2RlTmV3bGluZXM6b3Msc2hvdWxkRGVjb2RlTmV3bGluZXNGb3JIcmVmOmFzLGRlbGltaXRlcnM6bi5kZWxpbWl0ZXJzLGNvbW1lbnRzOm4uY29tbWVudHN9LHRoaXMpLG89aS5yZW5kZXIsYT1pLnN0YXRpY1JlbmRlckZucztuLnJlbmRlcj1vLG4uc3RhdGljUmVuZGVyRm5zPWF9fXJldHVybiBjcy5jYWxsKHRoaXMsZSx0KX0sd24uY29tcGlsZT1ycyx3bn0pOw=="},{"meta":{"name":"vuex.min.js","url":"https://cdn.jsdelivr.net/npm/vuex@3.4.0/dist/vuex.min.js","ts":1591001487096,"mimetype":"text/javascript"},"source":"LyohCiAqIHZ1ZXggdjMuNC4wCiAqIChjKSAyMDIwIEV2YW4gWW91CiAqIEBsaWNlbnNlIE1JVAogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9dHx8c2VsZikuVnVleD1lKCl9KHRoaXMsKGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciB0PSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOnt9KS5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIGUodCxlKXtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChmdW5jdGlvbihuKXtyZXR1cm4gZSh0W25dLG4pfSkpfWZ1bmN0aW9uIG4odCl7cmV0dXJuIG51bGwhPT10JiYib2JqZWN0Ij09dHlwZW9mIHR9dmFyIG89ZnVuY3Rpb24odCxlKXt0aGlzLnJ1bnRpbWU9ZSx0aGlzLl9jaGlsZHJlbj1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX3Jhd01vZHVsZT10O3ZhciBuPXQuc3RhdGU7dGhpcy5zdGF0ZT0oImZ1bmN0aW9uIj09dHlwZW9mIG4/bigpOm4pfHx7fX0saT17bmFtZXNwYWNlZDp7Y29uZmlndXJhYmxlOiEwfX07aS5uYW1lc3BhY2VkLmdldD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fcmF3TW9kdWxlLm5hbWVzcGFjZWR9LG8ucHJvdG90eXBlLmFkZENoaWxkPWZ1bmN0aW9uKHQsZSl7dGhpcy5fY2hpbGRyZW5bdF09ZX0sby5wcm90b3R5cGUucmVtb3ZlQ2hpbGQ9ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuX2NoaWxkcmVuW3RdfSxvLnByb3RvdHlwZS5nZXRDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5bdF19LG8ucHJvdG90eXBlLmhhc0NoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluIHRoaXMuX2NoaWxkcmVufSxvLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fcmF3TW9kdWxlLm5hbWVzcGFjZWQ9dC5uYW1lc3BhY2VkLHQuYWN0aW9ucyYmKHRoaXMuX3Jhd01vZHVsZS5hY3Rpb25zPXQuYWN0aW9ucyksdC5tdXRhdGlvbnMmJih0aGlzLl9yYXdNb2R1bGUubXV0YXRpb25zPXQubXV0YXRpb25zKSx0LmdldHRlcnMmJih0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycz10LmdldHRlcnMpfSxvLnByb3RvdHlwZS5mb3JFYWNoQ2hpbGQ9ZnVuY3Rpb24odCl7ZSh0aGlzLl9jaGlsZHJlbix0KX0sby5wcm90b3R5cGUuZm9yRWFjaEdldHRlcj1mdW5jdGlvbih0KXt0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycyYmZSh0aGlzLl9yYXdNb2R1bGUuZ2V0dGVycyx0KX0sby5wcm90b3R5cGUuZm9yRWFjaEFjdGlvbj1mdW5jdGlvbih0KXt0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucyYmZSh0aGlzLl9yYXdNb2R1bGUuYWN0aW9ucyx0KX0sby5wcm90b3R5cGUuZm9yRWFjaE11dGF0aW9uPWZ1bmN0aW9uKHQpe3RoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMmJmUodGhpcy5fcmF3TW9kdWxlLm11dGF0aW9ucyx0KX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoby5wcm90b3R5cGUsaSk7dmFyIHIscz1mdW5jdGlvbih0KXt0aGlzLnJlZ2lzdGVyKFtdLHQsITEpfTtzLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVkdWNlKChmdW5jdGlvbih0LGUpe3JldHVybiB0LmdldENoaWxkKGUpfSksdGhpcy5yb290KX0scy5wcm90b3R5cGUuZ2V0TmFtZXNwYWNlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucm9vdDtyZXR1cm4gdC5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQrKChlPWUuZ2V0Q2hpbGQobikpLm5hbWVzcGFjZWQ/bisiLyI6IiIpfSksIiIpfSxzLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7IWZ1bmN0aW9uIHQoZSxuLG8pe2lmKG4udXBkYXRlKG8pLG8ubW9kdWxlcylmb3IodmFyIGkgaW4gby5tb2R1bGVzKXtpZighbi5nZXRDaGlsZChpKSlyZXR1cm47dChlLmNvbmNhdChpKSxuLmdldENoaWxkKGkpLG8ubW9kdWxlc1tpXSl9fShbXSx0aGlzLnJvb3QsdCl9LHMucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKHQsbixpKXt2YXIgcj10aGlzO3ZvaWQgMD09PWkmJihpPSEwKTt2YXIgcz1uZXcgbyhuLGkpOzA9PT10Lmxlbmd0aD90aGlzLnJvb3Q9czp0aGlzLmdldCh0LnNsaWNlKDAsLTEpKS5hZGRDaGlsZCh0W3QubGVuZ3RoLTFdLHMpO24ubW9kdWxlcyYmZShuLm1vZHVsZXMsKGZ1bmN0aW9uKGUsbil7ci5yZWdpc3Rlcih0LmNvbmNhdChuKSxlLGkpfSkpfSxzLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0KHQuc2xpY2UoMCwtMSkpLG49dFt0Lmxlbmd0aC0xXTtlLmdldENoaWxkKG4pLnJ1bnRpbWUmJmUucmVtb3ZlQ2hpbGQobil9LHMucHJvdG90eXBlLmlzUmVnaXN0ZXJlZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCh0LnNsaWNlKDAsLTEpKSxuPXRbdC5sZW5ndGgtMV07cmV0dXJuIGUuaGFzQ2hpbGQobil9O3ZhciBjPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLCFyJiYidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93LlZ1ZSYmbSh3aW5kb3cuVnVlKTt2YXIgbz1lLnBsdWdpbnM7dm9pZCAwPT09byYmKG89W10pO3ZhciBpPWUuc3RyaWN0O3ZvaWQgMD09PWkmJihpPSExKSx0aGlzLl9jb21taXR0aW5nPSExLHRoaXMuX2FjdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9hY3Rpb25TdWJzY3JpYmVycz1bXSx0aGlzLl9tdXRhdGlvbnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl93cmFwcGVkR2V0dGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX21vZHVsZXM9bmV3IHMoZSksdGhpcy5fbW9kdWxlc05hbWVzcGFjZU1hcD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX3N1YnNjcmliZXJzPVtdLHRoaXMuX3dhdGNoZXJWTT1uZXcgcix0aGlzLl9tYWtlTG9jYWxHZXR0ZXJzQ2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgYz10aGlzLGE9dGhpcy5kaXNwYXRjaCx1PXRoaXMuY29tbWl0O3RoaXMuZGlzcGF0Y2g9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYS5jYWxsKGMsdCxlKX0sdGhpcy5jb21taXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB1LmNhbGwoYyx0LGUsbil9LHRoaXMuc3RyaWN0PWk7dmFyIGY9dGhpcy5fbW9kdWxlcy5yb290LnN0YXRlO3AodGhpcyxmLFtdLHRoaXMuX21vZHVsZXMucm9vdCksaCh0aGlzLGYpLG8uZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQobil9KSksKHZvaWQgMCE9PWUuZGV2dG9vbHM/ZS5kZXZ0b29sczpyLmNvbmZpZy5kZXZ0b29scykmJmZ1bmN0aW9uKGUpe3QmJihlLl9kZXZ0b29sSG9vaz10LHQuZW1pdCgidnVleDppbml0IixlKSx0Lm9uKCJ2dWV4OnRyYXZlbC10by1zdGF0ZSIsKGZ1bmN0aW9uKHQpe2UucmVwbGFjZVN0YXRlKHQpfSkpLGUuc3Vic2NyaWJlKChmdW5jdGlvbihlLG4pe3QuZW1pdCgidnVleDptdXRhdGlvbiIsZSxuKX0pLHtwcmVwZW5kOiEwfSksZS5zdWJzY3JpYmVBY3Rpb24oKGZ1bmN0aW9uKGUsbil7dC5lbWl0KCJ2dWV4OmFjdGlvbiIsZSxuKX0pLHtwcmVwZW5kOiEwfSkpfSh0aGlzKX0sYT17c3RhdGU6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHUodCxlLG4pe3JldHVybiBlLmluZGV4T2YodCk8MCYmKG4mJm4ucHJlcGVuZD9lLnVuc2hpZnQodCk6ZS5wdXNoKHQpKSxmdW5jdGlvbigpe3ZhciBuPWUuaW5kZXhPZih0KTtuPi0xJiZlLnNwbGljZShuLDEpfX1mdW5jdGlvbiBmKHQsZSl7dC5fYWN0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpLHQuX211dGF0aW9ucz1PYmplY3QuY3JlYXRlKG51bGwpLHQuX3dyYXBwZWRHZXR0ZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdC5fbW9kdWxlc05hbWVzcGFjZU1hcD1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBuPXQuc3RhdGU7cCh0LG4sW10sdC5fbW9kdWxlcy5yb290LCEwKSxoKHQsbixlKX1mdW5jdGlvbiBoKHQsbixvKXt2YXIgaT10Ll92bTt0LmdldHRlcnM9e30sdC5fbWFrZUxvY2FsR2V0dGVyc0NhY2hlPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIHM9dC5fd3JhcHBlZEdldHRlcnMsYz17fTtlKHMsKGZ1bmN0aW9uKGUsbil7Y1tuXT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KGUpfX0oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5nZXR0ZXJzLG4se2dldDpmdW5jdGlvbigpe3JldHVybiB0Ll92bVtuXX0sZW51bWVyYWJsZTohMH0pfSkpO3ZhciBhPXIuY29uZmlnLnNpbGVudDtyLmNvbmZpZy5zaWxlbnQ9ITAsdC5fdm09bmV3IHIoe2RhdGE6eyQkc3RhdGU6bn0sY29tcHV0ZWQ6Y30pLHIuY29uZmlnLnNpbGVudD1hLHQuc3RyaWN0JiZmdW5jdGlvbih0KXt0Ll92bS4kd2F0Y2goKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuJCRzdGF0ZX0pLChmdW5jdGlvbigpe30pLHtkZWVwOiEwLHN5bmM6ITB9KX0odCksaSYmKG8mJnQuX3dpdGhDb21taXQoKGZ1bmN0aW9uKCl7aS5fZGF0YS4kJHN0YXRlPW51bGx9KSksci5uZXh0VGljaygoZnVuY3Rpb24oKXtyZXR1cm4gaS4kZGVzdHJveSgpfSkpKX1mdW5jdGlvbiBwKHQsZSxuLG8saSl7dmFyIHM9IW4ubGVuZ3RoLGM9dC5fbW9kdWxlcy5nZXROYW1lc3BhY2Uobik7aWYoby5uYW1lc3BhY2VkJiYodC5fbW9kdWxlc05hbWVzcGFjZU1hcFtjXSx0Ll9tb2R1bGVzTmFtZXNwYWNlTWFwW2NdPW8pLCFzJiYhaSl7dmFyIGE9bChlLG4uc2xpY2UoMCwtMSkpLHU9bltuLmxlbmd0aC0xXTt0Ll93aXRoQ29tbWl0KChmdW5jdGlvbigpe3Iuc2V0KGEsdSxvLnN0YXRlKX0pKX12YXIgZj1vLmNvbnRleHQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPSIiPT09ZSxpPXtkaXNwYXRjaDpvP3QuZGlzcGF0Y2g6ZnVuY3Rpb24obixvLGkpe3ZhciByPWQobixvLGkpLHM9ci5wYXlsb2FkLGM9ci5vcHRpb25zLGE9ci50eXBlO3JldHVybiBjJiZjLnJvb3R8fChhPWUrYSksdC5kaXNwYXRjaChhLHMpfSxjb21taXQ6bz90LmNvbW1pdDpmdW5jdGlvbihuLG8saSl7dmFyIHI9ZChuLG8saSkscz1yLnBheWxvYWQsYz1yLm9wdGlvbnMsYT1yLnR5cGU7YyYmYy5yb290fHwoYT1lK2EpLHQuY29tbWl0KGEscyxjKX19O3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpLHtnZXR0ZXJzOntnZXQ6bz9mdW5jdGlvbigpe3JldHVybiB0LmdldHRlcnN9OmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYoIXQuX21ha2VMb2NhbEdldHRlcnNDYWNoZVtlXSl7dmFyIG49e30sbz1lLmxlbmd0aDtPYmplY3Qua2V5cyh0LmdldHRlcnMpLmZvckVhY2goKGZ1bmN0aW9uKGkpe2lmKGkuc2xpY2UoMCxvKT09PWUpe3ZhciByPWkuc2xpY2Uobyk7T2JqZWN0LmRlZmluZVByb3BlcnR5KG4scix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0dGVyc1tpXX0sZW51bWVyYWJsZTohMH0pfX0pKSx0Ll9tYWtlTG9jYWxHZXR0ZXJzQ2FjaGVbZV09bn1yZXR1cm4gdC5fbWFrZUxvY2FsR2V0dGVyc0NhY2hlW2VdfSh0LGUpfX0sc3RhdGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBsKHQuc3RhdGUsbil9fX0pLGl9KHQsYyxuKTtvLmZvckVhY2hNdXRhdGlvbigoZnVuY3Rpb24oZSxuKXshZnVuY3Rpb24odCxlLG4sbyl7KHQuX211dGF0aW9uc1tlXXx8KHQuX211dGF0aW9uc1tlXT1bXSkpLnB1c2goKGZ1bmN0aW9uKGUpe24uY2FsbCh0LG8uc3RhdGUsZSl9KSl9KHQsYytuLGUsZil9KSksby5mb3JFYWNoQWN0aW9uKChmdW5jdGlvbihlLG4pe3ZhciBvPWUucm9vdD9uOmMrbixpPWUuaGFuZGxlcnx8ZTshZnVuY3Rpb24odCxlLG4sbyl7KHQuX2FjdGlvbnNbZV18fCh0Ll9hY3Rpb25zW2VdPVtdKSkucHVzaCgoZnVuY3Rpb24oZSl7dmFyIGkscj1uLmNhbGwodCx7ZGlzcGF0Y2g6by5kaXNwYXRjaCxjb21taXQ6by5jb21taXQsZ2V0dGVyczpvLmdldHRlcnMsc3RhdGU6by5zdGF0ZSxyb290R2V0dGVyczp0LmdldHRlcnMscm9vdFN0YXRlOnQuc3RhdGV9LGUpO3JldHVybihpPXIpJiYiZnVuY3Rpb24iPT10eXBlb2YgaS50aGVufHwocj1Qcm9taXNlLnJlc29sdmUocikpLHQuX2RldnRvb2xIb29rP3IuY2F0Y2goKGZ1bmN0aW9uKGUpe3Rocm93IHQuX2RldnRvb2xIb29rLmVtaXQoInZ1ZXg6ZXJyb3IiLGUpLGV9KSk6cn0pKX0odCxvLGksZil9KSksby5mb3JFYWNoR2V0dGVyKChmdW5jdGlvbihlLG4peyFmdW5jdGlvbih0LGUsbixvKXtpZih0Ll93cmFwcGVkR2V0dGVyc1tlXSlyZXR1cm47dC5fd3JhcHBlZEdldHRlcnNbZV09ZnVuY3Rpb24odCl7cmV0dXJuIG4oby5zdGF0ZSxvLmdldHRlcnMsdC5zdGF0ZSx0LmdldHRlcnMpfX0odCxjK24sZSxmKX0pKSxvLmZvckVhY2hDaGlsZCgoZnVuY3Rpb24obyxyKXtwKHQsZSxuLmNvbmNhdChyKSxvLGkpfSkpfWZ1bmN0aW9uIGwodCxlKXtyZXR1cm4gZS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRbZV19KSx0KX1mdW5jdGlvbiBkKHQsZSxvKXtyZXR1cm4gbih0KSYmdC50eXBlJiYobz1lLGU9dCx0PXQudHlwZSkse3R5cGU6dCxwYXlsb2FkOmUsb3B0aW9uczpvfX1mdW5jdGlvbiBtKHQpe3ImJnQ9PT1yfHxmdW5jdGlvbih0KXtpZihOdW1iZXIodC52ZXJzaW9uLnNwbGl0KCIuIilbMF0pPj0yKXQubWl4aW4oe2JlZm9yZUNyZWF0ZTpufSk7ZWxzZXt2YXIgZT10LnByb3RvdHlwZS5faW5pdDt0LnByb3RvdHlwZS5faW5pdD1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD17fSksdC5pbml0PXQuaW5pdD9bbl0uY29uY2F0KHQuaW5pdCk6bixlLmNhbGwodGhpcyx0KX19ZnVuY3Rpb24gbigpe3ZhciB0PXRoaXMuJG9wdGlvbnM7dC5zdG9yZT90aGlzLiRzdG9yZT0iZnVuY3Rpb24iPT10eXBlb2YgdC5zdG9yZT90LnN0b3JlKCk6dC5zdG9yZTp0LnBhcmVudCYmdC5wYXJlbnQuJHN0b3JlJiYodGhpcy4kc3RvcmU9dC5wYXJlbnQuJHN0b3JlKX19KHI9dCl9YS5zdGF0ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm0uX2RhdGEuJCRzdGF0ZX0sYS5zdGF0ZS5zZXQ9ZnVuY3Rpb24odCl7fSxjLnByb3RvdHlwZS5jb21taXQ9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXMsaT1kKHQsZSxuKSxyPWkudHlwZSxzPWkucGF5bG9hZCxjPXt0eXBlOnIscGF5bG9hZDpzfSxhPXRoaXMuX211dGF0aW9uc1tyXTthJiYodGhpcy5fd2l0aENvbW1pdCgoZnVuY3Rpb24oKXthLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Qocyl9KSl9KSksdGhpcy5fc3Vic2NyaWJlcnMuc2xpY2UoKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdChjLG8uc3RhdGUpfSkpKX0sYy5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLG89ZCh0LGUpLGk9by50eXBlLHI9by5wYXlsb2FkLHM9e3R5cGU6aSxwYXlsb2FkOnJ9LGM9dGhpcy5fYWN0aW9uc1tpXTtpZihjKXt0cnl7dGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMuc2xpY2UoKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmJlZm9yZX0pKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5iZWZvcmUocyxuLnN0YXRlKX0pKX1jYXRjaCh0KXt9dmFyIGE9Yy5sZW5ndGg+MT9Qcm9taXNlLmFsbChjLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQocil9KSkpOmNbMF0ocik7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LGUpe2EudGhlbigoZnVuY3Rpb24oZSl7dHJ5e24uX2FjdGlvblN1YnNjcmliZXJzLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuYWZ0ZXJ9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuYWZ0ZXIocyxuLnN0YXRlKX0pKX1jYXRjaCh0KXt9dChlKX0pLChmdW5jdGlvbih0KXt0cnl7bi5fYWN0aW9uU3Vic2NyaWJlcnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5lcnJvcn0pKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZS5lcnJvcihzLG4uc3RhdGUsdCl9KSl9Y2F0Y2godCl7fWUodCl9KSl9KSl9fSxjLnByb3RvdHlwZS5zdWJzY3JpYmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdSh0LHRoaXMuX3N1YnNjcmliZXJzLGUpfSxjLnByb3RvdHlwZS5zdWJzY3JpYmVBY3Rpb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gdSgiZnVuY3Rpb24iPT10eXBlb2YgdD97YmVmb3JlOnR9OnQsdGhpcy5fYWN0aW9uU3Vic2NyaWJlcnMsZSl9LGMucHJvdG90eXBlLndhdGNoPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO3JldHVybiB0aGlzLl93YXRjaGVyVk0uJHdhdGNoKChmdW5jdGlvbigpe3JldHVybiB0KG8uc3RhdGUsby5nZXR0ZXJzKX0pLGUsbil9LGMucHJvdG90eXBlLnJlcGxhY2VTdGF0ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3dpdGhDb21taXQoKGZ1bmN0aW9uKCl7ZS5fdm0uX2RhdGEuJCRzdGF0ZT10fSkpfSxjLnByb3RvdHlwZS5yZWdpc3Rlck1vZHVsZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pLCJzdHJpbmciPT10eXBlb2YgdCYmKHQ9W3RdKSx0aGlzLl9tb2R1bGVzLnJlZ2lzdGVyKHQsZSkscCh0aGlzLHRoaXMuc3RhdGUsdCx0aGlzLl9tb2R1bGVzLmdldCh0KSxuLnByZXNlcnZlU3RhdGUpLGgodGhpcyx0aGlzLnN0YXRlKX0sYy5wcm90b3R5cGUudW5yZWdpc3Rlck1vZHVsZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzOyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9W3RdKSx0aGlzLl9tb2R1bGVzLnVucmVnaXN0ZXIodCksdGhpcy5fd2l0aENvbW1pdCgoZnVuY3Rpb24oKXt2YXIgbj1sKGUuc3RhdGUsdC5zbGljZSgwLC0xKSk7ci5kZWxldGUobix0W3QubGVuZ3RoLTFdKX0pKSxmKHRoaXMpfSxjLnByb3RvdHlwZS5oYXNNb2R1bGU9ZnVuY3Rpb24odCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD1bdF0pLHRoaXMuX21vZHVsZXMuaXNSZWdpc3RlcmVkKHQpfSxjLnByb3RvdHlwZS5ob3RVcGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fbW9kdWxlcy51cGRhdGUodCksZih0aGlzLCEwKX0sYy5wcm90b3R5cGUuX3dpdGhDb21taXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY29tbWl0dGluZzt0aGlzLl9jb21taXR0aW5nPSEwLHQoKSx0aGlzLl9jb21taXR0aW5nPWV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGMucHJvdG90eXBlLGEpO3ZhciB2PXcoKGZ1bmN0aW9uKHQsZSl7dmFyIG49e307cmV0dXJuIGIoZSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5rZXksaT1lLnZhbDtuW29dPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy4kc3RvcmUuc3RhdGUsbj10aGlzLiRzdG9yZS5nZXR0ZXJzO2lmKHQpe3ZhciBvPSQodGhpcy4kc3RvcmUsIm1hcFN0YXRlIix0KTtpZighbylyZXR1cm47ZT1vLmNvbnRleHQuc3RhdGUsbj1vLmNvbnRleHQuZ2V0dGVyc31yZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmNhbGwodGhpcyxlLG4pOmVbaV19LG5bb10udnVleD0hMH0pKSxufSkpLF89dygoZnVuY3Rpb24odCxlKXt2YXIgbj17fTtyZXR1cm4gYihlKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLmtleSxpPWUudmFsO25bb109ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sbj1hcmd1bWVudHMubGVuZ3RoO24tLTspZVtuXT1hcmd1bWVudHNbbl07dmFyIG89dGhpcy4kc3RvcmUuY29tbWl0O2lmKHQpe3ZhciByPSQodGhpcy4kc3RvcmUsIm1hcE11dGF0aW9ucyIsdCk7aWYoIXIpcmV0dXJuO289ci5jb250ZXh0LmNvbW1pdH1yZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmFwcGx5KHRoaXMsW29dLmNvbmNhdChlKSk6by5hcHBseSh0aGlzLiRzdG9yZSxbaV0uY29uY2F0KGUpKX19KSksbn0pKSx5PXcoKGZ1bmN0aW9uKHQsZSl7dmFyIG49e307cmV0dXJuIGIoZSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5rZXksaT1lLnZhbDtpPXQraSxuW29dPWZ1bmN0aW9uKCl7aWYoIXR8fCQodGhpcy4kc3RvcmUsIm1hcEdldHRlcnMiLHQpKXJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2ldfSxuW29dLnZ1ZXg9ITB9KSksbn0pKSxnPXcoKGZ1bmN0aW9uKHQsZSl7dmFyIG49e307cmV0dXJuIGIoZSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5rZXksaT1lLnZhbDtuW29dPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG49YXJndW1lbnRzLmxlbmd0aDtuLS07KWVbbl09YXJndW1lbnRzW25dO3ZhciBvPXRoaXMuJHN0b3JlLmRpc3BhdGNoO2lmKHQpe3ZhciByPSQodGhpcy4kc3RvcmUsIm1hcEFjdGlvbnMiLHQpO2lmKCFyKXJldHVybjtvPXIuY29udGV4dC5kaXNwYXRjaH1yZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgaT9pLmFwcGx5KHRoaXMsW29dLmNvbmNhdChlKSk6by5hcHBseSh0aGlzLiRzdG9yZSxbaV0uY29uY2F0KGUpKX19KSksbn0pKTtmdW5jdGlvbiBiKHQpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KXx8bih0KX0odCk/QXJyYXkuaXNBcnJheSh0KT90Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJue2tleTp0LHZhbDp0fX0pKTpPYmplY3Qua2V5cyh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntrZXk6ZSx2YWw6dFtlXX19KSk6W119ZnVuY3Rpb24gdyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGU/KG49ZSxlPSIiKToiLyIhPT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmKGUrPSIvIiksdChlLG4pfX1mdW5jdGlvbiAkKHQsZSxuKXtyZXR1cm4gdC5fbW9kdWxlc05hbWVzcGFjZU1hcFtuXX1yZXR1cm57U3RvcmU6YyxpbnN0YWxsOm0sdmVyc2lvbjoiMy40LjAiLG1hcFN0YXRlOnYsbWFwTXV0YXRpb25zOl8sbWFwR2V0dGVyczp5LG1hcEFjdGlvbnM6ZyxjcmVhdGVOYW1lc3BhY2VkSGVscGVyczpmdW5jdGlvbih0KXtyZXR1cm57bWFwU3RhdGU6di5iaW5kKG51bGwsdCksbWFwR2V0dGVyczp5LmJpbmQobnVsbCx0KSxtYXBNdXRhdGlvbnM6Xy5iaW5kKG51bGwsdCksbWFwQWN0aW9uczpnLmJpbmQobnVsbCx0KX19fX0pKTsK"}]},{"name":"破解VIP会员视频集合","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["*://*.bilibili.com/blackboard/*"],"orig_includes":[],"orig_matches":["*://*.iqiyi.com/*","*://*.youku.com/*","*://*.le.com/*","*://*.letv.com/*","*://v.qq.com/*","*://*.tudou.com/*","*://*.mgtv.com/*","*://film.sohu.com/*","*://tv.sohu.com/*","*://*.acfun.cn/*","*://*.bilibili.com/*","*://vip.1905.com/play/*","*://*.pptv.com/*","*://v.yinyuetai.com/video/*","*://v.yinyuetai.com/playlist/*","*://*.fun.tv/vplay/*","*://*.wasu.cn/Play/show/*","*://*.56.com/*"],"orig_noframes":true,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":["/(^[^:\\/#\\?]*:\\/\\/([^#\\?\\/]*\\.)?www\\.bilibili\\.com(:[0-9]{1,5})?\\/.*$)/"],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"topSet":"o{\"wwwbilibilicom\":50}"},"ts":1591001864196},"enabled":false,"position":5,"file_url":"https://greasyfork.org/scripts/27530-%E7%A0%B4%E8%A7%A3vip%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88/code/%E7%A0%B4%E8%A7%A3VIP%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88.user.js","uuid":"92471d8d-a0c1-48a8-a29b-fe69e0420499","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgIOegtOino1ZJUOS8muWRmOinhumikembhuWQiAovLyBAbmFtZXNwYWNlICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3VzZXJzLzEwNDIwMQovLyBAdmVyc2lvbiAgICA1LjAzCi8vIEBkZXNjcmlwdGlvbiAgMjAyMC01LTE0IOiviOWwuOe6p+abtOaWsOOAguS4gOmUruegtOino1vkvJjphbd86IW+6K6vfOS5kOinhnzniLHlpYfoibp86IqS5p6cfEFC56uZfOmfs+aCpuWPsF3nrYlWSVDmiJbkvJrlkZjop4bpopHvvIzop6PmnpDmjqXlj6PotLXnsr7kuI3otLXlpJrvvIznu53lr7nlpJ/nlKjjgILor6bnu4bmlrnms5XnnIvor7TmmI7lkozlm77niYfjgILljIXlkKvkuoZb5oeS5Lq65LiT55SoKioq5pS+5b+D5L2/55So44CC4pa25oeS6Juk6JukXVvjgJDnjqnnmoTll6jjgJFWSVDlt6XlhbfnrrEqKipNYXggemhhbmdd55qE6YOo5YiG5o6l5Y+j44CCW1RhbXBlcm1vbmtleSB8IFZpb2xlbnRtb25rZXkgfCBHcmVhc3ltb25rZXkgNC4wK10KLy8gQGF1dGhvciAgICAg6buE55uQCi8vIHJlcXVpcmUgIGh0dHBzOi8vZ3JlYXNlbW9ua2V5LmdpdGh1Yi5pby9nbTQtcG9seWZpbGwvZ200LXBvbHlmaWxsLmpzCi8vIEBub2ZyYW1lcwovLyBAbWF0Y2ggICAgKjovLyouaXFpeWkuY29tLyoKLy8gQG1hdGNoICAgICo6Ly8qLnlvdWt1LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vKi5sZS5jb20vKgovLyBAbWF0Y2ggICAgKjovLyoubGV0di5jb20vKgovLyBAbWF0Y2ggICAgKjovL3YucXEuY29tLyoKLy8gQG1hdGNoICAgICo6Ly8qLnR1ZG91LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vKi5tZ3R2LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vZmlsbS5zb2h1LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vdHYuc29odS5jb20vKgovLyBAbWF0Y2ggICAgKjovLyouYWNmdW4uY24vKgovLyBAbWF0Y2ggICAgKjovLyouYmlsaWJpbGkuY29tLyoKLy8gQG1hdGNoICAgICo6Ly92aXAuMTkwNS5jb20vcGxheS8qCi8vIEBtYXRjaCAgICAqOi8vKi5wcHR2LmNvbS8qCi8vIEBtYXRjaCAgICAqOi8vdi55aW55dWV0YWkuY29tL3ZpZGVvLyoKLy8gQG1hdGNoICAgICo6Ly92Lnlpbnl1ZXRhaS5jb20vcGxheWxpc3QvKgovLyBAbWF0Y2ggICAgKjovLyouZnVuLnR2L3ZwbGF5LyoKLy8gQG1hdGNoICAgICo6Ly8qLndhc3UuY24vUGxheS9zaG93LyoKLy8gQG1hdGNoICAgICo6Ly8qLjU2LmNvbS8qCi8vIEBleGNsdWRlICAqOi8vKi5iaWxpYmlsaS5jb20vYmxhY2tib2FyZC8qCi8vIEBncmFudCAgICBHTS5nZXRWYWx1ZQovLyBAZ3JhbnQgICAgR00uc2V0VmFsdWUKLy8gQGdyYW50ICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgR00ueG1sSHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgR00ub3BlbkluVGFiCi8vIEByZXF1aXJlICBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3Z1ZUAyLjYuMTEvZGlzdC92dWUucnVudGltZS5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CiFmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiBpKG4pe2lmKGVbbl0pcmV0dXJuIGVbbl0uZXhwb3J0czt2YXIgcz1lW25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtuXS5jYWxsKHMuZXhwb3J0cyxzLHMuZXhwb3J0cyxpKSxzLmw9ITAscy5leHBvcnRzfWkubT10LGkuYz1lLGkuZD1mdW5jdGlvbih0LGUsbil7aS5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0Om59KX0saS5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LGkudD1mdW5jdGlvbih0LGUpe2lmKDEmZSYmKHQ9aSh0KSksOCZlKXJldHVybiB0O2lmKDQmZSYmIm9iamVjdCI9PXR5cGVvZiB0JiZ0JiZ0Ll9fZXNNb2R1bGUpcmV0dXJuIHQ7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZihpLnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnR9KSwyJmUmJiJzdHJpbmciIT10eXBlb2YgdClmb3IodmFyIHMgaW4gdClpLmQobixzLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfS5iaW5kKG51bGwscykpO3JldHVybiBufSxpLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIGkuZChlLCJhIixlKSxlfSxpLm89ZnVuY3Rpb24odCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LGkucD0iIixpKGkucz03KX0oW2Z1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVZ1ZX0sZnVuY3Rpb24odCxlLGkpe30sZnVuY3Rpb24odCxlLGkpe30sZnVuY3Rpb24odCxlLGkpe30sZnVuY3Rpb24odCxlLGkpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1pKDEpO2kubihuKS5hfSxmdW5jdGlvbih0LGUsaSl7InVzZSBzdHJpY3QiO3ZhciBuPWkoMik7aS5uKG4pLmF9LGZ1bmN0aW9uKHQsZSxpKXsidXNlIHN0cmljdCI7dmFyIG49aSgzKTtpLm4obikuYX0sZnVuY3Rpb24odCxlLGkpeyJ1c2Ugc3RyaWN0IjtpLnIoZSk7dmFyIG49aSgwKSxzPWkubihuKSxhPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuJGNyZWF0ZUVsZW1lbnQsaT10Ll9zZWxmLl9jfHxlO3JldHVybiBpKCJkaXYiLHtyZWY6ImNyYWNrVklQU2V0IixzdHlsZTp0LnN0eWxlVG9wLGF0dHJzOntpZDoiY3JhY2tWSVBTZXQifX0sW2koImRpdiIse2F0dHJzOntpZDoibmF2In19LFtpKCJidXR0b24iLHthdHRyczp7bmFtZToicXVpY2tKdW1wIn0sb246e21vdXNlb3ZlcjpmdW5jdGlvbihlKXt0Lm5hdj0iYXBpcyJ9LGNsaWNrOnQucXVpY2tKdW1wLG1vdXNlZG93bjpmdW5jdGlvbihlKXtyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLHQubW92ZVkoZSl9fX0sW3QuX3YoIuKWtiIpXSksdC5fdigiICIpLGkoImJ1dHRvbiIse29uOnttb3VzZW92ZXI6ZnVuY3Rpb24oZSl7dC5uYXY9InNldHRpbmdzIn19fSxbdC5fdigi4piRIildKV0pLHQuX3YoIiAiKSxpKCJkaXYiLHthdHRyczp7aWQ6Imxpc3QifX0sWyJhcGlzIj09dC5uYXY/aSgiZGl2Iix0Ll9sKHQuYXBpcywoZnVuY3Rpb24oZSxuKXtyZXR1cm4gaSgiYiIse2tleTpuLGF0dHJzOnt0aXRsZTplLnRpdGxlfHwiIiwiZGF0YS1pY29uIjplLmludGFiPyLwn5eWIjoi8J+XlyJ9LG9uOntjbGljazpmdW5jdGlvbihlKXtyZXR1cm4gdC5qdW1wKG4pfX19LFt0Ll92KHQuX3MoZS5uYW1lfHwi5pyq5ZG95ZCNIikpXSl9KSksMCk6InNldHRpbmdzIj09dC5uYXY/aSgiZGl2Iix7c3RhdGljU3R5bGU6e3Bvc2l0aW9uOiJyZWxhdGl2ZSIsdG9wOiI1MHB4In19LHQuX2woT2JqZWN0LmtleXModC5zZXR0aW5ncyksKGZ1bmN0aW9uKGUsbil7cmV0dXJuIGkoImIiLHtrZXk6bn0sW2koImxhYmVsIixbaSgiaW5wdXQiLHtkaXJlY3RpdmVzOlt7bmFtZToibW9kZWwiLHJhd05hbWU6InYtbW9kZWwiLHZhbHVlOnQuc2V0dGluZ3NbZV0udmFsdWUsZXhwcmVzc2lvbjoic2V0dGluZ3Nba2V5XS52YWx1ZSJ9XSxhdHRyczp7dHlwZToiY2hlY2tib3gifSxkb21Qcm9wczp7Y2hlY2tlZDpBcnJheS5pc0FycmF5KHQuc2V0dGluZ3NbZV0udmFsdWUpP3QuX2kodC5zZXR0aW5nc1tlXS52YWx1ZSxudWxsKT4tMTp0LnNldHRpbmdzW2VdLnZhbHVlfSxvbjp7Y2hhbmdlOltmdW5jdGlvbihpKXt2YXIgbj10LnNldHRpbmdzW2VdLnZhbHVlLHM9aS50YXJnZXQsYT0hIXMuY2hlY2tlZDtpZihBcnJheS5pc0FycmF5KG4pKXt2YXIgbz10Ll9pKG4sbnVsbCk7cy5jaGVja2VkP288MCYmdC4kc2V0KHQuc2V0dGluZ3NbZV0sInZhbHVlIixuLmNvbmNhdChbbnVsbF0pKTpvPi0xJiZ0LiRzZXQodC5zZXR0aW5nc1tlXSwidmFsdWUiLG4uc2xpY2UoMCxvKS5jb25jYXQobi5zbGljZShvKzEpKSl9ZWxzZSB0LiRzZXQodC5zZXR0aW5nc1tlXSwidmFsdWUiLGEpfSxmdW5jdGlvbihpKXtyZXR1cm4gdC5jaGFuZ2VTZXR0aW5nKGUpfV19fSksdC5fdigiICIpLGkoInNwYW4iLFt0Ll92KHQuX3ModC5zZXR0aW5nc1tlXS5uYW1lKSldKV0pXSl9KSksMCk6dC5fZSgpXSldKX07YS5fd2l0aFN0cmlwcGVkPSEwO2NvbnN0IG89W3tuYW1lOiLnu4TlkIjop6PmnpAiLHVybDoiaHR0cDovL2tpd2k4LnRvcC9tb3Yvcz91cmw9Iix0aXRsZToiS0lXSeino+aekO+8jOe7hOWQiOWei+ino+aekO+8jOermemVv+S8mue7tOaKpOaOkuWQjSIsaW50YWI6MH0se25hbWU6Ik0xOTA3Iix1cmw6Imh0dHBzOi8vejEubTE5MDcuY24vP2p4PSIsdGl0bGU6IuaHkuS6uuS4k+eUqCzlhajnvZFWSVAqKirjgJDkvZzogIXmh5Lom6Tom6TjgJHohJrmnKznmoTmjqXlj6MiLGludGFiOjF9LHtuYW1lOiLpu5HkupHop6PmnpAiLHVybDoiaHR0cDovL2ppZXhpLjM4MGsuY29tLz91cmw9Iix0aXRsZToi6YCf5bqm5Z2X77yM5aW955SoIixpbnRhYjoxfSx7bmFtZToiMTfkupEiLHVybDoiaHR0cHM6Ly93d3cuMTcxN3l1bi5jb20vangvdHkucGhwP3VybD0iLHRpdGxlOiJNMTkwNyIsaW50YWI6MX0se25hbWU6Ium7keexsyIsdXJsOiJodHRwczovL3d3dy5teXhpbi50b3AvangvYXBpLz91cmw9Iix0aXRsZToi6buR57GzIixpbnRhYjoxfSx7bmFtZToiNjE4RyIsdXJsOiJodHRwOi8vanguNjE4Zy5jb20vP3VybD0iLHRpdGxlOiI2MThHIixpbnRhYjoxfSx7bmFtZToi546p55qE5ZeoIix1cmw6Imh0dHA6Ly90di53YW5kaGkuY29tL2dvLmh0bWw/dXJsPSIsdGl0bGU6Iue7vOWQiOaOpeWPoyzkuIDplK5WSVAqKiog5pu05paw5Y+v55So44CQ5L2c6ICFbWFyayB6aGFuZ+OAkeiEmuacrOeahOaOpeWPoyIsaW50YWI6MH0se25hbWU6IuaQnOS9oOWmuTEiLHVybDoiaHR0cHM6Ly93d3cuc291bm0uY29tLz91cmw9Iix0aXRsZToi57u85ZCI5o6l5Y+jLFZJUOinhumikSoqKiDmm7TmlrDlj6/nlKjjgJDkvZzogIVzb25pbWVpMTM044CR6ISa5pys55qE5o6l5Y+jIixpbnRhYjowfSx7bmFtZToi55+z5aS06Kej5p6QIix1cmw6Imh0dHBzOi8vamlleGkuMDcxODExLmNjL2p4LnBocD91cmw9Iix0aXRsZToi5omL5Yqo54K55pKt5pS+IixpbnRhYjoxfSx7bmFtZToi5bCP56ul5b2x6KeGIix1cmw6Imh0dHA6Ly93d3cuaGIyMzg4OC52aXAvanh1cmwucGhwP3VybD0iLHRpdGxlOiLpgJ/luqbli4nlvLrvvIzpnIDopoHmiYvliqjngrnmkq3mlL4iLGludGFiOjF9LHtuYW1lOiLljYPlj7bop6PmnpAiLHVybDoiaHR0cHM6Ly95aTI5Zi5jbi92aXAucGhwP3VybD0iLHRpdGxlOiLmiYvliqjngrnmkq3mlL4iLGludGFiOjF9LHtuYW1lOiI5Mjfop6PmnpAiLHVybDoiaHR0cHM6Ly9hcGkuOTI3anguY29tL3ZpcC8/dXJsPSIsdGl0bGU6IuaJi+WKqOeCueaSreaUviIsaW50YWI6MX0se25hbWU6IuaYn+epuuino+aekCIsdXJsOiJodHRwczovL2p4LmZvOTcuY24vP3VybD0iLHRpdGxlOiLmiYvliqjngrnmkq3mlL4iLGludGFiOjF9LHtuYW1lOiLml6DlkI3lsI/nq5kiLHVybDoiaHR0cDovL3d3dy5zZnNmdC5jb20vYWRtaW4ucGhwP3VybD0iLHRpdGxlOiLml6DlkI3lsI/nq5nlkIzmupAiLGludGFiOjB9LHtuYW1lOiLml6DlkI3lsI/nq5kyIix1cmw6Imh0dHA6Ly93d3cud214ei53YW5nL3ZpZGVvLnBocD91cmw9Iix0aXRsZToi6L2s5ZyI5ZyI5bCx5o2i57q/6LevIixpbnRhYjowfSx7bmFtZToi5Lq65Lq65Y+R5biDIix1cmw6Imh0dHA6Ly92LnJlbnJlbmZhYnUuY29tL2ppZXhpLnBocD91cmw9Iix0aXRsZToi57u85ZCI77yM5aSa57q/6LevIixpbnRhYjowfSx7bmFtZToi5LqM5bqm6Kej5p6QIix1cmw6Imh0dHBzOi8vanguZHUyLmNjLz91cmw9Iix0aXRsZToi5omL5Yqo54K55pKt5pS+IixpbnRhYjoxfSx7bmFtZToi5oCd5Y+kIix1cmw6Imh0dHBzOi8vYXBpLnNpZ3VqeC5jb20vP3VybD0iLHRpdGxlOiLmgJ3lj6QiLGludGFiOjF9LHtuYW1lOiLkurrkuroiLHVybDoiaHR0cHM6Ly92aXAubXBvcy5yZW4vdi8/dXJsPSIsdGl0bGU6IuS6uuS6uiIsaW50YWI6MX0se25hbWU6IuS5kOS5kOS6kSIsdXJsOiJodHRwczovLzY2MGUuY29tLz91cmw9Iix0aXRsZToi5LmQ5LmQ5LqR77yM5pyq55+l5pWI5p6cIixpbnRhYjoxfV07ZnVuY3Rpb24gbCgpe3JldHVybiBsb2NhdGlvbi5ob3N0bmFtZS5yZXBsYWNlKC9cLi9nLCIiKX1mdW5jdGlvbiByKHQsZSl7bGV0IGk9bCgpLG49R01fZ2V0VmFsdWUodCx7fSk7bltpXT1lLEdNX3NldFZhbHVlKHQsbil9ZnVuY3Rpb24gdSh0LGUpe2xldCBpPWwoKTtyZXR1cm4gR01fZ2V0VmFsdWUodCx7fSlbaV18fGV9ZnVuY3Rpb24gYyh0LGUpe3JldHVybiBHTV9nZXRWYWx1ZSh0LGUpfWZ1bmN0aW9uIHAodCxlKXtHTV9zZXRWYWx1ZSh0LGUpfXZhciBkPXtkYXRhOigpPT4oe2FwaXM6W10sZGVmYXVsdEFwaXM6W10sbXlBcGlzOltdLHNldHRpbmdzOntvcGVuSW50YWI6e3ZhbHVlOjAsbmFtZToi6aG15YaF5pKt5pS+In0sbXlBcGlzRmlyc3Q6e3ZhbHVlOjAsbmFtZToi5oiR55qEQVBJ5LyY5YWIIn0sZWRpdEFwaXM6e3ZhbHVlOjAsbmFtZToi566h55CGQVBJIn19LG5hdjoiYXBpcyIsdG9wT2Zmc2V0OjUwfSksbWV0aG9kczp7bW92ZVkodCl7bGV0IGU9dGhpcy4kcmVmcy5jcmFja1ZJUFNldCxpPXQuY2xpZW50WS1lLm9mZnNldFRvcDtkb2N1bWVudC5vbm1vdXNlbW92ZT10PT57dGhpcy50b3BPZmZzZXQ9dC5jbGllbnRZLWl9LGRvY3VtZW50Lm9ubW91c2V1cD10PT57cigidG9wU2V0Iix0aGlzLnRvcE9mZnNldCksZG9jdW1lbnQub25tb3VzZW1vdmU9bnVsbCxkb2N1bWVudC5vbm1vdXNldXA9bnVsbH19LHF1aWNrSnVtcCgpe3RoaXMuanVtcCgwKX0sanVtcCh0KXtsZXQgZT10aGlzLmFwaXNbdF0udXJsK2xvY2F0aW9uLmhyZWY7dGhpcy5zZXR0aW5ncy5vcGVuSW50YWIudmFsdWUmJnRoaXMuYXBpc1t0XS5pbnRhYj8odGhpcy4kdGVsZS4kZW1pdCgidXBkYXRlU3JjIiwiIiksc2V0VGltZW91dCgoKT0+e3RoaXMuJHRlbGUuJGVtaXQoInVwZGF0ZVNyYyIsZSl9LDIwMCkpOndpbmRvdy5vcGVuKGUsIl9ibGFuayIpfSxjaGFuZ2VTZXR0aW5nKHQpe3AoIlNldHRpbmdzIix0aGlzLnNldHRpbmdzKSwiZWRpdEFwaXMiPT10P3RoaXMuJHRlbGUuJGVtaXQoImVkaXRBcGlzIix0aGlzLmRlZmF1bHRBcGlzKToibXlBcGlzRmlyc3QiPT10JiZ0aGlzLnVwZGF0ZUFwaXMoKX0sdXBkYXRlQXBpcygpe3RoaXMuZGVmYXVsdEFwaXM9YygiZGVmYXVsdEFwaXMiLG8pLHRoaXMubXlBcGlzPWMoIm15QXBpcyIsW10pO2MoIlNldHRpbmdzIix7fSk7dGhpcy5zZXR0aW5ncy5teUFwaXNGaXJzdC52YWx1ZT90aGlzLmFwaXM9dGhpcy5teUFwaXMuY29uY2F0KHRoaXMuZGVmYXVsdEFwaXMpOnRoaXMuYXBpcz10aGlzLmRlZmF1bHRBcGlzLmNvbmNhdCh0aGlzLm15QXBpcyl9fSxjb21wdXRlZDp7c3R5bGVUb3AoKXtyZXR1cm5gdG9wOiR7dGhpcy50b3BPZmZzZXR9cHg7YH19LG1vdW50ZWQ6ZnVuY3Rpb24oKXt0aGlzLiR0ZWxlLiRvbigidXBkYXRlQXBpcyIsKCk9Pnt0aGlzLnVwZGF0ZUFwaXMoKX0pLHRoaXMuJG5leHRUaWNrKCgpPT57bGV0IHQ9dSgidG9wU2V0Iiw1MCk7dGhpcy50b3BPZmZzZXQ9dCxPYmplY3QuYXNzaWduKHRoaXMuc2V0dGluZ3MsYygiU2V0dGluZ3MiLHt9KSksdGhpcy51cGRhdGVBcGlzKCl9KX19O2koNCk7ZnVuY3Rpb24gbSh0LGUsaSxuLHMsYSxvLGwpe3ZhciByLHU9ImZ1bmN0aW9uIj09dHlwZW9mIHQ/dC5vcHRpb25zOnQ7aWYoZSYmKHUucmVuZGVyPWUsdS5zdGF0aWNSZW5kZXJGbnM9aSx1Ll9jb21waWxlZD0hMCksbiYmKHUuZnVuY3Rpb25hbD0hMCksYSYmKHUuX3Njb3BlSWQ9ImRhdGEtdi0iK2EpLG8/KHI9ZnVuY3Rpb24odCl7KHQ9dHx8dGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC4kdm5vZGUmJnRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0KXx8InVuZGVmaW5lZCI9PXR5cGVvZiBfX1ZVRV9TU1JfQ09OVEVYVF9ffHwodD1fX1ZVRV9TU1JfQ09OVEVYVF9fKSxzJiZzLmNhbGwodGhpcyx0KSx0JiZ0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cyYmdC5fcmVnaXN0ZXJlZENvbXBvbmVudHMuYWRkKG8pfSx1Ll9zc3JSZWdpc3Rlcj1yKTpzJiYocj1sP2Z1bmN0aW9uKCl7cy5jYWxsKHRoaXMsKHUuZnVuY3Rpb25hbD90aGlzLnBhcmVudDp0aGlzKS4kcm9vdC4kb3B0aW9ucy5zaGFkb3dSb290KX06cykscilpZih1LmZ1bmN0aW9uYWwpe3UuX2luamVjdFN0eWxlcz1yO3ZhciBjPXUucmVuZGVyO3UucmVuZGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHIuY2FsbChlKSxjKHQsZSl9fWVsc2V7dmFyIHA9dS5iZWZvcmVDcmVhdGU7dS5iZWZvcmVDcmVhdGU9cD9bXS5jb25jYXQocCxyKTpbcl19cmV0dXJue2V4cG9ydHM6dCxvcHRpb25zOnV9fXZhciBoPW0oZCxhLFtdLCExLG51bGwsbnVsbCxudWxsKTtoLm9wdGlvbnMuX19maWxlPSJjcmFja1ZpcC9zcmMvbWFpbi52dWUiO3ZhciB2PWguZXhwb3J0cyxmPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuJGNyZWF0ZUVsZW1lbnQsaT10Ll9zZWxmLl9jfHxlO3JldHVybiB0LmlzU2hvdz9pKCJkaXYiLHtyZWY6ImludGFiUGxheWVyIixzdHlsZTp0LmludGFiUGxheWVyU3R5bGUsYXR0cnM6e2lkOiJpbnRhYlBsYXllciJ9fSxbaSgiZGl2Iix7YXR0cnM6e2lkOiJiYXIifSxvbjp7bW91c2Vkb3duOnQubW92ZX19LFtpKCJidXR0b24iLHtvbjp7Y2xpY2s6ZnVuY3Rpb24oZSl7dC5zaXplQ29kZT0ic21hbGwifX19LFt0Ll92KCLwn5eVIildKSx0Ll92KCIgIiksaSgiYnV0dG9uIix7b246e2NsaWNrOmZ1bmN0aW9uKGUpe3Quc2l6ZUNvZGU9Im1lZGl1bSJ9fX0sW3QuX3YoIvCfl5ciKV0pLHQuX3YoIiAiKSxpKCJidXR0b24iLHtvbjp7Y2xpY2s6ZnVuY3Rpb24oZSl7dC5zaXplQ29kZT0ibGFyZ2UifX19LFt0Ll92KCLwn5eWIildKSx0Ll92KCIgIiksaSgiYnV0dG9uIix7b246e2NsaWNrOmZ1bmN0aW9uKGUpe3Quc2l6ZUNvZGU9ImZpbGwifX19LFt0Ll92KCLwn5eUIildKSx0Ll92KCIgIiksaSgiYnV0dG9uIix7b246e2NsaWNrOnQuZnVsbFNjcmVlbn19LFt0Ll92KCLwn6Gn8J+hpSIpXSksdC5fdigiICIpLGkoImJ1dHRvbiIse29uOntjbGljazp0LmNsb3NlUGxheWVyfX0sW3QuX3YoIvCfl5kiKV0pXSksdC5fdigiICIpLHQuc3JjLmxlbmd0aD9pKCJpZnJhbWUiLHthdHRyczp7c3JjOnQuc3JjfX0pOnQuX2UoKV0pOnQuX2UoKX07Zi5fd2l0aFN0cmlwcGVkPSEwO3ZhciBiPXtkYXRhOigpPT4oe3NyYzoiIixpc1Nob3c6MCxwb3NpdGlvbjp7bGVmdDoxMDAsdG9wOjEwMH0sc2l6ZUNvZGU6Im1lZGl1bSIsc2l6ZTp7c21hbGw6NDAsbWVkaXVtOjY1LGxhcmdlOjkwLGZpbGw6MTAwfX0pLG1ldGhvZHM6e21vdmUodCl7bGV0IGU9dGhpcy4kcmVmcy5pbnRhYlBsYXllcixpPXQuY2xpZW50WC1lLm9mZnNldExlZnQsbj10LmNsaWVudFktZS5vZmZzZXRUb3A7ZG9jdW1lbnQub25tb3VzZW1vdmU9dD0+e3RoaXMucG9zaXRpb24ubGVmdD10LmNsaWVudFgtaSx0aGlzLnBvc2l0aW9uLnRvcD10LmNsaWVudFktbn0sZG9jdW1lbnQub25tb3VzZXVwPXQ9PntyKCJpbnRhYlBvc2l0aW9uIix0aGlzLnBvc2l0aW9uKSxkb2N1bWVudC5vbm1vdXNlbW92ZT1udWxsLGRvY3VtZW50Lm9ubW91c2V1cD1udWxsfX0sZnVsbFNjcmVlbigpeyFmdW5jdGlvbih0KXt0LnJlcXVlc3RGdWxsc2NyZWVuP3QucmVxdWVzdEZ1bGxzY3JlZW4oKTp0LndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuP3Qud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4oKTp0Lm1velJlcXVlc3RGdWxsU2NyZWVuP3QubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTp0Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKX0odGhpcy4kcmVmcy5pbnRhYlBsYXllcil9LGNsb3NlUGxheWVyKCl7dGhpcy5zcmM9IiIsdGhpcy5pc1Nob3c9MH19LGNvbXB1dGVkOntpbnRhYlBsYXllclN0eWxlKCl7bGV0IHQsZSxpPSIiO3JldHVybiJmaWxsIj09dGhpcy5zaXplQ29kZT8odD13aW5kb3cuaW5uZXJXaWR0aCsicHgiLGU9d2luZG93LmlubmVySGVpZ2h0KyJweCIsaT0ibGVmdDogMDsgdG9wOiAwOyIpOih0PXRoaXMuc2l6ZVt0aGlzLnNpemVDb2RlXSsiJSIsZT10aGlzLnNpemVbdGhpcy5zaXplQ29kZV0vMTAwKi42KndpbmRvdy5pbm5lcldpZHRoKyJweCIpLGBsZWZ0OiR7dGhpcy5wb3NpdGlvbi5sZWZ0fXB4O3RvcDoke3RoaXMucG9zaXRpb24udG9wfXB4O3dpZHRoOiR7dH07aGVpZ2h0OiR7ZX07JHtpfWB9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy4kbmV4dFRpY2soKCk9Pnt0aGlzLiR0ZWxlLiRvbigidXBkYXRlU3JjIix0PT57dGhpcy5zcmM9dCx0aGlzLmlzU2hvdz0xfSk7bGV0IHQ9dSgiaW50YWJQb3NpdGlvbiIse2xlZnQ6MTAwLHRvcDoxMDB9KTt0aGlzLnBvc2l0aW9uPXR9KX19LF89KGkoNSksbShiLGYsW10sITEsbnVsbCxudWxsLG51bGwpKTtfLm9wdGlvbnMuX19maWxlPSJjcmFja1ZpcC9zcmMvaW50YWJQbGF5ZXIudnVlIjt2YXIgZz1fLmV4cG9ydHMseT1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LiRjcmVhdGVFbGVtZW50LGk9dC5fc2VsZi5fY3x8ZTtyZXR1cm4gdC5pc1Nob3c/aSgiZGl2Iix7YXR0cnM6e2lkOiJlZGl0QXBpcyJ9fSxbaSgiZGl2IixbaSgiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImJpZ2dlciIsb246e2NsaWNrOnQuc2F2ZUFwaXN9fSxbdC5fdigi5L+d5a2YIildKSx0Ll92KCIgIiksaSgiYnV0dG9uIix7c3RhdGljQ2xhc3M6ImJpZ2dlciIsb246e2NsaWNrOnQuY2xvc2VFZGl0fX0sW3QuX3YoIuWFs+mXrSIpXSldKSx0Ll92KCIgIiksdC5fbCh0LmRlZmF1bHRBcGlzLmFwaXMsKGZ1bmN0aW9uKGUsbil7cmV0dXJuIGkoImxpIix7a2V5OiJkZWZhdWx0IitufSxbaSgiaW5wdXQiLHtkaXJlY3RpdmVzOlt7bmFtZToibW9kZWwiLHJhd05hbWU6InYtbW9kZWwiLHZhbHVlOmUubmFtZSxleHByZXNzaW9uOiJhcGkubmFtZSJ9XSxzdGF0aWNDbGFzczoic2hvcnQiLGF0dHJzOntwbGFjZWhvbGRlcjoi5ZCN56ewIn0sZG9tUHJvcHM6e3ZhbHVlOmUubmFtZX0sb246e2NoYW5nZTpmdW5jdGlvbihlKXt0LmlzQ2hhbmdlZD0xfSxpbnB1dDpmdW5jdGlvbihpKXtpLnRhcmdldC5jb21wb3Npbmd8fHQuJHNldChlLCJuYW1lIixpLnRhcmdldC52YWx1ZSl9fX0pLHQuX3YoIiAiKSxpKCJpbnB1dCIse2RpcmVjdGl2ZXM6W3tuYW1lOiJtb2RlbCIscmF3TmFtZToidi1tb2RlbCIsdmFsdWU6ZS51cmwsZXhwcmVzc2lvbjoiYXBpLnVybCJ9XSxzdGF0aWNDbGFzczoibG9uZyIsYXR0cnM6e3BsYWNlaG9sZGVyOiJBUEnlnLDlnYAifSxkb21Qcm9wczp7dmFsdWU6ZS51cmx9LG9uOntjaGFuZ2U6ZnVuY3Rpb24oZSl7dC5pc0NoYW5nZWQ9MX0saW5wdXQ6ZnVuY3Rpb24oaSl7aS50YXJnZXQuY29tcG9zaW5nfHx0LiRzZXQoZSwidXJsIixpLnRhcmdldC52YWx1ZSl9fX0pLHQuX3YoIiAiKSxpKCJpbnB1dCIse2RpcmVjdGl2ZXM6W3tuYW1lOiJtb2RlbCIscmF3TmFtZToidi1tb2RlbCIsdmFsdWU6ZS50aXRsZSxleHByZXNzaW9uOiJhcGkudGl0bGUifV0sc3RhdGljQ2xhc3M6InNob3J0IixhdHRyczp7cGxhY2Vob2xkZXI6IuWkh+azqCJ9LGRvbVByb3BzOnt2YWx1ZTplLnRpdGxlfSxvbjp7Y2hhbmdlOmZ1bmN0aW9uKGUpe3QuaXNDaGFuZ2VkPTF9LGlucHV0OmZ1bmN0aW9uKGkpe2kudGFyZ2V0LmNvbXBvc2luZ3x8dC4kc2V0KGUsInRpdGxlIixpLnRhcmdldC52YWx1ZSl9fX0pLHQuX3YoIiAiKSxpKCJsYWJlbCIsW2koImlucHV0Iix7ZGlyZWN0aXZlczpbe25hbWU6Im1vZGVsIixyYXdOYW1lOiJ2LW1vZGVsIix2YWx1ZTplLmludGFiLGV4cHJlc3Npb246ImFwaS5pbnRhYiJ9XSxhdHRyczp7dHlwZToiY2hlY2tib3gifSxkb21Qcm9wczp7Y2hlY2tlZDpBcnJheS5pc0FycmF5KGUuaW50YWIpP3QuX2koZS5pbnRhYixudWxsKT4tMTplLmludGFifSxvbjp7Y2hhbmdlOmZ1bmN0aW9uKGkpe3ZhciBuPWUuaW50YWIscz1pLnRhcmdldCxhPSEhcy5jaGVja2VkO2lmKEFycmF5LmlzQXJyYXkobikpe3ZhciBvPXQuX2kobixudWxsKTtzLmNoZWNrZWQ/bzwwJiZ0LiRzZXQoZSwiaW50YWIiLG4uY29uY2F0KFtudWxsXSkpOm8+LTEmJnQuJHNldChlLCJpbnRhYiIsbi5zbGljZSgwLG8pLmNvbmNhdChuLnNsaWNlKG8rMSkpKX1lbHNlIHQuJHNldChlLCJpbnRhYiIsYSl9fX0pLGkoInNwYW4iLFt0Ll92KCLpobXlhoXmkq3mlL4iKV0pXSksdC5fdigiICIpLGkoImJ1dHRvbiIse29uOntjbGljazpmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0QXBpKG4sMSl9fX0sW3QuX3YoIua1i+ivlSIpXSksdC5fdigiICIpLGkoImJ1dHRvbiIse29uOntjbGljazpmdW5jdGlvbihlKXtyZXR1cm4gdC5hZGRBcGkobiwxKX19fSxbdC5fdigi5aKe5YqgIildKSx0Ll92KCIgIiksaSgiYnV0dG9uIix7b246e2NsaWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0LmRlbGV0ZUFwaShuLDEpfX19LFt0Ll92KCLliKDpmaQiKV0pXSl9KSksdC5fdigiICIpLGkoImhyIiksdC5fdigiICIpLHQuX2wodC5teUFwaXMuYXBpcywoZnVuY3Rpb24oZSxuKXtyZXR1cm4gaSgibGkiLHtrZXk6Im15IitufSxbaSgiaW5wdXQiLHtkaXJlY3RpdmVzOlt7bmFtZToibW9kZWwiLHJhd05hbWU6InYtbW9kZWwiLHZhbHVlOmUubmFtZSxleHByZXNzaW9uOiJhcGkubmFtZSJ9XSxzdGF0aWNDbGFzczoic2hvcnQiLGF0dHJzOntwbGFjZWhvbGRlcjoi5ZCN56ewIn0sZG9tUHJvcHM6e3ZhbHVlOmUubmFtZX0sb246e2NoYW5nZTpmdW5jdGlvbihlKXt0LmlzQ2hhbmdlZD0xfSxpbnB1dDpmdW5jdGlvbihpKXtpLnRhcmdldC5jb21wb3Npbmd8fHQuJHNldChlLCJuYW1lIixpLnRhcmdldC52YWx1ZSl9fX0pLHQuX3YoIiAiKSxpKCJpbnB1dCIse2RpcmVjdGl2ZXM6W3tuYW1lOiJtb2RlbCIscmF3TmFtZToidi1tb2RlbCIsdmFsdWU6ZS51cmwsZXhwcmVzc2lvbjoiYXBpLnVybCJ9XSxzdGF0aWNDbGFzczoibG9uZyIsYXR0cnM6e3BsYWNlaG9sZGVyOiJBUEnlnLDlnYAifSxkb21Qcm9wczp7dmFsdWU6ZS51cmx9LG9uOntjaGFuZ2U6ZnVuY3Rpb24oZSl7dC5pc0NoYW5nZWQ9MX0saW5wdXQ6ZnVuY3Rpb24oaSl7aS50YXJnZXQuY29tcG9zaW5nfHx0LiRzZXQoZSwidXJsIixpLnRhcmdldC52YWx1ZSl9fX0pLHQuX3YoIiAiKSxpKCJpbnB1dCIse2RpcmVjdGl2ZXM6W3tuYW1lOiJtb2RlbCIscmF3TmFtZToidi1tb2RlbCIsdmFsdWU6ZS50aXRsZSxleHByZXNzaW9uOiJhcGkudGl0bGUifV0sc3RhdGljQ2xhc3M6InNob3J0IixhdHRyczp7cGxhY2Vob2xkZXI6IuWkh+azqCJ9LGRvbVByb3BzOnt2YWx1ZTplLnRpdGxlfSxvbjp7Y2hhbmdlOmZ1bmN0aW9uKGUpe3QuaXNDaGFuZ2VkPTF9LGlucHV0OmZ1bmN0aW9uKGkpe2kudGFyZ2V0LmNvbXBvc2luZ3x8dC4kc2V0KGUsInRpdGxlIixpLnRhcmdldC52YWx1ZSl9fX0pLHQuX3YoIiAiKSxpKCJsYWJlbCIsW2koImlucHV0Iix7ZGlyZWN0aXZlczpbe25hbWU6Im1vZGVsIixyYXdOYW1lOiJ2LW1vZGVsIix2YWx1ZTplLmludGFiLGV4cHJlc3Npb246ImFwaS5pbnRhYiJ9XSxhdHRyczp7dHlwZToiY2hlY2tib3gifSxkb21Qcm9wczp7Y2hlY2tlZDpBcnJheS5pc0FycmF5KGUuaW50YWIpP3QuX2koZS5pbnRhYixudWxsKT4tMTplLmludGFifSxvbjp7Y2hhbmdlOmZ1bmN0aW9uKGkpe3ZhciBuPWUuaW50YWIscz1pLnRhcmdldCxhPSEhcy5jaGVja2VkO2lmKEFycmF5LmlzQXJyYXkobikpe3ZhciBvPXQuX2kobixudWxsKTtzLmNoZWNrZWQ/bzwwJiZ0LiRzZXQoZSwiaW50YWIiLG4uY29uY2F0KFtudWxsXSkpOm8+LTEmJnQuJHNldChlLCJpbnRhYiIsbi5zbGljZSgwLG8pLmNvbmNhdChuLnNsaWNlKG8rMSkpKX1lbHNlIHQuJHNldChlLCJpbnRhYiIsYSl9fX0pLGkoInNwYW4iLFt0Ll92KCLpobXlhoXmkq3mlL4iKV0pXSksdC5fdigiICIpLGkoImJ1dHRvbiIse29uOntjbGljazpmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0QXBpKG4sMCl9fX0sW3QuX3YoIua1i+ivlSIpXSksdC5fdigiICIpLGkoImJ1dHRvbiIse29uOntjbGljazpmdW5jdGlvbihlKXtyZXR1cm4gdC5hZGRBcGkobiwwKX19fSxbdC5fdigi5aKe5YqgIildKSx0Ll92KCIgIiksaSgiYnV0dG9uIix7b246e2NsaWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0LmRlbGV0ZUFwaShuLDApfX19LFt0Ll92KCLliKDpmaQiKV0pXSl9KSldLDIpOnQuX2UoKX07eS5fd2l0aFN0cmlwcGVkPSEwO3ZhciBBPXtkYXRhOigpPT4oe2lzU2hvdzowLGlzQ2hhbmdlZDowLGRlZmF1bHRBcGlzOnthcGlzOltdfSxteUFwaXM6e2FwaXM6W119fSksbWV0aG9kczp7c2F2ZUFwaXMoKXtsZXQgdD10aGlzLmRlZmF1bHRBcGlzLmFwaXMuZmlsdGVyKHQ9PntpZih0LnVybClyZXR1cm4gdH0pLGU9dGhpcy5teUFwaXMuYXBpcy5maWx0ZXIodD0+e2lmKHQudXJsKXJldHVybiB0fSk7cCgiZGVmYXVsdEFwaXMiLHQpLHAoIm15QXBpcyIsZSksdGhpcy4kdGVsZS4kZW1pdCgidXBkYXRlQXBpcyIsMCksc2V0VGltZW91dCgoKT0+e3RoaXMuaXNTaG93PTAsdGhpcy5pc0NoYW5nZWQ9MH0sNTAwKX0sY2xvc2VFZGl0KCl7aWYodGhpcy5pc0NoYW5nZWQpe2lmKCFjb25maXJtKCLmnInmlLnliqjvvIzmnKrkv53lrZjlsLHlhbPpl63lkJc/IikpcmV0dXJuITE7dGhpcy5pc1Nob3c9MCx0aGlzLmlzQ2hhbmdlZD0wfWVsc2UgdGhpcy5pc1Nob3c9MCx0aGlzLmlzQ2hhbmdlZD0wfSx0ZXN0QXBpKHQsZSl7bGV0IGk9ZT90aGlzLmRlZmF1bHRBcGlzLmFwaXNbdF0udXJsOnRoaXMubXlBcGlzLmFwaXNbdF0udXJsO3dpbmRvdy5vcGVuKGkrbG9jYXRpb24uaHJlZiwiX2JsYW5rIil9LGFkZEFwaSh0LGUpe2xldCBpPXtuYW1lOiIiLHVybDoiIix0aXRsZToiIixpbnRhYjowfTtlP3RoaXMuZGVmYXVsdEFwaXMuYXBpcy5zcGxpY2UodCsxLDAsaSk6dGhpcy5teUFwaXMuYXBpcy5zcGxpY2UodCsxLDAsaSl9LGRlbGV0ZUFwaSh0LGUpe2U/dGhpcy5kZWZhdWx0QXBpcy5hcGlzLnNwbGljZSh0LDEpOnRoaXMubXlBcGlzLmFwaXMuc3BsaWNlKHQsMSl9fSxtb3VudGVkOmZ1bmN0aW9uKCl7dGhpcy4kbmV4dFRpY2soKCk9Pnt0aGlzLiR0ZWxlLiRvbigiZWRpdEFwaXMiLHQ9Pnt0aGlzLmRlZmF1bHRBcGlzLmFwaXM9YygiZGVmYXVsdEFwaXMiLHQpO2xldCBlPWMoIm15QXBpcyIsW10pO3RoaXMubXlBcGlzLmFwaXM9ZS5sZW5ndGg/ZTpbe25hbWU6IiIsdXJsOiIiLHRpdGxlOiIiLGludGFiOjB9XSx0aGlzLmlzU2hvdz0xfSl9KX19LHc9KGkoNiksbShBLHksW10sITEsbnVsbCwiNTc0MDE3N2MiLG51bGwpKTt3Lm9wdGlvbnMuX19maWxlPSJjcmFja1ZpcC9zcmMvZWRpdEFwaXMudnVlIjt2YXIgaz13LmV4cG9ydHM7cy5hLnByb3RvdHlwZS4kdGVsZT1uZXcgcy5hO2xldCAkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOyQuaWQ9ImludGFiUGxheWVyRGl2Iixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCQpLG5ldyBzLmEoe2VsOiIjaW50YWJQbGF5ZXJEaXYiLHJlbmRlcjp0PT50KGcpfSk7bGV0IHg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7eC5pZD0iY3JhY2tWSVBTZXQiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoeCksbmV3IHMuYSh7ZWw6IiNjcmFja1ZJUFNldCIscmVuZGVyOnQ9PnQodil9KTtsZXQgUz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtTLmlkPSJlZGl0QXBpcyIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChTKSxuZXcgcy5hKHtlbDoiI2VkaXRBcGlzIixyZW5kZXI6dD0+dChrKX0pfV0pOwpmdW5jdGlvbiBhZGRTdHlsZShjc3NUZXh0KXtsZXQgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLGRvYzthLnRleHRDb250ZW50PWNzc1RleHQsKGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoYSl9CmFkZFN0eWxlKGBib2R5e3BhZGRpbmc6MDttYXJnaW46MH0jY3JhY2tWSVBTZXQgaW5wdXRbdHlwZT1jaGVja2JveF0sI2VkaXRBcGlzIGlucHV0W3R5cGU9Y2hlY2tib3hde2Rpc3BsYXk6bm9uZX0jY3JhY2tWSVBTZXQgaW5wdXRbdHlwZT1jaGVja2JveF0rc3BhbjpiZWZvcmUsI2VkaXRBcGlzIGlucHV0W3R5cGU9Y2hlY2tib3hdK3NwYW46YmVmb3Jle2NvbnRlbnQ6J+KYkic7bWFyZ2luLXJpZ2h0OjVweH0jY3JhY2tWSVBTZXQgaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZCtzcGFuOmJlZm9yZSwjZWRpdEFwaXMgaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZCtzcGFuOmJlZm9yZXtjb250ZW50OifimJEnO21hcmdpbi1yaWdodDo1cHh9I2NyYWNrVklQU2V0LCNlZGl0QXBpcywjaW50YWJQbGF5ZXJ7Zm9udC1mYW1pbHk6IuW+rui9r+mbhem7kSJ9I2NyYWNrVklQU2V0e3otaW5kZXg6OTk5OTk5O3Bvc2l0aW9uOmZpeGVkO2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MzBweCAxNTBweDt3aWR0aDozMHB4O2hlaWdodDo1MHB4O292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjVweCAwIDVweCAwO29wYWNpdHk6LjQ7Zm9udC1zaXplOjEycHh9I2NyYWNrVklQU2V0IGJ1dHRvbntjdXJzb3I6cG9pbnRlcn0jY3JhY2tWSVBTZXQ6aG92ZXJ7d2lkdGg6MTgwcHg7aGVpZ2h0OjMwMHB4O3BhZGRpbmc6NXB4IDVweCA1cHggMDtvcGFjaXR5OjF9I2NyYWNrVklQU2V0ICNuYXZ7ZGlzcGxheTpncmlkO2dyaWQtYXV0by1yb3dzOjUwcHggNTBweCAyMDBweDtncmlkLXJvdy1nYXA6NXB4fSNjcmFja1ZJUFNldCAjbmF2IFtuYW1lPXF1aWNrSnVtcF06YWN0aXZle2N1cnNvcjptb3ZlfSNjcmFja1ZJUFNldCAjbmF2IGJ1dHRvbntiYWNrZ3JvdW5kOiNmZjA7Y29sb3I6cmVkO2ZvbnQtc2l6ZToyMHB4O3BhZGRpbmc6MDtib3JkZXI6MDtjdXJzb3I6cG9pbnRlcjtib3JkZXItcmFkaXVzOjAgNXB4IDVweCAwfSNjcmFja1ZJUFNldCAjbGlzdHtvdmVyZmxvdzphdXRvO21hcmdpbi1sZWZ0OjJweH0jY3JhY2tWSVBTZXQgI2xpc3QgYntkaXNwbGF5OmJsb2NrO2N1cnNvcjpwb2ludGVyO2NvbG9yOiMzYTNhM2E7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc2l6ZToxNHB4O3BhZGRpbmc6NXB4O2JhY2tncm91bmQtY29sb3I6I2ZmZmYwMGNjO2JvcmRlci1ib3R0b206MXB4IGRhc2hlZCAjM2EzYTNhfSNjcmFja1ZJUFNldCAjbGlzdCBiOmJlZm9yZXtjb250ZW50OmF0dHIoZGF0YS1pY29uKTtwYWRkaW5nLXJpZ2h0OjVweH0jY3JhY2tWSVBTZXQgI2xpc3QgYjpmaXJzdC1jaGlsZHtib3JkZXItcmFkaXVzOjVweCA1cHggMCAwfSNjcmFja1ZJUFNldCAjbGlzdCBiOmxhc3QtY2hpbGR7Ym9yZGVyLXJhZGl1czowIDAgNXB4IDVweH0jY3JhY2tWSVBTZXQgI2xpc3QgYjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMzYTNhM2E7Y29sb3I6I2ZmZn1idXR0b257Y3Vyc29yOnBvaW50ZXJ9I2ludGFiUGxheWVye3otaW5kZXg6OTk5OTk4O3Bvc2l0aW9uOmZpeGVkO2Rpc3BsYXk6YmxvY2s7b3ZlcmZsb3c6aGlkZGVuO3Jlc2l6ZTpib3RoIWltcG9ydGFudDtib3gtc2hhZG93OjAgMCA1cHggNXB4ICNmZmZmMzNjYztjb2xvcjojM2EzYTNhIWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbToxMHB4fSNpbnRhYlBsYXllciAjYmFye3Zpc2liaWxpdHk6aGlkZGVuO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCV9I2ludGFiUGxheWVyOmhvdmVyICNiYXJ7dmlzaWJpbGl0eTp2aXNpYmxlO2N1cnNvcjptb3ZlfSNpbnRhYlBsYXllciAjYmFyIGJ1dHRvbntiYWNrZ3JvdW5kOiNmZjA7cGFkZGluZzowIDEwcHg7Zm9udC1zaXplOjIwcHg7bGluZS1oZWlnaHQ6MzBweDtib3JkZXI6MXB4IHNvbGlkICMzYTNhM2F9I2ludGFiUGxheWVyICNiYXIgYnV0dG9uOmhvdmVye2JhY2tncm91bmQ6cmVkfSNpbnRhYlBsYXllciBpZnJhbWV7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXI6MH0jZWRpdEFwaXNbZGF0YS12LTU3NDAxNzdjXXt6LWluZGV4Ojk5OTk5ODtwb3NpdGlvbjpmaXhlZDt0b3A6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6IzNhM2EzYWNjO2NvbG9yOiNmZmY7dGV4dC1hbGlnbjpjZW50ZXI7b3ZlcmZsb3c6YXV0b30jZWRpdEFwaXMgbGlbZGF0YS12LTU3NDAxNzdjXXtsaXN0LXN0eWxlLXR5cGU6bm9uZTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206M3B4fSNlZGl0QXBpcyBpbnB1dFtkYXRhLXYtNTc0MDE3N2Nde2JvcmRlcjoxcHggc29saWQgIzk5OTtwYWRkaW5nOjNweDttYXJnaW4tcmlnaHQ6NXB4O2JvcmRlci1yYWRpdXM6M3B4fSNlZGl0QXBpcyAuc2hvcnRbZGF0YS12LTU3NDAxNzdjXXt3aWR0aDoxMDBweH0jZWRpdEFwaXMgLmxvbmdbZGF0YS12LTU3NDAxNzdjXXt3aWR0aDoyNTBweH0jZWRpdEFwaXMgYnV0dG9uW2RhdGEtdi01NzQwMTc3Y117ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzozcHg7bWFyZ2luOjJweDtjb2xvcjojM2EzYTNhO2JhY2tncm91bmQ6I2ZmMDtib3JkZXI6MH0jZWRpdEFwaXMgLmJpZ2dlcltkYXRhLXYtNTc0MDE3N2Nde2ZvbnQtc2l6ZToyMHB4O3BhZGRpbmc6NXB4IDEwcHh9YCk7Cg==","requires":[{"meta":{"name":"vue.runtime.min.js","url":"https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.runtime.min.js","ts":1591001859142,"mimetype":"text/javascript"},"source":"LyohCiAqIFZ1ZS5qcyB2Mi42LjExCiAqIChjKSAyMDE0LTIwMTkgRXZhbiBZb3UKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9dHx8c2VsZikuVnVlPWUoKX0odGhpcyxmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1PYmplY3QuZnJlZXplKHt9KTtmdW5jdGlvbiBlKHQpe3JldHVybiBudWxsPT10fWZ1bmN0aW9uIG4odCl7cmV0dXJuIG51bGwhPXR9ZnVuY3Rpb24gcih0KXtyZXR1cm4hMD09PXR9ZnVuY3Rpb24gbyh0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHR8fCJudW1iZXIiPT10eXBlb2YgdHx8InN5bWJvbCI9PXR5cGVvZiB0fHwiYm9vbGVhbiI9PXR5cGVvZiB0fWZ1bmN0aW9uIGkodCl7cmV0dXJuIG51bGwhPT10JiYib2JqZWN0Ij09dHlwZW9mIHR9dmFyIGE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBzKHQpe3JldHVybiJbb2JqZWN0IE9iamVjdF0iPT09YS5jYWxsKHQpfWZ1bmN0aW9uIGModCl7dmFyIGU9cGFyc2VGbG9hdChTdHJpbmcodCkpO3JldHVybiBlPj0wJiZNYXRoLmZsb29yKGUpPT09ZSYmaXNGaW5pdGUodCl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gbih0KSYmImZ1bmN0aW9uIj09dHlwZW9mIHQudGhlbiYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2F0Y2h9ZnVuY3Rpb24gbCh0KXtyZXR1cm4gbnVsbD09dD8iIjpBcnJheS5pc0FycmF5KHQpfHxzKHQpJiZ0LnRvU3RyaW5nPT09YT9KU09OLnN0cmluZ2lmeSh0LG51bGwsMik6U3RyaW5nKHQpfWZ1bmN0aW9uIGYodCl7dmFyIGU9cGFyc2VGbG9hdCh0KTtyZXR1cm4gaXNOYU4oZSk/dDplfWZ1bmN0aW9uIGQodCxlKXtmb3IodmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPXQuc3BsaXQoIiwiKSxvPTA7bzxyLmxlbmd0aDtvKyspbltyW29dXT0hMDtyZXR1cm4gZT9mdW5jdGlvbih0KXtyZXR1cm4gblt0LnRvTG93ZXJDYXNlKCldfTpmdW5jdGlvbih0KXtyZXR1cm4gblt0XX19dmFyIHA9ZCgia2V5LHJlZixzbG90LHNsb3Qtc2NvcGUsaXMiKTtmdW5jdGlvbiB2KHQsZSl7aWYodC5sZW5ndGgpe3ZhciBuPXQuaW5kZXhPZihlKTtpZihuPi0xKXJldHVybiB0LnNwbGljZShuLDEpfX12YXIgaD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O2Z1bmN0aW9uIG0odCxlKXtyZXR1cm4gaC5jYWxsKHQsZSl9ZnVuY3Rpb24geSh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gZVtuXXx8KGVbbl09dChuKSl9fXZhciBnPS8tKFx3KS9nLF89eShmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKGcsZnVuY3Rpb24odCxlKXtyZXR1cm4gZT9lLnRvVXBwZXJDYXNlKCk6IiJ9KX0pLGI9eShmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpfSksQz0vXEIoW0EtWl0pL2csJD15KGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoQywiLSQxIikudG9Mb3dlckNhc2UoKX0pO3ZhciB3PUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kP2Z1bmN0aW9uKHQsZSl7cmV0dXJuIHQuYmluZChlKX06ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKG4pe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg7cmV0dXJuIHI/cj4xP3QuYXBwbHkoZSxhcmd1bWVudHMpOnQuY2FsbChlLG4pOnQuY2FsbChlKX1yZXR1cm4gbi5fbGVuZ3RoPXQubGVuZ3RoLG59O2Z1bmN0aW9uIEEodCxlKXtlPWV8fDA7Zm9yKHZhciBuPXQubGVuZ3RoLWUscj1uZXcgQXJyYXkobik7bi0tOylyW25dPXRbbitlXTtyZXR1cm4gcn1mdW5jdGlvbiB4KHQsZSl7Zm9yKHZhciBuIGluIGUpdFtuXT1lW25dO3JldHVybiB0fWZ1bmN0aW9uIE8odCl7Zm9yKHZhciBlPXt9LG49MDtuPHQubGVuZ3RoO24rKyl0W25dJiZ4KGUsdFtuXSk7cmV0dXJuIGV9ZnVuY3Rpb24gayh0LGUsbil7fXZhciBTPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4hMX0sRT1mdW5jdGlvbih0KXtyZXR1cm4gdH07ZnVuY3Rpb24gaih0LGUpe2lmKHQ9PT1lKXJldHVybiEwO3ZhciBuPWkodCkscj1pKGUpO2lmKCFufHwhcilyZXR1cm4hbiYmIXImJlN0cmluZyh0KT09PVN0cmluZyhlKTt0cnl7dmFyIG89QXJyYXkuaXNBcnJheSh0KSxhPUFycmF5LmlzQXJyYXkoZSk7aWYobyYmYSlyZXR1cm4gdC5sZW5ndGg9PT1lLmxlbmd0aCYmdC5ldmVyeShmdW5jdGlvbih0LG4pe3JldHVybiBqKHQsZVtuXSl9KTtpZih0IGluc3RhbmNlb2YgRGF0ZSYmZSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIHQuZ2V0VGltZSgpPT09ZS5nZXRUaW1lKCk7aWYob3x8YSlyZXR1cm4hMTt2YXIgcz1PYmplY3Qua2V5cyh0KSxjPU9iamVjdC5rZXlzKGUpO3JldHVybiBzLmxlbmd0aD09PWMubGVuZ3RoJiZzLmV2ZXJ5KGZ1bmN0aW9uKG4pe3JldHVybiBqKHRbbl0sZVtuXSl9KX1jYXRjaCh0KXtyZXR1cm4hMX19ZnVuY3Rpb24gVCh0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKGoodFtuXSxlKSlyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBJKHQpe3ZhciBlPSExO3JldHVybiBmdW5jdGlvbigpe2V8fChlPSEwLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX19dmFyIEQ9ImRhdGEtc2VydmVyLXJlbmRlcmVkIixOPVsiY29tcG9uZW50IiwiZGlyZWN0aXZlIiwiZmlsdGVyIl0sUD1bImJlZm9yZUNyZWF0ZSIsImNyZWF0ZWQiLCJiZWZvcmVNb3VudCIsIm1vdW50ZWQiLCJiZWZvcmVVcGRhdGUiLCJ1cGRhdGVkIiwiYmVmb3JlRGVzdHJveSIsImRlc3Ryb3llZCIsImFjdGl2YXRlZCIsImRlYWN0aXZhdGVkIiwiZXJyb3JDYXB0dXJlZCIsInNlcnZlclByZWZldGNoIl0sTD17b3B0aW9uTWVyZ2VTdHJhdGVnaWVzOk9iamVjdC5jcmVhdGUobnVsbCksc2lsZW50OiExLHByb2R1Y3Rpb25UaXA6ITEsZGV2dG9vbHM6ITEscGVyZm9ybWFuY2U6ITEsZXJyb3JIYW5kbGVyOm51bGwsd2FybkhhbmRsZXI6bnVsbCxpZ25vcmVkRWxlbWVudHM6W10sa2V5Q29kZXM6T2JqZWN0LmNyZWF0ZShudWxsKSxpc1Jlc2VydmVkVGFnOlMsaXNSZXNlcnZlZEF0dHI6Uyxpc1Vua25vd25FbGVtZW50OlMsZ2V0VGFnTmFtZXNwYWNlOmsscGFyc2VQbGF0Zm9ybVRhZ05hbWU6RSxtdXN0VXNlUHJvcDpTLGFzeW5jOiEwLF9saWZlY3ljbGVIb29rczpQfTtmdW5jdGlvbiBNKHQsZSxuLHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm4sZW51bWVyYWJsZTohIXIsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9dmFyIEY9bmV3IFJlZ0V4cCgiW14iKy9hLXpBLVpcdTAwQjdcdTAwQzAtXHUwMEQ2XHUwMEQ4LVx1MDBGNlx1MDBGOC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjAzRi1cdTIwNDBcdTIwNzAtXHUyMThGXHUyQzAwLVx1MkZFRlx1MzAwMS1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZGRC8uc291cmNlKyIuJF9cXGRdIik7dmFyIFIsVT0iX19wcm90b19fImlue30sSD0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyxWPSJ1bmRlZmluZWQiIT10eXBlb2YgV1hFbnZpcm9ubWVudCYmISFXWEVudmlyb25tZW50LnBsYXRmb3JtLEI9ViYmV1hFbnZpcm9ubWVudC5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLHo9SCYmd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxXPXomJi9tc2llfHRyaWRlbnQvLnRlc3QoeikscT16JiZ6LmluZGV4T2YoIm1zaWUgOS4wIik+MCxLPXomJnouaW5kZXhPZigiZWRnZS8iKT4wLFg9KHomJnouaW5kZXhPZigiYW5kcm9pZCIpLHomJi9pcGhvbmV8aXBhZHxpcG9kfGlvcy8udGVzdCh6KXx8ImlvcyI9PT1CKSxHPSh6JiYvY2hyb21lXC9cZCsvLnRlc3QoeikseiYmL3BoYW50b21qcy8udGVzdCh6KSx6JiZ6Lm1hdGNoKC9maXJlZm94XC8oXGQrKS8pKSxaPXt9LndhdGNoLEo9ITE7aWYoSCl0cnl7dmFyIFE9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KFEsInBhc3NpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtKPSEwfX0pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0ZXN0LXBhc3NpdmUiLG51bGwsUSl9Y2F0Y2godCl7fXZhciBZPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PVImJihSPSFIJiYhViYmInVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWwmJihnbG9iYWwucHJvY2VzcyYmInNlcnZlciI9PT1nbG9iYWwucHJvY2Vzcy5lbnYuVlVFX0VOVikpLFJ9LHR0PUgmJndpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO2Z1bmN0aW9uIGV0KHQpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0JiYvbmF0aXZlIGNvZGUvLnRlc3QodC50b1N0cmluZygpKX12YXIgbnQscnQ9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJmV0KFN5bWJvbCkmJiJ1bmRlZmluZWQiIT10eXBlb2YgUmVmbGVjdCYmZXQoUmVmbGVjdC5vd25LZXlzKTtudD0idW5kZWZpbmVkIiE9dHlwZW9mIFNldCYmZXQoU2V0KT9TZXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5zZXQ9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXR1cm4gdC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiEwPT09dGhpcy5zZXRbdF19LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0aGlzLnNldFt0XT0hMH0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnNldD1PYmplY3QuY3JlYXRlKG51bGwpfSx0fSgpO3ZhciBvdD1rLGl0PTAsYXQ9ZnVuY3Rpb24oKXt0aGlzLmlkPWl0KyssdGhpcy5zdWJzPVtdfTthdC5wcm90b3R5cGUuYWRkU3ViPWZ1bmN0aW9uKHQpe3RoaXMuc3Vicy5wdXNoKHQpfSxhdC5wcm90b3R5cGUucmVtb3ZlU3ViPWZ1bmN0aW9uKHQpe3YodGhpcy5zdWJzLHQpfSxhdC5wcm90b3R5cGUuZGVwZW5kPWZ1bmN0aW9uKCl7YXQudGFyZ2V0JiZhdC50YXJnZXQuYWRkRGVwKHRoaXMpfSxhdC5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuc3Vicy5zbGljZSgpLGU9MCxuPXQubGVuZ3RoO2U8bjtlKyspdFtlXS51cGRhdGUoKX0sYXQudGFyZ2V0PW51bGw7dmFyIHN0PVtdO2Z1bmN0aW9uIGN0KHQpe3N0LnB1c2godCksYXQudGFyZ2V0PXR9ZnVuY3Rpb24gdXQoKXtzdC5wb3AoKSxhdC50YXJnZXQ9c3Rbc3QubGVuZ3RoLTFdfXZhciBsdD1mdW5jdGlvbih0LGUsbixyLG8saSxhLHMpe3RoaXMudGFnPXQsdGhpcy5kYXRhPWUsdGhpcy5jaGlsZHJlbj1uLHRoaXMudGV4dD1yLHRoaXMuZWxtPW8sdGhpcy5ucz12b2lkIDAsdGhpcy5jb250ZXh0PWksdGhpcy5mbkNvbnRleHQ9dm9pZCAwLHRoaXMuZm5PcHRpb25zPXZvaWQgMCx0aGlzLmZuU2NvcGVJZD12b2lkIDAsdGhpcy5rZXk9ZSYmZS5rZXksdGhpcy5jb21wb25lbnRPcHRpb25zPWEsdGhpcy5jb21wb25lbnRJbnN0YW5jZT12b2lkIDAsdGhpcy5wYXJlbnQ9dm9pZCAwLHRoaXMucmF3PSExLHRoaXMuaXNTdGF0aWM9ITEsdGhpcy5pc1Jvb3RJbnNlcnQ9ITAsdGhpcy5pc0NvbW1lbnQ9ITEsdGhpcy5pc0Nsb25lZD0hMSx0aGlzLmlzT25jZT0hMSx0aGlzLmFzeW5jRmFjdG9yeT1zLHRoaXMuYXN5bmNNZXRhPXZvaWQgMCx0aGlzLmlzQXN5bmNQbGFjZWhvbGRlcj0hMX0sZnQ9e2NoaWxkOntjb25maWd1cmFibGU6ITB9fTtmdC5jaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobHQucHJvdG90eXBlLGZ0KTt2YXIgZHQ9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9IiIpO3ZhciBlPW5ldyBsdDtyZXR1cm4gZS50ZXh0PXQsZS5pc0NvbW1lbnQ9ITAsZX07ZnVuY3Rpb24gcHQodCl7cmV0dXJuIG5ldyBsdCh2b2lkIDAsdm9pZCAwLHZvaWQgMCxTdHJpbmcodCkpfWZ1bmN0aW9uIHZ0KHQpe3ZhciBlPW5ldyBsdCh0LnRhZyx0LmRhdGEsdC5jaGlsZHJlbiYmdC5jaGlsZHJlbi5zbGljZSgpLHQudGV4dCx0LmVsbSx0LmNvbnRleHQsdC5jb21wb25lbnRPcHRpb25zLHQuYXN5bmNGYWN0b3J5KTtyZXR1cm4gZS5ucz10Lm5zLGUuaXNTdGF0aWM9dC5pc1N0YXRpYyxlLmtleT10LmtleSxlLmlzQ29tbWVudD10LmlzQ29tbWVudCxlLmZuQ29udGV4dD10LmZuQ29udGV4dCxlLmZuT3B0aW9ucz10LmZuT3B0aW9ucyxlLmZuU2NvcGVJZD10LmZuU2NvcGVJZCxlLmFzeW5jTWV0YT10LmFzeW5jTWV0YSxlLmlzQ2xvbmVkPSEwLGV9dmFyIGh0PUFycmF5LnByb3RvdHlwZSxtdD1PYmplY3QuY3JlYXRlKGh0KTtbInB1c2giLCJwb3AiLCJzaGlmdCIsInVuc2hpZnQiLCJzcGxpY2UiLCJzb3J0IiwicmV2ZXJzZSJdLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9aHRbdF07TShtdCx0LGZ1bmN0aW9uKCl7Zm9yKHZhciBuPVtdLHI9YXJndW1lbnRzLmxlbmd0aDtyLS07KW5bcl09YXJndW1lbnRzW3JdO3ZhciBvLGk9ZS5hcHBseSh0aGlzLG4pLGE9dGhpcy5fX29iX187c3dpdGNoKHQpe2Nhc2UicHVzaCI6Y2FzZSJ1bnNoaWZ0IjpvPW47YnJlYWs7Y2FzZSJzcGxpY2UiOm89bi5zbGljZSgyKX1yZXR1cm4gbyYmYS5vYnNlcnZlQXJyYXkobyksYS5kZXAubm90aWZ5KCksaX0pfSk7dmFyIHl0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG10KSxndD0hMDtmdW5jdGlvbiBfdCh0KXtndD10fXZhciBidD1mdW5jdGlvbih0KXt2YXIgZTt0aGlzLnZhbHVlPXQsdGhpcy5kZXA9bmV3IGF0LHRoaXMudm1Db3VudD0wLE0odCwiX19vYl9fIix0aGlzKSxBcnJheS5pc0FycmF5KHQpPyhVPyhlPW10LHQuX19wcm90b19fPWUpOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MCxvPW4ubGVuZ3RoO3I8bztyKyspe3ZhciBpPW5bcl07TSh0LGksZVtpXSl9fSh0LG10LHl0KSx0aGlzLm9ic2VydmVBcnJheSh0KSk6dGhpcy53YWxrKHQpfTtmdW5jdGlvbiBDdCh0LGUpe3ZhciBuO2lmKGkodCkmJiEodCBpbnN0YW5jZW9mIGx0KSlyZXR1cm4gbSh0LCJfX29iX18iKSYmdC5fX29iX18gaW5zdGFuY2VvZiBidD9uPXQuX19vYl9fOmd0JiYhWSgpJiYoQXJyYXkuaXNBcnJheSh0KXx8cyh0KSkmJk9iamVjdC5pc0V4dGVuc2libGUodCkmJiF0Ll9pc1Z1ZSYmKG49bmV3IGJ0KHQpKSxlJiZuJiZuLnZtQ291bnQrKyxufWZ1bmN0aW9uICR0KHQsZSxuLHIsbyl7dmFyIGk9bmV3IGF0LGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpO2lmKCFhfHwhMSE9PWEuY29uZmlndXJhYmxlKXt2YXIgcz1hJiZhLmdldCxjPWEmJmEuc2V0O3MmJiFjfHwyIT09YXJndW1lbnRzLmxlbmd0aHx8KG49dFtlXSk7dmFyIHU9IW8mJkN0KG4pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3ZhciBlPXM/cy5jYWxsKHQpOm47cmV0dXJuIGF0LnRhcmdldCYmKGkuZGVwZW5kKCksdSYmKHUuZGVwLmRlcGVuZCgpLEFycmF5LmlzQXJyYXkoZSkmJmZ1bmN0aW9uIHQoZSl7Zm9yKHZhciBuPXZvaWQgMCxyPTAsbz1lLmxlbmd0aDtyPG87cisrKShuPWVbcl0pJiZuLl9fb2JfXyYmbi5fX29iX18uZGVwLmRlcGVuZCgpLEFycmF5LmlzQXJyYXkobikmJnQobil9KGUpKSksZX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciByPXM/cy5jYWxsKHQpOm47ZT09PXJ8fGUhPWUmJnIhPXJ8fHMmJiFjfHwoYz9jLmNhbGwodCxlKTpuPWUsdT0hbyYmQ3QoZSksaS5ub3RpZnkoKSl9fSl9fWZ1bmN0aW9uIHd0KHQsZSxuKXtpZihBcnJheS5pc0FycmF5KHQpJiZjKGUpKXJldHVybiB0Lmxlbmd0aD1NYXRoLm1heCh0Lmxlbmd0aCxlKSx0LnNwbGljZShlLDEsbiksbjtpZihlIGluIHQmJiEoZSBpbiBPYmplY3QucHJvdG90eXBlKSlyZXR1cm4gdFtlXT1uLG47dmFyIHI9dC5fX29iX187cmV0dXJuIHQuX2lzVnVlfHxyJiZyLnZtQ291bnQ/bjpyPygkdChyLnZhbHVlLGUsbiksci5kZXAubm90aWZ5KCksbik6KHRbZV09bixuKX1mdW5jdGlvbiBBdCh0LGUpe2lmKEFycmF5LmlzQXJyYXkodCkmJmMoZSkpdC5zcGxpY2UoZSwxKTtlbHNle3ZhciBuPXQuX19vYl9fO3QuX2lzVnVlfHxuJiZuLnZtQ291bnR8fG0odCxlKSYmKGRlbGV0ZSB0W2VdLG4mJm4uZGVwLm5vdGlmeSgpKX19YnQucHJvdG90eXBlLndhbGs9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPU9iamVjdC5rZXlzKHQpLG49MDtuPGUubGVuZ3RoO24rKykkdCh0LGVbbl0pfSxidC5wcm90b3R5cGUub2JzZXJ2ZUFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dC5sZW5ndGg7ZTxuO2UrKylDdCh0W2VdKX07dmFyIHh0PUwub3B0aW9uTWVyZ2VTdHJhdGVnaWVzO2Z1bmN0aW9uIE90KHQsZSl7aWYoIWUpcmV0dXJuIHQ7Zm9yKHZhciBuLHIsbyxpPXJ0P1JlZmxlY3Qub3duS2V5cyhlKTpPYmplY3Qua2V5cyhlKSxhPTA7YTxpLmxlbmd0aDthKyspIl9fb2JfXyIhPT0obj1pW2FdKSYmKHI9dFtuXSxvPWVbbl0sbSh0LG4pP3IhPT1vJiZzKHIpJiZzKG8pJiZPdChyLG8pOnd0KHQsbixvKSk7cmV0dXJuIHR9ZnVuY3Rpb24ga3QodCxlLG4pe3JldHVybiBuP2Z1bmN0aW9uKCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKG4sbik6ZSxvPSJmdW5jdGlvbiI9PXR5cGVvZiB0P3QuY2FsbChuLG4pOnQ7cmV0dXJuIHI/T3QocixvKTpvfTplP3Q/ZnVuY3Rpb24oKXtyZXR1cm4gT3QoImZ1bmN0aW9uIj09dHlwZW9mIGU/ZS5jYWxsKHRoaXMsdGhpcyk6ZSwiZnVuY3Rpb24iPT10eXBlb2YgdD90LmNhbGwodGhpcyx0aGlzKTp0KX06ZTp0fWZ1bmN0aW9uIFN0KHQsZSl7dmFyIG49ZT90P3QuY29uY2F0KGUpOkFycmF5LmlzQXJyYXkoZSk/ZTpbZV06dDtyZXR1cm4gbj9mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKS0xPT09ZS5pbmRleE9mKHRbbl0pJiZlLnB1c2godFtuXSk7cmV0dXJuIGV9KG4pOm59ZnVuY3Rpb24gRXQodCxlLG4scil7dmFyIG89T2JqZWN0LmNyZWF0ZSh0fHxudWxsKTtyZXR1cm4gZT94KG8sZSk6b314dC5kYXRhPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbj9rdCh0LGUsbik6ZSYmImZ1bmN0aW9uIiE9dHlwZW9mIGU/dDprdCh0LGUpfSxQLmZvckVhY2goZnVuY3Rpb24odCl7eHRbdF09U3R9KSxOLmZvckVhY2goZnVuY3Rpb24odCl7eHRbdCsicyJdPUV0fSkseHQud2F0Y2g9ZnVuY3Rpb24odCxlLG4scil7aWYodD09PVomJih0PXZvaWQgMCksZT09PVomJihlPXZvaWQgMCksIWUpcmV0dXJuIE9iamVjdC5jcmVhdGUodHx8bnVsbCk7aWYoIXQpcmV0dXJuIGU7dmFyIG89e307Zm9yKHZhciBpIGluIHgobyx0KSxlKXt2YXIgYT1vW2ldLHM9ZVtpXTthJiYhQXJyYXkuaXNBcnJheShhKSYmKGE9W2FdKSxvW2ldPWE/YS5jb25jYXQocyk6QXJyYXkuaXNBcnJheShzKT9zOltzXX1yZXR1cm4gb30seHQucHJvcHM9eHQubWV0aG9kcz14dC5pbmplY3Q9eHQuY29tcHV0ZWQ9ZnVuY3Rpb24odCxlLG4scil7aWYoIXQpcmV0dXJuIGU7dmFyIG89T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4geChvLHQpLGUmJngobyxlKSxvfSx4dC5wcm92aWRlPWt0O3ZhciBqdD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lP3Q6ZX07ZnVuY3Rpb24gVHQodCxlLG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBlJiYoZT1lLm9wdGlvbnMpLGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wcm9wcztpZihuKXt2YXIgcixvLGk9e307aWYoQXJyYXkuaXNBcnJheShuKSlmb3Iocj1uLmxlbmd0aDtyLS07KSJzdHJpbmciPT10eXBlb2Yobz1uW3JdKSYmKGlbXyhvKV09e3R5cGU6bnVsbH0pO2Vsc2UgaWYocyhuKSlmb3IodmFyIGEgaW4gbilvPW5bYV0saVtfKGEpXT1zKG8pP286e3R5cGU6b307dC5wcm9wcz1pfX0oZSksZnVuY3Rpb24odCxlKXt2YXIgbj10LmluamVjdDtpZihuKXt2YXIgcj10LmluamVjdD17fTtpZihBcnJheS5pc0FycmF5KG4pKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXJbbltvXV09e2Zyb206bltvXX07ZWxzZSBpZihzKG4pKWZvcih2YXIgaSBpbiBuKXt2YXIgYT1uW2ldO3JbaV09cyhhKT94KHtmcm9tOml9LGEpOntmcm9tOmF9fX19KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZGlyZWN0aXZlcztpZihlKWZvcih2YXIgbiBpbiBlKXt2YXIgcj1lW25dOyJmdW5jdGlvbiI9PXR5cGVvZiByJiYoZVtuXT17YmluZDpyLHVwZGF0ZTpyfSl9fShlKSwhZS5fYmFzZSYmKGUuZXh0ZW5kcyYmKHQ9VHQodCxlLmV4dGVuZHMsbikpLGUubWl4aW5zKSlmb3IodmFyIHI9MCxvPWUubWl4aW5zLmxlbmd0aDtyPG87cisrKXQ9VHQodCxlLm1peGluc1tyXSxuKTt2YXIgaSxhPXt9O2ZvcihpIGluIHQpYyhpKTtmb3IoaSBpbiBlKW0odCxpKXx8YyhpKTtmdW5jdGlvbiBjKHIpe3ZhciBvPXh0W3JdfHxqdDthW3JdPW8odFtyXSxlW3JdLG4scil9cmV0dXJuIGF9ZnVuY3Rpb24gSXQodCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiBuKXt2YXIgbz10W2VdO2lmKG0obyxuKSlyZXR1cm4gb1tuXTt2YXIgaT1fKG4pO2lmKG0obyxpKSlyZXR1cm4gb1tpXTt2YXIgYT1iKGkpO3JldHVybiBtKG8sYSk/b1thXTpvW25dfHxvW2ldfHxvW2FdfX1mdW5jdGlvbiBEdCh0LGUsbixyKXt2YXIgbz1lW3RdLGk9IW0obix0KSxhPW5bdF0scz1MdChCb29sZWFuLG8udHlwZSk7aWYocz4tMSlpZihpJiYhbShvLCJkZWZhdWx0IikpYT0hMTtlbHNlIGlmKCIiPT09YXx8YT09PSQodCkpe3ZhciBjPUx0KFN0cmluZyxvLnR5cGUpOyhjPDB8fHM8YykmJihhPSEwKX1pZih2b2lkIDA9PT1hKXthPWZ1bmN0aW9uKHQsZSxuKXtpZighbShlLCJkZWZhdWx0IikpcmV0dXJuO3ZhciByPWUuZGVmYXVsdDtpZih0JiZ0LiRvcHRpb25zLnByb3BzRGF0YSYmdm9pZCAwPT09dC4kb3B0aW9ucy5wcm9wc0RhdGFbbl0mJnZvaWQgMCE9PXQuX3Byb3BzW25dKXJldHVybiB0Ll9wcm9wc1tuXTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgciYmIkZ1bmN0aW9uIiE9PU50KGUudHlwZSk/ci5jYWxsKHQpOnJ9KHIsbyx0KTt2YXIgdT1ndDtfdCghMCksQ3QoYSksX3QodSl9cmV0dXJuIGF9ZnVuY3Rpb24gTnQodCl7dmFyIGU9dCYmdC50b1N0cmluZygpLm1hdGNoKC9eXHMqZnVuY3Rpb24gKFx3KykvKTtyZXR1cm4gZT9lWzFdOiIifWZ1bmN0aW9uIFB0KHQsZSl7cmV0dXJuIE50KHQpPT09TnQoZSl9ZnVuY3Rpb24gTHQodCxlKXtpZighQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gUHQoZSx0KT8wOi0xO2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKylpZihQdChlW25dLHQpKXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIE10KHQsZSxuKXtjdCgpO3RyeXtpZihlKWZvcih2YXIgcj1lO3I9ci4kcGFyZW50Oyl7dmFyIG89ci4kb3B0aW9ucy5lcnJvckNhcHR1cmVkO2lmKG8pZm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspdHJ5e2lmKCExPT09b1tpXS5jYWxsKHIsdCxlLG4pKXJldHVybn1jYXRjaCh0KXtSdCh0LHIsImVycm9yQ2FwdHVyZWQgaG9vayIpfX1SdCh0LGUsbil9ZmluYWxseXt1dCgpfX1mdW5jdGlvbiBGdCh0LGUsbixyLG8pe3ZhciBpO3RyeXsoaT1uP3QuYXBwbHkoZSxuKTp0LmNhbGwoZSkpJiYhaS5faXNWdWUmJnUoaSkmJiFpLl9oYW5kbGVkJiYoaS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gTXQodCxyLG8rIiAoUHJvbWlzZS9hc3luYykiKX0pLGkuX2hhbmRsZWQ9ITApfWNhdGNoKHQpe010KHQscixvKX1yZXR1cm4gaX1mdW5jdGlvbiBSdCh0LGUsbil7aWYoTC5lcnJvckhhbmRsZXIpdHJ5e3JldHVybiBMLmVycm9ySGFuZGxlci5jYWxsKG51bGwsdCxlLG4pfWNhdGNoKGUpe2UhPT10JiZVdChlLG51bGwsImNvbmZpZy5lcnJvckhhbmRsZXIiKX1VdCh0LGUsbil9ZnVuY3Rpb24gVXQodCxlLG4pe2lmKCFIJiYhVnx8InVuZGVmaW5lZCI9PXR5cGVvZiBjb25zb2xlKXRocm93IHQ7Y29uc29sZS5lcnJvcih0KX12YXIgSHQsVnQ9ITEsQnQ9W10senQ9ITE7ZnVuY3Rpb24gV3QoKXt6dD0hMTt2YXIgdD1CdC5zbGljZSgwKTtCdC5sZW5ndGg9MDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl0W2VdKCl9aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlJiZldChQcm9taXNlKSl7dmFyIHF0PVByb21pc2UucmVzb2x2ZSgpO0h0PWZ1bmN0aW9uKCl7cXQudGhlbihXdCksWCYmc2V0VGltZW91dChrKX0sVnQ9ITB9ZWxzZSBpZihXfHwidW5kZWZpbmVkIj09dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXJ8fCFldChNdXRhdGlvbk9ic2VydmVyKSYmIltvYmplY3QgTXV0YXRpb25PYnNlcnZlckNvbnN0cnVjdG9yXSIhPT1NdXRhdGlvbk9ic2VydmVyLnRvU3RyaW5nKCkpSHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBzZXRJbW1lZGlhdGUmJmV0KHNldEltbWVkaWF0ZSk/ZnVuY3Rpb24oKXtzZXRJbW1lZGlhdGUoV3QpfTpmdW5jdGlvbigpe3NldFRpbWVvdXQoV3QsMCl9O2Vsc2V7dmFyIEt0PTEsWHQ9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoV3QpLEd0PWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFN0cmluZyhLdCkpO1h0Lm9ic2VydmUoR3Qse2NoYXJhY3RlckRhdGE6ITB9KSxIdD1mdW5jdGlvbigpe0t0PShLdCsxKSUyLEd0LmRhdGE9U3RyaW5nKEt0KX0sVnQ9ITB9ZnVuY3Rpb24gWnQodCxlKXt2YXIgbjtpZihCdC5wdXNoKGZ1bmN0aW9uKCl7aWYodCl0cnl7dC5jYWxsKGUpfWNhdGNoKHQpe010KHQsZSwibmV4dFRpY2siKX1lbHNlIG4mJm4oZSl9KSx6dHx8KHp0PSEwLEh0KCkpLCF0JiYidW5kZWZpbmVkIiE9dHlwZW9mIFByb21pc2UpcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe249dH0pfXZhciBKdD1uZXcgbnQ7ZnVuY3Rpb24gUXQodCl7IWZ1bmN0aW9uIHQoZSxuKXt2YXIgcixvO3ZhciBhPUFycmF5LmlzQXJyYXkoZSk7aWYoIWEmJiFpKGUpfHxPYmplY3QuaXNGcm96ZW4oZSl8fGUgaW5zdGFuY2VvZiBsdClyZXR1cm47aWYoZS5fX29iX18pe3ZhciBzPWUuX19vYl9fLmRlcC5pZDtpZihuLmhhcyhzKSlyZXR1cm47bi5hZGQocyl9aWYoYSlmb3Iocj1lLmxlbmd0aDtyLS07KXQoZVtyXSxuKTtlbHNlIGZvcihvPU9iamVjdC5rZXlzKGUpLHI9by5sZW5ndGg7ci0tOyl0KGVbb1tyXV0sbil9KHQsSnQpLEp0LmNsZWFyKCl9dmFyIFl0PXkoZnVuY3Rpb24odCl7dmFyIGU9IiYiPT09dC5jaGFyQXQoMCksbj0ifiI9PT0odD1lP3Quc2xpY2UoMSk6dCkuY2hhckF0KDApLHI9IiEiPT09KHQ9bj90LnNsaWNlKDEpOnQpLmNoYXJBdCgwKTtyZXR1cm57bmFtZTp0PXI/dC5zbGljZSgxKTp0LG9uY2U6bixjYXB0dXJlOnIscGFzc2l2ZTplfX0pO2Z1bmN0aW9uIHRlKHQsZSl7ZnVuY3Rpb24gbigpe3ZhciB0PWFyZ3VtZW50cyxyPW4uZm5zO2lmKCFBcnJheS5pc0FycmF5KHIpKXJldHVybiBGdChyLG51bGwsYXJndW1lbnRzLGUsInYtb24gaGFuZGxlciIpO2Zvcih2YXIgbz1yLnNsaWNlKCksaT0wO2k8by5sZW5ndGg7aSsrKUZ0KG9baV0sbnVsbCx0LGUsInYtb24gaGFuZGxlciIpfXJldHVybiBuLmZucz10LG59ZnVuY3Rpb24gZWUodCxuLG8saSxhLHMpe3ZhciBjLHUsbCxmO2ZvcihjIGluIHQpdT10W2NdLGw9bltjXSxmPVl0KGMpLGUodSl8fChlKGwpPyhlKHUuZm5zKSYmKHU9dFtjXT10ZSh1LHMpKSxyKGYub25jZSkmJih1PXRbY109YShmLm5hbWUsdSxmLmNhcHR1cmUpKSxvKGYubmFtZSx1LGYuY2FwdHVyZSxmLnBhc3NpdmUsZi5wYXJhbXMpKTp1IT09bCYmKGwuZm5zPXUsdFtjXT1sKSk7Zm9yKGMgaW4gbillKHRbY10pJiZpKChmPVl0KGMpKS5uYW1lLG5bY10sZi5jYXB0dXJlKX1mdW5jdGlvbiBuZSh0LG8saSl7dmFyIGE7dCBpbnN0YW5jZW9mIGx0JiYodD10LmRhdGEuaG9va3x8KHQuZGF0YS5ob29rPXt9KSk7dmFyIHM9dFtvXTtmdW5jdGlvbiBjKCl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdihhLmZucyxjKX1lKHMpP2E9dGUoW2NdKTpuKHMuZm5zKSYmcihzLm1lcmdlZCk/KGE9cykuZm5zLnB1c2goYyk6YT10ZShbcyxjXSksYS5tZXJnZWQ9ITAsdFtvXT1hfWZ1bmN0aW9uIHJlKHQsZSxyLG8saSl7aWYobihlKSl7aWYobShlLHIpKXJldHVybiB0W3JdPWVbcl0saXx8ZGVsZXRlIGVbcl0sITA7aWYobShlLG8pKXJldHVybiB0W3JdPWVbb10saXx8ZGVsZXRlIGVbb10sITB9cmV0dXJuITF9ZnVuY3Rpb24gb2UodCl7cmV0dXJuIG8odCk/W3B0KHQpXTpBcnJheS5pc0FycmF5KHQpP2Z1bmN0aW9uIHQoaSxhKXt2YXIgcz1bXTt2YXIgYyx1LGwsZjtmb3IoYz0wO2M8aS5sZW5ndGg7YysrKWUodT1pW2NdKXx8ImJvb2xlYW4iPT10eXBlb2YgdXx8KGw9cy5sZW5ndGgtMSxmPXNbbF0sQXJyYXkuaXNBcnJheSh1KT91Lmxlbmd0aD4wJiYoaWUoKHU9dCh1LChhfHwiIikrIl8iK2MpKVswXSkmJmllKGYpJiYoc1tsXT1wdChmLnRleHQrdVswXS50ZXh0KSx1LnNoaWZ0KCkpLHMucHVzaC5hcHBseShzLHUpKTpvKHUpP2llKGYpP3NbbF09cHQoZi50ZXh0K3UpOiIiIT09dSYmcy5wdXNoKHB0KHUpKTppZSh1KSYmaWUoZik/c1tsXT1wdChmLnRleHQrdS50ZXh0KToocihpLl9pc1ZMaXN0KSYmbih1LnRhZykmJmUodS5rZXkpJiZuKGEpJiYodS5rZXk9Il9fdmxpc3QiK2ErIl8iK2MrIl9fIikscy5wdXNoKHUpKSk7cmV0dXJuIHN9KHQpOnZvaWQgMH1mdW5jdGlvbiBpZSh0KXtyZXR1cm4gbih0KSYmbih0LnRleHQpJiYhMT09PXQuaXNDb21tZW50fWZ1bmN0aW9uIGFlKHQsZSl7aWYodCl7Zm9yKHZhciBuPU9iamVjdC5jcmVhdGUobnVsbCkscj1ydD9SZWZsZWN0Lm93bktleXModCk6T2JqZWN0LmtleXModCksbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2lmKCJfX29iX18iIT09aSl7Zm9yKHZhciBhPXRbaV0uZnJvbSxzPWU7czspe2lmKHMuX3Byb3ZpZGVkJiZtKHMuX3Byb3ZpZGVkLGEpKXtuW2ldPXMuX3Byb3ZpZGVkW2FdO2JyZWFrfXM9cy4kcGFyZW50fWlmKCFzJiYiZGVmYXVsdCJpbiB0W2ldKXt2YXIgYz10W2ldLmRlZmF1bHQ7bltpXT0iZnVuY3Rpb24iPT10eXBlb2YgYz9jLmNhbGwoZSk6Y319fXJldHVybiBufX1mdW5jdGlvbiBzZSh0LGUpe2lmKCF0fHwhdC5sZW5ndGgpcmV0dXJue307Zm9yKHZhciBuPXt9LHI9MCxvPXQubGVuZ3RoO3I8bztyKyspe3ZhciBpPXRbcl0sYT1pLmRhdGE7aWYoYSYmYS5hdHRycyYmYS5hdHRycy5zbG90JiZkZWxldGUgYS5hdHRycy5zbG90LGkuY29udGV4dCE9PWUmJmkuZm5Db250ZXh0IT09ZXx8IWF8fG51bGw9PWEuc2xvdCkobi5kZWZhdWx0fHwobi5kZWZhdWx0PVtdKSkucHVzaChpKTtlbHNle3ZhciBzPWEuc2xvdCxjPW5bc118fChuW3NdPVtdKTsidGVtcGxhdGUiPT09aS50YWc/Yy5wdXNoLmFwcGx5KGMsaS5jaGlsZHJlbnx8W10pOmMucHVzaChpKX19Zm9yKHZhciB1IGluIG4pblt1XS5ldmVyeShjZSkmJmRlbGV0ZSBuW3VdO3JldHVybiBufWZ1bmN0aW9uIGNlKHQpe3JldHVybiB0LmlzQ29tbWVudCYmIXQuYXN5bmNGYWN0b3J5fHwiICI9PT10LnRleHR9ZnVuY3Rpb24gdWUoZSxuLHIpe3ZhciBvLGk9T2JqZWN0LmtleXMobikubGVuZ3RoPjAsYT1lPyEhZS4kc3RhYmxlOiFpLHM9ZSYmZS4ka2V5O2lmKGUpe2lmKGUuX25vcm1hbGl6ZWQpcmV0dXJuIGUuX25vcm1hbGl6ZWQ7aWYoYSYmciYmciE9PXQmJnM9PT1yLiRrZXkmJiFpJiYhci4kaGFzTm9ybWFsKXJldHVybiByO2Zvcih2YXIgYyBpbiBvPXt9LGUpZVtjXSYmIiQiIT09Y1swXSYmKG9bY109bGUobixjLGVbY10pKX1lbHNlIG89e307Zm9yKHZhciB1IGluIG4pdSBpbiBvfHwob1t1XT1mZShuLHUpKTtyZXR1cm4gZSYmT2JqZWN0LmlzRXh0ZW5zaWJsZShlKSYmKGUuX25vcm1hbGl6ZWQ9byksTShvLCIkc3RhYmxlIixhKSxNKG8sIiRrZXkiLHMpLE0obywiJGhhc05vcm1hbCIsaSksb31mdW5jdGlvbiBsZSh0LGUsbil7dmFyIHI9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoP24uYXBwbHkobnVsbCxhcmd1bWVudHMpOm4oe30pO3JldHVybih0PXQmJiJvYmplY3QiPT10eXBlb2YgdCYmIUFycmF5LmlzQXJyYXkodCk/W3RdOm9lKHQpKSYmKDA9PT10Lmxlbmd0aHx8MT09PXQubGVuZ3RoJiZ0WzBdLmlzQ29tbWVudCk/dm9pZCAwOnR9O3JldHVybiBuLnByb3h5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtnZXQ6cixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHJ9ZnVuY3Rpb24gZmUodCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdFtlXX19ZnVuY3Rpb24gZGUodCxlKXt2YXIgcixvLGEscyxjO2lmKEFycmF5LmlzQXJyYXkodCl8fCJzdHJpbmciPT10eXBlb2YgdClmb3Iocj1uZXcgQXJyYXkodC5sZW5ndGgpLG89MCxhPXQubGVuZ3RoO288YTtvKyspcltvXT1lKHRbb10sbyk7ZWxzZSBpZigibnVtYmVyIj09dHlwZW9mIHQpZm9yKHI9bmV3IEFycmF5KHQpLG89MDtvPHQ7bysrKXJbb109ZShvKzEsbyk7ZWxzZSBpZihpKHQpKWlmKHJ0JiZ0W1N5bWJvbC5pdGVyYXRvcl0pe3I9W107Zm9yKHZhciB1PXRbU3ltYm9sLml0ZXJhdG9yXSgpLGw9dS5uZXh0KCk7IWwuZG9uZTspci5wdXNoKGUobC52YWx1ZSxyLmxlbmd0aCkpLGw9dS5uZXh0KCl9ZWxzZSBmb3Iocz1PYmplY3Qua2V5cyh0KSxyPW5ldyBBcnJheShzLmxlbmd0aCksbz0wLGE9cy5sZW5ndGg7bzxhO28rKyljPXNbb10scltvXT1lKHRbY10sYyxvKTtyZXR1cm4gbihyKXx8KHI9W10pLHIuX2lzVkxpc3Q9ITAscn1mdW5jdGlvbiBwZSh0LGUsbixyKXt2YXIgbyxpPXRoaXMuJHNjb3BlZFNsb3RzW3RdO2k/KG49bnx8e30sciYmKG49eCh4KHt9LHIpLG4pKSxvPWkobil8fGUpOm89dGhpcy4kc2xvdHNbdF18fGU7dmFyIGE9biYmbi5zbG90O3JldHVybiBhP3RoaXMuJGNyZWF0ZUVsZW1lbnQoInRlbXBsYXRlIix7c2xvdDphfSxvKTpvfWZ1bmN0aW9uIHZlKHQpe3JldHVybiBJdCh0aGlzLiRvcHRpb25zLCJmaWx0ZXJzIix0KXx8RX1mdW5jdGlvbiBoZSh0LGUpe3JldHVybiBBcnJheS5pc0FycmF5KHQpPy0xPT09dC5pbmRleE9mKGUpOnQhPT1lfWZ1bmN0aW9uIG1lKHQsZSxuLHIsbyl7dmFyIGk9TC5rZXlDb2Rlc1tlXXx8bjtyZXR1cm4gbyYmciYmIUwua2V5Q29kZXNbZV0/aGUobyxyKTppP2hlKGksdCk6cj8kKHIpIT09ZTp2b2lkIDB9ZnVuY3Rpb24geWUodCxlLG4scixvKXtpZihuKWlmKGkobikpe3ZhciBhO0FycmF5LmlzQXJyYXkobikmJihuPU8obikpO3ZhciBzPWZ1bmN0aW9uKGkpe2lmKCJjbGFzcyI9PT1pfHwic3R5bGUiPT09aXx8cChpKSlhPXQ7ZWxzZXt2YXIgcz10LmF0dHJzJiZ0LmF0dHJzLnR5cGU7YT1yfHxMLm11c3RVc2VQcm9wKGUscyxpKT90LmRvbVByb3BzfHwodC5kb21Qcm9wcz17fSk6dC5hdHRyc3x8KHQuYXR0cnM9e30pfXZhciBjPV8oaSksdT0kKGkpO2MgaW4gYXx8dSBpbiBhfHwoYVtpXT1uW2ldLG8mJigodC5vbnx8KHQub249e30pKVsidXBkYXRlOiIraV09ZnVuY3Rpb24odCl7bltpXT10fSkpfTtmb3IodmFyIGMgaW4gbilzKGMpfWVsc2U7cmV0dXJuIHR9ZnVuY3Rpb24gZ2UodCxlKXt2YXIgbj10aGlzLl9zdGF0aWNUcmVlc3x8KHRoaXMuX3N0YXRpY1RyZWVzPVtdKSxyPW5bdF07cmV0dXJuIHImJiFlP3I6KGJlKHI9blt0XT10aGlzLiRvcHRpb25zLnN0YXRpY1JlbmRlckZuc1t0XS5jYWxsKHRoaXMuX3JlbmRlclByb3h5LG51bGwsdGhpcyksIl9fc3RhdGljX18iK3QsITEpLHIpfWZ1bmN0aW9uIF9lKHQsZSxuKXtyZXR1cm4gYmUodCwiX19vbmNlX18iK2UrKG4/Il8iK246IiIpLCEwKSx0fWZ1bmN0aW9uIGJlKHQsZSxuKXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXRbcl0mJiJzdHJpbmciIT10eXBlb2YgdFtyXSYmQ2UodFtyXSxlKyJfIityLG4pO2Vsc2UgQ2UodCxlLG4pfWZ1bmN0aW9uIENlKHQsZSxuKXt0LmlzU3RhdGljPSEwLHQua2V5PWUsdC5pc09uY2U9bn1mdW5jdGlvbiAkZSh0LGUpe2lmKGUpaWYocyhlKSl7dmFyIG49dC5vbj10Lm9uP3goe30sdC5vbik6e307Zm9yKHZhciByIGluIGUpe3ZhciBvPW5bcl0saT1lW3JdO25bcl09bz9bXS5jb25jYXQobyxpKTppfX1lbHNlO3JldHVybiB0fWZ1bmN0aW9uIHdlKHQsZSxuLHIpe2U9ZXx8eyRzdGFibGU6IW59O2Zvcih2YXIgbz0wO288dC5sZW5ndGg7bysrKXt2YXIgaT10W29dO0FycmF5LmlzQXJyYXkoaSk/d2UoaSxlLG4pOmkmJihpLnByb3h5JiYoaS5mbi5wcm94eT0hMCksZVtpLmtleV09aS5mbil9cmV0dXJuIHImJihlLiRrZXk9ciksZX1mdW5jdGlvbiBBZSh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bis9Mil7dmFyIHI9ZVtuXTsic3RyaW5nIj09dHlwZW9mIHImJnImJih0W2Vbbl1dPWVbbisxXSl9cmV0dXJuIHR9ZnVuY3Rpb24geGUodCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/ZSt0OnR9ZnVuY3Rpb24gT2UodCl7dC5fbz1fZSx0Ll9uPWYsdC5fcz1sLHQuX2w9ZGUsdC5fdD1wZSx0Ll9xPWosdC5faT1ULHQuX209Z2UsdC5fZj12ZSx0Ll9rPW1lLHQuX2I9eWUsdC5fdj1wdCx0Ll9lPWR0LHQuX3U9d2UsdC5fZz0kZSx0Ll9kPUFlLHQuX3A9eGV9ZnVuY3Rpb24ga2UoZSxuLG8saSxhKXt2YXIgcyxjPXRoaXMsdT1hLm9wdGlvbnM7bShpLCJfdWlkIik/KHM9T2JqZWN0LmNyZWF0ZShpKSkuX29yaWdpbmFsPWk6KHM9aSxpPWkuX29yaWdpbmFsKTt2YXIgbD1yKHUuX2NvbXBpbGVkKSxmPSFsO3RoaXMuZGF0YT1lLHRoaXMucHJvcHM9bix0aGlzLmNoaWxkcmVuPW8sdGhpcy5wYXJlbnQ9aSx0aGlzLmxpc3RlbmVycz1lLm9ufHx0LHRoaXMuaW5qZWN0aW9ucz1hZSh1LmluamVjdCxpKSx0aGlzLnNsb3RzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuJHNsb3RzfHx1ZShlLnNjb3BlZFNsb3RzLGMuJHNsb3RzPXNlKG8saSkpLGMuJHNsb3RzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic2NvcGVkU2xvdHMiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB1ZShlLnNjb3BlZFNsb3RzLHRoaXMuc2xvdHMoKSl9fSksbCYmKHRoaXMuJG9wdGlvbnM9dSx0aGlzLiRzbG90cz10aGlzLnNsb3RzKCksdGhpcy4kc2NvcGVkU2xvdHM9dWUoZS5zY29wZWRTbG90cyx0aGlzLiRzbG90cykpLHUuX3Njb3BlSWQ/dGhpcy5fYz1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1MZShzLHQsZSxuLHIsZik7cmV0dXJuIG8mJiFBcnJheS5pc0FycmF5KG8pJiYoby5mblNjb3BlSWQ9dS5fc2NvcGVJZCxvLmZuQ29udGV4dD1pKSxvfTp0aGlzLl9jPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBMZShzLHQsZSxuLHIsZil9fWZ1bmN0aW9uIFNlKHQsZSxuLHIsbyl7dmFyIGk9dnQodCk7cmV0dXJuIGkuZm5Db250ZXh0PW4saS5mbk9wdGlvbnM9cixlLnNsb3QmJigoaS5kYXRhfHwoaS5kYXRhPXt9KSkuc2xvdD1lLnNsb3QpLGl9ZnVuY3Rpb24gRWUodCxlKXtmb3IodmFyIG4gaW4gZSl0W18obildPWVbbl19T2Uoa2UucHJvdG90eXBlKTt2YXIgamU9e2luaXQ6ZnVuY3Rpb24odCxlKXtpZih0LmNvbXBvbmVudEluc3RhbmNlJiYhdC5jb21wb25lbnRJbnN0YW5jZS5faXNEZXN0cm95ZWQmJnQuZGF0YS5rZWVwQWxpdmUpe3ZhciByPXQ7amUucHJlcGF0Y2gocixyKX1lbHNleyh0LmNvbXBvbmVudEluc3RhbmNlPWZ1bmN0aW9uKHQsZSl7dmFyIHI9e19pc0NvbXBvbmVudDohMCxfcGFyZW50Vm5vZGU6dCxwYXJlbnQ6ZX0sbz10LmRhdGEuaW5saW5lVGVtcGxhdGU7bihvKSYmKHIucmVuZGVyPW8ucmVuZGVyLHIuc3RhdGljUmVuZGVyRm5zPW8uc3RhdGljUmVuZGVyRm5zKTtyZXR1cm4gbmV3IHQuY29tcG9uZW50T3B0aW9ucy5DdG9yKHIpfSh0LHFlKSkuJG1vdW50KGU/dC5lbG06dm9pZCAwLGUpfX0scHJlcGF0Y2g6ZnVuY3Rpb24oZSxuKXt2YXIgcj1uLmNvbXBvbmVudE9wdGlvbnM7IWZ1bmN0aW9uKGUsbixyLG8saSl7dmFyIGE9by5kYXRhLnNjb3BlZFNsb3RzLHM9ZS4kc2NvcGVkU2xvdHMsYz0hIShhJiYhYS4kc3RhYmxlfHxzIT09dCYmIXMuJHN0YWJsZXx8YSYmZS4kc2NvcGVkU2xvdHMuJGtleSE9PWEuJGtleSksdT0hIShpfHxlLiRvcHRpb25zLl9yZW5kZXJDaGlsZHJlbnx8Yyk7ZS4kb3B0aW9ucy5fcGFyZW50Vm5vZGU9byxlLiR2bm9kZT1vLGUuX3Zub2RlJiYoZS5fdm5vZGUucGFyZW50PW8pO2lmKGUuJG9wdGlvbnMuX3JlbmRlckNoaWxkcmVuPWksZS4kYXR0cnM9by5kYXRhLmF0dHJzfHx0LGUuJGxpc3RlbmVycz1yfHx0LG4mJmUuJG9wdGlvbnMucHJvcHMpe190KCExKTtmb3IodmFyIGw9ZS5fcHJvcHMsZj1lLiRvcHRpb25zLl9wcm9wS2V5c3x8W10sZD0wO2Q8Zi5sZW5ndGg7ZCsrKXt2YXIgcD1mW2RdLHY9ZS4kb3B0aW9ucy5wcm9wcztsW3BdPUR0KHAsdixuLGUpfV90KCEwKSxlLiRvcHRpb25zLnByb3BzRGF0YT1ufXI9cnx8dDt2YXIgaD1lLiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7ZS4kb3B0aW9ucy5fcGFyZW50TGlzdGVuZXJzPXIsV2UoZSxyLGgpLHUmJihlLiRzbG90cz1zZShpLG8uY29udGV4dCksZS4kZm9yY2VVcGRhdGUoKSl9KG4uY29tcG9uZW50SW5zdGFuY2U9ZS5jb21wb25lbnRJbnN0YW5jZSxyLnByb3BzRGF0YSxyLmxpc3RlbmVycyxuLHIuY2hpbGRyZW4pfSxpbnNlcnQ6ZnVuY3Rpb24odCl7dmFyIGUsbj10LmNvbnRleHQscj10LmNvbXBvbmVudEluc3RhbmNlO3IuX2lzTW91bnRlZHx8KHIuX2lzTW91bnRlZD0hMCxaZShyLCJtb3VudGVkIikpLHQuZGF0YS5rZWVwQWxpdmUmJihuLl9pc01vdW50ZWQ/KChlPXIpLl9pbmFjdGl2ZT0hMSxRZS5wdXNoKGUpKTpHZShyLCEwKSl9LGRlc3Ryb3k6ZnVuY3Rpb24odCl7dmFyIGU9dC5jb21wb25lbnRJbnN0YW5jZTtlLl9pc0Rlc3Ryb3llZHx8KHQuZGF0YS5rZWVwQWxpdmU/ZnVuY3Rpb24gdChlLG4pe2lmKG4mJihlLl9kaXJlY3RJbmFjdGl2ZT0hMCxYZShlKSkpcmV0dXJuO2lmKCFlLl9pbmFjdGl2ZSl7ZS5faW5hY3RpdmU9ITA7Zm9yKHZhciByPTA7cjxlLiRjaGlsZHJlbi5sZW5ndGg7cisrKXQoZS4kY2hpbGRyZW5bcl0pO1plKGUsImRlYWN0aXZhdGVkIil9fShlLCEwKTplLiRkZXN0cm95KCkpfX0sVGU9T2JqZWN0LmtleXMoamUpO2Z1bmN0aW9uIEllKG8sYSxzLGMsbCl7aWYoIWUobykpe3ZhciBmPXMuJG9wdGlvbnMuX2Jhc2U7aWYoaShvKSYmKG89Zi5leHRlbmQobykpLCJmdW5jdGlvbiI9PXR5cGVvZiBvKXt2YXIgZDtpZihlKG8uY2lkKSYmdm9pZCAwPT09KG89ZnVuY3Rpb24odCxvKXtpZihyKHQuZXJyb3IpJiZuKHQuZXJyb3JDb21wKSlyZXR1cm4gdC5lcnJvckNvbXA7aWYobih0LnJlc29sdmVkKSlyZXR1cm4gdC5yZXNvbHZlZDt2YXIgYT1GZTthJiZuKHQub3duZXJzKSYmLTE9PT10Lm93bmVycy5pbmRleE9mKGEpJiZ0Lm93bmVycy5wdXNoKGEpO2lmKHIodC5sb2FkaW5nKSYmbih0LmxvYWRpbmdDb21wKSlyZXR1cm4gdC5sb2FkaW5nQ29tcDtpZihhJiYhbih0Lm93bmVycykpe3ZhciBzPXQub3duZXJzPVthXSxjPSEwLGw9bnVsbCxmPW51bGw7YS4kb24oImhvb2s6ZGVzdHJveWVkIixmdW5jdGlvbigpe3JldHVybiB2KHMsYSl9KTt2YXIgZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXMubGVuZ3RoO2U8bjtlKyspc1tlXS4kZm9yY2VVcGRhdGUoKTt0JiYocy5sZW5ndGg9MCxudWxsIT09bCYmKGNsZWFyVGltZW91dChsKSxsPW51bGwpLG51bGwhPT1mJiYoY2xlYXJUaW1lb3V0KGYpLGY9bnVsbCkpfSxwPUkoZnVuY3Rpb24oZSl7dC5yZXNvbHZlZD1SZShlLG8pLGM/cy5sZW5ndGg9MDpkKCEwKX0pLGg9SShmdW5jdGlvbihlKXtuKHQuZXJyb3JDb21wKSYmKHQuZXJyb3I9ITAsZCghMCkpfSksbT10KHAsaCk7cmV0dXJuIGkobSkmJih1KG0pP2UodC5yZXNvbHZlZCkmJm0udGhlbihwLGgpOnUobS5jb21wb25lbnQpJiYobS5jb21wb25lbnQudGhlbihwLGgpLG4obS5lcnJvcikmJih0LmVycm9yQ29tcD1SZShtLmVycm9yLG8pKSxuKG0ubG9hZGluZykmJih0LmxvYWRpbmdDb21wPVJlKG0ubG9hZGluZyxvKSwwPT09bS5kZWxheT90LmxvYWRpbmc9ITA6bD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bD1udWxsLGUodC5yZXNvbHZlZCkmJmUodC5lcnJvcikmJih0LmxvYWRpbmc9ITAsZCghMSkpfSxtLmRlbGF5fHwyMDApKSxuKG0udGltZW91dCkmJihmPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmPW51bGwsZSh0LnJlc29sdmVkKSYmaChudWxsKX0sbS50aW1lb3V0KSkpKSxjPSExLHQubG9hZGluZz90LmxvYWRpbmdDb21wOnQucmVzb2x2ZWR9fShkPW8sZikpKXJldHVybiBmdW5jdGlvbih0LGUsbixyLG8pe3ZhciBpPWR0KCk7cmV0dXJuIGkuYXN5bmNGYWN0b3J5PXQsaS5hc3luY01ldGE9e2RhdGE6ZSxjb250ZXh0Om4sY2hpbGRyZW46cix0YWc6b30saX0oZCxhLHMsYyxsKTthPWF8fHt9LF9uKG8pLG4oYS5tb2RlbCkmJmZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5tb2RlbCYmdC5tb2RlbC5wcm9wfHwidmFsdWUiLG89dC5tb2RlbCYmdC5tb2RlbC5ldmVudHx8ImlucHV0IjsoZS5hdHRyc3x8KGUuYXR0cnM9e30pKVtyXT1lLm1vZGVsLnZhbHVlO3ZhciBpPWUub258fChlLm9uPXt9KSxhPWlbb10scz1lLm1vZGVsLmNhbGxiYWNrO24oYSk/KEFycmF5LmlzQXJyYXkoYSk/LTE9PT1hLmluZGV4T2Yocyk6YSE9PXMpJiYoaVtvXT1bc10uY29uY2F0KGEpKTppW29dPXN9KG8ub3B0aW9ucyxhKTt2YXIgcD1mdW5jdGlvbih0LHIsbyl7dmFyIGk9ci5vcHRpb25zLnByb3BzO2lmKCFlKGkpKXt2YXIgYT17fSxzPXQuYXR0cnMsYz10LnByb3BzO2lmKG4ocyl8fG4oYykpZm9yKHZhciB1IGluIGkpe3ZhciBsPSQodSk7cmUoYSxjLHUsbCwhMCl8fHJlKGEscyx1LGwsITEpfXJldHVybiBhfX0oYSxvKTtpZihyKG8ub3B0aW9ucy5mdW5jdGlvbmFsKSlyZXR1cm4gZnVuY3Rpb24oZSxyLG8saSxhKXt2YXIgcz1lLm9wdGlvbnMsYz17fSx1PXMucHJvcHM7aWYobih1KSlmb3IodmFyIGwgaW4gdSljW2xdPUR0KGwsdSxyfHx0KTtlbHNlIG4oby5hdHRycykmJkVlKGMsby5hdHRycyksbihvLnByb3BzKSYmRWUoYyxvLnByb3BzKTt2YXIgZj1uZXcga2UobyxjLGEsaSxlKSxkPXMucmVuZGVyLmNhbGwobnVsbCxmLl9jLGYpO2lmKGQgaW5zdGFuY2VvZiBsdClyZXR1cm4gU2UoZCxvLGYucGFyZW50LHMpO2lmKEFycmF5LmlzQXJyYXkoZCkpe2Zvcih2YXIgcD1vZShkKXx8W10sdj1uZXcgQXJyYXkocC5sZW5ndGgpLGg9MDtoPHAubGVuZ3RoO2grKyl2W2hdPVNlKHBbaF0sbyxmLnBhcmVudCxzKTtyZXR1cm4gdn19KG8scCxhLHMsYyk7dmFyIGg9YS5vbjtpZihhLm9uPWEubmF0aXZlT24scihvLm9wdGlvbnMuYWJzdHJhY3QpKXt2YXIgbT1hLnNsb3Q7YT17fSxtJiYoYS5zbG90PW0pfSFmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5ob29rfHwodC5ob29rPXt9KSxuPTA7bjxUZS5sZW5ndGg7bisrKXt2YXIgcj1UZVtuXSxvPWVbcl0saT1qZVtyXTtvPT09aXx8byYmby5fbWVyZ2VkfHwoZVtyXT1vP0RlKGksbyk6aSl9fShhKTt2YXIgeT1vLm9wdGlvbnMubmFtZXx8bDtyZXR1cm4gbmV3IGx0KCJ2dWUtY29tcG9uZW50LSIrby5jaWQrKHk/Ii0iK3k6IiIpLGEsdm9pZCAwLHZvaWQgMCx2b2lkIDAscyx7Q3RvcjpvLHByb3BzRGF0YTpwLGxpc3RlbmVyczpoLHRhZzpsLGNoaWxkcmVuOmN9LGQpfX19ZnVuY3Rpb24gRGUodCxlKXt2YXIgbj1mdW5jdGlvbihuLHIpe3QobixyKSxlKG4scil9O3JldHVybiBuLl9tZXJnZWQ9ITAsbn12YXIgTmU9MSxQZT0yO2Z1bmN0aW9uIExlKHQsYSxzLGMsdSxsKXtyZXR1cm4oQXJyYXkuaXNBcnJheShzKXx8byhzKSkmJih1PWMsYz1zLHM9dm9pZCAwKSxyKGwpJiYodT1QZSksZnVuY3Rpb24odCxvLGEscyxjKXtpZihuKGEpJiZuKGEuX19vYl9fKSlyZXR1cm4gZHQoKTtuKGEpJiZuKGEuaXMpJiYobz1hLmlzKTtpZighbylyZXR1cm4gZHQoKTtBcnJheS5pc0FycmF5KHMpJiYiZnVuY3Rpb24iPT10eXBlb2Ygc1swXSYmKChhPWF8fHt9KS5zY29wZWRTbG90cz17ZGVmYXVsdDpzWzBdfSxzLmxlbmd0aD0wKTtjPT09UGU/cz1vZShzKTpjPT09TmUmJihzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKEFycmF5LmlzQXJyYXkodFtlXSkpcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sdCk7cmV0dXJuIHR9KHMpKTt2YXIgdSxsO2lmKCJzdHJpbmciPT10eXBlb2Ygbyl7dmFyIGY7bD10LiR2bm9kZSYmdC4kdm5vZGUubnN8fEwuZ2V0VGFnTmFtZXNwYWNlKG8pLHU9TC5pc1Jlc2VydmVkVGFnKG8pP25ldyBsdChMLnBhcnNlUGxhdGZvcm1UYWdOYW1lKG8pLGEscyx2b2lkIDAsdm9pZCAwLHQpOmEmJmEucHJlfHwhbihmPUl0KHQuJG9wdGlvbnMsImNvbXBvbmVudHMiLG8pKT9uZXcgbHQobyxhLHMsdm9pZCAwLHZvaWQgMCx0KTpJZShmLGEsdCxzLG8pfWVsc2UgdT1JZShvLGEsdCxzKTtyZXR1cm4gQXJyYXkuaXNBcnJheSh1KT91Om4odSk/KG4obCkmJmZ1bmN0aW9uIHQobyxpLGEpe28ubnM9aTsiZm9yZWlnbk9iamVjdCI9PT1vLnRhZyYmKGk9dm9pZCAwLGE9ITApO2lmKG4oby5jaGlsZHJlbikpZm9yKHZhciBzPTAsYz1vLmNoaWxkcmVuLmxlbmd0aDtzPGM7cysrKXt2YXIgdT1vLmNoaWxkcmVuW3NdO24odS50YWcpJiYoZSh1Lm5zKXx8cihhKSYmInN2ZyIhPT11LnRhZykmJnQodSxpLGEpfX0odSxsKSxuKGEpJiZmdW5jdGlvbih0KXtpKHQuc3R5bGUpJiZRdCh0LnN0eWxlKTtpKHQuY2xhc3MpJiZRdCh0LmNsYXNzKX0oYSksdSk6ZHQoKX0odCxhLHMsYyx1KX12YXIgTWUsRmU9bnVsbDtmdW5jdGlvbiBSZSh0LGUpe3JldHVybih0Ll9fZXNNb2R1bGV8fHJ0JiYiTW9kdWxlIj09PXRbU3ltYm9sLnRvU3RyaW5nVGFnXSkmJih0PXQuZGVmYXVsdCksaSh0KT9lLmV4dGVuZCh0KTp0fWZ1bmN0aW9uIFVlKHQpe3JldHVybiB0LmlzQ29tbWVudCYmdC5hc3luY0ZhY3Rvcnl9ZnVuY3Rpb24gSGUodCl7aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl7dmFyIHI9dFtlXTtpZihuKHIpJiYobihyLmNvbXBvbmVudE9wdGlvbnMpfHxVZShyKSkpcmV0dXJuIHJ9fWZ1bmN0aW9uIFZlKHQsZSl7TWUuJG9uKHQsZSl9ZnVuY3Rpb24gQmUodCxlKXtNZS4kb2ZmKHQsZSl9ZnVuY3Rpb24gemUodCxlKXt2YXIgbj1NZTtyZXR1cm4gZnVuY3Rpb24gcigpe251bGwhPT1lLmFwcGx5KG51bGwsYXJndW1lbnRzKSYmbi4kb2ZmKHQscil9fWZ1bmN0aW9uIFdlKHQsZSxuKXtNZT10LGVlKGUsbnx8e30sVmUsQmUsemUsdCksTWU9dm9pZCAwfXZhciBxZT1udWxsO2Z1bmN0aW9uIEtlKHQpe3ZhciBlPXFlO3JldHVybiBxZT10LGZ1bmN0aW9uKCl7cWU9ZX19ZnVuY3Rpb24gWGUodCl7Zm9yKDt0JiYodD10LiRwYXJlbnQpOylpZih0Ll9pbmFjdGl2ZSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBHZSh0LGUpe2lmKGUpe2lmKHQuX2RpcmVjdEluYWN0aXZlPSExLFhlKHQpKXJldHVybn1lbHNlIGlmKHQuX2RpcmVjdEluYWN0aXZlKXJldHVybjtpZih0Ll9pbmFjdGl2ZXx8bnVsbD09PXQuX2luYWN0aXZlKXt0Ll9pbmFjdGl2ZT0hMTtmb3IodmFyIG49MDtuPHQuJGNoaWxkcmVuLmxlbmd0aDtuKyspR2UodC4kY2hpbGRyZW5bbl0pO1plKHQsImFjdGl2YXRlZCIpfX1mdW5jdGlvbiBaZSh0LGUpe2N0KCk7dmFyIG49dC4kb3B0aW9uc1tlXSxyPWUrIiBob29rIjtpZihuKWZvcih2YXIgbz0wLGk9bi5sZW5ndGg7bzxpO28rKylGdChuW29dLHQsbnVsbCx0LHIpO3QuX2hhc0hvb2tFdmVudCYmdC4kZW1pdCgiaG9vazoiK2UpLHV0KCl9dmFyIEplPVtdLFFlPVtdLFllPXt9LHRuPSExLGVuPSExLG5uPTA7dmFyIHJuPTAsb249RGF0ZS5ub3c7aWYoSCYmIVcpe3ZhciBhbj13aW5kb3cucGVyZm9ybWFuY2U7YW4mJiJmdW5jdGlvbiI9PXR5cGVvZiBhbi5ub3cmJm9uKCk+ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50IikudGltZVN0YW1wJiYob249ZnVuY3Rpb24oKXtyZXR1cm4gYW4ubm93KCl9KX1mdW5jdGlvbiBzbigpe3ZhciB0LGU7Zm9yKHJuPW9uKCksZW49ITAsSmUuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LmlkLWUuaWR9KSxubj0wO25uPEplLmxlbmd0aDtubisrKSh0PUplW25uXSkuYmVmb3JlJiZ0LmJlZm9yZSgpLGU9dC5pZCxZZVtlXT1udWxsLHQucnVuKCk7dmFyIG49UWUuc2xpY2UoKSxyPUplLnNsaWNlKCk7bm49SmUubGVuZ3RoPVFlLmxlbmd0aD0wLFllPXt9LHRuPWVuPSExLGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV0uX2luYWN0aXZlPSEwLEdlKHRbZV0sITApfShuKSxmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aDtmb3IoO2UtLTspe3ZhciBuPXRbZV0scj1uLnZtO3IuX3dhdGNoZXI9PT1uJiZyLl9pc01vdW50ZWQmJiFyLl9pc0Rlc3Ryb3llZCYmWmUociwidXBkYXRlZCIpfX0ociksdHQmJkwuZGV2dG9vbHMmJnR0LmVtaXQoImZsdXNoIil9dmFyIGNuPTAsdW49ZnVuY3Rpb24odCxlLG4scixvKXt0aGlzLnZtPXQsbyYmKHQuX3dhdGNoZXI9dGhpcyksdC5fd2F0Y2hlcnMucHVzaCh0aGlzKSxyPyh0aGlzLmRlZXA9ISFyLmRlZXAsdGhpcy51c2VyPSEhci51c2VyLHRoaXMubGF6eT0hIXIubGF6eSx0aGlzLnN5bmM9ISFyLnN5bmMsdGhpcy5iZWZvcmU9ci5iZWZvcmUpOnRoaXMuZGVlcD10aGlzLnVzZXI9dGhpcy5sYXp5PXRoaXMuc3luYz0hMSx0aGlzLmNiPW4sdGhpcy5pZD0rK2NuLHRoaXMuYWN0aXZlPSEwLHRoaXMuZGlydHk9dGhpcy5sYXp5LHRoaXMuZGVwcz1bXSx0aGlzLm5ld0RlcHM9W10sdGhpcy5kZXBJZHM9bmV3IG50LHRoaXMubmV3RGVwSWRzPW5ldyBudCx0aGlzLmV4cHJlc3Npb249IiIsImZ1bmN0aW9uIj09dHlwZW9mIGU/dGhpcy5nZXR0ZXI9ZToodGhpcy5nZXR0ZXI9ZnVuY3Rpb24odCl7aWYoIUYudGVzdCh0KSl7dmFyIGU9dC5zcGxpdCgiLiIpO3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7aWYoIXQpcmV0dXJuO3Q9dFtlW25dXX1yZXR1cm4gdH19fShlKSx0aGlzLmdldHRlcnx8KHRoaXMuZ2V0dGVyPWspKSx0aGlzLnZhbHVlPXRoaXMubGF6eT92b2lkIDA6dGhpcy5nZXQoKX07dW4ucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciB0O2N0KHRoaXMpO3ZhciBlPXRoaXMudm07dHJ5e3Q9dGhpcy5nZXR0ZXIuY2FsbChlLGUpfWNhdGNoKHQpe2lmKCF0aGlzLnVzZXIpdGhyb3cgdDtNdCh0LGUsJ2dldHRlciBmb3Igd2F0Y2hlciAiJyt0aGlzLmV4cHJlc3Npb24rJyInKX1maW5hbGx5e3RoaXMuZGVlcCYmUXQodCksdXQoKSx0aGlzLmNsZWFudXBEZXBzKCl9cmV0dXJuIHR9LHVuLnByb3RvdHlwZS5hZGREZXA9ZnVuY3Rpb24odCl7dmFyIGU9dC5pZDt0aGlzLm5ld0RlcElkcy5oYXMoZSl8fCh0aGlzLm5ld0RlcElkcy5hZGQoZSksdGhpcy5uZXdEZXBzLnB1c2godCksdGhpcy5kZXBJZHMuaGFzKGUpfHx0LmFkZFN1Yih0aGlzKSl9LHVuLnByb3RvdHlwZS5jbGVhbnVwRGVwcz1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmRlcHMubGVuZ3RoO3QtLTspe3ZhciBlPXRoaXMuZGVwc1t0XTt0aGlzLm5ld0RlcElkcy5oYXMoZS5pZCl8fGUucmVtb3ZlU3ViKHRoaXMpfXZhciBuPXRoaXMuZGVwSWRzO3RoaXMuZGVwSWRzPXRoaXMubmV3RGVwSWRzLHRoaXMubmV3RGVwSWRzPW4sdGhpcy5uZXdEZXBJZHMuY2xlYXIoKSxuPXRoaXMuZGVwcyx0aGlzLmRlcHM9dGhpcy5uZXdEZXBzLHRoaXMubmV3RGVwcz1uLHRoaXMubmV3RGVwcy5sZW5ndGg9MH0sdW4ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMubGF6eT90aGlzLmRpcnR5PSEwOnRoaXMuc3luYz90aGlzLnJ1bigpOmZ1bmN0aW9uKHQpe3ZhciBlPXQuaWQ7aWYobnVsbD09WWVbZV0pe2lmKFllW2VdPSEwLGVuKXtmb3IodmFyIG49SmUubGVuZ3RoLTE7bj5ubiYmSmVbbl0uaWQ+dC5pZDspbi0tO0plLnNwbGljZShuKzEsMCx0KX1lbHNlIEplLnB1c2godCk7dG58fCh0bj0hMCxadChzbikpfX0odGhpcyl9LHVuLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSl7dmFyIHQ9dGhpcy5nZXQoKTtpZih0IT09dGhpcy52YWx1ZXx8aSh0KXx8dGhpcy5kZWVwKXt2YXIgZT10aGlzLnZhbHVlO2lmKHRoaXMudmFsdWU9dCx0aGlzLnVzZXIpdHJ5e3RoaXMuY2IuY2FsbCh0aGlzLnZtLHQsZSl9Y2F0Y2godCl7TXQodCx0aGlzLnZtLCdjYWxsYmFjayBmb3Igd2F0Y2hlciAiJyt0aGlzLmV4cHJlc3Npb24rJyInKX1lbHNlIHRoaXMuY2IuY2FsbCh0aGlzLnZtLHQsZSl9fX0sdW4ucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZT10aGlzLmdldCgpLHRoaXMuZGlydHk9ITF9LHVuLnByb3RvdHlwZS5kZXBlbmQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5kZXBzLmxlbmd0aDt0LS07KXRoaXMuZGVwc1t0XS5kZXBlbmQoKX0sdW4ucHJvdG90eXBlLnRlYXJkb3duPWZ1bmN0aW9uKCl7aWYodGhpcy5hY3RpdmUpe3RoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWR8fHYodGhpcy52bS5fd2F0Y2hlcnMsdGhpcyk7Zm9yKHZhciB0PXRoaXMuZGVwcy5sZW5ndGg7dC0tOyl0aGlzLmRlcHNbdF0ucmVtb3ZlU3ViKHRoaXMpO3RoaXMuYWN0aXZlPSExfX07dmFyIGxuPXtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ayxzZXQ6a307ZnVuY3Rpb24gZm4odCxlLG4pe2xuLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzW2VdW25dfSxsbi5zZXQ9ZnVuY3Rpb24odCl7dGhpc1tlXVtuXT10fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxuLGxuKX1mdW5jdGlvbiBkbih0KXt0Ll93YXRjaGVycz1bXTt2YXIgZT10LiRvcHRpb25zO2UucHJvcHMmJmZ1bmN0aW9uKHQsZSl7dmFyIG49dC4kb3B0aW9ucy5wcm9wc0RhdGF8fHt9LHI9dC5fcHJvcHM9e30sbz10LiRvcHRpb25zLl9wcm9wS2V5cz1bXTt0LiRwYXJlbnQmJl90KCExKTt2YXIgaT1mdW5jdGlvbihpKXtvLnB1c2goaSk7dmFyIGE9RHQoaSxlLG4sdCk7JHQocixpLGEpLGkgaW4gdHx8Zm4odCwiX3Byb3BzIixpKX07Zm9yKHZhciBhIGluIGUpaShhKTtfdCghMCl9KHQsZS5wcm9wcyksZS5tZXRob2RzJiZmdW5jdGlvbih0LGUpe3QuJG9wdGlvbnMucHJvcHM7Zm9yKHZhciBuIGluIGUpdFtuXT0iZnVuY3Rpb24iIT10eXBlb2YgZVtuXT9rOncoZVtuXSx0KX0odCxlLm1ldGhvZHMpLGUuZGF0YT9mdW5jdGlvbih0KXt2YXIgZT10LiRvcHRpb25zLmRhdGE7cyhlPXQuX2RhdGE9ImZ1bmN0aW9uIj09dHlwZW9mIGU/ZnVuY3Rpb24odCxlKXtjdCgpO3RyeXtyZXR1cm4gdC5jYWxsKGUsZSl9Y2F0Y2godCl7cmV0dXJuIE10KHQsZSwiZGF0YSgpIikse319ZmluYWxseXt1dCgpfX0oZSx0KTplfHx7fSl8fChlPXt9KTt2YXIgbj1PYmplY3Qua2V5cyhlKSxyPXQuJG9wdGlvbnMucHJvcHMsbz0odC4kb3B0aW9ucy5tZXRob2RzLG4ubGVuZ3RoKTtmb3IoO28tLTspe3ZhciBpPW5bb107ciYmbShyLGkpfHwoYT12b2lkIDAsMzYhPT0oYT0oaSsiIikuY2hhckNvZGVBdCgwKSkmJjk1IT09YSYmZm4odCwiX2RhdGEiLGkpKX12YXIgYTtDdChlLCEwKX0odCk6Q3QodC5fZGF0YT17fSwhMCksZS5jb21wdXRlZCYmZnVuY3Rpb24odCxlKXt2YXIgbj10Ll9jb21wdXRlZFdhdGNoZXJzPU9iamVjdC5jcmVhdGUobnVsbCkscj1ZKCk7Zm9yKHZhciBvIGluIGUpe3ZhciBpPWVbb10sYT0iZnVuY3Rpb24iPT10eXBlb2YgaT9pOmkuZ2V0O3J8fChuW29dPW5ldyB1bih0LGF8fGssayxwbikpLG8gaW4gdHx8dm4odCxvLGkpfX0odCxlLmNvbXB1dGVkKSxlLndhdGNoJiZlLndhdGNoIT09WiYmZnVuY3Rpb24odCxlKXtmb3IodmFyIG4gaW4gZSl7dmFyIHI9ZVtuXTtpZihBcnJheS5pc0FycmF5KHIpKWZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXluKHQsbixyW29dKTtlbHNlIHluKHQsbixyKX19KHQsZS53YXRjaCl9dmFyIHBuPXtsYXp5OiEwfTtmdW5jdGlvbiB2bih0LGUsbil7dmFyIHI9IVkoKTsiZnVuY3Rpb24iPT10eXBlb2Ygbj8obG4uZ2V0PXI/aG4oZSk6bW4obiksbG4uc2V0PWspOihsbi5nZXQ9bi5nZXQ/ciYmITEhPT1uLmNhY2hlP2huKGUpOm1uKG4uZ2V0KTprLGxuLnNldD1uLnNldHx8ayksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxsbil9ZnVuY3Rpb24gaG4odCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29tcHV0ZWRXYXRjaGVycyYmdGhpcy5fY29tcHV0ZWRXYXRjaGVyc1t0XTtpZihlKXJldHVybiBlLmRpcnR5JiZlLmV2YWx1YXRlKCksYXQudGFyZ2V0JiZlLmRlcGVuZCgpLGUudmFsdWV9fWZ1bmN0aW9uIG1uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmNhbGwodGhpcyx0aGlzKX19ZnVuY3Rpb24geW4odCxlLG4scil7cmV0dXJuIHMobikmJihyPW4sbj1uLmhhbmRsZXIpLCJzdHJpbmciPT10eXBlb2YgbiYmKG49dFtuXSksdC4kd2F0Y2goZSxuLHIpfXZhciBnbj0wO2Z1bmN0aW9uIF9uKHQpe3ZhciBlPXQub3B0aW9ucztpZih0LnN1cGVyKXt2YXIgbj1fbih0LnN1cGVyKTtpZihuIT09dC5zdXBlck9wdGlvbnMpe3Quc3VwZXJPcHRpb25zPW47dmFyIHI9ZnVuY3Rpb24odCl7dmFyIGUsbj10Lm9wdGlvbnMscj10LnNlYWxlZE9wdGlvbnM7Zm9yKHZhciBvIGluIG4pbltvXSE9PXJbb10mJihlfHwoZT17fSksZVtvXT1uW29dKTtyZXR1cm4gZX0odCk7ciYmeCh0LmV4dGVuZE9wdGlvbnMsciksKGU9dC5vcHRpb25zPVR0KG4sdC5leHRlbmRPcHRpb25zKSkubmFtZSYmKGUuY29tcG9uZW50c1tlLm5hbWVdPXQpfX1yZXR1cm4gZX1mdW5jdGlvbiBibih0KXt0aGlzLl9pbml0KHQpfWZ1bmN0aW9uIENuKHQpe3QuY2lkPTA7dmFyIGU9MTt0LmV4dGVuZD1mdW5jdGlvbih0KXt0PXR8fHt9O3ZhciBuPXRoaXMscj1uLmNpZCxvPXQuX0N0b3J8fCh0Ll9DdG9yPXt9KTtpZihvW3JdKXJldHVybiBvW3JdO3ZhciBpPXQubmFtZXx8bi5vcHRpb25zLm5hbWUsYT1mdW5jdGlvbih0KXt0aGlzLl9pbml0KHQpfTtyZXR1cm4oYS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkpLmNvbnN0cnVjdG9yPWEsYS5jaWQ9ZSsrLGEub3B0aW9ucz1UdChuLm9wdGlvbnMsdCksYS5zdXBlcj1uLGEub3B0aW9ucy5wcm9wcyYmZnVuY3Rpb24odCl7dmFyIGU9dC5vcHRpb25zLnByb3BzO2Zvcih2YXIgbiBpbiBlKWZuKHQucHJvdG90eXBlLCJfcHJvcHMiLG4pfShhKSxhLm9wdGlvbnMuY29tcHV0ZWQmJmZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9ucy5jb21wdXRlZDtmb3IodmFyIG4gaW4gZSl2bih0LnByb3RvdHlwZSxuLGVbbl0pfShhKSxhLmV4dGVuZD1uLmV4dGVuZCxhLm1peGluPW4ubWl4aW4sYS51c2U9bi51c2UsTi5mb3JFYWNoKGZ1bmN0aW9uKHQpe2FbdF09blt0XX0pLGkmJihhLm9wdGlvbnMuY29tcG9uZW50c1tpXT1hKSxhLnN1cGVyT3B0aW9ucz1uLm9wdGlvbnMsYS5leHRlbmRPcHRpb25zPXQsYS5zZWFsZWRPcHRpb25zPXgoe30sYS5vcHRpb25zKSxvW3JdPWEsYX19ZnVuY3Rpb24gJG4odCl7cmV0dXJuIHQmJih0LkN0b3Iub3B0aW9ucy5uYW1lfHx0LnRhZyl9ZnVuY3Rpb24gd24odCxlKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90LmluZGV4T2YoZSk+LTE6InN0cmluZyI9PXR5cGVvZiB0P3Quc3BsaXQoIiwiKS5pbmRleE9mKGUpPi0xOihuPXQsIltvYmplY3QgUmVnRXhwXSI9PT1hLmNhbGwobikmJnQudGVzdChlKSk7dmFyIG59ZnVuY3Rpb24gQW4odCxlKXt2YXIgbj10LmNhY2hlLHI9dC5rZXlzLG89dC5fdm5vZGU7Zm9yKHZhciBpIGluIG4pe3ZhciBhPW5baV07aWYoYSl7dmFyIHM9JG4oYS5jb21wb25lbnRPcHRpb25zKTtzJiYhZShzKSYmeG4obixpLHIsbyl9fX1mdW5jdGlvbiB4bih0LGUsbixyKXt2YXIgbz10W2VdOyFvfHxyJiZvLnRhZz09PXIudGFnfHxvLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCksdFtlXT1udWxsLHYobixlKX0hZnVuY3Rpb24oZSl7ZS5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcztuLl91aWQ9Z24rKyxuLl9pc1Z1ZT0hMCxlJiZlLl9pc0NvbXBvbmVudD9mdW5jdGlvbih0LGUpe3ZhciBuPXQuJG9wdGlvbnM9T2JqZWN0LmNyZWF0ZSh0LmNvbnN0cnVjdG9yLm9wdGlvbnMpLHI9ZS5fcGFyZW50Vm5vZGU7bi5wYXJlbnQ9ZS5wYXJlbnQsbi5fcGFyZW50Vm5vZGU9cjt2YXIgbz1yLmNvbXBvbmVudE9wdGlvbnM7bi5wcm9wc0RhdGE9by5wcm9wc0RhdGEsbi5fcGFyZW50TGlzdGVuZXJzPW8ubGlzdGVuZXJzLG4uX3JlbmRlckNoaWxkcmVuPW8uY2hpbGRyZW4sbi5fY29tcG9uZW50VGFnPW8udGFnLGUucmVuZGVyJiYobi5yZW5kZXI9ZS5yZW5kZXIsbi5zdGF0aWNSZW5kZXJGbnM9ZS5zdGF0aWNSZW5kZXJGbnMpfShuLGUpOm4uJG9wdGlvbnM9VHQoX24obi5jb25zdHJ1Y3RvciksZXx8e30sbiksbi5fcmVuZGVyUHJveHk9bixuLl9zZWxmPW4sZnVuY3Rpb24odCl7dmFyIGU9dC4kb3B0aW9ucyxuPWUucGFyZW50O2lmKG4mJiFlLmFic3RyYWN0KXtmb3IoO24uJG9wdGlvbnMuYWJzdHJhY3QmJm4uJHBhcmVudDspbj1uLiRwYXJlbnQ7bi4kY2hpbGRyZW4ucHVzaCh0KX10LiRwYXJlbnQ9bix0LiRyb290PW4/bi4kcm9vdDp0LHQuJGNoaWxkcmVuPVtdLHQuJHJlZnM9e30sdC5fd2F0Y2hlcj1udWxsLHQuX2luYWN0aXZlPW51bGwsdC5fZGlyZWN0SW5hY3RpdmU9ITEsdC5faXNNb3VudGVkPSExLHQuX2lzRGVzdHJveWVkPSExLHQuX2lzQmVpbmdEZXN0cm95ZWQ9ITF9KG4pLGZ1bmN0aW9uKHQpe3QuX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLHQuX2hhc0hvb2tFdmVudD0hMTt2YXIgZT10LiRvcHRpb25zLl9wYXJlbnRMaXN0ZW5lcnM7ZSYmV2UodCxlKX0obiksZnVuY3Rpb24oZSl7ZS5fdm5vZGU9bnVsbCxlLl9zdGF0aWNUcmVlcz1udWxsO3ZhciBuPWUuJG9wdGlvbnMscj1lLiR2bm9kZT1uLl9wYXJlbnRWbm9kZSxvPXImJnIuY29udGV4dDtlLiRzbG90cz1zZShuLl9yZW5kZXJDaGlsZHJlbixvKSxlLiRzY29wZWRTbG90cz10LGUuX2M9ZnVuY3Rpb24odCxuLHIsbyl7cmV0dXJuIExlKGUsdCxuLHIsbywhMSl9LGUuJGNyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24odCxuLHIsbyl7cmV0dXJuIExlKGUsdCxuLHIsbywhMCl9O3ZhciBpPXImJnIuZGF0YTskdChlLCIkYXR0cnMiLGkmJmkuYXR0cnN8fHQsbnVsbCwhMCksJHQoZSwiJGxpc3RlbmVycyIsbi5fcGFyZW50TGlzdGVuZXJzfHx0LG51bGwsITApfShuKSxaZShuLCJiZWZvcmVDcmVhdGUiKSxmdW5jdGlvbih0KXt2YXIgZT1hZSh0LiRvcHRpb25zLmluamVjdCx0KTtlJiYoX3QoITEpLE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7JHQodCxuLGVbbl0pfSksX3QoITApKX0obiksZG4obiksZnVuY3Rpb24odCl7dmFyIGU9dC4kb3B0aW9ucy5wcm92aWRlO2UmJih0Ll9wcm92aWRlZD0iZnVuY3Rpb24iPT10eXBlb2YgZT9lLmNhbGwodCk6ZSl9KG4pLFplKG4sImNyZWF0ZWQiKSxuLiRvcHRpb25zLmVsJiZuLiRtb3VudChuLiRvcHRpb25zLmVsKX19KGJuKSxmdW5jdGlvbih0KXt2YXIgZT17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9fSxuPXtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcHN9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIiRkYXRhIixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIiRwcm9wcyIsbiksdC5wcm90b3R5cGUuJHNldD13dCx0LnByb3RvdHlwZS4kZGVsZXRlPUF0LHQucHJvdG90eXBlLiR3YXRjaD1mdW5jdGlvbih0LGUsbil7aWYocyhlKSlyZXR1cm4geW4odGhpcyx0LGUsbik7KG49bnx8e30pLnVzZXI9ITA7dmFyIHI9bmV3IHVuKHRoaXMsdCxlLG4pO2lmKG4uaW1tZWRpYXRlKXRyeXtlLmNhbGwodGhpcyxyLnZhbHVlKX1jYXRjaCh0KXtNdCh0LHRoaXMsJ2NhbGxiYWNrIGZvciBpbW1lZGlhdGUgd2F0Y2hlciAiJytyLmV4cHJlc3Npb24rJyInKX1yZXR1cm4gZnVuY3Rpb24oKXtyLnRlYXJkb3duKCl9fX0oYm4pLGZ1bmN0aW9uKHQpe3ZhciBlPS9eaG9vazovO3QucHJvdG90eXBlLiRvbj1mdW5jdGlvbih0LG4pe3ZhciByPXRoaXM7aWYoQXJyYXkuaXNBcnJheSh0KSlmb3IodmFyIG89MCxpPXQubGVuZ3RoO288aTtvKyspci4kb24odFtvXSxuKTtlbHNlKHIuX2V2ZW50c1t0XXx8KHIuX2V2ZW50c1t0XT1bXSkpLnB1c2gobiksZS50ZXN0KHQpJiYoci5faGFzSG9va0V2ZW50PSEwKTtyZXR1cm4gcn0sdC5wcm90b3R5cGUuJG9uY2U9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2Z1bmN0aW9uIHIoKXtuLiRvZmYodCxyKSxlLmFwcGx5KG4sYXJndW1lbnRzKX1yZXR1cm4gci5mbj1lLG4uJG9uKHQsciksbn0sdC5wcm90b3R5cGUuJG9mZj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG4uX2V2ZW50cz1PYmplY3QuY3JlYXRlKG51bGwpLG47aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciByPTAsbz10Lmxlbmd0aDtyPG87cisrKW4uJG9mZih0W3JdLGUpO3JldHVybiBufXZhciBpLGE9bi5fZXZlbnRzW3RdO2lmKCFhKXJldHVybiBuO2lmKCFlKXJldHVybiBuLl9ldmVudHNbdF09bnVsbCxuO2Zvcih2YXIgcz1hLmxlbmd0aDtzLS07KWlmKChpPWFbc10pPT09ZXx8aS5mbj09PWUpe2Euc3BsaWNlKHMsMSk7YnJlYWt9cmV0dXJuIG59LHQucHJvdG90eXBlLiRlbWl0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2V2ZW50c1t0XTtpZihlKXtlPWUubGVuZ3RoPjE/QShlKTplO2Zvcih2YXIgbj1BKGFyZ3VtZW50cywxKSxyPSdldmVudCBoYW5kbGVyIGZvciAiJyt0KyciJyxvPTAsaT1lLmxlbmd0aDtvPGk7bysrKUZ0KGVbb10sdGhpcyxuLHRoaXMscil9cmV0dXJuIHRoaXN9fShibiksZnVuY3Rpb24odCl7dC5wcm90b3R5cGUuX3VwZGF0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1uLiRlbCxvPW4uX3Zub2RlLGk9S2Uobik7bi5fdm5vZGU9dCxuLiRlbD1vP24uX19wYXRjaF9fKG8sdCk6bi5fX3BhdGNoX18obi4kZWwsdCxlLCExKSxpKCksciYmKHIuX192dWVfXz1udWxsKSxuLiRlbCYmKG4uJGVsLl9fdnVlX189biksbi4kdm5vZGUmJm4uJHBhcmVudCYmbi4kdm5vZGU9PT1uLiRwYXJlbnQuX3Zub2RlJiYobi4kcGFyZW50LiRlbD1uLiRlbCl9LHQucHJvdG90eXBlLiRmb3JjZVVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXImJnRoaXMuX3dhdGNoZXIudXBkYXRlKCl9LHQucHJvdG90eXBlLiRkZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZighdC5faXNCZWluZ0Rlc3Ryb3llZCl7WmUodCwiYmVmb3JlRGVzdHJveSIpLHQuX2lzQmVpbmdEZXN0cm95ZWQ9ITA7dmFyIGU9dC4kcGFyZW50OyFlfHxlLl9pc0JlaW5nRGVzdHJveWVkfHx0LiRvcHRpb25zLmFic3RyYWN0fHx2KGUuJGNoaWxkcmVuLHQpLHQuX3dhdGNoZXImJnQuX3dhdGNoZXIudGVhcmRvd24oKTtmb3IodmFyIG49dC5fd2F0Y2hlcnMubGVuZ3RoO24tLTspdC5fd2F0Y2hlcnNbbl0udGVhcmRvd24oKTt0Ll9kYXRhLl9fb2JfXyYmdC5fZGF0YS5fX29iX18udm1Db3VudC0tLHQuX2lzRGVzdHJveWVkPSEwLHQuX19wYXRjaF9fKHQuX3Zub2RlLG51bGwpLFplKHQsImRlc3Ryb3llZCIpLHQuJG9mZigpLHQuJGVsJiYodC4kZWwuX192dWVfXz1udWxsKSx0LiR2bm9kZSYmKHQuJHZub2RlLnBhcmVudD1udWxsKX19fShibiksZnVuY3Rpb24odCl7T2UodC5wcm90b3R5cGUpLHQucHJvdG90eXBlLiRuZXh0VGljaz1mdW5jdGlvbih0KXtyZXR1cm4gWnQodCx0aGlzKX0sdC5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcyxuPWUuJG9wdGlvbnMscj1uLnJlbmRlcixvPW4uX3BhcmVudFZub2RlO28mJihlLiRzY29wZWRTbG90cz11ZShvLmRhdGEuc2NvcGVkU2xvdHMsZS4kc2xvdHMsZS4kc2NvcGVkU2xvdHMpKSxlLiR2bm9kZT1vO3RyeXtGZT1lLHQ9ci5jYWxsKGUuX3JlbmRlclByb3h5LGUuJGNyZWF0ZUVsZW1lbnQpfWNhdGNoKG4pe010KG4sZSwicmVuZGVyIiksdD1lLl92bm9kZX1maW5hbGx5e0ZlPW51bGx9cmV0dXJuIEFycmF5LmlzQXJyYXkodCkmJjE9PT10Lmxlbmd0aCYmKHQ9dFswXSksdCBpbnN0YW5jZW9mIGx0fHwodD1kdCgpKSx0LnBhcmVudD1vLHR9fShibik7dmFyIE9uPVtTdHJpbmcsUmVnRXhwLEFycmF5XSxrbj17S2VlcEFsaXZlOntuYW1lOiJrZWVwLWFsaXZlIixhYnN0cmFjdDohMCxwcm9wczp7aW5jbHVkZTpPbixleGNsdWRlOk9uLG1heDpbU3RyaW5nLE51bWJlcl19LGNyZWF0ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5rZXlzPVtdfSxkZXN0cm95ZWQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5jYWNoZSl4bih0aGlzLmNhY2hlLHQsdGhpcy5rZXlzKX0sbW91bnRlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy4kd2F0Y2goImluY2x1ZGUiLGZ1bmN0aW9uKGUpe0FuKHQsZnVuY3Rpb24odCl7cmV0dXJuIHduKGUsdCl9KX0pLHRoaXMuJHdhdGNoKCJleGNsdWRlIixmdW5jdGlvbihlKXtBbih0LGZ1bmN0aW9uKHQpe3JldHVybiF3bihlLHQpfSl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kc2xvdHMuZGVmYXVsdCxlPUhlKHQpLG49ZSYmZS5jb21wb25lbnRPcHRpb25zO2lmKG4pe3ZhciByPSRuKG4pLG89dGhpcy5pbmNsdWRlLGk9dGhpcy5leGNsdWRlO2lmKG8mJighcnx8IXduKG8scikpfHxpJiZyJiZ3bihpLHIpKXJldHVybiBlO3ZhciBhPXRoaXMuY2FjaGUscz10aGlzLmtleXMsYz1udWxsPT1lLmtleT9uLkN0b3IuY2lkKyhuLnRhZz8iOjoiK24udGFnOiIiKTplLmtleTthW2NdPyhlLmNvbXBvbmVudEluc3RhbmNlPWFbY10uY29tcG9uZW50SW5zdGFuY2UsdihzLGMpLHMucHVzaChjKSk6KGFbY109ZSxzLnB1c2goYyksdGhpcy5tYXgmJnMubGVuZ3RoPnBhcnNlSW50KHRoaXMubWF4KSYmeG4oYSxzWzBdLHMsdGhpcy5fdm5vZGUpKSxlLmRhdGEua2VlcEFsaXZlPSEwfXJldHVybiBlfHx0JiZ0WzBdfX19OyFmdW5jdGlvbih0KXt2YXIgZT17Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEx9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiY29uZmlnIixlKSx0LnV0aWw9e3dhcm46b3QsZXh0ZW5kOngsbWVyZ2VPcHRpb25zOlR0LGRlZmluZVJlYWN0aXZlOiR0fSx0LnNldD13dCx0LmRlbGV0ZT1BdCx0Lm5leHRUaWNrPVp0LHQub2JzZXJ2YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gQ3QodCksdH0sdC5vcHRpb25zPU9iamVjdC5jcmVhdGUobnVsbCksTi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Qub3B0aW9uc1tlKyJzIl09T2JqZWN0LmNyZWF0ZShudWxsKX0pLHQub3B0aW9ucy5fYmFzZT10LHgodC5vcHRpb25zLmNvbXBvbmVudHMsa24pLGZ1bmN0aW9uKHQpe3QudXNlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2luc3RhbGxlZFBsdWdpbnN8fCh0aGlzLl9pbnN0YWxsZWRQbHVnaW5zPVtdKTtpZihlLmluZGV4T2YodCk+LTEpcmV0dXJuIHRoaXM7dmFyIG49QShhcmd1bWVudHMsMSk7cmV0dXJuIG4udW5zaGlmdCh0aGlzKSwiZnVuY3Rpb24iPT10eXBlb2YgdC5pbnN0YWxsP3QuaW5zdGFsbC5hcHBseSh0LG4pOiJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LmFwcGx5KG51bGwsbiksZS5wdXNoKHQpLHRoaXN9fSh0KSxmdW5jdGlvbih0KXt0Lm1peGluPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnM9VHQodGhpcy5vcHRpb25zLHQpLHRoaXN9fSh0KSxDbih0KSxmdW5jdGlvbih0KXtOLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1mdW5jdGlvbih0LG4pe3JldHVybiBuPygiY29tcG9uZW50Ij09PWUmJnMobikmJihuLm5hbWU9bi5uYW1lfHx0LG49dGhpcy5vcHRpb25zLl9iYXNlLmV4dGVuZChuKSksImRpcmVjdGl2ZSI9PT1lJiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49e2JpbmQ6bix1cGRhdGU6bn0pLHRoaXMub3B0aW9uc1tlKyJzIl1bdF09bixuKTp0aGlzLm9wdGlvbnNbZSsicyJdW3RdfX0pfSh0KX0oYm4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShibi5wcm90b3R5cGUsIiRpc1NlcnZlciIse2dldDpZfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGJuLnByb3RvdHlwZSwiJHNzckNvbnRleHQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGJuLCJGdW5jdGlvbmFsUmVuZGVyQ29udGV4dCIse3ZhbHVlOmtlfSksYm4udmVyc2lvbj0iMi42LjExIjt2YXIgU249ZCgic3R5bGUsY2xhc3MiKSxFbj1kKCJpbnB1dCx0ZXh0YXJlYSxvcHRpb24sc2VsZWN0LHByb2dyZXNzIiksam49ZCgiY29udGVudGVkaXRhYmxlLGRyYWdnYWJsZSxzcGVsbGNoZWNrIiksVG49ZCgiZXZlbnRzLGNhcmV0LHR5cGluZyxwbGFpbnRleHQtb25seSIpLEluPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1uKGUpfHwiZmFsc2UiPT09ZT8iZmFsc2UiOiJjb250ZW50ZWRpdGFibGUiPT09dCYmVG4oZSk/ZToidHJ1ZSJ9LERuPWQoImFsbG93ZnVsbHNjcmVlbixhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY2hlY2tlZCxjb21wYWN0LGNvbnRyb2xzLGRlY2xhcmUsZGVmYXVsdCxkZWZhdWx0Y2hlY2tlZCxkZWZhdWx0bXV0ZWQsZGVmYXVsdHNlbGVjdGVkLGRlZmVyLGRpc2FibGVkLGVuYWJsZWQsZm9ybW5vdmFsaWRhdGUsaGlkZGVuLGluZGV0ZXJtaW5hdGUsaW5lcnQsaXNtYXAsaXRlbXNjb3BlLGxvb3AsbXVsdGlwbGUsbXV0ZWQsbm9ocmVmLG5vcmVzaXplLG5vc2hhZGUsbm92YWxpZGF0ZSxub3dyYXAsb3BlbixwYXVzZW9uZXhpdCxyZWFkb25seSxyZXF1aXJlZCxyZXZlcnNlZCxzY29wZWQsc2VhbWxlc3Msc2VsZWN0ZWQsc29ydGFibGUsdHJhbnNsYXRlLHRydWVzcGVlZCx0eXBlbXVzdG1hdGNoLHZpc2libGUiKSxObj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIsUG49ZnVuY3Rpb24odCl7cmV0dXJuIjoiPT09dC5jaGFyQXQoNSkmJiJ4bGluayI9PT10LnNsaWNlKDAsNSl9LExuPWZ1bmN0aW9uKHQpe3JldHVybiBQbih0KT90LnNsaWNlKDYsdC5sZW5ndGgpOiIifSxNbj1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dHx8ITE9PT10fTtmdW5jdGlvbiBGbih0KXtmb3IodmFyIGU9dC5kYXRhLHI9dCxvPXQ7bihvLmNvbXBvbmVudEluc3RhbmNlKTspKG89by5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZvLmRhdGEmJihlPVJuKG8uZGF0YSxlKSk7Zm9yKDtuKHI9ci5wYXJlbnQpOylyJiZyLmRhdGEmJihlPVJuKGUsci5kYXRhKSk7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7aWYobih0KXx8bihlKSlyZXR1cm4gVW4odCxIbihlKSk7cmV0dXJuIiJ9KGUuc3RhdGljQ2xhc3MsZS5jbGFzcyl9ZnVuY3Rpb24gUm4odCxlKXtyZXR1cm57c3RhdGljQ2xhc3M6VW4odC5zdGF0aWNDbGFzcyxlLnN0YXRpY0NsYXNzKSxjbGFzczpuKHQuY2xhc3MpP1t0LmNsYXNzLGUuY2xhc3NdOmUuY2xhc3N9fWZ1bmN0aW9uIFVuKHQsZSl7cmV0dXJuIHQ/ZT90KyIgIitlOnQ6ZXx8IiJ9ZnVuY3Rpb24gSG4odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9IiIsbz0wLGk9dC5sZW5ndGg7bzxpO28rKyluKGU9SG4odFtvXSkpJiYiIiE9PWUmJihyJiYocis9IiAiKSxyKz1lKTtyZXR1cm4gcn0odCk6aSh0KT9mdW5jdGlvbih0KXt2YXIgZT0iIjtmb3IodmFyIG4gaW4gdCl0W25dJiYoZSYmKGUrPSIgIiksZSs9bik7cmV0dXJuIGV9KHQpOiJzdHJpbmciPT10eXBlb2YgdD90OiIifXZhciBWbj17c3ZnOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsbWF0aDoiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCJ9LEJuPWQoImh0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LGhncm91cCxuYXYsc2VjdGlvbixkaXYsZGQsZGwsZHQsZmlnY2FwdGlvbixmaWd1cmUscGljdHVyZSxocixpbWcsbGksbWFpbixvbCxwLHByZSx1bCxhLGIsYWJicixiZGksYmRvLGJyLGNpdGUsY29kZSxkYXRhLGRmbixlbSxpLGtiZCxtYXJrLHEscnAscnQscnRjLHJ1YnkscyxzYW1wLHNtYWxsLHNwYW4sc3Ryb25nLHN1YixzdXAsdGltZSx1LHZhcix3YnIsYXJlYSxhdWRpbyxtYXAsdHJhY2ssdmlkZW8sZW1iZWQsb2JqZWN0LHBhcmFtLHNvdXJjZSxjYW52YXMsc2NyaXB0LG5vc2NyaXB0LGRlbCxpbnMsY2FwdGlvbixjb2wsY29sZ3JvdXAsdGFibGUsdGhlYWQsdGJvZHksdGQsdGgsdHIsYnV0dG9uLGRhdGFsaXN0LGZpZWxkc2V0LGZvcm0saW5wdXQsbGFiZWwsbGVnZW5kLG1ldGVyLG9wdGdyb3VwLG9wdGlvbixvdXRwdXQscHJvZ3Jlc3Msc2VsZWN0LHRleHRhcmVhLGRldGFpbHMsZGlhbG9nLG1lbnUsbWVudWl0ZW0sc3VtbWFyeSxjb250ZW50LGVsZW1lbnQsc2hhZG93LHRlbXBsYXRlLGJsb2NrcXVvdGUsaWZyYW1lLHRmb290Iiksem49ZCgic3ZnLGFuaW1hdGUsY2lyY2xlLGNsaXBwYXRoLGN1cnNvcixkZWZzLGRlc2MsZWxsaXBzZSxmaWx0ZXIsZm9udC1mYWNlLGZvcmVpZ25PYmplY3QsZyxnbHlwaCxpbWFnZSxsaW5lLG1hcmtlcixtYXNrLG1pc3NpbmctZ2x5cGgscGF0aCxwYXR0ZXJuLHBvbHlnb24scG9seWxpbmUscmVjdCxzd2l0Y2gsc3ltYm9sLHRleHQsdGV4dHBhdGgsdHNwYW4sdXNlLHZpZXciLCEwKSxXbj1mdW5jdGlvbih0KXtyZXR1cm4gQm4odCl8fHpuKHQpfTt2YXIgcW49T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgS249ZCgidGV4dCxudW1iZXIscGFzc3dvcmQsc2VhcmNoLGVtYWlsLHRlbCx1cmwiKTt2YXIgWG49T2JqZWN0LmZyZWV6ZSh7Y3JlYXRlRWxlbWVudDpmdW5jdGlvbih0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7cmV0dXJuInNlbGVjdCIhPT10P246KGUuZGF0YSYmZS5kYXRhLmF0dHJzJiZ2b2lkIDAhPT1lLmRhdGEuYXR0cnMubXVsdGlwbGUmJm4uc2V0QXR0cmlidXRlKCJtdWx0aXBsZSIsIm11bHRpcGxlIiksbil9LGNyZWF0ZUVsZW1lbnROUzpmdW5jdGlvbih0LGUpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoVm5bdF0sZSl9LGNyZWF0ZVRleHROb2RlOmZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0KX0sY3JlYXRlQ29tbWVudDpmdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCh0KX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKHQsZSxuKXt0Lmluc2VydEJlZm9yZShlLG4pfSxyZW1vdmVDaGlsZDpmdW5jdGlvbih0LGUpe3QucmVtb3ZlQ2hpbGQoZSl9LGFwcGVuZENoaWxkOmZ1bmN0aW9uKHQsZSl7dC5hcHBlbmRDaGlsZChlKX0scGFyZW50Tm9kZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXJlbnROb2RlfSxuZXh0U2libGluZzpmdW5jdGlvbih0KXtyZXR1cm4gdC5uZXh0U2libGluZ30sdGFnTmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gdC50YWdOYW1lfSxzZXRUZXh0Q29udGVudDpmdW5jdGlvbih0LGUpe3QudGV4dENvbnRlbnQ9ZX0sc2V0U3R5bGVTY29wZTpmdW5jdGlvbih0LGUpe3Quc2V0QXR0cmlidXRlKGUsIiIpfX0pLEduPXtjcmVhdGU6ZnVuY3Rpb24odCxlKXtabihlKX0sdXBkYXRlOmZ1bmN0aW9uKHQsZSl7dC5kYXRhLnJlZiE9PWUuZGF0YS5yZWYmJihabih0LCEwKSxabihlKSl9LGRlc3Ryb3k6ZnVuY3Rpb24odCl7Wm4odCwhMCl9fTtmdW5jdGlvbiBabih0LGUpe3ZhciByPXQuZGF0YS5yZWY7aWYobihyKSl7dmFyIG89dC5jb250ZXh0LGk9dC5jb21wb25lbnRJbnN0YW5jZXx8dC5lbG0sYT1vLiRyZWZzO2U/QXJyYXkuaXNBcnJheShhW3JdKT92KGFbcl0saSk6YVtyXT09PWkmJihhW3JdPXZvaWQgMCk6dC5kYXRhLnJlZkluRm9yP0FycmF5LmlzQXJyYXkoYVtyXSk/YVtyXS5pbmRleE9mKGkpPDAmJmFbcl0ucHVzaChpKTphW3JdPVtpXTphW3JdPWl9fXZhciBKbj1uZXcgbHQoIiIse30sW10pLFFuPVsiY3JlYXRlIiwiYWN0aXZhdGUiLCJ1cGRhdGUiLCJyZW1vdmUiLCJkZXN0cm95Il07ZnVuY3Rpb24gWW4odCxvKXtyZXR1cm4gdC5rZXk9PT1vLmtleSYmKHQudGFnPT09by50YWcmJnQuaXNDb21tZW50PT09by5pc0NvbW1lbnQmJm4odC5kYXRhKT09PW4oby5kYXRhKSYmZnVuY3Rpb24odCxlKXtpZigiaW5wdXQiIT09dC50YWcpcmV0dXJuITA7dmFyIHIsbz1uKHI9dC5kYXRhKSYmbihyPXIuYXR0cnMpJiZyLnR5cGUsaT1uKHI9ZS5kYXRhKSYmbihyPXIuYXR0cnMpJiZyLnR5cGU7cmV0dXJuIG89PT1pfHxLbihvKSYmS24oaSl9KHQsbyl8fHIodC5pc0FzeW5jUGxhY2Vob2xkZXIpJiZ0LmFzeW5jRmFjdG9yeT09PW8uYXN5bmNGYWN0b3J5JiZlKG8uYXN5bmNGYWN0b3J5LmVycm9yKSl9ZnVuY3Rpb24gdHIodCxlLHIpe3ZhciBvLGksYT17fTtmb3Iobz1lO288PXI7KytvKW4oaT10W29dLmtleSkmJihhW2ldPW8pO3JldHVybiBhfXZhciBlcj17Y3JlYXRlOm5yLHVwZGF0ZTpucixkZXN0cm95OmZ1bmN0aW9uKHQpe25yKHQsSm4pfX07ZnVuY3Rpb24gbnIodCxlKXsodC5kYXRhLmRpcmVjdGl2ZXN8fGUuZGF0YS5kaXJlY3RpdmVzKSYmZnVuY3Rpb24odCxlKXt2YXIgbixyLG8saT10PT09Sm4sYT1lPT09Sm4scz1vcih0LmRhdGEuZGlyZWN0aXZlcyx0LmNvbnRleHQpLGM9b3IoZS5kYXRhLmRpcmVjdGl2ZXMsZS5jb250ZXh0KSx1PVtdLGw9W107Zm9yKG4gaW4gYylyPXNbbl0sbz1jW25dLHI/KG8ub2xkVmFsdWU9ci52YWx1ZSxvLm9sZEFyZz1yLmFyZyxhcihvLCJ1cGRhdGUiLGUsdCksby5kZWYmJm8uZGVmLmNvbXBvbmVudFVwZGF0ZWQmJmwucHVzaChvKSk6KGFyKG8sImJpbmQiLGUsdCksby5kZWYmJm8uZGVmLmluc2VydGVkJiZ1LnB1c2gobykpO2lmKHUubGVuZ3RoKXt2YXIgZj1mdW5jdGlvbigpe2Zvcih2YXIgbj0wO248dS5sZW5ndGg7bisrKWFyKHVbbl0sImluc2VydGVkIixlLHQpfTtpP25lKGUsImluc2VydCIsZik6ZigpfWwubGVuZ3RoJiZuZShlLCJwb3N0cGF0Y2giLGZ1bmN0aW9uKCl7Zm9yKHZhciBuPTA7bjxsLmxlbmd0aDtuKyspYXIobFtuXSwiY29tcG9uZW50VXBkYXRlZCIsZSx0KX0pO2lmKCFpKWZvcihuIGluIHMpY1tuXXx8YXIoc1tuXSwidW5iaW5kIix0LHQsYSl9KHQsZSl9dmFyIHJyPU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gb3IodCxlKXt2YXIgbixyLG89T2JqZWN0LmNyZWF0ZShudWxsKTtpZighdClyZXR1cm4gbztmb3Iobj0wO248dC5sZW5ndGg7bisrKShyPXRbbl0pLm1vZGlmaWVyc3x8KHIubW9kaWZpZXJzPXJyKSxvW2lyKHIpXT1yLHIuZGVmPUl0KGUuJG9wdGlvbnMsImRpcmVjdGl2ZXMiLHIubmFtZSk7cmV0dXJuIG99ZnVuY3Rpb24gaXIodCl7cmV0dXJuIHQucmF3TmFtZXx8dC5uYW1lKyIuIitPYmplY3Qua2V5cyh0Lm1vZGlmaWVyc3x8e30pLmpvaW4oIi4iKX1mdW5jdGlvbiBhcih0LGUsbixyLG8pe3ZhciBpPXQuZGVmJiZ0LmRlZltlXTtpZihpKXRyeXtpKG4uZWxtLHQsbixyLG8pfWNhdGNoKHIpe010KHIsbi5jb250ZXh0LCJkaXJlY3RpdmUgIit0Lm5hbWUrIiAiK2UrIiBob29rIil9fXZhciBzcj1bR24sZXJdO2Z1bmN0aW9uIGNyKHQscil7dmFyIG89ci5jb21wb25lbnRPcHRpb25zO2lmKCEobihvKSYmITE9PT1vLkN0b3Iub3B0aW9ucy5pbmhlcml0QXR0cnN8fGUodC5kYXRhLmF0dHJzKSYmZShyLmRhdGEuYXR0cnMpKSl7dmFyIGksYSxzPXIuZWxtLGM9dC5kYXRhLmF0dHJzfHx7fSx1PXIuZGF0YS5hdHRyc3x8e307Zm9yKGkgaW4gbih1Ll9fb2JfXykmJih1PXIuZGF0YS5hdHRycz14KHt9LHUpKSx1KWE9dVtpXSxjW2ldIT09YSYmdXIocyxpLGEpO2ZvcihpIGluKFd8fEspJiZ1LnZhbHVlIT09Yy52YWx1ZSYmdXIocywidmFsdWUiLHUudmFsdWUpLGMpZSh1W2ldKSYmKFBuKGkpP3MucmVtb3ZlQXR0cmlidXRlTlMoTm4sTG4oaSkpOmpuKGkpfHxzLnJlbW92ZUF0dHJpYnV0ZShpKSl9fWZ1bmN0aW9uIHVyKHQsZSxuKXt0LnRhZ05hbWUuaW5kZXhPZigiLSIpPi0xP2xyKHQsZSxuKTpEbihlKT9NbihuKT90LnJlbW92ZUF0dHJpYnV0ZShlKToobj0iYWxsb3dmdWxsc2NyZWVuIj09PWUmJiJFTUJFRCI9PT10LnRhZ05hbWU/InRydWUiOmUsdC5zZXRBdHRyaWJ1dGUoZSxuKSk6am4oZSk/dC5zZXRBdHRyaWJ1dGUoZSxJbihlLG4pKTpQbihlKT9NbihuKT90LnJlbW92ZUF0dHJpYnV0ZU5TKE5uLExuKGUpKTp0LnNldEF0dHJpYnV0ZU5TKE5uLGUsbik6bHIodCxlLG4pfWZ1bmN0aW9uIGxyKHQsZSxuKXtpZihNbihuKSl0LnJlbW92ZUF0dHJpYnV0ZShlKTtlbHNle2lmKFcmJiFxJiYiVEVYVEFSRUEiPT09dC50YWdOYW1lJiYicGxhY2Vob2xkZXIiPT09ZSYmIiIhPT1uJiYhdC5fX2llcGgpe3ZhciByPWZ1bmN0aW9uKGUpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdC5yZW1vdmVFdmVudExpc3RlbmVyKCJpbnB1dCIscil9O3QuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHIpLHQuX19pZXBoPSEwfXQuc2V0QXR0cmlidXRlKGUsbil9fXZhciBmcj17Y3JlYXRlOmNyLHVwZGF0ZTpjcn07ZnVuY3Rpb24gZHIodCxyKXt2YXIgbz1yLmVsbSxpPXIuZGF0YSxhPXQuZGF0YTtpZighKGUoaS5zdGF0aWNDbGFzcykmJmUoaS5jbGFzcykmJihlKGEpfHxlKGEuc3RhdGljQ2xhc3MpJiZlKGEuY2xhc3MpKSkpe3ZhciBzPUZuKHIpLGM9by5fdHJhbnNpdGlvbkNsYXNzZXM7bihjKSYmKHM9VW4ocyxIbihjKSkpLHMhPT1vLl9wcmV2Q2xhc3MmJihvLnNldEF0dHJpYnV0ZSgiY2xhc3MiLHMpLG8uX3ByZXZDbGFzcz1zKX19dmFyIHByLHZyPXtjcmVhdGU6ZHIsdXBkYXRlOmRyfSxocj0iX19yIixtcj0iX19jIjtmdW5jdGlvbiB5cih0LGUsbil7dmFyIHI9cHI7cmV0dXJuIGZ1bmN0aW9uIG8oKXtudWxsIT09ZS5hcHBseShudWxsLGFyZ3VtZW50cykmJmJyKHQsbyxuLHIpfX12YXIgZ3I9VnQmJiEoRyYmTnVtYmVyKEdbMV0pPD01Myk7ZnVuY3Rpb24gX3IodCxlLG4scil7aWYoZ3Ipe3ZhciBvPXJuLGk9ZTtlPWkuX3dyYXBwZXI9ZnVuY3Rpb24odCl7aWYodC50YXJnZXQ9PT10LmN1cnJlbnRUYXJnZXR8fHQudGltZVN0YW1wPj1vfHx0LnRpbWVTdGFtcDw9MHx8dC50YXJnZXQub3duZXJEb2N1bWVudCE9PWRvY3VtZW50KXJldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19cHIuYWRkRXZlbnRMaXN0ZW5lcih0LGUsSj97Y2FwdHVyZTpuLHBhc3NpdmU6cn06bil9ZnVuY3Rpb24gYnIodCxlLG4scil7KHJ8fHByKS5yZW1vdmVFdmVudExpc3RlbmVyKHQsZS5fd3JhcHBlcnx8ZSxuKX1mdW5jdGlvbiBDcih0LHIpe2lmKCFlKHQuZGF0YS5vbil8fCFlKHIuZGF0YS5vbikpe3ZhciBvPXIuZGF0YS5vbnx8e30saT10LmRhdGEub258fHt9O3ByPXIuZWxtLGZ1bmN0aW9uKHQpe2lmKG4odFtocl0pKXt2YXIgZT1XPyJjaGFuZ2UiOiJpbnB1dCI7dFtlXT1bXS5jb25jYXQodFtocl0sdFtlXXx8W10pLGRlbGV0ZSB0W2hyXX1uKHRbbXJdKSYmKHQuY2hhbmdlPVtdLmNvbmNhdCh0W21yXSx0LmNoYW5nZXx8W10pLGRlbGV0ZSB0W21yXSl9KG8pLGVlKG8saSxfcixicix5cixyLmNvbnRleHQpLHByPXZvaWQgMH19dmFyICRyLHdyPXtjcmVhdGU6Q3IsdXBkYXRlOkNyfTtmdW5jdGlvbiBBcih0LHIpe2lmKCFlKHQuZGF0YS5kb21Qcm9wcyl8fCFlKHIuZGF0YS5kb21Qcm9wcykpe3ZhciBvLGksYT1yLmVsbSxzPXQuZGF0YS5kb21Qcm9wc3x8e30sYz1yLmRhdGEuZG9tUHJvcHN8fHt9O2ZvcihvIGluIG4oYy5fX29iX18pJiYoYz1yLmRhdGEuZG9tUHJvcHM9eCh7fSxjKSkscylvIGluIGN8fChhW29dPSIiKTtmb3IobyBpbiBjKXtpZihpPWNbb10sInRleHRDb250ZW50Ij09PW98fCJpbm5lckhUTUwiPT09byl7aWYoci5jaGlsZHJlbiYmKHIuY2hpbGRyZW4ubGVuZ3RoPTApLGk9PT1zW29dKWNvbnRpbnVlOzE9PT1hLmNoaWxkTm9kZXMubGVuZ3RoJiZhLnJlbW92ZUNoaWxkKGEuY2hpbGROb2Rlc1swXSl9aWYoInZhbHVlIj09PW8mJiJQUk9HUkVTUyIhPT1hLnRhZ05hbWUpe2EuX3ZhbHVlPWk7dmFyIHU9ZShpKT8iIjpTdHJpbmcoaSk7eHIoYSx1KSYmKGEudmFsdWU9dSl9ZWxzZSBpZigiaW5uZXJIVE1MIj09PW8mJnpuKGEudGFnTmFtZSkmJmUoYS5pbm5lckhUTUwpKXsoJHI9JHJ8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5pbm5lckhUTUw9Ijxzdmc+IitpKyI8L3N2Zz4iO2Zvcih2YXIgbD0kci5maXJzdENoaWxkO2EuZmlyc3RDaGlsZDspYS5yZW1vdmVDaGlsZChhLmZpcnN0Q2hpbGQpO2Zvcig7bC5maXJzdENoaWxkOylhLmFwcGVuZENoaWxkKGwuZmlyc3RDaGlsZCl9ZWxzZSBpZihpIT09c1tvXSl0cnl7YVtvXT1pfWNhdGNoKHQpe319fX1mdW5jdGlvbiB4cih0LGUpe3JldHVybiF0LmNvbXBvc2luZyYmKCJPUFRJT04iPT09dC50YWdOYW1lfHxmdW5jdGlvbih0LGUpe3ZhciBuPSEwO3RyeXtuPWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQhPT10fWNhdGNoKHQpe31yZXR1cm4gbiYmdC52YWx1ZSE9PWV9KHQsZSl8fGZ1bmN0aW9uKHQsZSl7dmFyIHI9dC52YWx1ZSxvPXQuX3ZNb2RpZmllcnM7aWYobihvKSl7aWYoby5udW1iZXIpcmV0dXJuIGYocikhPT1mKGUpO2lmKG8udHJpbSlyZXR1cm4gci50cmltKCkhPT1lLnRyaW0oKX1yZXR1cm4gciE9PWV9KHQsZSkpfXZhciBPcj17Y3JlYXRlOkFyLHVwZGF0ZTpBcn0sa3I9eShmdW5jdGlvbih0KXt2YXIgZT17fSxuPS86KC4rKS87cmV0dXJuIHQuc3BsaXQoLzsoPyFbXihdKlwpKS9nKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQpe3ZhciByPXQuc3BsaXQobik7ci5sZW5ndGg+MSYmKGVbclswXS50cmltKCldPXJbMV0udHJpbSgpKX19KSxlfSk7ZnVuY3Rpb24gU3IodCl7dmFyIGU9RXIodC5zdHlsZSk7cmV0dXJuIHQuc3RhdGljU3R5bGU/eCh0LnN0YXRpY1N0eWxlLGUpOmV9ZnVuY3Rpb24gRXIodCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/Tyh0KToic3RyaW5nIj09dHlwZW9mIHQ/a3IodCk6dH12YXIganIsVHI9L14tLS8sSXI9L1xzKiFpbXBvcnRhbnQkLyxEcj1mdW5jdGlvbih0LGUsbil7aWYoVHIudGVzdChlKSl0LnN0eWxlLnNldFByb3BlcnR5KGUsbik7ZWxzZSBpZihJci50ZXN0KG4pKXQuc3R5bGUuc2V0UHJvcGVydHkoJChlKSxuLnJlcGxhY2UoSXIsIiIpLCJpbXBvcnRhbnQiKTtlbHNle3ZhciByPVByKGUpO2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHZhciBvPTAsaT1uLmxlbmd0aDtvPGk7bysrKXQuc3R5bGVbcl09bltvXTtlbHNlIHQuc3R5bGVbcl09bn19LE5yPVsiV2Via2l0IiwiTW96IiwibXMiXSxQcj15KGZ1bmN0aW9uKHQpe2lmKGpyPWpyfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSwiZmlsdGVyIiE9PSh0PV8odCkpJiZ0IGluIGpyKXJldHVybiB0O2Zvcih2YXIgZT10LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSksbj0wO248TnIubGVuZ3RoO24rKyl7dmFyIHI9TnJbbl0rZTtpZihyIGluIGpyKXJldHVybiByfX0pO2Z1bmN0aW9uIExyKHQscil7dmFyIG89ci5kYXRhLGk9dC5kYXRhO2lmKCEoZShvLnN0YXRpY1N0eWxlKSYmZShvLnN0eWxlKSYmZShpLnN0YXRpY1N0eWxlKSYmZShpLnN0eWxlKSkpe3ZhciBhLHMsYz1yLmVsbSx1PWkuc3RhdGljU3R5bGUsbD1pLm5vcm1hbGl6ZWRTdHlsZXx8aS5zdHlsZXx8e30sZj11fHxsLGQ9RXIoci5kYXRhLnN0eWxlKXx8e307ci5kYXRhLm5vcm1hbGl6ZWRTdHlsZT1uKGQuX19vYl9fKT94KHt9LGQpOmQ7dmFyIHA9ZnVuY3Rpb24odCxlKXt2YXIgbixyPXt9O2lmKGUpZm9yKHZhciBvPXQ7by5jb21wb25lbnRJbnN0YW5jZTspKG89by5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUpJiZvLmRhdGEmJihuPVNyKG8uZGF0YSkpJiZ4KHIsbik7KG49U3IodC5kYXRhKSkmJngocixuKTtmb3IodmFyIGk9dDtpPWkucGFyZW50OylpLmRhdGEmJihuPVNyKGkuZGF0YSkpJiZ4KHIsbik7cmV0dXJuIHJ9KHIsITApO2ZvcihzIGluIGYpZShwW3NdKSYmRHIoYyxzLCIiKTtmb3IocyBpbiBwKShhPXBbc10pIT09ZltzXSYmRHIoYyxzLG51bGw9PWE/IiI6YSl9fXZhciBNcj17Y3JlYXRlOkxyLHVwZGF0ZTpMcn0sRnI9L1xzKy87ZnVuY3Rpb24gUnIodCxlKXtpZihlJiYoZT1lLnRyaW0oKSkpaWYodC5jbGFzc0xpc3QpZS5pbmRleE9mKCIgIik+LTE/ZS5zcGxpdChGcikuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5jbGFzc0xpc3QuYWRkKGUpfSk6dC5jbGFzc0xpc3QuYWRkKGUpO2Vsc2V7dmFyIG49IiAiKyh0LmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpKyIgIjtuLmluZGV4T2YoIiAiK2UrIiAiKTwwJiZ0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLChuK2UpLnRyaW0oKSl9fWZ1bmN0aW9uIFVyKHQsZSl7aWYoZSYmKGU9ZS50cmltKCkpKWlmKHQuY2xhc3NMaXN0KWUuaW5kZXhPZigiICIpPi0xP2Uuc3BsaXQoRnIpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2xhc3NMaXN0LnJlbW92ZShlKX0pOnQuY2xhc3NMaXN0LnJlbW92ZShlKSx0LmNsYXNzTGlzdC5sZW5ndGh8fHQucmVtb3ZlQXR0cmlidXRlKCJjbGFzcyIpO2Vsc2V7Zm9yKHZhciBuPSIgIisodC5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKSsiICIscj0iICIrZSsiICI7bi5pbmRleE9mKHIpPj0wOyluPW4ucmVwbGFjZShyLCIgIik7KG49bi50cmltKCkpP3Quc2V0QXR0cmlidXRlKCJjbGFzcyIsbik6dC5yZW1vdmVBdHRyaWJ1dGUoImNsYXNzIil9fWZ1bmN0aW9uIEhyKHQpe2lmKHQpe2lmKCJvYmplY3QiPT10eXBlb2YgdCl7dmFyIGU9e307cmV0dXJuITEhPT10LmNzcyYmeChlLFZyKHQubmFtZXx8InYiKSkseChlLHQpLGV9cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P1ZyKHQpOnZvaWQgMH19dmFyIFZyPXkoZnVuY3Rpb24odCl7cmV0dXJue2VudGVyQ2xhc3M6dCsiLWVudGVyIixlbnRlclRvQ2xhc3M6dCsiLWVudGVyLXRvIixlbnRlckFjdGl2ZUNsYXNzOnQrIi1lbnRlci1hY3RpdmUiLGxlYXZlQ2xhc3M6dCsiLWxlYXZlIixsZWF2ZVRvQ2xhc3M6dCsiLWxlYXZlLXRvIixsZWF2ZUFjdGl2ZUNsYXNzOnQrIi1sZWF2ZS1hY3RpdmUifX0pLEJyPUgmJiFxLHpyPSJ0cmFuc2l0aW9uIixXcj0iYW5pbWF0aW9uIixxcj0idHJhbnNpdGlvbiIsS3I9InRyYW5zaXRpb25lbmQiLFhyPSJhbmltYXRpb24iLEdyPSJhbmltYXRpb25lbmQiO0JyJiYodm9pZCAwPT09d2luZG93Lm9udHJhbnNpdGlvbmVuZCYmdm9pZCAwIT09d2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCYmKHFyPSJXZWJraXRUcmFuc2l0aW9uIixLcj0id2Via2l0VHJhbnNpdGlvbkVuZCIpLHZvaWQgMD09PXdpbmRvdy5vbmFuaW1hdGlvbmVuZCYmdm9pZCAwIT09d2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kJiYoWHI9IldlYmtpdEFuaW1hdGlvbiIsR3I9IndlYmtpdEFuaW1hdGlvbkVuZCIpKTt2YXIgWnI9SD93aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lP3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpOnNldFRpbWVvdXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQoKX07ZnVuY3Rpb24gSnIodCl7WnIoZnVuY3Rpb24oKXtacih0KX0pfWZ1bmN0aW9uIFFyKHQsZSl7dmFyIG49dC5fdHJhbnNpdGlvbkNsYXNzZXN8fCh0Ll90cmFuc2l0aW9uQ2xhc3Nlcz1bXSk7bi5pbmRleE9mKGUpPDAmJihuLnB1c2goZSksUnIodCxlKSl9ZnVuY3Rpb24gWXIodCxlKXt0Ll90cmFuc2l0aW9uQ2xhc3NlcyYmdih0Ll90cmFuc2l0aW9uQ2xhc3NlcyxlKSxVcih0LGUpfWZ1bmN0aW9uIHRvKHQsZSxuKXt2YXIgcj1ubyh0LGUpLG89ci50eXBlLGk9ci50aW1lb3V0LGE9ci5wcm9wQ291bnQ7aWYoIW8pcmV0dXJuIG4oKTt2YXIgcz1vPT09enI/S3I6R3IsYz0wLHU9ZnVuY3Rpb24oKXt0LnJlbW92ZUV2ZW50TGlzdGVuZXIocyxsKSxuKCl9LGw9ZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PT10JiYrK2M+PWEmJnUoKX07c2V0VGltZW91dChmdW5jdGlvbigpe2M8YSYmdSgpfSxpKzEpLHQuYWRkRXZlbnRMaXN0ZW5lcihzLGwpfXZhciBlbz0vXGIodHJhbnNmb3JtfGFsbCkoLHwkKS87ZnVuY3Rpb24gbm8odCxlKXt2YXIgbixyPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLG89KHJbcXIrIkRlbGF5Il18fCIiKS5zcGxpdCgiLCAiKSxpPShyW3FyKyJEdXJhdGlvbiJdfHwiIikuc3BsaXQoIiwgIiksYT1ybyhvLGkpLHM9KHJbWHIrIkRlbGF5Il18fCIiKS5zcGxpdCgiLCAiKSxjPShyW1hyKyJEdXJhdGlvbiJdfHwiIikuc3BsaXQoIiwgIiksdT1ybyhzLGMpLGw9MCxmPTA7cmV0dXJuIGU9PT16cj9hPjAmJihuPXpyLGw9YSxmPWkubGVuZ3RoKTplPT09V3I/dT4wJiYobj1XcixsPXUsZj1jLmxlbmd0aCk6Zj0obj0obD1NYXRoLm1heChhLHUpKT4wP2E+dT96cjpXcjpudWxsKT9uPT09enI/aS5sZW5ndGg6Yy5sZW5ndGg6MCx7dHlwZTpuLHRpbWVvdXQ6bCxwcm9wQ291bnQ6ZixoYXNUcmFuc2Zvcm06bj09PXpyJiZlby50ZXN0KHJbcXIrIlByb3BlcnR5Il0pfX1mdW5jdGlvbiBybyh0LGUpe2Zvcig7dC5sZW5ndGg8ZS5sZW5ndGg7KXQ9dC5jb25jYXQodCk7cmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsZS5tYXAoZnVuY3Rpb24oZSxuKXtyZXR1cm4gb28oZSkrb28odFtuXSl9KSl9ZnVuY3Rpb24gb28odCl7cmV0dXJuIDFlMypOdW1iZXIodC5zbGljZSgwLC0xKS5yZXBsYWNlKCIsIiwiLiIpKX1mdW5jdGlvbiBpbyh0LHIpe3ZhciBvPXQuZWxtO24oby5fbGVhdmVDYikmJihvLl9sZWF2ZUNiLmNhbmNlbGxlZD0hMCxvLl9sZWF2ZUNiKCkpO3ZhciBhPUhyKHQuZGF0YS50cmFuc2l0aW9uKTtpZighZShhKSYmIW4oby5fZW50ZXJDYikmJjE9PT1vLm5vZGVUeXBlKXtmb3IodmFyIHM9YS5jc3MsYz1hLnR5cGUsdT1hLmVudGVyQ2xhc3MsbD1hLmVudGVyVG9DbGFzcyxkPWEuZW50ZXJBY3RpdmVDbGFzcyxwPWEuYXBwZWFyQ2xhc3Msdj1hLmFwcGVhclRvQ2xhc3MsaD1hLmFwcGVhckFjdGl2ZUNsYXNzLG09YS5iZWZvcmVFbnRlcix5PWEuZW50ZXIsZz1hLmFmdGVyRW50ZXIsXz1hLmVudGVyQ2FuY2VsbGVkLGI9YS5iZWZvcmVBcHBlYXIsQz1hLmFwcGVhciwkPWEuYWZ0ZXJBcHBlYXIsdz1hLmFwcGVhckNhbmNlbGxlZCxBPWEuZHVyYXRpb24seD1xZSxPPXFlLiR2bm9kZTtPJiZPLnBhcmVudDspeD1PLmNvbnRleHQsTz1PLnBhcmVudDt2YXIgaz0heC5faXNNb3VudGVkfHwhdC5pc1Jvb3RJbnNlcnQ7aWYoIWt8fEN8fCIiPT09Qyl7dmFyIFM9ayYmcD9wOnUsRT1rJiZoP2g6ZCxqPWsmJnY/djpsLFQ9ayYmYnx8bSxEPWsmJiJmdW5jdGlvbiI9PXR5cGVvZiBDP0M6eSxOPWsmJiR8fGcsUD1rJiZ3fHxfLEw9ZihpKEEpP0EuZW50ZXI6QSksTT0hMSE9PXMmJiFxLEY9Y28oRCksUj1vLl9lbnRlckNiPUkoZnVuY3Rpb24oKXtNJiYoWXIobyxqKSxZcihvLEUpKSxSLmNhbmNlbGxlZD8oTSYmWXIobyxTKSxQJiZQKG8pKTpOJiZOKG8pLG8uX2VudGVyQ2I9bnVsbH0pO3QuZGF0YS5zaG93fHxuZSh0LCJpbnNlcnQiLGZ1bmN0aW9uKCl7dmFyIGU9by5wYXJlbnROb2RlLG49ZSYmZS5fcGVuZGluZyYmZS5fcGVuZGluZ1t0LmtleV07biYmbi50YWc9PT10LnRhZyYmbi5lbG0uX2xlYXZlQ2ImJm4uZWxtLl9sZWF2ZUNiKCksRCYmRChvLFIpfSksVCYmVChvKSxNJiYoUXIobyxTKSxRcihvLEUpLEpyKGZ1bmN0aW9uKCl7WXIobyxTKSxSLmNhbmNlbGxlZHx8KFFyKG8saiksRnx8KHNvKEwpP3NldFRpbWVvdXQoUixMKTp0byhvLGMsUikpKX0pKSx0LmRhdGEuc2hvdyYmKHImJnIoKSxEJiZEKG8sUikpLE18fEZ8fFIoKX19fWZ1bmN0aW9uIGFvKHQscil7dmFyIG89dC5lbG07bihvLl9lbnRlckNiKSYmKG8uX2VudGVyQ2IuY2FuY2VsbGVkPSEwLG8uX2VudGVyQ2IoKSk7dmFyIGE9SHIodC5kYXRhLnRyYW5zaXRpb24pO2lmKGUoYSl8fDEhPT1vLm5vZGVUeXBlKXJldHVybiByKCk7aWYoIW4oby5fbGVhdmVDYikpe3ZhciBzPWEuY3NzLGM9YS50eXBlLHU9YS5sZWF2ZUNsYXNzLGw9YS5sZWF2ZVRvQ2xhc3MsZD1hLmxlYXZlQWN0aXZlQ2xhc3MscD1hLmJlZm9yZUxlYXZlLHY9YS5sZWF2ZSxoPWEuYWZ0ZXJMZWF2ZSxtPWEubGVhdmVDYW5jZWxsZWQseT1hLmRlbGF5TGVhdmUsZz1hLmR1cmF0aW9uLF89ITEhPT1zJiYhcSxiPWNvKHYpLEM9ZihpKGcpP2cubGVhdmU6ZyksJD1vLl9sZWF2ZUNiPUkoZnVuY3Rpb24oKXtvLnBhcmVudE5vZGUmJm8ucGFyZW50Tm9kZS5fcGVuZGluZyYmKG8ucGFyZW50Tm9kZS5fcGVuZGluZ1t0LmtleV09bnVsbCksXyYmKFlyKG8sbCksWXIobyxkKSksJC5jYW5jZWxsZWQ/KF8mJllyKG8sdSksbSYmbShvKSk6KHIoKSxoJiZoKG8pKSxvLl9sZWF2ZUNiPW51bGx9KTt5P3kodyk6dygpfWZ1bmN0aW9uIHcoKXskLmNhbmNlbGxlZHx8KCF0LmRhdGEuc2hvdyYmby5wYXJlbnROb2RlJiYoKG8ucGFyZW50Tm9kZS5fcGVuZGluZ3x8KG8ucGFyZW50Tm9kZS5fcGVuZGluZz17fSkpW3Qua2V5XT10KSxwJiZwKG8pLF8mJihRcihvLHUpLFFyKG8sZCksSnIoZnVuY3Rpb24oKXtZcihvLHUpLCQuY2FuY2VsbGVkfHwoUXIobyxsKSxifHwoc28oQyk/c2V0VGltZW91dCgkLEMpOnRvKG8sYywkKSkpfSkpLHYmJnYobywkKSxffHxifHwkKCkpfX1mdW5jdGlvbiBzbyh0KXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQmJiFpc05hTih0KX1mdW5jdGlvbiBjbyh0KXtpZihlKHQpKXJldHVybiExO3ZhciByPXQuZm5zO3JldHVybiBuKHIpP2NvKEFycmF5LmlzQXJyYXkocik/clswXTpyKToodC5fbGVuZ3RofHx0Lmxlbmd0aCk+MX1mdW5jdGlvbiB1byh0LGUpeyEwIT09ZS5kYXRhLnNob3cmJmlvKGUpfXZhciBsbz1mdW5jdGlvbih0KXt2YXIgaSxhLHM9e30sYz10Lm1vZHVsZXMsdT10Lm5vZGVPcHM7Zm9yKGk9MDtpPFFuLmxlbmd0aDsrK2kpZm9yKHNbUW5baV1dPVtdLGE9MDthPGMubGVuZ3RoOysrYSluKGNbYV1bUW5baV1dKSYmc1tRbltpXV0ucHVzaChjW2FdW1FuW2ldXSk7ZnVuY3Rpb24gbCh0KXt2YXIgZT11LnBhcmVudE5vZGUodCk7bihlKSYmdS5yZW1vdmVDaGlsZChlLHQpfWZ1bmN0aW9uIGYodCxlLG8saSxhLGMsbCl7aWYobih0LmVsbSkmJm4oYykmJih0PWNbbF09dnQodCkpLHQuaXNSb290SW5zZXJ0PSFhLCFmdW5jdGlvbih0LGUsbyxpKXt2YXIgYT10LmRhdGE7aWYobihhKSl7dmFyIGM9bih0LmNvbXBvbmVudEluc3RhbmNlKSYmYS5rZWVwQWxpdmU7aWYobihhPWEuaG9vaykmJm4oYT1hLmluaXQpJiZhKHQsITEpLG4odC5jb21wb25lbnRJbnN0YW5jZSkpcmV0dXJuIHAodCxlKSx2KG8sdC5lbG0saSkscihjKSYmZnVuY3Rpb24odCxlLHIsbyl7Zm9yKHZhciBpLGE9dDthLmNvbXBvbmVudEluc3RhbmNlOylpZihhPWEuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlLG4oaT1hLmRhdGEpJiZuKGk9aS50cmFuc2l0aW9uKSl7Zm9yKGk9MDtpPHMuYWN0aXZhdGUubGVuZ3RoOysraSlzLmFjdGl2YXRlW2ldKEpuLGEpO2UucHVzaChhKTticmVha312KHIsdC5lbG0sbyl9KHQsZSxvLGkpLCEwfX0odCxlLG8saSkpe3ZhciBmPXQuZGF0YSxkPXQuY2hpbGRyZW4sbT10LnRhZztuKG0pPyh0LmVsbT10Lm5zP3UuY3JlYXRlRWxlbWVudE5TKHQubnMsbSk6dS5jcmVhdGVFbGVtZW50KG0sdCksZyh0KSxoKHQsZCxlKSxuKGYpJiZ5KHQsZSksdihvLHQuZWxtLGkpKTpyKHQuaXNDb21tZW50KT8odC5lbG09dS5jcmVhdGVDb21tZW50KHQudGV4dCksdihvLHQuZWxtLGkpKToodC5lbG09dS5jcmVhdGVUZXh0Tm9kZSh0LnRleHQpLHYobyx0LmVsbSxpKSl9fWZ1bmN0aW9uIHAodCxlKXtuKHQuZGF0YS5wZW5kaW5nSW5zZXJ0KSYmKGUucHVzaC5hcHBseShlLHQuZGF0YS5wZW5kaW5nSW5zZXJ0KSx0LmRhdGEucGVuZGluZ0luc2VydD1udWxsKSx0LmVsbT10LmNvbXBvbmVudEluc3RhbmNlLiRlbCxtKHQpPyh5KHQsZSksZyh0KSk6KFpuKHQpLGUucHVzaCh0KSl9ZnVuY3Rpb24gdih0LGUscil7bih0KSYmKG4ocik/dS5wYXJlbnROb2RlKHIpPT09dCYmdS5pbnNlcnRCZWZvcmUodCxlLHIpOnUuYXBwZW5kQ2hpbGQodCxlKSl9ZnVuY3Rpb24gaCh0LGUsbil7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoOysrcilmKGVbcl0sbix0LmVsbSxudWxsLCEwLGUscik7ZWxzZSBvKHQudGV4dCkmJnUuYXBwZW5kQ2hpbGQodC5lbG0sdS5jcmVhdGVUZXh0Tm9kZShTdHJpbmcodC50ZXh0KSkpfWZ1bmN0aW9uIG0odCl7Zm9yKDt0LmNvbXBvbmVudEluc3RhbmNlOyl0PXQuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlO3JldHVybiBuKHQudGFnKX1mdW5jdGlvbiB5KHQsZSl7Zm9yKHZhciByPTA7cjxzLmNyZWF0ZS5sZW5ndGg7KytyKXMuY3JlYXRlW3JdKEpuLHQpO24oaT10LmRhdGEuaG9vaykmJihuKGkuY3JlYXRlKSYmaS5jcmVhdGUoSm4sdCksbihpLmluc2VydCkmJmUucHVzaCh0KSl9ZnVuY3Rpb24gZyh0KXt2YXIgZTtpZihuKGU9dC5mblNjb3BlSWQpKXUuc2V0U3R5bGVTY29wZSh0LmVsbSxlKTtlbHNlIGZvcih2YXIgcj10O3I7KW4oZT1yLmNvbnRleHQpJiZuKGU9ZS4kb3B0aW9ucy5fc2NvcGVJZCkmJnUuc2V0U3R5bGVTY29wZSh0LmVsbSxlKSxyPXIucGFyZW50O24oZT1xZSkmJmUhPT10LmNvbnRleHQmJmUhPT10LmZuQ29udGV4dCYmbihlPWUuJG9wdGlvbnMuX3Njb3BlSWQpJiZ1LnNldFN0eWxlU2NvcGUodC5lbG0sZSl9ZnVuY3Rpb24gXyh0LGUsbixyLG8saSl7Zm9yKDtyPD1vOysrcilmKG5bcl0saSx0LGUsITEsbixyKX1mdW5jdGlvbiBiKHQpe3ZhciBlLHIsbz10LmRhdGE7aWYobihvKSlmb3IobihlPW8uaG9vaykmJm4oZT1lLmRlc3Ryb3kpJiZlKHQpLGU9MDtlPHMuZGVzdHJveS5sZW5ndGg7KytlKXMuZGVzdHJveVtlXSh0KTtpZihuKGU9dC5jaGlsZHJlbikpZm9yKHI9MDtyPHQuY2hpbGRyZW4ubGVuZ3RoOysrciliKHQuY2hpbGRyZW5bcl0pfWZ1bmN0aW9uIEModCxlLHIpe2Zvcig7ZTw9cjsrK2Upe3ZhciBvPXRbZV07bihvKSYmKG4oby50YWcpPygkKG8pLGIobykpOmwoby5lbG0pKX19ZnVuY3Rpb24gJCh0LGUpe2lmKG4oZSl8fG4odC5kYXRhKSl7dmFyIHIsbz1zLnJlbW92ZS5sZW5ndGgrMTtmb3IobihlKT9lLmxpc3RlbmVycys9bzplPWZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbigpezA9PS0tbi5saXN0ZW5lcnMmJmwodCl9cmV0dXJuIG4ubGlzdGVuZXJzPWUsbn0odC5lbG0sbyksbihyPXQuY29tcG9uZW50SW5zdGFuY2UpJiZuKHI9ci5fdm5vZGUpJiZuKHIuZGF0YSkmJiQocixlKSxyPTA7cjxzLnJlbW92ZS5sZW5ndGg7KytyKXMucmVtb3ZlW3JdKHQsZSk7bihyPXQuZGF0YS5ob29rKSYmbihyPXIucmVtb3ZlKT9yKHQsZSk6ZSgpfWVsc2UgbCh0LmVsbSl9ZnVuY3Rpb24gdyh0LGUscixvKXtmb3IodmFyIGk9cjtpPG87aSsrKXt2YXIgYT1lW2ldO2lmKG4oYSkmJlluKHQsYSkpcmV0dXJuIGl9fWZ1bmN0aW9uIEEodCxvLGksYSxjLGwpe2lmKHQhPT1vKXtuKG8uZWxtKSYmbihhKSYmKG89YVtjXT12dChvKSk7dmFyIGQ9by5lbG09dC5lbG07aWYocih0LmlzQXN5bmNQbGFjZWhvbGRlcikpbihvLmFzeW5jRmFjdG9yeS5yZXNvbHZlZCk/ayh0LmVsbSxvLGkpOm8uaXNBc3luY1BsYWNlaG9sZGVyPSEwO2Vsc2UgaWYocihvLmlzU3RhdGljKSYmcih0LmlzU3RhdGljKSYmby5rZXk9PT10LmtleSYmKHIoby5pc0Nsb25lZCl8fHIoby5pc09uY2UpKSlvLmNvbXBvbmVudEluc3RhbmNlPXQuY29tcG9uZW50SW5zdGFuY2U7ZWxzZXt2YXIgcCx2PW8uZGF0YTtuKHYpJiZuKHA9di5ob29rKSYmbihwPXAucHJlcGF0Y2gpJiZwKHQsbyk7dmFyIGg9dC5jaGlsZHJlbix5PW8uY2hpbGRyZW47aWYobih2KSYmbShvKSl7Zm9yKHA9MDtwPHMudXBkYXRlLmxlbmd0aDsrK3Apcy51cGRhdGVbcF0odCxvKTtuKHA9di5ob29rKSYmbihwPXAudXBkYXRlKSYmcCh0LG8pfWUoby50ZXh0KT9uKGgpJiZuKHkpP2ghPT15JiZmdW5jdGlvbih0LHIsbyxpLGEpe2Zvcih2YXIgcyxjLGwsZD0wLHA9MCx2PXIubGVuZ3RoLTEsaD1yWzBdLG09clt2XSx5PW8ubGVuZ3RoLTEsZz1vWzBdLGI9b1t5XSwkPSFhO2Q8PXYmJnA8PXk7KWUoaCk/aD1yWysrZF06ZShtKT9tPXJbLS12XTpZbihoLGcpPyhBKGgsZyxpLG8scCksaD1yWysrZF0sZz1vWysrcF0pOlluKG0sYik/KEEobSxiLGksbyx5KSxtPXJbLS12XSxiPW9bLS15XSk6WW4oaCxiKT8oQShoLGIsaSxvLHkpLCQmJnUuaW5zZXJ0QmVmb3JlKHQsaC5lbG0sdS5uZXh0U2libGluZyhtLmVsbSkpLGg9clsrK2RdLGI9b1stLXldKTpZbihtLGcpPyhBKG0sZyxpLG8scCksJCYmdS5pbnNlcnRCZWZvcmUodCxtLmVsbSxoLmVsbSksbT1yWy0tdl0sZz1vWysrcF0pOihlKHMpJiYocz10cihyLGQsdikpLGUoYz1uKGcua2V5KT9zW2cua2V5XTp3KGcscixkLHYpKT9mKGcsaSx0LGguZWxtLCExLG8scCk6WW4obD1yW2NdLGcpPyhBKGwsZyxpLG8scCkscltjXT12b2lkIDAsJCYmdS5pbnNlcnRCZWZvcmUodCxsLmVsbSxoLmVsbSkpOmYoZyxpLHQsaC5lbG0sITEsbyxwKSxnPW9bKytwXSk7ZD52P18odCxlKG9beSsxXSk/bnVsbDpvW3krMV0uZWxtLG8scCx5LGkpOnA+eSYmQyhyLGQsdil9KGQsaCx5LGksbCk6bih5KT8obih0LnRleHQpJiZ1LnNldFRleHRDb250ZW50KGQsIiIpLF8oZCxudWxsLHksMCx5Lmxlbmd0aC0xLGkpKTpuKGgpP0MoaCwwLGgubGVuZ3RoLTEpOm4odC50ZXh0KSYmdS5zZXRUZXh0Q29udGVudChkLCIiKTp0LnRleHQhPT1vLnRleHQmJnUuc2V0VGV4dENvbnRlbnQoZCxvLnRleHQpLG4odikmJm4ocD12Lmhvb2spJiZuKHA9cC5wb3N0cGF0Y2gpJiZwKHQsbyl9fX1mdW5jdGlvbiB4KHQsZSxvKXtpZihyKG8pJiZuKHQucGFyZW50KSl0LnBhcmVudC5kYXRhLnBlbmRpbmdJbnNlcnQ9ZTtlbHNlIGZvcih2YXIgaT0wO2k8ZS5sZW5ndGg7KytpKWVbaV0uZGF0YS5ob29rLmluc2VydChlW2ldKX12YXIgTz1kKCJhdHRycyxjbGFzcyxzdGF0aWNDbGFzcyxzdGF0aWNTdHlsZSxrZXkiKTtmdW5jdGlvbiBrKHQsZSxvLGkpe3ZhciBhLHM9ZS50YWcsYz1lLmRhdGEsdT1lLmNoaWxkcmVuO2lmKGk9aXx8YyYmYy5wcmUsZS5lbG09dCxyKGUuaXNDb21tZW50KSYmbihlLmFzeW5jRmFjdG9yeSkpcmV0dXJuIGUuaXNBc3luY1BsYWNlaG9sZGVyPSEwLCEwO2lmKG4oYykmJihuKGE9Yy5ob29rKSYmbihhPWEuaW5pdCkmJmEoZSwhMCksbihhPWUuY29tcG9uZW50SW5zdGFuY2UpKSlyZXR1cm4gcChlLG8pLCEwO2lmKG4ocykpe2lmKG4odSkpaWYodC5oYXNDaGlsZE5vZGVzKCkpaWYobihhPWMpJiZuKGE9YS5kb21Qcm9wcykmJm4oYT1hLmlubmVySFRNTCkpe2lmKGEhPT10LmlubmVySFRNTClyZXR1cm4hMX1lbHNle2Zvcih2YXIgbD0hMCxmPXQuZmlyc3RDaGlsZCxkPTA7ZDx1Lmxlbmd0aDtkKyspe2lmKCFmfHwhayhmLHVbZF0sbyxpKSl7bD0hMTticmVha31mPWYubmV4dFNpYmxpbmd9aWYoIWx8fGYpcmV0dXJuITF9ZWxzZSBoKGUsdSxvKTtpZihuKGMpKXt2YXIgdj0hMTtmb3IodmFyIG0gaW4gYylpZighTyhtKSl7dj0hMCx5KGUsbyk7YnJlYWt9IXYmJmMuY2xhc3MmJlF0KGMuY2xhc3MpfX1lbHNlIHQuZGF0YSE9PWUudGV4dCYmKHQuZGF0YT1lLnRleHQpO3JldHVybiEwfXJldHVybiBmdW5jdGlvbih0LG8saSxhKXtpZighZShvKSl7dmFyIGMsbD0hMSxkPVtdO2lmKGUodCkpbD0hMCxmKG8sZCk7ZWxzZXt2YXIgcD1uKHQubm9kZVR5cGUpO2lmKCFwJiZZbih0LG8pKUEodCxvLGQsbnVsbCxudWxsLGEpO2Vsc2V7aWYocCl7aWYoMT09PXQubm9kZVR5cGUmJnQuaGFzQXR0cmlidXRlKEQpJiYodC5yZW1vdmVBdHRyaWJ1dGUoRCksaT0hMCkscihpKSYmayh0LG8sZCkpcmV0dXJuIHgobyxkLCEwKSx0O2M9dCx0PW5ldyBsdCh1LnRhZ05hbWUoYykudG9Mb3dlckNhc2UoKSx7fSxbXSx2b2lkIDAsYyl9dmFyIHY9dC5lbG0saD11LnBhcmVudE5vZGUodik7aWYoZihvLGQsdi5fbGVhdmVDYj9udWxsOmgsdS5uZXh0U2libGluZyh2KSksbihvLnBhcmVudCkpZm9yKHZhciB5PW8ucGFyZW50LGc9bShvKTt5Oyl7Zm9yKHZhciBfPTA7XzxzLmRlc3Ryb3kubGVuZ3RoOysrXylzLmRlc3Ryb3lbX10oeSk7aWYoeS5lbG09by5lbG0sZyl7Zm9yKHZhciAkPTA7JDxzLmNyZWF0ZS5sZW5ndGg7KyskKXMuY3JlYXRlWyRdKEpuLHkpO3ZhciB3PXkuZGF0YS5ob29rLmluc2VydDtpZih3Lm1lcmdlZClmb3IodmFyIE89MTtPPHcuZm5zLmxlbmd0aDtPKyspdy5mbnNbT10oKX1lbHNlIFpuKHkpO3k9eS5wYXJlbnR9bihoKT9DKFt0XSwwLDApOm4odC50YWcpJiZiKHQpfX1yZXR1cm4geChvLGQsbCksby5lbG19bih0KSYmYih0KX19KHtub2RlT3BzOlhuLG1vZHVsZXM6W2ZyLHZyLHdyLE9yLE1yLEg/e2NyZWF0ZTp1byxhY3RpdmF0ZTp1byxyZW1vdmU6ZnVuY3Rpb24odCxlKXshMCE9PXQuZGF0YS5zaG93P2FvKHQsZSk6ZSgpfX06e31dLmNvbmNhdChzcil9KTtxJiZkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLGZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDt0JiZ0LnZtb2RlbCYmX28odCwiaW5wdXQiKX0pO3ZhciBmbz17aW5zZXJ0ZWQ6ZnVuY3Rpb24odCxlLG4scil7InNlbGVjdCI9PT1uLnRhZz8oci5lbG0mJiFyLmVsbS5fdk9wdGlvbnM/bmUobiwicG9zdHBhdGNoIixmdW5jdGlvbigpe2ZvLmNvbXBvbmVudFVwZGF0ZWQodCxlLG4pfSk6cG8odCxlLG4uY29udGV4dCksdC5fdk9wdGlvbnM9W10ubWFwLmNhbGwodC5vcHRpb25zLG1vKSk6KCJ0ZXh0YXJlYSI9PT1uLnRhZ3x8S24odC50eXBlKSkmJih0Ll92TW9kaWZpZXJzPWUubW9kaWZpZXJzLGUubW9kaWZpZXJzLmxhenl8fCh0LmFkZEV2ZW50TGlzdGVuZXIoImNvbXBvc2l0aW9uc3RhcnQiLHlvKSx0LmFkZEV2ZW50TGlzdGVuZXIoImNvbXBvc2l0aW9uZW5kIixnbyksdC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLGdvKSxxJiYodC52bW9kZWw9ITApKSl9LGNvbXBvbmVudFVwZGF0ZWQ6ZnVuY3Rpb24odCxlLG4pe2lmKCJzZWxlY3QiPT09bi50YWcpe3BvKHQsZSxuLmNvbnRleHQpO3ZhciByPXQuX3ZPcHRpb25zLG89dC5fdk9wdGlvbnM9W10ubWFwLmNhbGwodC5vcHRpb25zLG1vKTtpZihvLnNvbWUoZnVuY3Rpb24odCxlKXtyZXR1cm4haih0LHJbZV0pfSkpKHQubXVsdGlwbGU/ZS52YWx1ZS5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiBobyh0LG8pfSk6ZS52YWx1ZSE9PWUub2xkVmFsdWUmJmhvKGUudmFsdWUsbykpJiZfbyh0LCJjaGFuZ2UiKX19fTtmdW5jdGlvbiBwbyh0LGUsbil7dm8odCxlLG4pLChXfHxLKSYmc2V0VGltZW91dChmdW5jdGlvbigpe3ZvKHQsZSxuKX0sMCl9ZnVuY3Rpb24gdm8odCxlLG4pe3ZhciByPWUudmFsdWUsbz10Lm11bHRpcGxlO2lmKCFvfHxBcnJheS5pc0FycmF5KHIpKXtmb3IodmFyIGksYSxzPTAsYz10Lm9wdGlvbnMubGVuZ3RoO3M8YztzKyspaWYoYT10Lm9wdGlvbnNbc10sbylpPVQocixtbyhhKSk+LTEsYS5zZWxlY3RlZCE9PWkmJihhLnNlbGVjdGVkPWkpO2Vsc2UgaWYoaihtbyhhKSxyKSlyZXR1cm4gdm9pZCh0LnNlbGVjdGVkSW5kZXghPT1zJiYodC5zZWxlY3RlZEluZGV4PXMpKTtvfHwodC5zZWxlY3RlZEluZGV4PS0xKX19ZnVuY3Rpb24gaG8odCxlKXtyZXR1cm4gZS5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4haihlLHQpfSl9ZnVuY3Rpb24gbW8odCl7cmV0dXJuIl92YWx1ZSJpbiB0P3QuX3ZhbHVlOnQudmFsdWV9ZnVuY3Rpb24geW8odCl7dC50YXJnZXQuY29tcG9zaW5nPSEwfWZ1bmN0aW9uIGdvKHQpe3QudGFyZ2V0LmNvbXBvc2luZyYmKHQudGFyZ2V0LmNvbXBvc2luZz0hMSxfbyh0LnRhcmdldCwiaW5wdXQiKSl9ZnVuY3Rpb24gX28odCxlKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO24uaW5pdEV2ZW50KGUsITAsITApLHQuZGlzcGF0Y2hFdmVudChuKX1mdW5jdGlvbiBibyh0KXtyZXR1cm4hdC5jb21wb25lbnRJbnN0YW5jZXx8dC5kYXRhJiZ0LmRhdGEudHJhbnNpdGlvbj90OmJvKHQuY29tcG9uZW50SW5zdGFuY2UuX3Zub2RlKX12YXIgQ289e21vZGVsOmZvLHNob3c6e2JpbmQ6ZnVuY3Rpb24odCxlLG4pe3ZhciByPWUudmFsdWUsbz0obj1ibyhuKSkuZGF0YSYmbi5kYXRhLnRyYW5zaXRpb24saT10Ll9fdk9yaWdpbmFsRGlzcGxheT0ibm9uZSI9PT10LnN0eWxlLmRpc3BsYXk/IiI6dC5zdHlsZS5kaXNwbGF5O3ImJm8/KG4uZGF0YS5zaG93PSEwLGlvKG4sZnVuY3Rpb24oKXt0LnN0eWxlLmRpc3BsYXk9aX0pKTp0LnN0eWxlLmRpc3BsYXk9cj9pOiJub25lIn0sdXBkYXRlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1lLnZhbHVlOyFyIT0hZS5vbGRWYWx1ZSYmKChuPWJvKG4pKS5kYXRhJiZuLmRhdGEudHJhbnNpdGlvbj8obi5kYXRhLnNob3c9ITAscj9pbyhuLGZ1bmN0aW9uKCl7dC5zdHlsZS5kaXNwbGF5PXQuX192T3JpZ2luYWxEaXNwbGF5fSk6YW8obixmdW5jdGlvbigpe3Quc3R5bGUuZGlzcGxheT0ibm9uZSJ9KSk6dC5zdHlsZS5kaXNwbGF5PXI/dC5fX3ZPcmlnaW5hbERpc3BsYXk6Im5vbmUiKX0sdW5iaW5kOmZ1bmN0aW9uKHQsZSxuLHIsbyl7b3x8KHQuc3R5bGUuZGlzcGxheT10Ll9fdk9yaWdpbmFsRGlzcGxheSl9fX0sJG89e25hbWU6U3RyaW5nLGFwcGVhcjpCb29sZWFuLGNzczpCb29sZWFuLG1vZGU6U3RyaW5nLHR5cGU6U3RyaW5nLGVudGVyQ2xhc3M6U3RyaW5nLGxlYXZlQ2xhc3M6U3RyaW5nLGVudGVyVG9DbGFzczpTdHJpbmcsbGVhdmVUb0NsYXNzOlN0cmluZyxlbnRlckFjdGl2ZUNsYXNzOlN0cmluZyxsZWF2ZUFjdGl2ZUNsYXNzOlN0cmluZyxhcHBlYXJDbGFzczpTdHJpbmcsYXBwZWFyQWN0aXZlQ2xhc3M6U3RyaW5nLGFwcGVhclRvQ2xhc3M6U3RyaW5nLGR1cmF0aW9uOltOdW1iZXIsU3RyaW5nLE9iamVjdF19O2Z1bmN0aW9uIHdvKHQpe3ZhciBlPXQmJnQuY29tcG9uZW50T3B0aW9ucztyZXR1cm4gZSYmZS5DdG9yLm9wdGlvbnMuYWJzdHJhY3Q/d28oSGUoZS5jaGlsZHJlbikpOnR9ZnVuY3Rpb24gQW8odCl7dmFyIGU9e30sbj10LiRvcHRpb25zO2Zvcih2YXIgciBpbiBuLnByb3BzRGF0YSllW3JdPXRbcl07dmFyIG89bi5fcGFyZW50TGlzdGVuZXJzO2Zvcih2YXIgaSBpbiBvKWVbXyhpKV09b1tpXTtyZXR1cm4gZX1mdW5jdGlvbiB4byh0LGUpe2lmKC9cZC1rZWVwLWFsaXZlJC8udGVzdChlLnRhZykpcmV0dXJuIHQoImtlZXAtYWxpdmUiLHtwcm9wczplLmNvbXBvbmVudE9wdGlvbnMucHJvcHNEYXRhfSl9dmFyIE9vPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRhZ3x8VWUodCl9LGtvPWZ1bmN0aW9uKHQpe3JldHVybiJzaG93Ij09PXQubmFtZX0sU289e25hbWU6InRyYW5zaXRpb24iLHByb3BzOiRvLGFic3RyYWN0OiEwLHJlbmRlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy4kc2xvdHMuZGVmYXVsdDtpZihuJiYobj1uLmZpbHRlcihPbykpLmxlbmd0aCl7dmFyIHI9dGhpcy5tb2RlLGk9blswXTtpZihmdW5jdGlvbih0KXtmb3IoO3Q9dC5wYXJlbnQ7KWlmKHQuZGF0YS50cmFuc2l0aW9uKXJldHVybiEwfSh0aGlzLiR2bm9kZSkpcmV0dXJuIGk7dmFyIGE9d28oaSk7aWYoIWEpcmV0dXJuIGk7aWYodGhpcy5fbGVhdmluZylyZXR1cm4geG8odCxpKTt2YXIgcz0iX190cmFuc2l0aW9uLSIrdGhpcy5fdWlkKyItIjthLmtleT1udWxsPT1hLmtleT9hLmlzQ29tbWVudD9zKyJjb21tZW50IjpzK2EudGFnOm8oYS5rZXkpPzA9PT1TdHJpbmcoYS5rZXkpLmluZGV4T2Yocyk/YS5rZXk6cythLmtleTphLmtleTt2YXIgYz0oYS5kYXRhfHwoYS5kYXRhPXt9KSkudHJhbnNpdGlvbj1Bbyh0aGlzKSx1PXRoaXMuX3Zub2RlLGw9d28odSk7aWYoYS5kYXRhLmRpcmVjdGl2ZXMmJmEuZGF0YS5kaXJlY3RpdmVzLnNvbWUoa28pJiYoYS5kYXRhLnNob3c9ITApLGwmJmwuZGF0YSYmIWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUua2V5PT09dC5rZXkmJmUudGFnPT09dC50YWd9KGEsbCkmJiFVZShsKSYmKCFsLmNvbXBvbmVudEluc3RhbmNlfHwhbC5jb21wb25lbnRJbnN0YW5jZS5fdm5vZGUuaXNDb21tZW50KSl7dmFyIGY9bC5kYXRhLnRyYW5zaXRpb249eCh7fSxjKTtpZigib3V0LWluIj09PXIpcmV0dXJuIHRoaXMuX2xlYXZpbmc9ITAsbmUoZiwiYWZ0ZXJMZWF2ZSIsZnVuY3Rpb24oKXtlLl9sZWF2aW5nPSExLGUuJGZvcmNlVXBkYXRlKCl9KSx4byh0LGkpO2lmKCJpbi1vdXQiPT09cil7aWYoVWUoYSkpcmV0dXJuIHU7dmFyIGQscD1mdW5jdGlvbigpe2QoKX07bmUoYywiYWZ0ZXJFbnRlciIscCksbmUoYywiZW50ZXJDYW5jZWxsZWQiLHApLG5lKGYsImRlbGF5TGVhdmUiLGZ1bmN0aW9uKHQpe2Q9dH0pfX1yZXR1cm4gaX19fSxFbz14KHt0YWc6U3RyaW5nLG1vdmVDbGFzczpTdHJpbmd9LCRvKTtmdW5jdGlvbiBqbyh0KXt0LmVsbS5fbW92ZUNiJiZ0LmVsbS5fbW92ZUNiKCksdC5lbG0uX2VudGVyQ2ImJnQuZWxtLl9lbnRlckNiKCl9ZnVuY3Rpb24gVG8odCl7dC5kYXRhLm5ld1Bvcz10LmVsbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1mdW5jdGlvbiBJbyh0KXt2YXIgZT10LmRhdGEucG9zLG49dC5kYXRhLm5ld1BvcyxyPWUubGVmdC1uLmxlZnQsbz1lLnRvcC1uLnRvcDtpZihyfHxvKXt0LmRhdGEubW92ZWQ9ITA7dmFyIGk9dC5lbG0uc3R5bGU7aS50cmFuc2Zvcm09aS5XZWJraXRUcmFuc2Zvcm09InRyYW5zbGF0ZSgiK3IrInB4LCIrbysicHgpIixpLnRyYW5zaXRpb25EdXJhdGlvbj0iMHMifX1kZWxldGUgRW8ubW9kZTt2YXIgRG89e1RyYW5zaXRpb246U28sVHJhbnNpdGlvbkdyb3VwOntwcm9wczpFbyxiZWZvcmVNb3VudDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLl91cGRhdGU7dGhpcy5fdXBkYXRlPWZ1bmN0aW9uKG4scil7dmFyIG89S2UodCk7dC5fX3BhdGNoX18odC5fdm5vZGUsdC5rZXB0LCExLCEwKSx0Ll92bm9kZT10LmtlcHQsbygpLGUuY2FsbCh0LG4scil9fSxyZW5kZXI6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudGFnfHx0aGlzLiR2bm9kZS5kYXRhLnRhZ3x8InNwYW4iLG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPXRoaXMucHJldkNoaWxkcmVuPXRoaXMuY2hpbGRyZW4sbz10aGlzLiRzbG90cy5kZWZhdWx0fHxbXSxpPXRoaXMuY2hpbGRyZW49W10sYT1Bbyh0aGlzKSxzPTA7czxvLmxlbmd0aDtzKyspe3ZhciBjPW9bc107Yy50YWcmJm51bGwhPWMua2V5JiYwIT09U3RyaW5nKGMua2V5KS5pbmRleE9mKCJfX3ZsaXN0IikmJihpLnB1c2goYyksbltjLmtleV09YywoYy5kYXRhfHwoYy5kYXRhPXt9KSkudHJhbnNpdGlvbj1hKX1pZihyKXtmb3IodmFyIHU9W10sbD1bXSxmPTA7ZjxyLmxlbmd0aDtmKyspe3ZhciBkPXJbZl07ZC5kYXRhLnRyYW5zaXRpb249YSxkLmRhdGEucG9zPWQuZWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG5bZC5rZXldP3UucHVzaChkKTpsLnB1c2goZCl9dGhpcy5rZXB0PXQoZSxudWxsLHUpLHRoaXMucmVtb3ZlZD1sfXJldHVybiB0KGUsbnVsbCxpKX0sdXBkYXRlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMucHJldkNoaWxkcmVuLGU9dGhpcy5tb3ZlQ2xhc3N8fCh0aGlzLm5hbWV8fCJ2IikrIi1tb3ZlIjt0Lmxlbmd0aCYmdGhpcy5oYXNNb3ZlKHRbMF0uZWxtLGUpJiYodC5mb3JFYWNoKGpvKSx0LmZvckVhY2goVG8pLHQuZm9yRWFjaChJbyksdGhpcy5fcmVmbG93PWRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0LHQuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0LmRhdGEubW92ZWQpe3ZhciBuPXQuZWxtLHI9bi5zdHlsZTtRcihuLGUpLHIudHJhbnNmb3JtPXIuV2Via2l0VHJhbnNmb3JtPXIudHJhbnNpdGlvbkR1cmF0aW9uPSIiLG4uYWRkRXZlbnRMaXN0ZW5lcihLcixuLl9tb3ZlQ2I9ZnVuY3Rpb24gdChyKXtyJiZyLnRhcmdldCE9PW58fHImJiEvdHJhbnNmb3JtJC8udGVzdChyLnByb3BlcnR5TmFtZSl8fChuLnJlbW92ZUV2ZW50TGlzdGVuZXIoS3IsdCksbi5fbW92ZUNiPW51bGwsWXIobixlKSl9KX19KSl9LG1ldGhvZHM6e2hhc01vdmU6ZnVuY3Rpb24odCxlKXtpZighQnIpcmV0dXJuITE7aWYodGhpcy5faGFzTW92ZSlyZXR1cm4gdGhpcy5faGFzTW92ZTt2YXIgbj10LmNsb25lTm9kZSgpO3QuX3RyYW5zaXRpb25DbGFzc2VzJiZ0Ll90cmFuc2l0aW9uQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe1VyKG4sdCl9KSxScihuLGUpLG4uc3R5bGUuZGlzcGxheT0ibm9uZSIsdGhpcy4kZWwuYXBwZW5kQ2hpbGQobik7dmFyIHI9bm8obik7cmV0dXJuIHRoaXMuJGVsLnJlbW92ZUNoaWxkKG4pLHRoaXMuX2hhc01vdmU9ci5oYXNUcmFuc2Zvcm19fX19O3JldHVybiBibi5jb25maWcubXVzdFVzZVByb3A9ZnVuY3Rpb24odCxlLG4pe3JldHVybiJ2YWx1ZSI9PT1uJiZFbih0KSYmImJ1dHRvbiIhPT1lfHwic2VsZWN0ZWQiPT09biYmIm9wdGlvbiI9PT10fHwiY2hlY2tlZCI9PT1uJiYiaW5wdXQiPT09dHx8Im11dGVkIj09PW4mJiJ2aWRlbyI9PT10fSxibi5jb25maWcuaXNSZXNlcnZlZFRhZz1Xbixibi5jb25maWcuaXNSZXNlcnZlZEF0dHI9U24sYm4uY29uZmlnLmdldFRhZ05hbWVzcGFjZT1mdW5jdGlvbih0KXtyZXR1cm4gem4odCk/InN2ZyI6Im1hdGgiPT09dD8ibWF0aCI6dm9pZCAwfSxibi5jb25maWcuaXNVbmtub3duRWxlbWVudD1mdW5jdGlvbih0KXtpZighSClyZXR1cm4hMDtpZihXbih0KSlyZXR1cm4hMTtpZih0PXQudG9Mb3dlckNhc2UoKSxudWxsIT1xblt0XSlyZXR1cm4gcW5bdF07dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTtyZXR1cm4gdC5pbmRleE9mKCItIik+LTE/cW5bdF09ZS5jb25zdHJ1Y3Rvcj09PXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnR8fGUuY29uc3RydWN0b3I9PT13aW5kb3cuSFRNTEVsZW1lbnQ6cW5bdF09L0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlLnRvU3RyaW5nKCkpfSx4KGJuLm9wdGlvbnMuZGlyZWN0aXZlcyxDbykseChibi5vcHRpb25zLmNvbXBvbmVudHMsRG8pLGJuLnByb3RvdHlwZS5fX3BhdGNoX189SD9sbzprLGJuLnByb3RvdHlwZS4kbW91bnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24odCxlLG4pe3ZhciByO3JldHVybiB0LiRlbD1lLHQuJG9wdGlvbnMucmVuZGVyfHwodC4kb3B0aW9ucy5yZW5kZXI9ZHQpLFplKHQsImJlZm9yZU1vdW50Iikscj1mdW5jdGlvbigpe3QuX3VwZGF0ZSh0Ll9yZW5kZXIoKSxuKX0sbmV3IHVuKHQscixrLHtiZWZvcmU6ZnVuY3Rpb24oKXt0Ll9pc01vdW50ZWQmJiF0Ll9pc0Rlc3Ryb3llZCYmWmUodCwiYmVmb3JlVXBkYXRlIil9fSwhMCksbj0hMSxudWxsPT10LiR2bm9kZSYmKHQuX2lzTW91bnRlZD0hMCxaZSh0LCJtb3VudGVkIikpLHR9KHRoaXMsdD10JiZIP2Z1bmN0aW9uKHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl7dmFyIGU9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0KTtyZXR1cm4gZXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iil9cmV0dXJuIHR9KHQpOnZvaWQgMCxlKX0sSCYmc2V0VGltZW91dChmdW5jdGlvbigpe0wuZGV2dG9vbHMmJnR0JiZ0dC5lbWl0KCJpbml0Iixibil9LDApLGJufSk7"}]},{"name":"bilibili merged flv+mp4+ass+enhance","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://www.bilibili.com/video/av*","*://www.bilibili.com/video/bv*","*://www.bilibili.com/video/BV*","*://bangumi.bilibili.com/anime/*/play*","*://www.bilibili.com/bangumi/play/ep*","*://www.bilibili.com/bangumi/play/ss*","*://www.bilibili.com/bangumi/media/md*","*://www.biligame.com/detail/*","*://vc.bilibili.com/video/*","*://www.bilibili.com/watchlater/"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1591003760908,"data":{}},"enabled":true,"position":6,"file_url":"https://greasyfork.org/scripts/372516-bilibili-merged-flv-mp4-ass-enhance/code/bilibili%20merged%20flv+mp4+ass+enhance.user.js","uuid":"cd6b8b06-371d-40ea-ad5d-916fef097d03","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIGJpbGliaWxpIG1lcmdlZCBmbHYrbXA0K2FzcytlbmhhbmNlCi8vIEBuYW1lc3BhY2UgICBodHRwOi8vcWxpNS50ay8KLy8gQGhvbWVwYWdlVVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9YbWFkZXIvYmlsaXR3aW4vCi8vIEBzdXBwb3J0VVJMICBodHRwczovL2dpdGh1Yi5jb20vWG1hZGVyL2JpbGl0d2luL2lzc3VlcwovLyBAZGVzY3JpcHRpb24gYmlsaWJpbGkv5ZOU5ZOp5ZOU5ZOpOui2hea4hUZMVuS4i+i9vSxGTFblkIjlubYs5Y6f55SfTVA05LiL6L29LOW8ueW5lUFTU+S4i+i9vSxDQ+Wtl+W5lei9rOeggUFTU+S4i+i9vSxBQUPpn7PpopHkuIvovb0sTUtW5omT5YyFLOaSreaUvuS9k+mqjOWinuW8uizljp/nlJ9hcHBzZWNyZXQs5LiN5YCf5Yqp5YW25LuW572R56uZCi8vIEBtYXRjaCAgICAgICAqOi8vd3d3LmJpbGliaWxpLmNvbS92aWRlby9hdioKLy8gQG1hdGNoICAgICAgICo6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2J2KgovLyBAbWF0Y2ggICAgICAgKjovL3d3dy5iaWxpYmlsaS5jb20vdmlkZW8vQlYqCi8vIEBtYXRjaCAgICAgICAqOi8vYmFuZ3VtaS5iaWxpYmlsaS5jb20vYW5pbWUvKi9wbGF5KgovLyBAbWF0Y2ggICAgICAgKjovL3d3dy5iaWxpYmlsaS5jb20vYmFuZ3VtaS9wbGF5L2VwKgovLyBAbWF0Y2ggICAgICAgKjovL3d3dy5iaWxpYmlsaS5jb20vYmFuZ3VtaS9wbGF5L3NzKgovLyBAbWF0Y2ggICAgICAgKjovL3d3dy5iaWxpYmlsaS5jb20vYmFuZ3VtaS9tZWRpYS9tZCoKLy8gQG1hdGNoICAgICAgICo6Ly93d3cuYmlsaWdhbWUuY29tL2RldGFpbC8qCi8vIEBtYXRjaCAgICAgICAqOi8vdmMuYmlsaWJpbGkuY29tL3ZpZGVvLyoKLy8gQG1hdGNoICAgICAgICo6Ly93d3cuYmlsaWJpbGkuY29tL3dhdGNobGF0ZXIvCi8vIEB2ZXJzaW9uICAgICAxLjIzLjE1Ci8vIEBhdXRob3IgICAgICBxbGk1Ci8vIEBjb3B5cmlnaHQgICBxbGk1LCAyMDE0Kywg55Sw55SfLCBncmVwbXVzaWMsIHpoZW5nIHFpYW4sIHJ5aXdhbW90bywgeG1hZGVyCi8vIEBsaWNlbnNlICAgICBNb3ppbGxhIFB1YmxpYyBMaWNlbnNlIDIuMDsgaHR0cDovL3d3dy5tb3ppbGxhLm9yZy9NUEwvMi4wLwovLyBAZ3JhbnQgICAgICAgbm9uZQovLyBAcnVuLWF0ICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CgovKioqCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIEJpbGlUd2luIGNvbnNpc3RzIG9mIHR3byBwYXJ0cyAtIEJpbGlNb25rZXkgYW5kIEJpbGlQb2x5ZmlsbC4gCiAqIFRoZXkgYXJlIGJ1bmRsZWQgYmVjYXVzZSBJIGFtIHRvbyBsYXp5IHRvIHdyaXRlIHR3byB1c2VyIGludGVyZmFjZXMuCiAqIAogKiBTbyB3aGF0IGlzIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gQmlsaU1vbmtleSBhbmQgQmlsaVBvbHlmaWxsPwogKiAKICogQmlsaU1vbmtleSBkZWFscyB3aXRoIG5ldHdvcmsuIEl0IGlzIGEgKG5hSXZlKSBTZXJ2aWNlIFdvcmtlci4gCiAqIFRoaXMgaXMgYWxzbyB3aHkgaXQgdXNlcyBJbmRleGVkREIgaW5zdGVhZCBvZiBsb2NhbFN0b3JhZ2UuCiAqIEJpbGlQb2x5ZmlsbCBkZWFscyB3aXRoIGV4cGVyaWVuY2UuIEl0IGlzIG1vcmUgYSAidXNlciBzY3JpcHQiLiAKICogRXZlcnl0aGluZyBpdCBjYW4gZG8gY2FuIGJlIGRvbmUgYnkgaGFuZC4KICogCiAqIEJpbGlQb2x5ZmlsbCB3aWxsIGJlIHBvaW50bGVzcyBpbiB0aGUgbG9uZyBydW4gLSBJIGJlbGlldmUgYmlsaWJpbGkgCiAqIHdpbGwgZmluYWxseSBwcm92aWRlIHRoZXNlIGZ1bmN0aW9ucyB0aGVtc2VsdmVzLgogKiAKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiAqIAogKiBDb3ZlcmVkIFNvZnR3YXJlIGlzIHByb3ZpZGVkIHVuZGVyIHRoaXMgTGljZW5zZSBvbiBhbiDigJxhcyBpc+KAnSBiYXNpcywgCiAqIHdpdGhvdXQgd2FycmFudHkgb2YgYW55IGtpbmQsIGVpdGhlciBleHByZXNzZWQsIGltcGxpZWQsIG9yIHN0YXR1dG9yeSwgCiAqIGluY2x1ZGluZywgd2l0aG91dCBsaW1pdGF0aW9uLCB3YXJyYW50aWVzIHRoYXQgdGhlIENvdmVyZWQgU29mdHdhcmUgCiAqIGlzIGZyZWUgb2YgZGVmZWN0cywgbWVyY2hhbnRhYmxlLCBmaXQgZm9yIGEgcGFydGljdWxhciBwdXJwb3NlIG9yIAogKiBub24taW5mcmluZ2luZy4gVGhlIGVudGlyZSByaXNrIGFzIHRvIHRoZSBxdWFsaXR5IGFuZCBwZXJmb3JtYW5jZSBvZiAKICogdGhlIENvdmVyZWQgU29mdHdhcmUgaXMgd2l0aCBZb3UuIFNob3VsZCBhbnkgQ292ZXJlZCBTb2Z0d2FyZSBwcm92ZSAKICogZGVmZWN0aXZlIGluIGFueSByZXNwZWN0LCBZb3UgKG5vdCBhbnkgQ29udHJpYnV0b3IpIGFzc3VtZSB0aGUgY29zdCAKICogb2YgYW55IG5lY2Vzc2FyeSBzZXJ2aWNpbmcsIHJlcGFpciwgb3IgY29ycmVjdGlvbi4gVGhpcyBkaXNjbGFpbWVyIAogKiBvZiB3YXJyYW50eSBjb25zdGl0dXRlcyBhbiBlc3NlbnRpYWwgcGFydCBvZiB0aGlzIExpY2Vuc2UuIE5vIHVzZSBvZiAKICogYW55IENvdmVyZWQgU29mdHdhcmUgaXMgYXV0aG9yaXplZCB1bmRlciB0aGlzIExpY2Vuc2UgZXhjZXB0IHVuZGVyIAogKiB0aGlzIGRpc2NsYWltZXIuCiAqIAogKiBVbmRlciBubyBjaXJjdW1zdGFuY2VzIGFuZCB1bmRlciBubyBsZWdhbCB0aGVvcnksIHdoZXRoZXIgdG9ydCAKICogKGluY2x1ZGluZyBuZWdsaWdlbmNlKSwgY29udHJhY3QsIG9yIG90aGVyd2lzZSwgc2hhbGwgYW55IENvbnRyaWJ1dG9yLCAKICogb3IgYW55b25lIHdobyBkaXN0cmlidXRlcyBDb3ZlcmVkIFNvZnR3YXJlIGFzIHBlcm1pdHRlZCBhYm92ZSwgYmUgCiAqIGxpYWJsZSB0byBZb3UgZm9yIGFueSBkaXJlY3QsIGluZGlyZWN0LCBzcGVjaWFsLCBpbmNpZGVudGFsLCBvciAKICogY29uc2VxdWVudGlhbCBkYW1hZ2VzIG9mIGFueSBjaGFyYWN0ZXIgaW5jbHVkaW5nLCB3aXRob3V0IGxpbWl0YXRpb24sIAogKiBkYW1hZ2VzIGZvciBsb3N0IHByb2ZpdHMsIGxvc3Mgb2YgZ29vZHdpbGwsIHdvcmsgc3RvcHBhZ2UsIGNvbXB1dGVyIAogKiBmYWlsdXJlIG9yIG1hbGZ1bmN0aW9uLCBvciBhbnkgYW5kIGFsbCBvdGhlciBjb21tZXJjaWFsIGRhbWFnZXMgb3IgCiAqIGxvc3NlcywgZXZlbiBpZiBzdWNoIHBhcnR5IHNoYWxsIGhhdmUgYmVlbiBpbmZvcm1lZCBvZiB0aGUgcG9zc2liaWxpdHkgCiAqIG9mIHN1Y2ggZGFtYWdlcy4gVGhpcyBsaW1pdGF0aW9uIG9mIGxpYWJpbGl0eSBzaGFsbCBub3QgYXBwbHkgdG8gCiAqIGxpYWJpbGl0eSBmb3IgZGVhdGggb3IgcGVyc29uYWwgaW5qdXJ5IHJlc3VsdGluZyBmcm9tIHN1Y2ggcGFydHnigJlzIAogKiBuZWdsaWdlbmNlIHRvIHRoZSBleHRlbnQgYXBwbGljYWJsZSBsYXcgcHJvaGliaXRzIHN1Y2ggbGltaXRhdGlvbi4gCiAqIFNvbWUganVyaXNkaWN0aW9ucyBkbyBub3QgYWxsb3cgdGhlIGV4Y2x1c2lvbiBvciBsaW1pdGF0aW9uIG9mIAogKiBpbmNpZGVudGFsIG9yIGNvbnNlcXVlbnRpYWwgZGFtYWdlcywgc28gdGhpcyBleGNsdXNpb24gYW5kIGxpbWl0YXRpb24gCiAqIG1heSBub3QgYXBwbHkgdG8gWW91LgogKi8KCi8qKioKICogVGhpcyBpcyBhIGJ1bmRsZWQgY29kZS4gV2hpbGUgaXQgaXMgbm90IHVnbGlmaWVkLCBpdCBtYXkgc3RpbGwgYmUgdG9vCiAqIGNvbXBsZXggZm9yIHJldmlld2luZy4gUGxlYXNlIHJlZmVyIHRvCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9YbWFkZXIvYmlsaXR3aW4vCiAqIGZvciBzb3VyY2UgY29kZS4KICovCgovKioqCiAqIENvcHlyaWdodCAoQykgMjAxOCBRbGk1LiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiAKICogQGF1dGhvciBxbGk1IDxnb29kbHExMVthdF0oMTYzfGdtYWlsKS5jb20+CiAqIAogKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMKICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4KKi8KCi8qKgogKiBCYXNpY2FsbHkgYSBQcm9taXNlIHRoYXQgZXhwb3NlcyBpdHMgcmVzb2x2ZSBhbmQgcmVqZWN0IGNhbGxiYWNrcwogKi8KY2xhc3MgQXN5bmNDb250YWluZXIgewogICAgLyoqKgogICAgICogVGhlIHRoaW5nIGlzLCBpZiB3ZSBjYW5ub3QgY2FuY2VsIGEgcHJvbWlzZSwgd2Ugc2hvdWxkIGF0IGxlYXN0IGJlIGFibGUgdG8gCiAgICAgKiBleHBsaWNpdGx5IG1hcmsgYSBwcm9taXNlIGFzIGdhcmJhZ2UgY29sbGVjdGlibGUuCiAgICAgKiAKICAgICAqIFllcywgdGhpcyBpcyBzb21ldGhpbmcgbGlrZSBjYW5jZWxhYmxlIFByb21pc2UuIEJ1dCBJIGluc2lzdCB0aGV5IGFyZSBkaWZmZXJlbnQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7CiAgICAgICAgLy8gMS4gcHJpbWFyeSBwcm9taXNlCiAgICAgICAgdGhpcy5wcmltYXJ5UHJvbWlzZSA9IG5ldyBQcm9taXNlKChzLCBqKSA9PiB7CiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IGFyZyA9PiB7IHMoYXJnKTsgcmV0dXJuIGFyZzsgfTsKICAgICAgICAgICAgdGhpcy5yZWplY3QgPSBhcmcgPT4geyBqKGFyZyk7IHJldHVybiBhcmc7IH07CiAgICAgICAgfSk7CgogICAgICAgIC8vIDIuIGhhbmcgcHJvbWlzZQogICAgICAgIHRoaXMuaGFuZ1JldHVybiA9IFN5bWJvbCgpOwogICAgICAgIHRoaXMuaGFuZ1Byb21pc2UgPSBuZXcgUHJvbWlzZShzID0+IHRoaXMuaGFuZyA9ICgpID0+IHModGhpcy5oYW5nUmV0dXJuKSk7CiAgICAgICAgdGhpcy5kZXN0cm9pZWRUaGVuID0gdGhpcy5oYW5nUHJvbWlzZS50aGVuLmJpbmQodGhpcy5oYW5nUHJvbWlzZSk7CiAgICAgICAgdGhpcy5wcmltYXJ5UHJvbWlzZS50aGVuKCgpID0+IHRoaXMuc3RhdGUgPSAnZnVsZmlsbGVkJyk7CiAgICAgICAgdGhpcy5wcmltYXJ5UHJvbWlzZS5jYXRjaCgoKSA9PiB0aGlzLnN0YXRlID0gJ3JlamVjdGVkJyk7CiAgICAgICAgdGhpcy5oYW5nUHJvbWlzZS50aGVuKCgpID0+IHRoaXMuc3RhdGUgPSAnaGFuZ2VkJyk7CgogICAgICAgIC8vIDQuIHJhY2UKICAgICAgICB0aGlzLnByb21pc2UgPSBQcm9taXNlCiAgICAgICAgICAgIC5yYWNlKFt0aGlzLnByaW1hcnlQcm9taXNlLCB0aGlzLmhhbmdQcm9taXNlXSkKICAgICAgICAgICAgLnRoZW4ocyA9PiBzID09IHRoaXMuaGFuZ1JldHVybiA/IG5ldyBQcm9taXNlKCgpID0+IHsgfSkgOiBzKTsKCiAgICAgICAgLy8gNS4gaW5oZXJpdAogICAgICAgIHRoaXMudGhlbiA9IHRoaXMucHJvbWlzZS50aGVuLmJpbmQodGhpcy5wcm9taXNlKTsKICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5wcm9taXNlLmNhdGNoLmJpbmQodGhpcy5wcm9taXNlKTsKICAgICAgICB0aGlzLmZpbmFsbHkgPSB0aGlzLnByb21pc2UuZmluYWxseS5iaW5kKHRoaXMucHJvbWlzZSk7CgogICAgICAgIC8vIDYuIG9wdGlvbmFsIGNhbGxiYWNrCiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSBjYWxsYmFjayh0aGlzLnJlc29sdmUsIHRoaXMucmVqZWN0KTsKICAgIH0KCiAgICAvKioqCiAgICAgKiBNZW1vcnkgbGVhayBub3RpY2U6CiAgICAgKiAKICAgICAqIFRoZSBWOCBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlIHJlcXVpcmVzCiAgICAgKiAxLiB0aGUgcmVzb2x2ZSBoYW5kbGVyIG9mIGEgUHJvbWlzZQogICAgICogMi4gdGhlIHJlamVjdCBoYW5kbGVyIG9mIGEgUHJvbWlzZQogICAgICogMy4gISEgdGhlIFByb21pc2Ugb2JqZWN0IGl0c2VsZiAhIQogICAgICogdG8gYmUgZ2FyYmFnZSBjb2xsZWN0aWJsZSB0byBjb3JyZWN0bHkgZnJlZSBQcm9taXNlIHJ1bnRpbWUgY29udGV4dGVzCiAgICAgKiAKICAgICAqIFRoaXMgcGllY2Ugb2YgY29kZSB3aWxsIHdvcmsKICAgICAqIHZvaWQgKGFzeW5jICgpID0+IHsKICAgICAqICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheSgxMDI0ICogMTAyNCAqIDEwMjQpOwogICAgICogICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSsrKSBidWZbaV0gPSBpOwogICAgICogICAgIGF3YWl0IG5ldyBQcm9taXNlKCgpID0+IHsgfSk7CiAgICAgKiAgICAgcmV0dXJuIGJ1ZjsKICAgICAqIH0pKCk7CiAgICAgKiBpZiAodHlwZW9mIGdjID09ICdmdW5jdGlvbicpIGdjKCk7CiAgICAgKiAKICAgICAqIFRoaXMgcGllY2Ugb2YgY29kZSB3aWxsIGNhdXNlIGEgUHJvbWlzZSBjb250ZXh0IG1lbSBsZWFrCiAgICAgKiBjb25zdCBkZWFkUHJvbWlzZSA9IG5ldyBQcm9taXNlKCgpID0+IHsgfSk7CiAgICAgKiB2b2lkIChhc3luYyAoKSA9PiB7CiAgICAgKiAgICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkoMTAyNCAqIDEwMjQgKiAxMDI0KTsKICAgICAqICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7IGkrKykgYnVmW2ldID0gaTsKICAgICAqICAgICBhd2FpdCBkZWFkUHJvbWlzZTsKICAgICAqICAgICByZXR1cm4gYnVmOwogICAgICogfSkoKTsKICAgICAqIGlmICh0eXBlb2YgZ2MgPT0gJ2Z1bmN0aW9uJykgZ2MoKTsKICAgICAqIAogICAgICogSW4gb3RoZXIgd29yZHMsIGRvIE5PVCBkaXJlY3RseSBpbmhlcml0IGZyb20gcHJvbWlzZS4gWW91IHdpbGwgbmVlZCB0bwogICAgICogZGVyZWZlcmVuY2UgaXQgb24gZGVzdHJveWluZy4KICAgICAqLwogICAgZGVzdHJveSgpIHsKICAgICAgICB0aGlzLmhhbmcoKTsKICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07CiAgICAgICAgdGhpcy5yZWplY3QgPSB0aGlzLnJlc29sdmU7CiAgICAgICAgdGhpcy5oYW5nID0gdGhpcy5yZXNvbHZlOwogICAgICAgIHRoaXMucHJpbWFyeVByb21pc2UgPSBudWxsOwogICAgICAgIHRoaXMuaGFuZ1Byb21pc2UgPSBudWxsOwogICAgICAgIHRoaXMucHJvbWlzZSA9IG51bGw7CiAgICAgICAgdGhpcy50aGVuID0gdGhpcy5yZXNvbHZlOwogICAgICAgIHRoaXMuY2F0Y2ggPSB0aGlzLnJlc29sdmU7CiAgICAgICAgdGhpcy5maW5hbGx5ID0gdGhpcy5yZXNvbHZlOwogICAgICAgIHRoaXMuZGVzdHJvaWVkVGhlbiA9IGYgPT4gZigpOwogICAgICAgIC8qKioKICAgICAgICAgKiBGb3IgZWFzZSBvZiBkZWJ1ZywgZG8gbm90IGRlcmVmZXJlbmNlIGhhbmdSZXR1cm4KICAgICAgICAgKiAKICAgICAgICAgKiBJZiBydW4gZnJvbSBjb25zb2xlLCBteXN0ZXJpb3VzbHkgdGhpcyB0aW55IHN5bWJvbCB3aWxsIGhlbHAgY29ycmVjdCBnYwogICAgICAgICAqIGJlZm9yZSBhIGNvbnNvbGUuY2xlYXIKICAgICAgICAgKi8KICAgICAgICAvL3RoaXMuaGFuZ1JldHVybiA9IG51bGw7CiAgICB9CgogICAgc3RhdGljIF9VTklUX1RFU1QoKSB7CiAgICAgICAgY29uc3QgY29udGFpbmVycyA9IFtdOwogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZvbygpIHsKICAgICAgICAgICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkoNjAwICogMTAyNCAqIDEwMjQpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1Zi5sZW5ndGg7IGkrKykgYnVmW2ldID0gaTsKICAgICAgICAgICAgY29uc3QgYWMgPSBuZXcgQXN5bmNDb250YWluZXIoKTsKICAgICAgICAgICAgYWMuZGVzdHJvaWVkVGhlbigoKSA9PiBjb25zb2xlLmxvZygnYXN5bmNDb250YWluZXIgZGVzdHJvaWVkJykpOwogICAgICAgICAgICBjb250YWluZXJzLnB1c2goYWMpOwogICAgICAgICAgICBhd2FpdCBhYzsKICAgICAgICAgICAgcmV0dXJuIGJ1ZjsKICAgICAgICB9CiAgICAgICAgY29uc3QgZm9vcyA9IFtmb28oKSwgZm9vKCksIGZvbygpXTsKICAgICAgICBjb250YWluZXJzLmZvckVhY2goZSA9PiBlLmRlc3Ryb3koKSk7CiAgICAgICAgY29uc29sZS53YXJuKCdDaGVjayB5b3VyIFJBTSB1c2FnZS4gSSBhbGxvY2F0ZWQgMS44R0IgaW4gdGhyZWUgZGVhZC1lbmQgcHJvbWlzZXMuJyk7CiAgICAgICAgcmV0dXJuIFtmb29zLCBjb250YWluZXJzXTsKICAgIH0KfQoKLyoqKgogKiBDb3B5cmlnaHQgKEMpIDIwMTggUWxpNS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogCiAqIEBhdXRob3IgcWxpNSA8Z29vZGxxMTFbYXRdKDE2M3xnbWFpbCkuY29tPgogKiAKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiovCgovKioKICogUHJvdmlkZXMgY29tbW9uIHV0aWwgZm9yIGFsbCBiaWxpYmlsaSB1c2VyIHNjcmlwdHMKICovCmNsYXNzIEJpbGlVc2VySlMgewogICAgc3RhdGljIGFzeW5jIGdldElmcmFtZVdpbigpIHsKICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvZnFpID4gaWZyYW1lJykuY29udGVudERvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxpYmlsaVBsYXllcicpKSB7CiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgPiBpZnJhbWUnKS5jb250ZW50V2luZG93OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JvZnFpID4gaWZyYW1lJykuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IGlmcmFtZScpLmNvbnRlbnRXaW5kb3cpOwogICAgICAgICAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGdldFBsYXllcldpbigpIHsKICAgICAgICBpZiAobG9jYXRpb24uaHJlZi5pbmNsdWRlcygnL3dhdGNobGF0ZXIvIy9saXN0JykpIHsKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHJlc29sdmUobG9jYXRpb24uaHJlZiksIHsgb25jZTogdHJ1ZSB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZnFpJykpIHsKICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInZpZGVvIikpIHsKICAgICAgICAgICAgICAgIHRvcC5sb2NhdGlvbi5yZWxvYWQoKTsgLy8g5Yi35pawCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2ZxaScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2ZxaScpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxpYmlsaVBsYXllcicpKSB7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3c7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IGlmcmFtZScpKSB7CiAgICAgICAgICAgIHJldHVybiBCaWxpVXNlckpTLmdldElmcmFtZVdpbigpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgPiBvYmplY3QnKSkgewogICAgICAgICAgICB0aHJvdyAnTmVlZCBINSBQbGF5ZXInOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxpYmlsaVBsYXllcicpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh3aW5kb3cpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgPiBpZnJhbWUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoQmlsaVVzZXJKUy5nZXRJZnJhbWVXaW4oKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IG9iamVjdCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJ05lZWQgSDUgUGxheWVyJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZnFpJyksIHsgY2hpbGRMaXN0OiB0cnVlIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgc3RhdGljIHRyeUdldFBsYXllcldpblN5bmMoKSB7CiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxpYmlsaVBsYXllcicpKSB7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3c7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSA+IG9iamVjdCcpKSB7CiAgICAgICAgICAgIHRocm93ICdOZWVkIEg1IFBsYXllcic7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBnZXRDaWRSZWZyZXNoUHJvbWlzZShwbGF5ZXJXaW4pIHsKICAgICAgICAvKioqKioqKioqKioKICAgICAgICAgKiAhISFSYWNlIGNvbmRpdGlvbiEhIQogICAgICAgICAqIFdlIG11c3QgZmluaXNoIGV2ZXJ5dGhpbmcgd2l0aGluIG9uZSBtaWNyb3Rhc2sgcXVldWUhCiAgICAgICAgICogIAogICAgICAgICAqIGJpbGliaWxpIHNjcmlwdDoKICAgICAgICAgKiB2aWRlb0VsZW1lbnQucmVtb3ZlKCkgLT4gc2V0VGltZW91dCgwKSAtPiBbW21pY3JvdGFza11dIC0+IGxvYWQgcGxheXVybAogICAgICAgICAqICAgICAgIFwtIHN5bmNocm9ub3VzIG1hY3JvdGFzayAtLyAgICAgICAgICAgICAgIHx8ICAgICAgICAgICBcLSAgIHN5bmNocm9ub3VzCiAgICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwKICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgdGhlIG9ubHkgcG9zaXRpb24gdG8gaW5qZWN0IG1vbmtleS5zbmlmZkRlZmF1bHRGb3JtYXQKICAgICAgICAqLwogICAgICAgIGNvbnN0IGNpZFJlZnJlc2ggPSBuZXcgQXN5bmNDb250YWluZXIoKTsKCiAgICAgICAgLy8gMS4gbm8gYWN0aXZlIHZpZGVvIGVsZW1lbnQgaW4gZG9jdW1lbnQgPT4gY2lkIHJlZnJlc2gKICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgICAgICAgaWYgKCFwbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJylbMF0pIHsKICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgIGNpZFJlZnJlc2gucmVzb2x2ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShwbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpbGliaWxpUGxheWVyJyksIHsgY2hpbGRMaXN0OiB0cnVlIH0pOwoKICAgICAgICAvLyAyLiBwbGF5ZXJXaW4gdW5sb2FkID0+IGNpZCByZWZyZXNoCiAgICAgICAgcGxheWVyV2luLmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsICgpID0+IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gY2lkUmVmcmVzaC5yZXNvbHZlKCkpKTsKCiAgICAgICAgcmV0dXJuIGNpZFJlZnJlc2g7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGRvbUNvbnRlbnRMb2FkZWRUaGVuKGZ1bmMpIHsKICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSAnbG9hZGluZycpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHJlc29sdmUoZnVuYygpKSwgeyBvbmNlOiB0cnVlIH0pOwogICAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmMoKTsKICAgICAgICB9CiAgICB9Cn0KCi8qKgogKiBDb3B5cmlnaHQgKEMpIDIwMTggWG1hZGVyLgogKiBAYXV0aG9yIFhtYWRlcgogKi8KCi8qKgogKiBAdGVtcGxhdGUgVAogKiBAcGFyYW0ge1Byb21pc2U8VD59IHByb21pc2UgCiAqIEBwYXJhbSB7bnVtYmVyfSBtcyAKICogQHJldHVybnMge1Byb21pc2U8IFQgfCBudWxsID59CiAqLwpjb25zdCBzZXRUaW1lb3V0RG8gPSAocHJvbWlzZSwgbXMpID0+IHsKICAgIC8qKiBAdHlwZSB7UHJvbWlzZTxudWxsPn0gKi8KICAgIGNvbnN0IHQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShudWxsKSwgbXMpOwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtwcm9taXNlLCB0XSkKfTsKCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgoqLwoKLyoqCiAqIEEgcHJvbWlzaWZpZWQgaW5kZXhlZERCIHdpdGggbGFyZ2UgZmlsZSg+MTAwTUIpIHN1cHBvcnQKICovCmNsYXNzIENhY2hlREIgewogICAgY29uc3RydWN0b3IoZGJOYW1lID0gJ2JpbGlNb25rZXknLCBvc05hbWUgPSAnZmx2Jywga2V5UGF0aCA9ICduYW1lJywgbWF4SXRlbVNpemUgPSAxMDAgKiAxMDI0ICogMTAyNCkgewogICAgICAgIC8vIE5laXRoZXIgQ2hyb21lIG9yIEZpcmVmb3ggY2FuIGhhbmRsZSBpdGVtIHNpemUgPiAxMDBNCiAgICAgICAgdGhpcy5kYk5hbWUgPSBkYk5hbWU7CiAgICAgICAgdGhpcy5vc05hbWUgPSBvc05hbWU7CiAgICAgICAgdGhpcy5rZXlQYXRoID0ga2V5UGF0aDsKICAgICAgICB0aGlzLm1heEl0ZW1TaXplID0gbWF4SXRlbVNpemU7CiAgICAgICAgdGhpcy5kYiA9IG51bGw7CiAgICB9CgogICAgYXN5bmMgZ2V0REIoKSB7CiAgICAgICAgaWYgKHRoaXMuZGIpIHJldHVybiB0aGlzLmRiOwogICAgICAgIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG9wZW5SZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4odGhpcy5kYk5hbWUpOwogICAgICAgICAgICBvcGVuUmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgaWYgKCFkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKHRoaXMub3NOYW1lKSkgewogICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMub3NOYW1lLCB7IGtleVBhdGg6IHRoaXMua2V5UGF0aCB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgb3BlblJlcXVlc3Qub25zdWNjZXNzID0gZSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICB9OwogICAgICAgICAgICBvcGVuUmVxdWVzdC5vbmVycm9yID0gcmVqZWN0OwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLmRiOwogICAgfQoKICAgIGFzeW5jIGFkZERhdGEoaXRlbSwgbmFtZSA9IGl0ZW0ubmFtZSwgZGF0YSA9IGl0ZW0uZGF0YSB8fCBpdGVtKSB7CiAgICAgICAgaWYgKCFkYXRhIGluc3RhbmNlb2YgQmxvYikgdGhyb3cgJ0NhY2hlREI6IGRhdGEgbXVzdCBiZSBhIEJsb2InOwogICAgICAgIGNvbnN0IGl0ZW1DaHVua3MgPSBbXTsKICAgICAgICBjb25zdCBudW1DaHVua3MgPSBNYXRoLmNlaWwoZGF0YS5zaXplIC8gdGhpcy5tYXhJdGVtU2l6ZSk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1DaHVua3M7IGkrKykgewogICAgICAgICAgICBpdGVtQ2h1bmtzLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogYCR7bmFtZX0vcGFydF8ke2l9YCwKICAgICAgICAgICAgICAgIG51bUNodW5rcywKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEuc2xpY2UoaSAqIHRoaXMubWF4SXRlbVNpemUsIChpICsgMSkgKiB0aGlzLm1heEl0ZW1TaXplKQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHJlcUNhc2NhZGUgPSBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5nZXREQigpOwogICAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IGRiLnRyYW5zYWN0aW9uKFt0aGlzLm9zTmFtZV0sICdyZWFkd3JpdGUnKS5vYmplY3RTdG9yZSh0aGlzLm9zTmFtZSk7CiAgICAgICAgICAgIGNvbnN0IG9uc3VjY2VzcyA9IGUgPT4gewogICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBpdGVtQ2h1bmtzLnBvcCgpOwogICAgICAgICAgICAgICAgaWYgKCFjaHVuaykgcmV0dXJuIHJlc29sdmUoZSk7CiAgICAgICAgICAgICAgICBjb25zdCByZXEgPSBvYmplY3RTdG9yZS5hZGQoY2h1bmspOwogICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gb25zdWNjZXNzOwogICAgICAgICAgICB9OwogICAgICAgICAgICBvbnN1Y2Nlc3MoKTsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHJlcUNhc2NhZGU7CiAgICB9CgogICAgYXN5bmMgcHV0RGF0YShpdGVtLCBuYW1lID0gaXRlbS5uYW1lLCBkYXRhID0gaXRlbS5kYXRhIHx8IGl0ZW0pIHsKICAgICAgICBpZiAoIWRhdGEgaW5zdGFuY2VvZiBCbG9iKSB0aHJvdyAnQ2FjaGVEQjogZGF0YSBtdXN0IGJlIGEgQmxvYic7CiAgICAgICAgY29uc3QgaXRlbUNodW5rcyA9IFtdOwogICAgICAgIGNvbnN0IG51bUNodW5rcyA9IE1hdGguY2VpbChkYXRhLnNpemUgLyB0aGlzLm1heEl0ZW1TaXplKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNodW5rczsgaSsrKSB7CiAgICAgICAgICAgIGl0ZW1DaHVua3MucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiBgJHtuYW1lfS9wYXJ0XyR7aX1gLAogICAgICAgICAgICAgICAgbnVtQ2h1bmtzLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YS5zbGljZShpICogdGhpcy5tYXhJdGVtU2l6ZSwgKGkgKyAxKSAqIHRoaXMubWF4SXRlbVNpemUpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcmVxQ2FzY2FkZSA9IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLmdldERCKCk7CiAgICAgICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gZGIudHJhbnNhY3Rpb24oW3RoaXMub3NOYW1lXSwgJ3JlYWR3cml0ZScpLm9iamVjdFN0b3JlKHRoaXMub3NOYW1lKTsKICAgICAgICAgICAgY29uc3Qgb25zdWNjZXNzID0gZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IGl0ZW1DaHVua3MucG9wKCk7CiAgICAgICAgICAgICAgICBpZiAoIWNodW5rKSByZXR1cm4gcmVzb2x2ZShlKTsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcSA9IG9iamVjdFN0b3JlLnB1dChjaHVuayk7CiAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBvbnN1Y2Nlc3M7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG9uc3VjY2VzcygpOwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gcmVxQ2FzY2FkZTsKICAgIH0KCiAgICBhc3luYyBnZXREYXRhKG5hbWUpIHsKICAgICAgICBjb25zdCByZXFDYXNjYWRlID0gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICBjb25zdCBkYXRhQ2h1bmtzID0gW107CiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5nZXREQigpOyAgLy8g5rWP6KeI5Zmo6buY6K6k5Zyo6ZqQ56eB5rWP6KeI5qih5byP5Lit56aB55SoIEluZGV4ZWREQiDvvIzov5nkuIDmraXkvJrotoXml7YKICAgICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSBkYi50cmFuc2FjdGlvbihbdGhpcy5vc05hbWVdLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUodGhpcy5vc05hbWUpOwogICAgICAgICAgICBjb25zdCBwcm9iZSA9IG9iamVjdFN0b3JlLmdldChgJHtuYW1lfS9wYXJ0XzBgKTsKICAgICAgICAgICAgcHJvYmUub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgcHJvYmUub25zdWNjZXNzID0gZSA9PiB7CiAgICAgICAgICAgICAgICAvLyAxLiBQcm9iZSBmYWlscyA9PiBrZXkgZG9lcyBub3QgZXhpc3QKICAgICAgICAgICAgICAgIGlmICghcHJvYmUucmVzdWx0KSByZXR1cm4gcmVzb2x2ZShudWxsKTsKCiAgICAgICAgICAgICAgICAvLyAyLiBIb3cgbWFueSBjaHVua3MgdG8gcmV0cmlldmU/CiAgICAgICAgICAgICAgICBjb25zdCB7IG51bUNodW5rcyB9ID0gcHJvYmUucmVzdWx0OwoKICAgICAgICAgICAgICAgIC8vIDMuIENhc2NhZGUgb24gdGhlIHJlbWFpbmluZyBjaHVua3MKICAgICAgICAgICAgICAgIGNvbnN0IG9uc3VjY2VzcyA9IGUgPT4gewogICAgICAgICAgICAgICAgICAgIGRhdGFDaHVua3MucHVzaChlLnRhcmdldC5yZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFDaHVua3MubGVuZ3RoID09IG51bUNodW5rcykgcmV0dXJuIHJlc29sdmUoZGF0YUNodW5rcyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxID0gb2JqZWN0U3RvcmUuZ2V0KGAke25hbWV9L3BhcnRfJHtkYXRhQ2h1bmtzLmxlbmd0aH1gKTsKICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gb25zdWNjZXNzOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG9uc3VjY2VzcyhlKTsKICAgICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAgICAgLy8g5rWP6KeI5Zmo6buY6K6k5Zyo6ZqQ56eB5rWP6KeI5qih5byP5Lit56aB55SoIEluZGV4ZWREQiDvvIzmt7vliqDotoXml7YKICAgICAgICBjb25zdCBkYXRhQ2h1bmtzID0gYXdhaXQgc2V0VGltZW91dERvKHJlcUNhc2NhZGUsIDUgKiAxMDAwKTsKCiAgICAgICAgcmV0dXJuIGRhdGFDaHVua3MgPyB7IG5hbWUsIGRhdGE6IG5ldyBCbG9iKGRhdGFDaHVua3MpIH0gOiBudWxsOwogICAgfQoKICAgIGFzeW5jIGRlbGV0ZURhdGEobmFtZSkgewogICAgICAgIGNvbnN0IHJlcUNhc2NhZGUgPSBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIGxldCBjdXJyZW50Q2h1bmtOdW0gPSAwOwogICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuZ2V0REIoKTsKICAgICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSBkYi50cmFuc2FjdGlvbihbdGhpcy5vc05hbWVdLCAncmVhZHdyaXRlJykub2JqZWN0U3RvcmUodGhpcy5vc05hbWUpOwogICAgICAgICAgICBjb25zdCBwcm9iZSA9IG9iamVjdFN0b3JlLmdldChgJHtuYW1lfS9wYXJ0XzBgKTsKICAgICAgICAgICAgcHJvYmUub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgcHJvYmUub25zdWNjZXNzID0gZSA9PiB7CiAgICAgICAgICAgICAgICAvLyAxLiBQcm9iZSBmYWlscyA9PiBrZXkgZG9lcyBub3QgZXhpc3QKICAgICAgICAgICAgICAgIGlmICghcHJvYmUucmVzdWx0KSByZXR1cm4gcmVzb2x2ZShudWxsKTsKCiAgICAgICAgICAgICAgICAvLyAyLiBIb3cgbWFueSBjaHVua3MgdG8gZGVsZXRlPwogICAgICAgICAgICAgICAgY29uc3QgeyBudW1DaHVua3MgfSA9IHByb2JlLnJlc3VsdDsKCiAgICAgICAgICAgICAgICAvLyAzLiBDYXNjYWRlIG9uIHRoZSByZW1haW5pbmcgY2h1bmtzCiAgICAgICAgICAgICAgICBjb25zdCBvbnN1Y2Nlc3MgPSBlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZXEgPSBvYmplY3RTdG9yZS5kZWxldGUoYCR7bmFtZX0vcGFydF8ke2N1cnJlbnRDaHVua051bX1gKTsKICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gb25zdWNjZXNzOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDaHVua051bSsrOwogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2h1bmtOdW0gPT0gbnVtQ2h1bmtzKSByZXR1cm4gcmVzb2x2ZShlKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBvbnN1Y2Nlc3MoKTsKICAgICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHJlcUNhc2NhZGU7CiAgICB9CgogICAgYXN5bmMgZGVsZXRlRW50aXJlREIoKSB7CiAgICAgICAgY29uc3QgcmVxID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHRoaXMuZGJOYW1lKTsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICByZXEub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZSh0aGlzLmRiID0gbnVsbCk7CiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgIH0pOwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBfVU5JVF9URVNUKCkgewogICAgICAgIGxldCBkYiA9IG5ldyBDYWNoZURCKCk7CiAgICAgICAgY29uc29sZS53YXJuKCdTdG9yaW5nIDIwMU1CLi4uJyk7CiAgICAgICAgY29uc29sZS5sb2coYXdhaXQgZGIucHV0RGF0YShuZXcgQmxvYihbbmV3IEFycmF5QnVmZmVyKDIwMSAqIDEwMjQgKiAxMDI0KV0pLCAndGVzdCcpKTsKICAgICAgICBjb25zb2xlLndhcm4oJ0RlbGV0aW5nIDIwMU1CLi4uJyk7CiAgICAgICAgY29uc29sZS5sb2coYXdhaXQgZGIuZGVsZXRlRGF0YSgndGVzdCcpKTsKICAgIH0KfQoKLyoqKgogKiBDb3B5cmlnaHQgKEMpIDIwMTggUWxpNS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogCiAqIEBhdXRob3IgcWxpNSA8Z29vZGxxMTFbYXRdKDE2M3xnbWFpbCkuY29tPgogKiAKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiovCgovKioKICogQSBtb3JlIHBvd2VyZnVsIGZldGNoIHdpdGgKICogICAxLiBvbnByb2dyZXNzIGhhbmRsZXIKICogICAyLiBwYXJ0aWFsIHJlc3BvbnNlIGdldHRlcgogKi8KY2xhc3MgRGV0YWlsZWRGZXRjaEJsb2IgewogICAgY29uc3RydWN0b3IoaW5wdXQsIGluaXQgPSB7fSwgb25wcm9ncmVzcyA9IGluaXQub25wcm9ncmVzcywgb25hYm9ydCA9IGluaXQub25hYm9ydCwgb25lcnJvciA9IGluaXQub25lcnJvciwgZmV0Y2ggPSBpbml0LmZldGNoIHx8IHRvcC5mZXRjaCkgewogICAgICAgIC8vIEZpcmUgaW4gdGhlIEZveCBmaXgKICAgICAgICBpZiAodGhpcy5maXJlZm94Q29uc3RydWN0b3IoaW5wdXQsIGluaXQsIG9ucHJvZ3Jlc3MsIG9uYWJvcnQsIG9uZXJyb3IpKSByZXR1cm47CiAgICAgICAgLy8gTm93IEkga25vdyB3aHkgc3RhbmRhcmRpemluZyBjYW5jZWxhYmxlIFByb21pc2UgaXMgdGhhdCBkaWZmaWN1bHQKICAgICAgICAvLyBQTEVBU0UgcmVmYWN0b3IgbWUhCiAgICAgICAgdGhpcy5vbnByb2dyZXNzID0gb25wcm9ncmVzczsKICAgICAgICB0aGlzLm9uYWJvcnQgPSBvbmFib3J0OwogICAgICAgIHRoaXMub25lcnJvciA9IG9uZXJyb3I7CiAgICAgICAgdGhpcy5hYm9ydCA9IG51bGw7CiAgICAgICAgdGhpcy5sb2FkZWQgPSBpbml0LmNhY2hlTG9hZGVkIHx8IDA7CiAgICAgICAgdGhpcy50b3RhbCA9IGluaXQuY2FjaGVMb2FkZWQgfHwgMDsKICAgICAgICB0aGlzLmxlbmd0aENvbXB1dGFibGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIHRoaXMuYmxvYiA9IG51bGw7CiAgICAgICAgdGhpcy5yZWFkZXIgPSBudWxsOwogICAgICAgIHRoaXMuYmxvYlByb21pc2UgPSBmZXRjaChpbnB1dCwgaW5pdCkudGhlbigvKiogQHBhcmFtIHtSZXNwb25zZX0gcmVzICovIHJlcyA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRlciA9PSAnYWJvcnQnKSByZXR1cm4gcmVzLmJvZHkuZ2V0UmVhZGVyKCkuY2FuY2VsKCkudGhlbigoKSA9PiBudWxsKTsKICAgICAgICAgICAgaWYgKCFyZXMub2spIHRocm93IGBIVFRQIEVycm9yICR7cmVzLnN0YXR1c306ICR7cmVzLnN0YXR1c1RleHR9YDsKICAgICAgICAgICAgdGhpcy5sZW5ndGhDb21wdXRhYmxlID0gcmVzLmhlYWRlcnMuaGFzKCdDb250ZW50LUxlbmd0aCcpOwogICAgICAgICAgICB0aGlzLnRvdGFsICs9IHBhcnNlSW50KHJlcy5oZWFkZXJzLmdldCgnQ29udGVudC1MZW5ndGgnKSkgfHwgSW5maW5pdHk7CiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aENvbXB1dGFibGUpIHsKICAgICAgICAgICAgICAgIHRoaXMucmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9iID0gdGhpcy5jb25zdW1lKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbnByb2dyZXNzKSB0aGlzLm9ucHJvZ3Jlc3ModGhpcy5sb2FkZWQsIHRoaXMudG90YWwsIHRoaXMubGVuZ3RoQ29tcHV0YWJsZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ibG9iID0gcmVzLmJsb2IoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuYmxvYlByb21pc2UudGhlbigoKSA9PiB0aGlzLmFib3J0ID0gKCkgPT4geyB9KTsKICAgICAgICB0aGlzLmJsb2JQcm9taXNlLmNhdGNoKGUgPT4gdGhpcy5vbmVycm9yKHsgdGFyZ2V0OiB0aGlzLCB0eXBlOiBlIH0pKTsKICAgICAgICB0aGlzLnByb21pc2UgPSBQcm9taXNlLnJhY2UoWwogICAgICAgICAgICB0aGlzLmJsb2JQcm9taXNlLAogICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHRoaXMuYWJvcnQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm9uYWJvcnQoeyB0YXJnZXQ6IHRoaXMsIHR5cGU6ICdhYm9ydCcgfSk7CiAgICAgICAgICAgICAgICByZXNvbHZlKCdhYm9ydCcpOwogICAgICAgICAgICAgICAgdGhpcy5idWZmZXIgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuYmxvYiA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkZXIpIHRoaXMucmVhZGVyLmNhbmNlbCgpOwogICAgICAgICAgICAgICAgZWxzZSB0aGlzLnJlYWRlciA9ICdhYm9ydCc7CiAgICAgICAgICAgIH0pCiAgICAgICAgXSkudGhlbihzID0+IHMgPT0gJ2Fib3J0JyA/IG5ldyBQcm9taXNlKCgpID0+IHsgfSkgOiBzKTsKICAgICAgICB0aGlzLnRoZW4gPSB0aGlzLnByb21pc2UudGhlbi5iaW5kKHRoaXMucHJvbWlzZSk7CiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMucHJvbWlzZS5jYXRjaC5iaW5kKHRoaXMucHJvbWlzZSk7CiAgICB9CgogICAgZ2V0UGFydGlhbEJsb2IoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKHRoaXMuYnVmZmVyKTsKICAgIH0KCiAgICBhc3luYyBnZXRCbG9iKCkgewogICAgICAgIHJldHVybiB0aGlzLnByb21pc2U7CiAgICB9CgogICAgYXN5bmMgcHVtcCgpIHsKICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICBsZXQgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpOwogICAgICAgICAgICBpZiAoZG9uZSkgcmV0dXJuIHRoaXMubG9hZGVkOwogICAgICAgICAgICB0aGlzLmxvYWRlZCArPSB2YWx1ZS5ieXRlTGVuZ3RoOwogICAgICAgICAgICB0aGlzLmJ1ZmZlci5wdXNoKG5ldyBCbG9iKFt2YWx1ZV0pKTsKICAgICAgICAgICAgaWYgKHRoaXMub25wcm9ncmVzcykgdGhpcy5vbnByb2dyZXNzKHRoaXMubG9hZGVkLCB0aGlzLnRvdGFsLCB0aGlzLmxlbmd0aENvbXB1dGFibGUpOwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBjb25zdW1lKCkgewogICAgICAgIGF3YWl0IHRoaXMucHVtcCgpOwogICAgICAgIHRoaXMuYmxvYiA9IG5ldyBCbG9iKHRoaXMuYnVmZmVyKTsKICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7CiAgICAgICAgcmV0dXJuIHRoaXMuYmxvYjsKICAgIH0KCiAgICBmaXJlZm94Q29uc3RydWN0b3IoaW5wdXQsIGluaXQgPSB7fSwgb25wcm9ncmVzcyA9IGluaXQub25wcm9ncmVzcywgb25hYm9ydCA9IGluaXQub25hYm9ydCwgb25lcnJvciA9IGluaXQub25lcnJvcikgewogICAgICAgIGlmICghdG9wLm5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0ZpcmVmb3gnKSkgcmV0dXJuIGZhbHNlOwoKICAgICAgICBjb25zdCBmaXJlZm94VmVyc2lvbk0gPSB0b3AubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRmlyZWZveFwvKFxkKykvKTsKICAgICAgICBjb25zdCBmaXJlZm94VmVyc2lvbiA9IGZpcmVmb3hWZXJzaW9uTSAmJiArZmlyZWZveFZlcnNpb25NWzFdOwogICAgICAgIGlmIChmaXJlZm94VmVyc2lvbiA+PSA2NSkgewogICAgICAgICAgICAvLyB4aHIucmVzcG9uc2VUeXBlICJtb3otY2h1bmtlZC1hcnJheWJ1ZmZlciIgaXMgZGVwcmVjYXRlZCBzaW5jZSBGaXJlZm94IDY4CiAgICAgICAgICAgIC8vIGJ1dCByZXMuYm9keSBpcyBpbXBsZW1lbnRlZCBzaW5jZSBGaXJlZm94IDY1CiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KCiAgICAgICAgdGhpcy5vbnByb2dyZXNzID0gb25wcm9ncmVzczsKICAgICAgICB0aGlzLm9uYWJvcnQgPSBvbmFib3J0OwogICAgICAgIHRoaXMub25lcnJvciA9IG9uZXJyb3I7CiAgICAgICAgdGhpcy5hYm9ydCA9IG51bGw7CiAgICAgICAgdGhpcy5sb2FkZWQgPSBpbml0LmNhY2hlTG9hZGVkIHx8IDA7CiAgICAgICAgdGhpcy50b3RhbCA9IGluaXQuY2FjaGVMb2FkZWQgfHwgMDsKICAgICAgICB0aGlzLmxlbmd0aENvbXB1dGFibGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmJ1ZmZlciA9IFtdOwogICAgICAgIHRoaXMuYmxvYiA9IG51bGw7CiAgICAgICAgdGhpcy5yZWFkZXIgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5ibG9iUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJzsKICAgICAgICAgICAgeGhyLm9ubG9hZCA9ICgpID0+IHsgcmVzb2x2ZSh0aGlzLmJsb2IgPSBuZXcgQmxvYih0aGlzLmJ1ZmZlcikpOyB0aGlzLmJ1ZmZlciA9IG51bGw7IH07CiAgICAgICAgICAgIGxldCBjYWNoZUxvYWRlZCA9IHRoaXMubG9hZGVkOwogICAgICAgICAgICB4aHIub25wcm9ncmVzcyA9IGUgPT4gewogICAgICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSBlLmxvYWRlZCArIGNhY2hlTG9hZGVkOwogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IGUudG90YWwgKyBjYWNoZUxvYWRlZDsKICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoQ29tcHV0YWJsZSA9IGUubGVuZ3RoQ29tcHV0YWJsZTsKICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2gobmV3IEJsb2IoW3hoci5yZXNwb25zZV0pKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9ucHJvZ3Jlc3MpIHRoaXMub25wcm9ncmVzcyh0aGlzLmxvYWRlZCwgdGhpcy50b3RhbCwgdGhpcy5sZW5ndGhDb21wdXRhYmxlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBlID0+IHRoaXMub25hYm9ydCh7IHRhcmdldDogdGhpcywgdHlwZTogJ2Fib3J0JyB9KTsKICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBlID0+IHsgdGhpcy5vbmVycm9yKHsgdGFyZ2V0OiB0aGlzLCB0eXBlOiBlLnR5cGUgfSk7IHJlamVjdChlKTsgfTsKICAgICAgICAgICAgdGhpcy5hYm9ydCA9IHhoci5hYm9ydC5iaW5kKHhocik7CiAgICAgICAgICAgIHhoci5vcGVuKGluaXQubWV0aG9kIHx8ICdnZXQnLCBpbnB1dCk7CiAgICAgICAgICAgIGlmIChpbml0LmhlYWRlcnMpIHsKICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGluaXQuaGVhZGVycykuZm9yRWFjaCgoW2hlYWRlciwgdmFsdWVdKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB4aHIuc2VuZCgpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMuYmxvYlByb21pc2U7CiAgICAgICAgdGhpcy50aGVuID0gdGhpcy5wcm9taXNlLnRoZW4uYmluZCh0aGlzLnByb21pc2UpOwogICAgICAgIHRoaXMuY2F0Y2ggPSB0aGlzLnByb21pc2UuY2F0Y2guYmluZCh0aGlzLnByb21pc2UpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9CgovKioqCiAqIENvcHlyaWdodCAoQykgMjAxOCBRbGk1LiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiAKICogQGF1dGhvciBxbGk1IDxnb29kbHExMVthdF0oMTYzfGdtYWlsKS5jb20+CiAqIAogKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMKICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4KKi8KCi8qKgogKiBBIHNpbXBsZSBlbXVsYXRpb24gb2YgcHRocmVhZF9tdXRleAogKi8KY2xhc3MgTXV0ZXggewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgdGhpcy5xdWV1ZVRhaWwgPSBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICB0aGlzLnJlc29sdmVIZWFkID0gbnVsbDsKICAgIH0KCiAgICAvKiogCiAgICAgKiBhd2FpdCBtdXRleC5sb2NrID0gcHRocmVhZF9tdXRleF9sb2NrCiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdG8gYmUgcmVzb2x2ZWQgd2hlbiB0aGUgbXV0ZXggaXMgYXZhaWxhYmxlCiAgICAqLwogICAgYXN5bmMgbG9jaygpIHsKICAgICAgICBsZXQgbXlSZXNvbHZlOwogICAgICAgIGxldCBfcXVldWVUYWlsID0gdGhpcy5xdWV1ZVRhaWw7CiAgICAgICAgdGhpcy5xdWV1ZVRhaWwgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IG15UmVzb2x2ZSA9IHJlc29sdmUpOwogICAgICAgIGF3YWl0IF9xdWV1ZVRhaWw7CiAgICAgICAgdGhpcy5yZXNvbHZlSGVhZCA9IG15UmVzb2x2ZTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgLyoqCiAgICAgKiBtdXRleC51bmxvY2sgPSBwdGhyZWFkX211dGV4X3VubG9jawogICAgICovCiAgICB1bmxvY2soKSB7CiAgICAgICAgdGhpcy5yZXNvbHZlSGVhZCgpOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAvKioKICAgICAqIGxvY2ssIHJldCA9IGF3YWl0IGFzeW5jLCB1bmxvY2ssIHJldHVybiByZXQKICAgICAqIEBwYXJhbSB7KEZ1bmN0aW9ufFByb21pc2UpfSBwcm9taXNlIGFzeW5jIHRoaW5nIHRvIHdhaXQgZm9yCiAgICAgKi8KICAgIGFzeW5jIGxvY2tBbmRBd2FpdChwcm9taXNlKSB7CiAgICAgICAgYXdhaXQgdGhpcy5sb2NrKCk7CiAgICAgICAgbGV0IHJldDsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAodHlwZW9mIHByb21pc2UgPT0gJ2Z1bmN0aW9uJykgcHJvbWlzZSA9IHByb21pc2UoKTsKICAgICAgICAgICAgcmV0ID0gYXdhaXQgcHJvbWlzZTsKICAgICAgICB9CiAgICAgICAgZmluYWxseSB7CiAgICAgICAgICAgIHRoaXMudW5sb2NrKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgc3RhdGljIF9VTklUX1RFU1QoKSB7CiAgICAgICAgbGV0IG0gPSBuZXcgTXV0ZXgoKTsKICAgICAgICBmdW5jdGlvbiBzbGVlcCh0aW1lKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgdGltZSkpOwogICAgICAgIH0KICAgICAgICBtLmxvY2tBbmRBd2FpdCgoKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2hlY2sgbWVzc2FnZSB0aW1lc3RhbXBzLicpOwogICAgICAgICAgICBjb25zb2xlLndhcm4oJ0JhZDonKTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCcxIDEgMSAxIDE6NXMnKTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCcgMSAxIDEgMSAxOjEwcycpOwogICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dvb2Q6Jyk7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignMSAxIDEgMSAxOjVzJyk7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignICAgICAgICAgMSAxIDEgMSAxOjEwcycpOwogICAgICAgIH0pOwogICAgICAgIG0ubG9ja0FuZEF3YWl0KGFzeW5jICgpID0+IHsKICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMDApOwogICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDAwKTsKICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMDApOwogICAgICAgIH0pOwogICAgICAgIG0ubG9ja0FuZEF3YWl0KGFzeW5jICgpID0+IGNvbnNvbGUubG9nKCc1cyEnKSk7CiAgICAgICAgbS5sb2NrQW5kQXdhaXQoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDAwKTsKICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgICAgIGF3YWl0IHNsZWVwKDEwMDApOwogICAgICAgICAgICBhd2FpdCBzbGVlcCgxMDAwKTsKICAgICAgICAgICAgYXdhaXQgc2xlZXAoMTAwMCk7CiAgICAgICAgfSk7CiAgICAgICAgbS5sb2NrQW5kQXdhaXQoYXN5bmMgKCkgPT4gY29uc29sZS5sb2coJzEwcyEnKSk7CiAgICB9Cn0KCi8qKgogICAgICogQHR5cGVkZWYgRGFubWFrdUNvbG9yCiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gcgogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGcKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBiCiAgICAgKi8KICAgIC8qKgogICAgICogQHR5cGVkZWYgRGFubWFrdQogICAgICogQHByb3BlcnR5IHtzdHJpbmd9IHRleHQKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lCiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gbW9kZQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHNpemUKICAgICAqIEBwcm9wZXJ0eSB7RGFubWFrdUNvbG9yfSBjb2xvcgogICAgICogQHByb3BlcnR5IHtib29sZWFufSBib3R0b20KICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nPX0gc2VuZGVyCiAgICAgKi8KCiAgICBjb25zdCBwYXJzZXIgPSB7fTsKCiAgICAvKioKICAgICAqIEBwYXJhbSB7RGFubWFrdX0gZGFubWFrdQogICAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICAgKi8KICAgIGNvbnN0IGRhbm1ha3VGaWx0ZXIgPSBkYW5tYWt1ID0+IHsKICAgICAgaWYgKCFkYW5tYWt1KSByZXR1cm4gZmFsc2U7CiAgICAgIGlmICghZGFubWFrdS50ZXh0KSByZXR1cm4gZmFsc2U7CiAgICAgIGlmICghZGFubWFrdS5tb2RlKSByZXR1cm4gZmFsc2U7CiAgICAgIGlmICghZGFubWFrdS5zaXplKSByZXR1cm4gZmFsc2U7CiAgICAgIGlmIChkYW5tYWt1LnRpbWUgPCAwIHx8IGRhbm1ha3UudGltZSA+PSAzNjAwMDApIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9OwoKICAgIGNvbnN0IHBhcnNlUmdiMjU2SW50ZWdlckNvbG9yID0gY29sb3IgPT4gewogICAgICBjb25zdCByZ2IgPSBwYXJzZUludChjb2xvciwgMTApOwogICAgICBjb25zdCByID0gKHJnYiA+Pj4gNCkgJiAweGZmOwogICAgICBjb25zdCBnID0gKHJnYiA+Pj4gMikgJiAweGZmOwogICAgICBjb25zdCBiID0gKHJnYiA+Pj4gMCkgJiAweGZmOwogICAgICByZXR1cm4geyByLCBnLCBiIH07CiAgICB9OwoKICAgIGNvbnN0IHBhcnNlTmljb25pY29Db2xvciA9IG1haWwgPT4gewogICAgICBjb25zdCBjb2xvclRhYmxlID0gewogICAgICAgIHJlZDogeyByOiAyNTUsIGc6IDAsIGI6IDAgfSwKICAgICAgICBwaW5rOiB7IHI6IDI1NSwgZzogMTI4LCBiOiAxMjggfSwKICAgICAgICBvcmFuZ2U6IHsgcjogMjU1LCBnOiAxODQsIGI6IDAgfSwKICAgICAgICB5ZWxsb3c6IHsgcjogMjU1LCBnOiAyNTUsIGI6IDAgfSwKICAgICAgICBncmVlbjogeyByOiAwLCBnOiAyNTUsIGI6IDAgfSwKICAgICAgICBjeWFuOiB7IHI6IDAsIGc6IDI1NSwgYjogMjU1IH0sCiAgICAgICAgYmx1ZTogeyByOiAwLCBnOiAwLCBiOiAyNTUgfSwKICAgICAgICBwdXJwbGU6IHsgcjogMTg0LCBnOiAwLCBiOiAyNTUgfSwKICAgICAgICBibGFjazogeyByOiAwLCBnOiAwLCBiOiAwIH0sCiAgICAgIH07CiAgICAgIGNvbnN0IGRlZmF1bHRDb2xvciA9IHsgcjogMjU1LCBnOiAyNTUsIGI6IDI1NSB9OwogICAgICBjb25zdCBsaW5lID0gbWFpbC50b0xvd2VyQ2FzZSgpLnNwbGl0KC9ccysvKTsKICAgICAgY29uc3QgY29sb3IgPSBPYmplY3Qua2V5cyhjb2xvclRhYmxlKS5maW5kKGNvbG9yID0+IGxpbmUuaW5jbHVkZXMoY29sb3IpKTsKICAgICAgcmV0dXJuIGNvbG9yID8gY29sb3JUYWJsZVtjb2xvcl0gOiBkZWZhdWx0Q29sb3I7CiAgICB9OwoKICAgIGNvbnN0IHBhcnNlTmljb25pY29Nb2RlID0gbWFpbCA9PiB7CiAgICAgIGNvbnN0IGxpbmUgPSBtYWlsLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xzKy8pOwogICAgICBpZiAobGluZS5pbmNsdWRlcygndWUnKSkgcmV0dXJuICdUT1AnOwogICAgICBpZiAobGluZS5pbmNsdWRlcygnc2hpdGEnKSkgcmV0dXJuICdCT1RUT00nOwogICAgICByZXR1cm4gJ1JUTCc7CiAgICB9OwoKICAgIGNvbnN0IHBhcnNlTmljb25pY29TaXplID0gbWFpbCA9PiB7CiAgICAgIGNvbnN0IGxpbmUgPSBtYWlsLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xzKy8pOwogICAgICBpZiAobGluZS5pbmNsdWRlcygnYmlnJykpIHJldHVybiAzNjsKICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ3NtYWxsJykpIHJldHVybiAxNjsKICAgICAgcmV0dXJuIDI1OwogICAgfTsKCiAgICAvKioKICAgICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5QnVmZmVyfSBjb250ZW50CiAgICAgKiBAcmV0dXJuIHt7IGNpZDogbnVtYmVyLCBkYW5tYWt1OiBBcnJheTxEYW5tYWt1PiB9fQogICAgICovCiAgICBwYXJzZXIuYmlsaWJpbGkgPSBmdW5jdGlvbiAoY29udGVudCkgewogICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnID8gY29udGVudCA6IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUoY29udGVudCk7CiAgICAgIGNvbnN0IGNsZWFuID0gdGV4dC5yZXBsYWNlKC8oPzpbXDAtXHgwOFx4MEJcZlx4MEUtXHgxRlx1RkZGRVx1RkZGRl18W1x1RDgwMC1cdURCRkZdKD8hW1x1REMwMC1cdURGRkZdKXwoPzpbXlx1RDgwMC1cdURCRkZdfF4pW1x1REMwMC1cdURGRkZdKS9nLCAnJykucmVwbGFjZSgvLio/XD8+LywiIik7CiAgICAgIGNvbnN0IGRhdGEgPSAobmV3IERPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcoY2xlYW4sICd0ZXh0L3htbCcpOwogICAgICBjb25zdCBjaWQgPSArZGF0YS5xdWVyeVNlbGVjdG9yKCdjaGF0aWQsb2lkJykudGV4dENvbnRlbnQ7CiAgICAgIC8qKiBAdHlwZSB7QXJyYXk8RGFubWFrdT59ICovCiAgICAgIGNvbnN0IGRhbm1ha3UgPSBBcnJheS5mcm9tKGRhdGEucXVlcnlTZWxlY3RvckFsbCgnZCcpKS5tYXAoZCA9PiB7CiAgICAgICAgY29uc3QgcCA9IGQuZ2V0QXR0cmlidXRlKCdwJyk7CiAgICAgICAgY29uc3QgW3RpbWUsIG1vZGUsIHNpemUsIGNvbG9yLCBjcmVhdGUsIGJvdHRvbSwgc2VuZGVyLCBpZF0gPSBwLnNwbGl0KCcsJyk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRleHQ6IGQudGV4dENvbnRlbnQsCiAgICAgICAgICB0aW1lOiArdGltZSwKICAgICAgICAgIC8vIFdlIGRvIG5vdCBzdXBwb3J0IGx0ciBtb2RlCiAgICAgICAgICBtb2RlOiBbbnVsbCwgJ1JUTCcsICdSVEwnLCAnUlRMJywgJ0JPVFRPTScsICdUT1AnXVsrbW9kZV0sCiAgICAgICAgICBzaXplOiArc2l6ZSwKICAgICAgICAgIGNvbG9yOiBwYXJzZVJnYjI1NkludGVnZXJDb2xvcihjb2xvciksCiAgICAgICAgICBib3R0b206IGJvdHRvbSA+IDAsCiAgICAgICAgICBzZW5kZXIsCiAgICAgICAgfTsKICAgICAgfSkuZmlsdGVyKGRhbm1ha3VGaWx0ZXIpOwogICAgICByZXR1cm4geyBjaWQsIGRhbm1ha3UgfTsKICAgIH07CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheUJ1ZmZlcn0gY29udGVudAogICAgICogQHJldHVybiB7eyBjaWQ6IG51bWJlciwgZGFubWFrdTogQXJyYXk8RGFubWFrdT4gfX0KICAgICAqLwogICAgcGFyc2VyLmFjZnVuID0gZnVuY3Rpb24gKGNvbnRlbnQpIHsKICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJyA/IGNvbnRlbnQgOiBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGNvbnRlbnQpOwogICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTsKICAgICAgY29uc3QgbGlzdCA9IGRhdGEucmVkdWNlKCh4LCB5KSA9PiB4LmNvbmNhdCh5KSwgW10pOwogICAgICBjb25zdCBkYW5tYWt1ID0gbGlzdC5tYXAobGluZSA9PiB7CiAgICAgICAgY29uc3QgW3RpbWUsIGNvbG9yLCBtb2RlLCBzaXplLCBzZW5kZXIsIGNyZWF0ZSwgdXVpZF0gPSBsaW5lLmMuc3BsaXQoJywnKSwgdGV4dCA9IGxpbmUubTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dCwKICAgICAgICAgIHRpbWU6ICt0aW1lLAogICAgICAgICAgY29sb3I6IHBhcnNlUmdiMjU2SW50ZWdlckNvbG9yKCtjb2xvciksCiAgICAgICAgICBtb2RlOiBbbnVsbCwgJ1JUTCcsIG51bGwsIG51bGwsICdCT1RUT00nLCAnVE9QJ11bbW9kZV0sCiAgICAgICAgICBzaXplOiArc2l6ZSwKICAgICAgICAgIGJvdHRvbTogZmFsc2UsCiAgICAgICAgICB1dWlkLAogICAgICAgIH07CiAgICAgIH0pLmZpbHRlcihkYW5tYWt1RmlsdGVyKTsKICAgICAgcmV0dXJuIHsgZGFubWFrdSB9OwogICAgfTsKCiAgICAvKioKICAgICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5QnVmZmVyfSBjb250ZW50CiAgICAgKiBAcmV0dXJuIHt7IGNpZDogbnVtYmVyLCBkYW5tYWt1OiBBcnJheTxEYW5tYWt1PiB9fQogICAgICovCiAgICBwYXJzZXIubmljb25pY28gPSBmdW5jdGlvbiAoY29udGVudCkgewogICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnID8gY29udGVudCA6IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUoY29udGVudCk7CiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHRleHQpOwogICAgICBjb25zdCBsaXN0ID0gZGF0YS5tYXAoaXRlbSA9PiBpdGVtLmNoYXQpLmZpbHRlcih4ID0+IHgpOwogICAgICBjb25zdCB7IHRocmVhZCB9ID0gbGlzdC5maW5kKGNvbW1lbnQgPT4gY29tbWVudC50aHJlYWQpOwogICAgICBjb25zdCBkYW5tYWt1ID0gbGlzdC5tYXAoY29tbWVudCA9PiB7CiAgICAgICAgaWYgKCFjb21tZW50LmNvbnRlbnQgfHwgIShjb21tZW50LnZwb3MgPj0gMCkgfHwgIWNvbW1lbnQubm8pIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHsgdnBvcywgbWFpbCA9ICcnLCBjb250ZW50LCBubyB9ID0gY29tbWVudDsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dDogY29udGVudCwKICAgICAgICAgIHRpbWU6IHZwb3MgLyAxMDAsCiAgICAgICAgICBjb2xvcjogcGFyc2VOaWNvbmljb0NvbG9yKG1haWwpLAogICAgICAgICAgbW9kZTogcGFyc2VOaWNvbmljb01vZGUobWFpbCksCiAgICAgICAgICBzaXplOiBwYXJzZU5pY29uaWNvU2l6ZShtYWlsKSwKICAgICAgICAgIGJvdHRvbTogZmFsc2UsCiAgICAgICAgICBpZDogbm8sCiAgICAgICAgfTsKICAgICAgfSkuZmlsdGVyKGRhbm1ha3VGaWx0ZXIpOwogICAgICByZXR1cm4geyB0aHJlYWQsIGRhbm1ha3UgfTsKICAgIH07Cgpjb25zdCBmb250ID0ge307CgovLyBNZWFuc3VyZSB1c2luZyBjYW52YXMKZm9udC50ZXh0QnlDYW52YXMgPSBmdW5jdGlvbiAoKSB7CiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogIHJldHVybiBmdW5jdGlvbiAoZm9udG5hbWUsIHRleHQsIGZvbnRzaXplKSB7CiAgICBjb250ZXh0LmZvbnQgPSBgYm9sZCAke2ZvbnRzaXplfXB4ICR7Zm9udG5hbWV9YDsKICAgIHJldHVybiBNYXRoLmNlaWwoY29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KS53aWR0aCk7CiAgfTsKfTsKCi8vIE1lYW5zdXJlIHVzaW5nIDxkaXY+CmZvbnQudGV4dEJ5RG9tID0gZnVuY3Rpb24gKCkgewogIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2FsbDogaW5pdGlhbCAhaW1wb3J0YW50Jyk7CiAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIGNvbnRlbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIFsKICAgICd0b3A6IC0xMDAwMHB4JywgJ2xlZnQ6IC0xMDAwMHB4JywKICAgICd3aWR0aDogYXV0bycsICdoZWlnaHQ6IGF1dG8nLCAncG9zaXRpb246IGFic29sdXRlJywKICBdLm1hcChpdGVtID0+IGl0ZW0gKyAnICFpbXBvcnRhbnQ7Jykuam9pbignICcpKTsKICBjb25zdCBhY3RpdmUgPSAoKSA9PiB7IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChjb250ZW50KTsgfTsKICBpZiAoIWRvY3VtZW50LmJvZHkpIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhY3RpdmUpOwogIGVsc2UgYWN0aXZlKCk7CiAgcmV0dXJuIChmb250bmFtZSwgdGV4dCwgZm9udHNpemUpID0+IHsKICAgIGNvbnRlbnQudGV4dENvbnRlbnQgPSB0ZXh0OwogICAgY29udGVudC5zdHlsZS5mb250ID0gYGJvbGQgJHtmb250c2l6ZX1weCAke2ZvbnRuYW1lfWA7CiAgICByZXR1cm4gY29udGVudC5jbGllbnRXaWR0aDsKICB9Owp9OwoKZm9udC50ZXh0ID0gKGZ1bmN0aW9uICgpIHsKICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NjEzNjEKICBpZiAoL2xpbnV4L2kudGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pKSB7CiAgICByZXR1cm4gZm9udC50ZXh0QnlEb20oKTsKICB9IGVsc2UgewogICAgcmV0dXJuIGZvbnQudGV4dEJ5Q2FudmFzKCk7CiAgfQp9KCkpOwoKZm9udC52YWxpZCA9IChmdW5jdGlvbiAoKSB7CiAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7CiAgY29uc3QgdGV4dFdpZHRoID0gZm9udC50ZXh0OwogIC8vIFVzZSBmb2xsb3dpbmcgdGV4dHMgZm9yIGNoZWNraW5nCiAgY29uc3Qgc2FtcGxlVGV4dCA9IFsKICAgICdUaGUgcXVpY2sgYnJvd24gZm94IGp1bXBzIG92ZXIgdGhlIGxhenkgZG9nJywKICAgICc3NTMxOTAyNDY4JywgJywuIS0nLCAn77yM44CC77ya77yBJywKICAgICflpKnlnLDnjoTpu4QnLCAn5YmH6L+R6YGT55+jJywKICAgICfjgYLjgYTjgYbjgYjjgYonLCAn44Ki44Kk44Km44Ko44Kq44Ks44ORJywgJ++9se+9su+9s++9tO+9te+9tu++nu++iu++nycsCiAgXS5qb2luKCcnKTsKICAvLyBTb21lIGdpdmVuIGZvbnQgZmFtaWx5IGlzIGF2YWxpYWJsZSBpZmYgd2UgY2FuIG1lYW5zdXJlIGRpZmZlcmVudCB3aWR0aCBjb21wYXJlZCB0byBvdGhlciBmb250cwogIGNvbnN0IHNhbXBsZUZvbnQgPSBbCiAgICAnbW9ub3NwYWNlJywgJ3NhbnMtc2VyaWYnLCAnc2FucycsCiAgICAnU3ltYm9sJywgJ0FyaWFsJywgJ0NvbWljIFNhbnMgTVMnLCAnRml4ZWQnLCAnVGVybWluYWwnLAogICAgJ1RpbWVzJywgJ1RpbWVzIE5ldyBSb21hbicsCiAgICAnU2ltU3VtJywgJ01pY3Jvc29mdCBZYUhlaScsICdQaW5nRmFuZyBTQycsICdIZWl0aSBTQycsICdXZW5RdWFuWWkgTWljcm8gSGVpJywKICAgICdQbWluZ2xpdScsICdNaWNyb3NvZnQgSmhlbmdIZWknLCAnUGluZ0ZhbmcgVEMnLCAnSGVpdGkgVEMnLAogICAgJ01TIEdvdGhpYycsICdNZWlyeW8nLCAnSGlyYWdpbm8gS2FrdSBHb3RoaWMgUHJvJywgJ0hpcmFnaW5vIE1pbmNobyBQcm8nLAogIF07CiAgY29uc3QgZGlmZkZvbnQgPSBmdW5jdGlvbiAoYmFzZSwgdGVzdCkgewogICAgY29uc3QgYmFzZVNpemUgPSB0ZXh0V2lkdGgoYmFzZSwgc2FtcGxlVGV4dCwgNzIpOwogICAgY29uc3QgdGVzdFNpemUgPSB0ZXh0V2lkdGgodGVzdCArICcsJyArIGJhc2UsIHNhbXBsZVRleHQsIDcyKTsKICAgIHJldHVybiBiYXNlU2l6ZSAhPT0gdGVzdFNpemU7CiAgfTsKICBjb25zdCB2YWxpZEZvbnQgPSBmdW5jdGlvbiAodGVzdCkgewogICAgaWYgKGNhY2hlLmhhcyh0ZXN0KSkgcmV0dXJuIGNhY2hlLmdldCh0ZXN0KTsKICAgIGNvbnN0IHJlc3VsdCA9IHNhbXBsZUZvbnQuc29tZShiYXNlID0+IGRpZmZGb250KGJhc2UsIHRlc3QpKTsKICAgIGNhY2hlLnNldCh0ZXN0LCByZXN1bHQpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwogIHJldHVybiB2YWxpZEZvbnQ7Cn0oKSk7Cgpjb25zdCBydGxDYW52YXMgPSBmdW5jdGlvbiAob3B0aW9ucykgewogICAgICBjb25zdCB7CiAgICAgICAgcmVzb2x1dGlvblg6IHdjLCAvLyB3aWR0aCBvZiBjYW52YXMKICAgICAgICByZXNvbHV0aW9uWTogaGMsIC8vIGhlaWdodCBvZiBjYW52YXMKICAgICAgICBib3R0b21SZXNlcnZlZDogYiwgLy8gcmVzZXJ2ZWQgYm90dG9tIGhlaWdodCBmb3Igc3VidGl0bGUKICAgICAgICBydGxEdXJhdGlvbjogdSwgLy8gZHVyYXRpb24gYXBwZWFyZWQgb24gc2NyZWVuCiAgICAgICAgbWF4RGVsYXk6IG1heHIsIC8vIG1heCBhbGxvd2VkIGRlbGF5CiAgICAgIH0gPSBvcHRpb25zOwoKICAgICAgLy8gSW5pdGlhbCBjYW52YXMgYm9yZGVyCiAgICAgIGxldCB1c2VkID0gWwogICAgICAgIC8vIHA6IHRvcAogICAgICAgIC8vIG06IGJvdHRvbQogICAgICAgIC8vIHRmOiB0aW1lIGNvbXBsZXRlbHkgZW50ZXIgc2NyZWVuCiAgICAgICAgLy8gdGQ6IHRpbWUgY29tcGxldGVseSBsZWF2ZSBzY3JlZW4KICAgICAgICAvLyBiOiBhbGxvdyBjb25mbGljdCB3aXRoIHN1YnRpdGxlCiAgICAgICAgLy8gYWRkIGEgZmFrZSBkYW5tYWt1IGZvciBkZXNjcmliZSB0b3Agb2Ygc2NyZWVuCiAgICAgICAgeyBwOiAtSW5maW5pdHksIG06IDAsIHRmOiBJbmZpbml0eSwgdGQ6IEluZmluaXR5LCBiOiBmYWxzZSB9LAogICAgICAgIC8vIGFkZCBhIGZha2UgZGFubWFrdSBmb3IgZGVzY3JpYmUgYm90dG9tIG9mIHNjcmVlbgogICAgICAgIHsgcDogaGMsIG06IEluZmluaXR5LCB0ZjogSW5maW5pdHksIHRkOiBJbmZpbml0eSwgYjogZmFsc2UgfSwKICAgICAgICAvLyBhZGQgYSBmYWtlIGRhbm1ha3UgZm9yIHBsYWNlaG9sZGVyIG9mIHN1YnRpdGxlCiAgICAgICAgeyBwOiBoYyAtIGIsIG06IGhjLCB0ZjogSW5maW5pdHksIHRkOiBJbmZpbml0eSwgYjogdHJ1ZSB9LAogICAgICBdOwogICAgICAvLyBGaW5kIG91dCBzb21lIHBvc2l0aW9uIGlzIGF2YWlsYWJsZQogICAgICBjb25zdCBhdmFpbGFibGUgPSAoaHYsIHQwcywgdDBsLCBiKSA9PiB7CiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IFtdOwogICAgICAgIC8vIFVwcGVyIGVkZ2Ugb2YgY2FuZGlkYXRlIHBvc2l0aW9uIHNob3VsZCBhbHdheXMgYmUgYm90dG9tIG9mIG90aGVyIGRhbm1ha3UgKG9yIHRvcCBvZiBzY3JlZW4pCiAgICAgICAgdXNlZC5mb3JFYWNoKGkgPT4gewogICAgICAgICAgaWYgKGkubSArIGh2ID49IGhjKSByZXR1cm47CiAgICAgICAgICBjb25zdCBwID0gaS5tOwogICAgICAgICAgY29uc3QgbSA9IHAgKyBodjsKICAgICAgICAgIGxldCB0YXMgPSB0MHM7CiAgICAgICAgICBsZXQgdGFsID0gdDBsOwogICAgICAgICAgLy8gYW5kIGxlZnQgYm9yZGVyIHNob3VsZCBiZSByaWdodCBlZGdlIG9mIG90aGVycwogICAgICAgICAgdXNlZC5mb3JFYWNoKGogPT4gewogICAgICAgICAgICBpZiAoai5wID49IG0pIHJldHVybjsKICAgICAgICAgICAgaWYgKGoubSA8PSBwKSByZXR1cm47CiAgICAgICAgICAgIGlmIChqLmIgJiYgYikgcmV0dXJuOwogICAgICAgICAgICB0YXMgPSBNYXRoLm1heCh0YXMsIGoudGYpOwogICAgICAgICAgICB0YWwgPSBNYXRoLm1heCh0YWwsIGoudGQpOwogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCByID0gTWF0aC5tYXgodGFzIC0gdDBzLCB0YWwgLSB0MGwpOwogICAgICAgICAgaWYgKHIgPiBtYXhyKSByZXR1cm47CiAgICAgICAgICAvLyBzYXZlIGEgY2FuZGlkYXRlIHBvc2l0aW9uCiAgICAgICAgICBzdWdnZXN0aW9uLnB1c2goeyBwLCByIH0pOwogICAgICAgIH0pOwogICAgICAgIC8vIHNvcnRlZCBieSBpdHMgdmVydGljYWwgcG9zaXRpb24KICAgICAgICBzdWdnZXN0aW9uLnNvcnQoKHgsIHkpID0+IHgucCAtIHkucCk7CiAgICAgICAgbGV0IG1yID0gbWF4cjsKICAgICAgICAvLyB0aGUgYm90dG9tIGFuZCBsYXRlciBjaG9pY2Ugc2hvdWxkIGJlIGlnbm9yZWQKICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHN1Z2dlc3Rpb24uZmlsdGVyKGkgPT4gewogICAgICAgICAgaWYgKGkuciA+PSBtcikgcmV0dXJuIGZhbHNlOwogICAgICAgICAgbXIgPSBpLnI7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmlsdGVyZWQ7CiAgICAgIH07CiAgICAgIC8vIG1hcmsgc29tZSBhcmVhIGFzIHVzZWQKICAgICAgbGV0IHVzZSA9IChwLCBtLCB0ZiwgdGQpID0+IHsKICAgICAgICB1c2VkLnB1c2goeyBwLCBtLCB0ZiwgdGQsIGI6IGZhbHNlIH0pOwogICAgICB9OwogICAgICAvLyByZW1vdmUgZGFubWFrdSBub3QgbmVlZGVkIGFueW1vcmUgYnkgaXRzIHRpbWUKICAgICAgY29uc3Qgc3luID0gKHQwcywgdDBsKSA9PiB7CiAgICAgICAgdXNlZCA9IHVzZWQuZmlsdGVyKGkgPT4gaS50ZiA+IHQwcyB8fCBpLnRkID4gdDBsKTsKICAgICAgfTsKICAgICAgLy8gZ2l2ZSBhIHNjb3JlIGluIHJhbmdlIFswLCAxKSBmb3Igc29tZSBwb3NpdGlvbgogICAgICBjb25zdCBzY29yZSA9IGkgPT4gewogICAgICAgIGlmIChpLnIgPiBtYXhyKSByZXR1cm4gLUluZmluaXR5OwogICAgICAgIHJldHVybiAxIC0gTWF0aC5oeXBvdChpLnIgLyBtYXhyLCBpLnAgLyBoYykgKiBNYXRoLlNRUlQxXzI7CiAgICAgIH07CiAgICAgIC8vIGFkZCBzb21lIGRhbm1ha3UKICAgICAgcmV0dXJuIGxpbmUgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIHRpbWU6IHQwcywgLy8gdGltZSBzZW50IChzdGFydCB0byBhcHBlYXIgaWYgbm8gZGVsYXkpCiAgICAgICAgICB3aWR0aDogd3YsIC8vIHdpZHRoIG9mIGRhbm1ha3UKICAgICAgICAgIGhlaWdodDogaHYsIC8vIGhlaWdodCBvZiBkYW5tYWt1CiAgICAgICAgICBib3R0b206IGIsIC8vIGlzIHN1YnRpdGxlCiAgICAgICAgfSA9IGxpbmU7CiAgICAgICAgY29uc3QgdDBsID0gd2MgLyAod3YgKyB3YykgKiB1ICsgdDBzOyAvLyB0aW1lIHN0YXJ0IHRvIGxlYXZlCiAgICAgICAgc3luKHQwcywgdDBsKTsKICAgICAgICBjb25zdCBhbCA9IGF2YWlsYWJsZShodiwgdDBzLCB0MGwsIGIpOwogICAgICAgIGlmICghYWwubGVuZ3RoKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBzY29yZWQgPSBhbC5tYXAoaSA9PiBbc2NvcmUoaSksIGldKTsKICAgICAgICBjb25zdCBiZXN0ID0gc2NvcmVkLnJlZHVjZSgoeCwgeSkgPT4gewogICAgICAgICAgcmV0dXJuIHhbMF0gPiB5WzBdID8geCA6IHk7CiAgICAgICAgfSlbMV07CiAgICAgICAgY29uc3QgdHMgPSB0MHMgKyBiZXN0LnI7IC8vIHRpbWUgc3RhcnQgdG8gZW50ZXIKICAgICAgICBjb25zdCB0ZiA9IHd2IC8gKHd2ICsgd2MpICogdSArIHRzOyAvLyB0aW1lIGNvbXBsZXRlIGVudGVyCiAgICAgICAgY29uc3QgdGQgPSB1ICsgdHM7IC8vIHRpbWUgY29tcGxldGUgbGVhdmUKICAgICAgICB1c2UoYmVzdC5wLCBiZXN0LnAgKyBodiwgdGYsIHRkKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdG9wOiBiZXN0LnAsCiAgICAgICAgICB0aW1lOiB0cywKICAgICAgICB9OwogICAgICB9OwogICAgfTsKCiAgICBjb25zdCBmaXhlZENhbnZhcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICByZXNvbHV0aW9uWTogaGMsCiAgICAgICAgYm90dG9tUmVzZXJ2ZWQ6IGIsCiAgICAgICAgZml4RHVyYXRpb246IHUsCiAgICAgICAgbWF4RGVsYXk6IG1heHIsCiAgICAgIH0gPSBvcHRpb25zOwogICAgICBsZXQgdXNlZCA9IFsKICAgICAgICB7IHA6IC1JbmZpbml0eSwgbTogMCwgdGQ6IEluZmluaXR5LCBiOiBmYWxzZSB9LAogICAgICAgIHsgcDogaGMsIG06IEluZmluaXR5LCB0ZDogSW5maW5pdHksIGI6IGZhbHNlIH0sCiAgICAgICAgeyBwOiBoYyAtIGIsIG06IGhjLCB0ZDogSW5maW5pdHksIGI6IHRydWUgfSwKICAgICAgXTsKICAgICAgLy8gRmluZCBvdXQgc29tZSBhdmFpbGFibGUgcG9zaXRpb24KICAgICAgY29uc3QgZnIgPSAocCwgbSwgdDBzLCBiKSA9PiB7CiAgICAgICAgbGV0IHRhcyA9IHQwczsKICAgICAgICB1c2VkLmZvckVhY2goaiA9PiB7CiAgICAgICAgICBpZiAoai5wID49IG0pIHJldHVybjsKICAgICAgICAgIGlmIChqLm0gPD0gcCkgcmV0dXJuOwogICAgICAgICAgaWYgKGouYiAmJiBiKSByZXR1cm47CiAgICAgICAgICB0YXMgPSBNYXRoLm1heCh0YXMsIGoudGQpOwogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHIgPSB0YXMgLSB0MHM7CiAgICAgICAgaWYgKHIgPiBtYXhyKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4geyByLCBwLCBtIH07CiAgICAgIH07CiAgICAgIC8vIGxheW91dCBmb3IgZGFubWFrdSBhdCB0b3AKICAgICAgY29uc3QgdG9wID0gKGh2LCB0MHMsIGIpID0+IHsKICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0gW107CiAgICAgICAgdXNlZC5mb3JFYWNoKGkgPT4gewogICAgICAgICAgaWYgKGkubSArIGh2ID49IGhjKSByZXR1cm47CiAgICAgICAgICBzdWdnZXN0aW9uLnB1c2goZnIoaS5tLCBpLm0gKyBodiwgdDBzLCBiKSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb24uZmlsdGVyKHggPT4geCk7CiAgICAgIH07CiAgICAgIC8vIGxheW91dCBmb3IgZGFubWFrdSBhdCBib3R0b20KICAgICAgY29uc3QgYm90dG9tID0gKGh2LCB0MHMsIGIpID0+IHsKICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0gW107CiAgICAgICAgdXNlZC5mb3JFYWNoKGkgPT4gewogICAgICAgICAgaWYgKGkucCAtIGh2IDw9IDApIHJldHVybjsKICAgICAgICAgIHN1Z2dlc3Rpb24ucHVzaChmcihpLnAgLSBodiwgaS5wLCB0MHMsIGIpKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbi5maWx0ZXIoeCA9PiB4KTsKICAgICAgfTsKICAgICAgY29uc3QgdXNlID0gKHAsIG0sIHRkKSA9PiB7CiAgICAgICAgdXNlZC5wdXNoKHsgcCwgbSwgdGQsIGI6IGZhbHNlIH0pOwogICAgICB9OwogICAgICBjb25zdCBzeW4gPSB0MHMgPT4gewogICAgICAgIHVzZWQgPSB1c2VkLmZpbHRlcihpID0+IGkudGQgPiB0MHMpOwogICAgICB9OwogICAgICAvLyBTY29yZSBldmVyeSBwb3NpdGlvbgogICAgICBjb25zdCBzY29yZSA9IChpLCBpc190b3ApID0+IHsKICAgICAgICBpZiAoaS5yID4gbWF4cikgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgICBjb25zdCBmID0gcCA9PiBpc190b3AgPyBwIDogKGhjIC0gcCk7CiAgICAgICAgcmV0dXJuIDEgLSAoaS5yIC8gbWF4ciAqICgzMSAvIDMyKSArIGYoaS5wKSAvIGhjICogKDEgLyAzMikpOwogICAgICB9OwogICAgICByZXR1cm4gZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICBjb25zdCB7IHRpbWU6IHQwcywgaGVpZ2h0OiBodiwgYm90dG9tOiBiIH0gPSBsaW5lOwogICAgICAgIGNvbnN0IGlzX3RvcCA9IGxpbmUubW9kZSA9PT0gJ1RPUCc7CiAgICAgICAgc3luKHQwcyk7CiAgICAgICAgY29uc3QgYWwgPSAoaXNfdG9wID8gdG9wIDogYm90dG9tKShodiwgdDBzLCBiKTsKICAgICAgICBpZiAoIWFsLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3Qgc2NvcmVkID0gYWwubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiBbc2NvcmUoaSwgaXNfdG9wKSwgaV07IH0pOwogICAgICAgIGNvbnN0IGJlc3QgPSBzY29yZWQucmVkdWNlKGZ1bmN0aW9uICh4LCB5KSB7CiAgICAgICAgICByZXR1cm4geFswXSA+IHlbMF0gPyB4IDogeTsKICAgICAgICB9LCBbLUluZmluaXR5LCBudWxsXSlbMV07CiAgICAgICAgaWYgKCFiZXN0KSByZXR1cm4gbnVsbDsKICAgICAgICB1c2UoYmVzdC5wLCBiZXN0Lm0sIGJlc3QuciArIHQwcyArIHUpOwogICAgICAgIHJldHVybiB7IHRvcDogYmVzdC5wLCB0aW1lOiBiZXN0LnIgKyB0MHMgfTsKICAgICAgfTsKICAgIH07CgogICAgY29uc3QgcGxhY2VEYW5tYWt1ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgY29uc3QgbGF5ZXJzID0gb3B0aW9ucy5tYXhPdmVybGFwOwogICAgICBjb25zdCBub3JtYWwgPSBBcnJheShsYXllcnMpLmZpbGwobnVsbCkubWFwKHggPT4gcnRsQ2FudmFzKG9wdGlvbnMpKTsKICAgICAgY29uc3QgZml4ZWQgPSBBcnJheShsYXllcnMpLmZpbGwobnVsbCkubWFwKHggPT4gZml4ZWRDYW52YXMob3B0aW9ucykpOwogICAgICByZXR1cm4gZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgICBsaW5lLmZvbnRTaXplID0gTWF0aC5yb3VuZChsaW5lLnNpemUgKiBvcHRpb25zLmZvbnRTaXplKTsKICAgICAgICBsaW5lLmhlaWdodCA9IGxpbmUuZm9udFNpemU7CiAgICAgICAgbGluZS53aWR0aCA9IGxpbmUud2lkdGggfHwgZm9udC50ZXh0KG9wdGlvbnMuZm9udEZhbWlseSwgbGluZS50ZXh0LCBsaW5lLmZvbnRTaXplKSB8fCAxOwoKICAgICAgICBpZiAobGluZS5tb2RlID09PSAnUlRMJykgewogICAgICAgICAgY29uc3QgcG9zID0gbm9ybWFsLnJlZHVjZSgocG9zLCBsYXllcikgPT4gcG9zIHx8IGxheWVyKGxpbmUpLCBudWxsKTsKICAgICAgICAgIGlmICghcG9zKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNvbnN0IHsgdG9wLCB0aW1lIH0gPSBwb3M7CiAgICAgICAgICBsaW5lLmxheW91dCA9IHsKICAgICAgICAgICAgdHlwZTogJ1J0bCcsCiAgICAgICAgICAgIHN0YXJ0OiB7CiAgICAgICAgICAgICAgeDogb3B0aW9ucy5yZXNvbHV0aW9uWCArIGxpbmUud2lkdGggLyAyLAogICAgICAgICAgICAgIHk6IHRvcCArIGxpbmUuaGVpZ2h0LAogICAgICAgICAgICAgIHRpbWUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgIHg6IC1saW5lLndpZHRoIC8gMiwKICAgICAgICAgICAgICB5OiB0b3AgKyBsaW5lLmhlaWdodCwKICAgICAgICAgICAgICB0aW1lOiBvcHRpb25zLnJ0bER1cmF0aW9uICsgdGltZSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChbJ1RPUCcsICdCT1RUT00nXS5pbmNsdWRlcyhsaW5lLm1vZGUpKSB7CiAgICAgICAgICBjb25zdCBwb3MgPSBmaXhlZC5yZWR1Y2UoKHBvcywgbGF5ZXIpID0+IHBvcyB8fCBsYXllcihsaW5lKSwgbnVsbCk7CiAgICAgICAgICBpZiAoIXBvcykgcmV0dXJuIG51bGw7CiAgICAgICAgICBjb25zdCB7IHRvcCwgdGltZSB9ID0gcG9zOwogICAgICAgICAgbGluZS5sYXlvdXQgPSB7CiAgICAgICAgICAgIHR5cGU6ICdGaXgnLAogICAgICAgICAgICBzdGFydDogewogICAgICAgICAgICAgIHg6IE1hdGgucm91bmQob3B0aW9ucy5yZXNvbHV0aW9uWCAvIDIpLAogICAgICAgICAgICAgIHk6IHRvcCArIGxpbmUuaGVpZ2h0LAogICAgICAgICAgICAgIHRpbWUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVuZDogewogICAgICAgICAgICAgIHRpbWU6IG9wdGlvbnMuZml4RHVyYXRpb24gKyB0aW1lLAogICAgICAgICAgICB9LAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxpbmU7CiAgICAgIH07CiAgICB9OwoKICAgIC8vIG1haW4gbGF5b3V0IGFsZ29yaXRobQogICAgY29uc3QgbGF5b3V0ID0gYXN5bmMgZnVuY3Rpb24gKGRhbm1ha3UsIG9wdGlvbkdldHRlcikgewogICAgICBjb25zdCBvcHRpb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcHRpb25HZXR0ZXIpKTsKICAgICAgY29uc3Qgc29ydGVkID0gZGFubWFrdS5zbGljZSgwKS5zb3J0KCh7IHRpbWU6IHggfSwgeyB0aW1lOiB5IH0pID0+IHggLSB5KTsKICAgICAgY29uc3QgcGxhY2UgPSBwbGFjZURhbm1ha3Uob3B0aW9ucyk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IEFycmF5KHNvcnRlZC5sZW5ndGgpOwogICAgICBsZXQgbGVuZ3RoID0gMDsKICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBzb3J0ZWQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgbGV0IHBsYWNlZCA9IHBsYWNlKHNvcnRlZFtpXSk7CiAgICAgICAgaWYgKHBsYWNlZCkgcmVzdWx0W2xlbmd0aCsrXSA9IHBsYWNlZDsKICAgICAgICBpZiAoKGkgKyAxKSAlIDEwMDAgPT09IDApIHsKICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJlc3VsdC5sZW5ndGggPSBsZW5ndGg7CiAgICAgIHJlc3VsdC5zb3J0KCh4LCB5KSA9PiB4LmxheW91dC5zdGFydC50aW1lIC0geS5sYXlvdXQuc3RhcnQudGltZSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9OwoKLy8gZXNjYXBlIHN0cmluZyBmb3IgYXNzCiAgICBjb25zdCB0ZXh0RXNjYXBlID0gcyA9PiAoCiAgICAgIC8vIFZTRmlsdGVyIGRvIG5vdCBzdXBwb3J0IGVzY2FwZWQgInsiIG9yICJ9Ijsgd2UgdXNlIGZ1bGwtd2lkdGggdmVyc2lvbiBpbnN0ZWFkCiAgICAgIHMucmVwbGFjZSgvey9nLCAn772bJykucmVwbGFjZSgvfS9nLCAn772dJykucmVwbGFjZSgvXHMvZywgJyAnKQogICAgKTsKCiAgICBjb25zdCBmb3JtYXRDb2xvckNoYW5uZWwgPSB2ID0+ICh2ICYgMjU1KS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCgyLCAnMCcpOwoKICAgIC8vIGZvcm1hdCBjb2xvcgogICAgY29uc3QgZm9ybWF0Q29sb3IgPSBjb2xvciA9PiAnJkgnICsgKAogICAgICBbY29sb3IuYiwgY29sb3IuZywgY29sb3Iucl0ubWFwKGZvcm1hdENvbG9yQ2hhbm5lbCkuam9pbignJykKICAgICk7CgogICAgLy8gZm9ybWF0IHRpbWVzdGFtcAogICAgY29uc3QgZm9ybWF0VGltZXN0YW1wID0gdGltZSA9PiB7CiAgICAgIGNvbnN0IHZhbHVlID0gTWF0aC5yb3VuZCh0aW1lICogMTAwKSAqIDEwOwogICAgICBjb25zdCByZW0gPSB2YWx1ZSAlIDM2MDAwMDA7CiAgICAgIGNvbnN0IGhvdXIgPSAodmFsdWUgLSByZW0pIC8gMzYwMDAwMDsKICAgICAgY29uc3QgZkhvdXIgPSBob3VyLnRvRml4ZWQoMCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgY29uc3QgZlJlbSA9IG5ldyBEYXRlKHJlbSkudG9JU09TdHJpbmcoKS5zbGljZSgtMTEsIC0yKTsKICAgICAgcmV0dXJuIGZIb3VyICsgZlJlbTsKICAgIH07CgogICAgLy8gdGVzdCBpcyBkZWZhdWx0IGNvbG9yCiAgICBjb25zdCBpc0RlZmF1bHRDb2xvciA9ICh7IHIsIGcsIGIgfSkgPT4gciA9PT0gMjU1ICYmIGcgPT09IDI1NSAmJiBiID09PSAyNTU7CiAgICAvLyB0ZXN0IGlzIGRhcmsgY29sb3IKICAgIGNvbnN0IGlzRGFya0NvbG9yID0gKHsgciwgZywgYiB9KSA9PiByICogMC4yOTkgKyBnICogMC41ODcgKyBiICogMC4xMTQgPCAweDMwOwoKICAgIC8vIEFzcyBoZWFkZXIKICAgIGNvbnN0IGhlYWRlciA9IGluZm8gPT4gWwogICAgICAnW1NjcmlwdCBJbmZvXScsCiAgICAgIGBUaXRsZTogJHtpbmZvLnRpdGxlfWAsCiAgICAgIGBPcmlnaW5hbCBTY3JpcHQ6ICR7aW5mby5vcmlnaW5hbH1gLAogICAgICAnU2NyaXB0VHlwZTogdjQuMDArJywKICAgICAgJ0NvbGxpc2lvbnM6IE5vcm1hbCcsCiAgICAgIGBQbGF5UmVzWDogJHtpbmZvLnBsYXlSZXNYfWAsCiAgICAgIGBQbGF5UmVzWTogJHtpbmZvLnBsYXlSZXNZfWAsCiAgICAgICdUaW1lcjogMTAwLjAwMDAnLAogICAgICAnJywKICAgICAgJ1tWNCsgU3R5bGVzXScsCiAgICAgICdGb3JtYXQ6IE5hbWUsIEZvbnRuYW1lLCBGb250c2l6ZSwgUHJpbWFyeUNvbG91ciwgU2Vjb25kYXJ5Q29sb3VyLCBPdXRsaW5lQ29sb3VyLCBCYWNrQ29sb3VyLCBCb2xkLCBJdGFsaWMsIFVuZGVybGluZSwgU3RyaWtlT3V0LCBTY2FsZVgsIFNjYWxlWSwgU3BhY2luZywgQW5nbGUsIEJvcmRlclN0eWxlLCBPdXRsaW5lLCBTaGFkb3csIEFsaWdubWVudCwgTWFyZ2luTCwgTWFyZ2luUiwgTWFyZ2luViwgRW5jb2RpbmcnLAogICAgICBgU3R5bGU6IEZpeCwke2luZm8uZm9udEZhbWlseX0sJHtpbmZvLmZvbnRTaXplfSwmSCR7aW5mby5hbHBoYX1GRkZGRkYsJkgke2luZm8uYWxwaGF9RkZGRkZGLCZIJHtpbmZvLmFscGhhfTAwMDAwMCwmSCR7aW5mby5hbHBoYX0wMDAwMDAsJHtpbmZvLmJvbGR9LDAsMCwwLDEwMCwxMDAsMCwwLDEsMiwwLDIsMjAsMjAsMiwwYCwKICAgICAgYFN0eWxlOiBSdGwsJHtpbmZvLmZvbnRGYW1pbHl9LCR7aW5mby5mb250U2l6ZX0sJkgke2luZm8uYWxwaGF9RkZGRkZGLCZIJHtpbmZvLmFscGhhfUZGRkZGRiwmSCR7aW5mby5hbHBoYX0wMDAwMDAsJkgke2luZm8uYWxwaGF9MDAwMDAwLCR7aW5mby5ib2xkfSwwLDAsMCwxMDAsMTAwLDAsMCwxLDIsMCwyLDIwLDIwLDIsMGAsCiAgICAgICcnLAogICAgICAnW0V2ZW50c10nLAogICAgICAnRm9ybWF0OiBMYXllciwgU3RhcnQsIEVuZCwgU3R5bGUsIE5hbWUsIE1hcmdpbkwsIE1hcmdpblIsIE1hcmdpblYsIEVmZmVjdCwgVGV4dCcsCiAgICBdOwoKICAgIC8vIFNldCBjb2xvciBvZiB0ZXh0CiAgICBjb25zdCBsaW5lQ29sb3IgPSAoeyBjb2xvciB9KSA9PiB7CiAgICAgIGxldCBvdXRwdXQgPSBbXTsKICAgICAgaWYgKCFpc0RlZmF1bHRDb2xvcihjb2xvcikpIG91dHB1dC5wdXNoKGBcXGMke2Zvcm1hdENvbG9yKGNvbG9yKX1gKTsKICAgICAgaWYgKGlzRGFya0NvbG9yKGNvbG9yKSkgb3V0cHV0LnB1c2goYFxcM2MmSEZGRkZGRmApOwogICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpOwogICAgfTsKCiAgICAvLyBTZXQgZm9udHNpemUKICAgIGxldCBkZWZhdWx0Rm9udFNpemU7CiAgICBjb25zdCBsaW5lRm9udFNpemUgPSAoeyBzaXplIH0pID0+IHsKICAgICAgaWYgKHNpemUgPT09IGRlZmF1bHRGb250U2l6ZSkgcmV0dXJuICcnOwogICAgICByZXR1cm4gYFxcZnMke3NpemV9YDsKICAgIH07CiAgICBjb25zdCBnZXRDb21tb25Gb250U2l6ZSA9IGxpc3QgPT4gewogICAgICBjb25zdCBjb3VudCA9IG5ldyBNYXAoKTsKICAgICAgbGV0IGNvbW1vbkNvdW50ID0gMCwgY29tbW9uID0gMTsKICAgICAgbGlzdC5mb3JFYWNoKCh7IHNpemUgfSkgPT4gewogICAgICAgIGxldCB2YWx1ZSA9IDE7CiAgICAgICAgaWYgKGNvdW50LmhhcyhzaXplKSkgdmFsdWUgPSBjb3VudC5nZXQoc2l6ZSkgKyAxOwogICAgICAgIGNvdW50LnNldChzaXplLCB2YWx1ZSk7CiAgICAgICAgaWYgKHZhbHVlID4gY29tbW9uQ291bnQpIHsKICAgICAgICAgIGNvbW1vbkNvdW50ID0gdmFsdWU7CiAgICAgICAgICBjb21tb24gPSBzaXplOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGRlZmF1bHRGb250U2l6ZSA9IGNvbW1vbjsKICAgICAgcmV0dXJuIGNvbW1vbjsKICAgIH07CgogICAgLy8gQWRkIGFuaW1hdGlvbiBvZiBkYW5tYWt1CiAgICBjb25zdCBsaW5lTW92ZSA9ICh7IGxheW91dDogeyB0eXBlLCBzdGFydCA9IG51bGwsIGVuZCA9IG51bGwgfSB9KSA9PiB7CiAgICAgIGlmICh0eXBlID09PSAnUnRsJyAmJiBzdGFydCAmJiBlbmQpIHJldHVybiBgXFxtb3ZlKCR7c3RhcnQueH0sJHtzdGFydC55fSwke2VuZC54fSwke2VuZC55fSlgOwogICAgICBpZiAodHlwZSA9PT0gJ0ZpeCcgJiYgc3RhcnQpIHJldHVybiBgXFxwb3MoJHtzdGFydC54fSwke3N0YXJ0Lnl9KWA7CiAgICAgIHJldHVybiAnJzsKICAgIH07CgogICAgLy8gZm9ybWF0IG9uZSBsaW5lCiAgICBjb25zdCBmb3JtYXRMaW5lID0gbGluZSA9PiB7CiAgICAgIGNvbnN0IHN0YXJ0ID0gZm9ybWF0VGltZXN0YW1wKGxpbmUubGF5b3V0LnN0YXJ0LnRpbWUpOwogICAgICBjb25zdCBlbmQgPSBmb3JtYXRUaW1lc3RhbXAobGluZS5sYXlvdXQuZW5kLnRpbWUpOwogICAgICBjb25zdCB0eXBlID0gbGluZS5sYXlvdXQudHlwZTsKICAgICAgY29uc3QgY29sb3IgPSBsaW5lQ29sb3IobGluZSk7CiAgICAgIGNvbnN0IGZvbnRTaXplID0gbGluZUZvbnRTaXplKGxpbmUpOwogICAgICBjb25zdCBtb3ZlID0gbGluZU1vdmUobGluZSk7CiAgICAgIGNvbnN0IGZvcm1hdCA9IGAke2NvbG9yfSR7Zm9udFNpemV9JHttb3ZlfWA7CiAgICAgIGNvbnN0IHRleHQgPSB0ZXh0RXNjYXBlKGxpbmUudGV4dCk7CiAgICAgIHJldHVybiBgRGlhbG9ndWU6IDAsJHtzdGFydH0sJHtlbmR9LCR7dHlwZX0sLDIwLDIwLDIsLHske2Zvcm1hdH19JHt0ZXh0fWA7CiAgICB9OwoKICAgIGNvbnN0IGFzcyA9IChkYW5tYWt1LCBvcHRpb25zKSA9PiB7CiAgICAgIGNvbnN0IGluZm8gPSB7CiAgICAgICAgdGl0bGU6IGRhbm1ha3UubWV0YS5uYW1lLAogICAgICAgIG9yaWdpbmFsOiBgR2VuZXJhdGVkIGJ5IHRpYW5zaC9hc3MtZGFubWFrdSAoZW1iZWRkZWQgaW4gbGlxaTA4MTYvYmlsaXR3aW4pIGJhc2VkIG9uICR7ZGFubWFrdS5tZXRhLnVybH1gLAogICAgICAgIHBsYXlSZXNYOiBvcHRpb25zLnJlc29sdXRpb25YLAogICAgICAgIHBsYXlSZXNZOiBvcHRpb25zLnJlc29sdXRpb25ZLAogICAgICAgIGZvbnRGYW1pbHk6IG9wdGlvbnMuZm9udEZhbWlseS5zcGxpdCgiLCIpWzBdLAogICAgICAgIGZvbnRTaXplOiBnZXRDb21tb25Gb250U2l6ZShkYW5tYWt1LmxheW91dCksCiAgICAgICAgYWxwaGE6IGZvcm1hdENvbG9yQ2hhbm5lbCgweEZGICogKDEwMCAtIG9wdGlvbnMudGV4dE9wYWNpdHkgKiAxMDApIC8gMTAwKSwKICAgICAgICBib2xkOiBvcHRpb25zLmJvbGQ/IC0xIDogMCwKICAgICAgfTsKICAgICAgcmV0dXJuIFsKICAgICAgICAuLi5oZWFkZXIoaW5mbyksCiAgICAgICAgLi4uZGFubWFrdS5sYXlvdXQubWFwKGZvcm1hdExpbmUpLmZpbHRlcih4ID0+IHgpLAogICAgICBdLmpvaW4oJ1xyXG4nKTsKICAgIH07CgovKioKICogQGZpbGUgQ29tbW9uIHdvcmtzIGZvciByZWFkaW5nIC8gd3JpdGluZyBvcHRpbm9zCiAqLwoKICAvKioKICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAqLwogIGNvbnN0IHByZWRlZkZvbnRGYW1pbHkgPSAoKSA9PiB7CiAgICAvLyBjb25zdCBzYyA9IFsnTWljcm9zb2Z0IFlhSGVpJywgJ1BpbmdGYW5nIFNDJywgJ05vdG8gU2FucyBDSksgU0MnXTsKICAgIC8vIHJlcGxhY2VkIHdpdGggYmlsaWJpbGkgZGVmYXVsdHMKICAgIGNvbnN0IHNjID0gWyJTaW1IZWkiLCAiJ01pY3Jvc29mdCBKaGVuZ0hlaSciLCAiU2ltU3VuIiwgIk5TaW1TdW4iLCAiRmFuZ1NvbmciLCAiJ01pY3Jvc29mdCBZYUhlaSciLCAiJ01pY3Jvc29mdCBZYWhlaSBVSSBMaWdodCciLCAiJ05vdG8gU2FucyBDSksgU0MgQm9sZCciLCAiJ05vdG8gU2FucyBDSksgU0MgRGVtaUxpZ2h0JyIsICInTm90byBTYW5zIENKSyBTQyBSZWd1bGFyJyJdOwogICAgY29uc3QgdGMgPSBbJ01pY3Jvc29mdCBKaGVuZ0hlaScsICdQaW5nRmFuZyBUQycsICdOb3RvIFNhbnMgQ0pLIFRDJ107CiAgICBjb25zdCBqYSA9IFsnTVMgUEdvdGhpYycsICdIaXJhZ2lubyBLYWt1IEdvdGhpYyBQcm8nLCAnTm90byBTYW5zIENKSyBKUCddOwogICAgY29uc3QgbGFuZyA9IG5hdmlnYXRvci5sYW5ndWFnZTsKICAgIGNvbnN0IGZvbnRzID0gL15qYS8udGVzdChsYW5nKSA/IGphIDogL156aCg/IS4qSGFucykuKig/OlRXfEhLfE1PKS8udGVzdChsYW5nKSA/IHRjIDogc2M7CiAgICBjb25zdCBjaG9zZWQgPSBmb250cy5maW5kKGZvbnQkJDEgPT4gZm9udC52YWxpZChmb250JCQxKSkgfHwgZm9udHNbMF07CiAgICByZXR1cm4gY2hvc2VkOwogIH07CgogIGNvbnN0IGF0dHJpYnV0ZXMgPSBbCiAgICB7IG5hbWU6ICdyZXNvbHV0aW9uWCcsIHR5cGU6ICdudW1iZXInLCBtaW46IDQ4MCwgcHJlZGVmOiA1NjAgfSwKICAgIHsgbmFtZTogJ3Jlc29sdXRpb25ZJywgdHlwZTogJ251bWJlcicsIG1pbjogMzYwLCBwcmVkZWY6IDQyMCB9LAogICAgeyBuYW1lOiAnYm90dG9tUmVzZXJ2ZWQnLCB0eXBlOiAnbnVtYmVyJywgbWluOiAwLCBwcmVkZWY6IDYwIH0sCiAgICB7IG5hbWU6ICdmb250RmFtaWx5JywgdHlwZTogJ3N0cmluZycsIHByZWRlZjogcHJlZGVmRm9udEZhbWlseSgpLCB2YWxpZDogZm9udCQkMSA9PiBmb250LnZhbGlkKGZvbnQkJDEpIH0sCiAgICB7IG5hbWU6ICdmb250U2l6ZScsIHR5cGU6ICdudW1iZXInLCBtaW46IDAsIHByZWRlZjogMSwgc3RlcDogMC4wMSB9LAogICAgeyBuYW1lOiAndGV4dFNwYWNlJywgdHlwZTogJ251bWJlcicsIG1pbjogMCwgcHJlZGVmOiAwIH0sCiAgICB7IG5hbWU6ICdydGxEdXJhdGlvbicsIHR5cGU6ICdudW1iZXInLCBtaW46IDAuMSwgcHJlZGVmOiA4LCBzdGVwOiAwLjEgfSwKICAgIHsgbmFtZTogJ2ZpeER1cmF0aW9uJywgdHlwZTogJ251bWJlcicsIG1pbjogMC4xLCBwcmVkZWY6IDQsIHN0ZXA6IDAuMSB9LAogICAgeyBuYW1lOiAnbWF4RGVsYXknLCB0eXBlOiAnbnVtYmVyJywgbWluOiAwLCBwcmVkZWY6IDYsIHN0ZXA6IDAuMSB9LAogICAgeyBuYW1lOiAndGV4dE9wYWNpdHknLCB0eXBlOiAnbnVtYmVyJywgbWluOiAwLjEsIG1heDogMSwgcHJlZGVmOiAwLjYgfSwKICAgIHsgbmFtZTogJ21heE92ZXJsYXAnLCB0eXBlOiAnbnVtYmVyJywgbWluOiAxLCBtYXg6IDIwLCBwcmVkZWY6IDEgfSwKICAgIHsgbmFtZTogJ2JvbGQnLCB0eXBlOiAnYm9vbGVhbicsIHByZWRlZjogdHJ1ZSB9LAogIF07CgogIGNvbnN0IGF0dHJOb3JtYWxpemUgPSAob3B0aW9uLCB7IG5hbWUsIHR5cGUsIG1pbiA9IC1JbmZpbml0eSwgbWF4ID0gSW5maW5pdHksIHN0ZXAgPSAxLCBwcmVkZWYsIHZhbGlkIH0pID0+IHsKICAgIGxldCB2YWx1ZSA9IG9wdGlvbjsKICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykgdmFsdWUgPSArdmFsdWU7CiAgICBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykgdmFsdWUgPSAnJyArIHZhbHVlOwogICAgZWxzZSBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSB2YWx1ZSA9ICEhdmFsdWU7CiAgICBpZiAodmFsaWQgJiYgIXZhbGlkKHZhbHVlKSkgdmFsdWUgPSBwcmVkZWY7CiAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHsKICAgICAgaWYgKE51bWJlci5pc05hTih2YWx1ZSkpIHZhbHVlID0gcHJlZGVmOwogICAgICBpZiAodmFsdWUgPCBtaW4pIHZhbHVlID0gbWluOwogICAgICBpZiAodmFsdWUgPiBtYXgpIHZhbHVlID0gbWF4OwogICAgICBpZiAobmFtZSAhPSd0ZXh0T3BhY2l0eScpIHZhbHVlID0gTWF0aC5yb3VuZCgodmFsdWUgLSBtaW4pIC8gc3RlcCkgKiBzdGVwICsgbWluOwogICAgfQogICAgcmV0dXJuIHZhbHVlOwogIH07CgogIC8qKgogICAqIEBwYXJhbSB7RXh0T3B0aW9ufSBvcHRpb24KICAgKiBAcmV0dXJucyB7RXh0T3B0aW9ufQogICAqLwogIGNvbnN0IG5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LAogICAgICAuLi5hdHRyaWJ1dGVzLm1hcChhdHRyID0+ICh7IFthdHRyLm5hbWVdOiBhdHRyTm9ybWFsaXplKG9wdGlvblthdHRyLm5hbWVdLCBhdHRyKSB9KSkKICAgICk7CiAgfTsKCi8qKgogICAqIENvbnZlcnQgZmlsZSBjb250ZW50IHRvIEJsb2Igd2hpY2ggZGVzY3JpYmUgdGhlIGZpbGUKICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGVudAogICAqIEByZXR1cm5zIHtCbG9ifQogICAqLwogIGNvbnN0IGNvbnZlcnRUb0Jsb2IgPSBjb250ZW50ID0+IHsKICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTsKICAgIC8vIEFkZCBhIEJPTSB0byBtYWtlIHNvbWUgYXNzIHBhcnNlciBsaWJyYXJ5IGhhcHBpZXIKICAgIGNvbnN0IGJvbSA9ICdcdWZlZmYnOwogICAgY29uc3QgZW5jb2RlZCA9IGVuY29kZXIuZW5jb2RlKGJvbSArIGNvbnRlbnQpOwogICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtlbmNvZGVkXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyB9KTsKICAgIHJldHVybiBibG9iOwogIH07CgovKioqCiAqIENvcHlyaWdodCAoQykgMjAxOCBRbGk1LiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiAKICogQGF1dGhvciBxbGk1IDxnb29kbHExMVthdF0oMTYzfGdtYWlsKS5jb20+CiAqIAogKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMKICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4KKi8KCi8qKgogKiBBbiBBUEkgd3JhcHBlciBvZiB0aWFuc2gvYXNzLWRhbm1ha3UgZm9yIGxpcWkwODE2L2JpbGl0d2luCiAqLwpjbGFzcyBBU1NDb252ZXJ0ZXIgewogICAgLyoqCiAgICAgKiBAdHlwZWRlZiB7RXh0T3B0aW9ufQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHJlc29sdXRpb25YIGNhbnZhcyB3aWR0aCBmb3IgZHJhd2luZyBkYW5tYWt1IChweCkKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByZXNvbHV0aW9uWSBjYW52YXMgaGVpZ2h0IGZvciBkcmF3aW5nIGRhbm1ha3UgKHB4KQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGJvdHRvbVJlc2VydmVkIHJlc2VydmVkIGhlaWdodCBhdCBib3R0b20gZm9yIGRyYXdpbmcgZGFubWFrdSAocHgpCiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gZm9udEZhbWlseSBkYW5tYWt1IGZvbnQgZmFtaWx5CiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gZm9udFNpemUgZGFubWFrdSBmb250IHNpemUgKHJhdGlvKQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRleHRTcGFjZSBzcGFjZSBiZXR3ZWVuIGRhbm1ha3UgKHB4KQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHJ0bER1cmF0aW9uIGR1cmF0aW9uIG9mIHJpZ2h0IHRvIGxlZnQgbW92aW5nIGRhbm1ha3UgYXBwZWFyZWQgb24gc2NyZWVuIChzKQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGZpeER1cmF0aW9uIGR1cmF0aW9uIG9mIGtlZXAgYm90dG9tIC8gdG9wIGRhbm1ha3UgYXBwZWFyZWQgb24gc2NyZWVuIChzKQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IG1heERlbGF5IC8vIG1heGludW0gYW1vdW50IG9mIGFsbG93ZWQgZGVsYXkgKHMpCiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGV4dE9wYWNpdHkgLy8gb3BhY2l0eSBvZiB0ZXh0LCBpbiByYW5nZSBvZiBbMCwgMV0KICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhPdmVybGFwIC8vIG1heGludW0gbGF5ZXJzIG9mIGRhbm1ha3UKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHtFeHRPcHRpb259IG9wdGlvbiB0aWFuc2gvYXNzLWRhbm1ha3UgY29tcGF0aWJsZSBvcHRpb24KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9uID0ge30pIHsKICAgICAgICB0aGlzLm9wdGlvbiA9IG9wdGlvbjsKICAgIH0KCiAgICBnZXQgb3B0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZWRPcHRpb247CiAgICB9CgogICAgc2V0IG9wdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplZE9wdGlvbiA9IG5vcm1hbGl6ZShlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7RGFubWFrdVtdfSBkYW5tYWt1IHVzZSBBU1NDb252ZXJ0ZXIucGFyc2VYTUwKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZSAKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5hbFVSTCAKICAgICAqLwogICAgYXN5bmMgZ2VuQVNTKGRhbm1ha3UsIHRpdGxlID0gJ2Rhbm1ha3UnLCBvcmlnaW5hbFVSTCA9ICdhbm9ueW1vdXMgeG1sJykgewogICAgICAgIGNvbnN0IGxheW91dCQkMSA9IGF3YWl0IGxheW91dChkYW5tYWt1LCB0aGlzLm9wdGlvbik7CiAgICAgICAgY29uc3QgYXNzJCQxID0gYXNzKHsKICAgICAgICAgICAgY29udGVudDogZGFubWFrdSwKICAgICAgICAgICAgbGF5b3V0OiBsYXlvdXQkJDEsCiAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICAgIG5hbWU6IHRpdGxlLAogICAgICAgICAgICAgICAgdXJsOiBvcmlnaW5hbFVSTAogICAgICAgICAgICB9CiAgICAgICAgfSwgdGhpcy5vcHRpb24pOwogICAgICAgIHJldHVybiBhc3MkJDE7CiAgICB9CgogICAgYXN5bmMgZ2VuQVNTQmxvYihkYW5tYWt1LCB0aXRsZSA9ICdkYW5tYWt1Jywgb3JpZ2luYWxVUkwgPSAnYW5vbnltb3VzIHhtbCcpIHsKICAgICAgICByZXR1cm4gY29udmVydFRvQmxvYihhd2FpdCB0aGlzLmdlbkFTUyhkYW5tYWt1LCB0aXRsZSwgb3JpZ2luYWxVUkwpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEB0eXBlZGVmIERhbm1ha3VDb2xvcgogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHIKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBnCiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gYgogICAgICovCgogICAgLyoqCiAgICAgKiBAdHlwZWRlZiBEYW5tYWt1CiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gdGV4dAogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWUKICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBtb2RlCiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gc2l6ZQogICAgICogQHByb3BlcnR5IHtEYW5tYWt1Q29sb3J9IGNvbG9yCiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IGJvdHRvbQogICAgICogQHByb3BlcnR5IHtzdHJpbmc9fSBzZW5kZXIKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHhtbCBiaWxpYmlsaSBkYW5tYWt1IHhtbAogICAgICogQHJldHVybnMge0Rhbm1ha3VbXX0KICAgICAqLwogICAgc3RhdGljIHBhcnNlWE1MKHhtbCkgewogICAgICAgIHJldHVybiBwYXJzZXIuYmlsaWJpbGkoeG1sKS5kYW5tYWt1OwogICAgfQoKCiAgICBzdGF0aWMgX1VOSVRfVEVTVCgpIHsKICAgICAgICBjb25zdCBlID0gbmV3IEFTU0NvbnZlcnRlcigpOwogICAgICAgIGNvbnN0IHhtbCA9IGA8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/PjxpPjxjaGF0c2VydmVyPmNoYXQuYmlsaWJpbGkuY29tPC9jaGF0c2VydmVyPjxjaGF0aWQ+MzI4NzM3NTg8L2NoYXRpZD48bWlzc2lvbj4wPC9taXNzaW9uPjxtYXhsaW1pdD42MDAwPC9tYXhsaW1pdD48c3RhdGU+MDwvc3RhdGU+PHJlYWxuYW1lPjA8L3JlYWxuYW1lPjxzb3VyY2U+ay12PC9zb3VyY2U+PGQgcD0iMC4wMDAwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3MzM1ODksMCxkMjg2YTk3Yiw0MzQ5NjA0MDcyIj7nnJ/nrKzkuIA8L2Q+PGQgcD0iNy4yOTkwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3MzM4MTIsMCwzNTQ4Nzk2Yyw0MzQ5NjE1OTA4Ij7kupTliIbpkp/liY08L2Q+PGQgcD0iNTg3LjA1MTAwLDEsMjUsMTY3NzcyMTUsMTUxOTczNDI5MSwwLGYyZWQ3OTJmLDQzNDk2NDEzMjUiPuaDiuWRhuS6hu+8gTwvZD48ZCBwPSIxMzYuODIyMDAsMSwyNSwxNjc3NzIxNSwxNTE5NzM0NDU4LDAsMWU1Nzg0Ziw0MzQ5NjUyMDcxIj7npZ7njovku6PooajomZrnqbo8L2Q+PGQgcD0iMC4wMDAwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3MzYyNTEsMCxmMTZjYmY0NCw0MzQ5NzUxNDYxIj42NjY2NjY2NjY2NjY2NjY2NjwvZD48ZCBwPSI1OTAuNjA0MDAsMSwyNSwxNjc3NzIxNSwxNTE5NzM2MjY1LDAsZmJiM2QxYjMsNDM0OTc1MjMzMSI+6L+Z6KaB5ZC55aSa6ZW/5pe26Ze0PC9kPjxkIHA9IjUzNy4xNTUwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3MzYyODAsMCwxZTU3ODRmLDQzNDk3NTMxNzAiPuWPjeiAjOS4jeaYr++8jOeWvueXheaYr+S4quaBtumtlO+8jOWIq+S6uuivtOWlueS8quijheaIkOS6hueyvueBtTwvZD48ZCBwPSI4NzIuMDgyMDAsMSwyNSwxNjc3NzIxNSwxNTE5NzM2ODgxLDAsMWU1Nzg0Ziw0MzQ5Nzg3NzA5Ij7nsr7ngbXpg73kvJrlkIM8L2Q+PGQgcD0iMjY0OC40MjUwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3Mzc4NDAsMCxlOWU2YjJiNCw0MzQ5ODQ0NDYzIj7lsLHkuI3og73lpKfpg6jliIbpg73mmK/pk5zluIHkuYjvvJ88L2Q+PGQgcD0iMjExNS4wOTQwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3MzgyNzEsMCwzNTQ4Nzk2Yyw0MzQ5ODcwODA4Ij7lkJPmrbvmiJHkuobjgILjgILjgII8L2Q+PGQgcD0iMTEuNDU0MDAsMSwyNSwxNjc3NzIxNSwxNTE5NzM5OTc0LDAsOTkzN2I0MjgsNDM0OTk3NDUxMiI+Pz8/PC9kPjxkIHA9IjEyODUuNzM5MDAsMSwyNSwxNjc3NzIxNSwxNTE5NzQ4Mjc0LDAsM2JiNGM5ZWUsNDM1MDUxMjg1OSI+5YS/56C4PC9kPjxkIHA9IjU5NS40ODYwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3NTcxNDgsMCxmM2VkMjZiNiw0MzUwNzg3MDQ4Ij7mgJXmmK/opoHlkLnliLDnvLrmsKflk6Y8L2Q+PGQgcD0iMTIwNi4zMTUwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3NjcyMDQsMCw2MmE5MTg2YSw0MzUwODgyNjgwIj4yMzMzMzMzMzMzMzMzMzM8L2Q+PGQgcD0iNjM4LjY4NzAwLDEsMjUsMTY3NzcyMTUsMTUxOTc2OTIxOSwwLGRlMGE5OWFlLDQzNTA4OTMzMTAiPuiPnOm4oeeahOWAn+WPozwvZD48ZCBwPSI2NTUuNzY1MDAsMSwyNSwxNjc3NzIxNSwxNTE5NzY5MjM2LDAsZGUwYTk5YWUsNDM1MDg5MzM5NyI+56uf54S25ZC56Jyh54Ob5omT5Yy755SfPC9kPjxkIHA9IjIyMzUuODk2MDAsMSwyNSwxNjc3NzIxNSwxNTE5NzY5NDE4LDAsZGUwYTk5YWUsNDM1MDg5NDMyNSI+6L+Z5pq05Ye7546H5aSq6auY5LqGPC9kPjxkIHA9IjM4OS44ODcwMCwxLDI1LDE2Nzc3MjE1LDE1MTk3ODA0MzUsMCw4ODc5NzMyYyw0MzUxMDIxNzQwIj7ljLvnlJ/lpb3mg7Pov5sxMOS4h++8jOihgO+8jOS4iuS4h+eUsjwvZD48ZCBwPSIyMzIyLjQ3OTAwLDEsMjUsMTY3NzcyMTUsMTUxOTc4MDkwMSwwLGU1MDlhODAxLDQzNTEwMzIzMjEiPuWJjeS4gOS4quWRvemDveayoeS6hjwvZD48ZCBwPSIyNDA4LjkzNjAwLDEsMjUsMTY3NzcyMTUsMTUxOTgwMTM1MCwwLDFhNjkyZWI2LDQzNTE4MjY0ODQiPjIzMzMzMzMzMzMzMzMzPC9kPjxkIHA9IjEyOTAuNjIwMDAsMSwyNSwxNjc3NzIxNSwxNTE5ODA5NjQ5LDAsYWY4ZjEyZGMsNDM1MjE1OTI2NyI+5YS/56C4fjwvZD48ZCBwPSI5MTcuOTYzMDAsMSwyNSwxNjc3NzIxNSwxNTE5ODE2NzcwLDAsZmVmNjRiNmEsNDM1MjQ3NDg3OCI+5bqU6K+l5aeG6KW/6Ieq5bex5o6n5Yi25rSb5pavICAg5LiD5p2A54K55aSq5b+r5LqG5beu6K+EPC9kPjxkIHA9IjIzMjguMDMxMDAsMSwyNSwxNjc3NzIxNSwxNTE5ODI1MjkxLDAsODU0OTIwNWQsNDM1MjkxOTAwMyI+546w5Zyo5YmN5LiA5Liq6L+e5ZG96YO95rKh5LqG5ZWK5ZaCPC9kPjxkIHA9IjEyNDYuMTY3MDAsMSwyNSwxNjc3NzIxNSwxNTE5ODI3NTE0LDAsZmVmNjRiNmEsNDM1MzA1MjMwOSI+5LiN5aaC6LWw5Yiw6Z2i5YmN55So5omr5bCEICAg5Z+65pys5YWo5LitICDkvKTlrrPniIbooag8L2Q+PGQgcD0iNTkyLjM4MTAwLDEsMjUsMTY3NzcyMTUsMTUxOTkxMjQ4OSwwLGVkYzNmMGE5LDQzNTU5NjAwODUiPui/meaYr+i/meS4qua4uOaIj+acgOmch+aSvOeahOWHoOW5leS5i+S4gDwvZD48L2k+YDsKICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cuYXNzID0gZS5nZW5BU1NCbG9iKEFTU0NvbnZlcnRlci5wYXJzZVhNTCh4bWwpKSk7CiAgICB9Cn0KCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgoqLwoKLyoqCiAqIEEgdXRpbCB0byBob29rIGEgZnVuY3Rpb24KICovCmNsYXNzIEhvb2tlZEZ1bmN0aW9uIGV4dGVuZHMgRnVuY3Rpb24gewogICAgY29uc3RydWN0b3IoLi4uaW5pdCkgewogICAgICAgIC8vIDEuIGluaXQgcGFyYW1ldGVyCiAgICAgICAgY29uc3QgeyByYXcsIHByZSwgcG9zdCB9ID0gSG9va2VkRnVuY3Rpb24ucGFyc2VQYXJhbWV0ZXIoLi4uaW5pdCk7CgogICAgICAgIC8vIDIuIGJ1aWxkIGJ1bmRsZQogICAgICAgIGNvbnN0IHNlbGYgPSBmdW5jdGlvbiAoLi4uYXJncykgewogICAgICAgICAgICBjb25zdCB7IHJhdywgcHJlLCBwb3N0IH0gPSBzZWxmOwogICAgICAgICAgICBjb25zdCBjb250ZXh0ID0geyBhcmdzLCB0YXJnZXQ6IHJhdywgcmV0OiB1bmRlZmluZWQsIGhvb2s6IHNlbGYgfTsKICAgICAgICAgICAgcHJlLmZvckVhY2goZSA9PiBlLmNhbGwodGhpcywgY29udGV4dCkpOwogICAgICAgICAgICBpZiAoY29udGV4dC50YXJnZXQpIGNvbnRleHQucmV0ID0gY29udGV4dC50YXJnZXQuYXBwbHkodGhpcywgY29udGV4dC5hcmdzKTsKICAgICAgICAgICAgcG9zdC5mb3JFYWNoKGUgPT4gZS5jYWxsKHRoaXMsIGNvbnRleHQpKTsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQucmV0OwogICAgICAgIH07CiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHNlbGYsIEhvb2tlZEZ1bmN0aW9uLnByb3RvdHlwZSk7CiAgICAgICAgc2VsZi5yYXcgPSByYXc7CiAgICAgICAgc2VsZi5wcmUgPSBwcmU7CiAgICAgICAgc2VsZi5wb3N0ID0gcG9zdDsKCiAgICAgICAgLy8gMy4gY2hlYXQgYmFiZWwgLSBpdCBjb21wbGFpbnMgYWJvdXQgbWlzc2luZyBzdXBlcigpLCBldmVuIGlmIGl0IGlzIGFjdHVhbCB2YWxpZCAKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gc2VsZjsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHN1cGVyKCk7CiAgICAgICAgICAgIHJldHVybiBzZWxmOwogICAgICAgIH0KICAgIH0KCiAgICBhZGRQcmUoLi4uZnVuYykgewogICAgICAgIHRoaXMucHJlLnB1c2goLi4uZnVuYyk7CiAgICB9CgogICAgYWRkUG9zdCguLi5mdW5jKSB7CiAgICAgICAgdGhpcy5wb3N0LnB1c2goLi4uZnVuYyk7CiAgICB9CgogICAgYWRkQ2FsbGJhY2soLi4uZnVuYykgewogICAgICAgIHRoaXMuYWRkUG9zdCguLi5mdW5jKTsKICAgIH0KCiAgICByZW1vdmVQcmUoZnVuYykgewogICAgICAgIHRoaXMucHJlID0gdGhpcy5wcmUuZmlsdGVyKGUgPT4gZSAhPSBmdW5jKTsKICAgIH0KCiAgICByZW1vdmVQb3N0KGZ1bmMpIHsKICAgICAgICB0aGlzLnBvc3QgPSB0aGlzLnBvc3QuZmlsdGVyKGUgPT4gZSAhPSBmdW5jKTsKICAgIH0KCiAgICByZW1vdmVDYWxsYmFjayhmdW5jKSB7CiAgICAgICAgdGhpcy5yZW1vdmVQb3N0KGZ1bmMpOwogICAgfQoKICAgIHN0YXRpYyBwYXJzZVBhcmFtZXRlciguLi5pbml0KSB7CiAgICAgICAgLy8gMS4gY2xvbmUgaW5pdAogICAgICAgIGluaXQgPSBpbml0LnNsaWNlKCk7CgogICAgICAgIC8vIDIuIGRlZmF1bHQKICAgICAgICBsZXQgcmF3ID0gbnVsbDsKICAgICAgICBsZXQgcHJlID0gW107CiAgICAgICAgbGV0IHBvc3QgPSBbXTsKCiAgICAgICAgLy8gMy4gKHJhdywgLi4ub3RoZXJzKQogICAgICAgIGlmICh0eXBlb2YgaW5pdFswXSA9PT0gJ2Z1bmN0aW9uJykgcmF3ID0gaW5pdC5zaGlmdCgpOwoKICAgICAgICAvLyA0LiBpdGVyYXRlIHRocm91Z2ggcGFyYW1ldGVycwogICAgICAgIGZvciAoY29uc3QgZSBvZiBpbml0KSB7CiAgICAgICAgICAgIGlmICghZSkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlKSkgewogICAgICAgICAgICAgICAgcHJlID0gcG9zdDsKICAgICAgICAgICAgICAgIHBvc3QgPSBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlID09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUucmF3ID09ICdmdW5jdGlvbicpIHJhdyA9IGUucmF3OwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLnByZSA9PSAnZnVuY3Rpb24nKSBwcmUucHVzaChlLnByZSk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUucG9zdCA9PSAnZnVuY3Rpb24nKSBwb3N0LnB1c2goZS5wb3N0KTsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUucHJlKSkgcHJlID0gZS5wcmU7CiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlLnBvc3QpKSBwb3N0ID0gZS5wb3N0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBlID09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgIHBvc3QucHVzaChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEhvb2tlZEZ1bmN0aW9uOiBjYW5ub3QgcmVjb2duaXplIHBhcmFtdGVyICR7ZX0gb2YgdHlwZSAke3R5cGVvZiBlfWApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB7IHJhdywgcHJlLCBwb3N0IH07CiAgICB9CgogICAgc3RhdGljIGhvb2soLi4uaW5pdCkgewogICAgICAgIC8vIDEuIGluaXQgcGFyYW1ldGVyCiAgICAgICAgY29uc3QgeyByYXcsIHByZSwgcG9zdCB9ID0gSG9va2VkRnVuY3Rpb24ucGFyc2VQYXJhbWV0ZXIoLi4uaW5pdCk7CgogICAgICAgIC8vIDIgd3JhcAogICAgICAgIC8vIDIuMSBhbHJlYWR5IHdyYXBwZWQgPT4gY29uY2F0CiAgICAgICAgaWYgKHJhdyBpbnN0YW5jZW9mIEhvb2tlZEZ1bmN0aW9uKSB7CiAgICAgICAgICAgIHJhdy5wcmUucHVzaCguLi5wcmUpOwogICAgICAgICAgICByYXcucG9zdC5wdXNoKC4uLnBvc3QpOwogICAgICAgICAgICByZXR1cm4gcmF3OwogICAgICAgIH0KCiAgICAgICAgLy8gMi4yIG90aGVyd2lzZSA9PiBuZXcKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBIb29rZWRGdW5jdGlvbih7IHJhdywgcHJlLCBwb3N0IH0pOwogICAgICAgIH0KICAgIH0KCiAgICBzdGF0aWMgaG9va0RlYnVnZ2VyKHJhdywgcHJlID0gdHJ1ZSwgcG9zdCA9IGZhbHNlKSB7CiAgICAgICAgLy8gMS4gaW5pdCBob29rCiAgICAgICAgaWYgKCFIb29rZWRGdW5jdGlvbi5ob29rRGVidWdnZXIuaG9vaykgSG9va2VkRnVuY3Rpb24uaG9va0RlYnVnZ2VyLmhvb2sgPSBmdW5jdGlvbiAoY3R4KSB7IGRlYnVnZ2VyIH07CgogICAgICAgIC8vIDIgd3JhcAogICAgICAgIC8vIDIuMSBhbHJlYWR5IHdyYXBwZWQgPT4gY29uY2F0CiAgICAgICAgaWYgKHJhdyBpbnN0YW5jZW9mIEhvb2tlZEZ1bmN0aW9uKSB7CiAgICAgICAgICAgIGlmIChwcmUgJiYgIXJhdy5wcmUuaW5jbHVkZXMoSG9va2VkRnVuY3Rpb24uaG9va0RlYnVnZ2VyLmhvb2spKSB7CiAgICAgICAgICAgICAgICByYXcucHJlLnB1c2goSG9va2VkRnVuY3Rpb24uaG9va0RlYnVnZ2VyLmhvb2spOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwb3N0ICYmICFyYXcucG9zdC5pbmNsdWRlcyhIb29rZWRGdW5jdGlvbi5ob29rRGVidWdnZXIuaG9vaykpIHsKICAgICAgICAgICAgICAgIHJhdy5wb3N0LnB1c2goSG9va2VkRnVuY3Rpb24uaG9va0RlYnVnZ2VyLmhvb2spOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByYXc7CiAgICAgICAgfQoKICAgICAgICAvLyAyLjIgb3RoZXJ3aXNlID0+IG5ldwogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gbmV3IEhvb2tlZEZ1bmN0aW9uKHsKICAgICAgICAgICAgICAgIHJhdywKICAgICAgICAgICAgICAgIHByZTogcHJlICYmIEhvb2tlZEZ1bmN0aW9uLmhvb2tEZWJ1Z2dlci5ob29rIHx8IHVuZGVmaW5lZCwKICAgICAgICAgICAgICAgIHBvc3Q6IHBvc3QgJiYgSG9va2VkRnVuY3Rpb24uaG9va0RlYnVnZ2VyLmhvb2sgfHwgdW5kZWZpbmVkLAogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn0KCi8qKioKICogQmlsaU1vbmtleQogKiBBIGJpbGliaWxpIHVzZXIgc2NyaXB0CiAqIENvcHlyaWdodCAoQykgMjAxOCBRbGk1LiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiAKICogQGF1dGhvciBxbGk1IDxnb29kbHExMVthdF0oMTYzfGdtYWlsKS5jb20+CiAqIAogKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMKICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4KICogCiAqIFRoZSBGTFYgbWVyZ2UgdXRpbGl0eSBpcyBhIEphdmFzY3JpcHQgdHJhbnNsYXRpb24gb2YgCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmVwbXVzaWMvZmx2bWVyZ2UKICogYnkgZ3JlcG11c2ljCiAqIAogKiBUaGUgQVNTIGNvbnZlcnQgdXRpbGl0eSBpcyBhIGZvcmsgb2YKICogaHR0cHM6Ly9naXRodWIuY29tL3RpYW5zaC9hc3MtZGFubWFrdQogKiBieSB0aWFuc2gKICogCiAqIFRoZSBGTFYgZGVtdXhlciBpcyBmcm9tCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9CaWxpYmlsaS9mbHYuanMvCiAqIGJ5IHpoZW5nIHFpYW4KICogCiAqIFRoZSBFTUJMIGJ1aWxkZXIgaXMgZnJvbQogKiA8aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvc2ltcGxlLWVibWwtYnVpbGRlcj4KICogYnkgcnlpd2Ftb3RvCiovCgpjbGFzcyBCaWxpTW9ua2V5IHsKICAgIGNvbnN0cnVjdG9yKHBsYXllcldpbiwgb3B0aW9uID0gQmlsaU1vbmtleS5vcHRpb25EZWZhdWx0cykgewogICAgICAgIHRoaXMucGxheWVyV2luID0gcGxheWVyV2luOwogICAgICAgIHRoaXMucHJvdG9jb2wgPSBwbGF5ZXJXaW4ubG9jYXRpb24ucHJvdG9jb2w7CiAgICAgICAgdGhpcy5jaWQgPSBudWxsOwogICAgICAgIHRoaXMuZmx2cyA9IG51bGw7CiAgICAgICAgdGhpcy5tcDQgPSBudWxsOwogICAgICAgIHRoaXMuYXNzID0gbnVsbDsKICAgICAgICB0aGlzLmZsdkZvcm1hdE5hbWUgPSBudWxsOwogICAgICAgIHRoaXMubXA0Rm9ybWF0TmFtZSA9IG51bGw7CiAgICAgICAgdGhpcy5mYWxsYmFja0Zvcm1hdE5hbWUgPSBudWxsOwogICAgICAgIHRoaXMuY2lkQXN5bmNDb250YWluZXIgPSBuZXcgQXN5bmNDb250YWluZXIoKTsKICAgICAgICB0aGlzLmNpZEFzeW5jQ29udGFpbmVyLnRoZW4oY2lkID0+IHsgdGhpcy5jaWQgPSBjaWQ7IC8qKiB0aGlzLmFzcyA9IHRoaXMuZ2V0QVNTKCk7ICovIH0pOwogICAgICAgIGlmICh0eXBlb2YgdG9wLmNpZCA9PT0gJ3N0cmluZycpIHRoaXMuY2lkQXN5bmNDb250YWluZXIucmVzb2x2ZSh0b3AuY2lkKTsKCiAgICAgICAgLyoqKgogICAgICAgICAqIGNhY2hlICsgcHJveHkgPSBTZXJ2aWNlIFdvcmtlcgogICAgICAgICAqIEhvcGUgYmlsaWJpbGkgd2lsbCBoYXZlIGEgU1cgYXMgc29vbiBhcyBwb3NzaWJsZS4KICAgICAgICAgKiBwYXJ0aWFsID0gU3RyZWFtCiAgICAgICAgICogSG9wZSB0aGUgZmV0Y2ggQVBJIHdpbGwgYmUgc3RhYmlsaXplZCBhcyBzb29uIGFzIHBvc3NpYmxlLgogICAgICAgICAqIElmIHlvdSBhcmUgdXNpbmcgeW91ciBncmFuZHBhJ3MgYnJvd3NlciwgZG8gbm90IGVuYWJsZSB0aGVzZSBmdW5jdGlvbnMuCiAgICAgICAgICovCiAgICAgICAgdGhpcy5jYWNoZSA9IG9wdGlvbi5jYWNoZTsKICAgICAgICB0aGlzLnBhcnRpYWwgPSBvcHRpb24ucGFydGlhbDsKICAgICAgICB0aGlzLnByb3h5ID0gb3B0aW9uLnByb3h5OwogICAgICAgIHRoaXMuYmxvY2tlciA9IG9wdGlvbi5ibG9ja2VyOwogICAgICAgIHRoaXMuZm9udCA9IG9wdGlvbi5mb250OwogICAgICAgIHRoaXMub3B0aW9uID0gb3B0aW9uOwogICAgICAgIGlmICh0aGlzLmNhY2hlICYmICghKHRoaXMuY2FjaGUgaW5zdGFuY2VvZiBDYWNoZURCKSkpIHRoaXMuY2FjaGUgPSBuZXcgQ2FjaGVEQignYmlsaU1vbmtleScsICdmbHYnLCAnbmFtZScpOwoKICAgICAgICB0aGlzLmZsdnNEZXRhaWxlZEZldGNoID0gW107CiAgICAgICAgdGhpcy5mbHZzQmxvYiA9IFtdOwoKICAgICAgICB0aGlzLmRlZmF1bHRGb3JtYXRQcm9taXNlID0gbnVsbDsKICAgICAgICB0aGlzLnF1ZXJ5SW5mb011dGV4ID0gbmV3IE11dGV4KCk7CgogICAgICAgIHRoaXMuZGVzdHJveSA9IG5ldyBIb29rZWRGdW5jdGlvbigpOwogICAgfQoKICAgIC8qKioKICAgICAqIEd1aWRlOiBmb3IgZWFzZSBvZiBkZWJ1ZywgcGxlYXNlIHVzZSBmb3JtYXQgbmFtZShmbHY3MjApIGluc3RlYWQgb2YgZm9ybWF0IHZhbHVlKDY0KSB1bmxlc3MgbmVjZXNzYXJ5CiAgICAgKiBHdWlkZTogZm9yIGVhc2Ugb2YgaHRtbCBjb25jYXQsIHBsZWFzZSB1c2Ugc3RyaW5nIGZvcm1hdCB2YWx1ZSgnNjQnKSBpbnN0ZWFkIG9mIG51bWJlcihwYXJzZUludCgnNjQnKSkKICAgICAqLwogICAgbG9ja0Zvcm1hdChmb3JtYXQpIHsKICAgICAgICAvLyBudWxsID0+IHVuaW5pdGlhbGl6ZWQKICAgICAgICAvLyBhc3luYyBwZW5kaW5nID0+IGFub3RoZXIgb25lIGlzIHdvcmtpbmcgb24gaXQKICAgICAgICAvLyBhc3luYyByZXNvbHZlID0+IHRoYXQgZ3V5IGp1c3QgZmluaXNoZWQgd29yawogICAgICAgIC8vIHN5bmMgdmFsdWUgPT4gc29tZW9uZSBhbHJlYWR5IGZpbmlzaGVkIHdvcmsKICAgICAgICBjb25zdCB0b2FzdCA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci12aWRlby10b2FzdC10b3AnKVswXTsKICAgICAgICBpZiAodG9hc3QpIHRvYXN0LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICBpZiAoZm9ybWF0ID09IHRoaXMuZmFsbGJhY2tGb3JtYXROYW1lKSByZXR1cm4gbnVsbDsKICAgICAgICBzd2l0Y2ggKGZvcm1hdCkgewogICAgICAgICAgICAvLyBTaW5nbGUgd3JpdGVyIGlzIG5vdCBhIG11c3QuCiAgICAgICAgICAgIC8vIFBsdXMsIGlmIG9uZSB3cml0ZXIgZmFpbCwgb3RoZXJzIHNob3VsZCBiZSBhYmxlIHRvIG92ZXJ3cml0ZSBpdHMgZ2FyYmFnZS4KICAgICAgICAgICAgY2FzZSAnZmx2X3A2MCc6CiAgICAgICAgICAgIGNhc2UgJ2ZsdjcyMF9wNjAnOgogICAgICAgICAgICBjYXNlICdoZGZsdjInOgogICAgICAgICAgICBjYXNlICdmbHYnOgogICAgICAgICAgICBjYXNlICdmbHY3MjAnOgogICAgICAgICAgICBjYXNlICdmbHY0ODAnOgogICAgICAgICAgICBjYXNlICdmbHYzNjAnOgogICAgICAgICAgICAgICAgLy9pZiAodGhpcy5mbHZzKSByZXR1cm4gdGhpcy5mbHZzOyAKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZsdnMgPSBuZXcgQXN5bmNDb250YWluZXIoKTsKICAgICAgICAgICAgY2FzZSAnaGRtcDQnOgogICAgICAgICAgICBjYXNlICdtcDQnOgogICAgICAgICAgICAgICAgLy9pZiAodGhpcy5tcDQpIHJldHVybiB0aGlzLm1wNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1wNCA9IG5ldyBBc3luY0NvbnRhaW5lcigpOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdGhyb3cgYGxvY2tGb3JtYXQgZXJyb3I6ICR7Zm9ybWF0fSBpcyBhIHVucmVjb2duaXphYmxlIGZvcm1hdGA7CiAgICAgICAgfQogICAgfQoKICAgIHJlc29sdmVGb3JtYXQocmVzLCBzaG91bGRCZSkgewogICAgICAgIGNvbnN0IHRvYXN0ID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LXRvcCcpWzBdOwogICAgICAgIGlmICh0b2FzdCkgewogICAgICAgICAgICB0b2FzdC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7CiAgICAgICAgICAgIGlmICh0b2FzdC5jaGlsZHJlbi5sZW5ndGgpIHRvYXN0LmNoaWxkcmVuWzBdLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICAgICAgY29uc3QgdmlkZW8gPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKVswXTsKICAgICAgICAgICAgaWYgKHZpZGVvKSB7CiAgICAgICAgICAgICAgICBjb25zdCBoID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh0b2FzdC5jaGlsZHJlbi5sZW5ndGgpIHRvYXN0LmNoaWxkcmVuWzBdLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbXB0aWVkJywgaCwgeyBvbmNlOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB2aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKCdlbXB0aWVkJywgaCksIDUwMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGlmIChyZXMuZm9ybWF0ID09IHRoaXMuZmFsbGJhY2tGb3JtYXROYW1lKSByZXR1cm4gbnVsbDsKICAgICAgICBzd2l0Y2ggKHJlcy5mb3JtYXQpIHsKICAgICAgICAgICAgY2FzZSAnZmx2X3A2MCc6CiAgICAgICAgICAgIGNhc2UgJ2ZsdjcyMF9wNjAnOgogICAgICAgICAgICBjYXNlICdoZGZsdjInOgogICAgICAgICAgICBjYXNlICdmbHYnOgogICAgICAgICAgICBjYXNlICdmbHY3MjAnOgogICAgICAgICAgICBjYXNlICdmbHY0ODAnOgogICAgICAgICAgICBjYXNlICdmbHYzNjAnOgogICAgICAgICAgICAgICAgaWYgKHNob3VsZEJlICYmIHNob3VsZEJlICE9IHJlcy5mb3JtYXQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdnMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHRocm93IGBVUkwgaW50ZXJmYWNlIGVycm9yOiByZXNwb25zZSBpcyBub3QgJHtzaG91bGRCZX1gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmx2cyA9IHRoaXMuZmx2cy5yZXNvbHZlKHJlcy5kdXJsLm1hcChlID0+IGUudXJsLnJlcGxhY2UoJ2h0dHA6JywgdGhpcy5wcm90b2NvbCkpKTsKICAgICAgICAgICAgY2FzZSAnaGRtcDQnOgogICAgICAgICAgICBjYXNlICdtcDQnOgogICAgICAgICAgICAgICAgaWYgKHNob3VsZEJlICYmIHNob3VsZEJlICE9IHJlcy5mb3JtYXQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1wNCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgYFVSTCBpbnRlcmZhY2UgZXJyb3I6IHJlc3BvbnNlIGlzIG5vdCAke3Nob3VsZEJlfWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tcDQgPSB0aGlzLm1wNC5yZXNvbHZlKHJlcy5kdXJsWzBdLnVybC5yZXBsYWNlKCdodHRwOicsIHRoaXMucHJvdG9jb2wpKTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHRocm93IGByZXNvbHZlRm9ybWF0IGVycm9yOiAke3Jlcy5mb3JtYXR9IGlzIGEgdW5yZWNvZ25pemFibGUgZm9ybWF0YDsKICAgICAgICB9CiAgICB9CgogICAgZ2V0VklQU3RhdHVzKCkgewogICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnBsYXllcldpbi5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdiaWxpX2xvZ2luX3N0YXR1cycpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpLnNvbWUoZSA9PiBlIGluc3RhbmNlb2YgT2JqZWN0ICYmIGUudmlwU3RhdHVzKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBnZXRBU1MoKSB7CiAgICAgICAgaWYgKHRoaXMuYXNzKSByZXR1cm4gdGhpcy5hc3M7CiAgICAgICAgdGhpcy5hc3MgPSBhd2FpdCBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHsKICAgICAgICAgICAgLy8gMS4gY2lkCiAgICAgICAgICAgIGlmICghdGhpcy5jaWQpIHRoaXMuY2lkID0gdGhpcy5wbGF5ZXJXaW4uY2lkOwoKICAgICAgICAgICAgLy8gMi4gb3B0aW9ucwogICAgICAgICAgICBjb25zdCBiaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3MgPSB0aGlzLnBsYXllcldpbi5sb2NhbFN0b3JhZ2UuYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzICYmIEpTT04ucGFyc2UodGhpcy5wbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmJpbGliaWxpX3BsYXllcl9zZXR0aW5ncyk7CgogICAgICAgICAgICAvLyAyLjEgYmxvY2tlcgogICAgICAgICAgICBsZXQgZGFubWFrdSA9IGF3YWl0IEJpbGlNb25rZXkuZmV0Y2hEYW5tYWt1KHRoaXMuY2lkKTsKICAgICAgICAgICAgaWYgKGJpbGliaWxpX3BsYXllcl9zZXR0aW5ncyAmJiB0aGlzLmJsb2NrZXIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBiaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3MuYmxvY2subGlzdC5tYXAoZSA9PiBlLnYpLmpvaW4oJ3wnKTsKICAgICAgICAgICAgICAgIGlmIChpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnZXhwID0gbmV3IFJlZ0V4cChpKTsKICAgICAgICAgICAgICAgICAgICBkYW5tYWt1ID0gZGFubWFrdS5maWx0ZXIoZSA9PiAhcmVnZXhwLnRlc3QoZS50ZXh0KSAmJiAhcmVnZXhwLnRlc3QoZS5zZW5kZXIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMi4yIGZvbnQKICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzICYmIHRoaXMuZm9udCAmJiB7CiAgICAgICAgICAgICAgICAnZm9udEZhbWlseSc6IGJpbGliaWxpX3BsYXllcl9zZXR0aW5ncy5zZXR0aW5nX2NvbmZpZ1snZm9udGZhbWlseSddICE9ICdjdXN0b20nID8gYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzLnNldHRpbmdfY29uZmlnWydmb250ZmFtaWx5J10uc3BsaXQoLywgPy8pIDogYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzLnNldHRpbmdfY29uZmlnWydmb250ZmFtaWx5Y3VzdG9tJ10uc3BsaXQoLywgPy8pLAogICAgICAgICAgICAgICAgJ2ZvbnRTaXplJzogcGFyc2VGbG9hdChiaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3Muc2V0dGluZ19jb25maWdbJ2ZvbnRzaXplJ10pLAogICAgICAgICAgICAgICAgJ3RleHRPcGFjaXR5JzogcGFyc2VGbG9hdChiaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3Muc2V0dGluZ19jb25maWdbJ29wYWNpdHknXSksCiAgICAgICAgICAgICAgICAnYm9sZCc6IGJpbGliaWxpX3BsYXllcl9zZXR0aW5ncy5zZXR0aW5nX2NvbmZpZ1snYm9sZCddID8gMSA6IDAsCiAgICAgICAgICAgIH0gfHwgdW5kZWZpbmVkOwoKICAgICAgICAgICAgLy8gMi4zIHJlc29sdXRpb24KICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uLnJlc29sdXRpb24pIHsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob3B0aW9uLCB7CiAgICAgICAgICAgICAgICAgICAgJ3Jlc29sdXRpb25YJzogK3RoaXMub3B0aW9uLnJlc29sdXRpb25YIHx8IDU2MCwKICAgICAgICAgICAgICAgICAgICAncmVzb2x1dGlvblknOiArdGhpcy5vcHRpb24ucmVzb2x1dGlvblkgfHwgNDIwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMy4gZ2VuZXJhdGUKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IG5ldyBBU1NDb252ZXJ0ZXIob3B0aW9uKS5nZW5BU1NCbG9iKAogICAgICAgICAgICAgICAgZGFubWFrdSwgdG9wLmRvY3VtZW50LnRpdGxlLCB0b3AubG9jYXRpb24uaHJlZgogICAgICAgICAgICApOwogICAgICAgICAgICByZXNvbHZlKHRvcC5VUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdGhpcy5hc3M7CiAgICB9CgogICAgYXN5bmMgcXVlcnlJbmZvKGZvcm1hdCkgewogICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5SW5mb011dGV4LmxvY2tBbmRBd2FpdChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIHN3aXRjaCAoZm9ybWF0KSB7CiAgICAgICAgICAgICAgICBjYXNlICd2aWRlbyc6CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmx2cykKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW9fZm9ybWF0OwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0Jhbmd1bWkgPSBsb2NhdGlvbi5wYXRobmFtZS5pbmNsdWRlcygiYmFuZ3VtaSIpIHx8IGxvY2F0aW9uLmhvc3RuYW1lLmluY2x1ZGVzKCJiYW5ndW1pIik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBpUGF0aCA9IGlzQmFuZ3VtaSA/ICIvcGdjL3BsYXllci93ZWIvcGxheXVybCIgOiAiL3gvcGxheWVyL3BsYXl1cmwiOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBxbiA9ICh0aGlzLm9wdGlvbi5lbmFibGVWaWRlb01heFJlc29sdXRpb24gJiYgdGhpcy5vcHRpb24udmlkZW9NYXhSZXNvbHV0aW9uKSB8fCAiMTIwIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhcGlfdXJsID0gYGh0dHBzOi8vYXBpLmJpbGliaWxpLmNvbSR7YXBpUGF0aH0/YXZpZD0ke2FpZH0mY2lkPSR7Y2lkfSZvdHlwZT1qc29uJmZvdXJrPTEmcW49JHtxbn1gOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCByZSA9IGF3YWl0IGZldGNoKGFwaV91cmwsIHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhcGlKc29uID0gYXdhaXQgcmUuanNvbigpOwoKICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGFwaUpzb24uZGF0YSB8fCBhcGlKc29uLnJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKQogICAgICAgICAgICAgICAgICAgIGxldCBkdXJscyA9IGRhdGEgJiYgZGF0YS5kdXJsOwoKICAgICAgICAgICAgICAgICAgICBpZiAoIWR1cmxzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF96YyA9IHdpbmRvdy5HYyB8fCB3aW5kb3cuemMgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMod2luZG93KS5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9PiB0eXBlb2YgeCA9PSAic3RyaW5nIiAmJiB4LmluY2x1ZGVzKCJbSW5mb10iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKVswXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3pjLnNwbGl0KCJcbiIpLmZpbHRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0+IHguc3RhcnRzV2l0aCgieyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnBvcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfZGF0YV9YID0gZGF0YS5ZIHx8IGRhdGEuWCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhKS5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9PiB0eXBlb2YgeCA9PSAib2JqZWN0IiAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT0gIltvYmplY3QgT2JqZWN0XSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIClbMF07CgogICAgICAgICAgICAgICAgICAgICAgICBkdXJscyA9IF9kYXRhX1guc2VnbWVudHMgfHwgW19kYXRhX1hdOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSkKCiAgICAgICAgICAgICAgICAgICAgbGV0IGZsdnMgPSBkdXJscy5tYXAodXJsX29iaiA9PiB1cmxfb2JqLnVybC5yZXBsYWNlKCJodHRwOi8vIiwgImh0dHBzOi8vIikpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdnMgPSBmbHZzOwoKICAgICAgICAgICAgICAgICAgICBsZXQgdmlkZW9fZm9ybWF0ID0gZGF0YS5mb3JtYXQgJiYgKGRhdGEuZm9ybWF0Lm1hdGNoKC9tcDR8Zmx2LykgfHwgW10pWzBdOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvX2Zvcm1hdCA9IHZpZGVvX2Zvcm1hdDsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZGVvX2Zvcm1hdAogICAgICAgICAgICAgICAgY2FzZSAnYXNzJzoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hc3MpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFzczsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEFTUyh0aGlzLmZsdkZvcm1hdE5hbWUpOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICB0aHJvdyBgQmlsaW1vbmtleTogV2hhdCBpcyBmb3JtYXQgJHtmb3JtYXR9P2A7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICBoYW5nUGxheWVyKCkgewogICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdLnNyYyA9ICJkYXRhOnZpZGVvL21wNDtiYXNlNjQsQUFBQUlHWjBlWEJwYzI5dEFBQUNBR2x6YjIxcGMyOHlZWFpqTVcxd05ERUFBQUFJWm5KbFpRQUFBc3h0WkdGMEFBQUNyZ1lGLy8rcTNFWHB2ZWJaU0xlV0xOZ2cyU1B1NzNneU5qUWdMU0JqYjNKbElERTBPQ0J5TWpZME15QTFZelkxTnpBMElDMGdTQzR5TmpRdlRWQkZSeTAwSUVGV1F5QmpiMlJsWXlBdElFTnZjSGxzWldaMElESXdNRE10TWpBeE5TQXRJR2gwZEhBNkx5OTNkM2N1ZG1sa1pXOXNZVzR1YjNKbkwzZ3lOalF1YUhSdGJDQXRJRzl3ZEdsdmJuTTZJR05oWW1GalBURWdjbVZtUFRNZ1pHVmliRzlqYXoweE9qQTZNQ0JoYm1Gc2VYTmxQVEI0TXpvd2VERXhNeUJ0WlQxb1pYZ2djM1ZpYldVOU55QndjM2s5TVNCd2MzbGZjbVE5TVM0d01Eb3dMakF3SUcxcGVHVmtYM0psWmoweElHMWxYM0poYm1kbFBURTJJR05vY205dFlWOXRaVDB4SUhSeVpXeHNhWE05TVNBNGVEaGtZM1E5TVNCamNXMDlNQ0JrWldGa2VtOXVaVDB5TVN3eE1TQm1ZWE4wWDNCemEybHdQVEVnWTJoeWIyMWhYM0Z3WDI5bVpuTmxkRDB0TWlCMGFISmxZV1J6UFRFZ2JHOXZhMkZvWldGa1gzUm9jbVZoWkhNOU1TQnpiR2xqWldSZmRHaHlaV0ZrY3owd0lHNXlQVEFnWkdWamFXMWhkR1U5TVNCcGJuUmxjbXhoWTJWa1BUQWdZbXgxY21GNVgyTnZiWEJoZEQwd0lHTnZibk4wY21GcGJtVmtYMmx1ZEhKaFBUQWdZbVp5WVcxbGN6MHpJR0pmY0hseVlXMXBaRDB5SUdKZllXUmhjSFE5TVNCaVgySnBZWE05TUNCa2FYSmxZM1E5TVNCM1pXbG5hSFJpUFRFZ2IzQmxibDluYjNBOU1DQjNaV2xuYUhSd1BUSWdhMlY1YVc1MFBUSTFNQ0JyWlhscGJuUmZiV2x1UFRJMUlITmpaVzVsWTNWMFBUUXdJR2x1ZEhKaFgzSmxabkpsYzJnOU1DQnlZMTlzYjI5cllXaGxZV1E5TkRBZ2NtTTlZM0ptSUcxaWRISmxaVDB4SUdOeVpqMHlNeTR3SUhGamIyMXdQVEF1TmpBZ2NYQnRhVzQ5TUNCeGNHMWhlRDAyT1NCeGNITjBaWEE5TkNCcGNGOXlZWFJwYnoweExqUXdJR0Z4UFRFNk1TNHdNQUNBQUFBQURtV0loQUJmL3FjdjRGTTYvMG5IQUFBQzdHMXZiM1lBQUFCc2JYWm9aQUFBQUFBQUFBQUFBQUFBQUFBQUErZ0FBQUFvQUFFQUFBRUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUlBQUFJV2RISmhhd0FBQUZ4MGEyaGtBQUFBQXdBQUFBQUFBQUFBQUFBQUFRQUFBQUFBQUFBb0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFRQUFBQUFBUUFBQUFFQUFBQUFBQUpHVmtkSE1BQUFBY1pXeHpkQUFBQUFBQUFBQUJBQUFBS0FBQUFBQUFBUUFBQUFBQmptMWthV0VBQUFBZ2JXUm9aQUFBQUFBQUFBQUFBQUFBQUFBQU1nQUFBQUlBRmNjQUFBQUFBQzFvWkd4eUFBQUFBQUFBQUFCMmFXUmxBQUFBQUFBQUFBQUFBQUFBVm1sa1pXOUlZVzVrYkdWeUFBQUFBVGx0YVc1bUFBQUFGSFp0YUdRQUFBQUJBQUFBQUFBQUFBQUFBQUFrWkdsdVpnQUFBQnhrY21WbUFBQUFBQUFBQUFFQUFBQU1kWEpzSUFBQUFBRUFBQUQ1YzNSaWJBQUFBSlZ6ZEhOa0FBQUFBQUFBQUFFQUFBQ0ZZWFpqTVFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUJBQVNBQUFBRWdBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCai8vd0FBQUM5aGRtTkRBV1FBQ3YvaEFCWm5aQUFLck5sZWhBQUFBd0FFQUFBREFNZzhTSlpZQVFBR2FPdmp5eUxBQUFBQUdITjBkSE1BQUFBQUFBQUFBUUFBQUFFQUFBSUFBQUFBSEhOMGMyTUFBQUFBQUFBQUFRQUFBQUVBQUFBQkFBQUFBUUFBQUJSemRITjZBQUFBQUFBQUFzUUFBQUFCQUFBQUZITjBZMjhBQUFBQUFBQUFBUUFBQURBQUFBQmlkV1IwWVFBQUFGcHRaWFJoQUFBQUFBQUFBQ0ZvWkd4eUFBQUFBQUFBQUFCdFpHbHlZWEJ3YkFBQUFBQUFBQUFBQUFBQUFDMXBiSE4wQUFBQUphbDBiMjhBQUFBZFpHRjBZUUFBQUFFQUFBQUFUR0YyWmpVMkxqUXdMakV3TVE9PSI7CiAgICB9CgogICAgYXN5bmMgbG9hZEZMVkZyb21DYWNoZShpbmRleCkgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZmx2c1tpbmRleF0ubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLihmbHZ8bXA0KS8pWzBdOwogICAgICAgIGxldCBpdGVtID0gYXdhaXQgdGhpcy5jYWNoZS5nZXREYXRhKG5hbWUpOwogICAgICAgIGlmICghaXRlbSkgcmV0dXJuOwogICAgICAgIHJldHVybiB0aGlzLmZsdnNCbG9iW2luZGV4XSA9IGl0ZW0uZGF0YTsKICAgIH0KCiAgICBhc3luYyBsb2FkUGFydGlhbEZMVkZyb21DYWNoZShpbmRleCkgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZmx2c1tpbmRleF0ubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLihmbHZ8bXA0KS8pWzBdOwogICAgICAgIG5hbWUgPSAnUENfJyArIG5hbWU7CiAgICAgICAgbGV0IGl0ZW0gPSBhd2FpdCB0aGlzLmNhY2hlLmdldERhdGEobmFtZSk7CiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47CiAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YTsKICAgIH0KCiAgICBhc3luYyBsb2FkQWxsRkxWRnJvbUNhY2hlKCkgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKCiAgICAgICAgbGV0IHByb21pc2VzID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZsdnMubGVuZ3RoOyBpKyspIHByb21pc2VzLnB1c2godGhpcy5sb2FkRkxWRnJvbUNhY2hlKGkpKTsKCiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgIH0KCiAgICBhc3luYyBzYXZlRkxWVG9DYWNoZShpbmRleCwgYmxvYikgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZmx2c1tpbmRleF0ubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLihmbHZ8bXA0KS8pWzBdOwogICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmFkZERhdGEoeyBuYW1lLCBkYXRhOiBibG9iIH0pOwogICAgfQoKICAgIGFzeW5jIHNhdmVQYXJ0aWFsRkxWVG9DYWNoZShpbmRleCwgYmxvYikgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZmx2c1tpbmRleF0ubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLihmbHZ8bXA0KS8pWzBdOwogICAgICAgIG5hbWUgPSAnUENfJyArIG5hbWU7CiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucHV0RGF0YSh7IG5hbWUsIGRhdGE6IGJsb2IgfSk7CiAgICB9CgogICAgYXN5bmMgY2xlYW5QYXJ0aWFsRkxWSW5DYWNoZShpbmRleCkgewogICAgICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuOwogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKICAgICAgICBsZXQgbmFtZSA9IHRoaXMuZmx2c1tpbmRleF0ubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLihmbHZ8bXA0KS8pWzBdOwogICAgICAgIG5hbWUgPSAnUENfJyArIG5hbWU7CiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZGVsZXRlRGF0YShuYW1lKTsKICAgIH0KCiAgICBhc3luYyBnZXRGTFYoaW5kZXgsIHByb2dyZXNzSGFuZGxlcikgewogICAgICAgIGlmICh0aGlzLmZsdnNCbG9iW2luZGV4XSkgcmV0dXJuIHRoaXMuZmx2c0Jsb2JbaW5kZXhdOwoKICAgICAgICBpZiAoIXRoaXMuZmx2cykgdGhyb3cgJ0JpbGlNb25rZXk6IGluZm8gdW5pbml0aWFsaXplZCc7CiAgICAgICAgdGhpcy5mbHZzQmxvYltpbmRleF0gPSAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBsZXQgY2FjaGUgPSBhd2FpdCB0aGlzLmxvYWRGTFZGcm9tQ2FjaGUoaW5kZXgpOwogICAgICAgICAgICBpZiAoY2FjaGUpIHJldHVybiB0aGlzLmZsdnNCbG9iW2luZGV4XSA9IGNhY2hlOwogICAgICAgICAgICBsZXQgcGFydGlhbEZMVkZyb21DYWNoZSA9IGF3YWl0IHRoaXMubG9hZFBhcnRpYWxGTFZGcm9tQ2FjaGUoaW5kZXgpOwoKICAgICAgICAgICAgbGV0IGJ1cmwgPSB0aGlzLmZsdnNbaW5kZXhdOwogICAgICAgICAgICBpZiAocGFydGlhbEZMVkZyb21DYWNoZSkgYnVybCArPSBgJmJzdGFydD0ke3BhcnRpYWxGTFZGcm9tQ2FjaGUuc2l6ZX1gOwogICAgICAgICAgICBsZXQgb3B0ID0gewogICAgICAgICAgICAgICAgZmV0Y2g6IHRoaXMucGxheWVyV2luLmZldGNoLAogICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICAgICAgICAgIG1vZGU6ICdjb3JzJywKICAgICAgICAgICAgICAgIGNhY2hlOiAnZGVmYXVsdCcsCiAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyLXdoZW4tZG93bmdyYWRlJywKICAgICAgICAgICAgICAgIGNhY2hlTG9hZGVkOiBwYXJ0aWFsRkxWRnJvbUNhY2hlID8gcGFydGlhbEZMVkZyb21DYWNoZS5zaXplIDogMCwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHBhcnRpYWxGTFZGcm9tQ2FjaGUgJiYgKCFidXJsLmluY2x1ZGVzKCd3c1RpbWUnKSkgPyB7IFJhbmdlOiBgYnl0ZXM9JHtwYXJ0aWFsRkxWRnJvbUNhY2hlLnNpemV9LWAgfSA6IHVuZGVmaW5lZAogICAgICAgICAgICB9OwogICAgICAgICAgICBvcHQub25wcm9ncmVzcyA9IHByb2dyZXNzSGFuZGxlcjsKICAgICAgICAgICAgb3B0Lm9uZXJyb3IgPSBvcHQub25hYm9ydCA9ICh7IHRhcmdldCwgdHlwZSB9KSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcGFydGlhbEZMViA9IHRhcmdldC5nZXRQYXJ0aWFsQmxvYigpOwogICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxGTFZGcm9tQ2FjaGUpIHBhcnRpYWxGTFYgPSBuZXcgQmxvYihbcGFydGlhbEZMVkZyb21DYWNoZSwgcGFydGlhbEZMVl0pOwogICAgICAgICAgICAgICAgdGhpcy5zYXZlUGFydGlhbEZMVlRvQ2FjaGUoaW5kZXgsIHBhcnRpYWxGTFYpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IGZjaCA9IG5ldyBEZXRhaWxlZEZldGNoQmxvYihidXJsLCBvcHQpOwogICAgICAgICAgICB0aGlzLmZsdnNEZXRhaWxlZEZldGNoW2luZGV4XSA9IGZjaDsKICAgICAgICAgICAgbGV0IGZ1bGxGTFYgPSBhd2FpdCBmY2guZ2V0QmxvYigpOwogICAgICAgICAgICB0aGlzLmZsdnNEZXRhaWxlZEZldGNoW2luZGV4XSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgaWYgKHBhcnRpYWxGTFZGcm9tQ2FjaGUpIHsKICAgICAgICAgICAgICAgIGZ1bGxGTFYgPSBuZXcgQmxvYihbcGFydGlhbEZMVkZyb21DYWNoZSwgZnVsbEZMVl0pOwogICAgICAgICAgICAgICAgdGhpcy5jbGVhblBhcnRpYWxGTFZJbkNhY2hlKGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNhdmVGTFZUb0NhY2hlKGluZGV4LCBmdWxsRkxWKTsKICAgICAgICAgICAgcmV0dXJuICh0aGlzLmZsdnNCbG9iW2luZGV4XSA9IGZ1bGxGTFYpOwogICAgICAgIH0pKCk7CiAgICAgICAgcmV0dXJuIHRoaXMuZmx2c0Jsb2JbaW5kZXhdOwogICAgfQoKICAgIGFzeW5jIGFib3J0RkxWKGluZGV4KSB7CiAgICAgICAgaWYgKHRoaXMuZmx2c0RldGFpbGVkRmV0Y2hbaW5kZXhdKSByZXR1cm4gdGhpcy5mbHZzRGV0YWlsZWRGZXRjaFtpbmRleF0uYWJvcnQoKTsKICAgIH0KCiAgICBhc3luYyBnZXRBbGxGTFZzKHByb2dyZXNzSGFuZGxlcikgewogICAgICAgIGlmICghdGhpcy5mbHZzKSB0aHJvdyAnQmlsaU1vbmtleTogaW5mbyB1bmluaXRpYWxpemVkJzsKICAgICAgICBsZXQgcHJvbWlzZXMgPSBbXTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmx2cy5sZW5ndGg7IGkrKykgcHJvbWlzZXMucHVzaCh0aGlzLmdldEZMVihpLCBwcm9ncmVzc0hhbmRsZXIpKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpOwogICAgfQoKICAgIGFzeW5jIGNsZWFuQWxsRkxWc0luQ2FjaGUoKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSByZXR1cm47CiAgICAgICAgaWYgKCF0aGlzLmZsdnMpIHRocm93ICdCaWxpTW9ua2V5OiBpbmZvIHVuaW5pdGlhbGl6ZWQnOwoKICAgICAgICBsZXQgcmV0ID0gW107CiAgICAgICAgZm9yIChsZXQgZmx2IG9mIHRoaXMuZmx2cykgewogICAgICAgICAgICBsZXQgbmFtZSA9IGZsdi5tYXRjaCgvXGQrLVxkKyg/OlxkfC18aGQpKlwuKGZsdnxtcDQpLylbMF07CiAgICAgICAgICAgIHJldC5wdXNoKGF3YWl0IHRoaXMuY2FjaGUuZGVsZXRlRGF0YShuYW1lKSk7CiAgICAgICAgICAgIHJldC5wdXNoKGF3YWl0IHRoaXMuY2FjaGUuZGVsZXRlRGF0YSgnUENfJyArIG5hbWUpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgYXN5bmMgc2V0dXBQcm94eShyZXMsIG9uc3VjY2VzcykgewogICAgICAgIGlmICghdGhpcy5zZXR1cFByb3h5Ll9mZXRjaCkgewogICAgICAgICAgICBjb25zdCBfZmV0Y2ggPSB0aGlzLnNldHVwUHJveHkuX2ZldGNoID0gdGhpcy5wbGF5ZXJXaW4uZmV0Y2g7CiAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmZldGNoID0gZnVuY3Rpb24gKGlucHV0LCBpbml0KSB7CiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LnNsaWNlIHx8IGlucHV0LnNsaWNlKDAsIDUpICE9ICdibG9iOicpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ZldGNoKGlucHV0LCBpbml0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBic3RhcnQgPSBpbnB1dC5pbmRleE9mKCc/YnN0YXJ0PScpOwogICAgICAgICAgICAgICAgaWYgKGJzdGFydCA8IDApIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2ZldGNoKGlucHV0LCBpbml0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghaW5pdC5oZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykgaW5pdC5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5pdC5oZWFkZXJzIHx8IHt9KTsKICAgICAgICAgICAgICAgIGluaXQuaGVhZGVycy5zZXQoJ1JhbmdlJywgYGJ5dGVzPSR7aW5wdXQuc2xpY2UoYnN0YXJ0ICsgOCl9LWApOwogICAgICAgICAgICAgICAgcmV0dXJuIF9mZXRjaChpbnB1dC5zbGljZSgwLCBic3RhcnQpLCBpbml0KQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmRlc3Ryb3kuYWRkQ2FsbGJhY2soKCkgPT4gdGhpcy5wbGF5ZXJXaW4uZmV0Y2ggPSBfZmV0Y2gpOwogICAgICAgIH0KCiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQWxsRkxWRnJvbUNhY2hlKCk7CiAgICAgICAgbGV0IHJlc1Byb3h5ID0gT2JqZWN0LmFzc2lnbih7fSwgcmVzKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmx2c0Jsb2IubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuZmx2c0Jsb2JbaV0pIHJlc1Byb3h5LmR1cmxbaV0udXJsID0gdGhpcy5wbGF5ZXJXaW4uVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZsdnNCbG9iW2ldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG9uc3VjY2VzcyhyZXNQcm94eSk7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGZldGNoRGFubWFrdShjaWQpIHsKICAgICAgICByZXR1cm4gQVNTQ29udmVydGVyLnBhcnNlWE1MKAogICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICBlLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoZS5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgZS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICAgICAgZS5vcGVuKCdnZXQnLCBgaHR0cHM6Ly9jb21tZW50LmJpbGliaWxpLmNvbS8ke2NpZH0ueG1sYCk7CiAgICAgICAgICAgICAgICBlLnNlbmQoKTsKICAgICAgICAgICAgfSkKICAgICAgICApOwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBnZXRBbGxQYWdlRGVmYXVsdEZvcm1hdHMocGxheWVyV2luID0gdG9wLCBtb25rZXkpIHsKICAgICAgICAvKiogQHJldHVybnMge1Byb21pc2U8e2NpZDogbnVtYmVyOyBwYWdlOiBudW1iZXI7IHBhcnQ/OiBzdHJpbmc7IH1bXT59ICovCiAgICAgICAgY29uc3QgZ2V0UGFydHNMaXN0ID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmJpbGliaWxpLmNvbS94L3BsYXllci9wYWdlbGlzdD9haWQ9JHthaWR9YCk7CiAgICAgICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByLmpzb24oKTsKICAgICAgICAgICAgcmV0dXJuIGpzb24uZGF0YQogICAgICAgIH07CgogICAgICAgIGNvbnN0IGxpc3QgPSBhd2FpdCBnZXRQYXJ0c0xpc3QoKTsKCiAgICAgICAgY29uc3QgcXVlcnlJbmZvTXV0ZXggPSBuZXcgTXV0ZXgoKTsKCiAgICAgICAgY29uc3QgX2dldERhdGFMaXN0ID0gKCkgPT4gewogICAgICAgICAgICBjb25zdCBfemMgPSBwbGF5ZXJXaW4uR2MgfHwgcGxheWVyV2luLnpjIHx8CiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHBsYXllcldpbikuZmlsdGVyKAogICAgICAgICAgICAgICAgICAgIHggPT4gdHlwZW9mIHggPT0gInN0cmluZyIgJiYgeC5pbmNsdWRlcygiW0luZm9dIikKICAgICAgICAgICAgICAgIClbMF07CiAgICAgICAgICAgIHJldHVybiBfemMuc3BsaXQoIlxuIikuZmlsdGVyKAogICAgICAgICAgICAgICAgeCA9PiB4LnN0YXJ0c1dpdGgoInsiKQogICAgICAgICAgICApCiAgICAgICAgfTsKCiAgICAgICAgLy8gZnJvbSB0aGUgZmlyc3QgcGFnZQogICAgICAgIHBsYXllcldpbi5wbGF5ZXIubmV4dCgxKTsKICAgICAgICBjb25zdCBpbml0aWFsRGF0YVNpemUgPSBuZXcgU2V0KF9nZXREYXRhTGlzdCgpKS5zaXplOwoKICAgICAgICBjb25zdCByZXRQcm9taXNlcyA9IGxpc3QubWFwKCh4LCBuKSA9PiAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICBhd2FpdCBxdWVyeUluZm9NdXRleC5sb2NrKCk7CgogICAgICAgICAgICBjb25zdCBjaWQgPSB4LmNpZDsKICAgICAgICAgICAgY29uc3QgZGFubXVrdSA9IGF3YWl0IG5ldyBBU1NDb252ZXJ0ZXIoKS5nZW5BU1NCbG9iKAogICAgICAgICAgICAgICAgYXdhaXQgQmlsaU1vbmtleS5mZXRjaERhbm1ha3UoY2lkKSwgdG9wLmRvY3VtZW50LnRpdGxlLCB0b3AubG9jYXRpb24uaHJlZgogICAgICAgICAgICApOwoKICAgICAgICAgICAgY29uc3QgaXNCYW5ndW1pID0gbG9jYXRpb24ucGF0aG5hbWUuaW5jbHVkZXMoImJhbmd1bWkiKSB8fCBsb2NhdGlvbi5ob3N0bmFtZS5pbmNsdWRlcygiYmFuZ3VtaSIpOwogICAgICAgICAgICBjb25zdCBhcGlQYXRoID0gaXNCYW5ndW1pID8gIi9wZ2MvcGxheWVyL3dlYi9wbGF5dXJsIiA6ICIveC9wbGF5ZXIvcGxheXVybCI7CgogICAgICAgICAgICBjb25zdCBxbiA9IChtb25rZXkub3B0aW9uLmVuYWJsZVZpZGVvTWF4UmVzb2x1dGlvbiAmJiBtb25rZXkub3B0aW9uLnZpZGVvTWF4UmVzb2x1dGlvbikgfHwgIjEyMCI7CiAgICAgICAgICAgIGNvbnN0IGFwaV91cmwgPSBgaHR0cHM6Ly9hcGkuYmlsaWJpbGkuY29tJHthcGlQYXRofT9hdmlkPSR7YWlkfSZjaWQ9JHtjaWR9Jm90eXBlPWpzb24mZm91cms9MSZxbj0ke3FufWA7CiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBmZXRjaChhcGlfdXJsLCB7IGNyZWRlbnRpYWxzOiAnaW5jbHVkZScgfSk7CgogICAgICAgICAgICBjb25zdCBhcGlKc29uID0gYXdhaXQgci5qc29uKCk7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGFwaUpzb24uZGF0YSB8fCBhcGlKc29uLnJlc3VsdDsKCiAgICAgICAgICAgIGlmICghcmVzLmR1cmwpIHsKICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFTaXplID0gbmV3IFNldCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nZXREYXRhTGlzdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICkuc2l6ZTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PSAxIHx8IGRhdGFTaXplID09IG4gKyBpbml0aWFsRGF0YVNpemUgKyAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKAogICAgICAgICAgICAgICAgICAgIF9nZXREYXRhTGlzdCgpLnBvcCgpCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRhX1ggPSBkYXRhLlkgfHwgZGF0YS5YIHx8CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhkYXRhKS5maWx0ZXIoCiAgICAgICAgICAgICAgICAgICAgICAgIHggPT4gdHlwZW9mIHggPT0gIm9iamVjdCIgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09ICJbb2JqZWN0IE9iamVjdF0iCiAgICAgICAgICAgICAgICAgICAgKVswXTsKCiAgICAgICAgICAgICAgICByZXMuZHVybCA9IF9kYXRhX1guc2VnbWVudHMgfHwgW19kYXRhX1hdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBxdWVyeUluZm9NdXRleC51bmxvY2soKTsKICAgICAgICAgICAgcGxheWVyV2luLnBsYXllci5uZXh0KCk7CgogICAgICAgICAgICByZXR1cm4gKHsKICAgICAgICAgICAgICAgIGR1cmw6IHJlcy5kdXJsLm1hcCgoeyB1cmwgfSkgPT4gdXJsLnJlcGxhY2UoJ2h0dHA6JywgcGxheWVyV2luLmxvY2F0aW9uLnByb3RvY29sKSksCiAgICAgICAgICAgICAgICBkYW5tdWt1LAogICAgICAgICAgICAgICAgbmFtZTogeC5wYXJ0IHx8IHguaW5kZXggfHwgcGxheWVyV2luLmRvY3VtZW50LnRpdGxlLnJlcGxhY2UoIl/lk5Tlk6nlk5Tlk6kgKOOCnC3jgpwp44Gk44OtIOW5suadr34tYmlsaWJpbGkiLCAiIiksCiAgICAgICAgICAgICAgICBvdXRwdXROYW1lOiByZXMuZHVybFswXS51cmwubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSooPz1cLmZsdikvKSA/CiAgICAgICAgICAgICAgICAgICAgLyoqKgogICAgICAgICAgICAgICAgICAgICAqIHNlZSAjMjgKICAgICAgICAgICAgICAgICAgICAgKiBGaXJlZm94IGxvb2tiZWhpbmQgYXNzZXJ0aW9uIG5vdCBpbXBsZW1lbnRlZCBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjI1NjY1CiAgICAgICAgICAgICAgICAgICAgICogdHJ5IHJlcGxhY2UgLy1cZCsoPz0oPzpcZHwtfGhkKSpcLmZsdikvID0+IC8oPzw9XGQrKS1cZCsoPz0oPzpcZHwtfGhkKSpcLmZsdikvIGluIHRoZSBmdXR1cmUKICAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICByZXMuZHVybFswXS51cmwubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSooPz1cLmZsdikvKVswXS5yZXBsYWNlKC8tXGQrKD89KD86XGR8LXxoZCkqXC5mbHYpLywgJycpCiAgICAgICAgICAgICAgICAgICAgOiByZXMuZHVybFswXS51cmwubWF0Y2goL1xkKD86XGR8LXxoZCkqKD89XC5tcDQpLykgPwogICAgICAgICAgICAgICAgICAgICAgICByZXMuZHVybFswXS51cmwubWF0Y2goL1xkKD86XGR8LXxoZCkqKD89XC5tcDQpLylbMF0KICAgICAgICAgICAgICAgICAgICAgICAgOiBjaWQsCiAgICAgICAgICAgICAgICBjaWQsCiAgICAgICAgICAgICAgICByZXMsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pKCkpOwoKICAgICAgICBjb25zdCByZXQgPSBhd2FpdCBQcm9taXNlLmFsbChyZXRQcm9taXNlcyk7CgogICAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGdldEJpbGlTaG9ydFZpZGVvSW5mbygpIHsKICAgICAgICBjb25zdCB2aWRlb19pZCA9IGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9cL3ZpZGVvXC8oXGQrKS8pWzFdOwogICAgICAgIGNvbnN0IGFwaV91cmwgPSBgaHR0cHM6Ly9hcGkudmMuYmlsaWJpbGkuY29tL2NsaXAvdjEvdmlkZW8vZGV0YWlsP3ZpZGVvX2lkPSR7dmlkZW9faWR9Jm5lZWRfcGxheXVybD0xYDsKCiAgICAgICAgY29uc3QgcmVxID0gYXdhaXQgZmV0Y2goYXBpX3VybCwgeyBjcmVkZW50aWFsczogJ2luY2x1ZGUnIH0pOwogICAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVxLmpzb24oKSkuZGF0YTsKICAgICAgICBjb25zdCB7IHZpZGVvX3BsYXl1cmwsIGZpcnN0X3BpYzogY292ZXJfaW1nIH0gPSBkYXRhLml0ZW07CgogICAgICAgIHJldHVybiB7IHZpZGVvX3BsYXl1cmw6IHZpZGVvX3BsYXl1cmwucmVwbGFjZSgiaHR0cDovLyIsICJodHRwczovLyIpLCBjb3Zlcl9pbWcgfQogICAgfQoKICAgIHN0YXRpYyBmb3JtYXRUb1ZhbHVlKGZvcm1hdCkgewogICAgICAgIGlmIChmb3JtYXQgPT0gJ2RvZXNfbm90X2V4aXN0JykgdGhyb3cgYGZvcm1hdFRvVmFsdWU6IGNhbm5vdCBsb29rdXAgZG9lc19ub3RfZXhpc3RgOwogICAgICAgIGlmICh0eXBlb2YgQmlsaU1vbmtleS5mb3JtYXRUb1ZhbHVlLmRpY3QgPT0gJ3VuZGVmaW5lZCcpIEJpbGlNb25rZXkuZm9ybWF0VG9WYWx1ZS5kaWN0ID0gewogICAgICAgICAgICAnaGRmbHYyJzogJzEyMCcsCiAgICAgICAgICAgICdmbHZfcDYwJzogJzExNicsCiAgICAgICAgICAgICdmbHY3MjBfcDYwJzogJzc0JywKICAgICAgICAgICAgJ2Zsdic6ICc4MCcsCiAgICAgICAgICAgICdmbHY3MjAnOiAnNjQnLAogICAgICAgICAgICAnZmx2NDgwJzogJzMyJywKICAgICAgICAgICAgJ2ZsdjM2MCc6ICcxNScsCgogICAgICAgICAgICAvLyBsZWdhY3kgLSBsYXRlIDIwMTcKICAgICAgICAgICAgJ2hkZmx2Mic6ICcxMTInLAogICAgICAgICAgICAnaGRtcDQnOiAnNjQnLCAvLyBkYXRhLXZhbHVlIGlzIHN0aWxsICc2NCcgaW5zdGVhZCBvZiAnNDgnLiAgJzQ4JywKICAgICAgICAgICAgJ21wNCc6ICcxNicsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gQmlsaU1vbmtleS5mb3JtYXRUb1ZhbHVlLmRpY3RbZm9ybWF0XSB8fCBudWxsOwogICAgfQoKICAgIHN0YXRpYyB2YWx1ZVRvRm9ybWF0KHZhbHVlKSB7CiAgICAgICAgaWYgKHR5cGVvZiBCaWxpTW9ua2V5LnZhbHVlVG9Gb3JtYXQuZGljdCA9PSAndW5kZWZpbmVkJykgQmlsaU1vbmtleS52YWx1ZVRvRm9ybWF0LmRpY3QgPSB7CiAgICAgICAgICAgICcxMjAnOiAnaGRmbHYyJywKICAgICAgICAgICAgJzExNic6ICdmbHZfcDYwJywKICAgICAgICAgICAgJzc0JzogJ2ZsdjcyMF9wNjAnLAogICAgICAgICAgICAnODAnOiAnZmx2JywKICAgICAgICAgICAgJzY0JzogJ2ZsdjcyMCcsCiAgICAgICAgICAgICczMic6ICdmbHY0ODAnLAogICAgICAgICAgICAnMTUnOiAnZmx2MzYwJywKCiAgICAgICAgICAgIC8vIGxlZ2FjeSAtIGxhdGUgMjAxNwogICAgICAgICAgICAnMTEyJzogJ2hkZmx2MicsCiAgICAgICAgICAgICc0OCc6ICdoZG1wNCcsCiAgICAgICAgICAgICcxNic6ICdtcDQnLAoKICAgICAgICAgICAgLy8gbGVnYWN5IC0gZWFybHkgMjAxNwogICAgICAgICAgICAnMyc6ICdmbHYnLAogICAgICAgICAgICAnMic6ICdoZG1wNCcsCiAgICAgICAgICAgICcxJzogJ21wNCcsCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gQmlsaU1vbmtleS52YWx1ZVRvRm9ybWF0LmRpY3RbdmFsdWVdIHx8IG51bGw7CiAgICB9CgogICAgc3RhdGljIGdldCBvcHRpb25EZXNjcmlwdGlvbnMoKSB7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgLy8gMS4gY2FjaGUKICAgICAgICAgICAgWydjYWNoZScsICflhbPmoIfnrb7pobXkuI3muIXnvJPlrZjvvJrkv53nlZnlrozlhajkuIvovb3lpb3nmoTliIbmrrXliLDnvJPlrZjvvIzlv5jorrDlj6blrZjkuLrkuZ/msqHlhbPns7vjgIInXSwKICAgICAgICAgICAgWydwYXJ0aWFsJywgJ+aWreeCuee7reS8oO+8mueCueWHu+KAnOWPlua2iOKAneS/neeVmemDqOWIhuS4i+i9veeahOWIhuauteWIsOe8k+WtmO+8jOW/mOiusOeCueWHu+S8muW8ueeql+ehruiupOOAgiddLAogICAgICAgICAgICBbJ3Byb3h5JywgJ+eUqOe8k+WtmOWKoOmAn+aSreaUvuWZqO+8muWmguaenOe8k+WtmOmHjOacieWujOWFqOS4i+i9veWlveeahOWIhuaute+8jOebtOaOpeWWgue7mee9kemhteaSreaUvuWZqO+8jOS4jemHjeaWsOiuv+mXrue9kee7nOOAguWwj+awtOeuoeWIqeWZqO+8jOaSreaUvuWPqumcgDUwMGvmtYHph4/jgILlpoLmnpzlrp7lnKjmkJ7kuI3muIXmgI7kuYjmkq3mlL5BU1PlvLnluZXvvIzkuZ/lj6/ku6XlsLHov5nmoLfnlKjjgIInXSwKCiAgICAgICAgICAgIC8vIDIuIGN1c3RvbWl6aW5nCiAgICAgICAgICAgIFsnYmxvY2tlcicsICflvLnluZXov4fmu6TvvJrlnKjnvZHpobXmkq3mlL7lmajph4zorr7nva7nmoTlsY/olL3or43kuZ/lr7nkuIvovb3nmoTlvLnluZXnlJ/mlYjjgIInXSwKICAgICAgICAgICAgWydmb250JywgJ+iHquWumuS5ieWtl+S9k++8muWcqOe9kemhteaSreaUvuWZqOmHjOiuvue9rueahOWtl+S9k+OAgeWkp+Wwj+OAgeWKoOeyl+OAgemAj+aYjuW6puS5n+WvueS4i+i9veeahOW8ueW5leeUn+aViOOAgiddLAogICAgICAgICAgICBbJ3Jlc29sdXRpb24nLCAnKOa1iynoh6rlrprkuYnlvLnluZXnlLvluIPliIbovqjnjofvvJrku4Xlr7nkuIvovb3nmoTlvLnluZXnlJ/mlYjjgIIo6buY6K6k5YC8OiA1NjAgeCA0MjApJ10sCiAgICAgICAgXTsKICAgIH0KCiAgICBzdGF0aWMgZ2V0IHJlc29sdXRpb25QcmVmZXJlbmNlT3B0aW9ucygpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgICBbJ+i2hea4hSA0SyAo5aSn5Lya5ZGYKScsICcxMjAnXSwKICAgICAgICAgICAgWyfpq5jmuIUgMTA4MFA2MCAo5aSn5Lya5ZGYKScsICcxMTYnXSwKICAgICAgICAgICAgWyfpq5jmuIUgMTA4MFArICjlpKfkvJrlkZgpJywgJzExMiddLAogICAgICAgICAgICBbJ+mrmOa4hSA3MjBQNjAgKOWkp+S8muWRmCknLCAnNzQnXSwKICAgICAgICAgICAgWyfpq5jmuIUgMTA4MFAnLCAnODAnXSwKICAgICAgICAgICAgWyfpq5jmuIUgNzIwUCcsICc2NCddLAogICAgICAgICAgICBbJ+a4heaZsCA0ODBQJywgJzMyJ10sCiAgICAgICAgICAgIFsn5rWB55WFIDM2MFAnLCAnMTYnXSwKICAgICAgICBdCiAgICB9CgogICAgc3RhdGljIGdldCBvcHRpb25EZWZhdWx0cygpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyAxLiBhdXRvbWF0aW9uCiAgICAgICAgICAgIGF1dG9EZWZhdWx0OiB0cnVlLAogICAgICAgICAgICBhdXRvRkxWOiBmYWxzZSwKICAgICAgICAgICAgYXV0b01QNDogZmFsc2UsCgogICAgICAgICAgICAvLyAyLiBjYWNoZQogICAgICAgICAgICBjYWNoZTogdHJ1ZSwKICAgICAgICAgICAgcGFydGlhbDogdHJ1ZSwKICAgICAgICAgICAgcHJveHk6IHRydWUsCgogICAgICAgICAgICAvLyAzLiBjdXN0b21pemluZwogICAgICAgICAgICBibG9ja2VyOiB0cnVlLAogICAgICAgICAgICBmb250OiB0cnVlLAogICAgICAgICAgICByZXNvbHV0aW9uOiBmYWxzZSwKICAgICAgICAgICAgcmVzb2x1dGlvblg6IDU2MCwKICAgICAgICAgICAgcmVzb2x1dGlvblk6IDQyMCwKICAgICAgICAgICAgdmlkZW9NYXhSZXNvbHV0aW9uOiAiMTIwIiwKICAgICAgICAgICAgZW5hYmxlVmlkZW9NYXhSZXNvbHV0aW9uOiBmYWxzZSwKICAgICAgICB9CiAgICB9CgogICAgc3RhdGljIF9VTklUX1RFU1QoKSB7CiAgICAgICAgcmV0dXJuIChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGxldCBwbGF5ZXJXaW4gPSBhd2FpdCBCaWxpVXNlckpTLmdldFBsYXllcldpbigpOwogICAgICAgICAgICB3aW5kb3cubSA9IG5ldyBCaWxpTW9ua2V5KHBsYXllcldpbik7CgogICAgICAgICAgICBjb25zb2xlLndhcm4oJ2RhdGEgcmFjZSB0ZXN0Jyk7CiAgICAgICAgICAgIG0ucXVlcnlJbmZvKCd2aWRlbycpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhtLnF1ZXJ5SW5mbygndmlkZW8nKSk7CgogICAgICAgICAgICAvL2xvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0pKCk7CiAgICB9Cn0KCi8qKioKICogQmlsaVBvbHlmaWxsCiAqIEEgYmlsaWJpbGkgdXNlciBzY3JpcHQKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgoqLwoKY2xhc3MgQmlsaVBvbHlmaWxsIHsKICAgIC8qKioKICAgICAqIEFzc3VtcHRpb246IGFpZCwgY2lkLCBwYWdlbm8gZG9lcyBub3QgY2hhbmdlIGR1cmluZyBsaWZlY3ljbGUKICAgICAqIENyZWF0ZSBhIG5ldyBCaWxpUG9seWZpbGwgaWYgYXNzdW1wdGlvbiBicmVha3MKICAgICAqLwogICAgY29uc3RydWN0b3IocGxheWVyV2luLCBvcHRpb24gPSBCaWxpUG9seWZpbGwub3B0aW9uRGVmYXVsdHMsIGhpbnRJbmZvID0gKCkgPT4geyB9KSB7CiAgICAgICAgdGhpcy5wbGF5ZXJXaW4gPSBwbGF5ZXJXaW47CiAgICAgICAgdGhpcy5vcHRpb24gPSBvcHRpb247CiAgICAgICAgdGhpcy5oaW50SW5mbyA9IGhpbnRJbmZvOwoKICAgICAgICB0aGlzLnZpZGVvID0gbnVsbDsKCiAgICAgICAgdGhpcy5zZXJpZXMgPSBbXTsKICAgICAgICB0aGlzLnVzZXJkYXRhID0geyBvcGVkOiB7fSwgcmVzdG9yZToge30gfTsKCiAgICAgICAgdGhpcy5kZXN0cm95ID0gbmV3IEhvb2tlZEZ1bmN0aW9uKCk7CiAgICAgICAgdGhpcy5wbGF5ZXJXaW4uYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5kZXN0cm95KTsKICAgICAgICB0aGlzLmRlc3Ryb3kuYWRkQ2FsbGJhY2soKCkgPT4gdGhpcy5wbGF5ZXJXaW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5kZXN0cm95KSk7CgogICAgICAgIHRoaXMuQmlsaURhbm1ha3VTZXR0aW5ncyA9CiAgICAgICAgICAgIGNsYXNzIEJpbGlEYW5tYWt1U2V0dGluZ3MgewogICAgICAgICAgICAgICAgc3RhdGljIGdldFBsYXllclNldHRpbmdzKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBwbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmJpbGliaWxpX3BsYXllcl9zZXR0aW5ncyAmJiBKU09OLnBhcnNlKHBsYXllcldpbi5sb2NhbFN0b3JhZ2UuYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc3RhdGljIGdldChrZXkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJfc2V0dGluZ3MgPSBCaWxpRGFubWFrdVNldHRpbmdzLmdldFBsYXllclNldHRpbmdzKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllcl9zZXR0aW5ncy5zZXR0aW5nX2NvbmZpZyAmJiBwbGF5ZXJfc2V0dGluZ3Muc2V0dGluZ19jb25maWdba2V5XQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc3RhdGljIHNldChrZXksIHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheWVyX3NldHRpbmdzID0gQmlsaURhbm1ha3VTZXR0aW5ncy5nZXRQbGF5ZXJTZXR0aW5ncygpOwogICAgICAgICAgICAgICAgICAgIHBsYXllcl9zZXR0aW5ncy5zZXR0aW5nX2NvbmZpZ1trZXldID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyV2luLmxvY2FsU3RvcmFnZS5iaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3MgPSBKU09OLnN0cmluZ2lmeShwbGF5ZXJfc2V0dGluZ3MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgfQoKICAgIHNhdmVVc2VyZGF0YSgpIHsKICAgICAgICB0aGlzLm9wdGlvbi5zZXRTdG9yYWdlKCdiaWxpUG9seWZpbGwnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJkYXRhKSk7CiAgICB9CgogICAgcmV0cmlldmVVc2VyZGF0YSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLnVzZXJkYXRhID0gdGhpcy5vcHRpb24uZ2V0U3RvcmFnZSgnYmlsaVBvbHlmaWxsJyk7CiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJkYXRhLmxlbmd0aCA+IDEwNzM3NDE4MjQpIHRvcC5hbGVydCgnQmlsaVBvbHlmaWxs6ISa5pys5pWw5o2u5bey57uP5b+r5ruh5LqG77yM5Zyo5pKt5pS+5Zmo5LiK5Y+z6ZSuLT5CaWxpUG9seWZpbGwtPueJh+WktOeJh+Wwvi0+5qOA6KeG5pWw5o2u77yM5Yig5o6J5LiA5Lqb5ZCn44CCJyk7CiAgICAgICAgICAgIHRoaXMudXNlcmRhdGEgPSBKU09OLnBhcnNlKHRoaXMudXNlcmRhdGEpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgeyB9CiAgICAgICAgZmluYWxseSB7CiAgICAgICAgICAgIGlmICghdGhpcy51c2VyZGF0YSkgdGhpcy51c2VyZGF0YSA9IHt9OwogICAgICAgICAgICBpZiAoISh0aGlzLnVzZXJkYXRhLm9wZWQgaW5zdGFuY2VvZiBPYmplY3QpKSB0aGlzLnVzZXJkYXRhLm9wZWQgPSB7fTsKICAgICAgICAgICAgaWYgKCEodGhpcy51c2VyZGF0YS5yZXN0b3JlIGluc3RhbmNlb2YgT2JqZWN0KSkgdGhpcy51c2VyZGF0YS5yZXN0b3JlID0ge307CiAgICAgICAgfQogICAgfQoKICAgIGFzeW5jIHNldEZ1bmN0aW9ucyh7IHZpZGVvUmVmcmVzaCA9IGZhbHNlIH0gPSB7fSkgewogICAgICAgIC8vIDEuIGluaXRpYWxpemUKICAgICAgICB0aGlzLnZpZGVvID0gYXdhaXQgdGhpcy5nZXRQbGF5ZXJWaWRlbygpOwoKICAgICAgICBpZiAoIXZpZGVvUmVmcmVzaCkgewogICAgICAgICAgICB0aGlzLnJldHJpZXZlVXNlcmRhdGEoKTsKICAgICAgICB9CgogICAgICAgIC8vIDIuIGlmIG5vdCBlbmFibGVkLCBydW4gdGhlIHByb2Nlc3Mgd2l0aG91dCByZWFsIGFjdGlvbnMKICAgICAgICBpZiAoIXRoaXMub3B0aW9uLmJldGFiZXRhKSByZXR1cm4gdGhpcy5nZXRQbGF5ZXJNZW51KCk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIDMuIHNldCB1cCBmdW5jdGlvbnMgdGhhdCBhcmUgY2lkIHN0YXRpYwogICAgICAgICAgICBpZiAoIXZpZGVvUmVmcmVzaCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uLmJhZGdlV2F0Y2hMYXRlcikgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0V2F0Y2hMYXRlckJ0bigpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmFkZ2VXYXRjaExhdGVyKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb24uc2Nyb2xsKSB0aGlzLnNjcm9sbFRvUGxheWVyKCk7CgogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uLnNlcmllcykgdGhpcy5pbmZlck5leHRJblNlcmllcygpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbi5yZWNvbW1lbmQpIHRoaXMuc2hvd1JlY29tbWVuZFRhYigpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uLmZvY3VzKSB0aGlzLmZvY3VzT25QbGF5ZXIoKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbi5yZXN0b3JlUHJldmVudCkgdGhpcy5yZXN0b3JlUHJldmVudFNoYWRlKCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb24ucmVzdG9yZURhbm11a3UpIHRoaXMucmVzdG9yZURhbm11a3VTd2l0Y2goKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbi5yZXN0b3JlU3BlZWQpIHRoaXMucmVzdG9yZVNwZWVkKCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb24ucmVzdG9yZVdpZGUpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldFdpZGVTY3JlZW5CdG4oKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVXaWRlU2NyZWVuKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb24uYXV0b1Jlc3VtZSkgdGhpcy5hdXRvUmVzdW1lKCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb24uYXV0b1BsYXkpIHRoaXMuYXV0b1BsYXkoKTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbi5hdXRvRnVsbFNjcmVlbikgdGhpcy5hdXRvRnVsbFNjcmVlbigpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9uLmxpbWl0ZWRLZXlkb3duKSB0aGlzLmxpbWl0ZWRLZXlkb3duRnVsbFNjcmVlblBsYXkoKTsKICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveS5hZGRDYWxsYmFjaygoKSA9PiB0aGlzLnNhdmVVc2VyZGF0YSgpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gNC4gc2V0IHVwIGZ1bmN0aW9ucyB0aGF0IGFyZSBiaW5kZWQgdG8gdGhlIHZpZGVvIERPTQogICAgICAgICAgICBpZiAodGhpcy5vcHRpb24uZGJsY2xpY2spIHRoaXMuZGJsY2xpY2tGdWxsU2NyZWVuKCk7CiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbi5lbGVjdHJpYykgdGhpcy5yZWFsbG9jYXRlRWxlY3RyaWNQYW5lbCgpOwogICAgICAgICAgICBpZiAodGhpcy5vcHRpb24ub3BlZCkgdGhpcy5za2lwT1BFRCgpOwogICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2VtcHRpZWQnLCAoKSA9PiB0aGlzLnNldEZ1bmN0aW9ucyh7IHZpZGVvUmVmcmVzaDogdHJ1ZSB9KSwgeyBvbmNlOiB0cnVlIH0pOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgICAgfQoKICAgICAgICAvLyA1LiBzZXQgdXAgZnVuY3Rpb25zIHRoYXQgcmVxdWlyZSBldmVyeXRoaW5nIHRvIGJlIHJlYWR5CiAgICAgICAgYXdhaXQgdGhpcy5nZXRQbGF5ZXJNZW51KCk7CiAgICAgICAgaWYgKHRoaXMub3B0aW9uLm1lbnVGb2N1cykgdGhpcy5tZW51Rm9jdXNPblBsYXllcigpOwoKICAgICAgICAvLyA2LiBzZXQgdXAgZXhwZXJpbWVudGFsIGZ1bmN0aW9ucwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5zcGVlY2gpIHRvcC5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBlLmRldGFpbCA+IDIgJiYgdGhpcy5zcGVlY2hSZWNvZ25pdGlvbigpKTsKICAgIH0KCiAgICBhc3luYyBpbmZlck5leHRJblNlcmllcygpIHsKICAgICAgICAvLyAxLiBmaW5kIGN1cnJlbnQgdGl0bGUKICAgICAgICBjb25zdCB0aXRsZSA9IHRvcC5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaDEnKVswXS50ZXh0Q29udGVudC5yZXBsYWNlKC9cKFxkK1wpJC8sICcnKS50cmltKCk7CgogICAgICAgIC8vIDIuIGZpbmQgY3VycmVudCBlcCBudW1iZXIKICAgICAgICBjb25zdCBlcCA9IHRpdGxlLm1hdGNoKC9cZCsoPz1bXlxkXSokKS8pOwogICAgICAgIGlmICghZXApIHJldHVybiB0aGlzLnNlcmllcyA9IFtdOwoKICAgICAgICAvLyAzLiBjdXJyZW50IHRpdGxlIC0gY3VycmVudCBlcCBudW1iZXIgPT4gc2VyaWVzIGNvbW1vbiB0aXRsZQogICAgICAgIGNvbnN0IHNlcmllc1RpdGxlID0gdGl0bGUuc2xpY2UoMCwgdGl0bGUubGFzdEluZGV4T2YoZXApKS50cmltKCk7CgogICAgICAgIC8vIDQuIGZpbmQgc2libGluZyBlcCBudW1iZXIKICAgICAgICBjb25zdCBlcE51bWJlciA9IHBhcnNlSW50KGVwKTsKICAgICAgICBjb25zdCBlcFNpYmxpbmcgPSBlcFswXSA9PSAnMCcgPwogICAgICAgICAgICBbKGVwTnVtYmVyIC0gMSkudG9TdHJpbmcoKS5wYWRTdGFydChlcC5sZW5ndGgsICcwJyksIChlcE51bWJlciArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoZXAubGVuZ3RoLCAnMCcpXSA6CiAgICAgICAgICAgIFsoZXBOdW1iZXIgLSAxKS50b1N0cmluZygpLCAoZXBOdW1iZXIgKyAxKS50b1N0cmluZygpXTsKCiAgICAgICAgLy8gNS4gYnVpbGQgc2VhcmNoIGtleXdvcmRzCiAgICAgICAgLy8gICAgW3NlbGYsIHNlcmllc1RpdGxlICsgZXBTaWJsaW5nLCBlcFNpYmxpbmddCiAgICAgICAgY29uc3Qga2V5d29yZHMgPSBbdGl0bGUsIC4uLmVwU2libGluZy5tYXAoZSA9PiBzZXJpZXNUaXRsZSArIGUpLCAuLi5lcFNpYmxpbmddOwoKICAgICAgICAvLyA2LiBmaW5kIG1pZAogICAgICAgIGNvbnN0IG1pZFBhcmVudCA9IHRvcC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudS1pbmZvID4gLm5hbWUnKSB8fCB0b3AuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ItaW5mby1yYW5rJykgfHwgdG9wLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51c2VyJyk7CiAgICAgICAgaWYgKCFtaWRQYXJlbnQpIHJldHVybiB0aGlzLnNlcmllcyA9IFtdOwogICAgICAgIGNvbnN0IG1pZCA9IG1pZFBhcmVudC5jaGlsZHJlblswXS5ocmVmLm1hdGNoKC9cZCsvKVswXTsKCiAgICAgICAgLy8gNy4gZmV0Y2ggcXVlcnkKICAgICAgICBjb25zdCB2bGlzdCA9IGF3YWl0IFByb21pc2UuYWxsKGtleXdvcmRzLm1hcChrZXl3b3JkID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgY29uc3QgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHJlcS5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKChyZXEucmVzcG9uc2Uuc3RhdHVzICYmIHJlcS5yZXNwb25zZS5kYXRhLnZsaXN0KSB8fCBbXSk7CiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICByZXEub3BlbignZ2V0JywgYGh0dHBzOi8vc3BhY2UuYmlsaWJpbGkuY29tL2FqYXgvbWVtYmVyL2dldFN1Ym1pdFZpZGVvcz9taWQ9JHttaWR9JmtleXdvcmQ9JHtrZXl3b3JkfWApOwogICAgICAgICAgICByZXEucmVzcG9uc2VUeXBlID0gJ2pzb24nOwogICAgICAgICAgICByZXEuc2VuZCgpOwogICAgICAgIH0pKSk7CgogICAgICAgIC8vIDguIHZlcmlmeSBjdXJyZW50IHZpZGVvIGV4aXN0cwogICAgICAgIHZsaXN0WzBdID0gdmxpc3RbMF0uZmlsdGVyKGUgPT4gZS50aXRsZSA9PSB0aXRsZSk7CiAgICAgICAgaWYgKCF2bGlzdFswXVswXSkgeyBjb25zb2xlICYmIGNvbnNvbGUud2FybignQmlsaVBvbHlmaWxsOiBpbmZlck5leHRJblNlcmllczogY2Fubm90IGZpbmQgY3VycmVudCB2aWRlbyBpbiBtaWQgc3BhY2UnKTsgcmV0dXJuIHRoaXMuc2VyaWVzID0gW107IH0KCiAgICAgICAgLy8gOS4gaWYgc2VyaWVzVGl0bGUgKyBlcFNpYmxpbmcgcXVyZXkgaGFzIHJlYXNvbmFibGUgcmVzdWx0cyA9PiBwaWNrCiAgICAgICAgdGhpcy5zZXJpZXMgPSBbdmxpc3RbMV0uZmluZChlID0+IGUuY3JlYXRlZCA8IHZsaXN0WzBdWzBdLmNyZWF0ZWQpLCB2bGlzdFsyXS5yZXZlcnNlKCkuZmluZChlID0+IGUuY3JlYXRlZCA+IHZsaXN0WzBdWzBdLmNyZWF0ZWQpXTsKCiAgICAgICAgLy8gMTAuIGZhbGxiYWNrOiBpZiBlcFNpYmxpbmcgcXVyZXkgaGFzIHJlYXNvbmFibGUgcmVzdWx0cyA9PiBwaWNrCiAgICAgICAgaWYgKCF0aGlzLnNlcmllc1swXSkgdGhpcy5zZXJpZXNbMF0gPSB2bGlzdFszXS5maW5kKGUgPT4gZS5jcmVhdGVkIDwgdmxpc3RbMF1bMF0uY3JlYXRlZCk7CiAgICAgICAgaWYgKCF0aGlzLnNlcmllc1sxXSkgdGhpcy5zZXJpZXNbMV0gPSB2bGlzdFs0XS5yZXZlcnNlKCkuZmluZChlID0+IGUuY3JlYXRlZCA+IHZsaXN0WzBdWzBdLmNyZWF0ZWQpOwoKICAgICAgICByZXR1cm4gdGhpcy5zZXJpZXM7CiAgICB9CgogICAgYmFkZ2VXYXRjaExhdGVyKCkgewogICAgICAgIC8vIDEuIGZpbmQgd2F0Y2hsYXRlciBidXR0b24KICAgICAgICBjb25zdCBsaSA9IHRvcC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaV9tZW51X3dhdGNoTGF0ZXJfYnRuJykgfHwgdG9wLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpX21lbnVfbGF0ZXJfYnRuJykgfHwgdG9wLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpLm5hdi1pdGVtW3JlcG9ydC1pZD1wbGF5cGFnZV93YXRjaGxhdGVyXScpOwogICAgICAgIGlmICghbGkpIHJldHVybjsKCiAgICAgICAgLy8gMi4gaW5pdGlhbGl6ZSB3YXRjaGxhdGVyIHBhbmVsCiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CgogICAgICAgICAgICAvLyAzLiBoaWRlIHdhdGNobGF0ZXIgcGFuZWwKICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgICBsaS5jaGlsZHJlblsxXS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7CgogICAgICAgICAgICAvLyA0LiBsb2FkaW5nID0+IHdhaXQKICAgICAgICAgICAgaWYgKGxpLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNsYXNzTmFtZSA9PSAnbS13LWxvYWRpbmcnKSB7CiAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gY2xlYW4gdXAgd2F0Y2hsYXRlciBwYW5lbAogICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgICBsaS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2VsZWF2ZScpKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGxpLmNoaWxkcmVuWzFdLnN0eWxlLnZpc2liaWxpdHkgPSAnJywgNzAwKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gNi4xIGVtcHR5IGxpc3QgPT4gZG8gbm90aGluZwogICAgICAgICAgICAgICAgICAgIGlmIChsaS5jaGlsZHJlblsxXS5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jbGFzc05hbWUgPT0gJ25vLWRhdGEnKSByZXR1cm47CgogICAgICAgICAgICAgICAgICAgIC8vIDYuMiBvdGhlcndpc2UgPT4gYXBwZW5kIGRpdgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IHRvcC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ251bSc7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aCA+IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gJzUrJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IGxpLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGkuY2hpbGRyZW5bMF0uYXBwZW5kKGRpdik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95LmFkZENhbGxiYWNrKCgpID0+IGRpdi5yZW1vdmUoKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobGkuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF0sIHsgY2hpbGRMaXN0OiB0cnVlIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyA0LjIgb3RoZXJ3aXNlID0+IGVycm9yCiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgJ2JhZGdlV2F0Y2hMYXRlcjogY2Fubm90IGZpbmQgbS13LWxvYWRpbmcgcGFuZWwnOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShsaSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7CiAgICAgICAgbGkuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vdXNlZW50ZXInKSk7CiAgICB9CgogICAgZGJsY2xpY2tGdWxsU2NyZWVuKCkgewogICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoKSA9PgogICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tZnVsbHNjcmVlbicpLmNsaWNrKCkKICAgICAgICApOwogICAgfQoKICAgIHNjcm9sbFRvUGxheWVyKCkgewogICAgICAgIGlmICh0b3Auc2Nyb2xsWSA8IDIwMCkgdG9wLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2ZxaScpLnNjcm9sbEludG9WaWV3KCk7CiAgICB9CgogICAgc2hvd1JlY29tbWVuZFRhYigpIHsKICAgICAgICBjb25zdCBoID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItZmlsdGVyLWJ0bi1yZWNvbW1lbmQnKTsKICAgICAgICBpZiAoaCkgaC5jbGljaygpOwogICAgfQoKICAgIGFzeW5jIGdldENvdmVySW1hZ2UoKSB7IC8vIOeVquWJp+eUqOWOn+adpeeahOaWueazleWPquiDveiOt+WPluWIsOeVquWJp+eahOWwgemdou+8jOaUueeUqEFQSeWPr+S7peiOt+WPluWIsOavj+mbhueahOWwgemdogogICAgICAgIGNvbnN0IHZpZXdVcmwgPSAiaHR0cHM6Ly9hcGkuYmlsaWJpbGkuY29tL3gvd2ViLWludGVyZmFjZS92aWV3P2FpZD0iICsgYWlkOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh2aWV3VXJsKTsKICAgICAgICAgICAgY29uc3Qgdmlld0pzb24gPSBhd2FpdCByZXMuanNvbigpOwogICAgICAgICAgICByZXR1cm4gdmlld0pzb24uZGF0YS5waWMucmVwbGFjZSgiaHR0cDovLyIsICJodHRwczovLyIpCiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsCiAgICAgICAgfQogICAgfQoKICAgIHJlYWxsb2NhdGVFbGVjdHJpY1BhbmVsKCkgewogICAgICAgIC8vIDEuIGF1dG9wYXJ0ID09IHdhaXQgPT4gb2sKICAgICAgICBpZiAoIXRoaXMucGxheWVyV2luLmxvY2FsU3RvcmFnZS5iaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3MpIHJldHVybjsKICAgICAgICBpZiAoIXRoaXMucGxheWVyV2luLmxvY2FsU3RvcmFnZS5iaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3MuaW5jbHVkZXMoJyJhdXRvcGFydCI6MScpICYmICF0aGlzLm9wdGlvbi5lbGVjdHJpY1NraXBwYWJsZSkgcmV0dXJuOwoKICAgICAgICAvLyAyLiB3YWl0IGZvciBlbGVjdHJpYyBwYW5lbAogICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKSA9PiB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgLy8gMy4gY2xpY2sgc2tpcAogICAgICAgICAgICAgICAgY29uc3QgZWxlY3RyaWNQYW5lbCA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1lbGVjdHJpYy1wYW5lbCcpWzBdOwogICAgICAgICAgICAgICAgaWYgKCFlbGVjdHJpY1BhbmVsKSByZXR1cm47CiAgICAgICAgICAgICAgICBlbGVjdHJpY1BhbmVsLmNoaWxkcmVuWzJdLmNsaWNrKCk7CgogICAgICAgICAgICAgICAgLy8gNC4gYnV0IGRpc3BsYXkgYSBmYWtlIGVsZWN0cmljIHBhbmVsCiAgICAgICAgICAgICAgICBlbGVjdHJpY1BhbmVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgZWxlY3RyaWNQYW5lbC5zdHlsZS56SW5kZXggPSAyMzM7CgogICAgICAgICAgICAgICAgLy8gNS4gYW5kIHBlcmZvcm0gYSBmYWtlIGNvdW50ZG93bgogICAgICAgICAgICAgICAgbGV0IGNvdW50ZG93biA9IDU7CiAgICAgICAgICAgICAgICBjb25zdCBoID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIDUuMSB5aWVsZCB0byBuZXh0IHBhcnQgaGludAogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtaXRlbS1qdW1wJylbMF0pIGVsZWN0cmljUGFuZWwuc3R5bGUuekluZGV4ID0gJyc7CgogICAgICAgICAgICAgICAgICAgIC8vIDUuMiBjb3VudGRvd24gPiAwID0+IHVwZGF0ZSB0ZXh0Q29udGVudAogICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGRvd24gPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZWN0cmljUGFuZWwuY2hpbGRyZW5bMl0uY2hpbGRyZW5bMF0udGV4dENvbnRlbnQgPSBgMCR7Y291bnRkb3dufWA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZG93bi0tOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gNS4zIGNvdW50ZG93biA9PSAwID0+IGNsZWFuIHVwCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZWN0cmljUGFuZWwucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzIG9mIE1hcmNoIDIwMTg6CiAgICAgKiBvcGFjaXR5OiAKICAgICAqICAgYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzLnNldHRpbmdfY29uZmlnLm9wYWNpdHkKICAgICAqICAgcGVyc2lzdCA6KQogICAgICogcHJldmVudHNoYWRlOgogICAgICogICBiaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3Muc2V0dGluZ19jb25maWcucHJldmVudHNoYWRlCiAgICAgKiAgIHdpbGwgYmUgb3ZlcndyaXR0ZW4KICAgICAqICAgYmlsaWJpbGkgaGFzIGEgYnJva2VuIHNldHRpbmcgcm9hbWluZyBzY2hlbWUgd2hlcmUgdGhlIHByZXZlbnRzaGFkZSBkZWZhdWx0IGlzIGFsd2F5cyB1c2VkCiAgICAgKiB0eXBlX2JvdHRvbSwgdHlwZV9zY3JvbGwsIHR5cGVfdG9wOgogICAgICogICBiaWxpYmlsaV9wbGF5ZXJfc2V0dGluZ3Muc2V0dGluZ19jb25maWcudHlwZV8oYm90dG9tfHNjcm9sbHx0b3ApCiAgICAgKiAgIHNlc3Npb25TdG9yYWdlIE9OTFkKICAgICAqICAgbm90IHN1cmUgaWYgaXQgaXMgYSBmZWF0dXJlIG9yIGEgYnVnCiAgICAgKiBkYW5tYWt1IHN3aXRjaDoKICAgICAqICAgbm90IHN0b3JlZAogICAgICogdmlkZW9zcGVlZDoKICAgICAqICAgYmlsaWJpbGlfcGxheWVyX3NldHRpbmdzLnZpZGVvX3N0YXR1cy52aWRlb3NwZWVkCiAgICAgKiAgIHNlc3Npb25TdG9yYWdlIE9OTFkKICAgICAqICAgc2FtZSBhcyBhYm92ZQogICAgICogd2lkZXNjcmVlbjoKICAgICAqICAgc2FtZSBhcyBhYm92ZQogICAgICovCiAgICByZXN0b3JlUHJldmVudFNoYWRlKCkgewogICAgICAgIC8vIDEuIHJlc3RvcmUgb3B0aW9uIHNob3VsZCBiZSBhbiBhcnJheQogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJkYXRhLnJlc3RvcmUucHJldmVudFNoYWRlKSkgdGhpcy51c2VyZGF0YS5yZXN0b3JlLnByZXZlbnRTaGFkZSA9IFtdOwoKICAgICAgICAvLyAyLiBmaW5kIGNvcnJlc3BvbmRpbmcgb3B0aW9uIGluZGV4CiAgICAgICAgY29uc3QgaW5kZXggPSB0b3AubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnYmFuZ3VtaScpID8gMCA6IDE7CgogICAgICAgIC8vIDMuIE1VU1QgaW5pdGlhbGl6ZSBzZXR0aW5nIHBhbmVsIGJlZm9yZSBjbGljawogICAgICAgIGxldCBkYW5tYWt1X2J0biA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLWRhbm1ha3UsIC5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tZGFubWFrdS1zZXR0aW5nJyk7CiAgICAgICAgaWYgKCFkYW5tYWt1X2J0bikgcmV0dXJuOwogICAgICAgIGRhbm1ha3VfYnRuLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZW92ZXInKSk7CgogICAgICAgIC8vIDQuIHJlc3RvcmUgaWYgdHJ1ZQogICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmJpbGliaWxpLXBsYXllci12aWRlby1kYW5tYWt1LXNldHRpbmctbGVmdC1wcmV2ZW50c2hhZGUgaW5wdXQiKTsKICAgICAgICBpZiAodGhpcy51c2VyZGF0YS5yZXN0b3JlLnByZXZlbnRTaGFkZVtpbmRleF0gJiYgIWlucHV0LmNoZWNrZWQpIHsKICAgICAgICAgICAgaW5wdXQuY2xpY2soKTsKICAgICAgICB9CgogICAgICAgIC8vIDUuIGNsZWFuIHVwIHNldHRpbmcgcGFuZWwKICAgICAgICBkYW5tYWt1X2J0bi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2VvdXQnKSk7CgogICAgICAgIC8vIDYuIG1lbW9yaXplIG9wdGlvbgogICAgICAgIHRoaXMuZGVzdHJveS5hZGRDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMudXNlcmRhdGEucmVzdG9yZS5wcmV2ZW50U2hhZGVbaW5kZXhdID0gaW5wdXQuY2hlY2tlZDsKICAgICAgICB9KTsKICAgIH0KCiAgICByZXN0b3JlRGFubXVrdVN3aXRjaCgpIHsKICAgICAgICAvLyAxLiByZXN0b3JlIG9wdGlvbiBzaG91bGQgYmUgYW4gYXJyYXkKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VTd2l0Y2gpKSB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdVN3aXRjaCA9IFtdOwogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdVNjcm9sbFN3aXRjaCkpIHRoaXMudXNlcmRhdGEucmVzdG9yZS5kYW5tdWt1U2Nyb2xsU3dpdGNoID0gW107CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMudXNlcmRhdGEucmVzdG9yZS5kYW5tdWt1VG9wU3dpdGNoKSkgdGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VUb3BTd2l0Y2ggPSBbXTsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VCb3R0b21Td2l0Y2gpKSB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdUJvdHRvbVN3aXRjaCA9IFtdOwogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdUNvbG9yU3dpdGNoKSkgdGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VDb2xvclN3aXRjaCA9IFtdOwogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdVNwZWNpYWxTd2l0Y2gpKSB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdVNwZWNpYWxTd2l0Y2ggPSBbXTsKCiAgICAgICAgLy8gMi4gZmluZCBjb3JyZXNwb25kaW5nIG9wdGlvbiBpbmRleAogICAgICAgIGNvbnN0IGluZGV4ID0gdG9wLmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ2Jhbmd1bWknKSA/IDAgOiAxOwoKICAgICAgICAvLyAzLiBNVVNUIGluaXRpYWxpemUgc2V0dGluZyBwYW5lbCBiZWZvcmUgY2xpY2sKICAgICAgICBsZXQgZGFubWFrdV9idG4gPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1kYW5tYWt1LCAuYmlsaWJpbGktcGxheWVyLXZpZGVvLWRhbm1ha3Utc2V0dGluZycpOwogICAgICAgIGlmICghZGFubWFrdV9idG4pIHJldHVybjsKICAgICAgICBkYW5tYWt1X2J0bi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2VvdmVyJykpOwoKICAgICAgICAvLyA0LiByZXN0b3JlIGlmIHRydWUKICAgICAgICAvLyA0LjEgZGFubXVrdVN3aXRjaAogICAgICAgIGNvbnN0IGRhbm11a3VTd2l0Y2hJbnB1dCA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tZGFubWFrdS1zd2l0Y2ggaW5wdXQnKTsKICAgICAgICBpZiAodGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VTd2l0Y2hbaW5kZXhdICYmIGRhbm11a3VTd2l0Y2hJbnB1dC5jaGVja2VkKSB7CiAgICAgICAgICAgIGRhbm11a3VTd2l0Y2hJbnB1dC5jbGljaygpOwogICAgICAgIH0KCiAgICAgICAgLy8gNC4yIGRhbm11a3VTY3JvbGxTd2l0Y2ggZGFubXVrdVRvcFN3aXRjaCBkYW5tdWt1Qm90dG9tU3dpdGNoIGRhbm11a3VDb2xvclN3aXRjaCBkYW5tdWt1U3BlY2lhbFN3aXRjaAogICAgICAgIGNvbnN0IFtkYW5tdWt1U2Nyb2xsU3dpdGNoRGl2LCBkYW5tdWt1VG9wU3dpdGNoRGl2LCBkYW5tdWt1Qm90dG9tU3dpdGNoRGl2LCBkYW5tdWt1Q29sb3JTd2l0Y2hEaXYsIGRhbm11a3VTcGVjaWFsU3dpdGNoRGl2XSA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tZGFubWFrdS1zZXR0aW5nLWxlZnQtYmxvY2stY29udGVudCcpLmNoaWxkcmVuOwogICAgICAgIGlmICh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdVNjcm9sbFN3aXRjaFtpbmRleF0gJiYgIWRhbm11a3VTY3JvbGxTd2l0Y2hEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7CiAgICAgICAgICAgIGRhbm11a3VTY3JvbGxTd2l0Y2hEaXYuY2xpY2soKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMudXNlcmRhdGEucmVzdG9yZS5kYW5tdWt1VG9wU3dpdGNoW2luZGV4XSAmJiAhZGFubXVrdVRvcFN3aXRjaERpdi5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHsKICAgICAgICAgICAgZGFubXVrdVRvcFN3aXRjaERpdi5jbGljaygpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VCb3R0b21Td2l0Y2hbaW5kZXhdICYmICFkYW5tdWt1Qm90dG9tU3dpdGNoRGl2LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkgewogICAgICAgICAgICBkYW5tdWt1Qm90dG9tU3dpdGNoRGl2LmNsaWNrKCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdUNvbG9yU3dpdGNoW2luZGV4XSAmJiAhZGFubXVrdUNvbG9yU3dpdGNoRGl2LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkgewogICAgICAgICAgICBkYW5tdWt1Q29sb3JTd2l0Y2hEaXYuY2xpY2soKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMudXNlcmRhdGEucmVzdG9yZS5kYW5tdWt1U3BlY2lhbFN3aXRjaFtpbmRleF0gJiYgIWRhbm11a3VTcGVjaWFsU3dpdGNoRGl2LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkgewogICAgICAgICAgICBkYW5tdWt1U3BlY2lhbFN3aXRjaERpdi5jbGljaygpOwogICAgICAgIH0KCiAgICAgICAgLy8gNS4gY2xlYW4gdXAgc2V0dGluZyBwYW5lbAogICAgICAgIGRhbm1ha3VfYnRuLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdtb3VzZW91dCcpKTsKCiAgICAgICAgLy8gNi4gbWVtb3JpemUgZmluYWwgb3B0aW9uCiAgICAgICAgdGhpcy5kZXN0cm95LmFkZENhbGxiYWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VTd2l0Y2hbaW5kZXhdID0gIWRhbm11a3VTd2l0Y2hJbnB1dC5jaGVja2VkOwogICAgICAgICAgICB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdVNjcm9sbFN3aXRjaFtpbmRleF0gPSBkYW5tdWt1U2Nyb2xsU3dpdGNoRGl2LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKTsKICAgICAgICAgICAgdGhpcy51c2VyZGF0YS5yZXN0b3JlLmRhbm11a3VUb3BTd2l0Y2hbaW5kZXhdID0gZGFubXVrdVRvcFN3aXRjaERpdi5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgIHRoaXMudXNlcmRhdGEucmVzdG9yZS5kYW5tdWt1Qm90dG9tU3dpdGNoW2luZGV4XSA9IGRhbm11a3VCb3R0b21Td2l0Y2hEaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpOwogICAgICAgICAgICB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuZGFubXVrdUNvbG9yU3dpdGNoW2luZGV4XSA9IGRhbm11a3VDb2xvclN3aXRjaERpdi5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgIHRoaXMudXNlcmRhdGEucmVzdG9yZS5kYW5tdWt1U3BlY2lhbFN3aXRjaFtpbmRleF0gPSBkYW5tdWt1U3BlY2lhbFN3aXRjaERpdi5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJyk7CiAgICAgICAgfSk7CiAgICB9CgogICAgcmVzdG9yZVNwZWVkKCkgewogICAgICAgIC8vIDEuIHJlc3RvcmUgb3B0aW9uIHNob3VsZCBiZSBhbiBhcnJheQogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuc3BlZWQpKSB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuc3BlZWQgPSBbXTsKCiAgICAgICAgLy8gMi4gZmluZCBjb3JyZXNwb25kaW5nIG9wdGlvbiBpbmRleAogICAgICAgIGNvbnN0IGluZGV4ID0gdG9wLmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ2Jhbmd1bWknKSA/IDAgOiAxOwoKICAgICAgICAvLyAzLiByZXN0b3JlIGlmIGRpZmZlcmVudAogICAgICAgIGlmICh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuc3BlZWRbaW5kZXhdICYmIHRoaXMudXNlcmRhdGEucmVzdG9yZS5zcGVlZFtpbmRleF0gIT0gdGhpcy52aWRlby5wbGF5YmFja1JhdGUpIHsKICAgICAgICAgICAgdGhpcy52aWRlby5wbGF5YmFja1JhdGUgPSB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuc3BlZWRbaW5kZXhdOwogICAgICAgIH0KCiAgICAgICAgLy8gNC4gbWVtb3JpemUgb3B0aW9uCiAgICAgICAgdGhpcy5wbGF5ZXJXaW4ucGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoInZpZGVvX2JlZm9yZV9kZXN0cm95IiwgKCkgPT4gdGhpcy5zYXZlU3BlZWQoKSk7CgogICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gewogICAgICAgICAgICBjb25zdCBjaGFuZ2VTcGVlZEJ0biA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5iaWxpYmlsaS1wbGF5ZXItY29udGV4dG1lbnUtc3Vid3JhcHAiKVswXTsKICAgICAgICAgICAgaWYgKGNoYW5nZVNwZWVkQnRuICYmICFjaGFuZ2VTcGVlZEJ0bi5fbWVtb3JpemVfc3BlZWQpIHsKICAgICAgICAgICAgICAgIGNoYW5nZVNwZWVkQnRuLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gdGhpcy5zYXZlU3BlZWQoKSk7CiAgICAgICAgICAgICAgICBjaGFuZ2VTcGVlZEJ0bi5fbWVtb3JpemVfc3BlZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYmlsaWJpbGlQbGF5ZXIiKSwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7CiAgICB9CgogICAgc2F2ZVNwZWVkKCkgewogICAgICAgIGlmICh0aGlzLm9wdGlvbi5yZXN0b3JlU3BlZWQpIHsKICAgICAgICAgICAgLy8gMS4gcmVzdG9yZSBvcHRpb24gc2hvdWxkIGJlIGFuIGFycmF5CiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJkYXRhLnJlc3RvcmUuc3BlZWQpKSB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuc3BlZWQgPSBbXTsKCiAgICAgICAgICAgIC8vIDIuIGZpbmQgY29ycmVzcG9uZGluZyBvcHRpb24gaW5kZXgKICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0b3AubG9jYXRpb24uaHJlZi5pbmNsdWRlcygnYmFuZ3VtaScpID8gMCA6IDE7CgogICAgICAgICAgICAvLyAzLiBtZW1vcml6ZQogICAgICAgICAgICB0aGlzLnVzZXJkYXRhLnJlc3RvcmUuc3BlZWRbaW5kZXhdID0gdGhpcy52aWRlby5wbGF5YmFja1JhdGU7CiAgICAgICAgfQogICAgfQoKICAgIHJlc3RvcmVXaWRlU2NyZWVuKCkgewogICAgICAgIC8vIDEuIHJlc3RvcmUgb3B0aW9uIHNob3VsZCBiZSBhbiBhcnJheQogICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJkYXRhLnJlc3RvcmUud2lkZVNjcmVlbikpIHRoaXMudXNlcmRhdGEucmVzdG9yZS53aWRlU2NyZWVuID0gW107CgogICAgICAgIC8vIDIuIGZpbmQgY29ycmVzcG9uZGluZyBvcHRpb24gaW5kZXgKICAgICAgICBjb25zdCBpbmRleCA9IHRvcC5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKCdiYW5ndW1pJykgPyAwIDogMTsKCiAgICAgICAgLy8gMy4gcmVzdG9yZSBpZiBkaWZmZXJlbnQKICAgICAgICBjb25zdCBpID0gdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJpbGliaWxpLXBsYXllci12aWRlby1idG4td2lkZXNjcmVlbicpOwogICAgICAgIGlmICh0aGlzLnVzZXJkYXRhLnJlc3RvcmUud2lkZVNjcmVlbltpbmRleF0gJiYgIWkuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbG9zZWQnKSAmJiAhaS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tMjR3aWRlb24nKSkgewogICAgICAgICAgICBpLmNsaWNrKCk7CiAgICAgICAgfQoKICAgICAgICAvLyA0LiBtZW1vcml6ZSBvcHRpb24KICAgICAgICB0aGlzLmRlc3Ryb3kuYWRkQ2FsbGJhY2soKCkgPT4gewogICAgICAgICAgICB0aGlzLnVzZXJkYXRhLnJlc3RvcmUud2lkZVNjcmVlbltpbmRleF0gPSBpLmNsYXNzTGlzdC5jb250YWlucygnY2xvc2VkJykgfHwgaS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoJ2ljb24tMjR3aWRlb24nKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBsb2FkT2ZmaW5lU3VidGl0bGVzKCkgewogICAgICAgIC8vIE5PLiBOT0JPRFkgV0lMTCBORUVEIFRISVPjgIIKICAgICAgICAvLyBIaW50OiBodHRwczovL2dpdGh1Yi5jb20vamFtaWVlczIvYXNzLXRvLXZ0dAogICAgICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnOwogICAgfQoKICAgIGF1dG9SZXN1bWUoKSB7CiAgICAgICAgLy8gMS4gd2FpdCBmb3IgY2FucGxheSA9PiB3YWl0IGZvciByZXN1bWUgcG9wdXAKICAgICAgICBjb25zdCBoID0gKCkgPT4gewogICAgICAgICAgICAvLyAyLiBwYXJzZSByZXN1bWUgcG9wdXAKICAgICAgICAgICAgY29uc3Qgc3BhbiA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWJvdHRvbSBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWl0ZW0tdGV4dCBzcGFuOm50aC1jaGlsZCgyKScpOwogICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjsKICAgICAgICAgICAgY29uc3QgW21pbiwgc2VjXSA9IHNwYW4udGV4dENvbnRlbnQuc3BsaXQoJzonKTsKICAgICAgICAgICAgaWYgKCFtaW4gfHwgIXNlYykgcmV0dXJuOwoKICAgICAgICAgICAgLy8gMy4gcGFyc2UgbGFzdCBwbGF5YmFjayBwcm9ncmVzcwogICAgICAgICAgICBjb25zdCB0aW1lID0gcGFyc2VJbnQobWluKSAqIDYwICsgcGFyc2VJbnQoc2VjKTsKCiAgICAgICAgICAgIC8vIDMuMSBzdGlsbCBmYXIgZnJvbSBlbmQgPT4gcmVhc29uYWJsZSB0byByZXN1bWUgPT4gY2xpY2sKICAgICAgICAgICAgaWYgKHRpbWUgPCB0aGlzLnZpZGVvLmR1cmF0aW9uIC0gMTApIHsKICAgICAgICAgICAgICAgIC8vIDMuMS4xIGFscmVhZHkgcGxheWluZyA9PiBubyBuZWVkIHRvIHBhdXNlID0+IHNpbXBseSBqdW1wCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudmlkZW8ucGF1c2VkIHx8IHRoaXMudmlkZW8uYXV0b3BsYXkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1ib3R0b20gZGl2LmJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1pdGVtLWp1bXAnKS5jbGljaygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIDMuMS4yIHBhdXNlZCA9PiBzaG91bGQgcmVtYWluIHBhdXNlZCBhZnRlciBqdW1wID0+IGhvb2sgdmlkZW8ucGxheQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheSA9IHRoaXMudmlkZW8ucGxheTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLnBsYXkgPSAoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXN0YXJ0JykuY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5wbGF5ID0gcGxheTsKICAgICAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1ib3R0b20gZGl2LmJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1pdGVtLWp1bXAnKS5jbGljaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAzLjIgbmVhciBlbmQgPT4gc2lsZW50IHBvcHVwCiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtYm90dG9tIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtaXRlbS1jbG9zZScpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby10b2FzdC1ib3R0b20nKS5jaGlsZHJlblswXS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignY2FucGxheScsIGgsIHsgb25jZTogdHJ1ZSB9KTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudmlkZW8gJiYgdGhpcy52aWRlby5yZW1vdmVFdmVudExpc3RlbmVyICYmIHRoaXMudmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2FucGxheScsIGgpLCAzMDAwKTsKICAgIH0KCiAgICBhdXRvUGxheSgpIHsKICAgICAgICB0aGlzLnZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgaWYgKHRoaXMudmlkZW8ucGF1c2VkKSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tc3RhcnQnKS5jbGljaygpOwogICAgICAgIH0sIDApOwogICAgfQoKICAgIGF1dG9GdWxsU2NyZWVuKCkgewogICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LnZpZGVvLXN0YXRlLWZ1bGxzY3JlZW4tb2ZmJykpIHsKICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLWZ1bGxzY3JlZW4nKS5jbGljaygpOwogICAgICAgIH0KICAgIH0KCiAgICBnZXRDb2xsZWN0aW9uSWQoKSB7CiAgICAgICAgaWYgKGFpZCkgewogICAgICAgICAgICByZXR1cm4gYGF2JHthaWR9YAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICh0b3AubG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL2F2XGQrLykgfHwgdG9wLmxvY2F0aW9uLmhhc2gubWF0Y2goL2F2XGQrLykgfHwgdG9wLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iYW5ndW1pLWluZm8gYSwgLm1lZGlhLXRpdGxlJykuaHJlZikudG9TdHJpbmcoKTsKICAgIH0KCiAgICBtYXJrT1BFRFBvc2l0aW9uKGluZGV4KSB7CiAgICAgICAgY29uc3QgY29sbGVjdGlvbklkID0gdGhpcy5nZXRDb2xsZWN0aW9uSWQoKTsKICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF0pKSB0aGlzLnVzZXJkYXRhLm9wZWRbY29sbGVjdGlvbklkXSA9IFtdOwogICAgICAgIHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdW2luZGV4XSA9IHRoaXMudmlkZW8uY3VycmVudFRpbWU7CiAgICAgICAgdGhpcy5zYXZlVXNlcmRhdGEoKTsKICAgIH0KCiAgICBjbGVhck9QRURQb3NpdGlvbigpIHsKICAgICAgICBjb25zdCBjb2xsZWN0aW9uSWQgPSB0aGlzLmdldENvbGxlY3Rpb25JZCgpOwogICAgICAgIHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdID0gdW5kZWZpbmVkOwogICAgfQoKICAgIHNraXBPUEVEKCkgewogICAgICAgIC8vIDEuIGZpbmQgY29ycmVzcG9uZGluZyB1c2VyZGF0YQogICAgICAgIGNvbnN0IGNvbGxlY3Rpb25JZCA9IHRoaXMuZ2V0Q29sbGVjdGlvbklkKCk7CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdKSB8fCAhdGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF0ubGVuZ3RoKSByZXR1cm47CgogICAgICAgIC8qKgogICAgICAgICAqIHN0cnVjdHVyZToKICAgICAgICAgKiAgIGxpc3RlbiBmb3IgdGltZSB1cGRhdGUgLT4gfHwgPC0gc2tpcCAtPiB8fCA8LSByZW1vdmUgZXZlbnQgbGlzdGVubmVyCiAgICAgICAgICovCgogICAgICAgIC8vIDIuIHwgMCA8LSBvcGVuaW5nIC0+IG9wZWRbY29sbGVjdGlvbklkXVsxXSB8IDwtIHBsYXkgLS0KICAgICAgICBpZiAoIXRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzBdICYmIHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzFdKSB7CiAgICAgICAgICAgIGNvbnN0IGggPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWRlby5jdXJyZW50VGltZSA+PSB0aGlzLnVzZXJkYXRhLm9wZWRbY29sbGVjdGlvbklkXVsxXSAtIDEpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCBoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW8uY3VycmVudFRpbWUgPSB0aGlzLnVzZXJkYXRhLm9wZWRbY29sbGVjdGlvbklkXVsxXTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhpbnRJbmZvKCdCaWxpUG9seWZpbGw6IOW3sui3s+i/h+eJh+WktCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3RpbWV1cGRhdGUnLCBoKTsKICAgICAgICB9CgogICAgICAgIC8vIDMuIHwgPC0gcGxheSAtPiB8IG9wZWRbY29sbGVjdGlvbklkXVswXSA8LSBvcGVuaW5nIC0+IG9wZWRbY29sbGVjdGlvbklkXVsxXSB8IDwtIHBsYXkgLS0KICAgICAgICBpZiAodGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF1bMF0gJiYgdGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF1bMV0pIHsKICAgICAgICAgICAgY29uc3QgaCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID49IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzFdIC0gMSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52aWRlby5jdXJyZW50VGltZSA+IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5jdXJyZW50VGltZSA9IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzFdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oJ0JpbGlQb2x5ZmlsbDog5bey6Lez6L+H54mH5aS0Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGgpOwogICAgICAgIH0KCiAgICAgICAgLy8gNC4gLS0gcGxheSAtPiB8IG9wZWRbY29sbGVjdGlvbklkXVsyXSA8LSBlbmRpbmcgLT4gZW5kIHwKICAgICAgICBpZiAodGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF1bMl0gJiYgIXRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzNdKSB7CiAgICAgICAgICAgIGNvbnN0IGggPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWRlby5jdXJyZW50VGltZSA+PSB0aGlzLnZpZGVvLmR1cmF0aW9uIC0gMSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52aWRlby5jdXJyZW50VGltZSA+IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzJdKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5jdXJyZW50VGltZSA9IHRoaXMudmlkZW8uZHVyYXRpb247CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaW50SW5mbygnQmlsaVBvbHlmaWxsOiDlt7Lot7Pov4fniYflsL4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgaCk7CiAgICAgICAgfQoKICAgICAgICAvLyA1Li0tIHBsYXkgLT4gfCBvcGVkW2NvbGxlY3Rpb25JZF1bMl0gPC0gZW5kaW5nIC0+IG9wZWRbY29sbGVjdGlvbklkXVszXSB8IDwtIHBsYXkgLT4gZW5kIHwKICAgICAgICBpZiAodGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF1bMl0gJiYgdGhpcy51c2VyZGF0YS5vcGVkW2NvbGxlY3Rpb25JZF1bM10pIHsKICAgICAgICAgICAgY29uc3QgaCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID49IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzNdIC0gMSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy52aWRlby5jdXJyZW50VGltZSA+IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzJdKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5jdXJyZW50VGltZSA9IHRoaXMudXNlcmRhdGEub3BlZFtjb2xsZWN0aW9uSWRdWzNdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oJ0JpbGlQb2x5ZmlsbDog5bey6Lez6L+H54mH5bC+Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGgpOwogICAgICAgIH0KICAgIH0KCiAgICBzZXRWaWRlb1NwZWVkKHNwZWVkKSB7CiAgICAgICAgaWYgKHNwZWVkIDwgMCB8fCBzcGVlZCA+IDEwKSByZXR1cm47CiAgICAgICAgdGhpcy52aWRlby5wbGF5YmFja1JhdGUgPSBzcGVlZDsKICAgICAgICB0aGlzLnNhdmVTcGVlZCgpOwogICAgfQoKICAgIGZvY3VzT25QbGF5ZXIoKSB7CiAgICAgICAgbGV0IHBsYXllciA9IHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci12aWRlby1wcm9ncmVzcycpWzBdOwogICAgICAgIGlmIChwbGF5ZXIpIHBsYXllci5jbGljaygpOwogICAgfQoKICAgIG1lbnVGb2N1c09uUGxheWVyKCkgewogICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtY29udGFpbmVyIGJsYWNrJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PgogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZm9jdXNPblBsYXllcigpLCAwKQogICAgICAgICk7CiAgICB9CgogICAgbGltaXRlZEtleWRvd25GdWxsU2NyZWVuUGxheSgpIHsKICAgICAgICAvLyAxLiBsaXN0ZW4gZm9yIGFueSB1c2VyIGd1ZXN0dXJlCiAgICAgICAgY29uc3QgaCA9IGUgPT4gewogICAgICAgICAgICAvLyAyLiBub3QgcmVhbCB1c2VyIGd1ZXN0dXJlID0+IGRvIG5vdGhpbmcKICAgICAgICAgICAgaWYgKCFlLmlzVHJ1c3RlZCkgcmV0dXJuOwoKICAgICAgICAgICAgLy8gMy4ga2V5IGRvd24gaXMgRW50ZXIgPT4gZnVsbCBzY3JlZW4gcGxheQogICAgICAgICAgICBpZiAoZS5rZXkgPT0gJ0VudGVyJykgewogICAgICAgICAgICAgICAgLy8gMy4xIGZ1bGwgc2NyZWVuCiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi52aWRlby1zdGF0ZS1mdWxsc2NyZWVuLW9mZicpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLWZ1bGxzY3JlZW4nKS5jbGljaygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIDMuMiBwbGF5CiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWRlby5wYXVzZWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWRlby5yZWFkeVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1zdGFydCcpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tc3RhcnQnKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICB9LCB7IG9uY2U6IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyA0LiBjbGVhbiB1cCBsaXN0ZW5lcgogICAgICAgICAgICB0b3AuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGgpOwogICAgICAgICAgICB0b3AuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoKTsKICAgICAgICB9OwogICAgICAgIHRvcC5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaCk7CiAgICAgICAgdG9wLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaCk7CiAgICB9CgogICAgc3BlZWNoUmVjb2duaXRpb24oKSB7CiAgICAgICAgLy8gMS4gcG9seWZpbGwKICAgICAgICBjb25zdCBTcGVlY2hSZWNvZ25pdGlvbiA9IHRvcC5TcGVlY2hSZWNvZ25pdGlvbiB8fCB0b3Aud2Via2l0U3BlZWNoUmVjb2duaXRpb247CiAgICAgICAgY29uc3QgU3BlZWNoR3JhbW1hckxpc3QgPSB0b3AuU3BlZWNoR3JhbW1hckxpc3QgfHwgdG9wLndlYmtpdFNwZWVjaEdyYW1tYXJMaXN0OwoKICAgICAgICAvLyAyLiBnaXZlIGhpbnQKICAgICAgICBhbGVydCgnWWFoYWhhISBZb3UgZm91bmQgbWUhXG5CaWxpVHdpbuaUr+aMgeeahOivremfs+WRveS7pDog5pKt5pS+IOaaguWBnCDlhajlsY8g5YWz6ZetIOWKoOmAnyDlh4/pgJ8g5LiL5LiA6ZuGXG5DaHJvbWUgbWF5IHN1cHBvcnQgQ2FudG9uZXNlIG9yIEhha2thIGFzIHdlbGwuIFNlZSBCaWxpUG9seWZpbGw6OnNwZWVjaFJlY29nbml0aW9uLicpOwogICAgICAgIGlmICghU3BlZWNoUmVjb2duaXRpb24gfHwgIVNwZWVjaEdyYW1tYXJMaXN0KSBhbGVydCgn5rWP6KeI5Zmo5aSq5pen5ZWmfuW9qeibi+ayoeazlei/kOihjH4nKTsKCiAgICAgICAgLy8gMy4gc2V0dXAgcmVjb2duaXRpb24KICAgICAgICBjb25zdCBwbGF5ZXIgPSBbJ+aSreaUvicsICfmmoLlgZwnLCAn5YWo5bGPJywgJ+WFs+mXrScsICfliqDpgJ8nLCAn5YeP6YCfJywgJ+S4i+S4gOmbhiddOwogICAgICAgIGNvbnN0IGdyYW1tYXIgPSAnI0pTR0YgVjEuMDsgZ3JhbW1hciBwbGF5ZXI7IHB1YmxpYyA8cGxheWVyPiA9ICcgKyBwbGF5ZXIuam9pbignIHwgJykgKyAnIDsnOwogICAgICAgIGNvbnN0IHJlY29nbml0aW9uID0gbmV3IFNwZWVjaFJlY29nbml0aW9uKCk7CiAgICAgICAgY29uc3Qgc3BlZWNoUmVjb2duaXRpb25MaXN0ID0gbmV3IFNwZWVjaEdyYW1tYXJMaXN0KCk7CiAgICAgICAgc3BlZWNoUmVjb2duaXRpb25MaXN0LmFkZEZyb21TdHJpbmcoZ3JhbW1hciwgMSk7CiAgICAgICAgcmVjb2duaXRpb24uZ3JhbW1hcnMgPSBzcGVlY2hSZWNvZ25pdGlvbkxpc3Q7CiAgICAgICAgLy8gY21uOiBNYW5kYXJpbihQdXRvbmdodWEpLCB5dWU6IENhbnRvbmVzZSwgaGFrOiBIYWtrYQogICAgICAgIC8vIFNlZSBodHRwczovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9sYW5ndWFnZS1zdWJ0YWctcmVnaXN0cnkvbGFuZ3VhZ2Utc3VidGFnLXJlZ2lzdHJ5CiAgICAgICAgcmVjb2duaXRpb24ubGFuZyA9ICdjbW4nOwogICAgICAgIHJlY29nbml0aW9uLmNvbnRpbnVvdXMgPSB0cnVlOwogICAgICAgIHJlY29nbml0aW9uLmludGVyaW1SZXN1bHRzID0gZmFsc2U7CiAgICAgICAgcmVjb2duaXRpb24ubWF4QWx0ZXJuYXRpdmVzID0gMTsKICAgICAgICByZWNvZ25pdGlvbi5zdGFydCgpOwogICAgICAgIHJlY29nbml0aW9uLm9ucmVzdWx0ID0gZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGxhc3QgPSBlLnJlc3VsdHMubGVuZ3RoIC0gMTsKICAgICAgICAgICAgY29uc3QgdHJhbnNjcmlwdCA9IGUucmVzdWx0c1tsYXN0XVswXS50cmFuc2NyaXB0OwogICAgICAgICAgICBzd2l0Y2ggKHRyYW5zY3JpcHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ+aSreaUvic6CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlkZW8ucGF1c2VkKSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tc3RhcnQnKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oYEJpbGlQb2x5ZmlsbDog6K+t6Z+zOuaSreaUvmApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn5pqC5YGcJzoKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudmlkZW8ucGF1c2VkKSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tc3RhcnQnKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oYEJpbGlQb2x5ZmlsbDog6K+t6Z+zOuaaguWBnGApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn5YWo5bGPJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmlsaWJpbGlQbGF5ZXIgZGl2LmJpbGliaWxpLXBsYXllci12aWRlby1idG4tZnVsbHNjcmVlbicpLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaW50SW5mbyhgQmlsaVBvbHlmaWxsOiDor63pn7M65YWo5bGPYCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICflhbPpl60nOgogICAgICAgICAgICAgICAgICAgIHRvcC5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn5Yqg6YCfJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFZpZGVvU3BlZWQoMik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaW50SW5mbyhgQmlsaVBvbHlmaWxsOiDor63pn7M65Yqg6YCfYCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICflh4/pgJ8nOgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlkZW9TcGVlZCgwLjUpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaGludEluZm8oYEJpbGlQb2x5ZmlsbDog6K+t6Z+zOuWHj+mAn2ApOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn5LiL5LiA6ZuGJzoKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdlbmRlZCcpKTsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaW50SW5mbyhgQmlsaVBvbHlmaWxsOiDor63pn7M6IiR7dHJhbnNjcmlwdH0i77yfYCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUgPT0gIm9iamVjdCIgJiYgY29uc29sZS5sb2coZS5yZXN1bHRzKTsKICAgICAgICAgICAgdHlwZW9mIGNvbnNvbGUgPT0gIm9iamVjdCIgJiYgY29uc29sZS5sb2coYHRyYW5zY3JpcHQ6JHt0cmFuc2NyaXB0fSBjb25maWRlbmNlOiR7ZS5yZXN1bHRzWzBdWzBdLmNvbmZpZGVuY2V9YCk7CiAgICAgICAgfTsKICAgIH0KCiAgICBzdWJzdGl0dWRlRnVsbHNjcmVlblBsYXllcihvcHRpb24pIHsKICAgICAgICAvLyAxLiBjaGVjayBwYXJhbQogICAgICAgIGlmICghb3B0aW9uKSB0aHJvdyAndXNhZ2U6IHN1YnN0aXR1ZGVGdWxsc2NyZWVuUGxheWVyKHtjaWQsIGFpZFssIHBdWywgLi4ub3RoZXJPcHRpb25zXX0pJzsKICAgICAgICBpZiAoIW9wdGlvbi5jaWQpIHRocm93ICdwbGF5ZXIgaW5pdDogY2lkIG1pc3NpbmcnOwogICAgICAgIGlmICghb3B0aW9uLmFpZCkgdGhyb3cgJ3BsYXllciBpbml0OiBhaWQgbWlzc2luZyc7CgogICAgICAgIC8vIDIuIGhvb2sgZXhpdEZ1bGxzY3JlZW4KICAgICAgICBjb25zdCBwbGF5ZXJEb2MgPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudDsKICAgICAgICBjb25zdCBob29rID0gW3BsYXllckRvYy53ZWJraXRFeGl0RnVsbHNjcmVlbiwgcGxheWVyRG9jLm1vekV4aXRGdWxsU2NyZWVuLCBwbGF5ZXJEb2MubXNFeGl0RnVsbHNjcmVlbiwgcGxheWVyRG9jLmV4aXRGdWxsc2NyZWVuXTsKICAgICAgICBwbGF5ZXJEb2Mud2Via2l0RXhpdEZ1bGxzY3JlZW4gPSBwbGF5ZXJEb2MubW96RXhpdEZ1bGxTY3JlZW4gPSBwbGF5ZXJEb2MubXNFeGl0RnVsbHNjcmVlbiA9IHBsYXllckRvYy5leGl0RnVsbHNjcmVlbiA9ICgpID0+IHsgfTsKCiAgICAgICAgLy8gMy4gc3Vic3RpdHVkZSBwbGF5ZXIKICAgICAgICB0aGlzLnBsYXllcldpbi5wbGF5ZXIuZGVzdHJveSgpOwogICAgICAgIHRoaXMucGxheWVyV2luLnBsYXllciA9IG5ldyBiaWxpYmlsaVBsYXllcihvcHRpb24pOwogICAgICAgIGlmIChvcHRpb24ucCkgdGhpcy5wbGF5ZXJXaW4uY2FsbEFwcG9pbnRQYXJ0KG9wdGlvbi5wKTsKCiAgICAgICAgLy8gNC4gcmVzdG9yZSBleGl0RnVsbHNjcmVlbgogICAgICAgIFtwbGF5ZXJEb2Mud2Via2l0RXhpdEZ1bGxzY3JlZW4sIHBsYXllckRvYy5tb3pFeGl0RnVsbFNjcmVlbiwgcGxheWVyRG9jLm1zRXhpdEZ1bGxzY3JlZW4sIHBsYXllckRvYy5leGl0RnVsbHNjcmVlbl0gPSBob29rOwogICAgfQoKICAgIGFzeW5jIGdldFBsYXllclZpZGVvKCkgewogICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKS5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlkZW8gPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKVswXTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMudmlkZW8gPSB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKVswXSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxpYmlsaVBsYXllcicpLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIGFzeW5jIGdldFBsYXllck1lbnUoKSB7CiAgICAgICAgaWYgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtY29udGFpbmVyIGJsYWNrJykubGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LWNvbnRhaW5lciBibGFjaycpWzBdOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtY29udGFpbmVyIGJsYWNrJykubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LWNvbnRhaW5lciBibGFjaycpWzBdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpbGliaWxpUGxheWVyJyksIHsgY2hpbGRMaXN0OiB0cnVlIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgYXN5bmMgZ2V0V2F0Y2hMYXRlckJ0bigpIHsKICAgICAgICBsZXQgbGkgPSB0b3AuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lfbWVudV93YXRjaExhdGVyX2J0bicpIHx8IHRvcC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaV9tZW51X2xhdGVyX2J0bicpIHx8IHRvcC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdsaS5uYXYtaXRlbVtyZXBvcnQtaWQ9cGxheXBhZ2Vfd2F0Y2hsYXRlcl0nKTsKCiAgICAgICAgaWYgKCFkb2N1bWVudC5jb29raWUuaW5jbHVkZXMoIkRlZGVVc2VySUQiKSkgcmV0dXJuOyAvLyDmnKrnmbvlvZUKCiAgICAgICAgaWYgKCFsaSkgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBsaSA9IHRvcC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaV9tZW51X3dhdGNoTGF0ZXJfYnRuJykgfHwgdG9wLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpX21lbnVfbGF0ZXJfYnRuJykgfHwgdG9wLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpLm5hdi1pdGVtW3JlcG9ydC1pZD1wbGF5cGFnZV93YXRjaGxhdGVyXScpOwogICAgICAgICAgICAgICAgICAgIGlmIChsaSkgewogICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobGkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsaWJpbGlQbGF5ZXInKSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBnZXRXaWRlU2NyZWVuQnRuKCkgewogICAgICAgIGxldCBsaSA9IHRvcC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi13aWRlc2NyZWVuJyk7CgogICAgICAgIGlmICghbGkpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGkgPSB0b3AuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJpbGliaWxpLXBsYXllci12aWRlby1idG4td2lkZXNjcmVlbicpOwogICAgICAgICAgICAgICAgICAgIGlmIChsaSkgewogICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobGkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsaWJpbGlQbGF5ZXInKSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBzdGF0aWMgYXN5bmMgb3Blbk1pbmltaXplZFBsYXllcihvcHRpb24gPSB7IGNpZDogdG9wLmNpZCwgYWlkOiB0b3AuYWlkLCBwbGF5ZXJXaW46IHRvcCB9KSB7CiAgICAgICAgLy8gMS4gY2hlY2sgcGFyYW0KICAgICAgICBpZiAoIW9wdGlvbikgdGhyb3cgJ3VzYWdlOiBvcGVuTWluaW1pemVkUGxheWVyKHtjaWRbLCBhaWRdfSknOwogICAgICAgIGlmICghb3B0aW9uLmNpZCkgdGhyb3cgJ3BsYXllciBpbml0OiBjaWQgbWlzc2luZyc7CiAgICAgICAgaWYgKCFvcHRpb24uYWlkKSBvcHRpb24uYWlkID0gdG9wLmFpZDsKICAgICAgICBpZiAoIW9wdGlvbi5wbGF5ZXJXaW4pIG9wdGlvbi5wbGF5ZXJXaW4gPSB0b3A7CgogICAgICAgIC8vIDIuIG9wZW4gYSBuZXcgd2luZG93CiAgICAgICAgY29uc3QgbWluaVBsYXllcldpbiA9IHRvcC5vcGVuKGAvL3d3dy5iaWxpYmlsaS5jb20vYmxhY2tib2FyZC9odG1sNXBsYXllci5odG1sP2NpZD0ke29wdGlvbi5jaWR9JmFpZD0ke29wdGlvbi5haWR9JmNyb3NzRG9tYWluPSR7dG9wLmRvY3VtZW50LmRvbWFpbiAhPSAnd3d3LmJpbGliaWxpLmNvbScgPyAndHJ1ZScgOiAnJ31gLCB1bmRlZmluZWQsICcgJyk7CgogICAgICAgIC8vIDMuIGJhbmd1bWkgPT4gcmVxdWVzdCByZWZlcnJlciBtdXN0IG1hdGNoID0+IGhvb2sgcmVzcG9uc2Ugb2YgY3VycmVudCBwYWdlCiAgICAgICAgY29uc3QgcmVzID0gdG9wLmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ2Jhbmd1bWknKSAmJiBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgY29uc3QganEgPSBvcHRpb24ucGxheWVyV2luLmpRdWVyeTsKICAgICAgICAgICAgY29uc3QgX2FqYXggPSBqcS5hamF4OwoKICAgICAgICAgICAganEuYWpheCA9IGZ1bmN0aW9uIChhLCBjKSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGMgPT09ICdvYmplY3QnKSB7IGlmICh0eXBlb2YgYSA9PT0gJ3N0cmluZycpIGMudXJsID0gYTsgYSA9IGM7IGMgPSB1bmRlZmluZWQ7IH0gICAgICAgICAgICAgICAgaWYgKGEudXJsLmluY2x1ZGVzKCdpbnRlcmZhY2UuYmlsaWJpbGkuY29tL3YyL3BsYXl1cmw/JykgfHwgYS51cmwuaW5jbHVkZXMoJ2Jhbmd1bWkuYmlsaWJpbGkuY29tL3BsYXllci93ZWJfYXBpL3YyL3BsYXl1cmw/JykpIHsKICAgICAgICAgICAgICAgICAgICBhLnN1Y2Nlc3MgPSByZXNvbHZlOwogICAgICAgICAgICAgICAgICAgIGpxLmFqYXggPSBfYWpheDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBfYWpheC5jYWxsKGpxLCBhLCBjKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb3B0aW9uLnBsYXllcldpbi5wbGF5ZXIucmVsb2FkQWNjZXNzKCk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIDQuIHdhaXQgZm9yIG1pbmlQbGF5ZXJXaW4gbG9hZAogICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAvLyA0LjEgY2hlY2sgZm9yIGV2ZXJ5NTAwbXMKICAgICAgICAgICAgY29uc3QgaSA9IHNldEludGVydmFsKCgpID0+IG1pbmlQbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpbGliaWxpUGxheWVyJykgJiYgcmVzb2x2ZSgpLCA1MDApOwoKICAgICAgICAgICAgLy8gNC4yIGV4cGxpY3QgZXZlbnQgbGlzdGVuZXIKICAgICAgICAgICAgbWluaVBsYXllcldpbi5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZSwgeyBvbmNlOiB0cnVlIH0pOwoKICAgICAgICAgICAgLy8gNC4zIHRpbWVvdXQgYWZ0ZXIgNnMKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGkpOwogICAgICAgICAgICAgICAgbWluaVBsYXllcldpbi5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZSk7CiAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0sIDYwMDApOwogICAgICAgIH0pOwogICAgICAgIC8vIDQuNCBjYW5ub3QgZmluZCBiaWxpYmlsaVBsYXllciA9PiBsb2FkIHRpbWVvdXQKICAgICAgICBjb25zdCBwbGF5ZXJEaXYgPSBtaW5pUGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxpYmlsaVBsYXllcicpOwogICAgICAgIGlmICghcGxheWVyRGl2KSB7IGNvbnNvbGUud2Fybignb3Blbk1pbmltaXplZFBsYXllcjogZG9jdW1lbnQgbG9hZCB0aW1lb3V0Jyk7IHJldHVybjsgfQoKICAgICAgICAvLyA1LiBuZWVkIHRvIGluamVjdCByZXNwb25zZSA9PiBuZXcgYmlsaWJpbGlQbGF5ZXIKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgY29uc3QganEgPSBtaW5pUGxheWVyV2luLmpRdWVyeTsKICAgICAgICAgICAgICAgIGNvbnN0IF9hamF4ID0ganEuYWpheDsKCiAgICAgICAgICAgICAgICBqcS5hamF4ID0gZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGMgPT09ICdvYmplY3QnKSB7IGlmICh0eXBlb2YgYSA9PT0gJ3N0cmluZycpIGMudXJsID0gYTsgYSA9IGM7IGMgPSB1bmRlZmluZWQ7IH0gICAgICAgICAgICAgICAgICAgIGlmIChhLnVybC5pbmNsdWRlcygnaW50ZXJmYWNlLmJpbGliaWxpLmNvbS92Mi9wbGF5dXJsPycpIHx8IGEudXJsLmluY2x1ZGVzKCdiYW5ndW1pLmJpbGliaWxpLmNvbS9wbGF5ZXIvd2ViX2FwaS92Mi9wbGF5dXJsPycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGEuc3VjY2VzcyhyZXMpOwogICAgICAgICAgICAgICAgICAgICAgICBqcS5hamF4ID0gX2FqYXg7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYWpheC5jYWxsKGpxLCBhLCBjKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbWluaVBsYXllcldpbi5wbGF5ZXIgPSBuZXcgbWluaVBsYXllcldpbi5iaWxpYmlsaVBsYXllcih7IGNpZDogb3B0aW9uLmNpZCwgYWlkOiBvcHRpb24uYWlkIH0pOwogICAgICAgICAgICAgICAgLy8gbWluaVBsYXllcldpbi5ldmFsKGBwbGF5ZXIgPSBuZXcgYmlsaWJpbGlQbGF5ZXIoeyBjaWQ6ICR7b3B0aW9uLmNpZH0sIGFpZDogJHtvcHRpb24uYWlkfSB9KWApOwogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYHBsYXllciA9IG5ldyBiaWxpYmlsaVBsYXllcih7IGNpZDogJHtvcHRpb24uY2lkfSwgYWlkOiAke29wdGlvbi5haWR9IH0pYCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gNi4gIHdhaXQgZm9yIGJpbGliaWxpUGxheWVyIGxvYWQKICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgaWYgKG1pbmlQbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLWZ1bGxzY3JlZW4nKSkgcmVzb2x2ZSgpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChtaW5pUGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1mdWxsc2NyZWVuJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBsYXllckRpdiwgeyBjaGlsZExpc3Q6IHRydWUgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgLy8gNy4gYWRvcHQgZnVsbCBzY3JlZW4gcGxheWVyIHN0eWxlIHdpdGhvdXIgcmVhbGx5IHRyaWdnZXIgZnVsbCBzY3JlZW4KICAgICAgICAvLyA3LjEgaG9vayByZXF1ZXN0RnVsbHNjcmVlbgogICAgICAgIGNvbnN0IGhvb2sgPSBbcGxheWVyRGl2LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuLCBwbGF5ZXJEaXYubW96UmVxdWVzdEZ1bGxTY3JlZW4sIHBsYXllckRpdi5tc1JlcXVlc3RGdWxsc2NyZWVuLCBwbGF5ZXJEaXYucmVxdWVzdEZ1bGxzY3JlZW5dOwogICAgICAgIHBsYXllckRpdi53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiA9IHBsYXllckRpdi5tb3pSZXF1ZXN0RnVsbFNjcmVlbiA9IHBsYXllckRpdi5tc1JlcXVlc3RGdWxsc2NyZWVuID0gcGxheWVyRGl2LnJlcXVlc3RGdWxsc2NyZWVuID0gKCkgPT4geyB9OwoKICAgICAgICAvLyA3LjIgYWRvcHQgZnVsbCBzY3JlZW4gcGxheWVyIHN0eWxlCiAgICAgICAgaWYgKG1pbmlQbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGliaWxpUGxheWVyIGRpdi52aWRlby1zdGF0ZS1mdWxsc2NyZWVuLW9mZicpKQogICAgICAgICAgICBtaW5pUGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaWxpYmlsaVBsYXllciBkaXYuYmlsaWJpbGktcGxheWVyLXZpZGVvLWJ0bi1mdWxsc2NyZWVuJykuY2xpY2soKTsKCiAgICAgICAgLy8gNy4zIHJlc3RvcmUgcmVxdWVzdEZ1bGxzY3JlZW4KICAgICAgICBbcGxheWVyRGl2LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuLCBwbGF5ZXJEaXYubW96UmVxdWVzdEZ1bGxTY3JlZW4sIHBsYXllckRpdi5tc1JlcXVlc3RGdWxsc2NyZWVuLCBwbGF5ZXJEaXYucmVxdWVzdEZ1bGxzY3JlZW5dID0gaG9vazsKICAgIH0KCiAgICBzdGF0aWMgYXN5bmMgYmlsaWdhbWVJbml0KCkgewogICAgICAgIGNvbnN0IGdhbWVfaWQgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9pZD0oXGQrKS8pWzFdOwogICAgICAgIGNvbnN0IGFwaV91cmwgPSBgaHR0cHM6Ly9saW5lMS1oNS1wYy1hcGkuYmlsaWdhbWUuY29tL2dhbWUvZGV0YWlsL2dhbWVpbmZvP2dhbWVfYmFzZV9pZD0ke2dhbWVfaWR9YDsKCiAgICAgICAgY29uc3QgcmVxID0gYXdhaXQgZmV0Y2goYXBpX3VybCwgeyBjcmVkZW50aWFsczogJ2luY2x1ZGUnIH0pOwogICAgICAgIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVxLmpzb24oKSkuZGF0YTsKCiAgICAgICAgY29uc3QgYWlkID0gZGF0YS52aWRlb191cmw7CiAgICAgICAgY29uc3QgdmlkZW9fdXJsID0gYGh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS92aWRlby9hdiR7YWlkfWA7CgogICAgICAgIGNvbnN0IHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIudGFiLWhlYWQiKTsKICAgICAgICBjb25zdCB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgdGFiLmhyZWYgPSB2aWRlb191cmw7CiAgICAgICAgdGFiLnRleHRDb250ZW50ID0gIuafpeeci+inhumikSI7CiAgICAgICAgdGFiLnRhcmdldCA9ICJfYmxhbmsiOwogICAgICAgIHRhYnMuYXBwZW5kQ2hpbGQodGFiKTsKICAgIH0KCiAgICBzdGF0aWMgc2hvd0Jhbmd1bWlDb3ZlckltYWdlKCkgewogICAgICAgIGNvbnN0IGltZ0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubWVkaWEtcHJldmlldyBpbWciKTsKICAgICAgICBpZiAoIWltZ0VsZW1lbnQpIHJldHVybjsKCiAgICAgICAgaW1nRWxlbWVudC5zdHlsZS5jdXJzb3IgPSAicG9pbnRlciI7CgogICAgICAgIGltZ0VsZW1lbnQub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgY292ZXJfaW1nID0gaW1nRWxlbWVudC5zcmMubWF0Y2goLy4rP1wuKHBuZ3xqcGcpLylbMF07CiAgICAgICAgICAgIHRvcC53aW5kb3cub3Blbihjb3Zlcl9pbWcsICdfYmxhbmsnKTsKICAgICAgICB9OwogICAgfQoKICAgIHN0YXRpYyBzZWNvbmRUb1JlYWRhYmxlKHMpIHsKICAgICAgICBpZiAocyA+IDYwKSByZXR1cm4gYCR7cGFyc2VJbnQocyAvIDYwKX3liIYke3BhcnNlSW50KHMgJSA2MCl956eSYDsKICAgICAgICBlbHNlIHJldHVybiBgJHtwYXJzZUludChzICUgNjApfeenkmA7CiAgICB9CgogICAgc3RhdGljIGNsZWFyQWxsVXNlcmRhdGEocGxheWVyV2luID0gdG9wKSB7CiAgICAgICAgaWYgKHBsYXllcldpbi5HTV9zZXRWYWx1ZSkgcmV0dXJuIEdNX3NldFZhbHVlKCdiaWxpUG9seWZpbGwnLCAnJyk7CiAgICAgICAgaWYgKHBsYXllcldpbi5HTS5zZXRWYWx1ZSkgcmV0dXJuIEdNLnNldFZhbHVlKCdiaWxpUG9seWZpbGwnLCAnJyk7CiAgICAgICAgcGxheWVyV2luLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdiaWxpUG9seWZpbGwnKTsKICAgIH0KCiAgICBzdGF0aWMgZ2V0IG9wdGlvbkRlc2NyaXB0aW9ucygpIHsKICAgICAgICByZXR1cm4gWwogICAgICAgICAgICBbJ2JldGFiZXRhJywgJ+WinuW8uue7hOS7tuaAu+W8gOWFsyA8LS0tLS0tLS0t5pu05Yqg5oeS5b6X5rWL6K+V5LqG77yM5Y+N5q2j5Lul5ZCOQuermeS5n+S8muiHquW3seaPkOS+m+i/meS6m+WKn+iDveOAguS5n+iuuOWQp+OAgiddLAoKICAgICAgICAgICAgLy8gMS4gdXNlciBpbnRlcmZhY2UKICAgICAgICAgICAgWydiYWRnZVdhdGNoTGF0ZXInLCAn56iN5ZCO5YaN55yL5re75Yqg5pWw5a2X6KeS5qCHJ10sCiAgICAgICAgICAgIFsncmVjb21tZW5kJywgJ+W8ueW5leWIl+ihqOaNouaIkOebuOWFs+inhumikSddLAogICAgICAgICAgICBbJ2VsZWN0cmljJywgJ+aVtOWQiOWFheeUteamnOS4juaNolDlgJLorqHml7YnXSwKICAgICAgICAgICAgWydlbGVjdHJpY1NraXBwYWJsZScsICfot7Pov4flhYXnlLXmppwnLCAnZGlzYWJsZWQnXSwKCiAgICAgICAgICAgIC8vIDIuIGF1dG9tYXRpb24KICAgICAgICAgICAgWydzY3JvbGwnLCAn6Ieq5Yqo5rua5Yqo5Yiw5pKt5pS+5ZmoJ10sCiAgICAgICAgICAgIFsnZm9jdXMnLCAn6Ieq5Yqo6IGa54Sm5Yiw5pKt5pS+5ZmoKOaWsOmhtemdouebtOaOpeaMieepuuagvOS8muaSreaUvuiAjOS4jeaYr+WQkeS4i+a7muWKqCknXSwKICAgICAgICAgICAgWydtZW51Rm9jdXMnLCAn5YWz6Zet6I+c5Y2V5ZCO6IGa54Sm5Yiw5pKt5pS+5ZmoJ10sCiAgICAgICAgICAgIFsncmVzdG9yZVByZXZlbnQnLCAn6K6w5L2P6Ziy5oyh5a2X5bmVJ10sCiAgICAgICAgICAgIFsncmVzdG9yZURhbm11a3UnLCAn6K6w5L2P5by55bmV5byA5YWzKOmhtuerry/lupXnq68v5rua5YqoL+WFqOmDqCknXSwKICAgICAgICAgICAgWydyZXN0b3JlU3BlZWQnLCAn6K6w5L2P5pKt5pS+6YCf5bqmJ10sCiAgICAgICAgICAgIFsncmVzdG9yZVdpZGUnLCAn6K6w5L2P5a695bGPJ10sCiAgICAgICAgICAgIFsnYXV0b1Jlc3VtZScsICfoh6rliqjot7PovazkuIrmrKHnnIvliLAnXSwKICAgICAgICAgICAgWydhdXRvUGxheScsICfoh6rliqjmkq3mlL4o6ZyA6KaB5Zyo5rWP6KeI5Zmo56uZ54K55p2D6ZmQ6K6+572u5Lit5YWB6K646Ieq5Yqo5pKt5pS+KSddLAogICAgICAgICAgICBbJ2F1dG9GdWxsU2NyZWVuJywgJ+iHquWKqOWFqOWxjyddLAogICAgICAgICAgICBbJ29wZWQnLCAn5qCH6K6w5ZCO6Ieq5Yqo6LezT1AvRUQnXSwKICAgICAgICAgICAgWydzZXJpZXMnLCAn5bCd6K+V6Ieq5Yqo5om+5LiK5LiL6ZuGJ10sCgogICAgICAgICAgICAvLyAzLiBpbnRlcmFjdGlvbgogICAgICAgICAgICBbJ2xpbWl0ZWRLZXlkb3duJywgJ+mmluasoeWbnui9pumUruWPr+WFqOWxj+iHquWKqOaSreaUvijpnIDopoHlnKjohJrmnKzliqDovb3lrozmr5XlkI7kvb/nlKgpJ10sCiAgICAgICAgICAgIFsnZGJsY2xpY2snLCAn5Y+M5Ye75YWo5bGPJ10sCgogICAgICAgICAgICAvLyA0LiBlYXN0ZXIgZWdncwogICAgICAgICAgICBbJ3NwZWVjaCcsICco5b2p6JuLKSjpnIDlopnlpJYp5Lu75oSP5LiJ5Ye76byg5qCH5bem6ZSu5byA5ZCv6K+t6Z+z6K+G5YirJ10sCiAgICAgICAgXTsKICAgIH0KCiAgICBzdGF0aWMgZ2V0IG9wdGlvbkRlZmF1bHRzKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJldGFiZXRhOiBmYWxzZSwKCiAgICAgICAgICAgIC8vIDEuIHVzZXIgaW50ZXJmYWNlCiAgICAgICAgICAgIGJhZGdlV2F0Y2hMYXRlcjogdHJ1ZSwKICAgICAgICAgICAgcmVjb21tZW5kOiB0cnVlLAogICAgICAgICAgICBlbGVjdHJpYzogdHJ1ZSwKICAgICAgICAgICAgZWxlY3RyaWNTa2lwcGFibGU6IGZhbHNlLAoKICAgICAgICAgICAgLy8gMi4gYXV0b21hdGlvbgogICAgICAgICAgICBzY3JvbGw6IHRydWUsCiAgICAgICAgICAgIGZvY3VzOiBmYWxzZSwKICAgICAgICAgICAgbWVudUZvY3VzOiB0cnVlLAogICAgICAgICAgICByZXN0b3JlUHJldmVudDogZmFsc2UsCiAgICAgICAgICAgIHJlc3RvcmVEYW5tdWt1OiBmYWxzZSwKICAgICAgICAgICAgcmVzdG9yZVNwZWVkOiB0cnVlLAogICAgICAgICAgICByZXN0b3JlV2lkZTogdHJ1ZSwKICAgICAgICAgICAgYXV0b1Jlc3VtZTogdHJ1ZSwKICAgICAgICAgICAgYXV0b1BsYXk6IGZhbHNlLAogICAgICAgICAgICBhdXRvRnVsbFNjcmVlbjogZmFsc2UsCiAgICAgICAgICAgIG9wZWQ6IHRydWUsCiAgICAgICAgICAgIHNlcmllczogdHJ1ZSwKCiAgICAgICAgICAgIC8vIDMuIGludGVyYWN0aW9uCiAgICAgICAgICAgIGxpbWl0ZWRLZXlkb3duOiB0cnVlLAogICAgICAgICAgICBkYmxjbGljazogdHJ1ZSwKCiAgICAgICAgICAgIC8vIDQuIGVhc3RlciBlZ2dzCiAgICAgICAgICAgIHNwZWVjaDogZmFsc2UsCiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBfVU5JVF9URVNUKCkgewogICAgICAgIGNvbnNvbGUud2FybignVGhpcyB0ZXN0IGlzIGltcG9zc2libGUuJyk7CiAgICAgICAgY29uc29sZS53YXJuKCdZb3UgbmVlZCB0byBjbG9zZSB0aGUgdGFiLCByZW9wZW4gaXQsIGV0Yy4nKTsKICAgICAgICBjb25zb2xlLndhcm4oJ01heWJlIHlvdSBhbHNvIHdhbnQgdG8gdGVzdCBiZXR3ZWVuIGJpZGVvIHBhcnRzLCBldGMuJyk7CiAgICAgICAgY29uc29sZS53YXJuKCdJIGFtIHRvbyBsYXp5IHRvIGZpbmQgd29ya2Fyb3VuZHMuJyk7CiAgICB9Cn0KCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgoqLwoKY2xhc3MgRXhwb3J0ZXIgewogICAgc3RhdGljIGV4cG9ydElETSh1cmxzLCByZWZlcnJlciA9IHRvcC5sb2NhdGlvbi5vcmlnaW4pIHsKICAgICAgICByZXR1cm4gdXJscy5tYXAodXJsID0+IGA8XHJcbiR7dXJsfVxyXG5yZWZlcmVyOiAke3JlZmVycmVyfVxyXG4+XHJcbmApLmpvaW4oJycpOwogICAgfQoKICAgIHN0YXRpYyBleHBvcnRNM1U4KHVybHMsIHJlZmVycmVyID0gdG9wLmxvY2F0aW9uLm9yaWdpbiwgdXNlckFnZW50ID0gdG9wLm5hdmlnYXRvci51c2VyQWdlbnQpIHsKICAgICAgICByZXR1cm4gJyNFWFRNM1VcbicgKyB1cmxzLm1hcCh1cmwgPT4gYCNFWFRWTENPUFQ6aHR0cC1yZWZlcnJlcj0ke3JlZmVycmVyfVxuI0VYVFZMQ09QVDpodHRwLXVzZXItYWdlbnQ9JHt1c2VyQWdlbnR9XG4jRVhUSU5GOi0xXG4ke3VybH1cbmApLmpvaW4oJycpOwogICAgfQoKICAgIHN0YXRpYyBleHBvcnRBcmlhMih1cmxzLCByZWZlcnJlciA9IHRvcC5sb2NhdGlvbi5vcmlnaW4pIHsKICAgICAgICByZXR1cm4gdXJscy5tYXAodXJsID0+IGAke3VybH1cclxuICByZWZlcmVyPSR7cmVmZXJyZXJ9XHJcbmApLmpvaW4oJycpOwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBzZW5kVG9BcmlhMlJQQyh1cmxzLCByZWZlcnJlciA9IHRvcC5sb2NhdGlvbi5vcmlnaW4sIHRhcmdldCA9ICdodHRwOi8vMTI3LjAuMC4xOjY4MDAvanNvbnJwYycpIHsKICAgICAgICBjb25zdCBoID0gJ3JlZmVyZXInOwogICAgICAgIGNvbnN0IG1ldGhvZCA9ICdQT1NUJzsKCiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgY29uc3QgdG9rZW5fYXJyYXkgPSB0YXJnZXQubWF0Y2goL1wvXC8oKC4rKUApLyk7CiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh1cmxzLm1hcCgodXJsLCBpZCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gWwogICAgICAgICAgICAgICAgICAgIFt1cmxdLAogICAgICAgICAgICAgICAgICAgIHsgW2hdOiByZWZlcnJlciB9CiAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgIGlmICh0b2tlbl9hcnJheSkgewogICAgICAgICAgICAgICAgICAgIHBhcmFtcy51bnNoaWZ0KHRva2VuX2FycmF5WzJdKTsKICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucmVwbGFjZSh0b2tlbl9hcnJheVsxXSwgIiIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiAoewogICAgICAgICAgICAgICAgICAgIGlkLAogICAgICAgICAgICAgICAgICAgIGpzb25ycGM6IDIsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiYXJpYTIuYWRkVXJpIiwKICAgICAgICAgICAgICAgICAgICBwYXJhbXMKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCAoYXdhaXQgZmV0Y2godGFyZ2V0LCB7IG1ldGhvZCwgYm9keSB9KSkuanNvbigpOwogICAgICAgICAgICAgICAgaWYgKHJlcy5lcnJvciB8fCByZXNbMF0uZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKHJlcy5lcnJvciB8fCByZXNbMF0uZXJyb3IpLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0b3AucHJvbXB0KGBBcmlhMiBjb25uZWN0aW9uIGZhaWxlZCR7IWUubWVzc2FnZS5pbmNsdWRlcygiZmV0Y2giKSA/IGA6ICR7ZS5tZXNzYWdlfS5cbmAgOiAiLiAifVBsZWFzZSBwcm92aWRlIGEgdmFsaWQgc2VydmVyIGFkZHJlc3M6YCwgdGFyZ2V0KTsKICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBzdGF0aWMgY29weVRvQ2xpcGJvYXJkKHRleHQpIHsKICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7CiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSB0ZXh0OwogICAgICAgIHRleHRhcmVhLnNlbGVjdCgpOwogICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSk7CiAgICB9Cn0KCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgoqLwoKY2xhc3MgVHdlbnR5Rm91ckRhdGFWaWV3IGV4dGVuZHMgRGF0YVZpZXcgewogICAgZ2V0VWludDI0KGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikgewogICAgICAgIGlmIChsaXR0bGVFbmRpYW4pIHRocm93ICdsaXR0bGVFbmRpYW4gaW50MjQgbm90IGltcGxlbWVudGVkJzsKICAgICAgICByZXR1cm4gdGhpcy5nZXRVaW50MzIoYnl0ZU9mZnNldCAtIDEpICYgMHgwMEZGRkZGRjsKICAgIH0KCiAgICBzZXRVaW50MjQoYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikgewogICAgICAgIGlmIChsaXR0bGVFbmRpYW4pIHRocm93ICdsaXR0bGVFbmRpYW4gaW50MjQgbm90IGltcGxlbWVudGVkJzsKICAgICAgICBpZiAodmFsdWUgPiAweDAwRkZGRkZGKSB0aHJvdyAnc2V0VWludDI0OiBudW1iZXIgb3V0IG9mIHJhbmdlJzsKICAgICAgICBsZXQgbXNiID0gdmFsdWUgPj4gMTY7CiAgICAgICAgbGV0IGxzYiA9IHZhbHVlICYgMHhGRkZGOwogICAgICAgIHRoaXMuc2V0VWludDgoYnl0ZU9mZnNldCwgbXNiKTsKICAgICAgICB0aGlzLnNldFVpbnQxNihieXRlT2Zmc2V0ICsgMSwgbHNiKTsKICAgIH0KCiAgICBpbmRleE9mKHNlYXJjaCwgc3RhcnRPZmZzZXQgPSAwLCBlbmRPZmZzZXQgPSB0aGlzLmJ5dGVMZW5ndGggLSBzZWFyY2gubGVuZ3RoICsgMSkgewogICAgICAgIC8vIEkga25vdyBpdCBpcyBOQUlWRQogICAgICAgIGlmIChzZWFyY2guY2hhckNvZGVBdCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRPZmZzZXQ7IGkgPCBlbmRPZmZzZXQ7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VWludDgoaSkgIT0gc2VhcmNoLmNoYXJDb2RlQXQoMCkpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gMTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2VhcmNoLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VWludDgoaSArIGopICE9IHNlYXJjaC5jaGFyQ29kZUF0KGopKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRPZmZzZXQ7IGkgPCBlbmRPZmZzZXQ7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VWludDgoaSkgIT0gc2VhcmNoWzBdKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IDE7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNlYXJjaC5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldFVpbnQ4KGkgKyBqKSAhPSBzZWFyY2hbal0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZm91bmQpIHJldHVybiBpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICB9Cn0KCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgoqLwoKY2xhc3MgRkxWVGFnIHsKICAgIGNvbnN0cnVjdG9yKGRhdGFWaWV3LCBjdXJyZW50T2Zmc2V0ID0gMCkgewogICAgICAgIHRoaXMudGFnSGVhZGVyID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyhkYXRhVmlldy5idWZmZXIsIGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyBjdXJyZW50T2Zmc2V0LCAxMSk7CiAgICAgICAgdGhpcy50YWdEYXRhID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyhkYXRhVmlldy5idWZmZXIsIGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyBjdXJyZW50T2Zmc2V0ICsgMTEsIHRoaXMuZGF0YVNpemUpOwogICAgICAgIHRoaXMucHJldmlvdXNTaXplID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyhkYXRhVmlldy5idWZmZXIsIGRhdGFWaWV3LmJ5dGVPZmZzZXQgKyBjdXJyZW50T2Zmc2V0ICsgMTEgKyB0aGlzLmRhdGFTaXplLCA0KTsKICAgIH0KCiAgICBnZXQgdGFnVHlwZSgpIHsKICAgICAgICByZXR1cm4gdGhpcy50YWdIZWFkZXIuZ2V0VWludDgoMCk7CiAgICB9CgogICAgZ2V0IGRhdGFTaXplKCkgewogICAgICAgIHJldHVybiB0aGlzLnRhZ0hlYWRlci5nZXRVaW50MjQoMSk7CiAgICB9CgogICAgZ2V0IHRpbWVzdGFtcCgpIHsKICAgICAgICByZXR1cm4gdGhpcy50YWdIZWFkZXIuZ2V0VWludDI0KDQpOwogICAgfQoKICAgIGdldCB0aW1lc3RhbXBFeHRlbnNpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGFnSGVhZGVyLmdldFVpbnQ4KDcpOwogICAgfQoKICAgIGdldCBzdHJlYW1JRCgpIHsKICAgICAgICByZXR1cm4gdGhpcy50YWdIZWFkZXIuZ2V0VWludDI0KDgpOwogICAgfQoKICAgIHN0cmlwS2V5ZnJhbWVzU2NyaXB0RGF0YSgpIHsKICAgICAgICBsZXQgaGFzS2V5ZnJhbWVzID0gJ2hhc0tleWZyYW1lc1x4MDEnOwogICAgICAgIGlmICh0aGlzLnRhZ1R5cGUgIT0gMHgxMikgdGhyb3cgJ2NhbiBub3Qgc3RyaXAgbm9uLXNjcmlwdGRhdGFcJ3Mga2V5ZnJhbWVzJzsKCiAgICAgICAgbGV0IGluZGV4OwogICAgICAgIGluZGV4ID0gdGhpcy50YWdEYXRhLmluZGV4T2YoaGFzS2V5ZnJhbWVzKTsKICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICAgICAgLy8weDAxMDEgPT4gMHgwMTAwCiAgICAgICAgICAgIHRoaXMudGFnRGF0YS5zZXRVaW50OChpbmRleCArIGhhc0tleWZyYW1lcy5sZW5ndGgsIDB4MDApOwogICAgICAgIH0KCiAgICAgICAgLy8gV2VsbCwgSSB0aGluayBpdCBpcyB1bm5lY2Vzc2FyeQogICAgICAgIC8qaW5kZXggPSB0aGlzLnRhZ0RhdGEuaW5kZXhPZihrZXlmcmFtZXMpCiAgICAgICAgaWYgKGluZGV4ICE9IC0xKSB7CiAgICAgICAgICAgIHRoaXMuZGF0YVNpemUgPSBpbmRleDsKICAgICAgICAgICAgdGhpcy50YWdIZWFkZXIuc2V0VWludDI0KDEsIGluZGV4KTsKICAgICAgICAgICAgdGhpcy50YWdEYXRhID0gbmV3IFR3ZW50eUZvdXJEYXRhVmlldyh0aGlzLnRhZ0RhdGEuYnVmZmVyLCB0aGlzLnRhZ0RhdGEuYnl0ZU9mZnNldCwgaW5kZXgpOwogICAgICAgIH0qLwogICAgfQoKICAgIGdldER1cmF0aW9uKCkgewogICAgICAgIGlmICh0aGlzLnRhZ1R5cGUgIT0gMHgxMikgdGhyb3cgJ2NhbiBub3QgZmluZCBub24tc2NyaXB0ZGF0YVwncyBkdXJhdGlvbic7CgogICAgICAgIGxldCBkdXJhdGlvbiA9ICdkdXJhdGlvblx4MDAnOwogICAgICAgIGxldCBpbmRleCA9IHRoaXMudGFnRGF0YS5pbmRleE9mKGR1cmF0aW9uKTsKICAgICAgICBpZiAoaW5kZXggPT0gLTEpIHRocm93ICdjYW4gbm90IGdldCBmbHYgbWV0YSBkdXJhdGlvbic7CgogICAgICAgIGluZGV4ICs9IDk7CiAgICAgICAgcmV0dXJuIHRoaXMudGFnRGF0YS5nZXRGbG9hdDY0KGluZGV4KTsKICAgIH0KCiAgICBnZXREdXJhdGlvbkFuZFZpZXcoKSB7CiAgICAgICAgaWYgKHRoaXMudGFnVHlwZSAhPSAweDEyKSB0aHJvdyAnY2FuIG5vdCBmaW5kIG5vbi1zY3JpcHRkYXRhXCdzIGR1cmF0aW9uJzsKCiAgICAgICAgbGV0IGR1cmF0aW9uID0gJ2R1cmF0aW9uXHgwMCc7CiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy50YWdEYXRhLmluZGV4T2YoZHVyYXRpb24pOwogICAgICAgIGlmIChpbmRleCA9PSAtMSkgdGhyb3cgJ2NhbiBub3QgZ2V0IGZsdiBtZXRhIGR1cmF0aW9uJzsKCiAgICAgICAgaW5kZXggKz0gOTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkdXJhdGlvbjogdGhpcy50YWdEYXRhLmdldEZsb2F0NjQoaW5kZXgpLAogICAgICAgICAgICBkdXJhdGlvbkRhdGFWaWV3OiBuZXcgVHdlbnR5Rm91ckRhdGFWaWV3KHRoaXMudGFnRGF0YS5idWZmZXIsIHRoaXMudGFnRGF0YS5ieXRlT2Zmc2V0ICsgaW5kZXgsIDgpCiAgICAgICAgfTsKICAgIH0KCiAgICBnZXRDb21iaW5lZFRpbWVzdGFtcCgpIHsKICAgICAgICByZXR1cm4gKHRoaXMudGltZXN0YW1wRXh0ZW5zaW9uIDw8IDI0IHwgdGhpcy50aW1lc3RhbXApOwogICAgfQoKICAgIHNldENvbWJpbmVkVGltZXN0YW1wKHRpbWVzdGFtcCkgewogICAgICAgIGlmICh0aW1lc3RhbXAgPCAwKSB0aHJvdyAndGltZXN0YW1wIDwgMCc7CiAgICAgICAgdGhpcy50YWdIZWFkZXIuc2V0VWludDgoNywgdGltZXN0YW1wID4+IDI0KTsKICAgICAgICB0aGlzLnRhZ0hlYWRlci5zZXRVaW50MjQoNCwgdGltZXN0YW1wICYgMHgwMEZGRkZGRik7CiAgICB9Cn0KCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgogKiAKICogVGhlIEZMViBtZXJnZSB1dGlsaXR5IGlzIGEgSmF2YXNjcmlwdCB0cmFuc2xhdGlvbiBvZiAKICogaHR0cHM6Ly9naXRodWIuY29tL2dyZXBtdXNpYy9mbHZtZXJnZQogKiBieSBncmVwbXVzaWMKKi8KCi8qKiAKICogQSBzaW1wbGUgZmx2IHBhcnNlcgoqLwpjbGFzcyBGTFYgewogICAgY29uc3RydWN0b3IoZGF0YVZpZXcpIHsKICAgICAgICBpZiAoZGF0YVZpZXcuaW5kZXhPZignRkxWJywgMCwgMSkgIT0gMCkgdGhyb3cgJ0ludmFsaWQgRkxWIGhlYWRlcic7CiAgICAgICAgdGhpcy5oZWFkZXIgPSBuZXcgVHdlbnR5Rm91ckRhdGFWaWV3KGRhdGFWaWV3LmJ1ZmZlciwgZGF0YVZpZXcuYnl0ZU9mZnNldCwgOSk7CiAgICAgICAgdGhpcy5maXJzdFByZXZpb3VzVGFnU2l6ZSA9IG5ldyBUd2VudHlGb3VyRGF0YVZpZXcoZGF0YVZpZXcuYnVmZmVyLCBkYXRhVmlldy5ieXRlT2Zmc2V0ICsgOSwgNCk7CgogICAgICAgIHRoaXMudGFncyA9IFtdOwogICAgICAgIGxldCBvZmZzZXQgPSB0aGlzLmhlYWRlckxlbmd0aCArIDQ7CiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGRhdGFWaWV3LmJ5dGVMZW5ndGgpIHsKICAgICAgICAgICAgbGV0IHRhZyA9IG5ldyBGTFZUYWcoZGF0YVZpZXcsIG9mZnNldCk7CiAgICAgICAgICAgIC8vIGRlYnVnIGZvciBzY3JpcHQgZGF0YSB0YWcKICAgICAgICAgICAgLy8gaWYgKHRhZy50YWdUeXBlICE9IDB4MDggJiYgdGFnLnRhZ1R5cGUgIT0gMHgwOSkgCiAgICAgICAgICAgIG9mZnNldCArPSAxMSArIHRhZy5kYXRhU2l6ZSArIDQ7CiAgICAgICAgICAgIHRoaXMudGFncy5wdXNoKHRhZyk7CiAgICAgICAgfQoKICAgICAgICBpZiAob2Zmc2V0ICE9IGRhdGFWaWV3LmJ5dGVMZW5ndGgpIHRocm93ICdGTFYgdW5leHBlY3RlZCBlbmQgb2YgZmlsZSc7CiAgICB9CgogICAgZ2V0IHR5cGUoKSB7CiAgICAgICAgcmV0dXJuICdGTFYnOwogICAgfQoKICAgIGdldCB2ZXJzaW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmhlYWRlci5nZXRVaW50OCgzKTsKICAgIH0KCiAgICBnZXQgdHlwZUZsYWcoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyLmdldFVpbnQ4KDQpOwogICAgfQoKICAgIGdldCBoZWFkZXJMZW5ndGgoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyLmdldFVpbnQzMig1KTsKICAgIH0KCiAgICBzdGF0aWMgbWVyZ2UoZmx2cykgewogICAgICAgIGlmIChmbHZzLmxlbmd0aCA8IDEpIHRocm93ICdVc2FnZTogRkxWLm1lcmdlKFtmbHZzXSknOwogICAgICAgIGxldCBibG9iUGFydHMgPSBbXTsKICAgICAgICBsZXQgYmFzZXRpbWVzdGFtcCA9IFswLCAwXTsKICAgICAgICBsZXQgbGFzdHRpbWVzdGFtcCA9IFswLCAwXTsKICAgICAgICBsZXQgZHVyYXRpb24gPSAwLjA7CiAgICAgICAgbGV0IGR1cmF0aW9uRGF0YVZpZXc7CgogICAgICAgIGJsb2JQYXJ0cy5wdXNoKGZsdnNbMF0uaGVhZGVyKTsKICAgICAgICBibG9iUGFydHMucHVzaChmbHZzWzBdLmZpcnN0UHJldmlvdXNUYWdTaXplKTsKCiAgICAgICAgZm9yIChsZXQgZmx2IG9mIGZsdnMpIHsKICAgICAgICAgICAgbGV0IGJ0cyA9IGR1cmF0aW9uICogMTAwMDsKICAgICAgICAgICAgYmFzZXRpbWVzdGFtcFswXSA9IGxhc3R0aW1lc3RhbXBbMF07CiAgICAgICAgICAgIGJhc2V0aW1lc3RhbXBbMV0gPSBsYXN0dGltZXN0YW1wWzFdOwogICAgICAgICAgICBidHMgPSBNYXRoLm1heChidHMsIGJhc2V0aW1lc3RhbXBbMF0sIGJhc2V0aW1lc3RhbXBbMV0pOwogICAgICAgICAgICBsZXQgZm91bmREdXJhdGlvbiA9IDA7CiAgICAgICAgICAgIGZvciAobGV0IHRhZyBvZiBmbHYudGFncykgewogICAgICAgICAgICAgICAgaWYgKHRhZy50YWdUeXBlID09IDB4MTIgJiYgIWZvdW5kRHVyYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiArPSB0YWcuZ2V0RHVyYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBmb3VuZER1cmF0aW9uID0gMTsKICAgICAgICAgICAgICAgICAgICBpZiAoZmx2ID09IGZsdnNbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgKHsgZHVyYXRpb24sIGR1cmF0aW9uRGF0YVZpZXcgfSA9IHRhZy5nZXREdXJhdGlvbkFuZFZpZXcoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhZy5zdHJpcEtleWZyYW1lc1NjcmlwdERhdGEoKTsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2godGFnLnRhZ0hlYWRlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2JQYXJ0cy5wdXNoKHRhZy50YWdEYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2godGFnLnByZXZpb3VzU2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodGFnLnRhZ1R5cGUgPT0gMHgwOCB8fCB0YWcudGFnVHlwZSA9PSAweDA5KSB7CiAgICAgICAgICAgICAgICAgICAgbGFzdHRpbWVzdGFtcFt0YWcudGFnVHlwZSAtIDB4MDhdID0gYnRzICsgdGFnLmdldENvbWJpbmVkVGltZXN0YW1wKCk7CiAgICAgICAgICAgICAgICAgICAgdGFnLnNldENvbWJpbmVkVGltZXN0YW1wKGxhc3R0aW1lc3RhbXBbdGFnLnRhZ1R5cGUgLSAweDA4XSk7CiAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2godGFnLnRhZ0hlYWRlcik7CiAgICAgICAgICAgICAgICAgICAgYmxvYlBhcnRzLnB1c2godGFnLnRhZ0RhdGEpOwogICAgICAgICAgICAgICAgICAgIGJsb2JQYXJ0cy5wdXNoKHRhZy5wcmV2aW91c1NpemUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGR1cmF0aW9uRGF0YVZpZXcuc2V0RmxvYXQ2NCgwLCBkdXJhdGlvbik7CgogICAgICAgIHJldHVybiBuZXcgQmxvYihibG9iUGFydHMpOwogICAgfQoKICAgIHN0YXRpYyBhc3luYyBtZXJnZUJsb2JzKGJsb2JzKSB7CiAgICAgICAgLy8gQmxvYnMgY2FuIGJlIHN3YXBwZWQgdG8gZGlzaywgd2hpbGUgQXJyYXlidWZmZXJzIGNhbiBub3QuCiAgICAgICAgLy8gVGhpcyBpcyBhIFJBTSBzYXZpbmcgd29ya2Fyb3VuZC4gU29tZXdoYXQuCiAgICAgICAgaWYgKGJsb2JzLmxlbmd0aCA8IDEpIHRocm93ICdVc2FnZTogRkxWLm1lcmdlQmxvYnMoW2Jsb2JzXSknOwogICAgICAgIGxldCByZXQgPSBbXTsKICAgICAgICBsZXQgYmFzZXRpbWVzdGFtcCA9IFswLCAwXTsKICAgICAgICBsZXQgbGFzdHRpbWVzdGFtcCA9IFswLCAwXTsKICAgICAgICBsZXQgZHVyYXRpb24gPSAwLjA7CiAgICAgICAgbGV0IGR1cmF0aW9uRGF0YVZpZXc7CgogICAgICAgIGZvciAobGV0IGJsb2Igb2YgYmxvYnMpIHsKICAgICAgICAgICAgbGV0IGJ0cyA9IGR1cmF0aW9uICogMTAwMDsKICAgICAgICAgICAgYmFzZXRpbWVzdGFtcFswXSA9IGxhc3R0aW1lc3RhbXBbMF07CiAgICAgICAgICAgIGJhc2V0aW1lc3RhbXBbMV0gPSBsYXN0dGltZXN0YW1wWzFdOwogICAgICAgICAgICBidHMgPSBNYXRoLm1heChidHMsIGJhc2V0aW1lc3RhbXBbMF0sIGJhc2V0aW1lc3RhbXBbMV0pOwogICAgICAgICAgICBsZXQgZm91bmREdXJhdGlvbiA9IDA7CgogICAgICAgICAgICBsZXQgZmx2ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAgICAgbGV0IGZyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgIGZyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUobmV3IEZMVihuZXcgVHdlbnR5Rm91ckRhdGFWaWV3KGZyLnJlc3VsdCkpKTsKICAgICAgICAgICAgICAgIGZyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpOwogICAgICAgICAgICAgICAgZnIub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBsZXQgbW9kaWZpZWRNZWRpYVRhZ3MgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgdGFnIG9mIGZsdi50YWdzKSB7CiAgICAgICAgICAgICAgICBpZiAodGFnLnRhZ1R5cGUgPT0gMHgxMiAmJiAhZm91bmREdXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uICs9IHRhZy5nZXREdXJhdGlvbigpOwogICAgICAgICAgICAgICAgICAgIGZvdW5kRHVyYXRpb24gPSAxOwogICAgICAgICAgICAgICAgICAgIGlmIChibG9iID09IGJsb2JzWzBdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKGZsdi5oZWFkZXIsIGZsdi5maXJzdFByZXZpb3VzVGFnU2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICh7IGR1cmF0aW9uLCBkdXJhdGlvbkRhdGFWaWV3IH0gPSB0YWcuZ2V0RHVyYXRpb25BbmRWaWV3KCkpOwogICAgICAgICAgICAgICAgICAgICAgICB0YWcuc3RyaXBLZXlmcmFtZXNTY3JpcHREYXRhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKHRhZy50YWdIZWFkZXIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXQucHVzaCh0YWcudGFnRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKHRhZy5wcmV2aW91c1NpemUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhZy50YWdUeXBlID09IDB4MDggfHwgdGFnLnRhZ1R5cGUgPT0gMHgwOSkgewogICAgICAgICAgICAgICAgICAgIGxhc3R0aW1lc3RhbXBbdGFnLnRhZ1R5cGUgLSAweDA4XSA9IGJ0cyArIHRhZy5nZXRDb21iaW5lZFRpbWVzdGFtcCgpOwogICAgICAgICAgICAgICAgICAgIHRhZy5zZXRDb21iaW5lZFRpbWVzdGFtcChsYXN0dGltZXN0YW1wW3RhZy50YWdUeXBlIC0gMHgwOF0pOwogICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkTWVkaWFUYWdzLnB1c2godGFnLnRhZ0hlYWRlciwgdGFnLnRhZ0RhdGEsIHRhZy5wcmV2aW91c1NpemUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldC5wdXNoKG5ldyBCbG9iKG1vZGlmaWVkTWVkaWFUYWdzKSk7CiAgICAgICAgfQogICAgICAgIGR1cmF0aW9uRGF0YVZpZXcuc2V0RmxvYXQ2NCgwLCBkdXJhdGlvbik7CgogICAgICAgIHJldHVybiBuZXcgQmxvYihyZXQpOwogICAgfQp9Cgp2YXIgZW1iZWRkZWRIVE1MID0gYDxodG1sPgoKPGJvZHk+CiAgICA8cD4KICAgICAgICDliqDovb3mlofku7bigKbigKYgbG9hZGluZyBmaWxlcy4uLgogICAgICAgIDxwcm9ncmVzcyB2YWx1ZT0iMCIgbWF4PSIxMDAiIGlkPSJmaWxlUHJvZ3Jlc3MiPjwvcHJvZ3Jlc3M+CiAgICA8L3A+CiAgICA8cD4KICAgICAgICDmnoTlu7pta3bigKbigKYgYnVpbGRpbmcgbWt2Li4uCiAgICAgICAgPHByb2dyZXNzIHZhbHVlPSIwIiBtYXg9IjEwMCIgaWQ9Im1rdlByb2dyZXNzIj48L3Byb2dyZXNzPgogICAgPC9wPgogICAgPHA+CiAgICAgICAgPGEgaWQ9ImEiIGRvd25sb2FkPSJtZXJnZWQubWt2Ij5tZXJnZWQubWt2PC9hPgogICAgPC9wPgogICAgPGZvb3Rlcj4KICAgICAgICBhdXRob3IgcWxpNSAmbHQ7Z29vZGxxMTFbYXRdKDE2M3xnbWFpbCkuY29tJmd0OwogICAgPC9mb290ZXI+CiAgICA8c2NyaXB0Pgp2YXIgRkxWQVNTMk1LViA9IChmdW5jdGlvbiAoKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgLyoqKgogICAgICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICAgKiAKICAgICAqIEBhdXRob3IgcWxpNSA8Z29vZGxxMTFbYXRdKDE2M3xnbWFpbCkuY29tPgogICAgICogCiAgICAgKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAgICAgKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAgICAgKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgogICAgKi8KCiAgICBjb25zdCBfbmF2aWdhdG9yID0gdHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yIHx8IHsgdXNlckFnZW50OiAnY2hyb21lJyB9OwoKICAgIC8qKiBAdHlwZSB7dHlwZW9mIEJsb2J9ICovCiAgICBjb25zdCBfQmxvYiA9IHR5cGVvZiBCbG9iID09PSAnZnVuY3Rpb24nICYmIEJsb2IgfHwgY2xhc3MgewogICAgICAgIGNvbnN0cnVjdG9yKGFycmF5KSB7CiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuY29uY2F0KGFycmF5Lm1hcChCdWZmZXIuZnJvbS5iaW5kKEJ1ZmZlcikpKTsKICAgICAgICB9CiAgICB9OwoKICAgIGNvbnN0IF9UZXh0RW5jb2RlciA9IHR5cGVvZiBUZXh0RW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyAmJiBUZXh0RW5jb2RlciB8fCBjbGFzcyB7CiAgICAgICAgLyoqCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNodW5rIAogICAgICAgICAqIEByZXR1cm5zIHtVaW50OEFycmF5fQogICAgICAgICAqLwogICAgICAgIGVuY29kZShjaHVuaykgewogICAgICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oY2h1bmssICd1dGYtOCcpOwogICAgICAgIH0KICAgIH07CgogICAgY29uc3QgX1RleHREZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAnZnVuY3Rpb24nICYmIFRleHREZWNvZGVyIHx8IGNsYXNzIGV4dGVuZHMgcmVxdWlyZSgnc3RyaW5nX2RlY29kZXInKS5TdHJpbmdEZWNvZGVyIHsKICAgICAgICAvKioKICAgICAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBjaHVuayAKICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAgICAgICAqLwogICAgICAgIGRlY29kZShjaHVuaykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5lbmQoQnVmZmVyLmZyb20oY2h1bmspKTsKICAgICAgICB9CiAgICB9OwoKICAgIC8qKioKICAgICAqIFRoZSBGTFYgZGVtdXhlciBpcyBmcm9tIGZsdi5qcwogICAgICogCiAgICAgKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICAgKgogICAgICogQGF1dGhvciB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPgogICAgICoKICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgKgogICAgICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICovCgogICAgLy8gaW1wb3J0IEZMVkRlbXV4ZXIgZnJvbSAnZmx2LmpzL3NyYy9kZW11eC9mbHYtZGVtdXhlci5qcyc7CiAgICAvLyAuLmltcG9ydCBMb2cgZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJzsKICAgIGNvbnN0IExvZyA9IHsKICAgICAgICBlOiBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSksCiAgICAgICAgdzogY29uc29sZS53YXJuLmJpbmQoY29uc29sZSksCiAgICAgICAgaTogY29uc29sZS5sb2cuYmluZChjb25zb2xlKSwKICAgICAgICB2OiBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLAogICAgfTsKCiAgICAvLyAuLmltcG9ydCBBTUYgZnJvbSAnLi9hbWYtcGFyc2VyLmpzJzsKICAgIC8vIC4uLi5pbXBvcnQgTG9nIGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7CiAgICAvLyAuLi4uaW1wb3J0IGRlY29kZVVURjggZnJvbSAnLi4vdXRpbHMvdXRmOC1jb252LmpzJzsKICAgIGZ1bmN0aW9uIGNoZWNrQ29udGludWF0aW9uKHVpbnQ4YXJyYXksIHN0YXJ0LCBjaGVja0xlbmd0aCkgewogICAgICAgIGxldCBhcnJheSA9IHVpbnQ4YXJyYXk7CiAgICAgICAgaWYgKHN0YXJ0ICsgY2hlY2tMZW5ndGggPCBhcnJheS5sZW5ndGgpIHsKICAgICAgICAgICAgd2hpbGUgKGNoZWNrTGVuZ3RoLS0pIHsKICAgICAgICAgICAgICAgIGlmICgoYXJyYXlbKytzdGFydF0gJiAweEMwKSAhPT0gMHg4MCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBkZWNvZGVVVEY4KHVpbnQ4YXJyYXkpIHsKICAgICAgICBsZXQgb3V0ID0gW107CiAgICAgICAgbGV0IGlucHV0ID0gdWludDhhcnJheTsKICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgbGV0IGxlbmd0aCA9IHVpbnQ4YXJyYXkubGVuZ3RoOwoKICAgICAgICB3aGlsZSAoaSA8IGxlbmd0aCkgewogICAgICAgICAgICBpZiAoaW5wdXRbaV0gPCAweDgwKSB7CiAgICAgICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGlucHV0W2ldKSk7CiAgICAgICAgICAgICAgICArK2k7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dFtpXSA8IDB4QzApIHsKICAgICAgICAgICAgICAgIC8vIGZhbGx0aHJvdWdoCiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEUwKSB7CiAgICAgICAgICAgICAgICBpZiAoY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDEpKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHVjczQgPSAoaW5wdXRbaV0gJiAweDFGKSA8PCA2IHwgKGlucHV0W2kgKyAxXSAmIDB4M0YpOwogICAgICAgICAgICAgICAgICAgIGlmICh1Y3M0ID49IDB4ODApIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1Y3M0ICYgMHhGRkZGKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhGMCkgewogICAgICAgICAgICAgICAgaWYgKGNoZWNrQ29udGludWF0aW9uKGlucHV0LCBpLCAyKSkgewogICAgICAgICAgICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHhGKSA8PCAxMiB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCA2IHwgaW5wdXRbaSArIDJdICYgMHgzRjsKICAgICAgICAgICAgICAgICAgICBpZiAodWNzNCA+PSAweDgwMCAmJiAodWNzNCAmIDB4RjgwMCkgIT09IDB4RDgwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgJiAweEZGRkYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEY4KSB7CiAgICAgICAgICAgICAgICBpZiAoY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDMpKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHVjczQgPSAoaW5wdXRbaV0gJiAweDcpIDw8IDE4IHwgKGlucHV0W2kgKyAxXSAmIDB4M0YpIDw8IDEyCiAgICAgICAgICAgICAgICAgICAgICAgIHwgKGlucHV0W2kgKyAyXSAmIDB4M0YpIDw8IDYgfCAoaW5wdXRbaSArIDNdICYgMHgzRik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVjczQgPiAweDEwMDAwICYmIHVjczQgPCAweDExMDAwMCkgewogICAgICAgICAgICAgICAgICAgICAgICB1Y3M0IC09IDB4MTAwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKHVjczQgPj4+IDEwKSB8IDB4RDgwMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKCh1Y3M0ICYgMHgzRkYpIHwgMHhEQzAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMHhGRkZEKSk7CiAgICAgICAgICAgICsraTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBvdXQuam9pbignJyk7CiAgICB9CgogICAgLy8gLi4uLmltcG9ydCB7SWxsZWdhbFN0YXRlRXhjZXB0aW9ufSBmcm9tICcuLi91dGlscy9leGNlcHRpb24uanMnOwogICAgY2xhc3MgSWxsZWdhbFN0YXRlRXhjZXB0aW9uIGV4dGVuZHMgRXJyb3IgeyB9CgogICAgbGV0IGxlID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKDIpOwogICAgICAgIChuZXcgRGF0YVZpZXcoYnVmKSkuc2V0SW50MTYoMCwgMjU2LCB0cnVlKTsgIC8vIGxpdHRsZS1lbmRpYW4gd3JpdGUKICAgICAgICByZXR1cm4gKG5ldyBJbnQxNkFycmF5KGJ1ZikpWzBdID09PSAyNTY7ICAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEUKICAgIH0pKCk7CgogICAgY2xhc3MgQU1GIHsKCiAgICAgICAgc3RhdGljIHBhcnNlU2NyaXB0RGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICAgICAgbGV0IGRhdGEgPSB7fTsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IEFNRi5wYXJzZVZhbHVlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBBTUYucGFyc2VWYWx1ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG5hbWUuc2l6ZSwgZGF0YVNpemUgLSBuYW1lLnNpemUpOwoKICAgICAgICAgICAgICAgIGRhdGFbbmFtZS5kYXRhXSA9IHZhbHVlLmRhdGE7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIExvZy5lKCdBTUYnLCBlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9CgogICAgICAgIHN0YXRpYyBwYXJzZU9iamVjdChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICAgICAgaWYgKGRhdGFTaXplIDwgMykgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBub3QgZW5vdWdoIHdoZW4gcGFyc2UgU2NyaXB0RGF0YU9iamVjdCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBuYW1lID0gQU1GLnBhcnNlU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgICAgIGxldCB2YWx1ZSA9IEFNRi5wYXJzZVZhbHVlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgbmFtZS5zaXplLCBkYXRhU2l6ZSAtIG5hbWUuc2l6ZSk7CiAgICAgICAgICAgIGxldCBpc09iamVjdEVuZCA9IHZhbHVlLm9iamVjdEVuZDsKCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZS5kYXRhLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS5kYXRhCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2l6ZTogbmFtZS5zaXplICsgdmFsdWUuc2l6ZSwKICAgICAgICAgICAgICAgIG9iamVjdEVuZDogaXNPYmplY3RFbmQKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHN0YXRpYyBwYXJzZVZhcmlhYmxlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkgewogICAgICAgICAgICByZXR1cm4gQU1GLnBhcnNlT2JqZWN0KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgfQoKICAgICAgICBzdGF0aWMgcGFyc2VTdHJpbmcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7CiAgICAgICAgICAgIGlmIChkYXRhU2l6ZSA8IDIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RhdGEgbm90IGVub3VnaCB3aGVuIHBhcnNlIFN0cmluZycpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgICAgIGxldCBsZW5ndGggPSB2LmdldFVpbnQxNigwLCAhbGUpOwoKICAgICAgICAgICAgbGV0IHN0cjsKICAgICAgICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHN0ciA9IGRlY29kZVVURjgobmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAyLCBsZW5ndGgpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN0ciA9ICcnOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgZGF0YTogc3RyLAogICAgICAgICAgICAgICAgc2l6ZTogMiArIGxlbmd0aAogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgc3RhdGljIHBhcnNlTG9uZ1N0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICAgICAgaWYgKGRhdGFTaXplIDwgNCkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBub3QgZW5vdWdoIHdoZW4gcGFyc2UgTG9uZ1N0cmluZycpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgICAgIGxldCBsZW5ndGggPSB2LmdldFVpbnQzMigwLCAhbGUpOwoKICAgICAgICAgICAgbGV0IHN0cjsKICAgICAgICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHN0ciA9IGRlY29kZVVURjgobmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyA0LCBsZW5ndGgpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN0ciA9ICcnOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgZGF0YTogc3RyLAogICAgICAgICAgICAgICAgc2l6ZTogNCArIGxlbmd0aAogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgc3RhdGljIHBhcnNlRGF0ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICAgICAgaWYgKGRhdGFTaXplIDwgMTApIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RhdGEgc2l6ZSBpbnZhbGlkIHdoZW4gcGFyc2UgRGF0ZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgICAgIGxldCB0aW1lc3RhbXAgPSB2LmdldEZsb2F0NjQoMCwgIWxlKTsKICAgICAgICAgICAgbGV0IGxvY2FsVGltZU9mZnNldCA9IHYuZ2V0SW50MTYoOCwgIWxlKTsKICAgICAgICAgICAgdGltZXN0YW1wICs9IGxvY2FsVGltZU9mZnNldCAqIDYwICogMTAwMDsgIC8vIGdldCBVVEMgdGltZQoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGRhdGE6IG5ldyBEYXRlKHRpbWVzdGFtcCksCiAgICAgICAgICAgICAgICBzaXplOiA4ICsgMgogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgc3RhdGljIHBhcnNlVmFsdWUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7CiAgICAgICAgICAgIGlmIChkYXRhU2l6ZSA8IDEpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RhdGEgbm90IGVub3VnaCB3aGVuIHBhcnNlIFZhbHVlJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CgogICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMTsKICAgICAgICAgICAgbGV0IHR5cGUgPSB2LmdldFVpbnQ4KDApOwogICAgICAgICAgICBsZXQgdmFsdWU7CiAgICAgICAgICAgIGxldCBvYmplY3RFbmQgPSBmYWxzZTsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6ICAvLyBOdW1iZXIoRG91YmxlKSB0eXBlCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdi5nZXRGbG9hdDY0KDEsICFsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSA4OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHsgIC8vIEJvb2xlYW4gdHlwZQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IHYuZ2V0VWludDgoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYiA/IHRydWUgOiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHsgIC8vIFN0cmluZyB0eXBlCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbWZzdHIgPSBBTUYucGFyc2VTdHJpbmcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFtZnN0ci5kYXRhOwogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gYW1mc3RyLnNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHsgLy8gT2JqZWN0KHMpIHR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlcm1pbmFsID0gMDsgIC8vIHdvcmthcm91bmQgZm9yIG1hbGZvcm1lZCBPYmplY3RzIHdoaWNoIGhhcyBtaXNzaW5nIFNjcmlwdERhdGFPYmplY3RFbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2LmdldFVpbnQzMihkYXRhU2l6ZSAtIDQsICFsZSkgJiAweDAwRkZGRkZGKSA9PT0gOSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybWluYWwgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSAtIDQpIHsgIC8vIDQgPT09IHR5cGUoVUk4KSArIFNjcmlwdERhdGFPYmplY3RFbmQoVUkyNCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbWZvYmogPSBBTUYucGFyc2VPYmplY3QoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyBvZmZzZXQsIGRhdGFTaXplIC0gb2Zmc2V0IC0gdGVybWluYWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZm9iai5vYmplY3RFbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVthbWZvYmouZGF0YS5uYW1lXSA9IGFtZm9iai5kYXRhLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGFtZm9iai5zaXplOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgPD0gZGF0YVNpemUgLSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFya2VyID0gdi5nZXRVaW50MzIob2Zmc2V0IC0gMSwgIWxlKSAmIDB4MDBGRkZGRkY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyID09PSA5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhc2UgODogeyAvLyBFQ01BIGFycmF5IHR5cGUgKE1peGVkIGFycmF5KQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDsgIC8vIEVDTUFBcnJheUxlbmd0aChVSTMyKQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVybWluYWwgPSAwOyAgLy8gd29ya2Fyb3VuZCBmb3IgbWFsZm9ybWVkIE1peGVkQXJyYXlzIHdoaWNoIGhhcyBtaXNzaW5nIFNjcmlwdERhdGFPYmplY3RFbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2LmdldFVpbnQzMihkYXRhU2l6ZSAtIDQsICFsZSkgJiAweDAwRkZGRkZGKSA9PT0gOSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVybWluYWwgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSAtIDgpIHsgIC8vIDggPT09IHR5cGUoVUk4KSArIEVDTUFBcnJheUxlbmd0aChVSTMyKSArIFNjcmlwdERhdGFWYXJpYWJsZUVuZChVSTI0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFtZnZhciA9IEFNRi5wYXJzZVZhcmlhYmxlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBkYXRhU2l6ZSAtIG9mZnNldCAtIHRlcm1pbmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbWZ2YXIub2JqZWN0RW5kKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbYW1mdmFyLmRhdGEubmFtZV0gPSBhbWZ2YXIuZGF0YS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBhbWZ2YXIuc2l6ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0IDw9IGRhdGFTaXplIC0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IHYuZ2V0VWludDMyKG9mZnNldCAtIDEsICFsZSkgJiAweDAwRkZGRkZGOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlciA9PT0gOSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXNlIDk6ICAvLyBTY3JpcHREYXRhT2JqZWN0RW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RFbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOiB7ICAvLyBTdHJpY3QgYXJyYXkgdHlwZQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTY3JpcHREYXRhVmFsdWVbbl0uIE5PVEU6IGFjY29yZGluZyB0byB2aWRlb19maWxlX2Zvcm1hdF9zcGVjX3YxMF8xLnBkZgogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RyaWN0QXJyYXlMZW5ndGggPSB2LmdldFVpbnQzMigxLCAhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpY3RBcnJheUxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gQU1GLnBhcnNlVmFsdWUoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyBvZmZzZXQsIGRhdGFTaXplIC0gb2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2godmFsLmRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHZhbC5zaXplOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXNlIDExOiB7ICAvLyBEYXRlIHR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGUgPSBBTUYucGFyc2VEYXRlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBkYXRlLnNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOiB7ICAvLyBMb25nIHN0cmluZyB0eXBlCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbWZMb25nU3RyID0gQU1GLnBhcnNlU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhbWZMb25nU3RyLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBhbWZMb25nU3RyLnNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgYW5kIHNraXAKICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gZGF0YVNpemU7CiAgICAgICAgICAgICAgICAgICAgICAgIExvZy53KCdBTUYnLCAnVW5zdXBwb3J0ZWQgQU1GIHZhbHVlIHR5cGUgJyArIHR5cGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBMb2cuZSgnQU1GJywgZS50b1N0cmluZygpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGRhdGE6IHZhbHVlLAogICAgICAgICAgICAgICAgc2l6ZTogb2Zmc2V0LAogICAgICAgICAgICAgICAgb2JqZWN0RW5kOiBvYmplY3RFbmQKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgfQoKICAgIC8vIC4uaW1wb3J0IFNQU1BhcnNlciBmcm9tICcuL3Nwcy1wYXJzZXIuanMnOwogICAgLy8gLi4uLmltcG9ydCBFeHBHb2xvbWIgZnJvbSAnLi9leHAtZ29sb21iLmpzJzsKICAgIC8vIC4uLi4uLmltcG9ydCB7SWxsZWdhbFN0YXRlRXhjZXB0aW9uLCBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb259IGZyb20gJy4uL3V0aWxzL2V4Y2VwdGlvbi5qcyc7CiAgICBjbGFzcyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7IH0KCiAgICBjbGFzcyBFeHBHb2xvbWIgewoKICAgICAgICBjb25zdHJ1Y3Rvcih1aW50OGFycmF5KSB7CiAgICAgICAgICAgIHRoaXMuVEFHID0gJ0V4cEdvbG9tYic7CgogICAgICAgICAgICB0aGlzLl9idWZmZXIgPSB1aW50OGFycmF5OwogICAgICAgICAgICB0aGlzLl9idWZmZXJfaW5kZXggPSAwOwogICAgICAgICAgICB0aGlzLl90b3RhbF9ieXRlcyA9IHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aDsKICAgICAgICAgICAgdGhpcy5fdG90YWxfYml0cyA9IHVpbnQ4YXJyYXkuYnl0ZUxlbmd0aCAqIDg7CiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZCA9IDA7CiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgPSAwOwogICAgICAgIH0KCiAgICAgICAgZGVzdHJveSgpIHsKICAgICAgICAgICAgdGhpcy5fYnVmZmVyID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIF9maWxsQ3VycmVudFdvcmQoKSB7CiAgICAgICAgICAgIGxldCBidWZmZXJfYnl0ZXNfbGVmdCA9IHRoaXMuX3RvdGFsX2J5dGVzIC0gdGhpcy5fYnVmZmVyX2luZGV4OwogICAgICAgICAgICBpZiAoYnVmZmVyX2J5dGVzX2xlZnQgPD0gMCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0V4cEdvbG9tYjogX2ZpbGxDdXJyZW50V29yZCgpIGJ1dCBubyBieXRlcyBhdmFpbGFibGUnKTsKCiAgICAgICAgICAgIGxldCBieXRlc19yZWFkID0gTWF0aC5taW4oNCwgYnVmZmVyX2J5dGVzX2xlZnQpOwogICAgICAgICAgICBsZXQgd29yZCA9IG5ldyBVaW50OEFycmF5KDQpOwogICAgICAgICAgICB3b3JkLnNldCh0aGlzLl9idWZmZXIuc3ViYXJyYXkodGhpcy5fYnVmZmVyX2luZGV4LCB0aGlzLl9idWZmZXJfaW5kZXggKyBieXRlc19yZWFkKSk7CiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZCA9IG5ldyBEYXRhVmlldyh3b3JkLmJ1ZmZlcikuZ2V0VWludDMyKDAsIGZhbHNlKTsKCiAgICAgICAgICAgIHRoaXMuX2J1ZmZlcl9pbmRleCArPSBieXRlc19yZWFkOwogICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0ID0gYnl0ZXNfcmVhZCAqIDg7CiAgICAgICAgfQoKICAgICAgICByZWFkQml0cyhiaXRzKSB7CiAgICAgICAgICAgIGlmIChiaXRzID4gMzIpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXhjZXB0aW9uKCdFeHBHb2xvbWI6IHJlYWRCaXRzKCkgYml0cyBleGNlZWRlZCBtYXggMzJiaXRzIScpOwoKICAgICAgICAgICAgaWYgKGJpdHMgPD0gdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCkgewogICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuX2N1cnJlbnRfd29yZCA+Pj4gKDMyIC0gYml0cyk7CiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IGJpdHM7CiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0IC09IGJpdHM7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCA/IHRoaXMuX2N1cnJlbnRfd29yZCA6IDA7CiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA+Pj4gKDMyIC0gdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCk7CiAgICAgICAgICAgIGxldCBiaXRzX25lZWRfbGVmdCA9IGJpdHMgLSB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0OwoKICAgICAgICAgICAgdGhpcy5fZmlsbEN1cnJlbnRXb3JkKCk7CiAgICAgICAgICAgIGxldCBiaXRzX3JlYWRfbmV4dCA9IE1hdGgubWluKGJpdHNfbmVlZF9sZWZ0LCB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0KTsKCiAgICAgICAgICAgIGxldCByZXN1bHQyID0gdGhpcy5fY3VycmVudF93b3JkID4+PiAoMzIgLSBiaXRzX3JlYWRfbmV4dCk7CiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZCA8PD0gYml0c19yZWFkX25leHQ7CiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgLT0gYml0c19yZWFkX25leHQ7CgogICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IGJpdHNfcmVhZF9uZXh0KSB8IHJlc3VsdDI7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICByZWFkQm9vbCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoMSkgPT09IDE7CiAgICAgICAgfQoKICAgICAgICByZWFkQnl0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMoOCk7CiAgICAgICAgfQoKICAgICAgICBfc2tpcExlYWRpbmdaZXJvKCkgewogICAgICAgICAgICBsZXQgemVyb19jb3VudDsKICAgICAgICAgICAgZm9yICh6ZXJvX2NvdW50ID0gMDsgemVyb19jb3VudCA8IHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQ7IHplcm9fY291bnQrKykgewogICAgICAgICAgICAgICAgaWYgKDAgIT09ICh0aGlzLl9jdXJyZW50X3dvcmQgJiAoMHg4MDAwMDAwMCA+Pj4gemVyb19jb3VudCkpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkIDw8PSB6ZXJvX2NvdW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgLT0gemVyb19jb3VudDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gemVyb19jb3VudDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLl9maWxsQ3VycmVudFdvcmQoKTsKICAgICAgICAgICAgcmV0dXJuIHplcm9fY291bnQgKyB0aGlzLl9za2lwTGVhZGluZ1plcm8oKTsKICAgICAgICB9CgogICAgICAgIHJlYWRVRUcoKSB7ICAvLyB1bnNpZ25lZCBleHBvbmVudGlhbCBnb2xvbWIKICAgICAgICAgICAgbGV0IGxlYWRpbmdfemVyb3MgPSB0aGlzLl9za2lwTGVhZGluZ1plcm8oKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMobGVhZGluZ196ZXJvcyArIDEpIC0gMTsKICAgICAgICB9CgogICAgICAgIHJlYWRTRUcoKSB7ICAvLyBzaWduZWQgZXhwb25lbnRpYWwgZ29sb21iCiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMucmVhZFVFRygpOwogICAgICAgICAgICBpZiAodmFsdWUgJiAweDAxKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlICsgMSkgPj4+IDE7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gLTEgKiAodmFsdWUgPj4+IDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIH0KCiAgICBjbGFzcyBTUFNQYXJzZXIgewoKICAgICAgICBzdGF0aWMgX2Vic3AycmJzcCh1aW50OGFycmF5KSB7CiAgICAgICAgICAgIGxldCBzcmMgPSB1aW50OGFycmF5OwogICAgICAgICAgICBsZXQgc3JjX2xlbmd0aCA9IHNyYy5ieXRlTGVuZ3RoOwogICAgICAgICAgICBsZXQgZHN0ID0gbmV3IFVpbnQ4QXJyYXkoc3JjX2xlbmd0aCk7CiAgICAgICAgICAgIGxldCBkc3RfaWR4ID0gMDsKCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3JjX2xlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoaSA+PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVW5lc2NhcGU6IFNraXAgMHgwMyBhZnRlciAwMCAwMAogICAgICAgICAgICAgICAgICAgIGlmIChzcmNbaV0gPT09IDB4MDMgJiYgc3JjW2kgLSAxXSA9PT0gMHgwMCAmJiBzcmNbaSAtIDJdID09PSAweDAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRzdFtkc3RfaWR4XSA9IHNyY1tpXTsKICAgICAgICAgICAgICAgIGRzdF9pZHgrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRzdC5idWZmZXIsIDAsIGRzdF9pZHgpOwogICAgICAgIH0KCiAgICAgICAgc3RhdGljIHBhcnNlU1BTKHVpbnQ4YXJyYXkpIHsKICAgICAgICAgICAgbGV0IHJic3AgPSBTUFNQYXJzZXIuX2Vic3AycmJzcCh1aW50OGFycmF5KTsKICAgICAgICAgICAgbGV0IGdiID0gbmV3IEV4cEdvbG9tYihyYnNwKTsKCiAgICAgICAgICAgIGdiLnJlYWRCeXRlKCk7CiAgICAgICAgICAgIGxldCBwcm9maWxlX2lkYyA9IGdiLnJlYWRCeXRlKCk7ICAvLyBwcm9maWxlX2lkYwogICAgICAgICAgICBnYi5yZWFkQnl0ZSgpOyAgLy8gY29uc3RyYWludF9zZXRfZmxhZ3NbNV0gKyByZXNlcnZlZF96ZXJvWzNdCiAgICAgICAgICAgIGxldCBsZXZlbF9pZGMgPSBnYi5yZWFkQnl0ZSgpOyAgLy8gbGV2ZWxfaWRjCiAgICAgICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIHNlcV9wYXJhbWV0ZXJfc2V0X2lkCgogICAgICAgICAgICBsZXQgcHJvZmlsZV9zdHJpbmcgPSBTUFNQYXJzZXIuZ2V0UHJvZmlsZVN0cmluZyhwcm9maWxlX2lkYyk7CiAgICAgICAgICAgIGxldCBsZXZlbF9zdHJpbmcgPSBTUFNQYXJzZXIuZ2V0TGV2ZWxTdHJpbmcobGV2ZWxfaWRjKTsKICAgICAgICAgICAgbGV0IGNocm9tYV9mb3JtYXRfaWRjID0gMTsKICAgICAgICAgICAgbGV0IGNocm9tYV9mb3JtYXQgPSA0MjA7CiAgICAgICAgICAgIGxldCBjaHJvbWFfZm9ybWF0X3RhYmxlID0gWzAsIDQyMCwgNDIyLCA0NDRdOwogICAgICAgICAgICBsZXQgYml0X2RlcHRoID0gODsKCiAgICAgICAgICAgIGlmIChwcm9maWxlX2lkYyA9PT0gMTAwIHx8IHByb2ZpbGVfaWRjID09PSAxMTAgfHwgcHJvZmlsZV9pZGMgPT09IDEyMiB8fAogICAgICAgICAgICAgICAgcHJvZmlsZV9pZGMgPT09IDI0NCB8fCBwcm9maWxlX2lkYyA9PT0gNDQgfHwgcHJvZmlsZV9pZGMgPT09IDgzIHx8CiAgICAgICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gODYgfHwgcHJvZmlsZV9pZGMgPT09IDExOCB8fCBwcm9maWxlX2lkYyA9PT0gMTI4IHx8CiAgICAgICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gMTM4IHx8IHByb2ZpbGVfaWRjID09PSAxNDQpIHsKCiAgICAgICAgICAgICAgICBjaHJvbWFfZm9ybWF0X2lkYyA9IGdiLnJlYWRVRUcoKTsKICAgICAgICAgICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMykgewogICAgICAgICAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gc2VwYXJhdGVfY29sb3VyX3BsYW5lX2ZsYWcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA8PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgY2hyb21hX2Zvcm1hdCA9IGNocm9tYV9mb3JtYXRfdGFibGVbY2hyb21hX2Zvcm1hdF9pZGNdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGJpdF9kZXB0aCA9IGdiLnJlYWRVRUcoKSArIDg7ICAvLyBiaXRfZGVwdGhfbHVtYV9taW51czgKICAgICAgICAgICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGJpdF9kZXB0aF9jaHJvbWFfbWludXM4CiAgICAgICAgICAgICAgICBnYi5yZWFkQml0cygxKTsgIC8vIHFwcHJpbWVfeV96ZXJvX3RyYW5zZm9ybV9ieXBhc3NfZmxhZwogICAgICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHNlcV9zY2FsaW5nX21hdHJpeF9wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgICAgICBsZXQgc2NhbGluZ19saXN0X2NvdW50ID0gKGNocm9tYV9mb3JtYXRfaWRjICE9PSAzKSA/IDggOiAxMjsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjYWxpbmdfbGlzdF9jb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBzZXFfc2NhbGluZ19saXN0X3ByZXNlbnRfZmxhZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCA2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU1BTUGFyc2VyLl9za2lwU2NhbGluZ0xpc3QoZ2IsIDE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU1BTUGFyc2VyLl9za2lwU2NhbGluZ0xpc3QoZ2IsIDY0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBsb2cyX21heF9mcmFtZV9udW1fbWludXM0CiAgICAgICAgICAgIGxldCBwaWNfb3JkZXJfY250X3R5cGUgPSBnYi5yZWFkVUVHKCk7CiAgICAgICAgICAgIGlmIChwaWNfb3JkZXJfY250X3R5cGUgPT09IDApIHsKICAgICAgICAgICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGxvZzJfbWF4X3BpY19vcmRlcl9jbnRfbHNiX21pbnVzXzQKICAgICAgICAgICAgfSBlbHNlIGlmIChwaWNfb3JkZXJfY250X3R5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZGVsdGFfcGljX29yZGVyX2Fsd2F5c196ZXJvX2ZsYWcKICAgICAgICAgICAgICAgIGdiLnJlYWRTRUcoKTsgIC8vIG9mZnNldF9mb3Jfbm9uX3JlZl9waWMKICAgICAgICAgICAgICAgIGdiLnJlYWRTRUcoKTsgIC8vIG9mZnNldF9mb3JfdG9wX3RvX2JvdHRvbV9maWVsZAogICAgICAgICAgICAgICAgbGV0IG51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGUgPSBnYi5yZWFkVUVHKCk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGU7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGdiLnJlYWRTRUcoKTsgIC8vIG9mZnNldF9mb3JfcmVmX2ZyYW1lCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gbWF4X251bV9yZWZfZnJhbWVzCiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZ2Fwc19pbl9mcmFtZV9udW1fdmFsdWVfYWxsb3dlZF9mbGFnCgogICAgICAgICAgICBsZXQgcGljX3dpZHRoX2luX21ic19taW51czEgPSBnYi5yZWFkVUVHKCk7CiAgICAgICAgICAgIGxldCBwaWNfaGVpZ2h0X2luX21hcF91bml0c19taW51czEgPSBnYi5yZWFkVUVHKCk7CgogICAgICAgICAgICBsZXQgZnJhbWVfbWJzX29ubHlfZmxhZyA9IGdiLnJlYWRCaXRzKDEpOwogICAgICAgICAgICBpZiAoZnJhbWVfbWJzX29ubHlfZmxhZyA9PT0gMCkgewogICAgICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBtYl9hZGFwdGl2ZV9mcmFtZV9maWVsZF9mbGFnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBkaXJlY3RfOHg4X2luZmVyZW5jZV9mbGFnCgogICAgICAgICAgICBsZXQgZnJhbWVfY3JvcF9sZWZ0X29mZnNldCA9IDA7CiAgICAgICAgICAgIGxldCBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IDA7CiAgICAgICAgICAgIGxldCBmcmFtZV9jcm9wX3RvcF9vZmZzZXQgPSAwOwogICAgICAgICAgICBsZXQgZnJhbWVfY3JvcF9ib3R0b21fb2Zmc2V0ID0gMDsKCiAgICAgICAgICAgIGxldCBmcmFtZV9jcm9wcGluZ19mbGFnID0gZ2IucmVhZEJvb2woKTsKICAgICAgICAgICAgaWYgKGZyYW1lX2Nyb3BwaW5nX2ZsYWcpIHsKICAgICAgICAgICAgICAgIGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7CiAgICAgICAgICAgICAgICBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IGdiLnJlYWRVRUcoKTsKICAgICAgICAgICAgICAgIGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IGdiLnJlYWRVRUcoKTsKICAgICAgICAgICAgICAgIGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCA9IGdiLnJlYWRVRUcoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHNhcl93aWR0aCA9IDEsIHNhcl9oZWlnaHQgPSAxOwogICAgICAgICAgICBsZXQgZnBzID0gMCwgZnBzX2ZpeGVkID0gdHJ1ZSwgZnBzX251bSA9IDAsIGZwc19kZW4gPSAwOwoKICAgICAgICAgICAgbGV0IHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGdiLnJlYWRCb29sKCk7CiAgICAgICAgICAgIGlmICh2dWlfcGFyYW1ldGVyc19wcmVzZW50X2ZsYWcpIHsKICAgICAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBhc3BlY3RfcmF0aW9faW5mb19wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgICAgICBsZXQgYXNwZWN0X3JhdGlvX2lkYyA9IGdiLnJlYWRCeXRlKCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNhcl93X3RhYmxlID0gWzEsIDEyLCAxMCwgMTYsIDQwLCAyNCwgMjAsIDMyLCA4MCwgMTgsIDE1LCA2NCwgMTYwLCA0LCAzLCAyXTsKICAgICAgICAgICAgICAgICAgICBsZXQgc2FyX2hfdGFibGUgPSBbMSwgMTEsIDExLCAxMSwgMzMsIDExLCAxMSwgMTEsIDMzLCAxMSwgMTEsIDMzLCA5OSwgMywgMiwgMV07CgogICAgICAgICAgICAgICAgICAgIGlmIChhc3BlY3RfcmF0aW9faWRjID4gMCAmJiBhc3BlY3RfcmF0aW9faWRjIDwgMTYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2FyX3dpZHRoID0gc2FyX3dfdGFibGVbYXNwZWN0X3JhdGlvX2lkYyAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICBzYXJfaGVpZ2h0ID0gc2FyX2hfdGFibGVbYXNwZWN0X3JhdGlvX2lkYyAtIDFdOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNwZWN0X3JhdGlvX2lkYyA9PT0gMjU1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhcl93aWR0aCA9IGdiLnJlYWRCeXRlKCkgPDwgOCB8IGdiLnJlYWRCeXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhcl9oZWlnaHQgPSBnYi5yZWFkQnl0ZSgpIDw8IDggfCBnYi5yZWFkQnl0ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gb3ZlcnNjYW5faW5mb19wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgICAgICBnYi5yZWFkQm9vbCgpOyAgLy8gb3ZlcnNjYW5fYXBwcm9wcmlhdGVfZmxhZwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHZpZGVvX3NpZ25hbF90eXBlX3ByZXNlbnRfZmxhZwogICAgICAgICAgICAgICAgICAgIGdiLnJlYWRCaXRzKDQpOyAgLy8gdmlkZW9fZm9ybWF0ICYgdmlkZW9fZnVsbF9yYW5nZV9mbGFnCiAgICAgICAgICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIGNvbG91cl9kZXNjcmlwdGlvbl9wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgICAgICAgICAgZ2IucmVhZEJpdHMoMjQpOyAgLy8gY29sb3VyX3ByaW1hcmllcyAmIHRyYW5zZmVyX2NoYXJhY3RlcmlzdGljcyAmIG1hdHJpeF9jb2VmZmljaWVudHMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gY2hyb21hX2xvY19pbmZvX3ByZXNlbnRfZmxhZwogICAgICAgICAgICAgICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGNocm9tYV9zYW1wbGVfbG9jX3R5cGVfdG9wX2ZpZWxkCiAgICAgICAgICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gY2hyb21hX3NhbXBsZV9sb2NfdHlwZV9ib3R0b21fZmllbGQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyB0aW1pbmdfaW5mb19wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgICAgICBsZXQgbnVtX3VuaXRzX2luX3RpY2sgPSBnYi5yZWFkQml0cygzMik7CiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWVfc2NhbGUgPSBnYi5yZWFkQml0cygzMik7CiAgICAgICAgICAgICAgICAgICAgZnBzX2ZpeGVkID0gZ2IucmVhZEJvb2woKTsgIC8vIGZpeGVkX2ZyYW1lX3JhdGVfZmxhZwoKICAgICAgICAgICAgICAgICAgICBmcHNfbnVtID0gdGltZV9zY2FsZTsKICAgICAgICAgICAgICAgICAgICBmcHNfZGVuID0gbnVtX3VuaXRzX2luX3RpY2sgKiAyOwogICAgICAgICAgICAgICAgICAgIGZwcyA9IGZwc19udW0gLyBmcHNfZGVuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgc2FyU2NhbGUgPSAxOwogICAgICAgICAgICBpZiAoc2FyX3dpZHRoICE9PSAxIHx8IHNhcl9oZWlnaHQgIT09IDEpIHsKICAgICAgICAgICAgICAgIHNhclNjYWxlID0gc2FyX3dpZHRoIC8gc2FyX2hlaWdodDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGNyb3BfdW5pdF94ID0gMCwgY3JvcF91bml0X3kgPSAwOwogICAgICAgICAgICBpZiAoY2hyb21hX2Zvcm1hdF9pZGMgPT09IDApIHsKICAgICAgICAgICAgICAgIGNyb3BfdW5pdF94ID0gMTsKICAgICAgICAgICAgICAgIGNyb3BfdW5pdF95ID0gMiAtIGZyYW1lX21ic19vbmx5X2ZsYWc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsZXQgc3ViX3djID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAzKSA/IDEgOiAyOwogICAgICAgICAgICAgICAgbGV0IHN1Yl9oYyA9IChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMSkgPyAyIDogMTsKICAgICAgICAgICAgICAgIGNyb3BfdW5pdF94ID0gc3ViX3djOwogICAgICAgICAgICAgICAgY3JvcF91bml0X3kgPSBzdWJfaGMgKiAoMiAtIGZyYW1lX21ic19vbmx5X2ZsYWcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgY29kZWNfd2lkdGggPSAocGljX3dpZHRoX2luX21ic19taW51czEgKyAxKSAqIDE2OwogICAgICAgICAgICBsZXQgY29kZWNfaGVpZ2h0ID0gKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKSAqICgocGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxICsgMSkgKiAxNik7CgogICAgICAgICAgICBjb2RlY193aWR0aCAtPSAoZnJhbWVfY3JvcF9sZWZ0X29mZnNldCArIGZyYW1lX2Nyb3BfcmlnaHRfb2Zmc2V0KSAqIGNyb3BfdW5pdF94OwogICAgICAgICAgICBjb2RlY19oZWlnaHQgLT0gKGZyYW1lX2Nyb3BfdG9wX29mZnNldCArIGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCkgKiBjcm9wX3VuaXRfeTsKCiAgICAgICAgICAgIGxldCBwcmVzZW50X3dpZHRoID0gTWF0aC5jZWlsKGNvZGVjX3dpZHRoICogc2FyU2NhbGUpOwoKICAgICAgICAgICAgZ2IuZGVzdHJveSgpOwogICAgICAgICAgICBnYiA9IG51bGw7CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcHJvZmlsZV9zdHJpbmc6IHByb2ZpbGVfc3RyaW5nLCAgLy8gYmFzZWxpbmUsIGhpZ2gsIGhpZ2gxMCwgLi4uCiAgICAgICAgICAgICAgICBsZXZlbF9zdHJpbmc6IGxldmVsX3N0cmluZywgIC8vIDMsIDMuMSwgNCwgNC4xLCA1LCA1LjEsIC4uLgogICAgICAgICAgICAgICAgYml0X2RlcHRoOiBiaXRfZGVwdGgsICAvLyA4Yml0LCAxMGJpdCwgLi4uCiAgICAgICAgICAgICAgICBjaHJvbWFfZm9ybWF0OiBjaHJvbWFfZm9ybWF0LCAgLy8gNDoyOjAsIDQ6MjoyLCAuLi4KICAgICAgICAgICAgICAgIGNocm9tYV9mb3JtYXRfc3RyaW5nOiBTUFNQYXJzZXIuZ2V0Q2hyb21hRm9ybWF0U3RyaW5nKGNocm9tYV9mb3JtYXQpLAoKICAgICAgICAgICAgICAgIGZyYW1lX3JhdGU6IHsKICAgICAgICAgICAgICAgICAgICBmaXhlZDogZnBzX2ZpeGVkLAogICAgICAgICAgICAgICAgICAgIGZwczogZnBzLAogICAgICAgICAgICAgICAgICAgIGZwc19kZW46IGZwc19kZW4sCiAgICAgICAgICAgICAgICAgICAgZnBzX251bTogZnBzX251bQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzYXJfcmF0aW86IHsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2FyX3dpZHRoLAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogc2FyX2hlaWdodAogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBjb2RlY19zaXplOiB7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvZGVjX3dpZHRoLAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogY29kZWNfaGVpZ2h0CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHByZXNlbnRfc2l6ZTogewogICAgICAgICAgICAgICAgICAgIHdpZHRoOiBwcmVzZW50X3dpZHRoLAogICAgICAgICAgICAgICAgICAgIGhlaWdodDogY29kZWNfaGVpZ2h0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBzdGF0aWMgX3NraXBTY2FsaW5nTGlzdChnYiwgY291bnQpIHsKICAgICAgICAgICAgbGV0IGxhc3Rfc2NhbGUgPSA4LCBuZXh0X3NjYWxlID0gODsKICAgICAgICAgICAgbGV0IGRlbHRhX3NjYWxlID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAobmV4dF9zY2FsZSAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGRlbHRhX3NjYWxlID0gZ2IucmVhZFNFRygpOwogICAgICAgICAgICAgICAgICAgIG5leHRfc2NhbGUgPSAobGFzdF9zY2FsZSArIGRlbHRhX3NjYWxlICsgMjU2KSAlIDI1NjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxhc3Rfc2NhbGUgPSAobmV4dF9zY2FsZSA9PT0gMCkgPyBsYXN0X3NjYWxlIDogbmV4dF9zY2FsZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc3RhdGljIGdldFByb2ZpbGVTdHJpbmcocHJvZmlsZV9pZGMpIHsKICAgICAgICAgICAgc3dpdGNoIChwcm9maWxlX2lkYykgewogICAgICAgICAgICAgICAgY2FzZSA2NjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0Jhc2VsaW5lJzsKICAgICAgICAgICAgICAgIGNhc2UgNzc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdNYWluJzsKICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdFeHRlbmRlZCc7CiAgICAgICAgICAgICAgICBjYXNlIDEwMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0hpZ2gnOwogICAgICAgICAgICAgICAgY2FzZSAxMTA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoMTAnOwogICAgICAgICAgICAgICAgY2FzZSAxMjI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoNDIyJzsKICAgICAgICAgICAgICAgIGNhc2UgMjQ0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnSGlnaDQ0NCc7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHN0YXRpYyBnZXRMZXZlbFN0cmluZyhsZXZlbF9pZGMpIHsKICAgICAgICAgICAgcmV0dXJuIChsZXZlbF9pZGMgLyAxMCkudG9GaXhlZCgxKTsKICAgICAgICB9CgogICAgICAgIHN0YXRpYyBnZXRDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hKSB7CiAgICAgICAgICAgIHN3aXRjaCAoY2hyb21hKSB7CiAgICAgICAgICAgICAgICBjYXNlIDQyMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzQ6MjowJzsKICAgICAgICAgICAgICAgIGNhc2UgNDIyOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnNDoyOjInOwogICAgICAgICAgICAgICAgY2FzZSA0NDQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc0OjQ6NCc7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgfQoKICAgIC8vIC4uaW1wb3J0IERlbXV4RXJyb3JzIGZyb20gJy4vZGVtdXgtZXJyb3JzLmpzJzsKICAgIGNvbnN0IERlbXV4RXJyb3JzID0gewogICAgICAgIE9LOiAnT0snLAogICAgICAgIEZPUk1BVF9FUlJPUjogJ0Zvcm1hdEVycm9yJywKICAgICAgICBGT1JNQVRfVU5TVVBQT1JURUQ6ICdGb3JtYXRVbnN1cHBvcnRlZCcsCiAgICAgICAgQ09ERUNfVU5TVVBQT1JURUQ6ICdDb2RlY1Vuc3VwcG9ydGVkJwogICAgfTsKCiAgICAvLyAuLmltcG9ydCBNZWRpYUluZm8gZnJvbSAnLi4vY29yZS9tZWRpYS1pbmZvLmpzJzsKICAgIGNsYXNzIE1lZGlhSW5mbyB7CgogICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICB0aGlzLm1pbWVUeXBlID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5kdXJhdGlvbiA9IG51bGw7CgogICAgICAgICAgICB0aGlzLmhhc0F1ZGlvID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5oYXNWaWRlbyA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuYXVkaW9Db2RlYyA9IG51bGw7CiAgICAgICAgICAgIHRoaXMudmlkZW9Db2RlYyA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuYXVkaW9EYXRhUmF0ZSA9IG51bGw7CiAgICAgICAgICAgIHRoaXMudmlkZW9EYXRhUmF0ZSA9IG51bGw7CgogICAgICAgICAgICB0aGlzLmF1ZGlvU2FtcGxlUmF0ZSA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuYXVkaW9DaGFubmVsQ291bnQgPSBudWxsOwoKICAgICAgICAgICAgdGhpcy53aWR0aCA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5mcHMgPSBudWxsOwogICAgICAgICAgICB0aGlzLnByb2ZpbGUgPSBudWxsOwogICAgICAgICAgICB0aGlzLmxldmVsID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5jaHJvbWFGb3JtYXQgPSBudWxsOwogICAgICAgICAgICB0aGlzLnNhck51bSA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuc2FyRGVuID0gbnVsbDsKCiAgICAgICAgICAgIHRoaXMubWV0YWRhdGEgPSBudWxsOwogICAgICAgICAgICB0aGlzLnNlZ21lbnRzID0gbnVsbDsgIC8vIE1lZGlhSW5mb1tdCiAgICAgICAgICAgIHRoaXMuc2VnbWVudENvdW50ID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5oYXNLZXlmcmFtZXNJbmRleCA9IG51bGw7CiAgICAgICAgICAgIHRoaXMua2V5ZnJhbWVzSW5kZXggPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgaXNDb21wbGV0ZSgpIHsKICAgICAgICAgICAgbGV0IGF1ZGlvSW5mb0NvbXBsZXRlID0gKHRoaXMuaGFzQXVkaW8gPT09IGZhbHNlKSB8fAogICAgICAgICAgICAgICAgKHRoaXMuaGFzQXVkaW8gPT09IHRydWUgJiYKICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvQ29kZWMgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9TYW1wbGVSYXRlICE9IG51bGwgJiYKICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvQ2hhbm5lbENvdW50ICE9IG51bGwpOwoKICAgICAgICAgICAgbGV0IHZpZGVvSW5mb0NvbXBsZXRlID0gKHRoaXMuaGFzVmlkZW8gPT09IGZhbHNlKSB8fAogICAgICAgICAgICAgICAgKHRoaXMuaGFzVmlkZW8gPT09IHRydWUgJiYKICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvQ29kZWMgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGggIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ICE9IG51bGwgJiYKICAgICAgICAgICAgICAgICAgICB0aGlzLmZwcyAhPSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9maWxlICE9IG51bGwgJiYKICAgICAgICAgICAgICAgICAgICB0aGlzLmxldmVsICE9IG51bGwgJiYKICAgICAgICAgICAgICAgICAgICB0aGlzLmNocm9tYUZvcm1hdCAhPSBudWxsICYmCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXJOdW0gIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgIHRoaXMuc2FyRGVuICE9IG51bGwpOwoKICAgICAgICAgICAgLy8ga2V5ZnJhbWVzSW5kZXggbWF5IG5vdCBiZSBwcmVzZW50CiAgICAgICAgICAgIHJldHVybiB0aGlzLm1pbWVUeXBlICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb24gIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgdGhpcy5tZXRhZGF0YSAhPSBudWxsICYmCiAgICAgICAgICAgICAgICB0aGlzLmhhc0tleWZyYW1lc0luZGV4ICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIGF1ZGlvSW5mb0NvbXBsZXRlICYmCiAgICAgICAgICAgICAgICB2aWRlb0luZm9Db21wbGV0ZTsKICAgICAgICB9CgogICAgICAgIGlzU2Vla2FibGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0tleWZyYW1lc0luZGV4ID09PSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZ2V0TmVhcmVzdEtleWZyYW1lKG1pbGxpc2Vjb25kcykgewogICAgICAgICAgICBpZiAodGhpcy5rZXlmcmFtZXNJbmRleCA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHRhYmxlID0gdGhpcy5rZXlmcmFtZXNJbmRleDsKICAgICAgICAgICAgbGV0IGtleWZyYW1lSWR4ID0gdGhpcy5fc2VhcmNoKHRhYmxlLnRpbWVzLCBtaWxsaXNlY29uZHMpOwoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGluZGV4OiBrZXlmcmFtZUlkeCwKICAgICAgICAgICAgICAgIG1pbGxpc2Vjb25kczogdGFibGUudGltZXNba2V5ZnJhbWVJZHhdLAogICAgICAgICAgICAgICAgZmlsZXBvc2l0aW9uOiB0YWJsZS5maWxlcG9zaXRpb25zW2tleWZyYW1lSWR4XQogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgX3NlYXJjaChsaXN0LCB2YWx1ZSkgewogICAgICAgICAgICBsZXQgaWR4ID0gMDsKCiAgICAgICAgICAgIGxldCBsYXN0ID0gbGlzdC5sZW5ndGggLSAxOwogICAgICAgICAgICBsZXQgbWlkID0gMDsKICAgICAgICAgICAgbGV0IGxib3VuZCA9IDA7CiAgICAgICAgICAgIGxldCB1Ym91bmQgPSBsYXN0OwoKICAgICAgICAgICAgaWYgKHZhbHVlIDwgbGlzdFswXSkgewogICAgICAgICAgICAgICAgaWR4ID0gMDsKICAgICAgICAgICAgICAgIGxib3VuZCA9IHVib3VuZCArIDE7ICAvLyBza2lwIHNlYXJjaAogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSAobGJvdW5kIDw9IHVib3VuZCkgewogICAgICAgICAgICAgICAgbWlkID0gbGJvdW5kICsgTWF0aC5mbG9vcigodWJvdW5kIC0gbGJvdW5kKSAvIDIpOwogICAgICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAodmFsdWUgPj0gbGlzdFttaWRdICYmIHZhbHVlIDwgbGlzdFttaWQgKyAxXSkpIHsKICAgICAgICAgICAgICAgICAgICBpZHggPSBtaWQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RbbWlkXSA8IHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgbGJvdW5kID0gbWlkICsgMTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdWJvdW5kID0gbWlkIC0gMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGlkeDsKICAgICAgICB9CgogICAgfQoKICAgIGZ1bmN0aW9uIFJlYWRCaWczMihhcnJheSwgaW5kZXgpIHsKICAgICAgICByZXR1cm4gKChhcnJheVtpbmRleF0gPDwgMjQpIHwKICAgICAgICAgICAgKGFycmF5W2luZGV4ICsgMV0gPDwgMTYpIHwKICAgICAgICAgICAgKGFycmF5W2luZGV4ICsgMl0gPDwgOCkgfAogICAgICAgICAgICAoYXJyYXlbaW5kZXggKyAzXSkpOwogICAgfQoKICAgIGNsYXNzIEZMVkRlbXV4ZXIgewoKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGUgYSBuZXcgRkxWIGRlbXV4ZXIKICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvYmVEYXRhCiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBwcm9iZURhdGEubWF0Y2gKICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJvYmVEYXRhLmNvbnN1bWVkCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHByb2JlRGF0YS5kYXRhT2Zmc2V0CiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBwcm9iZURhdGEuaGFzQXVkaW9UcmFjawogICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvYmVEYXRhLmhhc1ZpZGVvVHJhY2sKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcihwcm9iZURhdGEpIHsKICAgICAgICAgICAgdGhpcy5UQUcgPSAnRkxWRGVtdXhlcic7CgogICAgICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBudWxsOwogICAgICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEgPSBudWxsOwogICAgICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUgPSBudWxsOwoKICAgICAgICAgICAgdGhpcy5fZGF0YU9mZnNldCA9IHByb2JlRGF0YS5kYXRhT2Zmc2V0OwogICAgICAgICAgICB0aGlzLl9maXJzdFBhcnNlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTsKCiAgICAgICAgICAgIHRoaXMuX2hhc0F1ZGlvID0gcHJvYmVEYXRhLmhhc0F1ZGlvVHJhY2s7CiAgICAgICAgICAgIHRoaXMuX2hhc1ZpZGVvID0gcHJvYmVEYXRhLmhhc1ZpZGVvVHJhY2s7CgogICAgICAgICAgICB0aGlzLl9oYXNBdWRpb0ZsYWdPdmVycmlkZWQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5faGFzVmlkZW9GbGFnT3ZlcnJpZGVkID0gZmFsc2U7CgogICAgICAgICAgICB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gZmFsc2U7CgogICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8gPSBuZXcgTWVkaWFJbmZvKCk7CiAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNBdWRpbyA9IHRoaXMuX2hhc0F1ZGlvOwogICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzVmlkZW8gPSB0aGlzLl9oYXNWaWRlbzsKICAgICAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSBudWxsOwogICAgICAgICAgICB0aGlzLl9hdWRpb01ldGFkYXRhID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5fdmlkZW9NZXRhZGF0YSA9IG51bGw7CgogICAgICAgICAgICB0aGlzLl9uYWx1TGVuZ3RoU2l6ZSA9IDQ7CiAgICAgICAgICAgIHRoaXMuX3RpbWVzdGFtcEJhc2UgPSAwOyAgLy8gaW50MzIsIGluIG1pbGxpc2Vjb25kcwogICAgICAgICAgICB0aGlzLl90aW1lc2NhbGUgPSAxMDAwOwogICAgICAgICAgICB0aGlzLl9kdXJhdGlvbiA9IDA7ICAvLyBpbnQzMiwgaW4gbWlsbGlzZWNvbmRzCiAgICAgICAgICAgIHRoaXMuX2R1cmF0aW9uT3ZlcnJpZGVkID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZSA9IHsKICAgICAgICAgICAgICAgIGZpeGVkOiB0cnVlLAogICAgICAgICAgICAgICAgZnBzOiAyMy45NzYsCiAgICAgICAgICAgICAgICBmcHNfbnVtOiAyMzk3NiwKICAgICAgICAgICAgICAgIGZwc19kZW46IDEwMDAKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRoaXMuX2ZsdlNvdW5kUmF0ZVRhYmxlID0gWzU1MDAsIDExMDI1LCAyMjA1MCwgNDQxMDAsIDQ4MDAwXTsKCiAgICAgICAgICAgIHRoaXMuX21wZWdTYW1wbGluZ1JhdGVzID0gWwogICAgICAgICAgICAgICAgOTYwMDAsIDg4MjAwLCA2NDAwMCwgNDgwMDAsIDQ0MTAwLCAzMjAwMCwKICAgICAgICAgICAgICAgIDI0MDAwLCAyMjA1MCwgMTYwMDAsIDEyMDAwLCAxMTAyNSwgODAwMCwgNzM1MAogICAgICAgICAgICBdOwoKICAgICAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvVjEwU2FtcGxlUmF0ZVRhYmxlID0gWzQ0MTAwLCA0ODAwMCwgMzIwMDAsIDBdOwogICAgICAgICAgICB0aGlzLl9tcGVnQXVkaW9WMjBTYW1wbGVSYXRlVGFibGUgPSBbMjIwNTAsIDI0MDAwLCAxNjAwMCwgMF07CiAgICAgICAgICAgIHRoaXMuX21wZWdBdWRpb1YyNVNhbXBsZVJhdGVUYWJsZSA9IFsxMTAyNSwgMTIwMDAsIDgwMDAsIDBdOwoKICAgICAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvTDFCaXRSYXRlVGFibGUgPSBbMCwgMzIsIDY0LCA5NiwgMTI4LCAxNjAsIDE5MiwgMjI0LCAyNTYsIDI4OCwgMzIwLCAzNTIsIDM4NCwgNDE2LCA0NDgsIC0xXTsKICAgICAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvTDJCaXRSYXRlVGFibGUgPSBbMCwgMzIsIDQ4LCA1NiwgNjQsIDgwLCA5NiwgMTEyLCAxMjgsIDE2MCwgMTkyLCAyMjQsIDI1NiwgMzIwLCAzODQsIC0xXTsKICAgICAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvTDNCaXRSYXRlVGFibGUgPSBbMCwgMzIsIDQwLCA0OCwgNTYsIDY0LCA4MCwgOTYsIDExMiwgMTI4LCAxNjAsIDE5MiwgMjI0LCAyNTYsIDMyMCwgLTFdOwoKICAgICAgICAgICAgdGhpcy5fdmlkZW9UcmFjayA9IHsgdHlwZTogJ3ZpZGVvJywgaWQ6IDEsIHNlcXVlbmNlTnVtYmVyOiAwLCBzYW1wbGVzOiBbXSwgbGVuZ3RoOiAwIH07CiAgICAgICAgICAgIHRoaXMuX2F1ZGlvVHJhY2sgPSB7IHR5cGU6ICdhdWRpbycsIGlkOiAyLCBzZXF1ZW5jZU51bWJlcjogMCwgc2FtcGxlczogW10sIGxlbmd0aDogMCB9OwoKICAgICAgICAgICAgdGhpcy5fbGl0dGxlRW5kaWFuID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxldCBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMik7CiAgICAgICAgICAgICAgICAobmV3IERhdGFWaWV3KGJ1ZikpLnNldEludDE2KDAsIDI1NiwgdHJ1ZSk7ICAvLyBsaXR0bGUtZW5kaWFuIHdyaXRlCiAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBJbnQxNkFycmF5KGJ1ZikpWzBdID09PSAyNTY7ICAvLyBwbGF0Zm9ybS1zcGVjIHJlYWQsIGlmIGVxdWFsIHRoZW4gTEUKICAgICAgICAgICAgfSkoKTsKICAgICAgICB9CgogICAgICAgIGRlc3Ryb3koKSB7CiAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mbyA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuX21ldGFkYXRhID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5fYXVkaW9NZXRhZGF0YSA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuX3ZpZGVvTWV0YWRhdGEgPSBudWxsOwogICAgICAgICAgICB0aGlzLl92aWRlb1RyYWNrID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5fYXVkaW9UcmFjayA9IG51bGw7CgogICAgICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBudWxsOwogICAgICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEgPSBudWxsOwogICAgICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogUHJvYmUgdGhlIGZsdiBkYXRhCiAgICAgICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYnVmZmVyCiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gLSBwcm9iZURhdGEgdG8gYmUgZmVlZCBpbnRvIGNvbnN0cnVjdG9yCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIHByb2JlKGJ1ZmZlcikgewogICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7CiAgICAgICAgICAgIGxldCBtaXNtYXRjaCA9IHsgbWF0Y2g6IGZhbHNlIH07CgogICAgICAgICAgICBpZiAoZGF0YVswXSAhPT0gMHg0NiB8fCBkYXRhWzFdICE9PSAweDRDIHx8IGRhdGFbMl0gIT09IDB4NTYgfHwgZGF0YVszXSAhPT0gMHgwMSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG1pc21hdGNoOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgaGFzQXVkaW8gPSAoKGRhdGFbNF0gJiA0KSA+Pj4gMikgIT09IDA7CiAgICAgICAgICAgIGxldCBoYXNWaWRlbyA9IChkYXRhWzRdICYgMSkgIT09IDA7CgogICAgICAgICAgICBsZXQgb2Zmc2V0ID0gUmVhZEJpZzMyKGRhdGEsIDUpOwoKICAgICAgICAgICAgaWYgKG9mZnNldCA8IDkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBtaXNtYXRjaDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG1hdGNoOiB0cnVlLAogICAgICAgICAgICAgICAgY29uc3VtZWQ6IG9mZnNldCwKICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQ6IG9mZnNldCwKICAgICAgICAgICAgICAgIGhhc0F1ZGlvVHJhY2s6IGhhc0F1ZGlvLAogICAgICAgICAgICAgICAgaGFzVmlkZW9UcmFjazogaGFzVmlkZW8KICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIGJpbmREYXRhU291cmNlKGxvYWRlcikgewogICAgICAgICAgICBsb2FkZXIub25EYXRhQXJyaXZhbCA9IHRoaXMucGFyc2VDaHVua3MuYmluZCh0aGlzKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICAvLyBwcm90b3R5cGU6IGZ1bmN0aW9uKHR5cGU6IHN0cmluZywgbWV0YWRhdGE6IGFueSk6IHZvaWQKICAgICAgICBnZXQgb25UcmFja01ldGFkYXRhKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fb25UcmFja01ldGFkYXRhOwogICAgICAgIH0KCiAgICAgICAgc2V0IG9uVHJhY2tNZXRhZGF0YShjYWxsYmFjaykgewogICAgICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEgPSBjYWxsYmFjazsKICAgICAgICB9CgogICAgICAgIC8vIHByb3RvdHlwZTogZnVuY3Rpb24obWVkaWFJbmZvOiBNZWRpYUluZm8pOiB2b2lkCiAgICAgICAgZ2V0IG9uTWVkaWFJbmZvKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fb25NZWRpYUluZm87CiAgICAgICAgfQoKICAgICAgICBzZXQgb25NZWRpYUluZm8oY2FsbGJhY2spIHsKICAgICAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBjYWxsYmFjazsKICAgICAgICB9CgogICAgICAgIC8vIHByb3RvdHlwZTogZnVuY3Rpb24odHlwZTogbnVtYmVyLCBpbmZvOiBzdHJpbmcpOiB2b2lkCiAgICAgICAgZ2V0IG9uRXJyb3IoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbkVycm9yOwogICAgICAgIH0KCiAgICAgICAgc2V0IG9uRXJyb3IoY2FsbGJhY2spIHsKICAgICAgICAgICAgdGhpcy5fb25FcnJvciA9IGNhbGxiYWNrOwogICAgICAgIH0KCiAgICAgICAgLy8gcHJvdG90eXBlOiBmdW5jdGlvbih2aWRlb1RyYWNrOiBhbnksIGF1ZGlvVHJhY2s6IGFueSk6IHZvaWQKICAgICAgICBnZXQgb25EYXRhQXZhaWxhYmxlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fb25EYXRhQXZhaWxhYmxlOwogICAgICAgIH0KCiAgICAgICAgc2V0IG9uRGF0YUF2YWlsYWJsZShjYWxsYmFjaykgewogICAgICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUgPSBjYWxsYmFjazsKICAgICAgICB9CgogICAgICAgIC8vIHRpbWVzdGFtcCBiYXNlIGZvciBvdXRwdXQgc2FtcGxlcywgbXVzdCBiZSBpbiBtaWxsaXNlY29uZHMKICAgICAgICBnZXQgdGltZXN0YW1wQmFzZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVzdGFtcEJhc2U7CiAgICAgICAgfQoKICAgICAgICBzZXQgdGltZXN0YW1wQmFzZShiYXNlKSB7CiAgICAgICAgICAgIHRoaXMuX3RpbWVzdGFtcEJhc2UgPSBiYXNlOwogICAgICAgIH0KCiAgICAgICAgZ2V0IG92ZXJyaWRlZER1cmF0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZHVyYXRpb247CiAgICAgICAgfQoKICAgICAgICAvLyBGb3JjZS1vdmVycmlkZSBtZWRpYSBkdXJhdGlvbi4gTXVzdCBiZSBpbiBtaWxsaXNlY29uZHMsIGludDMyCiAgICAgICAgc2V0IG92ZXJyaWRlZER1cmF0aW9uKGR1cmF0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuX2R1cmF0aW9uT3ZlcnJpZGVkID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5fZHVyYXRpb24gPSBkdXJhdGlvbjsKICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmR1cmF0aW9uID0gZHVyYXRpb247CiAgICAgICAgfQoKICAgICAgICAvLyBGb3JjZS1vdmVycmlkZSBhdWRpbyB0cmFjayBwcmVzZW50IGZsYWcsIGJvb2xlYW4KICAgICAgICBzZXQgb3ZlcnJpZGVkSGFzQXVkaW8oaGFzQXVkaW8pIHsKICAgICAgICAgICAgdGhpcy5faGFzQXVkaW9GbGFnT3ZlcnJpZGVkID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5faGFzQXVkaW8gPSBoYXNBdWRpbzsKICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc0F1ZGlvID0gaGFzQXVkaW87CiAgICAgICAgfQoKICAgICAgICAvLyBGb3JjZS1vdmVycmlkZSB2aWRlbyB0cmFjayBwcmVzZW50IGZsYWcsIGJvb2xlYW4KICAgICAgICBzZXQgb3ZlcnJpZGVkSGFzVmlkZW8oaGFzVmlkZW8pIHsKICAgICAgICAgICAgdGhpcy5faGFzVmlkZW9GbGFnT3ZlcnJpZGVkID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5faGFzVmlkZW8gPSBoYXNWaWRlbzsKICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gaGFzVmlkZW87CiAgICAgICAgfQoKICAgICAgICByZXNldE1lZGlhSW5mbygpIHsKICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvID0gbmV3IE1lZGlhSW5mbygpOwogICAgICAgIH0KCiAgICAgICAgX2lzSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2hhc0F1ZGlvICYmIHRoaXMuX2hhc1ZpZGVvKSB7ICAvLyBib3RoIGF1ZGlvICYgdmlkZW8KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQgJiYgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLl9oYXNBdWRpbyAmJiAhdGhpcy5faGFzVmlkZW8pIHsgIC8vIGF1ZGlvIG9ubHkKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdWRpb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCF0aGlzLl9oYXNBdWRpbyAmJiB0aGlzLl9oYXNWaWRlbykgeyAgLy8gdmlkZW8gb25seQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGVvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAvLyBmdW5jdGlvbiBwYXJzZUNodW5rcyhjaHVuazogQXJyYXlCdWZmZXIsIGJ5dGVTdGFydDogbnVtYmVyKTogbnVtYmVyOwogICAgICAgIHBhcnNlQ2h1bmtzKGNodW5rLCBieXRlU3RhcnQpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLl9vbkVycm9yIHx8ICF0aGlzLl9vbk1lZGlhSW5mbyB8fCAhdGhpcy5fb25UcmFja01ldGFkYXRhIHx8ICF0aGlzLl9vbkRhdGFBdmFpbGFibGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0Zsdjogb25FcnJvciAmIG9uTWVkaWFJbmZvICYgb25UcmFja01ldGFkYXRhICYgb25EYXRhQXZhaWxhYmxlIGNhbGxiYWNrIG11c3QgYmUgc3BlY2lmaWVkJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHFsaTU6IGZpeCBub256ZXJvIGJ5dGVTdGFydAogICAgICAgICAgICBsZXQgb2Zmc2V0ID0gYnl0ZVN0YXJ0IHx8IDA7CiAgICAgICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjsKCiAgICAgICAgICAgIGlmIChieXRlU3RhcnQgPT09IDApIHsgIC8vIGJ1ZmZlciB3aXRoIEZMViBoZWFkZXIKICAgICAgICAgICAgICAgIGlmIChjaHVuay5ieXRlTGVuZ3RoID4gMTMpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgcHJvYmVEYXRhID0gRkxWRGVtdXhlci5wcm9iZShjaHVuayk7CiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gcHJvYmVEYXRhLmRhdGFPZmZzZXQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy5fZmlyc3RQYXJzZSkgeyAgLy8gaGFuZGxlIFByZXZpb3VzVGFnU2l6ZTAgYmVmb3JlIFRhZzEKICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0UGFyc2UgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgIT09IHRoaXMuX2RhdGFPZmZzZXQpIHsKICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZpcnN0IHRpbWUgcGFyc2luZyBidXQgY2h1bmsgYnl0ZVN0YXJ0IGludmFsaWQhJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoY2h1bmssIG9mZnNldCk7CiAgICAgICAgICAgICAgICBsZXQgcHJldlRhZ1NpemUwID0gdi5nZXRVaW50MzIoMCwgIWxlKTsKICAgICAgICAgICAgICAgIGlmIChwcmV2VGFnU2l6ZTAgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ1ByZXZUYWdTaXplMCAhPT0gMCAhISEnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG9mZnNldCArPSA0OwogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSAob2Zmc2V0IDwgY2h1bmsuYnl0ZUxlbmd0aCkgewogICAgICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSB0cnVlOwoKICAgICAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGNodW5rLCBvZmZzZXQpOwoKICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgKyAxMSArIDQgPiBjaHVuay5ieXRlTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBub3QgZW5vdWdoIGZvciBwYXJzaW5nIGFuIGZsdiB0YWcKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgdGFnVHlwZSA9IHYuZ2V0VWludDgoMCk7CiAgICAgICAgICAgICAgICBsZXQgZGF0YVNpemUgPSB2LmdldFVpbnQzMigwLCAhbGUpICYgMHgwMEZGRkZGRjsKCiAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ICsgMTEgKyBkYXRhU2l6ZSArIDQgPiBjaHVuay5ieXRlTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YSBub3QgZW5vdWdoIGZvciBwYXJzaW5nIGFjdHVhbCBkYXRhIGJvZHkKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodGFnVHlwZSAhPT0gOCAmJiB0YWdUeXBlICE9PSA5ICYmIHRhZ1R5cGUgIT09IDE4KSB7CiAgICAgICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsIFxgVW5zdXBwb3J0ZWQgdGFnIHR5cGUgXCR7dGFnVHlwZX0sIHNraXBwZWRcYCk7CiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3VtZSB0aGUgd2hvbGUgdGFnIChza2lwIGl0KQogICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxMSArIGRhdGFTaXplICsgNDsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgdHMyID0gdi5nZXRVaW50OCg0KTsKICAgICAgICAgICAgICAgIGxldCB0czEgPSB2LmdldFVpbnQ4KDUpOwogICAgICAgICAgICAgICAgbGV0IHRzMCA9IHYuZ2V0VWludDgoNik7CiAgICAgICAgICAgICAgICBsZXQgdHMzID0gdi5nZXRVaW50OCg3KTsKCiAgICAgICAgICAgICAgICBsZXQgdGltZXN0YW1wID0gdHMwIHwgKHRzMSA8PCA4KSB8ICh0czIgPDwgMTYpIHwgKHRzMyA8PCAyNCk7CgogICAgICAgICAgICAgICAgbGV0IHN0cmVhbUlkID0gdi5nZXRVaW50MzIoNywgIWxlKSAmIDB4MDBGRkZGRkY7CiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtSWQgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ01lZXQgdGFnIHdoaWNoIGhhcyBTdHJlYW1JRCAhPSAwIScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxldCBkYXRhT2Zmc2V0ID0gb2Zmc2V0ICsgMTE7CgogICAgICAgICAgICAgICAgc3dpdGNoICh0YWdUeXBlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OiAgLy8gQXVkaW8KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VBdWRpb0RhdGEoY2h1bmssIGRhdGFPZmZzZXQsIGRhdGFTaXplLCB0aW1lc3RhbXApOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDk6ICAvLyBWaWRlbwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZVZpZGVvRGF0YShjaHVuaywgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRpbWVzdGFtcCwgYnl0ZVN0YXJ0ICsgb2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxODogIC8vIFNjcmlwdERhdGFPYmplY3QKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VTY3JpcHREYXRhKGNodW5rLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxldCBwcmV2VGFnU2l6ZSA9IHYuZ2V0VWludDMyKDExICsgZGF0YVNpemUsICFsZSk7CiAgICAgICAgICAgICAgICBpZiAocHJldlRhZ1NpemUgIT09IDExICsgZGF0YVNpemUpIHsKICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgXGBJbnZhbGlkIFByZXZUYWdTaXplIFwke3ByZXZUYWdTaXplfVxgKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTEgKyBkYXRhU2l6ZSArIDQ7ICAvLyB0YWdCb2R5ICsgZGF0YVNpemUgKyBwcmV2VGFnU2l6ZQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBkaXNwYXRjaCBwYXJzZWQgZnJhbWVzIHRvIGNvbnN1bWVyICh0eXBpY2FsbHksIHRoZSByZW11eGVyKQogICAgICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gb2Zmc2V0OyAgLy8gY29uc3VtZWQgYnl0ZXMsIGp1c3QgZXF1YWxzIGxhdGVzdCBvZmZzZXQgaW5kZXgKICAgICAgICB9CgogICAgICAgIF9wYXJzZVNjcmlwdERhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7CiAgICAgICAgICAgIGxldCBzY3JpcHREYXRhID0gQU1GLnBhcnNlU2NyaXB0RGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwoKICAgICAgICAgICAgaWYgKHNjcmlwdERhdGEuaGFzT3duUHJvcGVydHkoJ29uTWV0YURhdGEnKSkgewogICAgICAgICAgICAgICAgaWYgKHNjcmlwdERhdGEub25NZXRhRGF0YSA9PSBudWxsIHx8IHR5cGVvZiBzY3JpcHREYXRhLm9uTWV0YURhdGEgIT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdJbnZhbGlkIG9uTWV0YURhdGEgc3RydWN0dXJlIScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tZXRhZGF0YSkgewogICAgICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBvbk1ldGFEYXRhIHRhZyEnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuX21ldGFkYXRhID0gc2NyaXB0RGF0YTsKICAgICAgICAgICAgICAgIGxldCBvbk1ldGFEYXRhID0gdGhpcy5fbWV0YWRhdGEub25NZXRhRGF0YTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuaGFzQXVkaW8gPT09ICdib29sZWFuJykgeyAgLy8gaGFzQXVkaW8KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faGFzQXVkaW9GbGFnT3ZlcnJpZGVkID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNBdWRpbyA9IG9uTWV0YURhdGEuaGFzQXVkaW87CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNBdWRpbyA9IHRoaXMuX2hhc0F1ZGlvOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oYXNWaWRlbyA9PT0gJ2Jvb2xlYW4nKSB7ICAvLyBoYXNWaWRlbwogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oYXNWaWRlb0ZsYWdPdmVycmlkZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc1ZpZGVvID0gb25NZXRhRGF0YS5oYXNWaWRlbzsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gdGhpcy5faGFzVmlkZW87CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmF1ZGlvZGF0YXJhdGUgPT09ICdudW1iZXInKSB7ICAvLyBhdWRpb2RhdGFyYXRlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmF1ZGlvRGF0YVJhdGUgPSBvbk1ldGFEYXRhLmF1ZGlvZGF0YXJhdGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEudmlkZW9kYXRhcmF0ZSA9PT0gJ251bWJlcicpIHsgIC8vIHZpZGVvZGF0YXJhdGUKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8udmlkZW9EYXRhUmF0ZSA9IG9uTWV0YURhdGEudmlkZW9kYXRhcmF0ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS53aWR0aCA9PT0gJ251bWJlcicpIHsgIC8vIHdpZHRoCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLndpZHRoID0gb25NZXRhRGF0YS53aWR0aDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oZWlnaHQgPT09ICdudW1iZXInKSB7ICAvLyBoZWlnaHQKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGVpZ2h0ID0gb25NZXRhRGF0YS5oZWlnaHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuZHVyYXRpb24gPT09ICdudW1iZXInKSB7ICAvLyBkdXJhdGlvbgogICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fZHVyYXRpb25PdmVycmlkZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gTWF0aC5mbG9vcihvbk1ldGFEYXRhLmR1cmF0aW9uICogdGhpcy5fdGltZXNjYWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHVyYXRpb24gPSBkdXJhdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmR1cmF0aW9uID0gZHVyYXRpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uZHVyYXRpb24gPSAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmZyYW1lcmF0ZSA9PT0gJ251bWJlcicpIHsgIC8vIGZyYW1lcmF0ZQogICAgICAgICAgICAgICAgICAgIGxldCBmcHNfbnVtID0gTWF0aC5mbG9vcihvbk1ldGFEYXRhLmZyYW1lcmF0ZSAqIDEwMDApOwogICAgICAgICAgICAgICAgICAgIGlmIChmcHNfbnVtID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnBzID0gZnBzX251bSAvIDEwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5maXhlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHMgPSBmcHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHNfbnVtID0gZnBzX251bTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmZXJlbmNlRnJhbWVSYXRlLmZwc19kZW4gPSAxMDAwOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uZnBzID0gZnBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5rZXlmcmFtZXMgPT09ICdvYmplY3QnKSB7ICAvLyBrZXlmcmFtZXMKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzS2V5ZnJhbWVzSW5kZXggPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxldCBrZXlmcmFtZXMgPSBvbk1ldGFEYXRhLmtleWZyYW1lczsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8ua2V5ZnJhbWVzSW5kZXggPSB0aGlzLl9wYXJzZUtleWZyYW1lc0luZGV4KGtleWZyYW1lcyk7CiAgICAgICAgICAgICAgICAgICAgb25NZXRhRGF0YS5rZXlmcmFtZXMgPSBudWxsOyAgLy8ga2V5ZnJhbWVzIGhhcyBiZWVuIGV4dHJhY3RlZCwgcmVtb3ZlIGl0CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNLZXlmcmFtZXNJbmRleCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5tZXRhZGF0YSA9IG9uTWV0YURhdGE7CiAgICAgICAgICAgICAgICBMb2cudih0aGlzLlRBRywgJ1BhcnNlZCBvbk1ldGFEYXRhJyk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbWVkaWFJbmZvLmlzQ29tcGxldGUoKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVkaWFJbmZvKHRoaXMuX21lZGlhSW5mbyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF9wYXJzZUtleWZyYW1lc0luZGV4KGtleWZyYW1lcykgewogICAgICAgICAgICBsZXQgdGltZXMgPSBbXTsKICAgICAgICAgICAgbGV0IGZpbGVwb3NpdGlvbnMgPSBbXTsKCiAgICAgICAgICAgIC8vIGlnbm9yZSBmaXJzdCBrZXlmcmFtZSB3aGljaCBpcyBhY3R1YWxseSBBVkMgU2VxdWVuY2UgSGVhZGVyIChBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCkKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBrZXlmcmFtZXMudGltZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCB0aW1lID0gdGhpcy5fdGltZXN0YW1wQmFzZSArIE1hdGguZmxvb3Ioa2V5ZnJhbWVzLnRpbWVzW2ldICogMTAwMCk7CiAgICAgICAgICAgICAgICB0aW1lcy5wdXNoKHRpbWUpOwogICAgICAgICAgICAgICAgZmlsZXBvc2l0aW9ucy5wdXNoKGtleWZyYW1lcy5maWxlcG9zaXRpb25zW2ldKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHRpbWVzOiB0aW1lcywKICAgICAgICAgICAgICAgIGZpbGVwb3NpdGlvbnM6IGZpbGVwb3NpdGlvbnMKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIF9wYXJzZUF1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCkgewogICAgICAgICAgICBpZiAoZGF0YVNpemUgPD0gMSkgewogICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgYXVkaW8gcGFja2V0LCBtaXNzaW5nIFNvdW5kRGF0YSBwYXlsb2FkIScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy5faGFzQXVkaW9GbGFnT3ZlcnJpZGVkID09PSB0cnVlICYmIHRoaXMuX2hhc0F1ZGlvID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgLy8gSWYgaGFzQXVkaW86IGZhbHNlIGluZGljYXRlZCBleHBsaWNpdGx5IGluIE1lZGlhRGF0YVNvdXJjZSwKICAgICAgICAgICAgICAgIC8vIElnbm9yZSBhbGwgdGhlIGF1ZGlvIHBhY2tldHMKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuOwogICAgICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwoKICAgICAgICAgICAgbGV0IHNvdW5kU3BlYyA9IHYuZ2V0VWludDgoMCk7CgogICAgICAgICAgICBsZXQgc291bmRGb3JtYXQgPSBzb3VuZFNwZWMgPj4+IDQ7CiAgICAgICAgICAgIGlmIChzb3VuZEZvcm1hdCAhPT0gMiAmJiBzb3VuZEZvcm1hdCAhPT0gMTApIHsgIC8vIE1QMyBvciBBQUMKICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuQ09ERUNfVU5TVVBQT1JURUQsICdGbHY6IFVuc3VwcG9ydGVkIGF1ZGlvIGNvZGVjIGlkeDogJyArIHNvdW5kRm9ybWF0KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHNvdW5kUmF0ZSA9IDA7CiAgICAgICAgICAgIGxldCBzb3VuZFJhdGVJbmRleCA9IChzb3VuZFNwZWMgJiAxMikgPj4+IDI7CiAgICAgICAgICAgIGlmIChzb3VuZFJhdGVJbmRleCA+PSAwICYmIHNvdW5kUmF0ZUluZGV4IDw9IDQpIHsKICAgICAgICAgICAgICAgIHNvdW5kUmF0ZSA9IHRoaXMuX2ZsdlNvdW5kUmF0ZVRhYmxlW3NvdW5kUmF0ZUluZGV4XTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCAnRmx2OiBJbnZhbGlkIGF1ZGlvIHNhbXBsZSByYXRlIGlkeDogJyArIHNvdW5kUmF0ZUluZGV4KTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgc291bmRUeXBlID0gKHNvdW5kU3BlYyAmIDEpOwoKCiAgICAgICAgICAgIGxldCBtZXRhID0gdGhpcy5fYXVkaW9NZXRhZGF0YTsKICAgICAgICAgICAgbGV0IHRyYWNrID0gdGhpcy5fYXVkaW9UcmFjazsKCiAgICAgICAgICAgIGlmICghbWV0YSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuX2hhc0F1ZGlvID09PSBmYWxzZSAmJiB0aGlzLl9oYXNBdWRpb0ZsYWdPdmVycmlkZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFzQXVkaW8gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNBdWRpbyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gaW5pdGlhbCBtZXRhZGF0YQogICAgICAgICAgICAgICAgbWV0YSA9IHRoaXMuX2F1ZGlvTWV0YWRhdGEgPSB7fTsKICAgICAgICAgICAgICAgIG1ldGEudHlwZSA9ICdhdWRpbyc7CiAgICAgICAgICAgICAgICBtZXRhLmlkID0gdHJhY2suaWQ7CiAgICAgICAgICAgICAgICBtZXRhLnRpbWVzY2FsZSA9IHRoaXMuX3RpbWVzY2FsZTsKICAgICAgICAgICAgICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9kdXJhdGlvbjsKICAgICAgICAgICAgICAgIG1ldGEuYXVkaW9TYW1wbGVSYXRlID0gc291bmRSYXRlOwogICAgICAgICAgICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSAoc291bmRUeXBlID09PSAwID8gMSA6IDIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoc291bmRGb3JtYXQgPT09IDEwKSB7ICAvLyBBQUMKICAgICAgICAgICAgICAgIGxldCBhYWNEYXRhID0gdGhpcy5fcGFyc2VBQUNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpOwoKICAgICAgICAgICAgICAgIGlmIChhYWNEYXRhID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYWFjRGF0YS5wYWNrZXRUeXBlID09PSAwKSB7ICAvLyBBQUMgc2VxdWVuY2UgaGVhZGVyIChBdWRpb1NwZWNpZmljQ29uZmlnKQogICAgICAgICAgICAgICAgICAgIGlmIChtZXRhLmNvbmZpZykgewogICAgICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZvdW5kIGFub3RoZXIgQXVkaW9TcGVjaWZpY0NvbmZpZyEnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IG1pc2MgPSBhYWNEYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgbWV0YS5hdWRpb1NhbXBsZVJhdGUgPSBtaXNjLnNhbXBsaW5nUmF0ZTsKICAgICAgICAgICAgICAgICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IG1pc2MuY2hhbm5lbENvdW50OwogICAgICAgICAgICAgICAgICAgIG1ldGEuY29kZWMgPSBtaXNjLmNvZGVjOwogICAgICAgICAgICAgICAgICAgIG1ldGEub3JpZ2luYWxDb2RlYyA9IG1pc2Mub3JpZ2luYWxDb2RlYzsKICAgICAgICAgICAgICAgICAgICBtZXRhLmNvbmZpZyA9IG1pc2MuY29uZmlnOwogICAgICAgICAgICAgICAgICAgIC8vIGFkZGVkIGJ5IHFsaTUKICAgICAgICAgICAgICAgICAgICBtZXRhLmNvbmZpZ1JhdyA9IG1pc2MuY29uZmlnUmF3OwogICAgICAgICAgICAgICAgICAgIC8vIGFkZGVkIGJ5IFhtYWRlcgogICAgICAgICAgICAgICAgICAgIG1ldGEuYXVkaW9PYmplY3RUeXBlID0gbWlzYy5hdWRpb09iamVjdFR5cGU7CiAgICAgICAgICAgICAgICAgICAgbWV0YS5zYW1wbGluZ0ZyZXF1ZW5jeUluZGV4ID0gbWlzYy5zYW1wbGluZ0luZGV4OwogICAgICAgICAgICAgICAgICAgIG1ldGEuY2hhbm5lbENvbmZpZyA9IG1pc2MuY2hhbm5lbENvdW50OwogICAgICAgICAgICAgICAgICAgIC8vIFRoZSBkZWNvZGUgcmVzdWx0IG9mIGFuIGFhYyBzYW1wbGUgaXMgMTAyNCBQQ00gc2FtcGxlcwogICAgICAgICAgICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSAxMDI0IC8gbWV0YS5hdWRpb1NhbXBsZVJhdGUgKiBtZXRhLnRpbWVzY2FsZTsKICAgICAgICAgICAgICAgICAgICBMb2cudih0aGlzLlRBRywgJ1BhcnNlZCBBdWRpb1NwZWNpZmljQ29uZmlnJyk7CgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBOb24taW5pdGlhbCBtZXRhZGF0YSwgZm9yY2UgZGlzcGF0Y2ggKG9yIGZsdXNoKSBwYXJzZWQgZnJhbWVzIHRvIHJlbXV4ZXIKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Rpc3BhdGNoICYmICh0aGlzLl9hdWRpb1RyYWNrLmxlbmd0aCB8fCB0aGlzLl92aWRlb1RyYWNrLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRGF0YUF2YWlsYWJsZSh0aGlzLl9hdWRpb1RyYWNrLCB0aGlzLl92aWRlb1RyYWNrKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gbm90aWZ5IG5ldyBtZXRhZGF0YQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhKCdhdWRpbycsIG1ldGEpOwoKICAgICAgICAgICAgICAgICAgICBsZXQgbWkgPSB0aGlzLl9tZWRpYUluZm87CiAgICAgICAgICAgICAgICAgICAgbWkuYXVkaW9Db2RlYyA9IG1ldGEub3JpZ2luYWxDb2RlYzsKICAgICAgICAgICAgICAgICAgICBtaS5hdWRpb1NhbXBsZVJhdGUgPSBtZXRhLmF1ZGlvU2FtcGxlUmF0ZTsKICAgICAgICAgICAgICAgICAgICBtaS5hdWRpb0NoYW5uZWxDb3VudCA9IG1ldGEuY2hhbm5lbENvdW50OwogICAgICAgICAgICAgICAgICAgIGlmIChtaS5oYXNWaWRlbykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWkudmlkZW9Db2RlYyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPSInICsgbWkudmlkZW9Db2RlYyArICcsJyArIG1pLmF1ZGlvQ29kZWMgKyAnIic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPSInICsgbWkuYXVkaW9Db2RlYyArICciJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG1pLmlzQ29tcGxldGUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyhtaSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhYWNEYXRhLnBhY2tldFR5cGUgPT09IDEpIHsgIC8vIEFBQyByYXcgZnJhbWUgZGF0YQogICAgICAgICAgICAgICAgICAgIGxldCBkdHMgPSB0aGlzLl90aW1lc3RhbXBCYXNlICsgdGFnVGltZXN0YW1wOwogICAgICAgICAgICAgICAgICAgIGxldCBhYWNTYW1wbGUgPSB7IHVuaXQ6IGFhY0RhdGEuZGF0YSwgbGVuZ3RoOiBhYWNEYXRhLmRhdGEuYnl0ZUxlbmd0aCwgZHRzOiBkdHMsIHB0czogZHRzIH07CiAgICAgICAgICAgICAgICAgICAgdHJhY2suc2FtcGxlcy5wdXNoKGFhY1NhbXBsZSk7CiAgICAgICAgICAgICAgICAgICAgdHJhY2subGVuZ3RoICs9IGFhY0RhdGEuZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIExvZy5lKHRoaXMuVEFHLCBcYEZsdjogVW5zdXBwb3J0ZWQgQUFDIGRhdGEgdHlwZSBcJHthYWNEYXRhLnBhY2tldFR5cGV9XGApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kRm9ybWF0ID09PSAyKSB7ICAvLyBNUDMKICAgICAgICAgICAgICAgIGlmICghbWV0YS5jb2RlYykgewogICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgbWV0YWRhdGEgZm9yIG1wMyBhdWRpbyB0cmFjaywgZXh0cmFjdCBpbmZvIGZyb20gZnJhbWUgaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgbGV0IG1pc2MgPSB0aGlzLl9wYXJzZU1QM0F1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1pc2MgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbWV0YS5hdWRpb1NhbXBsZVJhdGUgPSBtaXNjLnNhbXBsaW5nUmF0ZTsKICAgICAgICAgICAgICAgICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IG1pc2MuY2hhbm5lbENvdW50OwogICAgICAgICAgICAgICAgICAgIG1ldGEuY29kZWMgPSBtaXNjLmNvZGVjOwogICAgICAgICAgICAgICAgICAgIG1ldGEub3JpZ2luYWxDb2RlYyA9IG1pc2Mub3JpZ2luYWxDb2RlYzsKICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVjb2RlIHJlc3VsdCBvZiBhbiBtcDMgc2FtcGxlIGlzIDExNTIgUENNIHNhbXBsZXMKICAgICAgICAgICAgICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gMTE1MiAvIG1ldGEuYXVkaW9TYW1wbGVSYXRlICogbWV0YS50aW1lc2NhbGU7CiAgICAgICAgICAgICAgICAgICAgTG9nLnYodGhpcy5UQUcsICdQYXJzZWQgTVBFRyBBdWRpbyBGcmFtZSBIZWFkZXInKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEoJ2F1ZGlvJywgbWV0YSk7CgogICAgICAgICAgICAgICAgICAgIGxldCBtaSA9IHRoaXMuX21lZGlhSW5mbzsKICAgICAgICAgICAgICAgICAgICBtaS5hdWRpb0NvZGVjID0gbWV0YS5jb2RlYzsKICAgICAgICAgICAgICAgICAgICBtaS5hdWRpb1NhbXBsZVJhdGUgPSBtZXRhLmF1ZGlvU2FtcGxlUmF0ZTsKICAgICAgICAgICAgICAgICAgICBtaS5hdWRpb0NoYW5uZWxDb3VudCA9IG1ldGEuY2hhbm5lbENvdW50OwogICAgICAgICAgICAgICAgICAgIG1pLmF1ZGlvRGF0YVJhdGUgPSBtaXNjLmJpdFJhdGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1pLmhhc1ZpZGVvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaS52aWRlb0NvZGVjICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9IicgKyBtaS52aWRlb0NvZGVjICsgJywnICsgbWkuYXVkaW9Db2RlYyArICciJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pLm1pbWVUeXBlID0gJ3ZpZGVvL3gtZmx2OyBjb2RlY3M9IicgKyBtaS5hdWRpb0NvZGVjICsgJyInOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobWkuaXNDb21wbGV0ZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTWVkaWFJbmZvKG1pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gVGhpcyBwYWNrZXQgaXMgYWx3YXlzIGEgdmFsaWQgYXVkaW8gcGFja2V0LCBleHRyYWN0IGl0CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuX3BhcnNlTVAzQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsZXQgZHRzID0gdGhpcy5fdGltZXN0YW1wQmFzZSArIHRhZ1RpbWVzdGFtcDsKICAgICAgICAgICAgICAgIGxldCBtcDNTYW1wbGUgPSB7IHVuaXQ6IGRhdGEsIGxlbmd0aDogZGF0YS5ieXRlTGVuZ3RoLCBkdHM6IGR0cywgcHRzOiBkdHMgfTsKICAgICAgICAgICAgICAgIHRyYWNrLnNhbXBsZXMucHVzaChtcDNTYW1wbGUpOwogICAgICAgICAgICAgICAgdHJhY2subGVuZ3RoICs9IGRhdGEubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfcGFyc2VBQUNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7CiAgICAgICAgICAgIGlmIChkYXRhU2l6ZSA8PSAxKSB7CiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCBBQUMgcGFja2V0LCBtaXNzaW5nIEFBQ1BhY2tldFR5cGUgb3IvYW5kIERhdGEhJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByZXN1bHQgPSB7fTsKICAgICAgICAgICAgbGV0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTsKCiAgICAgICAgICAgIHJlc3VsdC5wYWNrZXRUeXBlID0gYXJyYXlbMF07CgogICAgICAgICAgICBpZiAoYXJyYXlbMF0gPT09IDApIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gdGhpcy5fcGFyc2VBQUNBdWRpb1NwZWNpZmljQ29uZmlnKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gYXJyYXkuc3ViYXJyYXkoMSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBfcGFyc2VBQUNBdWRpb1NwZWNpZmljQ29uZmlnKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkgewogICAgICAgICAgICBsZXQgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwogICAgICAgICAgICBsZXQgY29uZmlnID0gbnVsbDsKCiAgICAgICAgICAgIC8qIEF1ZGlvIE9iamVjdCBUeXBlOgogICAgICAgICAgICAgICAwOiBOdWxsCiAgICAgICAgICAgICAgIDE6IEFBQyBNYWluCiAgICAgICAgICAgICAgIDI6IEFBQyBMQwogICAgICAgICAgICAgICAzOiBBQUMgU1NSIChTY2FsYWJsZSBTYW1wbGUgUmF0ZSkKICAgICAgICAgICAgICAgNDogQUFDIExUUCAoTG9uZyBUZXJtIFByZWRpY3Rpb24pCiAgICAgICAgICAgICAgIDU6IEhFLUFBQyAvIFNCUiAoU3BlY3RyYWwgQmFuZCBSZXBsaWNhdGlvbikKICAgICAgICAgICAgICAgNjogQUFDIFNjYWxhYmxlCiAgICAgICAgICAgICovCgogICAgICAgICAgICBsZXQgYXVkaW9PYmplY3RUeXBlID0gMDsKICAgICAgICAgICAgbGV0IG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlID0gMDsKICAgICAgICAgICAgbGV0IHNhbXBsaW5nSW5kZXggPSAwOwogICAgICAgICAgICBsZXQgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IG51bGw7CgogICAgICAgICAgICAvLyA1IGJpdHMKICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gb3JpZ2luYWxBdWRpb09iamVjdFR5cGUgPSBhcnJheVswXSA+Pj4gMzsKICAgICAgICAgICAgLy8gNCBiaXRzCiAgICAgICAgICAgIHNhbXBsaW5nSW5kZXggPSAoKGFycmF5WzBdICYgMHgwNykgPDwgMSkgfCAoYXJyYXlbMV0gPj4+IDcpOwogICAgICAgICAgICBpZiAoc2FtcGxpbmdJbmRleCA8IDAgfHwgc2FtcGxpbmdJbmRleCA+PSB0aGlzLl9tcGVnU2FtcGxpbmdSYXRlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCAnRmx2OiBBQUMgaW52YWxpZCBzYW1wbGluZyBmcmVxdWVuY3kgaW5kZXghJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBzYW1wbGluZ0ZyZXF1ZW5jZSA9IHRoaXMuX21wZWdTYW1wbGluZ1JhdGVzW3NhbXBsaW5nSW5kZXhdOwoKICAgICAgICAgICAgLy8gNCBiaXRzCiAgICAgICAgICAgIGxldCBjaGFubmVsQ29uZmlnID0gKGFycmF5WzFdICYgMHg3OCkgPj4+IDM7CiAgICAgICAgICAgIGlmIChjaGFubmVsQ29uZmlnIDwgMCB8fCBjaGFubmVsQ29uZmlnID49IDgpIHsKICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCAnRmx2OiBBQUMgaW52YWxpZCBjaGFubmVsIGNvbmZpZ3VyYXRpb24nKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGF1ZGlvT2JqZWN0VHlwZSA9PT0gNSkgeyAgLy8gSEUtQUFDPwogICAgICAgICAgICAgICAgLy8gNCBiaXRzCiAgICAgICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gKChhcnJheVsxXSAmIDB4MDcpIDw8IDEpIHwgKGFycmF5WzJdID4+PiA3KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gd29ya2Fyb3VuZHMgZm9yIHZhcmlvdXMgYnJvd3NlcnMKICAgICAgICAgICAgbGV0IHVzZXJBZ2VudCA9IF9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ2ZpcmVmb3gnKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIC8vIGZpcmVmb3g6IHVzZSBTQlIgKEhFLUFBQykgaWYgZnJlcSBsZXNzIHRoYW4gMjRrSHoKICAgICAgICAgICAgICAgIGlmIChzYW1wbGluZ0luZGV4ID49IDYpIHsKICAgICAgICAgICAgICAgICAgICBhdWRpb09iamVjdFR5cGUgPSA1OwogICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTsKICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleCAtIDM7CiAgICAgICAgICAgICAgICB9IGVsc2UgeyAgLy8gdXNlIExDLUFBQwogICAgICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7CiAgICAgICAgICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpOwogICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAvLyBhbmRyb2lkOiBhbHdheXMgdXNlIExDLUFBQwogICAgICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjsKICAgICAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTsKICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gZm9yIG90aGVyIGJyb3dzZXJzLCBlLmcuIGNocm9tZS4uLgogICAgICAgICAgICAgICAgLy8gQWx3YXlzIHVzZSBIRS1BQUMgdG8gbWFrZSBpdCBlYXNpZXIgdG8gc3dpdGNoIGFhYyBjb2RlYyBwcm9maWxlCiAgICAgICAgICAgICAgICBhdWRpb09iamVjdFR5cGUgPSA1OwogICAgICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7CiAgICAgICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoNCk7CgogICAgICAgICAgICAgICAgaWYgKHNhbXBsaW5nSW5kZXggPj0gNikgewogICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4IC0gMzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbENvbmZpZyA9PT0gMSkgeyAgLy8gTW9ubyBjaGFubmVsCiAgICAgICAgICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjsKICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7CiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbmZpZ1swXSA9IGF1ZGlvT2JqZWN0VHlwZSA8PCAzOwogICAgICAgICAgICBjb25maWdbMF0gfD0gKHNhbXBsaW5nSW5kZXggJiAweDBGKSA+Pj4gMTsKICAgICAgICAgICAgY29uZmlnWzFdID0gKHNhbXBsaW5nSW5kZXggJiAweDBGKSA8PCA3OwogICAgICAgICAgICBjb25maWdbMV0gfD0gKGNoYW5uZWxDb25maWcgJiAweDBGKSA8PCAzOwogICAgICAgICAgICBpZiAoYXVkaW9PYmplY3RUeXBlID09PSA1KSB7CiAgICAgICAgICAgICAgICBjb25maWdbMV0gfD0gKChleHRlbnNpb25TYW1wbGluZ0luZGV4ICYgMHgwRikgPj4+IDEpOwogICAgICAgICAgICAgICAgY29uZmlnWzJdID0gKGV4dGVuc2lvblNhbXBsaW5nSW5kZXggJiAweDAxKSA8PCA3OwogICAgICAgICAgICAgICAgLy8gZXh0ZW5kZWQgYXVkaW8gb2JqZWN0IHR5cGU6IGZvcmNlIHRvIDIgKExDLUFBQykKICAgICAgICAgICAgICAgIGNvbmZpZ1syXSB8PSAoMiA8PCAyKTsKICAgICAgICAgICAgICAgIGNvbmZpZ1szXSA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBhdWRpb09iamVjdFR5cGUsICAvLyBhdWRpb19vYmplY3RfdHlwZSwgICAgICAgIGFkZGVkIGJ5IFhtYWRlcgogICAgICAgICAgICAgICAgc2FtcGxpbmdJbmRleCwgICAgLy8gc2FtcGxpbmdfZnJlcXVlbmN5X2luZGV4LCBhZGRlZCBieSBYbWFkZXIKICAgICAgICAgICAgICAgIGNvbmZpZ1JhdzogYXJyYXksIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQgYnkgcWxpNQogICAgICAgICAgICAgICAgY29uZmlnOiBjb25maWcsCiAgICAgICAgICAgICAgICBzYW1wbGluZ1JhdGU6IHNhbXBsaW5nRnJlcXVlbmNlLAogICAgICAgICAgICAgICAgY2hhbm5lbENvdW50OiBjaGFubmVsQ29uZmlnLCAgLy8gY2hhbm5lbF9jb25maWcKICAgICAgICAgICAgICAgIGNvZGVjOiAnbXA0YS40MC4nICsgYXVkaW9PYmplY3RUeXBlLAogICAgICAgICAgICAgICAgb3JpZ2luYWxDb2RlYzogJ21wNGEuNDAuJyArIG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlCiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBfcGFyc2VNUDNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCByZXF1ZXN0SGVhZGVyKSB7CiAgICAgICAgICAgIGlmIChkYXRhU2l6ZSA8IDQpIHsKICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIE1QMyBwYWNrZXQsIGhlYWRlciBtaXNzaW5nIScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgbGUgPSB0aGlzLl9saXR0bGVFbmRpYW47CiAgICAgICAgICAgIGxldCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgICAgIGxldCByZXN1bHQgPSBudWxsOwoKICAgICAgICAgICAgaWYgKHJlcXVlc3RIZWFkZXIpIHsKICAgICAgICAgICAgICAgIGlmIChhcnJheVswXSAhPT0gMHhGRikgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCB2ZXIgPSAoYXJyYXlbMV0gPj4+IDMpICYgMHgwMzsKICAgICAgICAgICAgICAgIGxldCBsYXllciA9IChhcnJheVsxXSAmIDB4MDYpID4+IDE7CgogICAgICAgICAgICAgICAgbGV0IGJpdHJhdGVfaW5kZXggPSAoYXJyYXlbMl0gJiAweEYwKSA+Pj4gNDsKICAgICAgICAgICAgICAgIGxldCBzYW1wbGluZ19mcmVxX2luZGV4ID0gKGFycmF5WzJdICYgMHgwQykgPj4+IDI7CgogICAgICAgICAgICAgICAgbGV0IGNoYW5uZWxfbW9kZSA9IChhcnJheVszXSA+Pj4gNikgJiAweDAzOwogICAgICAgICAgICAgICAgbGV0IGNoYW5uZWxfY291bnQgPSBjaGFubmVsX21vZGUgIT09IDMgPyAyIDogMTsKCiAgICAgICAgICAgICAgICBsZXQgc2FtcGxlX3JhdGUgPSAwOwogICAgICAgICAgICAgICAgbGV0IGJpdF9yYXRlID0gMDsKCiAgICAgICAgICAgICAgICBsZXQgY29kZWMgPSAnbXAzJzsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHZlcikgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDogIC8vIE1QRUcgMi41CiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZV9yYXRlID0gdGhpcy5fbXBlZ0F1ZGlvVjI1U2FtcGxlUmF0ZVRhYmxlW3NhbXBsaW5nX2ZyZXFfaW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDI6ICAvLyBNUEVHIDIKICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlX3JhdGUgPSB0aGlzLl9tcGVnQXVkaW9WMjBTYW1wbGVSYXRlVGFibGVbc2FtcGxpbmdfZnJlcV9pbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMzogIC8vIE1QRUcgMQogICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb1YxMFNhbXBsZVJhdGVUYWJsZVtzYW1wbGluZ19mcmVxX2luZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3dpdGNoIChsYXllcikgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMTogIC8vIExheWVyIDMKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHJhdGVfaW5kZXggPCB0aGlzLl9tcGVnQXVkaW9MM0JpdFJhdGVUYWJsZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdF9yYXRlID0gdGhpcy5fbXBlZ0F1ZGlvTDNCaXRSYXRlVGFibGVbYml0cmF0ZV9pbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiAgLy8gTGF5ZXIgMgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYml0cmF0ZV9pbmRleCA8IHRoaXMuX21wZWdBdWRpb0wyQml0UmF0ZVRhYmxlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0X3JhdGUgPSB0aGlzLl9tcGVnQXVkaW9MMkJpdFJhdGVUYWJsZVtiaXRyYXRlX2luZGV4XTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDM6ICAvLyBMYXllciAxCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRyYXRlX2luZGV4IDwgdGhpcy5fbXBlZ0F1ZGlvTDFCaXRSYXRlVGFibGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb0wxQml0UmF0ZVRhYmxlW2JpdHJhdGVfaW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICBiaXRSYXRlOiBiaXRfcmF0ZSwKICAgICAgICAgICAgICAgICAgICBzYW1wbGluZ1JhdGU6IHNhbXBsZV9yYXRlLAogICAgICAgICAgICAgICAgICAgIGNoYW5uZWxDb3VudDogY2hhbm5lbF9jb3VudCwKICAgICAgICAgICAgICAgICAgICBjb2RlYzogY29kZWMsCiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxDb2RlYzogY29kZWMKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBhcnJheTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CgogICAgICAgIF9wYXJzZVZpZGVvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24pIHsKICAgICAgICAgICAgaWYgKGRhdGFTaXplIDw9IDEpIHsKICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIHZpZGVvIHBhY2tldCwgbWlzc2luZyBWaWRlb0RhdGEgcGF5bG9hZCEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHRoaXMuX2hhc1ZpZGVvRmxhZ092ZXJyaWRlZCA9PT0gdHJ1ZSAmJiB0aGlzLl9oYXNWaWRlbyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIC8vIElmIGhhc1ZpZGVvOiBmYWxzZSBpbmRpY2F0ZWQgZXhwbGljaXRseSBpbiBNZWRpYURhdGFTb3VyY2UsCiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYWxsIHRoZSB2aWRlbyBwYWNrZXRzCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBzcGVjID0gKG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkpWzBdOwoKICAgICAgICAgICAgbGV0IGZyYW1lVHlwZSA9IChzcGVjICYgMjQwKSA+Pj4gNDsKICAgICAgICAgICAgbGV0IGNvZGVjSWQgPSBzcGVjICYgMTU7CgogICAgICAgICAgICBpZiAoY29kZWNJZCAhPT0gNykgewogICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5DT0RFQ19VTlNVUFBPUlRFRCwgXGBGbHY6IFVuc3VwcG9ydGVkIGNvZGVjIGluIHZpZGVvIGZyYW1lOiBcJHtjb2RlY0lkfVxgKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5fcGFyc2VBVkNWaWRlb1BhY2tldChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlKTsKICAgICAgICB9CgogICAgICAgIF9wYXJzZUFWQ1ZpZGVvUGFja2V0KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlKSB7CiAgICAgICAgICAgIGlmIChkYXRhU2l6ZSA8IDQpIHsKICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIEFWQyBwYWNrZXQsIG1pc3NpbmcgQVZDUGFja2V0VHlwZSBvci9hbmQgQ29tcG9zaXRpb25UaW1lJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjsKICAgICAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTsKCiAgICAgICAgICAgIGxldCBwYWNrZXRUeXBlID0gdi5nZXRVaW50OCgwKTsKICAgICAgICAgICAgbGV0IGN0cyA9IHYuZ2V0VWludDMyKDAsICFsZSkgJiAweDAwRkZGRkZGOwoKICAgICAgICAgICAgaWYgKHBhY2tldFR5cGUgPT09IDApIHsgIC8vIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkCiAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgNCwgZGF0YVNpemUgLSA0KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYWNrZXRUeXBlID09PSAxKSB7ICAvLyBPbmUgb3IgbW9yZSBOYWx1cwogICAgICAgICAgICAgICAgdGhpcy5fcGFyc2VBVkNWaWRlb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyA0LCBkYXRhU2l6ZSAtIDQsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSwgY3RzKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYWNrZXRUeXBlID09PSAyKSB7CiAgICAgICAgICAgICAgICAvLyBlbXB0eSwgQVZDIGVuZCBvZiBzZXF1ZW5jZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsIFxgRmx2OiBJbnZhbGlkIHZpZGVvIHBhY2tldCB0eXBlIFwke3BhY2tldFR5cGV9XGApOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfcGFyc2VBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICAgICAgaWYgKGRhdGFTaXplIDwgNykgewogICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQsIGxhY2sgb2YgZGF0YSEnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IG1ldGEgPSB0aGlzLl92aWRlb01ldGFkYXRhOwogICAgICAgICAgICBsZXQgdHJhY2sgPSB0aGlzLl92aWRlb1RyYWNrOwogICAgICAgICAgICBsZXQgbGUgPSB0aGlzLl9saXR0bGVFbmRpYW47CiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CgogICAgICAgICAgICBpZiAoIW1ldGEpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oYXNWaWRlbyA9PT0gZmFsc2UgJiYgdGhpcy5faGFzVmlkZW9GbGFnT3ZlcnJpZGVkID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc1ZpZGVvID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzVmlkZW8gPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG1ldGEgPSB0aGlzLl92aWRlb01ldGFkYXRhID0ge307CiAgICAgICAgICAgICAgICBtZXRhLnR5cGUgPSAndmlkZW8nOwogICAgICAgICAgICAgICAgbWV0YS5pZCA9IHRyYWNrLmlkOwogICAgICAgICAgICAgICAgbWV0YS50aW1lc2NhbGUgPSB0aGlzLl90aW1lc2NhbGU7CiAgICAgICAgICAgICAgICBtZXRhLmR1cmF0aW9uID0gdGhpcy5fZHVyYXRpb247CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1ldGEuYXZjYyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZvdW5kIGFub3RoZXIgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQhJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB2ZXJzaW9uID0gdi5nZXRVaW50OCgwKTsgIC8vIGNvbmZpZ3VyYXRpb25WZXJzaW9uCiAgICAgICAgICAgIGxldCBhdmNQcm9maWxlID0gdi5nZXRVaW50OCgxKTsgIC8vIGF2Y1Byb2ZpbGVJbmRpY2F0aW9uCiAgICAgICAgICAgIGxldCBwcm9maWxlQ29tcGF0aWJpbGl0eSA9IHYuZ2V0VWludDgoMik7ICAvLyBwcm9maWxlX2NvbXBhdGliaWxpdHkKICAgICAgICAgICAgbGV0IGF2Y0xldmVsID0gdi5nZXRVaW50OCgzKTsgIC8vIEFWQ0xldmVsSW5kaWNhdGlvbgoKICAgICAgICAgICAgaWYgKHZlcnNpb24gIT09IDEgfHwgYXZjUHJvZmlsZSA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQnKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5fbmFsdUxlbmd0aFNpemUgPSAodi5nZXRVaW50OCg0KSAmIDMpICsgMTsgIC8vIGxlbmd0aFNpemVNaW51c09uZQogICAgICAgICAgICBpZiAodGhpcy5fbmFsdUxlbmd0aFNpemUgIT09IDMgJiYgdGhpcy5fbmFsdUxlbmd0aFNpemUgIT09IDQpIHsgIC8vIGhvbHkgc2hpdCEhIQogICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsIFxgRmx2OiBTdHJhbmdlIE5hbHVMZW5ndGhTaXplTWludXNPbmU6IFwke3RoaXMuX25hbHVMZW5ndGhTaXplIC0gMX1cYCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBzcHNDb3VudCA9IHYuZ2V0VWludDgoNSkgJiAzMTsgIC8vIG51bU9mU2VxdWVuY2VQYXJhbWV0ZXJTZXRzCiAgICAgICAgICAgIGlmIChzcHNDb3VudCA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQ6IE5vIFNQUycpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNwc0NvdW50ID4gMSkgewogICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsIFxgRmx2OiBTdHJhbmdlIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkOiBTUFMgQ291bnQgPSBcJHtzcHNDb3VudH1cYCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBvZmZzZXQgPSA2OwoKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcHNDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBsZXQgbGVuID0gdi5nZXRVaW50MTYob2Zmc2V0LCAhbGUpOyAgLy8gc2VxdWVuY2VQYXJhbWV0ZXJTZXRMZW5ndGgKICAgICAgICAgICAgICAgIG9mZnNldCArPSAyOwoKICAgICAgICAgICAgICAgIGlmIChsZW4gPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBOb3RpY2U6IE5hbHUgd2l0aG91dCBzdGFydGNvZGUgaGVhZGVyICgwMCAwMCAwMCAwMSkKICAgICAgICAgICAgICAgIGxldCBzcHMgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG9mZnNldCwgbGVuKTsKICAgICAgICAgICAgICAgIG9mZnNldCArPSBsZW47CgogICAgICAgICAgICAgICAgbGV0IGNvbmZpZyA9IFNQU1BhcnNlci5wYXJzZVNQUyhzcHMpOwogICAgICAgICAgICAgICAgaWYgKGkgIT09IDApIHsKICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgb3RoZXIgc3BzJ3MgY29uZmlnCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbWV0YS5jb2RlY1dpZHRoID0gY29uZmlnLmNvZGVjX3NpemUud2lkdGg7CiAgICAgICAgICAgICAgICBtZXRhLmNvZGVjSGVpZ2h0ID0gY29uZmlnLmNvZGVjX3NpemUuaGVpZ2h0OwogICAgICAgICAgICAgICAgbWV0YS5wcmVzZW50V2lkdGggPSBjb25maWcucHJlc2VudF9zaXplLndpZHRoOwogICAgICAgICAgICAgICAgbWV0YS5wcmVzZW50SGVpZ2h0ID0gY29uZmlnLnByZXNlbnRfc2l6ZS5oZWlnaHQ7CgogICAgICAgICAgICAgICAgbWV0YS5wcm9maWxlID0gY29uZmlnLnByb2ZpbGVfc3RyaW5nOwogICAgICAgICAgICAgICAgbWV0YS5sZXZlbCA9IGNvbmZpZy5sZXZlbF9zdHJpbmc7CiAgICAgICAgICAgICAgICBtZXRhLmJpdERlcHRoID0gY29uZmlnLmJpdF9kZXB0aDsKICAgICAgICAgICAgICAgIG1ldGEuY2hyb21hRm9ybWF0ID0gY29uZmlnLmNocm9tYV9mb3JtYXQ7CiAgICAgICAgICAgICAgICBtZXRhLnNhclJhdGlvID0gY29uZmlnLnNhcl9yYXRpbzsKICAgICAgICAgICAgICAgIG1ldGEuZnJhbWVSYXRlID0gY29uZmlnLmZyYW1lX3JhdGU7CgogICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5mcmFtZV9yYXRlLmZpeGVkID09PSBmYWxzZSB8fAogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZV9yYXRlLmZwc19udW0gPT09IDAgfHwKICAgICAgICAgICAgICAgICAgICBjb25maWcuZnJhbWVfcmF0ZS5mcHNfZGVuID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgbWV0YS5mcmFtZVJhdGUgPSB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IGZwc19kZW4gPSBtZXRhLmZyYW1lUmF0ZS5mcHNfZGVuOwogICAgICAgICAgICAgICAgbGV0IGZwc19udW0gPSBtZXRhLmZyYW1lUmF0ZS5mcHNfbnVtOwogICAgICAgICAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IG1ldGEudGltZXNjYWxlICogKGZwc19kZW4gLyBmcHNfbnVtKTsKCiAgICAgICAgICAgICAgICBsZXQgY29kZWNBcnJheSA9IHNwcy5zdWJhcnJheSgxLCA0KTsKICAgICAgICAgICAgICAgIGxldCBjb2RlY1N0cmluZyA9ICdhdmMxLic7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCBoID0gY29kZWNBcnJheVtqXS50b1N0cmluZygxNik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29kZWNTdHJpbmcgKz0gaDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG1ldGEuY29kZWMgPSBjb2RlY1N0cmluZzsKCiAgICAgICAgICAgICAgICBsZXQgbWkgPSB0aGlzLl9tZWRpYUluZm87CiAgICAgICAgICAgICAgICBtaS53aWR0aCA9IG1ldGEuY29kZWNXaWR0aDsKICAgICAgICAgICAgICAgIG1pLmhlaWdodCA9IG1ldGEuY29kZWNIZWlnaHQ7CiAgICAgICAgICAgICAgICBtaS5mcHMgPSBtZXRhLmZyYW1lUmF0ZS5mcHM7CiAgICAgICAgICAgICAgICBtaS5wcm9maWxlID0gbWV0YS5wcm9maWxlOwogICAgICAgICAgICAgICAgbWkubGV2ZWwgPSBtZXRhLmxldmVsOwogICAgICAgICAgICAgICAgbWkuY2hyb21hRm9ybWF0ID0gY29uZmlnLmNocm9tYV9mb3JtYXRfc3RyaW5nOwogICAgICAgICAgICAgICAgbWkuc2FyTnVtID0gbWV0YS5zYXJSYXRpby53aWR0aDsKICAgICAgICAgICAgICAgIG1pLnNhckRlbiA9IG1ldGEuc2FyUmF0aW8uaGVpZ2h0OwogICAgICAgICAgICAgICAgbWkudmlkZW9Db2RlYyA9IGNvZGVjU3RyaW5nOwoKICAgICAgICAgICAgICAgIGlmIChtaS5oYXNBdWRpbykgewogICAgICAgICAgICAgICAgICAgIGlmIChtaS5hdWRpb0NvZGVjICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz0iJyArIG1pLnZpZGVvQ29kZWMgKyAnLCcgKyBtaS5hdWRpb0NvZGVjICsgJyInOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz0iJyArIG1pLnZpZGVvQ29kZWMgKyAnIic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobWkuaXNDb21wbGV0ZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25NZWRpYUluZm8obWkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgcHBzQ291bnQgPSB2LmdldFVpbnQ4KG9mZnNldCk7ICAvLyBudW1PZlBpY3R1cmVQYXJhbWV0ZXJTZXRzCiAgICAgICAgICAgIGlmIChwcHNDb3VudCA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQ6IE5vIFBQUycpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgaWYgKHBwc0NvdW50ID4gMSkgewogICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsIFxgRmx2OiBTdHJhbmdlIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkOiBQUFMgQ291bnQgPSBcJHtwcHNDb3VudH1cYCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG9mZnNldCsrOwoKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcHNDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBsZXQgbGVuID0gdi5nZXRVaW50MTYob2Zmc2V0LCAhbGUpOyAgLy8gcGljdHVyZVBhcmFtZXRlclNldExlbmd0aAogICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgogICAgICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIHBwcyBpcyB1c2VsZXNzIGZvciBleHRyYWN0aW5nIHZpZGVvIGluZm9ybWF0aW9uCiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGVuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtZXRhLmF2Y2MgPSBuZXcgVWludDhBcnJheShkYXRhU2l6ZSk7CiAgICAgICAgICAgIG1ldGEuYXZjYy5zZXQobmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSwgMCk7CiAgICAgICAgICAgIExvZy52KHRoaXMuVEFHLCAnUGFyc2VkIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkJyk7CgogICAgICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkpIHsKICAgICAgICAgICAgICAgIC8vIGZsdXNoIHBhcnNlZCBmcmFtZXMKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBub3RpZnkgbmV3IG1ldGFkYXRhCiAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YSgndmlkZW8nLCBtZXRhKTsKICAgICAgICB9CgogICAgICAgIF9wYXJzZUFWQ1ZpZGVvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSwgY3RzKSB7CiAgICAgICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjsKICAgICAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTsKCiAgICAgICAgICAgIGxldCB1bml0cyA9IFtdLCBsZW5ndGggPSAwOwoKICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7CiAgICAgICAgICAgIGNvbnN0IGxlbmd0aFNpemUgPSB0aGlzLl9uYWx1TGVuZ3RoU2l6ZTsKICAgICAgICAgICAgbGV0IGR0cyA9IHRoaXMuX3RpbWVzdGFtcEJhc2UgKyB0YWdUaW1lc3RhbXA7CiAgICAgICAgICAgIGxldCBrZXlmcmFtZSA9IChmcmFtZVR5cGUgPT09IDEpOyAgLy8gZnJvbSBGTFYgRnJhbWUgVHlwZSBjb25zdGFudHMKICAgICAgICAgICAgbGV0IHJlZklkYyA9IDE7IC8vIGFkZGVkIGJ5IHFsaTUKCiAgICAgICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSkgewogICAgICAgICAgICAgICAgaWYgKG9mZnNldCArIDQgPj0gZGF0YVNpemUpIHsKICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgXGBNYWxmb3JtZWQgTmFsdSBuZWFyIHRpbWVzdGFtcCBcJHtkdHN9LCBvZmZzZXQgPSBcJHtvZmZzZXR9LCBkYXRhU2l6ZSA9IFwke2RhdGFTaXplfVxgKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsgIC8vIGRhdGEgbm90IGVub3VnaCBmb3IgbmV4dCBOYWx1CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBOYWx1IHdpdGggbGVuZ3RoLWhlYWRlciAoQVZDMSkKICAgICAgICAgICAgICAgIGxldCBuYWx1U2l6ZSA9IHYuZ2V0VWludDMyKG9mZnNldCwgIWxlKTsgIC8vIEJpZy1FbmRpYW4gcmVhZAogICAgICAgICAgICAgICAgaWYgKGxlbmd0aFNpemUgPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICBuYWx1U2l6ZSA+Pj49IDg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobmFsdVNpemUgPiBkYXRhU2l6ZSAtIGxlbmd0aFNpemUpIHsKICAgICAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgXGBNYWxmb3JtZWQgTmFsdXMgbmVhciB0aW1lc3RhbXAgXCR7ZHRzfSwgTmFsdVNpemUgPiBEYXRhU2l6ZSFcYCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGxldCB1bml0VHlwZSA9IHYuZ2V0VWludDgob2Zmc2V0ICsgbGVuZ3RoU2l6ZSkgJiAweDFGOwogICAgICAgICAgICAgICAgLy8gYWRkZWQgYnkgcWxpNQogICAgICAgICAgICAgICAgcmVmSWRjID0gdi5nZXRVaW50OChvZmZzZXQgKyBsZW5ndGhTaXplKSAmIDB4NjA7CgogICAgICAgICAgICAgICAgaWYgKHVuaXRUeXBlID09PSA1KSB7ICAvLyBJRFIKICAgICAgICAgICAgICAgICAgICBrZXlmcmFtZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG9mZnNldCwgbGVuZ3RoU2l6ZSArIG5hbHVTaXplKTsKICAgICAgICAgICAgICAgIGxldCB1bml0ID0geyB0eXBlOiB1bml0VHlwZSwgZGF0YTogZGF0YSB9OwogICAgICAgICAgICAgICAgdW5pdHMucHVzaCh1bml0KTsKICAgICAgICAgICAgICAgIGxlbmd0aCArPSBkYXRhLmJ5dGVMZW5ndGg7CgogICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxlbmd0aFNpemUgKyBuYWx1U2l6ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHVuaXRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgbGV0IHRyYWNrID0gdGhpcy5fdmlkZW9UcmFjazsKICAgICAgICAgICAgICAgIGxldCBhdmNTYW1wbGUgPSB7CiAgICAgICAgICAgICAgICAgICAgdW5pdHM6IHVuaXRzLAogICAgICAgICAgICAgICAgICAgIGxlbmd0aDogbGVuZ3RoLAogICAgICAgICAgICAgICAgICAgIGlzS2V5ZnJhbWU6IGtleWZyYW1lLAogICAgICAgICAgICAgICAgICAgIHJlZklkYzogcmVmSWRjLAogICAgICAgICAgICAgICAgICAgIGR0czogZHRzLAogICAgICAgICAgICAgICAgICAgIGN0czogY3RzLAogICAgICAgICAgICAgICAgICAgIHB0czogKGR0cyArIGN0cykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAoa2V5ZnJhbWUpIHsKICAgICAgICAgICAgICAgICAgICBhdmNTYW1wbGUuZmlsZXBvc2l0aW9uID0gdGFnUG9zaXRpb247CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0cmFjay5zYW1wbGVzLnB1c2goYXZjU2FtcGxlKTsKICAgICAgICAgICAgICAgIHRyYWNrLmxlbmd0aCArPSBsZW5ndGg7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgfQoKICAgIC8qKioKICAgICAqIENvcHlyaWdodCAoQykgMjAxOCBRbGk1LiBBbGwgUmlnaHRzIFJlc2VydmVkLgogICAgICogCiAgICAgKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICAgICAqIAogICAgICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogICAgICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogICAgICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4KICAgICovCgogICAgY2xhc3MgQVNTIHsKICAgICAgICAvKioKICAgICAgICAgKiBFeHRyYWN0IHNlY3Rpb25zIGZyb20gYXNzIHN0cmluZwogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgCiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gLSBvYmplY3QgZnJvbSBzZWN0aW9ucwogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBleHRyYWN0U2VjdGlvbnMoc3RyKSB7CiAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gL15cXHVmZWZmP1xcWyguKilcXF1cJC9tZzsKICAgICAgICAgICAgbGV0IG1hdGNoOwogICAgICAgICAgICBsZXQgbWF0Y2hBcnIgPSBbXTsKICAgICAgICAgICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoc3RyKSkgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIG1hdGNoQXJyLnB1c2goeyBuYW1lOiBtYXRjaFsxXSwgaW5kZXg6IG1hdGNoLmluZGV4IH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCByZXQgPSB7fTsKICAgICAgICAgICAgbWF0Y2hBcnIuZm9yRWFjaCgobWF0Y2gsIGkpID0+IHJldFttYXRjaC5uYW1lXSA9IHN0ci5zbGljZShtYXRjaC5pbmRleCwgbWF0Y2hBcnJbaSArIDFdICYmIG1hdGNoQXJyW2kgKyAxXS5pbmRleCkpOwogICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogRXh0cmFjdCBzdWJ0aXRsZSBsaW5lcyBmcm9tIHNlY3Rpb24gRXZlbnRzCiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHN0ciAKICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXk8T2JqZWN0Pn0gLSBhcnJheSBvZiBzdWJ0aXRsZSBsaW5lcwogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBleHRyYWN0U3VidGl0bGVMaW5lcyhzdHIpIHsKICAgICAgICAgICAgY29uc3QgbGluZXMgPSBzdHIuc3BsaXQoL1xcclxcbisvKTsKICAgICAgICAgICAgaWYgKGxpbmVzWzBdICE9ICdbRXZlbnRzXScgJiYgbGluZXNbMF0gIT0gJ1tldmVudHNdJykgdGhyb3cgbmV3IEVycm9yKCdBU1NEZW11eGVyOiBzZWN0aW9uIGlzIG5vdCBbRXZlbnRzXScpOwogICAgICAgICAgICBpZiAobGluZXNbMV0uaW5kZXhPZignRm9ybWF0OicpICE9IDAgJiYgbGluZXNbMV0uaW5kZXhPZignZm9ybWF0OicpICE9IDApIHRocm93IG5ldyBFcnJvcignQVNTRGVtdXhlcjogY2Fubm90IGZpbmQgRm9ybWF0IGRlZmluaXRpb24gaW4gc2VjdGlvbiBbRXZlbnRzXScpOwoKICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gbGluZXNbMV0uc2xpY2UobGluZXNbMV0uaW5kZXhPZignOicpICsgMSkuc3BsaXQoJywnKS5tYXAoZSA9PiBlLnRyaW0oKSk7CiAgICAgICAgICAgIHJldHVybiBsaW5lcy5zbGljZSgyKS5tYXAoZSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgaiA9IHt9OwogICAgICAgICAgICAgICAgZS5yZXBsYWNlKC9bZHxEXWlhbG9ndWU6XFxzKi8sICcnKQogICAgICAgICAgICAgICAgICAgIC5tYXRjaChuZXcgUmVnRXhwKG5ldyBBcnJheShmb3JtYXQubGVuZ3RoIC0gMSkuZmlsbCgnKC4qPyksJykuam9pbignJykgKyAnKC4qKScpKQogICAgICAgICAgICAgICAgICAgIC5zbGljZSgxKQogICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKChrLCBpbmRleCkgPT4galtmb3JtYXRbaW5kZXhdXSA9IGspOwogICAgICAgICAgICAgICAgcmV0dXJuIGo7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlIGEgbmV3IEFTUyBEZW11eGVyCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHRoaXMuaW5mbyA9ICcnOwogICAgICAgICAgICB0aGlzLnN0eWxlcyA9ICcnOwogICAgICAgICAgICB0aGlzLmV2ZW50cyA9ICcnOwogICAgICAgICAgICB0aGlzLmV2ZW50c0hlYWRlciA9ICcnOwogICAgICAgICAgICB0aGlzLnBpY3R1cmVzID0gJyc7CiAgICAgICAgICAgIHRoaXMuZm9udHMgPSAnJzsKICAgICAgICAgICAgdGhpcy5saW5lcyA9IFtdOwogICAgICAgIH0KCiAgICAgICAgZ2V0IGhlYWRlcigpIHsKICAgICAgICAgICAgLy8gcmV0dXJuIHRoaXMuaW5mbyArIHRoaXMuc3R5bGVzICsgdGhpcy5ldmVudHNIZWFkZXI7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZm8gKyB0aGlzLnN0eWxlczsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIExvYWQgYSBmaWxlIGZyb20gYW4gYXJyYXlidWZmZXIgb2YgYSBzdHJpbmcKICAgICAgICAgKiBAcGFyYW0geyhBcnJheUJ1ZmZlcnxzdHJpbmcpfSBjaHVuayAKICAgICAgICAgKi8KICAgICAgICBwYXJzZUZpbGUoY2h1bmspIHsKICAgICAgICAgICAgY29uc3Qgc3RyID0gdHlwZW9mIGNodW5rID09ICdzdHJpbmcnID8gY2h1bmsgOiBuZXcgX1RleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShjaHVuayk7CiAgICAgICAgICAgIGZvciAobGV0IFtpLCBqXSBvZiBPYmplY3QuZW50cmllcyhBU1MuZXh0cmFjdFNlY3Rpb25zKHN0cikpKSB7CiAgICAgICAgICAgICAgICBpZiAoaS5tYXRjaCgvU2NyaXB0IEluZm8oPzptYXRpb24pPy9pKSkgdGhpcy5pbmZvID0gajsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKGkubWF0Y2goL1Y0XFwrPyBTdHlsZXM/L2kpKSB0aGlzLnN0eWxlcyA9IGo7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpLm1hdGNoKC9FdmVudHM/L2kpKSB0aGlzLmV2ZW50cyA9IGo7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpLm1hdGNoKC9QaWN0dXJlcz8vaSkpIHRoaXMucGljdHVyZXMgPSBqOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoaS5tYXRjaCgvRm9udHM/L2kpKSB0aGlzLmZvbnRzID0gajsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmV2ZW50c0hlYWRlciA9IHRoaXMuZXZlbnRzLnNwbGl0KCdcXG4nLCAyKS5qb2luKCdcXG4nKSArICdcXG4nOwogICAgICAgICAgICB0aGlzLmxpbmVzID0gQVNTLmV4dHJhY3RTdWJ0aXRsZUxpbmVzKHRoaXMuZXZlbnRzKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgfQoKICAgIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBcYGdsb2JhbFxgIGZyb20gTm9kZS5qcy4gKi8KICAgIHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDsKCiAgICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgXGBzZWxmXGAuICovCiAgICB2YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjsKCiAgICAvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi8KICAgIHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwoKICAgIC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwogICAgdmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sOwoKICAgIC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KICAgIHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7CgogICAgLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCiAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTsKCiAgICAvKioKICAgICAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUKICAgICAqIFtcYHRvU3RyaW5nVGFnXGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpCiAgICAgKiBvZiB2YWx1ZXMuCiAgICAgKi8KICAgIHZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nOwoKICAgIC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwogICAgdmFyIHN5bVRvU3RyaW5nVGFnID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkOwoKICAgIC8qKgogICAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIFxgYmFzZUdldFRhZ1xgIHdoaWNoIGlnbm9yZXMgXGBTeW1ib2wudG9TdHJpbmdUYWdcYCB2YWx1ZXMuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LgogICAgICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgcmF3IFxgdG9TdHJpbmdUYWdcYC4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0UmF3VGFnKHZhbHVlKSB7CiAgICAgIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSwKICAgICAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTsKCiAgICAgIHRyeSB7CiAgICAgICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdW5kZWZpbmVkOwogICAgICAgIHZhciB1bm1hc2tlZCA9IHRydWU7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CgogICAgICB2YXIgcmVzdWx0ID0gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7CiAgICAgIGlmICh1bm1hc2tlZCkgewogICAgICAgIGlmIChpc093bikgewogICAgICAgICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdGFnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkZWxldGUgdmFsdWVbc3ltVG9TdHJpbmdUYWddOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KICAgIHZhciBvYmplY3RQcm90b1wkMSA9IE9iamVjdC5wcm90b3R5cGU7CgogICAgLyoqCiAgICAgKiBVc2VkIHRvIHJlc29sdmUgdGhlCiAgICAgKiBbXGB0b1N0cmluZ1RhZ1xgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKQogICAgICogb2YgdmFsdWVzLgogICAgICovCiAgICB2YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmdcJDEgPSBvYmplY3RQcm90b1wkMS50b1N0cmluZzsKCiAgICAvKioKICAgICAqIENvbnZlcnRzIFxgdmFsdWVcYCB0byBhIHN0cmluZyB1c2luZyBcYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcYC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC4KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7CiAgICAgIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZ1wkMS5jYWxsKHZhbHVlKTsKICAgIH0KCiAgICAvKiogXGBPYmplY3QjdG9TdHJpbmdcYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KICAgIHZhciBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLAogICAgICAgIHVuZGVmaW5lZFRhZyA9ICdbb2JqZWN0IFVuZGVmaW5lZF0nOwoKICAgIC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwogICAgdmFyIHN5bVRvU3RyaW5nVGFnXCQxID0gU3ltYm9sID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogdW5kZWZpbmVkOwoKICAgIC8qKgogICAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgXGBnZXRUYWdcYCB3aXRob3V0IGZhbGxiYWNrcyBmb3IgYnVnZ3kgZW52aXJvbm1lbnRzLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS4KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIFxgdG9TdHJpbmdUYWdcYC4KICAgICAqLwogICAgZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT0gbnVsbCkgewogICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZzsKICAgICAgfQogICAgICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnXCQxICYmIHN5bVRvU3RyaW5nVGFnXCQxIGluIE9iamVjdCh2YWx1ZSkpCiAgICAgICAgPyBnZXRSYXdUYWcodmFsdWUpCiAgICAgICAgOiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVja3MgaWYgXGB2YWx1ZVxgIGlzIHRoZQogICAgICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKQogICAgICogb2YgXGBPYmplY3RcYC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIFxgbmV3IE51bWJlcigwKVxgLCBhbmQgXGBuZXcgU3RyaW5nKCcnKVxgKQogICAgICoKICAgICAqIEBzdGF0aWMKICAgICAqIEBtZW1iZXJPZiBfCiAgICAgKiBAc2luY2UgMC4xLjAKICAgICAqIEBjYXRlZ29yeSBMYW5nCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIFxgdHJ1ZVxgIGlmIFxgdmFsdWVcYCBpcyBhbiBvYmplY3QsIGVsc2UgXGBmYWxzZVxgLgogICAgICogQGV4YW1wbGUKICAgICAqCiAgICAgKiBfLmlzT2JqZWN0KHt9KTsKICAgICAqIC8vID0+IHRydWUKICAgICAqCiAgICAgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7CiAgICAgKiAvLyA9PiB0cnVlCiAgICAgKgogICAgICogXy5pc09iamVjdChfLm5vb3ApOwogICAgICogLy8gPT4gdHJ1ZQogICAgICoKICAgICAqIF8uaXNPYmplY3QobnVsbCk7CiAgICAgKiAvLyA9PiBmYWxzZQogICAgICovCiAgICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkgewogICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTsKICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTsKICAgIH0KCiAgICAvKiogXGBPYmplY3QjdG9TdHJpbmdcYCByZXN1bHQgcmVmZXJlbmNlcy4gKi8KICAgIHZhciBhc3luY1RhZyA9ICdbb2JqZWN0IEFzeW5jRnVuY3Rpb25dJywKICAgICAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJywKICAgICAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nLAogICAgICAgIHByb3h5VGFnID0gJ1tvYmplY3QgUHJveHldJzsKCiAgICAvKioKICAgICAqIENoZWNrcyBpZiBcYHZhbHVlXGAgaXMgY2xhc3NpZmllZCBhcyBhIFxgRnVuY3Rpb25cYCBvYmplY3QuCiAgICAgKgogICAgICogQHN0YXRpYwogICAgICogQG1lbWJlck9mIF8KICAgICAqIEBzaW5jZSAwLjEuMAogICAgICogQGNhdGVnb3J5IExhbmcKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLgogICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgXGB0cnVlXGAgaWYgXGB2YWx1ZVxgIGlzIGEgZnVuY3Rpb24sIGVsc2UgXGBmYWxzZVxgLgogICAgICogQGV4YW1wbGUKICAgICAqCiAgICAgKiBfLmlzRnVuY3Rpb24oXyk7CiAgICAgKiAvLyA9PiB0cnVlCiAgICAgKgogICAgICogXy5pc0Z1bmN0aW9uKC9hYmMvKTsKICAgICAqIC8vID0+IGZhbHNlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgLy8gVGhlIHVzZSBvZiBcYE9iamVjdCN0b1N0cmluZ1xgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgXGB0eXBlb2ZcYCBvcGVyYXRvcgogICAgICAvLyBpbiBTYWZhcmkgOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheXMgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy4KICAgICAgdmFyIHRhZyA9IGJhc2VHZXRUYWcodmFsdWUpOwogICAgICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnOwogICAgfQoKICAgIC8qKiBVc2VkIHRvIGRldGVjdCBvdmVycmVhY2hpbmcgY29yZS1qcyBzaGltcy4gKi8KICAgIHZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107CgogICAgLyoqIFVzZWQgdG8gZGV0ZWN0IG1ldGhvZHMgbWFzcXVlcmFkaW5nIGFzIG5hdGl2ZS4gKi8KICAgIHZhciBtYXNrU3JjS2V5ID0gKGZ1bmN0aW9uKCkgewogICAgICB2YXIgdWlkID0gL1teLl0rXCQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTsKICAgICAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnOwogICAgfSgpKTsKCiAgICAvKioKICAgICAqIENoZWNrcyBpZiBcYGZ1bmNcYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLgogICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgXGB0cnVlXGAgaWYgXGBmdW5jXGAgaXMgbWFza2VkLCBlbHNlIFxgZmFsc2VcYC4KICAgICAqLwogICAgZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykgewogICAgICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIChtYXNrU3JjS2V5IGluIGZ1bmMpOwogICAgfQoKICAgIC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KICAgIHZhciBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGU7CgogICAgLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqLwogICAgdmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZzsKCiAgICAvKioKICAgICAqIENvbnZlcnRzIFxgZnVuY1xgIHRvIGl0cyBzb3VyY2UgY29kZS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29udmVydC4KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLgogICAgICovCiAgICBmdW5jdGlvbiB0b1NvdXJjZShmdW5jKSB7CiAgICAgIGlmIChmdW5jICE9IG51bGwpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGZ1bmNUb1N0cmluZy5jYWxsKGZ1bmMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiAoZnVuYyArICcnKTsKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0KCiAgICAvKioKICAgICAqIFVzZWQgdG8gbWF0Y2ggXGBSZWdFeHBcYAogICAgICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1wYXR0ZXJucykuCiAgICAgKi8KICAgIHZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeXCQuKis/KClbXFxde318XS9nOwoKICAgIC8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpKS4gKi8KICAgIHZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXVwkLzsKCiAgICAvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCiAgICB2YXIgZnVuY1Byb3RvXCQxID0gRnVuY3Rpb24ucHJvdG90eXBlLAogICAgICAgIG9iamVjdFByb3RvXCQyID0gT2JqZWN0LnByb3RvdHlwZTsKCiAgICAvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovCiAgICB2YXIgZnVuY1RvU3RyaW5nXCQxID0gZnVuY1Byb3RvXCQxLnRvU3RyaW5nOwoKICAgIC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwogICAgdmFyIGhhc093blByb3BlcnR5XCQxID0gb2JqZWN0UHJvdG9cJDIuaGFzT3duUHJvcGVydHk7CgogICAgLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi8KICAgIHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArCiAgICAgIGZ1bmNUb1N0cmluZ1wkMS5jYWxsKGhhc093blByb3BlcnR5XCQxKS5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFxcJCYnKQogICAgICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJ1wkMS4qPycpICsgJ1wkJwogICAgKTsKCiAgICAvKioKICAgICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIFxgXy5pc05hdGl2ZVxgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIFxgdHJ1ZVxgIGlmIFxgdmFsdWVcYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwKICAgICAqICBlbHNlIFxgZmFsc2VcYC4KICAgICAqLwogICAgZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7CiAgICAgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB2YXIgcGF0dGVybiA9IGlzRnVuY3Rpb24odmFsdWUpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3RvcjsKICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0cyB0aGUgdmFsdWUgYXQgXGBrZXlcYCBvZiBcYG9iamVjdFxgLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LgogICAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLgogICAgICovCiAgICBmdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkgewogICAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBcYGtleVxgIG9mIFxgb2JqZWN0XGAuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC4KICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBcYHVuZGVmaW5lZFxgLgogICAgICovCiAgICBmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHsKICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpOwogICAgICByZXR1cm4gYmFzZUlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkOwogICAgfQoKICAgIC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi8KICAgIHZhciBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7CgogICAgLyoqCiAgICAgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbmFtZSBjbGVhcgogICAgICogQG1lbWJlck9mIEhhc2gKICAgICAqLwogICAgZnVuY3Rpb24gaGFzaENsZWFyKCkgewogICAgICB0aGlzLl9fZGF0YV9fID0gbmF0aXZlQ3JlYXRlID8gbmF0aXZlQ3JlYXRlKG51bGwpIDoge307CiAgICAgIHRoaXMuc2l6ZSA9IDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmVzIFxga2V5XGAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbmFtZSBkZWxldGUKICAgICAqIEBtZW1iZXJPZiBIYXNoCiAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS4KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIFxgdHJ1ZVxgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBcYGZhbHNlXGAuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGhhc2hEZWxldGUoa2V5KSB7CiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07CiAgICAgIHRoaXMuc2l6ZSAtPSByZXN1bHQgPyAxIDogMDsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgXGB1bmRlZmluZWRcYCBoYXNoIHZhbHVlcy4gKi8KICAgIHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJzsKCiAgICAvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovCiAgICB2YXIgb2JqZWN0UHJvdG9cJDMgPSBPYmplY3QucHJvdG90eXBlOwoKICAgIC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqLwogICAgdmFyIGhhc093blByb3BlcnR5XCQyID0gb2JqZWN0UHJvdG9cJDMuaGFzT3duUHJvcGVydHk7CgogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBcYGtleVxgLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbmFtZSBnZXQKICAgICAqIEBtZW1iZXJPZiBIYXNoCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC4KICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS4KICAgICAqLwogICAgZnVuY3Rpb24gaGFzaEdldChrZXkpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fOwogICAgICBpZiAobmF0aXZlQ3JlYXRlKSB7CiAgICAgICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTsKICAgICAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDsKICAgICAgfQogICAgICByZXR1cm4gaGFzT3duUHJvcGVydHlcJDIuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkOwogICAgfQoKICAgIC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KICAgIHZhciBvYmplY3RQcm90b1wkNCA9IE9iamVjdC5wcm90b3R5cGU7CgogICAgLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovCiAgICB2YXIgaGFzT3duUHJvcGVydHlcJDMgPSBvYmplY3RQcm90b1wkNC5oYXNPd25Qcm9wZXJ0eTsKCiAgICAvKioKICAgICAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIFxga2V5XGAgZXhpc3RzLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbmFtZSBoYXMKICAgICAqIEBtZW1iZXJPZiBIYXNoCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLgogICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgXGB0cnVlXGAgaWYgYW4gZW50cnkgZm9yIFxga2V5XGAgZXhpc3RzLCBlbHNlIFxgZmFsc2VcYC4KICAgICAqLwogICAgZnVuY3Rpb24gaGFzaEhhcyhrZXkpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fOwogICAgICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gKGRhdGFba2V5XSAhPT0gdW5kZWZpbmVkKSA6IGhhc093blByb3BlcnR5XCQzLmNhbGwoZGF0YSwga2V5KTsKICAgIH0KCiAgICAvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgXGB1bmRlZmluZWRcYCBoYXNoIHZhbHVlcy4gKi8KICAgIHZhciBIQVNIX1VOREVGSU5FRFwkMSA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJzsKCiAgICAvKioKICAgICAqIFNldHMgdGhlIGhhc2ggXGBrZXlcYCB0byBcYHZhbHVlXGAuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBuYW1lIHNldAogICAgICogQG1lbWJlck9mIEhhc2gKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LgogICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LgogICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgaGFzaCBpbnN0YW5jZS4KICAgICAqLwogICAgZnVuY3Rpb24gaGFzaFNldChrZXksIHZhbHVlKSB7CiAgICAgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXzsKICAgICAgdGhpcy5zaXplICs9IHRoaXMuaGFzKGtleSkgPyAwIDogMTsKICAgICAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEXCQxIDogdmFsdWU7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhIGhhc2ggb2JqZWN0LgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAY29uc3RydWN0b3IKICAgICAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLgogICAgICovCiAgICBmdW5jdGlvbiBIYXNoKGVudHJpZXMpIHsKICAgICAgdmFyIGluZGV4ID0gLTEsCiAgICAgICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7CgogICAgICB0aGlzLmNsZWFyKCk7CiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICAgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07CiAgICAgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTsKICAgICAgfQogICAgfQoKICAgIC8vIEFkZCBtZXRob2RzIHRvIFxgSGFzaFxgLgogICAgSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7CiAgICBIYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBoYXNoRGVsZXRlOwogICAgSGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDsKICAgIEhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7CiAgICBIYXNoLnByb3RvdHlwZS5zZXQgPSBoYXNoU2V0OwoKICAgIC8qKgogICAgICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbGlzdCBjYWNoZS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG5hbWUgY2xlYXIKICAgICAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdENhY2hlQ2xlYXIoKSB7CiAgICAgIHRoaXMuX19kYXRhX18gPSBbXTsKICAgICAgdGhpcy5zaXplID0gMDsKICAgIH0KCiAgICAvKioKICAgICAqIFBlcmZvcm1zIGEKICAgICAqIFtcYFNhbWVWYWx1ZVplcm9cYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybykKICAgICAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LgogICAgICoKICAgICAqIEBzdGF0aWMKICAgICAqIEBtZW1iZXJPZiBfCiAgICAgKiBAc2luY2UgNC4wLjAKICAgICAqIEBjYXRlZ29yeSBMYW5nCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLgogICAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS4KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIFxgdHJ1ZVxgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgXGBmYWxzZVxgLgogICAgICogQGV4YW1wbGUKICAgICAqCiAgICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTsKICAgICAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07CiAgICAgKgogICAgICogXy5lcShvYmplY3QsIG9iamVjdCk7CiAgICAgKiAvLyA9PiB0cnVlCiAgICAgKgogICAgICogXy5lcShvYmplY3QsIG90aGVyKTsKICAgICAqIC8vID0+IGZhbHNlCiAgICAgKgogICAgICogXy5lcSgnYScsICdhJyk7CiAgICAgKiAvLyA9PiB0cnVlCiAgICAgKgogICAgICogXy5lcSgnYScsIE9iamVjdCgnYScpKTsKICAgICAqIC8vID0+IGZhbHNlCiAgICAgKgogICAgICogXy5lcShOYU4sIE5hTik7CiAgICAgKiAvLyA9PiB0cnVlCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikgewogICAgICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBcYGtleVxgIGlzIGZvdW5kIGluIFxgYXJyYXlcYCBvZiBrZXktdmFsdWUgcGFpcnMuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LgogICAgICogQHBhcmFtIHsqfSBrZXkgVGhlIGtleSB0byBzZWFyY2ggZm9yLgogICAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgXGAtMVxgLgogICAgICovCiAgICBmdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkgewogICAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKICAgICAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkgewogICAgICAgICAgcmV0dXJuIGxlbmd0aDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi8KICAgIHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwoKICAgIC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqLwogICAgdmFyIHNwbGljZSA9IGFycmF5UHJvdG8uc3BsaWNlOwoKICAgIC8qKgogICAgICogUmVtb3ZlcyBcYGtleVxgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbGlzdCBjYWNoZS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG5hbWUgZGVsZXRlCiAgICAgKiBAbWVtYmVyT2YgTGlzdENhY2hlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS4KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIFxgdHJ1ZVxgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBcYGZhbHNlXGAuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLAogICAgICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTsKCiAgICAgIGlmIChpbmRleCA8IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdmFyIGxhc3RJbmRleCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkgewogICAgICAgIGRhdGEucG9wKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpOwogICAgICB9CiAgICAgIC0tdGhpcy5zaXplOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIFxga2V5XGAuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBuYW1lIGdldAogICAgICogQG1lbWJlck9mIExpc3RDYWNoZQogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuCiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLAogICAgICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTsKCiAgICAgIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrcyBpZiBhIGxpc3QgY2FjaGUgdmFsdWUgZm9yIFxga2V5XGAgZXhpc3RzLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbmFtZSBoYXMKICAgICAqIEBtZW1iZXJPZiBMaXN0Q2FjaGUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBcYHRydWVcYCBpZiBhbiBlbnRyeSBmb3IgXGBrZXlcYCBleGlzdHMsIGVsc2UgXGBmYWxzZVxgLgogICAgICovCiAgICBmdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7CiAgICAgIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgbGlzdCBjYWNoZSBcYGtleVxgIHRvIFxgdmFsdWVcYC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG5hbWUgc2V0CiAgICAgKiBAbWVtYmVyT2YgTGlzdENhY2hlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC4KICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4KICAgICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7CiAgICAgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXywKICAgICAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7CgogICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgKyt0aGlzLnNpemU7CiAgICAgICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBjb25zdHJ1Y3RvcgogICAgICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7CiAgICAgIHZhciBpbmRleCA9IC0xLAogICAgICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoOwoKICAgICAgdGhpcy5jbGVhcigpOwogICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdOwogICAgICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBBZGQgbWV0aG9kcyB0byBcYExpc3RDYWNoZVxgLgogICAgTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyOwogICAgTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7CiAgICBMaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDsKICAgIExpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzOwogICAgTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7CgogICAgLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqLwogICAgdmFyIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyk7CgogICAgLyoqCiAgICAgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBuYW1lIGNsZWFyCiAgICAgKiBAbWVtYmVyT2YgTWFwQ2FjaGUKICAgICAqLwogICAgZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHsKICAgICAgdGhpcy5zaXplID0gMDsKICAgICAgdGhpcy5fX2RhdGFfXyA9IHsKICAgICAgICAnaGFzaCc6IG5ldyBIYXNoLAogICAgICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLAogICAgICAgICdzdHJpbmcnOiBuZXcgSGFzaAogICAgICB9OwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2tzIGlmIFxgdmFsdWVcYCBpcyBzdWl0YWJsZSBmb3IgdXNlIGFzIHVuaXF1ZSBvYmplY3Qga2V5LgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay4KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIFxgdHJ1ZVxgIGlmIFxgdmFsdWVcYCBpcyBzdWl0YWJsZSwgZWxzZSBcYGZhbHNlXGAuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkgewogICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTsKICAgICAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJykKICAgICAgICA/ICh2YWx1ZSAhPT0gJ19fcHJvdG9fXycpCiAgICAgICAgOiAodmFsdWUgPT09IG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0cyB0aGUgZGF0YSBmb3IgXGBtYXBcYC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LgogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcmVmZXJlbmNlIGtleS4KICAgICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS4KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkgewogICAgICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXzsKICAgICAgcmV0dXJuIGlzS2V5YWJsZShrZXkpCiAgICAgICAgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ10KICAgICAgICA6IGRhdGEubWFwOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlcyBcYGtleVxgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbmFtZSBkZWxldGUKICAgICAqIEBtZW1iZXJPZiBNYXBDYWNoZQogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBcYHRydWVcYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgXGBmYWxzZVxgLgogICAgICovCiAgICBmdW5jdGlvbiBtYXBDYWNoZURlbGV0ZShrZXkpIHsKICAgICAgdmFyIHJlc3VsdCA9IGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTsKICAgICAgdGhpcy5zaXplIC09IHJlc3VsdCA/IDEgOiAwOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8qKgogICAgICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBcYGtleVxgLgogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAbmFtZSBnZXQKICAgICAqIEBtZW1iZXJPZiBNYXBDYWNoZQogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuCiAgICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkgewogICAgICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2tzIGlmIGEgbWFwIHZhbHVlIGZvciBcYGtleVxgIGV4aXN0cy4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG5hbWUgaGFzCiAgICAgKiBAbWVtYmVyT2YgTWFwQ2FjaGUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBcYHRydWVcYCBpZiBhbiBlbnRyeSBmb3IgXGBrZXlcYCBleGlzdHMsIGVsc2UgXGBmYWxzZVxgLgogICAgICovCiAgICBmdW5jdGlvbiBtYXBDYWNoZUhhcyhrZXkpIHsKICAgICAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hcCBcYGtleVxgIHRvIFxgdmFsdWVcYC4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICogQG5hbWUgc2V0CiAgICAgKiBAbWVtYmVyT2YgTWFwQ2FjaGUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LgogICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LgogICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLgogICAgICovCiAgICBmdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7CiAgICAgIHZhciBkYXRhID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLAogICAgICAgICAgc2l6ZSA9IGRhdGEuc2l6ZTsKCiAgICAgIGRhdGEuc2V0KGtleSwgdmFsdWUpOwogICAgICB0aGlzLnNpemUgKz0gZGF0YS5zaXplID09IHNpemUgPyAwIDogMTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEBjb25zdHJ1Y3RvcgogICAgICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuCiAgICAgKi8KICAgIGZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHsKICAgICAgdmFyIGluZGV4ID0gLTEsCiAgICAgICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7CgogICAgICB0aGlzLmNsZWFyKCk7CiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICAgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07CiAgICAgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTsKICAgICAgfQogICAgfQoKICAgIC8vIEFkZCBtZXRob2RzIHRvIFxgTWFwQ2FjaGVcYC4KICAgIE1hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENhY2hlQ2xlYXI7CiAgICBNYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwQ2FjaGVEZWxldGU7CiAgICBNYXBDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbWFwQ2FjaGVHZXQ7CiAgICBNYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwQ2FjaGVIYXM7CiAgICBNYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwQ2FjaGVTZXQ7CgogICAgLyoqIEVycm9yIG1lc3NhZ2UgY29uc3RhbnRzLiAqLwogICAgdmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJzsKCiAgICAvKioKICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgXGBmdW5jXGAuIElmIFxgcmVzb2x2ZXJcYCBpcwogICAgICogcHJvdmlkZWQsIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZQogICAgICogYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlIGZpcnN0IGFyZ3VtZW50CiAgICAgKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgbWFwIGNhY2hlIGtleS4gVGhlIFxgZnVuY1xgCiAgICAgKiBpcyBpbnZva2VkIHdpdGggdGhlIFxgdGhpc1xgIGJpbmRpbmcgb2YgdGhlIG1lbW9pemVkIGZ1bmN0aW9uLgogICAgICoKICAgICAqICoqTm90ZToqKiBUaGUgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgXGBjYWNoZVxgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZAogICAgICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIFxgXy5tZW1vaXplLkNhY2hlXGAKICAgICAqIGNvbnN0cnVjdG9yIHdpdGggb25lIHdob3NlIGluc3RhbmNlcyBpbXBsZW1lbnQgdGhlCiAgICAgKiBbXGBNYXBcYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcHJvcGVydGllcy1vZi10aGUtbWFwLXByb3RvdHlwZS1vYmplY3QpCiAgICAgKiBtZXRob2QgaW50ZXJmYWNlIG9mIFxgY2xlYXJcYCwgXGBkZWxldGVcYCwgXGBnZXRcYCwgXGBoYXNcYCwgYW5kIFxgc2V0XGAuCiAgICAgKgogICAgICogQHN0YXRpYwogICAgICogQG1lbWJlck9mIF8KICAgICAqIEBzaW5jZSAwLjEuMAogICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuCiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXplZCBmdW5jdGlvbi4KICAgICAqIEBleGFtcGxlCiAgICAgKgogICAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIgfTsKICAgICAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTsKICAgICAqCiAgICAgKiB2YXIgdmFsdWVzID0gXy5tZW1vaXplKF8udmFsdWVzKTsKICAgICAqIHZhbHVlcyhvYmplY3QpOwogICAgICogLy8gPT4gWzEsIDJdCiAgICAgKgogICAgICogdmFsdWVzKG90aGVyKTsKICAgICAqIC8vID0+IFszLCA0XQogICAgICoKICAgICAqIG9iamVjdC5hID0gMjsKICAgICAqIHZhbHVlcyhvYmplY3QpOwogICAgICogLy8gPT4gWzEsIDJdCiAgICAgKgogICAgICogLy8gTW9kaWZ5IHRoZSByZXN1bHQgY2FjaGUuCiAgICAgKiB2YWx1ZXMuY2FjaGUuc2V0KG9iamVjdCwgWydhJywgJ2InXSk7CiAgICAgKiB2YWx1ZXMob2JqZWN0KTsKICAgICAqIC8vID0+IFsnYScsICdiJ10KICAgICAqCiAgICAgKiAvLyBSZXBsYWNlIFxgXy5tZW1vaXplLkNhY2hlXGAuCiAgICAgKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwOwogICAgICovCiAgICBmdW5jdGlvbiBtZW1vaXplKGZ1bmMsIHJlc29sdmVyKSB7CiAgICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8IChyZXNvbHZlciAhPSBudWxsICYmIHR5cGVvZiByZXNvbHZlciAhPSAnZnVuY3Rpb24nKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTsKICAgICAgfQogICAgICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cywKICAgICAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sCiAgICAgICAgICAgIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGU7CgogICAgICAgIGlmIChjYWNoZS5oYXMoa2V5KSkgewogICAgICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpOwogICAgICAgIH0KICAgICAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlLnNldChrZXksIHJlc3VsdCkgfHwgY2FjaGU7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgICAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgKG1lbW9pemUuQ2FjaGUgfHwgTWFwQ2FjaGUpOwogICAgICByZXR1cm4gbWVtb2l6ZWQ7CiAgICB9CgogICAgLy8gRXhwb3NlIFxgTWFwQ2FjaGVcYC4KICAgIG1lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTsKCiAgICBjb25zdCBudW1iZXJUb0J5dGVBcnJheSA9IChudW0sIGJ5dGVMZW5ndGggPSBnZXROdW1iZXJCeXRlTGVuZ3RoKG51bSkpID0+IHsKICAgICAgICB2YXIgYnl0ZUFycmF5OwogICAgICAgIGlmIChieXRlTGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgYnl0ZUFycmF5ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSk7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50OCgwLCBudW0pOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChieXRlTGVuZ3RoID09IDIpIHsKICAgICAgICAgICAgYnl0ZUFycmF5ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigyKSk7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50MTYoMCwgbnVtKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoYnl0ZUxlbmd0aCA9PSAzKSB7CiAgICAgICAgICAgIGJ5dGVBcnJheSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMykpOwogICAgICAgICAgICBieXRlQXJyYXkuc2V0VWludDgoMCwgbnVtID4+IDE2KTsKICAgICAgICAgICAgYnl0ZUFycmF5LnNldFVpbnQxNigxLCBudW0gJiAweGZmZmYpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChieXRlTGVuZ3RoID09IDQpIHsKICAgICAgICAgICAgYnl0ZUFycmF5ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig0KSk7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50MzIoMCwgbnVtKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHhmZmZmZmZmZikgewogICAgICAgICAgICBieXRlQXJyYXkgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDUpKTsKICAgICAgICAgICAgYnl0ZUFycmF5LnNldFVpbnQzMigxLCBudW0pOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChieXRlTGVuZ3RoID09IDUpIHsKICAgICAgICAgICAgYnl0ZUFycmF5ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig1KSk7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50OCgwLCBudW0gLyAweDEwMDAwMDAwMCB8IDApOwogICAgICAgICAgICBieXRlQXJyYXkuc2V0VWludDMyKDEsIG51bSAlIDB4MTAwMDAwMDAwKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoYnl0ZUxlbmd0aCA9PSA2KSB7CiAgICAgICAgICAgIGJ5dGVBcnJheSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNikpOwogICAgICAgICAgICBieXRlQXJyYXkuc2V0VWludDE2KDAsIG51bSAvIDB4MTAwMDAwMDAwIHwgMCk7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50MzIoMiwgbnVtICUgMHgxMDAwMDAwMDApOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChieXRlTGVuZ3RoID09IDcpIHsKICAgICAgICAgICAgYnl0ZUFycmF5ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig3KSk7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50OCgwLCBudW0gLyAweDEwMDAwMDAwMDAwMDAgfCAwKTsKICAgICAgICAgICAgYnl0ZUFycmF5LnNldFVpbnQxNigxLCBudW0gLyAweDEwMDAwMDAwMCAmIDB4ZmZmZik7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50MzIoMywgbnVtICUgMHgxMDAwMDAwMDApOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChieXRlTGVuZ3RoID09IDgpIHsKICAgICAgICAgICAgYnl0ZUFycmF5ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7CiAgICAgICAgICAgIGJ5dGVBcnJheS5zZXRVaW50MzIoMCwgbnVtIC8gMHgxMDAwMDAwMDAgfCAwKTsKICAgICAgICAgICAgYnl0ZUFycmF5LnNldFVpbnQzMig0LCBudW0gJSAweDEwMDAwMDAwMCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkVCTUwudHlwZWRBcnJheVV0aWxzLm51bWJlclRvQnl0ZUFycmF5OiBieXRlIGxlbmd0aCBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byA4Iik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShieXRlQXJyYXkuYnVmZmVyKTsKICAgIH07CiAgICBjb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IG1lbW9pemUoKHN0cikgPT4gewogICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb20oQXJyYXkuZnJvbShzdHIpLm1hcChfID0+IF8uY29kZVBvaW50QXQoMCkpKTsKICAgIH0pOwogICAgZnVuY3Rpb24gZ2V0TnVtYmVyQnl0ZUxlbmd0aChudW0pIHsKICAgICAgICBpZiAobnVtIDwgMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkVCTUwudHlwZWRBcnJheVV0aWxzLmdldE51bWJlckJ5dGVMZW5ndGg6IG5lZ2F0aXZlIG51bWJlciBub3QgaW1wbGVtZW50ZWQiKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHgxMDApIHsKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG51bSA8IDB4MTAwMDApIHsKICAgICAgICAgICAgcmV0dXJuIDI7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG51bSA8IDB4MTAwMDAwMCkgewogICAgICAgICAgICByZXR1cm4gMzsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHgxMDAwMDAwMDApIHsKICAgICAgICAgICAgcmV0dXJuIDQ7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG51bSA8IDB4MTAwMDAwMDAwMDApIHsKICAgICAgICAgICAgcmV0dXJuIDU7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG51bSA8IDB4MTAwMDAwMDAwMDAwMCkgewogICAgICAgICAgICByZXR1cm4gNjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHgyMDAwMDAwMDAwMDAwMCkgewogICAgICAgICAgICByZXR1cm4gNzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiRUJNTC50eXBlZEFycmF5VXRpbHMuZ2V0TnVtYmVyQnl0ZUxlbmd0aDogbnVtYmVyIGV4Y2VlZHMgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIiKTsKICAgICAgICB9CiAgICB9CiAgICBjb25zdCBpbnQxNkJpdCA9IG1lbW9pemUoKG51bSkgPT4gewogICAgICAgIGNvbnN0IGFiID0gbmV3IEFycmF5QnVmZmVyKDIpOwogICAgICAgIG5ldyBEYXRhVmlldyhhYikuc2V0SW50MTYoMCwgbnVtKTsKICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYWIpOwogICAgfSk7CiAgICBjb25zdCBmbG9hdDMyYml0ID0gbWVtb2l6ZSgobnVtKSA9PiB7CiAgICAgICAgY29uc3QgYWIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7CiAgICAgICAgbmV3IERhdGFWaWV3KGFiKS5zZXRGbG9hdDMyKDAsIG51bSk7CiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGFiKTsKICAgIH0pOwogICAgY29uc3QgZHVtcEJ5dGVzID0gKGIpID0+IHsKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShiKSkubWFwKF8gPT4gXGAweFwke18udG9TdHJpbmcoMTYpfVxgKS5qb2luKCIsICIpOwogICAgfTsKCiAgICBjbGFzcyBWYWx1ZSB7CiAgICAgICAgY29uc3RydWN0b3IoYnl0ZXMpIHsKICAgICAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwogICAgICAgIH0KICAgICAgICB3cml0ZShidWYsIHBvcykgewogICAgICAgICAgICBidWYuc2V0KHRoaXMuYnl0ZXMsIHBvcyk7CiAgICAgICAgICAgIHJldHVybiBwb3MgKyB0aGlzLmJ5dGVzLmxlbmd0aDsKICAgICAgICB9CiAgICAgICAgY291bnRTaXplKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5ieXRlcy5sZW5ndGg7CiAgICAgICAgfQogICAgfQogICAgY2xhc3MgRWxlbWVudCB7CiAgICAgICAgY29uc3RydWN0b3IoaWQsIGNoaWxkcmVuLCBpc1NpemVVbmtub3duKSB7CiAgICAgICAgICAgIHRoaXMuaWQgPSBpZDsKICAgICAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuOwogICAgICAgICAgICBjb25zdCBib2R5U2l6ZSA9IHRoaXMuY2hpbGRyZW4ucmVkdWNlKChwLCBjKSA9PiBwICsgYy5jb3VudFNpemUoKSwgMCk7CiAgICAgICAgICAgIHRoaXMuc2l6ZU1ldGFEYXRhID0gaXNTaXplVW5rbm93biA/CiAgICAgICAgICAgICAgICBVTktOT1dOX1NJWkUgOgogICAgICAgICAgICAgICAgdmludEVuY29kZShudW1iZXJUb0J5dGVBcnJheShib2R5U2l6ZSwgZ2V0RUJNTEJ5dGVMZW5ndGgoYm9keVNpemUpKSk7CiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuaWQubGVuZ3RoICsgdGhpcy5zaXplTWV0YURhdGEubGVuZ3RoICsgYm9keVNpemU7CiAgICAgICAgfQogICAgICAgIHdyaXRlKGJ1ZiwgcG9zKSB7CiAgICAgICAgICAgIGJ1Zi5zZXQodGhpcy5pZCwgcG9zKTsKICAgICAgICAgICAgYnVmLnNldCh0aGlzLnNpemVNZXRhRGF0YSwgcG9zICsgdGhpcy5pZC5sZW5ndGgpOwogICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5yZWR1Y2UoKHAsIGMpID0+IGMud3JpdGUoYnVmLCBwKSwgcG9zICsgdGhpcy5pZC5sZW5ndGggKyB0aGlzLnNpemVNZXRhRGF0YS5sZW5ndGgpOwogICAgICAgIH0KICAgICAgICBjb3VudFNpemUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemU7CiAgICAgICAgfQogICAgfQogICAgY29uc3QgYnl0ZXMgPSBtZW1vaXplKChkYXRhKSA9PiB7CiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShkYXRhKTsKICAgIH0pOwogICAgY29uc3QgbnVtYmVyID0gbWVtb2l6ZSgobnVtKSA9PiB7CiAgICAgICAgcmV0dXJuIGJ5dGVzKG51bWJlclRvQnl0ZUFycmF5KG51bSkpOwogICAgfSk7CiAgICBjb25zdCB2aW50RW5jb2RlZE51bWJlciA9IG1lbW9pemUoKG51bSkgPT4gewogICAgICAgIHJldHVybiBieXRlcyh2aW50RW5jb2RlKG51bWJlclRvQnl0ZUFycmF5KG51bSwgZ2V0RUJNTEJ5dGVMZW5ndGgobnVtKSkpKTsKICAgIH0pOwogICAgY29uc3QgaW50MTYgPSBtZW1vaXplKChudW0pID0+IHsKICAgICAgICByZXR1cm4gYnl0ZXMoaW50MTZCaXQobnVtKSk7CiAgICB9KTsKICAgIGNvbnN0IGZsb2F0ID0gbWVtb2l6ZSgobnVtKSA9PiB7CiAgICAgICAgcmV0dXJuIGJ5dGVzKGZsb2F0MzJiaXQobnVtKSk7CiAgICB9KTsKICAgIGNvbnN0IHN0cmluZyA9IG1lbW9pemUoKHN0cikgPT4gewogICAgICAgIHJldHVybiBieXRlcyhzdHJpbmdUb0J5dGVBcnJheShzdHIpKTsKICAgIH0pOwogICAgY29uc3QgZWxlbWVudCA9IChpZCwgY2hpbGQpID0+IHsKICAgICAgICByZXR1cm4gbmV3IEVsZW1lbnQoaWQsIEFycmF5LmlzQXJyYXkoY2hpbGQpID8gY2hpbGQgOiBbY2hpbGRdLCBmYWxzZSk7CiAgICB9OwogICAgY29uc3QgdW5rbm93blNpemVFbGVtZW50ID0gKGlkLCBjaGlsZCkgPT4gewogICAgICAgIHJldHVybiBuZXcgRWxlbWVudChpZCwgQXJyYXkuaXNBcnJheShjaGlsZCkgPyBjaGlsZCA6IFtjaGlsZF0sIHRydWUpOwogICAgfTsKICAgIGNvbnN0IGJ1aWxkID0gKHYpID0+IHsKICAgICAgICBjb25zdCBiID0gbmV3IFVpbnQ4QXJyYXkodi5jb3VudFNpemUoKSk7CiAgICAgICAgdi53cml0ZShiLCAwKTsKICAgICAgICByZXR1cm4gYjsKICAgIH07CiAgICBjb25zdCBnZXRFQk1MQnl0ZUxlbmd0aCA9IChudW0pID0+IHsKICAgICAgICBpZiAobnVtIDwgMHg3ZikgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHgzZmZmKSB7CiAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChudW0gPCAweDFmZmZmZikgewogICAgICAgICAgICByZXR1cm4gMzsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHhmZmZmZmZmKSB7CiAgICAgICAgICAgIHJldHVybiA0OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChudW0gPCAweDdmZmZmZmZmZikgewogICAgICAgICAgICByZXR1cm4gNTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHgzZmZmZmZmZmZmZikgewogICAgICAgICAgICByZXR1cm4gNjsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobnVtIDwgMHgxZmZmZmZmZmZmZmZmKSB7CiAgICAgICAgICAgIHJldHVybiA3OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChudW0gPCAweDIwMDAwMDAwMDAwMDAwKSB7CiAgICAgICAgICAgIHJldHVybiA4OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChudW0gPCAweGZmZmZmZmZmZmZmZmZmKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiRUJNTGdldEVCTUxCeXRlTGVuZ3RoOiBudW1iZXIgZXhjZWVkcyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiIpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFQk1MZ2V0RUJNTEJ5dGVMZW5ndGg6IGRhdGEgc2l6ZSBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAiICsgKE1hdGgucG93KDIsIDU2KSAtIDIpKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgVU5LTk9XTl9TSVpFID0gbmV3IFVpbnQ4QXJyYXkoWzB4MDEsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkYsIDB4RkZdKTsKICAgIGNvbnN0IHZpbnRFbmNvZGUgPSAoYnl0ZUFycmF5KSA9PiB7CiAgICAgICAgYnl0ZUFycmF5WzBdID0gZ2V0U2l6ZU1hc2soYnl0ZUFycmF5Lmxlbmd0aCkgfCBieXRlQXJyYXlbMF07CiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheTsKICAgIH07CiAgICBjb25zdCBnZXRTaXplTWFzayA9IChieXRlTGVuZ3RoKSA9PiB7CiAgICAgICAgcmV0dXJuIDB4ODAgPj4gKGJ5dGVMZW5ndGggLSAxKTsKICAgIH07CgogICAgLyoqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3Lm1hdHJvc2thLm9yZy90ZWNobmljYWwvc3BlY3MvaW5kZXguaHRtbAogICAgICovCiAgICBjb25zdCBJRCA9IHsKICAgICAgICBFQk1MOiBVaW50OEFycmF5Lm9mKDB4MUEsIDB4NDUsIDB4REYsIDB4QTMpLAogICAgICAgIEVCTUxWZXJzaW9uOiBVaW50OEFycmF5Lm9mKDB4NDIsIDB4ODYpLAogICAgICAgIEVCTUxSZWFkVmVyc2lvbjogVWludDhBcnJheS5vZigweDQyLCAweEY3KSwKICAgICAgICBFQk1MTWF4SURMZW5ndGg6IFVpbnQ4QXJyYXkub2YoMHg0MiwgMHhGMiksCiAgICAgICAgRUJNTE1heFNpemVMZW5ndGg6IFVpbnQ4QXJyYXkub2YoMHg0MiwgMHhGMyksCiAgICAgICAgRG9jVHlwZTogVWludDhBcnJheS5vZigweDQyLCAweDgyKSwKICAgICAgICBEb2NUeXBlVmVyc2lvbjogVWludDhBcnJheS5vZigweDQyLCAweDg3KSwKICAgICAgICBEb2NUeXBlUmVhZFZlcnNpb246IFVpbnQ4QXJyYXkub2YoMHg0MiwgMHg4NSksCiAgICAgICAgVm9pZDogVWludDhBcnJheS5vZigweEVDKSwKICAgICAgICBDUkMzMjogVWludDhBcnJheS5vZigweEJGKSwKICAgICAgICBTZWdtZW50OiBVaW50OEFycmF5Lm9mKDB4MTgsIDB4NTMsIDB4ODAsIDB4NjcpLAogICAgICAgIFNlZWtIZWFkOiBVaW50OEFycmF5Lm9mKDB4MTEsIDB4NEQsIDB4OUIsIDB4NzQpLAogICAgICAgIFNlZWs6IFVpbnQ4QXJyYXkub2YoMHg0RCwgMHhCQiksCiAgICAgICAgU2Vla0lEOiBVaW50OEFycmF5Lm9mKDB4NTMsIDB4QUIpLAogICAgICAgIFNlZWtQb3NpdGlvbjogVWludDhBcnJheS5vZigweDUzLCAweEFDKSwKICAgICAgICBJbmZvOiBVaW50OEFycmF5Lm9mKDB4MTUsIDB4NDksIDB4QTksIDB4NjYpLAogICAgICAgIFNlZ21lbnRVSUQ6IFVpbnQ4QXJyYXkub2YoMHg3MywgMHhBNCksCiAgICAgICAgU2VnbWVudEZpbGVuYW1lOiBVaW50OEFycmF5Lm9mKDB4NzMsIDB4ODQpLAogICAgICAgIFByZXZVSUQ6IFVpbnQ4QXJyYXkub2YoMHgzQywgMHhCOSwgMHgyMyksCiAgICAgICAgUHJldkZpbGVuYW1lOiBVaW50OEFycmF5Lm9mKDB4M0MsIDB4ODMsIDB4QUIpLAogICAgICAgIE5leHRVSUQ6IFVpbnQ4QXJyYXkub2YoMHgzRSwgMHhCOSwgMHgyMyksCiAgICAgICAgTmV4dEZpbGVuYW1lOiBVaW50OEFycmF5Lm9mKDB4M0UsIDB4ODMsIDB4QkIpLAogICAgICAgIFNlZ21lbnRGYW1pbHk6IFVpbnQ4QXJyYXkub2YoMHg0NCwgMHg0NCksCiAgICAgICAgQ2hhcHRlclRyYW5zbGF0ZTogVWludDhBcnJheS5vZigweDY5LCAweDI0KSwKICAgICAgICBDaGFwdGVyVHJhbnNsYXRlRWRpdGlvblVJRDogVWludDhBcnJheS5vZigweDY5LCAweEZDKSwKICAgICAgICBDaGFwdGVyVHJhbnNsYXRlQ29kZWM6IFVpbnQ4QXJyYXkub2YoMHg2OSwgMHhCRiksCiAgICAgICAgQ2hhcHRlclRyYW5zbGF0ZUlEOiBVaW50OEFycmF5Lm9mKDB4NjksIDB4QTUpLAogICAgICAgIFRpbWVjb2RlU2NhbGU6IFVpbnQ4QXJyYXkub2YoMHgyQSwgMHhENywgMHhCMSksCiAgICAgICAgRHVyYXRpb246IFVpbnQ4QXJyYXkub2YoMHg0NCwgMHg4OSksCiAgICAgICAgRGF0ZVVUQzogVWludDhBcnJheS5vZigweDQ0LCAweDYxKSwKICAgICAgICBUaXRsZTogVWludDhBcnJheS5vZigweDdCLCAweEE5KSwKICAgICAgICBNdXhpbmdBcHA6IFVpbnQ4QXJyYXkub2YoMHg0RCwgMHg4MCksCiAgICAgICAgV3JpdGluZ0FwcDogVWludDhBcnJheS5vZigweDU3LCAweDQxKSwKICAgICAgICBDbHVzdGVyOiBVaW50OEFycmF5Lm9mKDB4MUYsIDB4NDMsIDB4QjYsIDB4NzUpLAogICAgICAgIFRpbWVjb2RlOiBVaW50OEFycmF5Lm9mKDB4RTcpLAogICAgICAgIFNpbGVudFRyYWNrczogVWludDhBcnJheS5vZigweDU4LCAweDU0KSwKICAgICAgICBTaWxlbnRUcmFja051bWJlcjogVWludDhBcnJheS5vZigweDU4LCAweEQ3KSwKICAgICAgICBQb3NpdGlvbjogVWludDhBcnJheS5vZigweEE3KSwKICAgICAgICBQcmV2U2l6ZTogVWludDhBcnJheS5vZigweEFCKSwKICAgICAgICBTaW1wbGVCbG9jazogVWludDhBcnJheS5vZigweEEzKSwKICAgICAgICBCbG9ja0dyb3VwOiBVaW50OEFycmF5Lm9mKDB4QTApLAogICAgICAgIEJsb2NrOiBVaW50OEFycmF5Lm9mKDB4QTEpLAogICAgICAgIEJsb2NrQWRkaXRpb25zOiBVaW50OEFycmF5Lm9mKDB4NzUsIDB4QTEpLAogICAgICAgIEJsb2NrTW9yZTogVWludDhBcnJheS5vZigweEE2KSwKICAgICAgICBCbG9ja0FkZElEOiBVaW50OEFycmF5Lm9mKDB4RUUpLAogICAgICAgIEJsb2NrQWRkaXRpb25hbDogVWludDhBcnJheS5vZigweEE1KSwKICAgICAgICBCbG9ja0R1cmF0aW9uOiBVaW50OEFycmF5Lm9mKDB4OUIpLAogICAgICAgIFJlZmVyZW5jZVByaW9yaXR5OiBVaW50OEFycmF5Lm9mKDB4RkEpLAogICAgICAgIFJlZmVyZW5jZUJsb2NrOiBVaW50OEFycmF5Lm9mKDB4RkIpLAogICAgICAgIENvZGVjU3RhdGU6IFVpbnQ4QXJyYXkub2YoMHhBNCksCiAgICAgICAgRGlzY2FyZFBhZGRpbmc6IFVpbnQ4QXJyYXkub2YoMHg3NSwgMHhBMiksCiAgICAgICAgU2xpY2VzOiBVaW50OEFycmF5Lm9mKDB4OEUpLAogICAgICAgIFRpbWVTbGljZTogVWludDhBcnJheS5vZigweEU4KSwKICAgICAgICBMYWNlTnVtYmVyOiBVaW50OEFycmF5Lm9mKDB4Q0MpLAogICAgICAgIFRyYWNrczogVWludDhBcnJheS5vZigweDE2LCAweDU0LCAweEFFLCAweDZCKSwKICAgICAgICBUcmFja0VudHJ5OiBVaW50OEFycmF5Lm9mKDB4QUUpLAogICAgICAgIFRyYWNrTnVtYmVyOiBVaW50OEFycmF5Lm9mKDB4RDcpLAogICAgICAgIFRyYWNrVUlEOiBVaW50OEFycmF5Lm9mKDB4NzMsIDB4QzUpLAogICAgICAgIFRyYWNrVHlwZTogVWludDhBcnJheS5vZigweDgzKSwKICAgICAgICBGbGFnRW5hYmxlZDogVWludDhBcnJheS5vZigweEI5KSwKICAgICAgICBGbGFnRGVmYXVsdDogVWludDhBcnJheS5vZigweDg4KSwKICAgICAgICBGbGFnRm9yY2VkOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4QUEpLAogICAgICAgIEZsYWdMYWNpbmc6IFVpbnQ4QXJyYXkub2YoMHg5QyksCiAgICAgICAgTWluQ2FjaGU6IFVpbnQ4QXJyYXkub2YoMHg2RCwgMHhFNyksCiAgICAgICAgTWF4Q2FjaGU6IFVpbnQ4QXJyYXkub2YoMHg2RCwgMHhGOCksCiAgICAgICAgRGVmYXVsdER1cmF0aW9uOiBVaW50OEFycmF5Lm9mKDB4MjMsIDB4RTMsIDB4ODMpLAogICAgICAgIERlZmF1bHREZWNvZGVkRmllbGREdXJhdGlvbjogVWludDhBcnJheS5vZigweDIzLCAweDRFLCAweDdBKSwKICAgICAgICBNYXhCbG9ja0FkZGl0aW9uSUQ6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhFRSksCiAgICAgICAgTmFtZTogVWludDhBcnJheS5vZigweDUzLCAweDZFKSwKICAgICAgICBMYW5ndWFnZTogVWludDhBcnJheS5vZigweDIyLCAweEI1LCAweDlDKSwKICAgICAgICBDb2RlY0lEOiBVaW50OEFycmF5Lm9mKDB4ODYpLAogICAgICAgIENvZGVjUHJpdmF0ZTogVWludDhBcnJheS5vZigweDYzLCAweEEyKSwKICAgICAgICBDb2RlY05hbWU6IFVpbnQ4QXJyYXkub2YoMHgyNSwgMHg4NiwgMHg4OCksCiAgICAgICAgQXR0YWNobWVudExpbms6IFVpbnQ4QXJyYXkub2YoMHg3NCwgMHg0NiksCiAgICAgICAgQ29kZWNEZWNvZGVBbGw6IFVpbnQ4QXJyYXkub2YoMHhBQSksCiAgICAgICAgVHJhY2tPdmVybGF5OiBVaW50OEFycmF5Lm9mKDB4NkYsIDB4QUIpLAogICAgICAgIENvZGVjRGVsYXk6IFVpbnQ4QXJyYXkub2YoMHg1NiwgMHhBQSksCiAgICAgICAgU2Vla1ByZVJvbGw6IFVpbnQ4QXJyYXkub2YoMHg1NiwgMHhCQiksCiAgICAgICAgVHJhY2tUcmFuc2xhdGU6IFVpbnQ4QXJyYXkub2YoMHg2NiwgMHgyNCksCiAgICAgICAgVHJhY2tUcmFuc2xhdGVFZGl0aW9uVUlEOiBVaW50OEFycmF5Lm9mKDB4NjYsIDB4RkMpLAogICAgICAgIFRyYWNrVHJhbnNsYXRlQ29kZWM6IFVpbnQ4QXJyYXkub2YoMHg2NiwgMHhCRiksCiAgICAgICAgVHJhY2tUcmFuc2xhdGVUcmFja0lEOiBVaW50OEFycmF5Lm9mKDB4NjYsIDB4QTUpLAogICAgICAgIFZpZGVvOiBVaW50OEFycmF5Lm9mKDB4RTApLAogICAgICAgIEZsYWdJbnRlcmxhY2VkOiBVaW50OEFycmF5Lm9mKDB4OUEpLAogICAgICAgIEZpZWxkT3JkZXI6IFVpbnQ4QXJyYXkub2YoMHg5RCksCiAgICAgICAgU3RlcmVvTW9kZTogVWludDhBcnJheS5vZigweDUzLCAweEI4KSwKICAgICAgICBBbHBoYU1vZGU6IFVpbnQ4QXJyYXkub2YoMHg1MywgMHhDMCksCiAgICAgICAgUGl4ZWxXaWR0aDogVWludDhBcnJheS5vZigweEIwKSwKICAgICAgICBQaXhlbEhlaWdodDogVWludDhBcnJheS5vZigweEJBKSwKICAgICAgICBQaXhlbENyb3BCb3R0b206IFVpbnQ4QXJyYXkub2YoMHg1NCwgMHhBQSksCiAgICAgICAgUGl4ZWxDcm9wVG9wOiBVaW50OEFycmF5Lm9mKDB4NTQsIDB4QkIpLAogICAgICAgIFBpeGVsQ3JvcExlZnQ6IFVpbnQ4QXJyYXkub2YoMHg1NCwgMHhDQyksCiAgICAgICAgUGl4ZWxDcm9wUmlnaHQ6IFVpbnQ4QXJyYXkub2YoMHg1NCwgMHhERCksCiAgICAgICAgRGlzcGxheVdpZHRoOiBVaW50OEFycmF5Lm9mKDB4NTQsIDB4QjApLAogICAgICAgIERpc3BsYXlIZWlnaHQ6IFVpbnQ4QXJyYXkub2YoMHg1NCwgMHhCQSksCiAgICAgICAgRGlzcGxheVVuaXQ6IFVpbnQ4QXJyYXkub2YoMHg1NCwgMHhCMiksCiAgICAgICAgQXNwZWN0UmF0aW9UeXBlOiBVaW50OEFycmF5Lm9mKDB4NTQsIDB4QjMpLAogICAgICAgIENvbG91clNwYWNlOiBVaW50OEFycmF5Lm9mKDB4MkUsIDB4QjUsIDB4MjQpLAogICAgICAgIENvbG91cjogVWludDhBcnJheS5vZigweDU1LCAweEIwKSwKICAgICAgICBNYXRyaXhDb2VmZmljaWVudHM6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhCMSksCiAgICAgICAgQml0c1BlckNoYW5uZWw6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhCMiksCiAgICAgICAgQ2hyb21hU3Vic2FtcGxpbmdIb3J6OiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4QjMpLAogICAgICAgIENocm9tYVN1YnNhbXBsaW5nVmVydDogVWludDhBcnJheS5vZigweDU1LCAweEI0KSwKICAgICAgICBDYlN1YnNhbXBsaW5nSG9yejogVWludDhBcnJheS5vZigweDU1LCAweEI1KSwKICAgICAgICBDYlN1YnNhbXBsaW5nVmVydDogVWludDhBcnJheS5vZigweDU1LCAweEI2KSwKICAgICAgICBDaHJvbWFTaXRpbmdIb3J6OiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4QjcpLAogICAgICAgIENocm9tYVNpdGluZ1ZlcnQ6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhCOCksCiAgICAgICAgUmFuZ2U6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhCOSksCiAgICAgICAgVHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3M6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhCQSksCiAgICAgICAgUHJpbWFyaWVzOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4QkIpLAogICAgICAgIE1heENMTDogVWludDhBcnJheS5vZigweDU1LCAweEJDKSwKICAgICAgICBNYXhGQUxMOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4QkQpLAogICAgICAgIE1hc3RlcmluZ01ldGFkYXRhOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4RDApLAogICAgICAgIFByaW1hcnlSQ2hyb21hdGljaXR5WDogVWludDhBcnJheS5vZigweDU1LCAweEQxKSwKICAgICAgICBQcmltYXJ5UkNocm9tYXRpY2l0eVk6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhEMiksCiAgICAgICAgUHJpbWFyeUdDaHJvbWF0aWNpdHlYOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4RDMpLAogICAgICAgIFByaW1hcnlHQ2hyb21hdGljaXR5WTogVWludDhBcnJheS5vZigweDU1LCAweEQ0KSwKICAgICAgICBQcmltYXJ5QkNocm9tYXRpY2l0eVg6IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhENSksCiAgICAgICAgUHJpbWFyeUJDaHJvbWF0aWNpdHlZOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4RDYpLAogICAgICAgIFdoaXRlUG9pbnRDaHJvbWF0aWNpdHlYOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4RDcpLAogICAgICAgIFdoaXRlUG9pbnRDaHJvbWF0aWNpdHlZOiBVaW50OEFycmF5Lm9mKDB4NTUsIDB4RDgpLAogICAgICAgIEx1bWluYW5jZU1heDogVWludDhBcnJheS5vZigweDU1LCAweEQ5KSwKICAgICAgICBMdW1pbmFuY2VNaW46IFVpbnQ4QXJyYXkub2YoMHg1NSwgMHhEQSksCiAgICAgICAgQXVkaW86IFVpbnQ4QXJyYXkub2YoMHhFMSksCiAgICAgICAgU2FtcGxpbmdGcmVxdWVuY3k6IFVpbnQ4QXJyYXkub2YoMHhCNSksCiAgICAgICAgT3V0cHV0U2FtcGxpbmdGcmVxdWVuY3k6IFVpbnQ4QXJyYXkub2YoMHg3OCwgMHhCNSksCiAgICAgICAgQ2hhbm5lbHM6IFVpbnQ4QXJyYXkub2YoMHg5RiksCiAgICAgICAgQml0RGVwdGg6IFVpbnQ4QXJyYXkub2YoMHg2MiwgMHg2NCksCiAgICAgICAgVHJhY2tPcGVyYXRpb246IFVpbnQ4QXJyYXkub2YoMHhFMiksCiAgICAgICAgVHJhY2tDb21iaW5lUGxhbmVzOiBVaW50OEFycmF5Lm9mKDB4RTMpLAogICAgICAgIFRyYWNrUGxhbmU6IFVpbnQ4QXJyYXkub2YoMHhFNCksCiAgICAgICAgVHJhY2tQbGFuZVVJRDogVWludDhBcnJheS5vZigweEU1KSwKICAgICAgICBUcmFja1BsYW5lVHlwZTogVWludDhBcnJheS5vZigweEU2KSwKICAgICAgICBUcmFja0pvaW5CbG9ja3M6IFVpbnQ4QXJyYXkub2YoMHhFOSksCiAgICAgICAgVHJhY2tKb2luVUlEOiBVaW50OEFycmF5Lm9mKDB4RUQpLAogICAgICAgIENvbnRlbnRFbmNvZGluZ3M6IFVpbnQ4QXJyYXkub2YoMHg2RCwgMHg4MCksCiAgICAgICAgQ29udGVudEVuY29kaW5nOiBVaW50OEFycmF5Lm9mKDB4NjIsIDB4NDApLAogICAgICAgIENvbnRlbnRFbmNvZGluZ09yZGVyOiBVaW50OEFycmF5Lm9mKDB4NTAsIDB4MzEpLAogICAgICAgIENvbnRlbnRFbmNvZGluZ1Njb3BlOiBVaW50OEFycmF5Lm9mKDB4NTAsIDB4MzIpLAogICAgICAgIENvbnRlbnRFbmNvZGluZ1R5cGU6IFVpbnQ4QXJyYXkub2YoMHg1MCwgMHgzMyksCiAgICAgICAgQ29udGVudENvbXByZXNzaW9uOiBVaW50OEFycmF5Lm9mKDB4NTAsIDB4MzQpLAogICAgICAgIENvbnRlbnRDb21wQWxnbzogVWludDhBcnJheS5vZigweDQyLCAweDU0KSwKICAgICAgICBDb250ZW50Q29tcFNldHRpbmdzOiBVaW50OEFycmF5Lm9mKDB4NDIsIDB4NTUpLAogICAgICAgIENvbnRlbnRFbmNyeXB0aW9uOiBVaW50OEFycmF5Lm9mKDB4NTAsIDB4MzUpLAogICAgICAgIENvbnRlbnRFbmNBbGdvOiBVaW50OEFycmF5Lm9mKDB4NDcsIDB4RTEpLAogICAgICAgIENvbnRlbnRFbmNLZXlJRDogVWludDhBcnJheS5vZigweDQ3LCAweEUyKSwKICAgICAgICBDb250ZW50U2lnbmF0dXJlOiBVaW50OEFycmF5Lm9mKDB4NDcsIDB4RTMpLAogICAgICAgIENvbnRlbnRTaWdLZXlJRDogVWludDhBcnJheS5vZigweDQ3LCAweEU0KSwKICAgICAgICBDb250ZW50U2lnQWxnbzogVWludDhBcnJheS5vZigweDQ3LCAweEU1KSwKICAgICAgICBDb250ZW50U2lnSGFzaEFsZ286IFVpbnQ4QXJyYXkub2YoMHg0NywgMHhFNiksCiAgICAgICAgQ3VlczogVWludDhBcnJheS5vZigweDFDLCAweDUzLCAweEJCLCAweDZCKSwKICAgICAgICBDdWVQb2ludDogVWludDhBcnJheS5vZigweEJCKSwKICAgICAgICBDdWVUaW1lOiBVaW50OEFycmF5Lm9mKDB4QjMpLAogICAgICAgIEN1ZVRyYWNrUG9zaXRpb25zOiBVaW50OEFycmF5Lm9mKDB4QjcpLAogICAgICAgIEN1ZVRyYWNrOiBVaW50OEFycmF5Lm9mKDB4RjcpLAogICAgICAgIEN1ZUNsdXN0ZXJQb3NpdGlvbjogVWludDhBcnJheS5vZigweEYxKSwKICAgICAgICBDdWVSZWxhdGl2ZVBvc2l0aW9uOiBVaW50OEFycmF5Lm9mKDB4RjApLAogICAgICAgIEN1ZUR1cmF0aW9uOiBVaW50OEFycmF5Lm9mKDB4QjIpLAogICAgICAgIEN1ZUJsb2NrTnVtYmVyOiBVaW50OEFycmF5Lm9mKDB4NTMsIDB4NzgpLAogICAgICAgIEN1ZUNvZGVjU3RhdGU6IFVpbnQ4QXJyYXkub2YoMHhFQSksCiAgICAgICAgQ3VlUmVmZXJlbmNlOiBVaW50OEFycmF5Lm9mKDB4REIpLAogICAgICAgIEN1ZVJlZlRpbWU6IFVpbnQ4QXJyYXkub2YoMHg5NiksCiAgICAgICAgQXR0YWNobWVudHM6IFVpbnQ4QXJyYXkub2YoMHgxOSwgMHg0MSwgMHhBNCwgMHg2OSksCiAgICAgICAgQXR0YWNoZWRGaWxlOiBVaW50OEFycmF5Lm9mKDB4NjEsIDB4QTcpLAogICAgICAgIEZpbGVEZXNjcmlwdGlvbjogVWludDhBcnJheS5vZigweDQ2LCAweDdFKSwKICAgICAgICBGaWxlTmFtZTogVWludDhBcnJheS5vZigweDQ2LCAweDZFKSwKICAgICAgICBGaWxlTWltZVR5cGU6IFVpbnQ4QXJyYXkub2YoMHg0NiwgMHg2MCksCiAgICAgICAgRmlsZURhdGE6IFVpbnQ4QXJyYXkub2YoMHg0NiwgMHg1QyksCiAgICAgICAgRmlsZVVJRDogVWludDhBcnJheS5vZigweDQ2LCAweEFFKSwKICAgICAgICBDaGFwdGVyczogVWludDhBcnJheS5vZigweDEwLCAweDQzLCAweEE3LCAweDcwKSwKICAgICAgICBFZGl0aW9uRW50cnk6IFVpbnQ4QXJyYXkub2YoMHg0NSwgMHhCOSksCiAgICAgICAgRWRpdGlvblVJRDogVWludDhBcnJheS5vZigweDQ1LCAweEJDKSwKICAgICAgICBFZGl0aW9uRmxhZ0hpZGRlbjogVWludDhBcnJheS5vZigweDQ1LCAweEJEKSwKICAgICAgICBFZGl0aW9uRmxhZ0RlZmF1bHQ6IFVpbnQ4QXJyYXkub2YoMHg0NSwgMHhEQiksCiAgICAgICAgRWRpdGlvbkZsYWdPcmRlcmVkOiBVaW50OEFycmF5Lm9mKDB4NDUsIDB4REQpLAogICAgICAgIENoYXB0ZXJBdG9tOiBVaW50OEFycmF5Lm9mKDB4QjYpLAogICAgICAgIENoYXB0ZXJVSUQ6IFVpbnQ4QXJyYXkub2YoMHg3MywgMHhDNCksCiAgICAgICAgQ2hhcHRlclN0cmluZ1VJRDogVWludDhBcnJheS5vZigweDU2LCAweDU0KSwKICAgICAgICBDaGFwdGVyVGltZVN0YXJ0OiBVaW50OEFycmF5Lm9mKDB4OTEpLAogICAgICAgIENoYXB0ZXJUaW1lRW5kOiBVaW50OEFycmF5Lm9mKDB4OTIpLAogICAgICAgIENoYXB0ZXJGbGFnSGlkZGVuOiBVaW50OEFycmF5Lm9mKDB4OTgpLAogICAgICAgIENoYXB0ZXJGbGFnRW5hYmxlZDogVWludDhBcnJheS5vZigweDQ1LCAweDk4KSwKICAgICAgICBDaGFwdGVyU2VnbWVudFVJRDogVWludDhBcnJheS5vZigweDZFLCAweDY3KSwKICAgICAgICBDaGFwdGVyU2VnbWVudEVkaXRpb25VSUQ6IFVpbnQ4QXJyYXkub2YoMHg2RSwgMHhCQyksCiAgICAgICAgQ2hhcHRlclBoeXNpY2FsRXF1aXY6IFVpbnQ4QXJyYXkub2YoMHg2MywgMHhDMyksCiAgICAgICAgQ2hhcHRlclRyYWNrOiBVaW50OEFycmF5Lm9mKDB4OEYpLAogICAgICAgIENoYXB0ZXJUcmFja051bWJlcjogVWludDhBcnJheS5vZigweDg5KSwKICAgICAgICBDaGFwdGVyRGlzcGxheTogVWludDhBcnJheS5vZigweDgwKSwKICAgICAgICBDaGFwU3RyaW5nOiBVaW50OEFycmF5Lm9mKDB4ODUpLAogICAgICAgIENoYXBMYW5ndWFnZTogVWludDhBcnJheS5vZigweDQzLCAweDdDKSwKICAgICAgICBDaGFwQ291bnRyeTogVWludDhBcnJheS5vZigweDQzLCAweDdFKSwKICAgICAgICBDaGFwUHJvY2VzczogVWludDhBcnJheS5vZigweDY5LCAweDQ0KSwKICAgICAgICBDaGFwUHJvY2Vzc0NvZGVjSUQ6IFVpbnQ4QXJyYXkub2YoMHg2OSwgMHg1NSksCiAgICAgICAgQ2hhcFByb2Nlc3NQcml2YXRlOiBVaW50OEFycmF5Lm9mKDB4NDUsIDB4MEQpLAogICAgICAgIENoYXBQcm9jZXNzQ29tbWFuZDogVWludDhBcnJheS5vZigweDY5LCAweDExKSwKICAgICAgICBDaGFwUHJvY2Vzc1RpbWU6IFVpbnQ4QXJyYXkub2YoMHg2OSwgMHgyMiksCiAgICAgICAgQ2hhcFByb2Nlc3NEYXRhOiBVaW50OEFycmF5Lm9mKDB4NjksIDB4MzMpLAogICAgICAgIFRhZ3M6IFVpbnQ4QXJyYXkub2YoMHgxMiwgMHg1NCwgMHhDMywgMHg2NyksCiAgICAgICAgVGFnOiBVaW50OEFycmF5Lm9mKDB4NzMsIDB4NzMpLAogICAgICAgIFRhcmdldHM6IFVpbnQ4QXJyYXkub2YoMHg2MywgMHhDMCksCiAgICAgICAgVGFyZ2V0VHlwZVZhbHVlOiBVaW50OEFycmF5Lm9mKDB4NjgsIDB4Q0EpLAogICAgICAgIFRhcmdldFR5cGU6IFVpbnQ4QXJyYXkub2YoMHg2MywgMHhDQSksCiAgICAgICAgVGFnVHJhY2tVSUQ6IFVpbnQ4QXJyYXkub2YoMHg2MywgMHhDNSksCiAgICAgICAgVGFnRWRpdGlvblVJRDogVWludDhBcnJheS5vZigweDYzLCAweEM5KSwKICAgICAgICBUYWdDaGFwdGVyVUlEOiBVaW50OEFycmF5Lm9mKDB4NjMsIDB4QzQpLAogICAgICAgIFRhZ0F0dGFjaG1lbnRVSUQ6IFVpbnQ4QXJyYXkub2YoMHg2MywgMHhDNiksCiAgICAgICAgU2ltcGxlVGFnOiBVaW50OEFycmF5Lm9mKDB4NjcsIDB4QzgpLAogICAgICAgIFRhZ05hbWU6IFVpbnQ4QXJyYXkub2YoMHg0NSwgMHhBMyksCiAgICAgICAgVGFnTGFuZ3VhZ2U6IFVpbnQ4QXJyYXkub2YoMHg0NCwgMHg3QSksCiAgICAgICAgVGFnRGVmYXVsdDogVWludDhBcnJheS5vZigweDQ0LCAweDg0KSwKICAgICAgICBUYWdTdHJpbmc6IFVpbnQ4QXJyYXkub2YoMHg0NCwgMHg4NyksCiAgICAgICAgVGFnQmluYXJ5OiBVaW50OEFycmF5Lm9mKDB4NDQsIDB4ODUpLAogICAgfTsKCgoKICAgIHZhciBFQk1MID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoewogICAgICAgIFZhbHVlOiBWYWx1ZSwKICAgICAgICBFbGVtZW50OiBFbGVtZW50LAogICAgICAgIGJ5dGVzOiBieXRlcywKICAgICAgICBudW1iZXI6IG51bWJlciwKICAgICAgICB2aW50RW5jb2RlZE51bWJlcjogdmludEVuY29kZWROdW1iZXIsCiAgICAgICAgaW50MTY6IGludDE2LAogICAgICAgIGZsb2F0OiBmbG9hdCwKICAgICAgICBzdHJpbmc6IHN0cmluZywKICAgICAgICBlbGVtZW50OiBlbGVtZW50LAogICAgICAgIHVua25vd25TaXplRWxlbWVudDogdW5rbm93blNpemVFbGVtZW50LAogICAgICAgIGJ1aWxkOiBidWlsZCwKICAgICAgICBnZXRFQk1MQnl0ZUxlbmd0aDogZ2V0RUJNTEJ5dGVMZW5ndGgsCiAgICAgICAgVU5LTk9XTl9TSVpFOiBVTktOT1dOX1NJWkUsCiAgICAgICAgdmludEVuY29kZTogdmludEVuY29kZSwKICAgICAgICBnZXRTaXplTWFzazogZ2V0U2l6ZU1hc2ssCiAgICAgICAgSUQ6IElELAogICAgICAgIG51bWJlclRvQnl0ZUFycmF5OiBudW1iZXJUb0J5dGVBcnJheSwKICAgICAgICBzdHJpbmdUb0J5dGVBcnJheTogc3RyaW5nVG9CeXRlQXJyYXksCiAgICAgICAgZ2V0TnVtYmVyQnl0ZUxlbmd0aDogZ2V0TnVtYmVyQnl0ZUxlbmd0aCwKICAgICAgICBpbnQxNkJpdDogaW50MTZCaXQsCiAgICAgICAgZmxvYXQzMmJpdDogZmxvYXQzMmJpdCwKICAgICAgICBkdW1wQnl0ZXM6IGR1bXBCeXRlcwogICAgfSk7CgogICAgLyoqKgogICAgICogVGhlIEVNQkwgYnVpbGRlciBpcyBmcm9tIHNpbXBsZS1lYm1sLWJ1aWxkZXIKICAgICAqIAogICAgICogQ29weXJpZ2h0IDIwMTcgcnlpd2Ftb3RvCiAgICAgKiAKICAgICAqIEBhdXRob3Igcnlpd2Ftb3RvLCBxbGk1CiAgICAgKiAKICAgICAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwogICAgICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCiAgICAgKiAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIAogICAgICogd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCAKICAgICAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byAKICAgICAqIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCAKICAgICAqIHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKICAgICAqIAogICAgICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgCiAgICAgKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICAgICAqIAogICAgICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgCiAgICAgKiBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgCiAgICAgKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCAKICAgICAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIAogICAgICogT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIAogICAgICogQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIAogICAgICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgogICAgICovCgogICAgLyoqKgogICAgICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICAgKiAKICAgICAqIEBhdXRob3IgcWxpNSA8Z29vZGxxMTFbYXRdKDE2M3xnbWFpbCkuY29tPgogICAgICogCiAgICAgKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAgICAgKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAgICAgKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgogICAgKi8KCiAgICAvKioKICAgICAqIEB0eXBlZGVmIHtPYmplY3R9IEFzc0Jsb2NrCiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdHJhY2sgCiAgICAgKiBAcHJvcGVydHkge1VpbnQ4QXJyYXl9IGZyYW1lIAogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWVzdGFtcCAKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkdXJhdGlvbiAKICAgICAqLwoKICAgIGNsYXNzIE1LViB7CiAgICAgICAgY29uc3RydWN0b3IoY29uZmlnKSB7CiAgICAgICAgICAgIHRoaXMubWluID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5vbnByb2dyZXNzID0gbnVsbDsKICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjb25maWcpOwogICAgICAgICAgICB0aGlzLnNlZ21lbnRVSUQgPSBNS1YucmFuZG9tQnl0ZXMoMTYpOwogICAgICAgICAgICB0aGlzLnRyYWNrVUlEQmFzZSA9IE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSAqIDIgKiogMTYpOwogICAgICAgICAgICB0aGlzLnRyYWNrTWV0YWRhdGEgPSB7IGgyNjQ6IG51bGwsIGFhYzogbnVsbCwgYXNzTGlzdDogW10gfTsKICAgICAgICAgICAgdGhpcy5kdXJhdGlvbiA9IDA7CiAgICAgICAgICAgIC8qKiBAdHlwZSB7eyBoMjY0OiBhbnlbXTsgYWFjOiBhbnlbXTsgYXNzTGlzdDogQXNzQmxvY2tbXVtdOyB9fSAqLwogICAgICAgICAgICB0aGlzLmJsb2NrcyA9IHsgaDI2NDogW10sIGFhYzogW10sIGFzc0xpc3Q6IFtdIH07CiAgICAgICAgfQoKICAgICAgICBzdGF0aWMgcmFuZG9tQnl0ZXMobnVtKSB7CiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBBcnJheShudW0pLCAoKSA9PiBNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiAyNTYpKTsKICAgICAgICB9CgogICAgICAgIHN0YXRpYyB0ZXh0VG9NUyhzdHIpIHsKICAgICAgICAgICAgY29uc3QgWywgaCwgbW0sIHNzLCBtczEwXSA9IHN0ci5tYXRjaCgvKFxcZCspOihcXGQrKTooXFxkKykuKFxcZCspLyk7CiAgICAgICAgICAgIHJldHVybiBoICogMzYwMDAwMCArIG1tICogNjAwMDAgKyBzcyAqIDEwMDAgKyBtczEwICogMTA7CiAgICAgICAgfQoKICAgICAgICBzdGF0aWMgbWltZVRvQ29kZWNJRChzdHIpIHsKICAgICAgICAgICAgaWYgKHN0ci5zdGFydHNXaXRoKCdhdmMxJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnVl9NUEVHNC9JU08vQVZDJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChzdHIuc3RhcnRzV2l0aCgnbXA0YScpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ0FfQUFDJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcYE1LVlJlbXV4ZXI6IHVua25vd24gY29kZWMgXCR7c3RyfVxgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc3RhdGljIHVpbnQ4QXJyYXlDb25jYXQoLi4uYXJyYXkpIHsKICAgICAgICAgICAgLy8gaWYgKEFycmF5LmlzQXJyYXkoYXJyYXlbMF0pKSBhcnJheSA9IGFycmF5WzBdOwogICAgICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID09IDEpIHJldHVybiBhcnJheVswXTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBCdWZmZXIgIT0gJ3VuZGVmaW5lZCcpIHJldHVybiBCdWZmZXIuY29uY2F0KGFycmF5KTsKICAgICAgICAgICAgY29uc3QgcmV0ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkucmVkdWNlKChpLCBqKSA9PiBpICsgai5ieXRlTGVuZ3RoLCAwKSk7CiAgICAgICAgICAgIGxldCBsZW5ndGggPSAwOwogICAgICAgICAgICBmb3IgKGxldCBlIG9mIGFycmF5KSB7CiAgICAgICAgICAgICAgICByZXQuc2V0KGUsIGxlbmd0aCk7CiAgICAgICAgICAgICAgICBsZW5ndGggKz0gZS5ieXRlTGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXQ7CiAgICAgICAgfQoKICAgICAgICBhZGRIMjY0TWV0YWRhdGEoaDI2NCkgewogICAgICAgICAgICB0aGlzLnRyYWNrTWV0YWRhdGEuaDI2NCA9IHsKICAgICAgICAgICAgICAgIGNvZGVjSWQ6IE1LVi5taW1lVG9Db2RlY0lEKGgyNjQuY29kZWMpLAogICAgICAgICAgICAgICAgY29kZWNQcml2YXRlOiBoMjY0LmF2Y2MsCiAgICAgICAgICAgICAgICBkZWZhdWx0RHVyYXRpb246IGgyNjQucmVmU2FtcGxlRHVyYXRpb24gKiAxMDAwMDAwLAogICAgICAgICAgICAgICAgcGl4ZWxXaWR0aDogaDI2NC5jb2RlY1dpZHRoLAogICAgICAgICAgICAgICAgcGl4ZWxIZWlnaHQ6IGgyNjQuY29kZWNIZWlnaHQsCiAgICAgICAgICAgICAgICBkaXNwbGF5V2lkdGg6IGgyNjQucHJlc2VudFdpZHRoLAogICAgICAgICAgICAgICAgZGlzcGxheUhlaWdodDogaDI2NC5wcmVzZW50SGVpZ2h0CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuZHVyYXRpb24gPSBNYXRoLm1heCh0aGlzLmR1cmF0aW9uLCBoMjY0LmR1cmF0aW9uKTsKICAgICAgICB9CgogICAgICAgIGFkZEFBQ01ldGFkYXRhKGFhYykgewogICAgICAgICAgICB0aGlzLnRyYWNrTWV0YWRhdGEuYWFjID0gewogICAgICAgICAgICAgICAgY29kZWNJZDogTUtWLm1pbWVUb0NvZGVjSUQoYWFjLm9yaWdpbmFsQ29kZWMpLAogICAgICAgICAgICAgICAgY29kZWNQcml2YXRlOiBhYWMuY29uZmlnUmF3LAogICAgICAgICAgICAgICAgZGVmYXVsdER1cmF0aW9uOiBhYWMucmVmU2FtcGxlRHVyYXRpb24gKiAxMDAwMDAwLAogICAgICAgICAgICAgICAgc2FtcGxpbmdGcmVxdWVuY2U6IGFhYy5hdWRpb1NhbXBsZVJhdGUsCiAgICAgICAgICAgICAgICBjaGFubmVsczogYWFjLmNoYW5uZWxDb3VudAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmR1cmF0aW9uID0gTWF0aC5tYXgodGhpcy5kdXJhdGlvbiwgYWFjLmR1cmF0aW9uKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KCIuLi9kZW11eGVyL2FzcyIpLkFTU30gYXNzIAogICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIAogICAgICAgICAqLwogICAgICAgIGFkZEFTU01ldGFkYXRhKGFzcywgbmFtZSA9ICIiKSB7CiAgICAgICAgICAgIHRoaXMudHJhY2tNZXRhZGF0YS5hc3NMaXN0LnB1c2goewogICAgICAgICAgICAgICAgY29kZWNJZDogJ1NfVEVYVC9BU1MnLAogICAgICAgICAgICAgICAgY29kZWNQcml2YXRlOiBuZXcgX1RleHRFbmNvZGVyKCkuZW5jb2RlKGFzcy5oZWFkZXIpLAogICAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICAgIF9pbmZvOiBhc3MuaW5mbywKICAgICAgICAgICAgICAgIF9zdHlsZXM6IGFzcy5zdHlsZXMsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgYWRkSDI2NFN0cmVhbShoMjY0KSB7CiAgICAgICAgICAgIHRoaXMuYmxvY2tzLmgyNjQgPSB0aGlzLmJsb2Nrcy5oMjY0LmNvbmNhdChoMjY0LnNhbXBsZXMubWFwKGUgPT4gKHsKICAgICAgICAgICAgICAgIHRyYWNrOiAxLAogICAgICAgICAgICAgICAgZnJhbWU6IE1LVi51aW50OEFycmF5Q29uY2F0KC4uLmUudW5pdHMubWFwKGkgPT4gaS5kYXRhKSksCiAgICAgICAgICAgICAgICBpc0tleWZyYW1lOiBlLmlzS2V5ZnJhbWUsCiAgICAgICAgICAgICAgICBkaXNjYXJkYWJsZTogQm9vbGVhbihlLnJlZklkYyksCiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGUucHRzLAogICAgICAgICAgICAgICAgc2ltcGxlOiB0cnVlLAogICAgICAgICAgICB9KSkpOwogICAgICAgIH0KCiAgICAgICAgYWRkQUFDU3RyZWFtKGFhYykgewogICAgICAgICAgICB0aGlzLmJsb2Nrcy5hYWMgPSB0aGlzLmJsb2Nrcy5hYWMuY29uY2F0KGFhYy5zYW1wbGVzLm1hcChlID0+ICh7CiAgICAgICAgICAgICAgICB0cmFjazogMiwKICAgICAgICAgICAgICAgIGZyYW1lOiBlLnVuaXQsCiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGUucHRzLAogICAgICAgICAgICAgICAgc2ltcGxlOiB0cnVlLAogICAgICAgICAgICB9KSkpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoIi4uL2RlbXV4ZXIvYXNzIikuQVNTfSBhc3MgCiAgICAgICAgICovCiAgICAgICAgYWRkQVNTU3RyZWFtKGFzcykgewogICAgICAgICAgICBjb25zdCBuID0gdGhpcy5ibG9ja3MuYXNzTGlzdC5sZW5ndGg7CiAgICAgICAgICAgIGNvbnN0IGxpbmVCbG9ja3MgPSBhc3MubGluZXMubWFwKChlLCBpKSA9PiAoewogICAgICAgICAgICAgICAgdHJhY2s6IDMgKyBuLAogICAgICAgICAgICAgICAgZnJhbWU6IG5ldyBfVGV4dEVuY29kZXIoKS5lbmNvZGUoXGBcJHtpfSxcJHtlWydMYXllciddIHx8ICcnfSxcJHtlWydTdHlsZSddIHx8ICcnfSxcJHtlWydOYW1lJ10gfHwgJyd9LFwke2VbJ01hcmdpbkwnXSB8fCAnJ30sXCR7ZVsnTWFyZ2luUiddIHx8ICcnfSxcJHtlWydNYXJnaW5WJ10gfHwgJyd9LFwke2VbJ0VmZmVjdCddIHx8ICcnfSxcJHtlWydUZXh0J10gfHwgJyd9XGApLAogICAgICAgICAgICAgICAgdGltZXN0YW1wOiBNS1YudGV4dFRvTVMoZVsnU3RhcnQnXSksCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogTUtWLnRleHRUb01TKGVbJ0VuZCddKSAtIE1LVi50ZXh0VG9NUyhlWydTdGFydCddKSwKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB0aGlzLmJsb2Nrcy5hc3NMaXN0LnB1c2gobGluZUJsb2Nrcyk7CiAgICAgICAgfQoKICAgICAgICBjb21iaW5lU3VidGl0bGVzKCkgewogICAgICAgICAgICBjb25zdCBbZmlyc3RCLCAuLi5yZXN0Ql0gPSB0aGlzLmJsb2Nrcy5hc3NMaXN0OwogICAgICAgICAgICBjb25zdCBsID0gTWF0aC5taW4odGhpcy5ibG9ja3MuYXNzTGlzdC5sZW5ndGgsIHRoaXMudHJhY2tNZXRhZGF0YS5hc3NMaXN0Lmxlbmd0aCk7CiAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgKiBAcGFyYW0ge0Fzc0Jsb2NrfSBhIAogICAgICAgICAgICAgKiBAcGFyYW0ge0Fzc0Jsb2NrfSBiIAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29uc3Qgc29ydEZuID0gKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlc3RCLmZvckVhY2goKGEsIG4pID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLmFzc0xpc3QucHVzaCgKICAgICAgICAgICAgICAgICAgICBhLmNvbmNhdChmaXJzdEIpLnNvcnQoc29ydEZuKS5tYXAoKHgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrOiAzICsgbCArIG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZTogeC5mcmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogeC50aW1lc3RhbXAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogeC5kdXJhdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgW2ZpcnN0TSwgLi4ucmVzdE1dID0gdGhpcy50cmFja01ldGFkYXRhLmFzc0xpc3Q7CiAgICAgICAgICAgIHJlc3RNLmZvckVhY2goKGEpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBcYFwke2ZpcnN0TS5uYW1lfSArIFwke2EubmFtZX1cYDsKICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSBmaXJzdE0uX2luZm8ucmVwbGFjZSgvXihUaXRsZTouKylcJC9tLCBcYFwkMSBcJHtuYW1lfVxgKTsKICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0U3R5bGVzID0gZmlyc3RNLl9zdHlsZXMuc3BsaXQoL1xccj9cXG4rLykuZmlsdGVyKHggPT4gISF4KTsKICAgICAgICAgICAgICAgIGNvbnN0IGFTdHlsZXMgPSBhLl9zdHlsZXMuc3BsaXQoL1xccj9cXG4rLykuc2xpY2UoMik7CiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZXMgPSBmaXJzdFN0eWxlcy5jb25jYXQoYVN0eWxlcykuam9pbigiXFxyXFxuIik7CiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBpbmZvICsgc3R5bGVzOwogICAgICAgICAgICAgICAgdGhpcy50cmFja01ldGFkYXRhLmFzc0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgICAgICBjb2RlY0lkOiAnU19URVhUL0FTUycsCiAgICAgICAgICAgICAgICAgICAgY29kZWNQcml2YXRlOiBuZXcgX1RleHRFbmNvZGVyKCkuZW5jb2RlKGhlYWRlciksCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBidWlsZCgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBfQmxvYihbCiAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkSGVhZGVyKCksCiAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkQm9keSgpCiAgICAgICAgICAgIF0pOwogICAgICAgIH0KCiAgICAgICAgYnVpbGRIZWFkZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgX0Jsb2IoW0VCTUwuYnVpbGQoRUJNTC5lbGVtZW50KEVCTUwuSUQuRUJNTCwgWwogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuRUJNTFZlcnNpb24sIEVCTUwubnVtYmVyKDEpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkVCTUxSZWFkVmVyc2lvbiwgRUJNTC5udW1iZXIoMSkpLAogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuRUJNTE1heElETGVuZ3RoLCBFQk1MLm51bWJlcig0KSksCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5FQk1MTWF4U2l6ZUxlbmd0aCwgRUJNTC5udW1iZXIoOCkpLAogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuRG9jVHlwZSwgRUJNTC5zdHJpbmcoJ21hdHJvc2thJykpLAogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuRG9jVHlwZVZlcnNpb24sIEVCTUwubnVtYmVyKDQpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkRvY1R5cGVSZWFkVmVyc2lvbiwgRUJNTC5udW1iZXIoMikpLAogICAgICAgICAgICBdKSldKTsKICAgICAgICB9CgogICAgICAgIGJ1aWxkQm9keSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMubWluKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9CbG9iKFtFQk1MLmJ1aWxkKEVCTUwuZWxlbWVudChFQk1MLklELlNlZ21lbnQsIFsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNlZ21lbnRJbmZvKCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUcmFja3MoKSwKICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmdldENsdXN0ZXJBcnJheSgpCiAgICAgICAgICAgICAgICBdKSldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX0Jsb2IoW0VCTUwuYnVpbGQoRUJNTC5lbGVtZW50KEVCTUwuSUQuU2VnbWVudCwgWwogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2Vla0hlYWQoKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFZvaWQoNDEwMCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZWdtZW50SW5mbygpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VHJhY2tzKCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRWb2lkKDExMDApLAogICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0Q2x1c3RlckFycmF5KCkKICAgICAgICAgICAgICAgIF0pKV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBnZXRTZWVrSGVhZCgpIHsKICAgICAgICAgICAgcmV0dXJuIEVCTUwuZWxlbWVudChFQk1MLklELlNlZWtIZWFkLCBbCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5TZWVrLCBbCiAgICAgICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuU2Vla0lELCBFQk1MLmJ5dGVzKEVCTUwuSUQuSW5mbykpLAogICAgICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlNlZWtQb3NpdGlvbiwgRUJNTC5udW1iZXIoNDA1MCkpCiAgICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlNlZWssIFsKICAgICAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5TZWVrSUQsIEVCTUwuYnl0ZXMoRUJNTC5JRC5UcmFja3MpKSwKICAgICAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5TZWVrUG9zaXRpb24sIEVCTUwubnVtYmVyKDQyMDApKQogICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgIF0pOwogICAgICAgIH0KCiAgICAgICAgZ2V0Vm9pZChsZW5ndGggPSAyMDAwKSB7CiAgICAgICAgICAgIHJldHVybiBFQk1MLmVsZW1lbnQoRUJNTC5JRC5Wb2lkLCBFQk1MLmJ5dGVzKG5ldyBVaW50OEFycmF5KGxlbmd0aCkpKTsKICAgICAgICB9CgogICAgICAgIGdldFNlZ21lbnRJbmZvKCkgewogICAgICAgICAgICByZXR1cm4gRUJNTC5lbGVtZW50KEVCTUwuSUQuSW5mbywgWwogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuVGltZWNvZGVTY2FsZSwgRUJNTC5udW1iZXIoMTAwMDAwMCkpLAogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuTXV4aW5nQXBwLCBFQk1MLnN0cmluZygnZmx2LmpzICsgYXNzcGFyc2VyX3FsaTUgLT4gc2ltcGxlLWVibWwtYnVpbGRlcicpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELldyaXRpbmdBcHAsIEVCTUwuc3RyaW5nKCdmbHZhc3MybWt2LmpzIGJ5IHFsaTUnKSksCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5EdXJhdGlvbiwgRUJNTC5mbG9hdCh0aGlzLmR1cmF0aW9uKSksCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5TZWdtZW50VUlELCBFQk1MLmJ5dGVzKHRoaXMuc2VnbWVudFVJRCkpLAogICAgICAgICAgICBdKTsKICAgICAgICB9CgogICAgICAgIGdldFRyYWNrcygpIHsKICAgICAgICAgICAgcmV0dXJuIEVCTUwuZWxlbWVudChFQk1MLklELlRyYWNrcywgWwogICAgICAgICAgICAgICAgdGhpcy5nZXRWaWRlb1RyYWNrRW50cnkoKSwKICAgICAgICAgICAgICAgIHRoaXMuZ2V0QXVkaW9UcmFja0VudHJ5KCksCiAgICAgICAgICAgICAgICAuLi50aGlzLmdldFN1YnRpdGxlVHJhY2tFbnRyeSgpLAogICAgICAgICAgICBdKTsKICAgICAgICB9CgogICAgICAgIGdldFZpZGVvVHJhY2tFbnRyeSgpIHsKICAgICAgICAgICAgcmV0dXJuIEVCTUwuZWxlbWVudChFQk1MLklELlRyYWNrRW50cnksIFsKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlRyYWNrTnVtYmVyLCBFQk1MLm51bWJlcigxKSksCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5UcmFja1VJRCwgRUJNTC5udW1iZXIodGhpcy50cmFja1VJREJhc2UgKyAxKSksCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5UcmFja1R5cGUsIEVCTUwubnVtYmVyKDB4MDEpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkZsYWdMYWNpbmcsIEVCTUwubnVtYmVyKDB4MDApKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkNvZGVjSUQsIEVCTUwuc3RyaW5nKHRoaXMudHJhY2tNZXRhZGF0YS5oMjY0LmNvZGVjSWQpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkNvZGVjUHJpdmF0ZSwgRUJNTC5ieXRlcyh0aGlzLnRyYWNrTWV0YWRhdGEuaDI2NC5jb2RlY1ByaXZhdGUpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkRlZmF1bHREdXJhdGlvbiwgRUJNTC5udW1iZXIodGhpcy50cmFja01ldGFkYXRhLmgyNjQuZGVmYXVsdER1cmF0aW9uKSksCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5MYW5ndWFnZSwgRUJNTC5zdHJpbmcoJ3VuZCcpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlZpZGVvLCBbCiAgICAgICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuUGl4ZWxXaWR0aCwgRUJNTC5udW1iZXIodGhpcy50cmFja01ldGFkYXRhLmgyNjQucGl4ZWxXaWR0aCkpLAogICAgICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlBpeGVsSGVpZ2h0LCBFQk1MLm51bWJlcih0aGlzLnRyYWNrTWV0YWRhdGEuaDI2NC5waXhlbEhlaWdodCkpLAogICAgICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkRpc3BsYXlXaWR0aCwgRUJNTC5udW1iZXIodGhpcy50cmFja01ldGFkYXRhLmgyNjQuZGlzcGxheVdpZHRoKSksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuRGlzcGxheUhlaWdodCwgRUJNTC5udW1iZXIodGhpcy50cmFja01ldGFkYXRhLmgyNjQuZGlzcGxheUhlaWdodCkpLAogICAgICAgICAgICAgICAgXSksCiAgICAgICAgICAgIF0pOwogICAgICAgIH0KCiAgICAgICAgZ2V0QXVkaW9UcmFja0VudHJ5KCkgewogICAgICAgICAgICByZXR1cm4gRUJNTC5lbGVtZW50KEVCTUwuSUQuVHJhY2tFbnRyeSwgWwogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuVHJhY2tOdW1iZXIsIEVCTUwubnVtYmVyKDIpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlRyYWNrVUlELCBFQk1MLm51bWJlcih0aGlzLnRyYWNrVUlEQmFzZSArIDIpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlRyYWNrVHlwZSwgRUJNTC5udW1iZXIoMHgwMikpLAogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuRmxhZ0xhY2luZywgRUJNTC5udW1iZXIoMHgwMCkpLAogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuQ29kZWNJRCwgRUJNTC5zdHJpbmcodGhpcy50cmFja01ldGFkYXRhLmFhYy5jb2RlY0lkKSksCiAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5Db2RlY1ByaXZhdGUsIEVCTUwuYnl0ZXModGhpcy50cmFja01ldGFkYXRhLmFhYy5jb2RlY1ByaXZhdGUpKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkRlZmF1bHREdXJhdGlvbiwgRUJNTC5udW1iZXIodGhpcy50cmFja01ldGFkYXRhLmFhYy5kZWZhdWx0RHVyYXRpb24pKSwKICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkxhbmd1YWdlLCBFQk1MLnN0cmluZygndW5kJykpLAogICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuQXVkaW8sIFsKICAgICAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5TYW1wbGluZ0ZyZXF1ZW5jeSwgRUJNTC5mbG9hdCh0aGlzLnRyYWNrTWV0YWRhdGEuYWFjLnNhbXBsaW5nRnJlcXVlbmNlKSksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuQ2hhbm5lbHMsIEVCTUwubnVtYmVyKHRoaXMudHJhY2tNZXRhZGF0YS5hYWMuY2hhbm5lbHMpKSwKICAgICAgICAgICAgICAgIF0pLAogICAgICAgICAgICBdKTsKICAgICAgICB9CgogICAgICAgIGdldFN1YnRpdGxlVHJhY2tFbnRyeSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tNZXRhZGF0YS5hc3NMaXN0Lm1hcCgoYXNzLCBpKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gRUJNTC5lbGVtZW50KEVCTUwuSUQuVHJhY2tFbnRyeSwgWwogICAgICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlRyYWNrTnVtYmVyLCBFQk1MLm51bWJlcigzICsgaSkpLAogICAgICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELlRyYWNrVUlELCBFQk1MLm51bWJlcih0aGlzLnRyYWNrVUlEQmFzZSArIDMgKyBpKSksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuVHJhY2tUeXBlLCBFQk1MLm51bWJlcigweDExKSksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuRmxhZ0xhY2luZywgRUJNTC5udW1iZXIoMHgwMCkpLAogICAgICAgICAgICAgICAgICAgIEVCTUwuZWxlbWVudChFQk1MLklELkNvZGVjSUQsIEVCTUwuc3RyaW5nKGFzcy5jb2RlY0lkKSksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5lbGVtZW50KEVCTUwuSUQuQ29kZWNQcml2YXRlLCBFQk1MLmJ5dGVzKGFzcy5jb2RlY1ByaXZhdGUpKSwKICAgICAgICAgICAgICAgICAgICBFQk1MLmVsZW1lbnQoRUJNTC5JRC5MYW5ndWFnZSwgRUJNTC5zdHJpbmcoJ3VuZCcpKSwKICAgICAgICAgICAgICAgICAgICBhc3MubmFtZSAmJiBFQk1MLmVsZW1lbnQoRUJNTC5JRC5OYW1lLCBFQk1MLmJ5dGVzKG5ldyBfVGV4dEVuY29kZXIoKS5lbmNvZGUoYXNzLm5hbWUpKSksCiAgICAgICAgICAgICAgICBdLmZpbHRlcih4ID0+ICEheCkpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGdldENsdXN0ZXJBcnJheSgpIHsKICAgICAgICAgICAgLy8gSDI2NCBjb2RlY1N0YXRlCiAgICAgICAgICAgIHRoaXMuYmxvY2tzLmgyNjRbMF0uc2ltcGxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuYmxvY2tzLmgyNjRbMF0uY29kZWNTdGF0ZSA9IHRoaXMudHJhY2tNZXRhZGF0YS5oMjY0LmNvZGVjUHJpdmF0ZTsKCiAgICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgICAgbGV0IGogPSAwOwogICAgICAgICAgICBsZXQgayA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMuYmxvY2tzLmFzc0xpc3QubGVuZ3RoIH0pLmZpbGwoMCk7CiAgICAgICAgICAgIGxldCBjbHVzdGVyVGltZUNvZGUgPSAwOwogICAgICAgICAgICBsZXQgY2x1c3RlckNvbnRlbnQgPSBbRUJNTC5lbGVtZW50KEVCTUwuSUQuVGltZWNvZGUsIEVCTUwubnVtYmVyKGNsdXN0ZXJUaW1lQ29kZSkpXTsKICAgICAgICAgICAgbGV0IHJldCA9IFtjbHVzdGVyQ29udGVudF07CiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzVGhyb3R0bGVyID0gTWF0aC5wb3coMiwgTWF0aC5mbG9vcihNYXRoLmxvZyh0aGlzLmJsb2Nrcy5oMjY0Lmxlbmd0aCA+PiA3KSAvIE1hdGgubG9nKDIpKSkgLSAxOwogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5ibG9ja3MuaDI2NC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuYmxvY2tzLmgyNjRbaV07CiAgICAgICAgICAgICAgICBmb3IgKDsgaiA8IHRoaXMuYmxvY2tzLmFhYy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJsb2Nrcy5hYWNbal0udGltZXN0YW1wIDwgZS50aW1lc3RhbXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlckNvbnRlbnQucHVzaCh0aGlzLmdldEJsb2Nrcyh0aGlzLmJsb2Nrcy5hYWNbal0sIGNsdXN0ZXJUaW1lQ29kZSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MuYXNzTGlzdC5mb3JFYWNoKChhc3MsIG4pID0+IHsKICAgICAgICAgICAgICAgICAgICBmb3IgKDsga1tuXSA8IGFzcy5sZW5ndGg7IGtbbl0rKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXNzW2tbbl1dLnRpbWVzdGFtcCA8IGUudGltZXN0YW1wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVyQ29udGVudC5wdXNoKHRoaXMuZ2V0QmxvY2tzKGFzc1trW25dXSwgY2x1c3RlclRpbWVDb2RlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKGUuaXNLZXlmcmFtZS8qICB8fCBjbHVzdGVyQ29udGVudC5sZW5ndGggPiA3MiAqLykgewogICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IG5ldyBjbHVzdGVyCiAgICAgICAgICAgICAgICAgICAgY2x1c3RlclRpbWVDb2RlID0gZS50aW1lc3RhbXA7CiAgICAgICAgICAgICAgICAgICAgY2x1c3RlckNvbnRlbnQgPSBbRUJNTC5lbGVtZW50KEVCTUwuSUQuVGltZWNvZGUsIEVCTUwubnVtYmVyKGNsdXN0ZXJUaW1lQ29kZSkpXTsKICAgICAgICAgICAgICAgICAgICByZXQucHVzaChjbHVzdGVyQ29udGVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjbHVzdGVyQ29udGVudC5wdXNoKHRoaXMuZ2V0QmxvY2tzKGUsIGNsdXN0ZXJUaW1lQ29kZSkpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMub25wcm9ncmVzcyAmJiAhKGkgJiBwcm9ncmVzc1Rocm90dGxlcikpIHRoaXMub25wcm9ncmVzcyh7IGxvYWRlZDogaSwgdG90YWw6IHRoaXMuYmxvY2tzLmgyNjQubGVuZ3RoIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAoOyBqIDwgdGhpcy5ibG9ja3MuYWFjLmxlbmd0aDsgaisrKSBjbHVzdGVyQ29udGVudC5wdXNoKHRoaXMuZ2V0QmxvY2tzKHRoaXMuYmxvY2tzLmFhY1tqXSwgY2x1c3RlclRpbWVDb2RlKSk7CiAgICAgICAgICAgIHRoaXMuYmxvY2tzLmFzc0xpc3QuZm9yRWFjaCgoYXNzLCBuKSA9PiB7CiAgICAgICAgICAgICAgICBmb3IgKDsga1tuXSA8IGFzcy5sZW5ndGg7IGtbbl0rKykgY2x1c3RlckNvbnRlbnQucHVzaCh0aGlzLmdldEJsb2Nrcyhhc3Nba1tuXV0sIGNsdXN0ZXJUaW1lQ29kZSkpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHRoaXMub25wcm9ncmVzcykgdGhpcy5vbnByb2dyZXNzKHsgbG9hZGVkOiBpLCB0b3RhbDogdGhpcy5ibG9ja3MuaDI2NC5sZW5ndGggfSk7CiAgICAgICAgICAgIGlmIChyZXRbMF0ubGVuZ3RoID09IDEpIHJldC5zaGlmdCgpOwogICAgICAgICAgICByZXQgPSByZXQubWFwKGNsdXN0ZXJDb250ZW50ID0+IEVCTUwuZWxlbWVudChFQk1MLklELkNsdXN0ZXIsIGNsdXN0ZXJDb250ZW50KSk7CgogICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0KCiAgICAgICAgZ2V0QmxvY2tzKGUsIGNsdXN0ZXJUaW1lQ29kZSkgewogICAgICAgICAgICBpZiAoZS5zaW1wbGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBFQk1MLmVsZW1lbnQoRUJNTC5JRC5TaW1wbGVCbG9jaywgWwogICAgICAgICAgICAgICAgICAgIEVCTUwudmludEVuY29kZWROdW1iZXIoZS50cmFjayksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5pbnQxNihlLnRpbWVzdGFtcCAtIGNsdXN0ZXJUaW1lQ29kZSksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5ieXRlcyhlLmlzS2V5ZnJhbWUgPyBbMTI4XSA6IFswXSksCiAgICAgICAgICAgICAgICAgICAgRUJNTC5ieXRlcyhlLmZyYW1lKQogICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBsZXQgYmxvY2tHcm91cENvbnRlbnQgPSBbRUJNTC5lbGVtZW50KEVCTUwuSUQuQmxvY2ssIFsKICAgICAgICAgICAgICAgICAgICBFQk1MLnZpbnRFbmNvZGVkTnVtYmVyKGUudHJhY2spLAogICAgICAgICAgICAgICAgICAgIEVCTUwuaW50MTYoZS50aW1lc3RhbXAgLSBjbHVzdGVyVGltZUNvZGUpLAogICAgICAgICAgICAgICAgICAgIEVCTUwuYnl0ZXMoWzBdKSwKICAgICAgICAgICAgICAgICAgICBFQk1MLmJ5dGVzKGUuZnJhbWUpCiAgICAgICAgICAgICAgICBdKV07CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUuZHVyYXRpb24gIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICBibG9ja0dyb3VwQ29udGVudC5wdXNoKEVCTUwuZWxlbWVudChFQk1MLklELkJsb2NrRHVyYXRpb24sIEVCTUwubnVtYmVyKGUuZHVyYXRpb24pKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGUuY29kZWNTdGF0ZSAhPSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgIGJsb2NrR3JvdXBDb250ZW50LnB1c2goRUJNTC5lbGVtZW50KEVCTUwuSUQuQ29kZWNTdGF0ZSwgRUJNTC5ieXRlcyhlLmNvZGVjU3RhdGUpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gRUJNTC5lbGVtZW50KEVCTUwuSUQuQmxvY2tHcm91cCwgYmxvY2tHcm91cENvbnRlbnQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKioKICAgICAqIEZMViArIEFTUyA9PiBNS1YgdHJhbnNtdXhlcgogICAgICogRGVtdXggRkxWIGludG8gSDI2NCArIEFBQyBzdHJlYW0gYW5kIEFTUyBpbnRvIGxpbmUgc3RyZWFtOyB0aGVuCiAgICAgKiByZW11eCB0aGVtIGludG8gYSBNS1YgZmlsZS4KICAgICAqIAogICAgICogQGF1dGhvciBxbGk1IDxnb29kbHExMVthdF0oMTYzfGdtYWlsKS5jb20+CiAgICAgKiAKICAgICAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICAgICAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMKICAgICAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiAgICAgKiAKICAgICAqIFRoZSBGTFYgZGVtdXhlciBpcyBmcm9tIGZsdi5qcyA8aHR0cHM6Ly9naXRodWIuY29tL0JpbGliaWxpL2Zsdi5qcy8+CiAgICAgKiBieSB6aGVuZyBxaWFuIDx4cXFAeHFxLmltPiwgbGljZW5zZWQgdW5kZXIgQXBhY2hlIDIuMC4KICAgICAqIAogICAgICogVGhlIEVNQkwgYnVpbGRlciBpcyBmcm9tIHNpbXBsZS1lYm1sLWJ1aWxkZXIKICAgICAqIDxodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9zaW1wbGUtZWJtbC1idWlsZGVyPiBieSByeWl3YW1vdG8sIAogICAgICogbGljZW5zZWQgdW5kZXIgTUlULgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0ge0Jsb2J8c3RyaW5nfEFycmF5QnVmZmVyfSB4IAogICAgICovCiAgICBjb25zdCBnZXRBcnJheUJ1ZmZlciA9ICh4KSA9PiB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBfQmxvYikgewogICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgICBlLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoZS5yZXN1bHQpOwogICAgICAgICAgICAgICAgZS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICAgICAgZS5yZWFkQXNBcnJheUJ1ZmZlcih4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgeCA9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgZS5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInOwogICAgICAgICAgICAgICAgZS5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGUucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgZS5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICAgICAgZS5vcGVuKCdnZXQnLCB4KTsKICAgICAgICAgICAgICAgIGUuc2VuZCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHggaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewogICAgICAgICAgICAgICAgcmVzb2x2ZSh4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdmbHZhc3MybWt2OiBnZXRBcnJheUJ1ZmZlciB7QmxvYnxzdHJpbmd8QXJyYXlCdWZmZXJ9JykpOwogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH07CgogICAgY29uc3QgRkxWQVNTMk1LViA9IGNsYXNzIHsKICAgICAgICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkgewogICAgICAgICAgICB0aGlzLm9uZmx2cHJvZ3Jlc3MgPSBudWxsOwogICAgICAgICAgICB0aGlzLm9uZmlsZWxvYWQgPSBudWxsOwogICAgICAgICAgICB0aGlzLm9ubWt2cHJvZ3Jlc3MgPSBudWxsOwogICAgICAgICAgICB0aGlzLm9ubG9hZCA9IG51bGw7CiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgY29uZmlnKTsKICAgICAgICAgICAgdGhpcy5ta3ZDb25maWcgPSB7IG9ucHJvZ3Jlc3M6IHRoaXMub25ta3Zwcm9ncmVzcyB9OwogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMubWt2Q29uZmlnLCBjb25maWcubWt2Q29uZmlnKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIERlbXV4IEZMViBpbnRvIEgyNjQgKyBBQUMgc3RyZWFtIGFuZCBBU1MgaW50byBsaW5lIHN0cmVhbTsgdGhlbgogICAgICAgICAqIHJlbXV4IHRoZW0gaW50byBhIE1LViBmaWxlLgogICAgICAgICAqIEB0eXBlZGVmIHtCbG9ifHN0cmluZ3xBcnJheUJ1ZmZlcn0gRgogICAgICAgICAqIEBwYXJhbSB7Rn0gZmx2IAogICAgICAgICAqIEBwYXJhbSB7Rn0gYXNzIAogICAgICAgICAqIEBwYXJhbSB7eyBuYW1lOiBzdHJpbmc7IGZpbGU6IEY7IH1bXX0gc3VidGl0bGVBc3NMaXN0CiAgICAgICAgICovCiAgICAgICAgYXN5bmMgYnVpbGQoZmx2ID0gJy4vc2FtcGxlcy9nZW5fY2FzZS5mbHYnLCBhc3MgPSAnLi9zYW1wbGVzL2dlbl9jYXNlLmFzcycsIHN1YnRpdGxlQXNzTGlzdCkgewogICAgICAgICAgICAvLyBsb2FkIGZsdiBhbmQgYXNzIGFzIGFycmF5YnVmZmVyCiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFsKICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZmx2ID0gYXdhaXQgZ2V0QXJyYXlCdWZmZXIoZmx2KTsKICAgICAgICAgICAgICAgIH0pKCksCiAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGFzcyA9IGF3YWl0IGdldEFycmF5QnVmZmVyKGFzcyk7CiAgICAgICAgICAgICAgICB9KSgpLAogICAgICAgICAgICAgICAgKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZUFzc0xpc3QgPSBhd2FpdCBQcm9taXNlLmFsbCgKICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGVBc3NMaXN0Lm1hcChhc3luYyAoeyBuYW1lLCBmaWxlIH0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG5hbWUsIGZpbGU6IGF3YWl0IGdldEFycmF5QnVmZmVyKGZpbGUpIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSkoKSwKICAgICAgICAgICAgXSk7CgogICAgICAgICAgICBpZiAodGhpcy5vbmZpbGVsb2FkKSB0aGlzLm9uZmlsZWxvYWQoKTsKCiAgICAgICAgICAgIGNvbnN0IG1rdiA9IG5ldyBNS1YodGhpcy5ta3ZDb25maWcpOwoKICAgICAgICAgICAgY29uc3QgYXNzUGFyc2VyID0gbmV3IEFTUygpOwogICAgICAgICAgICBjb25zdCBhc3NEYXRhID0gYXNzUGFyc2VyLnBhcnNlRmlsZShhc3MpOwogICAgICAgICAgICBta3YuYWRkQVNTTWV0YWRhdGEoYXNzRGF0YSwgIuW8ueW5lSIpOwogICAgICAgICAgICBta3YuYWRkQVNTU3RyZWFtKGFzc0RhdGEpOwoKICAgICAgICAgICAgc3VidGl0bGVBc3NMaXN0LmZvckVhY2goKHsgbmFtZSwgZmlsZSB9KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBzdWJBc3NEYXRhID0gYXNzUGFyc2VyLnBhcnNlRmlsZShmaWxlKTsKICAgICAgICAgICAgICAgIG1rdi5hZGRBU1NNZXRhZGF0YShzdWJBc3NEYXRhLCBuYW1lKTsKICAgICAgICAgICAgICAgIG1rdi5hZGRBU1NTdHJlYW0oc3ViQXNzRGF0YSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHN1YnRpdGxlQXNzTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBta3YuY29tYmluZVN1YnRpdGxlcygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBmbHZQcm9iZURhdGEgPSBGTFZEZW11eGVyLnByb2JlKGZsdik7CiAgICAgICAgICAgIGNvbnN0IGZsdkRlbXV4ZXIgPSBuZXcgRkxWRGVtdXhlcihmbHZQcm9iZURhdGEpOwogICAgICAgICAgICBsZXQgbWVkaWFJbmZvID0gbnVsbDsKICAgICAgICAgICAgbGV0IGgyNjQgPSBudWxsOwogICAgICAgICAgICBsZXQgYWFjID0gbnVsbDsKICAgICAgICAgICAgZmx2RGVtdXhlci5vbkRhdGFBdmFpbGFibGUgPSAoLi4uYXJyYXkpID0+IHsKICAgICAgICAgICAgICAgIGFycmF5LmZvckVhY2goZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUudHlwZSA9PSAndmlkZW8nKSBoMjY0ID0gZTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlLnR5cGUgPT0gJ2F1ZGlvJykgYWFjID0gZTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcihcYE1LVlJlbXV4ZXI6IHVucmVjb2dpbnplZCBkYXRhIHR5cGUgXCR7ZS50eXBlfVxgKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgICBmbHZEZW11eGVyLm9uTWVkaWFJbmZvID0gaSA9PiBtZWRpYUluZm8gPSBpOwogICAgICAgICAgICBmbHZEZW11eGVyLm9uVHJhY2tNZXRhZGF0YSA9IChpLCBlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaSA9PSAndmlkZW8nKSBta3YuYWRkSDI2NE1ldGFkYXRhKGUpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA9PSAnYXVkaW8nKSBta3YuYWRkQUFDTWV0YWRhdGEoZSk7CiAgICAgICAgICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcihcYE1LVlJlbXV4ZXI6IHVucmVjb2dpbnplZCBtZXRhZGF0YSB0eXBlIFwke2l9XGApOwogICAgICAgICAgICB9OwogICAgICAgICAgICBmbHZEZW11eGVyLm9uRXJyb3IgPSBlID0+IHsgdGhyb3cgbmV3IEVycm9yKGUpOyB9OwogICAgICAgICAgICBjb25zdCBmaW5hbE9mZnNldCA9IGZsdkRlbXV4ZXIucGFyc2VDaHVua3MoZmx2LCBmbHZQcm9iZURhdGEuZGF0YU9mZnNldCk7CiAgICAgICAgICAgIGlmIChmaW5hbE9mZnNldCAhPSBmbHYuYnl0ZUxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdGTFZEZW11eGVyOiB1bmV4cGVjdGVkIEVPRicpOwogICAgICAgICAgICBta3YuYWRkSDI2NFN0cmVhbShoMjY0KTsKICAgICAgICAgICAgbWt2LmFkZEFBQ1N0cmVhbShhYWMpOwoKICAgICAgICAgICAgY29uc3QgcmV0ID0gbWt2LmJ1aWxkKCk7CiAgICAgICAgICAgIGlmICh0aGlzLm9ubG9hZCkgdGhpcy5vbmxvYWQocmV0KTsKICAgICAgICAgICAgcmV0dXJuIHJldDsKICAgICAgICB9CiAgICB9OwoKICAgIC8vIGlmIG5vZGVqcyB0aGVuIHRlc3QKICAgIGlmICh0eXBlb2Ygd2luZG93ID09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgaWYgKHJlcXVpcmUubWFpbiA9PSBtb2R1bGUpIHsKICAgICAgICAgICAgKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGFzc0ZpbGVOYW1lID0gcHJvY2Vzcy5hcmd2LnNsaWNlKDEpLmZpbmQoZSA9PiBlLmluY2x1ZGVzKCcuYXNzJykpIHx8ICcuL3NhbXBsZXMvZ2VuX2Nhc2UuYXNzJzsKICAgICAgICAgICAgICAgIGNvbnN0IGZsdkZpbGVOYW1lID0gcHJvY2Vzcy5hcmd2LnNsaWNlKDEpLmZpbmQoZSA9PiBlLmluY2x1ZGVzKCcuZmx2JykpIHx8ICcuL3NhbXBsZXMvZ2VuX2Nhc2UuZmx2JzsKICAgICAgICAgICAgICAgIGNvbnN0IGFzc0ZpbGUgPSBmcy5yZWFkRmlsZVN5bmMoYXNzRmlsZU5hbWUpLmJ1ZmZlcjsKICAgICAgICAgICAgICAgIGNvbnN0IGZsdkZpbGUgPSBmcy5yZWFkRmlsZVN5bmMoZmx2RmlsZU5hbWUpLmJ1ZmZlcjsKICAgICAgICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoJ291dC5ta3YnLCBhd2FpdCBuZXcgRkxWQVNTMk1LVih7IG9ubWt2cHJvZ3Jlc3M6IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkgfSkuYnVpbGQoZmx2RmlsZSwgYXNzRmlsZSkpOwogICAgICAgICAgICB9KSgpOwogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gRkxWQVNTMk1LVjsKCn0oKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcAoKPC9zY3JpcHQ+CiAgICA8c2NyaXB0PgogICAgICAgIGNvbnN0IGZpbGVQcm9ncmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlUHJvZ3Jlc3MnKTsKICAgICAgICBjb25zdCBta3ZQcm9ncmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdta3ZQcm9ncmVzcycpOwogICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYScpOwogICAgICAgIHdpbmRvdy5leGVjID0gYXN5bmMgKG9wdGlvbiwgdGFyZ2V0KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb24gPSB7CiAgICAgICAgICAgICAgICBvbmZsdnByb2dyZXNzOiAoeyBsb2FkZWQsIHRvdGFsIH0pID0+IHsKICAgICAgICAgICAgICAgICAgICBmaWxlUHJvZ3Jlc3MudmFsdWUgPSBsb2FkZWQ7CiAgICAgICAgICAgICAgICAgICAgZmlsZVByb2dyZXNzLm1heCA9IHRvdGFsOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZmlsZWxvYWQ6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ2ZpbGUnKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnRpbWUoJ2ZsdmFzczJta3YnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbm1rdnByb2dyZXNzOiAoeyBsb2FkZWQsIHRvdGFsIH0pID0+IHsKICAgICAgICAgICAgICAgICAgICBta3ZQcm9ncmVzcy52YWx1ZSA9IGxvYWRlZDsKICAgICAgICAgICAgICAgICAgICBta3ZQcm9ncmVzcy5tYXggPSB0b3RhbDsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBuYW1lOiAnbWVyZ2VkLm1rdicsCiAgICAgICAgICAgICAgICBzdWJ0aXRsZUFzc0xpc3Q6IFtdLAogICAgICAgICAgICB9OwogICAgICAgICAgICBvcHRpb24gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb24sIG9wdGlvbik7CiAgICAgICAgICAgIHRhcmdldC5kb3dubG9hZCA9IGEuZG93bmxvYWQgPSBhLnRleHRDb250ZW50ID0gb3B0aW9uLm5hbWU7CiAgICAgICAgICAgIGNvbnNvbGUudGltZSgnZmlsZScpOwogICAgICAgICAgICBjb25zdCBta3YgPSBhd2FpdCBuZXcgRkxWQVNTMk1LVihvcHRpb24pLmJ1aWxkKG9wdGlvbi5mbHYsIG9wdGlvbi5hc3MsIG9wdGlvbi5zdWJ0aXRsZUFzc0xpc3QpOwogICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ2ZsdmFzczJta3YnKTsKICAgICAgICAgICAgdGFyZ2V0LmhyZWYgPSBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG1rdik7CiAgICAgICAgICAgIHRhcmdldC50ZXh0Q29udGVudCA9ICLlj6blrZjkuLpNS1YiCiAgICAgICAgICAgIHRhcmdldC5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgd2luZG93LmNsb3NlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYS5ocmVmCiAgICAgICAgfTsKICAgICAgICAKICAgIDwvc2NyaXB0Pgo8L2JvZHk+Cgo8L2h0bWw+CmA7CgovKioqCiAqIENvcHlyaWdodCAoQykgMjAxOCBRbGk1LiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKiAKICogQGF1dGhvciBxbGk1IDxnb29kbHExMVthdF0oMTYzfGdtYWlsKS5jb20+CiAqIAogKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMKICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4KKi8KCmNsYXNzIE1LVlRyYW5zbXV4ZXIgewogICAgY29uc3RydWN0b3Iob3B0aW9uKSB7CiAgICAgICAgdGhpcy53b3JrZXJXaW4gPSBudWxsOwogICAgICAgIHRoaXMub3B0aW9uID0gb3B0aW9uOwogICAgfQoKICAgIC8qKgogICAgICogRkxWICsgQVNTID0+IE1LViBlbnRyeSBwb2ludAogICAgICogQHBhcmFtIHtCbG9ifHN0cmluZ3xBcnJheUJ1ZmZlcn0gZmx2CiAgICAgKiBAcGFyYW0ge0Jsb2J8c3RyaW5nfEFycmF5QnVmZmVyfSBhc3MgCiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgCiAgICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldAogICAgICogQHBhcmFtIHt7IG5hbWU6IHN0cmluZzsgZmlsZTogKEJsb2J8c3RyaW5nfEFycmF5QnVmZmVyKTsgfVtdPX0gc3VidGl0bGVBc3NMaXN0CiAgICAgKi8KICAgIGV4ZWMoZmx2LCBhc3MsIG5hbWUsIHRhcmdldCwgc3VidGl0bGVBc3NMaXN0ID0gW10pIHsKICAgICAgICBpZiAodGFyZ2V0LnRleHRDb250ZW50ICE9ICLlj6blrZjkuLpNS1YiKSB7CiAgICAgICAgICAgIHRhcmdldC50ZXh0Q29udGVudCA9ICLmiZPljIXkuK0iOwoKICAgICAgICAgICAgLy8gMS4gQWxsb2NhdGUgZm9yIGEgbmV3IHdpbmRvdwogICAgICAgICAgICBpZiAoIXRoaXMud29ya2VyV2luKSB0aGlzLndvcmtlcldpbiA9IHRvcC5vcGVuKCcnLCB1bmRlZmluZWQsICcgJyk7CgogICAgICAgICAgICAvLyAyLiBJbmplY3Qgc2NyaXB0cwogICAgICAgICAgICB0aGlzLndvcmtlcldpbi5kb2N1bWVudC53cml0ZShlbWJlZGRlZEhUTUwpOwogICAgICAgICAgICB0aGlzLndvcmtlcldpbi5kb2N1bWVudC5jbG9zZSgpOwoKICAgICAgICAgICAgLy8gMy4gSW52b2tlIGV4ZWMKICAgICAgICAgICAgaWYgKCEodGhpcy5vcHRpb24gaW5zdGFuY2VvZiBPYmplY3QpKSB0aGlzLm9wdGlvbiA9IG51bGw7CiAgICAgICAgICAgIHRoaXMud29ya2VyV2luLmV4ZWMoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5vcHRpb24sIHsgZmx2LCBhc3MsIG5hbWUsIHN1YnRpdGxlQXNzTGlzdCB9KSwgdGFyZ2V0KTsKICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChmbHYpOwogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGFzcyk7CgogICAgICAgICAgICAvLyA0LiBGcmVlIHBhcmVudCB3aW5kb3cKICAgICAgICAgICAgLy8gaWYgKHRvcC5jb25maXJtKCdNS1bmiZPljIXkuK3igKbigKbopoHlhbPmjonov5nkuKrnqpflj6PvvIzph4rmlL7lhoXlrZjlkJfvvJ8nKSkgewogICAgICAgICAgICAvLyAgICAgdG9wLmxvY2F0aW9uID0gJ2Fib3V0OmJsYW5rJzsKICAgICAgICAgICAgLy8gfQogICAgICAgIH0KICAgIH0KfQoKLyoqKgogKiBDb3B5cmlnaHQgKEMpIDIwMTggUWxpNS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogCiAqIEBhdXRob3IgcWxpNSA8Z29vZGxxMTFbYXRdKDE2M3xnbWFpbCkuY29tPgogKiAKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiovCgpjb25zdCBfbmF2aWdhdG9yID0gdHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yIHx8IHsgdXNlckFnZW50OiAnY2hyb21lJyB9OwoKY29uc3QgX1RleHREZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAnZnVuY3Rpb24nICYmIFRleHREZWNvZGVyIHx8IGNsYXNzIGV4dGVuZHMgcmVxdWlyZSgnc3RyaW5nX2RlY29kZXInKS5TdHJpbmdEZWNvZGVyIHsKICAgIC8qKgogICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gY2h1bmsgCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAgICovCiAgICBkZWNvZGUoY2h1bmspIHsKICAgICAgICByZXR1cm4gdGhpcy5lbmQoQnVmZmVyLmZyb20oY2h1bmspKTsKICAgIH0KfTsKCi8qKioKICogVGhlIEZMViBkZW11eGVyIGlzIGZyb20gZmx2LmpzCiAqIAogKiBDb3B5cmlnaHQgKEMpIDIwMTYgQmlsaWJpbGkuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqIEBhdXRob3IgemhlbmcgcWlhbiA8eHFxQHhxcS5pbT4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgovLyBpbXBvcnQgRkxWRGVtdXhlciBmcm9tICdmbHYuanMvc3JjL2RlbXV4L2Zsdi1kZW11eGVyLmpzJzsKLy8gLi5pbXBvcnQgTG9nIGZyb20gJy4uL3V0aWxzL2xvZ2dlci5qcyc7CmNvbnN0IExvZyA9IHsKICAgIGU6IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKSwKICAgIHc6IGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLAogICAgaTogY29uc29sZS5sb2cuYmluZChjb25zb2xlKSwKICAgIHY6IGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksCn07CgovLyAuLmltcG9ydCBBTUYgZnJvbSAnLi9hbWYtcGFyc2VyLmpzJzsKLy8gLi4uLmltcG9ydCBMb2cgZnJvbSAnLi4vdXRpbHMvbG9nZ2VyLmpzJzsKLy8gLi4uLmltcG9ydCBkZWNvZGVVVEY4IGZyb20gJy4uL3V0aWxzL3V0ZjgtY29udi5qcyc7CmZ1bmN0aW9uIGNoZWNrQ29udGludWF0aW9uKHVpbnQ4YXJyYXksIHN0YXJ0LCBjaGVja0xlbmd0aCkgewogICAgbGV0IGFycmF5ID0gdWludDhhcnJheTsKICAgIGlmIChzdGFydCArIGNoZWNrTGVuZ3RoIDwgYXJyYXkubGVuZ3RoKSB7CiAgICAgICAgd2hpbGUgKGNoZWNrTGVuZ3RoLS0pIHsKICAgICAgICAgICAgaWYgKChhcnJheVsrK3N0YXJ0XSAmIDB4QzApICE9PSAweDgwKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9CgpmdW5jdGlvbiBkZWNvZGVVVEY4KHVpbnQ4YXJyYXkpIHsKICAgIGxldCBvdXQgPSBbXTsKICAgIGxldCBpbnB1dCA9IHVpbnQ4YXJyYXk7CiAgICBsZXQgaSA9IDA7CiAgICBsZXQgbGVuZ3RoID0gdWludDhhcnJheS5sZW5ndGg7CgogICAgd2hpbGUgKGkgPCBsZW5ndGgpIHsKICAgICAgICBpZiAoaW5wdXRbaV0gPCAweDgwKSB7CiAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaW5wdXRbaV0pKTsKICAgICAgICAgICAgKytpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhDMCkgewogICAgICAgICAgICAvLyBmYWxsdGhyb3VnaAogICAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEUwKSB7CiAgICAgICAgICAgIGlmIChjaGVja0NvbnRpbnVhdGlvbihpbnB1dCwgaSwgMSkpIHsKICAgICAgICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHgxRikgPDwgNiB8IChpbnB1dFtpICsgMV0gJiAweDNGKTsKICAgICAgICAgICAgICAgIGlmICh1Y3M0ID49IDB4ODApIHsKICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKHVjczQgJiAweEZGRkYpKTsKICAgICAgICAgICAgICAgICAgICBpICs9IDI7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGlucHV0W2ldIDwgMHhGMCkgewogICAgICAgICAgICBpZiAoY2hlY2tDb250aW51YXRpb24oaW5wdXQsIGksIDIpKSB7CiAgICAgICAgICAgICAgICBsZXQgdWNzNCA9IChpbnB1dFtpXSAmIDB4RikgPDwgMTIgfCAoaW5wdXRbaSArIDFdICYgMHgzRikgPDwgNiB8IGlucHV0W2kgKyAyXSAmIDB4M0Y7CiAgICAgICAgICAgICAgICBpZiAodWNzNCA+PSAweDgwMCAmJiAodWNzNCAmIDB4RjgwMCkgIT09IDB4RDgwMCkgewogICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUodWNzNCAmIDB4RkZGRikpOwogICAgICAgICAgICAgICAgICAgIGkgKz0gMzsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoaW5wdXRbaV0gPCAweEY4KSB7CiAgICAgICAgICAgIGlmIChjaGVja0NvbnRpbnVhdGlvbihpbnB1dCwgaSwgMykpIHsKICAgICAgICAgICAgICAgIGxldCB1Y3M0ID0gKGlucHV0W2ldICYgMHg3KSA8PCAxOCB8IChpbnB1dFtpICsgMV0gJiAweDNGKSA8PCAxMgogICAgICAgICAgICAgICAgICAgIHwgKGlucHV0W2kgKyAyXSAmIDB4M0YpIDw8IDYgfCAoaW5wdXRbaSArIDNdICYgMHgzRik7CiAgICAgICAgICAgICAgICBpZiAodWNzNCA+IDB4MTAwMDAgJiYgdWNzNCA8IDB4MTEwMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgdWNzNCAtPSAweDEwMDAwOwogICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKHVjczQgPj4+IDEwKSB8IDB4RDgwMCkpOwogICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoKHVjczQgJiAweDNGRikgfCAweERDMDApKTsKICAgICAgICAgICAgICAgICAgICBpICs9IDQ7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgweEZGRkQpKTsKICAgICAgICArK2k7CiAgICB9CgogICAgcmV0dXJuIG91dC5qb2luKCcnKTsKfQoKLy8gLi4uLmltcG9ydCB7SWxsZWdhbFN0YXRlRXhjZXB0aW9ufSBmcm9tICcuLi91dGlscy9leGNlcHRpb24uanMnOwpjbGFzcyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7IH0KCmxldCBsZSA9IChmdW5jdGlvbiAoKSB7CiAgICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKDIpOwogICAgKG5ldyBEYXRhVmlldyhidWYpKS5zZXRJbnQxNigwLCAyNTYsIHRydWUpOyAgLy8gbGl0dGxlLWVuZGlhbiB3cml0ZQogICAgcmV0dXJuIChuZXcgSW50MTZBcnJheShidWYpKVswXSA9PT0gMjU2OyAgLy8gcGxhdGZvcm0tc3BlYyByZWFkLCBpZiBlcXVhbCB0aGVuIExFCn0pKCk7CgpjbGFzcyBBTUYgewoKICAgIHN0YXRpYyBwYXJzZVNjcmlwdERhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7CiAgICAgICAgbGV0IGRhdGEgPSB7fTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IG5hbWUgPSBBTUYucGFyc2VWYWx1ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwogICAgICAgICAgICBsZXQgdmFsdWUgPSBBTUYucGFyc2VWYWx1ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG5hbWUuc2l6ZSwgZGF0YVNpemUgLSBuYW1lLnNpemUpOwoKICAgICAgICAgICAgZGF0YVtuYW1lLmRhdGFdID0gdmFsdWUuZGF0YTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIExvZy5lKCdBTUYnLCBlLnRvU3RyaW5nKCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CgogICAgc3RhdGljIHBhcnNlT2JqZWN0KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkgewogICAgICAgIGlmIChkYXRhU2l6ZSA8IDMpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBub3QgZW5vdWdoIHdoZW4gcGFyc2UgU2NyaXB0RGF0YU9iamVjdCcpOwogICAgICAgIH0KICAgICAgICBsZXQgbmFtZSA9IEFNRi5wYXJzZVN0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwogICAgICAgIGxldCB2YWx1ZSA9IEFNRi5wYXJzZVZhbHVlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgbmFtZS5zaXplLCBkYXRhU2l6ZSAtIG5hbWUuc2l6ZSk7CiAgICAgICAgbGV0IGlzT2JqZWN0RW5kID0gdmFsdWUub2JqZWN0RW5kOwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLmRhdGEsCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUuZGF0YQogICAgICAgICAgICB9LAogICAgICAgICAgICBzaXplOiBuYW1lLnNpemUgKyB2YWx1ZS5zaXplLAogICAgICAgICAgICBvYmplY3RFbmQ6IGlzT2JqZWN0RW5kCiAgICAgICAgfTsKICAgIH0KCiAgICBzdGF0aWMgcGFyc2VWYXJpYWJsZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICByZXR1cm4gQU1GLnBhcnNlT2JqZWN0KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICB9CgogICAgc3RhdGljIHBhcnNlU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkgewogICAgICAgIGlmIChkYXRhU2l6ZSA8IDIpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBub3QgZW5vdWdoIHdoZW4gcGFyc2UgU3RyaW5nJyk7CiAgICAgICAgfQogICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgbGV0IGxlbmd0aCA9IHYuZ2V0VWludDE2KDAsICFsZSk7CgogICAgICAgIGxldCBzdHI7CiAgICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICAgICAgc3RyID0gZGVjb2RlVVRGOChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDIsIGxlbmd0aCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHN0ciA9ICcnOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGF0YTogc3RyLAogICAgICAgICAgICBzaXplOiAyICsgbGVuZ3RoCiAgICAgICAgfTsKICAgIH0KCiAgICBzdGF0aWMgcGFyc2VMb25nU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkgewogICAgICAgIGlmIChkYXRhU2l6ZSA8IDQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbignRGF0YSBub3QgZW5vdWdoIHdoZW4gcGFyc2UgTG9uZ1N0cmluZycpOwogICAgICAgIH0KICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwogICAgICAgIGxldCBsZW5ndGggPSB2LmdldFVpbnQzMigwLCAhbGUpOwoKICAgICAgICBsZXQgc3RyOwogICAgICAgIGlmIChsZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHN0ciA9IGRlY29kZVVURjgobmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyA0LCBsZW5ndGgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdHIgPSAnJzsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRhdGE6IHN0ciwKICAgICAgICAgICAgc2l6ZTogNCArIGxlbmd0aAogICAgICAgIH07CiAgICB9CgogICAgc3RhdGljIHBhcnNlRGF0ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICBpZiAoZGF0YVNpemUgPCAxMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdEYXRhIHNpemUgaW52YWxpZCB3aGVuIHBhcnNlIERhdGUnKTsKICAgICAgICB9CiAgICAgICAgbGV0IHYgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTsKICAgICAgICBsZXQgdGltZXN0YW1wID0gdi5nZXRGbG9hdDY0KDAsICFsZSk7CiAgICAgICAgbGV0IGxvY2FsVGltZU9mZnNldCA9IHYuZ2V0SW50MTYoOCwgIWxlKTsKICAgICAgICB0aW1lc3RhbXAgKz0gbG9jYWxUaW1lT2Zmc2V0ICogNjAgKiAxMDAwOyAgLy8gZ2V0IFVUQyB0aW1lCgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRhdGE6IG5ldyBEYXRlKHRpbWVzdGFtcCksCiAgICAgICAgICAgIHNpemU6IDggKyAyCiAgICAgICAgfTsKICAgIH0KCiAgICBzdGF0aWMgcGFyc2VWYWx1ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICBpZiAoZGF0YVNpemUgPCAxKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0RhdGEgbm90IGVub3VnaCB3aGVuIHBhcnNlIFZhbHVlJyk7CiAgICAgICAgfQoKICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwoKICAgICAgICBsZXQgb2Zmc2V0ID0gMTsKICAgICAgICBsZXQgdHlwZSA9IHYuZ2V0VWludDgoMCk7CiAgICAgICAgbGV0IHZhbHVlOwogICAgICAgIGxldCBvYmplY3RFbmQgPSBmYWxzZTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6ICAvLyBOdW1iZXIoRG91YmxlKSB0eXBlCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2LmdldEZsb2F0NjQoMSwgIWxlKTsKICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gODsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMTogeyAgLy8gQm9vbGVhbiB0eXBlCiAgICAgICAgICAgICAgICAgICAgbGV0IGIgPSB2LmdldFVpbnQ4KDEpOwogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYiA/IHRydWUgOiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgMjogeyAgLy8gU3RyaW5nIHR5cGUKICAgICAgICAgICAgICAgICAgICBsZXQgYW1mc3RyID0gQU1GLnBhcnNlU3RyaW5nKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxKTsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFtZnN0ci5kYXRhOwogICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBhbWZzdHIuc2l6ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgMzogeyAvLyBPYmplY3QocykgdHlwZQogICAgICAgICAgICAgICAgICAgIHZhbHVlID0ge307CiAgICAgICAgICAgICAgICAgICAgbGV0IHRlcm1pbmFsID0gMDsgIC8vIHdvcmthcm91bmQgZm9yIG1hbGZvcm1lZCBPYmplY3RzIHdoaWNoIGhhcyBtaXNzaW5nIFNjcmlwdERhdGFPYmplY3RFbmQKICAgICAgICAgICAgICAgICAgICBpZiAoKHYuZ2V0VWludDMyKGRhdGFTaXplIC0gNCwgIWxlKSAmIDB4MDBGRkZGRkYpID09PSA5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1pbmFsID0gMzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IGRhdGFTaXplIC0gNCkgeyAgLy8gNCA9PT0gdHlwZShVSTgpICsgU2NyaXB0RGF0YU9iamVjdEVuZChVSTI0KQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW1mb2JqID0gQU1GLnBhcnNlT2JqZWN0KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBkYXRhU2l6ZSAtIG9mZnNldCAtIHRlcm1pbmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZm9iai5vYmplY3RFbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbYW1mb2JqLmRhdGEubmFtZV0gPSBhbWZvYmouZGF0YS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGFtZm9iai5zaXplOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0IDw9IGRhdGFTaXplIC0gMykgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFya2VyID0gdi5nZXRVaW50MzIob2Zmc2V0IC0gMSwgIWxlKSAmIDB4MDBGRkZGRkY7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXIgPT09IDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FzZSA4OiB7IC8vIEVDTUEgYXJyYXkgdHlwZSAoTWl4ZWQgYXJyYXkpCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7fTsKICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDsgIC8vIEVDTUFBcnJheUxlbmd0aChVSTMyKQogICAgICAgICAgICAgICAgICAgIGxldCB0ZXJtaW5hbCA9IDA7ICAvLyB3b3JrYXJvdW5kIGZvciBtYWxmb3JtZWQgTWl4ZWRBcnJheXMgd2hpY2ggaGFzIG1pc3NpbmcgU2NyaXB0RGF0YU9iamVjdEVuZAogICAgICAgICAgICAgICAgICAgIGlmICgodi5nZXRVaW50MzIoZGF0YVNpemUgLSA0LCAhbGUpICYgMHgwMEZGRkZGRikgPT09IDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGVybWluYWwgPSAzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2Zmc2V0IDwgZGF0YVNpemUgLSA4KSB7ICAvLyA4ID09PSB0eXBlKFVJOCkgKyBFQ01BQXJyYXlMZW5ndGgoVUkzMikgKyBTY3JpcHREYXRhVmFyaWFibGVFbmQoVUkyNCkKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFtZnZhciA9IEFNRi5wYXJzZVZhcmlhYmxlKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBkYXRhU2l6ZSAtIG9mZnNldCAtIHRlcm1pbmFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFtZnZhci5vYmplY3RFbmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVbYW1mdmFyLmRhdGEubmFtZV0gPSBhbWZ2YXIuZGF0YS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGFtZnZhci5zaXplOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0IDw9IGRhdGFTaXplIC0gMykgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFya2VyID0gdi5nZXRVaW50MzIob2Zmc2V0IC0gMSwgIWxlKSAmIDB4MDBGRkZGRkY7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXIgPT09IDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAzOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FzZSA5OiAgLy8gU2NyaXB0RGF0YU9iamVjdEVuZAogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IDE7CiAgICAgICAgICAgICAgICAgICAgb2JqZWN0RW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMTA6IHsgIC8vIFN0cmljdCBhcnJheSB0eXBlCiAgICAgICAgICAgICAgICAgICAgLy8gU2NyaXB0RGF0YVZhbHVlW25dLiBOT1RFOiBhY2NvcmRpbmcgdG8gdmlkZW9fZmlsZV9mb3JtYXRfc3BlY192MTBfMS5wZGYKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtdOwogICAgICAgICAgICAgICAgICAgIGxldCBzdHJpY3RBcnJheUxlbmd0aCA9IHYuZ2V0VWludDMyKDEsICFsZSk7CiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpY3RBcnJheUxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBBTUYucGFyc2VWYWx1ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIG9mZnNldCwgZGF0YVNpemUgLSBvZmZzZXQpOwogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKHZhbC5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHZhbC5zaXplOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgMTE6IHsgIC8vIERhdGUgdHlwZQogICAgICAgICAgICAgICAgICAgIGxldCBkYXRlID0gQU1GLnBhcnNlRGF0ZShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBkYXRlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGRhdGUuc2l6ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgMTI6IHsgIC8vIExvbmcgc3RyaW5nIHR5cGUKICAgICAgICAgICAgICAgICAgICBsZXQgYW1mTG9uZ1N0ciA9IEFNRi5wYXJzZVN0cmluZyhhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhbWZMb25nU3RyLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGFtZkxvbmdTdHIuc2l6ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGFuZCBza2lwCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gZGF0YVNpemU7CiAgICAgICAgICAgICAgICAgICAgTG9nLncoJ0FNRicsICdVbnN1cHBvcnRlZCBBTUYgdmFsdWUgdHlwZSAnICsgdHlwZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIExvZy5lKCdBTUYnLCBlLnRvU3RyaW5nKCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZGF0YTogdmFsdWUsCiAgICAgICAgICAgIHNpemU6IG9mZnNldCwKICAgICAgICAgICAgb2JqZWN0RW5kOiBvYmplY3RFbmQKICAgICAgICB9OwogICAgfQoKfQoKLy8gLi5pbXBvcnQgU1BTUGFyc2VyIGZyb20gJy4vc3BzLXBhcnNlci5qcyc7Ci8vIC4uLi5pbXBvcnQgRXhwR29sb21iIGZyb20gJy4vZXhwLWdvbG9tYi5qcyc7Ci8vIC4uLi4uLmltcG9ydCB7SWxsZWdhbFN0YXRlRXhjZXB0aW9uLCBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb259IGZyb20gJy4uL3V0aWxzL2V4Y2VwdGlvbi5qcyc7CmNsYXNzIEludmFsaWRBcmd1bWVudEV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHsgfQoKY2xhc3MgRXhwR29sb21iIHsKCiAgICBjb25zdHJ1Y3Rvcih1aW50OGFycmF5KSB7CiAgICAgICAgdGhpcy5UQUcgPSAnRXhwR29sb21iJzsKCiAgICAgICAgdGhpcy5fYnVmZmVyID0gdWludDhhcnJheTsKICAgICAgICB0aGlzLl9idWZmZXJfaW5kZXggPSAwOwogICAgICAgIHRoaXMuX3RvdGFsX2J5dGVzID0gdWludDhhcnJheS5ieXRlTGVuZ3RoOwogICAgICAgIHRoaXMuX3RvdGFsX2JpdHMgPSB1aW50OGFycmF5LmJ5dGVMZW5ndGggKiA4OwogICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZCA9IDA7CiAgICAgICAgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCA9IDA7CiAgICB9CgogICAgZGVzdHJveSgpIHsKICAgICAgICB0aGlzLl9idWZmZXIgPSBudWxsOwogICAgfQoKICAgIF9maWxsQ3VycmVudFdvcmQoKSB7CiAgICAgICAgbGV0IGJ1ZmZlcl9ieXRlc19sZWZ0ID0gdGhpcy5fdG90YWxfYnl0ZXMgLSB0aGlzLl9idWZmZXJfaW5kZXg7CiAgICAgICAgaWYgKGJ1ZmZlcl9ieXRlc19sZWZ0IDw9IDApCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oJ0V4cEdvbG9tYjogX2ZpbGxDdXJyZW50V29yZCgpIGJ1dCBubyBieXRlcyBhdmFpbGFibGUnKTsKCiAgICAgICAgbGV0IGJ5dGVzX3JlYWQgPSBNYXRoLm1pbig0LCBidWZmZXJfYnl0ZXNfbGVmdCk7CiAgICAgICAgbGV0IHdvcmQgPSBuZXcgVWludDhBcnJheSg0KTsKICAgICAgICB3b3JkLnNldCh0aGlzLl9idWZmZXIuc3ViYXJyYXkodGhpcy5fYnVmZmVyX2luZGV4LCB0aGlzLl9idWZmZXJfaW5kZXggKyBieXRlc19yZWFkKSk7CiAgICAgICAgdGhpcy5fY3VycmVudF93b3JkID0gbmV3IERhdGFWaWV3KHdvcmQuYnVmZmVyKS5nZXRVaW50MzIoMCwgZmFsc2UpOwoKICAgICAgICB0aGlzLl9idWZmZXJfaW5kZXggKz0gYnl0ZXNfcmVhZDsKICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0ID0gYnl0ZXNfcmVhZCAqIDg7CiAgICB9CgogICAgcmVhZEJpdHMoYml0cykgewogICAgICAgIGlmIChiaXRzID4gMzIpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFeGNlcHRpb24oJ0V4cEdvbG9tYjogcmVhZEJpdHMoKSBiaXRzIGV4Y2VlZGVkIG1heCAzMmJpdHMhJyk7CgogICAgICAgIGlmIChiaXRzIDw9IHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQpIHsKICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuX2N1cnJlbnRfd29yZCA+Pj4gKDMyIC0gYml0cyk7CiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZCA8PD0gYml0czsKICAgICAgICAgICAgdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCAtPSBiaXRzOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KCiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgPyB0aGlzLl9jdXJyZW50X3dvcmQgOiAwOwogICAgICAgIHJlc3VsdCA9IHJlc3VsdCA+Pj4gKDMyIC0gdGhpcy5fY3VycmVudF93b3JkX2JpdHNfbGVmdCk7CiAgICAgICAgbGV0IGJpdHNfbmVlZF9sZWZ0ID0gYml0cyAtIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQ7CgogICAgICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpOwogICAgICAgIGxldCBiaXRzX3JlYWRfbmV4dCA9IE1hdGgubWluKGJpdHNfbmVlZF9sZWZ0LCB0aGlzLl9jdXJyZW50X3dvcmRfYml0c19sZWZ0KTsKCiAgICAgICAgbGV0IHJlc3VsdDIgPSB0aGlzLl9jdXJyZW50X3dvcmQgPj4+ICgzMiAtIGJpdHNfcmVhZF9uZXh0KTsKICAgICAgICB0aGlzLl9jdXJyZW50X3dvcmQgPDw9IGJpdHNfcmVhZF9uZXh0OwogICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgLT0gYml0c19yZWFkX25leHQ7CgogICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgYml0c19yZWFkX25leHQpIHwgcmVzdWx0MjsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIHJlYWRCb29sKCkgewogICAgICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKDEpID09PSAxOwogICAgfQoKICAgIHJlYWRCeXRlKCkgewogICAgICAgIHJldHVybiB0aGlzLnJlYWRCaXRzKDgpOwogICAgfQoKICAgIF9za2lwTGVhZGluZ1plcm8oKSB7CiAgICAgICAgbGV0IHplcm9fY291bnQ7CiAgICAgICAgZm9yICh6ZXJvX2NvdW50ID0gMDsgemVyb19jb3VudCA8IHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQ7IHplcm9fY291bnQrKykgewogICAgICAgICAgICBpZiAoMCAhPT0gKHRoaXMuX2N1cnJlbnRfd29yZCAmICgweDgwMDAwMDAwID4+PiB6ZXJvX2NvdW50KSkpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZCA8PD0gemVyb19jb3VudDsKICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRfd29yZF9iaXRzX2xlZnQgLT0gemVyb19jb3VudDsKICAgICAgICAgICAgICAgIHJldHVybiB6ZXJvX2NvdW50OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuX2ZpbGxDdXJyZW50V29yZCgpOwogICAgICAgIHJldHVybiB6ZXJvX2NvdW50ICsgdGhpcy5fc2tpcExlYWRpbmdaZXJvKCk7CiAgICB9CgogICAgcmVhZFVFRygpIHsgIC8vIHVuc2lnbmVkIGV4cG9uZW50aWFsIGdvbG9tYgogICAgICAgIGxldCBsZWFkaW5nX3plcm9zID0gdGhpcy5fc2tpcExlYWRpbmdaZXJvKCk7CiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdHMobGVhZGluZ196ZXJvcyArIDEpIC0gMTsKICAgIH0KCiAgICByZWFkU0VHKCkgeyAgLy8gc2lnbmVkIGV4cG9uZW50aWFsIGdvbG9tYgogICAgICAgIGxldCB2YWx1ZSA9IHRoaXMucmVhZFVFRygpOwogICAgICAgIGlmICh2YWx1ZSAmIDB4MDEpIHsKICAgICAgICAgICAgcmV0dXJuICh2YWx1ZSArIDEpID4+PiAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAtMSAqICh2YWx1ZSA+Pj4gMSk7CiAgICAgICAgfQogICAgfQoKfQoKY2xhc3MgU1BTUGFyc2VyIHsKCiAgICBzdGF0aWMgX2Vic3AycmJzcCh1aW50OGFycmF5KSB7CiAgICAgICAgbGV0IHNyYyA9IHVpbnQ4YXJyYXk7CiAgICAgICAgbGV0IHNyY19sZW5ndGggPSBzcmMuYnl0ZUxlbmd0aDsKICAgICAgICBsZXQgZHN0ID0gbmV3IFVpbnQ4QXJyYXkoc3JjX2xlbmd0aCk7CiAgICAgICAgbGV0IGRzdF9pZHggPSAwOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyY19sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaSA+PSAyKSB7CiAgICAgICAgICAgICAgICAvLyBVbmVzY2FwZTogU2tpcCAweDAzIGFmdGVyIDAwIDAwCiAgICAgICAgICAgICAgICBpZiAoc3JjW2ldID09PSAweDAzICYmIHNyY1tpIC0gMV0gPT09IDB4MDAgJiYgc3JjW2kgLSAyXSA9PT0gMHgwMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGRzdFtkc3RfaWR4XSA9IHNyY1tpXTsKICAgICAgICAgICAgZHN0X2lkeCsrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRzdC5idWZmZXIsIDAsIGRzdF9pZHgpOwogICAgfQoKICAgIHN0YXRpYyBwYXJzZVNQUyh1aW50OGFycmF5KSB7CiAgICAgICAgbGV0IHJic3AgPSBTUFNQYXJzZXIuX2Vic3AycmJzcCh1aW50OGFycmF5KTsKICAgICAgICBsZXQgZ2IgPSBuZXcgRXhwR29sb21iKHJic3ApOwoKICAgICAgICBnYi5yZWFkQnl0ZSgpOwogICAgICAgIGxldCBwcm9maWxlX2lkYyA9IGdiLnJlYWRCeXRlKCk7ICAvLyBwcm9maWxlX2lkYwogICAgICAgIGdiLnJlYWRCeXRlKCk7ICAvLyBjb25zdHJhaW50X3NldF9mbGFnc1s1XSArIHJlc2VydmVkX3plcm9bM10KICAgICAgICBsZXQgbGV2ZWxfaWRjID0gZ2IucmVhZEJ5dGUoKTsgIC8vIGxldmVsX2lkYwogICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIHNlcV9wYXJhbWV0ZXJfc2V0X2lkCgogICAgICAgIGxldCBwcm9maWxlX3N0cmluZyA9IFNQU1BhcnNlci5nZXRQcm9maWxlU3RyaW5nKHByb2ZpbGVfaWRjKTsKICAgICAgICBsZXQgbGV2ZWxfc3RyaW5nID0gU1BTUGFyc2VyLmdldExldmVsU3RyaW5nKGxldmVsX2lkYyk7CiAgICAgICAgbGV0IGNocm9tYV9mb3JtYXRfaWRjID0gMTsKICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdCA9IDQyMDsKICAgICAgICBsZXQgY2hyb21hX2Zvcm1hdF90YWJsZSA9IFswLCA0MjAsIDQyMiwgNDQ0XTsKICAgICAgICBsZXQgYml0X2RlcHRoID0gODsKCiAgICAgICAgaWYgKHByb2ZpbGVfaWRjID09PSAxMDAgfHwgcHJvZmlsZV9pZGMgPT09IDExMCB8fCBwcm9maWxlX2lkYyA9PT0gMTIyIHx8CiAgICAgICAgICAgIHByb2ZpbGVfaWRjID09PSAyNDQgfHwgcHJvZmlsZV9pZGMgPT09IDQ0IHx8IHByb2ZpbGVfaWRjID09PSA4MyB8fAogICAgICAgICAgICBwcm9maWxlX2lkYyA9PT0gODYgfHwgcHJvZmlsZV9pZGMgPT09IDExOCB8fCBwcm9maWxlX2lkYyA9PT0gMTI4IHx8CiAgICAgICAgICAgIHByb2ZpbGVfaWRjID09PSAxMzggfHwgcHJvZmlsZV9pZGMgPT09IDE0NCkgewoKICAgICAgICAgICAgY2hyb21hX2Zvcm1hdF9pZGMgPSBnYi5yZWFkVUVHKCk7CiAgICAgICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA9PT0gMykgewogICAgICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBzZXBhcmF0ZV9jb2xvdXJfcGxhbmVfZmxhZwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjaHJvbWFfZm9ybWF0X2lkYyA8PSAzKSB7CiAgICAgICAgICAgICAgICBjaHJvbWFfZm9ybWF0ID0gY2hyb21hX2Zvcm1hdF90YWJsZVtjaHJvbWFfZm9ybWF0X2lkY107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJpdF9kZXB0aCA9IGdiLnJlYWRVRUcoKSArIDg7ICAvLyBiaXRfZGVwdGhfbHVtYV9taW51czgKICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gYml0X2RlcHRoX2Nocm9tYV9taW51czgKICAgICAgICAgICAgZ2IucmVhZEJpdHMoMSk7ICAvLyBxcHByaW1lX3lfemVyb190cmFuc2Zvcm1fYnlwYXNzX2ZsYWcKICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIHNlcV9zY2FsaW5nX21hdHJpeF9wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgIGxldCBzY2FsaW5nX2xpc3RfY291bnQgPSAoY2hyb21hX2Zvcm1hdF9pZGMgIT09IDMpID8gOCA6IDEyOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2FsaW5nX2xpc3RfY291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyBzZXFfc2NhbGluZ19saXN0X3ByZXNlbnRfZmxhZwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNQU1BhcnNlci5fc2tpcFNjYWxpbmdMaXN0KGdiLCAxNik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUFNQYXJzZXIuX3NraXBTY2FsaW5nTGlzdChnYiwgNjQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGxvZzJfbWF4X2ZyYW1lX251bV9taW51czQKICAgICAgICBsZXQgcGljX29yZGVyX2NudF90eXBlID0gZ2IucmVhZFVFRygpOwogICAgICAgIGlmIChwaWNfb3JkZXJfY250X3R5cGUgPT09IDApIHsKICAgICAgICAgICAgZ2IucmVhZFVFRygpOyAgLy8gbG9nMl9tYXhfcGljX29yZGVyX2NudF9sc2JfbWludXNfNAogICAgICAgIH0gZWxzZSBpZiAocGljX29yZGVyX2NudF90eXBlID09PSAxKSB7CiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZGVsdGFfcGljX29yZGVyX2Fsd2F5c196ZXJvX2ZsYWcKICAgICAgICAgICAgZ2IucmVhZFNFRygpOyAgLy8gb2Zmc2V0X2Zvcl9ub25fcmVmX3BpYwogICAgICAgICAgICBnYi5yZWFkU0VHKCk7ICAvLyBvZmZzZXRfZm9yX3RvcF90b19ib3R0b21fZmllbGQKICAgICAgICAgICAgbGV0IG51bV9yZWZfZnJhbWVzX2luX3BpY19vcmRlcl9jbnRfY3ljbGUgPSBnYi5yZWFkVUVHKCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtX3JlZl9mcmFtZXNfaW5fcGljX29yZGVyX2NudF9jeWNsZTsgaSsrKSB7CiAgICAgICAgICAgICAgICBnYi5yZWFkU0VHKCk7ICAvLyBvZmZzZXRfZm9yX3JlZl9mcmFtZQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIG1heF9udW1fcmVmX2ZyYW1lcwogICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gZ2Fwc19pbl9mcmFtZV9udW1fdmFsdWVfYWxsb3dlZF9mbGFnCgogICAgICAgIGxldCBwaWNfd2lkdGhfaW5fbWJzX21pbnVzMSA9IGdiLnJlYWRVRUcoKTsKICAgICAgICBsZXQgcGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxID0gZ2IucmVhZFVFRygpOwoKICAgICAgICBsZXQgZnJhbWVfbWJzX29ubHlfZmxhZyA9IGdiLnJlYWRCaXRzKDEpOwogICAgICAgIGlmIChmcmFtZV9tYnNfb25seV9mbGFnID09PSAwKSB7CiAgICAgICAgICAgIGdiLnJlYWRCaXRzKDEpOyAgLy8gbWJfYWRhcHRpdmVfZnJhbWVfZmllbGRfZmxhZwogICAgICAgIH0KICAgICAgICBnYi5yZWFkQml0cygxKTsgIC8vIGRpcmVjdF84eDhfaW5mZXJlbmNlX2ZsYWcKCiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfbGVmdF9vZmZzZXQgPSAwOwogICAgICAgIGxldCBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IDA7CiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfdG9wX29mZnNldCA9IDA7CiAgICAgICAgbGV0IGZyYW1lX2Nyb3BfYm90dG9tX29mZnNldCA9IDA7CgogICAgICAgIGxldCBmcmFtZV9jcm9wcGluZ19mbGFnID0gZ2IucmVhZEJvb2woKTsKICAgICAgICBpZiAoZnJhbWVfY3JvcHBpbmdfZmxhZykgewogICAgICAgICAgICBmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ID0gZ2IucmVhZFVFRygpOwogICAgICAgICAgICBmcmFtZV9jcm9wX3JpZ2h0X29mZnNldCA9IGdiLnJlYWRVRUcoKTsKICAgICAgICAgICAgZnJhbWVfY3JvcF90b3Bfb2Zmc2V0ID0gZ2IucmVhZFVFRygpOwogICAgICAgICAgICBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQgPSBnYi5yZWFkVUVHKCk7CiAgICAgICAgfQoKICAgICAgICBsZXQgc2FyX3dpZHRoID0gMSwgc2FyX2hlaWdodCA9IDE7CiAgICAgICAgbGV0IGZwcyA9IDAsIGZwc19maXhlZCA9IHRydWUsIGZwc19udW0gPSAwLCBmcHNfZGVuID0gMDsKCiAgICAgICAgbGV0IHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGdiLnJlYWRCb29sKCk7CiAgICAgICAgaWYgKHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZykgewogICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gYXNwZWN0X3JhdGlvX2luZm9fcHJlc2VudF9mbGFnCiAgICAgICAgICAgICAgICBsZXQgYXNwZWN0X3JhdGlvX2lkYyA9IGdiLnJlYWRCeXRlKCk7CiAgICAgICAgICAgICAgICBsZXQgc2FyX3dfdGFibGUgPSBbMSwgMTIsIDEwLCAxNiwgNDAsIDI0LCAyMCwgMzIsIDgwLCAxOCwgMTUsIDY0LCAxNjAsIDQsIDMsIDJdOwogICAgICAgICAgICAgICAgbGV0IHNhcl9oX3RhYmxlID0gWzEsIDExLCAxMSwgMTEsIDMzLCAxMSwgMTEsIDExLCAzMywgMTEsIDExLCAzMywgOTksIDMsIDIsIDFdOwoKICAgICAgICAgICAgICAgIGlmIChhc3BlY3RfcmF0aW9faWRjID4gMCAmJiBhc3BlY3RfcmF0aW9faWRjIDwgMTYpIHsKICAgICAgICAgICAgICAgICAgICBzYXJfd2lkdGggPSBzYXJfd190YWJsZVthc3BlY3RfcmF0aW9faWRjIC0gMV07CiAgICAgICAgICAgICAgICAgICAgc2FyX2hlaWdodCA9IHNhcl9oX3RhYmxlW2FzcGVjdF9yYXRpb19pZGMgLSAxXTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNwZWN0X3JhdGlvX2lkYyA9PT0gMjU1KSB7CiAgICAgICAgICAgICAgICAgICAgc2FyX3dpZHRoID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTsKICAgICAgICAgICAgICAgICAgICBzYXJfaGVpZ2h0ID0gZ2IucmVhZEJ5dGUoKSA8PCA4IHwgZ2IucmVhZEJ5dGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIG92ZXJzY2FuX2luZm9fcHJlc2VudF9mbGFnCiAgICAgICAgICAgICAgICBnYi5yZWFkQm9vbCgpOyAgLy8gb3ZlcnNjYW5fYXBwcm9wcmlhdGVfZmxhZwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyB2aWRlb19zaWduYWxfdHlwZV9wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgIGdiLnJlYWRCaXRzKDQpOyAgLy8gdmlkZW9fZm9ybWF0ICYgdmlkZW9fZnVsbF9yYW5nZV9mbGFnCiAgICAgICAgICAgICAgICBpZiAoZ2IucmVhZEJvb2woKSkgeyAgLy8gY29sb3VyX2Rlc2NyaXB0aW9uX3ByZXNlbnRfZmxhZwogICAgICAgICAgICAgICAgICAgIGdiLnJlYWRCaXRzKDI0KTsgIC8vIGNvbG91cl9wcmltYXJpZXMgJiB0cmFuc2Zlcl9jaGFyYWN0ZXJpc3RpY3MgJiBtYXRyaXhfY29lZmZpY2llbnRzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGdiLnJlYWRCb29sKCkpIHsgIC8vIGNocm9tYV9sb2NfaW5mb19wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgIGdiLnJlYWRVRUcoKTsgIC8vIGNocm9tYV9zYW1wbGVfbG9jX3R5cGVfdG9wX2ZpZWxkCiAgICAgICAgICAgICAgICBnYi5yZWFkVUVHKCk7ICAvLyBjaHJvbWFfc2FtcGxlX2xvY190eXBlX2JvdHRvbV9maWVsZAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChnYi5yZWFkQm9vbCgpKSB7ICAvLyB0aW1pbmdfaW5mb19wcmVzZW50X2ZsYWcKICAgICAgICAgICAgICAgIGxldCBudW1fdW5pdHNfaW5fdGljayA9IGdiLnJlYWRCaXRzKDMyKTsKICAgICAgICAgICAgICAgIGxldCB0aW1lX3NjYWxlID0gZ2IucmVhZEJpdHMoMzIpOwogICAgICAgICAgICAgICAgZnBzX2ZpeGVkID0gZ2IucmVhZEJvb2woKTsgIC8vIGZpeGVkX2ZyYW1lX3JhdGVfZmxhZwoKICAgICAgICAgICAgICAgIGZwc19udW0gPSB0aW1lX3NjYWxlOwogICAgICAgICAgICAgICAgZnBzX2RlbiA9IG51bV91bml0c19pbl90aWNrICogMjsKICAgICAgICAgICAgICAgIGZwcyA9IGZwc19udW0gLyBmcHNfZGVuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBsZXQgc2FyU2NhbGUgPSAxOwogICAgICAgIGlmIChzYXJfd2lkdGggIT09IDEgfHwgc2FyX2hlaWdodCAhPT0gMSkgewogICAgICAgICAgICBzYXJTY2FsZSA9IHNhcl93aWR0aCAvIHNhcl9oZWlnaHQ7CiAgICAgICAgfQoKICAgICAgICBsZXQgY3JvcF91bml0X3ggPSAwLCBjcm9wX3VuaXRfeSA9IDA7CiAgICAgICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjID09PSAwKSB7CiAgICAgICAgICAgIGNyb3BfdW5pdF94ID0gMTsKICAgICAgICAgICAgY3JvcF91bml0X3kgPSAyIC0gZnJhbWVfbWJzX29ubHlfZmxhZzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgc3ViX3djID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAzKSA/IDEgOiAyOwogICAgICAgICAgICBsZXQgc3ViX2hjID0gKGNocm9tYV9mb3JtYXRfaWRjID09PSAxKSA/IDIgOiAxOwogICAgICAgICAgICBjcm9wX3VuaXRfeCA9IHN1Yl93YzsKICAgICAgICAgICAgY3JvcF91bml0X3kgPSBzdWJfaGMgKiAoMiAtIGZyYW1lX21ic19vbmx5X2ZsYWcpOwogICAgICAgIH0KCiAgICAgICAgbGV0IGNvZGVjX3dpZHRoID0gKHBpY193aWR0aF9pbl9tYnNfbWludXMxICsgMSkgKiAxNjsKICAgICAgICBsZXQgY29kZWNfaGVpZ2h0ID0gKDIgLSBmcmFtZV9tYnNfb25seV9mbGFnKSAqICgocGljX2hlaWdodF9pbl9tYXBfdW5pdHNfbWludXMxICsgMSkgKiAxNik7CgogICAgICAgIGNvZGVjX3dpZHRoIC09IChmcmFtZV9jcm9wX2xlZnRfb2Zmc2V0ICsgZnJhbWVfY3JvcF9yaWdodF9vZmZzZXQpICogY3JvcF91bml0X3g7CiAgICAgICAgY29kZWNfaGVpZ2h0IC09IChmcmFtZV9jcm9wX3RvcF9vZmZzZXQgKyBmcmFtZV9jcm9wX2JvdHRvbV9vZmZzZXQpICogY3JvcF91bml0X3k7CgogICAgICAgIGxldCBwcmVzZW50X3dpZHRoID0gTWF0aC5jZWlsKGNvZGVjX3dpZHRoICogc2FyU2NhbGUpOwoKICAgICAgICBnYi5kZXN0cm95KCk7CiAgICAgICAgZ2IgPSBudWxsOwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwcm9maWxlX3N0cmluZzogcHJvZmlsZV9zdHJpbmcsICAvLyBiYXNlbGluZSwgaGlnaCwgaGlnaDEwLCAuLi4KICAgICAgICAgICAgbGV2ZWxfc3RyaW5nOiBsZXZlbF9zdHJpbmcsICAvLyAzLCAzLjEsIDQsIDQuMSwgNSwgNS4xLCAuLi4KICAgICAgICAgICAgYml0X2RlcHRoOiBiaXRfZGVwdGgsICAvLyA4Yml0LCAxMGJpdCwgLi4uCiAgICAgICAgICAgIGNocm9tYV9mb3JtYXQ6IGNocm9tYV9mb3JtYXQsICAvLyA0OjI6MCwgNDoyOjIsIC4uLgogICAgICAgICAgICBjaHJvbWFfZm9ybWF0X3N0cmluZzogU1BTUGFyc2VyLmdldENocm9tYUZvcm1hdFN0cmluZyhjaHJvbWFfZm9ybWF0KSwKCiAgICAgICAgICAgIGZyYW1lX3JhdGU6IHsKICAgICAgICAgICAgICAgIGZpeGVkOiBmcHNfZml4ZWQsCiAgICAgICAgICAgICAgICBmcHM6IGZwcywKICAgICAgICAgICAgICAgIGZwc19kZW46IGZwc19kZW4sCiAgICAgICAgICAgICAgICBmcHNfbnVtOiBmcHNfbnVtCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzYXJfcmF0aW86IHsKICAgICAgICAgICAgICAgIHdpZHRoOiBzYXJfd2lkdGgsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IHNhcl9oZWlnaHQKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGNvZGVjX3NpemU6IHsKICAgICAgICAgICAgICAgIHdpZHRoOiBjb2RlY193aWR0aCwKICAgICAgICAgICAgICAgIGhlaWdodDogY29kZWNfaGVpZ2h0CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBwcmVzZW50X3NpemU6IHsKICAgICAgICAgICAgICAgIHdpZHRoOiBwcmVzZW50X3dpZHRoLAogICAgICAgICAgICAgICAgaGVpZ2h0OiBjb2RlY19oZWlnaHQKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9CgogICAgc3RhdGljIF9za2lwU2NhbGluZ0xpc3QoZ2IsIGNvdW50KSB7CiAgICAgICAgbGV0IGxhc3Rfc2NhbGUgPSA4LCBuZXh0X3NjYWxlID0gODsKICAgICAgICBsZXQgZGVsdGFfc2NhbGUgPSAwOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykgewogICAgICAgICAgICBpZiAobmV4dF9zY2FsZSAhPT0gMCkgewogICAgICAgICAgICAgICAgZGVsdGFfc2NhbGUgPSBnYi5yZWFkU0VHKCk7CiAgICAgICAgICAgICAgICBuZXh0X3NjYWxlID0gKGxhc3Rfc2NhbGUgKyBkZWx0YV9zY2FsZSArIDI1NikgJSAyNTY7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGFzdF9zY2FsZSA9IChuZXh0X3NjYWxlID09PSAwKSA/IGxhc3Rfc2NhbGUgOiBuZXh0X3NjYWxlOwogICAgICAgIH0KICAgIH0KCiAgICBzdGF0aWMgZ2V0UHJvZmlsZVN0cmluZyhwcm9maWxlX2lkYykgewogICAgICAgIHN3aXRjaCAocHJvZmlsZV9pZGMpIHsKICAgICAgICAgICAgY2FzZSA2NjoKICAgICAgICAgICAgICAgIHJldHVybiAnQmFzZWxpbmUnOwogICAgICAgICAgICBjYXNlIDc3OgogICAgICAgICAgICAgICAgcmV0dXJuICdNYWluJzsKICAgICAgICAgICAgY2FzZSA4ODoKICAgICAgICAgICAgICAgIHJldHVybiAnRXh0ZW5kZWQnOwogICAgICAgICAgICBjYXNlIDEwMDoKICAgICAgICAgICAgICAgIHJldHVybiAnSGlnaCc7CiAgICAgICAgICAgIGNhc2UgMTEwOgogICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoMTAnOwogICAgICAgICAgICBjYXNlIDEyMjoKICAgICAgICAgICAgICAgIHJldHVybiAnSGlnaDQyMic7CiAgICAgICAgICAgIGNhc2UgMjQ0OgogICAgICAgICAgICAgICAgcmV0dXJuICdIaWdoNDQ0JzsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBnZXRMZXZlbFN0cmluZyhsZXZlbF9pZGMpIHsKICAgICAgICByZXR1cm4gKGxldmVsX2lkYyAvIDEwKS50b0ZpeGVkKDEpOwogICAgfQoKICAgIHN0YXRpYyBnZXRDaHJvbWFGb3JtYXRTdHJpbmcoY2hyb21hKSB7CiAgICAgICAgc3dpdGNoIChjaHJvbWEpIHsKICAgICAgICAgICAgY2FzZSA0MjA6CiAgICAgICAgICAgICAgICByZXR1cm4gJzQ6MjowJzsKICAgICAgICAgICAgY2FzZSA0MjI6CiAgICAgICAgICAgICAgICByZXR1cm4gJzQ6MjoyJzsKICAgICAgICAgICAgY2FzZSA0NDQ6CiAgICAgICAgICAgICAgICByZXR1cm4gJzQ6NDo0JzsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAnVW5rbm93bic7CiAgICAgICAgfQogICAgfQoKfQoKLy8gLi5pbXBvcnQgRGVtdXhFcnJvcnMgZnJvbSAnLi9kZW11eC1lcnJvcnMuanMnOwpjb25zdCBEZW11eEVycm9ycyA9IHsKICAgIE9LOiAnT0snLAogICAgRk9STUFUX0VSUk9SOiAnRm9ybWF0RXJyb3InLAogICAgRk9STUFUX1VOU1VQUE9SVEVEOiAnRm9ybWF0VW5zdXBwb3J0ZWQnLAogICAgQ09ERUNfVU5TVVBQT1JURUQ6ICdDb2RlY1Vuc3VwcG9ydGVkJwp9OwoKLy8gLi5pbXBvcnQgTWVkaWFJbmZvIGZyb20gJy4uL2NvcmUvbWVkaWEtaW5mby5qcyc7CmNsYXNzIE1lZGlhSW5mbyB7CgogICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgdGhpcy5taW1lVHlwZSA9IG51bGw7CiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IG51bGw7CgogICAgICAgIHRoaXMuaGFzQXVkaW8gPSBudWxsOwogICAgICAgIHRoaXMuaGFzVmlkZW8gPSBudWxsOwogICAgICAgIHRoaXMuYXVkaW9Db2RlYyA9IG51bGw7CiAgICAgICAgdGhpcy52aWRlb0NvZGVjID0gbnVsbDsKICAgICAgICB0aGlzLmF1ZGlvRGF0YVJhdGUgPSBudWxsOwogICAgICAgIHRoaXMudmlkZW9EYXRhUmF0ZSA9IG51bGw7CgogICAgICAgIHRoaXMuYXVkaW9TYW1wbGVSYXRlID0gbnVsbDsKICAgICAgICB0aGlzLmF1ZGlvQ2hhbm5lbENvdW50ID0gbnVsbDsKCiAgICAgICAgdGhpcy53aWR0aCA9IG51bGw7CiAgICAgICAgdGhpcy5oZWlnaHQgPSBudWxsOwogICAgICAgIHRoaXMuZnBzID0gbnVsbDsKICAgICAgICB0aGlzLnByb2ZpbGUgPSBudWxsOwogICAgICAgIHRoaXMubGV2ZWwgPSBudWxsOwogICAgICAgIHRoaXMuY2hyb21hRm9ybWF0ID0gbnVsbDsKICAgICAgICB0aGlzLnNhck51bSA9IG51bGw7CiAgICAgICAgdGhpcy5zYXJEZW4gPSBudWxsOwoKICAgICAgICB0aGlzLm1ldGFkYXRhID0gbnVsbDsKICAgICAgICB0aGlzLnNlZ21lbnRzID0gbnVsbDsgIC8vIE1lZGlhSW5mb1tdCiAgICAgICAgdGhpcy5zZWdtZW50Q291bnQgPSBudWxsOwogICAgICAgIHRoaXMuaGFzS2V5ZnJhbWVzSW5kZXggPSBudWxsOwogICAgICAgIHRoaXMua2V5ZnJhbWVzSW5kZXggPSBudWxsOwogICAgfQoKICAgIGlzQ29tcGxldGUoKSB7CiAgICAgICAgbGV0IGF1ZGlvSW5mb0NvbXBsZXRlID0gKHRoaXMuaGFzQXVkaW8gPT09IGZhbHNlKSB8fAogICAgICAgICAgICAodGhpcy5oYXNBdWRpbyA9PT0gdHJ1ZSAmJgogICAgICAgICAgICAgICAgdGhpcy5hdWRpb0NvZGVjICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9TYW1wbGVSYXRlICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9DaGFubmVsQ291bnQgIT0gbnVsbCk7CgogICAgICAgIGxldCB2aWRlb0luZm9Db21wbGV0ZSA9ICh0aGlzLmhhc1ZpZGVvID09PSBmYWxzZSkgfHwKICAgICAgICAgICAgKHRoaXMuaGFzVmlkZW8gPT09IHRydWUgJiYKICAgICAgICAgICAgICAgIHRoaXMudmlkZW9Db2RlYyAhPSBudWxsICYmCiAgICAgICAgICAgICAgICB0aGlzLndpZHRoICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuZnBzICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMucHJvZmlsZSAhPSBudWxsICYmCiAgICAgICAgICAgICAgICB0aGlzLmxldmVsICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuY2hyb21hRm9ybWF0ICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuc2FyTnVtICE9IG51bGwgJiYKICAgICAgICAgICAgICAgIHRoaXMuc2FyRGVuICE9IG51bGwpOwoKICAgICAgICAvLyBrZXlmcmFtZXNJbmRleCBtYXkgbm90IGJlIHByZXNlbnQKICAgICAgICByZXR1cm4gdGhpcy5taW1lVHlwZSAhPSBudWxsICYmCiAgICAgICAgICAgIHRoaXMuZHVyYXRpb24gIT0gbnVsbCAmJgogICAgICAgICAgICB0aGlzLm1ldGFkYXRhICE9IG51bGwgJiYKICAgICAgICAgICAgdGhpcy5oYXNLZXlmcmFtZXNJbmRleCAhPSBudWxsICYmCiAgICAgICAgICAgIGF1ZGlvSW5mb0NvbXBsZXRlICYmCiAgICAgICAgICAgIHZpZGVvSW5mb0NvbXBsZXRlOwogICAgfQoKICAgIGlzU2Vla2FibGUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaGFzS2V5ZnJhbWVzSW5kZXggPT09IHRydWU7CiAgICB9CgogICAgZ2V0TmVhcmVzdEtleWZyYW1lKG1pbGxpc2Vjb25kcykgewogICAgICAgIGlmICh0aGlzLmtleWZyYW1lc0luZGV4ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBsZXQgdGFibGUgPSB0aGlzLmtleWZyYW1lc0luZGV4OwogICAgICAgIGxldCBrZXlmcmFtZUlkeCA9IHRoaXMuX3NlYXJjaCh0YWJsZS50aW1lcywgbWlsbGlzZWNvbmRzKTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5kZXg6IGtleWZyYW1lSWR4LAogICAgICAgICAgICBtaWxsaXNlY29uZHM6IHRhYmxlLnRpbWVzW2tleWZyYW1lSWR4XSwKICAgICAgICAgICAgZmlsZXBvc2l0aW9uOiB0YWJsZS5maWxlcG9zaXRpb25zW2tleWZyYW1lSWR4XQogICAgICAgIH07CiAgICB9CgogICAgX3NlYXJjaChsaXN0LCB2YWx1ZSkgewogICAgICAgIGxldCBpZHggPSAwOwoKICAgICAgICBsZXQgbGFzdCA9IGxpc3QubGVuZ3RoIC0gMTsKICAgICAgICBsZXQgbWlkID0gMDsKICAgICAgICBsZXQgbGJvdW5kID0gMDsKICAgICAgICBsZXQgdWJvdW5kID0gbGFzdDsKCiAgICAgICAgaWYgKHZhbHVlIDwgbGlzdFswXSkgewogICAgICAgICAgICBpZHggPSAwOwogICAgICAgICAgICBsYm91bmQgPSB1Ym91bmQgKyAxOyAgLy8gc2tpcCBzZWFyY2gKICAgICAgICB9CgogICAgICAgIHdoaWxlIChsYm91bmQgPD0gdWJvdW5kKSB7CiAgICAgICAgICAgIG1pZCA9IGxib3VuZCArIE1hdGguZmxvb3IoKHVib3VuZCAtIGxib3VuZCkgLyAyKTsKICAgICAgICAgICAgaWYgKG1pZCA9PT0gbGFzdCB8fCAodmFsdWUgPj0gbGlzdFttaWRdICYmIHZhbHVlIDwgbGlzdFttaWQgKyAxXSkpIHsKICAgICAgICAgICAgICAgIGlkeCA9IG1pZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IGVsc2UgaWYgKGxpc3RbbWlkXSA8IHZhbHVlKSB7CiAgICAgICAgICAgICAgICBsYm91bmQgPSBtaWQgKyAxOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdWJvdW5kID0gbWlkIC0gMTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGlkeDsKICAgIH0KCn0KCmZ1bmN0aW9uIFJlYWRCaWczMihhcnJheSwgaW5kZXgpIHsKICAgIHJldHVybiAoKGFycmF5W2luZGV4XSA8PCAyNCkgfAogICAgICAgIChhcnJheVtpbmRleCArIDFdIDw8IDE2KSB8CiAgICAgICAgKGFycmF5W2luZGV4ICsgMl0gPDwgOCkgfAogICAgICAgIChhcnJheVtpbmRleCArIDNdKSk7Cn0KCmNsYXNzIEZMVkRlbXV4ZXIgewoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IEZMViBkZW11eGVyCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvYmVEYXRhCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb2JlRGF0YS5tYXRjaAogICAgICogQHBhcmFtIHtudW1iZXJ9IHByb2JlRGF0YS5jb25zdW1lZAogICAgICogQHBhcmFtIHtudW1iZXJ9IHByb2JlRGF0YS5kYXRhT2Zmc2V0CiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb2JlRGF0YS5oYXNBdWRpb1RyYWNrCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb2JlRGF0YS5oYXNWaWRlb1RyYWNrCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHByb2JlRGF0YSkgewogICAgICAgIHRoaXMuVEFHID0gJ0ZMVkRlbXV4ZXInOwoKICAgICAgICB0aGlzLl9vbkVycm9yID0gbnVsbDsKICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyA9IG51bGw7CiAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhID0gbnVsbDsKICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUgPSBudWxsOwoKICAgICAgICB0aGlzLl9kYXRhT2Zmc2V0ID0gcHJvYmVEYXRhLmRhdGFPZmZzZXQ7CiAgICAgICAgdGhpcy5fZmlyc3RQYXJzZSA9IHRydWU7CiAgICAgICAgdGhpcy5fZGlzcGF0Y2ggPSBmYWxzZTsKCiAgICAgICAgdGhpcy5faGFzQXVkaW8gPSBwcm9iZURhdGEuaGFzQXVkaW9UcmFjazsKICAgICAgICB0aGlzLl9oYXNWaWRlbyA9IHByb2JlRGF0YS5oYXNWaWRlb1RyYWNrOwoKICAgICAgICB0aGlzLl9oYXNBdWRpb0ZsYWdPdmVycmlkZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLl9oYXNWaWRlb0ZsYWdPdmVycmlkZWQgPSBmYWxzZTsKCiAgICAgICAgdGhpcy5fYXVkaW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gZmFsc2U7CgogICAgICAgIHRoaXMuX21lZGlhSW5mbyA9IG5ldyBNZWRpYUluZm8oKTsKICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzQXVkaW8gPSB0aGlzLl9oYXNBdWRpbzsKICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzVmlkZW8gPSB0aGlzLl9oYXNWaWRlbzsKICAgICAgICB0aGlzLl9tZXRhZGF0YSA9IG51bGw7CiAgICAgICAgdGhpcy5fYXVkaW9NZXRhZGF0YSA9IG51bGw7CiAgICAgICAgdGhpcy5fdmlkZW9NZXRhZGF0YSA9IG51bGw7CgogICAgICAgIHRoaXMuX25hbHVMZW5ndGhTaXplID0gNDsKICAgICAgICB0aGlzLl90aW1lc3RhbXBCYXNlID0gMDsgIC8vIGludDMyLCBpbiBtaWxsaXNlY29uZHMKICAgICAgICB0aGlzLl90aW1lc2NhbGUgPSAxMDAwOwogICAgICAgIHRoaXMuX2R1cmF0aW9uID0gMDsgIC8vIGludDMyLCBpbiBtaWxsaXNlY29uZHMKICAgICAgICB0aGlzLl9kdXJhdGlvbk92ZXJyaWRlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZSA9IHsKICAgICAgICAgICAgZml4ZWQ6IHRydWUsCiAgICAgICAgICAgIGZwczogMjMuOTc2LAogICAgICAgICAgICBmcHNfbnVtOiAyMzk3NiwKICAgICAgICAgICAgZnBzX2RlbjogMTAwMAogICAgICAgIH07CgogICAgICAgIHRoaXMuX2ZsdlNvdW5kUmF0ZVRhYmxlID0gWzU1MDAsIDExMDI1LCAyMjA1MCwgNDQxMDAsIDQ4MDAwXTsKCiAgICAgICAgdGhpcy5fbXBlZ1NhbXBsaW5nUmF0ZXMgPSBbCiAgICAgICAgICAgIDk2MDAwLCA4ODIwMCwgNjQwMDAsIDQ4MDAwLCA0NDEwMCwgMzIwMDAsCiAgICAgICAgICAgIDI0MDAwLCAyMjA1MCwgMTYwMDAsIDEyMDAwLCAxMTAyNSwgODAwMCwgNzM1MAogICAgICAgIF07CgogICAgICAgIHRoaXMuX21wZWdBdWRpb1YxMFNhbXBsZVJhdGVUYWJsZSA9IFs0NDEwMCwgNDgwMDAsIDMyMDAwLCAwXTsKICAgICAgICB0aGlzLl9tcGVnQXVkaW9WMjBTYW1wbGVSYXRlVGFibGUgPSBbMjIwNTAsIDI0MDAwLCAxNjAwMCwgMF07CiAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvVjI1U2FtcGxlUmF0ZVRhYmxlID0gWzExMDI1LCAxMjAwMCwgODAwMCwgMF07CgogICAgICAgIHRoaXMuX21wZWdBdWRpb0wxQml0UmF0ZVRhYmxlID0gWzAsIDMyLCA2NCwgOTYsIDEyOCwgMTYwLCAxOTIsIDIyNCwgMjU2LCAyODgsIDMyMCwgMzUyLCAzODQsIDQxNiwgNDQ4LCAtMV07CiAgICAgICAgdGhpcy5fbXBlZ0F1ZGlvTDJCaXRSYXRlVGFibGUgPSBbMCwgMzIsIDQ4LCA1NiwgNjQsIDgwLCA5NiwgMTEyLCAxMjgsIDE2MCwgMTkyLCAyMjQsIDI1NiwgMzIwLCAzODQsIC0xXTsKICAgICAgICB0aGlzLl9tcGVnQXVkaW9MM0JpdFJhdGVUYWJsZSA9IFswLCAzMiwgNDAsIDQ4LCA1NiwgNjQsIDgwLCA5NiwgMTEyLCAxMjgsIDE2MCwgMTkyLCAyMjQsIDI1NiwgMzIwLCAtMV07CgogICAgICAgIHRoaXMuX3ZpZGVvVHJhY2sgPSB7IHR5cGU6ICd2aWRlbycsIGlkOiAxLCBzZXF1ZW5jZU51bWJlcjogMCwgc2FtcGxlczogW10sIGxlbmd0aDogMCB9OwogICAgICAgIHRoaXMuX2F1ZGlvVHJhY2sgPSB7IHR5cGU6ICdhdWRpbycsIGlkOiAyLCBzZXF1ZW5jZU51bWJlcjogMCwgc2FtcGxlczogW10sIGxlbmd0aDogMCB9OwoKICAgICAgICB0aGlzLl9saXR0bGVFbmRpYW4gPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsZXQgYnVmID0gbmV3IEFycmF5QnVmZmVyKDIpOwogICAgICAgICAgICAobmV3IERhdGFWaWV3KGJ1ZikpLnNldEludDE2KDAsIDI1NiwgdHJ1ZSk7ICAvLyBsaXR0bGUtZW5kaWFuIHdyaXRlCiAgICAgICAgICAgIHJldHVybiAobmV3IEludDE2QXJyYXkoYnVmKSlbMF0gPT09IDI1NjsgIC8vIHBsYXRmb3JtLXNwZWMgcmVhZCwgaWYgZXF1YWwgdGhlbiBMRQogICAgICAgIH0pKCk7CiAgICB9CgogICAgZGVzdHJveSgpIHsKICAgICAgICB0aGlzLl9tZWRpYUluZm8gPSBudWxsOwogICAgICAgIHRoaXMuX21ldGFkYXRhID0gbnVsbDsKICAgICAgICB0aGlzLl9hdWRpb01ldGFkYXRhID0gbnVsbDsKICAgICAgICB0aGlzLl92aWRlb01ldGFkYXRhID0gbnVsbDsKICAgICAgICB0aGlzLl92aWRlb1RyYWNrID0gbnVsbDsKICAgICAgICB0aGlzLl9hdWRpb1RyYWNrID0gbnVsbDsKCiAgICAgICAgdGhpcy5fb25FcnJvciA9IG51bGw7CiAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBudWxsOwogICAgICAgIHRoaXMuX29uVHJhY2tNZXRhZGF0YSA9IG51bGw7CiAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFByb2JlIHRoZSBmbHYgZGF0YQogICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYnVmZmVyCiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSAtIHByb2JlRGF0YSB0byBiZSBmZWVkIGludG8gY29uc3RydWN0b3IKICAgICAqLwogICAgc3RhdGljIHByb2JlKGJ1ZmZlcikgewogICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTsKICAgICAgICBsZXQgbWlzbWF0Y2ggPSB7IG1hdGNoOiBmYWxzZSB9OwoKICAgICAgICBpZiAoZGF0YVswXSAhPT0gMHg0NiB8fCBkYXRhWzFdICE9PSAweDRDIHx8IGRhdGFbMl0gIT09IDB4NTYgfHwgZGF0YVszXSAhPT0gMHgwMSkgewogICAgICAgICAgICByZXR1cm4gbWlzbWF0Y2g7CiAgICAgICAgfQoKICAgICAgICBsZXQgaGFzQXVkaW8gPSAoKGRhdGFbNF0gJiA0KSA+Pj4gMikgIT09IDA7CiAgICAgICAgbGV0IGhhc1ZpZGVvID0gKGRhdGFbNF0gJiAxKSAhPT0gMDsKCiAgICAgICAgbGV0IG9mZnNldCA9IFJlYWRCaWczMihkYXRhLCA1KTsKCiAgICAgICAgaWYgKG9mZnNldCA8IDkpIHsKICAgICAgICAgICAgcmV0dXJuIG1pc21hdGNoOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbWF0Y2g6IHRydWUsCiAgICAgICAgICAgIGNvbnN1bWVkOiBvZmZzZXQsCiAgICAgICAgICAgIGRhdGFPZmZzZXQ6IG9mZnNldCwKICAgICAgICAgICAgaGFzQXVkaW9UcmFjazogaGFzQXVkaW8sCiAgICAgICAgICAgIGhhc1ZpZGVvVHJhY2s6IGhhc1ZpZGVvCiAgICAgICAgfTsKICAgIH0KCiAgICBiaW5kRGF0YVNvdXJjZShsb2FkZXIpIHsKICAgICAgICBsb2FkZXIub25EYXRhQXJyaXZhbCA9IHRoaXMucGFyc2VDaHVua3MuYmluZCh0aGlzKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvLyBwcm90b3R5cGU6IGZ1bmN0aW9uKHR5cGU6IHN0cmluZywgbWV0YWRhdGE6IGFueSk6IHZvaWQKICAgIGdldCBvblRyYWNrTWV0YWRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX29uVHJhY2tNZXRhZGF0YTsKICAgIH0KCiAgICBzZXQgb25UcmFja01ldGFkYXRhKGNhbGxiYWNrKSB7CiAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy8gcHJvdG90eXBlOiBmdW5jdGlvbihtZWRpYUluZm86IE1lZGlhSW5mbyk6IHZvaWQKICAgIGdldCBvbk1lZGlhSW5mbygpIHsKICAgICAgICByZXR1cm4gdGhpcy5fb25NZWRpYUluZm87CiAgICB9CgogICAgc2V0IG9uTWVkaWFJbmZvKGNhbGxiYWNrKSB7CiAgICAgICAgdGhpcy5fb25NZWRpYUluZm8gPSBjYWxsYmFjazsKICAgIH0KCiAgICAvLyBwcm90b3R5cGU6IGZ1bmN0aW9uKHR5cGU6IG51bWJlciwgaW5mbzogc3RyaW5nKTogdm9pZAogICAgZ2V0IG9uRXJyb3IoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX29uRXJyb3I7CiAgICB9CgogICAgc2V0IG9uRXJyb3IoY2FsbGJhY2spIHsKICAgICAgICB0aGlzLl9vbkVycm9yID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy8gcHJvdG90eXBlOiBmdW5jdGlvbih2aWRlb1RyYWNrOiBhbnksIGF1ZGlvVHJhY2s6IGFueSk6IHZvaWQKICAgIGdldCBvbkRhdGFBdmFpbGFibGUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX29uRGF0YUF2YWlsYWJsZTsKICAgIH0KCiAgICBzZXQgb25EYXRhQXZhaWxhYmxlKGNhbGxiYWNrKSB7CiAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy8gdGltZXN0YW1wIGJhc2UgZm9yIG91dHB1dCBzYW1wbGVzLCBtdXN0IGJlIGluIG1pbGxpc2Vjb25kcwogICAgZ2V0IHRpbWVzdGFtcEJhc2UoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVzdGFtcEJhc2U7CiAgICB9CgogICAgc2V0IHRpbWVzdGFtcEJhc2UoYmFzZSkgewogICAgICAgIHRoaXMuX3RpbWVzdGFtcEJhc2UgPSBiYXNlOwogICAgfQoKICAgIGdldCBvdmVycmlkZWREdXJhdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5fZHVyYXRpb247CiAgICB9CgogICAgLy8gRm9yY2Utb3ZlcnJpZGUgbWVkaWEgZHVyYXRpb24uIE11c3QgYmUgaW4gbWlsbGlzZWNvbmRzLCBpbnQzMgogICAgc2V0IG92ZXJyaWRlZER1cmF0aW9uKGR1cmF0aW9uKSB7CiAgICAgICAgdGhpcy5fZHVyYXRpb25PdmVycmlkZWQgPSB0cnVlOwogICAgICAgIHRoaXMuX2R1cmF0aW9uID0gZHVyYXRpb247CiAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmR1cmF0aW9uID0gZHVyYXRpb247CiAgICB9CgogICAgLy8gRm9yY2Utb3ZlcnJpZGUgYXVkaW8gdHJhY2sgcHJlc2VudCBmbGFnLCBib29sZWFuCiAgICBzZXQgb3ZlcnJpZGVkSGFzQXVkaW8oaGFzQXVkaW8pIHsKICAgICAgICB0aGlzLl9oYXNBdWRpb0ZsYWdPdmVycmlkZWQgPSB0cnVlOwogICAgICAgIHRoaXMuX2hhc0F1ZGlvID0gaGFzQXVkaW87CiAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc0F1ZGlvID0gaGFzQXVkaW87CiAgICB9CgogICAgLy8gRm9yY2Utb3ZlcnJpZGUgdmlkZW8gdHJhY2sgcHJlc2VudCBmbGFnLCBib29sZWFuCiAgICBzZXQgb3ZlcnJpZGVkSGFzVmlkZW8oaGFzVmlkZW8pIHsKICAgICAgICB0aGlzLl9oYXNWaWRlb0ZsYWdPdmVycmlkZWQgPSB0cnVlOwogICAgICAgIHRoaXMuX2hhc1ZpZGVvID0gaGFzVmlkZW87CiAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gaGFzVmlkZW87CiAgICB9CgogICAgcmVzZXRNZWRpYUluZm8oKSB7CiAgICAgICAgdGhpcy5fbWVkaWFJbmZvID0gbmV3IE1lZGlhSW5mbygpOwogICAgfQoKICAgIF9pc0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQoKSB7CiAgICAgICAgaWYgKHRoaXMuX2hhc0F1ZGlvICYmIHRoaXMuX2hhc1ZpZGVvKSB7ICAvLyBib3RoIGF1ZGlvICYgdmlkZW8KICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCAmJiB0aGlzLl92aWRlb0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQ7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLl9oYXNBdWRpbyAmJiAhdGhpcy5faGFzVmlkZW8pIHsgIC8vIGF1ZGlvIG9ubHkKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZDsKICAgICAgICB9CiAgICAgICAgaWYgKCF0aGlzLl9oYXNBdWRpbyAmJiB0aGlzLl9oYXNWaWRlbykgeyAgLy8gdmlkZW8gb25seQogICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gZnVuY3Rpb24gcGFyc2VDaHVua3MoY2h1bms6IEFycmF5QnVmZmVyLCBieXRlU3RhcnQ6IG51bWJlcik6IG51bWJlcjsKICAgIHBhcnNlQ2h1bmtzKGNodW5rLCBieXRlU3RhcnQpIHsKICAgICAgICBpZiAoIXRoaXMuX29uRXJyb3IgfHwgIXRoaXMuX29uTWVkaWFJbmZvIHx8ICF0aGlzLl9vblRyYWNrTWV0YWRhdGEgfHwgIXRoaXMuX29uRGF0YUF2YWlsYWJsZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCdGbHY6IG9uRXJyb3IgJiBvbk1lZGlhSW5mbyAmIG9uVHJhY2tNZXRhZGF0YSAmIG9uRGF0YUF2YWlsYWJsZSBjYWxsYmFjayBtdXN0IGJlIHNwZWNpZmllZCcpOwogICAgICAgIH0KCiAgICAgICAgLy8gcWxpNTogZml4IG5vbnplcm8gYnl0ZVN0YXJ0CiAgICAgICAgbGV0IG9mZnNldCA9IGJ5dGVTdGFydCB8fCAwOwogICAgICAgIGxldCBsZSA9IHRoaXMuX2xpdHRsZUVuZGlhbjsKCiAgICAgICAgaWYgKGJ5dGVTdGFydCA9PT0gMCkgeyAgLy8gYnVmZmVyIHdpdGggRkxWIGhlYWRlcgogICAgICAgICAgICBpZiAoY2h1bmsuYnl0ZUxlbmd0aCA+IDEzKSB7CiAgICAgICAgICAgICAgICBsZXQgcHJvYmVEYXRhID0gRkxWRGVtdXhlci5wcm9iZShjaHVuayk7CiAgICAgICAgICAgICAgICBvZmZzZXQgPSBwcm9iZURhdGEuZGF0YU9mZnNldDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5fZmlyc3RQYXJzZSkgeyAgLy8gaGFuZGxlIFByZXZpb3VzVGFnU2l6ZTAgYmVmb3JlIFRhZzEKICAgICAgICAgICAgdGhpcy5fZmlyc3RQYXJzZSA9IGZhbHNlOwogICAgICAgICAgICBpZiAob2Zmc2V0ICE9PSB0aGlzLl9kYXRhT2Zmc2V0KSB7CiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZpcnN0IHRpbWUgcGFyc2luZyBidXQgY2h1bmsgYnl0ZVN0YXJ0IGludmFsaWQhJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGNodW5rLCBvZmZzZXQpOwogICAgICAgICAgICBsZXQgcHJldlRhZ1NpemUwID0gdi5nZXRVaW50MzIoMCwgIWxlKTsKICAgICAgICAgICAgaWYgKHByZXZUYWdTaXplMCAhPT0gMCkgewogICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdQcmV2VGFnU2l6ZTAgIT09IDAgISEhJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7CiAgICAgICAgfQoKICAgICAgICB3aGlsZSAob2Zmc2V0IDwgY2h1bmsuYnl0ZUxlbmd0aCkgewogICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCA9IHRydWU7CgogICAgICAgICAgICBsZXQgdiA9IG5ldyBEYXRhVmlldyhjaHVuaywgb2Zmc2V0KTsKCiAgICAgICAgICAgIGlmIChvZmZzZXQgKyAxMSArIDQgPiBjaHVuay5ieXRlTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAvLyBkYXRhIG5vdCBlbm91Z2ggZm9yIHBhcnNpbmcgYW4gZmx2IHRhZwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB0YWdUeXBlID0gdi5nZXRVaW50OCgwKTsKICAgICAgICAgICAgbGV0IGRhdGFTaXplID0gdi5nZXRVaW50MzIoMCwgIWxlKSAmIDB4MDBGRkZGRkY7CgogICAgICAgICAgICBpZiAob2Zmc2V0ICsgMTEgKyBkYXRhU2l6ZSArIDQgPiBjaHVuay5ieXRlTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAvLyBkYXRhIG5vdCBlbm91Z2ggZm9yIHBhcnNpbmcgYWN0dWFsIGRhdGEgYm9keQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0YWdUeXBlICE9PSA4ICYmIHRhZ1R5cGUgIT09IDkgJiYgdGFnVHlwZSAhPT0gMTgpIHsKICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgVW5zdXBwb3J0ZWQgdGFnIHR5cGUgJHt0YWdUeXBlfSwgc2tpcHBlZGApOwogICAgICAgICAgICAgICAgLy8gY29uc3VtZSB0aGUgd2hvbGUgdGFnIChza2lwIGl0KQogICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDExICsgZGF0YVNpemUgKyA0OwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCB0czIgPSB2LmdldFVpbnQ4KDQpOwogICAgICAgICAgICBsZXQgdHMxID0gdi5nZXRVaW50OCg1KTsKICAgICAgICAgICAgbGV0IHRzMCA9IHYuZ2V0VWludDgoNik7CiAgICAgICAgICAgIGxldCB0czMgPSB2LmdldFVpbnQ4KDcpOwoKICAgICAgICAgICAgbGV0IHRpbWVzdGFtcCA9IHRzMCB8ICh0czEgPDwgOCkgfCAodHMyIDw8IDE2KSB8ICh0czMgPDwgMjQpOwoKICAgICAgICAgICAgbGV0IHN0cmVhbUlkID0gdi5nZXRVaW50MzIoNywgIWxlKSAmIDB4MDBGRkZGRkY7CiAgICAgICAgICAgIGlmIChzdHJlYW1JZCAhPT0gMCkgewogICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdNZWV0IHRhZyB3aGljaCBoYXMgU3RyZWFtSUQgIT0gMCEnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGRhdGFPZmZzZXQgPSBvZmZzZXQgKyAxMTsKCiAgICAgICAgICAgIHN3aXRjaCAodGFnVHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSA4OiAgLy8gQXVkaW8KICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZUF1ZGlvRGF0YShjaHVuaywgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRpbWVzdGFtcCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDk6ICAvLyBWaWRlbwogICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlVmlkZW9EYXRhKGNodW5rLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSwgdGltZXN0YW1wLCBieXRlU3RhcnQgKyBvZmZzZXQpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxODogIC8vIFNjcmlwdERhdGFPYmplY3QKICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZVNjcmlwdERhdGEoY2h1bmssIGRhdGFPZmZzZXQsIGRhdGFTaXplKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHByZXZUYWdTaXplID0gdi5nZXRVaW50MzIoMTEgKyBkYXRhU2l6ZSwgIWxlKTsKICAgICAgICAgICAgaWYgKHByZXZUYWdTaXplICE9PSAxMSArIGRhdGFTaXplKSB7CiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYEludmFsaWQgUHJldlRhZ1NpemUgJHtwcmV2VGFnU2l6ZX1gKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgb2Zmc2V0ICs9IDExICsgZGF0YVNpemUgKyA0OyAgLy8gdGFnQm9keSArIGRhdGFTaXplICsgcHJldlRhZ1NpemUKICAgICAgICB9CgogICAgICAgIC8vIGRpc3BhdGNoIHBhcnNlZCBmcmFtZXMgdG8gY29uc3VtZXIgKHR5cGljYWxseSwgdGhlIHJlbXV4ZXIpCiAgICAgICAgaWYgKHRoaXMuX2lzSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCgpKSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9vbkRhdGFBdmFpbGFibGUodGhpcy5fYXVkaW9UcmFjaywgdGhpcy5fdmlkZW9UcmFjayk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBvZmZzZXQ7ICAvLyBjb25zdW1lZCBieXRlcywganVzdCBlcXVhbHMgbGF0ZXN0IG9mZnNldCBpbmRleAogICAgfQoKICAgIF9wYXJzZVNjcmlwdERhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7CiAgICAgICAgbGV0IHNjcmlwdERhdGEgPSBBTUYucGFyc2VTY3JpcHREYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CgogICAgICAgIGlmIChzY3JpcHREYXRhLmhhc093blByb3BlcnR5KCdvbk1ldGFEYXRhJykpIHsKICAgICAgICAgICAgaWYgKHNjcmlwdERhdGEub25NZXRhRGF0YSA9PSBudWxsIHx8IHR5cGVvZiBzY3JpcHREYXRhLm9uTWV0YURhdGEgIT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ludmFsaWQgb25NZXRhRGF0YSBzdHJ1Y3R1cmUhJyk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuX21ldGFkYXRhKSB7CiAgICAgICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZvdW5kIGFub3RoZXIgb25NZXRhRGF0YSB0YWchJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5fbWV0YWRhdGEgPSBzY3JpcHREYXRhOwogICAgICAgICAgICBsZXQgb25NZXRhRGF0YSA9IHRoaXMuX21ldGFkYXRhLm9uTWV0YURhdGE7CgogICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuaGFzQXVkaW8gPT09ICdib29sZWFuJykgeyAgLy8gaGFzQXVkaW8KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oYXNBdWRpb0ZsYWdPdmVycmlkZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFzQXVkaW8gPSBvbk1ldGFEYXRhLmhhc0F1ZGlvOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNBdWRpbyA9IHRoaXMuX2hhc0F1ZGlvOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oYXNWaWRlbyA9PT0gJ2Jvb2xlYW4nKSB7ICAvLyBoYXNWaWRlbwogICAgICAgICAgICAgICAgaWYgKHRoaXMuX2hhc1ZpZGVvRmxhZ092ZXJyaWRlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNWaWRlbyA9IG9uTWV0YURhdGEuaGFzVmlkZW87CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc1ZpZGVvID0gdGhpcy5faGFzVmlkZW87CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmF1ZGlvZGF0YXJhdGUgPT09ICdudW1iZXInKSB7ICAvLyBhdWRpb2RhdGFyYXRlCiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uYXVkaW9EYXRhUmF0ZSA9IG9uTWV0YURhdGEuYXVkaW9kYXRhcmF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEudmlkZW9kYXRhcmF0ZSA9PT0gJ251bWJlcicpIHsgIC8vIHZpZGVvZGF0YXJhdGUKICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby52aWRlb0RhdGFSYXRlID0gb25NZXRhRGF0YS52aWRlb2RhdGFyYXRlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS53aWR0aCA9PT0gJ251bWJlcicpIHsgIC8vIHdpZHRoCiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8ud2lkdGggPSBvbk1ldGFEYXRhLndpZHRoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25NZXRhRGF0YS5oZWlnaHQgPT09ICdudW1iZXInKSB7ICAvLyBoZWlnaHQKICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oZWlnaHQgPSBvbk1ldGFEYXRhLmhlaWdodDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEuZHVyYXRpb24gPT09ICdudW1iZXInKSB7ICAvLyBkdXJhdGlvbgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9kdXJhdGlvbk92ZXJyaWRlZCkgewogICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IE1hdGguZmxvb3Iob25NZXRhRGF0YS5kdXJhdGlvbiAqIHRoaXMuX3RpbWVzY2FsZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHVyYXRpb24gPSBkdXJhdGlvbjsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uZHVyYXRpb24gPSBkdXJhdGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5kdXJhdGlvbiA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk1ldGFEYXRhLmZyYW1lcmF0ZSA9PT0gJ251bWJlcicpIHsgIC8vIGZyYW1lcmF0ZQogICAgICAgICAgICAgICAgbGV0IGZwc19udW0gPSBNYXRoLmZsb29yKG9uTWV0YURhdGEuZnJhbWVyYXRlICogMTAwMCk7CiAgICAgICAgICAgICAgICBpZiAoZnBzX251bSA+IDApIHsKICAgICAgICAgICAgICAgICAgICBsZXQgZnBzID0gZnBzX251bSAvIDEwMDA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmZXJlbmNlRnJhbWVSYXRlLmZpeGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGUuZnBzID0gZnBzOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZS5mcHNfbnVtID0gZnBzX251bTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZlcmVuY2VGcmFtZVJhdGUuZnBzX2RlbiA9IDEwMDA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmZwcyA9IGZwczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZW9mIG9uTWV0YURhdGEua2V5ZnJhbWVzID09PSAnb2JqZWN0JykgeyAgLy8ga2V5ZnJhbWVzCiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzS2V5ZnJhbWVzSW5kZXggPSB0cnVlOwogICAgICAgICAgICAgICAgbGV0IGtleWZyYW1lcyA9IG9uTWV0YURhdGEua2V5ZnJhbWVzOwogICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmtleWZyYW1lc0luZGV4ID0gdGhpcy5fcGFyc2VLZXlmcmFtZXNJbmRleChrZXlmcmFtZXMpOwogICAgICAgICAgICAgICAgb25NZXRhRGF0YS5rZXlmcmFtZXMgPSBudWxsOyAgLy8ga2V5ZnJhbWVzIGhhcyBiZWVuIGV4dHJhY3RlZCwgcmVtb3ZlIGl0CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8uaGFzS2V5ZnJhbWVzSW5kZXggPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLl9tZWRpYUluZm8ubWV0YWRhdGEgPSBvbk1ldGFEYXRhOwogICAgICAgICAgICBMb2cudih0aGlzLlRBRywgJ1BhcnNlZCBvbk1ldGFEYXRhJyk7CiAgICAgICAgICAgIGlmICh0aGlzLl9tZWRpYUluZm8uaXNDb21wbGV0ZSgpKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyh0aGlzLl9tZWRpYUluZm8pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIF9wYXJzZUtleWZyYW1lc0luZGV4KGtleWZyYW1lcykgewogICAgICAgIGxldCB0aW1lcyA9IFtdOwogICAgICAgIGxldCBmaWxlcG9zaXRpb25zID0gW107CgogICAgICAgIC8vIGlnbm9yZSBmaXJzdCBrZXlmcmFtZSB3aGljaCBpcyBhY3R1YWxseSBBVkMgU2VxdWVuY2UgSGVhZGVyIChBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCkKICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGtleWZyYW1lcy50aW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsZXQgdGltZSA9IHRoaXMuX3RpbWVzdGFtcEJhc2UgKyBNYXRoLmZsb29yKGtleWZyYW1lcy50aW1lc1tpXSAqIDEwMDApOwogICAgICAgICAgICB0aW1lcy5wdXNoKHRpbWUpOwogICAgICAgICAgICBmaWxlcG9zaXRpb25zLnB1c2goa2V5ZnJhbWVzLmZpbGVwb3NpdGlvbnNbaV0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdGltZXM6IHRpbWVzLAogICAgICAgICAgICBmaWxlcG9zaXRpb25zOiBmaWxlcG9zaXRpb25zCiAgICAgICAgfTsKICAgIH0KCiAgICBfcGFyc2VBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCB0YWdUaW1lc3RhbXApIHsKICAgICAgICBpZiAoZGF0YVNpemUgPD0gMSkgewogICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCBhdWRpbyBwYWNrZXQsIG1pc3NpbmcgU291bmREYXRhIHBheWxvYWQhJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLl9oYXNBdWRpb0ZsYWdPdmVycmlkZWQgPT09IHRydWUgJiYgdGhpcy5faGFzQXVkaW8gPT09IGZhbHNlKSB7CiAgICAgICAgICAgIC8vIElmIGhhc0F1ZGlvOiBmYWxzZSBpbmRpY2F0ZWQgZXhwbGljaXRseSBpbiBNZWRpYURhdGFTb3VyY2UsCiAgICAgICAgICAgIC8vIElnbm9yZSBhbGwgdGhlIGF1ZGlvIHBhY2tldHMKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuOwogICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CgogICAgICAgIGxldCBzb3VuZFNwZWMgPSB2LmdldFVpbnQ4KDApOwoKICAgICAgICBsZXQgc291bmRGb3JtYXQgPSBzb3VuZFNwZWMgPj4+IDQ7CiAgICAgICAgaWYgKHNvdW5kRm9ybWF0ICE9PSAyICYmIHNvdW5kRm9ybWF0ICE9PSAxMCkgeyAgLy8gTVAzIG9yIEFBQwogICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkNPREVDX1VOU1VQUE9SVEVELCAnRmx2OiBVbnN1cHBvcnRlZCBhdWRpbyBjb2RlYyBpZHg6ICcgKyBzb3VuZEZvcm1hdCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGxldCBzb3VuZFJhdGUgPSAwOwogICAgICAgIGxldCBzb3VuZFJhdGVJbmRleCA9IChzb3VuZFNwZWMgJiAxMikgPj4+IDI7CiAgICAgICAgaWYgKHNvdW5kUmF0ZUluZGV4ID49IDAgJiYgc291bmRSYXRlSW5kZXggPD0gNCkgewogICAgICAgICAgICBzb3VuZFJhdGUgPSB0aGlzLl9mbHZTb3VuZFJhdGVUYWJsZVtzb3VuZFJhdGVJbmRleF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgYXVkaW8gc2FtcGxlIHJhdGUgaWR4OiAnICsgc291bmRSYXRlSW5kZXgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxldCBzb3VuZFR5cGUgPSAoc291bmRTcGVjICYgMSk7CgoKICAgICAgICBsZXQgbWV0YSA9IHRoaXMuX2F1ZGlvTWV0YWRhdGE7CiAgICAgICAgbGV0IHRyYWNrID0gdGhpcy5fYXVkaW9UcmFjazsKCiAgICAgICAgaWYgKCFtZXRhKSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9oYXNBdWRpbyA9PT0gZmFsc2UgJiYgdGhpcy5faGFzQXVkaW9GbGFnT3ZlcnJpZGVkID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgdGhpcy5faGFzQXVkaW8gPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5fbWVkaWFJbmZvLmhhc0F1ZGlvID0gdHJ1ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gaW5pdGlhbCBtZXRhZGF0YQogICAgICAgICAgICBtZXRhID0gdGhpcy5fYXVkaW9NZXRhZGF0YSA9IHt9OwogICAgICAgICAgICBtZXRhLnR5cGUgPSAnYXVkaW8nOwogICAgICAgICAgICBtZXRhLmlkID0gdHJhY2suaWQ7CiAgICAgICAgICAgIG1ldGEudGltZXNjYWxlID0gdGhpcy5fdGltZXNjYWxlOwogICAgICAgICAgICBtZXRhLmR1cmF0aW9uID0gdGhpcy5fZHVyYXRpb247CiAgICAgICAgICAgIG1ldGEuYXVkaW9TYW1wbGVSYXRlID0gc291bmRSYXRlOwogICAgICAgICAgICBtZXRhLmNoYW5uZWxDb3VudCA9IChzb3VuZFR5cGUgPT09IDAgPyAxIDogMik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc291bmRGb3JtYXQgPT09IDEwKSB7ICAvLyBBQUMKICAgICAgICAgICAgbGV0IGFhY0RhdGEgPSB0aGlzLl9wYXJzZUFBQ0F1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSk7CgogICAgICAgICAgICBpZiAoYWFjRGF0YSA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGFhY0RhdGEucGFja2V0VHlwZSA9PT0gMCkgeyAgLy8gQUFDIHNlcXVlbmNlIGhlYWRlciAoQXVkaW9TcGVjaWZpY0NvbmZpZykKICAgICAgICAgICAgICAgIGlmIChtZXRhLmNvbmZpZykgewogICAgICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBBdWRpb1NwZWNpZmljQ29uZmlnIScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IG1pc2MgPSBhYWNEYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSA9IG1pc2Muc2FtcGxpbmdSYXRlOwogICAgICAgICAgICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSBtaXNjLmNoYW5uZWxDb3VudDsKICAgICAgICAgICAgICAgIG1ldGEuY29kZWMgPSBtaXNjLmNvZGVjOwogICAgICAgICAgICAgICAgbWV0YS5vcmlnaW5hbENvZGVjID0gbWlzYy5vcmlnaW5hbENvZGVjOwogICAgICAgICAgICAgICAgbWV0YS5jb25maWcgPSBtaXNjLmNvbmZpZzsKICAgICAgICAgICAgICAgIC8vIGFkZGVkIGJ5IHFsaTUKICAgICAgICAgICAgICAgIG1ldGEuY29uZmlnUmF3ID0gbWlzYy5jb25maWdSYXc7CiAgICAgICAgICAgICAgICAvLyBhZGRlZCBieSBYbWFkZXIKICAgICAgICAgICAgICAgIG1ldGEuYXVkaW9PYmplY3RUeXBlID0gbWlzYy5hdWRpb09iamVjdFR5cGU7CiAgICAgICAgICAgICAgICBtZXRhLnNhbXBsaW5nRnJlcXVlbmN5SW5kZXggPSBtaXNjLnNhbXBsaW5nSW5kZXg7CiAgICAgICAgICAgICAgICBtZXRhLmNoYW5uZWxDb25maWcgPSBtaXNjLmNoYW5uZWxDb3VudDsKICAgICAgICAgICAgICAgIC8vIFRoZSBkZWNvZGUgcmVzdWx0IG9mIGFuIGFhYyBzYW1wbGUgaXMgMTAyNCBQQ00gc2FtcGxlcwogICAgICAgICAgICAgICAgbWV0YS5yZWZTYW1wbGVEdXJhdGlvbiA9IDEwMjQgLyBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSAqIG1ldGEudGltZXNjYWxlOwogICAgICAgICAgICAgICAgTG9nLnYodGhpcy5UQUcsICdQYXJzZWQgQXVkaW9TcGVjaWZpY0NvbmZpZycpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxNZXRhZGF0YURpc3BhdGNoZWQoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIE5vbi1pbml0aWFsIG1ldGFkYXRhLCBmb3JjZSBkaXNwYXRjaCAob3IgZmx1c2gpIHBhcnNlZCBmcmFtZXMgdG8gcmVtdXhlcgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXNwYXRjaCAmJiAodGhpcy5fYXVkaW9UcmFjay5sZW5ndGggfHwgdGhpcy5fdmlkZW9UcmFjay5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRGF0YUF2YWlsYWJsZSh0aGlzLl9hdWRpb1RyYWNrLCB0aGlzLl92aWRlb1RyYWNrKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyB0aGVuIG5vdGlmeSBuZXcgbWV0YWRhdGEKICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEoJ2F1ZGlvJywgbWV0YSk7CgogICAgICAgICAgICAgICAgbGV0IG1pID0gdGhpcy5fbWVkaWFJbmZvOwogICAgICAgICAgICAgICAgbWkuYXVkaW9Db2RlYyA9IG1ldGEub3JpZ2luYWxDb2RlYzsKICAgICAgICAgICAgICAgIG1pLmF1ZGlvU2FtcGxlUmF0ZSA9IG1ldGEuYXVkaW9TYW1wbGVSYXRlOwogICAgICAgICAgICAgICAgbWkuYXVkaW9DaGFubmVsQ291bnQgPSBtZXRhLmNoYW5uZWxDb3VudDsKICAgICAgICAgICAgICAgIGlmIChtaS5oYXNWaWRlbykgewogICAgICAgICAgICAgICAgICAgIGlmIChtaS52aWRlb0NvZGVjICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz0iJyArIG1pLnZpZGVvQ29kZWMgKyAnLCcgKyBtaS5hdWRpb0NvZGVjICsgJyInOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWkubWltZVR5cGUgPSAndmlkZW8veC1mbHY7IGNvZGVjcz0iJyArIG1pLmF1ZGlvQ29kZWMgKyAnIic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobWkuaXNDb21wbGV0ZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25NZWRpYUluZm8obWkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGFhY0RhdGEucGFja2V0VHlwZSA9PT0gMSkgeyAgLy8gQUFDIHJhdyBmcmFtZSBkYXRhCiAgICAgICAgICAgICAgICBsZXQgZHRzID0gdGhpcy5fdGltZXN0YW1wQmFzZSArIHRhZ1RpbWVzdGFtcDsKICAgICAgICAgICAgICAgIGxldCBhYWNTYW1wbGUgPSB7IHVuaXQ6IGFhY0RhdGEuZGF0YSwgbGVuZ3RoOiBhYWNEYXRhLmRhdGEuYnl0ZUxlbmd0aCwgZHRzOiBkdHMsIHB0czogZHRzIH07CiAgICAgICAgICAgICAgICB0cmFjay5zYW1wbGVzLnB1c2goYWFjU2FtcGxlKTsKICAgICAgICAgICAgICAgIHRyYWNrLmxlbmd0aCArPSBhYWNEYXRhLmRhdGEubGVuZ3RoOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgTG9nLmUodGhpcy5UQUcsIGBGbHY6IFVuc3VwcG9ydGVkIEFBQyBkYXRhIHR5cGUgJHthYWNEYXRhLnBhY2tldFR5cGV9YCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHNvdW5kRm9ybWF0ID09PSAyKSB7ICAvLyBNUDMKICAgICAgICAgICAgaWYgKCFtZXRhLmNvZGVjKSB7CiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIG1ldGFkYXRhIGZvciBtcDMgYXVkaW8gdHJhY2ssIGV4dHJhY3QgaW5mbyBmcm9tIGZyYW1lIGhlYWRlcgogICAgICAgICAgICAgICAgbGV0IG1pc2MgPSB0aGlzLl9wYXJzZU1QM0F1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBpZiAobWlzYyA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBtZXRhLmF1ZGlvU2FtcGxlUmF0ZSA9IG1pc2Muc2FtcGxpbmdSYXRlOwogICAgICAgICAgICAgICAgbWV0YS5jaGFubmVsQ291bnQgPSBtaXNjLmNoYW5uZWxDb3VudDsKICAgICAgICAgICAgICAgIG1ldGEuY29kZWMgPSBtaXNjLmNvZGVjOwogICAgICAgICAgICAgICAgbWV0YS5vcmlnaW5hbENvZGVjID0gbWlzYy5vcmlnaW5hbENvZGVjOwogICAgICAgICAgICAgICAgLy8gVGhlIGRlY29kZSByZXN1bHQgb2YgYW4gbXAzIHNhbXBsZSBpcyAxMTUyIFBDTSBzYW1wbGVzCiAgICAgICAgICAgICAgICBtZXRhLnJlZlNhbXBsZUR1cmF0aW9uID0gMTE1MiAvIG1ldGEuYXVkaW9TYW1wbGVSYXRlICogbWV0YS50aW1lc2NhbGU7CiAgICAgICAgICAgICAgICBMb2cudih0aGlzLlRBRywgJ1BhcnNlZCBNUEVHIEF1ZGlvIEZyYW1lIEhlYWRlcicpOwoKICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvSW5pdGlhbE1ldGFkYXRhRGlzcGF0Y2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLl9vblRyYWNrTWV0YWRhdGEoJ2F1ZGlvJywgbWV0YSk7CgogICAgICAgICAgICAgICAgbGV0IG1pID0gdGhpcy5fbWVkaWFJbmZvOwogICAgICAgICAgICAgICAgbWkuYXVkaW9Db2RlYyA9IG1ldGEuY29kZWM7CiAgICAgICAgICAgICAgICBtaS5hdWRpb1NhbXBsZVJhdGUgPSBtZXRhLmF1ZGlvU2FtcGxlUmF0ZTsKICAgICAgICAgICAgICAgIG1pLmF1ZGlvQ2hhbm5lbENvdW50ID0gbWV0YS5jaGFubmVsQ291bnQ7CiAgICAgICAgICAgICAgICBtaS5hdWRpb0RhdGFSYXRlID0gbWlzYy5iaXRSYXRlOwogICAgICAgICAgICAgICAgaWYgKG1pLmhhc1ZpZGVvKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1pLnZpZGVvQ29kZWMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPSInICsgbWkudmlkZW9Db2RlYyArICcsJyArIG1pLmF1ZGlvQ29kZWMgKyAnIic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPSInICsgbWkuYXVkaW9Db2RlYyArICciJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChtaS5pc0NvbXBsZXRlKCkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyhtaSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFRoaXMgcGFja2V0IGlzIGFsd2F5cyBhIHZhbGlkIGF1ZGlvIHBhY2tldCwgZXh0cmFjdCBpdAogICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuX3BhcnNlTVAzQXVkaW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgMSwgZGF0YVNpemUgLSAxLCBmYWxzZSk7CiAgICAgICAgICAgIGlmIChkYXRhID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBkdHMgPSB0aGlzLl90aW1lc3RhbXBCYXNlICsgdGFnVGltZXN0YW1wOwogICAgICAgICAgICBsZXQgbXAzU2FtcGxlID0geyB1bml0OiBkYXRhLCBsZW5ndGg6IGRhdGEuYnl0ZUxlbmd0aCwgZHRzOiBkdHMsIHB0czogZHRzIH07CiAgICAgICAgICAgIHRyYWNrLnNhbXBsZXMucHVzaChtcDNTYW1wbGUpOwogICAgICAgICAgICB0cmFjay5sZW5ndGggKz0gZGF0YS5sZW5ndGg7CiAgICAgICAgfQogICAgfQoKICAgIF9wYXJzZUFBQ0F1ZGlvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpIHsKICAgICAgICBpZiAoZGF0YVNpemUgPD0gMSkgewogICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCBBQUMgcGFja2V0LCBtaXNzaW5nIEFBQ1BhY2tldFR5cGUgb3IvYW5kIERhdGEhJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGxldCByZXN1bHQgPSB7fTsKICAgICAgICBsZXQgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpOwoKICAgICAgICByZXN1bHQucGFja2V0VHlwZSA9IGFycmF5WzBdOwoKICAgICAgICBpZiAoYXJyYXlbMF0gPT09IDApIHsKICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSB0aGlzLl9wYXJzZUFBQ0F1ZGlvU3BlY2lmaWNDb25maWcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyAxLCBkYXRhU2l6ZSAtIDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gYXJyYXkuc3ViYXJyYXkoMSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIF9wYXJzZUFBQ0F1ZGlvU3BlY2lmaWNDb25maWcoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKSB7CiAgICAgICAgbGV0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplKTsKICAgICAgICBsZXQgY29uZmlnID0gbnVsbDsKCiAgICAgICAgLyogQXVkaW8gT2JqZWN0IFR5cGU6CiAgICAgICAgICAgMDogTnVsbAogICAgICAgICAgIDE6IEFBQyBNYWluCiAgICAgICAgICAgMjogQUFDIExDCiAgICAgICAgICAgMzogQUFDIFNTUiAoU2NhbGFibGUgU2FtcGxlIFJhdGUpCiAgICAgICAgICAgNDogQUFDIExUUCAoTG9uZyBUZXJtIFByZWRpY3Rpb24pCiAgICAgICAgICAgNTogSEUtQUFDIC8gU0JSIChTcGVjdHJhbCBCYW5kIFJlcGxpY2F0aW9uKQogICAgICAgICAgIDY6IEFBQyBTY2FsYWJsZQogICAgICAgICovCgogICAgICAgIGxldCBhdWRpb09iamVjdFR5cGUgPSAwOwogICAgICAgIGxldCBvcmlnaW5hbEF1ZGlvT2JqZWN0VHlwZSA9IDA7CiAgICAgICAgbGV0IHNhbXBsaW5nSW5kZXggPSAwOwogICAgICAgIGxldCBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gbnVsbDsKCiAgICAgICAgLy8gNSBiaXRzCiAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gb3JpZ2luYWxBdWRpb09iamVjdFR5cGUgPSBhcnJheVswXSA+Pj4gMzsKICAgICAgICAvLyA0IGJpdHMKICAgICAgICBzYW1wbGluZ0luZGV4ID0gKChhcnJheVswXSAmIDB4MDcpIDw8IDEpIHwgKGFycmF5WzFdID4+PiA3KTsKICAgICAgICBpZiAoc2FtcGxpbmdJbmRleCA8IDAgfHwgc2FtcGxpbmdJbmRleCA+PSB0aGlzLl9tcGVnU2FtcGxpbmdSYXRlcy5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEFBQyBpbnZhbGlkIHNhbXBsaW5nIGZyZXF1ZW5jeSBpbmRleCEnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgbGV0IHNhbXBsaW5nRnJlcXVlbmNlID0gdGhpcy5fbXBlZ1NhbXBsaW5nUmF0ZXNbc2FtcGxpbmdJbmRleF07CgogICAgICAgIC8vIDQgYml0cwogICAgICAgIGxldCBjaGFubmVsQ29uZmlnID0gKGFycmF5WzFdICYgMHg3OCkgPj4+IDM7CiAgICAgICAgaWYgKGNoYW5uZWxDb25maWcgPCAwIHx8IGNoYW5uZWxDb25maWcgPj0gOCkgewogICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgJ0ZsdjogQUFDIGludmFsaWQgY2hhbm5lbCBjb25maWd1cmF0aW9uJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChhdWRpb09iamVjdFR5cGUgPT09IDUpIHsgIC8vIEhFLUFBQz8KICAgICAgICAgICAgLy8gNCBiaXRzCiAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSAoKGFycmF5WzFdICYgMHgwNykgPDwgMSkgfCAoYXJyYXlbMl0gPj4+IDcpOwogICAgICAgIH0KCiAgICAgICAgLy8gd29ya2Fyb3VuZHMgZm9yIHZhcmlvdXMgYnJvd3NlcnMKICAgICAgICBsZXQgdXNlckFnZW50ID0gX25hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xKSB7CiAgICAgICAgICAgIC8vIGZpcmVmb3g6IHVzZSBTQlIgKEhFLUFBQykgaWYgZnJlcSBsZXNzIHRoYW4gMjRrSHoKICAgICAgICAgICAgaWYgKHNhbXBsaW5nSW5kZXggPj0gNikgewogICAgICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gNTsKICAgICAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSg0KTsKICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4IC0gMzsKICAgICAgICAgICAgfSBlbHNlIHsgIC8vIHVzZSBMQy1BQUMKICAgICAgICAgICAgICAgIGF1ZGlvT2JqZWN0VHlwZSA9IDI7CiAgICAgICAgICAgICAgICBjb25maWcgPSBuZXcgQXJyYXkoMik7CiAgICAgICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodXNlckFnZW50LmluZGV4T2YoJ2FuZHJvaWQnKSAhPT0gLTEpIHsKICAgICAgICAgICAgLy8gYW5kcm9pZDogYWx3YXlzIHVzZSBMQy1BQUMKICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjsKICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDIpOwogICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBmb3Igb3RoZXIgYnJvd3NlcnMsIGUuZy4gY2hyb21lLi4uCiAgICAgICAgICAgIC8vIEFsd2F5cyB1c2UgSEUtQUFDIHRvIG1ha2UgaXQgZWFzaWVyIHRvIHN3aXRjaCBhYWMgY29kZWMgcHJvZmlsZQogICAgICAgICAgICBhdWRpb09iamVjdFR5cGUgPSA1OwogICAgICAgICAgICBleHRlbnNpb25TYW1wbGluZ0luZGV4ID0gc2FtcGxpbmdJbmRleDsKICAgICAgICAgICAgY29uZmlnID0gbmV3IEFycmF5KDQpOwoKICAgICAgICAgICAgaWYgKHNhbXBsaW5nSW5kZXggPj0gNikgewogICAgICAgICAgICAgICAgZXh0ZW5zaW9uU2FtcGxpbmdJbmRleCA9IHNhbXBsaW5nSW5kZXggLSAzOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNoYW5uZWxDb25maWcgPT09IDEpIHsgIC8vIE1vbm8gY2hhbm5lbAogICAgICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlID0gMjsKICAgICAgICAgICAgICAgIGNvbmZpZyA9IG5ldyBBcnJheSgyKTsKICAgICAgICAgICAgICAgIGV4dGVuc2lvblNhbXBsaW5nSW5kZXggPSBzYW1wbGluZ0luZGV4OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25maWdbMF0gPSBhdWRpb09iamVjdFR5cGUgPDwgMzsKICAgICAgICBjb25maWdbMF0gfD0gKHNhbXBsaW5nSW5kZXggJiAweDBGKSA+Pj4gMTsKICAgICAgICBjb25maWdbMV0gPSAoc2FtcGxpbmdJbmRleCAmIDB4MEYpIDw8IDc7CiAgICAgICAgY29uZmlnWzFdIHw9IChjaGFubmVsQ29uZmlnICYgMHgwRikgPDwgMzsKICAgICAgICBpZiAoYXVkaW9PYmplY3RUeXBlID09PSA1KSB7CiAgICAgICAgICAgIGNvbmZpZ1sxXSB8PSAoKGV4dGVuc2lvblNhbXBsaW5nSW5kZXggJiAweDBGKSA+Pj4gMSk7CiAgICAgICAgICAgIGNvbmZpZ1syXSA9IChleHRlbnNpb25TYW1wbGluZ0luZGV4ICYgMHgwMSkgPDwgNzsKICAgICAgICAgICAgLy8gZXh0ZW5kZWQgYXVkaW8gb2JqZWN0IHR5cGU6IGZvcmNlIHRvIDIgKExDLUFBQykKICAgICAgICAgICAgY29uZmlnWzJdIHw9ICgyIDw8IDIpOwogICAgICAgICAgICBjb25maWdbM10gPSAwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYXVkaW9PYmplY3RUeXBlLCAgLy8gYXVkaW9fb2JqZWN0X3R5cGUsICAgICAgICBhZGRlZCBieSBYbWFkZXIKICAgICAgICAgICAgc2FtcGxpbmdJbmRleCwgICAgLy8gc2FtcGxpbmdfZnJlcXVlbmN5X2luZGV4LCBhZGRlZCBieSBYbWFkZXIKICAgICAgICAgICAgY29uZmlnUmF3OiBhcnJheSwgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZCBieSBxbGk1CiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLAogICAgICAgICAgICBzYW1wbGluZ1JhdGU6IHNhbXBsaW5nRnJlcXVlbmNlLAogICAgICAgICAgICBjaGFubmVsQ291bnQ6IGNoYW5uZWxDb25maWcsICAvLyBjaGFubmVsX2NvbmZpZwogICAgICAgICAgICBjb2RlYzogJ21wNGEuNDAuJyArIGF1ZGlvT2JqZWN0VHlwZSwKICAgICAgICAgICAgb3JpZ2luYWxDb2RlYzogJ21wNGEuNDAuJyArIG9yaWdpbmFsQXVkaW9PYmplY3RUeXBlCiAgICAgICAgfTsKICAgIH0KCiAgICBfcGFyc2VNUDNBdWRpb0RhdGEoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQsIGRhdGFTaXplLCByZXF1ZXN0SGVhZGVyKSB7CiAgICAgICAgaWYgKGRhdGFTaXplIDwgNCkgewogICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgJ0ZsdjogSW52YWxpZCBNUDMgcGFja2V0LCBoZWFkZXIgbWlzc2luZyEnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuOwogICAgICAgIGxldCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CiAgICAgICAgbGV0IHJlc3VsdCA9IG51bGw7CgogICAgICAgIGlmIChyZXF1ZXN0SGVhZGVyKSB7CiAgICAgICAgICAgIGlmIChhcnJheVswXSAhPT0gMHhGRikgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB2ZXIgPSAoYXJyYXlbMV0gPj4+IDMpICYgMHgwMzsKICAgICAgICAgICAgbGV0IGxheWVyID0gKGFycmF5WzFdICYgMHgwNikgPj4gMTsKCiAgICAgICAgICAgIGxldCBiaXRyYXRlX2luZGV4ID0gKGFycmF5WzJdICYgMHhGMCkgPj4+IDQ7CiAgICAgICAgICAgIGxldCBzYW1wbGluZ19mcmVxX2luZGV4ID0gKGFycmF5WzJdICYgMHgwQykgPj4+IDI7CgogICAgICAgICAgICBsZXQgY2hhbm5lbF9tb2RlID0gKGFycmF5WzNdID4+PiA2KSAmIDB4MDM7CiAgICAgICAgICAgIGxldCBjaGFubmVsX2NvdW50ID0gY2hhbm5lbF9tb2RlICE9PSAzID8gMiA6IDE7CgogICAgICAgICAgICBsZXQgc2FtcGxlX3JhdGUgPSAwOwogICAgICAgICAgICBsZXQgYml0X3JhdGUgPSAwOwoKICAgICAgICAgICAgbGV0IGNvZGVjID0gJ21wMyc7CgogICAgICAgICAgICBzd2l0Y2ggKHZlcikgewogICAgICAgICAgICAgICAgY2FzZSAwOiAgLy8gTVBFRyAyLjUKICAgICAgICAgICAgICAgICAgICBzYW1wbGVfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb1YyNVNhbXBsZVJhdGVUYWJsZVtzYW1wbGluZ19mcmVxX2luZGV4XTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjogIC8vIE1QRUcgMgogICAgICAgICAgICAgICAgICAgIHNhbXBsZV9yYXRlID0gdGhpcy5fbXBlZ0F1ZGlvVjIwU2FtcGxlUmF0ZVRhYmxlW3NhbXBsaW5nX2ZyZXFfaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOiAgLy8gTVBFRyAxCiAgICAgICAgICAgICAgICAgICAgc2FtcGxlX3JhdGUgPSB0aGlzLl9tcGVnQXVkaW9WMTBTYW1wbGVSYXRlVGFibGVbc2FtcGxpbmdfZnJlcV9pbmRleF07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN3aXRjaCAobGF5ZXIpIHsKICAgICAgICAgICAgICAgIGNhc2UgMTogIC8vIExheWVyIDMKICAgICAgICAgICAgICAgICAgICBpZiAoYml0cmF0ZV9pbmRleCA8IHRoaXMuX21wZWdBdWRpb0wzQml0UmF0ZVRhYmxlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBiaXRfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb0wzQml0UmF0ZVRhYmxlW2JpdHJhdGVfaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjogIC8vIExheWVyIDIKICAgICAgICAgICAgICAgICAgICBpZiAoYml0cmF0ZV9pbmRleCA8IHRoaXMuX21wZWdBdWRpb0wyQml0UmF0ZVRhYmxlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBiaXRfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb0wyQml0UmF0ZVRhYmxlW2JpdHJhdGVfaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMzogIC8vIExheWVyIDEKICAgICAgICAgICAgICAgICAgICBpZiAoYml0cmF0ZV9pbmRleCA8IHRoaXMuX21wZWdBdWRpb0wxQml0UmF0ZVRhYmxlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBiaXRfcmF0ZSA9IHRoaXMuX21wZWdBdWRpb0wxQml0UmF0ZVRhYmxlW2JpdHJhdGVfaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmVzdWx0ID0gewogICAgICAgICAgICAgICAgYml0UmF0ZTogYml0X3JhdGUsCiAgICAgICAgICAgICAgICBzYW1wbGluZ1JhdGU6IHNhbXBsZV9yYXRlLAogICAgICAgICAgICAgICAgY2hhbm5lbENvdW50OiBjaGFubmVsX2NvdW50LAogICAgICAgICAgICAgICAgY29kZWM6IGNvZGVjLAogICAgICAgICAgICAgICAgb3JpZ2luYWxDb2RlYzogY29kZWMKICAgICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXN1bHQgPSBhcnJheTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgX3BhcnNlVmlkZW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbikgewogICAgICAgIGlmIChkYXRhU2l6ZSA8PSAxKSB7CiAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRmx2OiBJbnZhbGlkIHZpZGVvIHBhY2tldCwgbWlzc2luZyBWaWRlb0RhdGEgcGF5bG9hZCEnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuX2hhc1ZpZGVvRmxhZ092ZXJyaWRlZCA9PT0gdHJ1ZSAmJiB0aGlzLl9oYXNWaWRlbyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgLy8gSWYgaGFzVmlkZW86IGZhbHNlIGluZGljYXRlZCBleHBsaWNpdGx5IGluIE1lZGlhRGF0YVNvdXJjZSwKICAgICAgICAgICAgLy8gSWdub3JlIGFsbCB0aGUgdmlkZW8gcGFja2V0cwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBsZXQgc3BlYyA9IChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpKVswXTsKCiAgICAgICAgbGV0IGZyYW1lVHlwZSA9IChzcGVjICYgMjQwKSA+Pj4gNDsKICAgICAgICBsZXQgY29kZWNJZCA9IHNwZWMgJiAxNTsKCiAgICAgICAgaWYgKGNvZGVjSWQgIT09IDcpIHsKICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5DT0RFQ19VTlNVUFBPUlRFRCwgYEZsdjogVW5zdXBwb3J0ZWQgY29kZWMgaW4gdmlkZW8gZnJhbWU6ICR7Y29kZWNJZH1gKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fcGFyc2VBVkNWaWRlb1BhY2tldChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCArIDEsIGRhdGFTaXplIC0gMSwgdGFnVGltZXN0YW1wLCB0YWdQb3NpdGlvbiwgZnJhbWVUeXBlKTsKICAgIH0KCiAgICBfcGFyc2VBVkNWaWRlb1BhY2tldChhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSkgewogICAgICAgIGlmIChkYXRhU2l6ZSA8IDQpIHsKICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgQVZDIHBhY2tldCwgbWlzc2luZyBBVkNQYWNrZXRUeXBlIG9yL2FuZCBDb21wb3NpdGlvblRpbWUnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuOwogICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CgogICAgICAgIGxldCBwYWNrZXRUeXBlID0gdi5nZXRVaW50OCgwKTsKICAgICAgICBsZXQgY3RzID0gdi5nZXRVaW50MzIoMCwgIWxlKSAmIDB4MDBGRkZGRkY7CgogICAgICAgIGlmIChwYWNrZXRUeXBlID09PSAwKSB7ICAvLyBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZAogICAgICAgICAgICB0aGlzLl9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgNCwgZGF0YVNpemUgLSA0KTsKICAgICAgICB9IGVsc2UgaWYgKHBhY2tldFR5cGUgPT09IDEpIHsgIC8vIE9uZSBvciBtb3JlIE5hbHVzCiAgICAgICAgICAgIHRoaXMuX3BhcnNlQVZDVmlkZW9EYXRhKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgNCwgZGF0YVNpemUgLSA0LCB0YWdUaW1lc3RhbXAsIHRhZ1Bvc2l0aW9uLCBmcmFtZVR5cGUsIGN0cyk7CiAgICAgICAgfSBlbHNlIGlmIChwYWNrZXRUeXBlID09PSAyKSB7CiAgICAgICAgICAgIC8vIGVtcHR5LCBBVkMgZW5kIG9mIHNlcXVlbmNlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsIGBGbHY6IEludmFsaWQgdmlkZW8gcGFja2V0IHR5cGUgJHtwYWNrZXRUeXBlfWApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQoKICAgIF9wYXJzZUFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSkgewogICAgICAgIGlmIChkYXRhU2l6ZSA8IDcpIHsKICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQsIGxhY2sgb2YgZGF0YSEnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgbGV0IG1ldGEgPSB0aGlzLl92aWRlb01ldGFkYXRhOwogICAgICAgIGxldCB0cmFjayA9IHRoaXMuX3ZpZGVvVHJhY2s7CiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuOwogICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CgogICAgICAgIGlmICghbWV0YSkgewogICAgICAgICAgICBpZiAodGhpcy5faGFzVmlkZW8gPT09IGZhbHNlICYmIHRoaXMuX2hhc1ZpZGVvRmxhZ092ZXJyaWRlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHRoaXMuX2hhc1ZpZGVvID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuX21lZGlhSW5mby5oYXNWaWRlbyA9IHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1ldGEgPSB0aGlzLl92aWRlb01ldGFkYXRhID0ge307CiAgICAgICAgICAgIG1ldGEudHlwZSA9ICd2aWRlbyc7CiAgICAgICAgICAgIG1ldGEuaWQgPSB0cmFjay5pZDsKICAgICAgICAgICAgbWV0YS50aW1lc2NhbGUgPSB0aGlzLl90aW1lc2NhbGU7CiAgICAgICAgICAgIG1ldGEuZHVyYXRpb24gPSB0aGlzLl9kdXJhdGlvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAodHlwZW9mIG1ldGEuYXZjYyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCAnRm91bmQgYW5vdGhlciBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCEnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbGV0IHZlcnNpb24gPSB2LmdldFVpbnQ4KDApOyAgLy8gY29uZmlndXJhdGlvblZlcnNpb24KICAgICAgICBsZXQgYXZjUHJvZmlsZSA9IHYuZ2V0VWludDgoMSk7ICAvLyBhdmNQcm9maWxlSW5kaWNhdGlvbgogICAgICAgIGxldCBwcm9maWxlQ29tcGF0aWJpbGl0eSA9IHYuZ2V0VWludDgoMik7ICAvLyBwcm9maWxlX2NvbXBhdGliaWxpdHkKICAgICAgICBsZXQgYXZjTGV2ZWwgPSB2LmdldFVpbnQ4KDMpOyAgLy8gQVZDTGV2ZWxJbmRpY2F0aW9uCgogICAgICAgIGlmICh2ZXJzaW9uICE9PSAxIHx8IGF2Y1Byb2ZpbGUgPT09IDApIHsKICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQnKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fbmFsdUxlbmd0aFNpemUgPSAodi5nZXRVaW50OCg0KSAmIDMpICsgMTsgIC8vIGxlbmd0aFNpemVNaW51c09uZQogICAgICAgIGlmICh0aGlzLl9uYWx1TGVuZ3RoU2l6ZSAhPT0gMyAmJiB0aGlzLl9uYWx1TGVuZ3RoU2l6ZSAhPT0gNCkgeyAgLy8gaG9seSBzaGl0ISEhCiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoRGVtdXhFcnJvcnMuRk9STUFUX0VSUk9SLCBgRmx2OiBTdHJhbmdlIE5hbHVMZW5ndGhTaXplTWludXNPbmU6ICR7dGhpcy5fbmFsdUxlbmd0aFNpemUgLSAxfWApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBsZXQgc3BzQ291bnQgPSB2LmdldFVpbnQ4KDUpICYgMzE7ICAvLyBudW1PZlNlcXVlbmNlUGFyYW1ldGVyU2V0cwogICAgICAgIGlmIChzcHNDb3VudCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLl9vbkVycm9yKERlbXV4RXJyb3JzLkZPUk1BVF9FUlJPUiwgJ0ZsdjogSW52YWxpZCBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZDogTm8gU1BTJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKHNwc0NvdW50ID4gMSkgewogICAgICAgICAgICBMb2cudyh0aGlzLlRBRywgYEZsdjogU3RyYW5nZSBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZDogU1BTIENvdW50ID0gJHtzcHNDb3VudH1gKTsKICAgICAgICB9CgogICAgICAgIGxldCBvZmZzZXQgPSA2OwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwc0NvdW50OyBpKyspIHsKICAgICAgICAgICAgbGV0IGxlbiA9IHYuZ2V0VWludDE2KG9mZnNldCwgIWxlKTsgIC8vIHNlcXVlbmNlUGFyYW1ldGVyU2V0TGVuZ3RoCiAgICAgICAgICAgIG9mZnNldCArPSAyOwoKICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIE5vdGljZTogTmFsdSB3aXRob3V0IHN0YXJ0Y29kZSBoZWFkZXIgKDAwIDAwIDAwIDAxKQogICAgICAgICAgICBsZXQgc3BzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIsIGRhdGFPZmZzZXQgKyBvZmZzZXQsIGxlbik7CiAgICAgICAgICAgIG9mZnNldCArPSBsZW47CgogICAgICAgICAgICBsZXQgY29uZmlnID0gU1BTUGFyc2VyLnBhcnNlU1BTKHNwcyk7CiAgICAgICAgICAgIGlmIChpICE9PSAwKSB7CiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgb3RoZXIgc3BzJ3MgY29uZmlnCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWV0YS5jb2RlY1dpZHRoID0gY29uZmlnLmNvZGVjX3NpemUud2lkdGg7CiAgICAgICAgICAgIG1ldGEuY29kZWNIZWlnaHQgPSBjb25maWcuY29kZWNfc2l6ZS5oZWlnaHQ7CiAgICAgICAgICAgIG1ldGEucHJlc2VudFdpZHRoID0gY29uZmlnLnByZXNlbnRfc2l6ZS53aWR0aDsKICAgICAgICAgICAgbWV0YS5wcmVzZW50SGVpZ2h0ID0gY29uZmlnLnByZXNlbnRfc2l6ZS5oZWlnaHQ7CgogICAgICAgICAgICBtZXRhLnByb2ZpbGUgPSBjb25maWcucHJvZmlsZV9zdHJpbmc7CiAgICAgICAgICAgIG1ldGEubGV2ZWwgPSBjb25maWcubGV2ZWxfc3RyaW5nOwogICAgICAgICAgICBtZXRhLmJpdERlcHRoID0gY29uZmlnLmJpdF9kZXB0aDsKICAgICAgICAgICAgbWV0YS5jaHJvbWFGb3JtYXQgPSBjb25maWcuY2hyb21hX2Zvcm1hdDsKICAgICAgICAgICAgbWV0YS5zYXJSYXRpbyA9IGNvbmZpZy5zYXJfcmF0aW87CiAgICAgICAgICAgIG1ldGEuZnJhbWVSYXRlID0gY29uZmlnLmZyYW1lX3JhdGU7CgogICAgICAgICAgICBpZiAoY29uZmlnLmZyYW1lX3JhdGUuZml4ZWQgPT09IGZhbHNlIHx8CiAgICAgICAgICAgICAgICBjb25maWcuZnJhbWVfcmF0ZS5mcHNfbnVtID09PSAwIHx8CiAgICAgICAgICAgICAgICBjb25maWcuZnJhbWVfcmF0ZS5mcHNfZGVuID09PSAwKSB7CiAgICAgICAgICAgICAgICBtZXRhLmZyYW1lUmF0ZSA9IHRoaXMuX3JlZmVyZW5jZUZyYW1lUmF0ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGZwc19kZW4gPSBtZXRhLmZyYW1lUmF0ZS5mcHNfZGVuOwogICAgICAgICAgICBsZXQgZnBzX251bSA9IG1ldGEuZnJhbWVSYXRlLmZwc19udW07CiAgICAgICAgICAgIG1ldGEucmVmU2FtcGxlRHVyYXRpb24gPSBtZXRhLnRpbWVzY2FsZSAqIChmcHNfZGVuIC8gZnBzX251bSk7CgogICAgICAgICAgICBsZXQgY29kZWNBcnJheSA9IHNwcy5zdWJhcnJheSgxLCA0KTsKICAgICAgICAgICAgbGV0IGNvZGVjU3RyaW5nID0gJ2F2YzEuJzsKICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgICAgICAgIGxldCBoID0gY29kZWNBcnJheVtqXS50b1N0cmluZygxNik7CiAgICAgICAgICAgICAgICBpZiAoaC5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICAgICAgaCA9ICcwJyArIGg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb2RlY1N0cmluZyArPSBoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG1ldGEuY29kZWMgPSBjb2RlY1N0cmluZzsKCiAgICAgICAgICAgIGxldCBtaSA9IHRoaXMuX21lZGlhSW5mbzsKICAgICAgICAgICAgbWkud2lkdGggPSBtZXRhLmNvZGVjV2lkdGg7CiAgICAgICAgICAgIG1pLmhlaWdodCA9IG1ldGEuY29kZWNIZWlnaHQ7CiAgICAgICAgICAgIG1pLmZwcyA9IG1ldGEuZnJhbWVSYXRlLmZwczsKICAgICAgICAgICAgbWkucHJvZmlsZSA9IG1ldGEucHJvZmlsZTsKICAgICAgICAgICAgbWkubGV2ZWwgPSBtZXRhLmxldmVsOwogICAgICAgICAgICBtaS5jaHJvbWFGb3JtYXQgPSBjb25maWcuY2hyb21hX2Zvcm1hdF9zdHJpbmc7CiAgICAgICAgICAgIG1pLnNhck51bSA9IG1ldGEuc2FyUmF0aW8ud2lkdGg7CiAgICAgICAgICAgIG1pLnNhckRlbiA9IG1ldGEuc2FyUmF0aW8uaGVpZ2h0OwogICAgICAgICAgICBtaS52aWRlb0NvZGVjID0gY29kZWNTdHJpbmc7CgogICAgICAgICAgICBpZiAobWkuaGFzQXVkaW8pIHsKICAgICAgICAgICAgICAgIGlmIChtaS5hdWRpb0NvZGVjICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPSInICsgbWkudmlkZW9Db2RlYyArICcsJyArIG1pLmF1ZGlvQ29kZWMgKyAnIic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtaS5taW1lVHlwZSA9ICd2aWRlby94LWZsdjsgY29kZWNzPSInICsgbWkudmlkZW9Db2RlYyArICciJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobWkuaXNDb21wbGV0ZSgpKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9vbk1lZGlhSW5mbyhtaSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGxldCBwcHNDb3VudCA9IHYuZ2V0VWludDgob2Zmc2V0KTsgIC8vIG51bU9mUGljdHVyZVBhcmFtZXRlclNldHMKICAgICAgICBpZiAocHBzQ291bnQgPT09IDApIHsKICAgICAgICAgICAgdGhpcy5fb25FcnJvcihEZW11eEVycm9ycy5GT1JNQVRfRVJST1IsICdGbHY6IEludmFsaWQgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQ6IE5vIFBQUycpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmIChwcHNDb3VudCA+IDEpIHsKICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsIGBGbHY6IFN0cmFuZ2UgQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQ6IFBQUyBDb3VudCA9ICR7cHBzQ291bnR9YCk7CiAgICAgICAgfQoKICAgICAgICBvZmZzZXQrKzsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcHNDb3VudDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBsZW4gPSB2LmdldFVpbnQxNihvZmZzZXQsICFsZSk7ICAvLyBwaWN0dXJlUGFyYW1ldGVyU2V0TGVuZ3RoCiAgICAgICAgICAgIG9mZnNldCArPSAyOwoKICAgICAgICAgICAgaWYgKGxlbiA9PT0gMCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHBwcyBpcyB1c2VsZXNzIGZvciBleHRyYWN0aW5nIHZpZGVvIGluZm9ybWF0aW9uCiAgICAgICAgICAgIG9mZnNldCArPSBsZW47CiAgICAgICAgfQoKICAgICAgICBtZXRhLmF2Y2MgPSBuZXcgVWludDhBcnJheShkYXRhU2l6ZSk7CiAgICAgICAgbWV0YS5hdmNjLnNldChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUpLCAwKTsKICAgICAgICBMb2cudih0aGlzLlRBRywgJ1BhcnNlZCBBVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCcpOwoKICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkKCkpIHsKICAgICAgICAgICAgLy8gZmx1c2ggcGFyc2VkIGZyYW1lcwogICAgICAgICAgICBpZiAodGhpcy5fZGlzcGF0Y2ggJiYgKHRoaXMuX2F1ZGlvVHJhY2subGVuZ3RoIHx8IHRoaXMuX3ZpZGVvVHJhY2subGVuZ3RoKSkgewogICAgICAgICAgICAgICAgdGhpcy5fb25EYXRhQXZhaWxhYmxlKHRoaXMuX2F1ZGlvVHJhY2ssIHRoaXMuX3ZpZGVvVHJhY2spOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fdmlkZW9Jbml0aWFsTWV0YWRhdGFEaXNwYXRjaGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gbm90aWZ5IG5ldyBtZXRhZGF0YQogICAgICAgIHRoaXMuX2Rpc3BhdGNoID0gZmFsc2U7CiAgICAgICAgdGhpcy5fb25UcmFja01ldGFkYXRhKCd2aWRlbycsIG1ldGEpOwogICAgfQoKICAgIF9wYXJzZUFWQ1ZpZGVvRGF0YShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YVNpemUsIHRhZ1RpbWVzdGFtcCwgdGFnUG9zaXRpb24sIGZyYW1lVHlwZSwgY3RzKSB7CiAgICAgICAgbGV0IGxlID0gdGhpcy5fbGl0dGxlRW5kaWFuOwogICAgICAgIGxldCB2ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhU2l6ZSk7CgogICAgICAgIGxldCB1bml0cyA9IFtdLCBsZW5ndGggPSAwOwoKICAgICAgICBsZXQgb2Zmc2V0ID0gMDsKICAgICAgICBjb25zdCBsZW5ndGhTaXplID0gdGhpcy5fbmFsdUxlbmd0aFNpemU7CiAgICAgICAgbGV0IGR0cyA9IHRoaXMuX3RpbWVzdGFtcEJhc2UgKyB0YWdUaW1lc3RhbXA7CiAgICAgICAgbGV0IGtleWZyYW1lID0gKGZyYW1lVHlwZSA9PT0gMSk7ICAvLyBmcm9tIEZMViBGcmFtZSBUeXBlIGNvbnN0YW50cwogICAgICAgIGxldCByZWZJZGMgPSAxOyAvLyBhZGRlZCBieSBxbGk1CgogICAgICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhU2l6ZSkgewogICAgICAgICAgICBpZiAob2Zmc2V0ICsgNCA+PSBkYXRhU2l6ZSkgewogICAgICAgICAgICAgICAgTG9nLncodGhpcy5UQUcsIGBNYWxmb3JtZWQgTmFsdSBuZWFyIHRpbWVzdGFtcCAke2R0c30sIG9mZnNldCA9ICR7b2Zmc2V0fSwgZGF0YVNpemUgPSAke2RhdGFTaXplfWApOwogICAgICAgICAgICAgICAgYnJlYWs7ICAvLyBkYXRhIG5vdCBlbm91Z2ggZm9yIG5leHQgTmFsdQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIE5hbHUgd2l0aCBsZW5ndGgtaGVhZGVyIChBVkMxKQogICAgICAgICAgICBsZXQgbmFsdVNpemUgPSB2LmdldFVpbnQzMihvZmZzZXQsICFsZSk7ICAvLyBCaWctRW5kaWFuIHJlYWQKICAgICAgICAgICAgaWYgKGxlbmd0aFNpemUgPT09IDMpIHsKICAgICAgICAgICAgICAgIG5hbHVTaXplID4+Pj0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobmFsdVNpemUgPiBkYXRhU2l6ZSAtIGxlbmd0aFNpemUpIHsKICAgICAgICAgICAgICAgIExvZy53KHRoaXMuVEFHLCBgTWFsZm9ybWVkIE5hbHVzIG5lYXIgdGltZXN0YW1wICR7ZHRzfSwgTmFsdVNpemUgPiBEYXRhU2l6ZSFgKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IHVuaXRUeXBlID0gdi5nZXRVaW50OChvZmZzZXQgKyBsZW5ndGhTaXplKSAmIDB4MUY7CiAgICAgICAgICAgIC8vIGFkZGVkIGJ5IHFsaTUKICAgICAgICAgICAgcmVmSWRjID0gdi5nZXRVaW50OChvZmZzZXQgKyBsZW5ndGhTaXplKSAmIDB4NjA7CgogICAgICAgICAgICBpZiAodW5pdFR5cGUgPT09IDUpIHsgIC8vIElEUgogICAgICAgICAgICAgICAga2V5ZnJhbWUgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyLCBkYXRhT2Zmc2V0ICsgb2Zmc2V0LCBsZW5ndGhTaXplICsgbmFsdVNpemUpOwogICAgICAgICAgICBsZXQgdW5pdCA9IHsgdHlwZTogdW5pdFR5cGUsIGRhdGE6IGRhdGEgfTsKICAgICAgICAgICAgdW5pdHMucHVzaCh1bml0KTsKICAgICAgICAgICAgbGVuZ3RoICs9IGRhdGEuYnl0ZUxlbmd0aDsKCiAgICAgICAgICAgIG9mZnNldCArPSBsZW5ndGhTaXplICsgbmFsdVNpemU7CiAgICAgICAgfQoKICAgICAgICBpZiAodW5pdHMubGVuZ3RoKSB7CiAgICAgICAgICAgIGxldCB0cmFjayA9IHRoaXMuX3ZpZGVvVHJhY2s7CiAgICAgICAgICAgIGxldCBhdmNTYW1wbGUgPSB7CiAgICAgICAgICAgICAgICB1bml0czogdW5pdHMsCiAgICAgICAgICAgICAgICBsZW5ndGg6IGxlbmd0aCwKICAgICAgICAgICAgICAgIGlzS2V5ZnJhbWU6IGtleWZyYW1lLAogICAgICAgICAgICAgICAgcmVmSWRjOiByZWZJZGMsCiAgICAgICAgICAgICAgICBkdHM6IGR0cywKICAgICAgICAgICAgICAgIGN0czogY3RzLAogICAgICAgICAgICAgICAgcHRzOiAoZHRzICsgY3RzKQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoa2V5ZnJhbWUpIHsKICAgICAgICAgICAgICAgIGF2Y1NhbXBsZS5maWxlcG9zaXRpb24gPSB0YWdQb3NpdGlvbjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0cmFjay5zYW1wbGVzLnB1c2goYXZjU2FtcGxlKTsKICAgICAgICAgICAgdHJhY2subGVuZ3RoICs9IGxlbmd0aDsKICAgICAgICB9CiAgICB9Cgp9CgovKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFhtYWRlci4KICogQGF1dGhvciBYbWFkZXIKICovCgovKioKICog6K6h566XYWR0c+WktOmDqAogKiBAc2VlIGh0dHBzOi8vYmxvZy5qaWFuY2hpaHUubmV0L2Zsdi1hYWMtYWRkLWFkdHNoZWFkZXIuaHRtbAogKiBAdHlwZWRlZiB7T2JqZWN0fSBBZHRzSGVhZGVyc0luaXQKICogQHByb3BlcnR5IHtudW1iZXJ9IGF1ZGlvT2JqZWN0VHlwZQogKiBAcHJvcGVydHkge251bWJlcn0gc2FtcGxpbmdGcmVxdWVuY3lJbmRleAogKiBAcHJvcGVydHkge251bWJlcn0gY2hhbm5lbENvbmZpZwogKiBAcHJvcGVydHkge251bWJlcn0gYWR0c0xlbgogKiBAcGFyYW0ge0FkdHNIZWFkZXJzSW5pdH0gaW5pdCAKICovCmNvbnN0IGdldEFkdHNIZWFkZXJzID0gKGluaXQpID0+IHsKICAgIGNvbnN0IHsgYXVkaW9PYmplY3RUeXBlLCBzYW1wbGluZ0ZyZXF1ZW5jeUluZGV4LCBjaGFubmVsQ29uZmlnLCBhZHRzTGVuIH0gPSBpbml0OwogICAgY29uc3QgaGVhZGVycyA9IG5ldyBVaW50OEFycmF5KDcpOwoKICAgIGhlYWRlcnNbMF0gPSAweGZmOyAgICAgICAgIC8vIHN5bmN3b3JkOjB4ZmZmICAgICAgICAgICAgICAgICAgICAgICAgICAg6auYOGJpdHMKICAgIGhlYWRlcnNbMV0gPSAweGYwOyAgICAgICAgIC8vIHN5bmN3b3JkOjB4ZmZmICAgICAgICAgICAgICAgICAgICAgICAgICAg5L2ONGJpdHMKICAgIGhlYWRlcnNbMV0gfD0gKDAgPDwgMyk7ICAgIC8vIE1QRUcgVmVyc2lvbjowIGZvciBNUEVHLTQsMSBmb3IgTVBFRy0yICAgMWJpdAogICAgaGVhZGVyc1sxXSB8PSAoMCA8PCAxKTsgICAgLy8gTGF5ZXI6MCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyYml0cyAKICAgIGhlYWRlcnNbMV0gfD0gMTsgICAgICAgICAgIC8vIHByb3RlY3Rpb24gYWJzZW50OjEgICAgICAgICAgICAgICAgICAgICAgMWJpdAoKICAgIGhlYWRlcnNbMl0gPSAoYXVkaW9PYmplY3RUeXBlIC0gMSkgPDwgNjsgICAgICAgICAgICAvLyBwcm9maWxlOmF1ZGlvX29iamVjdF90eXBlIC0gMSAgICAgICAgICAgICAgICAgICAgICAyYml0cwogICAgaGVhZGVyc1syXSB8PSAoc2FtcGxpbmdGcmVxdWVuY3lJbmRleCAmIDB4MGYpIDw8IDI7IC8vIHNhbXBsaW5nIGZyZXF1ZW5jeSBpbmRleDpzYW1wbGluZ19mcmVxdWVuY3lfaW5kZXggIDRiaXRzIAogICAgaGVhZGVyc1syXSB8PSAoMCA8PCAxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaXZhdGUgYml0OjAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFiaXQKICAgIGhlYWRlcnNbMl0gfD0gKGNoYW5uZWxDb25maWcgJiAweDA0KSA+PiAyOyAgICAgICAgICAvLyBjaGFubmVsIGNvbmZpZ3VyYXRpb246Y2hhbm5lbF9jb25maWcgICAgICAgICAgICAgICDpq5gxYml0CgogICAgaGVhZGVyc1szXSA9IChjaGFubmVsQ29uZmlnICYgMHgwMykgPDwgNjsgICAgLy8gY2hhbm5lbCBjb25maWd1cmF0aW9u77yaY2hhbm5lbF9jb25maWcgICAgIOS9jjJiaXRzCiAgICBoZWFkZXJzWzNdIHw9ICgwIDw8IDUpOyAgICAgICAgICAgICAgICAgICAgICAvLyBvcmlnaW5hbO+8mjAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMWJpdAogICAgaGVhZGVyc1szXSB8PSAoMCA8PCA0KTsgICAgICAgICAgICAgICAgICAgICAgLy8gaG9tZe+8mjAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDFiaXQKICAgIGhlYWRlcnNbM10gfD0gKDAgPDwgMyk7ICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHlyaWdodCBpZCBiaXTvvJowICAgICAgICAgICAgICAgICAgICAgICAxYml0ICAKICAgIGhlYWRlcnNbM10gfD0gKDAgPDwgMik7ICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHlyaWdodCBpZCBzdGFydO+8mjAgICAgICAgICAgICAgICAgICAgICAxYml0CgogICAgaGVhZGVyc1szXSB8PSAoYWR0c0xlbiAmIDB4MTgwMCkgPj4gMTE7ICAgICAgLy8gZnJhbWUgbGVuZ3Ro77yadmFsdWUgICAg6auYMmJpdHMKICAgIGhlYWRlcnNbNF0gPSAoYWR0c0xlbiAmIDB4N2Y4KSA+PiAzOyAgICAgICAgIC8vIGZyYW1lIGxlbmd0aO+8mnZhbHVlICAgIOS4remXtDhiaXRzIAogICAgaGVhZGVyc1s1XSA9IChhZHRzTGVuICYgMHg3KSA8PCA1OyAgICAgICAgICAgLy8gZnJhbWUgbGVuZ3Ro77yadmFsdWUgICAg5L2OM2JpdHMKICAgIGhlYWRlcnNbNV0gfD0gMHgxZjsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1ZmZlciBmdWxsbmVzc++8mjB4N2ZmIOmrmDViaXRzIAogICAgaGVhZGVyc1s2XSA9IDB4ZmM7CgogICAgcmV0dXJuIGhlYWRlcnMKfTsKCi8qKgogKiBDb3B5cmlnaHQgKEMpIDIwMTggWG1hZGVyLgogKiBAYXV0aG9yIFhtYWRlcgogKi8KCi8qKgogKiBEZW11eCBGTFYgaW50byBIMjY0ICsgQUFDIHN0cmVhbSBpbnRvIGxpbmUgc3RyZWFtIHRoZW4KICogcmVtdXggaXQgaW50byBhIEFBQyBmaWxlLgogKiBAcGFyYW0ge0Jsb2J8QnVmZmVyfEFycmF5QnVmZmVyfHN0cmluZ30gZmx2IAogKi8KY29uc3QgRkxWMkFBQyA9IGFzeW5jIChmbHYpID0+IHsKCiAgICAvLyBsb2FkIGZsdiBhcyBhcnJheWJ1ZmZlcgogICAgLyoqIEB0eXBlIHtBcnJheUJ1ZmZlcn0gKi8KICAgIGNvbnN0IGZsdkFycmF5QnVmZmVyID0gYXdhaXQgbmV3IFByb21pc2UoKHIsIGopID0+IHsKICAgICAgICBpZiAoKHR5cGVvZiBCbG9iICE9ICJ1bmRlZmluZWQiKSAmJiAoZmx2IGluc3RhbmNlb2YgQmxvYikpIHsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXlCdWZmZXJ9ICovCiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSByZWFkZXIucmVzdWx0OwogICAgICAgICAgICAgICAgcihyZXN1bHQpOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZWFkZXIub25lcnJvciA9IGo7CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmbHYpOwogICAgICAgIH0gZWxzZSBpZiAoKHR5cGVvZiBCdWZmZXIgIT0gInVuZGVmaW5lZCIpICYmIChmbHYgaW5zdGFuY2VvZiBCdWZmZXIpKSB7CiAgICAgICAgICAgIHIobmV3IFVpbnQ4QXJyYXkoZmx2KS5idWZmZXIpOwogICAgICAgIH0gZWxzZSBpZiAoZmx2IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICAgICAgcihmbHYpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGZsdiA9PSAnc3RyaW5nJykgewogICAgICAgICAgICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgcmVxLnJlc3BvbnNlVHlwZSA9ICJhcnJheWJ1ZmZlciI7CiAgICAgICAgICAgIHJlcS5vbmxvYWQgPSAoKSA9PiByKHJlcS5yZXNwb25zZSk7CiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gajsKICAgICAgICAgICAgcmVxLm9wZW4oJ2dldCcsIGZsdik7CiAgICAgICAgICAgIHJlcS5zZW5kKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaihuZXcgVHlwZUVycm9yKCJAdHlwZSB7QmxvYnxCdWZmZXJ8QXJyYXlCdWZmZXJ9IGZsdiIpKTsKICAgICAgICB9CiAgICB9KTsKCiAgICBjb25zdCBmbHZQcm9iZURhdGEgPSBGTFZEZW11eGVyLnByb2JlKGZsdkFycmF5QnVmZmVyKTsKICAgIGNvbnN0IGZsdkRlbXV4ZXIgPSBuZXcgRkxWRGVtdXhlcihmbHZQcm9iZURhdGEpOwoKICAgIC8vIOWPquino+aekOmfs+mikQogICAgZmx2RGVtdXhlci5vdmVycmlkZWRIYXNWaWRlbyA9IGZhbHNlOwoKICAgIC8qKgogICAgICogQHR5cGVkZWYge09iamVjdH0gU2FtcGxlCiAgICAgKiBAcHJvcGVydHkge1VpbnQ4QXJyYXl9IHVuaXQKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsZW5ndGgKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkdHMKICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwdHMKICAgICAqLwoKICAgIC8qKiBAdHlwZSB7eyB0eXBlOiAiYXVkaW8iOyBpZDogbnVtYmVyOyBzZXF1ZW5jZU51bWJlcjogbnVtYmVyOyBsZW5ndGg6IG51bWJlcjsgc2FtcGxlczogU2FtcGxlW107IH19ICovCiAgICBsZXQgYWFjID0gbnVsbDsKICAgIGxldCBtZXRhZGF0YSA9IG51bGw7CgogICAgZmx2RGVtdXhlci5vblRyYWNrTWV0YWRhdGEgPSAodHlwZSwgX21ldGFEYXRhKSA9PiB7CiAgICAgICAgaWYgKHR5cGUgPT0gImF1ZGlvIikgewogICAgICAgICAgICBtZXRhZGF0YSA9IF9tZXRhRGF0YTsKICAgICAgICB9CiAgICB9OwoKICAgIGZsdkRlbXV4ZXIub25NZWRpYUluZm8gPSAoKSA9PiB7IH07CgogICAgZmx2RGVtdXhlci5vbkVycm9yID0gKGUpID0+IHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZSkKICAgIH07CgogICAgZmx2RGVtdXhlci5vbkRhdGFBdmFpbGFibGUgPSAoLi4uYXJncykgPT4gewogICAgICAgIGFyZ3MuZm9yRWFjaChkYXRhID0+IHsKICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PSAiYXVkaW8iKSB7CiAgICAgICAgICAgICAgICBhYWMgPSBkYXRhOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9OwoKICAgIGNvbnN0IGZpbmFsT2Zmc2V0ID0gZmx2RGVtdXhlci5wYXJzZUNodW5rcyhmbHZBcnJheUJ1ZmZlciwgZmx2UHJvYmVEYXRhLmRhdGFPZmZzZXQpOwogICAgaWYgKGZpbmFsT2Zmc2V0ICE9IGZsdkFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkZMVkRlbXV4ZXI6IHVuZXhwZWN0ZWQgRU9GIikKICAgIH0KCiAgICBjb25zdCB7CiAgICAgICAgYXVkaW9PYmplY3RUeXBlLAogICAgICAgIHNhbXBsaW5nRnJlcXVlbmN5SW5kZXgsCiAgICAgICAgY2hhbm5lbENvdW50OiBjaGFubmVsQ29uZmlnCiAgICB9ID0gbWV0YWRhdGE7CgogICAgLyoqIEB0eXBlIHtudW1iZXJbXX0gKi8KICAgIGxldCBvdXRwdXQgPSBbXTsKCiAgICBhYWMuc2FtcGxlcy5mb3JFYWNoKChzYW1wbGUpID0+IHsKICAgICAgICBjb25zdCBoZWFkZXJzID0gZ2V0QWR0c0hlYWRlcnMoewogICAgICAgICAgICBhdWRpb09iamVjdFR5cGUsCiAgICAgICAgICAgIHNhbXBsaW5nRnJlcXVlbmN5SW5kZXgsCiAgICAgICAgICAgIGNoYW5uZWxDb25maWcsCiAgICAgICAgICAgIGFkdHNMZW46IHNhbXBsZS5sZW5ndGggKyA3CiAgICAgICAgfSk7CiAgICAgICAgb3V0cHV0LnB1c2goLi4uaGVhZGVycywgLi4uc2FtcGxlLnVuaXQpOwogICAgfSk7CgogICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KG91dHB1dCkKfTsKCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFhtYWRlci4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogCiAqIEBhdXRob3IgWG1hZGVyCiAqIAogKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljCiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXMKICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHA6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy4KKi8KCmNsYXNzIFdlYldvcmtlciBleHRlbmRzIFdvcmtlciB7CiAgICBjb25zdHJ1Y3RvcihzdHJpbmdVcmwpIHsKICAgICAgICBzdXBlcihzdHJpbmdVcmwpOwoKICAgICAgICB0aGlzLmltcG9ydEZuQXNBU2NyaXB0KFR3ZW50eUZvdXJEYXRhVmlldyk7CiAgICAgICAgdGhpcy5pbXBvcnRGbkFzQVNjcmlwdChGTFZUYWcpOwogICAgICAgIHRoaXMuaW1wb3J0Rm5Bc0FTY3JpcHQoRkxWKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgCiAgICAgKiBAcGFyYW0geyp9IGRhdGEgCiAgICAgKi8KICAgIGFzeW5jIGdldFJldHVyblZhbHVlKG1ldGhvZCwgZGF0YSkgewogICAgICAgIGNvbnN0IGNhbGxiYWNrTnVtID0gd2luZG93LmNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXTsKCiAgICAgICAgdGhpcy5wb3N0TWVzc2FnZShbCiAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgZGF0YSwKICAgICAgICAgICAgY2FsbGJhY2tOdW0KICAgICAgICBdKTsKCiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgKGUpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IFtfbWV0aG9kLCBpbmNvbWluZ0RhdGEsIF9jYWxsYmFja051bV0gPSBlLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoX2NhbGxiYWNrTnVtID09IGNhbGxiYWNrTnVtKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9tZXRob2QgPT0gbWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaW5jb21pbmdEYXRhKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9tZXRob2QgPT0gImVycm9yIikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGluY29taW5nRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoIldlYiBXb3JrZXIg5YaF6YOo6ZSZ6K+vIikpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgIH0KCiAgICBhc3luYyByZWdpc3RlckFsbE1ldGhvZHMoKSB7CiAgICAgICAgY29uc3QgbWV0aG9kcyA9IGF3YWl0IHRoaXMuZ2V0UmV0dXJuVmFsdWUoImdldEFsbE1ldGhvZHMiKTsKCiAgICAgICAgbWV0aG9kcy5mb3JFYWNoKG1ldGhvZCA9PiB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBtZXRob2QsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiAoYXJnKSA9PiB0aGlzLmdldFJldHVyblZhbHVlKG1ldGhvZCwgYXJnKQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7RnVuY3Rpb24gfCBDbGFzc0RlY29yYXRvcn0gYyAKICAgICAqLwogICAgaW1wb3J0Rm5Bc0FTY3JpcHQoYykgewogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYy50b1N0cmluZygpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcgfSk7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmV0dXJuVmFsdWUoImltcG9ydFNjcmlwdHMiLCBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKQogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHsoKSA9PiB2b2lkfSBmbiAKICAgICAqLwogICAgc3RhdGljIGZyb21BRnVuY3Rpb24oZm4pIHsKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoWycoJyArIGZuLnRvU3RyaW5nKCkgKyAnKSgpJ10sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnIH0pOwogICAgICAgIHJldHVybiBuZXcgV2ViV29ya2VyKFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikpCiAgICB9Cn0KCi8vIOeUqOS6juaJuemHj+S4i+i9veeahCBXZWIgV29ya2VyICwg6K+35bCG5Ye95pWw5Lit55qE5YaF5a655oOz6LGh5oiQ5LiA5Liq54us56uL55qEanPmlofku7YKY29uc3QgQmF0Y2hEb3dubG9hZFdvcmtlckZuID0gKCkgPT4gewoKICAgIGNsYXNzIEJhdGNoRG93bmxvYWRXb3JrZXIgewogICAgICAgIGFzeW5jIG1lcmdlRkxWRmlsZXMoZmlsZXMpIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IEZMVi5tZXJnZUJsb2JzKGZpbGVzKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIOW8leWFpeiEmuacrOS4juW6kwogICAgICAgICAqIEBwYXJhbSAge3N0cmluZ1tdfSBzY3JpcHRzIAogICAgICAgICAqLwogICAgICAgIGltcG9ydFNjcmlwdHMoLi4uc2NyaXB0cykgewogICAgICAgICAgICBpbXBvcnRTY3JpcHRzKC4uLnNjcmlwdHMpOwogICAgICAgIH0KCiAgICAgICAgZ2V0QWxsTWV0aG9kcygpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEJhdGNoRG93bmxvYWRXb3JrZXIucHJvdG90eXBlKS5zbGljZSgxLCAtMSkKICAgICAgICB9CiAgICB9CgogICAgY29uc3Qgd29ya2VyID0gbmV3IEJhdGNoRG93bmxvYWRXb3JrZXIoKTsKCiAgICBvbm1lc3NhZ2UgPSBhc3luYyAoZSkgPT4gewogICAgICAgIGNvbnN0IFttZXRob2QsIGluY29taW5nRGF0YSwgY2FsbGJhY2tOdW1dID0gZS5kYXRhOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXR1cm5WYWx1ZSA9IGF3YWl0IHdvcmtlclttZXRob2RdKGluY29taW5nRGF0YSk7CiAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZSkgewogICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoWwogICAgICAgICAgICAgICAgICAgIG1ldGhvZCwKICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSwKICAgICAgICAgICAgICAgICAgICBjYWxsYmFja051bQogICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHBvc3RNZXNzYWdlKFsKICAgICAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICAgICBlLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICBjYWxsYmFja051bQogICAgICAgICAgICBdKTsKICAgICAgICAgICAgdGhyb3cgZQogICAgICAgIH0KICAgIH07Cn07CgovLyBAdHMtY2hlY2sKCi8qKgogKiBAcGFyYW0ge251bWJlcn0gYWxwaGEgMH4yNTUKICovCmNvbnN0IGZvcm1hdENvbG9yQ2hhbm5lbCQxID0gKGFscGhhKSA9PiB7CiAgICByZXR1cm4gKGFscGhhICYgMjU1KS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCgyLCAnMCcpCn07CgovKioKICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgMCB+IDEgLT4gYWxwaGEgMCB+IDI1NQogKi8KY29uc3QgZm9ybWF0T3BhY2l0eSA9IChvcGFjaXR5KSA9PiB7CiAgICBjb25zdCBhbHBoYSA9IDB4RkYgKiAoMTAwIC0gK29wYWNpdHkgKiAxMDApIC8gMTAwOwogICAgcmV0dXJuIGZvcm1hdENvbG9yQ2hhbm5lbCQxKGFscGhhKQp9OwoKLyoqCiAqICIjeHh4eHh4IiAtPiAieHh4eHh4IgogKiBAcGFyYW0ge3N0cmluZ30gY29sb3JTdHIgCiAqLwpjb25zdCBmb3JtYXRDb2xvciQxID0gKGNvbG9yU3RyKSA9PiB7CiAgICBjb2xvclN0ciA9IGNvbG9yU3RyLnRvVXBwZXJDYXNlKCk7CiAgICBjb25zdCBtID0gY29sb3JTdHIubWF0Y2goL14jPyhcd3s2fSkkLyk7CiAgICByZXR1cm4gbVsxXQp9OwoKY29uc3QgYnVpbGRIZWFkZXIgPSAoewogICAgdGl0bGUgPSAiIiwKICAgIG9yaWdpbmFsID0gIiIsCiAgICBmb250RmFtaWx5ID0gIkFyaWFsIiwKICAgIGJvbGQgPSBmYWxzZSwKICAgIHRleHRDb2xvciA9ICIjRkZGRkZGIiwKICAgIGJnQ29sb3IgPSAiIzAwMDAwMCIsCiAgICB0ZXh0T3BhY2l0eSA9IDEuMCwKICAgIGJnT3BhY2l0eSA9IDAuNSwKICAgIGZvbnRzaXplUmF0aW8gPSAwLjQsCiAgICBiYXNlRm9udHNpemUgPSA1MCwKICAgIHBsYXlSZXNYID0gNTYwLAogICAgcGxheVJlc1kgPSA0MjAsCn0pID0+IHsKICAgIHRleHRDb2xvciA9IGZvcm1hdENvbG9yJDEodGV4dENvbG9yKTsKICAgIGJnQ29sb3IgPSBmb3JtYXRDb2xvciQxKGJnQ29sb3IpOwoKICAgIGNvbnN0IGJvbGRGbGFnID0gYm9sZCA/IC0xIDogMDsKICAgIGNvbnN0IGZvbnRTaXplID0gTWF0aC5yb3VuZChmb250c2l6ZVJhdGlvICogYmFzZUZvbnRzaXplKTsKICAgIGNvbnN0IHRleHRBbHBoYSA9IGZvcm1hdE9wYWNpdHkodGV4dE9wYWNpdHkpOwogICAgY29uc3QgYmdBbHBoYSA9IGZvcm1hdE9wYWNpdHkoYmdPcGFjaXR5KTsKCiAgICByZXR1cm4gWwogICAgICAgICJbU2NyaXB0IEluZm9dIiwKICAgICAgICBgVGl0bGU6ICR7dGl0bGV9YCwKICAgICAgICBgT3JpZ2luYWwgU2NyaXB0OiAke29yaWdpbmFsfWAsCiAgICAgICAgIlNjcmlwdFR5cGU6IHY0LjAwKyIsCiAgICAgICAgIkNvbGxpc2lvbnM6IE5vcm1hbCIsCiAgICAgICAgYFBsYXlSZXNYOiAke3BsYXlSZXNYfWAsCiAgICAgICAgYFBsYXlSZXNZOiAke3BsYXlSZXNZfWAsCiAgICAgICAgIlRpbWVyOiAxMDAuMDAwMCIsCiAgICAgICAgIiIsCiAgICAgICAgIltWNCsgU3R5bGVzXSIsCiAgICAgICAgIkZvcm1hdDogTmFtZSwgRm9udG5hbWUsIEZvbnRzaXplLCBQcmltYXJ5Q29sb3VyLCBTZWNvbmRhcnlDb2xvdXIsIE91dGxpbmVDb2xvdXIsIEJhY2tDb2xvdXIsIEJvbGQsIEl0YWxpYywgVW5kZXJsaW5lLCBTdHJpa2VPdXQsIFNjYWxlWCwgU2NhbGVZLCBTcGFjaW5nLCBBbmdsZSwgQm9yZGVyU3R5bGUsIE91dGxpbmUsIFNoYWRvdywgQWxpZ25tZW50LCBNYXJnaW5MLCBNYXJnaW5SLCBNYXJnaW5WLCBFbmNvZGluZyIsCiAgICAgICAgYFN0eWxlOiBDQywke2ZvbnRGYW1pbHl9LCR7Zm9udFNpemV9LCZIJHt0ZXh0QWxwaGF9JHt0ZXh0Q29sb3J9LCZIJHt0ZXh0QWxwaGF9JHt0ZXh0Q29sb3J9LCZIJHt0ZXh0QWxwaGF9MDAwMDAwLCZIJHtiZ0FscGhhfSR7YmdDb2xvcn0sJHtib2xkRmxhZ30sMCwwLDAsMTAwLDEwMCwwLDAsMSwyLDAsMiwyMCwyMCwyLDBgLAogICAgICAgICIiLAogICAgICAgICJbRXZlbnRzXSIsCiAgICAgICAgIkZvcm1hdDogTGF5ZXIsIFN0YXJ0LCBFbmQsIFN0eWxlLCBOYW1lLCBNYXJnaW5MLCBNYXJnaW5SLCBNYXJnaW5WLCBFZmZlY3QsIFRleHQiLAogICAgXQp9OwoKLyoqCiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIAogKi8KY29uc3QgZm9ybWF0VGltZXN0YW1wJDEgPSAodGltZSkgPT4gewogICAgY29uc3QgdmFsdWUgPSBNYXRoLnJvdW5kKHRpbWUgKiAxMDApICogMTA7CiAgICBjb25zdCByZW0gPSB2YWx1ZSAlIDM2MDAwMDA7CiAgICBjb25zdCBob3VyID0gKHZhbHVlIC0gcmVtKSAvIDM2MDAwMDA7CiAgICBjb25zdCBmSG91ciA9IGhvdXIudG9GaXhlZCgwKS5wYWRTdGFydCgyLCAnMCcpOwogICAgY29uc3QgZlJlbSA9IG5ldyBEYXRlKHJlbSkudG9JU09TdHJpbmcoKS5zbGljZSgtMTEsIC0yKTsKICAgIHJldHVybiBmSG91ciArIGZSZW0KfTsKCi8qKgogKiBAcGFyYW0ge3N0cmluZ30gc3RyIAogKi8KY29uc3QgdGV4dEVzY2FwZSQxID0gKHN0cikgPT4gewogICAgLy8gVlNGaWx0ZXIgZG8gbm90IHN1cHBvcnQgZXNjYXBlZCAieyIgb3IgIn0iOyB3ZSB1c2UgZnVsbC13aWR0aCB2ZXJzaW9uIGluc3RlYWQKICAgIHJldHVybiBzdHIucmVwbGFjZSgvey9nLCAn772bJykucmVwbGFjZSgvfS9nLCAn772dJykucmVwbGFjZSgvXHMvZywgJyAnKQp9OwoKLyoqCiAqIEBwYXJhbSB7aW1wb3J0KCIuL2luZGV4IikuRGlhbG9ndWV9IGRpYWxvZ3VlIAogKi8KY29uc3QgYnVpbGRMaW5lID0gKGRpYWxvZ3VlKSA9PiB7CiAgICBjb25zdCBzdGFydCA9IGZvcm1hdFRpbWVzdGFtcCQxKGRpYWxvZ3VlLmZyb20pOwogICAgY29uc3QgZW5kID0gZm9ybWF0VGltZXN0YW1wJDEoZGlhbG9ndWUudG8pOwogICAgY29uc3QgdGV4dCA9IHRleHRFc2NhcGUkMShkaWFsb2d1ZS5jb250ZW50KTsKICAgIHJldHVybiBgRGlhbG9ndWU6IDAsJHtzdGFydH0sJHtlbmR9LENDLCwyMCwyMCwyLCwke3RleHR9YAp9OwoKLyoqCiAqIEBwYXJhbSB7aW1wb3J0KCIuL2luZGV4IikuU3VidGl0bGVEYXRhfSBzdWJ0aXRsZURhdGEgCiAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZURvYyDlrZfluZXor63oqIDmj4/ov7DvvIzkvovlpoIgIuiLseivre+8iOe+juWbve+8iSIKICovCmNvbnN0IGJ1aWxkQXNzID0gKHN1YnRpdGxlRGF0YSwgbGFuZ3VhZ2VEb2MgPSAiIikgPT4gewogICAgY29uc3QgcGFnZVRpdGxlID0gdG9wLmRvY3VtZW50LnRpdGxlLnJlcGxhY2UoL1/lk5Tlk6nlk5Tlk6kgXCjjgpwt44KcXCnjgaTjg60g5bmy5p2vfi1iaWxpYmlsaSQvLCAiIik7CiAgICBjb25zdCB0aXRsZSA9IGAke3BhZ2VUaXRsZX0gJHtsYW5ndWFnZURvYyB8fCAiIn3lrZfluZVgOwogICAgY29uc3QgdXJsID0gdG9wLmxvY2F0aW9uLmhyZWY7CiAgICBjb25zdCBvcmlnaW5hbCA9IGBHZW5lcmF0ZWQgYnkgWG1hZGVyL2JpbGl0d2luIGJhc2VkIG9uICR7dXJsfWA7CgogICAgY29uc3QgaGVhZGVyID0gYnVpbGRIZWFkZXIoewogICAgICAgIHRpdGxlLAogICAgICAgIG9yaWdpbmFsLAogICAgICAgIGZvbnRzaXplUmF0aW86IHN1YnRpdGxlRGF0YS5mb250X3NpemUsCiAgICAgICAgdGV4dENvbG9yOiBzdWJ0aXRsZURhdGEuZm9udF9jb2xvciwKICAgICAgICBiZ09wYWNpdHk6IHN1YnRpdGxlRGF0YS5iYWNrZ3JvdW5kX2FscGhhLAogICAgICAgIGJnQ29sb3I6IHN1YnRpdGxlRGF0YS5iYWNrZ3JvdW5kX2NvbG9yLAogICAgfSk7CgogICAgY29uc3QgbGluZXMgPSBzdWJ0aXRsZURhdGEuYm9keS5tYXAoYnVpbGRMaW5lKTsKCiAgICByZXR1cm4gWwogICAgICAgIC4uLmhlYWRlciwKICAgICAgICAuLi5saW5lcywKICAgIF0uam9pbignXHJcbicpCn07CgovLyBAdHMtY2hlY2sKCi8qKgogKiDojrflj5bop4bpopHkv6Hmga8KICogQHBhcmFtIHtudW1iZXJ9IGFpZCAKICogQHBhcmFtIHtudW1iZXJ9IGNpZCAKICovCmNvbnN0IGdldFZpZGVvSW5mbyA9IGFzeW5jIChhaWQsIGNpZCkgPT4gewogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmJpbGliaWxpLmNvbS94L3dlYi1pbnRlcmZhY2Uvdmlldz9haWQ9JHthaWR9JmNpZD0ke2NpZH1gOwoKICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7CiAgICBpZiAoIXJlcy5vaykgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApCiAgICB9CgogICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7CiAgICByZXR1cm4ganNvbi5kYXRhCn07CgovKioKICogQHR5cGVkZWYge09iamVjdH0gU3VidGl0bGVJbmZvIOWtl+W5leS/oeaBrwogKiBAcHJvcGVydHkge251bWJlcn0gaWQKICogQHByb3BlcnR5IHtzdHJpbmd9IGxhbiDlrZfluZXor63oqIDvvIzkvovlpoIgImVuLVVTIgogKiBAcHJvcGVydHkge3N0cmluZ30gbGFuX2RvYyDlrZfluZXor63oqIDmj4/ov7DvvIzkvovlpoIgIuiLseivre+8iOe+juWbve+8iSIKICogQHByb3BlcnR5IHtib29sZWFufSBpc19sb2NrIOaYr+WQpuWtl+W5leWPr+S7peWcqOinhumikeS4iuaLluWKqAogKiBAcHJvcGVydHkge3N0cmluZ30gc3VidGl0bGVfdXJsIOaMh+WQkeWtl+W5leaVsOaNriBqc29uIOeahCB1cmwKICogQHByb3BlcnR5IHtvYmplY3R9IGF1dGhvciDkvZzogIXkv6Hmga8KICovCgovKioKICog6I635Y+W5a2X5bmV5L+h5oGv5YiX6KGoCiAqIEBwYXJhbSB7bnVtYmVyfSBhaWQgCiAqIEBwYXJhbSB7bnVtYmVyfSBjaWQgCiAqIEByZXR1cm5zIHtQcm9taXNlPFN1YnRpdGxlSW5mb1tdPn0KICovCmNvbnN0IGdldFN1YnRpdGxlSW5mb0xpc3QgPSBhc3luYyAoYWlkLCBjaWQpID0+IHsKICAgIHRyeSB7CiAgICAgICAgY29uc3QgdmlkZW9pbmZvID0gYXdhaXQgZ2V0VmlkZW9JbmZvKGFpZCwgY2lkKTsKICAgICAgICByZXR1cm4gdmlkZW9pbmZvLnN1YnRpdGxlLmxpc3QKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIFtdCiAgICB9Cn07CgovKioKICogQHR5cGVkZWYge09iamVjdH0gRGlhbG9ndWUKICogQHByb3BlcnR5IHtudW1iZXJ9IGZyb20g5byA5aeL5pe26Ze0CiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0byDnu5PmnZ/ml7bpl7QKICogQHByb3BlcnR5IHtudW1iZXJ9IGxvY2F0aW9uIOm7mOiupCAyCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb250ZW50IOWtl+W5leWGheWuuQogKi8KCi8qKgogKiBAdHlwZWRlZiB7T2JqZWN0fSBTdWJ0aXRsZURhdGEg5a2X5bmV5pWw5o2uCiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmb250X3NpemUg6buY6K6kIDAuNAogKiBAcHJvcGVydHkge3N0cmluZ30gZm9udF9jb2xvciDpu5jorqQgIiNGRkZGRkYiCiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBiYWNrZ3JvdW5kX2FscGhhIOm7mOiupCAwLjUKICogQHByb3BlcnR5IHtzdHJpbmd9IGJhY2tncm91bmRfY29sb3Ig6buY6K6kICIjOUMyN0IwIgogKiBAcHJvcGVydHkge3N0cmluZ30gU3Ryb2tlIOm7mOiupCAibm9uZSIKICogQHByb3BlcnR5IHtEaWFsb2d1ZVtdfSBib2R5CiAqLwoKLyoqCiAqIEBwYXJhbSB7c3RyaW5nfSBzdWJ0aXRsZV91cmwg5oyH5ZCR5a2X5bmV5pWw5o2uIGpzb24g55qEIHVybAogKiBAcmV0dXJucyB7UHJvbWlzZTxTdWJ0aXRsZURhdGE+fQogKi8KY29uc3QgZ2V0U3VidGl0bGVEYXRhID0gYXN5bmMgKHN1YnRpdGxlX3VybCkgPT4gewogICAgc3VidGl0bGVfdXJsID0gc3VidGl0bGVfdXJsLnJlcGxhY2UoL15odHRwOi8sICJodHRwczoiKTsKCiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChzdWJ0aXRsZV91cmwpOwogICAgaWYgKCFyZXMub2spIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKQogICAgfQoKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpOwogICAgcmV0dXJuIGRhdGEKfTsKCi8qKgogKiBAcGFyYW0ge251bWJlcn0gYWlkIAogKiBAcGFyYW0ge251bWJlcn0gY2lkIAogKi8KY29uc3QgZ2V0U3VidGl0bGVzID0gYXN5bmMgKGFpZCwgY2lkKSA9PiB7CiAgICBjb25zdCBsaXN0ID0gYXdhaXQgZ2V0U3VidGl0bGVJbmZvTGlzdChhaWQsIGNpZCk7CiAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgbGlzdC5tYXAoYXN5bmMgKGluZm8pID0+IHsKICAgICAgICAgICAgY29uc3Qgc3VidGl0bGVEYXRhID0gYXdhaXQgZ2V0U3VidGl0bGVEYXRhKGluZm8uc3VidGl0bGVfdXJsKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGxhbmd1YWdlOiBpbmZvLmxhbiwKICAgICAgICAgICAgICAgIGxhbmd1YWdlX2RvYzogaW5mby5sYW5fZG9jLAogICAgICAgICAgICAgICAgdXJsOiBpbmZvLnN1YnRpdGxlX3VybCwKICAgICAgICAgICAgICAgIGRhdGE6IHN1YnRpdGxlRGF0YSwKICAgICAgICAgICAgICAgIGFzczogYnVpbGRBc3Moc3VidGl0bGVEYXRhLCBpbmZvLmxhbl9kb2MpLAogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgICkKfTsKCi8qKioKICogQ29weXJpZ2h0IChDKSAyMDE4IFFsaTUuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqIAogKiBAYXV0aG9yIHFsaTUgPGdvb2RscTExW2F0XSgxNjN8Z21haWwpLmNvbT4KICogCiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWMKICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpcwogKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cDovL21vemlsbGEub3JnL01QTC8yLjAvLgoqLwoKY2xhc3MgVUkgewogICAgY29uc3RydWN0b3IodHdpbiwgb3B0aW9uID0gVUkub3B0aW9uRGVmYXVsdHMpIHsKICAgICAgICB0aGlzLnR3aW4gPSB0d2luOwogICAgICAgIHRoaXMub3B0aW9uID0gb3B0aW9uOwoKICAgICAgICB0aGlzLmRlc3Ryb3kgPSBuZXcgSG9va2VkRnVuY3Rpb24oKTsKICAgICAgICB0aGlzLmRvbSA9IHt9OwogICAgICAgIHRoaXMuY2lkU2Vzc2lvbkRlc3Ryb3kgPSBuZXcgSG9va2VkRnVuY3Rpb24oKTsKICAgICAgICB0aGlzLmNpZFNlc3Npb25Eb20gPSB7fTsKCiAgICAgICAgdGhpcy5kZXN0cm95LmFkZENhbGxiYWNrKHRoaXMuY2lkU2Vzc2lvbkRlc3Ryb3kuYmluZCh0aGlzKSk7CgogICAgICAgIHRoaXMuZGVzdHJveS5hZGRDYWxsYmFjaygoKSA9PiB7CiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5kb20pLmZvckVhY2goZSA9PiB0eXBlb2YgZS5yZW1vdmUgPT0gImZ1bmN0aW9uIiAmJiBlLnJlbW92ZSgpKTsKICAgICAgICAgICAgdGhpcy5kb20gPSB7fTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNpZFNlc3Npb25EZXN0cm95LmFkZENhbGxiYWNrKCgpID0+IHsKICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmNpZFNlc3Npb25Eb20pLmZvckVhY2goZSA9PiB0eXBlb2YgZS5yZW1vdmUgPT0gImZ1bmN0aW9uIiAmJiBlLnJlbW92ZSgpKTsKICAgICAgICAgICAgdGhpcy5jaWRTZXNzaW9uRG9tID0ge307CiAgICAgICAgfSk7CgogICAgICAgIHRoaXMuc3R5bGVDbGVhcmFuY2UoKTsKICAgIH0KCiAgICBzdHlsZUNsZWFyYW5jZSgpIHsKICAgICAgICBsZXQgcmV0ID0gYAogICAgICAgIC5iaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LWNvbnRhaW5lci5ibGFjayB1bC5iaWxpdHdpbiBsaS5jb250ZXh0LW1lbnUtZnVuY3Rpb24gPiBhOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwuMTIpOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgLjNzIGVhc2UtaW4tb3V0OwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQoKICAgICAgICAuYmlsaXR3aW4gYSB7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgY29sb3I6ICMwMGExZDY7CiAgICAgICAgfQoKICAgICAgICAuYmlsaXR3aW4gYTpob3ZlciB7CiAgICAgICAgICAgIGNvbG9yOiAjZjI1ZDhlOwogICAgICAgIH0KCiAgICAgICAgLmJpbGl0d2luIGJ1dHRvbiB7CiAgICAgICAgICAgIGNvbG9yOiAjZmZmOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBhMWQ2OwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMDBhMWQ2OwogICAgICAgICAgICB0cmFuc2l0aW9uOiAuMXM7CiAgICAgICAgICAgIHRyYW5zaXRpb24tcHJvcGVydHk6IGJhY2tncm91bmQtY29sb3IsYm9yZGVyLGNvbG9yOwogICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICB9CgogICAgICAgIC5iaWxpdHdpbiBidXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiNWU1OwogICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMGI1ZTU7CiAgICAgICAgfQoKICAgICAgICAuYmlsaXR3aW4gcHJvZ3Jlc3MgewogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IHByb2dyZXNzLWJhcjsKICAgICAgICAgICAgLW1vei1hcHBlYXJhbmNlOiBwcm9ncmVzcy1iYXI7CiAgICAgICAgICAgIGFwcGVhcmFuY2U6IHByb2dyZXNzLWJhcjsKICAgICAgICB9CgogICAgICAgIC5iaWxpdHdpbiBpbnB1dFt0eXBlPSJjaGVja2JveCIgaV0gewogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IGNoZWNrYm94OwogICAgICAgICAgICAtbW96LWFwcGVhcmFuY2U6IGNoZWNrYm94OwogICAgICAgICAgICBhcHBlYXJhbmNlOiBjaGVja2JveDsKICAgICAgICB9CgogICAgICAgIC5iaWxpdHdpbi5jb250ZXh0LW1lbnUtbWVudTpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwwJSwxMDAlLC4xMik7CiAgICAgICAgfQoKICAgICAgICAuYmlsaXR3aW4uY29udGV4dC1tZW51LW1lbnU6aG92ZXIgPiBhIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDEwMCUsMCkgIWltcG9ydGFudDsKICAgICAgICB9CiAgICAgICAgYDsKCiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOwogICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gcmV0OwogICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kKHN0eWxlKTsKCiAgICAgICAgcmV0dXJuIHRoaXMuZG9tLnN0eWxlID0gc3R5bGU7CiAgICB9CgogICAgY2lkU2Vzc2lvblJlbmRlcigpIHsKICAgICAgICB0aGlzLmJ1aWxkVGl0bGUoKTsKCiAgICAgICAgaWYgKHRoaXMub3B0aW9uLnRpdGxlKSB0aGlzLmFwcGVuZFRpdGxlKCk7IC8vIOWcqOinhumikeagh+mimOaXgea3u+WKoOmTvuaOpQogICAgICAgIHRoaXMuYXBwZW5kTWVudSgpOyAvLyDlnKjop4bpopHoj5zljZXmoI/mt7vliqDpk77mjqUKICAgIH0KCiAgICAvLyBUaXRsZSBBcHBlbmQKICAgIGJ1aWxkVGl0bGUobW9ua2V5ID0gdGhpcy50d2luLm1vbmtleSkgewogICAgICAgIC8vIDEuIGJ1aWxkIHZpZGVvQSwgYXNzQQogICAgICAgIGNvbnN0IGZvbnRTaXplID0gJzE1cHgnOwogICAgICAgIC8qKiBAdHlwZSB7SFRNTEFuY2hvckVsZW1lbnR9ICovCiAgICAgICAgY29uc3QgdmlkZW9BID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIC8qKiBAdHlwZSB7SFRNTEFuY2hvckVsZW1lbnR9ICovCiAgICAgICAgdmlkZW9BLnN0eWxlLmZvbnRTaXplID0gZm9udFNpemU7CiAgICAgICAgdmlkZW9BLnRleHRDb250ZW50ID0gJ1x1ODlDNlx1OTg5MUZMVic7CiAgICAgICAgY29uc3QgYXNzQSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCiAgICAgICAgLy8gMS4xIGJ1aWxkIHZpZGVvQQogICAgICAgIGFzc0Euc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZTsKICAgICAgICBhc3NBLnRleHRDb250ZW50ID0gJ1x1NUYzOVx1NUU1NUFTUyc7CiAgICAgICAgdmlkZW9BLm9ubW91c2VvdmVyID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAvLyAxLjEuMSBnaXZlIHByb2Nlc3NpbmcgaGludAogICAgICAgICAgICB2aWRlb0EudGV4dENvbnRlbnQgPSAn5q2j5ZyoRkxWJzsKICAgICAgICAgICAgdmlkZW9BLm9ubW91c2VvdmVyID0gbnVsbDsKCiAgICAgICAgICAgIC8vIDEuMS4yIHF1ZXJ5IHZpZGVvCiAgICAgICAgICAgIGNvbnN0IHZpZGVvX2Zvcm1hdCA9IGF3YWl0IG1vbmtleS5xdWVyeUluZm8oJ3ZpZGVvJyk7CgogICAgICAgICAgICAvLyAxLjEuMyBkaXNwbGF5IHZpZGVvCiAgICAgICAgICAgIHZpZGVvQS50ZXh0Q29udGVudCA9IGDop4bpopEke3ZpZGVvX2Zvcm1hdCA/IHZpZGVvX2Zvcm1hdC50b1VwcGVyQ2FzZSgpIDogJ0ZMVid9YDsKICAgICAgICAgICAgdmlkZW9BLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmRpc3BsYXlGTFZEaXYoKTsKICAgICAgICB9OwoKICAgICAgICAvLyAxLjIgYnVpbGQgYXNzQQogICAgICAgIGFzc0Eub25tb3VzZW92ZXIgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIC8vIDEuMi4xIGdpdmUgcHJvY2Vzc2luZyBoaW50CiAgICAgICAgICAgIGFzc0EudGV4dENvbnRlbnQgPSAn5q2j5ZyoQVNTJzsKICAgICAgICAgICAgYXNzQS5vbm1vdXNlb3ZlciA9IG51bGw7CgogICAgICAgICAgICBsZXQgY2xpY2tlZCA9IGZhbHNlOwogICAgICAgICAgICBhc3NBLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgKCkgPT4gewogICAgICAgICAgICAgICAgY2xpY2tlZCA9IHRydWU7CiAgICAgICAgICAgIH0sIHsgb25jZTogdHJ1ZSB9KTsKCiAgICAgICAgICAgIC8vIDEuMi4yIHF1ZXJ5IGZsdgogICAgICAgICAgICBhc3NBLmhyZWYgPSBhd2FpdCBtb25rZXkucXVlcnlJbmZvKCdhc3MnKTsKCiAgICAgICAgICAgIC8vIDEuMi4zIHJlc3BvbnNlIG1wNAogICAgICAgICAgICBhc3NBLnRleHRDb250ZW50ID0gJ+W8ueW5lUFTUyc7CiAgICAgICAgICAgIGlmIChtb25rZXkubXA0ICYmIG1vbmtleS5tcDQubWF0Y2gpIHsKICAgICAgICAgICAgICAgIGFzc0EuZG93bmxvYWQgPSBtb25rZXkubXA0Lm1hdGNoKC9cZCg/OlxkfC18aGQpKig/PVwubXA0KS8pWzBdICsgJy5hc3MnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXNzQS5kb3dubG9hZCA9IG1vbmtleS5jaWQgKyAnLmFzcyc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjbGlja2VkKSB7CiAgICAgICAgICAgICAgICBhc3NBLmNsaWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICAvLyAyLiBzYXZlIHRvIGNhY2hlCiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNpZFNlc3Npb25Eb20sIHsgdmlkZW9BLCBhc3NBIH0pOwogICAgICAgIHJldHVybiB0aGlzLmNpZFNlc3Npb25Eb207CiAgICB9CgogICAgYXBwZW5kVGl0bGUoeyB2aWRlb0EsIGFzc0EgfSA9IHRoaXMuY2lkU2Vzc2lvbkRvbSkgewogICAgICAgIC8vIDEuIGJ1aWxkIGRpdgogICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoKICAgICAgICAvLyAyLiBhcHBlbmQgdG8gdGl0bGUKICAgICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpOwogICAgICAgIGRpdi5jbGFzc05hbWUgPSAnYmlsaXR3aW4nOwogICAgICAgIGRpdi5hcHBlbmQoLi4uW3ZpZGVvQSwgJyAnLCBhc3NBXSk7CiAgICAgICAgY29uc3QgdG1pbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnRtaW5mbycpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5pbmZvLXNlY29uZCcpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi52aWRlby1kYXRhJykgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2gxX21vZHVsZSIpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tZWRpYS10aXRsZSIpOwogICAgICAgIHRtaW5mby5zdHlsZS5mbG9hdCA9ICdub25lJzsKICAgICAgICB0bWluZm8uYWZ0ZXIoZGl2KTsKCiAgICAgICAgY29uc3QgaDFfbW9kdWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2gxX21vZHVsZSIpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5tZWRpYS10aXRsZSIpOwogICAgICAgIGlmIChoMV9tb2R1bGUpIHsKICAgICAgICAgICAgaDFfbW9kdWxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICIwcHgiOwogICAgICAgIH0KCiAgICAgICAgLy8gMy4gc2F2ZSB0byBjYWNoZQogICAgICAgIHRoaXMuY2lkU2Vzc2lvbkRvbS50aXRsZURpdiA9IGRpdjsKCiAgICAgICAgdGhpcy5hcHBlbmRTdWJ0aXRsZUFzKGRpdik7CgogICAgICAgIHJldHVybiBkaXY7CiAgICB9CgogICAgYXN5bmMgYnVpbGRTdWJ0aXRsZUFzKCkgewogICAgICAgIGlmICh0aGlzLmNpZFNlc3Npb25Eb20gJiYgdGhpcy5jaWRTZXNzaW9uRG9tLnN1YnRpdGxlQXMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2lkU2Vzc2lvbkRvbS5zdWJ0aXRsZUFzOwogICAgICAgIH0KCiAgICAgICAgY29uc3Qgc3VidGl0bGVMaXN0ID0gYXdhaXQgZ2V0U3VidGl0bGVzKGFpZCwgY2lkKTsKCiAgICAgICAgY29uc3QgZm9udFNpemUgPSAnMTVweCc7CgogICAgICAgIGNvbnN0IG1vbmtleSA9IHRoaXMudHdpbi5tb25rZXk7CgogICAgICAgIGNvbnN0IHN1YnRpdGxlQXMgPSBzdWJ0aXRsZUxpc3QubWFwKHN1YnRpdGxlID0+IHsKICAgICAgICAgICAgY29uc3QgbGFuRG9jID0gc3VidGl0bGUubGFuZ3VhZ2VfZG9jLnJlcGxhY2UoL++8iC9nLCAiKCIpLnJlcGxhY2UoL++8iS9nLCAiKSIpOwoKICAgICAgICAgICAgLyoqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudH0gKi8KICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgYS5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplOwogICAgICAgICAgICBhLnRleHRDb250ZW50ID0gYCR7bGFuRG9jfeWtl+W5lUFTU2A7CiAgICAgICAgICAgIGEubGFuID0gc3VidGl0bGUubGFuZ3VhZ2U7CgogICAgICAgICAgICBhLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW3N1YnRpdGxlLmFzc10pOwogICAgICAgICAgICAgICAgYS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKCiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9ICIiOwogICAgICAgICAgICAgICAgaWYgKG1vbmtleS5tcDQgJiYgbW9ua2V5Lm1wNC5tYXRjaCkgewogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBtb25rZXkubXA0Lm1hdGNoKC9cZCg/OlxkfC18aGQpKig/PVwubXA0KS8pWzBdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBuYW1lID0gbW9ua2V5LmNpZCB8fCBjaWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYS5kb3dubG9hZCA9IGAke25hbWV9LiR7c3VidGl0bGUubGFuZ3VhZ2V9LmFzc2A7CgogICAgICAgICAgICAgICAgYS5vbmNsaWNrID0gbnVsbDsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0pOwoKICAgICAgICB0aGlzLmNpZFNlc3Npb25Eb20uc3VidGl0bGVBcyA9IHN1YnRpdGxlQXM7CiAgICAgICAgcmV0dXJuIHN1YnRpdGxlQXM7CiAgICB9CgogICAgYXN5bmMgYXBwZW5kU3VidGl0bGVBcyhkaXYpIHsKICAgICAgICBjb25zdCBzdWJ0aXRsZUFzID0gYXdhaXQgdGhpcy5idWlsZFN1YnRpdGxlQXMoKTsKCiAgICAgICAgY29uc3QgaXRlbXMgPSBzdWJ0aXRsZUFzLnJlZHVjZSgocCwgYykgPT4gewogICAgICAgICAgICAvLyDlnKjmr4/kuIDpobnliY3mt7vliqDnqbrmoLwKICAgICAgICAgICAgcmV0dXJuIHAuY29uY2F0KCcgJywgYyk7CiAgICAgICAgfSwgW10pOwoKICAgICAgICBkaXYuYXBwZW5kKC4uLml0ZW1zKTsKICAgIH0KCiAgICBhcHBlbmRTaG9ydFZpZGVvVGl0bGUoeyB2aWRlb19wbGF5dXJsLCBjb3Zlcl9pbWcgfSkgewogICAgICAgIGNvbnN0IGZvbnRTaXplID0gJzE1cHgnOwogICAgICAgIGNvbnN0IG1hcmdpblJpZ2h0ID0gJzE1cHgnOwogICAgICAgIGNvbnN0IHZpZGVvQSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICB2aWRlb0Euc3R5bGUuZm9udFNpemUgPSBmb250U2l6ZTsKICAgICAgICB2aWRlb0Euc3R5bGUubWFyZ2luUmlnaHQgPSBtYXJnaW5SaWdodDsKICAgICAgICB2aWRlb0EuaHJlZiA9IHZpZGVvX3BsYXl1cmw7CiAgICAgICAgdmlkZW9BLnRhcmdldCA9ICdfYmxhbmsnOwogICAgICAgIHZpZGVvQS50ZXh0Q29udGVudCA9ICdcdTRFMEJcdThGN0RcdTg5QzZcdTk4OTEnOwogICAgICAgIGNvbnN0IGNvdmVyQSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCiAgICAgICAgY292ZXJBLnN0eWxlLmZvbnRTaXplID0gZm9udFNpemU7CiAgICAgICAgY292ZXJBLmhyZWYgPSBjb3Zlcl9pbWc7CiAgICAgICAgY292ZXJBLnRhcmdldCA9ICdfYmxhbmsnOwogICAgICAgIGNvdmVyQS50ZXh0Q29udGVudCA9ICdcdTgzQjdcdTUzRDZcdTVDMDFcdTk3NjInOwogICAgICAgIHZpZGVvQS5vbmNsaWNrID0gZSA9PiB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTthbGVydCgi6K+35L2/55So5Y+z6ZSu5Y+m5a2Y5Li65LiL6L296KeG6aKRIik7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKCiAgICAgICAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7CiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAnYmlsaXR3aW4nOwogICAgICAgIHNwYW4uYXBwZW5kKC4uLlt2aWRlb0EsICcgJywgY292ZXJBXSk7CiAgICAgICAgY29uc3QgaW5mb0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iYXNlLWluZm8gZGl2LmluZm8nKTsKICAgICAgICBpbmZvRGl2LmFwcGVuZENoaWxkKHNwYW4pOwogICAgfQoKICAgIGJ1aWxkRkxWRGl2KG1vbmtleSA9IHRoaXMudHdpbi5tb25rZXksIGZsdnMgPSBtb25rZXkuZmx2cywgY2FjaGUgPSBtb25rZXkuY2FjaGUsIGZvcm1hdCA9IG1vbmtleS52aWRlb19mb3JtYXQpIHsKICAgICAgICAvLyAxLiBidWlsZCB2aWRlbyBzcGxpdHMKICAgICAgICBjb25zdCBmbHZUcnMgPSBmbHZzLm1hcCgoaHJlZiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgY29uc3QgYTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBhMS5ocmVmID0gaHJlZjsKICAgICAgICAgICAgICAgIGExLmRvd25sb2FkID0gY2lkICsgJy0nICsgKGluZGV4ICsgMSkgKyAnLicgKyAoZm9ybWF0IHx8ICJmbHYiKTsKICAgICAgICAgICAgICAgIGExLnRleHRDb250ZW50ID0gYOinhumikeWIhuautSAke2luZGV4ICsgMX1gOwogICAgICAgICAgICAgICAgdGQxLmFwcGVuZChhMSk7CiAgICAgICAgICAgICAgICB0ci5hcHBlbmQodGQxKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRkMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICBjb25zdCBhMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCiAgICAgICAgICAgICAgICBhMi5vbmNsaWNrID0gZSA9PiB0aGlzLmRvd25sb2FkRkxWKHsKICAgICAgICAgICAgICAgICAgICBtb25rZXksCiAgICAgICAgICAgICAgICAgICAgaW5kZXgsCiAgICAgICAgICAgICAgICAgICAgYTogZS50YXJnZXQsCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHRyLmNoaWxkcmVuWzJdLmNoaWxkcmVuWzBdCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBhMi50ZXh0Q29udGVudCA9ICdcdTdGMTNcdTVCNThcdTY3MkNcdTZCQjUnOwogICAgICAgICAgICAgICAgdGQyLmFwcGVuZChhMik7CiAgICAgICAgICAgICAgICB0ci5hcHBlbmQodGQyKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRkMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzczEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcm9ncmVzcycpOwogICAgICAgICAgICAgICAgcHJvZ3Jlc3MxLnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnMCcpOwogICAgICAgICAgICAgICAgcHJvZ3Jlc3MxLnNldEF0dHJpYnV0ZSgnbWF4JywgJzEwMCcpOwogICAgICAgICAgICAgICAgcHJvZ3Jlc3MxLnRleHRDb250ZW50ID0gJ1x1OEZEQlx1NUVBNlx1Njc2MSc7CiAgICAgICAgICAgICAgICB0ZDMuYXBwZW5kKHByb2dyZXNzMSk7CiAgICAgICAgICAgICAgICB0ci5hcHBlbmQodGQzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHI7CiAgICAgICAgfSk7CgogICAgICAgIC8vIDIuIGJ1aWxkIGV4cG9ydGVyIGEKICAgICAgICBjb25zdCBleHBvcnRlckEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgaWYgKHRoaXMub3B0aW9uLmFyaWEyKSB7CiAgICAgICAgICAgIGV4cG9ydGVyQS50ZXh0Q29udGVudCA9ICflr7zlh7pBcmlhMic7CiAgICAgICAgICAgIGV4cG9ydGVyQS5kb3dubG9hZCA9ICdiaWxpdHdpbi5zZXNzaW9uJzsKICAgICAgICAgICAgZXhwb3J0ZXJBLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtFeHBvcnRlci5leHBvcnRBcmlhMihmbHZzLCB0b3AubG9jYXRpb24ub3JpZ2luKV0pKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9uLmFyaWEyUlBDKSB7CiAgICAgICAgICAgIGV4cG9ydGVyQS50ZXh0Q29udGVudCA9ICflj5HpgIFBcmlhMiBSUEMnOwogICAgICAgICAgICBleHBvcnRlckEub25jbGljayA9ICgpID0+IEV4cG9ydGVyLnNlbmRUb0FyaWEyUlBDKGZsdnMsIHRvcC5sb2NhdGlvbi5vcmlnaW4pOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb24ubTN1OCkgewogICAgICAgICAgICBleHBvcnRlckEudGV4dENvbnRlbnQgPSAn5a+85Ye6bTN1OCc7CiAgICAgICAgICAgIGV4cG9ydGVyQS5kb3dubG9hZCA9ICdiaWxpdHdpbi5tM3U4JzsKICAgICAgICAgICAgZXhwb3J0ZXJBLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtFeHBvcnRlci5leHBvcnRNM1U4KGZsdnMsIHRvcC5sb2NhdGlvbi5vcmlnaW4sIHRvcC5uYXZpZ2F0b3IudXNlckFnZW50KV0pKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9uLmNsaXBib2FyZCkgewogICAgICAgICAgICBleHBvcnRlckEudGV4dENvbnRlbnQgPSAn5YWo6YOo5aSN5Yi25Yiw5Ymq6LS05p2/JzsKICAgICAgICAgICAgZXhwb3J0ZXJBLm9uY2xpY2sgPSAoKSA9PiBFeHBvcnRlci5jb3B5VG9DbGlwYm9hcmQoZmx2cy5qb2luKCdcbicpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBleHBvcnRlckEudGV4dENvbnRlbnQgPSAn5a+85Ye6SURNJzsKICAgICAgICAgICAgZXhwb3J0ZXJBLmRvd25sb2FkID0gJ2JpbGl0d2luLmVmMic7CiAgICAgICAgICAgIGV4cG9ydGVyQS5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbRXhwb3J0ZXIuZXhwb3J0SURNKGZsdnMsIHRvcC5sb2NhdGlvbi5vcmlnaW4pXSkpOwogICAgICAgIH0KCiAgICAgICAgLy8gMy4gYnVpbGQgYm9keSB0YWJsZQogICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgICB0YWJsZS5zdHlsZS5saW5lSGVpZ2h0ID0gJzJlbSc7CiAgICAgICAgdGFibGUuYXBwZW5kKC4uLmZsdlRycywgKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgdGQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgdGQxLmFwcGVuZCguLi5bZXhwb3J0ZXJBXSk7CiAgICAgICAgICAgIHRyMS5hcHBlbmQodGQxKTsKICAgICAgICAgICAgY29uc3QgdGQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgY29uc3QgYTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CgogICAgICAgICAgICBhMS5vbmNsaWNrID0gZSA9PiBmb3JtYXQgIT0gIm1wNCIgPyB0aGlzLmRvd25sb2FkQWxsRkxWcyh7CiAgICAgICAgICAgICAgICBhOiBlLnRhcmdldCwKICAgICAgICAgICAgICAgIG1vbmtleSwKICAgICAgICAgICAgICAgIHRhYmxlCiAgICAgICAgICAgIH0pIDogdG9wLmFsZXJ0KCLkuI3mlK/mjIHlkIjlubZNUDTop4bpopEiKTsKCiAgICAgICAgICAgIGExLnRleHRDb250ZW50ID0gJ1x1N0YxM1x1NUI1OFx1NTE2OFx1OTBFOCtcdTgxRUFcdTUyQThcdTU0MDhcdTVFNzYnOwogICAgICAgICAgICB0ZDIuYXBwZW5kKGExKTsKICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDIpOwogICAgICAgICAgICBjb25zdCB0ZDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICBjb25zdCBwcm9ncmVzczEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcm9ncmVzcycpOwogICAgICAgICAgICBwcm9ncmVzczEuc2V0QXR0cmlidXRlKCd2YWx1ZScsICcwJyk7CiAgICAgICAgICAgIHByb2dyZXNzMS5zZXRBdHRyaWJ1dGUoJ21heCcsIGZsdnMubGVuZ3RoICsgMSk7CiAgICAgICAgICAgIHByb2dyZXNzMS50ZXh0Q29udGVudCA9ICdcdThGREJcdTVFQTZcdTY3NjEnOwogICAgICAgICAgICB0ZDMuYXBwZW5kKHByb2dyZXNzMSk7CiAgICAgICAgICAgIHRyMS5hcHBlbmQodGQzKTsKICAgICAgICAgICAgcmV0dXJuIHRyMTsKICAgICAgICB9KSgpLCAoKCkgPT4gewogICAgICAgICAgICBjb25zdCB0cjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZDEuY29sU3BhbiA9ICczJzsKICAgICAgICAgICAgdGQxLnRleHRDb250ZW50ID0gJ1x1NTQwOFx1NUU3Nlx1NTI5Rlx1ODBGRFx1NjNBOFx1ODM1MFx1OTE0RFx1N0Y2RVx1RkYxQVx1ODFGM1x1NUMxMThHIFJBTVx1MzAwMlx1NjI4QVx1ODFFQVx1NURGMVx1NEUwQlx1OEY3RFx1NzY4NFx1NTIwNlx1NkJCNUZMVlx1NjJENlx1NTJBOFx1NTIzMFx1OEZEOVx1OTFDQ1x1RkYwQ1x1NEU1Rlx1NTNFRlx1NEVFNVx1NTQwOFx1NUU3Nlx1NTRFNn4nOwogICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgIHJldHVybiB0cjE7CiAgICAgICAgfSkoKSwgY2FjaGUgPyAoKCkgPT4gewogICAgICAgICAgICBjb25zdCB0cjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZDEuY29sU3BhbiA9ICczJzsKICAgICAgICAgICAgdGQxLnRleHRDb250ZW50ID0gJ1x1NEUwQlx1OEY3RFx1NzY4NFx1N0YxM1x1NUI1OFx1NTIwNlx1NkJCNVx1NEYxQVx1NjY4Mlx1NjVGNlx1NTA1Q1x1NzU1OVx1NTcyOFx1NzUzNVx1ODExMVx1OTFDQ1x1RkYwQ1x1OEZDN1x1NEUwMFx1NkJCNVx1NjVGNlx1OTVGNFx1NEYxQVx1ODFFQVx1NTJBOFx1NkQ4OFx1NTkzMVx1MzAwMlx1NUVGQVx1OEJBRVx1NTNFQVx1NUYwMFx1NEUwMFx1NEUyQVx1NjgwN1x1N0I3RVx1OTg3NVx1MzAwMic7CiAgICAgICAgICAgIHRyMS5hcHBlbmQodGQxKTsKICAgICAgICAgICAgcmV0dXJuIHRyMTsKICAgICAgICB9KSgpIDogKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgdGQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgdGQxLmNvbFNwYW4gPSAnMyc7CiAgICAgICAgICAgIHRkMS50ZXh0Q29udGVudCA9ICdcdTVFRkFcdThCQUVcdTUzRUFcdTVGMDBcdTRFMDBcdTRFMkFcdTY4MDdcdTdCN0VcdTk4NzVcdTMwMDJcdTUxNzNcdTYzODlcdTY4MDdcdTdCN0VcdTk4NzVcdTU0MEVcdUZGMENcdTdGMTNcdTVCNThcdTVDMzFcdTRGMUFcdTg4QUJcdTZFMDVcdTc0MDZcdTMwMDJcdTUyMkJcdTVGRDhcdTRFODZcdTUzRTZcdTVCNThcdTRFM0FcdUZGMDEnOwogICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgIHJldHVybiB0cjE7CiAgICAgICAgfSkoKSwgKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgdGQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgdGQxLmNvbFNwYW4gPSAnMyc7CiAgICAgICAgICAgIHRoaXMuZGlzcGxheVF1b3RhLmJpbmQodGhpcykodGQxKTsKICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDEpOwogICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgIH0pKCkpOwogICAgICAgIHRoaXMuY2lkU2Vzc2lvbkRvbS5mbHZUYWJsZSA9IHRhYmxlOwoKICAgICAgICAvLyA0LiBidWlsZCBjb250YWluZXIgZGx2CiAgICAgICAgY29uc3QgZGl2ID0gVUkuZ2VuRGl2KCk7CiAgICAgICAgZGl2Lm9uZHJhZ2VudGVyID0gZGl2Lm9uZHJhZ292ZXIgPSBlID0+IFVJLmFsbG93RHJhZyhlKTsKICAgICAgICBkaXYub25kcm9wID0gYXN5bmMgZSA9PiB7CiAgICAgICAgICAgIC8vIDQuMSBhbGxvdyBkcmFnCiAgICAgICAgICAgIFVJLmFsbG93RHJhZyhlKTsKCiAgICAgICAgICAgIC8vIDQuMiBzb3J0IGZpbGVzIGlmIHBvc3NpYmxlCiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5maWxlcyk7CiAgICAgICAgICAgIGlmIChmaWxlcy5ldmVyeShlID0+IGUubmFtZS5zZWFyY2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLmZsdi8pICE9IC0xKSkgewogICAgICAgICAgICAgICAgZmlsZXMuc29ydCgoYSwgYikgPT4gYS5uYW1lLm1hdGNoKC9cZCstKFxkKykoPzpcZHwtfGhkKSpcLmZsdi8pWzFdIC0gYi5uYW1lLm1hdGNoKC9cZCstKFxkKykoPzpcZHwtfGhkKSpcLmZsdi8pWzFdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gNC4zIGdpdmUgbG9hZGVkIGZpbGVzIGhpbnQKICAgICAgICAgICAgdGFibGUuYXBwZW5kKC4uLmZpbGVzLm1hcChlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHRyMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgdGQxLmNvbFNwYW4gPSAnMyc7CiAgICAgICAgICAgICAgICB0ZDEudGV4dENvbnRlbnQgPSBlLm5hbWU7CiAgICAgICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAvLyA0LjQgZGV0ZXJtaW5lIG91dHB1dCBuYW1lCiAgICAgICAgICAgIGxldCBvdXRwdXROYW1lID0gZmlsZXNbMF0ubmFtZS5tYXRjaCgvXGQrLVxkKyg/OlxkfC18aGQpKlwuZmx2Lyk7CiAgICAgICAgICAgIGlmIChvdXRwdXROYW1lKSBvdXRwdXROYW1lID0gb3V0cHV0TmFtZVswXS5yZXBsYWNlKC8tXGQvLCAiIik7ZWxzZSBvdXRwdXROYW1lID0gJ21lcmdlXycgKyBmaWxlc1swXS5uYW1lOwoKICAgICAgICAgICAgLy8gNC41IGJ1aWxkIG91dHB1dCB1aQogICAgICAgICAgICBjb25zdCBocmVmID0gYXdhaXQgdGhpcy50d2luLm1lcmdlRkxWRmlsZXMoZmlsZXMpOwogICAgICAgICAgICB0YWJsZS5hcHBlbmQoKCgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHRyMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgdGQxLmNvbFNwYW4gPSAnMyc7CiAgICAgICAgICAgICAgICBjb25zdCBhMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgIGExLmhyZWYgPSBocmVmOwogICAgICAgICAgICAgICAgYTEuZG93bmxvYWQgPSBvdXRwdXROYW1lOwogICAgICAgICAgICAgICAgYTEudGV4dENvbnRlbnQgPSBvdXRwdXROYW1lOwogICAgICAgICAgICAgICAgdGQxLmFwcGVuZChhMSk7CiAgICAgICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgICAgICB9KSgpKTsKICAgICAgICB9OwoKICAgICAgICAvLyA1LiBidWlsZCB1dGlsIGJ1dHRvbnMKICAgICAgICBkaXYuYXBwZW5kKHRhYmxlLCAoKCkgPT4gewogICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nOwogICAgICAgICAgICBidXR0b24uc3R5bGUubWFyZ2luID0gJzAuMmVtJzsKCiAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgogICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU1MTczXHU5NUVEJzsKICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbjsKICAgICAgICB9KSgpLCAoKCkgPT4gewogICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nOwogICAgICAgICAgICBidXR0b24uc3R5bGUubWFyZ2luID0gJzAuMmVtJzsKCiAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gbW9ua2V5LmNsZWFuQWxsRkxWc0luQ2FjaGUoKTsKCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTZFMDVcdTdBN0FcdThGRDlcdTRFMkFcdTg5QzZcdTk4OTFcdTc2ODRcdTdGMTNcdTVCNTgnOwogICAgICAgICAgICByZXR1cm4gYnV0dG9uOwogICAgICAgIH0pKCksICgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICBidXR0b24uc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7CiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5tYXJnaW4gPSAnMC4yZW0nOwoKICAgICAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnR3aW4uY2xlYXJDYWNoZURCKGNhY2hlKTsKCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTZFMDVcdTdBN0FcdTYyNDBcdTY3MDlcdTg5QzZcdTk4OTFcdTc2ODRcdTdGMTNcdTVCNTgnOwogICAgICAgICAgICByZXR1cm4gYnV0dG9uOwogICAgICAgIH0pKCkpOwoKICAgICAgICAvLyA2LiBjYW5jZWwgb24gZGVzdHJveQogICAgICAgIHRoaXMuY2lkU2Vzc2lvbkRlc3Ryb3kuYWRkQ2FsbGJhY2soKCkgPT4gewogICAgICAgICAgICBmbHZUcnMubWFwKHRyID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0ci5jaGlsZHJlblsxXS5jaGlsZHJlblswXTsKICAgICAgICAgICAgICAgIGlmIChhLnRleHRDb250ZW50ID09ICflj5bmtognKSBhLmNsaWNrKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gdGhpcy5jaWRTZXNzaW9uRG9tLmZsdkRpdiA9IGRpdjsKICAgIH0KCiAgICBkaXNwbGF5RkxWRGl2KGZsdkRpdiA9IHRoaXMuY2lkU2Vzc2lvbkRvbS5mbHZEaXYpIHsKICAgICAgICBpZiAoIWZsdkRpdikgewogICAgICAgICAgICBmbHZEaXYgPSB0aGlzLmJ1aWxkRkxWRGl2KCk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGZsdkRpdik7CiAgICAgICAgfQogICAgICAgIGZsdkRpdi5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgcmV0dXJuIGZsdkRpdjsKICAgIH0KCiAgICBhc3luYyBkb3dubG9hZEFsbEZMVnMoeyBhLCBtb25rZXkgPSB0aGlzLnR3aW4ubW9ua2V5LCB0YWJsZSA9IHRoaXMuY2lkU2Vzc2lvbkRvbS5mbHZUYWJsZSB9KSB7CiAgICAgICAgaWYgKHRoaXMuY2lkU2Vzc2lvbkRvbS5kb3dubG9hZEFsbFRyKSByZXR1cm47CgogICAgICAgIC8vIDEuIGhhbmcgcGxheWVyCiAgICAgICAgbW9ua2V5LmhhbmdQbGF5ZXIoKTsKCiAgICAgICAgLy8gMi4gZ2l2ZSBoYW5nIHBsYXllciBoaW50CiAgICAgICAgdGhpcy5jaWRTZXNzaW9uRG9tLmRvd25sb2FkQWxsVHIgPSAoKCkgPT4gewogICAgICAgICAgICBjb25zdCB0cjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZDEuY29sU3BhbiA9ICczJzsKICAgICAgICAgICAgdGQxLnRleHRDb250ZW50ID0gJ1x1NURGMlx1NUM0Rlx1ODUzRFx1N0Y1MVx1OTg3NVx1NjRBRFx1NjUzRVx1NTY2OFx1NzY4NFx1N0Y1MVx1N0VEQ1x1OTRGRVx1NjNBNVx1MzAwMlx1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1NTNFRlx1OTFDRFx1NjVCMFx1NkZDMFx1NkQzQlx1NjRBRFx1NjUzRVx1NTY2OFx1MzAwMic7CiAgICAgICAgICAgIHRyMS5hcHBlbmQodGQxKTsKICAgICAgICAgICAgcmV0dXJuIHRyMTsKICAgICAgICB9KSgpOwogICAgICAgIHRhYmxlLmFwcGVuZCh0aGlzLmNpZFNlc3Npb25Eb20uZG93bmxvYWRBbGxUcik7CgogICAgICAgIC8vIDMuIGNsaWNrIGRvd25sb2FkIGFsbCBzcGxpdAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9ua2V5LmZsdnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRhYmxlLnJvd3NbaV0uY2VsbHNbMV0uY2hpbGRyZW5bMF0udGV4dENvbnRlbnQgPT0gJ+e8k+WtmOacrOautScpIHRhYmxlLnJvd3NbaV0uY2VsbHNbMV0uY2hpbGRyZW5bMF0uY2xpY2soKTsKICAgICAgICB9CgogICAgICAgIC8vIDQuIHNldCBwcm9ncmVzcwogICAgICAgIGNvbnN0IHByb2dyZXNzID0gYS5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5jaGlsZHJlblswXTsKICAgICAgICBwcm9ncmVzcy5tYXggPSBtb25rZXkuZmx2cy5sZW5ndGggKyAxOwogICAgICAgIHByb2dyZXNzLnZhbHVlID0gMDsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vbmtleS5mbHZzLmxlbmd0aDsgaSsrKSBtb25rZXkuZ2V0RkxWKGkpLnRoZW4oZSA9PiBwcm9ncmVzcy52YWx1ZSsrKTsKCiAgICAgICAgLy8gNS4gbWVyZ2Ugc3BsaXRzCiAgICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCBtb25rZXkuZ2V0QWxsRkxWcygpOwogICAgICAgIGNvbnN0IGZsdiA9IGF3YWl0IEZMVi5tZXJnZUJsb2JzKGZpbGVzKTsKICAgICAgICBjb25zdCBocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmbHYpOwogICAgICAgIGNvbnN0IGFzcyA9IGF3YWl0IG1vbmtleS5nZXRBU1MoKTsKCiAgICAgICAgLyoqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudFtdfSAqLwogICAgICAgIGNvbnN0IHN1YnRpdGxlQXMgPSBhd2FpdCB0aGlzLmJ1aWxkU3VidGl0bGVBcygpOwogICAgICAgIGNvbnN0IHN1YnRpdGxlQXNzTGlzdCA9IHN1YnRpdGxlQXMubWFwKGEgPT4gewogICAgICAgICAgICBpZiAoYS5vbmNsaWNrICYmIHR5cGVvZiBhLm9uY2xpY2sgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAgIGEub25jbGljaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBuYW1lOiBhLnRleHQucmVwbGFjZSgvQVNTJC8sICIiKSwKICAgICAgICAgICAgICAgIGZpbGU6IGEuaHJlZgogICAgICAgICAgICB9OwogICAgICAgIH0pOwoKICAgICAgICBsZXQgb3V0cHV0TmFtZSA9IHRvcC5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaDEnKVswXS50ZXh0Q29udGVudC50cmltKCk7CiAgICAgICAgY29uc3QgcGFnZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmJpbGliaWxpLXBsYXllci12aWRlby10b3AtdGl0bGUsIC5tdWx0aS1wYWdlIC5vbiIpOwogICAgICAgIGlmIChwYWdlTmFtZUVsZW1lbnQpIHsKICAgICAgICAgICAgY29uc3QgcGFnZU5hbWUgPSBwYWdlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7CiAgICAgICAgICAgIGlmIChwYWdlTmFtZSAmJiBwYWdlTmFtZSAhPSBvdXRwdXROYW1lKSBvdXRwdXROYW1lICs9IGAgLSAke3BhZ2VOYW1lfWA7CiAgICAgICAgfQoKICAgICAgICAvLyA2LiBidWlsZCBkb3dubG9hZCBhbGwgdWkKICAgICAgICBwcm9ncmVzcy52YWx1ZSsrOwogICAgICAgIHRhYmxlLnByZXBlbmQoKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgdGQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgdGQxLmNvbFNwYW4gPSAnMyc7CiAgICAgICAgICAgIHRkMS5zdHlsZSA9ICdib3JkZXI6IDFweCBzb2xpZCBibGFjazsgd29yZC1icmVhazoga2VlcC1hbGw7JzsKICAgICAgICAgICAgY29uc3QgYTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGExLmhyZWYgPSBocmVmOwogICAgICAgICAgICBhMS5kb3dubG9hZCA9IGAke291dHB1dE5hbWV9LmZsdmA7CgogICAgICAgICAgICAoYSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb24uYXV0b0Rhbm1ha3UpIGEub25jbGljayA9ICgpID0+IGEubmV4dEVsZW1lbnRTaWJsaW5nLmNsaWNrKCk7CiAgICAgICAgICAgIH0pKGExKTsKCiAgICAgICAgICAgIGExLnRleHRDb250ZW50ID0gJ1x1NEZERFx1NUI1OFx1NTQwOFx1NUU3Nlx1NTQwRUZMVic7CiAgICAgICAgICAgIHRkMS5hcHBlbmQoYTEpOwogICAgICAgICAgICB0ZDEuYXBwZW5kKCcgJyk7CiAgICAgICAgICAgIGNvbnN0IGEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBhMi5ocmVmID0gYXNzOwogICAgICAgICAgICBhMi5kb3dubG9hZCA9IGAke291dHB1dE5hbWV9LmRhbm1ha3UuYXNzYDsKICAgICAgICAgICAgYTIudGV4dENvbnRlbnQgPSAnXHU1RjM5XHU1RTU1QVNTJzsKICAgICAgICAgICAgdGQxLmFwcGVuZChhMik7CiAgICAgICAgICAgIHRkMS5hcHBlbmQoJyAnKTsKICAgICAgICAgICAgY29uc3QgYTMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEzLmRvd25sb2FkID0gYCR7b3V0cHV0TmFtZX0uYWFjYDsKCiAgICAgICAgICAgIGEzLm9uY2xpY2sgPSBlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGFhY0EgPSBlLnRhcmdldDsKICAgICAgICAgICAgICAgIEZMVjJBQUMoZmx2KS50aGVuKGFhY0RhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYWFjRGF0YV0pOwogICAgICAgICAgICAgICAgICAgIGFhY0EuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgICAgICAgICAgYWFjQS5vbmNsaWNrID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBhYWNBLmNsaWNrKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGEzLnRleHRDb250ZW50ID0gJ1x1OTdGM1x1OTg5MUFBQyc7CiAgICAgICAgICAgIHRkMS5hcHBlbmQoYTMpOwogICAgICAgICAgICB0ZDEuYXBwZW5kKC4uLnN1YnRpdGxlQXMucmVkdWNlKChwLCBjKSA9PiB7CiAgICAgICAgICAgICAgICAvLyDlnKjmr4/kuIDpobnliY3mt7vliqDnqbrmoLwKICAgICAgICAgICAgICAgIHJldHVybiBwLmNvbmNhdCgnICcsICgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYTQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgYTQuaHJlZiA9IGMuaHJlZjsKICAgICAgICAgICAgICAgICAgICBhNC5kb3dubG9hZCA9IGAke291dHB1dE5hbWV9LiR7Yy5sYW59LmFzc2A7CiAgICAgICAgICAgICAgICAgICAgYTQudGV4dENvbnRlbnQgPSBjLnRleHRDb250ZW50OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBhNDsKICAgICAgICAgICAgICAgIH0pKCkpOwogICAgICAgICAgICB9LCBbXSkpOwogICAgICAgICAgICB0ZDEuYXBwZW5kKCcgJyk7CiAgICAgICAgICAgIGNvbnN0IGE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwoKICAgICAgICAgICAgYTQub25jbGljayA9IGUgPT4gbmV3IE1LVlRyYW5zbXV4ZXIoKS5leGVjKGhyZWYsIGFzcywgYCR7b3V0cHV0TmFtZX0ubWt2YCwgZS50YXJnZXQsIHN1YnRpdGxlQXNzTGlzdCk7CgogICAgICAgICAgICBhNC50ZXh0Q29udGVudCA9ICdcdTYyNTNcdTUzMDVNS1YoXHU4RjZGXHU1QjU3XHU1RTU1XHU1QzAxXHU4OEM1KSc7CiAgICAgICAgICAgIHRkMS5hcHBlbmQoYTQpOwogICAgICAgICAgICB0ZDEuYXBwZW5kKCcgJyk7CiAgICAgICAgICAgIHRkMS5hcHBlbmQoJ1x1OEJCMFx1NUY5N1x1NkUwNVx1NzQwNlx1NTIwNlx1NkJCNVx1N0YxM1x1NUI1OFx1NTRFNn4nKTsKICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDEpOwogICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgIH0pKCkpOwoKICAgICAgICByZXR1cm4gaHJlZjsKICAgIH0KCiAgICBhc3luYyBkb3dubG9hZEZMVih7IGEsIG1vbmtleSA9IHRoaXMudHdpbi5tb25rZXksIGluZGV4LCBwcm9ncmVzcyA9IHt9IH0pIHsKICAgICAgICAvLyAxLiBhZGQgYmVmb3JlVW5sb2FkSGFuZGxlcgogICAgICAgIGNvbnN0IGhhbmRsZXIgPSBlID0+IFVJLmJlZm9yZVVubG9hZEhhbmRsZXIoZSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGhhbmRsZXIpOwoKICAgICAgICAvLyAyLiBzd2l0Y2ggdG8gY2FuY2VsIHVpCiAgICAgICAgYS50ZXh0Q29udGVudCA9ICflj5bmtognOwogICAgICAgIGEub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgYS5vbmNsaWNrID0gbnVsbDsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGhhbmRsZXIpOwogICAgICAgICAgICBhLnRleHRDb250ZW50ID0gJ+W3suWPlua2iCc7CiAgICAgICAgICAgIG1vbmtleS5hYm9ydEZMVihpbmRleCk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gMy4gdHJ5IGRvd25sb2FkCiAgICAgICAgbGV0IHVybDsKICAgICAgICB0cnkgewogICAgICAgICAgICB1cmwgPSBhd2FpdCBtb25rZXkuZ2V0RkxWKGluZGV4LCAobG9hZGVkLCB0b3RhbCkgPT4gewogICAgICAgICAgICAgICAgcHJvZ3Jlc3MudmFsdWUgPSBsb2FkZWQ7CiAgICAgICAgICAgICAgICBwcm9ncmVzcy5tYXggPSB0b3RhbDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwodXJsKTsKICAgICAgICAgICAgaWYgKHByb2dyZXNzLnZhbHVlID09IDApIHByb2dyZXNzLnZhbHVlID0gcHJvZ3Jlc3MubWF4ID0gMTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGEub25jbGljayA9IG51bGw7CiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBoYW5kbGVyKTsKICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9ICfplJnor68nOwogICAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KCiAgICAgICAgLy8gNC4gc3dpdGNoIHRvIGNvbXBsZXRlIHVpCiAgICAgICAgYS5vbmNsaWNrID0gbnVsbDsKICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgaGFuZGxlcik7CiAgICAgICAgYS50ZXh0Q29udGVudCA9ICflj6blrZjkuLonOwogICAgICAgIGEuZG93bmxvYWQgPSBtb25rZXkuZmx2c1tpbmRleF0ubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLihmbHZ8bXA0KS8pWzBdOwogICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICByZXR1cm4gdXJsOwogICAgfQoKICAgIGFzeW5jIGRpc3BsYXlRdW90YSh0ZCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgY29uc3QgdGVtcG9yYXJ5U3RvcmFnZSA9IHdpbmRvdy5uYXZpZ2F0b3IudGVtcG9yYXJ5U3RvcmFnZSB8fCB3aW5kb3cubmF2aWdhdG9yLndlYmtpdFRlbXBvcmFyeVN0b3JhZ2UgfHwgd2luZG93Lm5hdmlnYXRvci5tb3pUZW1wb3JhcnlTdG9yYWdlIHx8IHdpbmRvdy5uYXZpZ2F0b3IubXNUZW1wb3JhcnlTdG9yYWdlOwogICAgICAgICAgICBpZiAoIXRlbXBvcmFyeVN0b3JhZ2UpIHJldHVybiByZXNvbHZlKHRkLnRleHRDb250ZW50ID0gJ+i/meS4qua1j+iniOWZqOS4jeaUr+aMgee8k+WtmOWRon7lhbPmjonmoIfnrb7pobXlkI7vvIznvJPlrZjpqazkuIrlsLHkvJrmtojlpLHlk6YnKTsKICAgICAgICAgICAgdGVtcG9yYXJ5U3RvcmFnZS5xdWVyeVVzYWdlQW5kUXVvdGEoKHVzYWdlLCBxdW90YSkgPT4gcmVzb2x2ZSh0ZC50ZXh0Q29udGVudCA9IGDnvJPlrZjlt7LnlKjnqbrpl7TvvJoke01hdGgucm91bmQodXNhZ2UgLyAxMDQ4NTc2KX0gTUIgLyAke01hdGgucm91bmQocXVvdGEgLyAxMDQ4NTc2KX0gTUIg5Lmf5YyF5ous5LqGQuermeacrOadpeeahOe8k+WtmGApKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyBNZW51IEFwcGVuZAogICAgYXN5bmMgYXBwZW5kTWVudShwbGF5ZXJXaW4gPSB0aGlzLnR3aW4ucGxheWVyV2luKSB7CiAgICAgICAgLy8gMS4gYnVpbGQgbW9ua2V5IG1lbnUgYW5kIHBvbHlmaWxsIG1lbnUKICAgICAgICBjb25zdCBtb25rZXlNZW51ID0gdGhpcy5idWlsZE1vbmtleU1lbnUoKTsKICAgICAgICBjb25zdCBwb2x5ZmlsbE1lbnUgPSB0aGlzLmJ1aWxkUG9seWZpbGxNZW51KCk7CgogICAgICAgIC8vIDIuIGJ1aWxkIHVsCiAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpOwoKICAgICAgICAvLyAzLiBhcHBlbmQgdG8gbWVudQogICAgICAgIHVsLmNsYXNzTmFtZSA9ICdiaWxpdHdpbic7CiAgICAgICAgdWwuc3R5bGUuYm9yZGVyQm90dG9tID0gJzFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LC4xMiknOwogICAgICAgIHVsLmFwcGVuZCguLi5bbW9ua2V5TWVudSwgcG9seWZpbGxNZW51XSk7CiAgICAgICAgY29uc3QgbWVudXMwID0gcGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtY29udGFpbmVyIGJsYWNrIGJpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtb3JpZ2luJyk7CiAgICAgICAgaWYgKG1lbnVzMC5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnVzMSA9IHBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LWNvbnRhaW5lciBibGFjayBiaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LW9yaWdpbicpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbnVzMiA9IHBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LWNvbnRhaW5lciBibGFjaycpOwogICAgICAgICAgICAgICAgICAgIGlmIChtZW51czEubGVuZ3RoID4gMCB8fCBtZW51czIubGVuZ3RoID49IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjYmlsaWJpbGlQbGF5ZXIiKSwgewogICAgICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFsiY2xhc3MiXQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGl2ID0gcGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtY29udGFpbmVyIGJsYWNrIGJpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtb3JpZ2luJylbMF0gfHwgWy4uLnBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItY29udGV4dC1tZW51LWNvbnRhaW5lciBibGFjaycpXS5wb3AoKTsKICAgICAgICBkaXYucHJlcGVuZCh1bCk7CgogICAgICAgIC8vIDQuIHNhdmUgdG8gY2FjaGUKICAgICAgICB0aGlzLmNpZFNlc3Npb25Eb20ubWVudVVsID0gdWw7CgogICAgICAgIHJldHVybiB1bDsKICAgIH0KCiAgICBidWlsZE1vbmtleU1lbnUoewogICAgICAgIHBsYXllcldpbiA9IHRoaXMudHdpbi5wbGF5ZXJXaW4sCiAgICAgICAgQmlsaU1vbmtleSA9IHRoaXMudHdpbi5CaWxpTW9ua2V5LAogICAgICAgIG1vbmtleSA9IHRoaXMudHdpbi5tb25rZXksCiAgICAgICAgdmlkZW9BID0gdGhpcy5jaWRTZXNzaW9uRG9tLnZpZGVvQSwKICAgICAgICBhc3NBID0gdGhpcy5jaWRTZXNzaW9uRG9tLmFzc0EKICAgIH0gPSB7fSkgewogICAgICAgIGxldCBjb250ZXh0X21lbnVfdmlkZW9BID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKCiAgICAgICAgewogICAgICAgICAgICBjb250ZXh0X21lbnVfdmlkZW9BLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICAgICAgY29udGV4dF9tZW51X3ZpZGVvQS5vbm1vdXNlb3ZlciA9IGFzeW5jICh7IHRhcmdldCB9KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmlkZW9BLm9ubW91c2VvdmVyKSBhd2FpdCB2aWRlb0Eub25tb3VzZW92ZXIoKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRleHROb2RlID0gdGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJyNkb3dubG9hZC1idG4tdmZvcm1hdCcpOwogICAgICAgICAgICAgICAgaWYgKHRleHROb2RlICYmIHRleHROb2RlLnRleHRDb250ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgdGV4dE5vZGUudGV4dENvbnRlbnQgPSBtb25rZXkudmlkZW9fZm9ybWF0ID8gbW9ua2V5LnZpZGVvX2Zvcm1hdC50b1VwcGVyQ2FzZSgpIDogJ0ZMVic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb250ZXh0X21lbnVfdmlkZW9BLm9uY2xpY2sgPSAoKSA9PiB2aWRlb0EuY2xpY2soKTsKCiAgICAgICAgICAgIGNvbnN0IGExID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBhMS5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgICAgICBjb25zdCBzcGFuMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgc3BhbjEuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgICAgICBhMS5hcHBlbmQoc3BhbjEpOwogICAgICAgICAgICBhMS5hcHBlbmQoJyBcdTRFMEJcdThGN0RcdTg5QzZcdTk4OTEnKTsKICAgICAgICAgICAgY29uc3QgZG93bmxvYWRCdG5WZm9ybWF0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICBkb3dubG9hZEJ0blZmb3JtYXQuaWQgPSAnZG93bmxvYWQtYnRuLXZmb3JtYXQnOwogICAgICAgICAgICBkb3dubG9hZEJ0blZmb3JtYXQudGV4dENvbnRlbnQgPSAnRkxWJzsKICAgICAgICAgICAgYTEuYXBwZW5kKGRvd25sb2FkQnRuVmZvcm1hdCk7CiAgICAgICAgICAgIGNvbnRleHRfbWVudV92aWRlb0EuYXBwZW5kKGExKTsKICAgICAgICB9CgogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jaWRTZXNzaW9uRG9tLCB7IGNvbnRleHRfbWVudV92aWRlb0EgfSk7CgogICAgICAgIC8qKiBAdHlwZSB7SFRNTExJRWxlbWVudH0gKi8KICAgICAgICBjb25zdCBkb3dubG9hZFN1YnRpdGxlc0NvbnRleHRNZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKCiAgICAgICAgewogICAgICAgICAgICBkb3dubG9hZFN1YnRpdGxlc0NvbnRleHRNZW51LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtbWVudSc7CgogICAgICAgICAgICBkb3dubG9hZFN1YnRpdGxlc0NvbnRleHRNZW51Lm9ubW91c2VvdmVyID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudFtdfSAqLwogICAgICAgICAgICAgICAgY29uc3Qgc3VidGl0bGVBcyA9IGF3YWl0IHRoaXMuYnVpbGRTdWJ0aXRsZUFzKCk7CgogICAgICAgICAgICAgICAgaWYgKHN1YnRpdGxlQXMgJiYgc3VidGl0bGVBcy5sZW5ndGggPiAwKSB7CgogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkU3VidGl0bGVzQ29udGV4dE1lbnUuYXBwZW5kQ2hpbGQoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdWwxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdWwxLmFwcGVuZCguLi5zdWJ0aXRsZUFzLm1hcChhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMS5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGExLm9uY2xpY2sgPSAoKSA9PiBhLmNsaWNrKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuMS5jbGFzc05hbWUgPSAndmlkZW8tY29udGV4dG1lbnUtaWNvbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMS5hcHBlbmQoc3BhbjEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYTEuYXBwZW5kKGEudGV4dC5yZXBsYWNlKC/lrZfluZVBU1MkLywgIiIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpLmFwcGVuZChhMSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bDE7CiAgICAgICAgICAgICAgICAgICAgfSkoKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZFN1YnRpdGxlc0NvbnRleHRNZW51LmFwcGVuZENoaWxkKCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVsMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGkuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGExID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgICAgICAgICBhMS5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGFuMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgc3BhbjEuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgICAgICAgICAgICAgICAgICBhMS5hcHBlbmQoc3BhbjEpOwogICAgICAgICAgICAgICAgICAgICAgICBhMS5hcHBlbmQoJyBcdTY1RTBcdTVCNTdcdTVFNTUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGkuYXBwZW5kKGExKTsKICAgICAgICAgICAgICAgICAgICAgICAgdWwxLmFwcGVuZChsaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bDE7CiAgICAgICAgICAgICAgICAgICAgfSkoKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZG93bmxvYWRTdWJ0aXRsZXNDb250ZXh0TWVudS5vbm1vdXNlb3ZlciA9IG51bGw7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBhMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgYTEuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICAgICAgY29uc3Qgc3BhbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICAgIHNwYW4xLmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICAgICAgYTEuYXBwZW5kKHNwYW4xKTsKICAgICAgICAgICAgYTEuYXBwZW5kKCcgXHU0RTBCXHU4RjdEXHU1QjU3XHU1RTU1QVNTJyk7CiAgICAgICAgICAgIGNvbnN0IHNwYW4yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICBzcGFuMi5jbGFzc05hbWUgPSAnYnB1aS1pY29uIGJwdWktaWNvbi1hcnJvdy1kb3duJzsKICAgICAgICAgICAgc3BhbjIuc3R5bGUgPSAndHJhbnNmb3JtOnJvdGF0ZSgtOTBkZWcpO21hcmdpbi10b3A6M3B4Oyc7CiAgICAgICAgICAgIGExLmFwcGVuZChzcGFuMik7CiAgICAgICAgICAgIGRvd25sb2FkU3VidGl0bGVzQ29udGV4dE1lbnUuYXBwZW5kKGExKTsKICAgICAgICB9Y29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtbWVudSBiaWxpdHdpbic7CgogICAgICAgIGxpLm9uY2xpY2sgPSAoKSA9PiBwbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpbGliaWxpUGxheWVyJykuY2xpY2soKTsKCiAgICAgICAgY29uc3QgYTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTEuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBhMS5hcHBlbmQoJ0JpbGlNb25rZXknKTsKICAgICAgICBjb25zdCBzcGFuMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMS5jbGFzc05hbWUgPSAnYnB1aS1pY29uIGJwdWktaWNvbi1hcnJvdy1kb3duJzsKICAgICAgICBzcGFuMS5zdHlsZSA9ICd0cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7bWFyZ2luLXRvcDozcHg7JzsKICAgICAgICBhMS5hcHBlbmQoc3BhbjEpOwogICAgICAgIGxpLmFwcGVuZChhMSk7CiAgICAgICAgY29uc3QgdWwxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgICB1bDEuYXBwZW5kKGNvbnRleHRfbWVudV92aWRlb0EpOwogICAgICAgIGNvbnN0IGxpMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkxLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTEub25jbGljayA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgaWYgKGFzc0Eub25tb3VzZW92ZXIpIGF3YWl0IGFzc0Eub25tb3VzZW92ZXIoKTsKICAgICAgICAgICAgYXNzQS5jbGljaygpOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEyLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjIuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGEyLmFwcGVuZChzcGFuMik7CiAgICAgICAgYTIuYXBwZW5kKCcgXHU0RTBCXHU4RjdEXHU1RjM5XHU1RTU1QVNTJyk7CiAgICAgICAgbGkxLmFwcGVuZChhMik7CiAgICAgICAgdWwxLmFwcGVuZChsaTEpOwogICAgICAgIHVsMS5hcHBlbmQoZG93bmxvYWRTdWJ0aXRsZXNDb250ZXh0TWVudSk7CiAgICAgICAgY29uc3QgbGkyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTIuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpMi5vbmNsaWNrID0gYXN5bmMgKCkgPT4gVUkuZGlzcGxheURvd25sb2FkQWxsUGFnZURlZmF1bHRGb3JtYXRzQm9keSgoYXdhaXQgQmlsaU1vbmtleS5nZXRBbGxQYWdlRGVmYXVsdEZvcm1hdHMocGxheWVyV2luLCBtb25rZXkpKSk7CgogICAgICAgIGNvbnN0IGEzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEzLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjMuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGEzLmFwcGVuZChzcGFuMyk7CiAgICAgICAgYTMuYXBwZW5kKCcgXHU2Mjc5XHU5MUNGXHU0RTBCXHU4RjdEJyk7CiAgICAgICAgbGkyLmFwcGVuZChhMyk7CiAgICAgICAgdWwxLmFwcGVuZChsaTIpOwogICAgICAgIGNvbnN0IGxpMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkzLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTMub25jbGljayA9ICgpID0+IHRoaXMuZGlzcGxheU9wdGlvbkRpdigpOwoKICAgICAgICBjb25zdCBhNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhNC5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW40ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW40LmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhNC5hcHBlbmQoc3BhbjQpOwogICAgICAgIGE0LmFwcGVuZCgnIFx1OEJCRVx1N0Y2RS9cdTVFMkVcdTUyQTkvXHU1MTczXHU0RThFJyk7CiAgICAgICAgbGkzLmFwcGVuZChhNCk7CiAgICAgICAgdWwxLmFwcGVuZChsaTMpOwogICAgICAgIGNvbnN0IGxpNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGk0LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTQub25jbGljayA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgbW9ua2V5LnByb3h5ID0gdHJ1ZTsKICAgICAgICAgICAgbW9ua2V5LmZsdnMgPSBudWxsOwogICAgICAgICAgICBVSS5oaW50SW5mbygn6K+356iN5YCZ77yM5Y+v6IO96ZyA6KaBMTDnp5Lml7bpl7TigKbigKYnLCBwbGF5ZXJXaW4pOwogICAgICAgICAgICAvLyBZZXMsIEkgQU0gbGF6eS4KICAgICAgICAgICAgcGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tYnRuLXF1YWxpdHkgPiBkaXYgdWwgbGlbZGF0YS12YWx1ZT0iODAiXScpLmNsaWNrKCk7CiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gcGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCd2aWRlbycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2VtcHRpZWQnLCByKSk7CiAgICAgICAgICAgIHJldHVybiBtb25rZXkucXVlcnlJbmZvKCd2aWRlbycpOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGE1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGE1LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjUuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGE1LmFwcGVuZChzcGFuNSk7CiAgICAgICAgYTUuYXBwZW5kKCcgKFx1NkQ0QilcdThGN0RcdTUxNjVcdTdGMTNcdTVCNThGTFYnKTsKICAgICAgICBsaTQuYXBwZW5kKGE1KTsKICAgICAgICB1bDEuYXBwZW5kKGxpNCk7CiAgICAgICAgY29uc3QgbGk1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTUuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpNS5vbmNsaWNrID0gKCkgPT4gdG9wLmxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKCiAgICAgICAgY29uc3QgYTYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTYuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuNi5jbGFzc05hbWUgPSAndmlkZW8tY29udGV4dG1lbnUtaWNvbic7CiAgICAgICAgYTYuYXBwZW5kKHNwYW42KTsKICAgICAgICBhNi5hcHBlbmQoJyAoXHU2RDRCKVx1NUYzQVx1NTIzNlx1NTIzN1x1NjVCMCcpOwogICAgICAgIGxpNS5hcHBlbmQoYTYpOwogICAgICAgIHVsMS5hcHBlbmQobGk1KTsKICAgICAgICBjb25zdCBsaTYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpNi5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWZ1bmN0aW9uJzsKCiAgICAgICAgbGk2Lm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNpZFNlc3Npb25EZXN0cm95KCkgJiYgdGhpcy5jaWRTZXNzaW9uUmVuZGVyKCk7CgogICAgICAgIGNvbnN0IGE3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGE3LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjcuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGE3LmFwcGVuZChzcGFuNyk7CiAgICAgICAgYTcuYXBwZW5kKCcgKFx1NkQ0QilcdTkxQ0RcdTU0MkZcdTgxMUFcdTY3MkMnKTsKICAgICAgICBsaTYuYXBwZW5kKGE3KTsKICAgICAgICB1bDEuYXBwZW5kKGxpNik7CiAgICAgICAgY29uc3QgbGk3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTcuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpNy5vbmNsaWNrID0gKCkgPT4gcGxheWVyV2luLnBsYXllciAmJiBwbGF5ZXJXaW4ucGxheWVyLmRlc3Ryb3koKTsKCiAgICAgICAgY29uc3QgYTggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTguY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuOC5jbGFzc05hbWUgPSAndmlkZW8tY29udGV4dG1lbnUtaWNvbic7CiAgICAgICAgYTguYXBwZW5kKHNwYW44KTsKICAgICAgICBhOC5hcHBlbmQoJyAoXHU2RDRCKVx1OTUwMFx1NkJDMVx1NjRBRFx1NjUzRVx1NTY2OCcpOwogICAgICAgIGxpNy5hcHBlbmQoYTgpOwogICAgICAgIHVsMS5hcHBlbmQobGk3KTsKICAgICAgICBsaS5hcHBlbmQodWwxKTsKCgogICAgICAgIHJldHVybiBsaTsKICAgIH0KCiAgICBidWlsZFBvbHlmaWxsTWVudSh7CiAgICAgICAgcGxheWVyV2luID0gdGhpcy50d2luLnBsYXllcldpbiwKICAgICAgICBCaWxpUG9seWZpbGwgPSB0aGlzLnR3aW4uQmlsaVBvbHlmaWxsLAogICAgICAgIHBvbHlmaWxsID0gdGhpcy50d2luLnBvbHlmaWxsCiAgICB9ID0ge30pIHsKICAgICAgICBsZXQgb3BlZCA9IFtdOwogICAgICAgIGNvbnN0IEJpbGlEYW5tYWt1U2V0dGluZ3MgPSBwb2x5ZmlsbC5CaWxpRGFubWFrdVNldHRpbmdzOwogICAgICAgIGNvbnN0IHJlZnJlc2hTZXNzaW9uID0gbmV3IEhvb2tlZEZ1bmN0aW9uKCgpID0+IG9wZWQgPSBwb2x5ZmlsbC51c2VyZGF0YS5vcGVkW3BvbHlmaWxsLmdldENvbGxlY3Rpb25JZCgpXSB8fCBbXSk7IC8vIGFzIGEgY29udmVuaWVudCBjYWxsYmFjayByZWdpc3RlcgogICAgICAgIGNvbnN0IGxpMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkxLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtbWVudSBiaWxpdHdpbic7CgogICAgICAgIGxpMS5vbmNsaWNrID0gKCkgPT4gcGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxpYmlsaVBsYXllcicpLmNsaWNrKCk7CgogICAgICAgIGNvbnN0IGEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEyLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CgogICAgICAgIGEyLm9ubW91c2VvdmVyID0gKCkgPT4gcmVmcmVzaFNlc3Npb24oKTsKCiAgICAgICAgYTIuYXBwZW5kKCdCaWxpUG9seWZpbGwnKTsKICAgICAgICBjb25zdCBzcGFuMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMi5jbGFzc05hbWUgPSAnYnB1aS1pY29uIGJwdWktaWNvbi1hcnJvdy1kb3duJzsKICAgICAgICBzcGFuMi5zdHlsZSA9ICd0cmFuc2Zvcm06cm90YXRlKC05MGRlZyk7bWFyZ2luLXRvcDozcHg7JzsKICAgICAgICBhMi5hcHBlbmQoc3BhbjIpOwogICAgICAgIGxpMS5hcHBlbmQoYTIpOwogICAgICAgIGNvbnN0IHVsMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgY29uc3QgbGkyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTIuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpMi5vbmNsaWNrID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBjb25zdCB3ID0gdG9wLndpbmRvdy5vcGVuKCIiLCAnX2JsYW5rJyk7dy5sb2NhdGlvbiA9IGF3YWl0IHBvbHlmaWxsLmdldENvdmVySW1hZ2UoKTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBhMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMy5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW4zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4zLmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhMy5hcHBlbmQoc3BhbjMpOwogICAgICAgIGEzLmFwcGVuZCgnIFx1ODNCN1x1NTNENlx1NUMwMVx1OTc2MicpOwogICAgICAgIGxpMi5hcHBlbmQoYTMpOwogICAgICAgIHVsMi5hcHBlbmQobGkyKTsKICAgICAgICBjb25zdCBsaTMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpMy5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LW1lbnUnOwogICAgICAgIGNvbnN0IGE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGE0LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjQuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGE0LmFwcGVuZChzcGFuNCk7CiAgICAgICAgYTQuYXBwZW5kKCcgXHU2NkY0XHU1OTFBXHU2NEFEXHU2NTNFXHU5MDFGXHU1RUE2Jyk7CiAgICAgICAgY29uc3Qgc3BhbjUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjUuY2xhc3NOYW1lID0gJ2JwdWktaWNvbiBicHVpLWljb24tYXJyb3ctZG93bic7CiAgICAgICAgc3BhbjUuc3R5bGUgPSAndHJhbnNmb3JtOnJvdGF0ZSgtOTBkZWcpO21hcmdpbi10b3A6M3B4Oyc7CiAgICAgICAgYTQuYXBwZW5kKHNwYW41KTsKICAgICAgICBsaTMuYXBwZW5kKGE0KTsKICAgICAgICBjb25zdCB1bDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpOwogICAgICAgIGNvbnN0IGxpNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGk0LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTQub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgcG9seWZpbGwuc2V0VmlkZW9TcGVlZCgwLjEpOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGE1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGE1LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjYuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGE1LmFwcGVuZChzcGFuNik7CiAgICAgICAgYTUuYXBwZW5kKCcgMC4xJyk7CiAgICAgICAgbGk0LmFwcGVuZChhNSk7CiAgICAgICAgdWwzLmFwcGVuZChsaTQpOwogICAgICAgIGNvbnN0IGxpNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGk1LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTUub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgcG9seWZpbGwuc2V0VmlkZW9TcGVlZCgzKTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBhNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhNi5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW43ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW43LmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhNi5hcHBlbmQoc3BhbjcpOwogICAgICAgIGE2LmFwcGVuZCgnIDMnKTsKICAgICAgICBsaTUuYXBwZW5kKGE2KTsKICAgICAgICB1bDMuYXBwZW5kKGxpNSk7CiAgICAgICAgY29uc3QgbGk2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTYuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpNi5vbmNsaWNrID0gZSA9PiBwb2x5ZmlsbC5zZXRWaWRlb1NwZWVkKGUudGFyZ2V0LmNoaWxkcmVuWzFdLnZhbHVlKTsKCiAgICAgICAgY29uc3QgYTcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTcuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuOC5jbGFzc05hbWUgPSAndmlkZW8tY29udGV4dG1lbnUtaWNvbic7CiAgICAgICAgYTcuYXBwZW5kKHNwYW44KTsKICAgICAgICBhNy5hcHBlbmQoJyBcdTcwQjlcdTUxRkJcdTc4NkVcdThCQTQnKTsKICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgaW5wdXQudHlwZSA9ICd0ZXh0JzsKICAgICAgICBpbnB1dC5zdHlsZSA9ICd3aWR0aDogMzVweDsgaGVpZ2h0OiA3MCU7IGNvbG9yOmJsYWNrOyc7CgogICAgICAgIGlucHV0Lm9uY2xpY2sgPSBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgIChlID0+IHJlZnJlc2hTZXNzaW9uLmFkZENhbGxiYWNrKCgpID0+IGUudmFsdWUgPSBwb2x5ZmlsbC52aWRlby5wbGF5YmFja1JhdGUpKShpbnB1dCk7CgogICAgICAgIGE3LmFwcGVuZChpbnB1dCk7CiAgICAgICAgbGk2LmFwcGVuZChhNyk7CiAgICAgICAgdWwzLmFwcGVuZChsaTYpOwogICAgICAgIGxpMy5hcHBlbmQodWwzKTsKICAgICAgICB1bDIuYXBwZW5kKGxpMyk7CiAgICAgICAgY29uc3QgbGk3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTcuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1tZW51JzsKICAgICAgICBjb25zdCBhOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhOC5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW45ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW45LmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhOC5hcHBlbmQoc3BhbjkpOwogICAgICAgIGE4LmFwcGVuZCgnIFx1ODFFQVx1NUI5QVx1NEU0OVx1NUYzOVx1NUU1NVx1NUI1N1x1NEY1MycpOwogICAgICAgIGNvbnN0IHNwYW4xMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMTAuY2xhc3NOYW1lID0gJ2JwdWktaWNvbiBicHVpLWljb24tYXJyb3ctZG93bic7CiAgICAgICAgc3BhbjEwLnN0eWxlID0gJ3RyYW5zZm9ybTpyb3RhdGUoLTkwZGVnKTttYXJnaW4tdG9wOjNweDsnOwogICAgICAgIGE4LmFwcGVuZChzcGFuMTApOwogICAgICAgIGxpNy5hcHBlbmQoYTgpOwogICAgICAgIGNvbnN0IHVsNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgY29uc3QgbGk4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTguY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpOC5vbmNsaWNrID0gZSA9PiB7CiAgICAgICAgICAgIEJpbGlEYW5tYWt1U2V0dGluZ3Muc2V0KCdmb250ZmFtaWx5JywgZS50YXJnZXQubGFzdENoaWxkLnZhbHVlKTsKICAgICAgICAgICAgcGxheWVyV2luLmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGE5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGE5LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICBpbnB1dDEudHlwZSA9ICd0ZXh0JzsKICAgICAgICBpbnB1dDEuc3R5bGUgPSAnd2lkdGg6IDEwOHB4OyBoZWlnaHQ6IDcwJTsgY29sb3I6YmxhY2s7JzsKCiAgICAgICAgaW5wdXQxLm9uY2xpY2sgPSBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgIChlID0+IHJlZnJlc2hTZXNzaW9uLmFkZENhbGxiYWNrKCgpID0+IGUudmFsdWUgPSBCaWxpRGFubWFrdVNldHRpbmdzLmdldCgnZm9udGZhbWlseScpKSkoaW5wdXQxKTsKCiAgICAgICAgYTkuYXBwZW5kKGlucHV0MSk7CiAgICAgICAgbGk4LmFwcGVuZChhOSk7CiAgICAgICAgdWw0LmFwcGVuZChsaTgpOwogICAgICAgIGNvbnN0IGxpOSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGk5LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTkub25jbGljayA9IGUgPT4gewogICAgICAgICAgICBCaWxpRGFubWFrdVNldHRpbmdzLnNldCgnZm9udGZhbWlseScsIGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy5xdWVyeVNlbGVjdG9yKCJpbnB1dCIpLnZhbHVlKTsKICAgICAgICAgICAgcGxheWVyV2luLmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGExMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMTAuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBhMTAudGV4dENvbnRlbnQgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg54K55Ye756Gu6K6k5bm25Yi35pawCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgIGxpOS5hcHBlbmQoYTEwKTsKICAgICAgICB1bDQuYXBwZW5kKGxpOSk7CiAgICAgICAgbGk3LmFwcGVuZCh1bDQpOwogICAgICAgIHVsMi5hcHBlbmQobGk3KTsKICAgICAgICBjb25zdCBsaTEwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTEwLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtbWVudSc7CiAgICAgICAgY29uc3QgYTExID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGExMS5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW4xMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMTEuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGExMS5hcHBlbmQoc3BhbjExKTsKICAgICAgICBhMTEuYXBwZW5kKCcgXHU3MjQ3XHU1OTM0XHU3MjQ3XHU1QzNFJyk7CiAgICAgICAgY29uc3Qgc3BhbjEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4xMi5jbGFzc05hbWUgPSAnYnB1aS1pY29uIGJwdWktaWNvbi1hcnJvdy1kb3duJzsKICAgICAgICBzcGFuMTIuc3R5bGUgPSAndHJhbnNmb3JtOnJvdGF0ZSgtOTBkZWcpO21hcmdpbi10b3A6M3B4Oyc7CiAgICAgICAgYTExLmFwcGVuZChzcGFuMTIpOwogICAgICAgIGxpMTAuYXBwZW5kKGExMSk7CiAgICAgICAgY29uc3QgdWw1ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgICBjb25zdCBsaTExID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTExLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTExLm9uY2xpY2sgPSAoKSA9PiBwb2x5ZmlsbC5tYXJrT1BFRFBvc2l0aW9uKDApOwoKICAgICAgICBjb25zdCBhMTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTEyLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjEzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4xMy5jbGFzc05hbWUgPSAndmlkZW8tY29udGV4dG1lbnUtaWNvbic7CiAgICAgICAgYTEyLmFwcGVuZChzcGFuMTMpOwogICAgICAgIGExMi5hcHBlbmQoJyBcdTcyNDdcdTU5MzRcdTVGMDBcdTU5Q0I6Jyk7CiAgICAgICAgY29uc3Qgc3BhbjE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwoKICAgICAgICAoZSA9PiByZWZyZXNoU2Vzc2lvbi5hZGRDYWxsYmFjaygoKSA9PiBlLnRleHRDb250ZW50ID0gb3BlZFswXSA/IEJpbGlQb2x5ZmlsbC5zZWNvbmRUb1JlYWRhYmxlKG9wZWRbMF0pIDogJ+aXoCcpKShzcGFuMTQpOwoKICAgICAgICBhMTIuYXBwZW5kKHNwYW4xNCk7CiAgICAgICAgbGkxMS5hcHBlbmQoYTEyKTsKICAgICAgICB1bDUuYXBwZW5kKGxpMTEpOwogICAgICAgIGNvbnN0IGxpMTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpMTIuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpMTIub25jbGljayA9ICgpID0+IHBvbHlmaWxsLm1hcmtPUEVEUG9zaXRpb24oMSk7CgogICAgICAgIGNvbnN0IGExMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMTMuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuMTUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjE1LmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhMTMuYXBwZW5kKHNwYW4xNSk7CiAgICAgICAgYTEzLmFwcGVuZCgnIFx1NzI0N1x1NTkzNFx1N0VEM1x1Njc1RjonKTsKICAgICAgICBjb25zdCBzcGFuMTYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CgogICAgICAgIChlID0+IHJlZnJlc2hTZXNzaW9uLmFkZENhbGxiYWNrKCgpID0+IGUudGV4dENvbnRlbnQgPSBvcGVkWzFdID8gQmlsaVBvbHlmaWxsLnNlY29uZFRvUmVhZGFibGUob3BlZFsxXSkgOiAn5pegJykpKHNwYW4xNik7CgogICAgICAgIGExMy5hcHBlbmQoc3BhbjE2KTsKICAgICAgICBsaTEyLmFwcGVuZChhMTMpOwogICAgICAgIHVsNS5hcHBlbmQobGkxMik7CiAgICAgICAgY29uc3QgbGkxMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkxMy5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWZ1bmN0aW9uJzsKCiAgICAgICAgbGkxMy5vbmNsaWNrID0gKCkgPT4gcG9seWZpbGwubWFya09QRURQb3NpdGlvbigyKTsKCiAgICAgICAgY29uc3QgYTE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGExNC5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW4xNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMTcuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGExNC5hcHBlbmQoc3BhbjE3KTsKICAgICAgICBhMTQuYXBwZW5kKCcgXHU3MjQ3XHU1QzNFXHU1RjAwXHU1OUNCOicpOwogICAgICAgIGNvbnN0IHNwYW4xOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKCiAgICAgICAgKGUgPT4gcmVmcmVzaFNlc3Npb24uYWRkQ2FsbGJhY2soKCkgPT4gZS50ZXh0Q29udGVudCA9IG9wZWRbMl0gPyBCaWxpUG9seWZpbGwuc2Vjb25kVG9SZWFkYWJsZShvcGVkWzJdKSA6ICfml6AnKSkoc3BhbjE4KTsKCiAgICAgICAgYTE0LmFwcGVuZChzcGFuMTgpOwogICAgICAgIGxpMTMuYXBwZW5kKGExNCk7CiAgICAgICAgdWw1LmFwcGVuZChsaTEzKTsKICAgICAgICBjb25zdCBsaTE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTE0LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTE0Lm9uY2xpY2sgPSAoKSA9PiBwb2x5ZmlsbC5tYXJrT1BFRFBvc2l0aW9uKDMpOwoKICAgICAgICBjb25zdCBhMTUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTE1LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgY29uc3Qgc3BhbjE5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4xOS5jbGFzc05hbWUgPSAndmlkZW8tY29udGV4dG1lbnUtaWNvbic7CiAgICAgICAgYTE1LmFwcGVuZChzcGFuMTkpOwogICAgICAgIGExNS5hcHBlbmQoJyBcdTcyNDdcdTVDM0VcdTdFRDNcdTY3NUY6Jyk7CiAgICAgICAgY29uc3Qgc3BhbjIwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwoKICAgICAgICAoZSA9PiByZWZyZXNoU2Vzc2lvbi5hZGRDYWxsYmFjaygoKSA9PiBlLnRleHRDb250ZW50ID0gb3BlZFszXSA/IEJpbGlQb2x5ZmlsbC5zZWNvbmRUb1JlYWRhYmxlKG9wZWRbM10pIDogJ+aXoCcpKShzcGFuMjApOwoKICAgICAgICBhMTUuYXBwZW5kKHNwYW4yMCk7CiAgICAgICAgbGkxNC5hcHBlbmQoYTE1KTsKICAgICAgICB1bDUuYXBwZW5kKGxpMTQpOwogICAgICAgIGNvbnN0IGxpMTUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpMTUuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpMTUub25jbGljayA9ICgpID0+IHBvbHlmaWxsLmNsZWFyT1BFRFBvc2l0aW9uKCk7CgogICAgICAgIGNvbnN0IGExNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMTYuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuMjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjIxLmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhMTYuYXBwZW5kKHNwYW4yMSk7CiAgICAgICAgYTE2LmFwcGVuZCgnIFx1NTNENlx1NkQ4OFx1NjgwN1x1OEJCMCcpOwogICAgICAgIGxpMTUuYXBwZW5kKGExNik7CiAgICAgICAgdWw1LmFwcGVuZChsaTE1KTsKICAgICAgICBjb25zdCBsaTE2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTE2LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTE2Lm9uY2xpY2sgPSAoKSA9PiB0aGlzLmRpc3BsYXlQb2x5ZmlsbERhdGFEaXYoKTsKCiAgICAgICAgY29uc3QgYTE3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGExNy5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW4yMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMjIuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGExNy5hcHBlbmQoc3BhbjIyKTsKICAgICAgICBhMTcuYXBwZW5kKCcgXHU2OEMwXHU4OUM2XHU2NTcwXHU2MzZFL1x1OEJGNFx1NjYwRScpOwogICAgICAgIGxpMTYuYXBwZW5kKGExNyk7CiAgICAgICAgdWw1LmFwcGVuZChsaTE2KTsKICAgICAgICBsaTEwLmFwcGVuZCh1bDUpOwogICAgICAgIHVsMi5hcHBlbmQobGkxMCk7CiAgICAgICAgY29uc3QgbGkxNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkxNy5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LW1lbnUnOwogICAgICAgIGNvbnN0IGExOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMTguY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuMjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjIzLmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhMTguYXBwZW5kKHNwYW4yMyk7CiAgICAgICAgYTE4LmFwcGVuZCgnIFx1NjI3RVx1NEUwQVx1NEUwQlx1OTZDNicpOwogICAgICAgIGNvbnN0IHNwYW4yNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMjQuY2xhc3NOYW1lID0gJ2JwdWktaWNvbiBicHVpLWljb24tYXJyb3ctZG93bic7CiAgICAgICAgc3BhbjI0LnN0eWxlID0gJ3RyYW5zZm9ybTpyb3RhdGUoLTkwZGVnKTttYXJnaW4tdG9wOjNweDsnOwogICAgICAgIGExOC5hcHBlbmQoc3BhbjI0KTsKICAgICAgICBsaTE3LmFwcGVuZChhMTgpOwogICAgICAgIGNvbnN0IHVsNiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgY29uc3QgbGkxOCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkxOC5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWZ1bmN0aW9uJzsKCiAgICAgICAgbGkxOC5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICBpZiAocG9seWZpbGwuc2VyaWVzWzBdKSB7CiAgICAgICAgICAgICAgICB0b3Aud2luZG93Lm9wZW4oYGh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS92aWRlby9hdiR7cG9seWZpbGwuc2VyaWVzWzBdLmFpZH1gLCAnX2JsYW5rJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBjb25zdCBhMTkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTE5LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgYTE5LnN0eWxlLndpZHRoID0gJ2luaXRpYWwnOwogICAgICAgIGNvbnN0IHNwYW4yNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMjUuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGExOS5hcHBlbmQoc3BhbjI1KTsKICAgICAgICBjb25zdCBzcGFuMjYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CgogICAgICAgIChlID0+IHJlZnJlc2hTZXNzaW9uLmFkZENhbGxiYWNrKCgpID0+IGUudGV4dENvbnRlbnQgPSBwb2x5ZmlsbC5zZXJpZXNbMF0gPyBwb2x5ZmlsbC5zZXJpZXNbMF0udGl0bGUgOiAn5om+5LiN5YiwJykpKHNwYW4yNik7CgogICAgICAgIGExOS5hcHBlbmQoc3BhbjI2KTsKICAgICAgICBsaTE4LmFwcGVuZChhMTkpOwogICAgICAgIHVsNi5hcHBlbmQobGkxOCk7CiAgICAgICAgY29uc3QgbGkxOSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkxOS5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWZ1bmN0aW9uJzsKCiAgICAgICAgbGkxOS5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICBpZiAocG9seWZpbGwuc2VyaWVzWzFdKSB7CiAgICAgICAgICAgICAgICB0b3Aud2luZG93Lm9wZW4oYGh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS92aWRlby9hdiR7cG9seWZpbGwuc2VyaWVzWzFdLmFpZH1gLCAnX2JsYW5rJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBjb25zdCBhMjAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYTIwLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtYSc7CiAgICAgICAgYTIwLnN0eWxlLndpZHRoID0gJ2luaXRpYWwnOwogICAgICAgIGNvbnN0IHNwYW4yNyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMjcuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGEyMC5hcHBlbmQoc3BhbjI3KTsKICAgICAgICBjb25zdCBzcGFuMjggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CgogICAgICAgIChlID0+IHJlZnJlc2hTZXNzaW9uLmFkZENhbGxiYWNrKCgpID0+IGUudGV4dENvbnRlbnQgPSBwb2x5ZmlsbC5zZXJpZXNbMV0gPyBwb2x5ZmlsbC5zZXJpZXNbMV0udGl0bGUgOiAn5om+5LiN5YiwJykpKHNwYW4yOCk7CgogICAgICAgIGEyMC5hcHBlbmQoc3BhbjI4KTsKICAgICAgICBsaTE5LmFwcGVuZChhMjApOwogICAgICAgIHVsNi5hcHBlbmQobGkxOSk7CiAgICAgICAgbGkxNy5hcHBlbmQodWw2KTsKICAgICAgICB1bDIuYXBwZW5kKGxpMTcpOwogICAgICAgIGNvbnN0IGxpMjAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpMjAuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpMjAub25jbGljayA9ICgpID0+IEJpbGlQb2x5ZmlsbC5vcGVuTWluaW1pemVkUGxheWVyKCk7CgogICAgICAgIGNvbnN0IGEyMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMjEuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuMjkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjI5LmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhMjEuYXBwZW5kKHNwYW4yOSk7CiAgICAgICAgYTIxLmFwcGVuZCgnIFx1NUMwRlx1N0E5N1x1NjRBRFx1NjUzRScpOwogICAgICAgIGxpMjAuYXBwZW5kKGEyMSk7CiAgICAgICAgdWwyLmFwcGVuZChsaTIwKTsKICAgICAgICBjb25zdCBsaTIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaTIxLmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUtZnVuY3Rpb24nOwoKICAgICAgICBsaTIxLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmRpc3BsYXlPcHRpb25EaXYoKTsKCiAgICAgICAgY29uc3QgYTIyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEyMi5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWEnOwogICAgICAgIGNvbnN0IHNwYW4zMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuMzAuY2xhc3NOYW1lID0gJ3ZpZGVvLWNvbnRleHRtZW51LWljb24nOwogICAgICAgIGEyMi5hcHBlbmQoc3BhbjMwKTsKICAgICAgICBhMjIuYXBwZW5kKCcgXHU4QkJFXHU3RjZFL1x1NUUyRVx1NTJBOS9cdTUxNzNcdTRFOEUnKTsKICAgICAgICBsaTIxLmFwcGVuZChhMjIpOwogICAgICAgIHVsMi5hcHBlbmQobGkyMSk7CiAgICAgICAgY29uc3QgbGkyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkyMi5jbGFzc05hbWUgPSAnY29udGV4dC1tZW51LWZ1bmN0aW9uJzsKCiAgICAgICAgbGkyMi5vbmNsaWNrID0gKCkgPT4gcG9seWZpbGwuc2F2ZVVzZXJkYXRhKCk7CgogICAgICAgIGNvbnN0IGEyMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMjMuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuMzEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjMxLmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhMjMuYXBwZW5kKHNwYW4zMSk7CiAgICAgICAgYTIzLmFwcGVuZCgnIChcdTZENEIpXHU3QUNCXHU1MzczXHU0RkREXHU1QjU4XHU2NTcwXHU2MzZFJyk7CiAgICAgICAgbGkyMi5hcHBlbmQoYTIzKTsKICAgICAgICB1bDIuYXBwZW5kKGxpMjIpOwogICAgICAgIGNvbnN0IGxpMjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpMjMuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1mdW5jdGlvbic7CgogICAgICAgIGxpMjMub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgQmlsaVBvbHlmaWxsLmNsZWFyQWxsVXNlcmRhdGEocGxheWVyV2luKTsKICAgICAgICAgICAgcG9seWZpbGwucmV0cmlldmVVc2VyZGF0YSgpOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGEyNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhMjQuY2xhc3NOYW1lID0gJ2NvbnRleHQtbWVudS1hJzsKICAgICAgICBjb25zdCBzcGFuMzIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc3BhbjMyLmNsYXNzTmFtZSA9ICd2aWRlby1jb250ZXh0bWVudS1pY29uJzsKICAgICAgICBhMjQuYXBwZW5kKHNwYW4zMik7CiAgICAgICAgYTI0LmFwcGVuZCgnIChcdTZENEIpXHU1RjNBXHU1MjM2XHU2RTA1XHU3QTdBXHU2NTcwXHU2MzZFJyk7CiAgICAgICAgbGkyMy5hcHBlbmQoYTI0KTsKICAgICAgICB1bDIuYXBwZW5kKGxpMjMpOwogICAgICAgIGxpMS5hcHBlbmQodWwyKTsKICAgICAgICByZXR1cm4gbGkxOwogICAgfQoKICAgIGJ1aWxkT3B0aW9uRGl2KHR3aW4gPSB0aGlzLnR3aW4pIHsKICAgICAgICBjb25zdCBkaXYgPSBVSS5nZW5EaXYoKTsKCiAgICAgICAgZGl2LmFwcGVuZCh0aGlzLmJ1aWxkTW9ua2V5T3B0aW9uVGFibGUoKSwgdGhpcy5idWlsZFBvbHlmaWxsT3B0aW9uVGFibGUoKSwgdGhpcy5idWlsZFVJT3B0aW9uVGFibGUoKSwgKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgdGFibGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICAgICAgdGFibGUxLnN0eWxlLndpZHRoID0gJzEwMCUnOwogICAgICAgICAgICB0YWJsZTEuc3R5bGUubGluZUhlaWdodCA9ICcyZW0nOwogICAgICAgICAgICBjb25zdCB0cjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZDEudGV4dENvbnRlbnQgPSAnXHU4QkJFXHU3RjZFXHU4MUVBXHU1MkE4XHU0RkREXHU1QjU4XHVGRjBDXHU1MjM3XHU2NUIwXHU1NDBFXHU3NTFGXHU2NTQ4XHUzMDAyJzsKICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDEpOwogICAgICAgICAgICB0YWJsZTEuYXBwZW5kKHRyMSk7CiAgICAgICAgICAgIGNvbnN0IHRyMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgIGNvbnN0IHRkMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIHRkMi50ZXh0Q29udGVudCA9ICdcdTg5QzZcdTk4OTFcdTRFMEJcdThGN0RcdTdFQzRcdTRFRjZcdTc2ODRcdTdGMTNcdTVCNThcdTUyOUZcdTgwRkRcdTUzRUFcdTU3MjhXaW5kb3dzK0Nocm9tZVx1NkQ0Qlx1OEJENVx1OEZDN1x1RkYwQ1x1NTk4Mlx1Njc5Q1x1NTFGQVx1NzNCMFx1OTVFRVx1OTg5OFx1RkYwQ1x1OEJGN1x1NTE3M1x1OTVFRFx1N0YxM1x1NUI1OFx1MzAwMic7CiAgICAgICAgICAgIHRyMi5hcHBlbmQodGQyKTsKICAgICAgICAgICAgdGFibGUxLmFwcGVuZCh0cjIpOwogICAgICAgICAgICBjb25zdCB0cjMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCB0ZDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZDMudGV4dENvbnRlbnQgPSAnXHU1MjlGXHU4MEZEXHU1ODlFXHU1RjNBXHU3RUM0XHU0RUY2XHU1QzNEXHU5MUNGXHU0RkREXHU4QkMxXHU0RTg2XHU1MTdDXHU1QkI5XHU2MDI3XHUzMDAyXHU0RjQ2XHU1OTgyXHU2NzlDXHU2NzA5XHU1NDBDXHU1MjlGXHU4MEZEXHU4MTFBXHU2NzJDL1x1NjNEMlx1NEVGNlx1RkYwQ1x1OEJGN1x1NTE3M1x1OTVFRFx1NjcyQ1x1NjNEMlx1NEVGNlx1NzY4NFx1NUJGOVx1NUU5NFx1NTI5Rlx1ODBGRFx1MzAwMic7CiAgICAgICAgICAgIHRyMy5hcHBlbmQodGQzKTsKICAgICAgICAgICAgdGFibGUxLmFwcGVuZCh0cjMpOwogICAgICAgICAgICBjb25zdCB0cjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCB0ZDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZDQudGV4dENvbnRlbnQgPSAnXHU4RkQ5XHU0RTJBXHU4MTFBXHU2NzJDXHU0RTQzXHUyMDFDXHU2MzA5XHU1MzlGXHU2ODM3XHUyMDFEXHU2M0QwXHU0RjlCXHVGRjBDXHU0RTBEXHU5NjQ0XHU1RTI2XHU0RUZCXHU0RjU1XHU2NjBFXHU3OTNBXHVGRjBDXHU2Njk3XHU3OTNBXHU2MjE2XHU2Q0Q1XHU1QjlBXHU3Njg0XHU0RkREXHU4QkMxXHVGRjBDXHU1MzA1XHU2MkVDXHU0RjQ2XHU0RTBEXHU5NjUwXHU0RThFXHU1MTc2XHU2Q0ExXHU2NzA5XHU3RjNBXHU5Njc3XHVGRjBDXHU5MDAyXHU1NDA4XHU3Mjc5XHU1QjlBXHU3NkVFXHU3Njg0XHU2MjE2XHU5NzVFXHU0RkI1XHU2NzQzXHUzMDAyJzsKICAgICAgICAgICAgdHI0LmFwcGVuZCh0ZDQpOwogICAgICAgICAgICB0YWJsZTEuYXBwZW5kKHRyNCk7CiAgICAgICAgICAgIGNvbnN0IHRyNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgIGNvbnN0IHRkNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIGNvbnN0IGEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBhMi5ocmVmID0gJ2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vc2NyaXB0cy8zNzI1MTYnOwogICAgICAgICAgICBhMi50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgICAgYTIudGV4dENvbnRlbnQgPSAnXHU2NkY0XHU2NUIwJzsKICAgICAgICAgICAgdGQ1LmFwcGVuZChhMik7CiAgICAgICAgICAgIHRkNS5hcHBlbmQoJyAnKTsKICAgICAgICAgICAgY29uc3QgYTMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEzLmhyZWYgPSAnaHR0cHM6Ly9naXRodWIuY29tL1htYWRlci9iaWxpdHdpbi9pc3N1ZXMnOwogICAgICAgICAgICBhMy50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgICAgYTMudGV4dENvbnRlbnQgPSAnXHU4QkE4XHU4QkJBJzsKICAgICAgICAgICAgdGQ1LmFwcGVuZChhMyk7CiAgICAgICAgICAgIHRkNS5hcHBlbmQoJyAnKTsKICAgICAgICAgICAgY29uc3QgYTQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGE0LmhyZWYgPSAnaHR0cHM6Ly9naXRodWIuY29tL1htYWRlci9iaWxpdHdpbi8nOwogICAgICAgICAgICBhNC50YXJnZXQgPSAnX2JsYW5rJzsKICAgICAgICAgICAgYTQudGV4dENvbnRlbnQgPSAnR2l0SHViJzsKICAgICAgICAgICAgdGQ1LmFwcGVuZChhNCk7CiAgICAgICAgICAgIHRkNS5hcHBlbmQoJyAnKTsKICAgICAgICAgICAgdGQ1LmFwcGVuZCgnQXV0aG9yOiBxbGk1LiBDb3B5cmlnaHQ6IHFsaTUsIDIwMTQrLCBcdTc1MzBcdTc1MUYsIGdyZXBtdXNpYywgeG1hZGVyJyk7CiAgICAgICAgICAgIHRyNS5hcHBlbmQodGQ1KTsKICAgICAgICAgICAgdGFibGUxLmFwcGVuZCh0cjUpOwogICAgICAgICAgICByZXR1cm4gdGFibGUxOwogICAgICAgIH0pKCksICgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICBidXR0b24uc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7CiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5tYXJnaW4gPSAnMC4yZW0nOwoKICAgICAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBkaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTUxNzNcdTk1RUQnOwogICAgICAgICAgICByZXR1cm4gYnV0dG9uOwogICAgICAgIH0pKCksICgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICBidXR0b24uc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7CiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5tYXJnaW4gPSAnMC4yZW0nOwoKICAgICAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0b3AubG9jYXRpb24ucmVsb2FkKCk7CgogICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU0RkREXHU1QjU4XHU1RTc2XHU1MjM3XHU2NUIwJzsKICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbjsKICAgICAgICB9KSgpLCAoKCkgPT4gewogICAgICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nOwogICAgICAgICAgICBidXR0b24uc3R5bGUubWFyZ2luID0gJzAuMmVtJzsKCiAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdHdpbi5yZXNldE9wdGlvbigpICYmIHRvcC5sb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTkxQ0RcdTdGNkVcdTVFNzZcdTUyMzdcdTY1QjAnOwogICAgICAgICAgICByZXR1cm4gYnV0dG9uOwogICAgICAgIH0pKCkpOwoKICAgICAgICByZXR1cm4gdGhpcy5kb20ub3B0aW9uRGl2ID0gZGl2OwogICAgfQoKICAgIGJ1aWxkTW9ua2V5T3B0aW9uVGFibGUodHdpbiA9IHRoaXMudHdpbiwgQmlsaU1vbmtleSA9IHRoaXMudHdpbi5CaWxpTW9ua2V5KSB7CiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpOwogICAgICAgIHsKICAgICAgICAgICAgdGFibGUuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgICAgIHRhYmxlLnN0eWxlLmxpbmVIZWlnaHQgPSAnMmVtJzsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgdGQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgdGQxLnN0eWxlID0gJ3RleHQtYWxpZ246Y2VudGVyJzsKICAgICAgICAgICAgdGQxLnRleHRDb250ZW50ID0gJ0JpbGlNb25rZXlcdUZGMDhcdTg5QzZcdTk4OTFcdTYyOTNcdTUzRDZcdTdFQzRcdTRFRjZcdUZGMDknOwogICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgIHRhYmxlLmFwcGVuZCh0cjEpOwogICAgICAgIH0KCiAgICAgICAgdGFibGUuYXBwZW5kKC4uLkJpbGlNb25rZXkub3B0aW9uRGVzY3JpcHRpb25zLm1hcCgoW25hbWUsIGRlc2NyaXB0aW9uXSkgPT4gewogICAgICAgICAgICBjb25zdCB0cjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgaW5wdXQudHlwZSA9ICdjaGVja2JveCc7CiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSB0d2luLm9wdGlvbltuYW1lXTsKCiAgICAgICAgICAgIGlucHV0Lm9uY2hhbmdlID0gZSA9PiB7CiAgICAgICAgICAgICAgICB0d2luLm9wdGlvbltuYW1lXSA9IGUudGFyZ2V0LmNoZWNrZWQ7CiAgICAgICAgICAgICAgICB0d2luLnNhdmVPcHRpb24odHdpbi5vcHRpb24pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGFiZWwuYXBwZW5kKGlucHV0KTsKICAgICAgICAgICAgbGFiZWwuYXBwZW5kKGRlc2NyaXB0aW9uKTsKICAgICAgICAgICAgdHIxLmFwcGVuZChsYWJlbCk7CiAgICAgICAgICAgIHJldHVybiB0cjE7CiAgICAgICAgfSkpOwoKICAgICAgICB0YWJsZS5hcHBlbmQoKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAnbnVtYmVyJzsKICAgICAgICAgICAgaW5wdXQudmFsdWUgPSArdHdpbi5vcHRpb25bInJlc29sdXRpb25YIl0gfHwgNTYwOwogICAgICAgICAgICBpbnB1dC5taW4gPSA0ODA7CgogICAgICAgICAgICBpbnB1dC5vbmNoYW5nZSA9IGUgPT4gewogICAgICAgICAgICAgICAgdHdpbi5vcHRpb25bInJlc29sdXRpb25YIl0gPSArZS50YXJnZXQudmFsdWU7CiAgICAgICAgICAgICAgICB0d2luLnNhdmVPcHRpb24odHdpbi5vcHRpb24pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGFiZWwuYXBwZW5kKGlucHV0KTsKICAgICAgICAgICAgbGFiZWwuYXBwZW5kKCIgeCAiKTsKICAgICAgICAgICAgY29uc3QgaW5wdXQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgaW5wdXQxLnR5cGUgPSAnbnVtYmVyJzsKICAgICAgICAgICAgaW5wdXQxLnZhbHVlID0gK3R3aW4ub3B0aW9uWyJyZXNvbHV0aW9uWSJdIHx8IDQyMDsKICAgICAgICAgICAgaW5wdXQxLm1pbiA9IDM2MDsKCiAgICAgICAgICAgIGlucHV0MS5vbmNoYW5nZSA9IGUgPT4gewogICAgICAgICAgICAgICAgdHdpbi5vcHRpb25bInJlc29sdXRpb25ZIl0gPSArZS50YXJnZXQudmFsdWU7CiAgICAgICAgICAgICAgICB0d2luLnNhdmVPcHRpb24odHdpbi5vcHRpb24pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGFiZWwuYXBwZW5kKGlucHV0MSk7CiAgICAgICAgICAgIHRyMS5hcHBlbmQobGFiZWwpOwogICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgIH0pKCkpOwoKICAgICAgICB0YWJsZS5hcHBlbmQoKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAnY2hlY2tib3gnOwogICAgICAgICAgICBpbnB1dC5jaGVja2VkID0gdHdpbi5vcHRpb25bImVuYWJsZVZpZGVvTWF4UmVzb2x1dGlvbiJdOwoKICAgICAgICAgICAgaW5wdXQub25jaGFuZ2UgPSBlID0+IHsKICAgICAgICAgICAgICAgIHR3aW4ub3B0aW9uWyJlbmFibGVWaWRlb01heFJlc29sdXRpb24iXSA9IGUudGFyZ2V0LmNoZWNrZWQ7CiAgICAgICAgICAgICAgICB0d2luLnNhdmVPcHRpb24odHdpbi5vcHRpb24pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGFiZWwuYXBwZW5kKGlucHV0KTsKICAgICAgICAgICAgbGFiZWwuYXBwZW5kKCdcdTgxRUFcdTVCOUFcdTRFNDlcdTRFMEJcdThGN0RcdTc2ODRcdTg5QzZcdTk4OTFcdTc2ODQnKTsKICAgICAgICAgICAgY29uc3QgYjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7CiAgICAgICAgICAgIGIxLnRleHRDb250ZW50ID0gJ1x1NjcwMFx1OUFEOCc7CiAgICAgICAgICAgIGxhYmVsLmFwcGVuZChiMSk7CiAgICAgICAgICAgIGxhYmVsLmFwcGVuZCgnXHU1MjA2XHU4RkE4XHU3Mzg3XHVGRjFBJyk7CiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpOwoKICAgICAgICAgICAgc2VsZWN0Lm9uY2hhbmdlID0gZSA9PiB7CiAgICAgICAgICAgICAgICB0d2luLm9wdGlvblsidmlkZW9NYXhSZXNvbHV0aW9uIl0gPSBlLnRhcmdldC52YWx1ZTsKICAgICAgICAgICAgICAgIHR3aW4uc2F2ZU9wdGlvbih0d2luLm9wdGlvbik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBzZWxlY3QuYXBwZW5kKC4uLkJpbGlNb25rZXkucmVzb2x1dGlvblByZWZlcmVuY2VPcHRpb25zLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgICAgICAgICAgb3B0aW9uMS52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgb3B0aW9uMS5zZWxlY3RlZCA9ICh0d2luLm9wdGlvblsidmlkZW9NYXhSZXNvbHV0aW9uIl0gfHwgIjExNiIpID09IHZhbHVlOwogICAgICAgICAgICAgICAgb3B0aW9uMS50ZXh0Q29udGVudCA9IG5hbWU7CiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uMTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBsYWJlbC5hcHBlbmQoc2VsZWN0KTsKICAgICAgICAgICAgdHIxLmFwcGVuZChsYWJlbCk7CiAgICAgICAgICAgIHJldHVybiB0cjE7CiAgICAgICAgfSkoKSk7CgogICAgICAgIHJldHVybiB0YWJsZTsKICAgIH0KCiAgICBidWlsZFBvbHlmaWxsT3B0aW9uVGFibGUodHdpbiA9IHRoaXMudHdpbiwgQmlsaVBvbHlmaWxsID0gdGhpcy50d2luLkJpbGlQb2x5ZmlsbCkgewogICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICB7CiAgICAgICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnOwogICAgICAgICAgICB0YWJsZS5zdHlsZS5saW5lSGVpZ2h0ID0gJzJlbSc7CiAgICAgICAgICAgIGNvbnN0IHRyMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgIGNvbnN0IHRkMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIHRkMS5zdHlsZSA9ICd0ZXh0LWFsaWduOmNlbnRlcic7CiAgICAgICAgICAgIHRkMS50ZXh0Q29udGVudCA9ICdCaWxpUG9seWZpbGxcdUZGMDhcdTUyOUZcdTgwRkRcdTU4OUVcdTVGM0FcdTdFQzRcdTRFRjZcdUZGMDknOwogICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgIHRhYmxlLmFwcGVuZCh0cjEpOwogICAgICAgICAgICBjb25zdCB0cjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICBjb25zdCB0ZDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0ZDIuc3R5bGUgPSAndGV4dC1hbGlnbjpjZW50ZXInOwogICAgICAgICAgICB0ZDIudGV4dENvbnRlbnQgPSAnXHU2MUQyXHU5QjNDXHU0RjVDXHU4MDA1XHU4RkQ4XHU1NzI4XHU2RDRCXHU4QkQ1XHU3Njg0XHU2NUY2XHU1MDE5XHVGRjBDQlx1N0FEOVx1NURGMlx1N0VDRlx1NEUwQVx1N0VCRlx1NEU4Nlx1NTM5Rlx1NzUxRlx1NzY4NFx1N0EwRFx1NTQwRVx1NTE4RFx1NzcwQihcdTBFNTFcdTIwMjJcdTAzMDBcdTMxNDJcdTIwMjJcdTAzMDEpXHUwNjQ4XHUyNzI3JzsKICAgICAgICAgICAgdHIyLmFwcGVuZCh0ZDIpOwogICAgICAgICAgICB0YWJsZS5hcHBlbmQodHIyKTsKICAgICAgICB9CgogICAgICAgIHRhYmxlLmFwcGVuZCguLi5CaWxpUG9seWZpbGwub3B0aW9uRGVzY3JpcHRpb25zLm1hcCgoW25hbWUsIGRlc2NyaXB0aW9uLCBkaXNhYmxlZF0pID0+IHsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgICAgICAgICBsYWJlbC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IGRpc2FibGVkID09ICdkaXNhYmxlZCcgPyAnbGluZS10aHJvdWdoJyA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgICBpbnB1dC50eXBlID0gJ2NoZWNrYm94JzsKICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHR3aW4ub3B0aW9uW25hbWVdOwoKICAgICAgICAgICAgaW5wdXQub25jaGFuZ2UgPSBlID0+IHsKICAgICAgICAgICAgICAgIHR3aW4ub3B0aW9uW25hbWVdID0gZS50YXJnZXQuY2hlY2tlZDsKICAgICAgICAgICAgICAgIHR3aW4uc2F2ZU9wdGlvbih0d2luLm9wdGlvbik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IGRpc2FibGVkID09ICdkaXNhYmxlZCc7CiAgICAgICAgICAgIGxhYmVsLmFwcGVuZChpbnB1dCk7CiAgICAgICAgICAgIGxhYmVsLmFwcGVuZChkZXNjcmlwdGlvbik7CiAgICAgICAgICAgIHRyMS5hcHBlbmQobGFiZWwpOwogICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIHRhYmxlOwogICAgfQoKICAgIGJ1aWxkVUlPcHRpb25UYWJsZSh0d2luID0gdGhpcy50d2luKSB7CiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpOwogICAgICAgIHsKICAgICAgICAgICAgdGFibGUuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgICAgIHRhYmxlLnN0eWxlLmxpbmVIZWlnaHQgPSAnMmVtJzsKICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgY29uc3QgdGQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgdGQxLnN0eWxlID0gJ3RleHQtYWxpZ246Y2VudGVyJzsKICAgICAgICAgICAgdGQxLnRleHRDb250ZW50ID0gJ1VJXHVGRjA4XHU3NTI4XHU2MjM3XHU3NTRDXHU5NzYyXHVGRjA5JzsKICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDEpOwogICAgICAgICAgICB0YWJsZS5hcHBlbmQodHIxKTsKICAgICAgICB9CgogICAgICAgIHRhYmxlLmFwcGVuZCguLi5VSS5vcHRpb25EZXNjcmlwdGlvbnMubWFwKChbbmFtZSwgZGVzY3JpcHRpb25dKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHRyMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTsKICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgICAgICBpbnB1dC50eXBlID0gJ2NoZWNrYm94JzsKICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHR3aW4ub3B0aW9uW25hbWVdOwogICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IG5hbWUgPT0gIm1lbnUiIC8qKiDlnKjop4bpopHoj5zljZXmoI/kuI3mt7vliqDlkI7ml6Dms5Xmm7TmlLnorr7nva7vvIzmiYDku6XnpoHnlKjmraTpgInpobkgKi87CgogICAgICAgICAgICBpbnB1dC5vbmNoYW5nZSA9IGUgPT4gewogICAgICAgICAgICAgICAgdHdpbi5vcHRpb25bbmFtZV0gPSBlLnRhcmdldC5jaGVja2VkOwogICAgICAgICAgICAgICAgdHdpbi5zYXZlT3B0aW9uKHR3aW4ub3B0aW9uKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxhYmVsLmFwcGVuZChpbnB1dCk7CiAgICAgICAgICAgIGxhYmVsLmFwcGVuZChkZXNjcmlwdGlvbik7CiAgICAgICAgICAgIHRyMS5hcHBlbmQobGFiZWwpOwogICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIHRhYmxlOwogICAgfQoKICAgIGRpc3BsYXlPcHRpb25EaXYob3B0aW9uRGl2ID0gdGhpcy5kb20ub3B0aW9uRGl2KSB7CiAgICAgICAgaWYgKCFvcHRpb25EaXYpIHsKICAgICAgICAgICAgb3B0aW9uRGl2ID0gdGhpcy5idWlsZE9wdGlvbkRpdigpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChvcHRpb25EaXYpOwogICAgICAgIH0KICAgICAgICBvcHRpb25EaXYuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgIHJldHVybiBvcHRpb25EaXY7CiAgICB9CgogICAgYnVpbGRQb2x5ZmlsbERhdGFEaXYocG9seWZpbGwgPSB0aGlzLnR3aW4ucG9seWZpbGwpIHsKICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7CgogICAgICAgIHRleHRhcmVhLnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7CiAgICAgICAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gJzIwMHB4JzsKICAgICAgICB0ZXh0YXJlYS50ZXh0Q29udGVudCA9IGAKICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShwb2x5ZmlsbC51c2VyZGF0YS5vcGVkKS5yZXBsYWNlKC97LywgJ3tcbicpLnJlcGxhY2UoL30vLCAnXG59JykucmVwbGFjZSgvXSwvZywgJ10sXG4nKX0KICAgICAgICBgOwogICAgICAgIGNvbnN0IGRpdiA9IFVJLmdlbkRpdigpOwoKICAgICAgICBkaXYuYXBwZW5kKCgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHAxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogICAgICAgICAgICBwMS5zdHlsZS5tYXJnaW4gPSAnMC4zZW0nOwogICAgICAgICAgICBwMS50ZXh0Q29udGVudCA9ICdcdThGRDlcdTkxQ0NcdTY2MkZcdTgxMUFcdTY3MkNcdTUwQThcdTVCNThcdTc2ODRcdTY1NzBcdTYzNkVcdTMwMDJcdTYyNDBcdTY3MDlcdTY1NzBcdTYzNkVcdTkwRkRcdTUzRUFcdTVCNThcdTU3MjhcdTZENEZcdTg5QzhcdTU2NjhcdTkxQ0NcdUZGMENcdTUyMkJcdTRFQkFcdTRFMERcdTc3RTVcdTkwNTNcdUZGMENCXHU3QUQ5XHU0RTVGXHU0RTBEXHU3N0U1XHU5MDUzXHVGRjBDXHU4MTFBXHU2NzJDXHU0RjVDXHU4MDA1XHU2NkY0XHU0RTBEXHU3N0U1XHU5MDUzKFx1OEZEOVx1NEUyQVx1NUJCNlx1NEYxOVx1OEZERVx1NjcwRFx1NTJBMVx1NTY2OFx1OTBGRFx1NzlERlx1NEUwRFx1OEQ3NyBcdTY0NTQnOwogICAgICAgICAgICByZXR1cm4gcDE7CiAgICAgICAgfSkoKSwgKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgcDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CiAgICAgICAgICAgIHAxLnN0eWxlLm1hcmdpbiA9ICcwLjNlbSc7CiAgICAgICAgICAgIHAxLnRleHRDb250ZW50ID0gJ0JcdTdBRDlcdTVERjJcdTRFMEFcdTdFQkZcdTUzOUZcdTc1MUZcdTc2ODRcdTdBMERcdTU0MEVcdTg5QzJcdTc3MEJcdTUyOUZcdTgwRkRcdTMwMDInOwogICAgICAgICAgICByZXR1cm4gcDE7CiAgICAgICAgfSkoKSwgKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgcDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7CiAgICAgICAgICAgIHAxLnN0eWxlLm1hcmdpbiA9ICcwLjNlbSc7CiAgICAgICAgICAgIHAxLnRleHRDb250ZW50ID0gJ1x1OEZEOVx1OTFDQ1x1NjYyRlx1NzI0N1x1NTkzNFx1NzI0N1x1NUMzRVx1MzAwMlx1NjgzQ1x1NUYwRlx1NjYyRlx1RkYwQ2F2XHU1M0Y3XHU2MjE2XHU3NTZBXHU1MjY3XHU1M0Y3OltcdTcyNDdcdTU5MzRcdTVGMDBcdTU5Q0IoXHU5RUQ4XHU4QkE0PTApLFx1NzI0N1x1NTkzNFx1N0VEM1x1Njc1RihcdTlFRDhcdThCQTQ9XHU0RTBEXHU4REYzKSxcdTcyNDdcdTVDM0VcdTVGMDBcdTU5Q0IoXHU5RUQ4XHU4QkE0PVx1NEUwRFx1OERGMyksXHU3MjQ3XHU1QzNFXHU3RUQzXHU2NzVGKFx1OUVEOFx1OEJBND1cdTY1RTBcdTdBNzdcdTU5MjcpXVx1MzAwMlx1NTNFRlx1NEVFNVx1NEVGQlx1NjEwRlx1NTg2Qlx1NTE5OW51bGxcdUZGMENcdTgxMUFcdTY3MkNcdTRGMUFcdTgxRUFcdTUyQThcdTkxQzdcdTc1MjhcdTlFRDhcdThCQTRcdTUwM0NcdTMwMDInOwogICAgICAgICAgICByZXR1cm4gcDE7CiAgICAgICAgfSkoKSwgdGV4dGFyZWEsICgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHAxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogICAgICAgICAgICBwMS5zdHlsZS5tYXJnaW4gPSAnMC4zZW0nOwogICAgICAgICAgICBwMS50ZXh0Q29udGVudCA9ICdcdTVGNTNcdTcxMzZcdTUzRUZcdTRFRTVcdTc2RjRcdTYzQTVcdTZFMDVcdTdBN0FcdTU1NjZcdTMwMDJcdTUzRUFcdTUyMjBcdTk2NjRcdTUxNzZcdTRFMkRcdTc2ODRcdTRFMDBcdTRFOUJcdTg4NENcdTc2ODRcdThCRERcdUZGMENcdTRFMDBcdTVCOUFcdTg5ODFcdThCQjBcdTVGOTdcdTUyMjBcdTYzODlcdTU5MUFcdTRGNTlcdTc2ODRcdTkwMTdcdTUzRjdcdTMwMDInOwogICAgICAgICAgICByZXR1cm4gcDE7CiAgICAgICAgfSkoKSwgKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzAuNWVtJzsKICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm1hcmdpbiA9ICcwLjJlbSc7CgogICAgICAgICAgICBidXR0b24ub25jbGljayA9ICgpID0+IGRpdi5yZW1vdmUoKTsKCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICdcdTUxNzNcdTk1RUQnOwogICAgICAgICAgICByZXR1cm4gYnV0dG9uOwogICAgICAgIH0pKCksICgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICBidXR0b24uc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7CiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5tYXJnaW4gPSAnMC4yZW0nOwoKICAgICAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSBlID0+IHsKICAgICAgICAgICAgICAgIGlmICghdGV4dGFyZWEudmFsdWUpIHRleHRhcmVhLnZhbHVlID0gJ3tcblxufSc7CiAgICAgICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IHRleHRhcmVhLnZhbHVlLnJlcGxhY2UoLywoXHN8XG4pKn0vLCAnXG59JykucmVwbGFjZSgvLChcc3xcbiksL2csICcsXG4nKS5yZXBsYWNlKC8sKFxzfFxuKSpdL2csICddJyk7CiAgICAgICAgICAgICAgICBjb25zdCB1c2VyZGF0YSA9IHt9OwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB1c2VyZGF0YS5vcGVkID0gSlNPTi5wYXJzZSh0ZXh0YXJlYS52YWx1ZSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+eJh+WktOeJh+WwvjogJyArIGUpO3Rocm93IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlLnRhcmdldC50ZXh0Q29udGVudCA9ICfmoLzlvI/msqHmnInpl67popjvvIEnOwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJkYXRhOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ1x1OUE4Q1x1OEJDMVx1NjgzQ1x1NUYwRic7CiAgICAgICAgICAgIHJldHVybiBidXR0b247CiAgICAgICAgfSkoKSwgKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzAuNWVtJzsKICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm1hcmdpbiA9ICcwLjJlbSc7CgogICAgICAgICAgICBidXR0b24ub25jbGljayA9IGUgPT4gewogICAgICAgICAgICAgICAgcG9seWZpbGwudXNlcmRhdGEgPSBlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLm9uY2xpY2soeyB0YXJnZXQ6IGUudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgfSk7CiAgICAgICAgICAgICAgICBwb2x5ZmlsbC5zYXZlVXNlcmRhdGEoKTsKICAgICAgICAgICAgICAgIGUudGFyZ2V0LnRleHRDb250ZW50ID0gJ+S/neWtmOaIkOWKnyc7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAnXHU1QzFEXHU4QkQ1XHU0RkREXHU1QjU4JzsKICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbjsKICAgICAgICB9KSgpKTsKCiAgICAgICAgcmV0dXJuIGRpdjsKICAgIH0KCiAgICBkaXNwbGF5UG9seWZpbGxEYXRhRGl2KHBvbHlmaWxsKSB7CiAgICAgICAgY29uc3QgZGl2ID0gdGhpcy5idWlsZFBvbHlmaWxsRGF0YURpdigpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGRpdik7CiAgICAgICAgZGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwoKICAgICAgICByZXR1cm4gZGl2OwogICAgfQoKICAgIC8vIENvbW1vbgogICAgc3RhdGljIGJ1aWxkRG93bmxvYWRBbGxQYWdlRGVmYXVsdEZvcm1hdHNCb2R5KHJldCwgdmlkZW9UaXRsZSkgewogICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKCiAgICAgICAgdGFibGUub25jbGljayA9IGUgPT4gZS5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICAgICAgbGV0IGZsdnNCbG9iID0gW107CiAgICAgICAgY29uc3QgbG9hZEZMVkZyb21DYWNoZSA9IGFzeW5jIChuYW1lLCBwYXJ0aWFsID0gZmFsc2UpID0+IHsKICAgICAgICAgICAgaWYgKHBhcnRpYWwpIG5hbWUgPSAnUENfJyArIG5hbWU7CiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gbmV3IENhY2hlREIoKTsKICAgICAgICAgICAgbGV0IGl0ZW0gPSBhd2FpdCBjYWNoZS5nZXREYXRhKG5hbWUpOwogICAgICAgICAgICByZXR1cm4gaXRlbSAmJiBpdGVtLmRhdGE7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBzYXZlRkxWVG9DYWNoZSA9IGFzeW5jIChuYW1lLCBibG9iKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gbmV3IENhY2hlREIoKTsKICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmFkZERhdGEoeyBuYW1lLCBkYXRhOiBibG9iIH0pOwogICAgICAgIH07CiAgICAgICAgY29uc3QgY2xlYW5QYXJ0aWFsRkxWSW5DYWNoZSA9IGFzeW5jIG5hbWUgPT4gewogICAgICAgICAgICBjb25zdCBjYWNoZSA9IG5ldyBDYWNoZURCKCk7CiAgICAgICAgICAgIG5hbWUgPSAnUENfJyArIG5hbWU7CiAgICAgICAgICAgIHJldHVybiBjYWNoZS5kZWxldGVEYXRhKG5hbWUpOwogICAgICAgIH07CiAgICAgICAgY29uc3QgZ2V0RkxWcyA9IGFzeW5jIHZpZGVvSW5kZXggPT4gewogICAgICAgICAgICBpZiAoIWZsdnNCbG9iW3ZpZGVvSW5kZXhdKSBmbHZzQmxvYlt2aWRlb0luZGV4XSA9IFtdOwoKICAgICAgICAgICAgY29uc3QgeyBkdXJsIH0gPSByZXRbdmlkZW9JbmRleF07CgogICAgICAgICAgICByZXR1cm4gYXdhaXQgUHJvbWlzZS5hbGwoZHVybC5tYXAoYXN5bmMgKF8sIGR1cmxJbmRleCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGZsdnNCbG9iW3ZpZGVvSW5kZXhdW2R1cmxJbmRleF0pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmx2c0Jsb2JbdmlkZW9JbmRleF1bZHVybEluZGV4XTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGJ1cmwgPSBkdXJsW2R1cmxJbmRleF07CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0TmFtZSA9IGJ1cmwubWF0Y2goL1xkKy1cZCsoPzpcZHwtfGhkKSpcLihmbHZ8bXA0KS8pWzBdOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBidXJsQSA9IHRvcC5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBhW2Rvd25sb2FkXVtocmVmPSIke2J1cmx9Il1gKTsKICAgICAgICAgICAgICAgICAgICBidXJsQS5hZnRlcigoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzczEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcm9ncmVzcycpOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczEuc2V0QXR0cmlidXRlKCd2YWx1ZScsICcwJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzMS5zZXRBdHRyaWJ1dGUoJ21heCcsICcxMDAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MxLnRleHRDb250ZW50ID0gJ1x1OEZEQlx1NUVBNlx1Njc2MSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9ncmVzczE7CiAgICAgICAgICAgICAgICAgICAgfSkoKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBidXJsQS5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoInByb2dyZXNzIik7CgogICAgICAgICAgICAgICAgICAgIGxldCBmbHZDYWNoZSA9IGF3YWl0IGxvYWRGTFZGcm9tQ2FjaGUob3V0cHV0TmFtZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZsdkNhY2hlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnZhbHVlID0gcHJvZ3Jlc3MubWF4OwogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZnRlcigoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhMi5ocmVmID0gdG9wLlVSTC5jcmVhdGVPYmplY3RVUkwoZmx2Q2FjaGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYTIuZG93bmxvYWQgPSBvdXRwdXROYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYTIudGV4dENvbnRlbnQgPSAnXHU1M0U2XHU1QjU4XHU0RTNBJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhMjsKICAgICAgICAgICAgICAgICAgICAgICAgfSkoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmbHZzQmxvYlt2aWRlb0luZGV4XVtkdXJsSW5kZXhdID0gZmx2Q2FjaGU7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBsZXQgcGFydGlhbEZMVkZyb21DYWNoZSA9IGF3YWl0IGxvYWRGTFZGcm9tQ2FjaGUob3V0cHV0TmFtZSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxGTFZGcm9tQ2FjaGUpIGJ1cmwgKz0gYCZic3RhcnQ9JHtwYXJ0aWFsRkxWRnJvbUNhY2hlLnNpemV9YDsKCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiAnY29ycycsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnZGVmYXVsdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXItd2hlbi1kb3duZ3JhZGUnLAogICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUxvYWRlZDogcGFydGlhbEZMVkZyb21DYWNoZSA/IHBhcnRpYWxGTFZGcm9tQ2FjaGUuc2l6ZSA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHBhcnRpYWxGTFZGcm9tQ2FjaGUgJiYgIWJ1cmwuaW5jbHVkZXMoJ3dzVGltZScpID8geyBSYW5nZTogYGJ5dGVzPSR7cGFydGlhbEZMVkZyb21DYWNoZS5zaXplfS1gIH0gOiB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBvcHQub25wcm9ncmVzcyA9IChsb2FkZWQsIHRvdGFsKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnZhbHVlID0gbG9hZGVkOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5tYXggPSB0b3RhbDsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBmY2ggPSBuZXcgRGV0YWlsZWRGZXRjaEJsb2IoYnVybCwgb3B0KTsKICAgICAgICAgICAgICAgICAgICBsZXQgZnVsbEZMViA9IGF3YWl0IGZjaC5nZXRCbG9iKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxGTFZGcm9tQ2FjaGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVsbEZMViA9IG5ldyBCbG9iKFtwYXJ0aWFsRkxWRnJvbUNhY2hlLCBmdWxsRkxWXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuUGFydGlhbEZMVkluQ2FjaGUob3V0cHV0TmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHNhdmVGTFZUb0NhY2hlKG91dHB1dE5hbWUsIGZ1bGxGTFYpOwoKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5hZnRlcigoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgICAgICAgICAgYTIuaHJlZiA9IHRvcC5VUkwuY3JlYXRlT2JqZWN0VVJMKGZ1bGxGTFYpOwogICAgICAgICAgICAgICAgICAgICAgICBhMi5kb3dubG9hZCA9IG91dHB1dE5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGEyLnRleHRDb250ZW50ID0gJ1x1NTNFNlx1NUI1OFx1NEUzQSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhMjsKICAgICAgICAgICAgICAgICAgICB9KSgpKTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZsdnNCbG9iW3ZpZGVvSW5kZXhdW2R1cmxJbmRleF0gPSBmdWxsRkxWOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBnZXRTaXplID0gYXN5bmMgdmlkZW9JbmRleCA9PiB7CiAgICAgICAgICAgIGNvbnN0IHsgcmVzOiB7IGR1cmw6IGR1cmxPYmplY3RzIH0gfSA9IHJldFt2aWRlb0luZGV4XTsKCiAgICAgICAgICAgIGlmIChkdXJsT2JqZWN0cyAmJiBkdXJsT2JqZWN0c1swXSAmJiBkdXJsT2JqZWN0c1swXS5zaXplKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFNpemUgPSBkdXJsT2JqZWN0cy5yZWR1Y2UoKHRvdGFsLCBidXJsT2JqKSA9PiB0b3RhbCArIHBhcnNlSW50KGJ1cmxPYmouc2l6ZSksIDApOwogICAgICAgICAgICAgICAgaWYgKHRvdGFsU2l6ZSkgcmV0dXJuIHRvdGFsU2l6ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgeyBkdXJsIH0gPSByZXRbdmlkZW9JbmRleF07CgogICAgICAgICAgICAvKiogQHR5cGUge251bWJlcltdfSAqLwogICAgICAgICAgICBjb25zdCBzaXplcyA9IGF3YWl0IFByb21pc2UuYWxsKGR1cmwubWFwKGFzeW5jIGJ1cmwgPT4gewogICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZldGNoKGJ1cmwsIHsgbWV0aG9kOiAiSEVBRCIgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gK3IuaGVhZGVycy5nZXQoImNvbnRlbnQtbGVuZ3RoIik7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIHJldHVybiBzaXplcy5yZWR1Y2UoKHRvdGFsLCBfc2l6ZSkgPT4gdG90YWwgKyBfc2l6ZSk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0LmZvckVhY2goKGksIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHNpemVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICBnZXRTaXplKGluZGV4KS50aGVuKHNpemUgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgc2l6ZU1CID0gc2l6ZSAvIDEwMjQgLyAxMDI0OwogICAgICAgICAgICAgICAgc2l6ZVNwYW4udGV4dENvbnRlbnQgPSBgICAoJHtzaXplTUIudG9GaXhlZCgxKX0gTWlCKWA7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3QgaU5hbWUgPSBpLm5hbWU7CiAgICAgICAgICAgIGxldCBwTmFtZSA9IGBQJHtpbmRleCArIDF9YDsKICAgICAgICAgICAgaWYgKHR5cGVvZiBpTmFtZSA9PSAic3RyaW5nIiAmJiBpTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBwTmFtZSkgewogICAgICAgICAgICAgICAgcE5hbWUgKz0gYCAtICR7aU5hbWV9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qgb3V0cHV0TmFtZSA9IHZpZGVvVGl0bGUubWF0Y2goL++8muesrFxkK+ivnSAuKz8kLykgPyB2aWRlb1RpdGxlLnJlcGxhY2UoL++8muesrFxkK+ivnSAuKz8kLywgYO+8muesrCR7aU5hbWV96K+dYCkgOiBgJHt2aWRlb1RpdGxlfSAtICR7cE5hbWV9YDsKCiAgICAgICAgICAgIHRhYmxlLmFwcGVuZCgoKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdHIxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRkMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICB0ZDEuYXBwZW5kKGlOYW1lKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKTsKICAgICAgICAgICAgICAgIHRkMS5hcHBlbmQoYnIpOwogICAgICAgICAgICAgICAgY29uc3QgYTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CgogICAgICAgICAgICAgICAgYTIub25jbGljayA9IGFzeW5jIGUgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIGFkZCBiZWZvcmVVbmxvYWRIYW5kbGVyCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGUgPT4gVUkuYmVmb3JlVW5sb2FkSGFuZGxlcihlKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgaGFuZGxlcik7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEEgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50OwogICAgICAgICAgICAgICAgICAgIHRhcmdldEEudGl0bGUgPSAiIjsKICAgICAgICAgICAgICAgICAgICB0YXJnZXRBLm9uY2xpY2sgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHRhcmdldEEudGV4dENvbnRlbnQgPSAi57yT5a2Y5Lit4oCm4oCmIjsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gaS5kdXJsWzBdLm1hdGNoKC9cZCstXGQrKD86XGR8LXxoZCkqXC4oZmx2fG1wNCkvKVsxXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmbHZzID0gYXdhaXQgZ2V0RkxWcyhpbmRleCk7CgogICAgICAgICAgICAgICAgICAgIHRhcmdldEEudGV4dENvbnRlbnQgPSAi5ZCI5bm25Lit4oCm4oCmIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JrZXIgPSBXZWJXb3JrZXIuZnJvbUFGdW5jdGlvbihCYXRjaERvd25sb2FkV29ya2VyRm4pOwogICAgICAgICAgICAgICAgICAgIGF3YWl0IHdvcmtlci5yZWdpc3RlckFsbE1ldGhvZHMoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmb3JtYXQgPT0gImZsdiIgPyBhd2FpdCB3b3JrZXIubWVyZ2VGTFZGaWxlcyhmbHZzKSA6IGZsdnNbMF0pOwogICAgICAgICAgICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTsKCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QS5ocmVmID0gaHJlZjsKICAgICAgICAgICAgICAgICAgICB0YXJnZXRBLmRvd25sb2FkID0gYCR7b3V0cHV0TmFtZX0uZmx2YDsKICAgICAgICAgICAgICAgICAgICB0YXJnZXRBLnRleHRDb250ZW50ID0gIuS/neWtmOWQiOW5tuWQjkZMViI7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QS5zdHlsZVsibWFyZ2luLXJpZ2h0Il0gPSAiMjBweCI7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzcyA9IHRvcC5VUkwuY3JlYXRlT2JqZWN0VVJMKGkuZGFubXVrdSk7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QS5hZnRlcigoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGEzLm9uY2xpY2sgPSBlID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNS1ZUcmFuc211eGVyKCkuZXhlYyhocmVmLCBhc3MsIGAke291dHB1dE5hbWV9Lm1rdmAsIGUudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGEzLnRleHRDb250ZW50ID0gJ1x1NjI1M1x1NTMwNU1LVihcdThGNkZcdTVCNTdcdTVFNTVcdTVDMDFcdTg4QzUpJzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEzOwogICAgICAgICAgICAgICAgICAgIH0pKCkpOwoKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgaGFuZGxlcik7CgogICAgICAgICAgICAgICAgICAgIHRhcmdldEEuY2xpY2soKTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgYTIudGl0bGUgPSAnXHU3RjEzXHU1QjU4XHU2MjQwXHU2NzA5XHU1MjA2XHU2QkI1K1x1ODFFQVx1NTJBOFx1NTQwOFx1NUU3Nic7CiAgICAgICAgICAgICAgICBjb25zdCBzcGFuMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICAgIHNwYW4yLnRleHRDb250ZW50ID0gJ1x1N0YxM1x1NUI1OFx1NjI0MFx1NjcwOVx1NTIwNlx1NkJCNStcdTgxRUFcdTUyQThcdTU0MDhcdTVFNzYnOwogICAgICAgICAgICAgICAgYTIuYXBwZW5kKHNwYW4yKTsKICAgICAgICAgICAgICAgIGEyLmFwcGVuZChzaXplU3Bhbik7CiAgICAgICAgICAgICAgICB0ZDEuYXBwZW5kKGEyKTsKICAgICAgICAgICAgICAgIHRyMS5hcHBlbmQodGQxKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRkMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgICAgICBjb25zdCBhMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgIGEzLmhyZWYgPSBpLmR1cmxbMF07CiAgICAgICAgICAgICAgICBhMy5kb3dubG9hZCA9ICcnOwogICAgICAgICAgICAgICAgYTMuc2V0QXR0cmlidXRlKCdyZWZlcnJlcnBvbGljeScsICdvcmlnaW4nKTsKICAgICAgICAgICAgICAgIGEzLnRleHRDb250ZW50ID0gaS5kdXJsWzBdLm1hdGNoKC9cZCstXGQrKD86XGR8LXxoZCkqXC4oZmx2fG1wNCkvKVswXTsKICAgICAgICAgICAgICAgIHRkMi5hcHBlbmQoYTMpOwogICAgICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDIpOwogICAgICAgICAgICAgICAgY29uc3QgdGQzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGE0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgYTQuaHJlZiA9IHRvcC5VUkwuY3JlYXRlT2JqZWN0VVJMKGkuZGFubXVrdSk7CiAgICAgICAgICAgICAgICBhNC5kb3dubG9hZCA9IGAke2kub3V0cHV0TmFtZX0uYXNzYDsKICAgICAgICAgICAgICAgIGE0LnNldEF0dHJpYnV0ZSgncmVmZXJyZXJwb2xpY3knLCAnb3JpZ2luJyk7CiAgICAgICAgICAgICAgICBhNC50ZXh0Q29udGVudCA9IGAke2kub3V0cHV0TmFtZX0uYXNzYDsKICAgICAgICAgICAgICAgIHRkMy5hcHBlbmQoYTQpOwogICAgICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRyMTsKICAgICAgICAgICAgfSkoKSwgLi4uaS5kdXJsLnNsaWNlKDEpLm1hcChocmVmID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHRyMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgICAgICBjb25zdCB0ZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgdGQxLnRleHRDb250ZW50ID0gYAogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgICAgICBjb25zdCB0ZDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgY29uc3QgYTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBhMi5ocmVmID0gaHJlZjsKICAgICAgICAgICAgICAgIGEyLmRvd25sb2FkID0gJyc7CiAgICAgICAgICAgICAgICBhMi5zZXRBdHRyaWJ1dGUoJ3JlZmVycmVycG9saWN5JywgJ29yaWdpbicpOwogICAgICAgICAgICAgICAgYTIudGV4dENvbnRlbnQgPSBocmVmLm1hdGNoKC9cZCstXGQrKD86XGR8LXxoZCkqXC4oZmx2fG1wNCkvKVswXTsKICAgICAgICAgICAgICAgIHRkMi5hcHBlbmQoYTIpOwogICAgICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDIpOwogICAgICAgICAgICAgICAgY29uc3QgdGQzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIHRkMy50ZXh0Q29udGVudCA9IGAKICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgdHIxLmFwcGVuZCh0ZDMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRyMTsKICAgICAgICAgICAgfSksICgoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB0cjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICAgICAgY29uc3QgdGQxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgICAgIHRkMS50ZXh0Q29udGVudCA9IGDCoGA7CiAgICAgICAgICAgICAgICB0cjEuYXBwZW5kKHRkMSk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHIxOwogICAgICAgICAgICB9KSgpKTsKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgY29uc3Qgc3R5bGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgICAgICBzdHlsZTEudGV4dENvbnRlbnQgPSBgCiAgICAgICAgICAgICAgICB0YWJsZSB7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgdGFibGUtbGF5b3V0OiBmaXhlZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0ZCB7CiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgICAgICAgICAgICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHByb2dyZXNzIHsKICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTVweDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhIHsKICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMGExZDY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgICBhOmhvdmVyIHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2YyNWQ4ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgYDsKICAgICAgICBmcmFnbWVudC5hcHBlbmQoc3R5bGUxKTsKICAgICAgICBjb25zdCBoMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7CiAgICAgICAgaDEudGV4dENvbnRlbnQgPSAnXHU2Mjc5XHU5MUNGXHU0RTBCXHU4RjdEJzsKICAgICAgICBmcmFnbWVudC5hcHBlbmQoaDEpOwogICAgICAgIGNvbnN0IHVsMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgY29uc3QgbGkxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBjb25zdCBwMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICAgICAgICBwMS50ZXh0Q29udGVudCA9ICdcdTYyOTNcdTUzRDZcdTc2ODRcdTg5QzZcdTk4OTFcdTc2ODRcdTY3MDBcdTlBRDhcdTUyMDZcdThGQThcdTczODdcdTUzRUZcdTU3MjhcdThCQkVcdTdGNkVcdTRFMkRcdTgxRUFcdTVCOUFcdTRFNDlcdUZGMENcdTc1NkFcdTUyNjdcdTUzRUFcdTgwRkRcdTYyOTNcdTUzRDZcdTUyMzBcdTVGNTNcdTUyNERcdTZFMDVcdTY2NzBcdTVFQTYnOwogICAgICAgIGxpMS5hcHBlbmQocDEpOwogICAgICAgIHVsMi5hcHBlbmQobGkxKTsKICAgICAgICBjb25zdCBsaTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGNvbnN0IHAyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogICAgICAgIHAyLnRleHRDb250ZW50ID0gJ1x1NTkwRFx1NTIzNlx1OTRGRVx1NjNBNVx1NTczMFx1NTc0MFx1NjVFMFx1NjU0OFx1RkYwQ1x1OEJGN1x1NURFNlx1OTUyRVx1NTM1NVx1NTFGQi9cdTUzRjNcdTk1MkVcdTUzRTZcdTVCNThcdTRFM0EvXHU1M0YzXHU5NTJFXHU4QzAzXHU3NTI4XHU0RTBCXHU4RjdEXHU1REU1XHU1MTc3JzsKICAgICAgICBsaTIuYXBwZW5kKHAyKTsKICAgICAgICBjb25zdCBwMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsKICAgICAgICBjb25zdCBlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2VtJyk7CiAgICAgICAgZW0udGV4dENvbnRlbnQgPSAnXHU1RjAwXHU1M0QxXHU4MDA1XHVGRjFBXHU5NzAwXHU4OTgxXHU2ODIxXHU5QThDcmVmZXJyZXJcdTU0OEN1c2VyIGFnZW50JzsKICAgICAgICBwMy5hcHBlbmQoZW0pOwogICAgICAgIGxpMi5hcHBlbmQocDMpOwogICAgICAgIHVsMi5hcHBlbmQobGkyKTsKICAgICAgICBjb25zdCBsaTMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGNvbnN0IHA0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOwogICAgICAgIHA0LmFwcGVuZCgnKFx1NkQ0QiknKTsKICAgICAgICBjb25zdCBhMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKCiAgICAgICAgYTIub25jbGljayA9IGUgPT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVt0aXRsZT0i57yT5a2Y5omA5pyJ5YiG5q61K+iHquWKqOWQiOW5tiJdIHNwYW46Zmlyc3QtY2hpbGQnKS5mb3JFYWNoKGEgPT4gYS5jbGljaygpKTsKCiAgICAgICAgYTIudGV4dENvbnRlbnQgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICDkuIDplK7lvIDlp4vnvJPlrZgr5om56YeP5ZCI5bm2CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgcDQuYXBwZW5kKGEyKTsKICAgICAgICBsaTMuYXBwZW5kKHA0KTsKICAgICAgICB1bDIuYXBwZW5kKGxpMyk7CiAgICAgICAgZnJhZ21lbnQuYXBwZW5kKHVsMik7CiAgICAgICAgZnJhZ21lbnQuYXBwZW5kKHRhYmxlKTsKICAgICAgICByZXR1cm4gZnJhZ21lbnQ7CiAgICB9CgogICAgc3RhdGljIGRpc3BsYXlEb3dubG9hZEFsbFBhZ2VEZWZhdWx0Rm9ybWF0c0JvZHkocmV0KSB7CiAgICAgICAgY29uc3QgdmlkZW9UaXRsZSA9IHRvcC5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaDEnKVswXS50ZXh0Q29udGVudC50cmltKCk7CgogICAgICAgIGlmICh0b3AucGxheWVyKSB0b3AucGxheWVyLmRlc3Ryb3koKTsgLy8g6ZSA5q+B5pKt5pS+5ZmoCgogICAgICAgIHRvcC5kb2N1bWVudC5oZWFkLnJlbW92ZSgpOwogICAgICAgIHRvcC5kb2N1bWVudC5ib2R5LnJlcGxhY2VXaXRoKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJvZHkiKSk7CgogICAgICAgIHRvcC5kb2N1bWVudC5ib2R5LmFwcGVuZChVSS5idWlsZERvd25sb2FkQWxsUGFnZURlZmF1bHRGb3JtYXRzQm9keShyZXQsIHZpZGVvVGl0bGUpKTsKCiAgICAgICAgcmV0dXJuIHJldDsKICAgIH0KCiAgICBzdGF0aWMgZ2VuRGl2KCkgewogICAgICAgIGNvbnN0IGRpdjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYxLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICBkaXYxLnN0eWxlLnpJbmRleCA9ICcxMDAzNic7CiAgICAgICAgZGl2MS5zdHlsZS50b3AgPSAnNTAlJzsKICAgICAgICBkaXYxLnN0eWxlLm1hcmdpblRvcCA9ICctMjAwcHgnOwogICAgICAgIGRpdjEuc3R5bGUubGVmdCA9ICc1MCUnOwogICAgICAgIGRpdjEuc3R5bGUubWFyZ2luTGVmdCA9ICctMzIwcHgnOwogICAgICAgIGRpdjEuc3R5bGUud2lkdGggPSAnNTQwcHgnOwogICAgICAgIGRpdjEuc3R5bGUubWF4SGVpZ2h0ID0gJzQwMHB4JzsKICAgICAgICBkaXYxLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJzsKICAgICAgICBkaXYxLnN0eWxlLnBhZGRpbmcgPSAnMzBweCA1MHB4JzsKICAgICAgICBkaXYxLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7CiAgICAgICAgZGl2MS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JzsKICAgICAgICBkaXYxLnN0eWxlLmJveFNoYWRvdyA9ICdyZ2JhKDAsIDAsIDAsIDAuNikgMXB4IDFweCA0MHB4IDBweCc7CiAgICAgICAgZGl2MS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGRpdjEuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpOwogICAgICAgIGRpdjEuY2xhc3NOYW1lID0gJ2JpbGl0d2luJzsKCiAgICAgICAgcmV0dXJuIGRpdjE7CiAgICB9CgogICAgc3RhdGljIHJlcXVlc3RINVBsYXllcigpIHsKICAgICAgICBjb25zdCBoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnRtaW5mbycpOwogICAgICAgIGgucHJlcGVuZCgnW1vohJrmnKzpnIDopoFIVE1MNeaSreaUvuWZqCjlvLnluZXliJfooajlj7PkuIrop5LkuInkuKrngrnnmoTmjInpkq7liIfmjaIpXV0gJyk7CiAgICB9CgogICAgc3RhdGljIGFsbG93RHJhZyhlKSB7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9CgogICAgc3RhdGljIGJlZm9yZVVubG9hZEhhbmRsZXIoZSkgewogICAgICAgIHJldHVybiBlLnJldHVyblZhbHVlID0gJ+iEmuacrOi/mOayoeWBmuWujOW3peS9nO+8jOecn+eahOimgemAgOWHuuWQl++8nyc7CiAgICB9CgogICAgc3RhdGljIGhpbnRJbmZvKHRleHQsIHBsYXllcldpbikgewogICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHsKICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICdiaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtYm90dG9tJzsKICAgICAgICAgICAgY29uc3QgZGl2MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBkaXYxLmNsYXNzTmFtZSA9ICdiaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3QtaXRlbSc7CiAgICAgICAgICAgIGNvbnN0IGRpdjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgZGl2Mi5jbGFzc05hbWUgPSAnYmlsaWJpbGktcGxheWVyLXZpZGVvLXRvYXN0LWl0ZW0tdGV4dCc7CiAgICAgICAgICAgIGNvbnN0IHNwYW4yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICBzcGFuMi50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgICAgICAgIGRpdjIuYXBwZW5kKHNwYW4yKTsKICAgICAgICAgICAgZGl2MS5hcHBlbmQoZGl2Mik7CiAgICAgICAgICAgIGRpdi5hcHBlbmQoZGl2MSk7CiAgICAgICAgfQogICAgICAgIHBsYXllcldpbi5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiaWxpYmlsaS1wbGF5ZXItdmlkZW8tdG9hc3Qtd3JwJylbMF0uYXBwZW5kKGRpdik7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBkaXYucmVtb3ZlKCksIDMwMDApOwogICAgfQoKICAgIHN0YXRpYyBnZXQgb3B0aW9uRGVzY3JpcHRpb25zKCkgewogICAgICAgIHJldHVybiBbCiAgICAgICAgLy8gMS4gYXV0b21hdGlvbgogICAgICAgIFsnYXV0b0Rhbm1ha3UnLCAn5LiL6L296KeG6aKR5Lmf6Kem5Y+R5LiL6L295by55bmVJ10sCgogICAgICAgIC8vIDIuIHVzZXIgaW50ZXJmYWNlCiAgICAgICAgWyd0aXRsZScsICflnKjop4bpopHmoIfpopjml4Hmt7vliqDpk77mjqUnXSwgWydtZW51JywgJ+WcqOinhumikeiPnOWNleagj+a3u+WKoOmTvuaOpSddLCBbJ2F1dG9EaXNwbGF5RG93bmxvYWRCdG4nLCAnKOa1iynml6DpnIDlj7PplK7mkq3mlL7lmajlsLHog73mmL7npLrkuIvovb3mjInpkq4nXSwKCiAgICAgICAgLy8gMy4gZG93bmxvYWQKICAgICAgICBbJ2FyaWEyJywgJ+WvvOWHumFyaWEyJ10sIFsnYXJpYTJSUEMnLCAnKOivt+iHquihjOino+WGs+mYu+atoua3t+WQiOa0u+WKqOWGheWuueeahOmXrumimCnlj5HpgIHliLBhcmlhMiBSUEMnXSwgWydtM3U4JywgJyjpmZBWTEPlhbzlrrnmkq3mlL7lmagp5a+85Ye6bTN1OCddLCBbJ2NsaXBib2FyZCcsICco5rWLKSjor7foh6rooYzop6PlhrNyZWZlcnJlcinlvLrliLblr7zlh7rliarotLTmnb8nXV07CiAgICB9CgogICAgc3RhdGljIGdldCBvcHRpb25EZWZhdWx0cygpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyAxLiBhdXRvbWF0aW9uCiAgICAgICAgICAgIGF1dG9EYW5tYWt1OiBmYWxzZSwKCiAgICAgICAgICAgIC8vIDIuIHVzZXIgaW50ZXJmYWNlCiAgICAgICAgICAgIHRpdGxlOiB0cnVlLAogICAgICAgICAgICBtZW51OiB0cnVlLAogICAgICAgICAgICBhdXRvRGlzcGxheURvd25sb2FkQnRuOiB0cnVlLAoKICAgICAgICAgICAgLy8gMy4gZG93bmxvYWQKICAgICAgICAgICAgYXJpYTI6IGZhbHNlLAogICAgICAgICAgICBhcmlhMlJQQzogZmFsc2UsCiAgICAgICAgICAgIG0zdTg6IGZhbHNlLAogICAgICAgICAgICBjbGlwYm9hcmQ6IGZhbHNlCiAgICAgICAgfTsKICAgIH0KfQoKLyoqKgogKiBDb3B5cmlnaHQgKEMpIDIwMTggUWxpNS4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICogCiAqIEBhdXRob3IgcWxpNSA8Z29vZGxxMTFbYXRdKDE2M3xnbWFpbCkuY29tPgogKiAKICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpYwogKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzCiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uCiovCgpsZXQgZGVidWdPcHRpb24gPSB7IGRlYnVnOiAxIH07CgpjbGFzcyBCaWxpVHdpbiBleHRlbmRzIEJpbGlVc2VySlMgewogICAgc3RhdGljIGdldCBkZWJ1Z09wdGlvbigpIHsKICAgICAgICByZXR1cm4gZGVidWdPcHRpb247CiAgICB9CgogICAgc3RhdGljIHNldCBkZWJ1Z09wdGlvbihvcHRpb24pIHsKICAgICAgICBkZWJ1Z09wdGlvbiA9IG9wdGlvbjsKICAgIH0KCiAgICBjb25zdHJ1Y3RvcihvcHRpb24gPSB7fSwgdWkpIHsKICAgICAgICBzdXBlcigpOwogICAgICAgIHRoaXMuQmlsaU1vbmtleSA9IEJpbGlNb25rZXk7CiAgICAgICAgdGhpcy5CaWxpUG9seWZpbGwgPSBCaWxpUG9seWZpbGw7CiAgICAgICAgdGhpcy5wbGF5ZXJXaW4gPSBudWxsOwogICAgICAgIHRoaXMubW9ua2V5ID0gbnVsbDsKICAgICAgICB0aGlzLnBvbGlmaWxsID0gbnVsbDsKICAgICAgICB0aGlzLnVpID0gdWkgfHwgbmV3IFVJKHRoaXMpOwogICAgICAgIHRoaXMub3B0aW9uID0gb3B0aW9uOwogICAgfQoKICAgIGFzeW5jIHJ1bkNpZFNlc3Npb24oKSB7CiAgICAgICAgLy8gMS4gcGxheWVyV2luIGFuZCBvcHRpb24KICAgICAgICB0cnkgewogICAgICAgICAgICAvLyB5b3Uga25vdyB3aGF0PyBpdCBpcyBhIHJhY2UsIGRhdGEgcmFjZSBmb3IganEhIHRyeSBub3QgdG8geWllbGQgdG8gb3RoZXJzIQogICAgICAgICAgICB0aGlzLnBsYXllcldpbiA9IEJpbGlVc2VySlMudHJ5R2V0UGxheWVyV2luU3luYygpIHx8IGF3YWl0IEJpbGlUd2luLmdldFBsYXllcldpbigpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBpZiAoZSA9PSAnTmVlZCBINSBQbGF5ZXInKSBVSS5yZXF1ZXN0SDVQbGF5ZXIoKTsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgICAgY29uc3QgaHJlZiA9IGxvY2F0aW9uLmhyZWY7CiAgICAgICAgdGhpcy5vcHRpb24gPSB0aGlzLmdldE9wdGlvbigpOwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5kZWJ1ZykgewogICAgICAgICAgICBpZiAodG9wLmNvbnNvbGUpIHRvcC5jb25zb2xlLmNsZWFyKCk7CiAgICAgICAgfQoKICAgICAgICAvLyAyLiBtb25rZXkgYW5kIHBvbHlmaWxsCiAgICAgICAgdGhpcy5tb25rZXkgPSBuZXcgQmlsaU1vbmtleSh0aGlzLnBsYXllcldpbiwgdGhpcy5vcHRpb24pOwogICAgICAgIHRoaXMucG9seWZpbGwgPSBuZXcgQmlsaVBvbHlmaWxsKHRoaXMucGxheWVyV2luLCB0aGlzLm9wdGlvbiwgdCA9PiBVSS5oaW50SW5mbyh0LCB0aGlzLnBsYXllcldpbikpOwoKICAgICAgICBjb25zdCBjaWRSZWZyZXNoID0gQmlsaVR3aW4uZ2V0Q2lkUmVmcmVzaFByb21pc2UodGhpcy5wbGF5ZXJXaW4pOwoKICAgICAgICBjb25zdCB2aWRlb1JpZ2h0Q2xpY2sgPSAodmlkZW8pID0+IHsKICAgICAgICAgICAgbGV0IGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoJ2NvbnRleHRtZW51JywgewogICAgICAgICAgICAgICAgJ2J1YmJsZXMnOiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdmlkZW8uZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIHZpZGVvLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMub3B0aW9uLmF1dG9EaXNwbGF5RG93bmxvYWRCdG4pIHsKICAgICAgICAgICAgLy8g5peg6ZyA5Y+z6ZSu5pKt5pS+5Zmo5bCx6IO95pi+56S65LiL6L295oyJ6ZKuCiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgICAgICAgICAgY29uc3QgaSA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoInZpZGVvIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZpZGVvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvUmlnaHRDbGljayh2aWRlbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyV2luLmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JpbGliaWxpLXBsYXllci1jb250ZXh0LW1lbnUtY29udGFpbmVyIGJsYWNrJykubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmlsaWJpbGktcGxheWVyLWNvbnRleHQtbWVudS1jb250YWluZXIgYmxhY2sgYmlsaWJpbGktcGxheWVyLWNvbnRleHQtbWVudS1vcmlnaW4nKS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCAodGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiI2JpbGliaWxpUGxheWVyID4gZGl2IikubGVuZ3RoID49IDQgJiYgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnZpZGVvLWRhdGEgLnZpZXciKSAmJiB0aGlzLnBsYXllcldpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIudmlkZW8tZGF0YSAudmlldyIpLnRleHRDb250ZW50LnNsaWNlKDAsIDIpICE9ICItLSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHRoaXMucGxheWVyV2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8tc2VuZGJhciIpLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgdGhpcy5wbGF5ZXJXaW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI21lZGlhX21vZHVsZSAubWVkaWEtY292ZXIgaW1nIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJ2aWRlbyIpOwogICAgICAgICAgICBpZiAodmlkZW8pIHsKICAgICAgICAgICAgICAgIHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3BsYXknLCAoKSA9PiB2aWRlb1JpZ2h0Q2xpY2sodmlkZW8pLCB7IG9uY2U6IHRydWUgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGF3YWl0IHRoaXMucG9seWZpbGwuc2V0RnVuY3Rpb25zKCk7CgogICAgICAgIC8vIDMuIGFzeW5jIGNvbnNpc3RlbnQgPT4gcmVuZGVyIFVJCiAgICAgICAgaWYgKGhyZWYgPT0gbG9jYXRpb24uaHJlZikgewogICAgICAgICAgICB0aGlzLnVpLm9wdGlvbiA9IHRoaXMub3B0aW9uOwogICAgICAgICAgICB0aGlzLnVpLmNpZFNlc3Npb25SZW5kZXIoKTsKCiAgICAgICAgICAgIGxldCB2aWRlb0EgPSB0aGlzLnVpLmNpZFNlc3Npb25Eb20uY29udGV4dF9tZW51X3ZpZGVvQSB8fCB0aGlzLnVpLmNpZFNlc3Npb25Eb20udmlkZW9BOwogICAgICAgICAgICBpZiAodmlkZW9BICYmIHZpZGVvQS5vbm1vdXNlb3ZlcikgdmlkZW9BLm9ubW91c2VvdmVyKHsgdGFyZ2V0OiB2aWRlb0EubGFzdENoaWxkIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgY2lkUmVmcmVzaC5yZXNvbHZlKCk7CiAgICAgICAgfQoKICAgICAgICAvLyA0LiBkZWJ1ZwogICAgICAgIGlmICh0aGlzLm9wdGlvbi5kZWJ1ZykgewogICAgICAgICAgICBbKHRvcC51bnNhZmVXaW5kb3cgfHwgdG9wKS5tb25rZXksICh0b3AudW5zYWZlV2luZG93IHx8IHRvcCkucG9seWZpbGxdID0gW3RoaXMubW9ua2V5LCB0aGlzLnBvbHlmaWxsXTsKICAgICAgICB9CgogICAgICAgIC8vIDUuIHJlZnJlc2ggPT4gc2Vzc2lvbiBleHBpcmUKICAgICAgICBhd2FpdCBjaWRSZWZyZXNoOwogICAgICAgIHRoaXMubW9ua2V5LmRlc3Ryb3koKTsKICAgICAgICB0aGlzLnBvbHlmaWxsLmRlc3Ryb3koKTsKICAgICAgICB0aGlzLnVpLmNpZFNlc3Npb25EZXN0cm95KCk7CiAgICB9CgogICAgYXN5bmMgbWVyZ2VGTFZGaWxlcyhmaWxlcykgewogICAgICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGF3YWl0IEZMVi5tZXJnZUJsb2JzKGZpbGVzKSk7CiAgICB9CgogICAgYXN5bmMgY2xlYXJDYWNoZURCKGNhY2hlKSB7CiAgICAgICAgaWYgKGNhY2hlKSByZXR1cm4gY2FjaGUuZGVsZXRlRW50aXJlREIoKTsKICAgIH0KCiAgICByZXNldE9wdGlvbihvcHRpb24gPSB0aGlzLm9wdGlvbikgewogICAgICAgIG9wdGlvbi5zZXRTdG9yYWdlKCdCaWxpVHdpbicsIEpTT04uc3RyaW5naWZ5KHt9KSk7CiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uID0ge307CiAgICB9CgogICAgZ2V0T3B0aW9uKHBsYXllcldpbiA9IHRoaXMucGxheWVyV2luKSB7CiAgICAgICAgbGV0IHJhd09wdGlvbiA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmF3T3B0aW9uID0gSlNPTi5wYXJzZShwbGF5ZXJXaW4ubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0JpbGlUd2luJykpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgeyB9CiAgICAgICAgZmluYWxseSB7CiAgICAgICAgICAgIGlmICghcmF3T3B0aW9uKSByYXdPcHRpb24gPSB7fTsKICAgICAgICAgICAgcmF3T3B0aW9uLnNldFN0b3JhZ2UgPSAobiwgaSkgPT4gcGxheWVyV2luLmxvY2FsU3RvcmFnZS5zZXRJdGVtKG4sIGkpOwogICAgICAgICAgICByYXdPcHRpb24uZ2V0U3RvcmFnZSA9IG4gPT4gcGxheWVyV2luLmxvY2FsU3RvcmFnZS5nZXRJdGVtKG4pOwogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbigKICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgQmlsaU1vbmtleS5vcHRpb25EZWZhdWx0cywKICAgICAgICAgICAgICAgIEJpbGlQb2x5ZmlsbC5vcHRpb25EZWZhdWx0cywKICAgICAgICAgICAgICAgIFVJLm9wdGlvbkRlZmF1bHRzLAogICAgICAgICAgICAgICAgcmF3T3B0aW9uLAogICAgICAgICAgICAgICAgQmlsaVR3aW4uZGVidWdPcHRpb24sCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfQoKICAgIHNhdmVPcHRpb24ob3B0aW9uID0gdGhpcy5vcHRpb24pIHsKICAgICAgICByZXR1cm4gb3B0aW9uLnNldFN0b3JhZ2UoJ0JpbGlUd2luJywgSlNPTi5zdHJpbmdpZnkob3B0aW9uKSk7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIGluaXQoKSB7CiAgICAgICAgaWYgKCFkb2N1bWVudC5ib2R5KSByZXR1cm47CgogICAgICAgIGlmIChsb2NhdGlvbi5ob3N0bmFtZSA9PSAid3d3LmJpbGlnYW1lLmNvbSIpIHsKICAgICAgICAgICAgcmV0dXJuIEJpbGlQb2x5ZmlsbC5iaWxpZ2FtZUluaXQoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgiL2Jhbmd1bWkvbWVkaWEvbWQiKSkgewogICAgICAgICAgICByZXR1cm4gQmlsaVBvbHlmaWxsLnNob3dCYW5ndW1pQ292ZXJJbWFnZSgpOwogICAgICAgIH0KCiAgICAgICAgQmlsaVR3aW4ub3V0ZGF0ZWRFbmdpbmVDbGVhcmFuY2UoKTsKICAgICAgICBCaWxpVHdpbi5maXJlZm94Q2xlYXJhbmNlKCk7CgogICAgICAgIGNvbnN0IHR3aW4gPSBuZXcgQmlsaVR3aW4oKTsKCiAgICAgICAgaWYgKGxvY2F0aW9uLmhvc3RuYW1lID09ICJ2Yy5iaWxpYmlsaS5jb20iKSB7CiAgICAgICAgICAgIGNvbnN0IHZjX2luZm8gPSBhd2FpdCBCaWxpTW9ua2V5LmdldEJpbGlTaG9ydFZpZGVvSW5mbygpOwogICAgICAgICAgICByZXR1cm4gdHdpbi51aS5hcHBlbmRTaG9ydFZpZGVvVGl0bGUodmNfaW5mbyk7CiAgICAgICAgfQoKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBhd2FpdCB0d2luLnJ1bkNpZFNlc3Npb24oKTsKICAgICAgICB9CiAgICB9CgogICAgc3RhdGljIG91dGRhdGVkRW5naW5lQ2xlYXJhbmNlKCkgewogICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgYWxlcnQoJ+i/meS4qua1j+iniOWZqOWunuWcqOWkquiAgeS6hu+8jOiEmuacrOWGs+Wumue9ouW3peOAgicpOwogICAgICAgICAgICB0aHJvdyAnQmlsaVR3aW46IGJyb3dzZXIgb3V0ZGF0ZWQ6IFByb21pc2Ugb3IgTXV0YXRpb25PYnNlcnZlciB1bnN1cHBvcnRlZCc7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBmaXJlZm94Q2xlYXJhbmNlKCkgewogICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdGaXJlZm94JykpIHsKICAgICAgICAgICAgQmlsaVR3aW4uZGVidWdPcHRpb24ucHJveHkgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKCF3aW5kb3cubmF2aWdhdG9yLnRlbXBvcmFyeVN0b3JhZ2UgJiYgIXdpbmRvdy5uYXZpZ2F0b3IubW96VGVtcG9yYXJ5U3RvcmFnZSkgd2luZG93Lm5hdmlnYXRvci50ZW1wb3JhcnlTdG9yYWdlID0geyBxdWVyeVVzYWdlQW5kUXVvdGE6IGZ1bmMgPT4gZnVuYygtMTA0ODU3NiwgMTA0ODQ3MTE0MjQpIH07CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyB4cGNXcmFwcGVyQ2xlYXJhbmNlKCkgewogICAgICAgIGlmICh0b3AudW5zYWZlV2luZG93KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdjaWQnLCB7CiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IFN0cmluZyh1bnNhZmVXaW5kb3cuY2lkKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ3BsYXllcicsIHsKICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGdldDogKCkgPT4gKHsgZGVzdHJveTogdW5zYWZlV2luZG93LnBsYXllci5kZXN0cm95LCByZWxvYWRBY2Nlc3M6IHVuc2FmZVdpbmRvdy5wbGF5ZXIucmVsb2FkQWNjZXNzIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnalF1ZXJ5JywgewogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB1bnNhZmVXaW5kb3cualF1ZXJ5LAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2ZldGNoJywgewogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB1bnNhZmVXaW5kb3cuZmV0Y2guYmluZCh1bnNhZmVXaW5kb3cpLAogICAgICAgICAgICAgICAgc2V0OiBfZmV0Y2ggPT4gdW5zYWZlV2luZG93LmZldGNoID0gX2ZldGNoLmJpbmQodW5zYWZlV2luZG93KQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn0KCkJpbGlUd2luLmRvbUNvbnRlbnRMb2FkZWRUaGVuKEJpbGlUd2luLmluaXQpOwo="},{"name":"2020!非解析!BiliBili清晰度破解","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://www.bilibili.com/*","*://xbeibeix.com/api/bilibili*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1591011319414,"data":{}},"enabled":false,"position":7,"uuid":"65719789-7bc0-4118-9c16-cb332306edd3","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAyMDIwIemdnuino+aekCFCaWxpQmlsaea4heaZsOW6puegtOinowovLyBAc3VwcG9ydFVSTCAgIGh0dHBzOi8vYmJzLmJsdWVhZ2xlLnRvcC9kLzMKLy8gQGhvbWVwYWdlICAgICBodHRwczovL2Jicy5ibHVlYWdsZS50b3AvZC8zCi8vIEBpY29uICAgICAgICAgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwvOWovNEFBUVNrWkpSZ0FCQVFBQUFRQUJBQUQvMndDRUFBa0dCeE1QRUJVUEVCQVNEeEFRRWhBUUR4SVFFQkFRRUE4UUZoRWFGaFVTRnhVWUlDZ2dHQm9sR3hVVklURWhKU2tyTGk0dUZ4OHpPRE10TnlndExpc0JDZ29LRGcwT0d4QVFHaThtSHlVdEx5MHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMZi9BQUJFSUFPRUE0UU1CRVFBQ0VRRURFUUgveEFBYkFBRUFBZ01CQVFBQUFBQUFBQUFBQUFBQUFRWUVCUWNEQXYvRUFEOFFBQUlCQWdJRkNRWURCZ2NCQUFBQUFBQUJBZ01SQkFZRkVpRlJrUll4TWpSVFlYRnlzUk1WUVVKU2dSUWlvUWNqSkdLQ3dUTkRrckxSNGZDaS84UUFHd0VCQUFJREFRRUFBQUFBQUFBQUFBQUFBQVVHQVFNRUFnZi94QUF5RVFBQkF3TUJCZ1lCQkFJREFRQUFBQUFBQVFJREJBVVJVaElVSVRFMFVSTVZNak5CZ1hFaVlaR3hJNkZDUThFay85b0FEQU1CQUFJUkF4RUFQd0R1SUFBQUFBQUFBQUFBSWpKUG1hZmc3akJoRlJlUklNZ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRlJ6bG1HVkovaDZMdE5xODUvU3R5N3lXdDlFa242MzhpQXU5eGRGL2lqNS9LbGUwSG1Xcmg2bDV5ZFNuSi9uaTNkcitaRWhVMEVjcmYwcGhTSm9ycEpDL3dEV3VVWG1kSHdPTmhYZ3FsT1NsRmxka2lkRzdaY25FdUVNekptN2JGeWhrR3MyZ0FBQUFBQUFBQUFBRlF6UG12MmV0Unc3dk5iSlQrRWZEdkphaXQrM2gwbklyOXl1NlI1amk1OSt4cmN2WnNxUW5HblhscjA1UFYxbjA0dHZaZDdqcHE3Y3hXcTZOTUtoeVVGNGUxNk1sWEtMOC9KMENNcnE2MnA4eEFLbUMxSXVVeWhJTWdBQUFBQUFBQUFBQUFBQUFBQUFBcGVkTXZTbTNpYVMxckw4OFBtdHZSTVc2dGF4UERmL0FDVjI3MjU3bDhhUDdRby82ZXFKMzRLd2JiTDJuSjRTcGZwVTVQOEFQSCs2N3prcTZSczdmM1RrZDl2cm4wei9BTmw1b2ROd0dOaFhncWxPV3RGL3AzRlpsaWRHN1pjbkV1a0U3Sm1iYkZ5aGttczNBQUFBQUFBQUFGTHpabWhLOUREeTI3VlVtdVpmQnhSTTBGQm5Fa2ljUGhDdTNTNjRSWW9WNC9LbEhKMHE1dE12NkduaTZpVWRrSXRPYzN6Slg1bHZaeVZkVzJGbkhuMk8rZ29YMVQwN0p6VTZwUXBLRVZCYzBVa3ZzVlp6bGN1Vkx5eGlNYWpVK0QwUEo2QUFBQUFBQUFBQUFBQUFBQUFBQUFBS1JtN0xPMTRpaEhuMjFJcjFSTlVGZmovSEl2NFVyVjF0Zi9iRW41UXBUWHczZm9UZkFyV0RaNkIwekxDVk5aWGNIMDQ3MXZYZWN0VlN0cUc0K2U1M1VGYTZtZmxPWHloMURSK05oWHBxcFRkNHk0cnVLeExFNk55dGR6THZCTXlaaVBZdkJUSk5adEFBQUFBQUtUbS9NMng0ZkR5M3FwVVg2eFg5eVp0OUR5a2tUOElWdTYzUk9NTVMvbGYvQUFwSzRXL1VuUGtySnROQWFGbmpKMmorV25HMnZQNFczTHZPV3FxMndOejgvQ0hmUTBENnArUCtLYzFPb1lIQndvVTFUcHEwWXJqM3NyRXNycEhLNTNNdTBNTElXSXhpY0VNZzFtMEFBQUFBQUFBQUFBQUFBQStYTkxuYVgzTTRVd3FvaEh0by9VdUtHeXZZeHR0N256K0lqOVVlS003THV4anhHOXgrSmg5Y2VLR3c3c1BFWjNJL0ZRK3VQRkdkaDNZZUt6dVB4VUg4OGVLR3c3c1k4VmkvSlRjNGFGcHlUeEZHVUl1TzJwRmZOMytKTDIrcWUxZkRlaTQvb3I5MW9ZM0lzMGFvaXB6VHVVci9BTXQ1TmxaTm5vVFM4OEpVVW90dUxmNTQ3MS95YzFUVE5uYmhlZndkdEZXdnA1TnBPWHloMDNCYVVwVm9LcEdhczk3Mm9yTWtENDNiS29YV0dxamxZajJxZS80cUgxeDRvOGJEdXhzOFZuY2Zpb2ZYSGloc083RHhXZHlWaVlmWEhpakd3N3NaOFJuY3BtY016WHZoNkV0bk5WbXZqL0xGK3BNMEZCLzJTSitFSzVkcnBuL0RDdjVYL3dBUXBaTktWdkpzdEE2Sy9GVmxUMWxDSy9OTnZkdVhlYzFYVWVDektKbFR1b2FUZVpOak9FK1RwK0RoU293Vk9ucXhqSFlrbXVKV0pGZkk3YWR6THJFMktKaU1aaEVROS9iUitwY1VlTmxleHQyMjl5ZmF4K3BjVVkyVjdEYWIzSHRJL1V1S0d5bzJrN2oyaStwY1VNS1oyazdrcWEzcmlNS05wRDZNR1FBQUFBQUQ0clZZd2k1U2FqRmJXM3pJeTFxdVhDSGw3MnNUTGw0RkkwM25SdHVuaHRrZTBmUGYrVkUzVFd0RXc2WCtDdFZ0OFhLdGgva3FtS3gxU3JMV3FWSlRsdmJ0NkVzeUZqRXcxTUVGTFVTeXUybnV5cDQ2ejN2aXpaaE94cTIxR3M5NzRzWVFiYWpXZTk4V01JTnBSZnZmRmpDRGJValdlOThXTURhWHVOYnZmRVlHMHZjQXgrQU1EUHdMN3JyN3N4Z3p0TDNKMW52ZkZtY0lOcFNOWjczeFl3ZzJsSjFudmZGakNEYlVnd1l5TC84QXZpRUNDKzcxc0ZUSmxIWTRrNnozdml6T0J0TDNHdTk3NHNZUWJidTQxM3ZmRmpaUWJidTQxM3ZmRmpaVHNOdDNjYTczdi9Vekd5blliYnU1OTBxODR2V2pPU2E1bnJNd3JHcW1GUTlObWUxY3RVc21oczQxS2NsR3YrOGh6T1h6THZJeXB0YlhKbVBncE0wbDZrWXFKTHhUL1pmTURqWVY0YTlPU2xGN2lDbGlkRzdaY25FdE1NN0ptN1RGeWhrR3MyZ0FpVHNydllsemdLdURtdWE5UHZFVGRPRHRSZzdiUG5hK1BnV1NnbzBpYnRPOVMvNktiZExnczcxWTMwcC9zcnhKSVE1Qmt3QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNVWVV5aHN0QmFYbmhLcW5GdHdidFVnK1p4LzVPV3BwbVRzd3ZQNE82aHJYMDBpS25MNVE2cGc4VEd0Q05TRHZHYVRSVnBHS3h5dGR6UXZFVXJaV0k5dkpUMlBCc05CblBTRG80WnFMdE9vOVJlRDUvME8rM1FwSk1tZVNjU0x1OVFzTk91T2E4RG1KYUNrWkJqQUpVVzlpMnQ4eVhPTW1VYXFyaERhVTh1NHBxNm95Mm5LdGZUb3VObzcwdGRVcVoyRlByazFpdXhrTi9wOVJueXFxMERrMWl1eGtOL3A5UThxcXRBNU5ZcnNaRGY2ZlVQS3FyUU9UV0s3R1EzK24xRHlxcTBEazFpdXhrTi9wOVE4cXF0QTVOWXJzWkRmNmZVUEtxclFPVFdLN0dRMytuMUR5cXEwRGsxaXV4a04vcDlROHFxdEE1Tllyc1pEZjZmVVBLcXJRT1RXSzdHUTMrbjFEeXFxMERrMWl1eGtOL3A5UThxcXRBNU5ZcnNaRGY2ZlVQS3FyUU9UV0s3R1EzK24xRHlxcTBEazFpdXhrTi9wOVE4cXF0QTVOWXJzWkRmNmZVUEtxclFPVFdLN0dRMytuMUR5cXEwRGsxaXV4a04vcDlROHFxdEE1Tllyc1pEZjZmVVBLcXJRT1RXSzdHUTMrbjFEeXFxMEdManRGVnFDdlZwU2duek8ydzJSVk1jaTRhNURSTlJ6UThYdFZERFp1NW5OeUF3WVJTNS9zKzBrN3l3OG5zdHJ3MzMrS0lXN1FKd2tUN0xMWWFsY3JDdjVRdkpCbG1PZloveGV2VWhUN055SisxUjdMVmQzS3BmcHRweU03RlRKZ3I0QUx2a0xSa1hGNG1TMXBYY0k3bzI1MlFOMW5jamtpVGx6TFJZNlZxdFdaZWZJdWtTR0xHU0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFlTmVpcWtYQ2FVb3kyTlBjWmpjclYyazVuaDdHdmFyWGNqbEduY0dxR0luU2owWXllcjRGdXBaVmxpUjY4eWhWMENRek9hbkxKZ0hRY2hzY3ZWL1o0cWxQZEt6NzAxYis1elZqTnVGeUhiYjVQRHFHTy9jNng3WHVLbmd2ZTBjenpqMXFmbVpacmQ3S0ZMdS9VT05FZDVGZ0E2UGtIcWk4OC9VclYxOS82TGxZK20rMUxLaU5Ka2tBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBZ0E1Ym0vcmxUeExWYituUXBGMzZseHBUdElzOUtEdE9ML0FKby83a2VYK2xUWkY2Mi9sRHJ1dVUvQjlBeWM3emt2NHFYbVpZcmQ3S0ZRdTZmL0FFT05FU0JGQUE2UGtIcWk4OC9VclYxOS93Q2k1V1BwdnRTeW9qU1pKQUl1QVNBUmNBa0FpNEFVZ0JjQWtBQUFBQUVOZ0M0R1JjQVhBSkFBQUFJQU9XNXY2NVU4UzFXL3AwS1JkK3BjYVU3U0xQU2gwNCthUHFlWCtsVDNGNjIvazY3WXFCOUFPZVp6NnpMeFpZYmQ3S0ZTdkhVS2FJa0NKSUFPajVCNm92UFAxSzFkZmY4QW91Vmo2YjdVc3FJMG1TUUNBQ0dBZkZXdEdPMlVsSHhhUjZhMXp1U0hoejBielhCZ1luVDJIcDg5YUQ3b3RObTlsSE0vazA1WkxoVHM1dlExV0l6dGg0OUJUbS9Mc09wbHBsWDFZUTRaTDVUcDZjcWJyUTJrRmlhTWFxV3JyWHV0MjA0cWlGWVpGakpLa3FFcUlrazdtY2pTZEpJQUFBQUFOVG1EVEt3Y0l6Y2RiV2RyTG5PcWxwVm5kaEZPR3RyVXBXbzVVTmZoODU0ZVhQcndmZkhZYjMycVpPV0ZPVmw3cGw0TGxEYVlmVFdIbjBhMEw3bkpKbks2bG1iemFwMnNycWQzSjZmeVowS2lrcnhhZmc3bWxXcW5NNld1UjNGRDdNR2NCQXlTQVFBY3R6ZjF5cDRscXQvVG9VaTc5UzQwcDJrV2ZkRHB4ODBmVTh2OUtudUwxdC9KMTBwNTlBT2U1eTYxTHhaWXJkN0tGU3ZIVUthSWtDSklBT2o1QjZvdlBQMUsxZGZmK2k1V1BwdnRTeWthVEpwTlA1aGpnM0ZTZzVPWE5ibU95a29uVkdjTHlJNnV1Q1V1TXBuSlY4Vm5ldEovdTRScHI0WHRKa3F5MHhKNmx5UWN0OW1YMEpnMWVKekZpYW5TcXY4QXBTajZIV3lpZ1p5YWNFbHlxWkU0dU5mVXhFNWRLY3BlTW16b2JHeHZKRGtkTkk3MU9VOHJIczE1SkJrdm43UE1WZWxPaytlRXJyd0s5ZG84UFI2ZkphN0ZMbUpXbHZSRUlUNUprQUFNQStiZ3huZ1VUOW91SnZPblRYeXFUZjM1aWV0RFAwdWNWaS95WmMxaFQ3RXh3SzdrV01tRDJwWXFwRG8xSnJ3a3p3Nk5pODBRM01ua2J5Y3FHeXcyWnNWVDVxdDF1a2t6bWZRUVAvNG5YSGRhbG5KeHRjSm5tckgvQUJLYW10NmRud09OOXBZdnBYQjN4WDZSUFdtUzJhQzB3c1hCempGeHM5VjMza1RWVXl3UDJWVW42S3NTcFp0SW1EWm5NZGh5M04vWEtuaVdxMzlPaFNMdjFMalNuYVJaNllmcHg4MGZVOHY5S251TDFwK1RyUHRlNHFXd1gzYi9BR0tEbk5meE12Rms5YmZaUXF0NDZoVFFraVJKQUIwZklQVkY1NStwV3JyNy93QkZ5c2ZUZmFsa0kwbVNxZnRDdzdsUWpVWCtYTGI0TkVyYVg0bFZxL0tFRmZZOXFGcnV5bEFaWVVLaVFaQXVBU3R1eGJmRGFGNEdVUXlhT2o2MCtqUm0vd0NsbXA4OGJlYmsvazNzcFpuOG1yL0JiOGw2S3IwS3NwVklhc0pSdHo3YjNJYTVWRU1qRVJxNVZGTERhS09hR1JYT1RDS2hja1F4WWo2QUFBQVBrd1lLSG0zUStJcTRpVlNNTmFGa28yMnZtSiszMU1NY1NOVmVKVjdyUlZFczZ2Uk1wOEZZcTRHckRwVXFrZkdMSlJzc2J2UzVDRWZCSzMxTlZQb3gzd05wb3dBQUFINm1ESjFESjJHOW5oSWZ6L25mM0t0Y1g3VTYvdHdMeGFZOWltYisvRTNoeEVrY3R6ZjF5cDRscXQvVG9VaTc5UzQwcDJrV2VtRzZjZk12VTh2OUtudVAxcCtUcWhWQzlGSHpwMWwrTEp5M2V5aFdieDFDbWdKRWlDQURvK1FlcUx6ejlTdFhYMy9vdVZqNmI3VXNoR2t5cGc2YndudHFFNmFWMjFzOFRkVFNlSElqam1xNGZGaWN6dVVYQzVNeE11bHF3VDc3dmdUejdwQzNseEt2SFpLaGVlRU5waDhpSmY0bGEvY2xZNVgzaGY4QWkwN283QTFPTDNHMXcyVDhORGE0dVQ3NU8zQTVIM09kM3pnN1k3TlN0NDR6OW0wb2FNb3c2TktDL3BUWnl1cUpYYzNLZHphYUZuSnFmd1pVVWx6Skx3MkdyS3J6TjZJaWNqN0JrQUFBQUFBQUVNQStKd1V0a2ttdTlYQ0tyZVNubFdvdk14TVJvaWhVNlZLSDJTUnZaVXl0NU9VNTVLU0IvQldwL0JxOFJrM0RTMnFNb3Z1azdjRHFiYzUwNXFjVWxscG5jc29hckVaRDUzVHJlQ2NmN25TeTc2bW5ESllQbGp6VjFzbjRtTDVveWpkYlU5dHI3ZGgxdHVjS3AyVTQzV1dvYXFmS0hSTUZTOW5UakQ2WXBGZGtmdHVWeGJJV2VHeEc5a1BjOEcwNWJtL3JsVHhMVmIrblFwRjM2bHhwVHRJczlNTjA0K1plcDVmNlZQY2ZyVDhuVkNxRjZLUG5Uckw4V1RsdTlsQ3MzanFGSytTSkVBQTZQa0hxaTg4L1VyVjE5LzZMbFkrbSsxTExZalZKa1dCakFzRElzQUxBQ3dBc0FTQUFBQUFBQUFBQVJZQVdBRmpHQUxHUUxBQ3hnQXlEbHViK3VWUEV0VnY2ZENrWGZxWEdsTzBpejB3M1RqNWw2bmwvcFU5eCt0UHlkVUtxWG9vK2RPc3Z4Wk4yNzJVS3plT29VcjVJa1FBRG8rUWVxTHp6OVN0WFgzL291Vmo2YjdVc3FJMG1TUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNBRGx1Yit1VlBFdFZ2NmRDa1hmcVhHbE8waXowdzcvUEh6UjlUeS93QktteUwxcCtVT3QremlWSGFVdjJ3MG9HZE9zdnhaUDI3MlVLcGVPb1VyNUlrUUFEbytRZXFMeno5U3RYWDMvb3VWajZiN1VzcUkwbVNRQUFBQUFRd0NHekNHQ0w5Ly9aNkg1RFo1TWh1MjF1MXVjeW5NeGxPSm85RDVoamlLOVdqemFqL2Qvd0F5WFA4QXFkdFJST2hpYS84QWtqYVM0dG5tZXp0eU41YzRjNUpMNEZ3WlhnRXpKZ201Z0gwWk1nQUFBQUFFQUhMYzM5Y3FlSmFyZjA2Rkl1L1V1TktkcEZuM1I2Y2ZOSDFQTC9TcDdpOWJmeWRkS2VmUURuMmRKZnhNdkZsaXQzc29WSzhkUXBvQ1FJa0FIUjhnOVVYbm42bGF1dnYvQUVYS3g5TjlxV1ZFYVRKSUFBQUFBSVlCaWFTeEVxVktWU01IVWxGWFVVK2MyUk1hOSt5NWNKM05FOGo0NDFjMU1xYzNxNWpyeXJxczViWXU2aDhxWDAyTEkyaGhTTldJblA1S2M2NXp1bThSVjVmSHdYZlIrYU1QVmdtNXFuSzM1b3k1MHlFa29KbU93aVpRc3NGMXA1RzVWY0wyTkhtZk5VWnhkSER1NmF0T2EzYmtkMURibGE3YmtUNkkyNVhaRmFzY1BIUE5Tb1lhdktuT000TnFVV21taVlleHIycTFVNEtWNktWOFRrYzFlSjBQUkdiS05XQ1ZXU3BWRnpwOHplOHJ0UmJaSTNmb1RLRnVwYnZESXo5YTRVK05NWnVwVW90VVg3V3B0U3QwWXZlek5QYlpITCt0TUllYXU4UlJ0eEd1MHY4QVJYTkJaanJ3cldiZGRWWks4ZmltMzh1NUVoVlVNUGg1VGhnaWFHNXpwTGhmMVorRG84WGRjMXRuTnU3aXU0UkY0RnZSVnhrOUVESUFBQUFBQkFCeTNOL1hLbmlXcTM5T2hTTHYxTGpTbmFSWjZVT25IelI5VHkvMHFlNHZXMzhuWFNubjBBNTVuUHJNdkZsaXQzc29WSzc5UXBvU1FJa0FIUjhnOVVYbm42bGF1dnYvQUVYS3g5TjlxV1ZFYVRKSUFBQUFBSVlCRFF3T0NsU3pIbE5WVzZ0QzBaL05ENVplRzVrdFNYSldKc3ljaUJ1Tm9TVC9BQ1JjSGR1NVM4Vm82clRscXpwVFRXNU5yaWlhWlBHOU10Y2hYSmFXYUpkbHpWUGZSK2hhOWQ2c0tja3ZtY2xaSmZjOFMxY1VhWmN2RTl3VUUweTRhMVN5NHpKUDdtUHNwL3ZZcjg5K2FiM0xjUmtkMS95THRwK240L1ltcGJGaUpOaGYxZlA3bFV4V2pLMUtXck9sSk5iazJuOTBTMGRSRzlNdGNRVTFMTkV1eTVxbjNnZEUxcTB0V25TbDN0cHBMdjJtSkttS05NdWNlb2FLYVpjTmFwZk10WmJqaGZ6emFuVmZ4dHNqNEZmcks1MDY0VGtXbTNXeHROK3B5NWQvUllEZ0pWRDdCa0FBQUFBQWdBNWJtL3JsVHhMVmIrblFwRjM2bHhwVHRJczlLSFRqNW8rcDVmNlZQY1hyYitUcnRpb0gwQTUzbkYveFUvTXl3MjcyVUtoZGwvOEFwY2FJa0NMQUIwZklQVkY1NStwV3JyNy9BTkZ5c2ZUZmFsbFJHa3lTQUFBQUFDTEFDd0FzQVE0cnhDREFVZnNBVFlBT0tmd0dUR0VDaWtCZ1dCa1dBSkFBQUFBQUFJQU9XNXY2NVU4UzFXL3AwS1JkK3BjYVU3U0xQdWowbythUHFlSCtsVFpGNjAvSjF5NVVTL1pLSG5laHExOWI2M0prOWJINWp3VmU5UjRtMnU1WFNUSVVnQTZQa0hxaTg4L1VyVjE5L3dDaTVXUHB2dFN5b2pTWkpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBSUFPVzV2NjVVOFMxVy9wMEtSZCtwY2FVN1NMUGJCdzFxa0Z2bkgxTmNxNFlxL3NiWVV6STFQM090ZllxUmZzb1YzOW9lRGJwUXJMNUpXZjlSSTJtWEVpc1g1SWkvUTVqU1R0L3dDbENMQWhVeUFDNTVFMHRHRjhOTjZyYmJnMzhkNklPNlV6bmY1VzhlNVpiSldOYWl3djRmS0YzVElRc3BOeGdDNHdCY1lBdU1BWEdBTGpBRnhnQzR3QmNZQXVNQVhHQUxqQUZ4Z0M0d0JjWUF1TUFYR0FMakFGeGdIaGk4VkNsQjFKeVVZeFYzdFBUSTNTS2lONXFhNVpXUk1WN2w0SWNvMHhqZnhGYWRXMWxKdHhYY1c2bWk4S05HRkRySi9IbWMvOXpDTjV5bTd5ZmczVnhjSHpxbithWGhhM3FjTnhrUmtLL3Z3SlMwUXJKVW92d25GVHFPcVZZdTJERzBuZ2xYcFNwU3RhUzJYK0QrRE5rVWl4dlJ5R3FvaFNhTldMOG5Jc1hoWlVweXB6VnBSYlQ3Kzh0OGNqWHRSeWNsUG44OFRvbnF4M3dlVmozazE0Q2Y2Zkg0b3hqZ1pSeGx4MHJYU3NxMDB2RTFidEV2TnFIUWxiT2lZUnluMTczcjl2UGlOMWgwb045bjFxUGU5ZnQ1OFJ1c09sQnZzK3RSNzNyOXZQaU4xaDBvTjluMXFQZTlmdDU4UnVzT2xCdnMrdFI3M3I5dlBpTjFoMG9OOW4xcVBlOWZ0NThSdXNPbEJ2cyt0Ujczcjl2UGlOMWgwb045bjFxUGU5ZnQ1OFJ1c09sQnZzK3RSNzNyOXZQaU4xaDBvTjluMXFQZTlmdDU4UnVzT2xCdnMrdFI3M3I5dlBpTjFoMG9OOW4xcVBlOWZ0NThSdXNPbEJ2cyt0Ujczcjl2UGlOMWgwb045bjFxUGU5ZnQ1OFJ1c09sQnZzK3RSNzNyOXZQaU4xaDBvTjluMXFQZTlmdDU4UnVzT2xCdnMrdFI3M3I5dlBpTjFoMG9OOW4xcVBlOWZ0NThSdXNPbEJ2cyt0Ujczcjl2UGlOMWgwb045bjFxZU9JeHRTcGIybFNVcmMxMmVtUXNaNlVROFNWRWtpWWVxcWVCczVHZ0JWTTRPaVpGMFM2TkoxcHEwNnRtdDZoOEVWeTUxUGlTYkNjay9zdUZtby9CaThSM04zOUZvSXdtZ0FWck4yWGZ4TWZhMGxhdEZmNjF1OFNTb0szd1YyWGVuK2lHdWx0U29UeEdKK3BQOW5PcWtIRnRTVGkwN05QWTB5eE5WRjRvVkJ6VmF1eTVENFBaNEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCSmhWQ0ZreXZseVZlYXExRTQwVlo3ZjhBTS82SXV0cld4dFZqRjQvMFRkdHRqcG5KSTlNTi9zNlBHTmxaYkV0aUs2cTVMZWlZVENFZ3lBQUFhWFRtVzZXS3ZKclVxZlhHMTNiNFBlZHROWFNRY0U0cDJJNnN0c1ZUeFhnN3VoVE1ibERFVStpbFZXK0hPVE1WemhmejRGYm5zMVJINlUydndZdkp2RmRoSzMydWJkK2d6NmpUNVpWYzloVHlxYUN4TVl1Y3FFMUZiWk5wYkVla3JZVlhDT05icUNvYWl1Vmk0UTF4MUhHQW9ROXNOaHBWWktGT092SjNzbHpzMXZrYXhNdVhDRzJLSjBqdGxpWlV6MWx6RlBtdzgvOEE1WDl6UnYwQ2Mzb2RTV3lxWC9yVWNuY1YyRStDTTc5QnFReDViVmFGSTVPNHJzSjhFWTMrRFVQTEtyUXBLeTVpdXdsK2czK0RVWlMyVldoU2VUZUs3R1JqZjROUm55eXEwS09UZUs3R1EzK0RVUExLclFmU3kxaWV4WTMrRFVQSzZyUU9UT0o3Sm1QTUlOUm55cXEwaFpaeFBaTWVZUWFoNVZWYVQ2NUw0bnNtUE1JTlJueXFwMG5oak5BMTZNSFVuVGFnclhlNDlSMWtVajlscThUWE5iNTRtYmJtOEVOYWRYRTRpREpnek5GNk9uaWFpcDA3WDU3dm1ORlJPMkZtMDQ2YVdtZlVQMkdtOVdSc1I5ZFA5VGg4Mmk3S1Nua00vZENJNUh4RjdPZE5kKzBlYlJkbENXR2RWNW9iM1JPVEtWSnFkVnVySmZCMjFFemdudWtqMHczZ2hKMHRraGo0di9Vditpenhpa3JKV1MrQ0kxVnlUU0lpY0VKTUdRQUFBQUFBQUFENHJVOWFMaS9tVFhGR1dyaFVVOHZidE5WRGora3NETEQxWlVwcDNUMk5xMnN0NkxoQk0yVmlPUStmVk5PNkNSV0tZcHV5YzVjc2hhSms1dkV6amFLVnFUM3Y0c2hMcFV0MmZEYXY1TEpZNlIyMTR6azRmQmV5RExPQUFBQUFBQUFBQUFBQUREMHZnL2IwWjBuODBYYngrSDZtMkNUdzVFY2M5VkQ0MFRtZHprbUt3OHFVM1RtbkdVWFpwK3FMZEhJMlJ1MDFTZ3l4UGpjclhwaFVQRm16SnFMN2tEUmNvUmxYbXJhOWxCTldhU3Z0Kzl5djNXb2E5eU1iOEZyc1ZLNk5xeXUrZVJjQ0lMQUFBQUFBQUFBQUFBQUFBQUFERXgyamFWZFdxMDR6dHZXM2liWXA1SWx5eGNHaWFtaW1URWpjbURTeXZoWXROVVZkTzZ1MnplNnZuY21GY2N6YlhTdFhPeWJlRUZGV1NTUzVrbFpISXFxdk03MFJFVENIMFlNZ0FBQUFBQUFBQUFBQUFBR0ZqOUZVYS84QWkwNHo4VnQ0bTZLZVNMMExnNTVxV0diMXR5WWxETEdGZzlaVVZlOTFlN3NiblY4N2t3cmpuWmE2WnE1UnB0NHhTVmtySmJqak85RVJPUklNZ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBSC85az0KLy8gQG5hbWVzcGFjZSAgICBodHRwczovL3d3dy5iaWxpYmlsaS5jb20vKgovLyBAdmVyc2lvbiAgICAgIDAuMC42Ci8vIEBkZXNjcmlwdGlvbiAgMjAyMCHpnZ7op6PmnpAhQmlsaUJpbGnnoLTop6PmnIDpq5jmuIXmmbDluqYo5Y+q6IO95pyA6auY55qE5riF5pmw5bqm5YOPNEssMTA4MFArLDEwODBQNjDnrYkpLOiHquWKqOWIh+aNouacgOmrmOa4heaZsOW6pgovLyBAYXV0aG9yICAgICAgIEJsdWVhZ2xlCi8vIEBtYXRjaCAgICAgICAgKjovL3d3dy5iaWxpYmlsaS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly94YmVpYmVpeC5jb20vYXBpL2JpbGliaWxpKgovLyBAcmVxdWlyZSAgICAgIGh0dHA6Ly9jZG4uc3RhdGljZmlsZS5vcmcvanF1ZXJ5LzIuMC4wL2pxdWVyeS5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CnZhciBjb25maWdfY3JhY2sgPSB7IC8v5YWo5bGA6YWN572uCiAgICBhdXRvX2hpZ2hlc3RfcXVhbGl0eTogdHJ1ZSwgLy/mmK/lkKboh6rliqjliIfmjaLmnIDpq5jmuIXmmbDluqYKICAgIGJlaWJlaV9wYXNzd29yZDogIjIwMjAwNzAyMTMiIC8v6K+35Zyo6L+Z6YeM6L6T5YWl576k5YWs5ZGK55qE5a+G56CBCn07CjsKO2lmKGxvY2F0aW9uLnRvU3RyaW5nKCkuaW5kZXhPZigid3d3LmJpbGliaWxpLmNvbSIpPD0tMSl7aWYoc2VsZiE9dG9wKXtkb2N1bWVudC5jb29raWU9ImJlaWJlaWJpbGlfY29uZmlnX3Bhc3N3b3JkPSIrY29uZmlnX2NyYWNrLmJlaWJlaV9wYXNzd29yZCsiOyBleHBpcmVzPVRodSwgMTggRGVjIDI5OTkgMTI6MDA6MDAgR01UOyBwYXRoPS9hcGkvYmlsaWJpbGkifTt3aW5kb3cub25sb2FkPWZ1bmN0aW9uKCl7aWYoc2VsZiE9dG9wKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oYSl7d2luZG93LmdldF91cmw9YS5kYXRhfSxmYWxzZSk7aWYoJCgiaW5wdXRbbmFtZT0nYmlsaWJpbGl1cmwnXSIpLnZhbCgpLmxlbmd0aD4wKXtmdW5jdGlvbiBnZXRfcXVhbGl0eSgpe2lmKCQoIiNsaXN0aGQiKS5jaGlsZHJlbigib3B0aW9uW3NlbGVjdGVkXSIpLnRleHQoKT09PSQoIiNsaXN0aGQiKS5jaGlsZHJlbigib3B0aW9uIikuZmlyc3QoKS50ZXh0KCkpe3N3aXRjaCgkKCIjbGlzdGhkIikuY2hpbGRyZW4oIm9wdGlvbltzZWxlY3RlZF0iKS50ZXh0KCkpe2Nhc2UiIOi2hea4hSA0SyDil4AgIjpyZXR1cm4iNEsiO2JyZWFrO2Nhc2UiIOmrmOa4hSAxMDgwUCsg4peAICI6cmV0dXJuIjEwODBQKyI7YnJlYWs7Y2FzZSIg6auY5riFIDcyMFA2MCDil4AgIjpyZXR1cm4iNzIwUDYwIjticmVhaztjYXNlIiDpq5jmuIUgMTA4MFA2MCDil4AgIjpyZXR1cm4iMTA4MFA2MCI7YnJlYWs7Y2FzZSIg6auY5riFIDEwODBQIOKXgCAiOnJldHVybiIxMDgwUCI7YnJlYWs7Y2FzZSIg6auY5riFIDcyMFAg4peAICI6cmV0dXJuIjcyMFAiO2JyZWFrfX1lbHNle3JldHVybiJwYXNzd29yZF9lcnJvciJ9fTtpZihnZXRfcXVhbGl0eSgpPT09InBhc3N3b3JkX2Vycm9yIil7cGFyZW50LnBvc3RNZXNzYWdlKGdldF9xdWFsaXR5KCksIioiKX1lbHNle2lmKCQoIiNsaXN0IikuY2hpbGRyZW4oIm9wdGlvbjpjb250YWlucygnTTRTJykiKS5uZXh0KCkudGV4dCgpLmluZGV4T2YoIumfs+mikSIpIT0tMSl7cGFyZW50LnBvc3RNZXNzYWdlKCLliIbmrrXop4bpopEiLCIqIil9ZWxzZXt2YXIgYj17InF1YWxpdHkiOmdldF9xdWFsaXR5KCksIm00c192aWRlbyI6JCgiI2xpc3QiKS5jaGlsZHJlbigib3B0aW9uOmNvbnRhaW5zKCdNNFMnKSIpLm5leHQoKS52YWwoKSwibTRzX2F1ZGlvIjokKCIjbGlzdCIpLmNoaWxkcmVuKCJvcHRpb246Y29udGFpbnMoJ+mfs+mikScpIikubmV4dCgpLnZhbCgpfTtwYXJlbnQucG9zdE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoYiksIioiKX19fWVsc2V7dmFyIGM9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZigkKCJpbnB1dFtuYW1lPSdiaWxpYmlsaXVybCddIikubGVuZ3RoPjAmJiQoIiNidXR0b24tMSIpLmxlbmd0aD4wKXskKCJpbnB1dFtuYW1lPSdiaWxpYmlsaXVybCddIikudmFsKHdpbmRvdy5nZXRfdXJsKTskKCIjYnV0dG9uLTEiKS5jbGljaygpO3BhcmVudC5wb3N0TWVzc2FnZSgicmVmcmVzaCIsIioiKTtjbGVhckludGVydmFsKGMpfX0sMTApfTskKCJ2aWRlbyIpLmJpbmQoJ3BsYXknLGZ1bmN0aW9uKCl7JCgidmlkZW8iKS5wYXVzZSgpfSl9fX1lbHNle3dpbmRvdy5nZXRfdmlwX2NvdXJzZT1mdW5jdGlvbigpeyQoIi5idWktc2VsZWN0LWxpc3QiKS5wcmVwZW5kKCI8bGkgY2xhc3M9J2J1aS1zZWxlY3QtaXRlbScgaWQ9J2NyYWNrX3N0YXR1ZSc+PHNwYW4gY2xhc3M9J2JpbGliaWxpLXBsYXllci12aWRlby1xdWFsaXR5LXRleHQnPuegtOino+eKtuaAgTwvc3Bhbj48c3Bhbj7or7fnrYnlvoU8L3NwYW4+PC9saT4iKTskKCJib2R5IikuYXBwZW5kKCI8aWZyYW1lIGlkPSdiZWliZWknIHNyYz0naHR0cHM6Ly94YmVpYmVpeC5jb20vYXBpL2JpbGliaWxpLycgc3R5bGU9J2Rpc3BsYXk6bm9uZSc+PC9pZnJhbWU+Iik7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJlaWJlaSIpLm9ubG9hZD1mdW5jdGlvbigpe2lmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoInZpZGVvIikhPS0xfHx3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCJiYW5ndW1pIikhPS0xKXt3aW5kb3cucW1qPXdpbmRvdy5sb2NhdGlvbi5ocmVmfWVsc2V7aWYodHlwZW9mIF9fSU5JVElBTF9TVEFURV9fLmJ2aWQ9PT0idW5kZWZpbmVkIil7d2luZG93LnFtaj1fX0lOSVRJQUxfU1RBVEVfXy5lcEluZm8uYnZpZH1lbHNle3dpbmRvdy5xbWo9X19JTklUSUFMX1NUQVRFX18uYnZpZH19O2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJiZWliZWkiKS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHdpbmRvdy5xbWosImh0dHBzOi8veGJlaWJlaXguY29tL2FwaS9iaWxpYmlsaS8iKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsZnVuY3Rpb24oZCl7aWYoZC5kYXRhPT09InJlZnJlc2gifHxkLmRhdGE9PT0icGFzc3dvcmRfZXJyb3IifHxkLmRhdGE9PT0i5YiG5q616KeG6aKRIil7c3dpdGNoKGQuZGF0YSl7Y2FzZSJyZWZyZXNoIjpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYmVpYmVpIikub25sb2FkPWZ1bmN0aW9uKCl7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJlaWJlaSIpLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2Uod2luZG93LnFtaiwiaHR0cHM6Ly94YmVpYmVpeC5jb20vYXBpL2JpbGliaWxpLyIpfTticmVhaztjYXNlInBhc3N3b3JkX2Vycm9yIjokKCIjY3JhY2tfc3RhdHVlIikucmVtb3ZlKCk7JCgiLmJ1aS1zZWxlY3QtbGlzdCIpLnByZXBlbmQoIjxhIGhyZWY9J2h0dHBzOi8vYmJzLmJsdWVhZ2xlLnRvcC9kLzMnIHN0eWxlPSdjb2xvcjpyZWQnIGNsYXNzPSdidWktc2VsZWN0LWl0ZW0nPuWvhueggemUmeivr+WJjeW+gOiuuuWdmzwvYT4iKTskKCIjYmVpYmVpIikucmVtb3ZlKCk7YnJlYWs7Y2FzZSLliIbmrrXop4bpopEiOiQoIiNjcmFja19zdGF0dWUiKS5jaGlsZHJlbigpLmVxKDEpLnRleHQoIuaaguS4jeaUr+aMgeWIhuauteinhumikeS4jei/h+S9oOWPr+S7peeZu+W9leingueciyIpOyQoIiNiZWliZWkiKS5yZW1vdmUoKTticmVha319ZWxzZXt2YXIgZT1KU09OLnBhcnNlKGQuZGF0YSk7d2luZG93LmJlaWJlaV91cmxfcXVhbGl0eT1lLnF1YWxpdHk7d2luZG93LmJlaWJlaV91cmxfdmlkZW89ZS5tNHNfdmlkZW87d2luZG93LmJlaWJlaV91cmxfYXVkaW89ZS5tNHNfYXVkaW87JCgiI2JlaWJlaSIpLnJlbW92ZSgpOyQoIi5idWktc2VsZWN0LWxpc3QiKS5maW5kKCJzcGFuOmNvbnRhaW5zKCIrd2luZG93LmJlaWJlaV91cmxfcXVhbGl0eSsiKSIpLnBhcmVudHMoImxpIikucmVtb3ZlQXR0cigiZGF0YS12YWx1ZSIpLmF0dHIoImNyYWNrX29wdGlvbiIsInRydWUiKTtpZigkKCIuYnVpLXNlbGVjdC1saXN0IikuZmluZCgic3Bhbjpjb250YWlucygiK3dpbmRvdy5iZWliZWlfdXJsX3F1YWxpdHkrIikiKS5zaWJsaW5ncygiLmJpbGliaWxpLXBsYXllci1iaWd2aXAiKS5sZW5ndGg+MCl7JCgiLmJ1aS1zZWxlY3QtbGlzdCIpLmZpbmQoInNwYW46Y29udGFpbnMoIit3aW5kb3cuYmVpYmVpX3VybF9xdWFsaXR5KyIpIikuc2libGluZ3MoIi5iaWxpYmlsaS1wbGF5ZXItYmlndmlwIikudGV4dCgi5bey56C06KejIil9ZWxzZXskKCIuYnVpLXNlbGVjdC1saXN0IikuZmluZCgic3Bhbjpjb250YWlucygiK3dpbmRvdy5iZWliZWlfdXJsX3F1YWxpdHkrIikiKS5zaWJsaW5ncygiLmJpbGliaWxpLXBsYXllci1uZWVkbG9naW4iKS50ZXh0KCLlt7LnoLTop6MiKX07dmFyIGY9c2V0VGltZW91dChmdW5jdGlvbigpeyQoIiNjcmFja19zdGF0dWUiKS5jaGlsZHJlbigpLmVxKDEpLnRleHQoIuivpeinhumikeaXoOazleegtOinoyIpO2NsZWFySW50ZXJ2YWwoZyl9LDEwMDApO3ZhciBnPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoJCgibGlbY3JhY2tfb3B0aW9uPSd0cnVlJ10iKS5sZW5ndGg+MCl7JCgiI2NyYWNrX3N0YXR1ZSIpLmNoaWxkcmVuKCkuZXEoMSkudGV4dCgi5bey56C06KejIik7Y2xlYXJUaW1lb3V0KGYpO2NsZWFySW50ZXJ2YWwoZyl9fSwxMDApO3dpbmRvdy5vcmlnaW5fdmlkZW89Im5vbmUiOyQoImxpW2NyYWNrX29wdGlvbj0ndHJ1ZSddIikuY2xpY2soZnVuY3Rpb24oKXtpZih3aW5kb3cub3JpZ2luX3ZpZGVvPT09Im5vbmUiKXskKCIuYnVpLXNlbGVjdC1yZXN1bHQiKS5odG1sKCI8c3BhbiBjbGFzcz0nYnVpLXNlbGVjdC1yZXN1bHQnPiIrJCgiLmJ1aS1zZWxlY3QtbGlzdCIpLmNoaWxkcmVuKCJsaVtjcmFja19vcHRpb249J3RydWUnXSIpLmNoaWxkcmVuKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvLXF1YWxpdHktdGV4dCIpLnRleHQoKSsiPHNwYW4gY2xhc3M9J2JpbGliaWxpLXBsYXllci1hdXRvLWhpZGRlbic+KCIrJCgiLmJ1aS1zZWxlY3QtbGlzdCIpLmNoaWxkcmVuKCJsaVtjcmFja19vcHRpb249J3RydWUnXSIpLmNoaWxkcmVuKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvLXF1YWxpdHktdGV4dCIpLnRleHQoKSsiKTwvc3Bhbj48L3NwYW4+Iik7JCgiLmJ1aS1zZWxlY3QtaXRlbS1hY3RpdmUiKS5yZW1vdmVDbGFzcygiYnVpLXNlbGVjdC1pdGVtLWFjdGl2ZSIpOyQoIi5idWktc2VsZWN0LWxpc3QiKS5maW5kKCJzcGFuOmNvbnRhaW5zKCIrd2luZG93LmJlaWJlaV91cmxfcXVhbGl0eSsiKSIpLnBhcmVudHMoImxpIikuYWRkQ2xhc3MoImJ1aS1zZWxlY3QtaXRlbS1hY3RpdmUiKTt3aW5kb3cub3JpZ2luX3ZpZGVvPSQoIi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8iKS5jaGlsZHJlbigidmlkZW8iKS5hdHRyKCJzcmMiKTt2YXIgYT0kKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIilbMF0uY3VycmVudFRpbWU7dmFyIGI9JCgiLmJpbGliaWxpLXBsYXllci12aWRlbyIpLmNoaWxkcmVuKCJ2aWRlbyIpWzBdLnZvbHVtZTt2YXIgYz0kKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIilbMF0ucGxheWJhY2tSYXRlOyQoIi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8iKS5jaGlsZHJlbigidmlkZW8iKS5hdHRyKCJzcmMiLHdpbmRvdy5iZWliZWlfdXJsX3ZpZGVvKTskKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIilbMF0uY3VycmVudFRpbWU9YTskKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIilbMF0udm9sdW1lPWI7JCgiLmJpbGliaWxpLXBsYXllci12aWRlbyIpLmNoaWxkcmVuKCJ2aWRlbyIpWzBdLnBsYXliYWNrUmF0ZT1jOyQoImJvZHkiKS5hcHBlbmQoIjx2aWRlbyBpZD0nY3JhY2tfYXVkaW8nIHNyYz0nIit3aW5kb3cuYmVpYmVpX3VybF9hdWRpbysiJyBzdHlsZT0nZGlzcGxheTpub25lJz48L3ZpZGVvPiIpOyQoIi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8iKS5jaGlsZHJlbigidmlkZW8iKS5iaW5kKCJwbGF5aW5nIixmdW5jdGlvbigpeyQoIiNjcmFja19hdWRpbyIpLnRyaWdnZXIoInBsYXkiKTskKCIjY3JhY2tfYXVkaW8iKVswXS5jdXJyZW50VGltZT0kKHRoaXMpWzBdLmN1cnJlbnRUaW1lfSk7JCgiLmJpbGliaWxpLXBsYXllci12aWRlbyIpLmNoaWxkcmVuKCJ2aWRlbyIpLmJpbmQoInBhdXNlIixmdW5jdGlvbigpeyQoIiNjcmFja19hdWRpbyIpLnRyaWdnZXIoInBhdXNlIil9KTskKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIikuYmluZCgibG9hZCIsZnVuY3Rpb24oKXskKCIjY3JhY2tfYXVkaW8iKS50cmlnZ2VyKCJsb2FkIil9KTskKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIikuYmluZCgic2Vla2luZyIsZnVuY3Rpb24oKXskKCIjY3JhY2tfYXVkaW8iKVswXS5jdXJyZW50VGltZT0kKHRoaXMpWzBdLmN1cnJlbnRUaW1lfSk7JCgiLmJpbGliaWxpLXBsYXllci12aWRlbyIpLmNoaWxkcmVuKCJ2aWRlbyIpLmJpbmQoInZvbHVtZWNoYW5nZSIsZnVuY3Rpb24oKXskKCIjY3JhY2tfYXVkaW8iKVswXS52b2x1bWU9JCh0aGlzKVswXS52b2x1bWV9KTskKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIikuYmluZCgicmF0ZWNoYW5nZSIsZnVuY3Rpb24oKXskKCIjY3JhY2tfYXVkaW8iKVswXS5wbGF5YmFja1JhdGU9JCh0aGlzKVswXS5wbGF5YmFja1JhdGV9KTskKCIuYmlsaWJpbGktcGxheWVyLXZpZGVvIikuY2hpbGRyZW4oInZpZGVvIikuYmluZCgid2FpdGluZyIsZnVuY3Rpb24oKXskKCIjY3JhY2tfYXVkaW8iKS50cmlnZ2VyKCJwYXVzZSIpfSk7JCgiLmJpbGliaWxpLXBsYXllci12aWRlbyIpLmNoaWxkcmVuKCJ2aWRlbyIpLnRyaWdnZXIoInBsYXkiKX19KTskKCIuYnVpLXNlbGVjdC1saXN0IikuY2hpbGRyZW4oImxpW2NyYWNrX29wdGlvbiE9J3RydWUnXSIpLmNsaWNrKGZ1bmN0aW9uKCl7aWYod2luZG93Lm9yaWdpbl92aWRlbyE9PSJub25lIil7JCgiLmJpbGliaWxpLXBsYXllci12aWRlbyIpLmNoaWxkcmVuKCJ2aWRlbyIpLmF0dHIoInNyYyIsd2luZG93Lm9yaWdpbl92aWRlbyk7JCgiI2NyYWNrX2F1ZGlvIikucmVtb3ZlKCk7dmFyIGE9JCgiLmJ1aS1zZWxlY3QtbGlzdCIpLmNoaWxkcmVuKCkubGVuZ3RoO3ZhciBiPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoYSE9JCgiLmJ1aS1zZWxlY3QtbGlzdCIpLmNoaWxkcmVuKCkubGVuZ3RoKXskKCIuYnVpLXNlbGVjdC1saXN0IikucHJlcGVuZCgiPGxpIGNsYXNzPSdidWktc2VsZWN0LWl0ZW0nIGlkPSdjcmFja19zdGF0dWUnIG9uY2xpY2s9J2xvY2F0aW9uLnJlbG9hZCgpJz48c3BhbiBjbGFzcz0nYmlsaWJpbGktcGxheWVyLXZpZGVvLXF1YWxpdHktdGV4dCc+5aaC6ZyA6YeN5paw56C06KejPC9zcGFuPjxzcGFuPuivt+WIt+aWsDwvc3Bhbj48L2xpPiIpO2NsZWFySW50ZXJ2YWwoYil9fSwxMCl9fSk7aWYoY29uZmlnX2NyYWNrLmF1dG9faGlnaGVzdF9xdWFsaXR5PT09dHJ1ZSl7JCgibGlbY3JhY2tfb3B0aW9uPSd0cnVlJ10iKS5jbGljaygpfX19LGZhbHNlKX19O3dpbmRvdy5vbmxvYWQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBmdW5jVXJsRGVsKGEpe3ZhciBiPXdpbmRvdy5sb2NhdGlvbjt2YXIgYz1iLm9yaWdpbitiLnBhdGhuYW1lKyI/Ijt2YXIgZD1iLnNlYXJjaC5zdWJzdHIoMSk7aWYoZC5pbmRleE9mKGEpPi0xKXt2YXIgZT17fTt2YXIgZj1kLnNwbGl0KCImIik7Zm9yKHZhciBpPTA7aTxmLmxlbmd0aDtpKyspe2ZbaV09ZltpXS5zcGxpdCgiPSIpO2VbZltpXVswXV09ZltpXVsxXX07ZGVsZXRlIGVbYV07dmFyIGc9YytKU09OLnN0cmluZ2lmeShlKS5yZXBsYWNlKC9bXCJce1x9XS9nLCIiKS5yZXBsYWNlKC9cOi9nLCI9IikucmVwbGFjZSgvXCwvZywiJiIpO3JldHVybiBnfX07d2luZG93LmFweD1mdW5jVXJsRGVsKCJzcG1faWRfZnJvbSIpO3N3aXRjaCh3aW5kb3cuYXB4KXtjYXNlImh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS8iOmJyZWFrO2RlZmF1bHQ6aWYod2luZG93LmxvY2F0aW9uLmhyZWYuc2VhcmNoKCJwbGF5IikhPS0xfHx3aW5kb3cubG9jYXRpb24uaHJlZi5zZWFyY2goInZpZGVvIikhPS0xfHx3aW5kb3cubG9jYXRpb24uaHJlZi5zZWFyY2goImVwIikhPS0xKXt2YXIgaD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKCQoIi5idWktc2VsZWN0LWxpc3QiKS5maW5kKCIuYmlsaWJpbGktcGxheWVyLWJpZ3ZpcCIpLmxlbmd0aD4wKXt3aW5kb3cuZ2V0X3ZpcF9jb3Vyc2UoKTtjbGVhckludGVydmFsKGgpfTtpZigkKCIuYnVpLXNlbGVjdC1saXN0IikuZmluZCgiLmJpbGliaWxpLXBsYXllci1uZWVkbG9naW4iKS5sZW5ndGg+MCl7aWYoX19JTklUSUFMX1NUQVRFX18udXNlci5pc0xvZ2luPT09ZmFsc2Upe3dpbmRvdy5nZXRfdmlwX2NvdXJzZSgpfTtjbGVhckludGVydmFsKGgpfX0sMTApOyQoIi5saXN0LWJveCwucm91dGVyLWxpbmstYWN0aXZlLC52aWRlby1wYWdlLWNhcmQiKS5jbGljayhmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtsb2NhdGlvbi5yZWxvYWQoKX0sMTApfSk7JCgiLnJlYy1mb290ZXIiKS5jbGljayhmdW5jdGlvbigpe3ZhciBhPSQoIi52aWRlby1wYWdlLWNhcmQiKS5sZW5ndGg7dmFyIGI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZigkKCIudmlkZW8tcGFnZS1jYXJkIikubGVuZ3RoPmEpeyQoIi52aWRlby1wYWdlLWNhcmQiKS5jbGljayhmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtsb2NhdGlvbi5yZWxvYWQoKX0sMTApfSk7Y2xlYXJJbnRlcnZhbChiKX19LDEwKX0pOyQoIi5iaWxpYmlsaS1wbGF5ZXItdmlkZW8iKS5jaGlsZHJlbigidmlkZW8iKS5iaW5kKCJlbmRlZCIsZnVuY3Rpb24oKXt2YXIgYT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKCQoIi5iaWxpYmlsaS1wbGF5ZXItZW5kaW5nLXBhbmVsLWJveC1yZWNvbW1lbmQiKS5sZW5ndGg+MCl7JCgiLmJpbGliaWxpLXBsYXllci1lbmRpbmctcGFuZWwtYm94LXJlY29tbWVuZCIpLmNsaWNrKGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2xvY2F0aW9uLnJlbG9hZCgpfSwxMCl9KTtjbGVhckludGVydmFsKGEpfX0sMTApfSl9O2JyZWFrfX19Ozs=","requires":[{"meta":{"name":"jquery.min.js","url":"http://cdn.staticfile.org/jquery/2.0.0/jquery.min.js","ts":1595385278846,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2Mi4wLjAgfCAoYykgMjAwNSwgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiB8IGpxdWVyeS5vcmcvbGljZW5zZQovL0Agc291cmNlTWFwcGluZ1VSTD1qcXVlcnkubWluLm1hcAoqLwooZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scj10eXBlb2YgdW5kZWZpbmVkLGk9ZS5sb2NhdGlvbixvPWUuZG9jdW1lbnQscz1vLmRvY3VtZW50RWxlbWVudCxhPWUualF1ZXJ5LHU9ZS4kLGw9e30sYz1bXSxmPSIyLjAuMCIscD1jLmNvbmNhdCxoPWMucHVzaCxkPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PWYudHJpbSx4PWZ1bmN0aW9uKGUsbil7cmV0dXJuIG5ldyB4LmZuLmluaXQoZSxuLHQpfSxiPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHc9L1xTKy9nLFQ9L14oPzooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8saz0vXi1tcy0vLE49Ly0oW1xkYS16XSkvZ2ksRT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LFM9ZnVuY3Rpb24oKXtvLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkseC5yZWFkeSgpfTt4LmZuPXgucHJvdG90eXBlPXtqcXVlcnk6Zixjb25zdHJ1Y3Rvcjp4LGluaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoIWUpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZihyPSI8Ij09PWUuY2hhckF0KDApJiYiPiI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpULmV4ZWMoZSksIXJ8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgeD90WzBdOnQseC5tZXJnZSh0aGlzLHgucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6bywhMCkpLEMudGVzdChyWzFdKSYmeC5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpeC5pc0Z1bmN0aW9uKHRoaXNbcl0pP3RoaXNbcl0odFtyXSk6dGhpcy5hdHRyKHIsdFtyXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGk9by5nZXRFbGVtZW50QnlJZChyWzJdKSxpJiZpLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09aSksdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTp4LmlzRnVuY3Rpb24oZSk/bi5yZWFkeShlKTooZS5zZWxlY3RvciE9PXVuZGVmaW5lZCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx4Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4geC5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0seC5mbi5pbml0LnByb3RvdHlwZT14LmZuLHguZXh0ZW5kPXguZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLHM9YXJndW1lbnRzWzBdfHx7fSxhPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihsPXMscz1hcmd1bWVudHNbMV18fHt9LGE9MiksIm9iamVjdCI9PXR5cGVvZiBzfHx4LmlzRnVuY3Rpb24ocyl8fChzPXt9KSx1PT09YSYmKHM9dGhpcywtLWEpO3U+YTthKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2FdKSlmb3IodCBpbiBlKW49c1t0XSxyPWVbdF0scyE9PXImJihsJiZyJiYoeC5pc1BsYWluT2JqZWN0KHIpfHwoaT14LmlzQXJyYXkocikpKT8oaT8oaT0hMSxvPW4mJnguaXNBcnJheShuKT9uOltdKTpvPW4mJnguaXNQbGFpbk9iamVjdChuKT9uOnt9LHNbdF09eC5leHRlbmQobCxvLHIpKTpyIT09dW5kZWZpbmVkJiYoc1t0XT1yKSk7cmV0dXJuIHN9LHguZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PXgmJihlLiQ9dSksdCYmZS5qUXVlcnk9PT14JiYoZS5qUXVlcnk9YSkseH0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT94LnJlYWR5V2FpdCsrOngucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXsoZT09PSEwPy0teC5yZWFkeVdhaXQ6eC5pc1JlYWR5KXx8KHguaXNSZWFkeT0hMCxlIT09ITAmJi0teC5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbeF0pLHguZm4udHJpZ2dlciYmeChvKS50cmlnZ2VyKCJyZWFkeSIpLm9mZigicmVhZHkiKSkpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT14LnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtpZigib2JqZWN0IiE9PXgudHlwZShlKXx8ZS5ub2RlVHlwZXx8eC5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKHQpe3JldHVybiExfXJldHVybiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fG87dmFyIHI9Qy5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPXguYnVpbGRGcmFnbWVudChbZV0sdCxpKSxpJiZ4KGkpLnJlbW92ZSgpLHgubWVyZ2UoW10sci5jaGlsZE5vZGVzKSl9LHBhcnNlSlNPTjpKU09OLnBhcnNlLHBhcnNlWE1MOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7bj1uZXcgRE9NUGFyc2VyLHQ9bi5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChyKXt0PXVuZGVmaW5lZH1yZXR1cm4oIXR8fHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmeC5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihlKXt2YXIgdCxuPWV2YWw7ZT14LnRyaW0oZSksZSYmKDE9PT1lLmluZGV4T2YoInVzZSBzdHJpY3QiKT8odD1vLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHQudGV4dD1lLG8uaGVhZC5hcHBlbmRDaGlsZCh0KS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpKTpuKGUpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaywibXMtIikucmVwbGFjZShOLEUpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLHM9aihlKTtpZihuKXtpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjp2LmNhbGwoZSl9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoaihPYmplY3QoZSkpP3gubWVyZ2Uobiwic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpOmguY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTpnLmNhbGwodCxlLG4pfSxtZXJnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLHI9ZS5sZW5ndGgsaT0wO2lmKCJudW1iZXIiPT10eXBlb2Ygbilmb3IoO24+aTtpKyspZVtyKytdPXRbaV07ZWxzZSB3aGlsZSh0W2ldIT09dW5kZWZpbmVkKWVbcisrXT10W2krK107cmV0dXJuIGUubGVuZ3RoPXIsZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxvPTAscz1lLmxlbmd0aDtmb3Iobj0hIW47cz5vO28rKylyPSEhdChlW29dLG8pLG4hPT1yJiZpLnB1c2goZVtvXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgscz1qKGUpLGE9W107aWYocylmb3IoO28+aTtpKyspcj10KGVbaV0saSxuKSxudWxsIT1yJiYoYVthLmxlbmd0aF09cik7ZWxzZSBmb3IoaSBpbiBlKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKGFbYS5sZW5ndGhdPXIpO3JldHVybiBwLmFwcGx5KFtdLGEpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLHguaXNGdW5jdGlvbihlKT8ocj1kLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHx4Lmd1aWQrKyxpKTp1bmRlZmluZWR9LGFjY2VzczpmdW5jdGlvbihlLHQsbixyLGksbyxzKXt2YXIgYT0wLHU9ZS5sZW5ndGgsbD1udWxsPT1uO2lmKCJvYmplY3QiPT09eC50eXBlKG4pKXtpPSEwO2ZvcihhIGluIG4peC5hY2Nlc3MoZSx0LGEsblthXSwhMCxvLHMpfWVsc2UgaWYociE9PXVuZGVmaW5lZCYmKGk9ITAseC5pc0Z1bmN0aW9uKHIpfHwocz0hMCksbCYmKHM/KHQuY2FsbChlLHIpLHQ9bnVsbCk6KGw9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jYWxsKHgoZSksbil9KSksdCkpZm9yKDt1PmE7YSsrKXQoZVthXSxuLHM/cjpyLmNhbGwoZVthXSxhLHQoZVthXSxuKSkpO3JldHVybiBpP2U6bD90LmNhbGwoZSk6dT90KGVbMF0sbik6b30sbm93OkRhdGUubm93LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzPXt9O2ZvcihvIGluIHQpc1tvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPXNbb107cmV0dXJuIGl9fSkseC5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBufHwobj14LkRlZmVycmVkKCksImNvbXBsZXRlIj09PW8ucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHgucmVhZHkpOihvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkpKSxuLnByb21pc2UodCl9LHguZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2xbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gaihlKXt2YXIgdD1lLmxlbmd0aCxuPXgudHlwZShlKTtyZXR1cm4geC5pc1dpbmRvdyhlKT8hMToxPT09ZS5ub2RlVHlwZSYmdD8hMDoiYXJyYXkiPT09bnx8ImZ1bmN0aW9uIiE9PW4mJigwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX10PXgobyksZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scixpLG8scyxhLHUsbCxjLGYscCxoLGQsZyxtLHk9InNpenpsZSIrLW5ldyBEYXRlLHY9ZS5kb2N1bWVudCxiPXt9LHc9MCxUPTAsQz1vdCgpLGs9b3QoKSxOPW90KCksRT0hMSxTPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LGo9dHlwZW9mIHVuZGVmaW5lZCxEPTE8PDMxLEE9W10sTD1BLnBvcCxxPUEucHVzaCxIPUEucHVzaCxPPUEuc2xpY2UsRj1BLmluZGV4T2Z8fGZ1bmN0aW9uKGUpe3ZhciB0PTAsbj10aGlzLmxlbmd0aDtmb3IoO24+dDt0KyspaWYodGhpc1t0XT09PWUpcmV0dXJuIHQ7cmV0dXJuLTF9LFA9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixSPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixNPSIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsVz1NLnJlcGxhY2UoInciLCJ3IyIpLCQ9IlxcWyIrUisiKigiK00rIikiK1IrIiooPzooWypeJHwhfl0/PSkiK1IrIiooPzooWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgiK1crIil8KXwpIitSKyIqXFxdIixCPSI6KCIrTSsiKSg/OlxcKCgoWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIrJC5yZXBsYWNlKDMsOCkrIikqKXwuKilcXCl8KSIsST1SZWdFeHAoIl4iK1IrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrUisiKyQiLCJnIiksej1SZWdFeHAoIl4iK1IrIiosIitSKyIqIiksXz1SZWdFeHAoIl4iK1IrIiooWz4rfl18IitSKyIpIitSKyIqIiksWD1SZWdFeHAoUisiKlsrfl0iKSxVPVJlZ0V4cCgiPSIrUisiKihbXlxcXSdcIl0qKSIrUisiKlxcXSIsImciKSxZPVJlZ0V4cChCKSxWPVJlZ0V4cCgiXiIrVysiJCIpLEc9e0lEOlJlZ0V4cCgiXiMoIitNKyIpIiksQ0xBU1M6UmVnRXhwKCJeXFwuKCIrTSsiKSIpLFRBRzpSZWdFeHAoIl4oIitNLnJlcGxhY2UoInciLCJ3KiIpKyIpIiksQVRUUjpSZWdFeHAoIl4iKyQpLFBTRVVETzpSZWdFeHAoIl4iK0IpLENISUxEOlJlZ0V4cCgiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFwoIitSKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIitSKyIqKD86KFsrLV18KSIrUisiKihcXGQrKXwpKSIrUisiKlxcKXwpIiwiaSIpLCJib29sZWFuIjpSZWdFeHAoIl4oPzoiK1ArIikkIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK1IrIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrUisiKigoPzotXFxkKT9cXGQqKSIrUisiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sSj0vXltee10rXHtccypcW25hdGl2ZSBcdy8sUT0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLEs9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxkJC9pLGV0PS8nfFxcL2csdHQ9L1xcKFtcZGEtZkEtRl17MSw2fVtceDIwXHRcclxuXGZdP3wuKS9nLG50PWZ1bmN0aW9uKGUsdCl7dmFyIG49IjB4Iit0LTY1NTM2O3JldHVybiBuIT09bj90OjA+bj9TdHJpbmcuZnJvbUNoYXJDb2RlKG4rNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8bj4+MTAsNTYzMjB8MTAyMyZuKX07dHJ5e0guYXBwbHkoQT1PLmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLEFbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2gocnQpe0g9e2FwcGx5OkEubGVuZ3RoP2Z1bmN0aW9uKGUsdCl7cS5hcHBseShlLE8uY2FsbCh0KSl9OmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5sZW5ndGgscj0wO3doaWxlKGVbbisrXT10W3IrK10pO2UubGVuZ3RoPW4tMX19fWZ1bmN0aW9uIGl0KGUpe3JldHVybiBKLnRlc3QoZSsiIil9ZnVuY3Rpb24gb3QoKXt2YXIgZSx0PVtdO3JldHVybiBlPWZ1bmN0aW9uKG4saSl7cmV0dXJuIHQucHVzaChuKz0iICIpPnIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Quc2hpZnQoKV0sZVtuXT1pfX1mdW5jdGlvbiBzdChlKXtyZXR1cm4gZVt5XT0hMCxlfWZ1bmN0aW9uIGF0KGUpe3ZhciB0PWMuY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChuKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gdXQoZSx0LG4scil7dmFyIGksbyxzLGEsdSxmLGQsZyx4LHc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OnYpIT09YyYmbCh0KSx0PXR8fGMsbj1ufHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBuO2lmKDEhPT0oYT10Lm5vZGVUeXBlKSYmOSE9PWEpcmV0dXJuW107aWYocCYmIXIpe2lmKGk9US5leGVjKGUpKWlmKHM9aVsxXSl7aWYoOT09PWEpe2lmKG89dC5nZXRFbGVtZW50QnlJZChzKSwhb3x8IW8ucGFyZW50Tm9kZSlyZXR1cm4gbjtpZihvLmlkPT09cylyZXR1cm4gbi5wdXNoKG8pLG59ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihvPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChzKSkmJm0odCxvKSYmby5pZD09PXMpcmV0dXJuIG4ucHVzaChvKSxufWVsc2V7aWYoaVsyXSlyZXR1cm4gSC5hcHBseShuLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLG47aWYoKHM9aVszXSkmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBILmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHMpKSxufWlmKGIucXNhJiYoIWh8fCFoLnRlc3QoZSkpKXtpZihnPWQ9eSx4PXQsdz05PT09YSYmZSwxPT09YSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Y9Z3QoZSksKGQ9dC5nZXRBdHRyaWJ1dGUoImlkIikpP2c9ZC5yZXBsYWNlKGV0LCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixnKSxnPSJbaWQ9JyIrZysiJ10gIix1PWYubGVuZ3RoO3doaWxlKHUtLSlmW3VdPWcrbXQoZlt1XSk7eD1YLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx3PWYuam9pbigiLCIpfWlmKHcpdHJ5e3JldHVybiBILmFwcGx5KG4seC5xdWVyeVNlbGVjdG9yQWxsKHcpKSxufWNhdGNoKFQpe31maW5hbGx5e2R8fHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGt0KGUucmVwbGFjZShJLCIkMSIpLHQsbixyKX1vPXV0LmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJihlLm93bmVyRG9jdW1lbnR8fGUpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gdD8iSFRNTCIhPT10Lm5vZGVOYW1lOiExfSxsPXV0LnNldERvY3VtZW50PWZ1bmN0aW9uKGUpe3ZhciB0PWU/ZS5vd25lckRvY3VtZW50fHxlOnY7cmV0dXJuIHQhPT1jJiY5PT09dC5ub2RlVHlwZSYmdC5kb2N1bWVudEVsZW1lbnQ/KGM9dCxmPXQuZG9jdW1lbnRFbGVtZW50LHA9IW8odCksYi5nZXRFbGVtZW50c0J5VGFnTmFtZT1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZCh0LmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLGIuYXR0cmlidXRlcz1hdChmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxiLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PiIsZS5maXJzdENoaWxkLmNsYXNzTmFtZT0iaSIsMj09PWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiaSIpLmxlbmd0aH0pLGIuc29ydERldGFjaGVkPWF0KGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYy5jcmVhdGVFbGVtZW50KCJkaXYiKSl9KSxiLmdldEJ5SWQ9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGYuYXBwZW5kQ2hpbGQoZSkuaWQ9eSwhdC5nZXRFbGVtZW50c0J5TmFtZXx8IXQuZ2V0RWxlbWVudHNCeU5hbWUoeSkubGVuZ3RofSksYi5nZXRCeUlkPyhyLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgdC5nZXRFbGVtZW50QnlJZCE9PWomJnApe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4mJm4ucGFyZW50Tm9kZT9bbl06W119fSxyLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodHQsbnQpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoImlkIik9PT10fX0pOihyLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgdC5nZXRFbGVtZW50QnlJZCE9PWomJnApe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/bi5pZD09PWV8fHR5cGVvZiBuLmdldEF0dHJpYnV0ZU5vZGUhPT1qJiZuLmdldEF0dHJpYnV0ZU5vZGUoImlkIikudmFsdWU9PT1lP1tuXTp1bmRlZmluZWQ6W119fSxyLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodHQsbnQpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlIT09aiYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxyLmZpbmQuVEFHPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1qP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dW5kZWZpbmVkfTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT0wLG89dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZigiKiI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxyLmZpbmQuQ0xBU1M9Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLHQpe3JldHVybiB0eXBlb2YgdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09aiYmcD90LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSk6dW5kZWZpbmVkfSxkPVtdLGg9W10sKGIucXNhPWl0KHQucXVlcnlTZWxlY3RvckFsbCkpJiYoYXQoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxzZWxlY3Q+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8aC5wdXNoKCJcXFsiK1IrIiooPzp2YWx1ZXwiK1ArIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxoLnB1c2goIjpjaGVja2VkIil9KSxhdChmdW5jdGlvbihlKXt2YXIgdD1jLmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCJoaWRkZW4iKSxlLmFwcGVuZENoaWxkKHQpLnNldEF0dHJpYnV0ZSgidCIsIiIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3RePScnXSIpLmxlbmd0aCYmaC5wdXNoKCJbKl4kXT0iK1IrIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGh8fGgucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSxoLnB1c2goIiwuKjoiKX0pKSwoYi5tYXRjaGVzU2VsZWN0b3I9aXQoZz1mLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8Zi5tb3pNYXRjaGVzU2VsZWN0b3J8fGYub01hdGNoZXNTZWxlY3Rvcnx8Zi5tc01hdGNoZXNTZWxlY3RvcikpJiZhdChmdW5jdGlvbihlKXtiLmRpc2Nvbm5lY3RlZE1hdGNoPWcuY2FsbChlLCJkaXYiKSxnLmNhbGwoZSwiW3MhPScnXTp4IiksZC5wdXNoKCIhPSIsQil9KSxoPWgubGVuZ3RoJiZSZWdFeHAoaC5qb2luKCJ8IikpLGQ9ZC5sZW5ndGgmJlJlZ0V4cChkLmpvaW4oInwiKSksbT1pdChmLmNvbnRhaW5zKXx8Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LFM9Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLG4pe2lmKGU9PT1uKXJldHVybiBFPSEwLDA7dmFyIHI9bi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuKTtyZXR1cm4gcj8xJnJ8fCFiLnNvcnREZXRhY2hlZCYmbi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PXI/ZT09PXR8fG0odixlKT8tMTpuPT09dHx8bSh2LG4pPzE6dT9GLmNhbGwodSxlKS1GLmNhbGwodSxuKTowOjQmcj8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUscz1uLnBhcmVudE5vZGUsYT1bZV0sbD1bbl07aWYoZT09PW4pcmV0dXJuIEU9ITAsMDtpZighb3x8IXMpcmV0dXJuIGU9PT10Py0xOm49PT10PzE6bz8tMTpzPzE6dT9GLmNhbGwodSxlKS1GLmNhbGwodSxuKTowO2lmKG89PT1zKXJldHVybiBsdChlLG4pO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlhLnVuc2hpZnQocik7cj1uO3doaWxlKHI9ci5wYXJlbnROb2RlKWwudW5zaGlmdChyKTt3aGlsZShhW2ldPT09bFtpXSlpKys7cmV0dXJuIGk/bHQoYVtpXSxsW2ldKTphW2ldPT09dj8tMTpsW2ldPT09dj8xOjB9LGMpOmN9LHV0Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdXQoZSxudWxsLG51bGwsdCl9LHV0Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09YyYmbChlKSx0PXQucmVwbGFjZShVLCI9JyQxJ10iKSwhKCFiLm1hdGNoZXNTZWxlY3Rvcnx8IXB8fGQmJmQudGVzdCh0KXx8aCYmaC50ZXN0KHQpKSl0cnl7dmFyIG49Zy5jYWxsKGUsdCk7aWYobnx8Yi5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiBufWNhdGNoKHIpe31yZXR1cm4gdXQodCxjLG51bGwsW2VdKS5sZW5ndGg+MH0sdXQuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PWMmJmwoZSksbShlLHQpfSx1dC5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1jJiZsKGUpO3ZhciBuPXIuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLGk9biYmbihlLHQsIXApO3JldHVybiBpPT09dW5kZWZpbmVkP2IuYXR0cmlidXRlc3x8IXA/ZS5nZXRBdHRyaWJ1dGUodCk6KGk9ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSYmaS5zcGVjaWZpZWQ/aS52YWx1ZTpudWxsOml9LHV0LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2UpfSx1dC51bmlxdWVTb3J0PWZ1bmN0aW9uKGUpe3ZhciB0LG49W10scj0wLGk9MDtpZihFPSFiLmRldGVjdER1cGxpY2F0ZXMsdT0hYi5zb3J0U3RhYmxlJiZlLnNsaWNlKDApLGUuc29ydChTKSxFKXt3aGlsZSh0PWVbaSsrXSl0PT09ZVtpXSYmKHI9bi5wdXNoKGkpKTt3aGlsZShyLS0pZS5zcGxpY2UobltyXSwxKX1yZXR1cm4gZX07ZnVuY3Rpb24gbHQoZSx0KXt2YXIgbj10JiZlLHI9biYmKH50LnNvdXJjZUluZGV4fHxEKS0ofmUuc291cmNlSW5kZXh8fEQpO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBjdChlLHQsbil7dmFyIHI7cmV0dXJuIG4/dW5kZWZpbmVkOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6ZVt0XT09PSEwP3QudG9Mb3dlckNhc2UoKTpudWxsfWZ1bmN0aW9uIGZ0KGUsdCxuKXt2YXIgcjtyZXR1cm4gbj91bmRlZmluZWQ6cj1lLmdldEF0dHJpYnV0ZSh0LCJ0eXBlIj09PXQudG9Mb3dlckNhc2UoKT8xOjIpfWZ1bmN0aW9uIHB0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PW4mJnQudHlwZT09PWV9fWZ1bmN0aW9uIGh0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKCJpbnB1dCI9PT1ufHwiYnV0dG9uIj09PW4pJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBkdChlKXtyZXR1cm4gc3QoZnVuY3Rpb24odCl7cmV0dXJuIHQ9K3Qsc3QoZnVuY3Rpb24obixyKXt2YXIgaSxvPWUoW10sbi5sZW5ndGgsdCkscz1vLmxlbmd0aDt3aGlsZShzLS0pbltpPW9bc11dJiYobltpXT0hKHJbaV09bltpXSkpfSl9KX1pPXV0LmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsbz1lLm5vZGVUeXBlO2lmKG8pe2lmKDE9PT1vfHw5PT09b3x8MTE9PT1vKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPWkoZSl9ZWxzZSBpZigzPT09b3x8ND09PW8pcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPWkodCk7cmV0dXJuIG59LHI9dXQuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86c3QsbWF0Y2g6RyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKHR0LG50KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh0dCxudCksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHV0LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnV0LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVs0XT9lWzJdPWVbNF06biYmWS50ZXN0KG4pJiYodD1ndChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodHQsbnQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUNbZSsiICJdO3JldHVybiB0fHwodD1SZWdFeHAoIihefCIrUisiKSIrZSsiKCIrUisifCQpIikpJiZDKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aiYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9dXQuYXR0cihyLGUpO3JldHVybiBudWxsPT1pPyIhPSI9PT10OnQ/KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2krIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10P2k9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLHM9Imxhc3QiIT09ZS5zbGljZSgtNCksYT0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLGYscCxoLGQsZz1vIT09cz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLG09dC5wYXJlbnROb2RlLHY9YSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHg9IXUmJiFhO2lmKG0pe2lmKG8pe3doaWxlKGcpe2Y9dDt3aGlsZShmPWZbZ10paWYoYT9mLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT12OjE9PT1mLm5vZGVUeXBlKXJldHVybiExO2Q9Zz0ib25seSI9PT1lJiYhZCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihkPVtzP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0scyYmeCl7Yz1tW3ldfHwobVt5XT17fSksbD1jW2VdfHxbXSxoPWxbMF09PT13JiZsWzFdLHA9bFswXT09PXcmJmxbMl0sZj1oJiZtLmNoaWxkTm9kZXNbaF07d2hpbGUoZj0rK2gmJmYmJmZbZ118fChwPWg9MCl8fGQucG9wKCkpaWYoMT09PWYubm9kZVR5cGUmJisrcCYmZj09PXQpe2NbZV09W3csaCxwXTticmVha319ZWxzZSBpZih4JiYobD0odFt5XXx8KHRbeV09e30pKVtlXSkmJmxbMF09PT13KXA9bFsxXTtlbHNlIHdoaWxlKGY9KytoJiZmJiZmW2ddfHwocD1oPTApfHxkLnBvcCgpKWlmKChhP2Yubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXY6MT09PWYubm9kZVR5cGUpJiYrK3AmJih4JiYoKGZbeV18fChmW3ldPXt9KSlbZV09W3cscF0pLGY9PT10KSlicmVhaztyZXR1cm4gcC09aSxwPT09cnx8MD09PXAlciYmcC9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLGk9ci5wc2V1ZG9zW2VdfHxyLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8dXQuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gaVt5XT9pKHQpOmkubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxyLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9zdChmdW5jdGlvbihlLG4pe3ZhciByLG89aShlLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKXI9Ri5jYWxsKGUsb1tzXSksZVtyXT0hKG5bcl09b1tzXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gaShlLDAsbil9KTppfX0scHNldWRvczp7bm90OnN0KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1zKGUucmVwbGFjZShJLCIkMSIpKTtyZXR1cm4gclt5XT9zdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxzPXIoZSxudWxsLGksW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShvPXNbYV0pJiYoZVthXT0hKHRbYV09bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6c3QoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB1dChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOnN0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fGkodCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzpzdChmdW5jdGlvbihlKXtyZXR1cm4gVi50ZXN0KGV8fCIiKXx8dXQuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSksZT1lLnJlcGxhY2UodHQsbnQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1wP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gbj1uLnRvTG93ZXJDYXNlKCksbj09PWV8fDA9PT1uLmluZGV4T2YoZSsiLSIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Yy5hY3RpdmVFbGVtZW50JiYoIWMuaGFzRm9jdXN8fGMuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsZS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlTmFtZT4iQCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFyLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gWi50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gSy50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYiYnV0dG9uIj09PWUudHlwZXx8ImJ1dHRvbiI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiJpbnB1dCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWUudHlwZSYmKG51bGw9PSh0PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHx0LnRvTG93ZXJDYXNlKCk9PT1lLnR5cGUpfSxmaXJzdDpkdChmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6ZHQoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOmR0KGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bMD5uP24rdDpuXX0pLGV2ZW46ZHQoZnVuY3Rpb24oZSx0KXt2YXIgbj0wO2Zvcig7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOmR0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MTtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OmR0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDstLXI+PTA7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OmR0KGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wPm4/bit0Om47Zm9yKDt0PisrcjspZS5wdXNoKHIpO3JldHVybiBlfSl9fTtmb3IodCBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlyLnBzZXVkb3NbdF09cHQodCk7Zm9yKHQgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlyLnBzZXVkb3NbdF09aHQodCk7ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbixpLG8scyxhLHUsbCxjPWtbZSsiICJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO2E9ZSx1PVtdLGw9ci5wcmVGaWx0ZXI7d2hpbGUoYSl7KCFufHwoaT16LmV4ZWMoYSkpKSYmKGkmJihhPWEuc2xpY2UoaVswXS5sZW5ndGgpfHxhKSx1LnB1c2gobz1bXSkpLG49ITEsKGk9Xy5leGVjKGEpKSYmKG49aS5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOmlbMF0ucmVwbGFjZShJLCIgIil9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtmb3IocyBpbiByLmZpbHRlcikhKGk9R1tzXS5leGVjKGEpKXx8bFtzXSYmIShpPWxbc10oaSkpfHwobj1pLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6cyxtYXRjaGVzOml9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9hLmxlbmd0aDphP3V0LmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX1mdW5jdGlvbiBtdChlKXt2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiB5dChlLHQscil7dmFyIGk9dC5kaXIsbz1yJiYicGFyZW50Tm9kZSI9PT1pLHM9VCsrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LHIsYSl7dmFyIHUsbCxjLGY9dysiICIrcztpZihhKXt3aGlsZSh0PXRbaV0paWYoKDE9PT10Lm5vZGVUeXBlfHxvKSYmZSh0LHIsYSkpcmV0dXJuITB9ZWxzZSB3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8paWYoYz10W3ldfHwodFt5XT17fSksKGw9Y1tpXSkmJmxbMF09PT1mKXtpZigodT1sWzFdKT09PSEwfHx1PT09bilyZXR1cm4gdT09PSEwfWVsc2UgaWYobD1jW2ldPVtmXSxsWzFdPWUodCxyLGEpfHxuLGxbMV09PT0hMClyZXR1cm4hMH19ZnVuY3Rpb24gdnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24geHQoZSx0LG4scixpKXt2YXIgbyxzPVtdLGE9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtmb3IoO3U+YTthKyspKG89ZVthXSkmJighbnx8bihvLHIsaSkpJiYocy5wdXNoKG8pLGwmJnQucHVzaChhKSk7cmV0dXJuIHN9ZnVuY3Rpb24gYnQoZSx0LG4scixpLG8pe3JldHVybiByJiYhclt5XSYmKHI9YnQocikpLGkmJiFpW3ldJiYoaT1idChpLG8pKSxzdChmdW5jdGlvbihvLHMsYSx1KXt2YXIgbCxjLGYscD1bXSxoPVtdLGQ9cy5sZW5ndGgsZz1vfHxDdCh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSksbT0hZXx8IW8mJnQ/Zzp4dChnLHAsZSxhLHUpLHk9bj9pfHwobz9lOmR8fHIpP1tdOnM6bTtpZihuJiZuKG0seSxhLHUpLHIpe2w9eHQoeSxoKSxyKGwsW10sYSx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkoZj1sW2NdKSYmKHlbaFtjXV09IShtW2hbY11dPWYpKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShmPXlbY10pJiZsLnB1c2gobVtjXT1mKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShmPXlbY10pJiYobD1pP0YuY2FsbChvLGYpOnBbY10pPi0xJiYob1tsXT0hKHNbbF09ZikpfX1lbHNlIHk9eHQoeT09PXM/eS5zcGxpY2UoZCx5Lmxlbmd0aCk6eSksaT9pKG51bGwscyx5LHUpOkguYXBwbHkocyx5KX0pfWZ1bmN0aW9uIHd0KGUpe3ZhciB0LG4saSxvPWUubGVuZ3RoLHM9ci5yZWxhdGl2ZVtlWzBdLnR5cGVdLHU9c3x8ci5yZWxhdGl2ZVsiICJdLGw9cz8xOjAsYz15dChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LHUsITApLGY9eXQoZnVuY3Rpb24oZSl7cmV0dXJuIEYuY2FsbCh0LGUpPi0xfSx1LCEwKSxwPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIXMmJihyfHxuIT09YSl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpmKGUsbixyKSl9XTtmb3IoO28+bDtsKyspaWYobj1yLnJlbGF0aXZlW2VbbF0udHlwZV0pcD1beXQodnQocCksbildO2Vsc2V7aWYobj1yLmZpbHRlcltlW2xdLnR5cGVdLmFwcGx5KG51bGwsZVtsXS5tYXRjaGVzKSxuW3ldKXtmb3IoaT0rK2w7bz5pO2krKylpZihyLnJlbGF0aXZlW2VbaV0udHlwZV0pYnJlYWs7cmV0dXJuIGJ0KGw+MSYmdnQocCksbD4xJiZtdChlLnNsaWNlKDAsbC0xKSkucmVwbGFjZShJLCIkMSIpLG4saT5sJiZ3dChlLnNsaWNlKGwsaSkpLG8+aSYmd3QoZT1lLnNsaWNlKGkpKSxvPmkmJm10KGUpKX1wLnB1c2gobil9cmV0dXJuIHZ0KHApfWZ1bmN0aW9uIFR0KGUsdCl7dmFyIGk9MCxvPXQubGVuZ3RoPjAscz1lLmxlbmd0aD4wLHU9ZnVuY3Rpb24odSxsLGYscCxoKXt2YXIgZCxnLG0seT1bXSx2PTAseD0iMCIsYj11JiZbXSxUPW51bGwhPWgsQz1hLGs9dXx8cyYmci5maW5kLlRBRygiKiIsaCYmbC5wYXJlbnROb2RlfHxsKSxOPXcrPW51bGw9PUM/MTpNYXRoLnJhbmRvbSgpfHwuMTtmb3IoVCYmKGE9bCE9PWMmJmwsbj1pKTtudWxsIT0oZD1rW3hdKTt4Kyspe2lmKHMmJmQpe2c9MDt3aGlsZShtPWVbZysrXSlpZihtKGQsbCxmKSl7cC5wdXNoKGQpO2JyZWFrfVQmJih3PU4sbj0rK2kpfW8mJigoZD0hbSYmZCkmJnYtLSx1JiZiLnB1c2goZCkpfWlmKHYrPXgsbyYmeCE9PXYpe2c9MDt3aGlsZShtPXRbZysrXSltKGIseSxsLGYpO2lmKHUpe2lmKHY+MCl3aGlsZSh4LS0pYlt4XXx8eVt4XXx8KHlbeF09TC5jYWxsKHApKTt5PXh0KHkpfUguYXBwbHkocCx5KSxUJiYhdSYmeS5sZW5ndGg+MCYmdit0Lmxlbmd0aD4xJiZ1dC51bmlxdWVTb3J0KHApfXJldHVybiBUJiYodz1OLGE9QyksYn07cmV0dXJuIG8/c3QodSk6dX1zPXV0LmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9W10sbz1OW2UrIiAiXTtpZighbyl7dHx8KHQ9Z3QoZSkpLG49dC5sZW5ndGg7d2hpbGUobi0tKW89d3QodFtuXSksb1t5XT9yLnB1c2gobyk6aS5wdXNoKG8pO289TihlLFR0KGkscikpfXJldHVybiBvfTtmdW5jdGlvbiBDdChlLHQsbil7dmFyIHI9MCxpPXQubGVuZ3RoO2Zvcig7aT5yO3IrKyl1dChlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24ga3QoZSx0LG4saSl7dmFyIG8sYSx1LGwsYyxmPWd0KGUpO2lmKCFpJiYxPT09Zi5sZW5ndGgpe2lmKGE9ZlswXT1mWzBdLnNsaWNlKDApLGEubGVuZ3RoPjImJiJJRCI9PT0odT1hWzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmcCYmci5yZWxhdGl2ZVthWzFdLnR5cGVdKXtpZih0PShyLmZpbmQuSUQodS5tYXRjaGVzWzBdLnJlcGxhY2UodHQsbnQpLHQpfHxbXSlbMF0sIXQpcmV0dXJuIG47ZT1lLnNsaWNlKGEuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfW89Ry5uZWVkc0NvbnRleHQudGVzdChlKT8wOmEubGVuZ3RoO3doaWxlKG8tLSl7aWYodT1hW29dLHIucmVsYXRpdmVbbD11LnR5cGVdKWJyZWFrO2lmKChjPXIuZmluZFtsXSkmJihpPWModS5tYXRjaGVzWzBdLnJlcGxhY2UodHQsbnQpLFgudGVzdChhWzBdLnR5cGUpJiZ0LnBhcmVudE5vZGV8fHQpKSl7aWYoYS5zcGxpY2UobywxKSxlPWkubGVuZ3RoJiZtdChhKSwhZSlyZXR1cm4gSC5hcHBseShuLGkpLG47YnJlYWt9fX1yZXR1cm4gcyhlLGYpKGksdCwhcCxuLFgudGVzdChlKSksbn1yLnBzZXVkb3MubnRoPXIucHNldWRvcy5lcTtmdW5jdGlvbiBOdCgpe31OdC5wcm90b3R5cGU9ci5maWx0ZXJzPXIucHNldWRvcyxyLnNldEZpbHRlcnM9bmV3IE50LGIuc29ydFN0YWJsZT15LnNwbGl0KCIiKS5zb3J0KFMpLmpvaW4oIiIpPT09eSxsKCksWzAsMF0uc29ydChTKSxiLmRldGVjdER1cGxpY2F0ZXM9RSxhdChmdW5jdGlvbihlKXtpZihlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiIT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpKXt2YXIgdD0idHlwZXxocmVmfGhlaWdodHx3aWR0aCIuc3BsaXQoInwiKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlyLmF0dHJIYW5kbGVbdFtuXV09ZnR9fSksYXQoZnVuY3Rpb24oZSl7aWYobnVsbCE9ZS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpe3ZhciB0PVAuc3BsaXQoInwiKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlyLmF0dHJIYW5kbGVbdFtuXV09Y3R9fSkseC5maW5kPXV0LHguZXhwcj11dC5zZWxlY3RvcnMseC5leHByWyI6Il09eC5leHByLnBzZXVkb3MseC51bmlxdWU9dXQudW5pcXVlU29ydCx4LnRleHQ9dXQuZ2V0VGV4dCx4LmlzWE1MRG9jPXV0LmlzWE1MLHguY29udGFpbnM9dXQuY29udGFpbnN9KGUpO3ZhciBEPXt9O2Z1bmN0aW9uIEEoZSl7dmFyIHQ9RFtlXT17fTtyZXR1cm4geC5lYWNoKGUubWF0Y2godyl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9eC5DYWxsYmFja3M9ZnVuY3Rpb24oZSl7ZT0ic3RyaW5nIj09dHlwZW9mIGU/RFtlXXx8QShlKTp4LmV4dGVuZCh7fSxlKTt2YXIgdCxuLHIsaSxvLHMsYT1bXSx1PSFlLm9uY2UmJltdLGw9ZnVuY3Rpb24oZil7Zm9yKHQ9ZS5tZW1vcnkmJmYsbj0hMCxzPWl8fDAsaT0wLG89YS5sZW5ndGgscj0hMDthJiZvPnM7cysrKWlmKGFbc10uYXBwbHkoZlswXSxmWzFdKT09PSExJiZlLnN0b3BPbkZhbHNlKXt0PSExO2JyZWFrfXI9ITEsYSYmKHU/dS5sZW5ndGgmJmwodS5zaGlmdCgpKTp0P2E9W106Yy5kaXNhYmxlKCkpfSxjPXthZGQ6ZnVuY3Rpb24oKXtpZihhKXt2YXIgbj1hLmxlbmd0aDsoZnVuY3Rpb24gcyh0KXt4LmVhY2godCxmdW5jdGlvbih0LG4pe3ZhciByPXgudHlwZShuKTsiZnVuY3Rpb24iPT09cj9lLnVuaXF1ZSYmYy5oYXMobil8fGEucHVzaChuKTpuJiZuLmxlbmd0aCYmInN0cmluZyIhPT1yJiZzKG4pfSl9KShhcmd1bWVudHMpLHI/bz1hLmxlbmd0aDp0JiYoaT1uLGwodCkpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gYSYmeC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXguaW5BcnJheSh0LGEsbikpPi0xKWEuc3BsaWNlKG4sMSksciYmKG8+PW4mJm8tLSxzPj1uJiZzLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP3guaW5BcnJheShlLGEpPi0xOiEoIWF8fCFhLmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGE9W10sbz0wLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gYT11PXQ9dW5kZWZpbmVkLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWF9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdT11bmRlZmluZWQsdHx8Yy5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIXV9LGZpcmVXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSwhYXx8biYmIXV8fChyP3UucHVzaCh0KTpsKHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGMuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGN9LHguZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIseC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIix4LkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHguRGVmZXJyZWQoZnVuY3Rpb24obil7eC5lYWNoKHQsZnVuY3Rpb24odCxvKXt2YXIgcz1vWzBdLGE9eC5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbb1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1hJiZhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ4LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMsYT9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3guZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4seC5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgcz1vWzJdLGE9b1szXTtyW29bMV1dPXMuYWRkLGEmJnMuYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdKyJXaXRoIl09cy5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1kLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9MSE9PXJ8fGUmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxvPTE9PT1pP2U6eC5EZWZlcnJlZCgpLHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6cixuPT09YT9vLm5vdGlmeVdpdGgodCxuKTotLWl8fG8ucmVzb2x2ZVdpdGgodCxuKX19LGEsdSxsO2lmKHI+MSlmb3IoYT1BcnJheShyKSx1PUFycmF5KHIpLGw9QXJyYXkocik7cj50O3QrKyluW3RdJiZ4LmlzRnVuY3Rpb24oblt0XS5wcm9taXNlKT9uW3RdLnByb21pc2UoKS5kb25lKHModCxsLG4pKS5mYWlsKG8ucmVqZWN0KS5wcm9ncmVzcyhzKHQsdSxhKSk6LS1pO3JldHVybiBpfHxvLnJlc29sdmVXaXRoKGwsbiksby5wcm9taXNlKCl9fSkseC5zdXBwb3J0PWZ1bmN0aW9uKHQpe3ZhciBuPW8uY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxyPW8uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGk9by5jcmVhdGVFbGVtZW50KCJkaXYiKSxzPW8uY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYT1zLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO3JldHVybiBuLnR5cGU/KG4udHlwZT0iY2hlY2tib3giLHQuY2hlY2tPbj0iIiE9PW4udmFsdWUsdC5vcHRTZWxlY3RlZD1hLnNlbGVjdGVkLHQucmVsaWFibGVNYXJnaW5SaWdodD0hMCx0LmJveFNpemluZ1JlbGlhYmxlPSEwLHQucGl4ZWxQb3NpdGlvbj0hMSxuLmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD1uLmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IWEuZGlzYWJsZWQsbj1vLmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksbi52YWx1ZT0idCIsbi50eXBlPSJyYWRpbyIsdC5yYWRpb1ZhbHVlPSJ0Ij09PW4udmFsdWUsbi5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJ0Iiksbi5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0Iiksci5hcHBlbmRDaGlsZChuKSx0LmNoZWNrQ2xvbmU9ci5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsdC5mb2N1c2luQnViYmxlcz0ib25mb2N1c2luImluIGUsaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix0LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCx4KGZ1bmN0aW9uKCl7dmFyIG4scixzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jazstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3giLGE9by5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2EmJihuPW8uY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweCIsYS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChpKSxpLmlubmVySFRNTD0iIixpLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElIix4LnN3YXAoYSxudWxsIT1hLnN0eWxlLnpvb20/e3pvb206MX06e30sZnVuY3Rpb24oKXt0LmJveFNpemluZz00PT09aS5vZmZzZXRXaWR0aH0pLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj0iMSUiIT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkudG9wLHQuYm94U2l6aW5nUmVsaWFibGU9IjRweCI9PT0oZS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoLHI9aS5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxyLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0PXMsci5zdHlsZS5tYXJnaW5SaWdodD1yLnN0eWxlLndpZHRoPSIwIixpLnN0eWxlLndpZHRoPSIxcHgiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLGEucmVtb3ZlQ2hpbGQobikpfSksdCk6dH0oe30pO3ZhciBMLHEsSD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIEYoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89eC5leHBhbmRvK01hdGgucmFuZG9tKCl9Ri51aWQ9MSxGLmFjY2VwdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZVR5cGU/MT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlOiEwfSxGLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGUpe2lmKCFGLmFjY2VwdHMoZSkpcmV0dXJuIDA7dmFyIHQ9e30sbj1lW3RoaXMuZXhwYW5kb107aWYoIW4pe249Ri51aWQrKzt0cnl7dFt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpfWNhdGNoKHIpe3RbdGhpcy5leHBhbmRvXT1uLHguZXh0ZW5kKGUsdCl9fXJldHVybiB0aGlzLmNhY2hlW25dfHwodGhpcy5jYWNoZVtuXT17fSksbn0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMua2V5KGUpLG89dGhpcy5jYWNoZVtpXTtpZigic3RyaW5nIj09dHlwZW9mIHQpb1t0XT1uO2Vsc2UgaWYoeC5pc0VtcHR5T2JqZWN0KG8pKXRoaXMuY2FjaGVbaV09dDtlbHNlIGZvcihyIGluIHQpb1tyXT10W3JdfSxnZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNhY2hlW3RoaXMua2V5KGUpXTtyZXR1cm4gdD09PXVuZGVmaW5lZD9uOm5bdF19LGFjY2VzczpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQ9PT11bmRlZmluZWR8fHQmJiJzdHJpbmciPT10eXBlb2YgdCYmbj09PXVuZGVmaW5lZD90aGlzLmdldChlLHQpOih0aGlzLnNldChlLHQsbiksbiE9PXVuZGVmaW5lZD9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dGhpcy5rZXkoZSksbz10aGlzLmNhY2hlW2ldO2lmKHQ9PT11bmRlZmluZWQpdGhpcy5jYWNoZVtpXT17fTtlbHNle3guaXNBcnJheSh0KT9yPXQuY29uY2F0KHQubWFwKHguY2FtZWxDYXNlKSk6dCBpbiBvP3I9W3RdOihyPXguY2FtZWxDYXNlKHQpLHI9ciBpbiBvP1tyXTpyLm1hdGNoKHcpfHxbXSksbj1yLmxlbmd0aDt3aGlsZShuLS0pZGVsZXRlIG9bcltuXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiF4LmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVtlW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuY2FjaGVbdGhpcy5rZXkoZSldfX0sTD1uZXcgRixxPW5ldyBGLHguZXh0ZW5kKHthY2NlcHREYXRhOkYuYWNjZXB0cyxoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBMLmhhc0RhdGEoZSl8fHEuaGFzRGF0YShlKX0sZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEwuYWNjZXNzKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe0wucmVtb3ZlKGUsdCl9LF9kYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcS5hY2Nlc3MoZSx0LG4pfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe3EucmVtb3ZlKGUsdCl9fSkseC5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dGhpc1swXSxvPTAscz1udWxsO2lmKGU9PT11bmRlZmluZWQpe2lmKHRoaXMubGVuZ3RoJiYocz1MLmdldChpKSwxPT09aS5ub2RlVHlwZSYmIXEuZ2V0KGksImhhc0RhdGFBdHRycyIpKSl7Zm9yKG49aS5hdHRyaWJ1dGVzO24ubGVuZ3RoPm87bysrKXI9bltvXS5uYW1lLDA9PT1yLmluZGV4T2YoImRhdGEtIikmJihyPXguY2FtZWxDYXNlKHIuc3Vic3RyaW5nKDUpKSxQKGkscixzW3JdKSk7cS5zZXQoaSwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIHN9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe0wuc2V0KHRoaXMsZSl9KTp4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuLHI9eC5jYW1lbENhc2UoZSk7aWYoaSYmdD09PXVuZGVmaW5lZCl7aWYobj1MLmdldChpLGUpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1MLmdldChpLHIpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1QKGkscix1bmRlZmluZWQpLG4hPT11bmRlZmluZWQpcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1MLmdldCh0aGlzLHIpO0wuc2V0KHRoaXMscix0KSwtMSE9PWUuaW5kZXhPZigiLSIpJiZuIT09dW5kZWZpbmVkJiZMLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TC5yZW1vdmUodGhpcyxlKX0pfX0pO2Z1bmN0aW9uIFAoZSx0LG4pe3ZhciByO2lmKG49PT11bmRlZmluZWQmJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoTywiLSQxIikudG9Mb3dlckNhc2UoKSxuPWUuZ2V0QXR0cmlidXRlKHIpLCJzdHJpbmciPT10eXBlb2Ygbil7dHJ5e249InRydWUiPT09bj8hMDoiZmFsc2UiPT09bj8hMToibnVsbCI9PT1uP251bGw6K24rIiI9PT1uPytuOkgudGVzdChuKT9KU09OLnBhcnNlKG4pOm59Y2F0Y2goaSl7fUwuc2V0KGUsdCxuKX1lbHNlIG49dW5kZWZpbmVkO3JldHVybiBufXguZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGU/KHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1xLmdldChlLHQpLG4mJighcnx8eC5pc0FycmF5KG4pP3I9cS5hY2Nlc3MoZSx0LHgubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdKTp1bmRlZmluZWR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49eC5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz14Ll9xdWV1ZUhvb2tzKGUsdCkscz1mdW5jdGlvbigpe3guZGVxdWV1ZShlLHQpfTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxvLmN1cj1pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIG8uc3RvcCxpLmNhbGwoZSxzLG8pKSwhciYmbyYmby5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIHEuZ2V0KGUsbil8fHEuYWNjZXNzKGUsbix7ZW1wdHk6eC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7cS5yZW1vdmUoZSxbdCsicXVldWUiLG5dKX0pfSl9fSkseC5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT0iZngiLG4tLSksbj5hcmd1bWVudHMubGVuZ3RoP3gucXVldWUodGhpc1swXSxlKTp0PT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49eC5xdWV1ZSh0aGlzLGUsdCk7CnguX3F1ZXVlSG9va3ModGhpcyxlKSwiZngiPT09ZSYmImlucHJvZ3Jlc3MiIT09blswXSYmeC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVsYXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT14LmZ4P3guZnguc3BlZWRzW2VdfHxlOmUsdD10fHwiZngiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTEsaT14LkRlZmVycmVkKCksbz10aGlzLHM9dGhpcy5sZW5ndGgsYT1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChvLFtvXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXVuZGVmaW5lZCksZT1lfHwiZngiO3doaWxlKHMtLSluPXEuZ2V0KG9bc10sZSsicXVldWVIb29rcyIpLG4mJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQoYSkpO3JldHVybiBhKCksaS5wcm9taXNlKHQpfX0pO3ZhciBSLE0sVz0vW1x0XHJcbl0vZywkPS9cci9nLEI9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTt4LmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQpe3JldHVybiB4LmFjY2Vzcyh0aGlzLHguYXR0cixlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5yZW1vdmVBdHRyKHRoaXMsZSl9KX0scHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmFjY2Vzcyh0aGlzLHgucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbeC5wcm9wRml4W2VdfHxlXX0pfSxhZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHM9MCxhPXRoaXMubGVuZ3RoLHU9InN0cmluZyI9PXR5cGVvZiBlJiZlO2lmKHguaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykuYWRkQ2xhc3MoZS5jYWxsKHRoaXMsdCx0aGlzLmNsYXNzTmFtZSkpfSk7aWYodSlmb3IodD0oZXx8IiIpLm1hdGNoKHcpfHxbXTthPnM7cysrKWlmKG49dGhpc1tzXSxyPTE9PT1uLm5vZGVUeXBlJiYobi5jbGFzc05hbWU/KCIgIituLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UoVywiICIpOiIgIikpe289MDt3aGlsZShpPXRbbysrXSkwPnIuaW5kZXhPZigiICIraSsiICIpJiYocis9aSsiICIpO24uY2xhc3NOYW1lPXgudHJpbShyKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxzPTAsYT10aGlzLmxlbmd0aCx1PTA9PT1hcmd1bWVudHMubGVuZ3RofHwic3RyaW5nIj09dHlwZW9mIGUmJmU7aWYoeC5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS5yZW1vdmVDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHwiIikubWF0Y2godyl8fFtdO2E+cztzKyspaWYobj10aGlzW3NdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIik6IiIpKXtvPTA7d2hpbGUoaT10W28rK10pd2hpbGUoci5pbmRleE9mKCIgIitpKyIgIik+PTApcj1yLnJlcGxhY2UoIiAiK2krIiAiLCIgIik7bi5jbGFzc05hbWU9ZT94LnRyaW0ocik6IiJ9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGUsaT0iYm9vbGVhbiI9PXR5cGVvZiB0O3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3godGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsbix0aGlzLmNsYXNzTmFtZSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCJzdHJpbmciPT09bil7dmFyIG8scz0wLGE9eCh0aGlzKSx1PXQsbD1lLm1hdGNoKHcpfHxbXTt3aGlsZShvPWxbcysrXSl1PWk/dTohYS5oYXNDbGFzcyhvKSxhW3U/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXShvKX1lbHNlKG49PT1yfHwiYm9vbGVhbiI9PT1uKSYmKHRoaXMuY2xhc3NOYW1lJiZxLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT8iIjpxLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihlKXt2YXIgdD0iICIrZSsiICIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoIiAiK3RoaXNbbl0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHI9eC5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaSxvPXgodGhpcyk7MT09PXRoaXMubm9kZVR5cGUmJihpPXI/ZS5jYWxsKHRoaXMsbixvLnZhbCgpKTplLG51bGw9PWk/aT0iIjoibnVtYmVyIj09dHlwZW9mIGk/aSs9IiI6eC5pc0FycmF5KGkpJiYoaT14Lm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSksdD14LnZhbEhvb2tzW3RoaXMudHlwZV18fHgudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSx0JiYic2V0ImluIHQmJnQuc2V0KHRoaXMsaSwidmFsdWUiKSE9PXVuZGVmaW5lZHx8KHRoaXMudmFsdWU9aSkpfSk7aWYoaSlyZXR1cm4gdD14LnZhbEhvb2tzW2kudHlwZV18fHgudmFsSG9va3NbaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSx0JiYiZ2V0ImluIHQmJihuPXQuZ2V0KGksInZhbHVlIikpIT09dW5kZWZpbmVkP246KG49aS52YWx1ZSwic3RyaW5nIj09dHlwZW9mIG4/bi5yZXBsYWNlKCQsIiIpOm51bGw9PW4/IiI6bil9fX0pLHguZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyaWJ1dGVzLnZhbHVlO3JldHVybiF0fHx0LnNwZWNpZmllZD9lLnZhbHVlOmUudGV4dH19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lLm9wdGlvbnMsaT1lLnNlbGVjdGVkSW5kZXgsbz0ic2VsZWN0LW9uZSI9PT1lLnR5cGV8fDA+aSxzPW8/bnVsbDpbXSxhPW8/aSsxOnIubGVuZ3RoLHU9MD5pP2E6bz9pOjA7Zm9yKDthPnU7dSsrKWlmKG49clt1XSwhKCFuLnNlbGVjdGVkJiZ1IT09aXx8KHguc3VwcG9ydC5vcHREaXNhYmxlZD9uLmRpc2FibGVkOm51bGwhPT1uLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSl8fG4ucGFyZW50Tm9kZS5kaXNhYmxlZCYmeC5ub2RlTmFtZShuLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZih0PXgobikudmFsKCksbylyZXR1cm4gdDtzLnB1c2godCl9cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLm9wdGlvbnMsbz14Lm1ha2VBcnJheSh0KSxzPWkubGVuZ3RoO3doaWxlKHMtLSlyPWlbc10sKHIuc2VsZWN0ZWQ9eC5pbkFycmF5KHgocikudmFsKCksbyk+PTApJiYobj0hMCk7cmV0dXJuIG58fChlLnNlbGVjdGVkSW5kZXg9LTEpLG99fX0sYXR0cjpmdW5jdGlvbihlLHQsbil7dmFyIGksbyxzPWUubm9kZVR5cGU7aWYoZSYmMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4gdHlwZW9mIGUuZ2V0QXR0cmlidXRlPT09cj94LnByb3AoZSx0LG4pOigxPT09cyYmeC5pc1hNTERvYyhlKXx8KHQ9dC50b0xvd2VyQ2FzZSgpLGk9eC5hdHRySG9va3NbdF18fCh4LmV4cHIubWF0Y2guYm9vbGVhbi50ZXN0KHQpP006UikpLG49PT11bmRlZmluZWQ/aSYmImdldCJpbiBpJiZudWxsIT09KG89aS5nZXQoZSx0KSk/bzoobz14LmZpbmQuYXR0cihlLHQpLG51bGw9PW8/dW5kZWZpbmVkOm8pOm51bGwhPT1uP2kmJiJzZXQiaW4gaSYmKG89aS5zZXQoZSxuLHQpKSE9PXVuZGVmaW5lZD9vOihlLnNldEF0dHJpYnV0ZSh0LG4rIiIpLG4pOih4LnJlbW92ZUF0dHIoZSx0KSx1bmRlZmluZWQpKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT0wLG89dCYmdC5tYXRjaCh3KTtpZihvJiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPW9baSsrXSlyPXgucHJvcEZpeFtuXXx8bix4LmV4cHIubWF0Y2guYm9vbGVhbi50ZXN0KG4pJiYoZVtyXT0hMSksZS5yZW1vdmVBdHRyaWJ1dGUobil9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIXguc3VwcG9ydC5yYWRpb1ZhbHVlJiYicmFkaW8iPT09dCYmeC5ub2RlTmFtZShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9LHByb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxzPWUubm9kZVR5cGU7aWYoZSYmMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4gbz0xIT09c3x8IXguaXNYTUxEb2MoZSksbyYmKHQ9eC5wcm9wRml4W3RdfHx0LGk9eC5wcm9wSG9va3NbdF0pLG4hPT11bmRlZmluZWQ/aSYmInNldCJpbiBpJiYocj1pLnNldChlLG4sdCkpIT09dW5kZWZpbmVkP3I6ZVt0XT1uOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmhhc0F0dHJpYnV0ZSgidGFiaW5kZXgiKXx8Qi50ZXN0KGUubm9kZU5hbWUpfHxlLmhyZWY/ZS50YWJJbmRleDotMX19fX0pLE09e3NldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQ9PT0hMT94LnJlbW92ZUF0dHIoZSxuKTplLnNldEF0dHJpYnV0ZShuLG4pLG59fSx4LmVhY2goeC5leHByLm1hdGNoLmJvb2xlYW4uc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oZSx0KXt2YXIgbj14LmV4cHIuYXR0ckhhbmRsZVt0XXx8eC5maW5kLmF0dHI7eC5leHByLmF0dHJIYW5kbGVbdF09ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXguZXhwci5hdHRySGFuZGxlW3RdLG89cj91bmRlZmluZWQ6KHguZXhwci5hdHRySGFuZGxlW3RdPXVuZGVmaW5lZCkhPW4oZSx0LHIpP3QudG9Mb3dlckNhc2UoKTpudWxsO3JldHVybiB4LmV4cHIuYXR0ckhhbmRsZVt0XT1pLG99fSkseC5zdXBwb3J0Lm9wdFNlbGVjdGVkfHwoeC5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSx4LmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe3gucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KSx4LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXt4LnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4geC5pc0FycmF5KHQpP2UuY2hlY2tlZD14LmluQXJyYXkoeChlKS52YWwoKSx0KT49MDp1bmRlZmluZWR9fSx4LnN1cHBvcnQuY2hlY2tPbnx8KHgudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoInZhbHVlIik/Im9uIjplLnZhbHVlfSl9KTt2YXIgST0vXmtleS8sej0vXig/Om1vdXNlfGNvbnRleHRtZW51KXxjbGljay8sXz0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWD0vXihbXi5dKikoPzpcLiguKyl8KSQvO2Z1bmN0aW9uIFUoKXtyZXR1cm4hMH1mdW5jdGlvbiBZKCl7cmV0dXJuITF9ZnVuY3Rpb24gVigpe3RyeXtyZXR1cm4gby5hY3RpdmVFbGVtZW50fWNhdGNoKGUpe319eC5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihlLHQsbixpLG8pe3ZhciBzLGEsdSxsLGMsZixwLGgsZCxnLG0seT1xLmdldChlKTtpZih5KXtuLmhhbmRsZXImJihzPW4sbj1zLmhhbmRsZXIsbz1zLnNlbGVjdG9yKSxuLmd1aWR8fChuLmd1aWQ9eC5ndWlkKyspLChsPXkuZXZlbnRzKXx8KGw9eS5ldmVudHM9e30pLChhPXkuaGFuZGxlKXx8KGE9eS5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiB4PT09cnx8ZSYmeC5ldmVudC50cmlnZ2VyZWQ9PT1lLnR5cGU/dW5kZWZpbmVkOnguZXZlbnQuZGlzcGF0Y2guYXBwbHkoYS5lbGVtLGFyZ3VtZW50cyl9LGEuZWxlbT1lKSx0PSh0fHwiIikubWF0Y2godyl8fFsiIl0sYz10Lmxlbmd0aDt3aGlsZShjLS0pdT1YLmV4ZWModFtjXSl8fFtdLGQ9bT11WzFdLGc9KHVbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxkJiYocD14LmV2ZW50LnNwZWNpYWxbZF18fHt9LGQ9KG8/cC5kZWxlZ2F0ZVR5cGU6cC5iaW5kVHlwZSl8fGQscD14LmV2ZW50LnNwZWNpYWxbZF18fHt9LGY9eC5leHRlbmQoe3R5cGU6ZCxvcmlnVHlwZTptLGRhdGE6aSxoYW5kbGVyOm4sZ3VpZDpuLmd1aWQsc2VsZWN0b3I6byxuZWVkc0NvbnRleHQ6byYmeC5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KG8pLG5hbWVzcGFjZTpnLmpvaW4oIi4iKX0scyksKGg9bFtkXSl8fChoPWxbZF09W10saC5kZWxlZ2F0ZUNvdW50PTAscC5zZXR1cCYmcC5zZXR1cC5jYWxsKGUsaSxnLGEpIT09ITF8fGUuYWRkRXZlbnRMaXN0ZW5lciYmZS5hZGRFdmVudExpc3RlbmVyKGQsYSwhMSkpLHAuYWRkJiYocC5hZGQuY2FsbChlLGYpLGYuaGFuZGxlci5ndWlkfHwoZi5oYW5kbGVyLmd1aWQ9bi5ndWlkKSksbz9oLnNwbGljZShoLmRlbGVnYXRlQ291bnQrKywwLGYpOmgucHVzaChmKSx4LmV2ZW50Lmdsb2JhbFtkXT0hMCk7ZT1udWxsfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8scyxhLHUsbCxjLGYscCxoLGQsZyxtPXEuaGFzRGF0YShlKSYmcS5nZXQoZSk7aWYobSYmKHU9bS5ldmVudHMpKXt0PSh0fHwiIikubWF0Y2godyl8fFsiIl0sbD10Lmxlbmd0aDt3aGlsZShsLS0paWYoYT1YLmV4ZWModFtsXSl8fFtdLGg9Zz1hWzFdLGQ9KGFbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKSxoKXtmPXguZXZlbnQuc3BlY2lhbFtoXXx8e30saD0ocj9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8aCxwPXVbaF18fFtdLGE9YVsyXSYmUmVnRXhwKCIoXnxcXC4pIitkLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLHM9bz1wLmxlbmd0aDt3aGlsZShvLS0pYz1wW29dLCFpJiZnIT09Yy5vcmlnVHlwZXx8biYmbi5ndWlkIT09Yy5ndWlkfHxhJiYhYS50ZXN0KGMubmFtZXNwYWNlKXx8ciYmciE9PWMuc2VsZWN0b3ImJigiKioiIT09cnx8IWMuc2VsZWN0b3IpfHwocC5zcGxpY2UobywxKSxjLnNlbGVjdG9yJiZwLmRlbGVnYXRlQ291bnQtLSxmLnJlbW92ZSYmZi5yZW1vdmUuY2FsbChlLGMpKTtzJiYhcC5sZW5ndGgmJihmLnRlYXJkb3duJiZmLnRlYXJkb3duLmNhbGwoZSxkLG0uaGFuZGxlKSE9PSExfHx4LnJlbW92ZUV2ZW50KGUsaCxtLmhhbmRsZSksZGVsZXRlIHVbaF0pfWVsc2UgZm9yKGggaW4gdSl4LmV2ZW50LnJlbW92ZShlLGgrdFtsXSxuLHIsITApO3guaXNFbXB0eU9iamVjdCh1KSYmKGRlbGV0ZSBtLmhhbmRsZSxxLnJlbW92ZShlLCJldmVudHMiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKHQsbixyLGkpe3ZhciBzLGEsdSxsLGMsZixwLGg9W3J8fG9dLGQ9eS5jYWxsKHQsInR5cGUiKT90LnR5cGU6dCxnPXkuY2FsbCh0LCJuYW1lc3BhY2UiKT90Lm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKGE9dT1yPXJ8fG8sMyE9PXIubm9kZVR5cGUmJjghPT1yLm5vZGVUeXBlJiYhXy50ZXN0KGQreC5ldmVudC50cmlnZ2VyZWQpJiYoZC5pbmRleE9mKCIuIik+PTAmJihnPWQuc3BsaXQoIi4iKSxkPWcuc2hpZnQoKSxnLnNvcnQoKSksYz0wPmQuaW5kZXhPZigiOiIpJiYib24iK2QsdD10W3guZXhwYW5kb10/dDpuZXcgeC5FdmVudChkLCJvYmplY3QiPT10eXBlb2YgdCYmdCksdC5pc1RyaWdnZXI9aT8yOjMsdC5uYW1lc3BhY2U9Zy5qb2luKCIuIiksdC5uYW1lc3BhY2VfcmU9dC5uYW1lc3BhY2U/UmVnRXhwKCIoXnxcXC4pIitnLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsdC5yZXN1bHQ9dW5kZWZpbmVkLHQudGFyZ2V0fHwodC50YXJnZXQ9ciksbj1udWxsPT1uP1t0XTp4Lm1ha2VBcnJheShuLFt0XSkscD14LmV2ZW50LnNwZWNpYWxbZF18fHt9LGl8fCFwLnRyaWdnZXJ8fHAudHJpZ2dlci5hcHBseShyLG4pIT09ITEpKXtpZighaSYmIXAubm9CdWJibGUmJiF4LmlzV2luZG93KHIpKXtmb3IobD1wLmRlbGVnYXRlVHlwZXx8ZCxfLnRlc3QobCtkKXx8KGE9YS5wYXJlbnROb2RlKTthO2E9YS5wYXJlbnROb2RlKWgucHVzaChhKSx1PWE7dT09PShyLm93bmVyRG9jdW1lbnR8fG8pJiZoLnB1c2godS5kZWZhdWx0Vmlld3x8dS5wYXJlbnRXaW5kb3d8fGUpfXM9MDt3aGlsZSgoYT1oW3MrK10pJiYhdC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXQudHlwZT1zPjE/bDpwLmJpbmRUeXBlfHxkLGY9KHEuZ2V0KGEsImV2ZW50cyIpfHx7fSlbdC50eXBlXSYmcS5nZXQoYSwiaGFuZGxlIiksZiYmZi5hcHBseShhLG4pLGY9YyYmYVtjXSxmJiZ4LmFjY2VwdERhdGEoYSkmJmYuYXBwbHkmJmYuYXBwbHkoYSxuKT09PSExJiZ0LnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIHQudHlwZT1kLGl8fHQuaXNEZWZhdWx0UHJldmVudGVkKCl8fHAuX2RlZmF1bHQmJnAuX2RlZmF1bHQuYXBwbHkoaC5wb3AoKSxuKSE9PSExfHwheC5hY2NlcHREYXRhKHIpfHxjJiZ4LmlzRnVuY3Rpb24ocltkXSkmJiF4LmlzV2luZG93KHIpJiYodT1yW2NdLHUmJihyW2NdPW51bGwpLHguZXZlbnQudHJpZ2dlcmVkPWQscltkXSgpLHguZXZlbnQudHJpZ2dlcmVkPXVuZGVmaW5lZCx1JiYocltjXT11KSksdC5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXtlPXguZXZlbnQuZml4KGUpO3ZhciB0LG4scixpLG8scz1bXSxhPWQuY2FsbChhcmd1bWVudHMpLHU9KHEuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbZS50eXBlXXx8W10sbD14LmV2ZW50LnNwZWNpYWxbZS50eXBlXXx8e307aWYoYVswXT1lLGUuZGVsZWdhdGVUYXJnZXQ9dGhpcywhbC5wcmVEaXNwYXRjaHx8bC5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsZSkhPT0hMSl7cz14LmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxlLHUpLHQ9MDt3aGlsZSgoaT1zW3QrK10pJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtlLmN1cnJlbnRUYXJnZXQ9aS5lbGVtLG49MDt3aGlsZSgobz1pLmhhbmRsZXJzW24rK10pJiYhZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghZS5uYW1lc3BhY2VfcmV8fGUubmFtZXNwYWNlX3JlLnRlc3Qoby5uYW1lc3BhY2UpKSYmKGUuaGFuZGxlT2JqPW8sZS5kYXRhPW8uZGF0YSxyPSgoeC5ldmVudC5zcGVjaWFsW28ub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxvLmhhbmRsZXIpLmFwcGx5KGkuZWxlbSxhKSxyIT09dW5kZWZpbmVkJiYoZS5yZXN1bHQ9cik9PT0hMSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGwucG9zdERpc3BhdGNoJiZsLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZSksZS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLHM9W10sYT10LmRlbGVnYXRlQ291bnQsdT1lLnRhcmdldDtpZihhJiZ1Lm5vZGVUeXBlJiYoIWUuYnV0dG9ufHwiY2xpY2siIT09ZS50eXBlKSlmb3IoO3UhPT10aGlzO3U9dS5wYXJlbnROb2RlfHx0aGlzKWlmKHUuZGlzYWJsZWQhPT0hMHx8ImNsaWNrIiE9PWUudHlwZSl7Zm9yKHI9W10sbj0wO2E+bjtuKyspbz10W25dLGk9by5zZWxlY3RvcisiICIscltpXT09PXVuZGVmaW5lZCYmKHJbaV09by5uZWVkc0NvbnRleHQ/eChpLHRoaXMpLmluZGV4KHUpPj0wOnguZmluZChpLHRoaXMsbnVsbCxbdV0pLmxlbmd0aCkscltpXSYmci5wdXNoKG8pO3IubGVuZ3RoJiZzLnB1c2goe2VsZW06dSxoYW5kbGVyczpyfSl9cmV0dXJuIHQubGVuZ3RoPmEmJnMucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOnQuc2xpY2UoYSl9KSxzfSxwcm9wczoiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09ZS53aGljaCYmKGUud2hpY2g9bnVsbCE9dC5jaGFyQ29kZT90LmNoYXJDb2RlOnQua2V5Q29kZSksZX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHM9dC5idXR0b247cmV0dXJuIG51bGw9PWUucGFnZVgmJm51bGwhPXQuY2xpZW50WCYmKG49ZS50YXJnZXQub3duZXJEb2N1bWVudHx8byxyPW4uZG9jdW1lbnRFbGVtZW50LGk9bi5ib2R5LGUucGFnZVg9dC5jbGllbnRYKyhyJiZyLnNjcm9sbExlZnR8fGkmJmkuc2Nyb2xsTGVmdHx8MCktKHImJnIuY2xpZW50TGVmdHx8aSYmaS5jbGllbnRMZWZ0fHwwKSxlLnBhZ2VZPXQuY2xpZW50WSsociYmci5zY3JvbGxUb3B8fGkmJmkuc2Nyb2xsVG9wfHwwKS0ociYmci5jbGllbnRUb3B8fGkmJmkuY2xpZW50VG9wfHwwKSksZS53aGljaHx8cz09PXVuZGVmaW5lZHx8KGUud2hpY2g9MSZzPzE6MiZzPzM6NCZzPzI6MCksZX19LGZpeDpmdW5jdGlvbihlKXtpZihlW3guZXhwYW5kb10pcmV0dXJuIGU7dmFyIHQsbixyLGk9ZS50eXBlLG89ZSxzPXRoaXMuZml4SG9va3NbaV07c3x8KHRoaXMuZml4SG9va3NbaV09cz16LnRlc3QoaSk/dGhpcy5tb3VzZUhvb2tzOkkudGVzdChpKT90aGlzLmtleUhvb2tzOnt9KSxyPXMucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQocy5wcm9wcyk6dGhpcy5wcm9wcyxlPW5ldyB4LkV2ZW50KG8pLHQ9ci5sZW5ndGg7d2hpbGUodC0tKW49clt0XSxlW25dPW9bbl07cmV0dXJuIDM9PT1lLnRhcmdldC5ub2RlVHlwZSYmKGUudGFyZ2V0PWUudGFyZ2V0LnBhcmVudE5vZGUpLHMuZmlsdGVyP3MuZmlsdGVyKGUsbyk6ZX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1WKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dW5kZWZpbmVkfSxkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1WKCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnVuZGVmaW5lZH0sZGVsZWdhdGVUeXBlOiJmb2N1c291dCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuImNoZWNrYm94Ij09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmeC5ub2RlTmFtZSh0aGlzLCJpbnB1dCIpPyh0aGlzLmNsaWNrKCksITEpOnVuZGVmaW5lZH0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHgubm9kZU5hbWUoZS50YXJnZXQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe2UucmVzdWx0IT09dW5kZWZpbmVkJiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT14LmV4dGVuZChuZXcgeC5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO3I/eC5ldmVudC50cmlnZ2VyKGksbnVsbCx0KTp4LmV2ZW50LmRpc3BhdGNoLmNhbGwodCxpKSxpLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZuLnByZXZlbnREZWZhdWx0KCl9fSx4LnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4sITEpfSx4LkV2ZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiB4LkV2ZW50PyhlJiZlLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1lLHRoaXMudHlwZT1lLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9ZS5kZWZhdWx0UHJldmVudGVkfHxlLmdldFByZXZlbnREZWZhdWx0JiZlLmdldFByZXZlbnREZWZhdWx0KCk/VTpZKTp0aGlzLnR5cGU9ZSx0JiZ4LmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHx4Lm5vdygpLHRoaXNbeC5leHBhbmRvXT0hMCx1bmRlZmluZWQpOm5ldyB4LkV2ZW50KGUsdCl9LHguRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6WSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpZLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOlkscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9VSxlJiZlLnByZXZlbnREZWZhdWx0JiZlLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPVUsZSYmZS5zdG9wUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9VSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0seC5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0In0sZnVuY3Rpb24oZSx0KXt4LmV2ZW50LnNwZWNpYWxbZV09e2RlbGVnYXRlVHlwZTp0LGJpbmRUeXBlOnQsaGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciBuLHI9dGhpcyxpPWUucmVsYXRlZFRhcmdldCxvPWUuaGFuZGxlT2JqO3JldHVybighaXx8aSE9PXImJiF4LmNvbnRhaW5zKHIsaSkpJiYoZS50eXBlPW8ub3JpZ1R5cGUsbj1vLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT10KSxufX19KSx4LnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXN8fHguZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oZSx0KXt2YXIgbj0wLHI9ZnVuY3Rpb24oZSl7eC5ldmVudC5zaW11bGF0ZSh0LGUudGFyZ2V0LHguZXZlbnQuZml4KGUpLCEwKX07eC5ldmVudC5zcGVjaWFsW3RdPXtzZXR1cDpmdW5jdGlvbigpezA9PT1uKysmJm8uYWRkRXZlbnRMaXN0ZW5lcihlLHIsITApfSx0ZWFyZG93bjpmdW5jdGlvbigpezA9PT0tLW4mJm8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHIsITApfX19KSx4LmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7InN0cmluZyIhPXR5cGVvZiB0JiYobj1ufHx0LHQ9dW5kZWZpbmVkKTtmb3IocyBpbiBlKXRoaXMub24ocyx0LG4sZVtzXSxpKTtyZXR1cm4gdGhpc31pZihudWxsPT1uJiZudWxsPT1yPyhyPXQsbj10PXVuZGVmaW5lZCk6bnVsbD09ciYmKCJzdHJpbmciPT10eXBlb2YgdD8ocj1uLG49dW5kZWZpbmVkKToocj1uLG49dCx0PXVuZGVmaW5lZCkpLHI9PT0hMSlyPVk7ZWxzZSBpZighcilyZXR1cm4gdGhpcztyZXR1cm4gMT09PWkmJihvPXIscj1mdW5jdGlvbihlKXtyZXR1cm4geCgpLm9mZihlKSxvLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sci5ndWlkPW8uZ3VpZHx8KG8uZ3VpZD14Lmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQuYWRkKHRoaXMsZSxyLG4sdCl9KX0sb25lOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKGUsdCxuLHIsMSl9LG9mZjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZihlJiZlLnByZXZlbnREZWZhdWx0JiZlLmhhbmRsZU9iailyZXR1cm4gcj1lLmhhbmRsZU9iaix4KGUuZGVsZWdhdGVUYXJnZXQpLm9mZihyLm5hbWVzcGFjZT9yLm9yaWdUeXBlKyIuIityLm5hbWVzcGFjZTpyLm9yaWdUeXBlLHIuc2VsZWN0b3Isci5oYW5kbGVyKSx0aGlzO2lmKCJvYmplY3QiPT10eXBlb2YgZSl7Zm9yKGkgaW4gZSl0aGlzLm9mZihpLHQsZVtpXSk7cmV0dXJuIHRoaXN9cmV0dXJuKHQ9PT0hMXx8ImZ1bmN0aW9uIj09dHlwZW9mIHQpJiYobj10LHQ9dW5kZWZpbmVkKSxuPT09ITEmJihuPVkpLHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQucmVtb3ZlKHRoaXMsZSxuLHQpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXNbMF07cmV0dXJuIG4/eC5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKTp1bmRlZmluZWR9fSk7dmFyIEc9L14uW146I1xbXC4sXSokLyxKPXguZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsUT17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt4LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT10aGlzLmxlbmd0aDtpZigic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIHQ9dGhpcyx0aGlzLnB1c2hTdGFjayh4KGUpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihyPTA7aT5yO3IrKylpZih4LmNvbnRhaW5zKHRbcl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKG49W10scj0wO2k+cjtyKyspeC5maW5kKGUsdGhpc1tyXSxuKTtyZXR1cm4gbj10aGlzLnB1c2hTdGFjayhpPjE/eC51bmlxdWUobik6biksbi5zZWxlY3Rvcj0odGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yKyIgIjoiIikrZSxufSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9eChlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9MDtmb3IoO24+ZTtlKyspaWYoeC5jb250YWlucyh0aGlzLHRbZV0pKXJldHVybiEwfSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soWih0aGlzLGV8fFtdLCEwKSl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soWih0aGlzLGV8fFtdLCExKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKCJzdHJpbmciPT10eXBlb2YgZT9KLnRlc3QoZSk/eChlLHRoaXMuY29udGV4dCkuaW5kZXgodGhpc1swXSk+PTA6eC5maWx0ZXIoZSx0aGlzKS5sZW5ndGg+MDp0aGlzLmZpbHRlcihlKS5sZW5ndGg+MCl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLHM9Si50ZXN0KGUpfHwic3RyaW5nIiE9dHlwZW9mIGU/eChlLHR8fHRoaXMuY29udGV4dCk6MDtmb3IoO2k+cjtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZigxMT5uLm5vZGVUeXBlJiYocz9zLmluZGV4KG4pPi0xOjE9PT1uLm5vZGVUeXBlJiZ4LmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtuPW8ucHVzaChuKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soby5sZW5ndGg+MT94LnVuaXF1ZShvKTpvKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InN0cmluZyI9PXR5cGVvZiBlP2cuY2FsbCh4KGUpLHRoaXNbMF0pOmcuY2FsbCh0aGlzLGUuanF1ZXJ5P2VbMF06ZSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj0ic3RyaW5nIj09dHlwZW9mIGU/eChlLHQpOngubWFrZUFycmF5KGUmJmUubm9kZVR5cGU/W2VdOmUpLHI9eC5tZXJnZSh0aGlzLmdldCgpLG4pO3JldHVybiB0aGlzLnB1c2hTdGFjayh4LnVuaXF1ZShyKSl9LGFkZEJhY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWU/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpfX0pO2Z1bmN0aW9uIEsoZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfXguZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmMTEhPT10Lm5vZGVUeXBlP3Q6bnVsbH0scGFyZW50czpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwicGFyZW50Tm9kZSIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB4LmRpcihlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gSyhlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBLKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmRpcihlLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmRpcihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB4LmRpcihlLCJwcmV2aW91c1NpYmxpbmciLG4pfSxzaWJsaW5nczpmdW5jdGlvbihlKXtyZXR1cm4geC5zaWJsaW5nKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4geC5zaWJsaW5nKGUuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiB4Lm5vZGVOYW1lKGUsImlmcmFtZSIpP2UuY29udGVudERvY3VtZW50fHxlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6eC5tZXJnZShbXSxlLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9eC5tYXAodGhpcyx0LG4pO3JldHVybiJVbnRpbCIhPT1lLnNsaWNlKC01KSYmKHI9biksciYmInN0cmluZyI9PXR5cGVvZiByJiYoaT14LmZpbHRlcihyLGkpKSx0aGlzLmxlbmd0aD4xJiYoUVtlXXx8eC51bmlxdWUoaSksInAiPT09ZVswXSYmaS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGkpfX0pLHguZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRbMF07cmV0dXJuIG4mJihlPSI6bm90KCIrZSsiKSIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/eC5maW5kLm1hdGNoZXNTZWxlY3RvcihyLGUpP1tyXTpbXTp4LmZpbmQubWF0Y2hlcyhlLHguZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0sZGlyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bXSxpPW4hPT11bmRlZmluZWQ7d2hpbGUoKGU9ZVt0XSkmJjkhPT1lLm5vZGVUeXBlKWlmKDE9PT1lLm5vZGVUeXBlKXtpZihpJiZ4KGUpLmlzKG4pKWJyZWFrO3IucHVzaChlKX1yZXR1cm4gcn0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVuY3Rpb24gWihlLHQsbil7aWYoeC5pc0Z1bmN0aW9uKHQpKXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiEhdC5jYWxsKGUscixlKSE9PW59KTtpZih0Lm5vZGVUeXBlKXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQhPT1ufSk7aWYoInN0cmluZyI9PXR5cGVvZiB0KXtpZihHLnRlc3QodCkpcmV0dXJuIHguZmlsdGVyKHQsZSxuKTt0PXguZmlsdGVyKHQsZSl9cmV0dXJuIHguZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBnLmNhbGwodCxlKT49MCE9PW59KX12YXIgZXQ9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Ol0rKVtePl0qKVwvPi9naSx0dD0vPChbXHc6XSspLyxudD0vPHwmIz9cdys7LyxydD0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLGl0PS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLG90PS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHN0PS9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxhdD0vXnRydWVcLyguKikvLHV0PS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZyxsdD17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtsdC5vcHRncm91cD1sdC5vcHRpb24sbHQudGJvZHk9bHQudGZvb3Q9bHQuY29sZ3JvdXA9bHQuY2FwdGlvbj1sdC5jb2w9bHQudGhlYWQsbHQudGg9bHQudGQseC5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT11bmRlZmluZWQ/eC50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8bykuY3JlYXRlVGV4dE5vZGUoZSkpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9Y3QodGhpcyxlKTt0LmFwcGVuZENoaWxkKGUpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1jdCh0aGlzLGUpO3QuaW5zZXJ0QmVmb3JlKGUsdC5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9ZT94LmZpbHRlcihlLHRoaXMpOnRoaXMsaT0wO2Zvcig7bnVsbCE9KG49cltpXSk7aSsrKXR8fDEhPT1uLm5vZGVUeXBlfHx4LmNsZWFuRGF0YShndChuKSksbi5wYXJlbnROb2RlJiYodCYmeC5jb250YWlucyhuLm93bmVyRG9jdW1lbnQsbikmJmh0KGd0KG4sInNjcmlwdCIpKSxuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobikpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe3ZhciBlLHQ9MDtmb3IoO251bGwhPShlPXRoaXNbdF0pO3QrKykxPT09ZS5ub2RlVHlwZSYmKHguY2xlYW5EYXRhKGd0KGUsITEpKSxlLnRleHRDb250ZW50PSIiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1udWxsPT1lPyExOmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiB4LmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXNbMF18fHt9LG49MCxyPXRoaXMubGVuZ3RoO2lmKGU9PT11bmRlZmluZWQmJjE9PT10Lm5vZGVUeXBlKXJldHVybiB0LmlubmVySFRNTDtpZigic3RyaW5nIj09dHlwZW9mIGUmJiFydC50ZXN0KGUpJiYhbHRbKHR0LmV4ZWMoZSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCldKXtlPWUucmVwbGFjZShldCwiPCQxPjwvJDI+Iik7dHJ5e2Zvcig7cj5uO24rKyl0PXRoaXNbbl18fHt9LDE9PT10Lm5vZGVUeXBlJiYoeC5jbGVhbkRhdGEoZ3QodCwhMSkpLHQuaW5uZXJIVE1MPWUpO3Q9MH1jYXRjaChpKXt9fXQmJnRoaXMuZW1wdHkoKS5hcHBlbmQoZSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgZT14Lm1hcCh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybltlLm5leHRTaWJsaW5nLGUucGFyZW50Tm9kZV19KSx0PTA7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKG4pe3ZhciByPWVbdCsrXSxpPWVbdCsrXTtpJiYoeCh0aGlzKS5yZW1vdmUoKSxpLmluc2VydEJlZm9yZShuLHIpKX0sITApLHQ/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVtb3ZlKGUsITApfSxkb21NYW5pcDpmdW5jdGlvbihlLHQsbil7ZT1wLmFwcGx5KFtdLGUpO3ZhciByLGksbyxzLGEsdSxsPTAsYz10aGlzLmxlbmd0aCxmPXRoaXMsaD1jLTEsZD1lWzBdLGc9eC5pc0Z1bmN0aW9uKGQpO2lmKGd8fCEoMT49Y3x8InN0cmluZyIhPXR5cGVvZiBkfHx4LnN1cHBvcnQuY2hlY2tDbG9uZSkmJm90LnRlc3QoZCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihyKXt2YXIgaT1mLmVxKHIpO2cmJihlWzBdPWQuY2FsbCh0aGlzLHIsaS5odG1sKCkpKSxpLmRvbU1hbmlwKGUsdCxuKX0pO2lmKGMmJihyPXguYnVpbGRGcmFnbWVudChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSwhbiYmdGhpcyksaT1yLmZpcnN0Q2hpbGQsMT09PXIuY2hpbGROb2Rlcy5sZW5ndGgmJihyPWkpLGkpKXtmb3Iobz14Lm1hcChndChyLCJzY3JpcHQiKSxmdCkscz1vLmxlbmd0aDtjPmw7bCsrKWE9cixsIT09aCYmKGE9eC5jbG9uZShhLCEwLCEwKSxzJiZ4Lm1lcmdlKG8sZ3QoYSwic2NyaXB0IikpKSx0LmNhbGwodGhpc1tsXSxhLGwpO2lmKHMpZm9yKHU9b1tvLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LHgubWFwKG8scHQpLGw9MDtzPmw7bCsrKWE9b1tsXSxzdC50ZXN0KGEudHlwZXx8IiIpJiYhcS5hY2Nlc3MoYSwiZ2xvYmFsRXZhbCIpJiZ4LmNvbnRhaW5zKHUsYSkmJihhLnNyYz94Ll9ldmFsVXJsKGEuc3JjKTp4Lmdsb2JhbEV2YWwoYS50ZXh0Q29udGVudC5yZXBsYWNlKHV0LCIiKSkpfXJldHVybiB0aGlzfX0pLHguZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihlKXt2YXIgbixyPVtdLGk9eChlKSxvPWkubGVuZ3RoLTEscz0wO2Zvcig7bz49cztzKyspbj1zPT09bz90aGlzOnRoaXMuY2xvbmUoITApLHgoaVtzXSlbdF0obiksaC5hcHBseShyLG4uZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhyKX19KSx4LmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxzLGE9ZS5jbG9uZU5vZGUoITApLHU9eC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoISh4LnN1cHBvcnQubm9DbG9uZUNoZWNrZWR8fDEhPT1lLm5vZGVUeXBlJiYxMSE9PWUubm9kZVR5cGV8fHguaXNYTUxEb2MoZSkpKWZvcihzPWd0KGEpLG89Z3QoZSkscj0wLGk9by5sZW5ndGg7aT5yO3IrKyltdChvW3JdLHNbcl0pO2lmKHQpaWYobilmb3Iobz1vfHxndChlKSxzPXN8fGd0KGEpLHI9MCxpPW8ubGVuZ3RoO2k+cjtyKyspZHQob1tyXSxzW3JdKTtlbHNlIGR0KGUsYSk7cmV0dXJuIHM9Z3QoYSwic2NyaXB0Iikscy5sZW5ndGg+MCYmaHQocywhdSYmZ3QoZSwic2NyaXB0IikpLGF9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzLGEsdSxsLGM9MCxmPWUubGVuZ3RoLHA9dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksaD1bXTtmb3IoO2Y+YztjKyspaWYoaT1lW2NdLGl8fDA9PT1pKWlmKCJvYmplY3QiPT09eC50eXBlKGkpKXgubWVyZ2UoaCxpLm5vZGVUeXBlP1tpXTppKTtlbHNlIGlmKG50LnRlc3QoaSkpe289b3x8cC5hcHBlbmRDaGlsZCh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxzPSh0dC5leGVjKGkpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLGE9bHRbc118fGx0Ll9kZWZhdWx0LG8uaW5uZXJIVE1MPWFbMV0raS5yZXBsYWNlKGV0LCI8JDE+PC8kMj4iKSthWzJdLGw9YVswXTt3aGlsZShsLS0pbz1vLmZpcnN0Q2hpbGQ7eC5tZXJnZShoLG8uY2hpbGROb2Rlcyksbz1wLmZpcnN0Q2hpbGQsby50ZXh0Q29udGVudD0iIn1lbHNlIGgucHVzaCh0LmNyZWF0ZVRleHROb2RlKGkpKTtwLnRleHRDb250ZW50PSIiLGM9MDt3aGlsZShpPWhbYysrXSlpZigoIXJ8fC0xPT09eC5pbkFycmF5KGkscikpJiYodT14LmNvbnRhaW5zKGkub3duZXJEb2N1bWVudCxpKSxvPWd0KHAuYXBwZW5kQ2hpbGQoaSksInNjcmlwdCIpLHUmJmh0KG8pLG4pKXtsPTA7d2hpbGUoaT1vW2wrK10pc3QudGVzdChpLnR5cGV8fCIiKSYmbi5wdXNoKGkpfXJldHVybiBwfSxjbGVhbkRhdGE6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9ZS5sZW5ndGgsbz0wLHM9eC5ldmVudC5zcGVjaWFsO2Zvcig7aT5vO28rKyl7aWYobj1lW29dLHguYWNjZXB0RGF0YShuKSYmKHQ9cS5hY2Nlc3MobikpKWZvcihyIGluIHQuZXZlbnRzKXNbcl0/eC5ldmVudC5yZW1vdmUobixyKTp4LnJlbW92ZUV2ZW50KG4scix0LmhhbmRsZSk7TC5kaXNjYXJkKG4pLHEuZGlzY2FyZChuKX19LF9ldmFsVXJsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InRleHQiLGFzeW5jOiExLGdsb2JhbDohMSxzdWNjZXNzOnguZ2xvYmFsRXZhbH0pfX0pO2Z1bmN0aW9uIGN0KGUsdCl7cmV0dXJuIHgubm9kZU5hbWUoZSwidGFibGUiKSYmeC5ub2RlTmFtZSgxPT09dC5ub2RlVHlwZT90OnQuZmlyc3RDaGlsZCwidHIiKT9lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTplfWZ1bmN0aW9uIGZ0KGUpe3JldHVybiBlLnR5cGU9KG51bGwhPT1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrZS50eXBlLGV9ZnVuY3Rpb24gcHQoZSl7dmFyIHQ9YXQuZXhlYyhlLnR5cGUpO3JldHVybiB0P2UudHlwZT10WzFdOmUucmVtb3ZlQXR0cmlidXRlKCJ0eXBlIiksZX1mdW5jdGlvbiBodChlLHQpe3ZhciBuPWUubGVuZ3RoLHI9MDtmb3IoO24+cjtyKyspcS5zZXQoZVtyXSwiZ2xvYmFsRXZhbCIsIXR8fHEuZ2V0KHRbcl0sImdsb2JhbEV2YWwiKSl9ZnVuY3Rpb24gZHQoZSx0KXt2YXIgbixyLGksbyxzLGEsdSxsO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihxLmhhc0RhdGEoZSkmJihvPXEuYWNjZXNzKGUpLHM9eC5leHRlbmQoe30sbyksbD1vLmV2ZW50cyxxLnNldCh0LHMpLGwpKXtkZWxldGUgcy5oYW5kbGUscy5ldmVudHM9e307Zm9yKGkgaW4gbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7cj5uO24rKyl4LmV2ZW50LmFkZCh0LGksbFtpXVtuXSl9TC5oYXNEYXRhKGUpJiYoYT1MLmFjY2VzcyhlKSx1PXguZXh0ZW5kKHt9LGEpLEwuc2V0KHQsdSkpfX1mdW5jdGlvbiBndChlLHQpe3ZhciBuPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOmUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXTtyZXR1cm4gdD09PXVuZGVmaW5lZHx8dCYmeC5ub2RlTmFtZShlLHQpP3gubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24gbXQoZSx0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PW4mJml0LnRlc3QoZS50eXBlKT90LmNoZWNrZWQ9ZS5jaGVja2VkOigiaW5wdXQiPT09bnx8InRleHRhcmVhIj09PW4pJiYodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfXguZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KToodGhpc1swXSYmKHQ9eChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGUpe3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLHQpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXgodGhpcyksbj10LmNvbnRlbnRzKCk7bi5sZW5ndGg/bi53cmFwQWxsKGUpOnQuYXBwZW5kKGUpfSl9LHdyYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5pc0Z1bmN0aW9uKGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7eCh0aGlzKS53cmFwQWxsKHQ/ZS5jYWxsKHRoaXMsbik6ZSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe3gubm9kZU5hbWUodGhpcywiYm9keSIpfHx4KHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTt2YXIgeXQsdnQseHQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLGJ0PS9ebWFyZ2luLyx3dD1SZWdFeHAoIl4oIitiKyIpKC4qKSQiLCJpIiksVHQ9UmVnRXhwKCJeKCIrYisiKSg/IXB4KVthLXolXSskIiwiaSIpLEN0PVJlZ0V4cCgiXihbKy1dKT0oIitiKyIpIiwiaSIpLGt0PXtCT0RZOiJibG9jayJ9LE50PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxFdD17bGV0dGVyU3BhY2luZzowLGZvbnRXZWlnaHQ6NDAwfSxTdD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGp0PVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gRHQoZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPWp0Lmxlbmd0aDt3aGlsZShpLS0paWYodD1qdFtpXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gcn1mdW5jdGlvbiBBdChlLHQpe3JldHVybiBlPXR8fGUsIm5vbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpfHwheC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9ZnVuY3Rpb24gTHQodCl7cmV0dXJuIGUuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpfWZ1bmN0aW9uIHF0KGUsdCl7dmFyIG4scixpLG89W10scz0wLGE9ZS5sZW5ndGg7Zm9yKDthPnM7cysrKXI9ZVtzXSxyLnN0eWxlJiYob1tzXT1xLmdldChyLCJvbGRkaXNwbGF5Iiksbj1yLnN0eWxlLmRpc3BsYXksdD8ob1tzXXx8Im5vbmUiIT09bnx8KHIuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJkF0KHIpJiYob1tzXT1xLmFjY2VzcyhyLCJvbGRkaXNwbGF5IixQdChyLm5vZGVOYW1lKSkpKTpvW3NdfHwoaT1BdChyKSwobiYmIm5vbmUiIT09bnx8IWkpJiZxLnNldChyLCJvbGRkaXNwbGF5IixpP246eC5jc3MociwiZGlzcGxheSIpKSkpO2ZvcihzPTA7YT5zO3MrKylyPWVbc10sci5zdHlsZSYmKHQmJiJub25lIiE9PXIuc3R5bGUuZGlzcGxheSYmIiIhPT1yLnN0eWxlLmRpc3BsYXl8fChyLnN0eWxlLmRpc3BsYXk9dD9vW3NdfHwiIjoibm9uZSIpKTtyZXR1cm4gZX14LmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxzPTA7aWYoeC5pc0FycmF5KHQpKXtmb3Iocj1MdChlKSxpPXQubGVuZ3RoO2k+cztzKyspb1t0W3NdXT14LmNzcyhlLHRbc10sITEscik7cmV0dXJuIG99cmV0dXJuIG4hPT11bmRlZmluZWQ/eC5zdHlsZShlLHQsbik6eC5jc3MoZSx0KX0sZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gcXQodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gcXQodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD0iYm9vbGVhbiI9PXR5cGVvZiBlO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXsodD9lOkF0KHRoaXMpKT94KHRoaXMpLnNob3coKTp4KHRoaXMpLmhpZGUoKX0pfX0pLHguZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGUsdCl7aWYodCl7dmFyIG49eXQoZSwib3BhY2l0eSIpO3JldHVybiIiPT09bj8iMSI6bn19fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6ImNzc0Zsb2F0In0sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxvLHMsYT14LmNhbWVsQ2FzZSh0KSx1PWUuc3R5bGU7cmV0dXJuIHQ9eC5jc3NQcm9wc1thXXx8KHguY3NzUHJvcHNbYV09RHQodSxhKSkscz14LmNzc0hvb2tzW3RdfHx4LmNzc0hvb2tzW2FdLG49PT11bmRlZmluZWQ/cyYmImdldCJpbiBzJiYoaT1zLmdldChlLCExLHIpKSE9PXVuZGVmaW5lZD9pOnVbdF06KG89dHlwZW9mIG4sInN0cmluZyI9PT1vJiYoaT1DdC5leGVjKG4pKSYmKG49KGlbMV0rMSkqaVsyXStwYXJzZUZsb2F0KHguY3NzKGUsdCkpLG89Im51bWJlciIpLG51bGw9PW58fCJudW1iZXIiPT09byYmaXNOYU4obil8fCgibnVtYmVyIiE9PW98fHguY3NzTnVtYmVyW2FdfHwobis9InB4IikseC5zdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fCh1W3RdPSJpbmhlcml0IikscyYmInNldCJpbiBzJiYobj1zLnNldChlLG4scikpPT09dW5kZWZpbmVkfHwodVt0XT1uKSksdW5kZWZpbmVkKX19LGNzczpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLHMsYT14LmNhbWVsQ2FzZSh0KTtyZXR1cm4gdD14LmNzc1Byb3BzW2FdfHwoeC5jc3NQcm9wc1thXT1EdChlLnN0eWxlLGEpKSxzPXguY3NzSG9va3NbdF18fHguY3NzSG9va3NbYV0scyYmImdldCJpbiBzJiYoaT1zLmdldChlLCEwLG4pKSxpPT09dW5kZWZpbmVkJiYoaT15dChlLHQscikpLCJub3JtYWwiPT09aSYmdCBpbiBFdCYmKGk9RXRbdF0pLCIiPT09bnx8bj8obz1wYXJzZUZsb2F0KGkpLG49PT0hMHx8eC5pc051bWVyaWMobyk/b3x8MDppKTppfX0pLHl0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8scz1ufHxMdChlKSxhPXM/cy5nZXRQcm9wZXJ0eVZhbHVlKHQpfHxzW3RdOnVuZGVmaW5lZCx1PWUuc3R5bGU7cmV0dXJuIHMmJigiIiE9PWF8fHguY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwoYT14LnN0eWxlKGUsdCkpLFR0LnRlc3QoYSkmJmJ0LnRlc3QodCkmJihyPXUud2lkdGgsaT11Lm1pbldpZHRoLG89dS5tYXhXaWR0aCx1Lm1pbldpZHRoPXUubWF4V2lkdGg9dS53aWR0aD1hLGE9cy53aWR0aCx1LndpZHRoPXIsdS5taW5XaWR0aD1pLHUubWF4V2lkdGg9bykpLGF9O2Z1bmN0aW9uIEh0KGUsdCxuKXt2YXIgcj13dC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHwicHgiKTp0fWZ1bmN0aW9uIE90KGUsdCxuLHIsaSl7dmFyIG89bj09PShyPyJib3JkZXIiOiJjb250ZW50Iik/NDoid2lkdGgiPT09dD8xOjAscz0wO2Zvcig7ND5vO28rPTIpIm1hcmdpbiI9PT1uJiYocys9eC5jc3MoZSxuK1N0W29dLCEwLGkpKSxyPygiY29udGVudCI9PT1uJiYocy09eC5jc3MoZSwicGFkZGluZyIrU3Rbb10sITAsaSkpLCJtYXJnaW4iIT09biYmKHMtPXguY3NzKGUsImJvcmRlciIrU3Rbb10rIldpZHRoIiwhMCxpKSkpOihzKz14LmNzcyhlLCJwYWRkaW5nIitTdFtvXSwhMCxpKSwicGFkZGluZyIhPT1uJiYocys9eC5jc3MoZSwiYm9yZGVyIitTdFtvXSsiV2lkdGgiLCEwLGkpKSk7cmV0dXJuIHN9ZnVuY3Rpb24gRnQoZSx0LG4pe3ZhciByPSEwLGk9IndpZHRoIj09PXQ/ZS5vZmZzZXRXaWR0aDplLm9mZnNldEhlaWdodCxvPUx0KGUpLHM9eC5zdXBwb3J0LmJveFNpemluZyYmImJvcmRlci1ib3giPT09eC5jc3MoZSwiYm94U2l6aW5nIiwhMSxvKTtpZigwPj1pfHxudWxsPT1pKXtpZihpPXl0KGUsdCxvKSwoMD5pfHxudWxsPT1pKSYmKGk9ZS5zdHlsZVt0XSksVHQudGVzdChpKSlyZXR1cm4gaTtyPXMmJih4LnN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGV8fGk9PT1lLnN0eWxlW3RdKSxpPXBhcnNlRmxvYXQoaSl8fDB9cmV0dXJuIGkrT3QoZSx0LG58fChzPyJib3JkZXIiOiJjb250ZW50IikscixvKSsicHgifWZ1bmN0aW9uIFB0KGUpe3ZhciB0PW8sbj1rdFtlXTtyZXR1cm4gbnx8KG49UnQoZSx0KSwibm9uZSIhPT1uJiZufHwodnQ9KHZ0fHx4KCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+IikuY3NzKCJjc3NUZXh0IiwiZGlzcGxheTpibG9jayAhaW1wb3J0YW50IikpLmFwcGVuZFRvKHQuZG9jdW1lbnRFbGVtZW50KSx0PSh2dFswXS5jb250ZW50V2luZG93fHx2dFswXS5jb250ZW50RG9jdW1lbnQpLmRvY3VtZW50LHQud3JpdGUoIjwhZG9jdHlwZSBodG1sPjxodG1sPjxib2R5PiIpLHQuY2xvc2UoKSxuPVJ0KGUsdCksdnQuZGV0YWNoKCkpLGt0W2VdPW4pLG59ZnVuY3Rpb24gUnQoZSx0KXt2YXIgbj14KHQuY3JlYXRlRWxlbWVudChlKSkuYXBwZW5kVG8odC5ib2R5KSxyPXguY3NzKG5bMF0sImRpc3BsYXkiKTtyZXR1cm4gbi5yZW1vdmUoKSxyfXguZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuPzA9PT1lLm9mZnNldFdpZHRoJiZ4dC50ZXN0KHguY3NzKGUsImRpc3BsYXkiKSk/eC5zd2FwKGUsTnQsZnVuY3Rpb24oKXtyZXR1cm4gRnQoZSx0LHIpfSk6RnQoZSx0LHIpOnVuZGVmaW5lZH0sc2V0OmZ1bmN0aW9uKGUsbixyKXt2YXIgaT1yJiZMdChlKTtyZXR1cm4gSHQoZSxuLHI/T3QoZSx0LHIseC5zdXBwb3J0LmJveFNpemluZyYmImJvcmRlci1ib3giPT09eC5jc3MoZSwiYm94U2l6aW5nIiwhMSxpKSxpKTowKX19fSkseChmdW5jdGlvbigpe3guc3VwcG9ydC5yZWxpYWJsZU1hcmdpblJpZ2h0fHwoeC5jc3NIb29rcy5tYXJnaW5SaWdodD17Z2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/eC5zd2FwKGUse2Rpc3BsYXk6ImlubGluZS1ibG9jayJ9LHl0LFtlLCJtYXJnaW5SaWdodCJdKTp1bmRlZmluZWR9fSksIXguc3VwcG9ydC5waXhlbFBvc2l0aW9uJiZ4LmZuLnBvc2l0aW9uJiZ4LmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj8obj15dChlLHQpLFR0LnRlc3Qobik/eChlKS5wb3NpdGlvbigpW3RdKyJweCI6bik6dW5kZWZpbmVkfX19KX0pLHguZXhwciYmeC5leHByLmZpbHRlcnMmJih4LmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIDA+PWUub2Zmc2V0V2lkdGgmJjA+PWUub2Zmc2V0SGVpZ2h0fSx4LmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiF4LmV4cHIuZmlsdGVycy5oaWRkZW4oZSl9KSx4LmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihlLHQpe3guY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe3ZhciByPTAsaT17fSxvPSJzdHJpbmciPT10eXBlb2Ygbj9uLnNwbGl0KCIgIik6W25dO2Zvcig7ND5yO3IrKylpW2UrU3Rbcl0rdF09b1tyXXx8b1tyLTJdfHxvWzBdO3JldHVybiBpfX0sYnQudGVzdChlKXx8KHguY3NzSG9va3NbZSt0XS5zZXQ9SHQpfSk7dmFyIE10PS8lMjAvZyxXdD0vXFtcXSQvLCR0PS9ccj9cbi9nLEJ0PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxJdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7eC5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiB4LnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGU9eC5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGU/eC5tYWtlQXJyYXkoZSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYheCh0aGlzKS5pcygiOmRpc2FibGVkIikmJkl0LnRlc3QodGhpcy5ub2RlTmFtZSkmJiFCdC50ZXN0KGUpJiYodGhpcy5jaGVja2VkfHwhaXQudGVzdChlKSl9KS5tYXAoZnVuY3Rpb24oZSx0KXt2YXIgbj14KHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1uP251bGw6eC5pc0FycmF5KG4pP3gubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZSgkdCwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2UoJHQsIlxyXG4iKX19KS5nZXQoKX19KSx4LnBhcmFtPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPWZ1bmN0aW9uKGUsdCl7dD14LmlzRnVuY3Rpb24odCk/dCgpOm51bGw9PXQ/IiI6dCxyW3IubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KX07aWYodD09PXVuZGVmaW5lZCYmKHQ9eC5hamF4U2V0dGluZ3MmJnguYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSx4LmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYheC5pc1BsYWluT2JqZWN0KGUpKXguZWFjaChlLGZ1bmN0aW9uKCl7aSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihuIGluIGUpenQobixlW25dLHQsaSk7cmV0dXJuIHIuam9pbigiJiIpLnJlcGxhY2UoTXQsIisiKX07ZnVuY3Rpb24genQoZSx0LG4scil7dmFyIGk7aWYoeC5pc0FycmF5KHQpKXguZWFjaCh0LGZ1bmN0aW9uKHQsaSl7bnx8V3QudGVzdChlKT9yKGUsaSk6enQoZSsiWyIrKCJvYmplY3QiPT10eXBlb2YgaT90OiIiKSsiXSIsaSxuLHIpfSk7ZWxzZSBpZihufHwib2JqZWN0IiE9PXgudHlwZSh0KSlyKGUsdCk7ZWxzZSBmb3IoaSBpbiB0KXp0KGUrIlsiK2krIl0iLHRbaV0sbixyKX14LmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSx0KXt4LmZuW3RdPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKHQsbnVsbCxlLG4pOnRoaXMudHJpZ2dlcih0KX19KSx4LmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGUpLm1vdXNlbGVhdmUodHx8ZSl9LGJpbmQ6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLm9uKGUsbnVsbCx0LG4pfSx1bmJpbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5vZmYoZSxudWxsLHQpfSxkZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbih0LGUsbixyKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGUsIioqIik6dGhpcy5vZmYodCxlfHwiKioiLG4pfX0pO3ZhciBfdCxYdCxVdD14Lm5vdygpLFl0PS9cPy8sVnQ9LyMuKiQvLEd0PS8oWz8mXSlfPVteJl0qLyxKdD0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLFF0PS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLEt0PS9eKD86R0VUfEhFQUQpJC8sWnQ9L15cL1wvLyxlbj0vXihbXHcuKy1dKzopKD86XC9cLyhbXlwvPyM6XSopKD86OihcZCspfCl8KS8sdG49eC5mbi5sb2FkLG5uPXt9LHJuPXt9LG9uPSIqLyIuY29uY2F0KCIqIik7dHJ5e1h0PWkuaHJlZn1jYXRjaChzbil7WHQ9by5jcmVhdGVFbGVtZW50KCJhIiksWHQuaHJlZj0iIixYdD1YdC5ocmVmfV90PWVuLmV4ZWMoWHQudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIGFuKGUpe3JldHVybiBmdW5jdGlvbih0LG4peyJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSIqIik7dmFyIHIsaT0wLG89dC50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbXTsKaWYoeC5pc0Z1bmN0aW9uKG4pKXdoaWxlKHI9b1tpKytdKSIrIj09PXJbMF0/KHI9ci5zbGljZSgxKXx8IioiLChlW3JdPWVbcl18fFtdKS51bnNoaWZ0KG4pKTooZVtyXT1lW3JdfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gdW4oZSx0LG4scil7dmFyIGk9e30sbz1lPT09cm47ZnVuY3Rpb24gcyhhKXt2YXIgdTtyZXR1cm4gaVthXT0hMCx4LmVhY2goZVthXXx8W10sZnVuY3Rpb24oZSxhKXt2YXIgbD1hKHQsbixyKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGx8fG98fGlbbF0/bz8hKHU9bCk6dW5kZWZpbmVkOih0LmRhdGFUeXBlcy51bnNoaWZ0KGwpLHMobCksITEpfSksdX1yZXR1cm4gcyh0LmRhdGFUeXBlc1swXSl8fCFpWyIqIl0mJnMoIioiKX1mdW5jdGlvbiBsbihlLHQpe3ZhciBuLHIsaT14LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl0W25dIT09dW5kZWZpbmVkJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZ4LmV4dGVuZCghMCxlLHIpLGV9eC5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJnRuKXJldHVybiB0bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHIsaSxvLHM9dGhpcyxhPWUuaW5kZXhPZigiICIpO3JldHVybiBhPj0wJiYocj1lLnNsaWNlKGEpLGU9ZS5zbGljZSgwLGEpKSx4LmlzRnVuY3Rpb24odCk/KG49dCx0PXVuZGVmaW5lZCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLHMubGVuZ3RoPjAmJnguYWpheCh7dXJsOmUsdHlwZTppLGRhdGFUeXBlOiJodG1sIixkYXRhOnR9KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHMuaHRtbChyP3goIjxkaXY+IikuYXBwZW5kKHgucGFyc2VIVE1MKGUpKS5maW5kKHIpOmUpfSkuY29tcGxldGUobiYmZnVuY3Rpb24oZSx0KXtzLmVhY2gobixvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KSx0aGlzfSx4LmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihlLHQpe3guZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSx4LmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6WHQsdHlwZToiR0VUIixpc0xvY2FsOlF0LnRlc3QoX3RbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6b24sdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjp4LnBhcnNlSlNPTiwidGV4dCB4bWwiOngucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P2xuKGxuKGUseC5hamF4U2V0dGluZ3MpLHQpOmxuKHguYWpheFNldHRpbmdzLGUpfSxhamF4UHJlZmlsdGVyOmFuKG5uKSxhamF4VHJhbnNwb3J0OmFuKHJuKSxhamF4OmZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBlJiYodD1lLGU9dW5kZWZpbmVkKSx0PXR8fHt9O3ZhciBuLHIsaSxvLHMsYSx1LGwsYz14LmFqYXhTZXR1cCh7fSx0KSxmPWMuY29udGV4dHx8YyxwPWMuY29udGV4dCYmKGYubm9kZVR5cGV8fGYuanF1ZXJ5KT94KGYpOnguZXZlbnQsaD14LkRlZmVycmVkKCksZD14LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxnPWMuc3RhdHVzQ29kZXx8e30sbT17fSx5PXt9LHY9MCxiPSJjYW5jZWxlZCIsVD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKDI9PT12KXtpZighbyl7bz17fTt3aGlsZSh0PUp0LmV4ZWMoaSkpb1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1vW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/aTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoZT15W25dPXlbbl18fGUsbVtlXT10KSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiB2fHwoYy5taW1lVHlwZT1lKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpaWYoMj52KWZvcih0IGluIGUpZ1t0XT1bZ1t0XSxlW3RdXTtlbHNlIFQuYWx3YXlzKGVbVC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8YjtyZXR1cm4gbiYmbi5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKGgucHJvbWlzZShUKS5jb21wbGV0ZT1kLmFkZCxULnN1Y2Nlc3M9VC5kb25lLFQuZXJyb3I9VC5mYWlsLGMudXJsPSgoZXx8Yy51cmx8fFh0KSsiIikucmVwbGFjZShWdCwiIikucmVwbGFjZShadCxfdFsxXSsiLy8iKSxjLnR5cGU9dC5tZXRob2R8fHQudHlwZXx8Yy5tZXRob2R8fGMudHlwZSxjLmRhdGFUeXBlcz14LnRyaW0oYy5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbIiJdLG51bGw9PWMuY3Jvc3NEb21haW4mJihhPWVuLmV4ZWMoYy51cmwudG9Mb3dlckNhc2UoKSksYy5jcm9zc0RvbWFpbj0hKCFhfHxhWzFdPT09X3RbMV0mJmFbMl09PT1fdFsyXSYmKGFbM118fCgiaHR0cDoiPT09YVsxXT8iODAiOiI0NDMiKSk9PT0oX3RbM118fCgiaHR0cDoiPT09X3RbMV0/IjgwIjoiNDQzIikpKSksYy5kYXRhJiZjLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGMuZGF0YSYmKGMuZGF0YT14LnBhcmFtKGMuZGF0YSxjLnRyYWRpdGlvbmFsKSksdW4obm4sYyx0LFQpLDI9PT12KXJldHVybiBUO3U9Yy5nbG9iYWwsdSYmMD09PXguYWN0aXZlKysmJnguZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksYy50eXBlPWMudHlwZS50b1VwcGVyQ2FzZSgpLGMuaGFzQ29udGVudD0hS3QudGVzdChjLnR5cGUpLHI9Yy51cmwsYy5oYXNDb250ZW50fHwoYy5kYXRhJiYocj1jLnVybCs9KFl0LnRlc3Qocik/IiYiOiI/IikrYy5kYXRhLGRlbGV0ZSBjLmRhdGEpLGMuY2FjaGU9PT0hMSYmKGMudXJsPUd0LnRlc3Qocik/ci5yZXBsYWNlKEd0LCIkMV89IitVdCsrKTpyKyhZdC50ZXN0KHIpPyImIjoiPyIpKyJfPSIrVXQrKykpLGMuaWZNb2RpZmllZCYmKHgubGFzdE1vZGlmaWVkW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIix4Lmxhc3RNb2RpZmllZFtyXSkseC5ldGFnW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLHguZXRhZ1tyXSkpLChjLmRhdGEmJmMuaGFzQ29udGVudCYmYy5jb250ZW50VHlwZSE9PSExfHx0LmNvbnRlbnRUeXBlKSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLGMuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixjLmRhdGFUeXBlc1swXSYmYy5hY2NlcHRzW2MuZGF0YVR5cGVzWzBdXT9jLmFjY2VwdHNbYy5kYXRhVHlwZXNbMF1dKygiKiIhPT1jLmRhdGFUeXBlc1swXT8iLCAiK29uKyI7IHE9MC4wMSI6IiIpOmMuYWNjZXB0c1siKiJdKTtmb3IobCBpbiBjLmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGwsYy5oZWFkZXJzW2xdKTtpZihjLmJlZm9yZVNlbmQmJihjLmJlZm9yZVNlbmQuY2FsbChmLFQsYyk9PT0hMXx8Mj09PXYpKXJldHVybiBULmFib3J0KCk7Yj0iYWJvcnQiO2ZvcihsIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KVRbbF0oY1tsXSk7aWYobj11bihybixjLHQsVCkpe1QucmVhZHlTdGF0ZT0xLHUmJnAudHJpZ2dlcigiYWpheFNlbmQiLFtULGNdKSxjLmFzeW5jJiZjLnRpbWVvdXQ+MCYmKHM9c2V0VGltZW91dChmdW5jdGlvbigpe1QuYWJvcnQoInRpbWVvdXQiKX0sYy50aW1lb3V0KSk7dHJ5e3Y9MSxuLnNlbmQobSxrKX1jYXRjaChDKXtpZighKDI+dikpdGhyb3cgQztrKC0xLEMpfX1lbHNlIGsoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGsoZSx0LG8sYSl7dmFyIGwsbSx5LGIsdyxDPXQ7MiE9PXYmJih2PTIscyYmY2xlYXJUaW1lb3V0KHMpLG49dW5kZWZpbmVkLGk9YXx8IiIsVC5yZWFkeVN0YXRlPWU+MD80OjAsbD1lPj0yMDAmJjMwMD5lfHwzMDQ9PT1lLG8mJihiPWNuKGMsVCxvKSksYj1mbihjLGIsVCxsKSxsPyhjLmlmTW9kaWZpZWQmJih3PVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSx3JiYoeC5sYXN0TW9kaWZpZWRbcl09dyksdz1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksdyYmKHguZXRhZ1tyXT13KSksMjA0PT09ZT9DPSJub2NvbnRlbnQiOjMwND09PWU/Qz0ibm90bW9kaWZpZWQiOihDPWIuc3RhdGUsbT1iLmRhdGEseT1iLmVycm9yLGw9IXkpKTooeT1DLChlfHwhQykmJihDPSJlcnJvciIsMD5lJiYoZT0wKSkpLFQuc3RhdHVzPWUsVC5zdGF0dXNUZXh0PSh0fHxDKSsiIixsP2gucmVzb2x2ZVdpdGgoZixbbSxDLFRdKTpoLnJlamVjdFdpdGgoZixbVCxDLHldKSxULnN0YXR1c0NvZGUoZyksZz11bmRlZmluZWQsdSYmcC50cmlnZ2VyKGw/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbVCxjLGw/bTp5XSksZC5maXJlV2l0aChmLFtULENdKSx1JiYocC50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFtULGNdKSwtLXguYWN0aXZlfHx4LmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gVH0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmdldChlLHVuZGVmaW5lZCx0LCJzY3JpcHQiKX19KSx4LmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oZSx0KXt4W3RdPWZ1bmN0aW9uKGUsbixyLGkpe3JldHVybiB4LmlzRnVuY3Rpb24obikmJihpPWl8fHIscj1uLG49dW5kZWZpbmVkKSx4LmFqYXgoe3VybDplLHR5cGU6dCxkYXRhVHlwZTppLGRhdGE6bixzdWNjZXNzOnJ9KX19KTtmdW5jdGlvbiBjbihlLHQsbil7dmFyIHIsaSxvLHMsYT1lLmNvbnRlbnRzLHU9ZS5kYXRhVHlwZXM7d2hpbGUoIioiPT09dVswXSl1LnNoaWZ0KCkscj09PXVuZGVmaW5lZCYmKHI9ZS5taW1lVHlwZXx8dC5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1UeXBlIikpO2lmKHIpZm9yKGkgaW4gYSlpZihhW2ldJiZhW2ldLnRlc3Qocikpe3UudW5zaGlmdChpKTticmVha31pZih1WzBdaW4gbilvPXVbMF07ZWxzZXtmb3IoaSBpbiBuKXtpZighdVswXXx8ZS5jb252ZXJ0ZXJzW2krIiAiK3VbMF1dKXtvPWk7YnJlYWt9c3x8KHM9aSl9bz1vfHxzfXJldHVybiBvPyhvIT09dVswXSYmdS51bnNoaWZ0KG8pLG5bb10pOnVuZGVmaW5lZH1mdW5jdGlvbiBmbihlLHQsbixyKXt2YXIgaSxvLHMsYSx1LGw9e30sYz1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGNbMV0pZm9yKHMgaW4gZS5jb252ZXJ0ZXJzKWxbcy50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbc107bz1jLnNoaWZ0KCk7d2hpbGUobylpZihlLnJlc3BvbnNlRmllbGRzW29dJiYobltlLnJlc3BvbnNlRmllbGRzW29dXT10KSwhdSYmciYmZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdT1vLG89Yy5zaGlmdCgpKWlmKCIqIj09PW8pbz11O2Vsc2UgaWYoIioiIT09dSYmdSE9PW8pe2lmKHM9bFt1KyIgIitvXXx8bFsiKiAiK29dLCFzKWZvcihpIGluIGwpaWYoYT1pLnNwbGl0KCIgIiksYVsxXT09PW8mJihzPWxbdSsiICIrYVswXV18fGxbIiogIithWzBdXSkpe3M9PT0hMD9zPWxbaV06bFtpXSE9PSEwJiYobz1hWzBdLGMudW5zaGlmdChhWzFdKSk7YnJlYWt9aWYocyE9PSEwKWlmKHMmJmVbInRocm93cyJdKXQ9cyh0KTtlbHNlIHRyeXt0PXModCl9Y2F0Y2goZil7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6cz9mOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitvfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnR9fXguYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0In0sY29udGVudHM6e3NjcmlwdDovKD86amF2YXxlY21hKXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZ2xvYmFsRXZhbChlKSxlfX19KSx4LmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oZSl7ZS5jYWNoZT09PXVuZGVmaW5lZCYmKGUuY2FjaGU9ITEpLGUuY3Jvc3NEb21haW4mJihlLnR5cGU9IkdFVCIpfSkseC5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKGUpe2lmKGUuY3Jvc3NEb21haW4pe3ZhciB0LG47cmV0dXJue3NlbmQ6ZnVuY3Rpb24ocixpKXt0PXgoIjxzY3JpcHQ+IikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDplLnNjcmlwdENoYXJzZXQsc3JjOmUudXJsfSkub24oImxvYWQgZXJyb3IiLG49ZnVuY3Rpb24oZSl7dC5yZW1vdmUoKSxuPW51bGwsZSYmaSgiZXJyb3IiPT09ZS50eXBlPzQwNDoyMDAsZS50eXBlKX0pLG8uaGVhZC5hcHBlbmRDaGlsZCh0WzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuKCl9fX19KTt2YXIgcG49W10saG49Lyg9KVw/KD89JnwkKXxcP1w/Lzt4LmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9cG4ucG9wKCl8fHguZXhwYW5kbysiXyIrVXQrKztyZXR1cm4gdGhpc1tlXT0hMCxlfX0pLHguYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24odCxuLHIpe3ZhciBpLG8scyxhPXQuanNvbnAhPT0hMSYmKGhuLnRlc3QodC51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgdC5kYXRhJiYhKHQuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmaG4udGVzdCh0LmRhdGEpJiYiZGF0YSIpO3JldHVybiBhfHwianNvbnAiPT09dC5kYXRhVHlwZXNbMF0/KGk9dC5qc29ucENhbGxiYWNrPXguaXNGdW5jdGlvbih0Lmpzb25wQ2FsbGJhY2spP3QuanNvbnBDYWxsYmFjaygpOnQuanNvbnBDYWxsYmFjayxhP3RbYV09dFthXS5yZXBsYWNlKGhuLCIkMSIraSk6dC5qc29ucCE9PSExJiYodC51cmwrPShZdC50ZXN0KHQudXJsKT8iJiI6Ij8iKSt0Lmpzb25wKyI9IitpKSx0LmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtyZXR1cm4gc3x8eC5lcnJvcihpKyIgd2FzIG5vdCBjYWxsZWQiKSxzWzBdfSx0LmRhdGFUeXBlc1swXT0ianNvbiIsbz1lW2ldLGVbaV09ZnVuY3Rpb24oKXtzPWFyZ3VtZW50c30sci5hbHdheXMoZnVuY3Rpb24oKXtlW2ldPW8sdFtpXSYmKHQuanNvbnBDYWxsYmFjaz1uLmpzb25wQ2FsbGJhY2sscG4ucHVzaChpKSkscyYmeC5pc0Z1bmN0aW9uKG8pJiZvKHNbMF0pLHM9bz11bmRlZmluZWR9KSwic2NyaXB0Iik6dW5kZWZpbmVkfSkseC5hamF4U2V0dGluZ3MueGhyPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9Y2F0Y2goZSl7fX07dmFyIGRuPXguYWpheFNldHRpbmdzLnhocigpLGduPXswOjIwMCwxMjIzOjIwNH0sbW49MCx5bj17fTtlLkFjdGl2ZVhPYmplY3QmJngoZSkub24oInVubG9hZCIsZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4geW4peW5bZV0oKTt5bj11bmRlZmluZWR9KSx4LnN1cHBvcnQuY29ycz0hIWRuJiYid2l0aENyZWRlbnRpYWxzImluIGRuLHguc3VwcG9ydC5hamF4PWRuPSEhZG4seC5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB4LnN1cHBvcnQuY29yc3x8ZG4mJiFlLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKG4scil7dmFyIGksbyxzPWUueGhyKCk7aWYocy5vcGVuKGUudHlwZSxlLnVybCxlLmFzeW5jLGUudXNlcm5hbWUsZS5wYXNzd29yZCksZS54aHJGaWVsZHMpZm9yKGkgaW4gZS54aHJGaWVsZHMpc1tpXT1lLnhockZpZWxkc1tpXTtlLm1pbWVUeXBlJiZzLm92ZXJyaWRlTWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZShlLm1pbWVUeXBlKSxlLmNyb3NzRG9tYWlufHxuWyJYLVJlcXVlc3RlZC1XaXRoIl18fChuWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0Iik7Zm9yKGkgaW4gbilzLnNldFJlcXVlc3RIZWFkZXIoaSxuW2ldKTt0PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3QmJihkZWxldGUgeW5bb10sdD1zLm9ubG9hZD1zLm9uZXJyb3I9bnVsbCwiYWJvcnQiPT09ZT9zLmFib3J0KCk6ImVycm9yIj09PWU/cihzLnN0YXR1c3x8NDA0LHMuc3RhdHVzVGV4dCk6cihnbltzLnN0YXR1c118fHMuc3RhdHVzLHMuc3RhdHVzVGV4dCwic3RyaW5nIj09dHlwZW9mIHMucmVzcG9uc2VUZXh0P3t0ZXh0OnMucmVzcG9uc2VUZXh0fTp1bmRlZmluZWQscy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0scy5vbmxvYWQ9dCgpLHMub25lcnJvcj10KCJlcnJvciIpLHQ9eW5bbz1tbisrXT10KCJhYm9ydCIpLHMuc2VuZChlLmhhc0NvbnRlbnQmJmUuZGF0YXx8bnVsbCl9LGFib3J0OmZ1bmN0aW9uKCl7dCYmdCgpfX06dW5kZWZpbmVkfSk7dmFyIHZuLHhuLGJuPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyx3bj1SZWdFeHAoIl4oPzooWystXSk9fCkoIitiKyIpKFthLXolXSopJCIsImkiKSxUbj0vcXVldWVIb29rcyQvLENuPVtEbl0sa249eyIqIjpbZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk9dGhpcy5jcmVhdGVUd2VlbihlLHQpLG89d24uZXhlYyh0KSxzPWkuY3VyKCksYT0rc3x8MCx1PTEsbD0yMDtpZihvKXtpZihuPStvWzJdLHI9b1szXXx8KHguY3NzTnVtYmVyW2VdPyIiOiJweCIpLCJweCIhPT1yJiZhKXthPXguY3NzKGkuZWxlbSxlLCEwKXx8bnx8MTtkbyB1PXV8fCIuNSIsYS89dSx4LnN0eWxlKGkuZWxlbSxlLGErcik7d2hpbGUodSE9PSh1PWkuY3VyKCkvcykmJjEhPT11JiYtLWwpfWkudW5pdD1yLGkuc3RhcnQ9YSxpLmVuZD1vWzFdP2ErKG9bMV0rMSkqbjpufXJldHVybiBpfV19O2Z1bmN0aW9uIE5uKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2bj11bmRlZmluZWR9KSx2bj14Lm5vdygpfWZ1bmN0aW9uIEVuKGUsdCl7eC5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj0oa25bdF18fFtdKS5jb25jYXQoa25bIioiXSksaT0wLG89ci5sZW5ndGg7Zm9yKDtvPmk7aSsrKWlmKHJbaV0uY2FsbChlLHQsbikpcmV0dXJufSl9ZnVuY3Rpb24gU24oZSx0LG4pe3ZhciByLGksbz0wLHM9Q24ubGVuZ3RoLGE9eC5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4hMTt2YXIgdD12bnx8Tm4oKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPW4vbC5kdXJhdGlvbnx8MCxvPTEtcixzPTAsdT1sLnR3ZWVucy5sZW5ndGg7Zm9yKDt1PnM7cysrKWwudHdlZW5zW3NdLnJ1bihvKTtyZXR1cm4gYS5ub3RpZnlXaXRoKGUsW2wsbyxuXSksMT5vJiZ1P246KGEucmVzb2x2ZVdpdGgoZSxbbF0pLCExKX0sbD1hLnByb21pc2Uoe2VsZW06ZSxwcm9wczp4LmV4dGVuZCh7fSx0KSxvcHRzOnguZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6dm58fE5uKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj14LlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO3I+bjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0P2EucmVzb2x2ZVdpdGgoZSxbbCx0XSk6YS5yZWplY3RXaXRoKGUsW2wsdF0pLHRoaXN9fSksYz1sLnByb3BzO2ZvcihqbihjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtzPm87bysrKWlmKHI9Q25bb10uY2FsbChsLGUsYyxsLm9wdHMpKXJldHVybiByO3JldHVybiBFbihsLGMpLHguaXNGdW5jdGlvbihsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChlLGwpLHguZngudGltZXIoeC5leHRlbmQodSx7ZWxlbTplLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gam4oZSx0KXt2YXIgbixyLGksbyxzO2ZvcihuIGluIGUpaWYocj14LmNhbWVsQ2FzZShuKSxpPXRbcl0sbz1lW25dLHguaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLHM9eC5jc3NIb29rc1tyXSxzJiYiZXhwYW5kImluIHMpe289cy5leHBhbmQobyksZGVsZXRlIGVbcl07Zm9yKG4gaW4gbyluIGluIGV8fChlW25dPW9bbl0sdFtuXT1pKX1lbHNlIHRbcl09aX14LkFuaW1hdGlvbj14LmV4dGVuZChTbix7dHdlZW5lcjpmdW5jdGlvbihlLHQpe3guaXNGdW5jdGlvbihlKT8odD1lLGU9WyIqIl0pOmU9ZS5zcGxpdCgiICIpO3ZhciBuLHI9MCxpPWUubGVuZ3RoO2Zvcig7aT5yO3IrKyluPWVbcl0sa25bbl09a25bbl18fFtdLGtuW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/Q24udW5zaGlmdChlKTpDbi5wdXNoKGUpfX0pO2Z1bmN0aW9uIERuKGUsdCxuKXt2YXIgcixpLG8scyxhLHUsbCxjLGYscD10aGlzLGg9ZS5zdHlsZSxkPXt9LGc9W10sbT1lLm5vZGVUeXBlJiZBdChlKTtuLnF1ZXVlfHwoYz14Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09Yy51bnF1ZXVlZCYmKGMudW5xdWV1ZWQ9MCxmPWMuZW1wdHkuZmlyZSxjLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtjLnVucXVldWVkfHxmKCl9KSxjLnVucXVldWVkKysscC5hbHdheXMoZnVuY3Rpb24oKXtwLmFsd2F5cyhmdW5jdGlvbigpe2MudW5xdWV1ZWQtLSx4LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxjLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1lLm5vZGVUeXBlJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtoLm92ZXJmbG93LGgub3ZlcmZsb3dYLGgub3ZlcmZsb3dZXSwiaW5saW5lIj09PXguY3NzKGUsImRpc3BsYXkiKSYmIm5vbmUiPT09eC5jc3MoZSwiZmxvYXQiKSYmKGguZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihoLm92ZXJmbG93PSJoaWRkZW4iLHAuYWx3YXlzKGZ1bmN0aW9uKCl7aC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGgub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0saC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKSxhPXEuZ2V0KGUsImZ4c2hvdyIpO2ZvcihyIGluIHQpaWYobz10W3JdLGJuLmV4ZWMobykpe2lmKGRlbGV0ZSB0W3JdLHU9dXx8InRvZ2dsZSI9PT1vLG89PT0obT8iaGlkZSI6InNob3ciKSl7aWYoInNob3ciIT09b3x8YT09PXVuZGVmaW5lZHx8YVtyXT09PXVuZGVmaW5lZCljb250aW51ZTttPSEwfWcucHVzaChyKX1pZihzPWcubGVuZ3RoKXthPXEuZ2V0KGUsImZ4c2hvdyIpfHxxLmFjY2VzcyhlLCJmeHNob3ciLHt9KSwiaGlkZGVuImluIGEmJihtPWEuaGlkZGVuKSx1JiYoYS5oaWRkZW49IW0pLG0/eChlKS5zaG93KCk6cC5kb25lKGZ1bmN0aW9uKCl7eChlKS5oaWRlKCl9KSxwLmRvbmUoZnVuY3Rpb24oKXt2YXIgdDtxLnJlbW92ZShlLCJmeHNob3ciKTtmb3IodCBpbiBkKXguc3R5bGUoZSx0LGRbdF0pfSk7Zm9yKHI9MDtzPnI7cisrKWk9Z1tyXSxsPXAuY3JlYXRlVHdlZW4oaSxtP2FbaV06MCksZFtpXT1hW2ldfHx4LnN0eWxlKGUsaSksaSBpbiBhfHwoYVtpXT1sLnN0YXJ0LG0mJihsLmVuZD1sLnN0YXJ0LGwuc3RhcnQ9IndpZHRoIj09PWl8fCJoZWlnaHQiPT09aT8xOjApKX19ZnVuY3Rpb24gQW4oZSx0LG4scixpKXtyZXR1cm4gbmV3IEFuLnByb3RvdHlwZS5pbml0KGUsdCxuLHIsaSl9eC5Ud2Vlbj1BbixBbi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkFuLGluaXQ6ZnVuY3Rpb24oZSx0LG4scixpLG8pe3RoaXMuZWxlbT1lLHRoaXMucHJvcD1uLHRoaXMuZWFzaW5nPWl8fCJzd2luZyIsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fCh4LmNzc051bWJlcltuXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGU9QW4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOkFuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPUFuLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLnBvcz10PXRoaXMub3B0aW9ucy5kdXJhdGlvbj94LmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTplLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSp0K3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLG4mJm4uc2V0P24uc2V0KHRoaXMpOkFuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LEFuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1Bbi5wcm90b3R5cGUsQW4ucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBudWxsPT1lLmVsZW1bZS5wcm9wXXx8ZS5lbGVtLnN0eWxlJiZudWxsIT1lLmVsZW0uc3R5bGVbZS5wcm9wXT8odD14LmNzcyhlLmVsZW0sZS5wcm9wLCIiKSx0JiYiYXV0byIhPT10P3Q6MCk6ZS5lbGVtW2UucHJvcF19LHNldDpmdW5jdGlvbihlKXt4LmZ4LnN0ZXBbZS5wcm9wXT94LmZ4LnN0ZXBbZS5wcm9wXShlKTplLmVsZW0uc3R5bGUmJihudWxsIT1lLmVsZW0uc3R5bGVbeC5jc3NQcm9wc1tlLnByb3BdXXx8eC5jc3NIb29rc1tlLnByb3BdKT94LnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KTplLmVsZW1bZS5wcm9wXT1lLm5vd319fSxBbi5wcm9wSG9va3Muc2Nyb2xsVG9wPUFuLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LHguZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSx0KXt2YXIgbj14LmZuW3RdO3guZm5bdF09ZnVuY3Rpb24oZSxyLGkpe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShMbih0LCEwKSxlLHIsaSl9fSkseC5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoQXQpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXguaXNFbXB0eU9iamVjdChlKSxvPXguc3BlZWQodCxuLHIpLHM9ZnVuY3Rpb24oKXt2YXIgdD1Tbih0aGlzLHguZXh0ZW5kKHt9LGUpLG8pO3MuZmluaXNoPWZ1bmN0aW9uKCl7dC5zdG9wKCEwKX0sKGl8fHEuZ2V0KHRoaXMsImZpbmlzaCIpKSYmdC5zdG9wKCEwKX07cmV0dXJuIHMuZmluaXNoPXMsaXx8by5xdWV1ZT09PSExP3RoaXMuZWFjaChzKTp0aGlzLnF1ZXVlKG8ucXVldWUscyl9LHN0b3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQobil9O3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKG49dCx0PWUsZT11bmRlZmluZWQpLHQmJmUhPT0hMSYmdGhpcy5xdWV1ZShlfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxpPW51bGwhPWUmJmUrInF1ZXVlSG9va3MiLG89eC50aW1lcnMscz1xLmdldCh0aGlzKTtpZihpKXNbaV0mJnNbaV0uc3RvcCYmcihzW2ldKTtlbHNlIGZvcihpIGluIHMpc1tpXSYmc1tpXS5zdG9wJiZUbi50ZXN0KGkpJiZyKHNbaV0pO2ZvcihpPW8ubGVuZ3RoO2ktLTspb1tpXS5lbGVtIT09dGhpc3x8bnVsbCE9ZSYmb1tpXS5xdWV1ZSE9PWV8fChvW2ldLmFuaW0uc3RvcChuKSx0PSExLG8uc3BsaWNlKGksMSkpOyh0fHwhbikmJnguZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiYoZT1lfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPXEuZ2V0KHRoaXMpLHI9bltlKyJxdWV1ZSJdLGk9bltlKyJxdWV1ZUhvb2tzIl0sbz14LnRpbWVycyxzPXI/ci5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAseC5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuY3VyJiZpLmN1ci5maW5pc2gmJmkuY3VyLmZpbmlzaC5jYWxsKHRoaXMpLHQ9by5sZW5ndGg7dC0tOylvW3RdLmVsZW09PT10aGlzJiZvW3RdLnF1ZXVlPT09ZSYmKG9bdF0uYW5pbS5zdG9wKCEwKSxvLnNwbGljZSh0LDEpKTtmb3IodD0wO3M+dDt0Kyspclt0XSYmclt0XS5maW5pc2gmJnJbdF0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIG4uZmluaXNofSl9fSk7ZnVuY3Rpb24gTG4oZSx0KXt2YXIgbixyPXtoZWlnaHQ6ZX0saT0wO2Zvcih0PXQ/MTowOzQ+aTtpKz0yLXQpbj1TdFtpXSxyWyJtYXJnaW4iK25dPXJbInBhZGRpbmciK25dPWU7cmV0dXJuIHQmJihyLm9wYWNpdHk9ci53aWR0aD1lKSxyfXguZWFjaCh7c2xpZGVEb3duOkxuKCJzaG93Iiksc2xpZGVVcDpMbigiaGlkZSIpLHNsaWRlVG9nZ2xlOkxuKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihlLG4scil7cmV0dXJuIHRoaXMuYW5pbWF0ZSh0LGUsbixyKX19KSx4LnNwZWVkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lJiYib2JqZWN0Ij09dHlwZW9mIGU/eC5leHRlbmQoe30sZSk6e2NvbXBsZXRlOm58fCFuJiZ0fHx4LmlzRnVuY3Rpb24oZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIXguaXNGdW5jdGlvbih0KSYmdH07cmV0dXJuIHIuZHVyYXRpb249eC5meC5vZmY/MDoibnVtYmVyIj09dHlwZW9mIHIuZHVyYXRpb24/ci5kdXJhdGlvbjpyLmR1cmF0aW9uIGluIHguZnguc3BlZWRzP3guZnguc3BlZWRzW3IuZHVyYXRpb25dOnguZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1yLnF1ZXVlfHxyLnF1ZXVlPT09ITApJiYoci5xdWV1ZT0iZngiKSxyLm9sZD1yLmNvbXBsZXRlLHIuY29tcGxldGU9ZnVuY3Rpb24oKXt4LmlzRnVuY3Rpb24oci5vbGQpJiZyLm9sZC5jYWxsKHRoaXMpLHIucXVldWUmJnguZGVxdWV1ZSh0aGlzLHIucXVldWUpfSxyfSx4LmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxzd2luZzpmdW5jdGlvbihlKXtyZXR1cm4uNS1NYXRoLmNvcyhlKk1hdGguUEkpLzJ9fSx4LnRpbWVycz1bXSx4LmZ4PUFuLnByb3RvdHlwZS5pbml0LHguZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9eC50aW1lcnMsbj0wO2Zvcih2bj14Lm5vdygpO3QubGVuZ3RoPm47bisrKWU9dFtuXSxlKCl8fHRbbl0hPT1lfHx0LnNwbGljZShuLS0sMSk7dC5sZW5ndGh8fHguZnguc3RvcCgpLHZuPXVuZGVmaW5lZH0seC5meC50aW1lcj1mdW5jdGlvbihlKXtlKCkmJngudGltZXJzLnB1c2goZSkmJnguZnguc3RhcnQoKX0seC5meC5pbnRlcnZhbD0xMyx4LmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7eG58fCh4bj1zZXRJbnRlcnZhbCh4LmZ4LnRpY2sseC5meC5pbnRlcnZhbCkpfSx4LmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHhuKSx4bj1udWxsfSx4LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSx4LmZ4LnN0ZXA9e30seC5leHByJiZ4LmV4cHIuZmlsdGVycyYmKHguZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB4LmdyZXAoeC50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9KSx4LmZuLm9mZnNldD1mdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBlPT09dW5kZWZpbmVkP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3gub2Zmc2V0LnNldE9mZnNldCh0aGlzLGUsdCl9KTt2YXIgdCxuLGk9dGhpc1swXSxvPXt0b3A6MCxsZWZ0OjB9LHM9aSYmaS5vd25lckRvY3VtZW50O2lmKHMpcmV0dXJuIHQ9cy5kb2N1bWVudEVsZW1lbnQseC5jb250YWlucyh0LGkpPyh0eXBlb2YgaS5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1yJiYobz1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxuPXFuKHMpLHt0b3A6by50b3Arbi5wYWdlWU9mZnNldC10LmNsaWVudFRvcCxsZWZ0Om8ubGVmdCtuLnBhZ2VYT2Zmc2V0LXQuY2xpZW50TGVmdH0pOm99LHgub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxzLGEsdSxsLGM9eC5jc3MoZSwicG9zaXRpb24iKSxmPXgoZSkscD17fTsic3RhdGljIj09PWMmJihlLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpLGE9Zi5vZmZzZXQoKSxvPXguY3NzKGUsInRvcCIpLHU9eC5jc3MoZSwibGVmdCIpLGw9KCJhYnNvbHV0ZSI9PT1jfHwiZml4ZWQiPT09YykmJihvK3UpLmluZGV4T2YoImF1dG8iKT4tMSxsPyhyPWYucG9zaXRpb24oKSxzPXIudG9wLGk9ci5sZWZ0KToocz1wYXJzZUZsb2F0KG8pfHwwLGk9cGFyc2VGbG9hdCh1KXx8MCkseC5pc0Z1bmN0aW9uKHQpJiYodD10LmNhbGwoZSxuLGEpKSxudWxsIT10LnRvcCYmKHAudG9wPXQudG9wLWEudG9wK3MpLG51bGwhPXQubGVmdCYmKHAubGVmdD10LmxlZnQtYS5sZWZ0K2kpLCJ1c2luZyJpbiB0P3QudXNpbmcuY2FsbChlLHApOmYuY3NzKHApfX0seC5mbi5leHRlbmQoe3Bvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGUsdCxuPXRoaXNbMF0scj17dG9wOjAsbGVmdDowfTtyZXR1cm4iZml4ZWQiPT09eC5jc3MobiwicG9zaXRpb24iKT90PW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGU9dGhpcy5vZmZzZXRQYXJlbnQoKSx0PXRoaXMub2Zmc2V0KCkseC5ub2RlTmFtZShlWzBdLCJodG1sIil8fChyPWUub2Zmc2V0KCkpLHIudG9wKz14LmNzcyhlWzBdLCJib3JkZXJUb3BXaWR0aCIsITApLHIubGVmdCs9eC5jc3MoZVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6dC50b3Atci50b3AteC5jc3MobiwibWFyZ2luVG9wIiwhMCksbGVmdDp0LmxlZnQtci5sZWZ0LXguY3NzKG4sIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9mZnNldFBhcmVudHx8czt3aGlsZShlJiYheC5ub2RlTmFtZShlLCJodG1sIikmJiJzdGF0aWMiPT09eC5jc3MoZSwicG9zaXRpb24iKSllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxzfSl9fSkseC5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKHQsbil7dmFyIHI9InBhZ2VZT2Zmc2V0Ij09PW47eC5mblt0XT1mdW5jdGlvbihpKXtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbih0LGksbyl7dmFyIHM9cW4odCk7cmV0dXJuIG89PT11bmRlZmluZWQ/cz9zW25dOnRbaV06KHM/cy5zY3JvbGxUbyhyP2UucGFnZVhPZmZzZXQ6byxyP286ZS5wYWdlWU9mZnNldCk6dFtpXT1vLHVuZGVmaW5lZCl9LHQsaSxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pO2Z1bmN0aW9uIHFuKGUpe3JldHVybiB4LmlzV2luZG93KGUpP2U6OT09PWUubm9kZVR5cGUmJmUuZGVmYXVsdFZpZXd9eC5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oZSx0KXt4LmVhY2goe3BhZGRpbmc6ImlubmVyIitlLGNvbnRlbnQ6dCwiIjoib3V0ZXIiK2V9LGZ1bmN0aW9uKG4scil7eC5mbltyXT1mdW5jdGlvbihyLGkpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGgmJihufHwiYm9vbGVhbiIhPXR5cGVvZiByKSxzPW58fChyPT09ITB8fGk9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24odCxuLHIpe3ZhciBpO3JldHVybiB4LmlzV2luZG93KHQpP3QuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2VdOjk9PT10Lm5vZGVUeXBlPyhpPXQuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KHQuYm9keVsic2Nyb2xsIitlXSxpWyJzY3JvbGwiK2VdLHQuYm9keVsib2Zmc2V0IitlXSxpWyJvZmZzZXQiK2VdLGlbImNsaWVudCIrZV0pKTpyPT09dW5kZWZpbmVkP3guY3NzKHQsbixzKTp4LnN0eWxlKHQsbixyLHMpfSx0LG8/cjp1bmRlZmluZWQsbyxudWxsKX19KX0pLHguZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0seC5mbi5hbmRTZWxmPXguZm4uYWRkQmFjaywib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz14OiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZSgianF1ZXJ5IixbXSxmdW5jdGlvbigpe3JldHVybiB4fSksIm9iamVjdCI9PXR5cGVvZiBlJiYib2JqZWN0Ij09dHlwZW9mIGUuZG9jdW1lbnQmJihlLmpRdWVyeT1lLiQ9eCl9KSh3aW5kb3cpOw=="}]},{"name":"B站视频解析下载","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["https://www.bilibili.com/video/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1594700697159,"data":{}},"enabled":true,"position":8,"uuid":"983bfc55-9274-49d1-a90a-427b25304d73","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBC56uZ6KeG6aKR6Kej5p6Q5LiL6L29Ci8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly94YmVpYmVpeC5jb20vYXBpL2JpbGliaWxpCi8vIEB2ZXJzaW9uICAgICAgMS4wCi8vIEBkZXNjcmlwdGlvbiAg5b+r6YCf6Kej5p6QQuermeinhumike+8jOS4i+i9vULnq5nop4bpopHjgIIKLy8gQGF1dGhvciAgICAgICB4YmVpYmVpeC5jb20KLy8gQG1hdGNoICAgICAgICBodHRwczovL3d3dy5iaWxpYmlsaS5jb20vdmlkZW8vKgovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gQHJlcXVpcmUgICAgICBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2pxdWVyeUAzLjUuMS9kaXN0L2pxdWVyeS5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKXskKCJib2R5IikuYXBwZW5kKCIgPGRpdiBpZD0nbG9hZGluZycgc3R5bGU9J2xlZnQ6IDEwcHg7Ym90dG9tOiAxMHB4O2JhY2tncm91bmQ6ICMwMEExRDY7Y29sb3I6I2ZmZmZmZjtvdmVyZmxvdzogaGlkZGVuO3otaW5kZXg6IDk5OTk7cG9zaXRpb246IGZpeGVkO3BhZGRpbmc6NXB4O3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOiAxNzVweDtoZWlnaHQ6IDE1cHg7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogNHB4O2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA0cHg7Jz7ohJrmnKzliqDovb3kuK0uLi48L2Rpdj4iKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JCgiI2xvYWRpbmciKS5yZW1vdmUoKTskKCIjYXJjX3Rvb2xiYXJfcmVwb3J0IikuYXBwZW5kKCc8ZGl2IGNsYXNzPSJib3R0b20tcGFnZSBwYWdpbmctYm94LWJpZyI+PHNwYW4gY2xhc3M9ImN1cnJlbnQiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjMDBBMUQ2O2hlaWdodDogMjVweDsiIGlkPSJnbyI+6Kej5p6Q5pys6KeG6aKRPC9zcGFuPjwvZGl2PicpOyQoIiNnbyIpLmNsaWNrKGZ1bmN0aW9uKCl7dmFyIHBhdHQxPW5ldyBSZWdFeHAoIihCVnxhdilbYS16QS1aMC05XSoiKTt2YXIgYnZpZD1wYXR0MS5leGVjKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTt2YXIgdGVtcHdpbmRvdz13aW5kb3cub3BlbigiX2JsYW5rIik7dGVtcHdpbmRvdy5sb2NhdGlvbj0iaHR0cHM6Ly94YmVpYmVpeC5jb20vYXBpL2JpbGliaWxpLz9tb25rZXk9IitidmlkWzBdfSl9LDQwMDApfSkoKTs=","requires":[{"meta":{"name":"jquery.min.js","url":"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js","ts":1598437800442,"mimetype":"text/javascript"},"source":"LyohIGpRdWVyeSB2My41LjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovCiFmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0Ijsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lLmRvY3VtZW50P3QoZSwhMCk6ZnVuY3Rpb24oZSl7aWYoIWUuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7cmV0dXJuIHQoZSl9OnQoZSl9KCJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzLGZ1bmN0aW9uKEMsZSl7InVzZSBzdHJpY3QiO3ZhciB0PVtdLHI9T2JqZWN0LmdldFByb3RvdHlwZU9mLHM9dC5zbGljZSxnPXQuZmxhdD9mdW5jdGlvbihlKXtyZXR1cm4gdC5mbGF0LmNhbGwoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiB0LmNvbmNhdC5hcHBseShbXSxlKX0sdT10LnB1c2gsaT10LmluZGV4T2Ysbj17fSxvPW4udG9TdHJpbmcsdj1uLmhhc093blByb3BlcnR5LGE9di50b1N0cmluZyxsPWEuY2FsbChPYmplY3QpLHk9e30sbT1mdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmIm51bWJlciIhPXR5cGVvZiBlLm5vZGVUeXBlfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT09ZS53aW5kb3d9LEU9Qy5kb2N1bWVudCxjPXt0eXBlOiEwLHNyYzohMCxub25jZTohMCxub01vZHVsZTohMH07ZnVuY3Rpb24gYihlLHQsbil7dmFyIHIsaSxvPShuPW58fEUpLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2lmKG8udGV4dD1lLHQpZm9yKHIgaW4gYykoaT10W3JdfHx0LmdldEF0dHJpYnV0ZSYmdC5nZXRBdHRyaWJ1dGUocikpJiZvLnNldEF0dHJpYnV0ZShyLGkpO24uaGVhZC5hcHBlbmRDaGlsZChvKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIG51bGw9PWU/ZSsiIjoib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlP25bby5jYWxsKGUpXXx8Im9iamVjdCI6dHlwZW9mIGV9dmFyIGY9IjMuNS4xIixTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBTLmZuLmluaXQoZSx0KX07ZnVuY3Rpb24gcChlKXt2YXIgdD0hIWUmJiJsZW5ndGgiaW4gZSYmZS5sZW5ndGgsbj13KGUpO3JldHVybiFtKGUpJiYheChlKSYmKCJhcnJheSI9PT1ufHwwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiYwPHQmJnQtMSBpbiBlKX1TLmZuPVMucHJvdG90eXBlPXtqcXVlcnk6Zixjb25zdHJ1Y3RvcjpTLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gcy5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/cy5jYWxsKHRoaXMpOmU8MD90aGlzW2UrdGhpcy5sZW5ndGhdOnRoaXNbZV19LHB1c2hTdGFjazpmdW5jdGlvbihlKXt2YXIgdD1TLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdH0sZWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gUy5lYWNoKHRoaXMsZSl9LG1hcDpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5tYXAodGhpcyxmdW5jdGlvbihlLHQpe3JldHVybiBuLmNhbGwoZSx0LGUpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGV2ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4odCsxKSUyfSkpfSxvZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soUy5ncmVwKHRoaXMsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCUyfSkpfSxlcTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCxuPStlKyhlPDA/dDowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soMDw9biYmbjx0P1t0aGlzW25dXTpbXSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKX0scHVzaDp1LHNvcnQ6dC5zb3J0LHNwbGljZTp0LnNwbGljZX0sUy5leHRlbmQ9Uy5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixpLG8sYT1hcmd1bWVudHNbMF18fHt9LHM9MSx1PWFyZ3VtZW50cy5sZW5ndGgsbD0hMTtmb3IoImJvb2xlYW4iPT10eXBlb2YgYSYmKGw9YSxhPWFyZ3VtZW50c1tzXXx8e30scysrKSwib2JqZWN0Ij09dHlwZW9mIGF8fG0oYSl8fChhPXt9KSxzPT09dSYmKGE9dGhpcyxzLS0pO3M8dTtzKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW3NdKSlmb3IodCBpbiBlKXI9ZVt0XSwiX19wcm90b19fIiE9PXQmJmEhPT1yJiYobCYmciYmKFMuaXNQbGFpbk9iamVjdChyKXx8KGk9QXJyYXkuaXNBcnJheShyKSkpPyhuPWFbdF0sbz1pJiYhQXJyYXkuaXNBcnJheShuKT9bXTppfHxTLmlzUGxhaW5PYmplY3Qobik/bjp7fSxpPSExLGFbdF09Uy5leHRlbmQobCxvLHIpKTp2b2lkIDAhPT1yJiYoYVt0XT1yKSk7cmV0dXJuIGF9LFMuZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhmK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLGlzUmVhZHk6ITAsZXJyb3I6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKGUpfSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuISghZXx8IltvYmplY3QgT2JqZWN0XSIhPT1vLmNhbGwoZSkpJiYoISh0PXIoZSkpfHwiZnVuY3Rpb24iPT10eXBlb2Yobj12LmNhbGwodCwiY29uc3RydWN0b3IiKSYmdC5jb25zdHJ1Y3RvcikmJmEuY2FsbChuKT09PWwpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oZSx0LG4pe2IoZSx7bm9uY2U6dCYmdC5ub25jZX0sbil9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYocChlKSl7Zm9yKG49ZS5sZW5ndGg7cjxuO3IrKylpZighMT09PXQuY2FsbChlW3JdLHIsZVtyXSkpYnJlYWt9ZWxzZSBmb3IociBpbiBlKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVhaztyZXR1cm4gZX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUmJihwKE9iamVjdChlKSk/Uy5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6dS5jYWxsKG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOmkuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxyPTAsaT1lLmxlbmd0aDtyPG47cisrKWVbaSsrXT10W3JdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPTAsbz1lLmxlbmd0aCxhPSFuO2k8bztpKyspIXQoZVtpXSxpKSE9PWEmJnIucHVzaChlW2ldKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89MCxhPVtdO2lmKHAoZSkpZm9yKHI9ZS5sZW5ndGg7bzxyO28rKyludWxsIT0oaT10KGVbb10sbyxuKSkmJmEucHVzaChpKTtlbHNlIGZvcihvIGluIGUpbnVsbCE9KGk9dChlW29dLG8sbikpJiZhLnB1c2goaSk7cmV0dXJuIGcoYSl9LGd1aWQ6MSxzdXBwb3J0Onl9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoUy5mbltTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSksUy5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe25bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIGQ9ZnVuY3Rpb24obil7dmFyIGUsZCxiLG8saSxoLGYsZyx3LHUsbCxULEMsYSxFLHYscyxjLHksUz0ic2l6emxlIisxKm5ldyBEYXRlLHA9bi5kb2N1bWVudCxrPTAscj0wLG09dWUoKSx4PXVlKCksQT11ZSgpLE49dWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYobD0hMCksMH0saj17fS5oYXNPd25Qcm9wZXJ0eSx0PVtdLHE9dC5wb3AsTD10LnB1c2gsSD10LnB1c2gsTz10LnNsaWNlLFA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFI9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixJPSIoPzpcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcW15cXHJcXG5cXGZdfFtcXHctXXxbXlwwLVxceDdmXSkrIixXPSJcXFsiK00rIiooIitJKyIpKD86IitNKyIqKFsqXiR8IX5dPz0pIitNKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIrSSsiKSl8KSIrTSsiKlxcXSIsRj0iOigiK0krIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK1crIikqKXwuKilcXCl8KSIsQj1uZXcgUmVnRXhwKE0rIisiLCJnIiksJD1uZXcgUmVnRXhwKCJeIitNKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiK00rIiskIiwiZyIpLF89bmV3IFJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSx6PW5ldyBSZWdFeHAoIl4iK00rIiooWz4rfl18IitNKyIpIitNKyIqIiksVT1uZXcgUmVnRXhwKE0rInw+IiksWD1uZXcgUmVnRXhwKEYpLFY9bmV3IFJlZ0V4cCgiXiIrSSsiJCIpLEc9e0lEOm5ldyBSZWdFeHAoIl4jKCIrSSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIitJKyIpIiksVEFHOm5ldyBSZWdFeHAoIl4oIitJKyJ8WypdKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrVyksUFNFVURPOm5ldyBSZWdFeHAoIl4iK0YpLENISUxEOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrTSsiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTSsiKig/OihbKy1dfCkiK00rIiooXFxkKyl8KSkiK00rIipcXCl8KSIsImkiKSxib29sOm5ldyBSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIitNKyIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK00rIiooKD86LVxcZCk/XFxkKikiK00rIipcXCl8KSg/PVteLV18JCkiLCJpIil9LFk9L0hUTUwkL2ksUT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLEo9L15oXGQkL2ksSz0vXltee10rXHtccypcW25hdGl2ZSBcdy8sWj0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLGVlPS9bK35dLyx0ZT1uZXcgUmVnRXhwKCJcXFxcW1xcZGEtZkEtRl17MSw2fSIrTSsiP3xcXFxcKFteXFxyXFxuXFxmXSkiLCJnIiksbmU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0iMHgiK2Uuc2xpY2UoMSktNjU1MzY7cmV0dXJuIHR8fChuPDA/U3RyaW5nLmZyb21DaGFyQ29kZShuKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKG4+PjEwfDU1Mjk2LDEwMjMmbnw1NjMyMCkpfSxyZT0vKFtcMC1ceDFmXHg3Zl18Xi0/XGQpfF4tJHxbXlwwLVx4MWZceDdmLVx1RkZGRlx3LV0vZyxpZT1mdW5jdGlvbihlLHQpe3JldHVybiB0PyJcMCI9PT1lPyJcdWZmZmQiOmUuc2xpY2UoMCwtMSkrIlxcIitlLmNoYXJDb2RlQXQoZS5sZW5ndGgtMSkudG9TdHJpbmcoMTYpKyIgIjoiXFwiK2V9LG9lPWZ1bmN0aW9uKCl7VCgpfSxhZT1iZShmdW5jdGlvbihlKXtyZXR1cm4hMD09PWUuZGlzYWJsZWQmJiJmaWVsZHNldCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9LHtkaXI6InBhcmVudE5vZGUiLG5leHQ6ImxlZ2VuZCJ9KTt0cnl7SC5hcHBseSh0PU8uY2FsbChwLmNoaWxkTm9kZXMpLHAuY2hpbGROb2RlcyksdFtwLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChlKXtIPXthcHBseTp0Lmxlbmd0aD9mdW5jdGlvbihlLHQpe0wuYXBwbHkoZSxPLmNhbGwodCkpfTpmdW5jdGlvbihlLHQpe3ZhciBuPWUubGVuZ3RoLHI9MDt3aGlsZShlW24rK109dFtyKytdKTtlLmxlbmd0aD1uLTF9fX1mdW5jdGlvbiBzZSh0LGUsbixyKXt2YXIgaSxvLGEscyx1LGwsYyxmPWUmJmUub3duZXJEb2N1bWVudCxwPWU/ZS5ub2RlVHlwZTo5O2lmKG49bnx8W10sInN0cmluZyIhPXR5cGVvZiB0fHwhdHx8MSE9PXAmJjkhPT1wJiYxMSE9PXApcmV0dXJuIG47aWYoIXImJihUKGUpLGU9ZXx8QyxFKSl7aWYoMTEhPT1wJiYodT1aLmV4ZWModCkpKWlmKGk9dVsxXSl7aWYoOT09PXApe2lmKCEoYT1lLmdldEVsZW1lbnRCeUlkKGkpKSlyZXR1cm4gbjtpZihhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZSBpZihmJiYoYT1mLmdldEVsZW1lbnRCeUlkKGkpKSYmeShlLGEpJiZhLmlkPT09aSlyZXR1cm4gbi5wdXNoKGEpLG59ZWxzZXtpZih1WzJdKXJldHVybiBILmFwcGx5KG4sZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0KSksbjtpZigoaT11WzNdKSYmZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpcmV0dXJuIEguYXBwbHkobixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaSkpLG59aWYoZC5xc2EmJiFOW3QrIiAiXSYmKCF2fHwhdi50ZXN0KHQpKSYmKDEhPT1wfHwib2JqZWN0IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpe2lmKGM9dCxmPWUsMT09PXAmJihVLnRlc3QodCl8fHoudGVzdCh0KSkpeyhmPWVlLnRlc3QodCkmJnllKGUucGFyZW50Tm9kZSl8fGUpPT09ZSYmZC5zY29wZXx8KChzPWUuZ2V0QXR0cmlidXRlKCJpZCIpKT9zPXMucmVwbGFjZShyZSxpZSk6ZS5zZXRBdHRyaWJ1dGUoImlkIixzPVMpKSxvPShsPWgodCkpLmxlbmd0aDt3aGlsZShvLS0pbFtvXT0ocz8iIyIrczoiOnNjb3BlIikrIiAiK3hlKGxbb10pO2M9bC5qb2luKCIsIil9dHJ5e3JldHVybiBILmFwcGx5KG4sZi5xdWVyeVNlbGVjdG9yQWxsKGMpKSxufWNhdGNoKGUpe04odCwhMCl9ZmluYWxseXtzPT09UyYmZS5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gZyh0LnJlcGxhY2UoJCwiJDEiKSxlLG4scil9ZnVuY3Rpb24gdWUoKXt2YXIgcj1bXTtyZXR1cm4gZnVuY3Rpb24gZSh0LG4pe3JldHVybiByLnB1c2godCsiICIpPmIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Iuc2hpZnQoKV0sZVt0KyIgIl09bn19ZnVuY3Rpb24gbGUoZSl7cmV0dXJuIGVbU109ITAsZX1mdW5jdGlvbiBjZShlKXt2YXIgdD1DLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChlKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gZmUoZSx0KXt2YXIgbj1lLnNwbGl0KCJ8Iikscj1uLmxlbmd0aDt3aGlsZShyLS0pYi5hdHRySGFuZGxlW25bcl1dPXR9ZnVuY3Rpb24gcGUoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGRlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnR5cGU9PT10fX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09dHx8ImJ1dHRvbiI9PT10KSYmZS50eXBlPT09bn19ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiJmb3JtImluIGU/ZS5wYXJlbnROb2RlJiYhMT09PWUuZGlzYWJsZWQ/ImxhYmVsImluIGU/ImxhYmVsImluIGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT10OmUuZGlzYWJsZWQ9PT10OmUuaXNEaXNhYmxlZD09PXR8fGUuaXNEaXNhYmxlZCE9PSF0JiZhZShlKT09PXQ6ZS5kaXNhYmxlZD09PXQ6ImxhYmVsImluIGUmJmUuZGlzYWJsZWQ9PT10fX1mdW5jdGlvbiB2ZShhKXtyZXR1cm4gbGUoZnVuY3Rpb24obyl7cmV0dXJuIG89K28sbGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoW10sZS5sZW5ndGgsbyksaT1yLmxlbmd0aDt3aGlsZShpLS0pZVtuPXJbaV1dJiYoZVtuXT0hKHRbbl09ZVtuXSkpfSl9KX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZlfWZvcihlIGluIGQ9c2Uuc3VwcG9ydD17fSxpPXNlLmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZXNwYWNlVVJJLG49KGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFZLnRlc3QodHx8biYmbi5ub2RlTmFtZXx8IkhUTUwiKX0sVD1zZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6cDtyZXR1cm4gciE9QyYmOT09PXIubm9kZVR5cGUmJnIuZG9jdW1lbnRFbGVtZW50JiYoYT0oQz1yKS5kb2N1bWVudEVsZW1lbnQsRT0haShDKSxwIT1DJiYobj1DLmRlZmF1bHRWaWV3KSYmbi50b3AhPT1uJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixvZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLG9lKSksZC5zY29wZT1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZChDLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwidW5kZWZpbmVkIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbCYmIWUucXVlcnlTZWxlY3RvckFsbCgiOnNjb3BlIGZpZWxkc2V0IGRpdiIpLmxlbmd0aH0pLGQuYXR0cmlidXRlcz1jZShmdW5jdGlvbihlKXtyZXR1cm4gZS5jbGFzc05hbWU9ImkiLCFlLmdldEF0dHJpYnV0ZSgiY2xhc3NOYW1lIil9KSxkLmdldEVsZW1lbnRzQnlUYWdOYW1lPWNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKEMuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPUsudGVzdChDLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpLGQuZ2V0QnlJZD1jZShmdW5jdGlvbihlKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlKS5pZD1TLCFDLmdldEVsZW1lbnRzQnlOYW1lfHwhQy5nZXRFbGVtZW50c0J5TmFtZShTKS5sZW5ndGh9KSxkLmdldEJ5SWQ/KGIuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSh0ZSxuZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgiaWQiKT09PXR9fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJkUpe3ZhciBuPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIG4/W25dOltdfX0pOihiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgbj1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgdD0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlTm9kZSYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiB0JiZ0LnZhbHVlPT09bn19LGIuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRSl7dmFyIG4scixpLG89dC5nZXRFbGVtZW50QnlJZChlKTtpZihvKXtpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb107aT10LmdldEVsZW1lbnRzQnlOYW1lKGUpLHI9MDt3aGlsZShvPWlbcisrXSlpZigobj1vLmdldEF0dHJpYnV0ZU5vZGUoImlkIikpJiZuLnZhbHVlPT09ZSlyZXR1cm5bb119cmV0dXJuW119fSksYi5maW5kLlRBRz1kLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGUsdCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6ZC5xc2E/dC5xdWVyeVNlbGVjdG9yQWxsKGUpOnZvaWQgMH06ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9MCxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk7aWYoIioiPT09ZSl7d2hpbGUobj1vW2krK10pMT09PW4ubm9kZVR5cGUmJnIucHVzaChuKTtyZXR1cm4gcn1yZXR1cm4gb30sYi5maW5kLkNMQVNTPWQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmRSlyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfSxzPVtdLHY9W10sKGQucXNhPUsudGVzdChDLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGNlKGZ1bmN0aW9uKGUpe3ZhciB0O2EuYXBwZW5kQ2hpbGQoZSkuaW5uZXJIVE1MPSI8YSBpZD0nIitTKyInPjwvYT48c2VsZWN0IGlkPSciK1MrIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbbXNhbGxvd2NhcHR1cmVePScnXSIpLmxlbmd0aCYmdi5wdXNoKCJbKl4kXT0iK00rIiooPzonJ3xcIlwiKSIpLGUucXVlcnlTZWxlY3RvckFsbCgiW3NlbGVjdGVkXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIiooPzp2YWx1ZXwiK1IrIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZH49IitTKyItXSIpLmxlbmd0aHx8di5wdXNoKCJ+PSIpLCh0PUMuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkuc2V0QXR0cmlidXRlKCJuYW1lIiwiIiksZS5hcHBlbmRDaGlsZCh0KSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPScnXSIpLmxlbmd0aHx8di5wdXNoKCJcXFsiK00rIipuYW1lIitNKyIqPSIrTSsiKig/OicnfFwiXCIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8di5wdXNoKCI6Y2hlY2tlZCIpLGUucXVlcnlTZWxlY3RvckFsbCgiYSMiK1MrIisqIikubGVuZ3RofHx2LnB1c2goIi4jLitbK35dIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJcXFxmIiksdi5wdXNoKCJbXFxyXFxuXFxmXSIpfSksY2UoZnVuY3Rpb24oZSl7ZS5pbm5lckhUTUw9IjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+PHNlbGVjdCBkaXNhYmxlZD0nZGlzYWJsZWQnPjxvcHRpb24vPjwvc2VsZWN0PiI7dmFyIHQ9Qy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmdi5wdXNoKCJuYW1lIitNKyIqWypeJHwhfl0/PSIpLDIhPT1lLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RoJiZ2LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksYS5hcHBlbmRDaGlsZChlKS5kaXNhYmxlZD0hMCwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZGlzYWJsZWQiKS5sZW5ndGgmJnYucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKSx2LnB1c2goIiwuKjoiKX0pKSwoZC5tYXRjaGVzU2VsZWN0b3I9Sy50ZXN0KGM9YS5tYXRjaGVzfHxhLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEub01hdGNoZXNTZWxlY3Rvcnx8YS5tc01hdGNoZXNTZWxlY3RvcikpJiZjZShmdW5jdGlvbihlKXtkLmRpc2Nvbm5lY3RlZE1hdGNoPWMuY2FsbChlLCIqIiksYy5jYWxsKGUsIltzIT0nJ106eCIpLHMucHVzaCgiIT0iLEYpfSksdj12Lmxlbmd0aCYmbmV3IFJlZ0V4cCh2LmpvaW4oInwiKSkscz1zLmxlbmd0aCYmbmV3IFJlZ0V4cChzLmpvaW4oInwiKSksdD1LLnRlc3QoYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikseT10fHxLLnRlc3QoYS5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KXdoaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxEPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBufHwoMSYobj0oZS5vd25lckRvY3VtZW50fHxlKT09KHQub3duZXJEb2N1bWVudHx8dCk/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KToxKXx8IWQuc29ydERldGFjaGVkJiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpPT09bj9lPT1DfHxlLm93bmVyRG9jdW1lbnQ9PXAmJnkocCxlKT8tMTp0PT1DfHx0Lm93bmVyRG9jdW1lbnQ9PXAmJnkocCx0KT8xOnU/UCh1LGUpLVAodSx0KTowOjQmbj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PUM/LTE6dD09Qz8xOmk/LTE6bz8xOnU/UCh1LGUpLVAodSx0KTowO2lmKGk9PT1vKXJldHVybiBwZShlLHQpO249ZTt3aGlsZShuPW4ucGFyZW50Tm9kZSlhLnVuc2hpZnQobik7bj10O3doaWxlKG49bi5wYXJlbnROb2RlKXMudW5zaGlmdChuKTt3aGlsZShhW3JdPT09c1tyXSlyKys7cmV0dXJuIHI/cGUoYVtyXSxzW3JdKTphW3JdPT1wPy0xOnNbcl09PXA/MTowfSksQ30sc2UubWF0Y2hlcz1mdW5jdGlvbihlLHQpe3JldHVybiBzZShlLG51bGwsbnVsbCx0KX0sc2UubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsdCl7aWYoVChlKSxkLm1hdGNoZXNTZWxlY3RvciYmRSYmIU5bdCsiICJdJiYoIXN8fCFzLnRlc3QodCkpJiYoIXZ8fCF2LnRlc3QodCkpKXRyeXt2YXIgbj1jLmNhbGwoZSx0KTtpZihufHxkLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goZSl7Tih0LCEwKX1yZXR1cm4gMDxzZSh0LEMsbnVsbCxbZV0pLmxlbmd0aH0sc2UuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKSx5KGUsdCl9LHNlLmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9QyYmVChlKTt2YXIgbj1iLmF0dHJIYW5kbGVbdC50b0xvd2VyQ2FzZSgpXSxyPW4mJmouY2FsbChiLmF0dHJIYW5kbGUsdC50b0xvd2VyQ2FzZSgpKT9uKGUsdCwhRSk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1yP3I6ZC5hdHRyaWJ1dGVzfHwhRT9lLmdldEF0dHJpYnV0ZSh0KToocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOm51bGx9LHNlLmVzY2FwZT1mdW5jdGlvbihlKXtyZXR1cm4oZSsiIikucmVwbGFjZShyZSxpZSl9LHNlLmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sc2UudW5pcXVlU29ydD1mdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9MCxpPTA7aWYobD0hZC5kZXRlY3REdXBsaWNhdGVzLHU9IWQuc29ydFN0YWJsZSYmZS5zbGljZSgwKSxlLnNvcnQoRCksbCl7d2hpbGUodD1lW2krK10pdD09PWVbaV0mJihyPW4ucHVzaChpKSk7d2hpbGUoci0tKWUuc3BsaWNlKG5bcl0sMSl9cmV0dXJuIHU9bnVsbCxlfSxvPXNlLmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2Ugd2hpbGUodD1lW3IrK10pbis9byh0KTtyZXR1cm4gbn0sKGI9c2Uuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86bGUsbWF0Y2g6RyxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKHRlLG5lKSxlWzNdPShlWzNdfHxlWzRdfHxlWzVdfHwiIikucmVwbGFjZSh0ZSxuZSksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fHNlLmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJnNlLmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBHLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXT9lWzJdPWVbNF18fGVbNV18fCIiOm4mJlgudGVzdChuKSYmKHQ9aChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodGUsbmUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PW1bZSsiICJdO3JldHVybiB0fHwodD1uZXcgUmVnRXhwKCIoXnwiK00rIikiK2UrIigiK00rInwkKSIpKSYmbShlLGZ1bmN0aW9uKGUpe3JldHVybiB0LnRlc3QoInN0cmluZyI9PXR5cGVvZiBlLmNsYXNzTmFtZSYmZS5jbGFzc05hbWV8fCJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIil9KX0sQVRUUjpmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXNlLmF0dHIoZSxuKTtyZXR1cm4gbnVsbD09dD8iIT0iPT09cjohcnx8KHQrPSIiLCI9Ij09PXI/dD09PWk6IiE9Ij09PXI/dCE9PWk6Il49Ij09PXI/aSYmMD09PXQuaW5kZXhPZihpKToiKj0iPT09cj9pJiYtMTx0LmluZGV4T2YoaSk6IiQ9Ij09PXI/aSYmdC5zbGljZSgtaS5sZW5ndGgpPT09aToifj0iPT09cj8tMTwoIiAiK3QucmVwbGFjZShCLCIgIikrIiAiKS5pbmRleE9mKGkpOiJ8PSI9PT1yJiYodD09PWl8fHQuc2xpY2UoMCxpLmxlbmd0aCsxKT09PWkrIi0iKSl9fSxDSElMRDpmdW5jdGlvbihoLGUsdCxnLHYpe3ZhciB5PSJudGgiIT09aC5zbGljZSgwLDMpLG09Imxhc3QiIT09aC5zbGljZSgtNCkseD0ib2YtdHlwZSI9PT1lO3JldHVybiAxPT09ZyYmMD09PXY/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbD15IT09bT8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLGM9ZS5wYXJlbnROb2RlLGY9eCYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHA9IW4mJiF4LGQ9ITE7aWYoYyl7aWYoeSl7d2hpbGUobCl7YT1lO3doaWxlKGE9YVtsXSlpZih4P2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWY6MT09PWEubm9kZVR5cGUpcmV0dXJuITE7dT1sPSJvbmx5Ij09PWgmJiF1JiYibmV4dFNpYmxpbmcifXJldHVybiEwfWlmKHU9W20/Yy5maXJzdENoaWxkOmMubGFzdENoaWxkXSxtJiZwKXtkPShzPShyPShpPShvPShhPWMpW1NdfHwoYVtTXT17fSkpW2EudW5pcXVlSURdfHwob1thLnVuaXF1ZUlEXT17fSkpW2hdfHxbXSlbMF09PT1rJiZyWzFdKSYmclsyXSxhPXMmJmMuY2hpbGROb2Rlc1tzXTt3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigxPT09YS5ub2RlVHlwZSYmKytkJiZhPT09ZSl7aVtoXT1bayxzLGRdO2JyZWFrfX1lbHNlIGlmKHAmJihkPXM9KHI9KGk9KG89KGE9ZSlbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF18fFtdKVswXT09PWsmJnJbMV0pLCExPT09ZCl3aGlsZShhPSsrcyYmYSYmYVtsXXx8KGQ9cz0wKXx8dS5wb3AoKSlpZigoeD9hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1mOjE9PT1hLm5vZGVUeXBlKSYmKytkJiYocCYmKChpPShvPWFbU118fChhW1NdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF09W2ssZF0pLGE9PT1lKSlicmVhaztyZXR1cm4oZC09dik9PT1nfHxkJWc9PTAmJjA8PWQvZ319fSxQU0VVRE86ZnVuY3Rpb24oZSxvKXt2YXIgdCxhPWIucHNldWRvc1tlXXx8Yi5zZXRGaWx0ZXJzW2UudG9Mb3dlckNhc2UoKV18fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBwc2V1ZG86ICIrZSk7cmV0dXJuIGFbU10/YShvKToxPGEubGVuZ3RoPyh0PVtlLGUsIiIsb10sYi5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSk/bGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoZSxvKSxpPXIubGVuZ3RoO3doaWxlKGktLSllW249UChlLHJbaV0pXT0hKHRbbl09cltpXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gYShlLDAsdCl9KTphfX0scHNldWRvczp7bm90OmxlKGZ1bmN0aW9uKGUpe3ZhciByPVtdLGk9W10scz1mKGUucmVwbGFjZSgkLCIkMSIpKTtyZXR1cm4gc1tTXT9sZShmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvPXMoZSxudWxsLHIsW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShpPW9bYV0pJiYoZVthXT0hKHRbYV09aSkpfSk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByWzBdPWUscyhyLG51bGwsbixpKSxyWzBdPW51bGwsIWkucG9wKCl9fSksaGFzOmxlKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gMDxzZSh0LGUpLmxlbmd0aH19KSxjb250YWluczpsZShmdW5jdGlvbih0KXtyZXR1cm4gdD10LnJlcGxhY2UodGUsbmUpLGZ1bmN0aW9uKGUpe3JldHVybi0xPChlLnRleHRDb250ZW50fHxvKGUpKS5pbmRleE9mKHQpfX0pLGxhbmc6bGUoZnVuY3Rpb24obil7cmV0dXJuIFYudGVzdChufHwiIil8fHNlLmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK24pLG49bi5yZXBsYWNlKHRlLG5lKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGUpe3ZhciB0O2Rve2lmKHQ9RT9lLmxhbmc6ZS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fGUuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuKHQ9dC50b0xvd2VyQ2FzZSgpKT09PW58fDA9PT10LmluZGV4T2YobisiLSIpfXdoaWxlKChlPWUucGFyZW50Tm9kZSkmJjE9PT1lLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bi5sb2NhdGlvbiYmbi5sb2NhdGlvbi5oYXNoO3JldHVybiB0JiZ0LnNsaWNlKDEpPT09ZS5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWF9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09Qy5hY3RpdmVFbGVtZW50JiYoIUMuaGFzRm9jdXN8fEMuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6Z2UoITEpLGRpc2FibGVkOmdlKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmISFlLmNoZWNrZWR8fCJvcHRpb24iPT09dCYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCwhMD09PWUuc2VsZWN0ZWR9LGVtcHR5OmZ1bmN0aW9uKGUpe2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZylpZihlLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4hYi5wc2V1ZG9zLmVtcHR5KGUpfSxoZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIEoudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFEudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8InRleHQiPT09dC50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6dmUoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnZlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTp2ZShmdW5jdGlvbihlLHQsbil7cmV0dXJuW248MD9uK3Q6bl19KSxldmVuOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOnZlKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTE7bjx0O24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksbHQ6dmUoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0OnQ8bj90Om47MDw9LS1yOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDp2ZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6bjsrK3I8dDspZS5wdXNoKHIpO3JldHVybiBlfSl9fSkucHNldWRvcy5udGg9Yi5wc2V1ZG9zLmVxLHtyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSliLnBzZXVkb3NbZV09ZGUoZSk7Zm9yKGUgaW57c3VibWl0OiEwLHJlc2V0OiEwfSliLnBzZXVkb3NbZV09aGUoZSk7ZnVuY3Rpb24gbWUoKXt9ZnVuY3Rpb24geGUoZSl7Zm9yKHZhciB0PTAsbj1lLmxlbmd0aCxyPSIiO3Q8bjt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiBiZShzLGUsdCl7dmFyIHU9ZS5kaXIsbD1lLm5leHQsYz1sfHx1LGY9dCYmInBhcmVudE5vZGUiPT09YyxwPXIrKztyZXR1cm4gZS5maXJzdD9mdW5jdGlvbihlLHQsbil7d2hpbGUoZT1lW3VdKWlmKDE9PT1lLm5vZGVUeXBlfHxmKXJldHVybiBzKGUsdCxuKTtyZXR1cm4hMX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhPVtrLHBdO2lmKG4pe3doaWxlKGU9ZVt1XSlpZigoMT09PWUubm9kZVR5cGV8fGYpJiZzKGUsdCxuKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGU9ZVt1XSlpZigxPT09ZS5ub2RlVHlwZXx8ZilpZihpPShvPWVbU118fChlW1NdPXt9KSlbZS51bmlxdWVJRF18fChvW2UudW5pcXVlSURdPXt9KSxsJiZsPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKWU9ZVt1XXx8ZTtlbHNle2lmKChyPWlbY10pJiZyWzBdPT09ayYmclsxXT09PXApcmV0dXJuIGFbMl09clsyXTtpZigoaVtjXT1hKVsyXT1zKGUsdCxuKSlyZXR1cm4hMH1yZXR1cm4hMX19ZnVuY3Rpb24gd2UoaSl7cmV0dXJuIDE8aS5sZW5ndGg/ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWkubGVuZ3RoO3doaWxlKHItLSlpZighaVtyXShlLHQsbikpcmV0dXJuITE7cmV0dXJuITB9OmlbMF19ZnVuY3Rpb24gVGUoZSx0LG4scixpKXtmb3IodmFyIG8sYT1bXSxzPTAsdT1lLmxlbmd0aCxsPW51bGwhPXQ7czx1O3MrKykobz1lW3NdKSYmKG4mJiFuKG8scixpKXx8KGEucHVzaChvKSxsJiZ0LnB1c2gocykpKTtyZXR1cm4gYX1mdW5jdGlvbiBDZShkLGgsZyx2LHksZSl7cmV0dXJuIHYmJiF2W1NdJiYodj1DZSh2KSkseSYmIXlbU10mJih5PUNlKHksZSkpLGxlKGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVtdLHU9W10sbD10Lmxlbmd0aCxjPWV8fGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPXQubGVuZ3RoO3I8aTtyKyspc2UoZSx0W3JdLG4pO3JldHVybiBufShofHwiKiIsbi5ub2RlVHlwZT9bbl06bixbXSksZj0hZHx8IWUmJmg/YzpUZShjLHMsZCxuLHIpLHA9Zz95fHwoZT9kOmx8fHYpP1tdOnQ6ZjtpZihnJiZnKGYscCxuLHIpLHYpe2k9VGUocCx1KSx2KGksW10sbixyKSxvPWkubGVuZ3RoO3doaWxlKG8tLSkoYT1pW29dKSYmKHBbdVtvXV09IShmW3Vbb11dPWEpKX1pZihlKXtpZih5fHxkKXtpZih5KXtpPVtdLG89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiZpLnB1c2goZltvXT1hKTt5KG51bGwscD1bXSxpLHIpfW89cC5sZW5ndGg7d2hpbGUoby0tKShhPXBbb10pJiYtMTwoaT15P1AoZSxhKTpzW29dKSYmKGVbaV09ISh0W2ldPWEpKX19ZWxzZSBwPVRlKHA9PT10P3Auc3BsaWNlKGwscC5sZW5ndGgpOnApLHk/eShudWxsLHQscCxyKTpILmFwcGx5KHQscCl9KX1mdW5jdGlvbiBFZShlKXtmb3IodmFyIGksdCxuLHI9ZS5sZW5ndGgsbz1iLnJlbGF0aXZlW2VbMF0udHlwZV0sYT1vfHxiLnJlbGF0aXZlWyIgIl0scz1vPzE6MCx1PWJlKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09aX0sYSwhMCksbD1iZShmdW5jdGlvbihlKXtyZXR1cm4tMTxQKGksZSl9LGEsITApLGM9W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj0hbyYmKG58fHQhPT13KXx8KChpPXQpLm5vZGVUeXBlP3UoZSx0LG4pOmwoZSx0LG4pKTtyZXR1cm4gaT1udWxsLHJ9XTtzPHI7cysrKWlmKHQ9Yi5yZWxhdGl2ZVtlW3NdLnR5cGVdKWM9W2JlKHdlKGMpLHQpXTtlbHNle2lmKCh0PWIuZmlsdGVyW2Vbc10udHlwZV0uYXBwbHkobnVsbCxlW3NdLm1hdGNoZXMpKVtTXSl7Zm9yKG49KytzO248cjtuKyspaWYoYi5yZWxhdGl2ZVtlW25dLnR5cGVdKWJyZWFrO3JldHVybiBDZSgxPHMmJndlKGMpLDE8cyYmeGUoZS5zbGljZSgwLHMtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW3MtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZSgkLCIkMSIpLHQsczxuJiZFZShlLnNsaWNlKHMsbikpLG48ciYmRWUoZT1lLnNsaWNlKG4pKSxuPHImJnhlKGUpKX1jLnB1c2godCl9cmV0dXJuIHdlKGMpfXJldHVybiBtZS5wcm90b3R5cGU9Yi5maWx0ZXJzPWIucHNldWRvcyxiLnNldEZpbHRlcnM9bmV3IG1lLGg9c2UudG9rZW5pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsPXhbZSsiICJdO2lmKGwpcmV0dXJuIHQ/MDpsLnNsaWNlKDApO2E9ZSxzPVtdLHU9Yi5wcmVGaWx0ZXI7d2hpbGUoYSl7Zm9yKG8gaW4gbiYmIShyPV8uZXhlYyhhKSl8fChyJiYoYT1hLnNsaWNlKHJbMF0ubGVuZ3RoKXx8YSkscy5wdXNoKGk9W10pKSxuPSExLChyPXouZXhlYyhhKSkmJihuPXIuc2hpZnQoKSxpLnB1c2goe3ZhbHVlOm4sdHlwZTpyWzBdLnJlcGxhY2UoJCwiICIpfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSksYi5maWx0ZXIpIShyPUdbb10uZXhlYyhhKSl8fHVbb10mJiEocj11W29dKHIpKXx8KG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOm8sbWF0Y2hlczpyfSksYT1hLnNsaWNlKG4ubGVuZ3RoKSk7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/YS5sZW5ndGg6YT9zZS5lcnJvcihlKTp4KGUscykuc2xpY2UoMCl9LGY9c2UuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHYseSxtLHgscixpPVtdLG89W10sYT1BW2UrIiAiXTtpZighYSl7dHx8KHQ9aChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pKGE9RWUodFtuXSkpW1NdP2kucHVzaChhKTpvLnB1c2goYSk7KGE9QShlLCh2PW8sbT0wPCh5PWkpLmxlbmd0aCx4PTA8di5sZW5ndGgscj1mdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvLGEscyx1PTAsbD0iMCIsYz1lJiZbXSxmPVtdLHA9dyxkPWV8fHgmJmIuZmluZC5UQUcoIioiLGkpLGg9ays9bnVsbD09cD8xOk1hdGgucmFuZG9tKCl8fC4xLGc9ZC5sZW5ndGg7Zm9yKGkmJih3PXQ9PUN8fHR8fGkpO2whPT1nJiZudWxsIT0obz1kW2xdKTtsKyspe2lmKHgmJm8pe2E9MCx0fHxvLm93bmVyRG9jdW1lbnQ9PUN8fChUKG8pLG49IUUpO3doaWxlKHM9dlthKytdKWlmKHMobyx0fHxDLG4pKXtyLnB1c2gobyk7YnJlYWt9aSYmKGs9aCl9bSYmKChvPSFzJiZvKSYmdS0tLGUmJmMucHVzaChvKSl9aWYodSs9bCxtJiZsIT09dSl7YT0wO3doaWxlKHM9eVthKytdKXMoYyxmLHQsbik7aWYoZSl7aWYoMDx1KXdoaWxlKGwtLSljW2xdfHxmW2xdfHwoZltsXT1xLmNhbGwocikpO2Y9VGUoZil9SC5hcHBseShyLGYpLGkmJiFlJiYwPGYubGVuZ3RoJiYxPHUreS5sZW5ndGgmJnNlLnVuaXF1ZVNvcnQocil9cmV0dXJuIGkmJihrPWgsdz1wKSxjfSxtP2xlKHIpOnIpKSkuc2VsZWN0b3I9ZX1yZXR1cm4gYX0sZz1zZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLGM9IXImJmgoZT1sLnNlbGVjdG9yfHxlKTtpZihuPW58fFtdLDE9PT1jLmxlbmd0aCl7aWYoMjwobz1jWzBdPWNbMF0uc2xpY2UoMCkpLmxlbmd0aCYmIklEIj09PShhPW9bMF0pLnR5cGUmJjk9PT10Lm5vZGVUeXBlJiZFJiZiLnJlbGF0aXZlW29bMV0udHlwZV0pe2lmKCEodD0oYi5maW5kLklEKGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSx0KXx8W10pWzBdKSlyZXR1cm4gbjtsJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShvLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPUcubmVlZHNDb250ZXh0LnRlc3QoZSk/MDpvLmxlbmd0aDt3aGlsZShpLS0pe2lmKGE9b1tpXSxiLnJlbGF0aXZlW3M9YS50eXBlXSlicmVhaztpZigodT1iLmZpbmRbc10pJiYocj11KGEubWF0Y2hlc1swXS5yZXBsYWNlKHRlLG5lKSxlZS50ZXN0KG9bMF0udHlwZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpKSl7aWYoby5zcGxpY2UoaSwxKSwhKGU9ci5sZW5ndGgmJnhlKG8pKSlyZXR1cm4gSC5hcHBseShuLHIpLG47YnJlYWt9fX1yZXR1cm4obHx8ZihlLGMpKShyLHQsIUUsbiwhdHx8ZWUudGVzdChlKSYmeWUodC5wYXJlbnROb2RlKXx8dCksbn0sZC5zb3J0U3RhYmxlPVMuc3BsaXQoIiIpLnNvcnQoRCkuam9pbigiIik9PT1TLGQuZGV0ZWN0RHVwbGljYXRlcz0hIWwsVCgpLGQuc29ydERldGFjaGVkPWNlKGZ1bmN0aW9uKGUpe3JldHVybiAxJmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24oQy5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpKX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsIiMiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSl8fGZlKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7aWYoIW4pcmV0dXJuIGUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxkLmF0dHJpYnV0ZXMmJmNlKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGlucHV0Lz4iLGUuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwiIiksIiI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfSl8fGZlKCJ2YWx1ZSIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuJiYiaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiBlLmRlZmF1bHRWYWx1ZX0pLGNlKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxmZShSLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZighbilyZXR1cm4hMD09PWVbdF0/dC50b0xvd2VyQ2FzZSgpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0pLHNlfShDKTtTLmZpbmQ9ZCxTLmV4cHI9ZC5zZWxlY3RvcnMsUy5leHByWyI6Il09Uy5leHByLnBzZXVkb3MsUy51bmlxdWVTb3J0PVMudW5pcXVlPWQudW5pcXVlU29ydCxTLnRleHQ9ZC5nZXRUZXh0LFMuaXNYTUxEb2M9ZC5pc1hNTCxTLmNvbnRhaW5zPWQuY29udGFpbnMsUy5lc2NhcGVTZWxlY3Rvcj1kLmVzY2FwZTt2YXIgaD1mdW5jdGlvbihlLHQsbil7dmFyIHI9W10saT12b2lkIDAhPT1uO3doaWxlKChlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZSlpZigxPT09ZS5ub2RlVHlwZSl7aWYoaSYmUyhlKS5pcyhuKSlicmVhaztyLnB1c2goZSl9cmV0dXJuIHJ9LFQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LGs9Uy5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBBKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX12YXIgTj0vXjwoW2Etel1bXlwvXDA+Olx4MjBcdFxyXG5cZl0qKVtceDIwXHRcclxuXGZdKlwvPz4oPzo8XC9cMT58KSQvaTtmdW5jdGlvbiBEKGUsbixyKXtyZXR1cm4gbShuKT9TLmdyZXAoZSxmdW5jdGlvbihlLHQpe3JldHVybiEhbi5jYWxsKGUsdCxlKSE9PXJ9KTpuLm5vZGVUeXBlP1MuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09biE9PXJ9KToic3RyaW5nIiE9dHlwZW9mIG4/Uy5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuLTE8aS5jYWxsKG4sZSkhPT1yfSk6Uy5maWx0ZXIobixlLHIpfVMuZmlsdGVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10WzBdO3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSwxPT09dC5sZW5ndGgmJjE9PT1yLm5vZGVUeXBlP1MuZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106Uy5maW5kLm1hdGNoZXMoZSxTLmdyZXAodCxmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGV9KSl9LFMuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmxlbmd0aCxpPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhTKGUpLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZihTLmNvbnRhaW5zKGlbdF0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKG49dGhpcy5wdXNoU3RhY2soW10pLHQ9MDt0PHI7dCsrKVMuZmluZChlLGlbdF0sbik7cmV0dXJuIDE8cj9TLnVuaXF1ZVNvcnQobik6bn0sZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhEKHRoaXMsZXx8W10sITApKX0saXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFEKHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZrLnRlc3QoZSk/UyhlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBqLHE9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0rKSkkLzsoUy5mbi5pbml0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKCFlKXJldHVybiB0aGlzO2lmKG49bnx8aiwic3RyaW5nIj09dHlwZW9mIGUpe2lmKCEocj0iPCI9PT1lWzBdJiYiPiI9PT1lW2UubGVuZ3RoLTFdJiYzPD1lLmxlbmd0aD9bbnVsbCxlLG51bGxdOnEuZXhlYyhlKSl8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgUz90WzBdOnQsUy5tZXJnZSh0aGlzLFMucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6RSwhMCkpLE4udGVzdChyWzFdKSYmUy5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpbSh0aGlzW3JdKT90aGlzW3JdKHRbcl0pOnRoaXMuYXR0cihyLHRbcl0pO3JldHVybiB0aGlzfXJldHVybihpPUUuZ2V0RWxlbWVudEJ5SWQoclsyXSkpJiYodGhpc1swXT1pLHRoaXMubGVuZ3RoPTEpLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXNbMF09ZSx0aGlzLmxlbmd0aD0xLHRoaXMpOm0oZSk/dm9pZCAwIT09bi5yZWFkeT9uLnJlYWR5KGUpOmUoUyk6Uy5tYWtlQXJyYXkoZSx0aGlzKX0pLnByb3RvdHlwZT1TLmZuLGo9UyhFKTt2YXIgTD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxIPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2Z1bmN0aW9uIE8oZSx0KXt3aGlsZSgoZT1lW3RdKSYmMSE9PWUubm9kZVR5cGUpO3JldHVybiBlfVMuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9UyhlLHRoaXMpLG49dC5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTxuO2UrKylpZihTLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXRoaXMubGVuZ3RoLG89W10sYT0ic3RyaW5nIiE9dHlwZW9mIGUmJlMoZSk7aWYoIWsudGVzdChlKSlmb3IoO3I8aTtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYoYT8tMTxhLmluZGV4KG4pOjE9PT1uLm5vZGVUeXBlJiZTLmZpbmQubWF0Y2hlc1NlbGVjdG9yKG4sZSkpKXtvLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKDE8by5sZW5ndGg/Uy51bmlxdWVTb3J0KG8pOm8pfSxpbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZT8ic3RyaW5nIj09dHlwZW9mIGU/aS5jYWxsKFMoZSksdGhpc1swXSk6aS5jYWxsKHRoaXMsZS5qcXVlcnk/ZVswXTplKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnB1c2hTdGFjayhTLnVuaXF1ZVNvcnQoUy5tZXJnZSh0aGlzLmdldCgpLFMoZSx0KSkpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09ZT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksUy5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gaChlLCJwYXJlbnROb2RlIixuKX0sbmV4dDpmdW5jdGlvbihlKXtyZXR1cm4gTyhlLCJuZXh0U2libGluZyIpfSxwcmV2OmZ1bmN0aW9uKGUpe3JldHVybiBPKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBoKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIGgoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGgoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBoKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBUKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gVChlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5jb250ZW50RG9jdW1lbnQmJnIoZS5jb250ZW50RG9jdW1lbnQpP2UuY29udGVudERvY3VtZW50OihBKGUsInRlbXBsYXRlIikmJihlPWUuY29udGVudHx8ZSksUy5tZXJnZShbXSxlLmNoaWxkTm9kZXMpKX19LGZ1bmN0aW9uKHIsaSl7Uy5mbltyXT1mdW5jdGlvbihlLHQpe3ZhciBuPVMubWFwKHRoaXMsaSxlKTtyZXR1cm4iVW50aWwiIT09ci5zbGljZSgtNSkmJih0PWUpLHQmJiJzdHJpbmciPT10eXBlb2YgdCYmKG49Uy5maWx0ZXIodCxuKSksMTx0aGlzLmxlbmd0aCYmKEhbcl18fFMudW5pcXVlU29ydChuKSxMLnRlc3QocikmJm4ucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgUD0vW15ceDIwXHRcclxuXGZdKy9nO2Z1bmN0aW9uIFIoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gTShlKXt0aHJvdyBlfWZ1bmN0aW9uIEkoZSx0LG4scil7dmFyIGk7dHJ5e2UmJm0oaT1lLnByb21pc2UpP2kuY2FsbChlKS5kb25lKHQpLmZhaWwobik6ZSYmbShpPWUudGhlbik/aS5jYWxsKGUsdCxuKTp0LmFwcGx5KHZvaWQgMCxbZV0uc2xpY2UocikpfWNhdGNoKGUpe24uYXBwbHkodm9pZCAwLFtlXSl9fVMuQ2FsbGJhY2tzPWZ1bmN0aW9uKHIpe3ZhciBlLG47cj0ic3RyaW5nIj09dHlwZW9mIHI/KGU9cixuPXt9LFMuZWFjaChlLm1hdGNoKFApfHxbXSxmdW5jdGlvbihlLHQpe25bdF09ITB9KSxuKTpTLmV4dGVuZCh7fSxyKTt2YXIgaSx0LG8sYSxzPVtdLHU9W10sbD0tMSxjPWZ1bmN0aW9uKCl7Zm9yKGE9YXx8ci5vbmNlLG89aT0hMDt1Lmxlbmd0aDtsPS0xKXt0PXUuc2hpZnQoKTt3aGlsZSgrK2w8cy5sZW5ndGgpITE9PT1zW2xdLmFwcGx5KHRbMF0sdFsxXSkmJnIuc3RvcE9uRmFsc2UmJihsPXMubGVuZ3RoLHQ9ITEpfXIubWVtb3J5fHwodD0hMSksaT0hMSxhJiYocz10P1tdOiIiKX0sZj17YWRkOmZ1bmN0aW9uKCl7cmV0dXJuIHMmJih0JiYhaSYmKGw9cy5sZW5ndGgtMSx1LnB1c2godCkpLGZ1bmN0aW9uIG4oZSl7Uy5lYWNoKGUsZnVuY3Rpb24oZSx0KXttKHQpP3IudW5pcXVlJiZmLmhhcyh0KXx8cy5wdXNoKHQpOnQmJnQubGVuZ3RoJiYic3RyaW5nIiE9PXcodCkmJm4odCl9KX0oYXJndW1lbnRzKSx0JiYhaSYmYygpKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gUy5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKC0xPChuPVMuaW5BcnJheSh0LHMsbikpKXMuc3BsaWNlKG4sMSksbjw9bCYmbC0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlPy0xPFMuaW5BcnJheShlLHMpOjA8cy5sZW5ndGh9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIHMmJihzPVtdKSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT1bXSxzPXQ9IiIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hc30sbG9jazpmdW5jdGlvbigpe3JldHVybiBhPXU9W10sdHx8aXx8KHM9dD0iIiksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuISFhfSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiBhfHwodD1bZSwodD10fHxbXSkuc2xpY2U/dC5zbGljZSgpOnRdLHUucHVzaCh0KSxpfHxjKCkpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIW99fTtyZXR1cm4gZn0sUy5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGUpe3ZhciBvPVtbIm5vdGlmeSIsInByb2dyZXNzIixTLkNhbGxiYWNrcygibWVtb3J5IiksUy5DYWxsYmFja3MoIm1lbW9yeSIpLDJdLFsicmVzb2x2ZSIsImRvbmUiLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLFMuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLDAsInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIixTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxpPSJwZW5kaW5nIixhPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBpfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LCJjYXRjaCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGhlbihudWxsLGUpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGk9YXJndW1lbnRzO3JldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKHIpe1MuZWFjaChvLGZ1bmN0aW9uKGUsdCl7dmFyIG49bShpW3RbNF1dKSYmaVt0WzRdXTtzW3RbMV1dKGZ1bmN0aW9uKCl7dmFyIGU9biYmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZSYmbShlLnByb21pc2UpP2UucHJvbWlzZSgpLnByb2dyZXNzKHIubm90aWZ5KS5kb25lKHIucmVzb2x2ZSkuZmFpbChyLnJlamVjdCk6clt0WzBdKyJXaXRoIl0odGhpcyxuP1tlXTphcmd1bWVudHMpfSl9KSxpPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24odCxuLHIpe3ZhciB1PTA7ZnVuY3Rpb24gbChpLG8sYSxzKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbj10aGlzLHI9YXJndW1lbnRzLGU9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCEoaTx1KSl7aWYoKGU9YS5hcHBseShuLHIpKT09PW8ucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO3Q9ZSYmKCJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUpJiZlLnRoZW4sbSh0KT9zP3QuY2FsbChlLGwodSxvLFIscyksbCh1LG8sTSxzKSk6KHUrKyx0LmNhbGwoZSxsKHUsbyxSLHMpLGwodSxvLE0scyksbCh1LG8sUixvLm5vdGlmeVdpdGgpKSk6KGEhPT1SJiYobj12b2lkIDAscj1bZV0pLChzfHxvLnJlc29sdmVXaXRoKShuLHIpKX19LHQ9cz9lOmZ1bmN0aW9uKCl7dHJ5e2UoKX1jYXRjaChlKXtTLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2smJlMuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHQuc3RhY2tUcmFjZSksdTw9aSsxJiYoYSE9PU0mJihuPXZvaWQgMCxyPVtlXSksby5yZWplY3RXaXRoKG4scikpfX07aT90KCk6KFMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rJiYodC5zdGFja1RyYWNlPVMuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCkpLEMuc2V0VGltZW91dCh0KSl9fXJldHVybiBTLkRlZmVycmVkKGZ1bmN0aW9uKGUpe29bMF1bM10uYWRkKGwoMCxlLG0ocik/cjpSLGUubm90aWZ5V2l0aCkpLG9bMV1bM10uYWRkKGwoMCxlLG0odCk/dDpSKSksb1syXVszXS5hZGQobCgwLGUsbShuKT9uOk0pKX0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9TLmV4dGVuZChlLGEpOmF9fSxzPXt9O3JldHVybiBTLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPXRbMl0scj10WzVdO2FbdFsxXV09bi5hZGQsciYmbi5hZGQoZnVuY3Rpb24oKXtpPXJ9LG9bMy1lXVsyXS5kaXNhYmxlLG9bMy1lXVszXS5kaXNhYmxlLG9bMF1bMl0ubG9jayxvWzBdWzNdLmxvY2spLG4uYWRkKHRbM10uZmlyZSksc1t0WzBdXT1mdW5jdGlvbigpe3JldHVybiBzW3RbMF0rIldpdGgiXSh0aGlzPT09cz92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LHNbdFswXSsiV2l0aCJdPW4uZmlyZVdpdGh9KSxhLnByb21pc2UocyksZSYmZS5jYWxsKHMscyksc30sd2hlbjpmdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoLHQ9bixyPUFycmF5KHQpLGk9cy5jYWxsKGFyZ3VtZW50cyksbz1TLkRlZmVycmVkKCksYT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7clt0XT10aGlzLGlbdF09MTxhcmd1bWVudHMubGVuZ3RoP3MuY2FsbChhcmd1bWVudHMpOmUsLS1ufHxvLnJlc29sdmVXaXRoKHIsaSl9fTtpZihuPD0xJiYoSShlLG8uZG9uZShhKHQpKS5yZXNvbHZlLG8ucmVqZWN0LCFuKSwicGVuZGluZyI9PT1vLnN0YXRlKCl8fG0oaVt0XSYmaVt0XS50aGVuKSkpcmV0dXJuIG8udGhlbigpO3doaWxlKHQtLSlJKGlbdF0sYSh0KSxvLnJlamVjdCk7cmV0dXJuIG8ucHJvbWlzZSgpfX0pO3ZhciBXPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO1MuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlLHQpe0MuY29uc29sZSYmQy5jb25zb2xlLndhcm4mJmUmJlcudGVzdChlLm5hbWUpJiZDLmNvbnNvbGUud2FybigialF1ZXJ5LkRlZmVycmVkIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UsZS5zdGFjayx0KX0sUy5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlKXtDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9O3ZhciBGPVMuRGVmZXJyZWQoKTtmdW5jdGlvbiBCKCl7RS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixCKSxDLnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLEIpLFMucmVhZHkoKX1TLmZuLnJlYWR5PWZ1bmN0aW9uKGUpe3JldHVybiBGLnRoZW4oZSlbImNhdGNoIl0oZnVuY3Rpb24oZSl7Uy5yZWFkeUV4Y2VwdGlvbihlKX0pLHRoaXN9LFMuZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKGUpeyghMD09PWU/LS1TLnJlYWR5V2FpdDpTLmlzUmVhZHkpfHwoUy5pc1JlYWR5PSEwKSE9PWUmJjA8LS1TLnJlYWR5V2FpdHx8Ri5yZXNvbHZlV2l0aChFLFtTXSl9fSksUy5yZWFkeS50aGVuPUYudGhlbiwiY29tcGxldGUiPT09RS5yZWFkeVN0YXRlfHwibG9hZGluZyIhPT1FLnJlYWR5U3RhdGUmJiFFLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD9DLnNldFRpbWVvdXQoUy5yZWFkeSk6KEUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQiksQy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixCKSk7dmFyICQ9ZnVuY3Rpb24oZSx0LG4scixpLG8sYSl7dmFyIHM9MCx1PWUubGVuZ3RoLGw9bnVsbD09bjtpZigib2JqZWN0Ij09PXcobikpZm9yKHMgaW4gaT0hMCxuKSQoZSx0LHMsbltzXSwhMCxvLGEpO2Vsc2UgaWYodm9pZCAwIT09ciYmKGk9ITAsbShyKXx8KGE9ITApLGwmJihhPyh0LmNhbGwoZSxyKSx0PW51bGwpOihsPXQsdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwuY2FsbChTKGUpLG4pfSkpLHQpKWZvcig7czx1O3MrKyl0KGVbc10sbixhP3I6ci5jYWxsKGVbc10scyx0KGVbc10sbikpKTtyZXR1cm4gaT9lOmw/dC5jYWxsKGUpOnU/dChlWzBdLG4pOm99LF89L14tbXMtLyx6PS8tKFthLXpdKS9nO2Z1bmN0aW9uIFUoZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfWZ1bmN0aW9uIFgoZSl7cmV0dXJuIGUucmVwbGFjZShfLCJtcy0iKS5yZXBsYWNlKHosVSl9dmFyIFY9ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfHw5PT09ZS5ub2RlVHlwZXx8IStlLm5vZGVUeXBlfTtmdW5jdGlvbiBHKCl7dGhpcy5leHBhbmRvPVMuZXhwYW5kbytHLnVpZCsrfUcudWlkPTEsRy5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdHx8KHQ9e30sVihlKSYmKGUubm9kZVR5cGU/ZVt0aGlzLmV4cGFuZG9dPXQ6T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy5leHBhbmRvLHt2YWx1ZTp0LGNvbmZpZ3VyYWJsZTohMH0pKSksdH0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMuY2FjaGUoZSk7aWYoInN0cmluZyI9PXR5cGVvZiB0KWlbWCh0KV09bjtlbHNlIGZvcihyIGluIHQpaVtYKHIpXT10W3JdO3JldHVybiBpfSxnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD90aGlzLmNhY2hlKGUpOmVbdGhpcy5leHBhbmRvXSYmZVt0aGlzLmV4cGFuZG9dW1godCldfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT10fHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJnZvaWQgMD09PW4/dGhpcy5nZXQoZSx0KToodGhpcy5zZXQoZSx0LG4pLHZvaWQgMCE9PW4/bjp0KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lW3RoaXMuZXhwYW5kb107aWYodm9pZCAwIT09cil7aWYodm9pZCAwIT09dCl7bj0odD1BcnJheS5pc0FycmF5KHQpP3QubWFwKFgpOih0PVgodCkpaW4gcj9bdF06dC5tYXRjaChQKXx8W10pLmxlbmd0aDt3aGlsZShuLS0pZGVsZXRlIHJbdFtuXV19KHZvaWQgMD09PXR8fFMuaXNFbXB0eU9iamVjdChyKSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT12b2lkIDA6ZGVsZXRlIGVbdGhpcy5leHBhbmRvXSl9fSxoYXNEYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5leHBhbmRvXTtyZXR1cm4gdm9pZCAwIT09dCYmIVMuaXNFbXB0eU9iamVjdCh0KX19O3ZhciBZPW5ldyBHLFE9bmV3IEcsSj0vXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLEs9L1tBLVpdL2c7ZnVuY3Rpb24gWihlLHQsbil7dmFyIHIsaTtpZih2b2lkIDA9PT1uJiYxPT09ZS5ub2RlVHlwZSlpZihyPSJkYXRhLSIrdC5yZXBsYWNlKEssIi0kJiIpLnRvTG93ZXJDYXNlKCksInN0cmluZyI9PXR5cGVvZihuPWUuZ2V0QXR0cmlidXRlKHIpKSl7dHJ5e249InRydWUiPT09KGk9bil8fCJmYWxzZSIhPT1pJiYoIm51bGwiPT09aT9udWxsOmk9PT0raSsiIj8raTpKLnRlc3QoaSk/SlNPTi5wYXJzZShpKTppKX1jYXRjaChlKXt9US5zZXQoZSx0LG4pfWVsc2Ugbj12b2lkIDA7cmV0dXJuIG59Uy5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIFEuaGFzRGF0YShlKXx8WS5oYXNEYXRhKGUpfSxkYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUS5hY2Nlc3MoZSx0LG4pfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7US5yZW1vdmUoZSx0KX0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBZLmFjY2VzcyhlLHQsbil9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7WS5yZW1vdmUoZSx0KX19KSxTLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihuLGUpe3ZhciB0LHIsaSxvPXRoaXNbMF0sYT1vJiZvLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09bil7aWYodGhpcy5sZW5ndGgmJihpPVEuZ2V0KG8pLDE9PT1vLm5vZGVUeXBlJiYhWS5nZXQobywiaGFzRGF0YUF0dHJzIikpKXt0PWEubGVuZ3RoO3doaWxlKHQtLSlhW3RdJiYwPT09KHI9YVt0XS5uYW1lKS5pbmRleE9mKCJkYXRhLSIpJiYocj1YKHIuc2xpY2UoNSkpLFoobyxyLGlbcl0pKTtZLnNldChvLCJoYXNEYXRhQXR0cnMiLCEwKX1yZXR1cm4gaX1yZXR1cm4ib2JqZWN0Ij09dHlwZW9mIG4/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5zZXQodGhpcyxuKX0pOiQodGhpcyxmdW5jdGlvbihlKXt2YXIgdDtpZihvJiZ2b2lkIDA9PT1lKXJldHVybiB2b2lkIDAhPT0odD1RLmdldChvLG4pKT90OnZvaWQgMCE9PSh0PVoobyxuKSk/dDp2b2lkIDA7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7US5zZXQodGhpcyxuLGUpfSl9LG51bGwsZSwxPGFyZ3VtZW50cy5sZW5ndGgsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1EucmVtb3ZlKHRoaXMsZSl9KX19KSxTLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1ZLmdldChlLHQpLG4mJighcnx8QXJyYXkuaXNBcnJheShuKT9yPVkuYWNjZXNzKGUsdCxTLm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj1TLnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxvPVMuX3F1ZXVlSG9va3MoZSx0KTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxpJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUsZnVuY3Rpb24oKXtTLmRlcXVldWUoZSx0KX0sbykpLCFyJiZvJiZvLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10KyJxdWV1ZUhvb2tzIjtyZXR1cm4gWS5nZXQoZSxuKXx8WS5hY2Nlc3MoZSxuLHtlbXB0eTpTLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKS5hZGQoZnVuY3Rpb24oKXtZLnJlbW92ZShlLFt0KyJxdWV1ZSIsbl0pfSl9KX19KSxTLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24odCxuKXt2YXIgZT0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSJmeCIsZS0tKSxhcmd1bWVudHMubGVuZ3RoPGU/Uy5xdWV1ZSh0aGlzWzBdLHQpOnZvaWQgMD09PW4/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1TLnF1ZXVlKHRoaXMsdCxuKTtTLl9xdWV1ZUhvb2tzKHRoaXMsdCksImZ4Ij09PXQmJiJpbnByb2dyZXNzIiE9PWVbMF0mJlMuZGVxdWV1ZSh0aGlzLHQpfSl9LGRlcXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1MuZGVxdWV1ZSh0aGlzLGUpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTEsaT1TLkRlZmVycmVkKCksbz10aGlzLGE9dGhpcy5sZW5ndGgscz1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChvLFtvXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksZT1lfHwiZngiO3doaWxlKGEtLSkobj1ZLmdldChvW2FdLGUrInF1ZXVlSG9va3MiKSkmJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQocykpO3JldHVybiBzKCksaS5wcm9taXNlKHQpfX0pO3ZhciBlZT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSx0ZT1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrZWUrIikoW2EteiVdKikkIiwiaSIpLG5lPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0scmU9RS5kb2N1bWVudEVsZW1lbnQsaWU9ZnVuY3Rpb24oZSl7cmV0dXJuIFMuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfSxvZT17Y29tcG9zZWQ6ITB9O3JlLmdldFJvb3ROb2RlJiYoaWU9ZnVuY3Rpb24oZSl7cmV0dXJuIFMuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHxlLmdldFJvb3ROb2RlKG9lKT09PWUub3duZXJEb2N1bWVudH0pO3ZhciBhZT1mdW5jdGlvbihlLHQpe3JldHVybiJub25lIj09PShlPXR8fGUpLnN0eWxlLmRpc3BsYXl8fCIiPT09ZS5zdHlsZS5kaXNwbGF5JiZpZShlKSYmIm5vbmUiPT09Uy5jc3MoZSwiZGlzcGxheSIpfTtmdW5jdGlvbiBzZShlLHQsbixyKXt2YXIgaSxvLGE9MjAscz1yP2Z1bmN0aW9uKCl7cmV0dXJuIHIuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIFMuY3NzKGUsdCwiIil9LHU9cygpLGw9biYmblszXXx8KFMuY3NzTnVtYmVyW3RdPyIiOiJweCIpLGM9ZS5ub2RlVHlwZSYmKFMuY3NzTnVtYmVyW3RdfHwicHgiIT09bCYmK3UpJiZ0ZS5leGVjKFMuY3NzKGUsdCkpO2lmKGMmJmNbM10hPT1sKXt1Lz0yLGw9bHx8Y1szXSxjPSt1fHwxO3doaWxlKGEtLSlTLnN0eWxlKGUsdCxjK2wpLCgxLW8pKigxLShvPXMoKS91fHwuNSkpPD0wJiYoYT0wKSxjLz1vO2MqPTIsUy5zdHlsZShlLHQsYytsKSxuPW58fFtdfXJldHVybiBuJiYoYz0rY3x8K3V8fDAsaT1uWzFdP2MrKG5bMV0rMSkqblsyXTorblsyXSxyJiYoci51bml0PWwsci5zdGFydD1jLHIuZW5kPWkpKSxpfXZhciB1ZT17fTtmdW5jdGlvbiBsZShlLHQpe2Zvcih2YXIgbixyLGksbyxhLHMsdSxsPVtdLGM9MCxmPWUubGVuZ3RoO2M8ZjtjKyspKHI9ZVtjXSkuc3R5bGUmJihuPXIuc3R5bGUuZGlzcGxheSx0Pygibm9uZSI9PT1uJiYobFtjXT1ZLmdldChyLCJkaXNwbGF5Iil8fG51bGwsbFtjXXx8KHIuc3R5bGUuZGlzcGxheT0iIikpLCIiPT09ci5zdHlsZS5kaXNwbGF5JiZhZShyKSYmKGxbY109KHU9YT1vPXZvaWQgMCxhPShpPXIpLm93bmVyRG9jdW1lbnQscz1pLm5vZGVOYW1lLCh1PXVlW3NdKXx8KG89YS5ib2R5LmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudChzKSksdT1TLmNzcyhvLCJkaXNwbGF5Iiksby5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG8pLCJub25lIj09PXUmJih1PSJibG9jayIpLHVlW3NdPXUpKSkpOiJub25lIiE9PW4mJihsW2NdPSJub25lIixZLnNldChyLCJkaXNwbGF5IixuKSkpO2ZvcihjPTA7YzxmO2MrKyludWxsIT1sW2NdJiYoZVtjXS5zdHlsZS5kaXNwbGF5PWxbY10pO3JldHVybiBlfVMuZm4uZXh0ZW5kKHtzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIGxlKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIGxlKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oZSl7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgZT9lP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe2FlKHRoaXMpP1ModGhpcykuc2hvdygpOlModGhpcykuaGlkZSgpfSl9fSk7dmFyIGNlLGZlLHBlPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLGRlPS88KFthLXpdW15cL1wwPlx4MjBcdFxyXG5cZl0qKS9pLGhlPS9eJHxebW9kdWxlJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaTtjZT1FLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKS5hcHBlbmRDaGlsZChFLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSwoZmU9RS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpKS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJyYWRpbyIpLGZlLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxmZS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0IiksY2UuYXBwZW5kQ2hpbGQoZmUpLHkuY2hlY2tDbG9uZT1jZS5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsY2UuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+Iix5Lm5vQ2xvbmVDaGVja2VkPSEhY2UuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlLGNlLmlubmVySFRNTD0iPG9wdGlvbj48L29wdGlvbj4iLHkub3B0aW9uPSEhY2UubGFzdENoaWxkO3ZhciBnZT17dGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDpbMCwiIiwiIl19O2Z1bmN0aW9uIHZlKGUsdCl7dmFyIG47cmV0dXJuIG49InVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUodHx8IioiKToidW5kZWZpbmVkIiE9dHlwZW9mIGUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXSx2b2lkIDA9PT10fHx0JiZBKGUsdCk/Uy5tZXJnZShbZV0sbik6bn1mdW5jdGlvbiB5ZShlLHQpe2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7bjxyO24rKylZLnNldChlW25dLCJnbG9iYWxFdmFsIiwhdHx8WS5nZXQodFtuXSwiZ2xvYmFsRXZhbCIpKX1nZS50Ym9keT1nZS50Zm9vdD1nZS5jb2xncm91cD1nZS5jYXB0aW9uPWdlLnRoZWFkLGdlLnRoPWdlLnRkLHkub3B0aW9ufHwoZ2Uub3B0Z3JvdXA9Z2Uub3B0aW9uPVsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0pO3ZhciBtZT0vPHwmIz9cdys7LztmdW5jdGlvbiB4ZShlLHQsbixyLGkpe2Zvcih2YXIgbyxhLHMsdSxsLGMsZj10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxwPVtdLGQ9MCxoPWUubGVuZ3RoO2Q8aDtkKyspaWYoKG89ZVtkXSl8fDA9PT1vKWlmKCJvYmplY3QiPT09dyhvKSlTLm1lcmdlKHAsby5ub2RlVHlwZT9bb106byk7ZWxzZSBpZihtZS50ZXN0KG8pKXthPWF8fGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KCJkaXYiKSkscz0oZGUuZXhlYyhvKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSx1PWdlW3NdfHxnZS5fZGVmYXVsdCxhLmlubmVySFRNTD11WzFdK1MuaHRtbFByZWZpbHRlcihvKSt1WzJdLGM9dVswXTt3aGlsZShjLS0pYT1hLmxhc3RDaGlsZDtTLm1lcmdlKHAsYS5jaGlsZE5vZGVzKSwoYT1mLmZpcnN0Q2hpbGQpLnRleHRDb250ZW50PSIifWVsc2UgcC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUobykpO2YudGV4dENvbnRlbnQ9IiIsZD0wO3doaWxlKG89cFtkKytdKWlmKHImJi0xPFMuaW5BcnJheShvLHIpKWkmJmkucHVzaChvKTtlbHNlIGlmKGw9aWUobyksYT12ZShmLmFwcGVuZENoaWxkKG8pLCJzY3JpcHQiKSxsJiZ5ZShhKSxuKXtjPTA7d2hpbGUobz1hW2MrK10paGUudGVzdChvLnR5cGV8fCIiKSYmbi5wdXNoKG8pfXJldHVybiBmfXZhciBiZT0vXmtleS8sd2U9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFRlPS9eKFteLl0qKSg/OlwuKC4rKXwpLztmdW5jdGlvbiBDZSgpe3JldHVybiEwfWZ1bmN0aW9uIEVlKCl7cmV0dXJuITF9ZnVuY3Rpb24gU2UoZSx0KXtyZXR1cm4gZT09PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiBFLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7fX0oKT09KCJmb2N1cyI9PT10KX1mdW5jdGlvbiBrZShlLHQsbixyLGksbyl7dmFyIGEscztpZigib2JqZWN0Ij09dHlwZW9mIHQpe2ZvcihzIGluInN0cmluZyIhPXR5cGVvZiBuJiYocj1yfHxuLG49dm9pZCAwKSx0KWtlKGUscyxuLHIsdFtzXSxvKTtyZXR1cm4gZX1pZihudWxsPT1yJiZudWxsPT1pPyhpPW4scj1uPXZvaWQgMCk6bnVsbD09aSYmKCJzdHJpbmciPT10eXBlb2Ygbj8oaT1yLHI9dm9pZCAwKTooaT1yLHI9bixuPXZvaWQgMCkpLCExPT09aSlpPUVlO2Vsc2UgaWYoIWkpcmV0dXJuIGU7cmV0dXJuIDE9PT1vJiYoYT1pLChpPWZ1bmN0aW9uKGUpe3JldHVybiBTKCkub2ZmKGUpLGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSkuZ3VpZD1hLmd1aWR8fChhLmd1aWQ9Uy5ndWlkKyspKSxlLmVhY2goZnVuY3Rpb24oKXtTLmV2ZW50LmFkZCh0aGlzLHQsaSxyLG4pfSl9ZnVuY3Rpb24gQWUoZSxpLG8pe28/KFkuc2V0KGUsaSwhMSksUy5ldmVudC5hZGQoZSxpLHtuYW1lc3BhY2U6ITEsaGFuZGxlcjpmdW5jdGlvbihlKXt2YXIgdCxuLHI9WS5nZXQodGhpcyxpKTtpZigxJmUuaXNUcmlnZ2VyJiZ0aGlzW2ldKXtpZihyLmxlbmd0aCkoUy5ldmVudC5zcGVjaWFsW2ldfHx7fSkuZGVsZWdhdGVUeXBlJiZlLnN0b3BQcm9wYWdhdGlvbigpO2Vsc2UgaWYocj1zLmNhbGwoYXJndW1lbnRzKSxZLnNldCh0aGlzLGksciksdD1vKHRoaXMsaSksdGhpc1tpXSgpLHIhPT0obj1ZLmdldCh0aGlzLGkpKXx8dD9ZLnNldCh0aGlzLGksITEpOm49e30sciE9PW4pcmV0dXJuIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLG4udmFsdWV9ZWxzZSByLmxlbmd0aCYmKFkuc2V0KHRoaXMsaSx7dmFsdWU6Uy5ldmVudC50cmlnZ2VyKFMuZXh0ZW5kKHJbMF0sUy5FdmVudC5wcm90b3R5cGUpLHIuc2xpY2UoMSksdGhpcyl9KSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKX19KSk6dm9pZCAwPT09WS5nZXQoZSxpKSYmUy5ldmVudC5hZGQoZSxpLENlKX1TLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKHQsZSxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx2PVkuZ2V0KHQpO2lmKFYodCkpe24uaGFuZGxlciYmKG49KG89bikuaGFuZGxlcixpPW8uc2VsZWN0b3IpLGkmJlMuZmluZC5tYXRjaGVzU2VsZWN0b3IocmUsaSksbi5ndWlkfHwobi5ndWlkPVMuZ3VpZCsrKSwodT12LmV2ZW50cyl8fCh1PXYuZXZlbnRzPU9iamVjdC5jcmVhdGUobnVsbCkpLChhPXYuaGFuZGxlKXx8KGE9di5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBTJiZTLmV2ZW50LnRyaWdnZXJlZCE9PWUudHlwZT9TLmV2ZW50LmRpc3BhdGNoLmFwcGx5KHQsYXJndW1lbnRzKTp2b2lkIDB9KSxsPShlPShlfHwiIikubWF0Y2goUCl8fFsiIl0pLmxlbmd0aDt3aGlsZShsLS0pZD1nPShzPVRlLmV4ZWMoZVtsXSl8fFtdKVsxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCYmKGY9Uy5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShpP2YuZGVsZWdhdGVUeXBlOmYuYmluZFR5cGUpfHxkLGY9Uy5ldmVudC5zcGVjaWFsW2RdfHx7fSxjPVMuZXh0ZW5kKHt0eXBlOmQsb3JpZ1R5cGU6ZyxkYXRhOnIsaGFuZGxlcjpuLGd1aWQ6bi5ndWlkLHNlbGVjdG9yOmksbmVlZHNDb250ZXh0OmkmJlMuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChpKSxuYW1lc3BhY2U6aC5qb2luKCIuIil9LG8pLChwPXVbZF0pfHwoKHA9dVtkXT1bXSkuZGVsZWdhdGVDb3VudD0wLGYuc2V0dXAmJiExIT09Zi5zZXR1cC5jYWxsKHQscixoLGEpfHx0LmFkZEV2ZW50TGlzdGVuZXImJnQuYWRkRXZlbnRMaXN0ZW5lcihkLGEpKSxmLmFkZCYmKGYuYWRkLmNhbGwodCxjKSxjLmhhbmRsZXIuZ3VpZHx8KGMuaGFuZGxlci5ndWlkPW4uZ3VpZCkpLGk/cC5zcGxpY2UocC5kZWxlZ2F0ZUNvdW50KyssMCxjKTpwLnB1c2goYyksUy5ldmVudC5nbG9iYWxbZF09ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx2PVkuaGFzRGF0YShlKSYmWS5nZXQoZSk7aWYodiYmKHU9di5ldmVudHMpKXtsPSh0PSh0fHwiIikubWF0Y2goUCl8fFsiIl0pLmxlbmd0aDt3aGlsZShsLS0paWYoZD1nPShzPVRlLmV4ZWModFtsXSl8fFtdKVsxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCl7Zj1TLmV2ZW50LnNwZWNpYWxbZF18fHt9LHA9dVtkPShyP2YuZGVsZWdhdGVUeXBlOmYuYmluZFR5cGUpfHxkXXx8W10scz1zWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitoLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGE9bz1wLmxlbmd0aDt3aGlsZShvLS0pYz1wW29dLCFpJiZnIT09Yy5vcmlnVHlwZXx8biYmbi5ndWlkIT09Yy5ndWlkfHxzJiYhcy50ZXN0KGMubmFtZXNwYWNlKXx8ciYmciE9PWMuc2VsZWN0b3ImJigiKioiIT09cnx8IWMuc2VsZWN0b3IpfHwocC5zcGxpY2UobywxKSxjLnNlbGVjdG9yJiZwLmRlbGVnYXRlQ291bnQtLSxmLnJlbW92ZSYmZi5yZW1vdmUuY2FsbChlLGMpKTthJiYhcC5sZW5ndGgmJihmLnRlYXJkb3duJiYhMSE9PWYudGVhcmRvd24uY2FsbChlLGgsdi5oYW5kbGUpfHxTLnJlbW92ZUV2ZW50KGUsZCx2LmhhbmRsZSksZGVsZXRlIHVbZF0pfWVsc2UgZm9yKGQgaW4gdSlTLmV2ZW50LnJlbW92ZShlLGQrdFtsXSxuLHIsITApO1MuaXNFbXB0eU9iamVjdCh1KSYmWS5yZW1vdmUoZSwiaGFuZGxlIGV2ZW50cyIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhLHM9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLHU9Uy5ldmVudC5maXgoZSksbD0oWS5nZXQodGhpcywiZXZlbnRzIil8fE9iamVjdC5jcmVhdGUobnVsbCkpW3UudHlwZV18fFtdLGM9Uy5ldmVudC5zcGVjaWFsW3UudHlwZV18fHt9O2ZvcihzWzBdPXUsdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspc1t0XT1hcmd1bWVudHNbdF07aWYodS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFjLnByZURpc3BhdGNofHwhMSE9PWMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLHUpKXthPVMuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLHUsbCksdD0wO3doaWxlKChpPWFbdCsrXSkmJiF1LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe3UuY3VycmVudFRhcmdldD1pLmVsZW0sbj0wO3doaWxlKChvPWkuaGFuZGxlcnNbbisrXSkmJiF1LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpdS5ybmFtZXNwYWNlJiYhMSE9PW8ubmFtZXNwYWNlJiYhdS5ybmFtZXNwYWNlLnRlc3Qoby5uYW1lc3BhY2UpfHwodS5oYW5kbGVPYmo9byx1LmRhdGE9by5kYXRhLHZvaWQgMCE9PShyPSgoUy5ldmVudC5zcGVjaWFsW28ub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxvLmhhbmRsZXIpLmFwcGx5KGkuZWxlbSxzKSkmJiExPT09KHUucmVzdWx0PXIpJiYodS5wcmV2ZW50RGVmYXVsdCgpLHUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gYy5wb3N0RGlzcGF0Y2gmJmMucG9zdERpc3BhdGNoLmNhbGwodGhpcyx1KSx1LnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8sYSxzPVtdLHU9dC5kZWxlZ2F0ZUNvdW50LGw9ZS50YXJnZXQ7aWYodSYmbC5ub2RlVHlwZSYmISgiY2xpY2siPT09ZS50eXBlJiYxPD1lLmJ1dHRvbikpZm9yKDtsIT09dGhpcztsPWwucGFyZW50Tm9kZXx8dGhpcylpZigxPT09bC5ub2RlVHlwZSYmKCJjbGljayIhPT1lLnR5cGV8fCEwIT09bC5kaXNhYmxlZCkpe2ZvcihvPVtdLGE9e30sbj0wO248dTtuKyspdm9pZCAwPT09YVtpPShyPXRbbl0pLnNlbGVjdG9yKyIgIl0mJihhW2ldPXIubmVlZHNDb250ZXh0Py0xPFMoaSx0aGlzKS5pbmRleChsKTpTLmZpbmQoaSx0aGlzLG51bGwsW2xdKS5sZW5ndGgpLGFbaV0mJm8ucHVzaChyKTtvLmxlbmd0aCYmcy5wdXNoKHtlbGVtOmwsaGFuZGxlcnM6b30pfXJldHVybiBsPXRoaXMsdTx0Lmxlbmd0aCYmcy5wdXNoKHtlbGVtOmwsaGFuZGxlcnM6dC5zbGljZSh1KX0pLHN9LGFkZFByb3A6ZnVuY3Rpb24odCxlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoUy5FdmVudC5wcm90b3R5cGUsdCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0Om0oZSk/ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIGUodGhpcy5vcmlnaW5hbEV2ZW50KX06ZnVuY3Rpb24oKXtpZih0aGlzLm9yaWdpbmFsRXZlbnQpcmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFt0XX0sc2V0OmZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmV9KX19KX0sZml4OmZ1bmN0aW9uKGUpe3JldHVybiBlW1MuZXhwYW5kb10/ZTpuZXcgUy5FdmVudChlKX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGNsaWNrOntzZXR1cDpmdW5jdGlvbihlKXt2YXIgdD10aGlzfHxlO3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCwiaW5wdXQiKSYmQWUodCwiY2xpY2siLENlKSwhMX0sdHJpZ2dlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzfHxlO3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCwiaW5wdXQiKSYmQWUodCwiY2xpY2siKSwhMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7cmV0dXJuIHBlLnRlc3QodC50eXBlKSYmdC5jbGljayYmQSh0LCJpbnB1dCIpJiZZLmdldCh0LCJjbGljayIpfHxBKHQsImEiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUucmVzdWx0JiZlLm9yaWdpbmFsRXZlbnQmJihlLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9ZS5yZXN1bHQpfX19fSxTLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUsdCxuKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXImJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG4pfSxTLkV2ZW50PWZ1bmN0aW9uKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgUy5FdmVudCkpcmV0dXJuIG5ldyBTLkV2ZW50KGUsdCk7ZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09ZS5kZWZhdWx0UHJldmVudGVkJiYhMT09PWUucmV0dXJuVmFsdWU/Q2U6RWUsdGhpcy50YXJnZXQ9ZS50YXJnZXQmJjM9PT1lLnRhcmdldC5ub2RlVHlwZT9lLnRhcmdldC5wYXJlbnROb2RlOmUudGFyZ2V0LHRoaXMuY3VycmVudFRhcmdldD1lLmN1cnJlbnRUYXJnZXQsdGhpcy5yZWxhdGVkVGFyZ2V0PWUucmVsYXRlZFRhcmdldCk6dGhpcy50eXBlPWUsdCYmUy5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8RGF0ZS5ub3coKSx0aGlzW1MuZXhwYW5kb109ITB9LFMuRXZlbnQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpTLkV2ZW50LGlzRGVmYXVsdFByZXZlbnRlZDpFZSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpFZSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpFZSxpc1NpbXVsYXRlZDohMSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1DZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1DZSxlJiYhdGhpcy5pc1NpbXVsYXRlZCYmZS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9Q2UsZSYmIXRoaXMuaXNTaW11bGF0ZWQmJmUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LFMuZWFjaCh7YWx0S2V5OiEwLGJ1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxjaGFuZ2VkVG91Y2hlczohMCxjdHJsS2V5OiEwLGRldGFpbDohMCxldmVudFBoYXNlOiEwLG1ldGFLZXk6ITAscGFnZVg6ITAscGFnZVk6ITAsc2hpZnRLZXk6ITAsdmlldzohMCwiY2hhciI6ITAsY29kZTohMCxjaGFyQ29kZTohMCxrZXk6ITAsa2V5Q29kZTohMCxidXR0b246ITAsYnV0dG9uczohMCxjbGllbnRYOiEwLGNsaWVudFk6ITAsb2Zmc2V0WDohMCxvZmZzZXRZOiEwLHBvaW50ZXJJZDohMCxwb2ludGVyVHlwZTohMCxzY3JlZW5YOiEwLHNjcmVlblk6ITAsdGFyZ2V0VG91Y2hlczohMCx0b0VsZW1lbnQ6ITAsdG91Y2hlczohMCx3aGljaDpmdW5jdGlvbihlKXt2YXIgdD1lLmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS53aGljaCYmYmUudGVzdChlLnR5cGUpP251bGwhPWUuY2hhckNvZGU/ZS5jaGFyQ29kZTplLmtleUNvZGU6IWUud2hpY2gmJnZvaWQgMCE9PXQmJndlLnRlc3QoZS50eXBlKT8xJnQ/MToyJnQ/Mzo0JnQ/MjowOmUud2hpY2h9fSxTLmV2ZW50LmFkZFByb3ApLFMuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oZSx0KXtTLmV2ZW50LnNwZWNpYWxbZV09e3NldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIEFlKHRoaXMsZSxTZSksITF9LHRyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gQWUodGhpcyxlKSwhMH0sZGVsZWdhdGVUeXBlOnR9fSksUy5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0Iixwb2ludGVyZW50ZXI6InBvaW50ZXJvdmVyIixwb2ludGVybGVhdmU6InBvaW50ZXJvdXQifSxmdW5jdGlvbihlLGkpe1MuZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOmksYmluZFR5cGU6aSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnJlbGF0ZWRUYXJnZXQscj1lLmhhbmRsZU9iajtyZXR1cm4gbiYmKG49PT10aGlzfHxTLmNvbnRhaW5zKHRoaXMsbikpfHwoZS50eXBlPXIub3JpZ1R5cGUsdD1yLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudHlwZT1pKSx0fX19KSxTLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIGtlKHRoaXMsZSx0LG4scil9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4ga2UodGhpcyxlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmosUyhlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZSsiLiIrci5uYW1lc3BhY2U6ci5vcmlnVHlwZSxyLnNlbGVjdG9yLHIuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGUpe2ZvcihpIGluIGUpdGhpcy5vZmYoaSx0LGVbaV0pO3JldHVybiB0aGlzfXJldHVybiExIT09dCYmImZ1bmN0aW9uIiE9dHlwZW9mIHR8fChuPXQsdD12b2lkIDApLCExPT09biYmKG49RWUpLHRoaXMuZWFjaChmdW5jdGlvbigpe1MuZXZlbnQucmVtb3ZlKHRoaXMsZSxuLHQpfSl9fSk7dmFyIE5lPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLERlPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGplPS9eXHMqPCEoPzpcW0NEQVRBXFt8LS0pfCg/OlxdXF18LS0pPlxzKiQvZztmdW5jdGlvbiBxZShlLHQpe3JldHVybiBBKGUsInRhYmxlIikmJkEoMTEhPT10Lm5vZGVUeXBlP3Q6dC5maXJzdENoaWxkLCJ0ciIpJiZTKGUpLmNoaWxkcmVuKCJ0Ym9keSIpWzBdfHxlfWZ1bmN0aW9uIExlKGUpe3JldHVybiBlLnR5cGU9KG51bGwhPT1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrZS50eXBlLGV9ZnVuY3Rpb24gSGUoZSl7cmV0dXJuInRydWUvIj09PShlLnR5cGV8fCIiKS5zbGljZSgwLDUpP2UudHlwZT1lLnR5cGUuc2xpY2UoNSk6ZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxlfWZ1bmN0aW9uIE9lKGUsdCl7dmFyIG4scixpLG8sYSxzO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihZLmhhc0RhdGEoZSkmJihzPVkuZ2V0KGUpLmV2ZW50cykpZm9yKGkgaW4gWS5yZW1vdmUodCwiaGFuZGxlIGV2ZW50cyIpLHMpZm9yKG49MCxyPXNbaV0ubGVuZ3RoO248cjtuKyspUy5ldmVudC5hZGQodCxpLHNbaV1bbl0pO1EuaGFzRGF0YShlKSYmKG89US5hY2Nlc3MoZSksYT1TLmV4dGVuZCh7fSxvKSxRLnNldCh0LGEpKX19ZnVuY3Rpb24gUGUobixyLGksbyl7cj1nKHIpO3ZhciBlLHQsYSxzLHUsbCxjPTAsZj1uLmxlbmd0aCxwPWYtMSxkPXJbMF0saD1tKGQpO2lmKGh8fDE8ZiYmInN0cmluZyI9PXR5cGVvZiBkJiYheS5jaGVja0Nsb25lJiZEZS50ZXN0KGQpKXJldHVybiBuLmVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bi5lcShlKTtoJiYoclswXT1kLmNhbGwodGhpcyxlLHQuaHRtbCgpKSksUGUodCxyLGksbyl9KTtpZihmJiYodD0oZT14ZShyLG5bMF0ub3duZXJEb2N1bWVudCwhMSxuLG8pKS5maXJzdENoaWxkLDE9PT1lLmNoaWxkTm9kZXMubGVuZ3RoJiYoZT10KSx0fHxvKSl7Zm9yKHM9KGE9Uy5tYXAodmUoZSwic2NyaXB0IiksTGUpKS5sZW5ndGg7YzxmO2MrKyl1PWUsYyE9PXAmJih1PVMuY2xvbmUodSwhMCwhMCkscyYmUy5tZXJnZShhLHZlKHUsInNjcmlwdCIpKSksaS5jYWxsKG5bY10sdSxjKTtpZihzKWZvcihsPWFbYS5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxTLm1hcChhLEhlKSxjPTA7YzxzO2MrKyl1PWFbY10saGUudGVzdCh1LnR5cGV8fCIiKSYmIVkuYWNjZXNzKHUsImdsb2JhbEV2YWwiKSYmUy5jb250YWlucyhsLHUpJiYodS5zcmMmJiJtb2R1bGUiIT09KHUudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCk/Uy5fZXZhbFVybCYmIXUubm9Nb2R1bGUmJlMuX2V2YWxVcmwodS5zcmMse25vbmNlOnUubm9uY2V8fHUuZ2V0QXR0cmlidXRlKCJub25jZSIpfSxsKTpiKHUudGV4dENvbnRlbnQucmVwbGFjZShqZSwiIiksdSxsKSl9cmV0dXJuIG59ZnVuY3Rpb24gUmUoZSx0LG4pe2Zvcih2YXIgcixpPXQ/Uy5maWx0ZXIodCxlKTplLG89MDtudWxsIT0ocj1pW29dKTtvKyspbnx8MSE9PXIubm9kZVR5cGV8fFMuY2xlYW5EYXRhKHZlKHIpKSxyLnBhcmVudE5vZGUmJihuJiZpZShyKSYmeWUodmUociwic2NyaXB0IikpLHIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyKSk7cmV0dXJuIGV9Uy5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjPWUuY2xvbmVOb2RlKCEwKSxmPWllKGUpO2lmKCEoeS5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8Uy5pc1hNTERvYyhlKSkpZm9yKGE9dmUoYykscj0wLGk9KG89dmUoZSkpLmxlbmd0aDtyPGk7cisrKXM9b1tyXSx1PWFbcl0sdm9pZCAwLCJpbnB1dCI9PT0obD11Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZwZS50ZXN0KHMudHlwZSk/dS5jaGVja2VkPXMuY2hlY2tlZDoiaW5wdXQiIT09bCYmInRleHRhcmVhIiE9PWx8fCh1LmRlZmF1bHRWYWx1ZT1zLmRlZmF1bHRWYWx1ZSk7aWYodClpZihuKWZvcihvPW98fHZlKGUpLGE9YXx8dmUoYykscj0wLGk9by5sZW5ndGg7cjxpO3IrKylPZShvW3JdLGFbcl0pO2Vsc2UgT2UoZSxjKTtyZXR1cm4gMDwoYT12ZShjLCJzY3JpcHQiKSkubGVuZ3RoJiZ5ZShhLCFmJiZ2ZShlLCJzY3JpcHQiKSksY30sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLHIsaT1TLmV2ZW50LnNwZWNpYWwsbz0wO3ZvaWQgMCE9PShuPWVbb10pO28rKylpZihWKG4pKXtpZih0PW5bWS5leHBhbmRvXSl7aWYodC5ldmVudHMpZm9yKHIgaW4gdC5ldmVudHMpaVtyXT9TLmV2ZW50LnJlbW92ZShuLHIpOlMucmVtb3ZlRXZlbnQobixyLHQuaGFuZGxlKTtuW1kuZXhwYW5kb109dm9pZCAwfW5bUS5leHBhbmRvXSYmKG5bUS5leHBhbmRvXT12b2lkIDApfX19KSxTLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGUpe3JldHVybiBSZSh0aGlzLGUsITApfSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIFJlKHRoaXMsZSl9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9TLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9ZSl9KX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gUGUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fHFlKHRoaXMsZSkuYXBwZW5kQ2hpbGQoZSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9cWUodGhpcyxlKTt0Lmluc2VydEJlZm9yZShlLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBQZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PTA7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoUy5jbGVhbkRhdGEodmUoZSwhMSkpLGUudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGwhPWUmJmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBTLmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiAkKHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09ZSYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmIU5lLnRlc3QoZSkmJiFnZVsoZGUuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9Uy5odG1sUHJlZmlsdGVyKGUpO3RyeXtmb3IoO248cjtuKyspMT09PSh0PXRoaXNbbl18fHt9KS5ub2RlVHlwZSYmKFMuY2xlYW5EYXRhKHZlKHQsITEpKSx0LmlubmVySFRNTD1lKTt0PTB9Y2F0Y2goZSl7fX10JiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIG49W107cmV0dXJuIFBlKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyZW50Tm9kZTtTLmluQXJyYXkodGhpcyxuKTwwJiYoUy5jbGVhbkRhdGEodmUodGhpcykpLHQmJnQucmVwbGFjZUNoaWxkKGUsdGhpcykpfSxuKX19KSxTLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihlLGEpe1MuZm5bZV09ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49W10scj1TKGUpLGk9ci5sZW5ndGgtMSxvPTA7bzw9aTtvKyspdD1vPT09aT90aGlzOnRoaXMuY2xvbmUoITApLFMocltvXSlbYV0odCksdS5hcHBseShuLHQuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgTWU9bmV3IFJlZ0V4cCgiXigiK2VlKyIpKD8hcHgpW2EteiVdKyQiLCJpIiksSWU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybiB0JiZ0Lm9wZW5lcnx8KHQ9QyksdC5nZXRDb21wdXRlZFN0eWxlKGUpfSxXZT1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPXt9O2ZvcihpIGluIHQpb1tpXT1lLnN0eWxlW2ldLGUuc3R5bGVbaV09dFtpXTtmb3IoaSBpbiByPW4uY2FsbChlKSx0KWUuc3R5bGVbaV09b1tpXTtyZXR1cm4gcn0sRmU9bmV3IFJlZ0V4cChuZS5qb2luKCJ8IiksImkiKTtmdW5jdGlvbiBCZShlLHQsbil7dmFyIHIsaSxvLGEscz1lLnN0eWxlO3JldHVybihuPW58fEllKGUpKSYmKCIiIT09KGE9bi5nZXRQcm9wZXJ0eVZhbHVlKHQpfHxuW3RdKXx8aWUoZSl8fChhPVMuc3R5bGUoZSx0KSksIXkucGl4ZWxCb3hTdHlsZXMoKSYmTWUudGVzdChhKSYmRmUudGVzdCh0KSYmKHI9cy53aWR0aCxpPXMubWluV2lkdGgsbz1zLm1heFdpZHRoLHMubWluV2lkdGg9cy5tYXhXaWR0aD1zLndpZHRoPWEsYT1uLndpZHRoLHMud2lkdGg9cixzLm1pbldpZHRoPWkscy5tYXhXaWR0aD1vKSksdm9pZCAwIT09YT9hKyIiOmF9ZnVuY3Rpb24gJGUoZSx0KXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7aWYoIWUoKSlyZXR1cm4odGhpcy5nZXQ9dCkuYXBwbHkodGhpcyxhcmd1bWVudHMpO2RlbGV0ZSB0aGlzLmdldH19fSFmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtpZihsKXt1LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHg7d2lkdGg6NjBweDttYXJnaW4tdG9wOjFweDtwYWRkaW5nOjA7Ym9yZGVyOjAiLGwuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmJvcmRlci1ib3g7b3ZlcmZsb3c6c2Nyb2xsO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NjAlO3RvcDoxJSIscmUuYXBwZW5kQ2hpbGQodSkuYXBwZW5kQ2hpbGQobCk7dmFyIGU9Qy5nZXRDb21wdXRlZFN0eWxlKGwpO249IjElIiE9PWUudG9wLHM9MTI9PT10KGUubWFyZ2luTGVmdCksbC5zdHlsZS5yaWdodD0iNjAlIixvPTM2PT09dChlLnJpZ2h0KSxyPTM2PT09dChlLndpZHRoKSxsLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIsaT0xMj09PXQobC5vZmZzZXRXaWR0aC8zKSxyZS5yZW1vdmVDaGlsZCh1KSxsPW51bGx9fWZ1bmN0aW9uIHQoZSl7cmV0dXJuIE1hdGgucm91bmQocGFyc2VGbG9hdChlKSl9dmFyIG4scixpLG8sYSxzLHU9RS5jcmVhdGVFbGVtZW50KCJkaXYiKSxsPUUuY3JlYXRlRWxlbWVudCgiZGl2Iik7bC5zdHlsZSYmKGwuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IixsLmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIseS5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWwuc3R5bGUuYmFja2dyb3VuZENsaXAsUy5leHRlbmQoeSx7Ym94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLHJ9LHBpeGVsQm94U3R5bGVzOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxvfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxufSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLHN9LHNjcm9sbGJveFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLGl9LHJlbGlhYmxlVHJEaW1lbnNpb25zOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI7cmV0dXJuIG51bGw9PWEmJihlPUUuY3JlYXRlRWxlbWVudCgidGFibGUiKSx0PUUuY3JlYXRlRWxlbWVudCgidHIiKSxuPUUuY3JlYXRlRWxlbWVudCgiZGl2IiksZS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4Iix0LnN0eWxlLmhlaWdodD0iMXB4IixuLnN0eWxlLmhlaWdodD0iOXB4IixyZS5hcHBlbmRDaGlsZChlKS5hcHBlbmRDaGlsZCh0KS5hcHBlbmRDaGlsZChuKSxyPUMuZ2V0Q29tcHV0ZWRTdHlsZSh0KSxhPTM8cGFyc2VJbnQoci5oZWlnaHQpLHJlLnJlbW92ZUNoaWxkKGUpKSxhfX0pKX0oKTt2YXIgX2U9WyJXZWJraXQiLCJNb3oiLCJtcyJdLHplPUUuY3JlYXRlRWxlbWVudCgiZGl2Iikuc3R5bGUsVWU9e307ZnVuY3Rpb24gWGUoZSl7dmFyIHQ9Uy5jc3NQcm9wc1tlXXx8VWVbZV07cmV0dXJuIHR8fChlIGluIHplP2U6VWVbZV09ZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSksbj1fZS5sZW5ndGg7d2hpbGUobi0tKWlmKChlPV9lW25dK3QpaW4gemUpcmV0dXJuIGV9KGUpfHxlKX12YXIgVmU9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEdlPS9eLS0vLFllPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxRZT17bGV0dGVyU3BhY2luZzoiMCIsZm9udFdlaWdodDoiNDAwIn07ZnVuY3Rpb24gSmUoZSx0LG4pe3ZhciByPXRlLmV4ZWModCk7cmV0dXJuIHI/TWF0aC5tYXgoMCxyWzJdLShufHwwKSkrKHJbM118fCJweCIpOnR9ZnVuY3Rpb24gS2UoZSx0LG4scixpLG8pe3ZhciBhPSJ3aWR0aCI9PT10PzE6MCxzPTAsdT0wO2lmKG49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpKXJldHVybiAwO2Zvcig7YTw0O2ErPTIpIm1hcmdpbiI9PT1uJiYodSs9Uy5jc3MoZSxuK25lW2FdLCEwLGkpKSxyPygiY29udGVudCI9PT1uJiYodS09Uy5jc3MoZSwicGFkZGluZyIrbmVbYV0sITAsaSkpLCJtYXJnaW4iIT09biYmKHUtPVMuY3NzKGUsImJvcmRlciIrbmVbYV0rIldpZHRoIiwhMCxpKSkpOih1Kz1TLmNzcyhlLCJwYWRkaW5nIituZVthXSwhMCxpKSwicGFkZGluZyIhPT1uP3UrPVMuY3NzKGUsImJvcmRlciIrbmVbYV0rIldpZHRoIiwhMCxpKTpzKz1TLmNzcyhlLCJib3JkZXIiK25lW2FdKyJXaWR0aCIsITAsaSkpO3JldHVybiFyJiYwPD1vJiYodSs9TWF0aC5tYXgoMCxNYXRoLmNlaWwoZVsib2Zmc2V0Iit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKV0tby11LXMtLjUpKXx8MCksdX1mdW5jdGlvbiBaZShlLHQsbil7dmFyIHI9SWUoZSksaT0oIXkuYm94U2l6aW5nUmVsaWFibGUoKXx8bikmJiJib3JkZXItYm94Ij09PVMuY3NzKGUsImJveFNpemluZyIsITEsciksbz1pLGE9QmUoZSx0LHIpLHM9Im9mZnNldCIrdFswXS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSk7aWYoTWUudGVzdChhKSl7aWYoIW4pcmV0dXJuIGE7YT0iYXV0byJ9cmV0dXJuKCF5LmJveFNpemluZ1JlbGlhYmxlKCkmJml8fCF5LnJlbGlhYmxlVHJEaW1lbnNpb25zKCkmJkEoZSwidHIiKXx8ImF1dG8iPT09YXx8IXBhcnNlRmxvYXQoYSkmJiJpbmxpbmUiPT09Uy5jc3MoZSwiZGlzcGxheSIsITEscikpJiZlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiYoaT0iYm9yZGVyLWJveCI9PT1TLmNzcyhlLCJib3hTaXppbmciLCExLHIpLChvPXMgaW4gZSkmJihhPWVbc10pKSwoYT1wYXJzZUZsb2F0KGEpfHwwKStLZShlLHQsbnx8KGk/ImJvcmRlciI6ImNvbnRlbnQiKSxvLHIsYSkrInB4In1mdW5jdGlvbiBldChlLHQsbixyLGkpe3JldHVybiBuZXcgZXQucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX1TLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPUJlKGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGdyaWRBcmVhOiEwLGdyaWRDb2x1bW46ITAsZ3JpZENvbHVtbkVuZDohMCxncmlkQ29sdW1uU3RhcnQ6ITAsZ3JpZFJvdzohMCxncmlkUm93RW5kOiEwLGdyaWRSb3dTdGFydDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnt9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIGksbyxhLHM9WCh0KSx1PUdlLnRlc3QodCksbD1lLnN0eWxlO2lmKHV8fCh0PVhlKHMpKSxhPVMuY3NzSG9va3NbdF18fFMuY3NzSG9va3Nbc10sdm9pZCAwPT09bilyZXR1cm4gYSYmImdldCJpbiBhJiZ2b2lkIDAhPT0oaT1hLmdldChlLCExLHIpKT9pOmxbdF07InN0cmluZyI9PT0obz10eXBlb2YgbikmJihpPXRlLmV4ZWMobikpJiZpWzFdJiYobj1zZShlLHQsaSksbz0ibnVtYmVyIiksbnVsbCE9biYmbj09biYmKCJudW1iZXIiIT09b3x8dXx8KG4rPWkmJmlbM118fChTLmNzc051bWJlcltzXT8iIjoicHgiKSkseS5jbGVhckNsb25lU3R5bGV8fCIiIT09bnx8MCE9PXQuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwobFt0XT0iaW5oZXJpdCIpLGEmJiJzZXQiaW4gYSYmdm9pZCAwPT09KG49YS5zZXQoZSxuLHIpKXx8KHU/bC5zZXRQcm9wZXJ0eSh0LG4pOmxbdF09bikpfX0sY3NzOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVgodCk7cmV0dXJuIEdlLnRlc3QodCl8fCh0PVhlKHMpKSwoYT1TLmNzc0hvb2tzW3RdfHxTLmNzc0hvb2tzW3NdKSYmImdldCJpbiBhJiYoaT1hLmdldChlLCEwLG4pKSx2b2lkIDA9PT1pJiYoaT1CZShlLHQscikpLCJub3JtYWwiPT09aSYmdCBpbiBRZSYmKGk9UWVbdF0pLCIiPT09bnx8bj8obz1wYXJzZUZsb2F0KGkpLCEwPT09bnx8aXNGaW5pdGUobyk/b3x8MDppKTppfX0pLFMuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSx1KXtTLmNzc0hvb2tzW3VdPXtnZXQ6ZnVuY3Rpb24oZSx0LG4pe2lmKHQpcmV0dXJuIVZlLnRlc3QoUy5jc3MoZSwiZGlzcGxheSIpKXx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCYmZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aD9aZShlLHUsbik6V2UoZSxZZSxmdW5jdGlvbigpe3JldHVybiBaZShlLHUsbil9KX0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPUllKGUpLG89IXkuc2Nyb2xsYm94U2l6ZSgpJiYiYWJzb2x1dGUiPT09aS5wb3NpdGlvbixhPShvfHxuKSYmImJvcmRlci1ib3giPT09Uy5jc3MoZSwiYm94U2l6aW5nIiwhMSxpKSxzPW4/S2UoZSx1LG4sYSxpKTowO3JldHVybiBhJiZvJiYocy09TWF0aC5jZWlsKGVbIm9mZnNldCIrdVswXS50b1VwcGVyQ2FzZSgpK3Uuc2xpY2UoMSldLXBhcnNlRmxvYXQoaVt1XSktS2UoZSx1LCJib3JkZXIiLCExLGkpLS41KSkscyYmKHI9dGUuZXhlYyh0KSkmJiJweCIhPT0oclszXXx8InB4IikmJihlLnN0eWxlW3VdPXQsdD1TLmNzcyhlLHUpKSxKZSgwLHQscyl9fX0pLFMuY3NzSG9va3MubWFyZ2luTGVmdD0kZSh5LnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlLHQpe2lmKHQpcmV0dXJuKHBhcnNlRmxvYXQoQmUoZSwibWFyZ2luTGVmdCIpKXx8ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LVdlKGUse21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSkpKyJweCJ9KSxTLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihpLG8pe1MuY3NzSG9va3NbaStvXT17ZXhwYW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49e30scj0ic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiICIpOltlXTt0PDQ7dCsrKW5baStuZVt0XStvXT1yW3RdfHxyW3QtMl18fHJbMF07cmV0dXJuIG59fSwibWFyZ2luIiE9PWkmJihTLmNzc0hvb2tzW2krb10uc2V0PUplKX0pLFMuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gJCh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30sYT0wO2lmKEFycmF5LmlzQXJyYXkodCkpe2ZvcihyPUllKGUpLGk9dC5sZW5ndGg7YTxpO2ErKylvW3RbYV1dPVMuY3NzKGUsdFthXSwhMSxyKTtyZXR1cm4gb31yZXR1cm4gdm9pZCAwIT09bj9TLnN0eWxlKGUsdCxuKTpTLmNzcyhlLHQpfSxlLHQsMTxhcmd1bWVudHMubGVuZ3RoKX19KSwoKFMuVHdlZW49ZXQpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZXQsaW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8Uy5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fChTLmNzc051bWJlcltuXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGU9ZXQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOmV0LnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPWV0LnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9dD1TLmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz10PWUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6ZXQucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0pLmluaXQucHJvdG90eXBlPWV0LnByb3RvdHlwZSwoZXQucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiAxIT09ZS5lbGVtLm5vZGVUeXBlfHxudWxsIT1lLmVsZW1bZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW2UucHJvcF0/ZS5lbGVtW2UucHJvcF06KHQ9Uy5jc3MoZS5lbGVtLGUucHJvcCwiIikpJiYiYXV0byIhPT10P3Q6MH0sc2V0OmZ1bmN0aW9uKGUpe1MuZnguc3RlcFtlLnByb3BdP1MuZnguc3RlcFtlLnByb3BdKGUpOjEhPT1lLmVsZW0ubm9kZVR5cGV8fCFTLmNzc0hvb2tzW2UucHJvcF0mJm51bGw9PWUuZWxlbS5zdHlsZVtYZShlLnByb3ApXT9lLmVsZW1bZS5wcm9wXT1lLm5vdzpTLnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KX19fSkuc2Nyb2xsVG9wPWV0LnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LFMuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6InN3aW5nIn0sUy5meD1ldC5wcm90b3R5cGUuaW5pdCxTLmZ4LnN0ZXA9e307dmFyIHR0LG50LHJ0LGl0LG90PS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxhdD0vcXVldWVIb29rcyQvO2Z1bmN0aW9uIHN0KCl7bnQmJighMT09PUUuaGlkZGVuJiZDLnJlcXVlc3RBbmltYXRpb25GcmFtZT9DLnJlcXVlc3RBbmltYXRpb25GcmFtZShzdCk6Qy5zZXRUaW1lb3V0KHN0LFMuZnguaW50ZXJ2YWwpLFMuZngudGljaygpKX1mdW5jdGlvbiB1dCgpe3JldHVybiBDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0dD12b2lkIDB9KSx0dD1EYXRlLm5vdygpfWZ1bmN0aW9uIGx0KGUsdCl7dmFyIG4scj0wLGk9e2hlaWdodDplfTtmb3IodD10PzE6MDtyPDQ7cis9Mi10KWlbIm1hcmdpbiIrKG49bmVbcl0pXT1pWyJwYWRkaW5nIituXT1lO3JldHVybiB0JiYoaS5vcGFjaXR5PWkud2lkdGg9ZSksaX1mdW5jdGlvbiBjdChlLHQsbil7Zm9yKHZhciByLGk9KGZ0LnR3ZWVuZXJzW3RdfHxbXSkuY29uY2F0KGZ0LnR3ZWVuZXJzWyIqIl0pLG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYocj1pW29dLmNhbGwobix0LGUpKXJldHVybiByfWZ1bmN0aW9uIGZ0KG8sZSx0KXt2YXIgbixhLHI9MCxpPWZ0LnByZWZpbHRlcnMubGVuZ3RoLHM9Uy5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoYSlyZXR1cm4hMTtmb3IodmFyIGU9dHR8fHV0KCksdD1NYXRoLm1heCgwLGwuc3RhcnRUaW1lK2wuZHVyYXRpb24tZSksbj0xLSh0L2wuZHVyYXRpb258fDApLHI9MCxpPWwudHdlZW5zLmxlbmd0aDtyPGk7cisrKWwudHdlZW5zW3JdLnJ1bihuKTtyZXR1cm4gcy5ub3RpZnlXaXRoKG8sW2wsbix0XSksbjwxJiZpP3Q6KGl8fHMubm90aWZ5V2l0aChvLFtsLDEsMF0pLHMucmVzb2x2ZVdpdGgobyxbbF0pLCExKX0sbD1zLnByb21pc2Uoe2VsZW06byxwcm9wczpTLmV4dGVuZCh7fSxlKSxvcHRzOlMuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzpTLmVhc2luZy5fZGVmYXVsdH0sdCksb3JpZ2luYWxQcm9wZXJ0aWVzOmUsb3JpZ2luYWxPcHRpb25zOnQsc3RhcnRUaW1lOnR0fHx1dCgpLGR1cmF0aW9uOnQuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGUsdCl7dmFyIG49Uy5Ud2VlbihvLGwub3B0cyxlLHQsbC5vcHRzLnNwZWNpYWxFYXNpbmdbZV18fGwub3B0cy5lYXNpbmcpO3JldHVybiBsLnR3ZWVucy5wdXNoKG4pLG59LHN0b3A6ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWU/bC50d2VlbnMubGVuZ3RoOjA7aWYoYSlyZXR1cm4gdGhpcztmb3IoYT0hMDt0PG47dCsrKWwudHdlZW5zW3RdLnJ1bigxKTtyZXR1cm4gZT8ocy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsLGVdKSk6cy5yZWplY3RXaXRoKG8sW2wsZV0pLHRoaXN9fSksYz1sLnByb3BzO2ZvcighZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhO2ZvcihuIGluIGUpaWYoaT10W3I9WChuKV0sbz1lW25dLEFycmF5LmlzQXJyYXkobykmJihpPW9bMV0sbz1lW25dPW9bMF0pLG4hPT1yJiYoZVtyXT1vLGRlbGV0ZSBlW25dKSwoYT1TLmNzc0hvb2tzW3JdKSYmImV4cGFuZCJpbiBhKWZvcihuIGluIG89YS5leHBhbmQobyksZGVsZXRlIGVbcl0sbyluIGluIGV8fChlW25dPW9bbl0sdFtuXT1pKTtlbHNlIHRbcl09aX0oYyxsLm9wdHMuc3BlY2lhbEVhc2luZyk7cjxpO3IrKylpZihuPWZ0LnByZWZpbHRlcnNbcl0uY2FsbChsLG8sYyxsLm9wdHMpKXJldHVybiBtKG4uc3RvcCkmJihTLl9xdWV1ZUhvb2tzKGwuZWxlbSxsLm9wdHMucXVldWUpLnN0b3A9bi5zdG9wLmJpbmQobikpLG47cmV0dXJuIFMubWFwKGMsY3QsbCksbShsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChvLGwpLGwucHJvZ3Jlc3MobC5vcHRzLnByb2dyZXNzKS5kb25lKGwub3B0cy5kb25lLGwub3B0cy5jb21wbGV0ZSkuZmFpbChsLm9wdHMuZmFpbCkuYWx3YXlzKGwub3B0cy5hbHdheXMpLFMuZngudGltZXIoUy5leHRlbmQodSx7ZWxlbTpvLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbH1TLkFuaW1hdGlvbj1TLmV4dGVuZChmdCx7dHdlZW5lcnM6eyIqIjpbZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZVR3ZWVuKGUsdCk7cmV0dXJuIHNlKG4uZWxlbSxlLHRlLmV4ZWModCksbiksbn1dfSx0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7bShlKT8odD1lLGU9WyIqIl0pOmU9ZS5tYXRjaChQKTtmb3IodmFyIG4scj0wLGk9ZS5sZW5ndGg7cjxpO3IrKyluPWVbcl0sZnQudHdlZW5lcnNbbl09ZnQudHdlZW5lcnNbbl18fFtdLGZ0LnR3ZWVuZXJzW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcnM6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjLGY9IndpZHRoImluIHR8fCJoZWlnaHQiaW4gdCxwPXRoaXMsZD17fSxoPWUuc3R5bGUsZz1lLm5vZGVUeXBlJiZhZShlKSx2PVkuZ2V0KGUsImZ4c2hvdyIpO2ZvcihyIGluIG4ucXVldWV8fChudWxsPT0oYT1TLl9xdWV1ZUhvb2tzKGUsImZ4IikpLnVucXVldWVkJiYoYS51bnF1ZXVlZD0wLHM9YS5lbXB0eS5maXJlLGEuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2EudW5xdWV1ZWR8fHMoKX0pLGEudW5xdWV1ZWQrKyxwLmFsd2F5cyhmdW5jdGlvbigpe3AuYWx3YXlzKGZ1bmN0aW9uKCl7YS51bnF1ZXVlZC0tLFMucXVldWUoZSwiZngiKS5sZW5ndGh8fGEuZW1wdHkuZmlyZSgpfSl9KSksdClpZihpPXRbcl0sb3QudGVzdChpKSl7aWYoZGVsZXRlIHRbcl0sbz1vfHwidG9nZ2xlIj09PWksaT09PShnPyJoaWRlIjoic2hvdyIpKXtpZigic2hvdyIhPT1pfHwhdnx8dm9pZCAwPT09dltyXSljb250aW51ZTtnPSEwfWRbcl09diYmdltyXXx8Uy5zdHlsZShlLHIpfWlmKCh1PSFTLmlzRW1wdHlPYmplY3QodCkpfHwhUy5pc0VtcHR5T2JqZWN0KGQpKWZvcihyIGluIGYmJjE9PT1lLm5vZGVUeXBlJiYobi5vdmVyZmxvdz1baC5vdmVyZmxvdyxoLm92ZXJmbG93WCxoLm92ZXJmbG93WV0sbnVsbD09KGw9diYmdi5kaXNwbGF5KSYmKGw9WS5nZXQoZSwiZGlzcGxheSIpKSwibm9uZSI9PT0oYz1TLmNzcyhlLCJkaXNwbGF5IikpJiYobD9jPWw6KGxlKFtlXSwhMCksbD1lLnN0eWxlLmRpc3BsYXl8fGwsYz1TLmNzcyhlLCJkaXNwbGF5IiksbGUoW2VdKSkpLCgiaW5saW5lIj09PWN8fCJpbmxpbmUtYmxvY2siPT09YyYmbnVsbCE9bCkmJiJub25lIj09PVMuY3NzKGUsImZsb2F0IikmJih1fHwocC5kb25lKGZ1bmN0aW9uKCl7aC5kaXNwbGF5PWx9KSxudWxsPT1sJiYoYz1oLmRpc3BsYXksbD0ibm9uZSI9PT1jPyIiOmMpKSxoLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxuLm92ZXJmbG93JiYoaC5vdmVyZmxvdz0iaGlkZGVuIixwLmFsd2F5cyhmdW5jdGlvbigpe2gub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxoLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGgub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSksdT0hMSxkKXV8fCh2PyJoaWRkZW4iaW4gdiYmKGc9di5oaWRkZW4pOnY9WS5hY2Nlc3MoZSwiZnhzaG93Iix7ZGlzcGxheTpsfSksbyYmKHYuaGlkZGVuPSFnKSxnJiZsZShbZV0sITApLHAuZG9uZShmdW5jdGlvbigpe2ZvcihyIGluIGd8fGxlKFtlXSksWS5yZW1vdmUoZSwiZnhzaG93IiksZClTLnN0eWxlKGUscixkW3JdKX0pKSx1PWN0KGc/dltyXTowLHIscCksciBpbiB2fHwodltyXT11LnN0YXJ0LGcmJih1LmVuZD11LnN0YXJ0LHUuc3RhcnQ9MCkpfV0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9mdC5wcmVmaWx0ZXJzLnVuc2hpZnQoZSk6ZnQucHJlZmlsdGVycy5wdXNoKGUpfX0pLFMuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT9TLmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fG0oZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIW0odCkmJnR9O3JldHVybiBTLmZ4Lm9mZj9yLmR1cmF0aW9uPTA6Im51bWJlciIhPXR5cGVvZiByLmR1cmF0aW9uJiYoci5kdXJhdGlvbiBpbiBTLmZ4LnNwZWVkcz9yLmR1cmF0aW9uPVMuZnguc3BlZWRzW3IuZHVyYXRpb25dOnIuZHVyYXRpb249Uy5meC5zcGVlZHMuX2RlZmF1bHQpLG51bGwhPXIucXVldWUmJiEwIT09ci5xdWV1ZXx8KHIucXVldWU9ImZ4Iiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bShyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmUy5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LFMuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKGFlKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbih0LGUsbixyKXt2YXIgaT1TLmlzRW1wdHlPYmplY3QodCksbz1TLnNwZWVkKGUsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIGU9ZnQodGhpcyxTLmV4dGVuZCh7fSx0KSxvKTsoaXx8WS5nZXQodGhpcywiZmluaXNoIikpJiZlLnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHwhMT09PW8ucXVldWU/dGhpcy5lYWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihpLGUsbyl7dmFyIGE9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChvKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBpJiYobz1lLGU9aSxpPXZvaWQgMCksZSYmdGhpcy5xdWV1ZShpfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT0hMCx0PW51bGwhPWkmJmkrInF1ZXVlSG9va3MiLG49Uy50aW1lcnMscj1ZLmdldCh0aGlzKTtpZih0KXJbdF0mJnJbdF0uc3RvcCYmYShyW3RdKTtlbHNlIGZvcih0IGluIHIpclt0XSYmclt0XS5zdG9wJiZhdC50ZXN0KHQpJiZhKHJbdF0pO2Zvcih0PW4ubGVuZ3RoO3QtLTspblt0XS5lbGVtIT09dGhpc3x8bnVsbCE9aSYmblt0XS5xdWV1ZSE9PWl8fChuW3RdLmFuaW0uc3RvcChvKSxlPSExLG4uc3BsaWNlKHQsMSkpOyFlJiZvfHxTLmRlcXVldWUodGhpcyxpKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuITEhPT1hJiYoYT1hfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZSx0PVkuZ2V0KHRoaXMpLG49dFthKyJxdWV1ZSJdLHI9dFthKyJxdWV1ZUhvb2tzIl0saT1TLnRpbWVycyxvPW4/bi5sZW5ndGg6MDtmb3IodC5maW5pc2g9ITAsUy5xdWV1ZSh0aGlzLGEsW10pLHImJnIuc3RvcCYmci5zdG9wLmNhbGwodGhpcywhMCksZT1pLmxlbmd0aDtlLS07KWlbZV0uZWxlbT09PXRoaXMmJmlbZV0ucXVldWU9PT1hJiYoaVtlXS5hbmltLnN0b3AoITApLGkuc3BsaWNlKGUsMSkpO2ZvcihlPTA7ZTxvO2UrKyluW2VdJiZuW2VdLmZpbmlzaCYmbltlXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgdC5maW5pc2h9KX19KSxTLmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUscil7dmFyIGk9Uy5mbltyXTtTLmZuW3JdPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUobHQociwhMCksZSx0LG4pfX0pLFMuZWFjaCh7c2xpZGVEb3duOmx0KCJzaG93Iiksc2xpZGVVcDpsdCgiaGlkZSIpLHNsaWRlVG9nZ2xlOmx0KCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGUscil7Uy5mbltlXT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuYW5pbWF0ZShyLGUsdCxuKX19KSxTLnRpbWVycz1bXSxTLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgZSx0PTAsbj1TLnRpbWVycztmb3IodHQ9RGF0ZS5ub3coKTt0PG4ubGVuZ3RoO3QrKykoZT1uW3RdKSgpfHxuW3RdIT09ZXx8bi5zcGxpY2UodC0tLDEpO24ubGVuZ3RofHxTLmZ4LnN0b3AoKSx0dD12b2lkIDB9LFMuZngudGltZXI9ZnVuY3Rpb24oZSl7Uy50aW1lcnMucHVzaChlKSxTLmZ4LnN0YXJ0KCl9LFMuZnguaW50ZXJ2YWw9MTMsUy5meC5zdGFydD1mdW5jdGlvbigpe250fHwobnQ9ITAsc3QoKSl9LFMuZnguc3RvcD1mdW5jdGlvbigpe250PW51bGx9LFMuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LFMuZm4uZGVsYXk9ZnVuY3Rpb24ocixlKXtyZXR1cm4gcj1TLmZ4JiZTLmZ4LnNwZWVkc1tyXXx8cixlPWV8fCJmeCIsdGhpcy5xdWV1ZShlLGZ1bmN0aW9uKGUsdCl7dmFyIG49Qy5zZXRUaW1lb3V0KGUscik7dC5zdG9wPWZ1bmN0aW9uKCl7Qy5jbGVhclRpbWVvdXQobil9fSl9LHJ0PUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxpdD1FLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLmFwcGVuZENoaWxkKEUuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpLHJ0LnR5cGU9ImNoZWNrYm94Iix5LmNoZWNrT249IiIhPT1ydC52YWx1ZSx5Lm9wdFNlbGVjdGVkPWl0LnNlbGVjdGVkLChydD1FLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnZhbHVlPSJ0IixydC50eXBlPSJyYWRpbyIseS5yYWRpb1ZhbHVlPSJ0Ij09PXJ0LnZhbHVlO3ZhciBwdCxkdD1TLmV4cHIuYXR0ckhhbmRsZTtTLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQpe3JldHVybiAkKHRoaXMsUy5hdHRyLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtTLnJlbW92ZUF0dHIodGhpcyxlKX0pfX0pLFMuZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZS5nZXRBdHRyaWJ1dGU/Uy5wcm9wKGUsdCxuKTooMT09PW8mJlMuaXNYTUxEb2MoZSl8fChpPVMuYXR0ckhvb2tzW3QudG9Mb3dlckNhc2UoKV18fChTLmV4cHIubWF0Y2guYm9vbC50ZXN0KHQpP3B0OnZvaWQgMCkpLHZvaWQgMCE9PW4/bnVsbD09PW4/dm9pZCBTLnJlbW92ZUF0dHIoZSx0KTppJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjooZS5zZXRBdHRyaWJ1dGUodCxuKyIiKSxuKTppJiYiZ2V0ImluIGkmJm51bGwhPT0ocj1pLmdldChlLHQpKT9yOm51bGw9PShyPVMuZmluZC5hdHRyKGUsdCkpP3ZvaWQgMDpyKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZigheS5yYWRpb1ZhbHVlJiYicmFkaW8iPT09dCYmQShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MCxpPXQmJnQubWF0Y2goUCk7aWYoaSYmMT09PWUubm9kZVR5cGUpd2hpbGUobj1pW3IrK10pZS5yZW1vdmVBdHRyaWJ1dGUobil9fSkscHQ9e3NldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuITE9PT10P1MucmVtb3ZlQXR0cihlLG4pOmUuc2V0QXR0cmlidXRlKG4sbiksbn19LFMuZWFjaChTLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihlLHQpe3ZhciBhPWR0W3RdfHxTLmZpbmQuYXR0cjtkdFt0XT1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvPXQudG9Mb3dlckNhc2UoKTtyZXR1cm4gbnx8KGk9ZHRbb10sZHRbb109cixyPW51bGwhPWEoZSx0LG4pP286bnVsbCxkdFtvXT1pKSxyfX0pO3ZhciBodD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLGd0PS9eKD86YXxhcmVhKSQvaTtmdW5jdGlvbiB2dChlKXtyZXR1cm4oZS5tYXRjaChQKXx8W10pLmpvaW4oIiAiKX1mdW5jdGlvbiB5dChlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIn1mdW5jdGlvbiBtdChlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lOiJzdHJpbmciPT10eXBlb2YgZSYmZS5tYXRjaChQKXx8W119Uy5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gJCh0aGlzLFMucHJvcCxlLHQsMTxhcmd1bWVudHMubGVuZ3RoKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbUy5wcm9wRml4W2VdfHxlXX0pfX0pLFMuZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89ZS5ub2RlVHlwZTtpZigzIT09byYmOCE9PW8mJjIhPT1vKXJldHVybiAxPT09byYmUy5pc1hNTERvYyhlKXx8KHQ9Uy5wcm9wRml4W3RdfHx0LGk9Uy5wcm9wSG9va3NbdF0pLHZvaWQgMCE9PW4/aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6ZVt0XT1uOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6ZVt0XX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PVMuZmluZC5hdHRyKGUsInRhYmluZGV4Iik7cmV0dXJuIHQ/cGFyc2VJbnQodCwxMCk6aHQudGVzdChlLm5vZGVOYW1lKXx8Z3QudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9fSkseS5vcHRTZWxlY3RlZHx8KFMucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiZ0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7dCYmKHQuc2VsZWN0ZWRJbmRleCx0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KX19KSxTLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe1MucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KSxTLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24odCl7dmFyIGUsbixyLGksbyxhLHMsdT0wO2lmKG0odCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLmFkZENsYXNzKHQuY2FsbCh0aGlzLGUseXQodGhpcykpKX0pO2lmKChlPW10KHQpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT15dChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrdnQoaSkrIiAiKXthPTA7d2hpbGUobz1lW2ErK10pci5pbmRleE9mKCIgIitvKyIgIik8MCYmKHIrPW8rIiAiKTtpIT09KHM9dnQocikpJiZuLnNldEF0dHJpYnV0ZSgiY2xhc3MiLHMpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvLGEscyx1PTA7aWYobSh0KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe1ModGhpcykucmVtb3ZlQ2xhc3ModC5jYWxsKHRoaXMsZSx5dCh0aGlzKSkpfSk7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuYXR0cigiY2xhc3MiLCIiKTtpZigoZT1tdCh0KSkubGVuZ3RoKXdoaWxlKG49dGhpc1t1KytdKWlmKGk9eXQobikscj0xPT09bi5ub2RlVHlwZSYmIiAiK3Z0KGkpKyIgIil7YT0wO3doaWxlKG89ZVthKytdKXdoaWxlKC0xPHIuaW5kZXhPZigiICIrbysiICIpKXI9ci5yZXBsYWNlKCIgIitvKyIgIiwiICIpO2khPT0ocz12dChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGksdCl7dmFyIG89dHlwZW9mIGksYT0ic3RyaW5nIj09PW98fEFycmF5LmlzQXJyYXkoaSk7cmV0dXJuImJvb2xlYW4iPT10eXBlb2YgdCYmYT90P3RoaXMuYWRkQ2xhc3MoaSk6dGhpcy5yZW1vdmVDbGFzcyhpKTptKGkpP3RoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLnRvZ2dsZUNsYXNzKGkuY2FsbCh0aGlzLGUseXQodGhpcyksdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZSx0LG4scjtpZihhKXt0PTAsbj1TKHRoaXMpLHI9bXQoaSk7d2hpbGUoZT1yW3QrK10pbi5oYXNDbGFzcyhlKT9uLnJlbW92ZUNsYXNzKGUpOm4uYWRkQ2xhc3MoZSl9ZWxzZSB2b2lkIDAhPT1pJiYiYm9vbGVhbiIhPT1vfHwoKGU9eXQodGhpcykpJiZZLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIixlKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIixlfHwhMT09PWk/IiI6WS5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIikpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj0wO3Q9IiAiK2UrIiAiO3doaWxlKG49dGhpc1tyKytdKWlmKDE9PT1uLm5vZGVUeXBlJiYtMTwoIiAiK3Z0KHl0KG4pKSsiICIpLmluZGV4T2YodCkpcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIHh0PS9cci9nO1MuZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24obil7dmFyIHIsZSxpLHQ9dGhpc1swXTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT1tKG4pLHRoaXMuZWFjaChmdW5jdGlvbihlKXt2YXIgdDsxPT09dGhpcy5ub2RlVHlwZSYmKG51bGw9PSh0PWk/bi5jYWxsKHRoaXMsZSxTKHRoaXMpLnZhbCgpKTpuKT90PSIiOiJudW1iZXIiPT10eXBlb2YgdD90Kz0iIjpBcnJheS5pc0FycmF5KHQpJiYodD1TLm1hcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSksKHI9Uy52YWxIb29rc1t0aGlzLnR5cGVdfHxTLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pJiYic2V0ImluIHImJnZvaWQgMCE9PXIuc2V0KHRoaXMsdCwidmFsdWUiKXx8KHRoaXMudmFsdWU9dCkpfSkpOnQ/KHI9Uy52YWxIb29rc1t0LnR5cGVdfHxTLnZhbEhvb2tzW3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pJiYiZ2V0ImluIHImJnZvaWQgMCE9PShlPXIuZ2V0KHQsInZhbHVlIikpP2U6InN0cmluZyI9PXR5cGVvZihlPXQudmFsdWUpP2UucmVwbGFjZSh4dCwiIik6bnVsbD09ZT8iIjplOnZvaWQgMH19KSxTLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PVMuZmluZC5hdHRyKGUsInZhbHVlIik7cmV0dXJuIG51bGwhPXQ/dDp2dChTLnRleHQoZSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9ZS5vcHRpb25zLG89ZS5zZWxlY3RlZEluZGV4LGE9InNlbGVjdC1vbmUiPT09ZS50eXBlLHM9YT9udWxsOltdLHU9YT9vKzE6aS5sZW5ndGg7Zm9yKHI9bzwwP3U6YT9vOjA7cjx1O3IrKylpZigoKG49aVtyXSkuc2VsZWN0ZWR8fHI9PT1vKSYmIW4uZGlzYWJsZWQmJighbi5wYXJlbnROb2RlLmRpc2FibGVkfHwhQShuLnBhcmVudE5vZGUsIm9wdGdyb3VwIikpKXtpZih0PVMobikudmFsKCksYSlyZXR1cm4gdDtzLnB1c2godCl9cmV0dXJuIHN9LHNldDpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLm9wdGlvbnMsbz1TLm1ha2VBcnJheSh0KSxhPWkubGVuZ3RoO3doaWxlKGEtLSkoKHI9aVthXSkuc2VsZWN0ZWQ9LTE8Uy5pbkFycmF5KFMudmFsSG9va3Mub3B0aW9uLmdldChyKSxvKSkmJihuPSEwKTtyZXR1cm4gbnx8KGUuc2VsZWN0ZWRJbmRleD0tMSksb319fX0pLFMuZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe1MudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlLHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIGUuY2hlY2tlZD0tMTxTLmluQXJyYXkoUyhlKS52YWwoKSx0KX19LHkuY2hlY2tPbnx8KFMudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoInZhbHVlIik/Im9uIjplLnZhbHVlfSl9KSx5LmZvY3VzaW49Im9uZm9jdXNpbiJpbiBDO3ZhciBidD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sd3Q9ZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX07Uy5leHRlbmQoUy5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscyx1LGwsYyxmLHA9W258fEVdLGQ9di5jYWxsKGUsInR5cGUiKT9lLnR5cGU6ZSxoPXYuY2FsbChlLCJuYW1lc3BhY2UiKT9lLm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKG89Zj1hPW49bnx8RSwzIT09bi5ub2RlVHlwZSYmOCE9PW4ubm9kZVR5cGUmJiFidC50ZXN0KGQrUy5ldmVudC50cmlnZ2VyZWQpJiYoLTE8ZC5pbmRleE9mKCIuIikmJihkPShoPWQuc3BsaXQoIi4iKSkuc2hpZnQoKSxoLnNvcnQoKSksdT1kLmluZGV4T2YoIjoiKTwwJiYib24iK2QsKGU9ZVtTLmV4cGFuZG9dP2U6bmV3IFMuRXZlbnQoZCwib2JqZWN0Ij09dHlwZW9mIGUmJmUpKS5pc1RyaWdnZXI9cj8yOjMsZS5uYW1lc3BhY2U9aC5qb2luKCIuIiksZS5ybmFtZXNwYWNlPWUubmFtZXNwYWNlP25ldyBSZWdFeHAoIihefFxcLikiK2guam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCxlLnJlc3VsdD12b2lkIDAsZS50YXJnZXR8fChlLnRhcmdldD1uKSx0PW51bGw9PXQ/W2VdOlMubWFrZUFycmF5KHQsW2VdKSxjPVMuZXZlbnQuc3BlY2lhbFtkXXx8e30scnx8IWMudHJpZ2dlcnx8ITEhPT1jLnRyaWdnZXIuYXBwbHkobix0KSkpe2lmKCFyJiYhYy5ub0J1YmJsZSYmIXgobikpe2ZvcihzPWMuZGVsZWdhdGVUeXBlfHxkLGJ0LnRlc3QocytkKXx8KG89by5wYXJlbnROb2RlKTtvO289by5wYXJlbnROb2RlKXAucHVzaChvKSxhPW87YT09PShuLm93bmVyRG9jdW1lbnR8fEUpJiZwLnB1c2goYS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3d8fEMpfWk9MDt3aGlsZSgobz1wW2krK10pJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWY9byxlLnR5cGU9MTxpP3M6Yy5iaW5kVHlwZXx8ZCwobD0oWS5nZXQobywiZXZlbnRzIil8fE9iamVjdC5jcmVhdGUobnVsbCkpW2UudHlwZV0mJlkuZ2V0KG8sImhhbmRsZSIpKSYmbC5hcHBseShvLHQpLChsPXUmJm9bdV0pJiZsLmFwcGx5JiZWKG8pJiYoZS5yZXN1bHQ9bC5hcHBseShvLHQpLCExPT09ZS5yZXN1bHQmJmUucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGUudHlwZT1kLHJ8fGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fGMuX2RlZmF1bHQmJiExIT09Yy5fZGVmYXVsdC5hcHBseShwLnBvcCgpLHQpfHwhVihuKXx8dSYmbShuW2RdKSYmIXgobikmJigoYT1uW3VdKSYmKG5bdV09bnVsbCksUy5ldmVudC50cmlnZ2VyZWQ9ZCxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYuYWRkRXZlbnRMaXN0ZW5lcihkLHd0KSxuW2RdKCksZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZmLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCx3dCksUy5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGEmJihuW3VdPWEpKSxlLnJlc3VsdH19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1TLmV4dGVuZChuZXcgUy5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITB9KTtTLmV2ZW50LnRyaWdnZXIocixudWxsLHQpfX0pLFMuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1MuZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO2lmKG4pcmV0dXJuIFMuZXZlbnQudHJpZ2dlcihlLHQsbiwhMCl9fSkseS5mb2N1c2lufHxTLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKG4scil7dmFyIGk9ZnVuY3Rpb24oZSl7Uy5ldmVudC5zaW11bGF0ZShyLGUudGFyZ2V0LFMuZXZlbnQuZml4KGUpKX07Uy5ldmVudC5zcGVjaWFsW3JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcy5kb2N1bWVudHx8dGhpcyx0PVkuYWNjZXNzKGUscik7dHx8ZS5hZGRFdmVudExpc3RlbmVyKG4saSwhMCksWS5hY2Nlc3MoZSxyLCh0fHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMuZG9jdW1lbnR8fHRoaXMsdD1ZLmFjY2VzcyhlLHIpLTE7dD9ZLmFjY2VzcyhlLHIsdCk6KGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLGksITApLFkucmVtb3ZlKGUscikpfX19KTt2YXIgVHQ9Qy5sb2NhdGlvbixDdD17Z3VpZDpEYXRlLm5vdygpfSxFdD0vXD8vO1MucGFyc2VYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7dD0obmV3IEMuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChlKXt0PXZvaWQgMH1yZXR1cm4gdCYmIXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RofHxTLmVycm9yKCJJbnZhbGlkIFhNTDogIitlKSx0fTt2YXIgU3Q9L1xbXF0kLyxrdD0vXHI/XG4vZyxBdD0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksTnQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO2Z1bmN0aW9uIER0KG4sZSxyLGkpe3ZhciB0O2lmKEFycmF5LmlzQXJyYXkoZSkpUy5lYWNoKGUsZnVuY3Rpb24oZSx0KXtyfHxTdC50ZXN0KG4pP2kobix0KTpEdChuKyJbIisoIm9iamVjdCI9PXR5cGVvZiB0JiZudWxsIT10P2U6IiIpKyJdIix0LHIsaSl9KTtlbHNlIGlmKHJ8fCJvYmplY3QiIT09dyhlKSlpKG4sZSk7ZWxzZSBmb3IodCBpbiBlKUR0KG4rIlsiK3QrIl0iLGVbdF0scixpKX1TLnBhcmFtPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPWZ1bmN0aW9uKGUsdCl7dmFyIG49bSh0KT90KCk6dDtyW3IubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChudWxsPT1uPyIiOm4pfTtpZihudWxsPT1lKXJldHVybiIiO2lmKEFycmF5LmlzQXJyYXkoZSl8fGUuanF1ZXJ5JiYhUy5pc1BsYWluT2JqZWN0KGUpKVMuZWFjaChlLGZ1bmN0aW9uKCl7aSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihuIGluIGUpRHQobixlW25dLHQsaSk7cmV0dXJuIHIuam9pbigiJiIpfSxTLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIFMucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT1TLnByb3AodGhpcywiZWxlbWVudHMiKTtyZXR1cm4gZT9TLm1ha2VBcnJheShlKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFTKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmTnQudGVzdCh0aGlzLm5vZGVOYW1lKSYmIUF0LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFwZS50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPVModGhpcykudmFsKCk7cmV0dXJuIG51bGw9PW4/bnVsbDpBcnJheS5pc0FycmF5KG4pP1MubWFwKG4sZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShrdCwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2Uoa3QsIlxyXG4iKX19KS5nZXQoKX19KTt2YXIganQ9LyUyMC9nLHF0PS8jLiokLyxMdD0vKFs/Jl0pXz1bXiZdKi8sSHQ9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxPdD0vXig/OkdFVHxIRUFEKSQvLFB0PS9eXC9cLy8sUnQ9e30sTXQ9e30sSXQ9IiovIi5jb25jYXQoIioiKSxXdD1FLmNyZWF0ZUVsZW1lbnQoImEiKTtmdW5jdGlvbiBGdChvKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXsic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT0iKiIpO3ZhciBuLHI9MCxpPWUudG9Mb3dlckNhc2UoKS5tYXRjaChQKXx8W107aWYobSh0KSl3aGlsZShuPWlbcisrXSkiKyI9PT1uWzBdPyhuPW4uc2xpY2UoMSl8fCIqIiwob1tuXT1vW25dfHxbXSkudW5zaGlmdCh0KSk6KG9bbl09b1tuXXx8W10pLnB1c2godCl9fWZ1bmN0aW9uIEJ0KHQsaSxvLGEpe3ZhciBzPXt9LHU9dD09PU10O2Z1bmN0aW9uIGwoZSl7dmFyIHI7cmV0dXJuIHNbZV09ITAsUy5lYWNoKHRbZV18fFtdLGZ1bmN0aW9uKGUsdCl7dmFyIG49dChpLG8sYSk7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBufHx1fHxzW25dP3U/IShyPW4pOnZvaWQgMDooaS5kYXRhVHlwZXMudW5zaGlmdChuKSxsKG4pLCExKX0pLHJ9cmV0dXJuIGwoaS5kYXRhVHlwZXNbMF0pfHwhc1siKiJdJiZsKCIqIil9ZnVuY3Rpb24gJHQoZSx0KXt2YXIgbixyLGk9Uy5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihuIGluIHQpdm9pZCAwIT09dFtuXSYmKChpW25dP2U6cnx8KHI9e30pKVtuXT10W25dKTtyZXR1cm4gciYmUy5leHRlbmQoITAsZSxyKSxlfVd0LmhyZWY9VHQuaHJlZixTLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6VHQuaHJlZix0eXBlOiJHRVQiLGlzTG9jYWw6L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8udGVzdChUdC5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLGFjY2VwdHM6eyIqIjpJdCx0ZXh0OiJ0ZXh0L3BsYWluIixodG1sOiJ0ZXh0L2h0bWwiLHhtbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0In0sY29udGVudHM6e3htbDovXGJ4bWxcYi8saHRtbDovXGJodG1sLyxqc29uOi9cYmpzb25cYi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjpKU09OLnBhcnNlLCJ0ZXh0IHhtbCI6Uy5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/JHQoJHQoZSxTLmFqYXhTZXR0aW5ncyksdCk6JHQoUy5hamF4U2V0dGluZ3MsZSl9LGFqYXhQcmVmaWx0ZXI6RnQoUnQpLGFqYXhUcmFuc3BvcnQ6RnQoTXQpLGFqYXg6ZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLHQ9dHx8e307dmFyIGMsZixwLG4sZCxyLGgsZyxpLG8sdj1TLmFqYXhTZXR1cCh7fSx0KSx5PXYuY29udGV4dHx8dixtPXYuY29udGV4dCYmKHkubm9kZVR5cGV8fHkuanF1ZXJ5KT9TKHkpOlMuZXZlbnQseD1TLkRlZmVycmVkKCksYj1TLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSx3PXYuc3RhdHVzQ29kZXx8e30sYT17fSxzPXt9LHU9ImNhbmNlbGVkIixUPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoaCl7aWYoIW4pe249e307d2hpbGUodD1IdC5leGVjKHApKW5bdFsxXS50b0xvd2VyQ2FzZSgpKyIgIl09KG5bdFsxXS50b0xvd2VyQ2FzZSgpKyIgIl18fFtdKS5jb25jYXQodFsyXSl9dD1uW2UudG9Mb3dlckNhc2UoKSsiICJdfXJldHVybiBudWxsPT10P251bGw6dC5qb2luKCIsICIpfSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gaD9wOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09aCYmKGU9c1tlLnRvTG93ZXJDYXNlKCldPXNbZS50b0xvd2VyQ2FzZSgpXXx8ZSxhW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWgmJih2Lm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZihoKVQuYWx3YXlzKGVbVC5zdGF0dXNdKTtlbHNlIGZvcih0IGluIGUpd1t0XT1bd1t0XSxlW3RdXTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8dTtyZXR1cm4gYyYmYy5hYm9ydCh0KSxsKDAsdCksdGhpc319O2lmKHgucHJvbWlzZShUKSx2LnVybD0oKGV8fHYudXJsfHxUdC5ocmVmKSsiIikucmVwbGFjZShQdCxUdC5wcm90b2NvbCsiLy8iKSx2LnR5cGU9dC5tZXRob2R8fHQudHlwZXx8di5tZXRob2R8fHYudHlwZSx2LmRhdGFUeXBlcz0odi5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKFApfHxbIiJdLG51bGw9PXYuY3Jvc3NEb21haW4pe3I9RS5jcmVhdGVFbGVtZW50KCJhIik7dHJ5e3IuaHJlZj12LnVybCxyLmhyZWY9ci5ocmVmLHYuY3Jvc3NEb21haW49V3QucHJvdG9jb2wrIi8vIitXdC5ob3N0IT1yLnByb3RvY29sKyIvLyIrci5ob3N0fWNhdGNoKGUpe3YuY3Jvc3NEb21haW49ITB9fWlmKHYuZGF0YSYmdi5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiB2LmRhdGEmJih2LmRhdGE9Uy5wYXJhbSh2LmRhdGEsdi50cmFkaXRpb25hbCkpLEJ0KFJ0LHYsdCxUKSxoKXJldHVybiBUO2ZvcihpIGluKGc9Uy5ldmVudCYmdi5nbG9iYWwpJiYwPT1TLmFjdGl2ZSsrJiZTLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLHYudHlwZT12LnR5cGUudG9VcHBlckNhc2UoKSx2Lmhhc0NvbnRlbnQ9IU90LnRlc3Qodi50eXBlKSxmPXYudXJsLnJlcGxhY2UocXQsIiIpLHYuaGFzQ29udGVudD92LmRhdGEmJnYucHJvY2Vzc0RhdGEmJjA9PT0odi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiYodi5kYXRhPXYuZGF0YS5yZXBsYWNlKGp0LCIrIikpOihvPXYudXJsLnNsaWNlKGYubGVuZ3RoKSx2LmRhdGEmJih2LnByb2Nlc3NEYXRhfHwic3RyaW5nIj09dHlwZW9mIHYuZGF0YSkmJihmKz0oRXQudGVzdChmKT8iJiI6Ij8iKSt2LmRhdGEsZGVsZXRlIHYuZGF0YSksITE9PT12LmNhY2hlJiYoZj1mLnJlcGxhY2UoTHQsIiQxIiksbz0oRXQudGVzdChmKT8iJiI6Ij8iKSsiXz0iK0N0Lmd1aWQrKytvKSx2LnVybD1mK28pLHYuaWZNb2RpZmllZCYmKFMubGFzdE1vZGlmaWVkW2ZdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixTLmxhc3RNb2RpZmllZFtmXSksUy5ldGFnW2ZdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLFMuZXRhZ1tmXSkpLCh2LmRhdGEmJnYuaGFzQ29udGVudCYmITEhPT12LmNvbnRlbnRUeXBlfHx0LmNvbnRlbnRUeXBlKSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLHYuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0Iix2LmRhdGFUeXBlc1swXSYmdi5hY2NlcHRzW3YuZGF0YVR5cGVzWzBdXT92LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dKygiKiIhPT12LmRhdGFUeXBlc1swXT8iLCAiK0l0KyI7IHE9MC4wMSI6IiIpOnYuYWNjZXB0c1siKiJdKSx2LmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGksdi5oZWFkZXJzW2ldKTtpZih2LmJlZm9yZVNlbmQmJighMT09PXYuYmVmb3JlU2VuZC5jYWxsKHksVCx2KXx8aCkpcmV0dXJuIFQuYWJvcnQoKTtpZih1PSJhYm9ydCIsYi5hZGQodi5jb21wbGV0ZSksVC5kb25lKHYuc3VjY2VzcyksVC5mYWlsKHYuZXJyb3IpLGM9QnQoTXQsdix0LFQpKXtpZihULnJlYWR5U3RhdGU9MSxnJiZtLnRyaWdnZXIoImFqYXhTZW5kIixbVCx2XSksaClyZXR1cm4gVDt2LmFzeW5jJiYwPHYudGltZW91dCYmKGQ9Qy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7VC5hYm9ydCgidGltZW91dCIpfSx2LnRpbWVvdXQpKTt0cnl7aD0hMSxjLnNlbmQoYSxsKX1jYXRjaChlKXtpZihoKXRocm93IGU7bCgtMSxlKX19ZWxzZSBsKC0xLCJObyBUcmFuc3BvcnQiKTtmdW5jdGlvbiBsKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD10O2h8fChoPSEwLGQmJkMuY2xlYXJUaW1lb3V0KGQpLGM9dm9pZCAwLHA9cnx8IiIsVC5yZWFkeVN0YXRlPTA8ZT80OjAsaT0yMDA8PWUmJmU8MzAwfHwzMDQ9PT1lLG4mJihzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSx2b2lkIDA9PT1yJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYocilmb3IoaSBpbiBzKWlmKHNbaV0mJnNbaV0udGVzdChyKSl7dS51bnNoaWZ0KGkpO2JyZWFrfWlmKHVbMF1pbiBuKW89dVswXTtlbHNle2ZvcihpIGluIG4pe2lmKCF1WzBdfHxlLmNvbnZlcnRlcnNbaSsiICIrdVswXV0pe289aTticmVha31hfHwoYT1pKX1vPW98fGF9aWYobylyZXR1cm4gbyE9PXVbMF0mJnUudW5zaGlmdChvKSxuW29dfSh2LFQsbikpLCFpJiYtMTxTLmluQXJyYXkoInNjcmlwdCIsdi5kYXRhVHlwZXMpJiYodi5jb252ZXJ0ZXJzWyJ0ZXh0IHNjcmlwdCJdPWZ1bmN0aW9uKCl7fSkscz1mdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLGEscyx1LGw9e30sYz1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGNbMV0pZm9yKGEgaW4gZS5jb252ZXJ0ZXJzKWxbYS50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbYV07bz1jLnNoaWZ0KCk7d2hpbGUobylpZihlLnJlc3BvbnNlRmllbGRzW29dJiYobltlLnJlc3BvbnNlRmllbGRzW29dXT10KSwhdSYmciYmZS5kYXRhRmlsdGVyJiYodD1lLmRhdGFGaWx0ZXIodCxlLmRhdGFUeXBlKSksdT1vLG89Yy5zaGlmdCgpKWlmKCIqIj09PW8pbz11O2Vsc2UgaWYoIioiIT09dSYmdSE9PW8pe2lmKCEoYT1sW3UrIiAiK29dfHxsWyIqICIrb10pKWZvcihpIGluIGwpaWYoKHM9aS5zcGxpdCgiICIpKVsxXT09PW8mJihhPWxbdSsiICIrc1swXV18fGxbIiogIitzWzBdXSkpeyEwPT09YT9hPWxbaV06ITAhPT1sW2ldJiYobz1zWzBdLGMudW5zaGlmdChzWzFdKSk7YnJlYWt9aWYoITAhPT1hKWlmKGEmJmVbInRocm93cyJdKXQ9YSh0KTtlbHNlIHRyeXt0PWEodCl9Y2F0Y2goZSl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6YT9lOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitvfX19cmV0dXJue3N0YXRlOiJzdWNjZXNzIixkYXRhOnR9fSh2LHMsVCxpKSxpPyh2LmlmTW9kaWZpZWQmJigodT1ULmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIikpJiYoUy5sYXN0TW9kaWZpZWRbZl09dSksKHU9VC5nZXRSZXNwb25zZUhlYWRlcigiZXRhZyIpKSYmKFMuZXRhZ1tmXT11KSksMjA0PT09ZXx8IkhFQUQiPT09di50eXBlP2w9Im5vY29udGVudCI6MzA0PT09ZT9sPSJub3Rtb2RpZmllZCI6KGw9cy5zdGF0ZSxvPXMuZGF0YSxpPSEoYT1zLmVycm9yKSkpOihhPWwsIWUmJmx8fChsPSJlcnJvciIsZTwwJiYoZT0wKSkpLFQuc3RhdHVzPWUsVC5zdGF0dXNUZXh0PSh0fHxsKSsiIixpP3gucmVzb2x2ZVdpdGgoeSxbbyxsLFRdKTp4LnJlamVjdFdpdGgoeSxbVCxsLGFdKSxULnN0YXR1c0NvZGUodyksdz12b2lkIDAsZyYmbS50cmlnZ2VyKGk/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbVCx2LGk/bzphXSksYi5maXJlV2l0aCh5LFtULGxdKSxnJiYobS50cmlnZ2VyKCJhamF4Q29tcGxldGUiLFtULHZdKSwtLVMuYWN0aXZlfHxTLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX1yZXR1cm4gVH0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFMuZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLHQpe3JldHVybiBTLmdldChlLHZvaWQgMCx0LCJzY3JpcHQiKX19KSxTLmVhY2goWyJnZXQiLCJwb3N0Il0sZnVuY3Rpb24oZSxpKXtTW2ldPWZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBtKHQpJiYocj1yfHxuLG49dCx0PXZvaWQgMCksUy5hamF4KFMuZXh0ZW5kKHt1cmw6ZSx0eXBlOmksZGF0YVR5cGU6cixkYXRhOnQsc3VjY2VzczpufSxTLmlzUGxhaW5PYmplY3QoZSkmJmUpKX19KSxTLmFqYXhQcmVmaWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ7Zm9yKHQgaW4gZS5oZWFkZXJzKSJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpJiYoZS5jb250ZW50VHlwZT1lLmhlYWRlcnNbdF18fCIiKX0pLFMuX2V2YWxVcmw9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBTLmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsY2FjaGU6ITAsYXN5bmM6ITEsZ2xvYmFsOiExLGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oKXt9fSxkYXRhRmlsdGVyOmZ1bmN0aW9uKGUpe1MuZ2xvYmFsRXZhbChlLHQsbil9fSl9LFMuZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0aGlzWzBdJiYobShlKSYmKGU9ZS5jYWxsKHRoaXNbMF0pKSx0PVMoZSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJnQuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLHQubWFwKGZ1bmN0aW9uKCl7dmFyIGU9dGhpczt3aGlsZShlLmZpcnN0RWxlbWVudENoaWxkKWU9ZS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gZX0pLmFwcGVuZCh0aGlzKSksdGhpc30sd3JhcElubmVyOmZ1bmN0aW9uKG4pe3JldHVybiBtKG4pP3RoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLndyYXBJbm5lcihuLmNhbGwodGhpcyxlKSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1TKHRoaXMpLHQ9ZS5jb250ZW50cygpO3QubGVuZ3RoP3Qud3JhcEFsbChuKTplLmFwcGVuZChuKX0pfSx3cmFwOmZ1bmN0aW9uKHQpe3ZhciBuPW0odCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXtTKHRoaXMpLndyYXBBbGwobj90LmNhbGwodGhpcyxlKTp0KX0pfSx1bndyYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucGFyZW50KGUpLm5vdCgiYm9keSIpLmVhY2goZnVuY3Rpb24oKXtTKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KSx0aGlzfX0pLFMuZXhwci5wc2V1ZG9zLmhpZGRlbj1mdW5jdGlvbihlKXtyZXR1cm4hUy5leHByLnBzZXVkb3MudmlzaWJsZShlKX0sUy5leHByLnBzZXVkb3MudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4hIShlLm9mZnNldFdpZHRofHxlLm9mZnNldEhlaWdodHx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCl9LFMuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEMuWE1MSHR0cFJlcXVlc3R9Y2F0Y2goZSl7fX07dmFyIF90PXswOjIwMCwxMjIzOjIwNH0senQ9Uy5hamF4U2V0dGluZ3MueGhyKCk7eS5jb3JzPSEhenQmJiJ3aXRoQ3JlZGVudGlhbHMiaW4genQseS5hamF4PXp0PSEhenQsUy5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGkpe3ZhciBvLGE7aWYoeS5jb3JzfHx6dCYmIWkuY3Jvc3NEb21haW4pcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPWkueGhyKCk7aWYoci5vcGVuKGkudHlwZSxpLnVybCxpLmFzeW5jLGkudXNlcm5hbWUsaS5wYXNzd29yZCksaS54aHJGaWVsZHMpZm9yKG4gaW4gaS54aHJGaWVsZHMpcltuXT1pLnhockZpZWxkc1tuXTtmb3IobiBpbiBpLm1pbWVUeXBlJiZyLm92ZXJyaWRlTWltZVR5cGUmJnIub3ZlcnJpZGVNaW1lVHlwZShpLm1pbWVUeXBlKSxpLmNyb3NzRG9tYWlufHxlWyJYLVJlcXVlc3RlZC1XaXRoIl18fChlWyJYLVJlcXVlc3RlZC1XaXRoIl09IlhNTEh0dHBSZXF1ZXN0IiksZSlyLnNldFJlcXVlc3RIZWFkZXIobixlW25dKTtvPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe28mJihvPWE9ci5vbmxvYWQ9ci5vbmVycm9yPXIub25hYm9ydD1yLm9udGltZW91dD1yLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLCJhYm9ydCI9PT1lP3IuYWJvcnQoKToiZXJyb3IiPT09ZT8ibnVtYmVyIiE9dHlwZW9mIHIuc3RhdHVzP3QoMCwiZXJyb3IiKTp0KHIuc3RhdHVzLHIuc3RhdHVzVGV4dCk6dChfdFtyLnN0YXR1c118fHIuc3RhdHVzLHIuc3RhdHVzVGV4dCwidGV4dCIhPT0oci5yZXNwb25zZVR5cGV8fCJ0ZXh0Iil8fCJzdHJpbmciIT10eXBlb2Ygci5yZXNwb25zZVRleHQ/e2JpbmFyeTpyLnJlc3BvbnNlfTp7dGV4dDpyLnJlc3BvbnNlVGV4dH0sci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sci5vbmxvYWQ9bygpLGE9ci5vbmVycm9yPXIub250aW1lb3V0PW8oImVycm9yIiksdm9pZCAwIT09ci5vbmFib3J0P3Iub25hYm9ydD1hOnIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXIucmVhZHlTdGF0ZSYmQy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7byYmYSgpfSl9LG89bygiYWJvcnQiKTt0cnl7ci5zZW5kKGkuaGFzQ29udGVudCYmaS5kYXRhfHxudWxsKX1jYXRjaChlKXtpZihvKXRocm93IGV9fSxhYm9ydDpmdW5jdGlvbigpe28mJm8oKX19fSksUy5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKGUpe2UuY3Jvc3NEb21haW4mJihlLmNvbnRlbnRzLnNjcmlwdD0hMSl9KSxTLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4gUy5nbG9iYWxFdmFsKGUpLGV9fX0pLFMuYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXt2b2lkIDA9PT1lLmNhY2hlJiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIil9KSxTLmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24obil7dmFyIHIsaTtpZihuLmNyb3NzRG9tYWlufHxuLnNjcmlwdEF0dHJzKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsdCl7cj1TKCI8c2NyaXB0PiIpLmF0dHIobi5zY3JpcHRBdHRyc3x8e30pLnByb3Aoe2NoYXJzZXQ6bi5zY3JpcHRDaGFyc2V0LHNyYzpuLnVybH0pLm9uKCJsb2FkIGVycm9yIixpPWZ1bmN0aW9uKGUpe3IucmVtb3ZlKCksaT1udWxsLGUmJnQoImVycm9yIj09PWUudHlwZT80MDQ6MjAwLGUudHlwZSl9KSxFLmhlYWQuYXBwZW5kQ2hpbGQoclswXSl9LGFib3J0OmZ1bmN0aW9uKCl7aSYmaSgpfX19KTt2YXIgVXQsWHQ9W10sVnQ9Lyg9KVw/KD89JnwkKXxcP1w/LztTLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9WHQucG9wKCl8fFMuZXhwYW5kbysiXyIrQ3QuZ3VpZCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSksUy5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGE9ITEhPT1lLmpzb25wJiYoVnQudGVzdChlLnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiBlLmRhdGEmJjA9PT0oZS5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZWdC50ZXN0KGUuZGF0YSkmJiJkYXRhIik7aWYoYXx8Impzb25wIj09PWUuZGF0YVR5cGVzWzBdKXJldHVybiByPWUuanNvbnBDYWxsYmFjaz1tKGUuanNvbnBDYWxsYmFjayk/ZS5qc29ucENhbGxiYWNrKCk6ZS5qc29ucENhbGxiYWNrLGE/ZVthXT1lW2FdLnJlcGxhY2UoVnQsIiQxIityKTohMSE9PWUuanNvbnAmJihlLnVybCs9KEV0LnRlc3QoZS51cmwpPyImIjoiPyIpK2UuanNvbnArIj0iK3IpLGUuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBvfHxTLmVycm9yKHIrIiB3YXMgbm90IGNhbGxlZCIpLG9bMF19LGUuZGF0YVR5cGVzWzBdPSJqc29uIixpPUNbcl0sQ1tyXT1mdW5jdGlvbigpe289YXJndW1lbnRzfSxuLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PWk/UyhDKS5yZW1vdmVQcm9wKHIpOkNbcl09aSxlW3JdJiYoZS5qc29ucENhbGxiYWNrPXQuanNvbnBDYWxsYmFjayxYdC5wdXNoKHIpKSxvJiZtKGkpJiZpKG9bMF0pLG89aT12b2lkIDB9KSwic2NyaXB0In0pLHkuY3JlYXRlSFRNTERvY3VtZW50PSgoVXQ9RS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpLmJvZHkpLmlubmVySFRNTD0iPGZvcm0+PC9mb3JtPjxmb3JtPjwvZm9ybT4iLDI9PT1VdC5jaGlsZE5vZGVzLmxlbmd0aCksUy5wYXJzZUhUTUw9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiJzdHJpbmciIT10eXBlb2YgZT9bXTooImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0fHwoeS5jcmVhdGVIVE1MRG9jdW1lbnQ/KChyPSh0PUUuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKSkuY3JlYXRlRWxlbWVudCgiYmFzZSIpKS5ocmVmPUUubG9jYXRpb24uaHJlZix0LmhlYWQuYXBwZW5kQ2hpbGQocikpOnQ9RSksbz0hbiYmW10sKGk9Ti5leGVjKGUpKT9bdC5jcmVhdGVFbGVtZW50KGlbMV0pXTooaT14ZShbZV0sdCxvKSxvJiZvLmxlbmd0aCYmUyhvKS5yZW1vdmUoKSxTLm1lcmdlKFtdLGkuY2hpbGROb2RlcykpKTt2YXIgcixpLG99LFMuZm4ubG9hZD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGE9dGhpcyxzPWUuaW5kZXhPZigiICIpO3JldHVybi0xPHMmJihyPXZ0KGUuc2xpY2UocykpLGU9ZS5zbGljZSgwLHMpKSxtKHQpPyhuPXQsdD12b2lkIDApOnQmJiJvYmplY3QiPT10eXBlb2YgdCYmKGk9IlBPU1QiKSwwPGEubGVuZ3RoJiZTLmFqYXgoe3VybDplLHR5cGU6aXx8IkdFVCIsZGF0YVR5cGU6Imh0bWwiLGRhdGE6dH0pLmRvbmUoZnVuY3Rpb24oZSl7bz1hcmd1bWVudHMsYS5odG1sKHI/UygiPGRpdj4iKS5hcHBlbmQoUy5wYXJzZUhUTUwoZSkpLmZpbmQocik6ZSl9KS5hbHdheXMobiYmZnVuY3Rpb24oZSx0KXthLmVhY2goZnVuY3Rpb24oKXtuLmFwcGx5KHRoaXMsb3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSl9KSx0aGlzfSxTLmV4cHIucHNldWRvcy5hbmltYXRlZD1mdW5jdGlvbih0KXtyZXR1cm4gUy5ncmVwKFMudGltZXJzLGZ1bmN0aW9uKGUpe3JldHVybiB0PT09ZS5lbGVtfSkubGVuZ3RofSxTLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbD1TLmNzcyhlLCJwb3NpdGlvbiIpLGM9UyhlKSxmPXt9OyJzdGF0aWMiPT09bCYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIikscz1jLm9mZnNldCgpLG89Uy5jc3MoZSwidG9wIiksdT1TLmNzcyhlLCJsZWZ0IiksKCJhYnNvbHV0ZSI9PT1sfHwiZml4ZWQiPT09bCkmJi0xPChvK3UpLmluZGV4T2YoImF1dG8iKT8oYT0ocj1jLnBvc2l0aW9uKCkpLnRvcCxpPXIubGVmdCk6KGE9cGFyc2VGbG9hdChvKXx8MCxpPXBhcnNlRmxvYXQodSl8fDApLG0odCkmJih0PXQuY2FsbChlLG4sUy5leHRlbmQoe30scykpKSxudWxsIT10LnRvcCYmKGYudG9wPXQudG9wLXMudG9wK2EpLG51bGwhPXQubGVmdCYmKGYubGVmdD10LmxlZnQtcy5sZWZ0K2kpLCJ1c2luZyJpbiB0P3QudXNpbmcuY2FsbChlLGYpOigibnVtYmVyIj09dHlwZW9mIGYudG9wJiYoZi50b3ArPSJweCIpLCJudW1iZXIiPT10eXBlb2YgZi5sZWZ0JiYoZi5sZWZ0Kz0icHgiKSxjLmNzcyhmKSl9fSxTLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKHQpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oZSl7Uy5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsdCxlKX0pO3ZhciBlLG4scj10aGlzWzBdO3JldHVybiByP3IuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGg/KGU9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyx7dG9wOmUudG9wK24ucGFnZVlPZmZzZXQsbGVmdDplLmxlZnQrbi5wYWdlWE9mZnNldH0pOnt0b3A6MCxsZWZ0OjB9OnZvaWQgMH0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG4scj10aGlzWzBdLGk9e3RvcDowLGxlZnQ6MH07aWYoImZpeGVkIj09PVMuY3NzKHIsInBvc2l0aW9uIikpdD1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2Vsc2V7dD10aGlzLm9mZnNldCgpLG49ci5vd25lckRvY3VtZW50LGU9ci5vZmZzZXRQYXJlbnR8fG4uZG9jdW1lbnRFbGVtZW50O3doaWxlKGUmJihlPT09bi5ib2R5fHxlPT09bi5kb2N1bWVudEVsZW1lbnQpJiYic3RhdGljIj09PVMuY3NzKGUsInBvc2l0aW9uIikpZT1lLnBhcmVudE5vZGU7ZSYmZSE9PXImJjE9PT1lLm5vZGVUeXBlJiYoKGk9UyhlKS5vZmZzZXQoKSkudG9wKz1TLmNzcyhlLCJib3JkZXJUb3BXaWR0aCIsITApLGkubGVmdCs9Uy5jc3MoZSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpfXJldHVybnt0b3A6dC50b3AtaS50b3AtUy5jc3MociwibWFyZ2luVG9wIiwhMCksbGVmdDp0LmxlZnQtaS5sZWZ0LVMuY3NzKHIsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShlJiYic3RhdGljIj09PVMuY3NzKGUsInBvc2l0aW9uIikpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8cmV9KX19KSxTLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxpKXt2YXIgbz0icGFnZVlPZmZzZXQiPT09aTtTLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiAkKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKHgoZSk/cj1lOjk9PT1lLm5vZGVUeXBlJiYocj1lLmRlZmF1bHRWaWV3KSx2b2lkIDA9PT1uKXJldHVybiByP3JbaV06ZVt0XTtyP3Iuc2Nyb2xsVG8obz9yLnBhZ2VYT2Zmc2V0Om4sbz9uOnIucGFnZVlPZmZzZXQpOmVbdF09bn0sdCxlLGFyZ3VtZW50cy5sZW5ndGgpfX0pLFMuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihlLG4pe1MuY3NzSG9va3Nbbl09JGUoeS5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4gdD1CZShlLG4pLE1lLnRlc3QodCk/UyhlKS5wb3NpdGlvbigpW25dKyJweCI6dH0pfSksUy5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxzKXtTLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6cywiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKHIsbyl7Uy5mbltvXT1mdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGgmJihyfHwiYm9vbGVhbiIhPXR5cGVvZiBlKSxpPXJ8fCghMD09PWV8fCEwPT09dD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuICQodGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIHgoZSk/MD09PW8uaW5kZXhPZigib3V0ZXIiKT9lWyJpbm5lciIrYV06ZS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWUubm9kZVR5cGU/KHI9ZS5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoZS5ib2R5WyJzY3JvbGwiK2FdLHJbInNjcm9sbCIrYV0sZS5ib2R5WyJvZmZzZXQiK2FdLHJbIm9mZnNldCIrYV0sclsiY2xpZW50IithXSkpOnZvaWQgMD09PW4/Uy5jc3MoZSx0LGkpOlMuc3R5bGUoZSx0LG4saSl9LHMsbj9lOnZvaWQgMCxuKX19KX0pLFMuZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7Uy5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLFMuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX0saG92ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGUpLm1vdXNlbGVhdmUodHx8ZSl9fSksUy5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsbil7Uy5mbltuXT1mdW5jdGlvbihlLHQpe3JldHVybiAwPGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vbihuLG51bGwsZSx0KTp0aGlzLnRyaWdnZXIobil9fSk7dmFyIEd0PS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZztTLnByb3h5PWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpO2lmKCJzdHJpbmciPT10eXBlb2YgdCYmKG49ZVt0XSx0PWUsZT1uKSxtKGUpKXJldHVybiByPXMuY2FsbChhcmd1bWVudHMsMiksKGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KHMuY2FsbChhcmd1bWVudHMpKSl9KS5ndWlkPWUuZ3VpZD1lLmd1aWR8fFMuZ3VpZCsrLGl9LFMuaG9sZFJlYWR5PWZ1bmN0aW9uKGUpe2U/Uy5yZWFkeVdhaXQrKzpTLnJlYWR5KCEwKX0sUy5pc0FycmF5PUFycmF5LmlzQXJyYXksUy5wYXJzZUpTT049SlNPTi5wYXJzZSxTLm5vZGVOYW1lPUEsUy5pc0Z1bmN0aW9uPW0sUy5pc1dpbmRvdz14LFMuY2FtZWxDYXNlPVgsUy50eXBlPXcsUy5ub3c9RGF0ZS5ub3csUy5pc051bWVyaWM9ZnVuY3Rpb24oZSl7dmFyIHQ9Uy50eXBlKGUpO3JldHVybigibnVtYmVyIj09PXR8fCJzdHJpbmciPT09dCkmJiFpc05hTihlLXBhcnNlRmxvYXQoZSkpfSxTLnRyaW09ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6KGUrIiIpLnJlcGxhY2UoR3QsIiIpfSwiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4gU30pO3ZhciBZdD1DLmpRdWVyeSxRdD1DLiQ7cmV0dXJuIFMubm9Db25mbGljdD1mdW5jdGlvbihlKXtyZXR1cm4gQy4kPT09UyYmKEMuJD1RdCksZSYmQy5qUXVlcnk9PT1TJiYoQy5qUXVlcnk9WXQpLFN9LCJ1bmRlZmluZWQiPT10eXBlb2YgZSYmKEMualF1ZXJ5PUMuJD1TKSxTfSk7Cg=="}]},{"name":"哔哩哔哩大会员视频替换","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["bilivideo.com"],"orig_excludes":[],"orig_includes":["https://www.bilibili.com/bangumi/play/*","https://www.bilibili.com/video/BV*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1595653182825,"data":{}},"enabled":false,"position":9,"file_url":"https://greasyfork.org/scripts/402898-%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E5%A4%A7%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E6%9B%BF%E6%8D%A2/code/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E5%A4%A7%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E6%9B%BF%E6%8D%A2.user.js","uuid":"1e6d3770-ed16-4b5b-915e-cd9f849ac64f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDlk5Tlk6nlk5Tlk6nlpKfkvJrlkZjop4bpopHmm7/mjaIKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjEuMTcKLy8gQGRlc2NyaXB0aW9uICDmraTohJrmnKzkvJrmm7/mjaLmjonljp/mnKznmoTmkq3mlL7lmajvvIznhLblkI7ljLnphY3nm7jlhbPotYTmupDlubbmkq3mlL7vvIzmlK/mjIHpg6jliIbmuK/mvrPlj7DjgILlkIzml7bmj5Dkvpvop4bpopHlkozlvLnluZXkuIvovb3jgIIKLy8gQGF1dGhvciAgICAgICBjb2xkcmFpbmYKLy8gQGdyYW50ICAgICAgICB1bnNhZmVXaW5kb3cKLy8gQGNvbm5lY3QgICAgICBiaWxpdmlkZW8uY29tCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL2Jhbmd1bWkvcGxheS8qCi8vIEBpbmNsdWRlICAgICAgaHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWKgovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy80MDI4OTctYmlsaWJpbGktYXNzLWRhbm1ha3UtZG93bmxvYWRlci1ieS0lRTclOTQlQjAlRTclOTQlOUYvY29kZS9iaWxpYmlsaSUyMEFTUyUyMERhbm1ha3UlMjBEb3dubG9hZGVyJTIwYnklMjAlRTclOTQlQjAlRTclOTQlOUYuanM/dmVyc2lvbj04MDI4MjIKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKICAgIGxldCBkbG9hZGluZyA9IGZhbHNlCiAgICBsZXQgYmFuZ3VtaSA9IC9iaWxpYmlsaS5jb21cL2Jhbmd1bWlcL3BsYXlcLy9nLnRlc3Qod2luZG93LmxvY2F0aW9uLmhyZWYpCiAgICBsZXQgcGFyZW50SWQgPSBiYW5ndW1pID8gJ3Rvb2xiYXJfbW9kdWxlJyA6ICdhcmNfdG9vbGJhcl9yZXBvcnQnCiAgICAvL+a3u+WKoOagt+W8jwogICAgbGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKQogICAgc3R5bGUuaW5uZXJIVE1MID0oIi5jb2xkcmFpbmYtZ2V0LWRte2Zsb2F0OnJpZ2h0O30uY29sZHJhaW5mLWdldC1kbT5kaXZ7ZGlzcGxheTppbmxpbmUtYmxvY2s7fS5jb2xkcmFpbmYtZ2V0LWRtIGF7Zm9udC1zaXplOjE1cHg7Y29sb3I6IzAwYTFkNjttYXJnaW46MCAxMnB4O2xpbmUtaGVpZ2h0OjI4cHg7fS5jb2xkcmFpbmYtZ2V0LWRtIGE6aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7Y29sb3I6I2YyNWQ4ZTt9IikKICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpCiAgICBpZihiYW5ndW1pICYmIHVuc2FmZVdpbmRvdy5fX1BHQ19VU0VSU1RBVEVfXy5hcmVhX2xpbWl0ICE9IDApIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1bnNhZmVXaW5kb3csICdfX1BHQ19VU0VSU1RBVEVfXycsIHtnZXQ6ICgpID0+ICh7YXJlYV9saW1pdDowLCBnYXQ6IHRydWV9KX0pCiAgICAvL+a3u+WKoOaMiemSrgogICAgbGV0IGFkZEVsZW1lbnQgPSBjaWQgPT4gewogICAgICAgIGxldCBuYW1lID0gZG9jdW1lbnQudGl0bGUubWF0Y2goLyguKz8pXygoLis/KV985ZOU5ZOp5ZOU5ZOpICkvKVsxXQogICAgICAgIGxldCB0aXRsZSA9IGJhbmd1bWkgPyB1bnNhZmVXaW5kb3cuX19JTklUSUFMX1NUQVRFX18ubWVkaWFJbmZvLnRpdGxlIDogbmFtZQogICAgICAgIGxldCBwYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCkKICAgICAgICBsZXQgb2xkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbGRyYWluZi1nZXQtZG0nKQogICAgICAgIGlmKG9sZCkgcGFyZW50LnJlbW92ZUNoaWxkKG9sZCkKICAgICAgICBsZXQgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikKICAgICAgICBlbGUuY2xhc3NOYW1lID0gJ2NvbGRyYWluZi1nZXQtZG0nCiAgICAgICAgbGV0IGRtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpCiAgICAgICAgZG0uaHJlZiA9ICJodHRwczovL2FwaS5iaWxpYmlsaS5jb20veC92MS9kbS9saXN0LnNvP29pZD0iICsgY2lkCiAgICAgICAgZG0udGV4dENvbnRlbnQgPSAi5LiL6L295by55bmVIgogICAgICAgIGRtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxlID0+IHsKICAgICAgICAgICAgZmV0Y2goImh0dHBzOi8vYXBpLmJpbGliaWxpLmNvbS94L3YxL2RtL2xpc3Quc28/b2lkPSIrY2lkKS50aGVuKHJlcz0+cmVzLnRleHQoKSkudGhlbih0ZXh0ID0+IHsKICAgICAgICAgICAgICAgIGxldCBkYW5tYWt1ID0gcGFyc2VYTUwodGV4dC5yZXBsYWNlKC9bXHUwMDAwLVx1MDAwOFx1MDAwYlx1MDAwY1x1MDAwZS1cdTAwMWZdL2csICcnKSk7CiAgICAgICAgICAgICAgICBsZXQgYXNzID0gZ2VuZXJhdGVBU1Moc2V0UG9zaXRpb24oZGFubWFrdSksIHsKICAgICAgICAgICAgICAgICAgICAndGl0bGUnOiBuYW1lLAogICAgICAgICAgICAgICAgICAgICdvcmknOiBuYW1lLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHN0YXJ0RG93bmxvYWQoJ1x1ZmVmZicgKyBhc3MsIG5hbWUgKyAnLmFzcycpOwogICAgICAgICAgICB9KQogICAgICAgICAgICBpZihlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgZWxzZSB3aW5kb3cuZXZlbnQucmV0dXJuVmFsdWUgPT0gZmFsc2UKICAgICAgICB9KQogICAgICAgIGxldCBpZnJhbWVUbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29sZHJhaW5mLWlmcmFtZScpCiAgICAgICAgaWYoaWZyYW1lVG1wKSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxwLWwnKS5yZW1vdmVDaGlsZChpZnJhbWVUbXApCiAgICAgICAgbGV0IGJmcSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwbGF5ZXJfbW9kdWxlJykKICAgICAgICBpZihiZnEpIGJmcS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJwogICAgICAgIGxldCBqdW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpCgogICAgICAgIGlmKGJhbmd1bWkgJiYgKHVuc2FmZVdpbmRvdy5fX0lOSVRJQUxfU1RBVEVfXy5lcFBheU1lbnQuc3RhdHVzICE9IDAgfHwgdW5zYWZlV2luZG93Ll9fUEdDX1VTRVJTVEFURV9fLmdhdCkpIHsKCiAgICAgICAgICAgIGxldCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKQogICAgICAgICAgICBpZnJhbWUuaWQgPSAnY29sZHJhaW5mLWlmcmFtZScKICAgICAgICAgICAgaWZyYW1lLnNyYyA9IGBodHRwczovL2RtLmNvbGRyYWluLnRvcC8/ZG09JHtjaWR9JndkPSR7dGl0bGUuc2xpY2UoMCwxMyl9JmVwPSR7dW5zYWZlV2luZG93Ll9fSU5JVElBTF9TVEFURV9fLmVwSW5mby5pICsgMX1gCiAgICAgICAgICAgIGlmKGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lLmluY2x1ZGVzKCdwbGF5ZXItbW9kZS13aWRlc2NyZWVuJykpIHsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZScKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS50b3AgPSAnMCcKICAgICAgICAgICAgfQogICAgICAgICAgICBpZnJhbWUuaGVpZ2h0ID0gMAogICAgICAgICAgICBpZnJhbWUud2lkdGggPSAnMTAwJScKICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnZnJhbWVib3JkZXInLCdubycpCiAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2JvcmRlcicsJzAnKQogICAgICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhbGxvd2Z1bGxzY3JlZW4nLCdhbGxvd2Z1bGxzY3JlZW4nKQogICAgICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCd3ZWJraXRhbGxvd2Z1bGxzY3JlZW4nLCd3ZWJraXRhbGxvd2Z1bGxzY3JlZW4nKQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxwLWwnKS5pbnNlcnRCZWZvcmUoaWZyYW1lLGJmcSkKCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgIC8v6Ieq5Yqo5pu/5o2i77yM5L2G5pyJ5pe26ZyA6KaB5ZKM5Y6f54mH5q+U5a+55pe26Ze06L2077yM5omA5Lul5LiN55SoCiAgICAgICAgICAgIGlmKHVuc2FmZVdpbmRvdy5wbGF5ZXIpIHVuc2FmZVdpbmRvdy5wbGF5ZXIucGF1c2UoKQogICAgICAgICAgICBpZihiZnEuc3R5bGUuZGlzcGxheSAhPSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIGlmcmFtZS5oZWlnaHQgPSBiZnEuY2xpZW50SGVpZ2h0CiAgICAgICAgICAgICAgICBiZnEuc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgICAgICB9CiAgICAgICAgICAgICovCgogICAgICAgICAgICAvL+aJi+WKqOeCueWHuwogICAgICAgICAgICBqdW1wLnRleHRDb250ZW50ID0gIuabv+aNouaSreaUvuWZqCIKICAgICAgICAgICAganVtcC5vbmNsaWNrID0gZSA9PiB7CiAgICAgICAgICAgICAgICBpZih1bnNhZmVXaW5kb3cucGxheWVyKSB1bnNhZmVXaW5kb3cucGxheWVyLnBhdXNlKCkKICAgICAgICAgICAgICAgIGlmKGJmcS5zdHlsZS5kaXNwbGF5ID09ICdub25lJykgcmV0dXJuCiAgICAgICAgICAgICAgICBpZnJhbWUuaGVpZ2h0ID0gYmZxLnN0eWxlLmhlaWdodAogICAgICAgICAgICAgICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gewogICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSBiZnEuc3R5bGUuaGVpZ2h0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBiZnEuc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBsZXQgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIikKICAgICAgICBpZighYmFuZ3VtaSB8fCB1bnNhZmVXaW5kb3cuX19JTklUSUFMX1NUQVRFX18uZXBQYXlNZW50LnN0YXR1cyA9PSAwKSB7CiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpCiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksCiAgICAgICAgICAgICAgICAgICAgYWlkID0gYmFuZ3VtaSA/IHVuc2FmZVdpbmRvdy5fX0lOSVRJQUxfU1RBVEVfXy5lcEluZm8uYWlkIDogdW5zYWZlV2luZG93Ll9fSU5JVElBTF9TVEFURV9fLmFpZCwKICAgICAgICAgICAgICAgICAgICBhcGkgPSBgaHR0cHM6Ly9hcGkuYmlsaWJpbGkuY29tL3gvcGxheWVyL3BsYXl1cmw/Y2lkPSR7Y2lkfSZhdmlkPSR7YWlkfWAsCiAgICAgICAgICAgICAgICAgICAgcmVzMCA9IGF3YWl0IGZldGNoKGFwaSx7Y3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pLAogICAgICAgICAgICAgICAgICAgIGpzb24gPSBhd2FpdCByZXMwLmpzb24oKQogICAgICAgICAgICAgICAgaWYoIWpzb24uZGF0YSkgcmV0dXJuCiAgICAgICAgICAgICAgICBzZWxlY3QudmFsdWUgPSBqc29uLmRhdGEuYWNjZXB0X3F1YWxpdHlbMF0KICAgICAgICAgICAgICAgIGZvcihsZXQgaSBpbiBqc29uLmRhdGEuYWNjZXB0X3F1YWxpdHkpIHsKICAgICAgICAgICAgICAgICAgICBpZigoIWJhbmd1bWkgfHwgIXVuc2FmZVdpbmRvdy5fX0lOSVRJQUxfU1RBVEVfXy5sb2dpbkluZm8uaXNWaXApICYmIGpzb24uZGF0YS5hY2NlcHRfcXVhbGl0eVtpXSA9PSAnMTEyJykgewogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QudmFsdWUgPSBqc29uLmRhdGEuYWNjZXB0X3F1YWxpdHlbMV0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0ganNvbi5kYXRhLmFjY2VwdF9xdWFsaXR5W2ldCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0ganNvbi5kYXRhLmFjY2VwdF9kZXNjcmlwdGlvbltpXQogICAgICAgICAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb24pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmlkZW8uYXBwZW5kQ2hpbGQoc2VsZWN0KQogICAgICAgICAgICAgICAgbGV0IGRsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpCiAgICAgICAgICAgICAgICBkbC50ZXh0Q29udGVudCA9ICLkuIvovb3op4bpopEiCiAgICAgICAgICAgICAgICBkbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgICAgICAgICAgIGVsc2Ugd2luZG93LmV2ZW50LnJldHVyblZhbHVlID09IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgaWYoZGxvYWRpbmcpIHJldHVybgogICAgICAgICAgICAgICAgICAgIGRsb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzMSA9IGF3YWl0IGZldGNoKGAke2FwaX0mcW49JHtzZWxlY3QudmFsdWV9YCx7Y3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbjEgPSBhd2FpdCByZXMxLmpzb24oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGpzb24xLmRhdGEuZHVybFswXS51cmwucmVwbGFjZSgnaHR0cCcsJ2h0dHBzJykKCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaCh1cmwse2hlYWRlcnM6eydSZWZlcmVyJzonaHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tLyd9fSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSAwLCBjaHVua3MgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKSwgdG90YWwgPSArcmVzLmhlYWRlcnMuZ2V0KCdDb250ZW50LUxlbmd0aCcpOwogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Quc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7ZG9uZSwgdmFsdWV9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZG9uZSkgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKHZhbHVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkICs9IHZhbHVlLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGwudGV4dENvbnRlbnQgPSBgJHsobG9hZGVkLzEwMjQvMTAyNCkudG9GaXhlZCgyKX1NLyR7KHRvdGFsLzEwMjQvMTAyNCkudG9GaXhlZCgyKX1NYAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZScKICAgICAgICAgICAgICAgICAgICAgICAgZGwudGV4dENvbnRlbnQgPSAi5LiL6L296KeG6aKRIgogICAgICAgICAgICAgICAgICAgICAgICBkbG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoeiA9IC9cLmZsdlw/Ly50ZXN0KHVybCkgPyAnLmZsdicgOiAnLm1wNCcKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnREb3dubG9hZChuZXcgQmxvYihjaHVua3MpLCBuYW1lK2h6KQogICAgICAgICAgICAgICAgICAgIH0pKCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB2aWRlby5hcHBlbmRDaGlsZChkbCkKICAgICAgICAgICAgfSkoKQoKICAgICAgICB9ZWxzZSB2aWRlby50ZXh0Q29udGVudCA9ICLml6Dms5XkuIvovb3op4bpopEiCiAgICAgICAgLyoKICAgICAgICBpZighYmFuZ3VtaSkgewogICAgICAgICAgICB2aWRlby50ZXh0Q29udGVudCA9ICLkuIvovb3op4bpopEiCiAgICAgICAgICAgIHZpZGVvLnRhcmdldCA9ICdfYmxhbmsnCiAgICAgICAgICAgIGxldCBhcGkgPSAnaHR0cHM6Ly93d3cueGJlaWJlaXguY29tL2FwaS9iaWxpYmlsaWFwaS5waHA/dXJsPWh0dHBzOi8vd3d3LmJpbGliaWxpLmNvbS8mYWlkPScrYWlkKycmY2lkPScrY2lkCiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHttZXRob2Q6ICJnZXQiLCB1cmw6IGFwaSxvbmxvYWQocmVzKXsKICAgICAgICAgICAgICAgIGlmKHJlcy5zdGF0dXMgIT0gMjAwKSByZXR1cm4KICAgICAgICAgICAgICAgIGxldCBqc29uID0gSlNPTi5wYXJzZShyZXMucmVzcG9uc2VUZXh0KQogICAgICAgICAgICAgICAgdmlkZW8uaHJlZiA9IGpzb24udXJsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAqLwogICAgICAgIGVsZS5hcHBlbmRDaGlsZCh2aWRlbykKICAgICAgICBlbGUuYXBwZW5kQ2hpbGQoZG0pCiAgICAgICAgZWxlLmFwcGVuZENoaWxkKGp1bXApCiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsZSkKICAgIH0KICAgIC8v5re75Yqg5o2icOS6i+S7tgogICAgbGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZgogICAgbGV0IGNoYW5nZUVwID0gKCkgPT4gewogICAgICAgIGxldCBlbGVzID0gYmFuZ3VtaSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wbHAtcicpIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpc3QtYm94IGxpJykKICAgICAgICBpZighZWxlcykgcmV0dXJuCiAgICAgICAgZWxlcy5mb3JFYWNoKGVsZSA9PiB7CiAgICAgICAgICAgIGVsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYgPT0gaHJlZikgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpLnJlbW92ZUNoaWxkKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xkcmFpbmYtZ2V0LWRtJykpCiAgICAgICAgICAgICAgICAgICAgYWRkRWxlbWVudChnZXRDaWQoKSkKICAgICAgICAgICAgICAgIH0sMjAwKQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9CiAgICAvL+iOt+WPlmNpZAogICAgbGV0IGdldENpZCA9ICgpID0+IHsKICAgICAgICBpZihiYW5ndW1pKSByZXR1cm4gdW5zYWZlV2luZG93Ll9fSU5JVElBTF9TVEFURV9fLmVwSW5mby5jaWQKICAgICAgICBlbHNlIHJldHVybiBjaWQKICAgIH0KICAgIGxldCBpbml0ID0gKCkgPT4gewogICAgICAgIGFkZEVsZW1lbnQoZ2V0Q2lkKCkpCiAgICAgICAgY2hhbmdlRXAoKQogICAgfQogICAgbGV0IG9icyA9IGJhbmd1bWkgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9vbGJhcl9tb2R1bGUnKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcHMnKQogICAgaWYoIW9icykgc2V0VGltZW91dChpbml0LDUwMCkKICAgIGVsc2V7CiAgICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKG11dGF0aW9ucywgb2JzZXJ2ZXIpIHsKICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgICAgICAgICBzZXRUaW1lb3V0KGluaXQsNTAwKQogICAgICAgIH0pLm9ic2VydmUob2JzLCB7Y2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlfSk7CiAgICB9Cn0pKCk7","requires":[{"meta":{"name":"bilibili%20ASS%20Danmaku%20Downloader%20by%20%E7%94%B0%E7%94%9F.js","url":"https://greasyfork.org/scripts/402897-bilibili-ass-danmaku-downloader-by-%E7%94%B0%E7%94%9F/code/bilibili%20ASS%20Danmaku%20Downloader%20by%20%E7%94%B0%E7%94%9F.js?version=802822","ts":1595861109413,"mimetype":"text/javascript"},"source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIGJpbGliaWxpIEFTUyBEYW5tYWt1IERvd25sb2FkZXIgYnkg55Sw55SfCi8vIEBuYW1lc3BhY2UgICBodHRwczovL2dpdGh1Yi5jb20vdGlhbnNoCi8vIEBkZXNjcmlwdGlvbiDku6UgQVNTIOagvOW8j+S4i+i9vSBiaWxpYmlsaSDnmoTlvLnluZUKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL2F2KgovLyBAaW5jbHVkZSAgICAgaHR0cDovL2Jhbmd1bWkuYmlsaWJpbGkuY29tL21vdmllLyoKLy8gQHVwZGF0ZVVSTCAgIGh0dHBzOi8vdGlhbnNoLmdpdGh1Yi5pby91cy1kYW5tYWt1L2JpbGliaWxpL2JpbGliaWxpX0FTU19EYW5tYWt1X0Rvd25sb2FkZXIubWV0YS5qcwovLyBAZG93bmxvYWRVUkwgaHR0cHM6Ly90aWFuc2guZ2l0aHViLmlvL3VzLWRhbm1ha3UvYmlsaWJpbGkvYmlsaWJpbGlfQVNTX0Rhbm1ha3VfRG93bmxvYWRlci51c2VyLmpzCi8vIEB2ZXJzaW9uICAgICAxLjExCi8vIEBncmFudCAgICAgICBHTV9hZGRTdHlsZQovLyBAZ3JhbnQgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBhdXRob3IgICAgICDnlLDnlJ8KLy8gQGNvcHlyaWdodCAgIDIwMTQrLCDnlLDnlJ8KLy8gQGxpY2Vuc2UgICAgIE1vemlsbGEgUHVibGljIExpY2Vuc2UgMi4wOyBodHRwOi8vd3d3Lm1vemlsbGEub3JnL01QTC8yLjAvCi8vIEBsaWNlbnNlICAgICBDQyBBdHRyaWJ1dGlvbi1TaGFyZUFsaWtlIDQuMCBJbnRlcm5hdGlvbmFsOyBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS80LjAvCi8vIEBjb25uZWN0LXNyYyBjb21tZW50LmJpbGliaWxpLmNvbQovLyBAY29ubmVjdC1zcmMgaW50ZXJmYWNlLmJpbGliaWxpLmNvbQovLyA9PS9Vc2VyU2NyaXB0PT0KCi8qCiAqIENvbW1vbgogKi8KCi8vIOiuvue9rumhuQp2YXIgY29uZmlnID0gewogICdwbGF5UmVzWCc6IDU2MCwgICAgICAgICAgIC8vIOWxj+W5leWIhui+qOeOh+Wuve+8iOWDj+e0oO+8iQogICdwbGF5UmVzWSc6IDQyMCwgICAgICAgICAgIC8vIOWxj+W5leWIhui+qOeOh+mrmO+8iOWDj+e0oO+8iQogICdmb250bGlzdCc6IFsgICAgICAgICAgICAgIC8vIOWtl+W9ou+8iOS8muiHquWKqOmAieaLqeacgOWJjemdouS4gOS4quWPr+eUqOeahO+8iQogICAgJ01pY3Jvc29mdCBZYUhlaSBVSScsCiAgICAnTWljcm9zb2Z0IFlhSGVpJywKICAgICfmlofms4npqb/mraPpu5EnLAogICAgJ1NUSGVpdGlTQycsCiAgICAn6buR5L2TJywKICBdLAogICdmb250X3NpemUnOiAxLjAsICAgICAgICAgIC8vIOWtl+WPt++8iOavlOS+i++8iQogICdyMmx0aW1lJzogOCwgICAgICAgICAgICAgIC8vIOWPs+WIsOW3puW8ueW5leaMgee7reaXtumXtO+8iOenku+8iQogICdmaXh0aW1lJzogNCwgICAgICAgICAgICAgIC8vIOWbuuWumuW8ueW5leaMgee7reaXtumXtO+8iOenku+8iQogICdvcGFjaXR5JzogMC42LCAgICAgICAgICAgIC8vIOS4jemAj+aYjuW6pu+8iOavlOS+i++8iQogICdzcGFjZSc6IDAsICAgICAgICAgICAgICAgIC8vIOW8ueW5lemXtOmalOeahOacgOWwj+awtOW5s+i3neemu++8iOWDj+e0oO+8iQogICdtYXhfZGVsYXknOiA2LCAgICAgICAgICAgIC8vIOacgOWkmuWFgeiuuOW7tui/n+WHoOenkuWHuueOsOW8ueW5lQogICdib3R0b20nOiA1MCwgICAgICAgICAgICAgIC8vIOW6leerr+e7meWtl+W5leS/neeVmeeahOepuumXtO+8iOWDj+e0oO+8iQogICd1c2VfY2FudmFzJzogbnVsbCwgICAgICAgIC8vIOaYr+WQpuS9v+eUqGNhbnZhc+iuoeeul+aWh+acrOWuveW6pu+8iOW4g+WwlOWAvO+8jExpbnV45LiL55qE54Gr54uQ6buY6K6k5ZCm77yM5YW25LuW6buY6K6k5piv77yMRmlyZWZveCBidWcgIzU2MTM2Me+8iQogICdkZWJ1Zyc6IGZhbHNlLCAgICAgICAgICAgIC8vIOaJk+WNsOiwg+ivleS/oeaBrwp9OwoKdmFyIGRlYnVnID0gY29uZmlnLmRlYnVnID8gY29uc29sZS5sb2cuYmluZChjb25zb2xlKSA6IGZ1bmN0aW9uICgpIHsgfTsKCi8vIOWwhuWtl+WFuOS4reeahOWAvOWhq+WFpeWtl+espuS4sgp2YXIgZmlsbFN0ciA9IGZ1bmN0aW9uIChzdHIpIHsKICB2YXIgZGljdCA9IEFycmF5LmFwcGx5KEFycmF5LCBhcmd1bWVudHMpOwogIHJldHVybiBzdHIucmVwbGFjZSgve3soW159XSspfX0vZywgZnVuY3Rpb24gKHIsIG8pIHsKICAgIHZhciByZXQ7CiAgICBkaWN0LnNvbWUoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIHJldCA9IGlbb107IH0pOwogICAgcmV0dXJuIHJldCB8fCAnJzsKICB9KTsKfTsKCi8vIOWwhuminOiJsueahOaVsOWAvOWMluS4uuWNgeWFrei/m+WItuWtl+espuS4suihqOekugp2YXIgUlJHR0JCID0gZnVuY3Rpb24gKGNvbG9yKSB7CiAgdmFyIHQgPSBOdW1iZXIoY29sb3IpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpOwogIHJldHVybiAoQXJyYXkoNykuam9pbignMCcpICsgdCkuc2xpY2UoLTYpOwp9OwoKLy8g5bCG5Y+v6KeB5bqm6L2s5o2i5Li66YCP5piO5bqmCnZhciBoZXhBbHBoYSA9IGZ1bmN0aW9uIChvcGFjaXR5KSB7CiAgdmFyIGFscGhhID0gTWF0aC5yb3VuZCgweEZGICogKDEgLSBvcGFjaXR5KSkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7CiAgcmV0dXJuIEFycmF5KDMgLSBhbHBoYS5sZW5ndGgpLmpvaW4oJzAnKSArIGFscGhhOwp9OwoKLy8g5a2X56ym5LiyCnZhciBmdW5TdHIgPSBmdW5jdGlvbiAoZnVuKSB7CiAgcmV0dXJuIGZ1bi50b1N0cmluZygpLnNwbGl0KC9cclxufFxufFxyLykuc2xpY2UoMSwgLTEpLmpvaW4oJ1xuJyk7Cn07CgovLyDlubPmlrnlkozlvIDmoLkKdmFyIGh5cG90ID0gTWF0aC5oeXBvdCA/IE1hdGguaHlwb3QuYmluZChNYXRoKSA6IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gTWF0aC5zcXJ0KFswXS5jb25jYXQoQXJyYXkuYXBwbHkoQXJyYXksIGFyZ3VtZW50cykpCiAgICAucmVkdWNlKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeSAqIHk7IH0pKTsKfTsKCi8vIOWIm+W7uuS4i+i9vQp2YXIgc3RhcnREb3dubG9hZCA9IGZ1bmN0aW9uIChkYXRhLCBmaWxlbmFtZSkgewogIHZhciBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nIH0pOwogIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICB2YXIgc2F2ZWFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogIHNhdmVhcy5ocmVmID0gdXJsOwogIHNhdmVhcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2F2ZWFzKTsKICBzYXZlYXMuZG93bmxvYWQgPSBmaWxlbmFtZTsKICBzYXZlYXMuY2xpY2soKTsKICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgc2F2ZWFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2F2ZWFzKTsgfSwgMTAwMCkKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCBmdW5jdGlvbiAoKSB7IHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7IH0pOwp9OwoKLy8g6K6h566X5paH5a2X5a695bqmCnZhciBjYWxjV2lkdGggPSAoZnVuY3Rpb24gKCkgewoKICAvLyDkvb/nlKhDYW52YXPorqHnrpcKICB2YXIgY2FsY1dpZHRoQ2FudmFzID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwogICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgIHJldHVybiBmdW5jdGlvbiAoZm9udG5hbWUsIHRleHQsIGZvbnRzaXplKSB7CiAgICAgIGNvbnRleHQuZm9udCA9ICdib2xkICcgKyBmb250c2l6ZSArICdweCAnICsgZm9udG5hbWU7CiAgICAgIHJldHVybiBNYXRoLmNlaWwoY29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KS53aWR0aCArIGNvbmZpZy5zcGFjZSk7CiAgICB9OwogIH0KCiAgLy8g5L2/55SoRGl26K6h566XCiAgdmFyIGNhbGNXaWR0aERpdiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBkLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBbCiAgICAgICdhbGw6IHVuc2V0JywgJ3RvcDogLTEwMDAwcHgnLCAnbGVmdDogLTEwMDAwcHgnLAogICAgICAnd2lkdGg6IGF1dG8nLCAnaGVpZ2h0OiBhdXRvJywgJ3Bvc2l0aW9uOiBhYnNvbHV0ZScsCiAgICAnJyxdLmpvaW4oJyAhaW1wb3J0YW50OyAnKSk7CiAgICB2YXIgbGQgPSBmdW5jdGlvbiAoKSB7IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChkKTsgfQogICAgaWYgKCFkb2N1bWVudC5ib2R5KSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbGQpOwogICAgZWxzZSBsZCgpOwogICAgcmV0dXJuIGZ1bmN0aW9uIChmb250bmFtZSwgdGV4dCwgZm9udHNpemUpIHsKICAgICAgZC50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgIGQuc3R5bGUuZm9udCA9ICdib2xkICcgKyBmb250c2l6ZSArICdweCAnICsgZm9udG5hbWU7CiAgICAgIHJldHVybiBkLmNsaWVudFdpZHRoICsgY29uZmlnLnNwYWNlOwogICAgfTsKICB9OwoKICAvLyDmo4Dmn6Xkvb/nlKjlk6rkuKrmtYvph4/mloflrZflrr3luqbnmoTmlrnms5UKICBpZiAoY29uZmlnLnVzZV9jYW52YXMgPT09IG51bGwpIHsKICAgIGlmIChuYXZpZ2F0b3IucGxhdGZvcm0ubWF0Y2goL2xpbnV4L2kpICYmCiAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvY2hyb21lL2kpKSBjb25maWcudXNlX2NhbnZhcyA9IGZhbHNlOwogIH0KICBkZWJ1ZygndXNlIGNhbnZhczogJW8nLCBjb25maWcudXNlX2NhbnZhcyAhPT0gZmFsc2UpOwogIGlmIChjb25maWcudXNlX2NhbnZhcyA9PT0gZmFsc2UpIHJldHVybiBjYWxjV2lkdGhEaXYoKTsKICByZXR1cm4gY2FsY1dpZHRoQ2FudmFzKCk7Cgp9KCkpOwoKLy8g6YCJ5oup5ZCI6YCC55qE5a2X5L2TCnZhciBjaG9zZUZvbnQgPSBmdW5jdGlvbiAoZm9udGxpc3QpIHsKICAvLyDmo4Dmn6Xov5nkuKrlrZfkuLLnmoTlrr3luqbmnaXmo4Dmn6XlrZfkvZPmmK/lkKblrZjlnKgKICB2YXIgc2FtcGxlVGV4dCA9CiAgICAnVGhlIHF1aWNrIGJyb3duIGZveCBqdW1wcyBvdmVyIHRoZSBsYXp5IGRvZycgKwogICAgJzc1MzE5MDI0NjgnICsgJywuIS0nICsgJ++8jOOAgu+8mu+8gScgKwogICAgJ+WkqeWcsOeOhOm7hCcgKyAn5YmH6L+R6YGT55+jJzsKICAvLyDlkozov5nkupvlrZfkvZPov5vooYzmr5TovoMKICB2YXIgc2FtcGxlRm9udCA9IFsKICAgICdtb25vc3BhY2UnLCAnc2Fucy1zZXJpZicsICdzYW5zJywKICAgICdTeW1ib2wnLCAnQXJpYWwnLCAnQ29taWMgU2FucyBNUycsICdGaXhlZCcsICdUZXJtaW5hbCcsCiAgICAnVGltZXMnLCAnVGltZXMgTmV3IFJvbWFuJywKICAgICflrovkvZMnLCAn6buR5L2TJywgJ+aWh+aziempv+ato+m7kScsICdNaWNyb3NvZnQgWWFIZWknCiAgXTsKICAvLyDlpoLmnpzooqvmo4Dmn6XnmoTlrZfkvZPlkozln7rlh4blrZfkvZPlj6/ku6XmuLLmn5Plh7rkuI3lkIznmoTlrr3luqYKICAvLyDpgqPkuYjor7TmmI7ooqvmo4Dmn6XnmoTlrZfkvZPmgLvmmK/lrZjlnKjnmoQKICB2YXIgZGlmZkZvbnQgPSBmdW5jdGlvbiAoYmFzZSwgdGVzdCkgewogICAgdmFyIGJhc2VTaXplID0gY2FsY1dpZHRoKGJhc2UsIHNhbXBsZVRleHQsIDcyKTsKICAgIHZhciB0ZXN0U2l6ZSA9IGNhbGNXaWR0aCh0ZXN0ICsgJywnICsgYmFzZSwgc2FtcGxlVGV4dCwgNzIpOwogICAgcmV0dXJuIGJhc2VTaXplICE9PSB0ZXN0U2l6ZTsKICB9OwogIHZhciB2YWxpZEZvbnQgPSBmdW5jdGlvbiAodGVzdCkgewogICAgdmFyIHZhbGlkID0gc2FtcGxlRm9udC5zb21lKGZ1bmN0aW9uIChiYXNlKSB7CiAgICAgIHJldHVybiBkaWZmRm9udChiYXNlLCB0ZXN0KTsKICAgIH0pOwogICAgZGVidWcoJ2ZvbnQgJXM6ICVvJywgdGVzdCwgdmFsaWQpOwogICAgcmV0dXJuIHZhbGlkOwogIH07CiAgLy8g5om+5LiA5Liq6IO955So55qE5a2X5L2TCiAgdmFyIGYgPSBmb250bGlzdFtmb250bGlzdC5sZW5ndGggLSAxXTsKICBmb250bGlzdCA9IGZvbnRsaXN0LmZpbHRlcih2YWxpZEZvbnQpOwogIGRlYnVnKCdmb250bGlzdDogJW8nLCBmb250bGlzdCk7CiAgcmV0dXJuIGZvbnRsaXN0WzBdIHx8IGY7Cn07CgovLyDku47lpIfpgInnmoTlrZfkvZPkuK3pgInmi6nkuIDkuKrmnLrlmajkuIrmj5DkvpvkuobnmoTlrZfkvZMKdmFyIGluaXRGb250ID0gKGZ1bmN0aW9uICgpIHsKICB2YXIgZG9uZSA9IGZhbHNlOwogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoZG9uZSkgcmV0dXJuOyBkb25lID0gdHJ1ZTsKICAgIGNhbGNXaWR0aCA9IGNhbGNXaWR0aC5iaW5kKHdpbmRvdywKICAgICAgY29uZmlnLmZvbnQgPSBjaG9zZUZvbnQoY29uZmlnLmZvbnRsaXN0KQogICAgKTsKICB9Owp9KCkpOwoKdmFyIGdlbmVyYXRlQVNTID0gZnVuY3Rpb24gKGRhbm1ha3UsIGluZm8pIHsKICB2YXIgYXNzSGVhZGVyID0gZmlsbFN0cihmdW5TdHIoZnVuY3Rpb24gKCkgey8qISBBU1PlvLnluZXmlofku7bmlofku7blpLQKW1NjcmlwdCBJbmZvXQpUaXRsZToge3t0aXRsZX19Ck9yaWdpbmFsIFNjcmlwdDog5qC55o2uIHt7b3JpfX0g55qE5by55bmV5L+h5oGv77yM55SxIGh0dHBzOi8vZ2l0aHViLmNvbS90aWFuc2gvdXMtZGFubWFrdSDnlJ/miJAKU2NyaXB0VHlwZTogdjQuMDArCkNvbGxpc2lvbnM6IE5vcm1hbApQbGF5UmVzWDoge3twbGF5UmVzWH19ClBsYXlSZXNZOiB7e3BsYXlSZXNZfX0KVGltZXI6IDEwLjAwMDAKCltWNCsgU3R5bGVzXQpGb3JtYXQ6IE5hbWUsIEZvbnRuYW1lLCBGb250c2l6ZSwgUHJpbWFyeUNvbG91ciwgU2Vjb25kYXJ5Q29sb3VyLCBPdXRsaW5lQ29sb3VyLCBCYWNrQ29sb3VyLCBCb2xkLCBJdGFsaWMsIFVuZGVybGluZSwgU3RyaWtlT3V0LCBTY2FsZVgsIFNjYWxlWSwgU3BhY2luZywgQW5nbGUsIEJvcmRlclN0eWxlLCBPdXRsaW5lLCBTaGFkb3csIEFsaWdubWVudCwgTWFyZ2luTCwgTWFyZ2luUiwgTWFyZ2luViwgRW5jb2RpbmcKU3R5bGU6IEZpeCx7e2ZvbnR9fSwyNSwmSHt7YWxwaGF9fUZGRkZGRiwmSHt7YWxwaGF9fUZGRkZGRiwmSHt7YWxwaGF9fTAwMDAwMCwmSHt7YWxwaGF9fTAwMDAwMCwxLDAsMCwwLDEwMCwxMDAsMCwwLDEsMiwwLDIsMjAsMjAsMiwwClN0eWxlOiBSMkwse3tmb250fX0sMjUsJkh7e2FscGhhfX1GRkZGRkYsJkh7e2FscGhhfX1GRkZGRkYsJkh7e2FscGhhfX0wMDAwMDAsJkh7e2FscGhhfX0wMDAwMDAsMSwwLDAsMCwxMDAsMTAwLDAsMCwxLDIsMCwyLDIwLDIwLDIsMAoKW0V2ZW50c10KRm9ybWF0OiBMYXllciwgU3RhcnQsIEVuZCwgU3R5bGUsIE5hbWUsIE1hcmdpbkwsIE1hcmdpblIsIE1hcmdpblYsIEVmZmVjdCwgVGV4dAoKICAqL30pLCBjb25maWcsIGluZm8sIHsnYWxwaGEnOiBoZXhBbHBoYShjb25maWcub3BhY2l0eSkgfSk7CiAgLy8g6KGl6b2Q5pWw5a2X5byA5aS055qEMAogIHZhciBwYWRkaW5nTnVtID0gZnVuY3Rpb24gKG51bSwgbGVuKSB7CiAgICBudW0gPSAnJyArIG51bTsKICAgIHdoaWxlIChudW0ubGVuZ3RoIDwgbGVuKSBudW0gPSAnMCcgKyBudW07CiAgICByZXR1cm4gbnVtOwogIH07CiAgLy8g5qC85byP5YyW5pe26Ze0CiAgdmFyIGZvcm1hdFRpbWUgPSBmdW5jdGlvbiAodGltZSkgewogICAgdGltZSA9IDEwMCAqIHRpbWUgXiAwOwogICAgdmFyIGwgPSBbWzEwMCwgMl0sIFs2MCwgMl0sIFs2MCwgMl0sIFtJbmZpbml0eSwgMF1dLm1hcChmdW5jdGlvbiAoYykgewogICAgICB2YXIgciA9IHRpbWUgJSBjWzBdOwogICAgICB0aW1lID0gKHRpbWUgLSByKSAvIGNbMF07CiAgICAgIHJldHVybiBwYWRkaW5nTnVtKHIsIGNbMV0pOwogICAgfSkucmV2ZXJzZSgpOwogICAgcmV0dXJuIGwuc2xpY2UoMCwgLTEpLmpvaW4oJzonKSArICcuJyArIGxbM107CiAgfTsKICAvLyDmoLzlvI/ljJbnibnmlYgKICB2YXIgZm9ybWF0ID0gKGZ1bmN0aW9uICgpIHsKICAgIC8vIOmAgueUqOS6juaJgOacieW8ueW5lQogICAgdmFyIGNvbW1vbiA9IGZ1bmN0aW9uIChsaW5lKSB7CiAgICAgIHZhciBzID0gJyc7CiAgICAgIHZhciByZ2IgPSBsaW5lLmNvbG9yLnNwbGl0KC8oLi4pLykuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KQogICAgICAgIC5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHBhcnNlSW50KHgsIDE2KTsgfSk7CiAgICAgIC8vIOWmguaenOS4jeaYr+eZveiJsu+8jOimgeaMh+WumuW8ueW5leeJueauiueahOminOiJsgogICAgICBpZiAobGluZS5jb2xvciAhPT0gJ0ZGRkZGRicpIC8vIGxpbmUuY29sb3Ig5pivIFJSR0dCQiDmoLzlvI8KICAgICAgICBzICs9ICdcXGMmSCcgKyBsaW5lLmNvbG9yLnNwbGl0KC8oLi4pLykucmV2ZXJzZSgpLmpvaW4oJycpOwogICAgICAvLyDlpoLmnpzlvLnluZXpopzoibLmr5TovoPmt7HvvIznlKjnmb3oibLnmoTlpJbovrnmoYYKICAgICAgdmFyIGRhcmsgPSByZ2JbMF0gKiAwLjI5OSArIHJnYlsxXSAqIDAuNTg3ICsgcmdiWzJdICogMC4xMTQgPCAweDMwOwogICAgICBpZiAoZGFyaykgcyArPSAnXFwzYyZIRkZGRkZGJzsKICAgICAgaWYgKGxpbmUuc2l6ZSAhPT0gMjUpIHMgKz0gJ1xcZnMnICsgbGluZS5zaXplOwogICAgICByZXR1cm4gczsKICAgIH07CiAgICAvLyDpgILnlKjkuo7ku47lj7PliLDlt6blvLnluZUKICAgIHZhciByMmwgPSBmdW5jdGlvbiAobGluZSkgewogICAgICByZXR1cm4gJ1xcbW92ZSgnICsgWwogICAgICAgIGxpbmUucG9zcy54LCBsaW5lLnBvc3MueSwgbGluZS5wb3NkLngsIGxpbmUucG9zZC55CiAgICAgIF0uam9pbignLCcpICsgJyknOwogICAgfTsKICAgIC8vIOmAgueUqOS6juWbuuWumuS9jee9ruW8ueW5lQogICAgdmFyIGZpeCA9IGZ1bmN0aW9uIChsaW5lKSB7CiAgICAgIHJldHVybiAnXFxwb3MoJyArIFsKICAgICAgICBsaW5lLnBvc3MueCwgbGluZS5wb3NzLnkKICAgICAgXS5qb2luKCcsJykgKyAnKSc7CiAgICB9OwogICAgdmFyIHdpdGhDb21tb24gPSBmdW5jdGlvbiAoZikgewogICAgICByZXR1cm4gZnVuY3Rpb24gKGxpbmUpIHsgcmV0dXJuIGYobGluZSkgKyBjb21tb24obGluZSk7IH07CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgJ1IyTCc6IHdpdGhDb21tb24ocjJsKSwKICAgICAgJ0ZpeCc6IHdpdGhDb21tb24oZml4KSwKICAgIH07CiAgfSgpKTsKICAvLyDovazkuYnkuIDkupvlrZfnrKYKICB2YXIgZXNjYXBlQXNzVGV4dCA9IGZ1bmN0aW9uIChzKSB7CiAgICAvLyAieyLjgIEifSLlrZfnrKZsaWJhc3Plj6/ku6XovazkuYnvvIzkvYbmmK9WU0ZpbHRlcuS4jeWPr+S7pe+8jOaJgOS7peebtOaOpeeUqOWFqOinkuihpeS4igogICAgcmV0dXJuIHMucmVwbGFjZSgvey9nLCAn772bJykucmVwbGFjZSgvfS9nLCAn772dJykucmVwbGFjZSgvXHJ8XG4vZywgJycpOwogIH07CiAgLy8g5bCG5LiA6KGM6L2s5o2i5Li6QVNT55qE5LqL5Lu2CiAgdmFyIGNvbnZlcnQyQXNzID0gZnVuY3Rpb24gKGxpbmUpIHsKICAgIHJldHVybiAnRGlhbG9ndWU6ICcgKyBbCiAgICAgIDAsCiAgICAgIGZvcm1hdFRpbWUobGluZS5zdGltZSksCiAgICAgIGZvcm1hdFRpbWUobGluZS5kdGltZSksCiAgICAgIGxpbmUudHlwZSwKICAgICAgJywyMCwyMCwyLCwnLAogICAgXS5qb2luKCcsJykKICAgICAgKyAneycgKyBmb3JtYXRbbGluZS50eXBlXShsaW5lKSArICd9JwogICAgICArIGVzY2FwZUFzc1RleHQobGluZS50ZXh0KTsKICB9OwogIHJldHVybiBhc3NIZWFkZXIgKwogICAgZGFubWFrdS5tYXAoY29udmVydDJBc3MpCiAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KQogICAgLmpvaW4oJ1xuJyk7Cn07CgovKgoK5LiL5paH5a2X5q+N5ZCr5LmJ77yaCjAgICAgICAgfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0teC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+CiAgICAgICAgICAgX19fX19fX19fX19fX19fX19fX19fY19fX19fX19fX19fX19fX19fX19fXwo9ICAgICAgICAvICAgICAgICAgICAgICAgICAgICAgd2MgICAgICAgICAgICAgICAgICAgICAgXCAgICAgIDAKfCAgICAgICB8ICAgICAgICAgICAgICAgICAgIHwtLXYtLXwgICAgICAgICAgICAgICAgIHd2ICB8ICB8LS12LS18CnwgICAgZCAgfC0tdi0tfCAgICAgICAgICAgICAgIGQgZiAgICAgICAgICAgICAgICAgfC0tdi0tfAp5IHwtLXYtLXwgIGwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgIHwgIHMgICAgXyBwCnwgICAgICAgfCAgICAgICAgICAgICAgVklERU8gICAgICAgICAgIHwtLXYtLXwgICAgICAgICAgfC0tdi0tfCBfIG0KdiAgICAgICB8ICAgICAgICAgICAgICBBUkVBICAgICAgICAgICAgKHggXiB5KSAgICAgICAgICB8Cgp2OiDlvLnluZUKYzog5bGP5bmVCgowOiDlvLnluZXlj5HpgIEKYTog5Y+v6KGM5pa55qGICgpzOiDlvIDlp4vlh7rnjrAKZjog5Ye6546w5a6M5YWoCmw6IOW8gOWni+a2iOWksQpkOiDmtojlpLHlrozlhagKCnA6IOS4iui+uee8mO+8iOWQq++8iQptOiDkuIvovrnnvJjvvIjkuI3lkKvvvIkKCnc6IOWuveW6pgpoOiDpq5jluqYKYjog5bqV56uv5L+d55WZCgp0OiDml7bpl7TngrkKdTog5pe26Ze05q61CnI6IOW7tui/nwoK5bm26KeE5a6aCnRzIDo9IHQwcyArIHIKdGYgOj0gd3YgLyAod2MgKyB3cykgKiBwICsgdHMKdGwgOj0gd3MgLyAod2MgKyB3cykgKiBwICsgdHMKdGQgOj0gcCArIHRzCgoqLwoKLy8g5rua5Yqo5by55bmVCnZhciBub3JtYWxEYW5tYWt1ID0gKGZ1bmN0aW9uICh3YywgaGMsIGIsIHUsIG1heHIpIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgLy8g5Yid5aeL5YyW5bGP5bmV5aSW6Z2i5piv5LiN5Y+v55So55qECiAgICB2YXIgdXNlZCA9IFsKICAgICAgeyAncCc6IC1JbmZpbml0eSwgJ20nOiAwLCAndGYnOiBJbmZpbml0eSwgJ3RkJzogSW5maW5pdHksICdiJzogZmFsc2UgfSwKICAgICAgeyAncCc6IGhjLCAnbSc6IEluZmluaXR5LCAndGYnOiBJbmZpbml0eSwgJ3RkJzogSW5maW5pdHksICdiJzogZmFsc2UgfSwKICAgICAgeyAncCc6IGhjIC0gYiwgJ20nOiBoYywgJ3RmJzogSW5maW5pdHksICd0ZCc6IEluZmluaXR5LCAnYic6IHRydWUgfSwKICAgIF07CiAgICAvLyDmo4Dmn6XkuIDkupvlj6/nlKjnmoTkvY3nva4KICAgIHZhciBhdmFpbGFibGUgPSBmdW5jdGlvbiAoaHYsIHQwcywgdDBsLCBiKSB7CiAgICAgIHZhciBzdWdnZXN0aW9uID0gW107CiAgICAgIC8vIOi/meS6m+S4iui+uee8mOaAu+S5i+WIq+eahOWdl+eahOS4i+i+uee8mAogICAgICB1c2VkLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICBpZiAoaS5tID4gaGMpIHJldHVybjsKICAgICAgICB2YXIgcCA9IGkubTsKICAgICAgICB2YXIgbSA9IHAgKyBodjsKICAgICAgICB2YXIgdGFzID0gdDBzOwogICAgICAgIHZhciB0YWwgPSB0MGw7CiAgICAgICAgLy8g6L+Z5Lqb5Z2X55qE5bem6L6557yY5oC75piv6L+Z5Liq5Yy65Z+f6YeM6Z2i5pyA5aSn55qE6L6557yYCiAgICAgICAgdXNlZC5mb3JFYWNoKGZ1bmN0aW9uIChqKSB7CiAgICAgICAgICBpZiAoai5wID49IG0pIHJldHVybjsKICAgICAgICAgIGlmIChqLm0gPD0gcCkgcmV0dXJuOwogICAgICAgICAgaWYgKGouYiAmJiBiKSByZXR1cm47CiAgICAgICAgICB0YXMgPSBNYXRoLm1heCh0YXMsIGoudGYpOwogICAgICAgICAgdGFsID0gTWF0aC5tYXgodGFsLCBqLnRkKTsKICAgICAgICB9KTsKICAgICAgICAvLyDmnIDlkI7kvZzkuLrkuIDnp43lpIfpgInnlZnkuIvmnaUKICAgICAgICBzdWdnZXN0aW9uLnB1c2goewogICAgICAgICAgJ3AnOiBwLAogICAgICAgICAgJ3InOiBNYXRoLm1heCh0YXMgLSB0MHMsIHRhbCAtIHQwbCksCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICAvLyDmoLnmja7pq5jluqbmjpLluo8KICAgICAgc3VnZ2VzdGlvbi5zb3J0KGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LnAgLSB5LnA7IH0pOwogICAgICB2YXIgbXIgPSBtYXhyOwogICAgICAvLyDlj4jpnaDlj7Plj4jpnaDkuIvnmoTpgInmi6nlj6/ku6Xlv73nlaXvvIzliankuIvnmoTov5Tlm54KICAgICAgc3VnZ2VzdGlvbiA9IHN1Z2dlc3Rpb24uZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgaWYgKGkuciA+PSBtcikgcmV0dXJuIGZhbHNlOwogICAgICAgIG1yID0gaS5yOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIHN1Z2dlc3Rpb247CiAgICB9OwogICAgLy8g5re75Yqg5LiA5Liq6KKr5L2/55So55qECiAgICB2YXIgdXNlID0gZnVuY3Rpb24gKHAsIG0sIHRmLCB0ZCkgewogICAgICB1c2VkLnB1c2goeyAncCc6IHAsICdtJzogbSwgJ3RmJzogdGYsICd0ZCc6IHRkLCAnYic6IGZhbHNlIH0pOwogICAgfTsKICAgIC8vIOagueaNruaXtumXtOWQjOatpeaOieaXoOeUqOeahAogICAgdmFyIHN5biA9IGZ1bmN0aW9uICh0MHMsIHQwbCkgewogICAgICB1c2VkID0gdXNlZC5maWx0ZXIoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGkudGYgPiB0MHMgfHwgaS50ZCA+IHQwbDsgfSk7CiAgICB9OwogICAgLy8g57uZ5omA5pyJ5Y+v6IO955qE5L2N572u5omT5YiG77yM5YiG5pWw5pivWzAsIDEp55qECiAgICB2YXIgc2NvcmUgPSBmdW5jdGlvbiAoaSkgewogICAgICBpZiAoaS5yID4gbWF4cikgcmV0dXJuIC1JbmZpbml0eTsKICAgICAgcmV0dXJuIDEgLSBoeXBvdChpLnIgLyBtYXhyLCBpLnAgLyBoYykgKiBNYXRoLlNRUlQxXzI7CiAgICB9OwogICAgLy8g5re75Yqg5LiA5p2hCiAgICByZXR1cm4gZnVuY3Rpb24gKHQwcywgd3YsIGh2LCBiKSB7CiAgICAgIHZhciB0MGwgPSB3YyAvICh3diArIHdjKSAqIHUgKyB0MHM7CiAgICAgIHN5bih0MHMsIHQwbCk7CiAgICAgIHZhciBhbCA9IGF2YWlsYWJsZShodiwgdDBzLCB0MGwsIGIpOwogICAgICBpZiAoIWFsLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICAgIHZhciBzY29yZWQgPSBhbC5tYXAoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIFtzY29yZShpKSwgaV07IH0pOwogICAgICB2YXIgYmVzdCA9IHNjb3JlZC5yZWR1Y2UoZnVuY3Rpb24gKHgsIHkpIHsKICAgICAgICByZXR1cm4geFswXSA+IHlbMF0gPyB4IDogeTsKICAgICAgfSlbMV07CiAgICAgIHZhciB0cyA9IHQwcyArIGJlc3QucjsKICAgICAgdmFyIHRmID0gd3YgLyAod3YgKyB3YykgKiB1ICsgdHM7CiAgICAgIHZhciB0ZCA9IHUgKyB0czsKICAgICAgdXNlKGJlc3QucCwgYmVzdC5wICsgaHYsIHRmLCB0ZCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ3RvcCc6IGJlc3QucCwKICAgICAgICAndGltZSc6IHRzLAogICAgICB9OwogICAgfTsKICB9Owp9KGNvbmZpZy5wbGF5UmVzWCwgY29uZmlnLnBsYXlSZXNZLCBjb25maWcuYm90dG9tLCBjb25maWcucjJsdGltZSwgY29uZmlnLm1heF9kZWxheSkpOwoKLy8g6aG26YOo44CB5bqV6YOo5by55bmVCnZhciBzaWRlRGFubWFrdSA9IChmdW5jdGlvbiAoaGMsIGIsIHUsIG1heHIpIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHVzZWQgPSBbCiAgICAgIHsgJ3AnOiAtSW5maW5pdHksICdtJzogMCwgJ3RkJzogSW5maW5pdHksICdiJzogZmFsc2UgfSwKICAgICAgeyAncCc6IGhjLCAnbSc6IEluZmluaXR5LCAndGQnOiBJbmZpbml0eSwgJ2InOiBmYWxzZSB9LAogICAgICB7ICdwJzogaGMgLSBiLCAnbSc6IGhjLCAndGQnOiBJbmZpbml0eSwgJ2InOiB0cnVlIH0sCiAgICBdOwogICAgLy8g5p+l5om+5Y+v55So55qE5L2N572uCiAgICB2YXIgZnIgPSBmdW5jdGlvbiAocCwgbSwgdDBzLCBiKSB7CiAgICAgIHZhciB0YXMgPSB0MHM7CiAgICAgIHVzZWQuZm9yRWFjaChmdW5jdGlvbiAoaikgewogICAgICAgIGlmIChqLnAgPj0gbSkgcmV0dXJuOwogICAgICAgIGlmIChqLm0gPD0gcCkgcmV0dXJuOwogICAgICAgIGlmIChqLmIgJiYgYikgcmV0dXJuOwogICAgICAgIHRhcyA9IE1hdGgubWF4KHRhcywgai50ZCk7CiAgICAgIH0pOwogICAgICByZXR1cm4geyAncic6IHRhcyAtIHQwcywgJ3AnOiBwLCAnbSc6IG0gfTsKICAgIH07CiAgICAvLyDpobbpg6gKICAgIHZhciB0b3AgPSBmdW5jdGlvbiAoaHYsIHQwcywgYikgewogICAgICB2YXIgc3VnZ2VzdGlvbiA9IFtdOwogICAgICB1c2VkLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICBpZiAoaS5tID4gaGMpIHJldHVybjsKICAgICAgICBzdWdnZXN0aW9uLnB1c2goZnIoaS5tLCBpLm0gKyBodiwgdDBzLCBiKSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gc3VnZ2VzdGlvbjsKICAgIH07CiAgICAvLyDlupXpg6gKICAgIHZhciBib3R0b20gPSBmdW5jdGlvbiAoaHYsIHQwcywgYikgewogICAgICB2YXIgc3VnZ2VzdGlvbiA9IFtdOwogICAgICB1c2VkLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICBpZiAoaS5wIDwgMCkgcmV0dXJuOwogICAgICAgIHN1Z2dlc3Rpb24ucHVzaChmcihpLnAgLSBodiwgaS5wLCB0MHMsIGIpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBzdWdnZXN0aW9uOwogICAgfTsKICAgIHZhciB1c2UgPSBmdW5jdGlvbiAocCwgbSwgdGQpIHsKICAgICAgdXNlZC5wdXNoKHsgJ3AnOiBwLCAnbSc6IG0sICd0ZCc6IHRkLCAnYic6IGZhbHNlIH0pOwogICAgfTsKICAgIHZhciBzeW4gPSBmdW5jdGlvbiAodDBzKSB7CiAgICAgIHVzZWQgPSB1c2VkLmZpbHRlcihmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS50ZCA+IHQwczsgfSk7CiAgICB9OwogICAgLy8g5oyR6YCJ5pyA5aW955qE5pa55qGI77ya5bu26L+f5bCP55qE5LyY5YWI77yM5L2N572u5LiN6YeN6KaBCiAgICB2YXIgc2NvcmUgPSBmdW5jdGlvbiAoaSwgaXNfdG9wKSB7CiAgICAgIGlmIChpLnIgPiBtYXhyKSByZXR1cm4gLUluZmluaXR5OwogICAgICB2YXIgZiA9IGZ1bmN0aW9uIChwKSB7IHJldHVybiBpc190b3AgPyBwIDogKGhjIC0gcCk7IH07CiAgICAgIHJldHVybiAxIC0gKGkuciAvIG1heHIgKiAoMzEvMzIpICsgZihpLnApIC8gaGMgKiAoMS8zMikpOwogICAgfTsKICAgIHJldHVybiBmdW5jdGlvbiAodDBzLCBodiwgaXNfdG9wLCBiKSB7CiAgICAgIHN5bih0MHMpOwogICAgICB2YXIgYWwgPSAoaXNfdG9wID8gdG9wIDogYm90dG9tKShodiwgdDBzLCBiKTsKICAgICAgaWYgKCFhbC5sZW5ndGgpIHJldHVybiBudWxsOwogICAgICB2YXIgc2NvcmVkID0gYWwubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiBbc2NvcmUoaSwgaXNfdG9wKSwgaV07IH0pOwogICAgICB2YXIgYmVzdCA9IHNjb3JlZC5yZWR1Y2UoZnVuY3Rpb24gKHgsIHkpIHsKICAgICAgICByZXR1cm4geFswXSA+IHlbMF0gPyB4IDogeTsKICAgICAgfSlbMV07CiAgICAgIHVzZShiZXN0LnAsIGJlc3QubSwgYmVzdC5yICsgdDBzICsgdSkKICAgICAgcmV0dXJuIHsgJ3RvcCc6IGJlc3QucCwgJ3RpbWUnOiBiZXN0LnIgKyB0MHMgfTsKICAgIH07CiAgfTsKfShjb25maWcucGxheVJlc1ksIGNvbmZpZy5ib3R0b20sIGNvbmZpZy5maXh0aW1lLCBjb25maWcubWF4X2RlbGF5KSk7CgovLyDkuLrmr4/mnaHlvLnluZXlronnva7kvY3nva4KdmFyIHNldFBvc2l0aW9uID0gZnVuY3Rpb24gKGRhbm1ha3UpIHsKICB2YXIgbm9ybWFsID0gbm9ybWFsRGFubWFrdSgpLCBzaWRlID0gc2lkZURhbm1ha3UoKTsKICByZXR1cm4gZGFubWFrdQogICAgLnNvcnQoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudGltZSAtIHkudGltZTsgfSkKICAgIC5tYXAoZnVuY3Rpb24gKGxpbmUpIHsKICAgICAgdmFyIGZvbnRfc2l6ZSA9IE1hdGgucm91bmQobGluZS5zaXplICogY29uZmlnLmZvbnRfc2l6ZSk7CiAgICAgIHZhciB3aWR0aCA9IGNhbGNXaWR0aChsaW5lLnRleHQsIGZvbnRfc2l6ZSk7CiAgICAgIHN3aXRjaCAobGluZS5tb2RlKSB7CiAgICAgICAgY2FzZSAnUjJMJzogcmV0dXJuIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgcG9zID0gbm9ybWFsKGxpbmUudGltZSwgd2lkdGgsIGZvbnRfc2l6ZSwgbGluZS5ib3R0b20pOwogICAgICAgICAgaWYgKCFwb3MpIHJldHVybiBudWxsOwogICAgICAgICAgbGluZS50eXBlID0gJ1IyTCc7CiAgICAgICAgICBsaW5lLnN0aW1lID0gcG9zLnRpbWU7CiAgICAgICAgICBsaW5lLnBvc3MgPSB7CiAgICAgICAgICAgICd4JzogY29uZmlnLnBsYXlSZXNYICsgd2lkdGggLyAyLAogICAgICAgICAgICAneSc6IHBvcy50b3AgKyBmb250X3NpemUsCiAgICAgICAgICB9OwogICAgICAgICAgbGluZS5wb3NkID0gewogICAgICAgICAgICAneCc6IC13aWR0aCAvIDIsCiAgICAgICAgICAgICd5JzogcG9zLnRvcCArIGZvbnRfc2l6ZSwKICAgICAgICAgIH07CiAgICAgICAgICBsaW5lLmR0aW1lID0gY29uZmlnLnIybHRpbWUgKyBsaW5lLnN0aW1lOwogICAgICAgICAgcmV0dXJuIGxpbmU7CiAgICAgICAgfSgpKTsKICAgICAgICBjYXNlICdUT1AnOiBjYXNlICdCT1RUT00nOiByZXR1cm4gKGZ1bmN0aW9uIChpc1RvcCkgewogICAgICAgICAgdmFyIHBvcyA9IHNpZGUobGluZS50aW1lLCBmb250X3NpemUsIGlzVG9wLCBsaW5lLmJvdHRvbSk7CiAgICAgICAgICBpZiAoIXBvcykgcmV0dXJuIG51bGw7CiAgICAgICAgICBsaW5lLnR5cGUgPSAnRml4JzsKICAgICAgICAgIGxpbmUuc3RpbWUgPSBwb3MudGltZTsKICAgICAgICAgIGxpbmUucG9zZCA9IGxpbmUucG9zcyA9IHsKICAgICAgICAgICAgJ3gnOiBNYXRoLnJvdW5kKGNvbmZpZy5wbGF5UmVzWCAvIDIpLAogICAgICAgICAgICAneSc6IHBvcy50b3AgKyBmb250X3NpemUsCiAgICAgICAgICB9OwogICAgICAgICAgbGluZS5kdGltZSA9IGNvbmZpZy5maXh0aW1lICsgbGluZS5zdGltZTsKICAgICAgICAgIHJldHVybiBsaW5lOwogICAgICAgIH0obGluZS5tb2RlID09PSAnVE9QJykpOwogICAgICAgIGRlZmF1bHQ6IHJldHVybiBudWxsOwogICAgICB9OwogICAgfSkKICAgIC5maWx0ZXIoZnVuY3Rpb24gKGwpIHsgcmV0dXJuIGw7IH0pCiAgICAuc29ydChmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geC5zdGltZSAtIHkuc3RpbWU7IH0pOwp9OwoKLyoKICogYmlsaWJpbGkKICovCgovLyDojrflj5Z4bWwKdmFyIGZldGNoWE1MID0gZnVuY3Rpb24gKGNpZCwgY2FsbGJhY2spIHsKICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAnbWV0aG9kJzogJ0dFVCcsCiAgICAndXJsJzogJ2h0dHA6Ly9jb21tZW50LmJpbGliaWxpLmNvbS97e2NpZH19LnhtbCcucmVwbGFjZSgne3tjaWR9fScsIGNpZCksCiAgICAnb25sb2FkJzogZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgdmFyIGNvbnRlbnQgPSByZXNwLnJlc3BvbnNlVGV4dC5yZXBsYWNlKC8oPzpbXDAtXHgwOFx4MEJcZlx4MEUtXHgxRlx1RkZGRVx1RkZGRl18W1x1RDgwMC1cdURCRkZdKD8hW1x1REMwMC1cdURGRkZdKXwoPzpbXlx1RDgwMC1cdURCRkZdfF4pW1x1REMwMC1cdURGRkZdKS9nLCAiIik7CiAgICAgIGNhbGxiYWNrKGNvbnRlbnQpOwogICAgfQogIH0pOwp9OwoKdmFyIGZldGNoRGFubWFrdSA9IGZ1bmN0aW9uIChjaWQsIGNhbGxiYWNrKSB7CiAgZmV0Y2hYTUwoY2lkLCBmdW5jdGlvbiAoY29udGVudCkgewogICAgY2FsbGJhY2socGFyc2VYTUwoY29udGVudCkpOwogIH0pOwp9OwoKdmFyIHBhcnNlWE1MID0gZnVuY3Rpb24gKGNvbnRlbnQpIHsKICB2YXIgZGF0YSA9IChuZXcgRE9NUGFyc2VyKCkpLnBhcnNlRnJvbVN0cmluZyhjb250ZW50LCAndGV4dC94bWwnKTsKICByZXR1cm4gQXJyYXkuYXBwbHkoQXJyYXksIGRhdGEucXVlcnlTZWxlY3RvckFsbCgnZCcpKS5tYXAoZnVuY3Rpb24gKGxpbmUpIHsKICAgIHZhciBpbmZvID0gbGluZS5nZXRBdHRyaWJ1dGUoJ3AnKS5zcGxpdCgnLCcpLCB0ZXh0ID0gbGluZS50ZXh0Q29udGVudDsKICAgIHJldHVybiB7CiAgICAgICd0ZXh0JzogdGV4dCwKICAgICAgJ3RpbWUnOiBOdW1iZXIoaW5mb1swXSksCiAgICAgICdtb2RlJzogW3VuZGVmaW5lZCwgJ1IyTCcsICdSMkwnLCAnUjJMJywgJ0JPVFRPTScsICdUT1AnXVtOdW1iZXIoaW5mb1sxXSldLAogICAgICAnc2l6ZSc6IE51bWJlcihpbmZvWzJdKSwKICAgICAgJ2NvbG9yJzogUlJHR0JCKHBhcnNlSW50KGluZm9bM10sIDEwKSAmIDB4ZmZmZmZmKSwKICAgICAgJ2JvdHRvbSc6IE51bWJlcihpbmZvWzVdKSA+IDAsCiAgICAgIC8vICdjcmVhdGUnOiBuZXcgRGF0ZShOdW1iZXIoaW5mb1s0XSkpLAogICAgICAvLyAncG9vbCc6IE51bWJlcihpbmZvWzVdKSwKICAgICAgLy8gJ3NlbmRlcic6IFN0cmluZyhpbmZvWzZdKSwKICAgICAgLy8gJ2RtaWQnOiBOdW1iZXIoaW5mb1s3XSksCiAgICB9OwogIH0pOwp9OwoKLy8g6I635Y+W5b2T5YmNY2lkCnZhciBnZXRDaWQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICBkZWJ1ZygnZ2V0IGNpZC4uLicpOwogIHZhciBjaWQgPSBudWxsLCBzcmMgPSBudWxsOwogIHRyeSB7CiAgICBzcmMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgaWZyYW1lLCAjbW92aWVib2ZxaSBpZnJhbWUnKS5zcmMucmVwbGFjZSgvXi4qXD8vLCAnJyk7CiAgICBjaWQgPSBOdW1iZXIoc3JjLm1hdGNoKC9jaWQ9KFxkKykvKVsxXSk7CiAgfSBjYXRjaCAoZSkgeyB9CiAgaWYgKCFjaWQpIHRyeSB7CiAgICBzcmMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm9mcWkgZW1iZWQsICNtb3ZpZWJvZnFpIGVtYmVkJykuZ2V0QXR0cmlidXRlKCdmbGFzaHZhcnMnKTsKICAgIGNpZCA9IE51bWJlcihzcmMubWF0Y2goL2NpZD0oXGQrKS8pWzFdKTsKICB9IGNhdGNoIChlKSB7IH0KICBpZiAoIWNpZCkgdHJ5IHsKICAgIHNyYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNib2ZxaSBvYmplY3QgcGFyYW1bbmFtZT0iZmxhc2h2YXJzIl0sICNtb3ZpZWJvZnFpIG9iamVjdCBwYXJhbVtuYW1lPSJmbGFzaHZhcnMiXScpLmdldEF0dHJpYnV0ZSgndmFsdWUnKTsKICAgIGNpZCA9IE51bWJlcihzcmMubWF0Y2goL2NpZD0oXGQrKS8pWzFdKTsKICB9IGNhdGNoIChlKSB7IH0KICBpZiAoY2lkKSBzZXRUaW1lb3V0KGNhbGxiYWNrLCAwLCBjaWQpOwogIGVsc2UgaWYgKHNyYykgR01feG1saHR0cFJlcXVlc3QoewogICAgJ21ldGhvZCc6ICdHRVQnLAogICAgJ3VybCc6ICdodHRwOi8vaW50ZXJmYWNlLmJpbGliaWxpLmNvbS9wbGF5ZXI/JyArIHNyYywKICAgICdvbmxvYWQnOiBmdW5jdGlvbiAocmVzcCkgewogICAgICB0cnkgeyBjaWQgPSBOdW1iZXIocmVzcC5yZXNwb25zZVRleHQubWF0Y2goLzxjaGF0aWQ+KFxkKyk8XC9jaGF0aWQ+LylbMV0pOyB9CiAgICAgIGNhdGNoIChlKSB7IH0KICAgICAgc2V0VGltZW91dChjYWxsYmFjaywgMCwgY2lkIHx8IHVuZGVmaW5lZCk7CiAgICB9LAogICAgJ29uZXJyb3InOiBmdW5jdGlvbiAoKSB7IHNldFRpbWVvdXQoY2FsbGJhY2ssIDApOyB9CiAgfSk7IGVsc2UgewogICAgc2V0VGltZW91dChnZXRDaWQsIDEwMCwgY2FsbGJhY2spOwogIH0KfTsKCi8vIOS4i+i9veeahOS4u+eoi+W6jwp2YXIgbWluYSA9IGZ1bmN0aW9uIChjaWQwKSB7CiAgZ2V0Q2lkKGZ1bmN0aW9uIChjaWQpIHsKICAgIGNpZCA9IGNpZCB8fCBjaWQwOwogICAgZmV0Y2hEYW5tYWt1KGNpZCwgZnVuY3Rpb24gKGRhbm1ha3UpIHsKICAgICAgdmFyIG5hbWU7CiAgICAgIHRyeSB7IG5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlld2JveCBoMSwgLnZpZXdib3ggaDInKS50ZXh0Q29udGVudDsgfQogICAgICBjYXRjaCAoZSkgeyBuYW1lID0gJycgKyBjaWQ7IH0KICAgICAgZGVidWcoJ2dvdCB4bWwgd2l0aCAlZCBkYW5tYWt1JywgZGFubWFrdS5sZW5ndGgpOwogICAgICB2YXIgYXNzID0gZ2VuZXJhdGVBU1Moc2V0UG9zaXRpb24oZGFubWFrdSksIHsKICAgICAgICAndGl0bGUnOiBkb2N1bWVudC50aXRsZSwKICAgICAgICAnb3JpJzogbG9jYXRpb24uaHJlZiwKICAgICAgfSk7CiAgICAgIHN0YXJ0RG93bmxvYWQoJ1x1ZmVmZicgKyBhc3MsIG5hbWUgKyAnLmFzcycpOwogICAgfSk7CiAgfSk7Cn07CgovLyDmmL7npLrlh7rkuIvovb3lvLnluZXmjInpkq4KdmFyIHNob3dCdXR0b24gPSBmdW5jdGlvbiAoY291bnQpIHsKICBHTV9hZGRTdHlsZSgnLmFyYy10b29sYmFyIC5ibG9jay5mYXYgeyBtYXJnaW4tcmlnaHQ6IDAgfSAuYXJjLXRvb2xiYXIgLmJsb2NrIHsgcGFkZGluZzogMCAxOHB4OyB9Jyk7CiAgdmFyIGZhdmJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcmMtdG9vbGJhciAuYmxvY2suZmF2Jyk7CiAgdmFyIGFzc2Rvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBhc3Nkb3duLmlubmVySFRNTCA9ICc8ZGl2IGlkPSJhc3Nkb3duIiBjbGFzcz0iYmxvY2sgYXNzIj48c3BhbiBjbGFzcz0idCBhc3NfYnRuIj48aSBzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4MHB4OyBoZWlnaHQ6IDgwcHg7IGJhY2tncm91bmQtcG9zaXRpb246IDBweCAwcHg7IGJhY2tncm91bmQtaW1hZ2U6IHVybCgmcXVvdDtkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQlZBQUFBQlFDQU1BQUFESW1LN2RBQUFBQkdkQlRVRUFBTEdQQy94aEJRQUFBQUZ6VWtkQ0FLN09IT2tBQUFKblVFeFVSZi8vLzh6TXpCWVdGZ2NIQndFQkFkSFIwWnljbkthbXBnVUZCZWpvNkJjWEZ4Z1lHS0dob1JVVkZRa0pDY3JLeXZUMDlFeE1UQlFVRlBiMjl2UHo4K3ZyNitmbjV3QUFBS21wcWRiVzFnSUNBaE1URTBkSFIvMzkvYkt5c2h3Y0hPYm01bEJRVUJzYkc3aTR1Q2twS1VaR1JubDVlUzh2TDhURXhBTURBeXdzTENnb0tIRnhjWStQai9yNit1TGk0a2hJU1B6OC9PN3U3bmQzZC83Ky92ZjM5MkZoWWZMeTh0cmEydlgxOWZqNCtIOS9mMWxaV2ZuNStYaDRlTzN0N2Z2NysxSlNVa3RMUzFoWVdEOC9QNnlzckZGUlViR3hzWnVibThYRnhRWUdCbzZPamxkWFYyOXZiNzI5dlRrNU9WTlRVMjV1YnJPenM2ZW5wOURRMElPRGc2aW9xQ29xS3M3T3pwQ1FrRTlQVDF0Ylc2MnRyU2NuSjRLQ2d1L3Y3MEJBUU1qSXlGWldWdHpjM0RJeU1qNCtQdURnNEVORFE2cXFxbloyZGpZMk50VFUxSW1KaWJXMXRXUmtaRjVlWG5wNmVrMU5UYlMwdEdCZ1lIdDdlNHFLaXVQajQwbEpTYVdscFkyTmpVSkNRZ29LQ3QvZjMyVmxaWFIwZEdkblp5c3JLOHZMeTk3ZTNwV1ZsUjBkSFJrWkdYSnljaDhmSHk0dUxpQWdJQTBORGJtNXVaR1JrVDA5UFE4UEQvSHg4YisvdnhFUkVkZlgxd3dNRE9UazVEZzRPSFYxZForZm44REF3RTVPVGxwYVd0bloyWHg4Zk9YbDVXdHJhK3JxNmx4Y1hJYUdob3lNakVwS1NwZVhsNWlZbU1QRHc5alkySVNFaExDd3NFUkVSSE56YzZDZ29HcHFhc2JHeHJ1N3U1U1VsRjlmWDVLU2tteHNiR0ppWWpNek0yWm1aZ3NMQ3pvNk91enM3TWZIeHpRME5LT2pvNTJkbmJlM3Q0R0JnY25KeWNMQ3dyYTJ0dHZiMjVtWm1lSGg0UzB0TFcxdGJTRWhJV2xwYVg1K2ZqczdPNTZlbms2WmoxRUFBQVpKU1VSQlZIamE3WjMzWDFOWEhJWlB4cjNCSkF4SjVHb05DcTRPclJVSUlsU1FJYUtBZ0Z0Y3VOQmFXM2ZkZTlTNjZ1N2VlKys5OS82amVsRVRFQ0hra2lQY0U1N25GMDN5K2tDK3dQczVuTVI3aEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCSWNqUlBURFFtMUxmenc0Y1BuN0krVFhlNlVtTGdjdnJwMUQ2Y0h6NTgrTlQxT1p4cFRqMW1RL3ZOaElQaTdLUDU0Y09IVDJHZjE2ZHJQWGE0TDVVMWF0L01EeDgrZk9yNnRGUnZQT1dycCtsMFoxL01EeDgrZk9yNmhNZWx4L2R4azJ1Sm10RU53WEtMSXRuenc0Y1BuN28rNFVueHhKWFRYUjZSTk93c3F4emNOYnZxWjAwTFd5cFV5ZlBEaHcrZnVyNjRoZkhtVkdERkl2ZmdyZDAwYW03cjU1K1czb1pDSlVlT1hQTG5PZ1FIZFlNTkN2WEt0cG9SWGZGMmVtOXNDOXhWMVJuRlhmL0tYMXhTYzZEMmkwSzdGbXArbHZrRnlRcEk4QVZ6b2wvZ25LQXRmSEsrLy9EaDYwOWZlM0NJdXh1RzlIZWhudi8rY09ieGtWMnlmTWNuKzYzcUhxcDlwQ1RXNCtYanZKcGRDM1c2NFhZYnhrd0p2Z0lqK2dVMkN1emdrL1Q5aHc5ZmYvb1VXS0VHcHJvbW5YR2tkOG1xMWFsZnJiT21DNFpDeGJFVHF4NnZtc2dLbFJVcVBud0pyRkR0dW9lYVgrODgwMzIvaFdlZE9HaTFVR2NFWWlmQ3N4L0xZUStWSERseWlleWgyclJRTDV5ZUYvUHhPUmVQV0N6VTNCNEtOZnZSTzdNb1ZITGt5Q1Zob2Y0eTZxZVlqNzk1c2xsMm9VNmdVTW1SSTVkWW9kcDBEM1gwcUx0aVByNXpUQjJGU2k2ZVhQc090SDMyb0NkbWRmcHh5NXFXMTd2UGp6MVBYdVdYVWFqM2piK1hRaVVYVDY3OVBSTDJlWmZFdzBhbkh6Zmp3Zm05K3Z4NFZaNVgrU2xVY3F4UVdhRW01d3BWMWg0Q2hVcU9ITGtCbXFOUUtWUnk1TWhScUJRcU9YTGtiRnVvN0tGU3FPVElzUWZOcS93VUtqbHl0ejNIdXlUNmJZVmFzNkZzWEpTeWd1cEJGQ281Y3F4UUI5QUtWZFllZ2tsZ3poTC9BMFBicWQ2emNoYUZTbzRjdVdUUDNaWXI5amUvMFBtZXVVOEhCbmloY29WemZQaVMzeGZ2bVNvT0syZEtQWGZMNVV6eUtxWW9WS2lXTG80aWVYNzQ4T0ZUMXhmbnFYL3BtVlpPUGIzZjMvbWU4bWRzVktnOVhiNVBXTGw4bit6NTRjT0hUMTFmWE9kU2E3b3pMZFBDVmV4dkxkU0pVeE1vMU5qN3I0TVd2V0t4VUh1NndQUUZLeGVZbGo0L2ZQandxZXN6amM0MHA5L2pHZFpCNExrSnZ4blFyUndpTGJWUWZ6Z1JlNFY2ekxYTW1yQ0hJMURDRFpkSFdUb3hXL2I4OE9IRHA2NnY3ZC83bmE0T2U3TU84MVlIWE9hSHM5UXdjZ3QxemFsSkxUSHE3elZqYWFGRjR3SjMvWGZGd1VEMHRPanNZUHNaZmFVL3o3NTg4cEExbyt6NTRjT0hUMTNmTmNmd3FGRHorM3o2VFExdDJTYTFVTVdSNDJ2UGZoMG96STdjTGdsRUtaMjcyYlc4eHJKeHhiZU5UZlhISXN2VW5FTzdPcHdpdlhmdDFQbWxvbi9uaHc4ZlBwVjlRdWdSb2NQcjgyc2lNZVFXcWtnUG5hdHNXcEZ4NDliQ3l0Q2tDSlY3cHkvb3pmOFptSFpwZldSaFc3cTRjZCtNclpFK2ZUVjNibjU1djg4UEh6NThTdnVpYjhkeWVPTjUwY3R5b2VZdGZUWUJYMG4rajhiS29tdC96ZnBvWDJqVDVCdHNuck94dUpmSzMvK291bGFvaFo4ZG50MVFXQno1bFQ5WWFvZjU0Y09IVDJsZlJDakh0MlYzNTNzS0s0OG1wbHg5dlZDL09iVmtXVENjSGFIM3ZzRFlwclpDTFpuczJwMW51L25odzRkUGFkOTFvYWI3cFBnV1Z1eS8rWTduWjJ4UHNMYitiRzByMUZXWlMxcmtQTitpOVZYbVl2VDh4MTlXMjNCKytQRGhVOXBuQ3U4Ulk1MXBUam0rMTFlL082THR6NmVlYUx0R1N0bU9semE4bUtEeDcvVUJVZDdnelMyUzlIeUxRcTNoWDM4N2QzcVpMZWVIRHg4K2xYMm1jUGdZbjAvWEpPa0M3MjhYSXUvbFRVKzJYU05sM3JhTWhJVVRVby8rRjBwcnlwRDFmSXNxakxxMVJ1TkNtODRQSHo1OEN2dUU1NDY3WGZMcVdZZ1BENHFTQTF1eXBma0tqS3NYeDgvTWwrWXpDOVdvcld1eDdmenc0Y09ucnM4VXBtU21TL1NOcnZDLzg1WkVYNWxoWEYwbjBXY1dxcnZaeHZQRGh3K2Z1ajZodStUNlBqQVd2U0hUOTQvUktMTlB4WkNRKzJ6WXh2UERodytmdWo3Tm15clZKOTViUGtXbTd0SmYvMTZSNlF2cnpqbzd6dzhmUG56cStzU3dvWnBVbjJoWUkxVzNlSTljWDk3R3hlVjJuaDgrZlBqVTlRRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWdFMzVINlRJdktwaWh0eGhBQUFBQUVsRlRrU3VRbUNDJnF1b3Q7KTsiIGNsYXNzPSJiLWljb24gYi1pY29uLWEgYi1pY29uLWFuaW0tYXNzIiB0aXRsZT0i5by55bmV5LiL6L29Ij48L2k+PGRpdiBjbGFzcz0idC1yaWdodCI+PHNwYW4gY2xhc3M9InQtcmlnaHQtdG9wIj7lvLnluZXkuIvovb08L3NwYW4+PHNwYW4gY2xhc3M9InQtcmlnaHQtYm90dG9tIj4nICsgY291bnQgKyAnPC9zcGFuPjwvZGl2Pjwvc3Bhbj48L2Rpdj4nOwogIGFzc2Rvd24gPSBhc3Nkb3duLmZpcnN0Q2hpbGQ7CiAgZmF2YmFyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGFzc2Rvd24sIGZhdmJhci5uZXh0U2libGluZyk7CiAgdmFyIHRpbWVyID0gbnVsbCwgZnJhbWUgPSAwOwogIGFzc2Rvd24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHsgZnJhbWUgPSAwOyB0aW1lciA9IHNldFRpbWVvdXQoYW5pbSwgMCk7IH0pOwogIGFzc2Rvd24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHsgY2xlYXJUaW1lb3V0KHRpbWVyKTsgdGltZXIgPSBudWxsOyB9KTsKICB2YXIgYW5pbSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChmcmFtZSA9PT0gMTYpIHsgdGltZXIgPSBudWxsOyByZXR1cm47IH0KICAgIGZyYW1lKys7CiAgICBhc3Nkb3duLnF1ZXJ5U2VsZWN0b3IoJ2knKS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAnLScgKyAoZnJhbWUgKiA4MCkgKyAncHggMCc7CiAgICBzZXRUaW1lb3V0KGFuaW0sIDEwMDAgLyAxNik7CiAgfTsKfTsKCi8vIOWIneWni+WMluaMiemSrgp2YXIgaW5pdEJ1dHRvbiA9IChmdW5jdGlvbiAoKSB7CiAgdmFyIGRvbmUgPSBmYWxzZTsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgZGVidWcoJ2luaXQgYnV0dG9uJyk7CiAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcmMtdG9vbGJhciAuYmxvY2suZmF2JykpIHJldHVybjsKICAgIGdldENpZChmdW5jdGlvbiAoY2lkKSB7CiAgICAgIGRlYnVnKCdjaWQgPSAlbycsIGNpZCk7CiAgICAgIGlmICghY2lkIHx8IGRvbmUpIHJldHVybjsgZWxzZSBkb25lID0gdHJ1ZTsKICAgICAgZmV0Y2hEYW5tYWt1KGNpZCwgZnVuY3Rpb24gKGRhbm1ha3UpIHsKICAgICAgICBzaG93QnV0dG9uKGRhbm1ha3UubGVuZ3RoKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXNzZG93bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIG1pbmEoY2lkKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKICB9Owp9KCkpOwoKLyoKICogQ29tbW9uCiAqLwoKIC8vIOWIneWni+WMlgp2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHsKICBpbml0Rm9udCgpOwogIGluaXRCdXR0b24oKTsKfTsKCmlmIChkb2N1bWVudC5ib2R5KSBpbml0KCk7CmVsc2Ugd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0KTs="}]},{"name":"百度网盘下载管理器","options":{"awareOfChrome":false,"check_for_updates":true,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["baidu.com","qdall01.baidupcs.com"],"orig_excludes":[],"orig_includes":["https://pan.baidu.com/disk/*","https://yun.baidu.com/disk/*","https://pan.baidu.com/s/*","https://yun.baidu.com/s/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"ITEM_LIST":"o[{\"category\":1,\"fsId\":456997620948324,\"isDir\":false,\"localCtime\":1585661990,\"localMtime\":1585662093,\"md5\":\"2e09a95bap906a455cb55353fdaaad75\",\"operId\":2188864136,\"path\":\"/视频/FrozenⅡ.2160P.BD-DIY.DTS-HD MA & TRUEHD 7.1.x265. 72fps - CYK & Lee-7723/Frozen II - Ultra HD™-05.mkv\",\"privacy\":0,\"serverAtime\":0,\"serverCtime\":1585666358,\"serverFilename\":\"Frozen II - Ultra HD™-05.mkv\",\"serverMtime\":1585912300,\"share\":0,\"size\":3916094420,\"unList\":0,\"url\":\"https://qdall01.baidupcs.com/file/2e09a95bap906a455cb55353fdaaad75?bkt=en-82d2bca2fdceac3f596294259d9482c96aea91e947b8bfc42ed3daa2734cf301ad8e9130590cec3a&fid=2188864136-778750-456997620948324&time=1596675267&sign=FDTAXUGERQlBHSKfWa-DCb740ccc5511e5e8fedcff06b081203-cIEO7ik2m8yfyC2DWTyCQW%2F9FJI%3D&to=92&size=3916094420&sta_dx=3916094420&sta_cs=0&sta_ft=mkv&sta_ct=5&sta_mt=5&fm2=MH%2CXian%2CAnywhere%2C%2Cbeijing%2Ccnc&ctime=1585666358&mtime=1585912300&resv0=-1&resv1=0&resv2=rlim&resv3=2&resv4=3916094420&vuk=2188864136&iv=-2&htype=&randtype=em&newver=1&newfm=1&secfm=1&flow_ver=3&pkey=en-fe699bbb9d2017ddd5efd4d486fa14a4aed481e3364a8142956fc7956dfc36efe36536716722e4bf&expires=8h&rt=pr&r=346920387&mlogid=5064643399529841516&vbdid=1541388608&fin=Frozen+II+-+Ultra+HD%E2%84%A2-05.mkv&bflag=92,34-92&rtype=1&dp-logid=5064643399529841516&dp-callid=0.1.1&hps=1&tsl=0&csl=0&fsl=-1&csign=n1SwGOR9pMZtKB7nl3xZQhXh3Hs%3D&so=0&ut=8&uter=0&serv=1&uc=1458616558&ti=cdac69781712398077b233629596f64d2e04e729fc4efbaf305a5e1275657320&hflag=30&adg=c_085e327e7319a99bd7ed6f825d0134c6&reqlabel=778750_l_d692651a96d79035e732ef7d2d3a6a62_-1_0cf00041acff140ba1435eb7a2d3b18b&ibp=1&by=themis&filename=Frozen%20II%20-%20Ultra%20HD%E2%84%A2-05.mkv\",\"progress\":{\"intervalId\":1198,\"request\":{},\"_speedOverlay\":0,\"_status\":\"COMPLETED\",\"_percentCount\":100,\"fsId\":456997620948324}},{\"category\":6,\"fsId\":913210560122375,\"isDir\":false,\"localCtime\":1597196330,\"localMtime\":1597196347,\"md5\":\"432ca9f75p36fa72b0b95a6d60f84686\",\"operId\":0,\"path\":\"/我的资源/Adobe_Audition_2020_13.0.9.41_SP_20200812.rar\",\"privacy\":1,\"serverAtime\":0,\"serverCtime\":1597197274,\"serverFilename\":\"Adobe_Audition_2020_13.0.9.41_SP_20200812.rar\",\"serverMtime\":1597234202,\"share\":0,\"size\":435027980,\"unList\":0,\"url\":\"https://qdall01.baidupcs.com/file/432ca9f75p36fa72b0b95a6d60f84686?bkt=en-cf7b18a7c51d90781937a6b91160f82b335fbfab9c18e59cb7587b2a6d5fca091f69875b557b29d3&fid=2188864136-778750-913210560122375&time=1597234427&sign=FDTAXUGERQlBHSKfWa-DCb740ccc5511e5e8fedcff06b081203-huGzIoHAAb2SV%2BtF3k4YQThEBGg%3D&to=92&size=435027980&sta_dx=435027980&sta_cs=22&sta_ft=rar&sta_ct=0&sta_mt=0&fm2=MH%2CXian%2CAnywhere%2C%2Cbeijing%2Ccnc&ctime=1597197274&mtime=1597234202&resv0=-1&resv1=0&resv2=rlim&resv3=2&resv4=435027980&vuk=2188864136&iv=-2&htype=&randtype=em&newver=1&newfm=1&secfm=1&flow_ver=3&pkey=en-8f4147657f0d70e664d6ddf5ffc01d44e5d77e180ab7749b173b67be1c55d86bc5baec7785eb66e9&expires=8h&rt=pr&r=158415041&mlogid=5214741714834823752&vbdid=1541388608&fin=Adobe_Audition_2020_13.0.9.41_SP_20200812.rar&bflag=92,34-92&rtype=1&dp-logid=5214741714834823752&dp-callid=0.1.1&hps=1&tsl=0&csl=0&fsl=-1&csign=n1SwGOR9pMZtKB7nl3xZQhXh3Hs%3D&so=0&ut=8&uter=0&serv=0&uc=1458616558&ti=9cf67ec2c4eb6cc0401d129deb5f682eb5bcc6b2016b0e56&hflag=30&adg=c_085e327e7319a99bd7ed6f825d0134c6&reqlabel=778750_l_db828d217d35b98eeaeda28edf79e37b_-1_1c44bc0eca6153f8c7af0e0e83a67307&ibp=1&by=themis&filename=Adobe_Audition_2020_13.0.9.41_SP_20200812.rar\",\"progress\":{\"intervalId\":7405,\"request\":{},\"_speedOverlay\":0,\"_status\":\"COMPLETED\",\"_percentCount\":100,\"fsId\":913210560122375}},{\"category\":6,\"fsId\":229229886175616,\"isDir\":false,\"localCtime\":1594967896,\"localMtime\":1594967969,\"md5\":\"7ff7c60a0n69f037778cf88cdcd9a647\",\"operId\":0,\"path\":\"/我的资源/Adobe_Photoshop_2020_21.2.1.265_ACR12.3_SP_20200717.rar\",\"privacy\":1,\"serverAtime\":0,\"serverCtime\":1594968747,\"serverFilename\":\"Adobe_Photoshop_2020_21.2.1.265_ACR12.3_SP_20200717.rar\",\"serverMtime\":1597234202,\"share\":0,\"size\":1886754879,\"unList\":0,\"url\":\"https://qdall01.baidupcs.com/file/7ff7c60a0n69f037778cf88cdcd9a647?bkt=en-2bd419aa17f4904ffc6911d174526abfb7ecbbf5e00dae40d928e8cd9bd7ebffac748f42d8181766&fid=2188864136-778750-229229886175616&time=1597234952&sign=FDTAXUGERQlBHSKfWa-DCb740ccc5511e5e8fedcff06b081203-jkuwNvcnWnwMpZrYOAdqjql57qg%3D&to=92&size=1886754879&sta_dx=1886754879&sta_cs=15960&sta_ft=rar&sta_ct=4&sta_mt=0&fm2=MH%2CXian%2CAnywhere%2C%2Cbeijing%2Ccnc&ctime=1594968747&mtime=1597234202&resv0=-1&resv1=0&resv2=rlim&resv3=2&resv4=1886754879&vuk=2188864136&iv=-2&htype=&randtype=em&newver=1&newfm=1&secfm=1&flow_ver=3&pkey=en-e4e68753489de3c757df16923dd6dc2b8ac24ae722100e26d4a5cbb0bbfe3248ff555bf68994deec&expires=8h&rt=pr&r=839572576&mlogid=5214882733057434088&vbdid=1541388608&fin=Adobe_Photoshop_2020_21.2.1.265_ACR12.3_SP_20200717.rar&bflag=92,34-92&rtype=1&dp-logid=5214882733057434088&dp-callid=0.1.1&hps=1&tsl=0&csl=0&fsl=-1&csign=n1SwGOR9pMZtKB7nl3xZQhXh3Hs%3D&so=0&ut=8&uter=0&serv=0&uc=1458616558&ti=6271d6a92c89ad8ba1a445f94d8e7494ca3a57e47cada1a1&hflag=30&adg=c_085e327e7319a99bd7ed6f825d0134c6&reqlabel=778750_l_db828d217d35b98eeaeda28edf79e37b_-1_1c44bc0eca6153f8c7af0e0e83a67307&ibp=1&by=themis&filename=Adobe_Photoshop_2020_21.2.1.265_ACR12.3_SP_20200717.rar\",\"progress\":{\"intervalId\":22857,\"request\":{},\"_speedOverlay\":0,\"_status\":\"COMPLETED\",\"_percentCount\":100,\"fsId\":229229886175616}},{\"category\":6,\"fsId\":686394314532275,\"isDir\":false,\"localCtime\":1597196594,\"localMtime\":1597196634,\"md5\":\"6aa940121i9f8b9bd62c8404b6abc95f\",\"operId\":0,\"path\":\"/我的资源/Adobe_Media_Encoder_2020_14.3.2.37_SP_20200812.rar\",\"privacy\":1,\"serverAtime\":0,\"serverCtime\":1597197560,\"serverFilename\":\"Adobe_Media_Encoder_2020_14.3.2.37_SP_20200812.rar\",\"serverMtime\":1597234202,\"share\":0,\"size\":1000666093,\"unList\":0,\"url\":\"https://qdall01.baidupcs.com/file/6aa940121i9f8b9bd62c8404b6abc95f?bkt=en-038bee77e919b76a95c485bf893d72a822b33fc9b582221e9485fa4b4b6ca75a362351cb43c5692f&fid=2188864136-778750-686394314532275&time=1597234394&sign=FDTAXUGERQlBHSKfWa-DCb740ccc5511e5e8fedcff06b081203-AQAHp5V8uSicOUAx89%2FB2y%2B4Vww%3D&to=92&size=1000666093&sta_dx=1000666093&sta_cs=19&sta_ft=rar&sta_ct=0&sta_mt=0&fm2=MH%2CXian%2CAnywhere%2C%2Cbeijing%2Ccnc&ctime=1597197560&mtime=1597234202&resv0=-1&resv1=0&resv2=rlim&resv3=2&resv4=1000666093&vuk=2188864136&iv=-2&htype=&randtype=em&newver=1&newfm=1&secfm=1&flow_ver=3&pkey=en-cc65705a04322e7c41bc8bb981f01fe1350d24ed4cefa828a4cf09eddecd40a9e38817ef3a3db2bf&expires=8h&rt=pr&r=211599042&mlogid=5214733027719974131&vbdid=1541388608&fin=Adobe_Media_Encoder_2020_14.3.2.37_SP_20200812.rar&bflag=92,34-92&rtype=1&dp-logid=5214733027719974131&dp-callid=0.1.1&hps=1&tsl=0&csl=0&fsl=-1&csign=n1SwGOR9pMZtKB7nl3xZQhXh3Hs%3D&so=0&ut=8&uter=0&serv=0&uc=1458616558&ti=51702cd94a4865eea2a49a514fe295eec0b6b75e2236f162&hflag=30&adg=c_085e327e7319a99bd7ed6f825d0134c6&reqlabel=778750_l_db828d217d35b98eeaeda28edf79e37b_-1_1c44bc0eca6153f8c7af0e0e83a67307&ibp=1&by=themis&filename=Adobe_Media_Encoder_2020_14.3.2.37_SP_20200812.rar\",\"progress\":{\"intervalId\":6221,\"request\":{},\"_speedOverlay\":0,\"_status\":\"COMPLETED\",\"_percentCount\":100,\"fsId\":686394314532275}},{\"category\":6,\"fsId\":227413788915165,\"isDir\":false,\"localCtime\":1597196901,\"localMtime\":1597196973,\"md5\":\"6926f0935nd6558c5f39916b699a6cf3\",\"operId\":0,\"path\":\"/我的资源/Adobe_Premiere_Pro_2020_14.3.2.42_SP_20200812.rar\",\"privacy\":1,\"serverAtime\":0,\"serverCtime\":1597197804,\"serverFilename\":\"Adobe_Premiere_Pro_2020_14.3.2.42_SP_20200812.rar\",\"serverMtime\":1597234202,\"share\":0,\"size\":1623182290,\"unList\":0,\"url\":\"https://qdall01.baidupcs.com/file/6926f0935nd6558c5f39916b699a6cf3?bkt=en-2e2b5030dd6ff0377d553a6672c3b7e8e1bedacf8058367150b2550dde5463b59e6bacc845c071c6&fid=2188864136-778750-227413788915165&time=1597235363&sign=FDTAXUGERQlBHSKfWa-DCb740ccc5511e5e8fedcff06b081203-HcBMaceDBdCaj26NresA3qMYxHE%3D&to=92&size=1623182290&sta_dx=1623182290&sta_cs=38&sta_ft=rar&sta_ct=0&sta_mt=0&fm2=MH%2CXian%2CAnywhere%2C%2Cbeijing%2Ccnc&ctime=1597197804&mtime=1597234202&resv0=-1&resv1=0&resv2=rlim&resv3=2&resv4=1623182290&vuk=2188864136&iv=-2&htype=&randtype=em&newver=1&newfm=1&secfm=1&flow_ver=3&pkey=en-b10ff2a4103dd04d7a82f4142dad51e21e93820e603101cf231d1f1c02f64cdf7e9057a933389d1b&expires=8h&rt=pr&r=561985270&mlogid=5214993012820749837&vbdid=1541388608&fin=Adobe_Premiere_Pro_2020_14.3.2.42_SP_20200812.rar&bflag=92,34-92&rtype=1&dp-logid=5214993012820749837&dp-callid=0.1.1&hps=1&tsl=0&csl=0&fsl=-1&csign=n1SwGOR9pMZtKB7nl3xZQhXh3Hs%3D&so=0&ut=8&uter=0&serv=0&uc=1458616558&ti=12146e4ffd7df3c92b808f1a71c84b8cd90c42fc7a0636bf&hflag=30&adg=c_085e327e7319a99bd7ed6f825d0134c6&reqlabel=778750_l_db828d217d35b98eeaeda28edf79e37b_-1_1c44bc0eca6153f8c7af0e0e83a67307&ibp=1&by=themis&filename=Adobe_Premiere_Pro_2020_14.3.2.42_SP_20200812.rar\",\"progress\":{\"intervalId\":38131,\"request\":{},\"_speedOverlay\":0,\"_status\":\"COMPLETED\",\"_percentCount\":100,\"fsId\":227413788915165}}]"},"ts":1598065116402},"enabled":true,"position":10,"file_url":"https://greasyfork.org/scripts/405782-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E4%B8%8B%E8%BD%BD%E7%AE%A1%E7%90%86%E5%99%A8/code/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E4%B8%8B%E8%BD%BD%E7%AE%A1%E7%90%86%E5%99%A8.user.js","uuid":"f8b9e9b5-ed00-4dd9-bae2-223f1a28233f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWVzcGFjZSBodHRwczovL2dpdGh1Yi5jb20vZG90ZW5uaW4vYmFpZHUtcGFuLWRvd25sb2FkZXIKLy8gQG5hbWUg55m+5bqm572R55uY5LiL6L29566h55CG5ZmoCi8vIEBpY29uIGh0dHBzOi8vZG90ZW5uaW4uZ2l0aHViLmlvL2JhaWR1LXBhbi1kb3dubG9hZGVyL3B1YmxpYy9mYXZpY29uLmljbwovLyBAZGVzY3JpcHRpb24g55m+5bqm55uY5LiL6L29566h55CG5ZmoIC8gZmlsZSBkb3dubG9hZCBtYW5hZ2VyIGZvciBCYWlkdSBZdW4KLy8gQHZlcnNpb24gMy4zLjEKLy8gQGF1dGhvciBEb3Rlbm5pbgovLyBAbGljZW5zZSBNSVQKLy8gQGNvbXBhdGlibGUgICAgICAgIGNocm9tZS84My4wLjQxMDMuOTcgcGFzc2VkCi8vIEBjb21wYXRpYmxlICAgICAgICBlZGdlLzgzLjAuNDc4LjU0IHBhc3NlZAovLyBAY29tcGF0aWJsZSAgICAgICAgZmlyZWZveCBUTSB2ZXJzaW9uIEJFVEEgdjQuMTEuNjExNQovLyBAY29tcGF0aWJsZSAgICAgICAgb3BlcmEgdW50ZXN0ZWQKLy8gQGNvbXBhdGlibGUgICAgICAgIHNhZmFyaSB1bnRlc3RlZAovLyBAaW5jbHVkZSBodHRwczovL3Bhbi5iYWlkdS5jb20vZGlzay8qCi8vIEBpbmNsdWRlIGh0dHBzOi8veXVuLmJhaWR1LmNvbS9kaXNrLyoKLy8gQGluY2x1ZGUgaHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvKgovLyBAaW5jbHVkZSBodHRwczovL3l1bi5iYWlkdS5jb20vcy8qCi8vIEBjb25uZWN0IGJhaWR1LmNvbQovLyBAY29ubmVjdCBxZGFsbDAxLmJhaWR1cGNzLmNvbQovLyBAZ3JhbnQgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50IEdNX2Rvd25sb2FkCi8vIEBncmFudCBHTV9ub3RpZmljYXRpb24KLy8gQGdyYW50IEdNX2dldFZhbHVlCi8vIEBncmFudCBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgR01fZGVsZXRlVmFsdWUKLy8gQGdyYW50IEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIKLy8gQGdyYW50IHVuc2FmZVdpbmRvdwovLyBAcnVuLWF0IGRvY3VtZW50LWlkbGUKLy8gPT0vVXNlclNjcmlwdD09CgohZnVuY3Rpb24oZSkgewogICAgdmFyIHQgPSB7fTsKICAgIGZ1bmN0aW9uIG4ocikgewogICAgICAgIGlmICh0W3JdKSByZXR1cm4gdFtyXS5leHBvcnRzOwogICAgICAgIHZhciBhID0gdFtyXSA9IHsKICAgICAgICAgICAgaTogciwKICAgICAgICAgICAgbDogITEsCiAgICAgICAgICAgIGV4cG9ydHM6IHt9CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gZVtyXS5jYWxsKGEuZXhwb3J0cywgYSwgYS5leHBvcnRzLCBuKSwgYS5sID0gITAsIGEuZXhwb3J0czsKICAgIH0KICAgIG4ubSA9IGUsIG4uYyA9IHQsIG4uZCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICBuLm8oZSwgdCkgfHwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogcgogICAgICAgIH0pOwogICAgfSwgbi5yID0gZnVuY3Rpb24oZSkgewogICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsKICAgICAgICAgICAgdmFsdWU6ICJNb2R1bGUiCiAgICAgICAgfSksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAiX19lc01vZHVsZSIsIHsKICAgICAgICAgICAgdmFsdWU6ICEwCiAgICAgICAgfSk7CiAgICB9LCBuLnQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgaWYgKDEgJiB0ICYmIChlID0gbihlKSksIDggJiB0KSByZXR1cm4gZTsKICAgICAgICBpZiAoNCAmIHQgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZSAmJiBlLl9fZXNNb2R1bGUpIHJldHVybiBlOwogICAgICAgIHZhciByID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICBpZiAobi5yKHIpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgImRlZmF1bHQiLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICB2YWx1ZTogZQogICAgICAgIH0pLCAyICYgdCAmJiAic3RyaW5nIiAhPSB0eXBlb2YgZSkgZm9yICh2YXIgYSBpbiBlKSBuLmQociwgYSwgZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gZVt0XTsKICAgICAgICB9LmJpbmQobnVsbCwgYSkpOwogICAgICAgIHJldHVybiByOwogICAgfSwgbi5uID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZSAmJiBlLl9fZXNNb2R1bGUgPyBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGUuZGVmYXVsdDsKICAgICAgICB9IDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIG4uZCh0LCAiYSIsIHQpLCB0OwogICAgfSwgbi5vID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgdCk7CiAgICB9LCBuLnAgPSAiLyIsIG4obi5zID0gNDApOwp9KFsgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgZS5leHBvcnRzID0gbig0Myk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciByLCBhLCBvOwogICAgbi5kKHQsICJiIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiByOwogICAgfSkpLCBuLmQodCwgImMiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGE7CiAgICB9KSksIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gbzsKICAgIH0pKSwgZnVuY3Rpb24oZSkgewogICAgICAgIGUuZG93bmxvYWRpbmcgPSAiRE9XTkxPQURJTkciLCBlLnN0b3BwZWQgPSAiU1RPUFBFRCIsIGUuY29tcGxldGVkID0gIkNPTVBMRVRFRCIsIAogICAgICAgIGUuaW5RdWV1ZWQgPSAiSU5fUVVFVUVEIiwgZS5lcnJvciA9ICJFUlJPUiIsIGUudW5rbm93ID0gIlVOS09OVyI7CiAgICB9KHIgfHwgKHIgPSB7fSkpLCBmdW5jdGlvbihlKSB7CiAgICAgICAgZS5pdGVtcyA9ICJJVEVNX0xJU1QiLCBlLmF1dG9TdGFydCA9ICJBVVRPX1NUQVJUIiwgZS5tYXhEb3dubG9hZENvdW50ID0gIk1BWF9ET1dOTE9BRF9DT1VOVCIsIAogICAgICAgIGUuYXBwSWQgPSAiQVBQX0lEIjsKICAgIH0oYSB8fCAoYSA9IHt9KSksIGZ1bmN0aW9uKGUpIHsKICAgICAgICBlLnVzZXJBZ2VudCA9ICJuZXRkaXNrO1AyU1A7Mi4yLjYwLjI2IjsKICAgIH0obyB8fCAobyA9IHt9KSk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gcDsKICAgIH0pKTsKICAgIHZhciByID0gbigxKSwgYSA9IG4oMTIpLCBvID0gbigxNiksIGkgPSBuKDE1KSwgbCA9IG4oMTApLCB1ID0gbig4KTsKICAgIHZhciBjID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZnVuY3Rpb24gZSh0LCBuKSB7CiAgICAgICAgICAgIE9iamVjdChvLmEpKHRoaXMsIGUpLCB0aGlzLmludGVydmFsSWQgPSB2b2lkIDAsIHRoaXMucmVxdWVzdCA9IHZvaWQgMCwgdGhpcy5fc3BlZWRPdmVybGF5ID0gdm9pZCAwLCAKICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gdm9pZCAwLCB0aGlzLl9wZXJjZW50Q291bnQgPSB2b2lkIDAsIHRoaXMuZnNJZCA9IHZvaWQgMCwgdGhpcy5mc0lkID0gdCwgCiAgICAgICAgICAgIG4gPyBPYmplY3QuYXNzaWduKHRoaXMsIG4pIDogKHRoaXMucGVyY2VudENvdW50ID0gMCwgdGhpcy5zcGVlZE92ZXJsYXkgPSAwLCB0aGlzLnN0YXR1cyA9IHIuYi51bmtub3cpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gT2JqZWN0KGkuYSkoZSwgbnVsbCwgWyB7CiAgICAgICAgICAgIGtleTogIlBhcnNlIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLkNyZWF0ZSh0KTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgICAga2V5OiAiQ3JlYXRlIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZSh0LCBuKTsKICAgICAgICAgICAgfQogICAgICAgIH0gXSksIE9iamVjdChpLmEpKGUsIFsgewogICAgICAgICAgICBrZXk6ICJzcGVlZE92ZXJsYXkiLAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3NwZWVkT3ZlcmxheSAhPT0gZSAmJiAodGhpcy5fc3BlZWRPdmVybGF5ID0gZSwgbC5hLmRpc3BhdGNoKHUuYi5hY3Rpb25zLnVwZGF0ZVByb2dyZXNzKHsKICAgICAgICAgICAgICAgICAgICBmc0lkOiB0aGlzLmZzSWQsCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWRPdmVybGF5OiB0aGlzLnNwZWVkT3ZlcmxheQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc3BlZWRPdmVybGF5OwogICAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJwZXJjZW50Q291bnQiLAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3BlcmNlbnRDb3VudCAhPT0gZSAmJiAodGhpcy5fcGVyY2VudENvdW50ID0gZSwgbC5hLmRpc3BhdGNoKHUuYi5hY3Rpb25zLnVwZGF0ZVByb2dyZXNzKHsKICAgICAgICAgICAgICAgICAgICBmc0lkOiB0aGlzLmZzSWQsCiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudENvdW50OiB0aGlzLnBlcmNlbnRDb3VudAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGVyY2VudENvdW50OwogICAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJzdGF0dXMiLAogICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyAhPT0gZSAmJiAodGhpcy5fc3RhdHVzID0gZSwgZSAhPT0gci5iLnVua25vdyAmJiBsLmEuZGlzcGF0Y2godS5iLmFjdGlvbnMudXBkYXRlUHJvZ3Jlc3MoewogICAgICAgICAgICAgICAgICAgIGZzSWQ6IHRoaXMuZnNJZCwKICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7CiAgICAgICAgICAgIH0KICAgICAgICB9IF0pLCBlOwogICAgfSgpLCBzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICBPYmplY3Qoby5hKSh0aGlzLCBlKSwgdGhpcy5jYXRlZ29yeSA9IHZvaWQgMCwgdGhpcy5mc0lkID0gdm9pZCAwLCB0aGlzLmlzRGlyID0gdm9pZCAwLCAKICAgICAgICAgICAgdGhpcy5sb2NhbEN0aW1lID0gdm9pZCAwLCB0aGlzLmxvY2FsTXRpbWUgPSB2b2lkIDAsIHRoaXMubWQ1ID0gdm9pZCAwLCB0aGlzLm9wZXJJZCA9IHZvaWQgMCwgCiAgICAgICAgICAgIHRoaXMucGF0aCA9IHZvaWQgMCwgdGhpcy5wcml2YWN5ID0gdm9pZCAwLCB0aGlzLnNlcnZlckF0aW1lID0gdm9pZCAwLCB0aGlzLnNlcnZlckN0aW1lID0gdm9pZCAwLCAKICAgICAgICAgICAgdGhpcy5zZXJ2ZXJGaWxlbmFtZSA9IHZvaWQgMCwgdGhpcy5zZXJ2ZXJNdGltZSA9IHZvaWQgMCwgdGhpcy5zaGFyZSA9IHZvaWQgMCwgdGhpcy5zaXplID0gdm9pZCAwLCAKICAgICAgICAgICAgdGhpcy51bkxpc3QgPSB2b2lkIDAsIHRoaXMudXJsID0gdm9pZCAwLCB0aGlzLnByb2dyZXNzID0gdm9pZCAwLCBudWxsICE9PSAobiA9IHQpICYmICJvYmplY3QiID09IHR5cGVvZiBuICYmIHZvaWQgMCAhPT0gbi5mc19pZCA/ICh0aGlzLmNhdGVnb3J5ID0gdC5jYXRlZ29yeSwgCiAgICAgICAgICAgIHRoaXMuZnNJZCA9IHQuZnNfaWQsIHRoaXMuaXNEaXIgPSAxID09PSB0LmlzZGlyLCB0aGlzLmxvY2FsQ3RpbWUgPSB0LmxvY2FsX2N0aW1lLCAKICAgICAgICAgICAgdGhpcy5sb2NhbE10aW1lID0gdC5sb2NhbF9tdGltZSwgdGhpcy5tZDUgPSB0Lm1kNSwgdGhpcy5vcGVySWQgPSB0Lm9wZXJfaWQsIHRoaXMucGF0aCA9IHQucGF0aCwgCiAgICAgICAgICAgIHRoaXMucHJpdmFjeSA9IHQucHJpdmFjeSwgdGhpcy5zZXJ2ZXJBdGltZSA9IHQuc2VydmVyX2F0aW1lLCB0aGlzLnNlcnZlckN0aW1lID0gdC5zZXJ2ZXJfY3RpbWUsIAogICAgICAgICAgICB0aGlzLnNlcnZlckZpbGVuYW1lID0gdC5zZXJ2ZXJfZmlsZW5hbWUsIHRoaXMuc2VydmVyTXRpbWUgPSB0LnNlcnZlcl9tdGltZSwgdGhpcy5zaGFyZSA9IHQuc2hhcmUsIAogICAgICAgICAgICB0aGlzLnNpemUgPSB0LnNpemUsIHRoaXMudW5MaXN0ID0gdC51bmxpc3QsIHRoaXMudXJsID0gdC51cmwsIHRoaXMucHJvZ3Jlc3MgPSBjLkNyZWF0ZSh0aGlzLmZzSWQpKSA6IChPYmplY3QuYXNzaWduKHRoaXMsIHQpLCAKICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IGMuQ3JlYXRlKHRoaXMuZnNJZCwgdGhpcy5wcm9ncmVzcykpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gT2JqZWN0KGkuYSkoZSwgbnVsbCwgWyB7CiAgICAgICAgICAgIGtleTogIlBhcnNlIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLkNyZWF0ZShKU09OLnBhcnNlKHQpKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgICAga2V5OiAiQ3JlYXRlIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZSh0KTsKICAgICAgICAgICAgfQogICAgICAgIH0gXSksIGU7CiAgICB9KCksIGYgPSBuKDYpLCBkID0gbig5KSwgcCA9IHsKICAgICAgICBtYXhEb3dubG9hZENvdW50OiAyLAogICAgICAgIGFsbERvd25sb2Fkczoge30sCiAgICAgICAgbGlzdDogdW5zYWZlV2luZG93LnJlcXVpcmUoInN5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcyIpLmluc3RhbmNlRm9yU3lzdGVtLmxpc3QsCiAgICAgICAgZGlhbG9nOiB1bnNhZmVXaW5kb3cucmVxdWlyZSgic3lzdGVtLWNvcmU6c3lzdGVtL3VpU2VydmljZS9kaWFsb2cvZGlhbG9nLmpzIiksCiAgICAgICAgaGFzaDogdW5zYWZlV2luZG93LnJlcXVpcmUoImJhc2U6d2lkZ2V0L2hhc2gvaGFzaC5qcyIpLAogICAgICAgIGZyaWVuZGx5RmlsZVNpemU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHVuc2FmZVdpbmRvdy5yZXF1aXJlKCJiYXNlOndpZGdldC90b29scy9zZXJ2aWNlL3Rvb2xzLmZvcm1hdC5qcyIpLnRvRnJpZW5kbHlGaWxlU2l6ZShlKTsKICAgICAgICB9LAogICAgICAgIGZpbGVNYW5hZ2VyQXBpOiBPYmplY3QoZC5iKSgpLmluRGlza1NjcmVlbiAmJiB1bnNhZmVXaW5kb3cucmVxdWlyZSgiZGlzay1zeXN0ZW06d2lkZ2V0L3N5c3RlbS9maWxlU2VydmljZS9maWxlTWFuYWdlckFwaS9maWxlTWFuYWdlckFwaS5qcyIpLAogICAgICAgIGxpc3RJbml0OiBPYmplY3QoZC5iKSgpLmluRGlza1NjcmVlbiAmJiB1bnNhZmVXaW5kb3cucmVxdWlyZSgiZGlzay1zeXN0ZW06d2lkZ2V0L3BhZ2VNb2R1bGUvbGlzdC9saXN0SW5pdC5qcyIpLAogICAgICAgIGxpc3RJbnN0YW5jZTogdW5zYWZlV2luZG93LnJlcXVpcmUoInN5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcyIpLmluc3RhbmNlRm9yU3lzdGVtLmxpc3RJbnN0YW5jZSwKICAgICAgICBqcXVlcnk6IHVuc2FmZVdpbmRvdy5yZXF1aXJlKCJiYXNlOndpZGdldC9saWJzL2pxdWVyeS0xLjEyLjQuanMiKSwKICAgICAgICB1aTogdW5zYWZlV2luZG93LnJlcXVpcmUoInN5c3RlbS1jb3JlOmNvbnRleHQvY29udGV4dC5qcyIpLmluc3RhbmNlRm9yU3lzdGVtLnVpLAogICAgICAgIGdldExpc3Q6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0LmdldExpc3QoKTsKICAgICAgICB9LAogICAgICAgIHVzZXI6IHVuc2FmZVdpbmRvdy5yZXF1aXJlKCJzeXN0ZW0tY29yZTpjb250ZXh0L2NvbnRleHQuanMiKS5pbnN0YW5jZUZvclN5c3RlbS5kYXRhLnVzZXIsCiAgICAgICAgY29va2llOiB1bnNhZmVXaW5kb3cucmVxdWlyZSgiYmFzZTp3aWRnZXQvdG9vbHMvc2VydmljZS90b29scy5jb29raWUuanMiKSwKICAgICAgICBpbml0V2lkZ2V0Q29udGV4dDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IHVuc2FmZVdpbmRvdy5yZXF1aXJlKCJmdW5jdGlvbi13aWRnZXQtMTpkb3dubG9hZC91dGlsL2NvbnRleHQuanMiKSwgbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdC5nZXRDb250ZXh0KCkgfHwgdC5zZXRDb250ZXh0KHVuc2FmZVdpbmRvdy5yZXF1aXJlKCJzeXN0ZW0tY29yZTpjb250ZXh0L2NvbnRleHQuanMiKS5pbnN0YW5jZUZvclN5c3RlbSksIAogICAgICAgICAgICAgICAgZSAmJiBlKCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGUgPyB1bnNhZmVXaW5kb3cucmVxdWlyZS5hc3luYygiIiwgbikgOiBuKCk7CiAgICAgICAgfSwKICAgICAgICBkbGlua1NlcnZpY2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0V2lkZ2V0Q29udGV4dCgpLCBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdW5zYWZlV2luZG93LnJlcXVpcmUuYXN5bmMoImZ1bmN0aW9uLXdpZGdldC0xOmRvd25sb2FkL3NlcnZpY2UvZGxpbmtTZXJ2aWNlLmpzIiwgZSk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICB9LAogICAgICAgIGluaXRTdGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGEuYS5nZXRWYWx1ZShyLmMuaXRlbXMsIHt9KS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5DcmVhdGUoZSk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBhLmEuZGVsZXRlVmFsdWUoci5jLml0ZW1zKTsKICAgICAgICAgICAgICAgIHZhciBvID0gbC5hLmdldFN0YXRlKCksIGkgPSBsLmEuZGlzcGF0Y2gsIGMgPSBvLmludGVyZmFjZS5hdXRvU3RhcnQsIGYgPSB7fTsKICAgICAgICAgICAgICAgIG4uZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICFjICYmIFsgci5iLmRvd25sb2FkaW5nLCByLmIuaW5RdWV1ZWQgXS5pbmNsdWRlcyh0LnByb2dyZXNzLnN0YXR1cykgJiYgKHQucHJvZ3Jlc3Muc3RhdHVzID0gci5iLnN0b3BwZWQpOwogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdC5wcm9ncmVzcywgYSA9IG4uaW50ZXJ2YWxJZCwgbyA9IG4ucGVyY2VudENvdW50LCBsID0gbi5zcGVlZE92ZXJsYXksIHMgPSBuLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICBmW3QuZnNJZF0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsSWQ6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRDb3VudDogbywKICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWRPdmVybGF5OiBsLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHMKICAgICAgICAgICAgICAgICAgICB9LCBlLmFsbERvd25sb2Fkc1t0LmZzSWRdID0gdCwgYyAmJiBbIHIuYi5kb3dubG9hZGluZyBdLmluY2x1ZGVzKHMpICYmIGkoT2JqZWN0KHUuYykodCkpOwogICAgICAgICAgICAgICAgfSkpLCBsLmEuZGlzcGF0Y2godS5iLmFjdGlvbnMuY2hhbmdlKHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEl0ZW1zOiBmCiAgICAgICAgICAgICAgICB9KSksIHQoZSk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICB9LAogICAgICAgIGdldCBzZWxlY3RlZExpc3QoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3QuZ2V0U2VsZWN0ZWQoKS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzLkNyZWF0ZShlKTsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0sCiAgICAgICAgZ2V0IGN1cnJlbnRMaXN0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0LmdldEN1cnJlbnRMaXN0KCk7CiAgICAgICAgfSwKICAgICAgICBzdG9wQWxsOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmFsbERvd25sb2FkcykuZmlsdGVyKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5wcm9ncmVzcy5zdGF0dXMgPT09IHIuYi5kb3dubG9hZGluZzsKICAgICAgICAgICAgfSkpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGUucHJvZ3Jlc3MucmVxdWVzdCAmJiBlLnByb2dyZXNzLnJlcXVlc3QuYWJvcnQgJiYgZS5wcm9ncmVzcy5yZXF1ZXN0LmFib3J0KCk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICB9OwogICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7CiAgICAgICAgcC5pbml0U3RhdGUoKS50aGVuKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBsLmEuZ2V0U3RhdGUoKS5kb3dubG9hZC5wcm9jZXNzaW5nID4gMCAmJiBsLmEuZGlzcGF0Y2goZi5hLmFjdGlvbnMuY2hhbmdlKHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZE1vZGFsT3BlbjogITAKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSksIDE1MDApOwogICAgICAgIH0pKTsKICAgIH0pKTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgKGZ1bmN0aW9uKGUpIHsKICAgICAgICBuLmQodCwgImEiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBQZTsKICAgICAgICB9KSksIG4uZCh0LCAiYiIsIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGllOwogICAgICAgIH0pKTsKICAgICAgICB2YXIgciA9IG4oMTgpLCBhID0gbigwKSwgbyA9IG4ubihhKSwgaSA9IChuKDM3KSwgbigzOCkpLCBsID0gbigzOSksIHUgPSBuKDMxKSwgYyA9IG4oMjEpLCBzID0gbi5uKGMpOwogICAgICAgIGZ1bmN0aW9uIGYoKSB7CiAgICAgICAgICAgIHJldHVybiAoZiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIG4pIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLCByKSAmJiAoZVtyXSA9IG5bcl0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIH0pLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHZhciBkID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBmb3IgKHZhciBuID0gWyBlWzBdIF0sIHIgPSAwLCBhID0gdC5sZW5ndGg7IHIgPCBhOyByICs9IDEpIG4ucHVzaCh0W3JdLCBlW3IgKyAxXSk7CiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgIH0sIHAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBlICYmICJvYmplY3QiID09IHR5cGVvZiBlICYmICJbb2JqZWN0IE9iamVjdF0iID09PSAoZS50b1N0cmluZyA/IGUudG9TdHJpbmcoKSA6IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkgJiYgIU9iamVjdChyLnR5cGVPZikoZSk7CiAgICAgICAgfSwgZyA9IE9iamVjdC5mcmVlemUoW10pLCBoID0gT2JqZWN0LmZyZWV6ZSh7fSk7CiAgICAgICAgZnVuY3Rpb24gbShlKSB7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBiKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUuZGlzcGxheU5hbWUgfHwgZS5uYW1lIHx8ICJDb21wb25lbnQiOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB2KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYgInN0cmluZyIgPT0gdHlwZW9mIGUuc3R5bGVkQ29tcG9uZW50SWQ7CiAgICAgICAgfQogICAgICAgIHZhciB5ID0gdm9pZCAwICE9PSBlICYmIChPYmplY3QoewogICAgICAgICAgICBOT0RFX0VOVjogInByb2R1Y3Rpb24iLAogICAgICAgICAgICBQVUJMSUNfVVJMOiAiIiwKICAgICAgICAgICAgV0RTX1NPQ0tFVF9IT1NUOiB2b2lkIDAsCiAgICAgICAgICAgIFdEU19TT0NLRVRfUEFUSDogdm9pZCAwLAogICAgICAgICAgICBXRFNfU09DS0VUX1BPUlQ6IHZvaWQgMAogICAgICAgIH0pLlJFQUNUX0FQUF9TQ19BVFRSIHx8IE9iamVjdCh7CiAgICAgICAgICAgIE5PREVfRU5WOiAicHJvZHVjdGlvbiIsCiAgICAgICAgICAgIFBVQkxJQ19VUkw6ICIiLAogICAgICAgICAgICBXRFNfU09DS0VUX0hPU1Q6IHZvaWQgMCwKICAgICAgICAgICAgV0RTX1NPQ0tFVF9QQVRIOiB2b2lkIDAsCiAgICAgICAgICAgIFdEU19TT0NLRVRfUE9SVDogdm9pZCAwCiAgICAgICAgfSkuU0NfQVRUUikgfHwgImRhdGEtc3R5bGVkIiwgdyA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgJiYgIkhUTUxFbGVtZW50IiBpbiB3aW5kb3csIGsgPSAiYm9vbGVhbiIgPT0gdHlwZW9mIFNDX0RJU0FCTEVfU1BFRURZICYmIFNDX0RJU0FCTEVfU1BFRURZIHx8IHZvaWQgMCAhPT0gZSAmJiAoT2JqZWN0KHsKICAgICAgICAgICAgTk9ERV9FTlY6ICJwcm9kdWN0aW9uIiwKICAgICAgICAgICAgUFVCTElDX1VSTDogIiIsCiAgICAgICAgICAgIFdEU19TT0NLRVRfSE9TVDogdm9pZCAwLAogICAgICAgICAgICBXRFNfU09DS0VUX1BBVEg6IHZvaWQgMCwKICAgICAgICAgICAgV0RTX1NPQ0tFVF9QT1JUOiB2b2lkIDAKICAgICAgICB9KS5SRUFDVF9BUFBfU0NfRElTQUJMRV9TUEVFRFkgfHwgT2JqZWN0KHsKICAgICAgICAgICAgTk9ERV9FTlY6ICJwcm9kdWN0aW9uIiwKICAgICAgICAgICAgUFVCTElDX1VSTDogIiIsCiAgICAgICAgICAgIFdEU19TT0NLRVRfSE9TVDogdm9pZCAwLAogICAgICAgICAgICBXRFNfU09DS0VUX1BBVEg6IHZvaWQgMCwKICAgICAgICAgICAgV0RTX1NPQ0tFVF9QT1JUOiB2b2lkIDAKICAgICAgICB9KS5TQ19ESVNBQkxFX1NQRUVEWSkgfHwgITEsIHggPSB7fSwgRSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gbi5uYzsKICAgICAgICB9OwogICAgICAgIGZ1bmN0aW9uIFMoZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCwgbiA9IG5ldyBBcnJheSh0ID4gMSA/IHQgLSAxIDogMCksIHIgPSAxOyByIDwgdDsgcisrKSBuW3IgLSAxXSA9IGFyZ3VtZW50c1tyXTsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbiBlcnJvciBvY2N1cnJlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9zdHlsZWQtY29tcG9uZW50cy9zdHlsZWQtY29tcG9uZW50cy9ibG9iL21hc3Rlci9wYWNrYWdlcy9zdHlsZWQtY29tcG9uZW50cy9zcmMvdXRpbHMvZXJyb3JzLm1kIyIgKyBlICsgIiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4iICsgKG4ubGVuZ3RoID4gMCA/ICIgQWRkaXRpb25hbCBhcmd1bWVudHM6ICIgKyBuLmpvaW4oIiwgIikgOiAiIikpOwogICAgICAgIH0KICAgICAgICB2YXIgTyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5oZWFkLCBuID0gZSB8fCB0LCByID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSwgYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBlLmNoaWxkTm9kZXMsIG4gPSB0Lmxlbmd0aDsgbiA+PSAwOyBuLS0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgaWYgKHIgJiYgMSA9PT0gci5ub2RlVHlwZSAmJiByLmhhc0F0dHJpYnV0ZSh5KSkgcmV0dXJuIHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0obiksIG8gPSB2b2lkIDAgIT09IGEgPyBhLm5leHRTaWJsaW5nIDogbnVsbDsKICAgICAgICAgICAgci5zZXRBdHRyaWJ1dGUoeSwgImFjdGl2ZSIpLCByLnNldEF0dHJpYnV0ZSgiZGF0YS1zdHlsZWQtdmVyc2lvbiIsICI1LjEuMSIpOwogICAgICAgICAgICB2YXIgaSA9IEUoKTsKICAgICAgICAgICAgcmV0dXJuIGkgJiYgci5zZXRBdHRyaWJ1dGUoIm5vbmNlIiwgaSksIG4uaW5zZXJ0QmVmb3JlKHIsIG8pLCByOwogICAgICAgIH0sIEMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZShlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuZWxlbWVudCA9IE8oZSk7CiAgICAgICAgICAgICAgICB0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSksIHRoaXMuc2hlZXQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGUuc2hlZXQpIHJldHVybiBlLnNoZWV0OwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBkb2N1bWVudC5zdHlsZVNoZWV0cywgbiA9IDAsIHIgPSB0Lmxlbmd0aDsgbiA8IHI7IG4rKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHRbbl07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhLm93bmVyTm9kZSA9PT0gZSkgcmV0dXJuIGE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIFMoMTcpOwogICAgICAgICAgICAgICAgfSh0KSwgdGhpcy5sZW5ndGggPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB0ID0gZS5wcm90b3R5cGU7CiAgICAgICAgICAgIHJldHVybiB0Lmluc2VydFJ1bGUgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNoZWV0Lmluc2VydFJ1bGUodCwgZSksIHRoaXMubGVuZ3RoKyssICEwOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgdC5kZWxldGVSdWxlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdGhpcy5zaGVldC5kZWxldGVSdWxlKGUpLCB0aGlzLmxlbmd0aC0tOwogICAgICAgICAgICB9LCB0LmdldFJ1bGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuc2hlZXQuY3NzUnVsZXNbZV07CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmICJzdHJpbmciID09IHR5cGVvZiB0LmNzc1RleHQgPyB0LmNzc1RleHQgOiAiIjsKICAgICAgICAgICAgfSwgZTsKICAgICAgICB9KCksIFQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZShlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuZWxlbWVudCA9IE8oZSk7CiAgICAgICAgICAgICAgICB0aGlzLm5vZGVzID0gdC5jaGlsZE5vZGVzLCB0aGlzLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHQgPSBlLnByb3RvdHlwZTsKICAgICAgICAgICAgcmV0dXJuIHQuaW5zZXJ0UnVsZSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIGlmIChlIDw9IHRoaXMubGVuZ3RoICYmIGUgPj0gMCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCksIHIgPSB0aGlzLm5vZGVzW2VdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKG4sIHIgfHwgbnVsbCksIHRoaXMubGVuZ3RoKyssICEwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICB9LCB0LmRlbGV0ZVJ1bGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5ub2Rlc1tlXSksIHRoaXMubGVuZ3RoLS07CiAgICAgICAgICAgIH0sIHQuZ2V0UnVsZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlIDwgdGhpcy5sZW5ndGggPyB0aGlzLm5vZGVzW2VdLnRleHRDb250ZW50IDogIiI7CiAgICAgICAgICAgIH0sIGU7CiAgICAgICAgfSgpLCBQID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGUoZSkgewogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IFtdLCB0aGlzLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHQgPSBlLnByb3RvdHlwZTsKICAgICAgICAgICAgcmV0dXJuIHQuaW5zZXJ0UnVsZSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlIDw9IHRoaXMubGVuZ3RoICYmICh0aGlzLnJ1bGVzLnNwbGljZShlLCAwLCB0KSwgdGhpcy5sZW5ndGgrKywgITApOwogICAgICAgICAgICB9LCB0LmRlbGV0ZVJ1bGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJ1bGVzLnNwbGljZShlLCAxKSwgdGhpcy5sZW5ndGgtLTsKICAgICAgICAgICAgfSwgdC5nZXRSdWxlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUgPCB0aGlzLmxlbmd0aCA/IHRoaXMucnVsZXNbZV0gOiAiIjsKICAgICAgICAgICAgfSwgZTsKICAgICAgICB9KCksIF8gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZShlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwU2l6ZXMgPSBuZXcgVWludDMyQXJyYXkoNTEyKSwgdGhpcy5sZW5ndGggPSA1MTIsIHRoaXMudGFnID0gZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgdCA9IGUucHJvdG90eXBlOwogICAgICAgICAgICByZXR1cm4gdC5pbmRleE9mR3JvdXAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMCwgbiA9IDA7IG4gPCBlOyBuKyspIHQgKz0gdGhpcy5ncm91cFNpemVzW25dOwogICAgICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICAgIH0sIHQuaW5zZXJ0UnVsZXMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICBpZiAoZSA+PSB0aGlzLmdyb3VwU2l6ZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHRoaXMuZ3JvdXBTaXplcywgciA9IG4ubGVuZ3RoLCBhID0gcjsgZSA+PSBhOyApIChhIDw8PSAxKSA8IDAgJiYgUygxNiwgIiIgKyBlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwU2l6ZXMgPSBuZXcgVWludDMyQXJyYXkoYSksIHRoaXMuZ3JvdXBTaXplcy5zZXQobiksIHRoaXMubGVuZ3RoID0gYTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gcjsgbyA8IGE7IG8rKykgdGhpcy5ncm91cFNpemVzW29dID0gMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmluZGV4T2ZHcm91cChlICsgMSksIGwgPSAwLCB1ID0gdC5sZW5ndGg7IGwgPCB1OyBsKyspIHRoaXMudGFnLmluc2VydFJ1bGUoaSwgdFtsXSkgJiYgKHRoaXMuZ3JvdXBTaXplc1tlXSsrLCAKICAgICAgICAgICAgICAgIGkrKyk7CiAgICAgICAgICAgIH0sIHQuY2xlYXJHcm91cCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGlmIChlIDwgdGhpcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuZ3JvdXBTaXplc1tlXSwgbiA9IHRoaXMuaW5kZXhPZkdyb3VwKGUpLCByID0gbiArIHQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ncm91cFNpemVzW2VdID0gMDsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gbjsgYSA8IHI7IGErKykgdGhpcy50YWcuZGVsZXRlUnVsZShuKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgdC5nZXRHcm91cCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gIiI7CiAgICAgICAgICAgICAgICBpZiAoZSA+PSB0aGlzLmxlbmd0aCB8fCAwID09PSB0aGlzLmdyb3VwU2l6ZXNbZV0pIHJldHVybiB0OwogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHRoaXMuZ3JvdXBTaXplc1tlXSwgciA9IHRoaXMuaW5kZXhPZkdyb3VwKGUpLCBhID0gciArIG4sIG8gPSByOyBvIDwgYTsgbysrKSB0ICs9IHRoaXMudGFnLmdldFJ1bGUobykgKyAiLyohc2MqL1xuIjsKICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICB9LCBlOwogICAgICAgIH0oKSwgaiA9IG5ldyBNYXAsIEkgPSBuZXcgTWFwLCBOID0gMSwgQSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKGouaGFzKGUpKSByZXR1cm4gai5nZXQoZSk7CiAgICAgICAgICAgIHZhciB0ID0gTisrOwogICAgICAgICAgICByZXR1cm4gai5zZXQoZSwgdCksIEkuc2V0KHQsIGUpLCB0OwogICAgICAgIH0sIEQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBJLmdldChlKTsKICAgICAgICB9LCBSID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB0ID49IE4gJiYgKE4gPSB0ICsgMSksIGouc2V0KGUsIHQpLCBJLnNldCh0LCBlKTsKICAgICAgICB9LCBNID0gInN0eWxlWyIgKyB5ICsgJ11bZGF0YS1zdHlsZWQtdmVyc2lvbj0iNS4xLjEiXScsIHogPSBuZXcgUmVnRXhwKCJeIiArIHkgKyAnXFwuZyhcXGQrKVxcW2lkPSIoW1xcd1xcZC1dKykiXFxdLio/IihbXiJdKiknKSwgTCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgZm9yICh2YXIgciwgYSA9IG4uc3BsaXQoIiwiKSwgbyA9IDAsIGkgPSBhLmxlbmd0aDsgbyA8IGk7IG8rKykgKHIgPSBhW29dKSAmJiBlLnJlZ2lzdGVyTmFtZSh0LCByKTsKICAgICAgICB9LCBGID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBmb3IgKHZhciBuID0gdC5pbm5lckhUTUwuc3BsaXQoIi8qIXNjKi9cbiIpLCByID0gW10sIGEgPSAwLCBvID0gbi5sZW5ndGg7IGEgPCBvOyBhKyspIHsKICAgICAgICAgICAgICAgIHZhciBpID0gblthXS50cmltKCk7CiAgICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgICAgIHZhciBsID0gaS5tYXRjaCh6KTsKICAgICAgICAgICAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IDAgfCBwYXJzZUludChsWzFdLCAxMCksIGMgPSBsWzJdOwogICAgICAgICAgICAgICAgICAgICAgICAwICE9PSB1ICYmIChSKGMsIHUpLCBMKGUsIGMsIGxbM10pLCBlLmdldFRhZygpLmluc2VydFJ1bGVzKHUsIHIpKSwgci5sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSByLnB1c2goaSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LCBVID0gdywgVyA9IHsKICAgICAgICAgICAgaXNTZXJ2ZXI6ICF3LAogICAgICAgICAgICB1c2VDU1NPTUluamVjdGlvbjogIWsKICAgICAgICB9LCBWID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGUoZSwgdCwgbikgewogICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gVyksIHZvaWQgMCA9PT0gdCAmJiAodCA9IHt9KSwgdGhpcy5vcHRpb25zID0gZih7fSwgVywge30sIGUpLCAKICAgICAgICAgICAgICAgIHRoaXMuZ3MgPSB0LCB0aGlzLm5hbWVzID0gbmV3IE1hcChuKSwgIXRoaXMub3B0aW9ucy5pc1NlcnZlciAmJiB3ICYmIFUgJiYgKFUgPSAhMSwgCiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoTSksIG4gPSAwLCByID0gdC5sZW5ndGg7IG4gPCByOyBuKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0W25dOwogICAgICAgICAgICAgICAgICAgICAgICBhICYmICJhY3RpdmUiICE9PSBhLmdldEF0dHJpYnV0ZSh5KSAmJiAoRihlLCBhKSwgYS5wYXJlbnROb2RlICYmIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSh0aGlzKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZS5yZWdpc3RlcklkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIEEoZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciB0ID0gZS5wcm90b3R5cGU7CiAgICAgICAgICAgIHJldHVybiB0LnJlY29uc3RydWN0V2l0aE9wdGlvbnMgPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGUoZih7fSwgdGhpcy5vcHRpb25zLCB7fSwgdCksIHRoaXMuZ3MsIHRoaXMubmFtZXMpOwogICAgICAgICAgICB9LCB0LmFsbG9jYXRlR1NJbnN0YW5jZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdzW2VdID0gKHRoaXMuZ3NbZV0gfHwgMCkgKyAxOwogICAgICAgICAgICB9LCB0LmdldFRhZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFnIHx8ICh0aGlzLnRhZyA9ICh0ID0gdGhpcy5vcHRpb25zLCBuID0gdC5pc1NlcnZlciwgciA9IHQudXNlQ1NTT01JbmplY3Rpb24sIAogICAgICAgICAgICAgICAgYSA9IHQudGFyZ2V0LCBlID0gbiA/IG5ldyBQKGEpIDogciA/IG5ldyBDKGEpIDogbmV3IFQoYSksIG5ldyBfKGUpKSk7CiAgICAgICAgICAgICAgICB2YXIgZSwgdCwgbiwgciwgYTsKICAgICAgICAgICAgfSwgdC5oYXNOYW1lRm9ySWQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lcy5oYXMoZSkgJiYgdGhpcy5uYW1lcy5nZXQoZSkuaGFzKHQpOwogICAgICAgICAgICB9LCB0LnJlZ2lzdGVyTmFtZSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIGlmIChBKGUpLCB0aGlzLm5hbWVzLmhhcyhlKSkgdGhpcy5uYW1lcy5nZXQoZSkuYWRkKHQpOyBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IG5ldyBTZXQ7CiAgICAgICAgICAgICAgICAgICAgbi5hZGQodCksIHRoaXMubmFtZXMuc2V0KGUsIG4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB0Lmluc2VydFJ1bGVzID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Rlck5hbWUoZSwgdCksIHRoaXMuZ2V0VGFnKCkuaW5zZXJ0UnVsZXMoQShlKSwgbik7CiAgICAgICAgICAgIH0sIHQuY2xlYXJOYW1lcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMubmFtZXMuaGFzKGUpICYmIHRoaXMubmFtZXMuZ2V0KGUpLmNsZWFyKCk7CiAgICAgICAgICAgIH0sIHQuY2xlYXJSdWxlcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFnKCkuY2xlYXJHcm91cChBKGUpKSwgdGhpcy5jbGVhck5hbWVzKGUpOwogICAgICAgICAgICB9LCB0LmNsZWFyVGFnID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRhZyA9IHZvaWQgMDsKICAgICAgICAgICAgfSwgdC50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5nZXRUYWcoKSwgbiA9IHQubGVuZ3RoLCByID0gIiIsIGEgPSAwOyBhIDwgbjsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gRChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLm5hbWVzLmdldChvKSwgbCA9IHQuZ2V0R3JvdXAoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpICYmIDAgIT09IGwubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSB5ICsgIi5nIiArIGEgKyAnW2lkPSInICsgbyArICciXScsIGMgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGkgJiYgaS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubGVuZ3RoID4gMCAmJiAoYyArPSBlICsgIiwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIHIgKz0gIiIgKyBsICsgdSArICd7Y29udGVudDoiJyArIGMgKyAnIn0vKiFzYyovXG4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICAgICAgfSh0aGlzKTsKICAgICAgICAgICAgfSwgZTsKICAgICAgICB9KCksICQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSB0Lmxlbmd0aDsgbjsgKSBlID0gMzMgKiBlIF4gdC5jaGFyQ29kZUF0KC0tbik7CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0sIHEgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAkKDUzODEsIGUpOwogICAgICAgIH07CiAgICAgICAgdmFyIEIgPSAvXlxzKlwvXC8uKiQvZ207CiAgICAgICAgZnVuY3Rpb24gSChlKSB7CiAgICAgICAgICAgIHZhciB0LCBuLCByLCBhID0gdm9pZCAwID09PSBlID8gaCA6IGUsIG8gPSBhLm9wdGlvbnMsIGwgPSB2b2lkIDAgPT09IG8gPyBoIDogbywgdSA9IGEucGx1Z2lucywgYyA9IHZvaWQgMCA9PT0gdSA/IGcgOiB1LCBzID0gbmV3IGkuYShsKSwgZiA9IFtdLCBkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gdCh0KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUodCArICJ9Iik7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCByLCBhLCBvLCBpLCBsLCB1LCBjLCBzLCBmKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBzICYmIDY0ID09PSByLmNoYXJDb2RlQXQoMCkpIHJldHVybiBlKHIgKyAiOyIpLCAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gYykgcmV0dXJuIHIgKyAiLyp8Ki8iOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUoYVswXSArIHIpLCAiIjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICsgKDAgPT09IGYgPyAiLyp8Ki8iIDogIiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAtMjoKICAgICAgICAgICAgICAgICAgICAgICAgci5zcGxpdCgiLyp8Ki99IikuZm9yRWFjaCh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBmLnB1c2goZSk7CiAgICAgICAgICAgIH0pKSwgcCA9IGZ1bmN0aW9uKGUsIHIsIGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiByID4gMCAmJiAtMSAhPT0gYS5zbGljZSgwLCByKS5pbmRleE9mKG4pICYmIGEuc2xpY2UociAtIG4ubGVuZ3RoLCByKSAhPT0gbiA/ICIuIiArIHQgOiBlOwogICAgICAgICAgICB9OwogICAgICAgICAgICBmdW5jdGlvbiBtKGUsIGEsIG8sIGkpIHsKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9ICImIik7CiAgICAgICAgICAgICAgICB2YXIgbCA9IGUucmVwbGFjZShCLCAiIiksIHUgPSBhICYmIG8gPyBvICsgIiAiICsgYSArICIgeyAiICsgbCArICIgfSIgOiBsOwogICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBpLCBuID0gYSwgciA9IG5ldyBSZWdFeHAoIlxcIiArIG4gKyAiXFxiIiwgImciKSwgcyhvIHx8ICFhID8gIiIgOiBhLCB1KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcy51c2UoW10uY29uY2F0KGMsIFsgZnVuY3Rpb24oZSwgdCwgYSkgewogICAgICAgICAgICAgICAgMiA9PT0gZSAmJiBhLmxlbmd0aCAmJiBhWzBdLmxhc3RJbmRleE9mKG4pID4gMCAmJiAoYVswXSA9IGFbMF0ucmVwbGFjZShyLCBwKSk7CiAgICAgICAgICAgIH0sIGQsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGlmICgtMiA9PT0gZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZiA9IFtdLCB0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IF0pKSwgbS5oYXNoID0gYy5sZW5ndGggPyBjLnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQubmFtZSB8fCBTKDE1KSwgJChlLCB0Lm5hbWUpOwogICAgICAgICAgICB9KSwgNTM4MSkudG9TdHJpbmcoKSA6ICIiLCBtOwogICAgICAgIH0KICAgICAgICB2YXIgUSA9IG8uYS5jcmVhdGVDb250ZXh0KCksIEcgPSAoUS5Db25zdW1lciwgby5hLmNyZWF0ZUNvbnRleHQoKSksIEsgPSAoRy5Db25zdW1lciwgCiAgICAgICAgbmV3IFYpLCBZID0gSCgpOwogICAgICAgIGZ1bmN0aW9uIFgoKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QoYS51c2VDb250ZXh0KShRKSB8fCBLOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBaKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KGEudXNlQ29udGV4dCkoRykgfHwgWTsKICAgICAgICB9CiAgICAgICAgdmFyIEogPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZShlLCB0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXM7CiAgICAgICAgICAgICAgICB0aGlzLmluamVjdCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLmhhc05hbWVGb3JJZChuLmlkLCBuLm5hbWUpIHx8IGUuaW5zZXJ0UnVsZXMobi5pZCwgbi5uYW1lLCBZLmFwcGx5KHZvaWQgMCwgbi5zdHJpbmdpZnlBcmdzKSk7CiAgICAgICAgICAgICAgICB9LCB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFMoMTIsIFN0cmluZyhuLm5hbWUpKTsKICAgICAgICAgICAgICAgIH0sIHRoaXMubmFtZSA9IGUsIHRoaXMuaWQgPSAic2Mta2V5ZnJhbWVzLSIgKyBlLCB0aGlzLnN0cmluZ2lmeUFyZ3MgPSB0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlLnByb3RvdHlwZS5nZXROYW1lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lOwogICAgICAgICAgICB9LCBlOwogICAgICAgIH0oKSwgZWUgPSAvKFtBLVpdKS9nLCB0ZSA9IC9ebXMtLzsKICAgICAgICBmdW5jdGlvbiBuZShlKSB7CiAgICAgICAgICAgIHJldHVybiBlLnJlcGxhY2UoZWUsICItJDEiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UodGUsICItbXMtIik7CiAgICAgICAgfQogICAgICAgIHZhciByZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSB8fCAhMSA9PT0gZSB8fCAiIiA9PT0gZTsKICAgICAgICB9LCBhZSA9IGZ1bmN0aW9uIGUodCwgbikgewogICAgICAgICAgICB2YXIgciA9IFtdOwogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgaWYgKCFyZSh0W25dKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChwKHRbbl0pKSByZXR1cm4gci5wdXNoLmFwcGx5KHIsIGUodFtuXSwgbikpLCByOwogICAgICAgICAgICAgICAgICAgIGlmIChtKHRbbl0pKSByZXR1cm4gci5wdXNoKG5lKG4pICsgIjoiLCB0W25dLCAiOyIpLCByOwogICAgICAgICAgICAgICAgICAgIHIucHVzaChuZShuKSArICI6ICIgKyAoYSA9IG4sIChudWxsID09IChvID0gdFtuXSkgfHwgImJvb2xlYW4iID09IHR5cGVvZiBvIHx8ICIiID09PSBvID8gIiIgOiAibnVtYmVyIiAhPSB0eXBlb2YgbyB8fCAwID09PSBvIHx8IGEgaW4gbC5hID8gU3RyaW5nKG8pLnRyaW0oKSA6IG8gKyAicHgiKSArICI7IikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGEsIG87CiAgICAgICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgICAgfSkpLCBuID8gWyBuICsgIiB7IiBdLmNvbmNhdChyLCBbICJ9IiBdKSA6IHI7CiAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBvZShlLCB0LCBuKSB7CiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByLCBhID0gW10sIG8gPSAwLCBpID0gZS5sZW5ndGg7IG8gPCBpOyBvICs9IDEpICIiICE9PSAociA9IG9lKGVbb10sIHQsIG4pKSAmJiAoQXJyYXkuaXNBcnJheShyKSA/IGEucHVzaC5hcHBseShhLCByKSA6IGEucHVzaChyKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmUoZSkgPyAiIiA6IHYoZSkgPyAiLiIgKyBlLnN0eWxlZENvbXBvbmVudElkIDogbShlKSA/ICJmdW5jdGlvbiIgIT0gdHlwZW9mIChsID0gZSkgfHwgbC5wcm90b3R5cGUgJiYgbC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCB8fCAhdCA/IGUgOiBvZShlKHQpLCB0LCBuKSA6IGUgaW5zdGFuY2VvZiBKID8gbiA/IChlLmluamVjdChuKSwgCiAgICAgICAgICAgIGUuZ2V0TmFtZSgpKSA6IGUgOiBwKGUpID8gYWUoZSkgOiBlLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHZhciBsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBpZShlKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoLCBuID0gbmV3IEFycmF5KHQgPiAxID8gdCAtIDEgOiAwKSwgciA9IDE7IHIgPCB0OyByKyspIG5bciAtIDFdID0gYXJndW1lbnRzW3JdOwogICAgICAgICAgICByZXR1cm4gbShlKSB8fCBwKGUpID8gb2UoZChnLCBbIGUgXS5jb25jYXQobikpKSA6IDAgPT09IG4ubGVuZ3RoICYmIDEgPT09IGUubGVuZ3RoICYmICJzdHJpbmciID09IHR5cGVvZiBlWzBdID8gZSA6IG9lKGQoZSwgbikpOwogICAgICAgIH0KICAgICAgICB2YXIgbGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlIHx8ICJvYmplY3QiID09IHR5cGVvZiBlICYmIG51bGwgIT09IGUgJiYgIUFycmF5LmlzQXJyYXkoZSk7CiAgICAgICAgfSwgdWUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAiX19wcm90b19fIiAhPT0gZSAmJiAiY29uc3RydWN0b3IiICE9PSBlICYmICJwcm90b3R5cGUiICE9PSBlOwogICAgICAgIH07CiAgICAgICAgZnVuY3Rpb24gY2UoZSwgdCwgbikgewogICAgICAgICAgICB2YXIgciA9IGVbbl07CiAgICAgICAgICAgIGxlKHQpICYmIGxlKHIpID8gc2UociwgdCkgOiBlW25dID0gdDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gc2UoZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCwgbiA9IG5ldyBBcnJheSh0ID4gMSA/IHQgLSAxIDogMCksIHIgPSAxOyByIDwgdDsgcisrKSBuW3IgLSAxXSA9IGFyZ3VtZW50c1tyXTsKICAgICAgICAgICAgZm9yICh2YXIgYSA9IDAsIG8gPSBuOyBhIDwgby5sZW5ndGg7IGErKykgewogICAgICAgICAgICAgICAgdmFyIGkgPSBvW2FdOwogICAgICAgICAgICAgICAgaWYgKGxlKGkpKSBmb3IgKHZhciBsIGluIGkpIHVlKGwpICYmIGNlKGUsIGlbbF0sIGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0KICAgICAgICB2YXIgZmUgPSAvKGEpKGQpL2dpLCBkZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZSArIChlID4gMjUgPyAzOSA6IDk3KSk7CiAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBwZShlKSB7CiAgICAgICAgICAgIHZhciB0LCBuID0gIiI7CiAgICAgICAgICAgIGZvciAodCA9IE1hdGguYWJzKGUpOyB0ID4gNTI7IHQgPSB0IC8gNTIgfCAwKSBuID0gZGUodCAlIDUyKSArIG47CiAgICAgICAgICAgIHJldHVybiAoZGUodCAlIDUyKSArIG4pLnJlcGxhY2UoZmUsICIkMS0kMiIpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnZShlKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQgKz0gMSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlW3RdOwogICAgICAgICAgICAgICAgaWYgKG0obikgJiYgIXYobikpIHJldHVybiAhMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgfQogICAgICAgIHZhciBoZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBmdW5jdGlvbiBlKGUsIHQpIHsKICAgICAgICAgICAgICAgIHRoaXMucnVsZXMgPSBlLCB0aGlzLnN0YXRpY1J1bGVzSWQgPSAiIiwgdGhpcy5pc1N0YXRpYyA9IGdlKGUpLCB0aGlzLmNvbXBvbmVudElkID0gdCwgCiAgICAgICAgICAgICAgICB0aGlzLmJhc2VIYXNoID0gcSh0KSwgVi5yZWdpc3RlcklkKHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlLnByb3RvdHlwZS5nZW5lcmF0ZUFuZEluamVjdFN0eWxlcyA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy5jb21wb25lbnRJZDsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzU3RhdGljICYmICFuLmhhc2gpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0aWNSdWxlc0lkICYmIHQuaGFzTmFtZUZvcklkKHIsIHRoaXMuc3RhdGljUnVsZXNJZCkpIHJldHVybiB0aGlzLnN0YXRpY1J1bGVzSWQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBvZSh0aGlzLnJ1bGVzLCBlLCB0KS5qb2luKCIiKSwgbyA9IHBlKCQodGhpcy5iYXNlSGFzaCwgYS5sZW5ndGgpID4+PiAwKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXQuaGFzTmFtZUZvcklkKHIsIG8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbihhLCAiLiIgKyBvLCB2b2lkIDAsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICB0Lmluc2VydFJ1bGVzKHIsIG8sIGkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0aWNSdWxlc0lkID0gbywgbzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSB0aGlzLnJ1bGVzLmxlbmd0aCwgdSA9ICQodGhpcy5iYXNlSGFzaCwgbi5oYXNoKSwgYyA9ICIiLCBzID0gMDsgcyA8IGw7IHMrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBmID0gdGhpcy5ydWxlc1tzXTsKICAgICAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGYpIGMgKz0gZjsgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gb2UoZiwgZSwgdCksIHAgPSBBcnJheS5pc0FycmF5KGQpID8gZC5qb2luKCIiKSA6IGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAkKHUsIHAgKyBzKSwgYyArPSBwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBnID0gcGUodSA+Pj4gMCk7CiAgICAgICAgICAgICAgICBpZiAoIXQuaGFzTmFtZUZvcklkKHIsIGcpKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBuKGMsICIuIiArIGcsIHZvaWQgMCwgcik7CiAgICAgICAgICAgICAgICAgICAgdC5pbnNlcnRSdWxlcyhyLCBnLCBoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBnOwogICAgICAgICAgICB9LCBlOwogICAgICAgIH0oKSwgbWUgPSAobmV3IFNldCwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBuICYmIChuID0gaCksIGUudGhlbWUgIT09IG4udGhlbWUgJiYgZS50aGVtZSB8fCB0IHx8IG4udGhlbWU7CiAgICAgICAgfSksIGJlID0gL1shIiMkJSYnKCkqKywuLzo7PD0+P0BbXFxcXV5ge3x9fi1dKy9nLCB2ZSA9IC8oXi18LSQpL2c7CiAgICAgICAgZnVuY3Rpb24geWUoZSkgewogICAgICAgICAgICByZXR1cm4gZS5yZXBsYWNlKGJlLCAiLSIpLnJlcGxhY2UodmUsICIiKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gd2UoZSkgewogICAgICAgICAgICByZXR1cm4gInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgITA7CiAgICAgICAgfQogICAgICAgIHZhciBrZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHBlKHEoZSkgPj4+IDApOwogICAgICAgIH07CiAgICAgICAgdmFyIHhlID0gby5hLmNyZWF0ZUNvbnRleHQoKTsKICAgICAgICB4ZS5Db25zdW1lcjsKICAgICAgICB2YXIgRWUgPSB7fTsKICAgICAgICBmdW5jdGlvbiBTZShlLCB0LCBuKSB7CiAgICAgICAgICAgIHZhciByID0gZS5hdHRycywgbyA9IGUuY29tcG9uZW50U3R5bGUsIGkgPSBlLmRlZmF1bHRQcm9wcywgbCA9IGUuZm9sZGVkQ29tcG9uZW50SWRzLCBjID0gZS5zaG91bGRGb3J3YXJkUHJvcCwgcyA9IGUuc3R5bGVkQ29tcG9uZW50SWQsIGQgPSBlLnRhcmdldDsKICAgICAgICAgICAgT2JqZWN0KGEudXNlRGVidWdWYWx1ZSkocyk7CiAgICAgICAgICAgIHZhciBwID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gaCk7CiAgICAgICAgICAgICAgICB2YXIgciA9IGYoe30sIHQsIHsKICAgICAgICAgICAgICAgICAgICB0aGVtZTogZQogICAgICAgICAgICAgICAgfSksIGEgPSB7fTsKICAgICAgICAgICAgICAgIHJldHVybiBuLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCwgbiwgbywgaSA9IGU7CiAgICAgICAgICAgICAgICAgICAgZm9yICh0IGluIG0oaSkgJiYgKGkgPSBpKHIpKSwgaSkgclt0XSA9IGFbdF0gPSAiY2xhc3NOYW1lIiA9PT0gdCA/IChuID0gYVt0XSwgbyA9IGlbdF0sIAogICAgICAgICAgICAgICAgICAgIG4gJiYgbyA/IG4gKyAiICIgKyBvIDogbiB8fCBvKSA6IGlbdF07CiAgICAgICAgICAgICAgICB9KSksIFsgciwgYSBdOwogICAgICAgICAgICB9KG1lKHQsIE9iamVjdChhLnVzZUNvbnRleHQpKHhlKSwgaSkgfHwgaCwgdCwgciksIGcgPSBwWzBdLCBiID0gcFsxXSwgdiA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgIHZhciBvID0gWCgpLCBpID0gWigpLCBsID0gZS5pc1N0YXRpYyAmJiAhdCA/IGUuZ2VuZXJhdGVBbmRJbmplY3RTdHlsZXMoaCwgbywgaSkgOiBlLmdlbmVyYXRlQW5kSW5qZWN0U3R5bGVzKG4sIG8sIGkpOwogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdChhLnVzZURlYnVnVmFsdWUpKGwpLCBsOwogICAgICAgICAgICB9KG8sIHIubGVuZ3RoID4gMCwgZyksIHkgPSBuLCB3ID0gYi4kYXMgfHwgdC4kYXMgfHwgYi5hcyB8fCB0LmFzIHx8IGQsIGsgPSB3ZSh3KSwgeCA9IGIgIT09IHQgPyBmKHt9LCB0LCB7fSwgYikgOiB0LCBFID0gYyB8fCBrICYmIHUuYSwgUyA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBPIGluIHgpICIkIiAhPT0gT1swXSAmJiAiYXMiICE9PSBPICYmICgiZm9yd2FyZGVkQXMiID09PSBPID8gUy5hcyA9IHhbT10gOiBFICYmICFFKE8sIHUuYSkgfHwgKFNbT10gPSB4W09dKSk7CiAgICAgICAgICAgIHJldHVybiB0LnN0eWxlICYmIGIuc3R5bGUgIT09IHQuc3R5bGUgJiYgKFMuc3R5bGUgPSBmKHt9LCB0LnN0eWxlLCB7fSwgYi5zdHlsZSkpLCAKICAgICAgICAgICAgUy5jbGFzc05hbWUgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0KGwsIHMsIHYgIT09IHMgPyB2IDogbnVsbCwgdC5jbGFzc05hbWUsIGIuY2xhc3NOYW1lKS5maWx0ZXIoQm9vbGVhbikuam9pbigiICIpLCAKICAgICAgICAgICAgUy5yZWYgPSB5LCBPYmplY3QoYS5jcmVhdGVFbGVtZW50KSh3LCBTKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gT2UoZSwgdCwgbikgewogICAgICAgICAgICB2YXIgciA9IHYoZSksIGEgPSAhd2UoZSksIGkgPSB0LmRpc3BsYXlOYW1lLCBsID0gdm9pZCAwID09PSBpID8gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHdlKGUpID8gInN0eWxlZC4iICsgZSA6ICJTdHlsZWQoIiArIGIoZSkgKyAiKSI7CiAgICAgICAgICAgIH0oZSkgOiBpLCB1ID0gdC5jb21wb25lbnRJZCwgYyA9IHZvaWQgMCA9PT0gdSA/IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gInN0cmluZyIgIT0gdHlwZW9mIGUgPyAic2MiIDogeWUoZSk7CiAgICAgICAgICAgICAgICBFZVtuXSA9IChFZVtuXSB8fCAwKSArIDE7CiAgICAgICAgICAgICAgICB2YXIgciA9IG4gKyAiLSIgKyBrZShuICsgRWVbbl0pOwogICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB0ICsgIi0iICsgciA6IHI7CiAgICAgICAgICAgIH0odC5kaXNwbGF5TmFtZSwgdC5wYXJlbnRDb21wb25lbnRJZCkgOiB1LCBkID0gdC5hdHRycywgcCA9IHZvaWQgMCA9PT0gZCA/IGcgOiBkLCBoID0gdC5kaXNwbGF5TmFtZSAmJiB0LmNvbXBvbmVudElkID8geWUodC5kaXNwbGF5TmFtZSkgKyAiLSIgKyB0LmNvbXBvbmVudElkIDogdC5jb21wb25lbnRJZCB8fCBjLCBtID0gciAmJiBlLmF0dHJzID8gQXJyYXkucHJvdG90eXBlLmNvbmNhdChlLmF0dHJzLCBwKS5maWx0ZXIoQm9vbGVhbikgOiBwLCB5ID0gdC5zaG91bGRGb3J3YXJkUHJvcDsKICAgICAgICAgICAgciAmJiBlLnNob3VsZEZvcndhcmRQcm9wICYmICh5ID0geSA/IGZ1bmN0aW9uKG4sIHIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLnNob3VsZEZvcndhcmRQcm9wKG4sIHIpICYmIHQuc2hvdWxkRm9yd2FyZFByb3Aobiwgcik7CiAgICAgICAgICAgIH0gOiBlLnNob3VsZEZvcndhcmRQcm9wKTsKICAgICAgICAgICAgdmFyIHcsIGsgPSBuZXcgaGUociA/IGUuY29tcG9uZW50U3R5bGUucnVsZXMuY29uY2F0KG4pIDogbiwgaCksIHggPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gU2UodywgZSwgdCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiB4LmRpc3BsYXlOYW1lID0gbCwgKHcgPSBvLmEuZm9yd2FyZFJlZih4KSkuYXR0cnMgPSBtLCB3LmNvbXBvbmVudFN0eWxlID0gaywgCiAgICAgICAgICAgIHcuZGlzcGxheU5hbWUgPSBsLCB3LnNob3VsZEZvcndhcmRQcm9wID0geSwgdy5mb2xkZWRDb21wb25lbnRJZHMgPSByID8gQXJyYXkucHJvdG90eXBlLmNvbmNhdChlLmZvbGRlZENvbXBvbmVudElkcywgZS5zdHlsZWRDb21wb25lbnRJZCkgOiBnLCAKICAgICAgICAgICAgdy5zdHlsZWRDb21wb25lbnRJZCA9IGgsIHcudGFyZ2V0ID0gciA/IGUudGFyZ2V0IDogZSwgdy53aXRoQ29tcG9uZW50ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdmFyIHIgPSB0LmNvbXBvbmVudElkLCBhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICAgICAgICAgICAgICB2YXIgbiwgciwgYSA9IHt9LCBvID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IG8ubGVuZ3RoOyByKyspIG4gPSBvW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCAoYVtuXSA9IGVbbl0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgICAgICAgICAgfSh0LCBbICJjb21wb25lbnRJZCIgXSksIG8gPSByICYmIHIgKyAiLSIgKyAod2UoZSkgPyBlIDogeWUoYihlKSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIE9lKGUsIGYoe30sIGEsIHsKICAgICAgICAgICAgICAgICAgICBhdHRyczogbSwKICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRJZDogbwogICAgICAgICAgICAgICAgfSksIG4pOwogICAgICAgICAgICB9LCBPYmplY3QuZGVmaW5lUHJvcGVydHkodywgImRlZmF1bHRQcm9wcyIsIHsKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZvbGRlZERlZmF1bHRQcm9wczsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9mb2xkZWREZWZhdWx0UHJvcHMgPSByID8gc2Uoe30sIGUuZGVmYXVsdFByb3BzLCB0KSA6IHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCB3LnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIi4iICsgdy5zdHlsZWRDb21wb25lbnRJZDsKICAgICAgICAgICAgfSwgYSAmJiBzKCkodywgZSwgewogICAgICAgICAgICAgICAgYXR0cnM6ICEwLAogICAgICAgICAgICAgICAgY29tcG9uZW50U3R5bGU6ICEwLAogICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICEwLAogICAgICAgICAgICAgICAgZm9sZGVkQ29tcG9uZW50SWRzOiAhMCwKICAgICAgICAgICAgICAgIHNob3VsZEZvcndhcmRQcm9wOiAhMCwKICAgICAgICAgICAgICAgIHNlbGY6ICEwLAogICAgICAgICAgICAgICAgc3R5bGVkQ29tcG9uZW50SWQ6ICEwLAogICAgICAgICAgICAgICAgdGFyZ2V0OiAhMCwKICAgICAgICAgICAgICAgIHdpdGhDb21wb25lbnQ6ICEwCiAgICAgICAgICAgIH0pLCB3OwogICAgICAgIH0KICAgICAgICB2YXIgQ2UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBlKHQsIG4sIGEpIHsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGEgJiYgKGEgPSBoKSwgIU9iamVjdChyLmlzVmFsaWRFbGVtZW50VHlwZSkobikpIHJldHVybiBTKDEsIFN0cmluZyhuKSk7CiAgICAgICAgICAgICAgICB2YXIgbyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0KG4sIGEsIGllLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIG8ud2l0aENvbmZpZyA9IGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0LCBuLCBmKHt9LCBhLCB7fSwgcikpOwogICAgICAgICAgICAgICAgfSwgby5hdHRycyA9IGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0LCBuLCBmKHt9LCBhLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiBBcnJheS5wcm90b3R5cGUuY29uY2F0KGEuYXR0cnMsIHIpLmZpbHRlcihCb29sZWFuKQogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH0sIG87CiAgICAgICAgICAgIH0oT2UsIGUpOwogICAgICAgIH07CiAgICAgICAgWyAiYSIsICJhYmJyIiwgImFkZHJlc3MiLCAiYXJlYSIsICJhcnRpY2xlIiwgImFzaWRlIiwgImF1ZGlvIiwgImIiLCAiYmFzZSIsICJiZGkiLCAiYmRvIiwgImJpZyIsICJibG9ja3F1b3RlIiwgImJvZHkiLCAiYnIiLCAiYnV0dG9uIiwgImNhbnZhcyIsICJjYXB0aW9uIiwgImNpdGUiLCAiY29kZSIsICJjb2wiLCAiY29sZ3JvdXAiLCAiZGF0YSIsICJkYXRhbGlzdCIsICJkZCIsICJkZWwiLCAiZGV0YWlscyIsICJkZm4iLCAiZGlhbG9nIiwgImRpdiIsICJkbCIsICJkdCIsICJlbSIsICJlbWJlZCIsICJmaWVsZHNldCIsICJmaWdjYXB0aW9uIiwgImZpZ3VyZSIsICJmb290ZXIiLCAiZm9ybSIsICJoMSIsICJoMiIsICJoMyIsICJoNCIsICJoNSIsICJoNiIsICJoZWFkIiwgImhlYWRlciIsICJoZ3JvdXAiLCAiaHIiLCAiaHRtbCIsICJpIiwgImlmcmFtZSIsICJpbWciLCAiaW5wdXQiLCAiaW5zIiwgImtiZCIsICJrZXlnZW4iLCAibGFiZWwiLCAibGVnZW5kIiwgImxpIiwgImxpbmsiLCAibWFpbiIsICJtYXAiLCAibWFyayIsICJtYXJxdWVlIiwgIm1lbnUiLCAibWVudWl0ZW0iLCAibWV0YSIsICJtZXRlciIsICJuYXYiLCAibm9zY3JpcHQiLCAib2JqZWN0IiwgIm9sIiwgIm9wdGdyb3VwIiwgIm9wdGlvbiIsICJvdXRwdXQiLCAicCIsICJwYXJhbSIsICJwaWN0dXJlIiwgInByZSIsICJwcm9ncmVzcyIsICJxIiwgInJwIiwgInJ0IiwgInJ1YnkiLCAicyIsICJzYW1wIiwgInNjcmlwdCIsICJzZWN0aW9uIiwgInNlbGVjdCIsICJzbWFsbCIsICJzb3VyY2UiLCAic3BhbiIsICJzdHJvbmciLCAic3R5bGUiLCAic3ViIiwgInN1bW1hcnkiLCAic3VwIiwgInRhYmxlIiwgInRib2R5IiwgInRkIiwgInRleHRhcmVhIiwgInRmb290IiwgInRoIiwgInRoZWFkIiwgInRpbWUiLCAidGl0bGUiLCAidHIiLCAidHJhY2siLCAidSIsICJ1bCIsICJ2YXIiLCAidmlkZW8iLCAid2JyIiwgImNpcmNsZSIsICJjbGlwUGF0aCIsICJkZWZzIiwgImVsbGlwc2UiLCAiZm9yZWlnbk9iamVjdCIsICJnIiwgImltYWdlIiwgImxpbmUiLCAibGluZWFyR3JhZGllbnQiLCAibWFya2VyIiwgIm1hc2siLCAicGF0aCIsICJwYXR0ZXJuIiwgInBvbHlnb24iLCAicG9seWxpbmUiLCAicmFkaWFsR3JhZGllbnQiLCAicmVjdCIsICJzdG9wIiwgInN2ZyIsICJ0ZXh0IiwgInRzcGFuIiBdLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgQ2VbZV0gPSBDZShlKTsKICAgICAgICB9KSk7CiAgICAgICAgdmFyIFRlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGUoZSwgdCkgewogICAgICAgICAgICAgICAgdGhpcy5ydWxlcyA9IGUsIHRoaXMuY29tcG9uZW50SWQgPSB0LCB0aGlzLmlzU3RhdGljID0gZ2UoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHQgPSBlLnByb3RvdHlwZTsKICAgICAgICAgICAgcmV0dXJuIHQuY3JlYXRlU3R5bGVzID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICAgICAgdmFyIGEgPSByKG9lKHRoaXMucnVsZXMsIHQsIG4pLmpvaW4oIiIpLCAiIiksIG8gPSB0aGlzLmNvbXBvbmVudElkICsgZTsKICAgICAgICAgICAgICAgIG4uaW5zZXJ0UnVsZXMobywgbywgYSk7CiAgICAgICAgICAgIH0sIHQucmVtb3ZlU3R5bGVzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgdC5jbGVhclJ1bGVzKHRoaXMuY29tcG9uZW50SWQgKyBlKTsKICAgICAgICAgICAgfSwgdC5yZW5kZXJTdHlsZXMgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICBWLnJlZ2lzdGVySWQodGhpcy5jb21wb25lbnRJZCArIGUpLCB0aGlzLnJlbW92ZVN0eWxlcyhlLCBuKSwgdGhpcy5jcmVhdGVTdHlsZXMoZSwgdCwgbiwgcik7CiAgICAgICAgICAgIH0sIGU7CiAgICAgICAgfSgpOwogICAgICAgIGZ1bmN0aW9uIFBlKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IGFyZ3VtZW50cy5sZW5ndGgsIG4gPSBuZXcgQXJyYXkodCA+IDEgPyB0IC0gMSA6IDApLCByID0gMTsgciA8IHQ7IHIrKykgbltyIC0gMV0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgICAgIHZhciBpID0gaWUuYXBwbHkodm9pZCAwLCBbIGUgXS5jb25jYXQobikpLCBsID0gInNjLWdsb2JhbC0iICsga2UoSlNPTi5zdHJpbmdpZnkoaSkpLCB1ID0gbmV3IFRlKGksIGwpOwogICAgICAgICAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gWCgpLCBuID0gWigpLCByID0gT2JqZWN0KGEudXNlQ29udGV4dCkoeGUpLCBvID0gT2JqZWN0KGEudXNlUmVmKShudWxsKTsKICAgICAgICAgICAgICAgIG51bGwgPT09IG8uY3VycmVudCAmJiAoby5jdXJyZW50ID0gdC5hbGxvY2F0ZUdTSW5zdGFuY2UobCkpOwogICAgICAgICAgICAgICAgdmFyIGkgPSBvLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICBpZiAodS5pc1N0YXRpYykgdS5yZW5kZXJTdHlsZXMoaSwgeCwgdCwgbik7IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gZih7fSwgZSwgewogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogbWUoZSwgciwgYy5kZWZhdWx0UHJvcHMpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdS5yZW5kZXJTdHlsZXMoaSwgcywgdCwgbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0KGEudXNlRWZmZWN0KSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdS5yZW1vdmVTdHlsZXMoaSwgdCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pLCBnKSwgbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gby5hLm1lbW8oYyk7CiAgICAgICAgfQogICAgICAgIHQuYyA9IENlOwogICAgfSkuY2FsbCh0aGlzLCBuKDUxKSk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gczsKICAgIH0pKSwgbi5kKHQsICJiIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBXOwogICAgfSkpLCBuLmQodCwgImMiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIEg7CiAgICB9KSksIG4uZCh0LCAiZCIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gWTsKICAgIH0pKTsKICAgIHZhciByID0gbigwKSwgYSA9IG4ubihyKSwgbyA9IChuKDQ3KSwgYS5hLmNyZWF0ZUNvbnRleHQobnVsbCkpOwogICAgdmFyIGkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgZSgpOwogICAgfSwgbCA9IHsKICAgICAgICBub3RpZnk6IGZ1bmN0aW9uKCkge30KICAgIH07CiAgICBmdW5jdGlvbiB1KCkgewogICAgICAgIHZhciBlID0gaSwgdCA9IG51bGwsIG4gPSBudWxsOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNsZWFyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHQgPSBudWxsLCBuID0gbnVsbDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbm90aWZ5OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGUoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0OyBlOyApIGUuY2FsbGJhY2soKSwgZSA9IGUubmV4dDsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgbiA9IHQ7IG47ICkgZS5wdXNoKG4pLCBuID0gbi5uZXh0OwogICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdmFyIHIgPSAhMCwgYSA9IG4gPSB7CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGUsCiAgICAgICAgICAgICAgICAgICAgbmV4dDogbnVsbCwKICAgICAgICAgICAgICAgICAgICBwcmV2OiBuCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIGEucHJldiA/IGEucHJldi5uZXh0ID0gYSA6IHQgPSBhLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByICYmIG51bGwgIT09IHQgJiYgKHIgPSAhMSwgYS5uZXh0ID8gYS5uZXh0LnByZXYgPSBhLnByZXYgOiBuID0gYS5wcmV2LCBhLnByZXYgPyBhLnByZXYubmV4dCA9IGEubmV4dCA6IHQgPSBhLm5leHQpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9CiAgICB2YXIgYyA9IGZ1bmN0aW9uKCkgewogICAgICAgIGZ1bmN0aW9uIGUoZSwgdCkgewogICAgICAgICAgICB0aGlzLnN0b3JlID0gZSwgdGhpcy5wYXJlbnRTdWIgPSB0LCB0aGlzLnVuc3Vic2NyaWJlID0gbnVsbCwgdGhpcy5saXN0ZW5lcnMgPSBsLCAKICAgICAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2VXcmFwcGVyID0gdGhpcy5oYW5kbGVDaGFuZ2VXcmFwcGVyLmJpbmQodGhpcyk7CiAgICAgICAgfQogICAgICAgIHZhciB0ID0gZS5wcm90b3R5cGU7CiAgICAgICAgcmV0dXJuIHQuYWRkTmVzdGVkU3ViID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy50cnlTdWJzY3JpYmUoKSwgdGhpcy5saXN0ZW5lcnMuc3Vic2NyaWJlKGUpOwogICAgICAgIH0sIHQubm90aWZ5TmVzdGVkU3VicyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5ub3RpZnkoKTsKICAgICAgICB9LCB0LmhhbmRsZUNoYW5nZVdyYXBwZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlICYmIHRoaXMub25TdGF0ZUNoYW5nZSgpOwogICAgICAgIH0sIHQuaXNTdWJzY3JpYmVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMudW5zdWJzY3JpYmUpOwogICAgICAgIH0sIHQudHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUgfHwgKHRoaXMudW5zdWJzY3JpYmUgPSB0aGlzLnBhcmVudFN1YiA/IHRoaXMucGFyZW50U3ViLmFkZE5lc3RlZFN1Yih0aGlzLmhhbmRsZUNoYW5nZVdyYXBwZXIpIDogdGhpcy5zdG9yZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVDaGFuZ2VXcmFwcGVyKSwgCiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzID0gdSgpKTsKICAgICAgICB9LCB0LnRyeVVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUgJiYgKHRoaXMudW5zdWJzY3JpYmUoKSwgdGhpcy51bnN1YnNjcmliZSA9IG51bGwsIHRoaXMubGlzdGVuZXJzLmNsZWFyKCksIAogICAgICAgICAgICB0aGlzLmxpc3RlbmVycyA9IGwpOwogICAgICAgIH0sIGU7CiAgICB9KCk7CiAgICB2YXIgcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuc3RvcmUsIG4gPSBlLmNvbnRleHQsIGkgPSBlLmNoaWxkcmVuLCBsID0gT2JqZWN0KHIudXNlTWVtbykoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSA9IG5ldyBjKHQpOwogICAgICAgICAgICByZXR1cm4gZS5vblN0YXRlQ2hhbmdlID0gZS5ub3RpZnlOZXN0ZWRTdWJzLCB7CiAgICAgICAgICAgICAgICBzdG9yZTogdCwKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbjogZQogICAgICAgICAgICB9OwogICAgICAgIH0pLCBbIHQgXSksIHUgPSBPYmplY3Qoci51c2VNZW1vKSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0LmdldFN0YXRlKCk7CiAgICAgICAgfSksIFsgdCBdKTsKICAgICAgICBPYmplY3Qoci51c2VFZmZlY3QpKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGUgPSBsLnN1YnNjcmlwdGlvbjsKICAgICAgICAgICAgcmV0dXJuIGUudHJ5U3Vic2NyaWJlKCksIHUgIT09IHQuZ2V0U3RhdGUoKSAmJiBlLm5vdGlmeU5lc3RlZFN1YnMoKSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBlLnRyeVVuc3Vic2NyaWJlKCksIGUub25TdGF0ZUNoYW5nZSA9IG51bGw7CiAgICAgICAgICAgIH07CiAgICAgICAgfSksIFsgbCwgdSBdKTsKICAgICAgICB2YXIgcyA9IG4gfHwgbzsKICAgICAgICByZXR1cm4gYS5hLmNyZWF0ZUVsZW1lbnQocy5Qcm92aWRlciwgewogICAgICAgICAgICB2YWx1ZTogbAogICAgICAgIH0sIGkpOwogICAgfTsKICAgIGZ1bmN0aW9uIGYoKSB7CiAgICAgICAgcmV0dXJuIChmID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gbikgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sIHIpICYmIChlW3JdID0gbltyXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICAgIGZ1bmN0aW9uIGQoZSwgdCkgewogICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICB2YXIgbiwgciwgYSA9IHt9LCBvID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgZm9yIChyID0gMDsgciA8IG8ubGVuZ3RoOyByKyspIG4gPSBvW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCAoYVtuXSA9IGVbbl0pOwogICAgICAgIHJldHVybiBhOwogICAgfQogICAgdmFyIHAgPSBuKDIxKSwgZyA9IG4ubihwKSwgaCA9IG4oMTgpLCBtID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5kb2N1bWVudCAmJiB2b2lkIDAgIT09IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50ID8gci51c2VMYXlvdXRFZmZlY3QgOiByLnVzZUVmZmVjdCwgYiA9IFtdLCB2ID0gWyBudWxsLCBudWxsIF07CiAgICBmdW5jdGlvbiB5KGUsIHQpIHsKICAgICAgICB2YXIgbiA9IGVbMV07CiAgICAgICAgcmV0dXJuIFsgdC5wYXlsb2FkLCBuICsgMSBdOwogICAgfQogICAgZnVuY3Rpb24gdyhlLCB0LCBuKSB7CiAgICAgICAgbSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHZvaWQgMCwgdCk7CiAgICAgICAgfSksIG4pOwogICAgfQogICAgZnVuY3Rpb24gayhlLCB0LCBuLCByLCBhLCBvLCBpKSB7CiAgICAgICAgZS5jdXJyZW50ID0gciwgdC5jdXJyZW50ID0gYSwgbi5jdXJyZW50ID0gITEsIG8uY3VycmVudCAmJiAoby5jdXJyZW50ID0gbnVsbCwgaSgpKTsKICAgIH0KICAgIGZ1bmN0aW9uIHgoZSwgdCwgbiwgciwgYSwgbywgaSwgbCwgdSwgYykgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgIHZhciBzID0gITEsIGYgPSBudWxsLCBkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAoIXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSwgbiwgZCA9IHQuZ2V0U3RhdGUoKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gcihkLCBhLmN1cnJlbnQpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUsIGYgPSBlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuIHx8IChmID0gbnVsbCksIGUgPT09IG8uY3VycmVudCA/IGkuY3VycmVudCB8fCB1KCkgOiAoby5jdXJyZW50ID0gZSwgbC5jdXJyZW50ID0gZSwgCiAgICAgICAgICAgICAgICAgICAgaS5jdXJyZW50ID0gITAsIGMoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiU1RPUkVfVVBEQVRFRCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG4ub25TdGF0ZUNoYW5nZSA9IGQsIG4udHJ5U3Vic2NyaWJlKCksIGQoKTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHMgPSAhMCwgbi50cnlVbnN1YnNjcmliZSgpLCBuLm9uU3RhdGVDaGFuZ2UgPSBudWxsLCBmKSB0aHJvdyBmOwogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KICAgIHZhciBFID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIFsgbnVsbCwgMCBdOwogICAgfTsKICAgIGZ1bmN0aW9uIFMoZSwgdCkgewogICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IHt9KTsKICAgICAgICB2YXIgbiA9IHQsIGkgPSBuLmdldERpc3BsYXlOYW1lLCBsID0gdm9pZCAwID09PSBpID8gZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gIkNvbm5lY3RBZHZhbmNlZCgiICsgZSArICIpIjsKICAgICAgICB9IDogaSwgdSA9IG4ubWV0aG9kTmFtZSwgcyA9IHZvaWQgMCA9PT0gdSA/ICJjb25uZWN0QWR2YW5jZWQiIDogdSwgcCA9IG4ucmVuZGVyQ291bnRQcm9wLCBtID0gdm9pZCAwID09PSBwID8gdm9pZCAwIDogcCwgUyA9IG4uc2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VzLCBPID0gdm9pZCAwID09PSBTIHx8IFMsIEMgPSBuLnN0b3JlS2V5LCBUID0gdm9pZCAwID09PSBDID8gInN0b3JlIiA6IEMsIFAgPSAobi53aXRoUmVmLCAKICAgICAgICBuLmZvcndhcmRSZWYpLCBfID0gdm9pZCAwICE9PSBQICYmIFAsIGogPSBuLmNvbnRleHQsIEkgPSB2b2lkIDAgPT09IGogPyBvIDogaiwgTiA9IGQobiwgWyAiZ2V0RGlzcGxheU5hbWUiLCAibWV0aG9kTmFtZSIsICJyZW5kZXJDb3VudFByb3AiLCAic2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VzIiwgInN0b3JlS2V5IiwgIndpdGhSZWYiLCAiZm9yd2FyZFJlZiIsICJjb250ZXh0IiBdKSwgQSA9IEk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIG4gPSB0LmRpc3BsYXlOYW1lIHx8IHQubmFtZSB8fCAiQ29tcG9uZW50IiwgbyA9IGwobiksIGkgPSBmKHt9LCBOLCB7CiAgICAgICAgICAgICAgICBnZXREaXNwbGF5TmFtZTogbCwKICAgICAgICAgICAgICAgIG1ldGhvZE5hbWU6IHMsCiAgICAgICAgICAgICAgICByZW5kZXJDb3VudFByb3A6IG0sCiAgICAgICAgICAgICAgICBzaG91bGRIYW5kbGVTdGF0ZUNoYW5nZXM6IE8sCiAgICAgICAgICAgICAgICBzdG9yZUtleTogVCwKICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBvLAogICAgICAgICAgICAgICAgd3JhcHBlZENvbXBvbmVudE5hbWU6IG4sCiAgICAgICAgICAgICAgICBXcmFwcGVkQ29tcG9uZW50OiB0CiAgICAgICAgICAgIH0pLCB1ID0gTi5wdXJlOwogICAgICAgICAgICB2YXIgcCA9IHUgPyByLnVzZU1lbW8gOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSgpOwogICAgICAgICAgICB9OwogICAgICAgICAgICBmdW5jdGlvbiBTKG4pIHsKICAgICAgICAgICAgICAgIHZhciBvID0gT2JqZWN0KHIudXNlTWVtbykoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gbi5mb3J3YXJkZWRSZWYsIHQgPSBkKG4sIFsgImZvcndhcmRlZFJlZiIgXSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgbi5jb250ZXh0LCBlLCB0IF07CiAgICAgICAgICAgICAgICB9KSwgWyBuIF0pLCBsID0gb1swXSwgdSA9IG9bMV0sIHMgPSBvWzJdLCBnID0gT2JqZWN0KHIudXNlTWVtbykoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBsICYmIGwuQ29uc3VtZXIgJiYgT2JqZWN0KGguaXNDb250ZXh0Q29uc3VtZXIpKGEuYS5jcmVhdGVFbGVtZW50KGwuQ29uc3VtZXIsIG51bGwpKSA/IGwgOiBBOwogICAgICAgICAgICAgICAgfSksIFsgbCwgQSBdKSwgbSA9IE9iamVjdChyLnVzZUNvbnRleHQpKGcpLCBTID0gQm9vbGVhbihuLnN0b3JlKSAmJiBCb29sZWFuKG4uc3RvcmUuZ2V0U3RhdGUpICYmIEJvb2xlYW4obi5zdG9yZS5kaXNwYXRjaCk7CiAgICAgICAgICAgICAgICBCb29sZWFuKG0pICYmIEJvb2xlYW4obS5zdG9yZSk7CiAgICAgICAgICAgICAgICB2YXIgQyA9IFMgPyBuLnN0b3JlIDogbS5zdG9yZSwgVCA9IE9iamVjdChyLnVzZU1lbW8pKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0LmRpc3BhdGNoLCBpKTsKICAgICAgICAgICAgICAgICAgICB9KEMpOwogICAgICAgICAgICAgICAgfSksIFsgQyBdKSwgUCA9IE9iamVjdChyLnVzZU1lbW8pKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIU8pIHJldHVybiB2OwogICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IGMoQywgUyA/IG51bGwgOiBtLnN1YnNjcmlwdGlvbiksIHQgPSBlLm5vdGlmeU5lc3RlZFN1YnMuYmluZChlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBlLCB0IF07CiAgICAgICAgICAgICAgICB9KSwgWyBDLCBTLCBtIF0pLCBfID0gUFswXSwgaiA9IFBbMV0sIEkgPSBPYmplY3Qoci51c2VNZW1vKSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFMgPyBtIDogZih7fSwgbSwgewogICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IF8KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLCBbIFMsIG0sIF8gXSksIE4gPSBPYmplY3Qoci51c2VSZWR1Y2VyKSh5LCBiLCBFKSwgRCA9IE5bMF1bMF0sIFIgPSBOWzFdOwogICAgICAgICAgICAgICAgaWYgKEQgJiYgRC5lcnJvcikgdGhyb3cgRC5lcnJvcjsKICAgICAgICAgICAgICAgIHZhciBNID0gT2JqZWN0KHIudXNlUmVmKSgpLCB6ID0gT2JqZWN0KHIudXNlUmVmKShzKSwgTCA9IE9iamVjdChyLnVzZVJlZikoKSwgRiA9IE9iamVjdChyLnVzZVJlZikoITEpLCBVID0gcCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwuY3VycmVudCAmJiBzID09PSB6LmN1cnJlbnQgPyBMLmN1cnJlbnQgOiBUKEMuZ2V0U3RhdGUoKSwgcyk7CiAgICAgICAgICAgICAgICB9KSwgWyBDLCBELCBzIF0pOwogICAgICAgICAgICAgICAgdyhrLCBbIHosIE0sIEYsIHMsIFUsIEwsIGogXSksIHcoeCwgWyBPLCBDLCBfLCBULCB6LCBNLCBGLCBMLCBqLCBSIF0sIFsgQywgXywgVCBdKTsKICAgICAgICAgICAgICAgIHZhciBXID0gT2JqZWN0KHIudXNlTWVtbykoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmEuY3JlYXRlRWxlbWVudCh0LCBmKHt9LCBVLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogdQogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH0pLCBbIHUsIHQsIFUgXSk7CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0KHIudXNlTWVtbykoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBPID8gYS5hLmNyZWF0ZUVsZW1lbnQoZy5Qcm92aWRlciwgewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSQogICAgICAgICAgICAgICAgICAgIH0sIFcpIDogVzsKICAgICAgICAgICAgICAgIH0pLCBbIGcsIFcsIEkgXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIEMgPSB1ID8gYS5hLm1lbW8oUykgOiBTOwogICAgICAgICAgICBpZiAoQy5XcmFwcGVkQ29tcG9uZW50ID0gdCwgQy5kaXNwbGF5TmFtZSA9IG8sIF8pIHsKICAgICAgICAgICAgICAgIHZhciBQID0gYS5hLmZvcndhcmRSZWYoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5hLmNyZWF0ZUVsZW1lbnQoQywgZih7fSwgZSwgewogICAgICAgICAgICAgICAgICAgICAgICBmb3J3YXJkZWRSZWY6IHQKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICByZXR1cm4gUC5kaXNwbGF5TmFtZSA9IG8sIFAuV3JhcHBlZENvbXBvbmVudCA9IHQsIGcoKShQLCB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZygpKEMsIHQpOwogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBPKGUsIHQpIHsKICAgICAgICByZXR1cm4gZSA9PT0gdCA/IDAgIT09IGUgfHwgMCAhPT0gdCB8fCAxIC8gZSA9PSAxIC8gdCA6IGUgIT0gZSAmJiB0ICE9IHQ7CiAgICB9CiAgICBmdW5jdGlvbiBDKGUsIHQpIHsKICAgICAgICBpZiAoTyhlLCB0KSkgcmV0dXJuICEwOwogICAgICAgIGlmICgib2JqZWN0IiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlIHx8ICJvYmplY3QiICE9IHR5cGVvZiB0IHx8IG51bGwgPT09IHQpIHJldHVybiAhMTsKICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKGUpLCByID0gT2JqZWN0LmtleXModCk7CiAgICAgICAgaWYgKG4ubGVuZ3RoICE9PSByLmxlbmd0aCkgcmV0dXJuICExOwogICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgbi5sZW5ndGg7IGErKykgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgblthXSkgfHwgIU8oZVtuW2FdXSwgdFtuW2FdXSkpIHJldHVybiAhMTsKICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgICB2YXIgVCA9IG4oMTQpOwogICAgZnVuY3Rpb24gUChlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgdmFyIHIgPSBlKHQsIG4pOwogICAgICAgICAgICBmdW5jdGlvbiBhKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGEuZGVwZW5kc09uT3duUHJvcHMgPSAhMSwgYTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gXyhlKSB7CiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUuZGVwZW5kc09uT3duUHJvcHMgJiYgdm9pZCAwICE9PSBlLmRlcGVuZHNPbk93blByb3BzID8gQm9vbGVhbihlLmRlcGVuZHNPbk93blByb3BzKSA6IDEgIT09IGUubGVuZ3RoOwogICAgfQogICAgZnVuY3Rpb24gaihlLCB0KSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgbi5kaXNwbGF5TmFtZTsKICAgICAgICAgICAgdmFyIHIgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gci5kZXBlbmRzT25Pd25Qcm9wcyA/IHIubWFwVG9Qcm9wcyhlLCB0KSA6IHIubWFwVG9Qcm9wcyhlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIHIuZGVwZW5kc09uT3duUHJvcHMgPSAhMCwgci5tYXBUb1Byb3BzID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgci5tYXBUb1Byb3BzID0gZSwgci5kZXBlbmRzT25Pd25Qcm9wcyA9IF8oZSk7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHIodCwgbik7CiAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgYSAmJiAoci5tYXBUb1Byb3BzID0gYSwgci5kZXBlbmRzT25Pd25Qcm9wcyA9IF8oYSksIAogICAgICAgICAgICAgICAgYSA9IHIodCwgbikpLCBhOwogICAgICAgICAgICB9LCByOwogICAgICAgIH07CiAgICB9CiAgICB2YXIgSSA9IFsgZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlID8gaihlKSA6IHZvaWQgMDsKICAgIH0sIGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gZSA/IHZvaWQgMCA6IFAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGRpc3BhdGNoOiBlCiAgICAgICAgICAgIH07CiAgICAgICAgfSkpOwogICAgfSwgZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBlICYmICJvYmplY3QiID09IHR5cGVvZiBlID8gUCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KFQuYikoZSwgdCk7CiAgICAgICAgfSkpIDogdm9pZCAwOwogICAgfSBdOwogICAgdmFyIE4gPSBbIGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSA/IGooZSkgOiB2b2lkIDA7CiAgICB9LCBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGUgPyB2b2lkIDAgOiBQKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgIH0pKTsKICAgIH0gXTsKICAgIGZ1bmN0aW9uIEEoZSwgdCwgbikgewogICAgICAgIHJldHVybiBmKHt9LCBuLCB7fSwgZSwge30sIHQpOwogICAgfQogICAgdmFyIEQgPSBbIGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgIG4uZGlzcGxheU5hbWU7CiAgICAgICAgICAgICAgICB2YXIgciwgYSA9IG4ucHVyZSwgbyA9IG4uYXJlTWVyZ2VkUHJvcHNFcXVhbCwgaSA9ICExOwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIG4sIGwpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGUodCwgbiwgbCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgPyBhICYmIG8odSwgcikgfHwgKHIgPSB1KSA6IChpID0gITAsIHIgPSB1KSwgcjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH07CiAgICAgICAgfShlKSA6IHZvaWQgMDsKICAgIH0sIGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gZSA/IHZvaWQgMCA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gQTsKICAgICAgICB9OwogICAgfSBdOwogICAgZnVuY3Rpb24gUihlLCB0LCBuLCByKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEsIG8pIHsKICAgICAgICAgICAgcmV0dXJuIG4oZShhLCBvKSwgdChyLCBvKSwgbyk7CiAgICAgICAgfTsKICAgIH0KICAgIGZ1bmN0aW9uIE0oZSwgdCwgbiwgciwgYSkgewogICAgICAgIHZhciBvLCBpLCBsLCB1LCBjLCBzID0gYS5hcmVTdGF0ZXNFcXVhbCwgZiA9IGEuYXJlT3duUHJvcHNFcXVhbCwgZCA9IGEuYXJlU3RhdGVQcm9wc0VxdWFsLCBwID0gITE7CiAgICAgICAgZnVuY3Rpb24gZyhhLCBwKSB7CiAgICAgICAgICAgIHZhciBnLCBoLCBtID0gIWYocCwgaSksIGIgPSAhcyhhLCBvKTsKICAgICAgICAgICAgcmV0dXJuIG8gPSBhLCBpID0gcCwgbSAmJiBiID8gKGwgPSBlKG8sIGkpLCB0LmRlcGVuZHNPbk93blByb3BzICYmICh1ID0gdChyLCBpKSksIAogICAgICAgICAgICBjID0gbihsLCB1LCBpKSkgOiBtID8gKGUuZGVwZW5kc09uT3duUHJvcHMgJiYgKGwgPSBlKG8sIGkpKSwgdC5kZXBlbmRzT25Pd25Qcm9wcyAmJiAodSA9IHQociwgaSkpLCAKICAgICAgICAgICAgYyA9IG4obCwgdSwgaSkpIDogYiA/IChnID0gZShvLCBpKSwgaCA9ICFkKGcsIGwpLCBsID0gZywgaCAmJiAoYyA9IG4obCwgdSwgaSkpLCAKICAgICAgICAgICAgYykgOiBjOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSwgcykgewogICAgICAgICAgICByZXR1cm4gcCA/IGcoYSwgcykgOiAobCA9IGUobyA9IGEsIGkgPSBzKSwgdSA9IHQociwgaSksIGMgPSBuKGwsIHUsIGkpLCBwID0gITAsIAogICAgICAgICAgICBjKTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24geihlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0LmluaXRNYXBTdGF0ZVRvUHJvcHMsIHIgPSB0LmluaXRNYXBEaXNwYXRjaFRvUHJvcHMsIGEgPSB0LmluaXRNZXJnZVByb3BzLCBvID0gZCh0LCBbICJpbml0TWFwU3RhdGVUb1Byb3BzIiwgImluaXRNYXBEaXNwYXRjaFRvUHJvcHMiLCAiaW5pdE1lcmdlUHJvcHMiIF0pLCBpID0gbihlLCBvKSwgbCA9IHIoZSwgbyksIHUgPSBhKGUsIG8pOwogICAgICAgIHJldHVybiAoby5wdXJlID8gTSA6IFIpKGksIGwsIHUsIGUsIG8pOwogICAgfQogICAgZnVuY3Rpb24gTChlLCB0LCBuKSB7CiAgICAgICAgZm9yICh2YXIgciA9IHQubGVuZ3RoIC0gMTsgciA+PSAwOyByLS0pIHsKICAgICAgICAgICAgdmFyIGEgPSB0W3JdKGUpOwogICAgICAgICAgICBpZiAoYSkgcmV0dXJuIGE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmdW5jdGlvbih0LCByKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCB2YWx1ZSBvZiB0eXBlICIgKyB0eXBlb2YgZSArICIgZm9yICIgKyBuICsgIiBhcmd1bWVudCB3aGVuIGNvbm5lY3RpbmcgY29tcG9uZW50ICIgKyByLndyYXBwZWRDb21wb25lbnROYW1lICsgIi4iKTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gRihlLCB0KSB7CiAgICAgICAgcmV0dXJuIGUgPT09IHQ7CiAgICB9CiAgICBmdW5jdGlvbiBVKGUpIHsKICAgICAgICB2YXIgdCA9IHZvaWQgMCA9PT0gZSA/IHt9IDogZSwgbiA9IHQuY29ubmVjdEhPQywgciA9IHZvaWQgMCA9PT0gbiA/IFMgOiBuLCBhID0gdC5tYXBTdGF0ZVRvUHJvcHNGYWN0b3JpZXMsIG8gPSB2b2lkIDAgPT09IGEgPyBOIDogYSwgaSA9IHQubWFwRGlzcGF0Y2hUb1Byb3BzRmFjdG9yaWVzLCBsID0gdm9pZCAwID09PSBpID8gSSA6IGksIHUgPSB0Lm1lcmdlUHJvcHNGYWN0b3JpZXMsIGMgPSB2b2lkIDAgPT09IHUgPyBEIDogdSwgcyA9IHQuc2VsZWN0b3JGYWN0b3J5LCBwID0gdm9pZCAwID09PSBzID8geiA6IHM7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIHQsIG4sIGEpIHsKICAgICAgICAgICAgdm9pZCAwID09PSBhICYmIChhID0ge30pOwogICAgICAgICAgICB2YXIgaSA9IGEsIHUgPSBpLnB1cmUsIHMgPSB2b2lkIDAgPT09IHUgfHwgdSwgZyA9IGkuYXJlU3RhdGVzRXF1YWwsIGggPSB2b2lkIDAgPT09IGcgPyBGIDogZywgbSA9IGkuYXJlT3duUHJvcHNFcXVhbCwgYiA9IHZvaWQgMCA9PT0gbSA/IEMgOiBtLCB2ID0gaS5hcmVTdGF0ZVByb3BzRXF1YWwsIHkgPSB2b2lkIDAgPT09IHYgPyBDIDogdiwgdyA9IGkuYXJlTWVyZ2VkUHJvcHNFcXVhbCwgayA9IHZvaWQgMCA9PT0gdyA/IEMgOiB3LCB4ID0gZChpLCBbICJwdXJlIiwgImFyZVN0YXRlc0VxdWFsIiwgImFyZU93blByb3BzRXF1YWwiLCAiYXJlU3RhdGVQcm9wc0VxdWFsIiwgImFyZU1lcmdlZFByb3BzRXF1YWwiIF0pLCBFID0gTChlLCBvLCAibWFwU3RhdGVUb1Byb3BzIiksIFMgPSBMKHQsIGwsICJtYXBEaXNwYXRjaFRvUHJvcHMiKSwgTyA9IEwobiwgYywgIm1lcmdlUHJvcHMiKTsKICAgICAgICAgICAgcmV0dXJuIHIocCwgZih7CiAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAiY29ubmVjdCIsCiAgICAgICAgICAgICAgICBnZXREaXNwbGF5TmFtZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiQ29ubmVjdCgiICsgZSArICIpIjsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaG91bGRIYW5kbGVTdGF0ZUNoYW5nZXM6IEJvb2xlYW4oZSksCiAgICAgICAgICAgICAgICBpbml0TWFwU3RhdGVUb1Byb3BzOiBFLAogICAgICAgICAgICAgICAgaW5pdE1hcERpc3BhdGNoVG9Qcm9wczogUywKICAgICAgICAgICAgICAgIGluaXRNZXJnZVByb3BzOiBPLAogICAgICAgICAgICAgICAgcHVyZTogcywKICAgICAgICAgICAgICAgIGFyZVN0YXRlc0VxdWFsOiBoLAogICAgICAgICAgICAgICAgYXJlT3duUHJvcHNFcXVhbDogYiwKICAgICAgICAgICAgICAgIGFyZVN0YXRlUHJvcHNFcXVhbDogeSwKICAgICAgICAgICAgICAgIGFyZU1lcmdlZFByb3BzRXF1YWw6IGsKICAgICAgICAgICAgfSwgeCkpOwogICAgICAgIH07CiAgICB9CiAgICB2YXIgVyA9IFUoKTsKICAgIGZ1bmN0aW9uIFYoKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChyLnVzZUNvbnRleHQpKG8pOwogICAgfQogICAgZnVuY3Rpb24gJChlKSB7CiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gbyk7CiAgICAgICAgdmFyIHQgPSBlID09PSBvID8gViA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KHIudXNlQ29udGV4dCkoZSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0KCkuc3RvcmU7CiAgICAgICAgfTsKICAgIH0KICAgIHZhciBxID0gJCgpOwogICAgZnVuY3Rpb24gQihlKSB7CiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gbyk7CiAgICAgICAgdmFyIHQgPSBlID09PSBvID8gcSA6ICQoZSk7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdCgpLmRpc3BhdGNoOwogICAgICAgIH07CiAgICB9CiAgICB2YXIgSCA9IEIoKSwgUSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gZSA9PT0gdDsKICAgIH07CiAgICBmdW5jdGlvbiBHKGUpIHsKICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBvKTsKICAgICAgICB2YXIgdCA9IGUgPT09IG8gPyBWIDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3Qoci51c2VDb250ZXh0KShlKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9IFEpOwogICAgICAgICAgICB2YXIgYSA9IHQoKTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIHQsIG4sIGEpIHsKICAgICAgICAgICAgICAgIHZhciBvLCBpID0gT2JqZWN0KHIudXNlUmVkdWNlcikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSArIDE7CiAgICAgICAgICAgICAgICB9KSwgMClbMV0sIGwgPSBPYmplY3Qoci51c2VNZW1vKSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBjKG4sIGEpOwogICAgICAgICAgICAgICAgfSksIFsgbiwgYSBdKSwgdSA9IE9iamVjdChyLnVzZVJlZikoKSwgcyA9IE9iamVjdChyLnVzZVJlZikoKSwgZiA9IE9iamVjdChyLnVzZVJlZikoKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbyA9IGUgIT09IHMuY3VycmVudCB8fCB1LmN1cnJlbnQgPyBlKG4uZ2V0U3RhdGUoKSkgOiBmLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdS5jdXJyZW50ICYmIChlLm1lc3NhZ2UgKz0gIlxuVGhlIGVycm9yIG1heSBiZSBjb3JyZWxhdGVkIHdpdGggdGhpcyBwcmV2aW91cyBlcnJvcjpcbiIgKyB1LmN1cnJlbnQuc3RhY2sgKyAiXG5cbiIpLCAKICAgICAgICAgICAgICAgICAgICBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG0oKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHMuY3VycmVudCA9IGUsIGYuY3VycmVudCA9IG8sIHUuY3VycmVudCA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIH0pKSwgbSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gcy5jdXJyZW50KG4uZ2V0U3RhdGUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodChlLCBmLmN1cnJlbnQpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLmN1cnJlbnQgPSBlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LmN1cnJlbnQgPSBlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGkoe30pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbC5vblN0YXRlQ2hhbmdlID0gZSwgbC50cnlTdWJzY3JpYmUoKSwgZSgpLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwudHJ5VW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSksIFsgbiwgbCBdKSwgbzsKICAgICAgICAgICAgfShlLCBuLCBhLnN0b3JlLCBhLnN1YnNjcmlwdGlvbik7CiAgICAgICAgfTsKICAgIH0KICAgIHZhciBLLCBZID0gRygpLCBYID0gbigyNSk7CiAgICBLID0gWC51bnN0YWJsZV9iYXRjaGVkVXBkYXRlcywgaSA9IEs7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgIGUuZXhwb3J0cyA9IG4oNDIpOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgciA9IG4oMTcpLCBhID0gbigxMiksIG8gPSBuKDEpLCBpID0gbigxMyksIGwgPSB7CiAgICAgICAgbWF4RG93bmxvYWRDb3VudDogYS5hLmdldFZhbHVlKG8uYy5tYXhEb3dubG9hZENvdW50LCAyKSwKICAgICAgICBhdXRvU3RhcnQ6IGEuYS5nZXRWYWx1ZShvLmMuYXV0b1N0YXJ0LCAhMCksCiAgICAgICAgYXBwSWQ6IGEuYS5nZXRWYWx1ZShvLmMuYXBwSWQsICIiKSwKICAgICAgICBkb3dubG9hZE1vZGFsT3BlbjogITEsCiAgICAgICAgY29uZmlnTW9kYWxPcGVuOiAhMSwKICAgICAgICBsaW5rUG9ydGFsT3BlbjogITEsCiAgICAgICAgc2hhcmVMaW5rc1BvcnRhbE9wZW46ICExLAogICAgICAgIGVycm9yOiB2b2lkIDAKICAgIH07CiAgICB0LmEgPSBPYmplY3QoaS5iKSh7CiAgICAgICAgbmFtZTogImludGVyZmFjZSIsCiAgICAgICAgaW5pdGlhbFN0YXRlOiBsLAogICAgICAgIHJlZHVjZXJzOiB7CiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0KHIuYSkoe30sIGwpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gdC5wYXlsb2FkOwogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG4pLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImF1dG9TdGFydCI6CiAgICAgICAgICAgICAgICAgICAgICAgIGEuYS5zZXRWYWx1ZShvLmMuYXV0b1N0YXJ0LCBuLmF1dG9TdGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm1heERvd25sb2FkQ291bnQiOgogICAgICAgICAgICAgICAgICAgICAgICBhLmEuc2V0VmFsdWUoby5jLm1heERvd25sb2FkQ291bnQsIG4ubWF4RG93bmxvYWRDb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImFwcElkIjoKICAgICAgICAgICAgICAgICAgICAgICAgYS5hLnNldFZhbHVlKG8uYy5hcHBJZCwgbi5hcHBJZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpLCBlID0gT2JqZWN0LmFzc2lnbihPYmplY3Qoci5hKSh7fSwgZSksIHQucGF5bG9hZCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldEVycm9yOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5lcnJvciA9IHQucGF5bG9hZCwgZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgICByZXR1cm4gZSA9PT0gdDsKICAgIH0KICAgIGZ1bmN0aW9uIGEoZSwgdCwgbikgewogICAgICAgIGlmIChudWxsID09PSB0IHx8IG51bGwgPT09IG4gfHwgdC5sZW5ndGggIT09IG4ubGVuZ3RoKSByZXR1cm4gITE7CiAgICAgICAgZm9yICh2YXIgciA9IHQubGVuZ3RoLCBhID0gMDsgYSA8IHI7IGErKykgaWYgKCFlKHRbYV0sIG5bYV0pKSByZXR1cm4gITE7CiAgICAgICAgcmV0dXJuICEwOwogICAgfQogICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgICAgdmFyIHQgPSBBcnJheS5pc0FycmF5KGVbMF0pID8gZVswXSA6IGU7CiAgICAgICAgaWYgKCF0LmV2ZXJ5KChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlOwogICAgICAgIH0pKSkgewogICAgICAgICAgICB2YXIgbiA9IHQubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGU7CiAgICAgICAgICAgIH0pKS5qb2luKCIsICIpOwogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlNlbGVjdG9yIGNyZWF0b3JzIGV4cGVjdCBhbGwgaW5wdXQtc2VsZWN0b3JzIHRvIGJlIGZ1bmN0aW9ucywgaW5zdGVhZCByZWNlaXZlZCB0aGUgZm9sbG93aW5nIHR5cGVzOiBbIiArIG4gKyAiXSIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdDsKICAgIH0KICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gaTsKICAgIH0pKTsKICAgIHZhciBpID0gZnVuY3Rpb24oZSkgewogICAgICAgIGZvciAodmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoLCBuID0gQXJyYXkodCA+IDEgPyB0IC0gMSA6IDApLCByID0gMTsgciA8IHQ7IHIrKykgbltyIC0gMV0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IEFycmF5KHQpLCBhID0gMDsgYSA8IHQ7IGErKykgclthXSA9IGFyZ3VtZW50c1thXTsKICAgICAgICAgICAgdmFyIGkgPSAwLCBsID0gci5wb3AoKSwgdSA9IG8ociksIGMgPSBlLmFwcGx5KHZvaWQgMCwgWyBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpKyssIGwuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgICAgICAgICAgfSBdLmNvbmNhdChuKSksIHMgPSBlKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IHUubGVuZ3RoLCBuID0gMDsgbiA8IHQ7IG4rKykgZS5wdXNoKHVbbl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gYy5hcHBseShudWxsLCBlKTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICByZXR1cm4gcy5yZXN1bHRGdW5jID0gbCwgcy5kZXBlbmRlbmNpZXMgPSB1LCBzLnJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgICAgfSwgcy5yZXNldFJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaSA9IDA7CiAgICAgICAgICAgIH0sIHM7CiAgICAgICAgfTsKICAgIH0oKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogciwgbiA9IG51bGwsIG8gPSBudWxsOwogICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGEodCwgbiwgYXJndW1lbnRzKSB8fCAobyA9IGUuYXBwbHkobnVsbCwgYXJndW1lbnRzKSksIG4gPSBhcmd1bWVudHMsIG87CiAgICAgICAgfTsKICAgIH0pKTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgbi5kKHQsICJhIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBoOwogICAgfSkpLCBuLmQodCwgImMiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG07CiAgICB9KSk7CiAgICB2YXIgciA9IG4oNSksIGEgPSBuLm4ociksIG8gPSBuKDExKSwgaSA9IG4oMTcpLCBsID0gbigxKSwgdSA9IG4oMTMpLCBjID0gbigyMiksIHMgPSBuKDE5KSwgZiA9IG4oNiksIGQgPSBuKDIpLCBwID0gewogICAgICAgIGRvd25sb2FkSXRlbXM6IHt9LAogICAgICAgIHByb2Nlc3Npbmc6IDAKICAgIH0sIGcgPSBPYmplY3QodS5iKSh7CiAgICAgICAgbmFtZTogImRvd25sb2FkIiwKICAgICAgICBpbml0aWFsU3RhdGU6IHAsCiAgICAgICAgcmVkdWNlcnM6IHsKICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QoaS5hKSh7fSwgcCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHQucGF5bG9hZCwgciA9IG4uZnNJZCwgYSA9IG4ucHJvZ3Jlc3MsIG8gPSBlLmRvd25sb2FkSXRlbXNbcl07CiAgICAgICAgICAgICAgICByZXR1cm4gbyAmJiAoZS5kb3dubG9hZEl0ZW1zW3JdID0gT2JqZWN0LmFzc2lnbihvLCBhKSksIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB0LnBheWxvYWQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZSA9IE9iamVjdC5hc3NpZ24oZSwgbik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGUgZS5kb3dubG9hZEl0ZW1zW3QucGF5bG9hZC5mc0lkXSwgZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVxdWVzdERvd25sb2FkOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5wcm9jZXNzaW5nICs9IDEsIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1Y2Nlc3NEb3dubG9hZDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUucHJvY2Vzc2luZyAtPSAxLCBlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmYWlsdXJlRG93bmxvYWQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLnByb2Nlc3NpbmcgLT0gMSwgZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pLCBoID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBkLmEuYWxsRG93bmxvYWRzOwogICAgICAgICAgICBPYmplY3QudmFsdWVzKHQpLmZpbHRlcigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUucHJvZ3Jlc3Muc3RhdHVzID09PSBsLmIuaW5RdWV1ZWQ7CiAgICAgICAgICAgIH0pKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBlKG0odCkpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfTsKICAgIH0sIG0gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgdCA9IE9iamVjdChvLmEpKGEuYS5tYXJrKChmdW5jdGlvbiB0KG4sIHIpIHsKICAgICAgICAgICAgICAgIHZhciBvLCBpLCB1OwogICAgICAgICAgICAgICAgcmV0dXJuIGEuYS53cmFwKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICg7Oykgc3dpdGNoICh0LnByZXYgPSB0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQucHJldiA9IDAsIG8gPSBlLnByb2dyZXNzLCBpID0gT2JqZWN0KHMuYSkocigpKSwgIWUuaXNEaXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5zdGF0dXMgPSBsLmIuc3RvcHBlZCwgbihoKCkpLCB0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5zdGF0dXMgPSBsLmIuaW5RdWV1ZWQsIHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbihnLmFjdGlvbnMucmVxdWVzdERvd25sb2FkKCkpLCB0Lm5leHQgPSAxMywgT2JqZWN0KGMuZCkoZS5wYXRoKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSA9IHQuc2VudCwgZS51cmwgPSB1LnJlc3BvbnNlLnVybHNbMF0udXJsICsgIiZmaWxlbmFtZT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUuc2VydmVyRmlsZW5hbWUpLCAKICAgICAgICAgICAgICAgICAgICAgICAgby5zdGF0dXMgPSBsLmIuZG93bmxvYWRpbmcsIHQubmV4dCA9IDE4LCBPYmplY3QoYy5iKShlKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgICAgICBuKGcuYWN0aW9ucy5zdWNjZXNzRG93bmxvYWQoKSksIG4oaCgpKSwgdC5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldiA9IDIyLCB0LnQwID0gdC5jYXRjaCgwKSwgbihnLmFjdGlvbnMuZmFpbHVyZURvd25sb2FkKCkpLCBuKGYuYS5hY3Rpb25zLnNldEVycm9yKHQudDAgaW5zdGFuY2VvZiBFcnJvciA/IHQudDAgOiBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkodC50MCkpKSksIAogICAgICAgICAgICAgICAgICAgICAgICBuKGgoKSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgdCwgbnVsbCwgWyBbIDAsIDIyIF0gXSk7CiAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgIH0oKTsKICAgIH07CiAgICB0LmIgPSBnOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBuLmQodCwgImQiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHI7CiAgICB9KSksIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gYTsKICAgIH0pKSwgbi5kKHQsICJiIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBvOwogICAgfSkpLCBuLmQodCwgImMiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGk7CiAgICB9KSksIG4uZCh0LCAiZSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gbDsKICAgIH0pKTsKICAgIG4oNSksIG4oMTEpOwogICAgZnVuY3Rpb24gcigpIHsKICAgICAgICBmb3IgKHZhciBlLCB0ID0gYXJndW1lbnRzLmxlbmd0aCwgbiA9IG5ldyBBcnJheSh0KSwgciA9IDA7IHIgPCB0OyByKyspIG5bcl0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgKGUgPSBjb25zb2xlKS5sb2cuYXBwbHkoZSwgWyAiVXNlcnNjcmlwdCAoUmVhY3QgTW9kZSk6IiBdLmNvbmNhdChuKSk7CiAgICB9CiAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChlLCAwKTsKICAgICAgICB2YXIgdCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLCBuID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgbi5zb21lKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0ICE9PSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICB9KSkgJiYgKHQgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmLCBlKCkpOwogICAgICAgIH0pKTsKICAgICAgICByZXR1cm4gbi5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsKICAgICAgICAgICAgY2hpbGRMaXN0OiAhMCwKICAgICAgICAgICAgc3VidHJlZTogITAKICAgICAgICB9KSwgbjsKICAgIH0KICAgIHZhciBvID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5EaXNrU2NyZWVuOiAvKD88PXBhbnx5dW4pLmJhaWR1LmNvbVwvZGlzay8udGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZiksCiAgICAgICAgICAgIGluU2hhcmVQd2RTY3JlZW46IC8oPzw9cGFufHl1bikuYmFpZHUuY29tXC9zaGFyZS8udGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZiksCiAgICAgICAgICAgIGluU2hhcmVTY3JlZW46IC8oPzw9cGFufHl1bikuYmFpZHUuY29tXC9zLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKQogICAgICAgIH07CiAgICB9OwogICAgZnVuY3Rpb24gaShlKSB7CiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1hdGguZmxvb3IoZSkpOwogICAgfQogICAgZnVuY3Rpb24gbChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmb3JtIik7CiAgICAgICAgbi5tZXRob2QgPSAiUE9TVCIsIG4uYWN0aW9uID0gZSwgbi50YXJnZXQgPSAibmV3X3dpbmRvdyIsIE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwogICAgICAgICAgICByLnR5cGUgPSAiaGlkZGVuIiwgci5uYW1lID0gZSwgci52YWx1ZSA9IHRbZV0sIG4uYXBwZW5kQ2hpbGQocik7CiAgICAgICAgfSkpLCBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLCBuLnN1Ym1pdCgpLCBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG4pOwogICAgfQp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBuLmQodCwgImEiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGc7CiAgICB9KSk7CiAgICB2YXIgciA9IG4oMjcpLCBhID0gbigxMyksIG8gPSBuKDE0KSwgaSA9IG4oMzYpLCBsID0gbig2KSwgdSA9IG4oOCksIGMgPSBuKDIzKSwgcyA9IE9iamVjdChvLmMpKHsKICAgICAgICBkb3dubG9hZDogdS5iLnJlZHVjZXIsCiAgICAgICAgaW50ZXJmYWNlOiBsLmEucmVkdWNlciwKICAgICAgICBsaW5rOiBjLmEucmVkdWNlcgogICAgfSksIGYgPSBuKDIwKSwgZCA9IE9iamVjdChyLmEpKE9iamVjdChhLmMpKHsKICAgICAgICBzZXJpYWxpemFibGVDaGVjazogITEKICAgIH0pKTsKICAgIGYuYSAmJiBkLnB1c2goT2JqZWN0KGkuY3JlYXRlTG9nZ2VyKSh7CiAgICAgICAgZGlmZjogITAsCiAgICAgICAgY29sbGFwc2VkOiAhMAogICAgfSkpOwogICAgdmFyIHAgPSB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fQ09NUE9TRV9fID8gd2luZG93Ll9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX0NPTVBPU0VfXyh7CiAgICAgICAgdHJhY2U6ICEwLAogICAgICAgIHRyYWNlTGltaXQ6IDEwCiAgICB9KSA6IG8uZCwgZyA9IE9iamVjdChhLmEpKHsKICAgICAgICByZWR1Y2VyOiBzLAogICAgICAgIG1pZGRsZXdhcmU6IGQsCiAgICAgICAgZGV2VG9vbHM6ICExLAogICAgICAgIGVuaGFuY2VyczogWyBwIF0KICAgIH0pOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiByKGUsIHQsIG4sIHIsIGEsIG8sIGkpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgbCA9IGVbb10oaSksIHUgPSBsLnZhbHVlOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgbihlKTsKICAgICAgICB9CiAgICAgICAgbC5kb25lID8gdCh1KSA6IFByb21pc2UucmVzb2x2ZSh1KS50aGVuKHIsIGEpOwogICAgfQogICAgZnVuY3Rpb24gYShlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgdCA9IHRoaXMsIG4gPSBhcmd1bWVudHM7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSwgbykgewogICAgICAgICAgICAgICAgdmFyIGkgPSBlLmFwcGx5KHQsIG4pOwogICAgICAgICAgICAgICAgZnVuY3Rpb24gbChlKSB7CiAgICAgICAgICAgICAgICAgICAgcihpLCBhLCBvLCBsLCB1LCAibmV4dCIsIGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZnVuY3Rpb24gdShlKSB7CiAgICAgICAgICAgICAgICAgICAgcihpLCBhLCBvLCBsLCB1LCAidGhyb3ciLCBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGwodm9pZCAwKTsKICAgICAgICAgICAgfSkpOwogICAgICAgIH07CiAgICB9CiAgICBuLmQodCwgImEiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGE7CiAgICB9KSk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gcjsKICAgIH0pKSwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoImxvY2FsaG9zdCIpICYmIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCJodHRwczovL3Bhbi5iYWlkdS5jb20vZGlzay9ob21lIik7CiAgICB2YXIgciA9IHsKICAgICAgICBhZGRTdHlsZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBHTV9hZGRTdHlsZShlKTsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZVZhbHVlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIEdNX2RlbGV0ZVZhbHVlKGUpOwogICAgICAgIH0sCiAgICAgICAgbGlzdFZhbHVlczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIEdNX2xpc3RWYWx1ZXMoKTsKICAgICAgICB9LAogICAgICAgIGFkZFZhbHVlQ2hhbmdlTGlzdGVuZXI6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIEdNX2FkZFZhbHVlQ2hhbmdlTGlzdGVuZXIoZSwgdCk7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVWYWx1ZUNoYW5nZUxpc3RlbmVyOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIEdNX3JlbW92ZVZhbHVlQ2hhbmdlTGlzdGVuZXIoZSk7CiAgICAgICAgfSwKICAgICAgICBzZXRWYWx1ZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBHTV9zZXRWYWx1ZShlLCB0KTsKICAgICAgICB9LAogICAgICAgIGdldFZhbHVlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBHTV9nZXRWYWx1ZShlLCB0KTsKICAgICAgICB9LAogICAgICAgIGxvZzogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBHTV9sb2coZSk7CiAgICAgICAgfSwKICAgICAgICBnZXRSZXNvdXJjZVRleHQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIEdNX2dldFJlc291cmNlVGV4dChlKTsKICAgICAgICB9LAogICAgICAgIGdldFJlc291cmNlVVJMOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBHTV9nZXRSZXNvdXJjZVVSTChlKTsKICAgICAgICB9LAogICAgICAgIHJlZ2lzdGVyTWVudUNvbW1hbmQ6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgcmV0dXJuIEdNX3JlZ2lzdGVyTWVudUNvbW1hbmQoZSwgdCwgbik7CiAgICAgICAgfSwKICAgICAgICB1bnJlZ2lzdGVyTWVudUNvbW1hbmQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgR01fdW5yZWdpc3Rlck1lbnVDb21tYW5kKGUpOwogICAgICAgIH0sCiAgICAgICAgb3BlbkluVGFiOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIEdNX29wZW5JblRhYihlLCB0KTsKICAgICAgICB9LAogICAgICAgIHhtbEh0dHBSZXF1ZXN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBHTV94bWxodHRwUmVxdWVzdChlKTsKICAgICAgICB9LAogICAgICAgIGRvd25sb2FkOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IEdNX2Rvd25sb2FkKGUsIHQpIDogR01fZG93bmxvYWQoZSk7CiAgICAgICAgfSwKICAgICAgICBnZXRUYWI6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgR01fZ2V0VGFiKGUpOwogICAgICAgIH0sCiAgICAgICAgc2F2ZVRhYjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBHTV9zYXZlVGFiKGUpOwogICAgICAgIH0sCiAgICAgICAgZ2V0VGFiczogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBHTV9nZXRUYWJzKGUpOwogICAgICAgIH0sCiAgICAgICAgbm90aWZpY2F0aW9uOiBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICJzdHJpbmciID09IHR5cGVvZiBlID8gR01fbm90aWZpY2F0aW9uKGUsIHQsIG4sIHIpIDogR01fbm90aWZpY2F0aW9uKGUsIHQpOwogICAgICAgIH0sCiAgICAgICAgc2V0Q2xpcGJvYXJkOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICAgICAgICBtaW1ldHlwZTogInRleHQvcGxhaW4iCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIEdNX3NldENsaXBib2FyZChlLCB0KTsKICAgICAgICB9LAogICAgICAgIGluZm86IEdNX2luZm8KICAgIH07Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgIGZvciAodmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoLCBuID0gQXJyYXkodCA+IDEgPyB0IC0gMSA6IDApLCByID0gMTsgciA8IHQ7IHIrKykgbltyIC0gMV0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgdGhyb3cgRXJyb3IoIltJbW1lcl0gbWluaWZpZWQgZXJyb3IgbnI6ICIgKyBlICsgKG4ubGVuZ3RoID8gIiAiICsgbi5qb2luKCIsIikgOiAiIikgKyAiLiBGaW5kIHRoZSBmdWxsIGVycm9yIGF0OiBodHRwczovL2JpdC5seS8zY1hFS1dmIik7CiAgICB9CiAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICByZXR1cm4gISFlICYmICEhZVtIXTsKICAgIH0KICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgIHJldHVybiAhIWUgJiYgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKCFlIHx8ICJvYmplY3QiICE9IHR5cGVvZiBlKSByZXR1cm4gITE7CiAgICAgICAgICAgIHZhciB0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpOwogICAgICAgICAgICByZXR1cm4gIXQgfHwgdCA9PT0gT2JqZWN0LnByb3RvdHlwZTsKICAgICAgICB9KGUpIHx8IEFycmF5LmlzQXJyYXkoZSkgfHwgISFlW0JdIHx8ICEhZS5jb25zdHJ1Y3RvcltCXSB8fCBkKGUpIHx8IHAoZSkpOwogICAgfQogICAgZnVuY3Rpb24gaShlLCB0LCBuKSB7CiAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gITEpLCAwID09PSBsKGUpID8gKG4gPyBPYmplY3Qua2V5cyA6IFEpKGUpLmZvckVhY2goKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgbiAmJiAic3ltYm9sIiA9PSB0eXBlb2YgciB8fCB0KHIsIGVbcl0sIGUpOwogICAgICAgIH0pKSA6IGUuZm9yRWFjaCgoZnVuY3Rpb24obiwgcikgewogICAgICAgICAgICByZXR1cm4gdChyLCBuLCBlKTsKICAgICAgICB9KSk7CiAgICB9CiAgICBmdW5jdGlvbiBsKGUpIHsKICAgICAgICB2YXIgdCA9IGVbSF07CiAgICAgICAgcmV0dXJuIHQgPyB0LmkgPiAzID8gdC5pIC0gNCA6IHQuaSA6IEFycmF5LmlzQXJyYXkoZSkgPyAxIDogZChlKSA/IDIgOiBwKGUpID8gMyA6IDA7CiAgICB9CiAgICBmdW5jdGlvbiB1KGUsIHQpIHsKICAgICAgICByZXR1cm4gMiA9PT0gbChlKSA/IGUuaGFzKHQpIDogT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHQpOwogICAgfQogICAgZnVuY3Rpb24gYyhlLCB0KSB7CiAgICAgICAgcmV0dXJuIDIgPT09IGwoZSkgPyBlLmdldCh0KSA6IGVbdF07CiAgICB9CiAgICBmdW5jdGlvbiBzKGUsIHQsIG4pIHsKICAgICAgICB2YXIgciA9IGwoZSk7CiAgICAgICAgMiA9PT0gciA/IGUuc2V0KHQsIG4pIDogMyA9PT0gciA/IChlLmRlbGV0ZSh0KSwgZS5hZGQobikpIDogZVt0XSA9IG47CiAgICB9CiAgICBmdW5jdGlvbiBmKGUsIHQpIHsKICAgICAgICByZXR1cm4gZSA9PT0gdCA/IDAgIT09IGUgfHwgMSAvIGUgPT0gMSAvIHQgOiBlICE9IGUgJiYgdCAhPSB0OwogICAgfQogICAgZnVuY3Rpb24gZChlKSB7CiAgICAgICAgcmV0dXJuIFcgJiYgZSBpbnN0YW5jZW9mIE1hcDsKICAgIH0KICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgIHJldHVybiBWICYmIGUgaW5zdGFuY2VvZiBTZXQ7CiAgICB9CiAgICBmdW5jdGlvbiBnKGUpIHsKICAgICAgICByZXR1cm4gZS5vIHx8IGUudDsKICAgIH0KICAgIGZ1bmN0aW9uIGgoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZS5zbGljZSgpOwogICAgICAgIHZhciB0ID0gRyhlKTsKICAgICAgICBkZWxldGUgdFtIXTsKICAgICAgICBmb3IgKHZhciBuID0gUSh0KSwgciA9IDA7IHIgPCBuLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgIHZhciBhID0gbltyXSwgbyA9IHRbYV07CiAgICAgICAgICAgICExID09PSBvLndyaXRhYmxlICYmIChvLndyaXRhYmxlID0gITAsIG8uY29uZmlndXJhYmxlID0gITApLCAoby5nZXQgfHwgby5zZXQpICYmICh0W2FdID0gewogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IG8uZW51bWVyYWJsZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBlW2FdCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksIHQpOwogICAgfQogICAgZnVuY3Rpb24gbShlLCB0KSB7CiAgICAgICAgdihlKSB8fCBhKGUpIHx8ICFvKGUpIHx8IChsKGUpID4gMSAmJiAoZS5zZXQgPSBlLmFkZCA9IGUuY2xlYXIgPSBlLmRlbGV0ZSA9IGIpLCAKICAgICAgICBPYmplY3QuZnJlZXplKGUpLCB0ICYmIGkoZSwgKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIG0odCwgITApOwogICAgICAgIH0pLCAhMCkpOwogICAgfQogICAgZnVuY3Rpb24gYigpIHsKICAgICAgICByKDIpOwogICAgfQogICAgZnVuY3Rpb24gdihlKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gZSB8fCAib2JqZWN0IiAhPSB0eXBlb2YgZSB8fCBPYmplY3QuaXNGcm96ZW4oZSk7CiAgICB9CiAgICBmdW5jdGlvbiB5KGUpIHsKICAgICAgICB2YXIgdCA9IEtbZV07CiAgICAgICAgcmV0dXJuIHQgfHwgcigxOSwgZSksIHQ7CiAgICB9CiAgICBmdW5jdGlvbiB3KGUsIHQpIHsKICAgICAgICBLW2VdID0gdDsKICAgIH0KICAgIGZ1bmN0aW9uIGsoKSB7CiAgICAgICAgcmV0dXJuIEY7CiAgICB9CiAgICBmdW5jdGlvbiB4KGUsIHQpIHsKICAgICAgICB0ICYmICh5KCJQYXRjaGVzIiksIGUudSA9IFtdLCBlLnMgPSBbXSwgZS52ID0gdCk7CiAgICB9CiAgICBmdW5jdGlvbiBFKGUpIHsKICAgICAgICBTKGUpLCBlLnAuZm9yRWFjaChDKSwgZS5wID0gbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIFMoZSkgewogICAgICAgIGUgPT09IEYgJiYgKEYgPSBlLmwpOwogICAgfQogICAgZnVuY3Rpb24gTyhlKSB7CiAgICAgICAgcmV0dXJuIEYgPSB7CiAgICAgICAgICAgIHA6IFtdLAogICAgICAgICAgICBsOiBGLAogICAgICAgICAgICBoOiBlLAogICAgICAgICAgICBtOiAhMCwKICAgICAgICAgICAgXzogMAogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBDKGUpIHsKICAgICAgICB2YXIgdCA9IGVbSF07CiAgICAgICAgMCA9PT0gdC5pIHx8IDEgPT09IHQuaSA/IHQuaigpIDogdC5nID0gITA7CiAgICB9CiAgICBmdW5jdGlvbiBUKGUsIHQpIHsKICAgICAgICB0Ll8gPSB0LnAubGVuZ3RoOwogICAgICAgIHZhciBuID0gdC5wWzBdLCBhID0gdm9pZCAwICE9PSBlICYmIGUgIT09IG47CiAgICAgICAgcmV0dXJuIHQuaC5PIHx8IHkoIkVTNSIpLlModCwgZSwgYSksIGEgPyAobltIXS5QICYmIChFKHQpLCByKDQpKSwgbyhlKSAmJiAoZSA9IFAodCwgZSksIAogICAgICAgIHQubCB8fCBqKHQsIGUpKSwgdC51ICYmIHkoIlBhdGNoZXMiKS5NKG5bSF0sIGUsIHQudSwgdC5zKSkgOiBlID0gUCh0LCBuLCBbXSksIEUodCksIAogICAgICAgIHQudSAmJiB0LnYodC51LCB0LnMpLCBlICE9PSBxID8gZSA6IHZvaWQgMDsKICAgIH0KICAgIGZ1bmN0aW9uIFAoZSwgdCwgbikgewogICAgICAgIGlmICh2KHQpKSByZXR1cm4gdDsKICAgICAgICB2YXIgciA9IHRbSF07CiAgICAgICAgaWYgKCFyKSByZXR1cm4gaSh0LCAoZnVuY3Rpb24oYSwgbykgewogICAgICAgICAgICByZXR1cm4gXyhlLCByLCB0LCBhLCBvLCBuKTsKICAgICAgICB9KSwgITApLCB0OwogICAgICAgIGlmIChyLkEgIT09IGUpIHJldHVybiB0OwogICAgICAgIGlmICghci5QKSByZXR1cm4gaihlLCByLnQsICEwKSwgci50OwogICAgICAgIGlmICghci5JKSB7CiAgICAgICAgICAgIHIuSSA9ICEwLCByLkEuXy0tOwogICAgICAgICAgICB2YXIgYSA9IDQgPT09IHIuaSB8fCA1ID09PSByLmkgPyByLm8gPSBoKHIuaykgOiByLm87CiAgICAgICAgICAgIGkoYSwgKGZ1bmN0aW9uKHQsIG8pIHsKICAgICAgICAgICAgICAgIHJldHVybiBfKGUsIHIsIGEsIHQsIG8sIG4pOwogICAgICAgICAgICB9KSksIGooZSwgYSwgITEpLCBuICYmIGUudSAmJiB5KCJQYXRjaGVzIikuUihyLCBuLCBlLnUsIGUucyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByLm87CiAgICB9CiAgICBmdW5jdGlvbiBfKGUsIHQsIG4sIHIsIGksIGwpIHsKICAgICAgICBpZiAoYShpKSkgewogICAgICAgICAgICB2YXIgYyA9IFAoZSwgaSwgbCAmJiB0ICYmIDMgIT09IHQuaSAmJiAhdSh0LkQsIHIpID8gbC5jb25jYXQocikgOiB2b2lkIDApOwogICAgICAgICAgICBpZiAocyhuLCByLCBjKSwgIWEoYykpIHJldHVybjsKICAgICAgICAgICAgZS5tID0gITE7CiAgICAgICAgfQogICAgICAgIGlmIChvKGkpICYmICF2KGkpKSB7CiAgICAgICAgICAgIGlmICghZS5oLk4gJiYgZS5fIDwgMSkgcmV0dXJuOwogICAgICAgICAgICBQKGUsIGkpLCB0ICYmIHQuQS5sIHx8IGooZSwgaSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gaihlLCB0LCBuKSB7CiAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gITEpLCBlLmguTiAmJiBlLm0gJiYgbSh0LCBuKTsKICAgIH0KICAgIGZ1bmN0aW9uIEkoZSwgdCkgewogICAgICAgIHZhciBuID0gZVtIXTsKICAgICAgICByZXR1cm4gKG4gPyBnKG4pIDogZSlbdF07CiAgICB9CiAgICBmdW5jdGlvbiBOKGUpIHsKICAgICAgICBlLlAgfHwgKGUuUCA9ICEwLCBlLmwgJiYgTihlLmwpKTsKICAgIH0KICAgIGZ1bmN0aW9uIEEoZSkgewogICAgICAgIGUubyB8fCAoZS5vID0gaChlLnQpKTsKICAgIH0KICAgIGZ1bmN0aW9uIEQoZSwgdCwgbikgewogICAgICAgIHZhciByID0gZCh0KSA/IHkoIk1hcFNldCIpLlQodCwgbikgOiBwKHQpID8geSgiTWFwU2V0IikuRih0LCBuKSA6IGUuTyA/IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgdmFyIG4gPSBBcnJheS5pc0FycmF5KGUpLCByID0gewogICAgICAgICAgICAgICAgaTogbiA/IDEgOiAwLAogICAgICAgICAgICAgICAgQTogdCA/IHQuQSA6IGsoKSwKICAgICAgICAgICAgICAgIFA6ICExLAogICAgICAgICAgICAgICAgSTogITEsCiAgICAgICAgICAgICAgICBEOiB7fSwKICAgICAgICAgICAgICAgIGw6IHQsCiAgICAgICAgICAgICAgICB0OiBlLAogICAgICAgICAgICAgICAgazogbnVsbCwKICAgICAgICAgICAgICAgIG86IG51bGwsCiAgICAgICAgICAgICAgICBqOiBudWxsLAogICAgICAgICAgICAgICAgQzogITEKICAgICAgICAgICAgfSwgYSA9IHIsIG8gPSBZOwogICAgICAgICAgICBuICYmIChhID0gWyByIF0sIG8gPSBYKTsKICAgICAgICAgICAgdmFyIGkgPSBQcm94eS5yZXZvY2FibGUoYSwgbyksIGwgPSBpLnJldm9rZSwgdSA9IGkucHJveHk7CiAgICAgICAgICAgIHJldHVybiByLmsgPSB1LCByLmogPSBsLCB1OwogICAgICAgIH0odCwgbikgOiB5KCJFUzUiKS5KKHQsIG4pOwogICAgICAgIHJldHVybiAobiA/IG4uQSA6IGsoKSkucC5wdXNoKHIpLCByOwogICAgfQogICAgZnVuY3Rpb24gUihlKSB7CiAgICAgICAgcmV0dXJuIGEoZSkgfHwgcigyMiwgZSksIGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICBpZiAoIW8odCkpIHJldHVybiB0OwogICAgICAgICAgICB2YXIgbiwgciA9IHRbSF0sIGEgPSBsKHQpOwogICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgaWYgKCFyLlAgJiYgKHIuaSA8IDQgfHwgIXkoIkVTNSIpLksocikpKSByZXR1cm4gci50OwogICAgICAgICAgICAgICAgci5JID0gITAsIG4gPSBNKHQsIGEpLCByLkkgPSAhMTsKICAgICAgICAgICAgfSBlbHNlIG4gPSBNKHQsIGEpOwogICAgICAgICAgICByZXR1cm4gaShuLCAoZnVuY3Rpb24odCwgYSkgewogICAgICAgICAgICAgICAgciAmJiBjKHIudCwgdCkgPT09IGEgfHwgcyhuLCB0LCBlKGEpKTsKICAgICAgICAgICAgfSkpLCAzID09PSBhID8gbmV3IFNldChuKSA6IG47CiAgICAgICAgfShlKTsKICAgIH0KICAgIGZ1bmN0aW9uIE0oZSwgdCkgewogICAgICAgIHN3aXRjaCAodCkgewogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXR1cm4gbmV3IE1hcChlKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaChlKTsKICAgIH0KICAgIGZ1bmN0aW9uIHooKSB7CiAgICAgICAgZnVuY3Rpb24gZShlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gb1tlXTsKICAgICAgICAgICAgcmV0dXJuIG4gPyBuLmVudW1lcmFibGUgPSB0IDogb1tlXSA9IG4gPSB7CiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdCwKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzW0hdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBZLmdldCh0LCBlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXNbSF07CiAgICAgICAgICAgICAgICAgICAgWS5zZXQobiwgZSwgdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIG47CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHQoZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5sZW5ndGggLSAxOyB0ID49IDA7IHQtLSkgewogICAgICAgICAgICAgICAgdmFyIGEgPSBlW3RdW0hdOwogICAgICAgICAgICAgICAgaWYgKCFhLlApIHN3aXRjaCAoYS5pKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICByKGEpICYmIE4oYSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgbihhKSAmJiBOKGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG4oZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gZS50LCBuID0gZS5rLCByID0gUShuKSwgYSA9IHIubGVuZ3RoIC0gMTsgYSA+PSAwOyBhLS0pIHsKICAgICAgICAgICAgICAgIHZhciBvID0gclthXTsKICAgICAgICAgICAgICAgIGlmIChvICE9PSBIKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0W29dOwogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGkgJiYgIXUodCwgbykpIHJldHVybiAhMDsKICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IG5bb10sIGMgPSBsICYmIGxbSF07CiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPyBjLnQgIT09IGkgOiAhZihsLCBpKSkgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBzID0gISF0W0hdOwogICAgICAgICAgICByZXR1cm4gci5sZW5ndGggIT09IFEodCkubGVuZ3RoICsgKHMgPyAwIDogMSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgICAgICB2YXIgdCA9IGUuazsKICAgICAgICAgICAgaWYgKHQubGVuZ3RoICE9PSBlLnQubGVuZ3RoKSByZXR1cm4gITA7CiAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCB0Lmxlbmd0aCAtIDEpOwogICAgICAgICAgICByZXR1cm4gISghbiB8fCBuLmdldCk7CiAgICAgICAgfQogICAgICAgIHZhciBvID0ge307CiAgICAgICAgdygiRVM1IiwgewogICAgICAgICAgICBKOiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IEFycmF5LmlzQXJyYXkodCksIGEgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBHKG4pOwogICAgICAgICAgICAgICAgICAgIHQgJiYgZGVsZXRlIHIubGVuZ3RoLCBkZWxldGUgcltIXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gUShyKSwgbyA9IDA7IG8gPCBhLmxlbmd0aDsgbysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gYVtvXTsKICAgICAgICAgICAgICAgICAgICAgICAgcltpXSA9IGUoaSwgdCB8fCAhIXJbaV0uZW51bWVyYWJsZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gQXJyYXkobi5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobCwgciksIGw7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihuKSwgcik7CiAgICAgICAgICAgICAgICB9KHIsIHQpLCBvID0gewogICAgICAgICAgICAgICAgICAgIGk6IHIgPyA1IDogNCwKICAgICAgICAgICAgICAgICAgICBBOiBuID8gbi5BIDogaygpLAogICAgICAgICAgICAgICAgICAgIFA6ICExLAogICAgICAgICAgICAgICAgICAgIEk6ICExLAogICAgICAgICAgICAgICAgICAgIEQ6IHt9LAogICAgICAgICAgICAgICAgICAgIGw6IG4sCiAgICAgICAgICAgICAgICAgICAgdCwKICAgICAgICAgICAgICAgICAgICBrOiBhLAogICAgICAgICAgICAgICAgICAgIG86IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZzogITEsCiAgICAgICAgICAgICAgICAgICAgQzogITEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIEgsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbywKICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogITAKICAgICAgICAgICAgICAgIH0pLCBhOwogICAgICAgICAgICB9LAogICAgICAgICAgICBTOiBmdW5jdGlvbihlLCBuLCBvKSB7CiAgICAgICAgICAgICAgICBvID8gYShuKSAmJiBuW0hdLkEgPT09IGUgJiYgdChlLnApIDogKGUudSAmJiBmdW5jdGlvbiBlKHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiAib2JqZWN0IiA9PSB0eXBlb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRbSF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG4udCwgbyA9IG4uaywgbCA9IG4uRCwgYyA9IG4uaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg0ID09PSBjKSBpKG8sIChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAhPT0gSCAmJiAodm9pZCAwICE9PSBhW3RdIHx8IHUoYSwgdCkgPyBsW3RdIHx8IGUob1t0XSkgOiAobFt0XSA9ICEwLCBOKG4pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksIGkoYSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IG9bZV0gfHwgdShvLCBlKSB8fCAobFtlXSA9ICExLCBOKG4pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsgZWxzZSBpZiAoNSA9PT0gYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKG4pICYmIChOKG4pLCBsLmxlbmd0aCA9ICEwKSwgby5sZW5ndGggPCBhLmxlbmd0aCkgZm9yICh2YXIgcyA9IG8ubGVuZ3RoOyBzIDwgYS5sZW5ndGg7IHMrKykgbFtzXSA9ICExOyBlbHNlIGZvciAodmFyIGYgPSBhLmxlbmd0aDsgZiA8IG8ubGVuZ3RoOyBmKyspIGxbZl0gPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkID0gTWF0aC5taW4oby5sZW5ndGgsIGEubGVuZ3RoKSwgcCA9IDA7IHAgPCBkOyBwKyspIHZvaWQgMCA9PT0gbFtwXSAmJiBlKG9bcF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfShlLnBbMF0pLCB0KGUucCkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBLOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gNCA9PT0gZS5pID8gbihlKSA6IHIoZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gaGU7CiAgICB9KSksIG4uZCh0LCAiYiIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdmU7CiAgICB9KSksIG4uZCh0LCAiYyIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gZ2U7CiAgICB9KSk7CiAgICB2YXIgTCwgRiwgVSA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbCgieCIpLCBXID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIE1hcCwgViA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTZXQsICQgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgUHJveHkgJiYgdm9pZCAwICE9PSBQcm94eS5yZXZvY2FibGUgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIFJlZmxlY3QsIHEgPSBVID8gU3ltYm9sKCJpbW1lci1ub3RoaW5nIikgOiAoKEwgPSB7fSlbImltbWVyLW5vdGhpbmciXSA9ICEwLCAKICAgIEwpLCBCID0gVSA/IFN5bWJvbCgiaW1tZXItZHJhZnRhYmxlIikgOiAiX18kaW1tZXJfZHJhZnRhYmxlIiwgSCA9IFUgPyBTeW1ib2woImltbWVyLXN0YXRlIikgOiAiX18kaW1tZXJfc3RhdGUiLCBRID0gKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLml0ZXJhdG9yLCAKICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBSZWZsZWN0ICYmIFJlZmxlY3Qub3duS2V5cyA/IFJlZmxlY3Qub3duS2V5cyA6IHZvaWQgMCAhPT0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSkpOwogICAgfSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKSwgRyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIHx8IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IHt9OwogICAgICAgIHJldHVybiBRKGUpLmZvckVhY2goKGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgdFtuXSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgbik7CiAgICAgICAgfSkpLCB0OwogICAgfSwgSyA9IHt9LCBZID0gewogICAgICAgIGdldDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBpZiAodCA9PT0gSCkgcmV0dXJuIGU7CiAgICAgICAgICAgIHZhciBuID0gZyhlKTsKICAgICAgICAgICAgaWYgKCF1KG4sIHQpKSByZXR1cm4gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgaWYgKG4gaW4gdCkgZm9yICh2YXIgciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KTsgcjsgKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEsIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsIG4pOwogICAgICAgICAgICAgICAgICAgIGlmIChvKSByZXR1cm4gInZhbHVlIiBpbiBvID8gby52YWx1ZSA6IG51bGwgPT09IChhID0gby5nZXQpIHx8IHZvaWQgMCA9PT0gYSA/IHZvaWQgMCA6IGEuY2FsbChlLmspOwogICAgICAgICAgICAgICAgICAgIHIgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yocik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0oZSwgbiwgdCk7CiAgICAgICAgICAgIHZhciByID0gblt0XTsKICAgICAgICAgICAgcmV0dXJuIGUuSSB8fCAhbyhyKSA/IHIgOiByID09PSBJKGUudCwgdCkgPyAoQShlKSwgZS5vW3RdID0gRChlLkEuaCwgciwgZSkpIDogcjsKICAgICAgICB9LAogICAgICAgIGhhczogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICByZXR1cm4gdCBpbiBnKGUpOwogICAgICAgIH0sCiAgICAgICAgb3duS2V5czogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKGcoZSkpOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgIGlmIChlLkRbdF0gPSAhMCwgIWUuUCkgewogICAgICAgICAgICAgICAgaWYgKGYobiwgSShnKGUpLCB0KSkgJiYgdm9pZCAwICE9PSBuKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICBBKGUpLCBOKGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlLm9bdF0gPSBuLCAhMDsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZVByb3BlcnR5OiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IEkoZS50LCB0KSB8fCB0IGluIGUudCA/IChlLkRbdF0gPSAhMSwgQShlKSwgTihlKSkgOiBkZWxldGUgZS5EW3RdLCAKICAgICAgICAgICAgZS5vICYmIGRlbGV0ZSBlLm9bdF0sICEwOwogICAgICAgIH0sCiAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gZyhlKSwgciA9IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpOwogICAgICAgICAgICByZXR1cm4gciA/IHsKICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogMSAhPT0gZS5pIHx8ICJsZW5ndGgiICE9PSB0LAogICAgICAgICAgICAgICAgZW51bWVyYWJsZTogci5lbnVtZXJhYmxlLAogICAgICAgICAgICAgICAgdmFsdWU6IG5bdF0KICAgICAgICAgICAgfSA6IHI7CiAgICAgICAgfSwKICAgICAgICBkZWZpbmVQcm9wZXJ0eTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHIoMTEpOwogICAgICAgIH0sCiAgICAgICAgZ2V0UHJvdG90eXBlT2Y6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnQpOwogICAgICAgIH0sCiAgICAgICAgc2V0UHJvdG90eXBlT2Y6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByKDEyKTsKICAgICAgICB9CiAgICB9LCBYID0ge307CiAgICBpKFksIChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgWFtlXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzWzBdID0gYXJndW1lbnRzWzBdWzBdLCB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgIH0pKSwgWC5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gWS5kZWxldGVQcm9wZXJ0eS5jYWxsKHRoaXMsIGVbMF0sIHQpOwogICAgfSwgWC5zZXQgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIFkuc2V0LmNhbGwodGhpcywgZVswXSwgdCwgbiwgZVswXSk7CiAgICB9OwogICAgdmFyIFogPSBuZXcgKGZ1bmN0aW9uKCkgewogICAgICAgIGZ1bmN0aW9uIGUoZSkgewogICAgICAgICAgICB0aGlzLk8gPSAkLCB0aGlzLk4gPSAhMSwgImJvb2xlYW4iID09IHR5cGVvZiAobnVsbCA9PSBlID8gdm9pZCAwIDogZS51c2VQcm94aWVzKSAmJiB0aGlzLnNldFVzZVByb3hpZXMoZS51c2VQcm94aWVzKSwgCiAgICAgICAgICAgICJib29sZWFuIiA9PSB0eXBlb2YgKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuYXV0b0ZyZWV6ZSkgJiYgdGhpcy5zZXRBdXRvRnJlZXplKGUuYXV0b0ZyZWV6ZSksIAogICAgICAgICAgICB0aGlzLnByb2R1Y2UgPSB0aGlzLnByb2R1Y2UuYmluZCh0aGlzKSwgdGhpcy5wcm9kdWNlV2l0aFBhdGNoZXMgPSB0aGlzLnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKHRoaXMpOwogICAgICAgIH0KICAgICAgICB2YXIgdCA9IGUucHJvdG90eXBlOwogICAgICAgIHJldHVybiB0LnByb2R1Y2UgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmICJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpIHsKICAgICAgICAgICAgICAgIHZhciBhID0gdDsKICAgICAgICAgICAgICAgIHQgPSBlOwogICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXM7CiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gYSk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IGFyZ3VtZW50cy5sZW5ndGgsIG8gPSBBcnJheShyID4gMSA/IHIgLSAxIDogMCksIGwgPSAxOyBsIDwgcjsgbCsrKSBvW2wgLSAxXSA9IGFyZ3VtZW50c1tsXTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5wcm9kdWNlKGUsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHIgPSB0KS5jYWxsLmFwcGx5KHIsIFsgbiwgZSBdLmNvbmNhdChvKSk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbDsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQgJiYgcig2KSwgdm9pZCAwICE9PSBuICYmICJmdW5jdGlvbiIgIT0gdHlwZW9mIG4gJiYgcig3KSwgCiAgICAgICAgICAgIG8oZSkpIHsKICAgICAgICAgICAgICAgIHZhciB1ID0gTyh0aGlzKSwgYyA9IEQodGhpcywgZSwgdm9pZCAwKSwgcyA9ICEwOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBsID0gdChjKSwgcyA9ICExOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICBzID8gRSh1KSA6IFModSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFByb21pc2UgJiYgbCBpbnN0YW5jZW9mIFByb21pc2UgPyBsLnRoZW4oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geCh1LCBuKSwgVChlLCB1KTsKICAgICAgICAgICAgICAgIH0pLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IEUodSksIGU7CiAgICAgICAgICAgICAgICB9KSkgOiAoeCh1LCBuKSwgVChsLCB1KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFlIHx8ICJvYmplY3QiICE9IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgICBpZiAoKGwgPSB0KGUpKSA9PT0gcSkgcmV0dXJuOwogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbCAmJiAobCA9IGUpLCB0aGlzLk4gJiYgbShsLCAhMCksIGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcigyMSwgZSk7CiAgICAgICAgfSwgdC5wcm9kdWNlV2l0aFBhdGNoZXMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciBuLCByLCBhID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgPyBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IEFycmF5KG4gPiAxID8gbiAtIDEgOiAwKSwgbyA9IDE7IG8gPCBuOyBvKyspIHJbbyAtIDFdID0gYXJndW1lbnRzW29dOwogICAgICAgICAgICAgICAgcmV0dXJuIGEucHJvZHVjZVdpdGhQYXRjaGVzKHQsIChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodm9pZCAwLCBbIHQgXS5jb25jYXQocikpOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9IDogWyB0aGlzLnByb2R1Y2UoZSwgdCwgKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIG4gPSBlLCByID0gdDsKICAgICAgICAgICAgfSkpLCBuLCByIF07CiAgICAgICAgfSwgdC5jcmVhdGVEcmFmdCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgbyhlKSB8fCByKDgpLCBhKGUpICYmIChlID0gUihlKSk7CiAgICAgICAgICAgIHZhciB0ID0gTyh0aGlzKSwgbiA9IEQodGhpcywgZSwgdm9pZCAwKTsKICAgICAgICAgICAgcmV0dXJuIG5bSF0uQyA9ICEwLCBTKHQpLCBuOwogICAgICAgIH0sIHQuZmluaXNoRHJhZnQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gKGUgJiYgZVtIXSkuQTsKICAgICAgICAgICAgcmV0dXJuIHgobiwgdCksIFQodm9pZCAwLCBuKTsKICAgICAgICB9LCB0LnNldEF1dG9GcmVlemUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHRoaXMuTiA9IGU7CiAgICAgICAgfSwgdC5zZXRVc2VQcm94aWVzID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICBlICYmICEkICYmIHIoMjApLCB0aGlzLk8gPSBlOwogICAgICAgIH0sIHQuYXBwbHlQYXRjaGVzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgZm9yIChuID0gdC5sZW5ndGggLSAxOyBuID49IDA7IG4tLSkgewogICAgICAgICAgICAgICAgdmFyIHIgPSB0W25dOwogICAgICAgICAgICAgICAgaWYgKDAgPT09IHIucGF0aC5sZW5ndGggJiYgInJlcGxhY2UiID09PSByLm9wKSB7CiAgICAgICAgICAgICAgICAgICAgZSA9IHIudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG8gPSB5KCJQYXRjaGVzIikuJDsKICAgICAgICAgICAgcmV0dXJuIGEoZSkgPyBvKGUsIHQpIDogdGhpcy5wcm9kdWNlKGUsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbyhlLCB0LnNsaWNlKG4gKyAxKSk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICB9LCBlOwogICAgfSgpKSwgSiA9IFoucHJvZHVjZSwgZWUgPSAoWi5wcm9kdWNlV2l0aFBhdGNoZXMuYmluZChaKSwgWi5zZXRBdXRvRnJlZXplLmJpbmQoWiksIAogICAgWi5zZXRVc2VQcm94aWVzLmJpbmQoWiksIFouYXBwbHlQYXRjaGVzLmJpbmQoWiksIFouY3JlYXRlRHJhZnQuYmluZChaKSwgWi5maW5pc2hEcmFmdC5iaW5kKFopLCAKICAgIEopLCB0ZSA9IG4oMTQpOwogICAgbig3KTsKICAgIGZ1bmN0aW9uIG5lKGUpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICB2YXIgbiA9IHQuZGlzcGF0Y2gsIHIgPSB0LmdldFN0YXRlOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgYSA/IGEobiwgciwgZSkgOiB0KGEpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfTsKICAgICAgICB9OwogICAgfQogICAgdmFyIHJlID0gbmUoKTsKICAgIHJlLndpdGhFeHRyYUFyZ3VtZW50ID0gbmU7CiAgICB2YXIgYWUgPSByZTsKICAgIGZ1bmN0aW9uIG9lKCkgewogICAgICAgIHJldHVybiAob2UgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiBuKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwgcikgJiYgKGVbcl0gPSBuW3JdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gaWUoZSkgewogICAgICAgIHJldHVybiAoaWUgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7CiAgICAgICAgfSkoZSk7CiAgICB9CiAgICBmdW5jdGlvbiBsZShlLCB0KSB7CiAgICAgICAgcmV0dXJuIChsZSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBlLl9fcHJvdG9fXyA9IHQsIGU7CiAgICAgICAgfSkoZSwgdCk7CiAgICB9CiAgICBmdW5jdGlvbiB1ZSgpIHsKICAgICAgICBpZiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIFJlZmxlY3QgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gITE7CiAgICAgICAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiAhMTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgUHJveHkpIHJldHVybiAhMDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChEYXRlLCBbXSwgKGZ1bmN0aW9uKCkge30pKSksIAogICAgICAgICAgICAhMDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjZShlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIChjZSA9IHVlKCkgPyBSZWZsZWN0LmNvbnN0cnVjdCA6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgdmFyIHIgPSBbIG51bGwgXTsKICAgICAgICAgICAgci5wdXNoLmFwcGx5KHIsIHQpOwogICAgICAgICAgICB2YXIgYSA9IG5ldyAoRnVuY3Rpb24uYmluZC5hcHBseShlLCByKSk7CiAgICAgICAgICAgIHJldHVybiBuICYmIGxlKGEsIG4ucHJvdG90eXBlKSwgYTsKICAgICAgICB9KS5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gc2UoZSkgewogICAgICAgIHZhciB0ID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgTWFwID8gbmV3IE1hcCA6IHZvaWQgMDsKICAgICAgICByZXR1cm4gKHNlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAobnVsbCA9PT0gZSB8fCAhZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIC0xICE9PSBGdW5jdGlvbi50b1N0cmluZy5jYWxsKGUpLmluZGV4T2YoIltuYXRpdmUgY29kZV0iKTsKICAgICAgICAgICAgfShlKSkgcmV0dXJuIGU7CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0KSB7CiAgICAgICAgICAgICAgICBpZiAodC5oYXMoZSkpIHJldHVybiB0LmdldChlKTsKICAgICAgICAgICAgICAgIHQuc2V0KGUsIG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY2UoZSwgYXJndW1lbnRzLCBpZSh0aGlzKS5jb25zdHJ1Y3Rvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSwgewogICAgICAgICAgICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMSwKICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgbGUobiwgZSk7CiAgICAgICAgfSkoZSk7CiAgICB9CiAgICB2YXIgZmUgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gPyB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fQ09NUE9TRV9fIDogZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKDAgIT09IGFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiAib2JqZWN0IiA9PSB0eXBlb2YgYXJndW1lbnRzWzBdID8gdGUuZCA6IHRlLmQuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgIH07CiAgICBmdW5jdGlvbiBkZShlKSB7CiAgICAgICAgaWYgKCJvYmplY3QiICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IGUpIHJldHVybiAhMTsKICAgICAgICBmb3IgKHZhciB0ID0gZTsgbnVsbCAhPT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpOyApIHQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7CiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSA9PT0gdDsKICAgIH0KICAgIHZhciBwZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCwgbjsKICAgICAgICBmdW5jdGlvbiByKCkgewogICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICAgICAgfQogICAgICAgIG4gPSBlLCAodCA9IHIpLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLCB0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHQsIAogICAgICAgIHQuX19wcm90b19fID0gbjsKICAgICAgICB2YXIgYSA9IHIucHJvdG90eXBlOwogICAgICAgIHJldHVybiBhLmNvbmNhdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBmb3IgKHZhciB0LCBuID0gYXJndW1lbnRzLmxlbmd0aCwgYSA9IG5ldyBBcnJheShuKSwgbyA9IDA7IG8gPCBuOyBvKyspIGFbb10gPSBhcmd1bWVudHNbb107CiAgICAgICAgICAgIHJldHVybiBjZShyLCAodCA9IGUucHJvdG90eXBlLmNvbmNhdCkuY2FsbC5hcHBseSh0LCBbIHRoaXMgXS5jb25jYXQoYSkpKTsKICAgICAgICB9LCBhLnByZXBlbmQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgZm9yICh2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGgsIHQgPSBuZXcgQXJyYXkoZSksIG4gPSAwOyBuIDwgZTsgbisrKSB0W25dID0gYXJndW1lbnRzW25dOwogICAgICAgICAgICByZXR1cm4gMSA9PT0gdC5sZW5ndGggJiYgQXJyYXkuaXNBcnJheSh0WzBdKSA/IGNlKHIsIHRbMF0uY29uY2F0KHRoaXMpKSA6IGNlKHIsIHQuY29uY2F0KHRoaXMpKTsKICAgICAgICB9LCByOwogICAgfShzZShBcnJheSkpOwogICAgZnVuY3Rpb24gZ2UoZSkgewogICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHt9KTsKICAgICAgICB2YXIgdCA9IGUsIG4gPSB0LnRodW5rLCByID0gdm9pZCAwID09PSBuIHx8IG4sIGEgPSAodC5pbW11dGFibGVDaGVjaywgdC5zZXJpYWxpemFibGVDaGVjaywgCiAgICAgICAgbmV3IHBlKTsKICAgICAgICByZXR1cm4gciAmJiAoIWZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICJib29sZWFuIiA9PSB0eXBlb2YgZTsKICAgICAgICB9KHIpID8gYS5wdXNoKGFlLndpdGhFeHRyYUFyZ3VtZW50KHIuZXh0cmFBcmd1bWVudCkpIDogYS5wdXNoKGFlKSksIGE7CiAgICB9CiAgICBmdW5jdGlvbiBoZShlKSB7CiAgICAgICAgdmFyIHQsIG4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBnZShlKTsKICAgICAgICB9LCByID0gZSB8fCB7fSwgYSA9IHIucmVkdWNlciwgbyA9IHZvaWQgMCA9PT0gYSA/IHZvaWQgMCA6IGEsIGkgPSByLm1pZGRsZXdhcmUsIGwgPSB2b2lkIDAgPT09IGkgPyBuKCkgOiBpLCB1ID0gci5kZXZUb29scywgYyA9IHZvaWQgMCA9PT0gdSB8fCB1LCBzID0gci5wcmVsb2FkZWRTdGF0ZSwgZiA9IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMsIGQgPSByLmVuaGFuY2VycywgcCA9IHZvaWQgMCA9PT0gZCA/IHZvaWQgMCA6IGQ7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIG8pIHQgPSBvOyBlbHNlIHsKICAgICAgICAgICAgaWYgKCFkZShvKSkgdGhyb3cgbmV3IEVycm9yKCcicmVkdWNlciIgaXMgYSByZXF1aXJlZCBhcmd1bWVudCwgYW5kIG11c3QgYmUgYSBmdW5jdGlvbiBvciBhbiBvYmplY3Qgb2YgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHBhc3NlZCB0byBjb21iaW5lUmVkdWNlcnMnKTsKICAgICAgICAgICAgdCA9IE9iamVjdCh0ZS5jKShvKTsKICAgICAgICB9CiAgICAgICAgdmFyIGcgPSB0ZS5hLmFwcGx5KHZvaWQgMCwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbCA/IGwobikgOiBsKSwgaCA9IHRlLmQ7CiAgICAgICAgYyAmJiAoaCA9IGZlKG9lKHsKICAgICAgICAgICAgdHJhY2U6ICExCiAgICAgICAgfSwgIm9iamVjdCIgPT0gdHlwZW9mIGMgJiYgYykpKTsKICAgICAgICB2YXIgbSA9IFsgZyBdOwogICAgICAgIEFycmF5LmlzQXJyYXkocCkgPyBtID0gWyBnIF0uY29uY2F0KHApIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgcCAmJiAobSA9IHAobSkpOwogICAgICAgIHZhciBiID0gaC5hcHBseSh2b2lkIDAsIG0pOwogICAgICAgIHJldHVybiBPYmplY3QodGUuZSkodCwgZiwgYik7CiAgICB9CiAgICBmdW5jdGlvbiBtZShlLCB0KSB7CiAgICAgICAgZnVuY3Rpb24gbigpIHsKICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gdC5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICBpZiAoIW4pIHRocm93IG5ldyBFcnJvcigicHJlcGFyZUFjdGlvbiBkaWQgbm90IHJldHVybiBhbiBvYmplY3QiKTsKICAgICAgICAgICAgICAgIHJldHVybiBvZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogZSwKICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBuLnBheWxvYWQKICAgICAgICAgICAgICAgIH0sICJtZXRhIiBpbiBuICYmIHsKICAgICAgICAgICAgICAgICAgICBtZXRhOiBuLm1ldGEKICAgICAgICAgICAgICAgIH0sIHt9LCAiZXJyb3IiIGluIG4gJiYgewogICAgICAgICAgICAgICAgICAgIGVycm9yOiBuLmVycm9yCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdHlwZTogZSwKICAgICAgICAgICAgICAgIHBheWxvYWQ6IGFyZ3VtZW50cy5sZW5ndGggPD0gMCA/IHZvaWQgMCA6IGFyZ3VtZW50c1swXQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbi50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gIiIgKyBlOwogICAgICAgIH0sIG4udHlwZSA9IGUsIG4ubWF0Y2ggPSBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPT09IGU7CiAgICAgICAgfSwgbjsKICAgIH0KICAgIGZ1bmN0aW9uIGJlKGUpIHsKICAgICAgICB2YXIgdCwgbiA9IHt9LCByID0gW10sIGEgPSB7CiAgICAgICAgICAgIGFkZENhc2U6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHZhciByID0gInN0cmluZyIgPT0gdHlwZW9mIGUgPyBlIDogZS50eXBlOwogICAgICAgICAgICAgICAgaWYgKHIgaW4gbikgdGhyb3cgbmV3IEVycm9yKCJhZGRDYXNlIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0d28gcmVkdWNlcnMgZm9yIHRoZSBzYW1lIGFjdGlvbiB0eXBlIik7CiAgICAgICAgICAgICAgICByZXR1cm4gbltyXSA9IHQsIGE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZE1hdGNoZXI6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiByLnB1c2goewogICAgICAgICAgICAgICAgICAgIG1hdGNoZXI6IGUsCiAgICAgICAgICAgICAgICAgICAgcmVkdWNlcjogdAogICAgICAgICAgICAgICAgfSksIGE7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZERlZmF1bHRDYXNlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCA9IGUsIGE7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiBlKGEpLCBbIG4sIHIsIHQgXTsKICAgIH0KICAgIGZ1bmN0aW9uIHZlKGUpIHsKICAgICAgICB2YXIgdCA9IGUubmFtZSwgbiA9IGUuaW5pdGlhbFN0YXRlOwogICAgICAgIGlmICghdCkgdGhyb3cgbmV3IEVycm9yKCJgbmFtZWAgaXMgYSByZXF1aXJlZCBvcHRpb24gZm9yIGNyZWF0ZVNsaWNlIik7CiAgICAgICAgdmFyIHIgPSBlLnJlZHVjZXJzIHx8IHt9LCBpID0gdm9pZCAwID09PSBlLmV4dHJhUmVkdWNlcnMgPyBbXSA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUuZXh0cmFSZWR1Y2VycyA/IGJlKGUuZXh0cmFSZWR1Y2VycykgOiBbIGUuZXh0cmFSZWR1Y2VycyBdLCBsID0gaVswXSwgdSA9IHZvaWQgMCA9PT0gbCA/IHt9IDogbCwgYyA9IGlbMV0sIHMgPSB2b2lkIDAgPT09IGMgPyBbXSA6IGMsIGYgPSBpWzJdLCBkID0gdm9pZCAwID09PSBmID8gdm9pZCAwIDogZiwgcCA9IE9iamVjdC5rZXlzKHIpLCBnID0ge30sIGggPSB7fSwgbSA9IHt9OwogICAgICAgIHAuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgbiwgYSwgbyA9IHJbZV0sIGkgPSB0ICsgIi8iICsgZTsKICAgICAgICAgICAgInJlZHVjZXIiIGluIG8gPyAobiA9IG8ucmVkdWNlciwgYSA9IG8ucHJlcGFyZSkgOiBuID0gbywgZ1tlXSA9IG4sIGhbaV0gPSBuLCBtW2VdID0gYSA/IG1lKGksIGEpIDogbWUoaSk7CiAgICAgICAgfSkpOwogICAgICAgIHZhciBiID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSBbXSk7CiAgICAgICAgICAgIHZhciBpID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCA/IGJlKHQpIDogWyB0LCBuLCByIF0sIGwgPSBpWzBdLCB1ID0gaVsxXSwgYyA9IGlbMl07CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBlKTsKICAgICAgICAgICAgICAgIHZhciByID0gWyBsW24udHlwZV0gXS5jb25jYXQodS5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGUubWF0Y2hlcikobik7CiAgICAgICAgICAgICAgICB9KSkubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucmVkdWNlcjsKICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gMCA9PT0gci5maWx0ZXIoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFlOwogICAgICAgICAgICAgICAgfSkpLmxlbmd0aCAmJiAociA9IFsgYyBdKSwgci5yZWR1Y2UoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYShlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0KGUsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gciA/IGUgOiByOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvKGUpKSByZXR1cm4gZWUoZSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0KGUsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdChlLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkgdGhyb3cgRXJyb3IoIkEgY2FzZSByZWR1Y2VyIG9uIGEgbm9uLWRyYWZ0YWJsZSB2YWx1ZSBtdXN0IG5vdCByZXR1cm4gdW5kZWZpbmVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgIH0pLCB0KTsKICAgICAgICAgICAgfTsKICAgICAgICB9KG4sIG9lKHt9LCB1LCB7fSwgaCksIHMsIGQpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5hbWU6IHQsCiAgICAgICAgICAgIHJlZHVjZXI6IGIsCiAgICAgICAgICAgIGFjdGlvbnM6IG0sCiAgICAgICAgICAgIGNhc2VSZWR1Y2VyczogZwogICAgICAgIH07CiAgICB9CiAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIChTeW1ib2wuaXRlcmF0b3IgfHwgKFN5bWJvbC5pdGVyYXRvciA9IFN5bWJvbCgiU3ltYm9sLml0ZXJhdG9yIikpKSwgCiAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIChTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCAoU3ltYm9sLmFzeW5jSXRlcmF0b3IgPSBTeW1ib2woIlN5bWJvbC5hc3luY0l0ZXJhdG9yIikpKTsKICAgIHooKTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgbi5kKHQsICJhIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBtOwogICAgfSkpLCBuLmQodCwgImIiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGY7CiAgICB9KSksIG4uZCh0LCAiYyIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gYzsKICAgIH0pKSwgbi5kKHQsICJkIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBoOwogICAgfSkpLCBuLmQodCwgImUiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGw7CiAgICB9KSk7CiAgICB2YXIgciA9IG4oMjkpLCBhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KS5zcGxpdCgiIikuam9pbigiLiIpOwogICAgfSwgbyA9IHsKICAgICAgICBJTklUOiAiQEByZWR1eC9JTklUIiArIGEoKSwKICAgICAgICBSRVBMQUNFOiAiQEByZWR1eC9SRVBMQUNFIiArIGEoKSwKICAgICAgICBQUk9CRV9VTktOT1dOX0FDVElPTjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiAiQEByZWR1eC9QUk9CRV9VTktOT1dOX0FDVElPTiIgKyBhKCk7CiAgICAgICAgfQogICAgfTsKICAgIGZ1bmN0aW9uIGkoZSkgewogICAgICAgIGlmICgib2JqZWN0IiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlKSByZXR1cm4gITE7CiAgICAgICAgZm9yICh2YXIgdCA9IGU7IG51bGwgIT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KTsgKSB0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpOwogICAgICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IHQ7CiAgICB9CiAgICBmdW5jdGlvbiBsKGUsIHQsIG4pIHsKICAgICAgICB2YXIgYTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBuIHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYXJndW1lbnRzWzNdKSB0aHJvdyBuZXcgRXJyb3IoIkl0IGxvb2tzIGxpa2UgeW91IGFyZSBwYXNzaW5nIHNldmVyYWwgc3RvcmUgZW5oYW5jZXJzIHRvIGNyZWF0ZVN0b3JlKCkuIFRoaXMgaXMgbm90IHN1cHBvcnRlZC4gSW5zdGVhZCwgY29tcG9zZSB0aGVtIHRvZ2V0aGVyIHRvIGEgc2luZ2xlIGZ1bmN0aW9uLiIpOwogICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiB0ICYmIHZvaWQgMCA9PT0gbiAmJiAobiA9IHQsIHQgPSB2b2lkIDApLCB2b2lkIDAgIT09IG4pIHsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIG4pIHRocm93IG5ldyBFcnJvcigiRXhwZWN0ZWQgdGhlIGVuaGFuY2VyIHRvIGJlIGEgZnVuY3Rpb24uIik7CiAgICAgICAgICAgIHJldHVybiBuKGwpKGUsIHQpOwogICAgICAgIH0KICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IEVycm9yKCJFeHBlY3RlZCB0aGUgcmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLiIpOwogICAgICAgIHZhciB1ID0gZSwgYyA9IHQsIHMgPSBbXSwgZiA9IHMsIGQgPSAhMTsKICAgICAgICBmdW5jdGlvbiBwKCkgewogICAgICAgICAgICBmID09PSBzICYmIChmID0gcy5zbGljZSgpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZygpIHsKICAgICAgICAgICAgaWYgKGQpIHRocm93IG5ldyBFcnJvcigiWW91IG1heSBub3QgY2FsbCBzdG9yZS5nZXRTdGF0ZSgpIHdoaWxlIHRoZSByZWR1Y2VyIGlzIGV4ZWN1dGluZy4gVGhlIHJlZHVjZXIgaGFzIGFscmVhZHkgcmVjZWl2ZWQgdGhlIHN0YXRlIGFzIGFuIGFyZ3VtZW50LiBQYXNzIGl0IGRvd24gZnJvbSB0aGUgdG9wIHJlZHVjZXIgaW5zdGVhZCBvZiByZWFkaW5nIGl0IGZyb20gdGhlIHN0b3JlLiIpOwogICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaChlKSB7CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgRXJyb3IoIkV4cGVjdGVkIHRoZSBsaXN0ZW5lciB0byBiZSBhIGZ1bmN0aW9uLiIpOwogICAgICAgICAgICBpZiAoZCkgdGhyb3cgbmV3IEVycm9yKCJZb3UgbWF5IG5vdCBjYWxsIHN0b3JlLnN1YnNjcmliZSgpIHdoaWxlIHRoZSByZWR1Y2VyIGlzIGV4ZWN1dGluZy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gYmUgbm90aWZpZWQgYWZ0ZXIgdGhlIHN0b3JlIGhhcyBiZWVuIHVwZGF0ZWQsIHN1YnNjcmliZSBmcm9tIGEgY29tcG9uZW50IGFuZCBpbnZva2Ugc3RvcmUuZ2V0U3RhdGUoKSBpbiB0aGUgY2FsbGJhY2sgdG8gYWNjZXNzIHRoZSBsYXRlc3Qgc3RhdGUuIFNlZSBodHRwczovL3JlZHV4LmpzLm9yZy9hcGktcmVmZXJlbmNlL3N0b3JlI3N1YnNjcmliZWxpc3RlbmVyIGZvciBtb3JlIGRldGFpbHMuIik7CiAgICAgICAgICAgIHZhciB0ID0gITA7CiAgICAgICAgICAgIHJldHVybiBwKCksIGYucHVzaChlKSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgIGlmIChkKSB0aHJvdyBuZXcgRXJyb3IoIllvdSBtYXkgbm90IHVuc3Vic2NyaWJlIGZyb20gYSBzdG9yZSBsaXN0ZW5lciB3aGlsZSB0aGUgcmVkdWNlciBpcyBleGVjdXRpbmcuIFNlZSBodHRwczovL3JlZHV4LmpzLm9yZy9hcGktcmVmZXJlbmNlL3N0b3JlI3N1YnNjcmliZWxpc3RlbmVyIGZvciBtb3JlIGRldGFpbHMuIik7CiAgICAgICAgICAgICAgICAgICAgdCA9ICExLCBwKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBmLmluZGV4T2YoZSk7CiAgICAgICAgICAgICAgICAgICAgZi5zcGxpY2UobiwgMSksIHMgPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKGUpIHsKICAgICAgICAgICAgaWYgKCFpKGUpKSB0aHJvdyBuZXcgRXJyb3IoIkFjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiBVc2UgY3VzdG9tIG1pZGRsZXdhcmUgZm9yIGFzeW5jIGFjdGlvbnMuIik7CiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUudHlwZSkgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG1heSBub3QgaGF2ZSBhbiB1bmRlZmluZWQgInR5cGUiIHByb3BlcnR5LiBIYXZlIHlvdSBtaXNzcGVsbGVkIGEgY29uc3RhbnQ/Jyk7CiAgICAgICAgICAgIGlmIChkKSB0aHJvdyBuZXcgRXJyb3IoIlJlZHVjZXJzIG1heSBub3QgZGlzcGF0Y2ggYWN0aW9ucy4iKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGQgPSAhMCwgYyA9IHUoYywgZSk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBkID0gITE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yICh2YXIgdCA9IHMgPSBmLCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIHsKICAgICAgICAgICAgICAgICgwLCB0W25dKSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBiKGUpIHsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBFcnJvcigiRXhwZWN0ZWQgdGhlIG5leHRSZWR1Y2VyIHRvIGJlIGEgZnVuY3Rpb24uIik7CiAgICAgICAgICAgIHUgPSBlLCBtKHsKICAgICAgICAgICAgICAgIHR5cGU6IG8uUkVQTEFDRQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdigpIHsKICAgICAgICAgICAgdmFyIGUsIHQgPSBoOwogICAgICAgICAgICByZXR1cm4gKGUgPSB7CiAgICAgICAgICAgICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSkgdGhyb3cgbmV3IFR5cGVFcnJvcigiRXhwZWN0ZWQgdGhlIG9ic2VydmVyIHRvIGJlIGFuIG9iamVjdC4iKTsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICAgICAgICAgICAgICBlLm5leHQgJiYgZS5uZXh0KGcoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBuKCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IHQobikKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KVtyLmFdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfSwgZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG0oewogICAgICAgICAgICB0eXBlOiBvLklOSVQKICAgICAgICB9KSwgKGEgPSB7CiAgICAgICAgICAgIGRpc3BhdGNoOiBtLAogICAgICAgICAgICBzdWJzY3JpYmU6IGgsCiAgICAgICAgICAgIGdldFN0YXRlOiBnLAogICAgICAgICAgICByZXBsYWNlUmVkdWNlcjogYgogICAgICAgIH0pW3IuYV0gPSB2LCBhOwogICAgfQogICAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0ICYmIHQudHlwZTsKICAgICAgICByZXR1cm4gIkdpdmVuICIgKyAobiAmJiAnYWN0aW9uICInICsgU3RyaW5nKG4pICsgJyInIHx8ICJhbiBhY3Rpb24iKSArICcsIHJlZHVjZXIgIicgKyBlICsgJyIgcmV0dXJuZWQgdW5kZWZpbmVkLiBUbyBpZ25vcmUgYW4gYWN0aW9uLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgcHJldmlvdXMgc3RhdGUuIElmIHlvdSB3YW50IHRoaXMgcmVkdWNlciB0byBob2xkIG5vIHZhbHVlLCB5b3UgY2FuIHJldHVybiBudWxsIGluc3RlYWQgb2YgdW5kZWZpbmVkLic7CiAgICB9CiAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gT2JqZWN0LmtleXMoZSksIG4gPSB7fSwgciA9IDA7IHIgPCB0Lmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgIHZhciBhID0gdFtyXTsKICAgICAgICAgICAgMCwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZVthXSAmJiAoblthXSA9IGVbYV0pOwogICAgICAgIH0KICAgICAgICB2YXIgaSwgbCA9IE9iamVjdC5rZXlzKG4pOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgICFmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlW3RdOwogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4odm9pZCAwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG8uSU5JVAogICAgICAgICAgICAgICAgICAgIH0pKSB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXIgIicgKyB0ICsgIlwiIHJldHVybmVkIHVuZGVmaW5lZCBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIElmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlIHJlZHVjZXIgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS4gVGhlIGluaXRpYWwgc3RhdGUgbWF5IG5vdCBiZSB1bmRlZmluZWQuIElmIHlvdSBkb24ndCB3YW50IHRvIHNldCBhIHZhbHVlIGZvciB0aGlzIHJlZHVjZXIsIHlvdSBjYW4gdXNlIG51bGwgaW5zdGVhZCBvZiB1bmRlZmluZWQuIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbih2b2lkIDAsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogby5QUk9CRV9VTktOT1dOX0FDVElPTigpCiAgICAgICAgICAgICAgICAgICAgfSkpIHRocm93IG5ldyBFcnJvcignUmVkdWNlciAiJyArIHQgKyAiXCIgcmV0dXJuZWQgdW5kZWZpbmVkIHdoZW4gcHJvYmVkIHdpdGggYSByYW5kb20gdHlwZS4gRG9uJ3QgdHJ5IHRvIGhhbmRsZSAiICsgby5JTklUICsgJyBvciBvdGhlciBhY3Rpb25zIGluICJyZWR1eC8qIiBuYW1lc3BhY2UuIFRoZXkgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4gSW5zdGVhZCwgeW91IG11c3QgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlIGZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB1bmxlc3MgaXQgaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIHlvdSBtdXN0IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZSwgcmVnYXJkbGVzcyBvZiB0aGUgYWN0aW9uIHR5cGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBub3QgYmUgdW5kZWZpbmVkLCBidXQgY2FuIGJlIG51bGwuJyk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0obik7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBpID0gZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSAmJiAoZSA9IHt9KSwgaSkgdGhyb3cgaTsKICAgICAgICAgICAgZm9yICh2YXIgciA9ICExLCBhID0ge30sIG8gPSAwOyBvIDwgbC5sZW5ndGg7IG8rKykgewogICAgICAgICAgICAgICAgdmFyIGMgPSBsW29dLCBzID0gbltjXSwgZiA9IGVbY10sIGQgPSBzKGYsIHQpOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwID0gdShjLCB0KTsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhW2NdID0gZCwgciA9IHIgfHwgZCAhPT0gZjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKHIgPSByIHx8IGwubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhlKS5sZW5ndGgpID8gYSA6IGU7CiAgICAgICAgfTsKICAgIH0KICAgIGZ1bmN0aW9uIHMoZSwgdCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHQoZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTsKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gZihlLCB0KSB7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGUpIHJldHVybiBzKGUsIHQpOwogICAgICAgIGlmICgib2JqZWN0IiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoImJpbmRBY3Rpb25DcmVhdG9ycyBleHBlY3RlZCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiwgaW5zdGVhZCByZWNlaXZlZCAiICsgKG51bGwgPT09IGUgPyAibnVsbCIgOiB0eXBlb2YgZSkgKyAnLiBEaWQgeW91IHdyaXRlICJpbXBvcnQgQWN0aW9uQ3JlYXRvcnMgZnJvbSIgaW5zdGVhZCBvZiAiaW1wb3J0ICogYXMgQWN0aW9uQ3JlYXRvcnMgZnJvbSI/Jyk7CiAgICAgICAgdmFyIG4gPSB7fTsKICAgICAgICBmb3IgKHZhciByIGluIGUpIHsKICAgICAgICAgICAgdmFyIGEgPSBlW3JdOwogICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBhICYmIChuW3JdID0gcyhhLCB0KSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuOwogICAgfQogICAgZnVuY3Rpb24gZChlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIHQgaW4gZSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7CiAgICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgd3JpdGFibGU6ICEwCiAgICAgICAgfSkgOiBlW3RdID0gbiwgZTsKICAgIH0KICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYgbi5wdXNoLmFwcGx5KG4sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSkpLCAKICAgICAgICB0ICYmIChuID0gbi5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZTsKICAgICAgICB9KSkpLCBuOwogICAgfQogICAgZnVuY3Rpb24gZyhlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgdmFyIG4gPSBudWxsICE9IGFyZ3VtZW50c1t0XSA/IGFyZ3VtZW50c1t0XSA6IHt9OwogICAgICAgICAgICB0ICUgMiA/IHAobiwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGQoZSwgdCwgblt0XSk7CiAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogcChuKS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCB0KSk7CiAgICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICBmdW5jdGlvbiBoKCkgewogICAgICAgIGZvciAodmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoLCB0ID0gbmV3IEFycmF5KGUpLCBuID0gMDsgbiA8IGU7IG4rKykgdFtuXSA9IGFyZ3VtZW50c1tuXTsKICAgICAgICByZXR1cm4gMCA9PT0gdC5sZW5ndGggPyBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0gOiAxID09PSB0Lmxlbmd0aCA/IHRbMF0gOiB0LnJlZHVjZSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSh0LmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSkpOwogICAgfQogICAgZnVuY3Rpb24gbSgpIHsKICAgICAgICBmb3IgKHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCwgdCA9IG5ldyBBcnJheShlKSwgbiA9IDA7IG4gPCBlOyBuKyspIHRbbl0gPSBhcmd1bWVudHNbbl07CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKSwgciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiRGlzcGF0Y2hpbmcgd2hpbGUgY29uc3RydWN0aW5nIHlvdXIgbWlkZGxld2FyZSBpcyBub3QgYWxsb3dlZC4gT3RoZXIgbWlkZGxld2FyZSB3b3VsZCBub3QgYmUgYXBwbGllZCB0byB0aGlzIGRpc3BhdGNoLiIpOwogICAgICAgICAgICAgICAgfSwgYSA9IHsKICAgICAgICAgICAgICAgICAgICBnZXRTdGF0ZTogbi5nZXRTdGF0ZSwKICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBvID0gdC5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShhKTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybiBnKHt9LCBuLCB7CiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2g6IHIgPSBoLmFwcGx5KHZvaWQgMCwgbykobi5kaXNwYXRjaCkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgIH07CiAgICB9Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIGZ1bmN0aW9uIHIoZSwgdCkgewogICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgewogICAgICAgICAgICB2YXIgciA9IHRbbl07CiAgICAgICAgICAgIHIuZW51bWVyYWJsZSA9IHIuZW51bWVyYWJsZSB8fCAhMSwgci5jb25maWd1cmFibGUgPSAhMCwgInZhbHVlIiBpbiByICYmIChyLndyaXRhYmxlID0gITApLCAKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIua2V5LCByKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBhKGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gdCAmJiByKGUucHJvdG90eXBlLCB0KSwgbiAmJiByKGUsIG4pLCBlOwogICAgfQogICAgbi5kKHQsICJhIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBhOwogICAgfSkpOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgfQogICAgbi5kKHQsICJhIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiByOwogICAgfSkpOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiByKGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gdCBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHsKICAgICAgICAgICAgdmFsdWU6IG4sCiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICB3cml0YWJsZTogITAKICAgICAgICB9KSA6IGVbdF0gPSBuLCBlOwogICAgfQogICAgZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgIHQgJiYgKHIgPSByLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgdCkuZW51bWVyYWJsZTsKICAgICAgICAgICAgfSkpKSwgbi5wdXNoLmFwcGx5KG4sIHIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbjsKICAgIH0KICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgICAgICAgdCAlIDIgPyBhKE9iamVjdChuKSwgITApLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHIoZSwgdCwgblt0XSk7CiAgICAgICAgICAgIH0pKSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpIDogYShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIHQpKTsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZTsKICAgIH0KICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gbzsKICAgIH0pKTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgZS5leHBvcnRzID0gbig1MCk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gYTsKICAgIH0pKTsKICAgIHZhciByID0gbig3KSwgYSA9IE9iamVjdChyLmEpKChmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGUuZG93bmxvYWQucHJvY2Vzc2luZzsKICAgIH0pLCAoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBlLmludGVyZmFjZS5tYXhEb3dubG9hZENvdW50OwogICAgfSksIChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIGUgPCB0OwogICAgfSkpOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gISgicHJvZHVjdGlvbiIudG9Mb3dlckNhc2UoKSAhPT0gZS50b0xvd2VyQ2FzZSgpKTsKICAgIH0oImRldmVsb3BtZW50Iik7CiAgICB0LmEgPSByOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgciA9IG4oMTgpLCBhID0gewogICAgICAgIGNoaWxkQ29udGV4dFR5cGVzOiAhMCwKICAgICAgICBjb250ZXh0VHlwZTogITAsCiAgICAgICAgY29udGV4dFR5cGVzOiAhMCwKICAgICAgICBkZWZhdWx0UHJvcHM6ICEwLAogICAgICAgIGRpc3BsYXlOYW1lOiAhMCwKICAgICAgICBnZXREZWZhdWx0UHJvcHM6ICEwLAogICAgICAgIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcjogITAsCiAgICAgICAgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOiAhMCwKICAgICAgICBtaXhpbnM6ICEwLAogICAgICAgIHByb3BUeXBlczogITAsCiAgICAgICAgdHlwZTogITAKICAgIH0sIG8gPSB7CiAgICAgICAgbmFtZTogITAsCiAgICAgICAgbGVuZ3RoOiAhMCwKICAgICAgICBwcm90b3R5cGU6ICEwLAogICAgICAgIGNhbGxlcjogITAsCiAgICAgICAgY2FsbGVlOiAhMCwKICAgICAgICBhcmd1bWVudHM6ICEwLAogICAgICAgIGFyaXR5OiAhMAogICAgfSwgaSA9IHsKICAgICAgICAkJHR5cGVvZjogITAsCiAgICAgICAgY29tcGFyZTogITAsCiAgICAgICAgZGVmYXVsdFByb3BzOiAhMCwKICAgICAgICBkaXNwbGF5TmFtZTogITAsCiAgICAgICAgcHJvcFR5cGVzOiAhMCwKICAgICAgICB0eXBlOiAhMAogICAgfSwgbCA9IHt9OwogICAgZnVuY3Rpb24gdShlKSB7CiAgICAgICAgcmV0dXJuIHIuaXNNZW1vKGUpID8gaSA6IGxbZS4kJHR5cGVvZl0gfHwgYTsKICAgIH0KICAgIGxbci5Gb3J3YXJkUmVmXSA9IHsKICAgICAgICAkJHR5cGVvZjogITAsCiAgICAgICAgcmVuZGVyOiAhMCwKICAgICAgICBkZWZhdWx0UHJvcHM6ICEwLAogICAgICAgIGRpc3BsYXlOYW1lOiAhMCwKICAgICAgICBwcm9wVHlwZXM6ICEwCiAgICB9LCBsW3IuTWVtb10gPSBpOwogICAgdmFyIGMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksIHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcywgZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsIGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLCBwID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLCBnID0gT2JqZWN0LnByb3RvdHlwZTsKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGUodCwgbiwgcikgewogICAgICAgIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgbikgewogICAgICAgICAgICBpZiAoZykgewogICAgICAgICAgICAgICAgdmFyIGEgPSBwKG4pOwogICAgICAgICAgICAgICAgYSAmJiBhICE9PSBnICYmIGUodCwgYSwgcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGkgPSBzKG4pOwogICAgICAgICAgICBmICYmIChpID0gaS5jb25jYXQoZihuKSkpOwogICAgICAgICAgICBmb3IgKHZhciBsID0gdSh0KSwgaCA9IHUobiksIG0gPSAwOyBtIDwgaS5sZW5ndGg7ICsrbSkgewogICAgICAgICAgICAgICAgdmFyIGIgPSBpW21dOwogICAgICAgICAgICAgICAgaWYgKCEob1tiXSB8fCByICYmIHJbYl0gfHwgaCAmJiBoW2JdIHx8IGwgJiYgbFtiXSkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGQobiwgYik7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgYyh0LCBiLCB2KTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiB0OwogICAgfTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgbi5kKHQsICJkIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBpOwogICAgfSkpLCBuLmQodCwgImIiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGw7CiAgICB9KSksIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdTsKICAgIH0pKSwgbi5kKHQsICJjIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBjOwogICAgfSkpOwogICAgbig1KSwgbigxMSk7CiAgICB2YXIgciA9IG4oMSksIGEgPSBuKDEyKSwgbyA9IG4oMik7CiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgICBpZiAobnVsbCAhPT0gZS5tYXRjaCgvXlwvc2hhcmVsaW5rXGQrLykpIHRocm93IG5ldyBFcnJvcign6ZyA6KaB5YWI44CM5L+d5a2Y5Yiw5oiR55qE55m+5bqm572R55uY44CN5ZCOPGJyIC8+5Zyo572R55uY5YiX6KGoKDxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSJodHRwczovL3Bhbi5iYWlkdS5jb20vZGlzay9ob21lIj5odHRwczovL3Bhbi5iYWlkdS5jb20vZGlzay9ob21lPC9hPinkuK3kuIvovb0nKTsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgYS5hLnhtbEh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIHVybDogImh0dHA6Ly9wY3MuYmFpZHUuY29tL3Jlc3QvMi4wL3Bjcy9maWxlP2FwcF9pZD03Nzg3NTAmdmVyPTIuMCZtZXRob2Q9bG9jYXRlZG93bmxvYWQmcGF0aD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUpLAogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogImpzb24iLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJVc2VyLUFnZW50Ijogci5hLnVzZXJBZ2VudAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnJlc3BvbnNlLmNsaWVudF9pcCA/IHQoZSkgOiBuKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KSk7CiAgICB9CiAgICBmdW5jdGlvbiBsKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IGUudXJsLCBvID0gZS5zZXJ2ZXJGaWxlbmFtZSwgaSA9IGUucHJvZ3Jlc3MsIHUgPSB2b2lkIDA7CiAgICAgICAgcmV0dXJuIGkucGVyY2VudENvdW50ID0gMCwgaS5zcGVlZE92ZXJsYXkgPSAwLCBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYywgcykgewogICAgICAgICAgICB2YXIgZjsKICAgICAgICAgICAgaS5yZXF1ZXN0ID0gYS5hLmRvd25sb2FkKHsKICAgICAgICAgICAgICAgIHVybDogbiwKICAgICAgICAgICAgICAgIG5hbWU6IHQgPyAoZiA9IG8sIGYgKyAiLl9fX19fX19fX1/ph43lkb3lkI3miJEuemlwIikgOiBvLAogICAgICAgICAgICAgICAgc2F2ZUFzOiAhMCwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBIb3N0OiAicWRhbGwwMS5iYWlkdXBjcy5jb20iLAogICAgICAgICAgICAgICAgICAgIEFjY2VwdDogIiovKiIsCiAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiByLmEudXNlckFnZW50LAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiaWRlbnRpdHkiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiamEtSlAiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQtQ2hhcnNldCI6ICIqIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9ucHJvZ3Jlc3M6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB1ID0gZSwgaS5wZXJjZW50Q291bnQgPSBNYXRoLnJvdW5kKDEwMCAqIHUubG9hZGVkIC8gdS50b3RhbCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBpLmludGVydmFsSWQgJiYgY2xlYXJJbnRlcnZhbChpLmludGVydmFsSWQpLCBpLnBlcmNlbnRDb3VudCA9IDEwMCwgaS5zcGVlZE92ZXJsYXkgPSAwLCAKICAgICAgICAgICAgICAgICAgICBpLnN0YXR1cyA9IHIuYi5jb21wbGV0ZWQsIGEuYS5ub3RpZmljYXRpb24oewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAi5LiL6L295a6M5oiQIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodDogITAKICAgICAgICAgICAgICAgICAgICB9KSwgYygpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICBpLmludGVydmFsSWQgJiYgY2xlYXJJbnRlcnZhbChpLmludGVydmFsSWQpLCBpLnBlcmNlbnRDb3VudCA9IDAsIGkuc3BlZWRPdmVybGF5ID0gMCwgCiAgICAgICAgICAgICAgICAgICAgIm5vdF93aGl0ZWxpc3RlZCIgIT09IHQuZXJyb3IgPyAoaS5zdGF0dXMgPSByLmIuZXJyb3IsIDAgPT09IE9iamVjdC5rZXlzKHQpLmxlbmd0aCA/IHMobmV3IEVycm9yKCJ1c2VyIGlzIG5vdCBhdXRob3JpemVkLCBoaXRjb2RlOjEyMiwgcGx6IHRyeSBhZ2FpbiIpKSA6IHMobmV3IEVycm9yKHQuZXJyb3IpKSkgOiBsKGUsICEwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBkID0gMDsKICAgICAgICAgICAgaS5pbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmICh1KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSAyICogKHUubG9hZGVkIC0gZCk7CiAgICAgICAgICAgICAgICAgICAgZCA9IHUubG9hZGVkLCBpLnNwZWVkT3ZlcmxheSA9IGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCA1MDApOwogICAgICAgIH0pKTsKICAgIH0KICAgIGZ1bmN0aW9uIHUoZSkgewogICAgICAgIHZhciB0ID0gby5hLmxpc3QsIG4gPSBvLmEuanF1ZXJ5OwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ociwgYSkgewogICAgICAgICAgICBuLnBvc3QoIi9zaGFyZS9zZXQ/Y2hhbm5lbD1jaHVubGVpJmNsaWVudHR5cGU9MCZ3ZWI9MSIsIHsKICAgICAgICAgICAgICAgIHNjaGFubmVsOiA0LAogICAgICAgICAgICAgICAgY2hhbm5lbF9saXN0OiAiW10iLAogICAgICAgICAgICAgICAgcGVyaW9kOiA3LAogICAgICAgICAgICAgICAgcHdkOiAicXFxcSIsCiAgICAgICAgICAgICAgICBmaWRfbGlzdDogbi5zdHJpbmdpZnkoZSA/IFsgZSBdIDogdC5nZXRTZWxlY3RlZCgpLm1hcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZzX2lkOwogICAgICAgICAgICAgICAgfSkpKQogICAgICAgICAgICB9LCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcihlKTsKICAgICAgICAgICAgfSkpLmVycm9yKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBhKGUpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfSkpOwogICAgfQogICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgICAgdmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSAmJiBhcmd1bWVudHNbMV07CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuLCByKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBvLmEuZGxpbmtTZXJ2aWNlKCkudGhlbigoZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gZS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZnNJZDsKICAgICAgICAgICAgICAgICAgICB9KSksIG8gPSB0ID8gImJhdGNoIiA6ICJub2xpbWl0IjsKICAgICAgICAgICAgICAgICAgICByLmdldERsaW5rUGFuKEpTT04uc3RyaW5naWZ5KGEpLCBvLCBuKTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcihlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pKTsKICAgIH0KfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgbi5kKHQsICJiIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBwOwogICAgfSkpLCBuLmQodCwgImMiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGc7CiAgICB9KSksIG4uZCh0LCAiZCIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gaDsKICAgIH0pKTsKICAgIHZhciByID0gbig1KSwgYSA9IG4ubihyKSwgbyA9IG4oMTEpLCBpID0gbigxMyksIGwgPSBuKDIyKSwgdSA9IG4oOSksIGMgPSBuKDIpLCBzID0gewogICAgICAgIHJlc3BvbnNlOiB2b2lkIDAsCiAgICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgICAgc2hhcmVMaW5rOiB7CiAgICAgICAgICAgIHByb2dyZXNzOiAwLAogICAgICAgICAgICByZXNwb25zZTogdm9pZCAwCiAgICAgICAgfQogICAgfSwgZiA9IE9iamVjdChpLmIpKHsKICAgICAgICBuYW1lOiAiZGxpbmsiLAogICAgICAgIGluaXRpYWxTdGF0ZTogcywKICAgICAgICByZWR1Y2VyczogewogICAgICAgICAgICByZXF1ZXN0RG93bmxvYWQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLnByb2dyZXNzICs9IDEsIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1Y2Nlc3NEb3dubG9hZDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUucmVzcG9uc2UgPSB0LnBheWxvYWQsIGUucHJvZ3Jlc3MgLT0gMSwgZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmFpbHVyZURvd25sb2FkOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5wcm9ncmVzcyAtPSAxLCBlOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXF1ZXN0U2hhcmVMaW5rczogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUuc2hhcmVMaW5rLnByb2dyZXNzICs9IDEsIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1Y2Nlc3NTaGFyZUxpbmtzOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaGFyZUxpbmsucmVzcG9uc2UgPSB0LnBheWxvYWQsIGUuc2hhcmVMaW5rLnByb2dyZXNzIC09IDEsIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhaWx1cmVTaGFyZUxpbmtzOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaGFyZUxpbmsucHJvZ3Jlc3MgLT0gMSwgZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pLCBkID0gWyAiNDk4MDY1IiwgIjMwOTg0NyIsICI3Nzg3NTAiIF0sIHAgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgbiA9IE9iamVjdChvLmEpKGEuYS5tYXJrKChmdW5jdGlvbiBuKHIpIHsKICAgICAgICAgICAgICAgIHZhciBvOwogICAgICAgICAgICAgICAgcmV0dXJuIGEuYS53cmFwKChmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICg7Oykgc3dpdGNoIChuLnByZXYgPSBuLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ucHJldiA9IDAsIGYuYWN0aW9ucy5yZXF1ZXN0RG93bmxvYWQoKSwgbi5uZXh0ID0gNCwgT2JqZWN0KGwuYykoZSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBvID0gbi5zZW50LCB0ID0gdCB8fCBkW09iamVjdCh1LmMpKGQubGVuZ3RoKV0sIG8uZGxpbmsuZm9yRWFjaCgoZnVuY3Rpb24obikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLmZpbmQoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5mc0lkLnRvU3RyaW5nKCkgPT09IG4uZnNfaWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByICYmIChuLmxpbmsgPSAiaHR0cHM6Ly9wY3MuYmFpZHUuY29tL3Jlc3QvMi4wL3Bjcy9maWxlP21ldGhvZD1kb3dubG9hZCZhcHBfaWQ9IiArIHQgKyAiJmZpbGVuYW1lPSIgKyBlbmNvZGVVUklDb21wb25lbnQoci5zZXJ2ZXJGaWxlbmFtZSkgKyAiJnBhdGg9IiArIGVuY29kZVVSSUNvbXBvbmVudChyLnBhdGgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCByKGYuYWN0aW9ucy5zdWNjZXNzRG93bmxvYWQobykpLCBuLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgbi5wcmV2ID0gMTAsIG4udDAgPSBuLmNhdGNoKDApLCBmLmFjdGlvbnMuZmFpbHVyZURvd25sb2FkKCk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgbiwgbnVsbCwgWyBbIDAsIDEwIF0gXSk7CiAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgIH0oKTsKICAgIH0sIGcgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdChvLmEpKGEuYS5tYXJrKChmdW5jdGlvbiB0KCkgewogICAgICAgICAgICB2YXIgbiwgcjsKICAgICAgICAgICAgcmV0dXJuIGEuYS53cmFwKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKDs7KSBzd2l0Y2ggKHQucHJldiA9IHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQucHJldiA9IDAsIGYuYWN0aW9ucy5yZXF1ZXN0U2hhcmVMaW5rcygpLCB0Lm5leHQgPSA0LCBPYmplY3QobC5hKShlLmZzSWQpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIG4gPSB0LnNlbnQsIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1cmw6IG4uc2hvcnR1cmwucmVwbGFjZSgiaHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvIiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBwd2Q6ICJxcXFxIgogICAgICAgICAgICAgICAgICAgIH0sIE9iamVjdCh1LmUpKCJodHRwczovL3Bhbi5kb3Rlbm5pbi5tbCIsIHIpLCB0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICB0LnByZXYgPSA5LCB0LnQwID0gdC5jYXRjaCgwKSwgZi5hY3Rpb25zLmZhaWx1cmVTaGFyZUxpbmtzKCk7CgogICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIHQsIG51bGwsIFsgWyAwLCA5IF0gXSk7CiAgICAgICAgfSkpKTsKICAgIH0sIGggPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KG8uYSkoYS5hLm1hcmsoKGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICByZXR1cm4gYS5hLndyYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGZvciAoOzspIHN3aXRjaCAoZS5wcmV2ID0gZS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBmLmFjdGlvbnMucmVxdWVzdFNoYXJlTGlua3MoKSwgdCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLmhhc2gsICIiKS5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAiL3MvIiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZHNrOiBjLmEuY29va2llLmdldENvb2tpZSgiQkRDTE5EIikKICAgICAgICAgICAgICAgICAgICAgICAgfSwgT2JqZWN0KHUuZSkoImh0dHBzOi8vcGFuLmRvdGVubmluLm1sIiwgdCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmLmFjdGlvbnMuZmFpbHVyZVNoYXJlTGlua3MoKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgZSk7CiAgICAgICAgfSkpKTsKICAgIH07CiAgICB0LmEgPSBmOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICAgICAgZm9yICh2YXIgbiA9IDAsIHIgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIHJbbl0gPSBlW25dOwogICAgICAgIHJldHVybiByOwogICAgfQogICAgbi5kKHQsICJhIiwgKGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiByOwogICAgfSkpOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICAhZnVuY3Rpb24gZSgpIHsKICAgICAgICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18uY2hlY2tEQ0UpIHsKICAgICAgICAgICAgMDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXy5jaGVja0RDRShlKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0oKSwgZS5leHBvcnRzID0gbig0NCk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gYTsKICAgIH0pKTsKICAgIHZhciByID0gbigyNCk7CiAgICBmdW5jdGlvbiBhKGUsIHQpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBPYmplY3Qoci5hKShlLCB0KTsKICAgICAgICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwgLTEpOwogICAgICAgICAgICByZXR1cm4gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciAmJiAobiA9IGUuY29uc3RydWN0b3IubmFtZSksICJNYXAiID09PSBuIHx8ICJTZXQiID09PSBuID8gQXJyYXkuZnJvbShuKSA6ICJBcmd1bWVudHMiID09PSBuIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pID8gT2JqZWN0KHIuYSkoZSwgdCkgOiB2b2lkIDA7CiAgICAgICAgfQogICAgfQp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBuLmQodCwgImEiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG87CiAgICB9KSk7CiAgICB2YXIgciA9IG4oMjQpOwogICAgdmFyIGEgPSBuKDI2KTsKICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gT2JqZWN0KHIuYSkoZSk7CiAgICAgICAgfShlKSB8fCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpIHJldHVybiBBcnJheS5mcm9tKGUpOwogICAgICAgIH0oZSkgfHwgT2JqZWN0KGEuYSkoZSkgfHwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOwogICAgICAgIH0oKTsKICAgIH0KfSwgZnVuY3Rpb24oZSkgewogICAgZS5leHBvcnRzID0gSlNPTi5wYXJzZSgneyJhIjoiYmFpZHUtcGFuLWRvd25sb2FkZXIifScpOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICAoZnVuY3Rpb24oZSwgcikgewogICAgICAgIHZhciBhLCBvID0gbigzNSk7CiAgICAgICAgYSA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBzZWxmID8gc2VsZiA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiB2b2lkIDAgIT09IGUgPyBlIDogcjsKICAgICAgICB2YXIgaSA9IE9iamVjdChvLmEpKGEpOwogICAgICAgIHQuYSA9IGk7CiAgICB9KS5jYWxsKHRoaXMsIG4oMzQpLCBuKDMyKShlKSk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciByID0gbigzKSwgYSA9IG4oMCksIG8gPSBuLm4oYSksIGkgPSBuKDE3KSwgbCA9IG4oNCksIHUgPSBuKDIpLCBjID0gbigxKSwgcyA9IG4oNiksIGYgPSBuKDgpLCBkID0gbigxOSksIHAgPSBuKDkpLCBnID0gT2JqZWN0KGwuYikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhdXRvU3RhcnQ6IGUuaW50ZXJmYWNlLmF1dG9TdGFydCwKICAgICAgICAgICAgZG93bmxvYWRhYmxlOiBPYmplY3QoZC5hKShlKQogICAgICAgIH07CiAgICB9KSkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuYXV0b1N0YXJ0LCBuID0gZS5kb3dubG9hZGFibGUsIHIgPSBPYmplY3QobC5jKSgpLCBhID0gT2JqZWN0KGwuZCkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUuZG93bmxvYWQ7CiAgICAgICAgfSkpLmRvd25sb2FkSXRlbXM7CiAgICAgICAgcmV0dXJuIE9iamVjdChwLmIpKCkuaW5TaGFyZVB3ZFNjcmVlbiA/IG51bGwgOiBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBpZDogImNvbnRhaW5lci1mbG9hdGluZyIKICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBpZDogImNvbmZpZy1idXR0b24iLAogICAgICAgICAgICBjbGFzc05hbWU6ICJuZDEgbmRzIiwKICAgICAgICAgICAgImRhdGEtdG9nZ2xlIjogInRvb2x0aXAiLAogICAgICAgICAgICAiZGF0YS1wbGFjZW1lbnQiOiAibGVmdCIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcihzLmEuYWN0aW9ucy5jaGFuZ2UoewogICAgICAgICAgICAgICAgICAgIGNvbmZpZ01vZGFsT3BlbjogITAKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIG8uYS5jcmVhdGVFbGVtZW50KCJpbWciLCB7CiAgICAgICAgICAgIGFsdDogImJ0X2NvbXBvc2UyXzF4IiwKICAgICAgICAgICAgY2xhc3NOYW1lOiAicmVtaW5kZXIiLAogICAgICAgICAgICBzcmM6ICJodHRwczovL3NzbC5nc3RhdGljLmNvbS9idC9DMzM0MUFBN0ExQTA3Njc1NjQ2MkVFMkU1Q0Q3MUMxMS8xeC9idF9jb21wb3NlMl8xeC5wbmciCiAgICAgICAgfSkpLCBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBpZDogImZsb2F0aW5nLWJ1dHRvbiIsCiAgICAgICAgICAgICJkYXRhLXRvZ2dsZSI6ICJ0b29sdGlwIiwKICAgICAgICAgICAgImRhdGEtcGxhY2VtZW50IjogImxlZnQiLAogICAgICAgICAgICAiZGF0YS1vcmlnaW5hbC10aXRsZSI6ICJDcmVhdGUiLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdS5hLnNlbGVjdGVkTGlzdCwgbyA9IE9iamVjdChpLmEpKHt9LCBhKSwgbCA9IHUuYS5hbGxEb3dubG9hZHM7CiAgICAgICAgICAgICAgICBlLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBhW2UuZnNJZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wcm9ncmVzcy5zdGF0dXMgPSB0ICYmIE9iamVjdChwLmIpKCkuaW5EaXNrU2NyZWVuID8gYy5iLmluUXVldWVkIDogYy5iLnN0b3BwZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZS5wcm9ncmVzcywgdSA9IGkuaW50ZXJ2YWxJZCwgcyA9IGkucGVyY2VudENvdW50LCBkID0gaS5zcGVlZE92ZXJsYXksIGcgPSBpLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgbFtlLmZzSWRdID0gZSwgb1tlLmZzSWRdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWxJZDogdSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnRDb3VudDogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkT3ZlcmxheTogZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogZwogICAgICAgICAgICAgICAgICAgICAgICB9LCBuICYmIHQgJiYgT2JqZWN0KHAuYikoKS5pbkRpc2tTY3JlZW4gJiYgcihPYmplY3QoZi5jKShlKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpLCByKGYuYi5hY3Rpb25zLmNoYW5nZSh7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRJdGVtczogbwogICAgICAgICAgICAgICAgfSkpLCByKHMuYS5hY3Rpb25zLmNoYW5nZSh7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRNb2RhbE9wZW46ICEwCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAicGx1cyIKICAgICAgICB9LCAiKyIpLCBvLmEuY3JlYXRlRWxlbWVudCgiaW1nIiwgewogICAgICAgICAgICBhbHQ6ICJidF9jb21wb3NlMl8xeCIsCiAgICAgICAgICAgIGNsYXNzTmFtZTogImVkaXQiLAogICAgICAgICAgICBzcmM6ICIvL3NzbC5nc3RhdGljLmNvbS9idC9DMzM0MUFBN0ExQTA3Njc1NjQ2MkVFMkU1Q0Q3MUMxMS8xeC9pY19yZW1pbmRlcnNfc3BlZWRkaWFsX3doaXRlXzI0ZHAucG5nIgogICAgICAgIH0pKSk7CiAgICB9KSk7CiAgICB2YXIgaCA9IG4oMjYpOwogICAgZnVuY3Rpb24gbShlLCB0KSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICAgIH0oZSkgfHwgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IFtdLCByID0gITAsIGEgPSAhMSwgbyA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSwgbCA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpOyAhKHIgPSAoaSA9IGwubmV4dCgpKS5kb25lKSAmJiAobi5wdXNoKGkudmFsdWUpLCAKICAgICAgICAgICAgICAgICAgICAhdCB8fCBuLmxlbmd0aCAhPT0gdCk7IHIgPSAhMCkgOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGEgPSAhMCwgbyA9IGU7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHIgfHwgbnVsbCA9PSBsLnJldHVybiB8fCBsLnJldHVybigpOwogICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhKSB0aHJvdyBvOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgICB9CiAgICAgICAgfShlLCB0KSB8fCBPYmplY3QoaC5hKShlLCB0KSB8fCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsKICAgICAgICB9KCk7CiAgICB9CiAgICBmdW5jdGlvbiBiKGUsIHQpIHsKICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4ge307CiAgICAgICAgdmFyIG4sIHIsIGEgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICAgICAgdmFyIG4sIHIsIGEgPSB7fSwgbyA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICBmb3IgKHIgPSAwOyByIDwgby5sZW5ndGg7IHIrKykgbiA9IG9bcl0sIHQuaW5kZXhPZihuKSA+PSAwIHx8IChhW25dID0gZVtuXSk7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0oZSwgdCk7CiAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICBmb3IgKHIgPSAwOyByIDwgby5sZW5ndGg7IHIrKykgbiA9IG9bcl0sIHQuaW5kZXhPZihuKSA+PSAwIHx8IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLCBuKSAmJiAoYVtuXSA9IGVbbl0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYTsKICAgIH0KICAgIGZ1bmN0aW9uIHYoZSwgdCkgewogICAgICAgIHJldHVybiB0IHx8ICh0ID0gZS5zbGljZSgwKSksIE9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgewogICAgICAgICAgICByYXc6IHsKICAgICAgICAgICAgICAgIHZhbHVlOiBPYmplY3QuZnJlZXplKHQpCiAgICAgICAgICAgIH0KICAgICAgICB9KSk7CiAgICB9CiAgICBmdW5jdGlvbiB5KCkgewogICAgICAgIHZhciBlID0gdihbICJcbiAgei1pbmRleDogMTA7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICBiYWNrZ3JvdW5kOiAiLCAiO1xuIiBdKTsKICAgICAgICByZXR1cm4geSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9LCBlOwogICAgfQogICAgZnVuY3Rpb24gdygpIHsKICAgICAgICB2YXIgZSA9IHYoWyAiXG4gICAgICBvcGFjaXR5OiAxO1xuICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMC40cywgdmlzaWJpbGl0eSAwLjRzO1xuICAgICIgXSk7CiAgICAgICAgcmV0dXJuIHcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgZTsKICAgIH0KICAgIGZ1bmN0aW9uIGsoKSB7CiAgICAgICAgdmFyIGUgPSB2KFsgIlxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgei1pbmRleDogNTI7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgdG9wOiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBvcGFjaXR5OiAwO1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcywgdmlzaWJpbGl0eSAwLjNzO1xuICAiLCAiXG4gICY6OmFmdGVyIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIG1hcmdpbi1sZWZ0OiAtMC4wNWVtO1xuICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gICAgY29udGVudDogJyc7XG4gIH1cbiIgXSk7CiAgICAgICAgcmV0dXJuIGsgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgZTsKICAgIH0KICAgIHZhciB4ID0gci5jLmRpdihrKCksIChmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGUub3BlbiAmJiBPYmplY3Qoci5iKSh3KCkpOwogICAgfSkpLCBFID0gci5jLmRpdi5hdHRycyh7CiAgICAgICAgY2xhc3NOYW1lOiAibW9kYWwtb3ZlcmxheSIKICAgIH0pKHkoKSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gZS5ub092ZXJsYXlDb2xvciA/ICJ0cmFuc3BhcmVudCIgOiAicmdiYSgwLCAwLCAwLCAwLjgpIjsKICAgIH0pKSwgUyA9IE9iamVjdChyLmMpKCJkaXYiKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIk1vZGFsX19fU3R5bGVkRGl2IiwKICAgICAgICBjb21wb25lbnRJZDogInVmcjJuLTAiCiAgICB9KShbICJib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTppbmxpbmUtYmxvY2s7ei1pbmRleDoyMDtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDo2NXZ3O2JvcmRlci1yYWRpdXM6MnB4O2JhY2tncm91bmQ6I2ZmZjtib3gtc2hhZG93OjAgMCAzMHB4IHJnYmEoMCwwLDAsMC42KTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7YWxpZ24tc2VsZjpjZW50ZXI7IiBdKSwgTyA9IE9iamVjdChyLmMpKCJzcGFuIikud2l0aENvbmZpZyh7CiAgICAgICAgZGlzcGxheU5hbWU6ICJNb2RhbF9fX1N0eWxlZFNwYW4iLAogICAgICAgIGNvbXBvbmVudElkOiAidWZyMm4tMSIKICAgIH0pKFsgInotaW5kZXg6MjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDt3aWR0aDozNXB4O2NvbG9yOiM5NTk3OWMgIWltcG9ydGFudDtmb250LXNpemU6MjBweDtmb250LXdlaWdodDo3MDA7bGluZS1oZWlnaHQ6MzVweDt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LWluZGVudDowO2N1cnNvcjpwb2ludGVyOyY6aG92ZXJ7Y29sb3I6IzJiMmUzOCAhaW1wb3J0YW50O30iIF0pLCBDID0gT2JqZWN0KHIuYykoImRpdiIpLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiTW9kYWxfX19TdHlsZWREaXYyIiwKICAgICAgICBjb21wb25lbnRJZDogInVmcjJuLTIiCiAgICB9KShbICJtYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTphdXRvOyIgXSk7CiAgICBmdW5jdGlvbiBUKGUpIHsKICAgICAgICB2YXIgdCA9IGUuY2xvc2VCdXR0b24sIG4gPSBlLmNsb3NlLCByID0gZS5jaGlsZHJlbiwgYSA9IGUuaGVhZGVyLCBpID0gZS5ub092ZXJsYXlDb2xvciwgbCA9IGIoZSwgWyAiY2xvc2VCdXR0b24iLCAiY2xvc2UiLCAiY2hpbGRyZW4iLCAiaGVhZGVyIiwgIm5vT3ZlcmxheUNvbG9yIiBdKSwgdSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBuICYmIG4oKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudCh4LCBPYmplY3QuYXNzaWduKHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZGlhbG9nIgogICAgICAgIH0sIGwpLCBvLmEuY3JlYXRlRWxlbWVudChFLCB7CiAgICAgICAgICAgIG5vT3ZlcmxheUNvbG9yOiBCb29sZWFuKGkpLAogICAgICAgICAgICBvbkNsaWNrOiB1CiAgICAgICAgfSksIG8uYS5jcmVhdGVFbGVtZW50KFMsIG51bGwsIGEgJiYgby5hLmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJoMyIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgYSkpLCB0ICYmIG8uYS5jcmVhdGVFbGVtZW50KCJkaXYiLCB7CiAgICAgICAgICAgIG9uQ2xpY2s6IHUKICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KE8sIG51bGwsICLDlyIpKSkpLCBvLmEuY3JlYXRlRWxlbWVudChDLCBudWxsLCByKSkpOwogICAgfQogICAgdmFyIFAgPSBuKDE2KSwgXyA9IG4oMTUpOwogICAgZnVuY3Rpb24gaihlLCB0KSB7CiAgICAgICAgcmV0dXJuIChqID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIGUuX19wcm90b19fID0gdCwgZTsKICAgICAgICB9KShlLCB0KTsKICAgIH0KICAgIGZ1bmN0aW9uIEkoZSwgdCkgewogICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0ICYmIG51bGwgIT09IHQpIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgICAgICAgZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHQgJiYgdC5wcm90b3R5cGUsIHsKICAgICAgICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICAgICAgICAgIHZhbHVlOiBlLAogICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMAogICAgICAgICAgICB9CiAgICAgICAgfSksIHQgJiYgaihlLCB0KTsKICAgIH0KICAgIGZ1bmN0aW9uIE4oZSkgewogICAgICAgIHJldHVybiAoTiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKTsKICAgICAgICB9KShlKTsKICAgIH0KICAgIGZ1bmN0aW9uIEEoKSB7CiAgICAgICAgaWYgKCJ1bmRlZmluZWQiID09IHR5cGVvZiBSZWZsZWN0IHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuICExOwogICAgICAgIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gITE7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIFByb3h5KSByZXR1cm4gITA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIChmdW5jdGlvbigpIHt9KSkpLCAKICAgICAgICAgICAgITA7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gRChlKSB7CiAgICAgICAgcmV0dXJuIChEID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZTsKICAgICAgICB9IDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgZS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIGUgIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBlOwogICAgICAgIH0pKGUpOwogICAgfQogICAgZnVuY3Rpb24gUihlKSB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICAgICAgICByZXR1cm4gZTsKICAgIH0KICAgIGZ1bmN0aW9uIE0oZSwgdCkgewogICAgICAgIHJldHVybiAhdCB8fCAib2JqZWN0IiAhPT0gRCh0KSAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiB0ID8gUihlKSA6IHQ7CiAgICB9CiAgICBmdW5jdGlvbiB6KGUpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciB0LCBuID0gTihlKTsKICAgICAgICAgICAgaWYgKEEoKSkgewogICAgICAgICAgICAgICAgdmFyIHIgPSBOKHRoaXMpLmNvbnN0cnVjdG9yOwogICAgICAgICAgICAgICAgdCA9IFJlZmxlY3QuY29uc3RydWN0KG4sIGFyZ3VtZW50cywgcik7CiAgICAgICAgICAgIH0gZWxzZSB0ID0gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICByZXR1cm4gTSh0aGlzLCB0KTsKICAgICAgICB9OwogICAgfQogICAgdmFyIEwgPSByLmMuZGl2LmF0dHJzKChmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGUucGxhY2Vob2xkZXIKICAgICAgICB9OwogICAgfSkpLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiVGFiRWxlbWVudCIKICAgIH0pKFsgIiIgXSksIEYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgSShuLCBlKTsKICAgICAgICB2YXIgdCA9IHoobik7CiAgICAgICAgZnVuY3Rpb24gbigpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChQLmEpKHRoaXMsIG4pLCB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBPYmplY3QoXy5hKShuLCBbIHsKICAgICAgICAgICAga2V5OiAicmVuZGVyIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KEwsIHRoaXMucHJvcHMpOwogICAgICAgICAgICB9CiAgICAgICAgfSBdKSwgbjsKICAgIH0oYS5Db21wb25lbnQpLCBVID0gci5jLmRpdi5hdHRycygoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBlLnBsYWNlaG9sZGVyCiAgICAgICAgfTsKICAgIH0pKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIlRhYkNvbnRhaW5lciIKICAgIH0pKFsgImJveC1zaXppbmc6Ym9yZGVyLWJveDtib3JkZXI6MXB4IHNvbGlkICNlMGUwZTA7Ym9yZGVyLXJhZGl1czo4cHggMCA4cHggMDtvdmVyZmxvdy14OmhpZGRlbjsiIF0pLCBXID0gci5jLnNwYW4ud2l0aENvbmZpZyh7CiAgICAgICAgZGlzcGxheU5hbWU6ICJCdXR0b25UZXh0IgogICAgfSkoWyAiZm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7bGluZS1oZWlnaHQ6MS40MztsZXR0ZXItc3BhY2luZzowLjVweDttYXgtd2lkdGg6MTAwJTsiIF0pLCBWID0gT2JqZWN0KHIuYykoVykud2l0aENvbmZpZyh7CiAgICAgICAgZGlzcGxheU5hbWU6ICJfU3R5bGVkQnV0dG9uVGV4dCIKICAgIH0pKFsgImNvbG9yOiIsICI7IiBdLCAoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBlLl9jc3M7CiAgICB9KSksICQgPSByLmMuZGl2LmF0dHJzKChmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGUucGxhY2Vob2xkZXIKICAgICAgICB9OwogICAgfSkpLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiVGFiTmF2aWdhdGlvbiIKICAgIH0pKFsgImRpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7IiBdKSwgcSA9IHIuYy5kaXYuYXR0cnMoKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhY3RpdmU6IGUuYWN0aXZlCiAgICAgICAgfTsKICAgIH0pKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIlRhYk5hdkl0ZW0iCiAgICB9KShbICJib3gtc2l6aW5nOmJvcmRlci1ib3g7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgMC4zcztkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpmbGV4LWVuZDtmbGV4OjE7dGV4dC1hbGlnbjpjZW50ZXI7aGVpZ2h0OjQ1cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6Ym9sZDtsZXR0ZXItc3BhY2luZzowLjVweDtjb2xvcjoiLCAiO3BhZGRpbmctYm90dG9tOiIsICI7cGFkZGluZy10b3A6OHB4O2JvcmRlcjowIHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1ib3R0b20td2lkdGg6IiwgIjtib3JkZXItYm90dG9tLWNvbG9yOiIsICI7OmhvdmVye2JhY2tncm91bmQtY29sb3I6I2Y1ZjdmYjt9Ji5lcnJvcntib3JkZXItYm90dG9tLWNvbG9yOiIsICI7fSYuZXJyb3Igc3Bhbntjb2xvcjojYjAwMDIwICFpbXBvcnRhbnQ7fSIgXSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gZS5hY3RpdmUgPyAiIzAwMzM4MCIgOiAicmdiYSgwLDAsMCwwLjYpIjsKICAgIH0pLCAoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBlLmFjdGl2ZSA/ICI4cHgiIDogIjlweCI7CiAgICB9KSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gZS5hY3RpdmUgPyAiMnB4IiA6ICIxcHgiOwogICAgfSksIChmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGUuYWN0aXZlID8gIiMyZjY3YmMiIDogIiNlMGUwZTAiOwogICAgfSksIChmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGUuYWN0aXZlID8gIiNiMDAwMjAgIWltcG9ydGFudCIgOiAiIjsKICAgIH0pKSwgQiA9IHIuYy5kaXYuYXR0cnMoKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0YWJzOiBlLnRhYnMsCiAgICAgICAgICAgIGFjdGl2ZVRhYjogZS5hY3RpdmVUYWIKICAgICAgICB9OwogICAgfSkpLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiQWxsVGFicyIKICAgIH0pKFsgInBvc2l0aW9uOnJlbGF0aXZlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2p1c3RpZnktY29udGVudDpjZW50ZXI7bGVmdDotIiwgIiU7d2lkdGg6IiwgIiU7dHJhbnNpdGlvbjpsZWZ0IDAuM3MgZWFzZS1pbi1vdXQ7IiBdLCAoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiAxMDAgKiBlLmFjdGl2ZVRhYjsKICAgIH0pLCAoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiAxMDAgKiBlLnRhYnM7CiAgICB9KSksIEggPSByLmMuZGl2LndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiVGFiV3JhcHBlciIKICAgIH0pKFsgIm92ZXJmbG93LXk6YXV0bztmbGV4OjE7IiBdKSwgUSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBJKG4sIGUpOwogICAgICAgIHZhciB0ID0geihuKTsKICAgICAgICBmdW5jdGlvbiBuKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0KFAuYSkodGhpcywgbiksIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIE9iamVjdChfLmEpKG4sIFsgewogICAgICAgICAgICBrZXk6ICJyZW5kZXIiLAogICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMucHJvcHMsIHQgPSBlLmNoaWxkcmVuLCBuID0gZS5vbkNoYW5nZSwgciA9IGUuYWN0aXZlVGFiLCBhID0gYihlLCBbICJjaGlsZHJlbiIsICJvbkNoYW5nZSIsICJhY3RpdmVUYWIiIF0pOwogICAgICAgICAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KFUsIE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogInRhYkNvbnRhaW5lciIKICAgICAgICAgICAgICAgIH0sIGEpLCBvLmEuY3JlYXRlRWxlbWVudCgkLCB7CiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAidGFiTmF2IgogICAgICAgICAgICAgICAgfSwgdC5tYXAoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IG8uYS5jcmVhdGVFbGVtZW50KHEsIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBlLnByb3BzLmVycm9yID8gIiB0YWIgZXJyb3IgIiA6ICIgdGFiICIsCiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBuICYmIG4oZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdCA9PT0gcgogICAgICAgICAgICAgICAgICAgIH0sIG8uYS5jcmVhdGVFbGVtZW50KFYsIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICIwIDEzcHgiCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0ID09PSByID8gInByaW1hcnkiIDogImRlZmF1bHQiLAogICAgICAgICAgICAgICAgICAgICAgICBfY3NzOiB0ID09PSByID8gIiMyRjY3QkMiIDogIiM2NjYiCiAgICAgICAgICAgICAgICAgICAgfSwgZS5wcm9wcyAmJiBlLnByb3BzLm5hbWUgPyBlLnByb3BzLm5hbWUgOiAiVGFiICIgKyB0KSkgOiBudWxsOwogICAgICAgICAgICAgICAgfSkpKSwgby5hLmNyZWF0ZUVsZW1lbnQoQiwgewogICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYjogciwKICAgICAgICAgICAgICAgICAgICB0YWJzOiB0Lmxlbmd0aAogICAgICAgICAgICAgICAgfSwgdC5tYXAoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoSCwgewogICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHQKICAgICAgICAgICAgICAgICAgICB9LCBlKTsKICAgICAgICAgICAgICAgIH0pKSkpOwogICAgICAgICAgICB9CiAgICAgICAgfSBdKSwgbjsKICAgIH0oYS5Db21wb25lbnQpOwogICAgZnVuY3Rpb24gRygpIHsKICAgICAgICByZXR1cm4gKEcgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiBuKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwgcikgJiYgKGVbcl0gPSBuW3JdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gSyhlLCB0KSB7CiAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIHt9OwogICAgICAgIHZhciBuLCByLCBhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4ge307CiAgICAgICAgICAgIHZhciBuLCByLCBhID0ge30sIG8gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IG8ubGVuZ3RoOyByKyspIG4gPSBvW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCAoYVtuXSA9IGVbbl0pOwogICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9KGUsIHQpOwogICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IG8ubGVuZ3RoOyByKyspIG4gPSBvW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSwgbikgJiYgKGFbbl0gPSBlW25dKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICBRLmRlZmF1bHRQcm9wcyA9IHsKICAgICAgICBhY3RpdmVUYWI6IDAKICAgIH07CiAgICB2YXIgWSA9IG8uYS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgIGQ6ICJNMCAwaDI0djI0SDB6IiwKICAgICAgICBmaWxsOiAibm9uZSIKICAgIH0pLCBYID0gby5hLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgZDogIk0xOSAxOUg1VjVoN1YzSDVjLTEuMTEgMC0yIC45LTIgMnYxNGMwIDEuMS44OSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnY3ek0xNCAzdjJoMy41OWwtOS44MyA5LjgzIDEuNDEgMS40MUwxOSA2LjQxVjEwaDJWM2gtN3oiCiAgICB9KSwgWiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuc3ZnUmVmLCBuID0gZS50aXRsZSwgciA9IEsoZSwgWyAic3ZnUmVmIiwgInRpdGxlIiBdKTsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoInN2ZyIsIEcoewogICAgICAgICAgICBoZWlnaHQ6IDI0LAogICAgICAgICAgICB2aWV3Qm94OiAiMCAwIDI0IDI0IiwKICAgICAgICAgICAgd2lkdGg6IDI0LAogICAgICAgICAgICByZWY6IHQKICAgICAgICB9LCByKSwgbiA/IG8uYS5jcmVhdGVFbGVtZW50KCJ0aXRsZSIsIG51bGwsIG4pIDogbnVsbCwgWSwgWCk7CiAgICB9LCBKID0gby5hLmZvcndhcmRSZWYoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoWiwgRyh7CiAgICAgICAgICAgIHN2Z1JlZjogdAogICAgICAgIH0sIGUpKTsKICAgIH0pKTsKICAgIG4ucDsKICAgIGZ1bmN0aW9uIGVlKCkgewogICAgICAgIHJldHVybiAoZWUgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiBuKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwgcikgJiYgKGVbcl0gPSBuW3JdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gdGUoZSwgdCkgewogICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICB2YXIgbiwgciwgYSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIHt9OwogICAgICAgICAgICB2YXIgbiwgciwgYSA9IHt9LCBvID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCBvLmxlbmd0aDsgcisrKSBuID0gb1tyXSwgdC5pbmRleE9mKG4pID49IDAgfHwgKGFbbl0gPSBlW25dKTsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfShlLCB0KTsKICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCBvLmxlbmd0aDsgcisrKSBuID0gb1tyXSwgdC5pbmRleE9mKG4pID49IDAgfHwgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsIG4pICYmIChhW25dID0gZVtuXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhOwogICAgfQogICAgdmFyIG5lID0gby5hLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgZDogIk0wIDBoMjR2MjRIMHoiLAogICAgICAgIGZpbGw6ICJub25lIgogICAgfSksIHJlID0gby5hLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgZDogIk0xOSA2LjQxTDE3LjU5IDUgMTIgMTAuNTkgNi40MSA1IDUgNi40MSAxMC41OSAxMiA1IDE3LjU5IDYuNDEgMTkgMTIgMTMuNDEgMTcuNTkgMTkgMTkgMTcuNTkgMTMuNDEgMTJ6IgogICAgfSksIGFlID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5zdmdSZWYsIG4gPSBlLnRpdGxlLCByID0gdGUoZSwgWyAic3ZnUmVmIiwgInRpdGxlIiBdKTsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoInN2ZyIsIGVlKHsKICAgICAgICAgICAgaGVpZ2h0OiAyNCwKICAgICAgICAgICAgdmlld0JveDogIjAgMCAyNCAyNCIsCiAgICAgICAgICAgIHdpZHRoOiAyNCwKICAgICAgICAgICAgcmVmOiB0CiAgICAgICAgfSwgciksIG4gPyBvLmEuY3JlYXRlRWxlbWVudCgidGl0bGUiLCBudWxsLCBuKSA6IG51bGwsIG5lLCByZSk7CiAgICB9LCBvZSA9IG8uYS5mb3J3YXJkUmVmKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KGFlLCBlZSh7CiAgICAgICAgICAgIHN2Z1JlZjogdAogICAgICAgIH0sIGUpKTsKICAgIH0pKTsKICAgIG4ucDsKICAgIGZ1bmN0aW9uIGllKCkgewogICAgICAgIHJldHVybiAoaWUgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgciBpbiBuKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwgcikgJiYgKGVbcl0gPSBuW3JdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gbGUoZSwgdCkgewogICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICB2YXIgbiwgciwgYSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIHt9OwogICAgICAgICAgICB2YXIgbiwgciwgYSA9IHt9LCBvID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCBvLmxlbmd0aDsgcisrKSBuID0gb1tyXSwgdC5pbmRleE9mKG4pID49IDAgfHwgKGFbbl0gPSBlW25dKTsKICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgfShlLCB0KTsKICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgICAgICB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCBvLmxlbmd0aDsgcisrKSBuID0gb1tyXSwgdC5pbmRleE9mKG4pID49IDAgfHwgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsIG4pICYmIChhW25dID0gZVtuXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhOwogICAgfQogICAgdmFyIHVlID0gby5hLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgZDogIk0wIDBoMjR2MjRIMHoiLAogICAgICAgIGZpbGw6ICJub25lIgogICAgfSksIGNlID0gby5hLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgZDogIk02IDE5aDRWNUg2djE0em04LTE0djE0aDRWNWgtNHoiCiAgICB9KSwgc2UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLnN2Z1JlZiwgbiA9IGUudGl0bGUsIHIgPSBsZShlLCBbICJzdmdSZWYiLCAidGl0bGUiIF0pOwogICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudCgic3ZnIiwgaWUoewogICAgICAgICAgICBoZWlnaHQ6IDI0LAogICAgICAgICAgICB2aWV3Qm94OiAiMCAwIDI0IDI0IiwKICAgICAgICAgICAgd2lkdGg6IDI0LAogICAgICAgICAgICByZWY6IHQKICAgICAgICB9LCByKSwgbiA/IG8uYS5jcmVhdGVFbGVtZW50KCJ0aXRsZSIsIG51bGwsIG4pIDogbnVsbCwgdWUsIGNlKTsKICAgIH0sIGZlID0gby5hLmZvcndhcmRSZWYoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoc2UsIGllKHsKICAgICAgICAgICAgc3ZnUmVmOiB0CiAgICAgICAgfSwgZSkpOwogICAgfSkpOwogICAgbi5wOwogICAgZnVuY3Rpb24gZGUoKSB7CiAgICAgICAgcmV0dXJuIChkZSA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgICAgdmFyIG4gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIG4pIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLCByKSAmJiAoZVtyXSA9IG5bcl0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0pLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgICBmdW5jdGlvbiBwZShlLCB0KSB7CiAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIHt9OwogICAgICAgIHZhciBuLCByLCBhID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4ge307CiAgICAgICAgICAgIHZhciBuLCByLCBhID0ge30sIG8gPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IG8ubGVuZ3RoOyByKyspIG4gPSBvW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCAoYVtuXSA9IGVbbl0pOwogICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9KGUsIHQpOwogICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgICAgICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsKICAgICAgICAgICAgZm9yIChyID0gMDsgciA8IG8ubGVuZ3RoOyByKyspIG4gPSBvW3JdLCB0LmluZGV4T2YobikgPj0gMCB8fCBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSwgbikgJiYgKGFbbl0gPSBlW25dKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICB2YXIgZ2UgPSBvLmEuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICBkOiAiTTAgMGgyNHYyNEgweiIsCiAgICAgICAgZmlsbDogIm5vbmUiCiAgICB9KSwgaGUgPSBvLmEuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICBkOiAiTTggNXYxNGwxMS03eiIKICAgIH0pLCBtZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuc3ZnUmVmLCBuID0gZS50aXRsZSwgciA9IHBlKGUsIFsgInN2Z1JlZiIsICJ0aXRsZSIgXSk7CiAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KCJzdmciLCBkZSh7CiAgICAgICAgICAgIGhlaWdodDogMjQsCiAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgMjQgMjQiLAogICAgICAgICAgICB3aWR0aDogMjQsCiAgICAgICAgICAgIHJlZjogdAogICAgICAgIH0sIHIpLCBuID8gby5hLmNyZWF0ZUVsZW1lbnQoInRpdGxlIiwgbnVsbCwgbikgOiBudWxsLCBnZSwgaGUpOwogICAgfSwgYmUgPSBvLmEuZm9yd2FyZFJlZigoZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudChtZSwgZGUoewogICAgICAgICAgICBzdmdSZWY6IHQKICAgICAgICB9LCBlKSk7CiAgICB9KSk7CiAgICBuLnA7CiAgICBmdW5jdGlvbiB2ZSgpIHsKICAgICAgICByZXR1cm4gKHZlID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gbikgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4sIHIpICYmIChlW3JdID0gbltyXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICAgIGZ1bmN0aW9uIHllKGUsIHQpIHsKICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4ge307CiAgICAgICAgdmFyIG4sIHIsIGEgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgICAgICAgICAgdmFyIG4sIHIsIGEgPSB7fSwgbyA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICBmb3IgKHIgPSAwOyByIDwgby5sZW5ndGg7IHIrKykgbiA9IG9bcl0sIHQuaW5kZXhPZihuKSA+PSAwIHx8IChhW25dID0gZVtuXSk7CiAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgIH0oZSwgdCk7CiAgICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOwogICAgICAgICAgICBmb3IgKHIgPSAwOyByIDwgby5sZW5ndGg7IHIrKykgbiA9IG9bcl0sIHQuaW5kZXhPZihuKSA+PSAwIHx8IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLCBuKSAmJiAoYVtuXSA9IGVbbl0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYTsKICAgIH0KICAgIHZhciB3ZSA9IG8uYS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgIGQ6ICJNMCAwaDI0djI0SDB6IiwKICAgICAgICBmaWxsOiAibm9uZSIKICAgIH0pLCBrZSA9IG8uYS5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgIGQ6ICJNNiA2aDEydjEySDZ6IgogICAgfSksIHhlID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5zdmdSZWYsIG4gPSBlLnRpdGxlLCByID0geWUoZSwgWyAic3ZnUmVmIiwgInRpdGxlIiBdKTsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoInN2ZyIsIHZlKHsKICAgICAgICAgICAgaGVpZ2h0OiAyNCwKICAgICAgICAgICAgdmlld0JveDogIjAgMCAyNCAyNCIsCiAgICAgICAgICAgIHdpZHRoOiAyNCwKICAgICAgICAgICAgcmVmOiB0CiAgICAgICAgfSwgciksIG4gPyBvLmEuY3JlYXRlRWxlbWVudCgidGl0bGUiLCBudWxsLCBuKSA6IG51bGwsIHdlLCBrZSk7CiAgICB9LCBFZSA9IG8uYS5mb3J3YXJkUmVmKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KHhlLCB2ZSh7CiAgICAgICAgICAgIHN2Z1JlZjogdAogICAgICAgIH0sIGUpKTsKICAgIH0pKSwgU2UgPSAobi5wLCB7CiAgICAgICAgb3Blbl9pbl9uZXc6IEosCiAgICAgICAgY2xlYXI6IG9lLAogICAgICAgIHN0b3A6IEVlLAogICAgICAgIHBhdXNlOiBmZSwKICAgICAgICBwbGF5X2Fycm93OiBiZQogICAgfSksIE9lID0gT2JqZWN0KHIuYykoInNwYW4iKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIl9TdHlsZWRTcGFuIgogICAgfSkoWyAic3Zne2N1cnNvcjpwb2ludGVyO3RyYW5zaXRpb246YWxsIDAuNXMgY3ViaWMtYmV6aWVyKDAsMCwwLjIsMSk7Jjpob3Zlcntib3gtc2hhZG93OjBweCAycHggMXB4IC0xcHggcmdiYSgwLDAsMCwwLjIpLDBweCAxcHggMXB4IDBweCByZ2JhKDAsMCwwLDAuMTQpLDBweCAxcHggM3B4IDBweCByZ2JhKDAsMCwwLDAuMTIpO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwwLjU2KTt9fSIgXSksIENlID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5uYW1lLCBuID0gYihlLCBbICJuYW1lIiBdKSwgciA9IFNlW3RdOwogICAgICAgIHJldHVybiBhLmNyZWF0ZUVsZW1lbnQoT2UsIG51bGwsIGEuY3JlYXRlRWxlbWVudChyLCBuKSk7CiAgICB9LCBUZSA9IE9iamVjdChyLmMpKCJkaXYiKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIl9TdHlsZWREaXYiCiAgICB9KShbICJkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjsiIF0pLCBQZSA9IE9iamVjdChyLmMpKENlKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIl9TdHlsZWRJY29uIgogICAgfSkoWyAib3BhY2l0eTowO2N1cnNvcjp1bnNldCAhaW1wb3J0YW50OyIgXSk7CiAgICB2YXIgX2UgPSBPYmplY3QobC5iKSgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciBuOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHN0YXR1czogbnVsbCA9PT0gKG4gPSBlLmRvd25sb2FkLmRvd25sb2FkSXRlbXNbdC5mc0lkXSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdGF0dXMKICAgICAgICB9OwogICAgfSkpKG8uYS5tZW1vKChmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLmZzSWQsIG4gPSBlLnN0YXR1cywgciA9IHUuYS5hbGxEb3dubG9hZHNbdF0sIGEgPSBPYmplY3QobC5jKSgpOwogICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudChUZSwgbnVsbCwgT2JqZWN0KHAuYikoKS5pbkRpc2tTY3JlZW4gJiYgby5hLmNyZWF0ZUVsZW1lbnQoby5hLkZyYWdtZW50LCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudChDZSwgewogICAgICAgICAgICBuYW1lOiAicGxheV9hcnJvdyIsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGEoT2JqZWN0KGYuYykocikpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFzc05hbWU6ICIiLmNvbmNhdChbIGMuYi5kb3dubG9hZGluZywgYy5iLmluUXVldWVkIF0uaW5jbHVkZXMobikgfHwgci5pc0RpciA/ICJkaXNhYmxlZCIgOiAiIikKICAgICAgICB9KSwgby5hLmNyZWF0ZUVsZW1lbnQoQ2UsIHsKICAgICAgICAgICAgbmFtZTogInN0b3AiLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIHQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT09IGMuYi5kb3dubG9hZGluZykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5jb25maXJtKCLlgZzmraLlkI7lsIbpnIDopoHph43mlrDkuIvovb3vvIwg56Gu6K6k5ZCX77yfIikpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgYShmLmIuYWN0aW9ucy5mYWlsdXJlRG93bmxvYWQoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiByLnByb2dyZXNzLnN0YXR1cyA9IGMuYi5zdG9wcGVkLCAobnVsbCA9PT0gKGUgPSByLnByb2dyZXNzLnJlcXVlc3QpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWJvcnQpICYmIChudWxsID09PSAodCA9IHIucHJvZ3Jlc3MucmVxdWVzdCkgfHwgdm9pZCAwID09PSB0IHx8IHQuYWJvcnQoKSksIAogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoci5wcm9ncmVzcy5pbnRlcnZhbElkKSwgYShPYmplY3QoZi5hKSgpKSwgITE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsYXNzTmFtZTogIiIuY29uY2F0KFsgYy5iLmRvd25sb2FkaW5nLCBjLmIuaW5RdWV1ZWQgXS5pbmNsdWRlcyhuKSAmJiAhci5pc0RpciA/ICIiIDogImRpc2FibGVkIikKICAgICAgICB9KSksIG8uYS5jcmVhdGVFbGVtZW50KFBlLCB7CiAgICAgICAgICAgIG5hbWU6ICJjbGVhciIKICAgICAgICB9KSwgby5hLmNyZWF0ZUVsZW1lbnQoQ2UsIHsKICAgICAgICAgICAgbmFtZTogImNsZWFyIiwKICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgIHIgJiYgKChudWxsID09PSAoZSA9IHIucHJvZ3Jlc3MucmVxdWVzdCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5hYm9ydCkgJiYgci5wcm9ncmVzcy5yZXF1ZXN0LmFib3J0KCksIAogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChyLnByb2dyZXNzLmludGVydmFsSWQpLCByLnByb2dyZXNzLnN0YXR1cyA9PT0gYy5iLmRvd25sb2FkaW5nICYmIGEoZi5iLmFjdGlvbnMuZmFpbHVyZURvd25sb2FkKCkpLCAKICAgICAgICAgICAgICAgIGRlbGV0ZSB1LmEuYWxsRG93bmxvYWRzW3RdLCBhKGYuYi5hY3Rpb25zLnJlbW92ZUl0ZW0oewogICAgICAgICAgICAgICAgICAgIGZzSWQ6IHQKICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICBhKE9iamVjdChmLmEpKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfSkpOwogICAgfSkpKTsKICAgIHZhciBqZSA9IE9iamVjdChsLmIpKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIG47CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcGVyY2VudENvdW50OiBudWxsID09PSAobiA9IGUuZG93bmxvYWQuZG93bmxvYWRJdGVtc1t0LmZzSWRdKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnBlcmNlbnRDb3VudAogICAgICAgIH07CiAgICB9KSkoby5hLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUucGVyY2VudENvdW50OwogICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJwcm9ncmVzcy1yYWRpYWwgcHJvZ3Jlc3MtIi5jb25jYXQodCkKICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJvdmVybGF5IgogICAgICAgIH0sIHQsICIlIikpOwogICAgfSkpKTsKICAgIHZhciBJZSA9IE9iamVjdChsLmIpKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIG4sIHI7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc3BlZWRPdmVybGF5OiBudWxsID09PSAobiA9IGUuZG93bmxvYWQuZG93bmxvYWRJdGVtc1t0LmZzSWRdKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnNwZWVkT3ZlcmxheSwKICAgICAgICAgICAgc3RhdHVzOiBudWxsID09PSAociA9IGUuZG93bmxvYWQuZG93bmxvYWRJdGVtc1t0LmZzSWRdKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLnN0YXR1cwogICAgICAgIH07CiAgICB9KSkoby5hLm1lbW8oKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuc3BlZWRPdmVybGF5LCBuID0gZS5zdGF0dXM7CiAgICAgICAgcmV0dXJuIG4gJiYgbiAhPT0gYy5iLmRvd25sb2FkaW5nID8gbnVsbCA6IG8uYS5jcmVhdGVFbGVtZW50KG8uYS5GcmFnbWVudCwgbnVsbCwgdS5hLmZyaWVuZGx5RmlsZVNpemUodCksICIgL3MiKTsKICAgIH0pKSksIE5lID0gbig3KSwgQWUgPSBPYmplY3Qoci5jKShGKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIl9TdHlsZWRUYWIiCiAgICB9KShbICJtYXgtaGVpZ2h0OmNhbGMoNjB2aCAtIDU4cHgpO292ZXJmbG93OmF1dG87IiBdKSwgRGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLmNoaWxkcmVuLCBuID0gZS5uYW1lLCByID0gYihlLCBbICJjaGlsZHJlbiIsICJuYW1lIiBdKTsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoQWUsIE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICBuYW1lOiBuCiAgICAgICAgfSwgciksIG8uYS5jcmVhdGVFbGVtZW50KCJ0YWJsZSIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJ0aGVhZCIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgICAgICAgc2NvcGU6ICJjb2wiCiAgICAgICAgfSwgIuaWh+S7tiIpLCBvLmEuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICAgIHNjb3BlOiAiY29sIgogICAgICAgIH0sICLnm7Tpk74iKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgICBzY29wZTogImNvbCIKICAgICAgICB9LCAi5aSn5bCPIiksIG8uYS5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgICAgICAgc2NvcGU6ICJjb2wiCiAgICAgICAgfSwgIui/m+W6piIpLCBvLmEuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICAgIHNjb3BlOiAiY29sIgogICAgICAgIH0sICLpgJ/luqYiKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgICBzY29wZTogImNvbCIKICAgICAgICB9LCAi5pON5L2cIikpKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgdCkpKTsKICAgIH0sIFJlID0gbig1KSwgTWUgPSBuLm4oUmUpLCB6ZSA9IG4oMTEpLCBMZSA9IE9iamVjdChyLmMpKCJhIikud2l0aENvbmZpZyh7CiAgICAgICAgZGlzcGxheU5hbWU6ICJfU3R5bGVkQSIKICAgIH0pKFsgInBhZGRpbmctbGVmdDoxMHB4OyIgXSksIEZlID0gT2JqZWN0KHIuYykoInNwYW4iKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIl9TdHlsZWRTcGFuIgogICAgfSkoWyAicGFkZGluZy1yaWdodDoxMHB4OyIgXSksIFVlID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5jaGlsZHJlbiwgbiA9IGUuc2VsZWN0ZWQsIHIgPSBiKGUsIFsgImNoaWxkcmVuIiwgInNlbGVjdGVkIiBdKTsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoTGUsIE9iamVjdC5hc3NpZ24oewogICAgICAgICAgICBjbGFzc05hbWU6ICJnLWZsb2F0LWxlZnQgY3JlYXRlLWJ0LWJ1dHRvbiB1cGxvYWQtd3JhcHBlciBnLWJ1dHRvbiIuY29uY2F0KG4gPyAiIGctYnV0dG9uLWJsdWUiIDogIiIpLAogICAgICAgICAgICBocmVmOiAiamF2YXNjcmlwdDp2b2lkKDApOyIKICAgICAgICB9LCByKSwgby5hLmNyZWF0ZUVsZW1lbnQoRmUsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiZy1idXR0b24tcmlnaHQiCiAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogInRleHQiCiAgICAgICAgfSwgdCkpKTsKICAgIH0sIFdlID0gbigyMyksIFZlID0gbigxMCksICRlID0gT2JqZWN0KHIuYykoImRpdiIpLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiX1N0eWxlZERpdiIKICAgIH0pKFsgImRpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjsiIF0pLCBxZSA9IGEubWVtbygoZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gdS5hLmFsbERvd25sb2Fkc1tlLmZzSWRdLCBuID0gT2JqZWN0KGwuYykoKSwgciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSA9IE9iamVjdCh6ZS5hKShNZS5hLm1hcmsoKGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICB2YXIgciwgYTsKICAgICAgICAgICAgICAgIHJldHVybiBNZS5hLndyYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKDs7KSBzd2l0Y2ggKGUucHJldiA9IGUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ID0gMCwgciA9IHUuYS51aSwgYSA9IHUuYS51c2VyLCAhT2JqZWN0KHAuYikoKS5pblNoYXJlU2NyZWVuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gYSA/IHZvaWQgMCA6IGEuc2VsZikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLnRpcCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ2xvc2U6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogImxvYWRpbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiAi55Sf5oiQ6ZO+5o6l5LitLi4uIgogICAgICAgICAgICAgICAgICAgICAgICB9KSwgZS5uZXh0ID0gNywgbihPYmplY3QoV2UuZCkoKSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5oaWRlVGlwKCksIGUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgIHUuYS5kaWFsb2cuY29uZmlybSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIueUn+aIkOWFseS6q+mTvuaOpeehruiupCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiAn5bCG6Ieq5Yqo5Yib5bu656eB5pyJ6ZO+5o6l5Yiw5YWx5Lqr5pyN5Yqh5ZmoKDxzcGFuIHN0eWxlPSJjb2xvcjogcmVkIj7pmpDnp4HmlbDmja7kuI3mjqjojZDkvb/nlKg8L3NwYW4+KTxiciAvPuaYr+WQpue7p+e7re+8nycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN1cmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gT2JqZWN0KHplLmEpKE1lLmEubWFyaygoZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1lLmEud3JhcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7Oykgc3dpdGNoIChlLnByZXYgPSBlLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuYS51aS50aXAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ2xvc2U6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiAibG9hZGluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogIueUn+aIkOmTvuaOpeS4rS4uLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgbihPYmplY3QoV2UuYykodCkpLCByLmhpZGVUaXAoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBlLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZS5wcmV2ID0gMTIsIGUudDAgPSBlLmNhdGNoKDApLCBuZXcgRXJyb3IoIueUn+aIkOWFseS6q+mTvuaOpeWksei0pSIpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksIGUsIG51bGwsIFsgWyAwLCAxMiBdIF0pOwogICAgICAgICAgICB9KSkpOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgIH0oKSwgbyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSA9IE9iamVjdCh6ZS5hKShNZS5hLm1hcmsoKGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICAgIHJldHVybiBNZS5hLndyYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKDs7KSBzd2l0Y2ggKGUucHJldiA9IGUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wcmV2ID0gMCwgciA9IFZlLmEuZ2V0U3RhdGUoKS5pbnRlcmZhY2UuYXBwSWQsIHUuYS51aS50aXAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0Nsb3NlOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICJsb2FkaW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogIueUn+aIkOmTvuaOpeS4rS4uLiIKICAgICAgICAgICAgICAgICAgICAgICAgfSksIGUubmV4dCA9IDYsIG4oT2JqZWN0KFdlLmIpKFsgdCBdLCByKSk7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICBuKHMuYS5hY3Rpb25zLmNoYW5nZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rUG9ydGFsT3BlbjogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1LmEudWkuaGlkZVRpcCgpLCBlLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZS5wcmV2ID0gMTAsIGUudDAgPSBlLmNhdGNoKDApLCBuZXcgRXJyb3IoIueUn+aIkOWFseS6q+mTvuaOpeWksei0pSIpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksIGUsIG51bGwsIFsgWyAwLCAxMCBdIF0pOwogICAgICAgICAgICB9KSkpOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgIH0oKTsKICAgICAgICByZXR1cm4gYS5jcmVhdGVFbGVtZW50KCRlLCBudWxsLCBhLmNyZWF0ZUVsZW1lbnQoVWUsIHsKICAgICAgICAgICAgb25DbGljazogbwogICAgICAgIH0sICLmnKzlnLDnm7Tpk74iKSwgYS5jcmVhdGVFbGVtZW50KFVlLCB7CiAgICAgICAgICAgIG9uQ2xpY2s6IHIKICAgICAgICB9LCAi5YWx5Lqr55u06ZO+IikpOwogICAgfSkpOwogICAgdmFyIEJlID0gT2JqZWN0KGwuYikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBmc0lkTGlzdDogT2JqZWN0KE5lLmEpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5kb3dubG9hZC5kb3dubG9hZEl0ZW1zOwogICAgICAgICAgICB9KSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgfSkpKGUpCiAgICAgICAgfTsKICAgIH0pKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5mc0lkTGlzdCwgbiA9IGUubmFtZTsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoRGUsIHsKICAgICAgICAgICAgbmFtZTogbgogICAgICAgIH0sIHQubWFwKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGlmICghdS5hLmFsbERvd25sb2Fkc1tlXSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHZhciBuID0gdS5hLmFsbERvd25sb2Fkc1tlXSwgciA9IG4uc2VydmVyRmlsZW5hbWUsIGEgPSBuLnNpemU7CiAgICAgICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudCgidHIiLCB7CiAgICAgICAgICAgICAgICBrZXk6IHQsCiAgICAgICAgICAgICAgICBpZDogInJvdy0iICsgZQogICAgICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIHdvcmRCcmVhazogImJyZWFrLWFsbCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgciksIG8uYS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KHFlLCB7CiAgICAgICAgICAgICAgICBmc0lkOiBlCiAgICAgICAgICAgIH0pKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgdS5hLmZyaWVuZGx5RmlsZVNpemUoYSkpLCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAid3JhcCIKICAgICAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoamUsIHsKICAgICAgICAgICAgICAgIGZzSWQ6IGUKICAgICAgICAgICAgfSkpKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoSWUsIHsKICAgICAgICAgICAgICAgIGZzSWQ6IGUKICAgICAgICAgICAgfSkpLCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudChfZSwgewogICAgICAgICAgICAgICAgZnNJZDogZQogICAgICAgICAgICB9KSkpOwogICAgICAgIH0pKSk7CiAgICB9KSk7CiAgICB2YXIgSGUgPSBPYmplY3QobC5iKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGZzSWRMaXN0OiBPYmplY3QoTmUuYSkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLmRvd25sb2FkLmRvd25sb2FkSXRlbXM7CiAgICAgICAgICAgIH0pLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGUpLnNvcnQoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVt0XS5zdGF0dXMgPT09IGMuYi5kb3dubG9hZGluZyA/IC0xIDogMTsKICAgICAgICAgICAgICAgIH0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBjLmIuZG93bmxvYWRpbmcsIGMuYi5pblF1ZXVlZCBdLmluY2x1ZGVzKGVbdF0uc3RhdHVzKTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfSkpKGUpCiAgICAgICAgfTsKICAgIH0pKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5mc0lkTGlzdCwgbiA9IGUubmFtZTsKICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoRGUsIHsKICAgICAgICAgICAgbmFtZTogbgogICAgICAgIH0sIHQubWFwKChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGlmICghdS5hLmFsbERvd25sb2Fkc1tlXSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHZhciBuID0gdS5hLmFsbERvd25sb2Fkc1tlXSwgciA9IG4uc2VydmVyRmlsZW5hbWUsIGEgPSBuLnNpemU7CiAgICAgICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudCgidHIiLCB7CiAgICAgICAgICAgICAgICBrZXk6IHQsCiAgICAgICAgICAgICAgICBpZDogInJvdy0iICsgZQogICAgICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIHdvcmRCcmVhazogImJyZWFrLWFsbCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgciksIG8uYS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KHFlLCB7CiAgICAgICAgICAgICAgICBmc0lkOiBlCiAgICAgICAgICAgIH0pKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgdS5hLmZyaWVuZGx5RmlsZVNpemUoYSkpLCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAid3JhcCIKICAgICAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoamUsIHsKICAgICAgICAgICAgICAgIGZzSWQ6IGUKICAgICAgICAgICAgfSkpKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoSWUsIHsKICAgICAgICAgICAgICAgIGZzSWQ6IGUKICAgICAgICAgICAgfSkpLCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudChfZSwgewogICAgICAgICAgICAgICAgZnNJZDogZQogICAgICAgICAgICB9KSkpOwogICAgICAgIH0pKSk7CiAgICB9KSk7CiAgICB2YXIgUWUgPSBPYmplY3QobC5iKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGZzSWRMaXN0OiBPYmplY3QoTmUuYSkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLmRvd25sb2FkLmRvd25sb2FkSXRlbXM7CiAgICAgICAgICAgIH0pLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGUpLmZpbHRlcigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlW3RdLnN0YXR1cyA9PT0gYy5iLnN0b3BwZWQ7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0pKShlKQogICAgICAgIH07CiAgICB9KSkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuZnNJZExpc3QsIG4gPSBlLm5hbWU7CiAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KERlLCB7CiAgICAgICAgICAgIG5hbWU6IG4KICAgICAgICB9LCB0Lm1hcCgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBpZiAoIXUuYS5hbGxEb3dubG9hZHNbZV0pIHJldHVybiBudWxsOwogICAgICAgICAgICB2YXIgbiA9IHUuYS5hbGxEb3dubG9hZHNbZV0sIHIgPSBuLnNlcnZlckZpbGVuYW1lLCBhID0gbi5zaXplOwogICAgICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoInRyIiwgewogICAgICAgICAgICAgICAga2V5OiB0LAogICAgICAgICAgICAgICAgaWQ6ICJyb3ctIiArIGUKICAgICAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICB3b3JkQnJlYWs6ICJicmVhay1hbGwiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHIpLCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudChxZSwgewogICAgICAgICAgICAgICAgZnNJZDogZQogICAgICAgICAgICB9KSksIG8uYS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIHUuYS5mcmllbmRseUZpbGVTaXplKGEpKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIndyYXAiCiAgICAgICAgICAgIH0sIG8uYS5jcmVhdGVFbGVtZW50KGplLCB7CiAgICAgICAgICAgICAgICBmc0lkOiBlCiAgICAgICAgICAgIH0pKSksIG8uYS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KEllLCB7CiAgICAgICAgICAgICAgICBmc0lkOiBlCiAgICAgICAgICAgIH0pKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoX2UsIHsKICAgICAgICAgICAgICAgIGZzSWQ6IGUKICAgICAgICAgICAgfSkpKTsKICAgICAgICB9KSkpOwogICAgfSkpOwogICAgdmFyIEdlID0gT2JqZWN0KGwuYikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBmc0lkTGlzdDogT2JqZWN0KE5lLmEpKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5kb3dubG9hZC5kb3dubG9hZEl0ZW1zOwogICAgICAgICAgICB9KSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhlKS5maWx0ZXIoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVt0XS5zdGF0dXMgPT09IGMuYi5jb21wbGV0ZWQ7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0pKShlKQogICAgICAgIH07CiAgICB9KSkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuZnNJZExpc3QsIG4gPSBlLm5hbWU7CiAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KERlLCB7CiAgICAgICAgICAgIG5hbWU6IG4KICAgICAgICB9LCB0Lm1hcCgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBpZiAoIXUuYS5hbGxEb3dubG9hZHNbZV0pIHJldHVybiBudWxsOwogICAgICAgICAgICB2YXIgbiA9IHUuYS5hbGxEb3dubG9hZHNbZV0sIHIgPSBuLnNlcnZlckZpbGVuYW1lLCBhID0gbi5zaXplOwogICAgICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoInRyIiwgewogICAgICAgICAgICAgICAga2V5OiB0LAogICAgICAgICAgICAgICAgaWQ6ICJyb3ctIiArIGUKICAgICAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgewogICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICB3b3JkQnJlYWs6ICJicmVhay1hbGwiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHIpLCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudChxZSwgewogICAgICAgICAgICAgICAgZnNJZDogZQogICAgICAgICAgICB9KSksIG8uYS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIHUuYS5mcmllbmRseUZpbGVTaXplKGEpKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogIndyYXAiCiAgICAgICAgICAgIH0sIG8uYS5jcmVhdGVFbGVtZW50KGplLCB7CiAgICAgICAgICAgICAgICBmc0lkOiBlCiAgICAgICAgICAgIH0pKSksIG8uYS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KEllLCB7CiAgICAgICAgICAgICAgICBmc0lkOiBlCiAgICAgICAgICAgIH0pKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoX2UsIHsKICAgICAgICAgICAgICAgIGZzSWQ6IGUKICAgICAgICAgICAgfSkpKTsKICAgICAgICB9KSkpOwogICAgfSkpOwogICAgdmFyIEtlID0gT2JqZWN0KGwuYikoKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkb3dubG9hZE1vZGFsT3BlbjogZS5pbnRlcmZhY2UuZG93bmxvYWRNb2RhbE9wZW4KICAgICAgICB9OwogICAgfSkpKChmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLmRvd25sb2FkTW9kYWxPcGVuLCBuID0gT2JqZWN0KGwuYykoKSwgciA9IG0oT2JqZWN0KGEudXNlU3RhdGUpKDApLCAyKSwgaSA9IHJbMF0sIHUgPSByWzFdOwogICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudChULCB7CiAgICAgICAgICAgIG9wZW46IHQsCiAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIG4ocy5hLmFjdGlvbnMuY2hhbmdlKHsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZE1vZGFsT3BlbjogITEKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIG8uYS5jcmVhdGVFbGVtZW50KFEsIHsKICAgICAgICAgICAgYWN0aXZlVGFiOiBpLAogICAgICAgICAgICBrZXk6ICJ0YWJzIiwKICAgICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHUodCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudChCZSwgewogICAgICAgICAgICBuYW1lOiAi5omA5pyJ5Lu75YqhIgogICAgICAgIH0pLCBvLmEuY3JlYXRlRWxlbWVudChIZSwgewogICAgICAgICAgICBuYW1lOiAi5LiL6L295LitIgogICAgICAgIH0pLCBvLmEuY3JlYXRlRWxlbWVudChRZSwgewogICAgICAgICAgICBuYW1lOiAi5bey5YGc5q2iIgogICAgICAgIH0pLCBvLmEuY3JlYXRlRWxlbWVudChHZSwgewogICAgICAgICAgICBuYW1lOiAi5bey5a6M5oiQIgogICAgICAgIH0pKSk7CiAgICB9KSksIFllID0gbigyNyksIFhlID0gci5jLmZpZWxkc2V0LndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiRm9ybV9fRm9ybUZpZWxkIiwKICAgICAgICBjb21wb25lbnRJZDogInNjLTFjc3FyZ2YtMCIKICAgIH0pKFsgImNsZWFyOmJvdGg7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6MXB4O21hcmdpbjowIDAgMTBweCAwO2JvcmRlcjowOz4gbGFiZWwsbGVnZW5ke3dpZHRoOjI1JTtmbG9hdDpsZWZ0O3BhZGRpbmctcmlnaHQ6MTBweDtmb250LXNpemU6OTAlO2NvbG9yOiMwMDA7fSYgPiAqOm50aC1jaGlsZCgyKXt3aWR0aDo3NSU7ZmxvYXQ6cmlnaHQ7fUBtZWRpYSAobWluLXdpZHRoOjEyMDBweCl7JiA+IGxhYmVsLGxlZ2VuZHt0ZXh0LWFsaWduOnJpZ2h0O319QG1lZGlhIChtYXgtd2lkdGg6NjAwcHgpe21hcmdpbjowIDAgMTVweCAwOyYgPiBsYWJlbCxsZWdlbmR7d2lkdGg6MTAwJTtmbG9hdDpub25lO21hcmdpbjowIDAgNXB4IDA7fSYgPiAqOm50aC1jaGlsZCgyKXt3aWR0aDoxMDAlO2Zsb2F0Om5vbmU7fWlucHV0W3R5cGU9J3RleHQnXSxpbnB1dFt0eXBlPSdlbWFpbCddLGlucHV0W3R5cGU9J3VybCddLGlucHV0W3R5cGU9J3Bhc3N3b3JkJ10sdGV4dGFyZWEsc2VsZWN0e3dpZHRoOjEwMCU7fX0iIF0pLCBaZSA9IHIuYy5mb3JtLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiRm9ybSIsCiAgICAgICAgY29tcG9uZW50SWQ6ICJzYy0xY3NxcmdmLTEiCiAgICB9KShbICJ0ZXh0LWFsaWduOmxlZnQ7bWFyZ2luOjEwcHg7Ym9yZGVyOjFweCBzb2xpZDtib3JkZXItcmFkaXVzOjNweDtwYWRkaW5nOjVweDtmb250LWZhbWlseTpzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxM3B4O2xldHRlci1zcGFjaW5nOjFweDsmICp7Ym94LXNpemluZzpib3JkZXItYm94O31pbnB1dFt0eXBlPSd0ZXh0J10saW5wdXRbdHlwZT0nZW1haWwnXSxpbnB1dFt0eXBlPSd1cmwnXSxpbnB1dFt0eXBlPSdwYXNzd29yZCddLHRleHRhcmVhe3dpZHRoOjEwMCU7Ym9yZGVyLXRvcDoxcHggc29saWQgI2NjYztib3JkZXItbGVmdDoxcHggc29saWQgI2NjYztib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNlZWU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTt9aW5wdXRbdHlwZT0ndGV4dCddLGlucHV0W3R5cGU9J2VtYWlsJ10saW5wdXRbdHlwZT0ndXJsJ10saW5wdXRbdHlwZT0ncGFzc3dvcmQnXXt3aWR0aDo1MCU7fWlucHV0W3R5cGU9J2NoZWNrYm94J117dHJhbnNmb3JtOnNjYWxlKDEuMik7fXNlbGVjdHttaW4td2lkdGg6NTBweDt9aW5wdXRbdHlwZT0ndGV4dCddOmZvY3VzLGlucHV0W3R5cGU9J2VtYWlsJ106Zm9jdXMsaW5wdXRbdHlwZT0ndXJsJ106Zm9jdXMsaW5wdXRbdHlwZT0ncGFzc3dvcmQnXTpmb2N1cyx0ZXh0YXJlYTpmb2N1c3tvdXRsaW5lOjA7Ym9yZGVyLWNvbG9yOiM0Njk3ZTQ7fSIgXSksIEplID0gT2JqZWN0KHIuYykoImRpdiIpLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiX1N0eWxlZERpdiIKICAgIH0pKFsgIi5tb2RhbC13aW5kb3d7bWF4LXdpZHRoOjUwMHB4O30iIF0pLCBldCA9IE9iamVjdChyLmMpKCJkaXYiKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIl9TdHlsZWREaXYyIgogICAgfSkoWyAiZm9udC1zaXplOjkwJTtjb2xvcjojOTk5OyIgXSk7CiAgICB2YXIgdHQgPSBPYmplY3QobC5iKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvbmZpZ01vZGFsT3BlbjogZS5pbnRlcmZhY2UuY29uZmlnTW9kYWxPcGVuLAogICAgICAgICAgICBhdXRvU3RhcnQ6IGUuaW50ZXJmYWNlLmF1dG9TdGFydCwKICAgICAgICAgICAgZG93bmxvYWRhYmxlOiBPYmplY3QoZC5hKShlKSwKICAgICAgICAgICAgbWF4RG93bmxvYWRDb3VudDogZS5pbnRlcmZhY2UubWF4RG93bmxvYWRDb3VudCwKICAgICAgICAgICAgYXBwSWQ6IGUuaW50ZXJmYWNlLmFwcElkCiAgICAgICAgfTsKICAgIH0pLCAoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNsb3NlTW9kYWw6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUocy5hLmFjdGlvbnMuY2hhbmdlKHsKICAgICAgICAgICAgICAgICAgICBjb25maWdNb2RhbE9wZW46ICExCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldEF1dG9TdGFydDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZShzLmEuYWN0aW9ucy5jaGFuZ2UoewogICAgICAgICAgICAgICAgICAgIGF1dG9TdGFydDogdC50YXJnZXQuY2hlY2tlZAogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXRNYXhEb3dubG9hZENvdW50OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHBhcnNlSW50KHQudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgICAgIGUocy5hLmFjdGlvbnMuY2hhbmdlKHsKICAgICAgICAgICAgICAgICAgICBtYXhEb3dubG9hZENvdW50OiBuCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNldEFwcElkOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHQudGFyZ2V0LnZhbHVlOwogICAgICAgICAgICAgICAgIS9eXGQrJC8udGVzdChuKSAmJiBuIHx8IGUocy5hLmFjdGlvbnMuY2hhbmdlKHsKICAgICAgICAgICAgICAgICAgICBhcHBJZDogbgogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0pKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5jb25maWdNb2RhbE9wZW4sIG4gPSBlLmF1dG9TdGFydCwgciA9IGUubWF4RG93bmxvYWRDb3VudCwgYSA9IGUuY2xvc2VNb2RhbCwgaSA9IGUuc2V0QXV0b1N0YXJ0LCBsID0gZS5zZXRNYXhEb3dubG9hZENvdW50LCBjID0gZS5zZXRBcHBJZCwgcyA9IGUuYXBwSWQ7CiAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KEplLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudChULCB7CiAgICAgICAgICAgIG9wZW46IHQsCiAgICAgICAgICAgIGNsb3NlOiBhCiAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoWmUsIHsKICAgICAgICAgICAgYWN0aW9uOiAiIyIKICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgiaGVhZGVyIiwgewogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgbWFyZ2luOiAiMCAwIDIwcHggMCIKICAgICAgICAgICAgfQogICAgICAgIH0sIG8uYS5jcmVhdGVFbGVtZW50KCJoMiIsIHsKICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIG1hcmdpbjogIjAgMCA1cHggMCIKICAgICAgICAgICAgfQogICAgICAgIH0sICLkuIvovb3orr7nva4iKSwgby5hLmNyZWF0ZUVsZW1lbnQoZXQsIG51bGwsICLlpoLmnpzkuIvovb3nu4/luLjlh7rplJnvvIzlu7rorq7lsIbkuIvovb3mlbDorr7nva7kuLoxIikpLCBvLmEuY3JlYXRlRWxlbWVudChYZSwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoImxhYmVsIiwgewogICAgICAgICAgICBodG1sRm9yOiAiYXV0by1zdGFydCIKICAgICAgICB9LCAi6Ieq5Yqo5LiL6L29IiksIG8uYS5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudCgiaW5wdXQiLCB7CiAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsCiAgICAgICAgICAgIG5hbWU6ICJjaGVja2JveCIsCiAgICAgICAgICAgIHZhbHVlOiAidHJ1ZSIsCiAgICAgICAgICAgIGNoZWNrZWQ6IG4sCiAgICAgICAgICAgIGlkOiAiYXV0by1zdGFydCIsCiAgICAgICAgICAgIHRhYkluZGV4OiAxLAogICAgICAgICAgICBvbkNoYW5nZTogaQogICAgICAgIH0pKSksIG8uYS5jcmVhdGVFbGVtZW50KFhlLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudCgibGVnZW5kIiwgbnVsbCwgIuacgOWkp+WQjOaXtuS4i+i9veaVsCIpLCBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIsIHsKICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiByLAogICAgICAgICAgICBpZDogIm1heC1kb3dubG9hZC1jb3VudCIsCiAgICAgICAgICAgIGNsYXNzTmFtZTogImZpZWxkIHNlbGVjdCBtZWRpdW0iLAogICAgICAgICAgICB0YWJJbmRleDogMiwKICAgICAgICAgICAgb25DaGFuZ2U6IGwKICAgICAgICB9LCBPYmplY3QoWWUuYSkoQXJyYXkodS5hLm1heERvd25sb2FkQ291bnQpLmtleXMoKSkubWFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiArK2U7CiAgICAgICAgfSkpLm1hcCgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICByZXR1cm4gby5hLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIsIHsKICAgICAgICAgICAgICAgIGtleTogdCwKICAgICAgICAgICAgICAgIHZhbHVlOiBlCiAgICAgICAgICAgIH0sIGUpOwogICAgICAgIH0pKSkpKSwgby5hLmNyZWF0ZUVsZW1lbnQoWGUsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJsZWdlbmQiLCBudWxsLCAiQVBQIElEIiwgby5hLmNyZWF0ZUVsZW1lbnQoInNtYWxsIiwgbnVsbCwgIijnqbrlgLzlsIbph4fnlKjpmo/mnLrmlbDlgLwpIikpLCBvLmEuY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoImlucHV0IiwgewogICAgICAgICAgICB2YWx1ZTogcywKICAgICAgICAgICAgb25DaGFuZ2U6IGMKICAgICAgICB9KSkpKSkpOwogICAgfSkpLCBudCA9IG4oMTIpOwogICAgZnVuY3Rpb24gcnQoKSB7CiAgICAgICAgdmFyIGUgPSB2KFsgJ1xuICBAaW1wb3J0IHVybChodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9Tm90bytTYW5zKTtcbiAgYm9keSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzJmMzQzOTtcbiAgICBmb250LWZhbWlseTogIk5vdG8gU2FucyIsIHNhbnMtc2VyaWY7XG4gIH1cblxuICAud3JhcCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogQmFyIGNvbnRhaW5lclxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC5wcm9ncmVzcy1yYWRpYWwge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogNTBweDtcbiAgICBoZWlnaHQ6IDUwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIGJvcmRlcjogMnB4IHNvbGlkICMyZjM0Mzk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdG9tYXRvO1xuICAgIHRyYW5zaXRpb246IGFsbCAxcyBlYXNlLW91dDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cbiAgLnByb2dyZXNzLXJhZGlhbDpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogIzJlNmRhNDtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogT3B0aW9uYWwgY2VudGVyZWQgY2lyY2xlIHcvdGV4dFxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC5wcm9ncmVzcy1yYWRpYWwgLm92ZXJsYXkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMzBweDtcbiAgICBoZWlnaHQ6IDMwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmRlODtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbGluZS1oZWlnaHQ6IDJyZW07XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBNaXhpbiBmb3IgcHJvZ3Jlc3MtJSBjbGFzc1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC5wcm9ncmVzcy0wIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCg5MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy0xIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCg5My42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTIge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDk3LjJkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMTAwLjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMTA0LjRkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMTA4ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTYge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDExMS42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTcge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDExNS4yZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTgge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDExOC44ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDEyMi40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTEwIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxMjZkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMTEge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDEyOS42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTEyIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxMzMuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy0xMyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMTM2LjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMTQge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDE0MC40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTE1IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxNDRkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMTYge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDE0Ny42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTE3IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxNTEuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy0xOCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMTU0LjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMTkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDE1OC40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTIwIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxNjJkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMjEge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDE2NS42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTIyIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxNjkuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy0yMyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMTcyLjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMjQge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDE3Ni40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTI1IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxODBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMjYge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDE4My42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTI3IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxODcuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy0yOCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMTkwLjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMjkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDE5NC40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTMwIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgxOThkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMzEge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDIwMS42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTMyIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyMDUuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy0zMyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjA4LjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMzQge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDIxMi40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTM1IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyMTZkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMzYge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDIxOS42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTM3IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyMjMuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy0zOCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjI2LjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMzkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDIzMC40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTQwIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyMzRkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNDEge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDIzNy42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTQyIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNDEuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy00MyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjQ0LjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNDQge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI0OC40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTQ1IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNTJkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNDYge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI1NS42ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTQ3IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICMyZjM0MzkgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNTkuMmRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy00OCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMmYzNDM5IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjYyLjhkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNDkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzJmMzQzOSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI2Ni40ZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTUwIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTkwZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTUxIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTg2LjRkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNTIge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtODIuOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy01MyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC03OS4yZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTU0IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTc1LjZkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNTUge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtNzJkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNTYge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtNjguNGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy01NyB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC02NC44ZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTU4IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTYxLjJkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNTkge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtNTcuNmRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy02MCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC01NGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy02MSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC01MC40ZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTYyIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTQ2LjhkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNjMge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtNDMuMmRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy02NCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC0zOS42ZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTY1IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTM2ZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTY2IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTMyLjRkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNjcge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtMjguOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy02OCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC0yNS4yZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTY5IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTIxLjZkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNzAge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtMThkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNzEge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgtMTQuNGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy03MiB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC0xMC44ZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTczIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoLTcuMmRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy03NCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KC0zLjZkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtNzUge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgwZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTc2IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoMy42ZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTc3IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoNy4yZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTc4IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoMTAuOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy03OSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDE0LjRkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtODAge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgxOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy04MSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDIxLjZkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtODIge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgyNS4yZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTgzIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoMjguOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy04NCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDMyLjRkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtODUge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCgzNmRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy04NiB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDM5LjZkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtODcge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg0My4yZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTg4IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoNDYuOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy04OSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDUwLjRkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtOTAge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg1NGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy05MSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDU3LjZkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtOTIge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg2MS4yZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTkzIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoNjQuOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy05NCB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDY4LjRkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtOTUge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg3MmRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy05NiB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDc1LjZkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtOTcge1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg3OS4yZGVnLCAjZmY2MzQ3IDUwJSwgcmdiYSgwLCAwLCAwLCAwKSA1MCUsIHJnYmEoMCwgMCwgMCwgMCkpLCBsaW5lYXItZ3JhZGllbnQoMjcwZGVnLCAjZmY2MzQ3IDUwJSwgIzJmMzQzOSA1MCUsICMyZjM0MzkpO1xuICB9XG5cbiAgLnByb2dyZXNzLTk4IHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoODIuOGRlZywgI2ZmNjM0NyA1MCUsIHJnYmEoMCwgMCwgMCwgMCkgNTAlLCByZ2JhKDAsIDAsIDAsIDApKSwgbGluZWFyLWdyYWRpZW50KDI3MGRlZywgI2ZmNjM0NyA1MCUsICMyZjM0MzkgNTAlLCAjMmYzNDM5KTtcbiAgfVxuXG4gIC5wcm9ncmVzcy05OSB7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDg2LjRkZWcsICNmZjYzNDcgNTAlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuICAucHJvZ3Jlc3MtMTAwIHtcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICNmZjYzNDcgNTIlLCByZ2JhKDAsIDAsIDAsIDApIDUwJSwgcmdiYSgwLCAwLCAwLCAwKSksIGxpbmVhci1ncmFkaWVudCgyNzBkZWcsICNmZjYzNDcgNTAlLCAjMmYzNDM5IDUwJSwgIzJmMzQzOSk7XG4gIH1cblxuXG4gIHRhYmxlIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgdGFibGUtbGF5b3V0OiBmaXhlZDtcbiAgfVxuXG4gIHRhYmxlIGNhcHRpb24ge1xuICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgbWFyZ2luOiAuNWVtIDAgLjc1ZW07XG4gIH1cblxuICB0YWJsZSB0ciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgIHBhZGRpbmc6IC4zNWVtO1xuICB9XG5cbiAgdGFibGUgdGgsXG4gIHRhYmxlIHRkIHtcbiAgICBwYWRkaW5nOiAuNjI1ZW07XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG5cbiAgdGFibGUgdGgge1xuICAgIGZvbnQtc2l6ZTogLjg1ZW07XG4gICAgbGV0dGVyLXNwYWNpbmc6IC4xZW07XG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgfVxuXG4gIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgdGFibGUge1xuICAgICAgYm9yZGVyOiAwO1xuICAgIH1cblxuICAgIHRhYmxlIGNhcHRpb24ge1xuICAgICAgZm9udC1zaXplOiAxLjNlbTtcbiAgICB9XG5cbiAgICB0YWJsZSB0aGVhZCB7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBjbGlwOiByZWN0KDAgMCAwIDApO1xuICAgICAgaGVpZ2h0OiAxcHg7XG4gICAgICBtYXJnaW46IC0xcHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgcGFkZGluZzogMDtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHdpZHRoOiAxcHg7XG4gICAgfVxuXG4gICAgdGFibGUgdHIge1xuICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkICNkZGQ7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIG1hcmdpbi1ib3R0b206IC42MjVlbTtcbiAgICB9XG5cbiAgICB0YWJsZSB0ZCB7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDtcbiAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgZm9udC1zaXplOiAuOGVtO1xuICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgfVxuXG4gICAgdGFibGUgdGQ6OmJlZm9yZSB7XG4gICAgICAvKlxuICAgICAgKiBhcmlhLWxhYmVsIGhhcyBubyBhZHZhbnRhZ2UsIGl0IHdvblwndCBiZSByZWFkIGluc2lkZSBhIHRhYmxlXG4gICAgICBjb250ZW50OiBhdHRyKGFyaWEtbGFiZWwpO1xuICAgICAgKi9cbiAgICAgIGNvbnRlbnQ6IGF0dHIoZGF0YS1sYWJlbCk7XG4gICAgICBmbG9hdDogbGVmdDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICB9XG5cbiAgICB0YWJsZSB0ZDpsYXN0LWNoaWxkIHtcbiAgICAgIGJvcmRlci1ib3R0b206IDA7XG4gICAgfVxuICB9XG4gIHByZS5jb2RlIHtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIGJhY2tncm91bmQ6IHJnYigyNTAsIDI1MCwgMjUwKTtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgYm9yZGVyOiAwcHg7XG4gICAgYm94LXNoYWRvdzogcmdiYSgwLCAwLCAwLCAwLjIpIDBweCAwcHggNXB4IGluc2V0O1xuICAgIGNvbG9yOiAjNGQ0ZDRkO1xuICAgIGZvbnQtZmFtaWx5OiBNb25hY28sIENvbnNvbGFzLCAiQ291cmllciBOZXciLCBDb3VyaWVyLCBtb25vc3BhY2UsIHNhbnMtc2VyaWY7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIG91dGxpbmU6IDBweDtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBtYXgtaGVpZ2h0OiA1NXZoO1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lO1xuICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG4gIH1cblxuICAjZmxvYXRpbmctYnV0dG9ue1xuICAgIHdpZHRoOiA1NXB4O1xuICAgIGhlaWdodDogNTVweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgYmFja2dyb3VuZDogI2RiNDQzNztcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgYm90dG9tOiA1NXB4O1xuICAgIHJpZ2h0OiAzMnB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBib3gtc2hhZG93OiAwcHggMnB4IDVweCAjNjY2O1xuICB9XG5cbiAgLnBsdXN7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbWFyZ2luOiAwO1xuICAgIGxpbmUtaGVpZ2h0OiA1NXB4O1xuICAgIGZvbnQtc2l6ZTogMzhweDtcbiAgICBmb250LWZhbWlseTogXCdSb2JvdG9cJztcbiAgICBmb250LXdlaWdodDogMzAwO1xuICAgIGFuaW1hdGlvbjogcGx1cy1vdXQgMC4zcztcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcztcbiAgfVxuXG4gICNjb250YWluZXItZmxvYXRpbmd7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHdpZHRoOiA3MHB4O1xuICAgIGhlaWdodDogNzBweDtcbiAgICBib3R0b206IDMwcHg7XG4gICAgcmlnaHQ6IDMwcHg7XG4gICAgei1pbmRleDogNTA7XG4gIH1cblxuICAjY29udGFpbmVyLWZsb2F0aW5nOmhvdmVye1xuICAgIGhlaWdodDogNDAwcHg7XG4gICAgd2lkdGg6IDkwcHg7XG4gICAgcGFkZGluZzogMzBweDtcbiAgfVxuXG4gICNjb250YWluZXItZmxvYXRpbmc6aG92ZXIgLnBsdXN7XG4gICAgYW5pbWF0aW9uOiBwbHVzLWluIDAuMTVzIGxpbmVhcjtcbiAgICBhbmltYXRpb24tZmlsbC1tb2RlOiBmb3J3YXJkcztcbiAgfVxuXG4gIC5lZGl0e1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgYm90dG9tOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgcmlnaHQ6IDA7XG4gICAgcGFkZGluZzogMDtcbiAgICBvcGFjaXR5OiAwO1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBsaW5lLWhlaWdodDogNjVweDtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZVooLTcwZGVnKTtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcztcbiAgICBhbmltYXRpb246IGVkaXQtb3V0IDAuM3M7XG4gIH1cblxuICAjY29udGFpbmVyLWZsb2F0aW5nOmhvdmVyIC5lZGl0e1xuICAgIGFuaW1hdGlvbjogZWRpdC1pbiAwLjJzO1xuICAgIGFuaW1hdGlvbi1kZWxheTogMC4xcztcbiAgICBhbmltYXRpb24tZmlsbC1tb2RlOiBmb3J3YXJkcztcbiAgfVxuXG4gIEBrZXlmcmFtZXMgZWRpdC1pbntcbiAgICBmcm9tIHtvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHJvdGF0ZVooLTcwZGVnKTt9XG4gICAgdG8ge29wYWNpdHk6IDE7IHRyYW5zZm9ybTogcm90YXRlWigwZGVnKTt9XG4gIH1cblxuICBAa2V5ZnJhbWVzIGVkaXQtb3V0e1xuICAgIGZyb20ge29wYWNpdHk6IDE7IHRyYW5zZm9ybTogcm90YXRlWigwZGVnKTt9XG4gICAgdG8ge29wYWNpdHk6IDA7IHRyYW5zZm9ybTogcm90YXRlWigtNzBkZWcpO31cbiAgfVxuXG4gIEBrZXlmcmFtZXMgcGx1cy1pbntcbiAgICBmcm9tIHtvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHJvdGF0ZVooMGRlZyk7fVxuICAgIHRvIHtvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHJvdGF0ZVooMTgwZGVnKTt9XG4gIH1cblxuICBAa2V5ZnJhbWVzIHBsdXMtb3V0e1xuICAgIGZyb20ge29wYWNpdHk6IDA7IHRyYW5zZm9ybTogcm90YXRlWigxODBkZWcpO31cbiAgICB0byB7b3BhY2l0eTogMTsgdHJhbnNmb3JtOiByb3RhdGVaKDBkZWcpO31cbiAgfVxuICAubmRze1xuICAgIHdpZHRoOiA0MHB4O1xuICAgIGhlaWdodDogNDBweDtcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHotaW5kZXg6IDMwMDtcbiAgICB0cmFuc2Zvcm06ICBzY2FsZSgwKTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gIH1cblxuICAubmQxe1xuICAgIGJhY2tncm91bmQ6ICNkM2E0MTE7XG4gICAgcmlnaHQ6IDQwcHg7XG4gICAgYm90dG9tOiAxMjBweDtcbiAgICBhbmltYXRpb24tZGVsYXk6IDAuMnM7XG4gICAgYW5pbWF0aW9uOiBib3VuY2Utb3V0LW5kcyAwLjNzIGxpbmVhcjtcbiAgICBhbmltYXRpb24tZmlsbC1tb2RlOiAgZm9yd2FyZHM7XG4gIH1cbiAgQGtleWZyYW1lcyBib3VuY2UtbmRze1xuICAgIGZyb20ge29wYWNpdHk6IDA7fVxuICAgIHRvIHtvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHNjYWxlKDEpO31cbiAgfVxuXG4gIEBrZXlmcmFtZXMgYm91bmNlLW91dC1uZHN7XG4gICAgZnJvbSB7b3BhY2l0eTogMTsgdHJhbnNmb3JtOiBzY2FsZSgxKTt9XG4gICAgdG8ge29wYWNpdHk6IDA7IHRyYW5zZm9ybTogc2NhbGUoMCk7fVxuICB9XG5cbiAgI2NvbnRhaW5lci1mbG9hdGluZzpob3ZlciAubmRze1xuXG4gICAgYW5pbWF0aW9uOiBib3VuY2UtbmRzIDAuMXMgbGluZWFyO1xuICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6ICBmb3J3YXJkcztcbiAgfVxuICAucmVtaW5kZXJ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIHRvcDogMDtcbiAgICBib3R0b206IDA7XG4gICAgbGluZS1oZWlnaHQ6IDQwcHg7XG4gIH1cblxuICAubW9kdWxlLXl1bi10aXAge1xuICAgIHotaW5kZXg6IDk5OSAhaW1wb3J0YW50O1xuICB9XG4nIF0pOwogICAgICAgIHJldHVybiBydCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9LCBlOwogICAgfQogICAgd2luZG93Lm9udW5sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgbnQuYS5zZXRWYWx1ZShjLmMuaXRlbXMsIE9iamVjdC52YWx1ZXModS5hLmFsbERvd25sb2FkcykpLCB1LmEuc3RvcEFsbCgpOwogICAgfSwgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gVmUuYS5nZXRTdGF0ZSgpLmRvd25sb2FkLmRvd25sb2FkSXRlbXM7CiAgICAgICAgT2JqZWN0LnZhbHVlcyh0KS5zb21lKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBlLnN0YXR1cyA9PT0gYy5iLmRvd25sb2FkaW5nOwogICAgICAgIH0pKSAmJiAoZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnJldHVyblZhbHVlID0gIuacieacquWujOaIkOeahOS4i+i9veS7u+WKoe+8jCDnoa7orqTlhbPpl63lkJc/Iik7CiAgICB9OwogICAgdmFyIGF0ID0gT2JqZWN0KHIuYSkocnQoKSksIG90ID0gbigyMCksIGl0ID0gZnVuY3Rpb24oZSkgewogICAgICAgIEkobiwgZSk7CiAgICAgICAgdmFyIHQgPSB6KG4pOwogICAgICAgIGZ1bmN0aW9uIG4oZSkgewogICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdChQLmEpKHRoaXMsIG4pLCAociA9IHQuY2FsbCh0aGlzLCBlKSkuc3RhdGUgPSB7CiAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCwKICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbnVsbAogICAgICAgICAgICB9LCByLnJlUmVuZGVyQXBwID0gci5yZVJlbmRlckFwcC5iaW5kKFIocikpLCByOwogICAgICAgIH0KICAgICAgICByZXR1cm4gT2JqZWN0KF8uYSkobiwgWyB7CiAgICAgICAgICAgIGtleTogImNvbXBvbmVudERpZENhdGNoIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoewogICAgICAgICAgICAgICAgICAgIGVycm9yOiBlLAogICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogdAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICAgIGtleTogInJlUmVuZGVyQXBwIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBudWxsCiAgICAgICAgICAgICAgICB9KSwgVmUuYS5kaXNwYXRjaChzLmEuYWN0aW9ucy5zZXRFcnJvcih2b2lkIDApKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgICAga2V5OiAicmVuZGVyIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnByb3BzLmVycm9yIHx8IHRoaXMuc3RhdGUuZXJyb3I7CiAgICAgICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0LCBuID0gZS50b1N0cmluZygpICsgKHRoaXMuc3RhdGUuZXJyb3JJbmZvICYmIG90LmEgPyAnPGRldGFpbHMgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmUtd3JhcCI+Jy5jb25jYXQobnVsbCA9PT0gKHQgPSB0aGlzLnN0YXRlLmVycm9ySW5mbykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jb21wb25lbnRTdGFjaywgIjwvZGV0YWlscz4iKSA6ICIiKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdS5hLmRpYWxvZy5hbGVydCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgIG9uU3VyZTogdGhpcy5yZVJlbmRlckFwcCwKICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5yZVJlbmRlckFwcAogICAgICAgICAgICAgICAgICAgIH0pLCBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW47CiAgICAgICAgICAgIH0KICAgICAgICB9IF0pLCBuOwogICAgfShvLmEuQ29tcG9uZW50KSwgbHQgPSBPYmplY3QobC5iKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGVycm9yOiBlLmludGVyZmFjZS5lcnJvcgogICAgICAgIH07CiAgICB9KSkoaXQpLCB1dCA9IE9iamVjdChyLmMpKCJkaXYiKS53aXRoQ29uZmlnKHsKICAgICAgICBkaXNwbGF5TmFtZTogIl9TdHlsZWREaXYiCiAgICB9KShbICJoZWlnaHQ6NjB2aDtvdmVyZmxvdzpoaWRkZW47IiBdKTsKICAgIHZhciBjdCA9IE9iamVjdChsLmIpKChmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQ7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgb3BlbjogZS5pbnRlcmZhY2UubGlua1BvcnRhbE9wZW4sCiAgICAgICAgICAgIGRsaW5rczogbnVsbCA9PT0gKHQgPSBlLmxpbmsucmVzcG9uc2UpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGxpbmsKICAgICAgICB9OwogICAgfSkpKChmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLm9wZW4sIG4gPSBlLmRsaW5rcywgciA9IE9iamVjdChsLmMpKCk7CiAgICAgICAgcmV0dXJuIHQgPyBvLmEuY3JlYXRlRWxlbWVudChULCB7CiAgICAgICAgICAgIG9wZW46ICEwLAogICAgICAgICAgICBub092ZXJsYXlDb2xvcjogITAsCiAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiByKHMuYS5hY3Rpb25zLmNoYW5nZSh7CiAgICAgICAgICAgICAgICAgICAgbGlua1BvcnRhbE9wZW46ICExCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCh1dCwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoInRhYmxlIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoInRoZWFkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoInRyIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgICBzY29wZTogImNvbCIKICAgICAgICB9LCAi5paH5Lu2IiksIG8uYS5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgICAgICAgc2NvcGU6ICJjb2wiCiAgICAgICAgfSwgIuWkp+WwjyIpLCBvLmEuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICAgIHNjb3BlOiAiY29sIgogICAgICAgIH0sICLmk43kvZwiKSkpLCBvLmEuY3JlYXRlRWxlbWVudCgidGJvZHkiLCBudWxsLCBudWxsID09IG4gPyB2b2lkIDAgOiBuLm1hcCgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgbiA9IHUuYS5hbGxEb3dubG9hZHNbZS5mc19pZF07CiAgICAgICAgICAgIHJldHVybiBvLmEuY3JlYXRlRWxlbWVudCgidHIiLCB7CiAgICAgICAgICAgICAgICBrZXk6IHQKICAgICAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgbi5zZXJ2ZXJGaWxlbmFtZSksIG8uYS5jcmVhdGVFbGVtZW50KCJ0ZCIsIG51bGwsIHUuYS5mcmllbmRseUZpbGVTaXplKG4uc2l6ZSkpLCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCBudWxsLCBvLmEuY3JlYXRlRWxlbWVudCgiYSIsIHsKICAgICAgICAgICAgICAgIGhyZWY6IGUubGluawogICAgICAgICAgICB9LCAi54K55Ye75LiL6L29IikpKTsKICAgICAgICB9KSkpKSkpIDogbnVsbDsKICAgIH0pKSwgc3QgPSBPYmplY3Qoci5jKSgiZGl2Iikud2l0aENvbmZpZyh7CiAgICAgICAgZGlzcGxheU5hbWU6ICJfU3R5bGVkRGl2IgogICAgfSkoWyAiaGVpZ2h0OjYwdmg7b3ZlcmZsb3c6aGlkZGVuOyIgXSk7CiAgICB2YXIgZnQgPSBPYmplY3QobC5iKSgoZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG9wZW46IGUuaW50ZXJmYWNlLnNoYXJlTGlua3NQb3J0YWxPcGVuLAogICAgICAgICAgICByZXNwb25zZTogZS5saW5rLnNoYXJlTGluay5yZXNwb25zZQogICAgICAgIH07CiAgICB9KSkoKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUub3BlbiwgbiA9IGUucmVzcG9uc2UsIHIgPSBPYmplY3QobC5jKSgpOwogICAgICAgIHJldHVybiB0ID8gby5hLmNyZWF0ZUVsZW1lbnQoVCwgewogICAgICAgICAgICBvcGVuOiAhMCwKICAgICAgICAgICAgbm9PdmVybGF5Q29sb3I6ICEwLAogICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcihzLmEuYWN0aW9ucy5jaGFuZ2UoewogICAgICAgICAgICAgICAgICAgIHNoYXJlTGlua3NQb3J0YWxPcGVuOiAhMQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgby5hLmNyZWF0ZUVsZW1lbnQoc3QsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJ0YWJsZSIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJ0aGVhZCIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJ0ciIsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KCJ0aCIsIHsKICAgICAgICAgICAgc2NvcGU6ICJjb2wiCiAgICAgICAgfSwgIuaWh+S7tiIpLCBvLmEuY3JlYXRlRWxlbWVudCgidGgiLCB7CiAgICAgICAgICAgIHNjb3BlOiAiY29sIgogICAgICAgIH0sICLlpKflsI8iKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRoIiwgewogICAgICAgICAgICBzY29wZTogImNvbCIKICAgICAgICB9LCAi5pON5L2cIikpKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRib2R5IiwgbnVsbCwgbnVsbCA9PSBuID8gdm9pZCAwIDogbi5tYXAoKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KCJ0ciIsIHsKICAgICAgICAgICAgICAgIGtleTogdAogICAgICAgICAgICB9LCBvLmEuY3JlYXRlRWxlbWVudCgidGQiLCB7CiAgICAgICAgICAgICAgICAiZGF0YS1sYWJlbCI6ICJmaWxlbmFtZSIsCiAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIHdvcmRCcmVhazogImJyZWFrLWFsbCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgZS5uYW1lKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgZS5zaXplKSwgby5hLmNyZWF0ZUVsZW1lbnQoInRkIiwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoImEiLCB7CiAgICAgICAgICAgICAgICBocmVmOiBlLmxpbmsKICAgICAgICAgICAgfSwgIueCueWHu+S4i+i9vSIpKSk7CiAgICAgICAgfSkpKSkpKSA6IG51bGw7CiAgICB9KSksIGR0ID0gT2JqZWN0KHIuYykoImRpdiIpLndpdGhDb25maWcoewogICAgICAgIGRpc3BsYXlOYW1lOiAiX1N0eWxlZERpdiIKICAgIH0pKFsgImRpc3BsYXk6bm9uZTsiIF0pOwogICAgdC5hID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG8uYS5jcmVhdGVFbGVtZW50KG8uYS5GcmFnbWVudCwgbnVsbCwgby5hLmNyZWF0ZUVsZW1lbnQoZHQsIG51bGwsICJUb2RvIERvbuKAmXQga25vdyB0aGUgcmVhc29uLiBPbmNlIGRlbGV0ZSB0aGlzIGVsZW1lbnQsIFN0eWxlZC1jb21wb25lbnRzIHdpbGwgbm90IGxvYWQgcHJvcGVybHkuIiksIG8uYS5jcmVhdGVFbGVtZW50KGF0LCBudWxsKSwgby5hLmNyZWF0ZUVsZW1lbnQobHQsIG51bGwsIG8uYS5jcmVhdGVFbGVtZW50KEtlLCBudWxsKSwgby5hLmNyZWF0ZUVsZW1lbnQodHQsIG51bGwpLCBvLmEuY3JlYXRlRWxlbWVudChnLCBudWxsKSwgby5hLmNyZWF0ZUVsZW1lbnQoZnQsIG51bGwpLCBvLmEuY3JlYXRlRWxlbWVudChjdCwgbnVsbCkpKTsKICAgIH07Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciByID0gL14oKGNoaWxkcmVufGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MfGtleXxyZWZ8YXV0b0ZvY3VzfGRlZmF1bHRWYWx1ZXxkZWZhdWx0Q2hlY2tlZHxpbm5lckhUTUx8c3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nfHN1cHByZXNzSHlkcmF0aW9uV2FybmluZ3x2YWx1ZUxpbmt8YWNjZXB0fGFjY2VwdENoYXJzZXR8YWNjZXNzS2V5fGFjdGlvbnxhbGxvd3xhbGxvd1VzZXJNZWRpYXxhbGxvd1BheW1lbnRSZXF1ZXN0fGFsbG93RnVsbFNjcmVlbnxhbGxvd1RyYW5zcGFyZW5jeXxhbHR8YXN5bmN8YXV0b0NvbXBsZXRlfGF1dG9QbGF5fGNhcHR1cmV8Y2VsbFBhZGRpbmd8Y2VsbFNwYWNpbmd8Y2hhbGxlbmdlfGNoYXJTZXR8Y2hlY2tlZHxjaXRlfGNsYXNzSUR8Y2xhc3NOYW1lfGNvbHN8Y29sU3Bhbnxjb250ZW50fGNvbnRlbnRFZGl0YWJsZXxjb250ZXh0TWVudXxjb250cm9sc3xjb250cm9sc0xpc3R8Y29vcmRzfGNyb3NzT3JpZ2lufGRhdGF8ZGF0ZVRpbWV8ZGVjb2Rpbmd8ZGVmYXVsdHxkZWZlcnxkaXJ8ZGlzYWJsZWR8ZGlzYWJsZVBpY3R1cmVJblBpY3R1cmV8ZG93bmxvYWR8ZHJhZ2dhYmxlfGVuY1R5cGV8Zm9ybXxmb3JtQWN0aW9ufGZvcm1FbmNUeXBlfGZvcm1NZXRob2R8Zm9ybU5vVmFsaWRhdGV8Zm9ybVRhcmdldHxmcmFtZUJvcmRlcnxoZWFkZXJzfGhlaWdodHxoaWRkZW58aGlnaHxocmVmfGhyZWZMYW5nfGh0bWxGb3J8aHR0cEVxdWl2fGlkfGlucHV0TW9kZXxpbnRlZ3JpdHl8aXN8a2V5UGFyYW1zfGtleVR5cGV8a2luZHxsYWJlbHxsYW5nfGxpc3R8bG9hZGluZ3xsb29wfGxvd3xtYXJnaW5IZWlnaHR8bWFyZ2luV2lkdGh8bWF4fG1heExlbmd0aHxtZWRpYXxtZWRpYUdyb3VwfG1ldGhvZHxtaW58bWluTGVuZ3RofG11bHRpcGxlfG11dGVkfG5hbWV8bm9uY2V8bm9WYWxpZGF0ZXxvcGVufG9wdGltdW18cGF0dGVybnxwbGFjZWhvbGRlcnxwbGF5c0lubGluZXxwb3N0ZXJ8cHJlbG9hZHxwcm9maWxlfHJhZGlvR3JvdXB8cmVhZE9ubHl8cmVmZXJyZXJQb2xpY3l8cmVsfHJlcXVpcmVkfHJldmVyc2VkfHJvbGV8cm93c3xyb3dTcGFufHNhbmRib3h8c2NvcGV8c2NvcGVkfHNjcm9sbGluZ3xzZWFtbGVzc3xzZWxlY3RlZHxzaGFwZXxzaXplfHNpemVzfHNsb3R8c3BhbnxzcGVsbENoZWNrfHNyY3xzcmNEb2N8c3JjTGFuZ3xzcmNTZXR8c3RhcnR8c3RlcHxzdHlsZXxzdW1tYXJ5fHRhYkluZGV4fHRhcmdldHx0aXRsZXx0eXBlfHVzZU1hcHx2YWx1ZXx3aWR0aHx3bW9kZXx3cmFwfGFib3V0fGRhdGF0eXBlfGlubGlzdHxwcmVmaXh8cHJvcGVydHl8cmVzb3VyY2V8dHlwZW9mfHZvY2FifGF1dG9DYXBpdGFsaXplfGF1dG9Db3JyZWN0fGF1dG9TYXZlfGNvbG9yfGluZXJ0fGl0ZW1Qcm9wfGl0ZW1TY29wZXxpdGVtVHlwZXxpdGVtSUR8aXRlbVJlZnxvbnxyZXN1bHRzfHNlY3VyaXR5fHVuc2VsZWN0YWJsZXxhY2NlbnRIZWlnaHR8YWNjdW11bGF0ZXxhZGRpdGl2ZXxhbGlnbm1lbnRCYXNlbGluZXxhbGxvd1Jlb3JkZXJ8YWxwaGFiZXRpY3xhbXBsaXR1ZGV8YXJhYmljRm9ybXxhc2NlbnR8YXR0cmlidXRlTmFtZXxhdHRyaWJ1dGVUeXBlfGF1dG9SZXZlcnNlfGF6aW11dGh8YmFzZUZyZXF1ZW5jeXxiYXNlbGluZVNoaWZ0fGJhc2VQcm9maWxlfGJib3h8YmVnaW58Ymlhc3xieXxjYWxjTW9kZXxjYXBIZWlnaHR8Y2xpcHxjbGlwUGF0aFVuaXRzfGNsaXBQYXRofGNsaXBSdWxlfGNvbG9ySW50ZXJwb2xhdGlvbnxjb2xvckludGVycG9sYXRpb25GaWx0ZXJzfGNvbG9yUHJvZmlsZXxjb2xvclJlbmRlcmluZ3xjb250ZW50U2NyaXB0VHlwZXxjb250ZW50U3R5bGVUeXBlfGN1cnNvcnxjeHxjeXxkfGRlY2VsZXJhdGV8ZGVzY2VudHxkaWZmdXNlQ29uc3RhbnR8ZGlyZWN0aW9ufGRpc3BsYXl8ZGl2aXNvcnxkb21pbmFudEJhc2VsaW5lfGR1cnxkeHxkeXxlZGdlTW9kZXxlbGV2YXRpb258ZW5hYmxlQmFja2dyb3VuZHxlbmR8ZXhwb25lbnR8ZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZHxmaWxsfGZpbGxPcGFjaXR5fGZpbGxSdWxlfGZpbHRlcnxmaWx0ZXJSZXN8ZmlsdGVyVW5pdHN8Zmxvb2RDb2xvcnxmbG9vZE9wYWNpdHl8Zm9jdXNhYmxlfGZvbnRGYW1pbHl8Zm9udFNpemV8Zm9udFNpemVBZGp1c3R8Zm9udFN0cmV0Y2h8Zm9udFN0eWxlfGZvbnRWYXJpYW50fGZvbnRXZWlnaHR8Zm9ybWF0fGZyb218ZnJ8Znh8Znl8ZzF8ZzJ8Z2x5cGhOYW1lfGdseXBoT3JpZW50YXRpb25Ib3Jpem9udGFsfGdseXBoT3JpZW50YXRpb25WZXJ0aWNhbHxnbHlwaFJlZnxncmFkaWVudFRyYW5zZm9ybXxncmFkaWVudFVuaXRzfGhhbmdpbmd8aG9yaXpBZHZYfGhvcml6T3JpZ2luWHxpZGVvZ3JhcGhpY3xpbWFnZVJlbmRlcmluZ3xpbnxpbjJ8aW50ZXJjZXB0fGt8azF8azJ8azN8azR8a2VybmVsTWF0cml4fGtlcm5lbFVuaXRMZW5ndGh8a2VybmluZ3xrZXlQb2ludHN8a2V5U3BsaW5lc3xrZXlUaW1lc3xsZW5ndGhBZGp1c3R8bGV0dGVyU3BhY2luZ3xsaWdodGluZ0NvbG9yfGxpbWl0aW5nQ29uZUFuZ2xlfGxvY2FsfG1hcmtlckVuZHxtYXJrZXJNaWR8bWFya2VyU3RhcnR8bWFya2VySGVpZ2h0fG1hcmtlclVuaXRzfG1hcmtlcldpZHRofG1hc2t8bWFza0NvbnRlbnRVbml0c3xtYXNrVW5pdHN8bWF0aGVtYXRpY2FsfG1vZGV8bnVtT2N0YXZlc3xvZmZzZXR8b3BhY2l0eXxvcGVyYXRvcnxvcmRlcnxvcmllbnR8b3JpZW50YXRpb258b3JpZ2lufG92ZXJmbG93fG92ZXJsaW5lUG9zaXRpb258b3ZlcmxpbmVUaGlja25lc3N8cGFub3NlMXxwYWludE9yZGVyfHBhdGhMZW5ndGh8cGF0dGVybkNvbnRlbnRVbml0c3xwYXR0ZXJuVHJhbnNmb3JtfHBhdHRlcm5Vbml0c3xwb2ludGVyRXZlbnRzfHBvaW50c3xwb2ludHNBdFh8cG9pbnRzQXRZfHBvaW50c0F0WnxwcmVzZXJ2ZUFscGhhfHByZXNlcnZlQXNwZWN0UmF0aW98cHJpbWl0aXZlVW5pdHN8cnxyYWRpdXN8cmVmWHxyZWZZfHJlbmRlcmluZ0ludGVudHxyZXBlYXRDb3VudHxyZXBlYXREdXJ8cmVxdWlyZWRFeHRlbnNpb25zfHJlcXVpcmVkRmVhdHVyZXN8cmVzdGFydHxyZXN1bHR8cm90YXRlfHJ4fHJ5fHNjYWxlfHNlZWR8c2hhcGVSZW5kZXJpbmd8c2xvcGV8c3BhY2luZ3xzcGVjdWxhckNvbnN0YW50fHNwZWN1bGFyRXhwb25lbnR8c3BlZWR8c3ByZWFkTWV0aG9kfHN0YXJ0T2Zmc2V0fHN0ZERldmlhdGlvbnxzdGVtaHxzdGVtdnxzdGl0Y2hUaWxlc3xzdG9wQ29sb3J8c3RvcE9wYWNpdHl8c3RyaWtldGhyb3VnaFBvc2l0aW9ufHN0cmlrZXRocm91Z2hUaGlja25lc3N8c3RyaW5nfHN0cm9rZXxzdHJva2VEYXNoYXJyYXl8c3Ryb2tlRGFzaG9mZnNldHxzdHJva2VMaW5lY2FwfHN0cm9rZUxpbmVqb2lufHN0cm9rZU1pdGVybGltaXR8c3Ryb2tlT3BhY2l0eXxzdHJva2VXaWR0aHxzdXJmYWNlU2NhbGV8c3lzdGVtTGFuZ3VhZ2V8dGFibGVWYWx1ZXN8dGFyZ2V0WHx0YXJnZXRZfHRleHRBbmNob3J8dGV4dERlY29yYXRpb258dGV4dFJlbmRlcmluZ3x0ZXh0TGVuZ3RofHRvfHRyYW5zZm9ybXx1MXx1Mnx1bmRlcmxpbmVQb3NpdGlvbnx1bmRlcmxpbmVUaGlja25lc3N8dW5pY29kZXx1bmljb2RlQmlkaXx1bmljb2RlUmFuZ2V8dW5pdHNQZXJFbXx2QWxwaGFiZXRpY3x2SGFuZ2luZ3x2SWRlb2dyYXBoaWN8dk1hdGhlbWF0aWNhbHx2YWx1ZXN8dmVjdG9yRWZmZWN0fHZlcnNpb258dmVydEFkdll8dmVydE9yaWdpblh8dmVydE9yaWdpbll8dmlld0JveHx2aWV3VGFyZ2V0fHZpc2liaWxpdHl8d2lkdGhzfHdvcmRTcGFjaW5nfHdyaXRpbmdNb2RlfHh8eEhlaWdodHx4MXx4Mnx4Q2hhbm5lbFNlbGVjdG9yfHhsaW5rQWN0dWF0ZXx4bGlua0FyY3JvbGV8eGxpbmtIcmVmfHhsaW5rUm9sZXx4bGlua1Nob3d8eGxpbmtUaXRsZXx4bGlua1R5cGV8eG1sQmFzZXx4bWxuc3x4bWxuc1hsaW5rfHhtbExhbmd8eG1sU3BhY2V8eXx5MXx5Mnx5Q2hhbm5lbFNlbGVjdG9yfHp8em9vbUFuZFBhbnxmb3J8Y2xhc3N8YXV0b2ZvY3VzKXwoKFtEZF1bQWFdW1R0XVtBYV18W0FhXVtScl1bSWldW0FhXXx4KS0uKikpJC8sIGEgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSB7fTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24obikgewogICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0W25dICYmICh0W25dID0gZShuKSksIHRbbl07CiAgICAgICAgfTsKICAgIH0oKGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gci50ZXN0KGUpIHx8IDExMSA9PT0gZS5jaGFyQ29kZUF0KDApICYmIDExMCA9PT0gZS5jaGFyQ29kZUF0KDEpICYmIGUuY2hhckNvZGVBdCgyKSA8IDkxOwogICAgfSkpOwogICAgdC5hID0gYTsKfSwgZnVuY3Rpb24oZSwgdCkgewogICAgZS5leHBvcnRzID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS53ZWJwYWNrUG9seWZpbGwpIHsKICAgICAgICAgICAgdmFyIHQgPSBPYmplY3QuY3JlYXRlKGUpOwogICAgICAgICAgICB0LmNoaWxkcmVuIHx8ICh0LmNoaWxkcmVuID0gW10pLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgImxvYWRlZCIsIHsKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5sOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICJpZCIsIHsKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICJleHBvcnRzIiwgewogICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAKICAgICAgICAgICAgfSksIHQud2VicGFja1BvbHlmaWxsID0gMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHQ7CiAgICB9Owp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsIGEgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LCBvID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKICAgIGZ1bmN0aW9uIGkoZSkgewogICAgICAgIGlmIChudWxsID09IGUpIHRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkIik7CiAgICAgICAgcmV0dXJuIE9iamVjdChlKTsKICAgIH0KICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghT2JqZWN0LmFzc2lnbikgcmV0dXJuICExOwogICAgICAgICAgICB2YXIgZSA9IG5ldyBTdHJpbmcoImFiYyIpOwogICAgICAgICAgICBpZiAoZVs1XSA9ICJkZSIsICI1IiA9PT0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSlbMF0pIHJldHVybiAhMTsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IHt9LCBuID0gMDsgbiA8IDEwOyBuKyspIHRbIl8iICsgU3RyaW5nLmZyb21DaGFyQ29kZShuKV0gPSBuOwogICAgICAgICAgICBpZiAoIjAxMjM0NTY3ODkiICE9PSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KS5tYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0W2VdOwogICAgICAgICAgICB9KSkuam9pbigiIikpIHJldHVybiAhMTsKICAgICAgICAgICAgdmFyIHIgPSB7fTsKICAgICAgICAgICAgcmV0dXJuICJhYmNkZWZnaGlqa2xtbm9wcXJzdCIuc3BsaXQoIiIpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJbZV0gPSBlOwogICAgICAgICAgICB9KSksICJhYmNkZWZnaGlqa2xtbm9wcXJzdCIgPT09IE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHIpKS5qb2luKCIiKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICB9CiAgICB9KCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgIGZvciAodmFyIG4sIGwsIHUgPSBpKGUpLCBjID0gMTsgYyA8IGFyZ3VtZW50cy5sZW5ndGg7IGMrKykgewogICAgICAgICAgICBmb3IgKHZhciBzIGluIG4gPSBPYmplY3QoYXJndW1lbnRzW2NdKSkgYS5jYWxsKG4sIHMpICYmICh1W3NdID0gbltzXSk7CiAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICBsID0gcihuKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGYgPSAwOyBmIDwgbC5sZW5ndGg7IGYrKykgby5jYWxsKG4sIGxbZl0pICYmICh1W2xbZl1dID0gbltsW2ZdXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHU7CiAgICB9Owp9LCBmdW5jdGlvbihlLCB0KSB7CiAgICB2YXIgbjsKICAgIG4gPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0oKTsKICAgIHRyeSB7CiAgICAgICAgbiA9IG4gfHwgbmV3IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIHdpbmRvdyAmJiAobiA9IHdpbmRvdyk7CiAgICB9CiAgICBlLmV4cG9ydHMgPSBuOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgICB2YXIgdCwgbiA9IGUuU3ltYm9sOwogICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gbi5vYnNlcnZhYmxlID8gdCA9IG4ub2JzZXJ2YWJsZSA6ICh0ID0gbigib2JzZXJ2YWJsZSIpLCAKICAgICAgICBuLm9ic2VydmFibGUgPSB0KSA6IHQgPSAiQEBvYnNlcnZhYmxlIiwgdDsKICAgIH0KICAgIG4uZCh0LCAiYSIsIChmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gcjsKICAgIH0pKTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAhZnVuY3Rpb24odCkgewogICAgICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgICAgIGZ1bmN0aW9uIG4oZSwgdCkgewogICAgICAgICAgICAgICAgZS5zdXBlcl8gPSB0LCBlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUsIHsKICAgICAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHIoZSwgdCkgewogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICJraW5kIiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwCiAgICAgICAgICAgICAgICB9KSwgdCAmJiB0Lmxlbmd0aCAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgInBhdGgiLCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQsCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGEoZSwgdCwgbikgewogICAgICAgICAgICAgICAgYS5zdXBlcl8uY2FsbCh0aGlzLCAiRSIsIGUpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgImxocyIsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdCwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfSksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmhzIiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgICAgICAgICAgIG8uc3VwZXJfLmNhbGwodGhpcywgIk4iLCBlKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICJyaHMiLCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQsCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGkoZSwgdCkgewogICAgICAgICAgICAgICAgaS5zdXBlcl8uY2FsbCh0aGlzLCAiRCIsIGUpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgImxocyIsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdCwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICBsLnN1cGVyXy5jYWxsKHRoaXMsICJBIiwgZSksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaW5kZXgiLCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQsCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAKICAgICAgICAgICAgICAgIH0pLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgIml0ZW0iLCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG4sCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHUoZSwgdCwgbikgewogICAgICAgICAgICAgICAgdmFyIHIgPSBlLnNsaWNlKChuIHx8IHQpICsgMSB8fCBlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5sZW5ndGggPSB0IDwgMCA/IGUubGVuZ3RoICsgdCA6IHQsIGUucHVzaC5hcHBseShlLCByKSwgZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdm9pZCAwID09PSBlID8gInVuZGVmaW5lZCIgOiBFKGUpOwogICAgICAgICAgICAgICAgcmV0dXJuICJvYmplY3QiICE9PSB0ID8gdCA6IGUgPT09IE1hdGggPyAibWF0aCIgOiBudWxsID09PSBlID8gIm51bGwiIDogQXJyYXkuaXNBcnJheShlKSA/ICJhcnJheSIgOiAiW29iamVjdCBEYXRlXSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSA/ICJkYXRlIiA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUudG9TdHJpbmcgJiYgL15cLy4qXC8vLnRlc3QoZS50b1N0cmluZygpKSA/ICJyZWdleHAiIDogIm9iamVjdCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcyhlLCB0LCBuLCByLCBmLCBkLCBwKSB7CiAgICAgICAgICAgICAgICBwID0gcCB8fCBbXTsKICAgICAgICAgICAgICAgIHZhciBnID0gKGYgPSBmIHx8IFtdKS5zbGljZSgwKTsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgciAmJiByKGcsIGQpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gKHZvaWQgMCA9PT0gciA/ICJ1bmRlZmluZWQiIDogRShyKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLnByZWZpbHRlciAmJiByLnByZWZpbHRlcihnLCBkKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIubm9ybWFsaXplKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSByLm5vcm1hbGl6ZShnLCBkLCBlLCB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoICYmIChlID0gaFswXSwgdCA9IGhbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGcucHVzaChkKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICJyZWdleHAiID09PSBjKGUpICYmICJyZWdleHAiID09PSBjKHQpICYmIChlID0gZS50b1N0cmluZygpLCB0ID0gdC50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgIHZhciBtID0gdm9pZCAwID09PSBlID8gInVuZGVmaW5lZCIgOiBFKGUpLCBiID0gdm9pZCAwID09PSB0ID8gInVuZGVmaW5lZCIgOiBFKHQpLCB2ID0gInVuZGVmaW5lZCIgIT09IG0gfHwgcCAmJiBwW3AubGVuZ3RoIC0gMV0ubGhzICYmIHBbcC5sZW5ndGggLSAxXS5saHMuaGFzT3duUHJvcGVydHkoZCksIHkgPSAidW5kZWZpbmVkIiAhPT0gYiB8fCBwICYmIHBbcC5sZW5ndGggLSAxXS5yaHMgJiYgcFtwLmxlbmd0aCAtIDFdLnJocy5oYXNPd25Qcm9wZXJ0eShkKTsKICAgICAgICAgICAgICAgIGlmICghdiAmJiB5KSBuKG5ldyBvKGcsIHQpKTsgZWxzZSBpZiAoIXkgJiYgdikgbihuZXcgaShnLCBlKSk7IGVsc2UgaWYgKGMoZSkgIT09IGModCkpIG4obmV3IGEoZywgZSwgdCkpOyBlbHNlIGlmICgiZGF0ZSIgPT09IGMoZSkgJiYgZSAtIHQgIT0gMCkgbihuZXcgYShnLCBlLCB0KSk7IGVsc2UgaWYgKCJvYmplY3QiID09PSBtICYmIG51bGwgIT09IGUgJiYgbnVsbCAhPT0gdCkgaWYgKHAuZmlsdGVyKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQubGhzID09PSBlOwogICAgICAgICAgICAgICAgfSkpLmxlbmd0aCkgZSAhPT0gdCAmJiBuKG5ldyBhKGcsIGUsIHQpKTsgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHAucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGxoczogZSwKICAgICAgICAgICAgICAgICAgICAgICAgcmhzOiB0CiAgICAgICAgICAgICAgICAgICAgfSksIEFycmF5LmlzQXJyYXkoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHc7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZS5sZW5ndGgsIHcgPSAwOyB3IDwgZS5sZW5ndGg7IHcrKykgdyA+PSB0Lmxlbmd0aCA/IG4obmV3IGwoZywgdywgbmV3IGkodm9pZCAwLCBlW3ddKSkpIDogcyhlW3ddLCB0W3ddLCBuLCByLCBnLCB3LCBwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7dyA8IHQubGVuZ3RoOyApIG4obmV3IGwoZywgdywgbmV3IG8odm9pZCAwLCB0W3crK10pKSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBPYmplY3Qua2V5cyhlKSwgeCA9IE9iamVjdC5rZXlzKHQpOwogICAgICAgICAgICAgICAgICAgICAgICBrLmZvckVhY2goKGZ1bmN0aW9uKGEsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0geC5pbmRleE9mKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA+PSAwID8gKHMoZVthXSwgdFthXSwgbiwgciwgZywgYSwgcCksIHggPSB1KHgsIGkpKSA6IHMoZVthXSwgdm9pZCAwLCBuLCByLCBnLCBhLCBwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB4LmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHModm9pZCAwLCB0W2VdLCBuLCByLCBnLCBlLCBwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwLmxlbmd0aCA9IHAubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICAgIH0gZWxzZSBlICE9PSB0ICYmICgibnVtYmVyIiA9PT0gbSAmJiBpc05hTihlKSAmJiBpc05hTih0KSB8fCBuKG5ldyBhKGcsIGUsIHQpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gciA9IHIgfHwgW10sIHMoZSwgdCwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBlICYmIHIucHVzaChlKTsKICAgICAgICAgICAgICAgIH0pLCBuKSwgci5sZW5ndGggPyByIDogdm9pZCAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGQoZSwgdCwgbikgewogICAgICAgICAgICAgICAgaWYgKGUgJiYgdCAmJiBuICYmIG4ua2luZCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBlLCBhID0gLTEsIG8gPSBuLnBhdGggPyBuLnBhdGgubGVuZ3RoIC0gMSA6IDA7ICsrYSA8IG87ICkgdm9pZCAwID09PSByW24ucGF0aFthXV0gJiYgKHJbbi5wYXRoW2FdXSA9ICJudW1iZXIiID09IHR5cGVvZiBuLnBhdGhbYV0gPyBbXSA6IHt9KSwgCiAgICAgICAgICAgICAgICAgICAgciA9IHJbbi5wYXRoW2FdXTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG4ua2luZCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiQSI6CiAgICAgICAgICAgICAgICAgICAgICAgICFmdW5jdGlvbiBlKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLnBhdGggJiYgci5wYXRoLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhLCBvID0gdFtuXSwgaSA9IHIucGF0aC5sZW5ndGggLSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYSA9IDA7IGEgPCBpOyBhKyspIG8gPSBvW3IucGF0aFthXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyLmtpbmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKG9bci5wYXRoW2FdXSwgci5pbmRleCwgci5pdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiRCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvW3IucGF0aFthXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bci5wYXRoW2FdXSA9IHIucmhzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBzd2l0Y2ggKHIua2luZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKHRbbl0sIHIuaW5kZXgsIHIuaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJEIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdSh0LCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJOIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W25dID0gci5yaHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICAgICAgfShuLnBhdGggPyByW24ucGF0aFthXV0gOiByLCBuLmluZGV4LCBuLml0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJEIjoKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJbbi5wYXRoW2FdXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiRSI6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJOIjoKICAgICAgICAgICAgICAgICAgICAgICAgcltuLnBhdGhbYV1dID0gbi5yaHM7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICJjb2xvcjogIiArIENbZV0uY29sb3IgKyAiOyBmb250LXdlaWdodDogYm9sZCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZyhlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IGYoZSwgdCk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHIgPyBuLmdyb3VwQ29sbGFwc2VkKCJkaWZmIikgOiBuLmdyb3VwKCJkaWZmIik7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgbi5sb2coImRpZmYiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGEgPyBhLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUua2luZCwgciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmtpbmQsIG4gPSBlLnBhdGgsIHIgPSBlLmxocywgYSA9IGUucmhzLCBvID0gZS5pbmRleCwgaSA9IGUuaXRlbTsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiRSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBuLmpvaW4oIi4iKSwgciwgIuKGkiIsIGEgXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTiI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBuLmpvaW4oIi4iKSwgYSBdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJEIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIG4uam9pbigiLiIpIF07CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgbi5qb2luKCIuIikgKyAiWyIgKyBvICsgIl0iLCBpIF07CgogICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KGUpOwogICAgICAgICAgICAgICAgICAgIG4ubG9nLmFwcGx5KG4sIFsgIiVjICIgKyBDW3RdLnRleHQsIHAodCkgXS5jb25jYXQoUyhyKSkpOwogICAgICAgICAgICAgICAgfSkpIDogbi5sb2coIuKAlOKAlCBubyBkaWZmIOKAlOKAlCIpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBuLmdyb3VwRW5kKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgbi5sb2coIuKAlOKAlCBkaWZmIGVuZCDigJTigJQgIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaChlLCB0LCBuLCByKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHZvaWQgMCA9PT0gZSA/ICJ1bmRlZmluZWQiIDogRShlKSkgewogICAgICAgICAgICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlW3JdID8gZVtyXS5hcHBseShlLCBTKG4pKSA6IGVbcl07CgogICAgICAgICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodCk7CgogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIG0oZSwgdCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB0LmxvZ2dlciwgciA9IHQuYWN0aW9uVHJhbnNmb3JtZXIsIGEgPSB0LnRpdGxlRm9ybWF0dGVyLCBvID0gdm9pZCAwID09PSBhID8gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS50aW1lc3RhbXAsIG4gPSBlLmR1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCByLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gWyAiYWN0aW9uIiBdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5wdXNoKCIlYyIgKyBTdHJpbmcoZS50eXBlKSksIHQgJiYgby5wdXNoKCIlY0AgIiArIHIpLCBuICYmIG8ucHVzaCgiJWMoaW4gIiArIGEudG9GaXhlZCgyKSArICIgbXMpIiksIAogICAgICAgICAgICAgICAgICAgICAgICBvLmpvaW4oIiAiKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSh0KSA6IGEsIGkgPSB0LmNvbGxhcHNlZCwgbCA9IHQuY29sb3JzLCB1ID0gdC5sZXZlbCwgYyA9IHQuZGlmZiwgcyA9IHZvaWQgMCA9PT0gdC50aXRsZUZvcm1hdHRlcjsKICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgoZnVuY3Rpb24oYSwgZikgewogICAgICAgICAgICAgICAgICAgIHZhciBkID0gYS5zdGFydGVkLCBwID0gYS5zdGFydGVkVGltZSwgbSA9IGEuYWN0aW9uLCBiID0gYS5wcmV2U3RhdGUsIHYgPSBhLmVycm9yLCB5ID0gYS50b29rLCB3ID0gYS5uZXh0U3RhdGUsIHggPSBlW2YgKyAxXTsKICAgICAgICAgICAgICAgICAgICB4ICYmICh3ID0geC5wcmV2U3RhdGUsIHkgPSB4LnN0YXJ0ZWQgLSBkKTsKICAgICAgICAgICAgICAgICAgICB2YXIgRSA9IHIobSksIFMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBpID8gaSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3OwogICAgICAgICAgICAgICAgICAgIH0pLCBtLCBhKSA6IGksIE8gPSBrKHApLCBDID0gbC50aXRsZSA/ICJjb2xvcjogIiArIGwudGl0bGUoRSkgKyAiOyIgOiAiIiwgVCA9IFsgImNvbG9yOiBncmF5OyBmb250LXdlaWdodDogbGlnaHRlcjsiIF07CiAgICAgICAgICAgICAgICAgICAgVC5wdXNoKEMpLCB0LnRpbWVzdGFtcCAmJiBULnB1c2goImNvbG9yOiBncmF5OyBmb250LXdlaWdodDogbGlnaHRlcjsiKSwgdC5kdXJhdGlvbiAmJiBULnB1c2goImNvbG9yOiBncmF5OyBmb250LXdlaWdodDogbGlnaHRlcjsiKTsKICAgICAgICAgICAgICAgICAgICB2YXIgUCA9IG8oRSwgTywgeSk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgUyA/IGwudGl0bGUgJiYgcyA/IG4uZ3JvdXBDb2xsYXBzZWQuYXBwbHkobiwgWyAiJWMgIiArIFAgXS5jb25jYXQoVCkpIDogbi5ncm91cENvbGxhcHNlZChQKSA6IGwudGl0bGUgJiYgcyA/IG4uZ3JvdXAuYXBwbHkobiwgWyAiJWMgIiArIFAgXS5jb25jYXQoVCkpIDogbi5ncm91cChQKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4ubG9nKFApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgXyA9IGgodSwgRSwgWyBiIF0sICJwcmV2U3RhdGUiKSwgaiA9IGgodSwgRSwgWyBFIF0sICJhY3Rpb24iKSwgSSA9IGgodSwgRSwgWyB2LCBiIF0sICJlcnJvciIpLCBOID0gaCh1LCBFLCBbIHcgXSwgIm5leHRTdGF0ZSIpOwogICAgICAgICAgICAgICAgICAgIGlmIChfKSBpZiAobC5wcmV2U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEEgPSAiY29sb3I6ICIgKyBsLnByZXZTdGF0ZShiKSArICI7IGZvbnQtd2VpZ2h0OiBib2xkIjsKICAgICAgICAgICAgICAgICAgICAgICAgbltfXSgiJWMgcHJldiBzdGF0ZSIsIEEsIGIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuW19dKCJwcmV2IHN0YXRlIiwgYik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGopIGlmIChsLmFjdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgRCA9ICJjb2xvcjogIiArIGwuYWN0aW9uKEUpICsgIjsgZm9udC13ZWlnaHQ6IGJvbGQiOwogICAgICAgICAgICAgICAgICAgICAgICBuW2pdKCIlYyBhY3Rpb24gICAgIiwgRCwgRSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG5bal0oImFjdGlvbiAgICAiLCBFKTsKICAgICAgICAgICAgICAgICAgICBpZiAodiAmJiBJKSBpZiAobC5lcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgUiA9ICJjb2xvcjogIiArIGwuZXJyb3IodiwgYikgKyAiOyBmb250LXdlaWdodDogYm9sZDsiOwogICAgICAgICAgICAgICAgICAgICAgICBuW0ldKCIlYyBlcnJvciAgICAgIiwgUiwgdik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG5bSV0oImVycm9yICAgICAiLCB2KTsKICAgICAgICAgICAgICAgICAgICBpZiAoTikgaWYgKGwubmV4dFN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBNID0gImNvbG9yOiAiICsgbC5uZXh0U3RhdGUodykgKyAiOyBmb250LXdlaWdodDogYm9sZCI7CiAgICAgICAgICAgICAgICAgICAgICAgIG5bTl0oIiVjIG5leHQgc3RhdGUiLCBNLCB3KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbltOXSgibmV4dCBzdGF0ZSIsIHcpOwogICAgICAgICAgICAgICAgICAgIGMgJiYgZyhiLCB3LCBuLCBTKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBuLmdyb3VwRW5kKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBuLmxvZygi4oCU4oCUIGxvZyBlbmQg4oCU4oCUIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGIoKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDoge30sIHQgPSBPYmplY3QuYXNzaWduKHt9LCBULCBlKSwgbiA9IHQubG9nZ2VyLCByID0gdC5zdGF0ZVRyYW5zZm9ybWVyLCBhID0gdC5lcnJvclRyYW5zZm9ybWVyLCBvID0gdC5wcmVkaWNhdGUsIGkgPSB0LmxvZ0Vycm9ycywgbCA9IHQuZGlmZlByZWRpY2F0ZTsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAoZS5nZXRTdGF0ZSAmJiBlLmRpc3BhdGNoKSByZXR1cm4gY29uc29sZS5lcnJvcigiW3JlZHV4LWxvZ2dlcl0gcmVkdXgtbG9nZ2VyIG5vdCBpbnN0YWxsZWQuIE1ha2Ugc3VyZSB0byBwYXNzIGxvZ2dlciBpbnN0YW5jZSBhcyBtaWRkbGV3YXJlOlxuLy8gTG9nZ2VyIHdpdGggZGVmYXVsdCBvcHRpb25zXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdyZWR1eC1sb2dnZXInXG5jb25zdCBzdG9yZSA9IGNyZWF0ZVN0b3JlKFxuICByZWR1Y2VyLFxuICBhcHBseU1pZGRsZXdhcmUobG9nZ2VyKVxuKVxuLy8gT3IgeW91IGNhbiBjcmVhdGUgeW91ciBvd24gbG9nZ2VyIHdpdGggY3VzdG9tIG9wdGlvbnMgaHR0cDovL2JpdC5seS9yZWR1eC1sb2dnZXItb3B0aW9uc1xuaW1wb3J0IGNyZWF0ZUxvZ2dlciBmcm9tICdyZWR1eC1sb2dnZXInXG5jb25zdCBsb2dnZXIgPSBjcmVhdGVMb2dnZXIoe1xuICAvLyAuLi5vcHRpb25zXG59KTtcbmNvbnN0IHN0b3JlID0gY3JlYXRlU3RvcmUoXG4gIHJlZHVjZXIsXG4gIGFwcGx5TWlkZGxld2FyZShsb2dnZXIpXG4pXG4iKSwgCiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB2YXIgdSA9IFtdOwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuZ2V0U3RhdGU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBvICYmICFvKG4sIGMpKSByZXR1cm4gZShjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnB1c2gocyksIHMuc3RhcnRlZCA9IHgubm93KCksIHMuc3RhcnRlZFRpbWUgPSBuZXcgRGF0ZSwgcy5wcmV2U3RhdGUgPSByKG4oKSksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5hY3Rpb24gPSBjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gZShjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmVycm9yID0gYShlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBmID0gZShjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMudG9vayA9IHgubm93KCkgLSBzLnN0YXJ0ZWQsIHMubmV4dFN0YXRlID0gcihuKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB0LmRpZmYgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbCA/IGwobiwgYykgOiB0LmRpZmY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobSh1LCBPYmplY3QuYXNzaWduKHt9LCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZjogZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCB1Lmxlbmd0aCA9IDAsIHMuZXJyb3IpIHRocm93IHMuZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZjsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgdiwgeSwgdyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheSh0ICsgMSkuam9pbihlKTsKICAgICAgICAgICAgICAgIH0oIjAiLCB0IC0gZS50b1N0cmluZygpLmxlbmd0aCkgKyBlOwogICAgICAgICAgICB9LCBrID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHcoZS5nZXRIb3VycygpLCAyKSArICI6IiArIHcoZS5nZXRNaW51dGVzKCksIDIpICsgIjoiICsgdyhlLmdldFNlY29uZHMoKSwgMikgKyAiLiIgKyB3KGUuZ2V0TWlsbGlzZWNvbmRzKCksIDMpOwogICAgICAgICAgICB9LCB4ID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHBlcmZvcm1hbmNlICYmIG51bGwgIT09IHBlcmZvcm1hbmNlICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA/IHBlcmZvcm1hbmNlIDogRGF0ZSwgRSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgICB9IDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIGUuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBlICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2YgZTsKICAgICAgICAgICAgfSwgUyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIG4gPSBBcnJheShlLmxlbmd0aCk7IHQgPCBlLmxlbmd0aDsgdCsrKSBuW3RdID0gZVt0XTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKGUpOwogICAgICAgICAgICB9LCBPID0gW107CiAgICAgICAgICAgIHYgPSAib2JqZWN0IiA9PT0gKHZvaWQgMCA9PT0gZSA/ICJ1bmRlZmluZWQiIDogRShlKSkgJiYgZSA/IGUgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDoge30sIAogICAgICAgICAgICAoeSA9IHYuRGVlcERpZmYpICYmIE8ucHVzaCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHkgJiYgdi5EZWVwRGlmZiA9PT0gZiAmJiAodi5EZWVwRGlmZiA9IHksIHkgPSB2b2lkIDApOwogICAgICAgICAgICB9KSksIG4oYSwgciksIG4obywgciksIG4oaSwgciksIG4obCwgciksIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGYsIHsKICAgICAgICAgICAgICAgIGRpZmY6IHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZiwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9ic2VydmFibGVEaWZmOiB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHMsCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhcHBseURpZmY6IHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBlICYmIHQgJiYgcyhlLCB0LCAoZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiAhbihlLCB0LCByKSB8fCBkKGUsIHQsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFwcGx5Q2hhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGQsCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZXZlcnRDaGFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiB0ICYmIG4gJiYgbi5raW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciwgYSwgbyA9IGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGEgPSBuLnBhdGgubGVuZ3RoIC0gMSwgciA9IDA7IHIgPCBhOyByKyspIHZvaWQgMCA9PT0gb1tuLnBhdGhbcl1dICYmIChvW24ucGF0aFtyXV0gPSB7fSksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IG9bbi5wYXRoW3JdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobi5raW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFmdW5jdGlvbiBlKHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIucGF0aCAmJiByLnBhdGgubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSwgbyA9IHRbbl0sIGkgPSByLnBhdGgubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYSA9IDA7IGEgPCBpOyBhKyspIG8gPSBvW3IucGF0aFthXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIua2luZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlKG9bci5wYXRoW2FdXSwgci5pbmRleCwgci5pdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJFIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvW3IucGF0aFthXV0gPSByLmxoczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIk4iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvW3IucGF0aFthXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBzd2l0Y2ggKHIua2luZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSh0W25dLCByLmluZGV4LCByLml0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkUiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtuXSA9IHIubGhzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIk4iOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHUodCwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShvW24ucGF0aFtyXV0sIG4uaW5kZXgsIG4uaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJEIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiRSI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1tuLnBhdGhbcl1dID0gbi5saHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJOIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb1tuLnBhdGhbcl1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGlzQ29uZmxpY3Q6IHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IHk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5vQ29uZmxpY3Q6IHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPICYmIChPLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLCBPID0gbnVsbCksIGY7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIEMgPSB7CiAgICAgICAgICAgICAgICBFOiB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICIjMjE5NkYzIiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiQ0hBTkdFRDoiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgTjogewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiIzRDQUY1MCIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogIkFEREVEOiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBEOiB7CiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICIjRjQ0MzM2IiwKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiREVMRVRFRDoiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgQTogewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAiIzIxOTZGMyIsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogIkFSUkFZOiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgVCA9IHsKICAgICAgICAgICAgICAgIGxldmVsOiAibG9nIiwKICAgICAgICAgICAgICAgIGxvZ2dlcjogY29uc29sZSwKICAgICAgICAgICAgICAgIGxvZ0Vycm9yczogITAsCiAgICAgICAgICAgICAgICBjb2xsYXBzZWQ6IHZvaWQgMCwKICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogdm9pZCAwLAogICAgICAgICAgICAgICAgZHVyYXRpb246ICExLAogICAgICAgICAgICAgICAgdGltZXN0YW1wOiAhMCwKICAgICAgICAgICAgICAgIHN0YXRlVHJhbnNmb3JtZXI6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhY3Rpb25UcmFuc2Zvcm1lcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGVycm9yVHJhbnNmb3JtZXI6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjb2xvcnM6IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiaW5oZXJpdCI7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBwcmV2U3RhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiM5RTlFOUUiOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIjMDNBOUY0IjsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG5leHRTdGF0ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiIzRDQUY1MCI7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiI0YyMDQwNCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRpZmY6ICExLAogICAgICAgICAgICAgICAgZGlmZlByZWRpY2F0ZTogdm9pZCAwLAogICAgICAgICAgICAgICAgdHJhbnNmb3JtZXI6IHZvaWQgMAogICAgICAgICAgICB9LCBQID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDoge30sIHQgPSBlLmRpc3BhdGNoLCBuID0gZS5nZXRTdGF0ZTsKICAgICAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiB0IHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gPyBiKCkoewogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoOiB0LAogICAgICAgICAgICAgICAgICAgIGdldFN0YXRlOiBuCiAgICAgICAgICAgICAgICB9KSA6IHZvaWQgY29uc29sZS5lcnJvcigiXG5bcmVkdXgtbG9nZ2VyIHYzXSBCUkVBS0lORyBDSEFOR0VcbltyZWR1eC1sb2dnZXIgdjNdIFNpbmNlIDMuMC4wIHJlZHV4LWxvZ2dlciBleHBvcnRzIGJ5IGRlZmF1bHQgbG9nZ2VyIHdpdGggZGVmYXVsdCBzZXR0aW5ncy5cbltyZWR1eC1sb2dnZXIgdjNdIENoYW5nZVxuW3JlZHV4LWxvZ2dlciB2M10gaW1wb3J0IGNyZWF0ZUxvZ2dlciBmcm9tICdyZWR1eC1sb2dnZXInXG5bcmVkdXgtbG9nZ2VyIHYzXSB0b1xuW3JlZHV4LWxvZ2dlciB2M10gaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAncmVkdXgtbG9nZ2VyJ1xuIik7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHQuZGVmYXVsdHMgPSBULCB0LmNyZWF0ZUxvZ2dlciA9IGIsIHQubG9nZ2VyID0gUCwgdC5kZWZhdWx0ID0gUCwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICJfX2VzTW9kdWxlIiwgewogICAgICAgICAgICAgICAgdmFsdWU6ICEwCiAgICAgICAgICAgIH0pOwogICAgICAgIH0odCk7CiAgICB9KS5jYWxsKHRoaXMsIG4oMzQpKTsKfSwgZnVuY3Rpb24oZSwgdCkgewogICAgZS5leHBvcnRzID0gZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgIHZhciBhID0gbiA/IG4uY2FsbChyLCBlLCB0KSA6IHZvaWQgMDsKICAgICAgICBpZiAodm9pZCAwICE9PSBhKSByZXR1cm4gISFhOwogICAgICAgIGlmIChlID09PSB0KSByZXR1cm4gITA7CiAgICAgICAgaWYgKCJvYmplY3QiICE9IHR5cGVvZiBlIHx8ICFlIHx8ICJvYmplY3QiICE9IHR5cGVvZiB0IHx8ICF0KSByZXR1cm4gITE7CiAgICAgICAgdmFyIG8gPSBPYmplY3Qua2V5cyhlKSwgaSA9IE9iamVjdC5rZXlzKHQpOwogICAgICAgIGlmIChvLmxlbmd0aCAhPT0gaS5sZW5ndGgpIHJldHVybiAhMTsKICAgICAgICBmb3IgKHZhciBsID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5iaW5kKHQpLCB1ID0gMDsgdSA8IG8ubGVuZ3RoOyB1KyspIHsKICAgICAgICAgICAgdmFyIGMgPSBvW3VdOwogICAgICAgICAgICBpZiAoIWwoYykpIHJldHVybiAhMTsKICAgICAgICAgICAgdmFyIHMgPSBlW2NdLCBmID0gdFtjXTsKICAgICAgICAgICAgaWYgKCExID09PSAoYSA9IG4gPyBuLmNhbGwociwgcywgZiwgYykgOiB2b2lkIDApIHx8IHZvaWQgMCA9PT0gYSAmJiBzICE9PSBmKSByZXR1cm4gITE7CiAgICAgICAgfQogICAgICAgIHJldHVybiAhMDsKICAgIH07Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHQuYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBmdW5jdGlvbiB0KGUsIHQsIHIpIHsKICAgICAgICAgICAgdmFyIGEgPSB0LnRyaW0oKS5zcGxpdChnKTsKICAgICAgICAgICAgdCA9IGE7CiAgICAgICAgICAgIHZhciBvID0gYS5sZW5ndGgsIGkgPSBlLmxlbmd0aDsKICAgICAgICAgICAgc3dpdGNoIChpKSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHZhciBsID0gMDsKICAgICAgICAgICAgICAgIGZvciAoZSA9IDAgPT09IGkgPyAiIiA6IGVbMF0gKyAiICI7IGwgPCBvOyArK2wpIHRbbF0gPSBuKGUsIHRbbF0sIHIpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdmFyIHUgPSBsID0gMDsKICAgICAgICAgICAgICAgIGZvciAodCA9IFtdOyBsIDwgbzsgKytsKSBmb3IgKHZhciBjID0gMDsgYyA8IGk7ICsrYykgdFt1KytdID0gbihlW2NdICsgIiAiLCBhW2xdLCByKS50cmltKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG4oZSwgdCwgbikgewogICAgICAgICAgICB2YXIgciA9IHQuY2hhckNvZGVBdCgwKTsKICAgICAgICAgICAgc3dpdGNoICgzMyA+IHIgJiYgKHIgPSAodCA9IHQudHJpbSgpKS5jaGFyQ29kZUF0KDApKSwgcikgewogICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICByZXR1cm4gdC5yZXBsYWNlKGgsICIkMSIgKyBlLnRyaW0oKSk7CgogICAgICAgICAgICAgIGNhc2UgNTg6CiAgICAgICAgICAgICAgICByZXR1cm4gZS50cmltKCkgKyB0LnJlcGxhY2UoaCwgIiQxIiArIGUudHJpbSgpKTsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIGlmICgwIDwgMSAqIG4gJiYgMCA8IHQuaW5kZXhPZigiXGYiKSkgcmV0dXJuIHQucmVwbGFjZShoLCAoNTggPT09IGUuY2hhckNvZGVBdCgwKSA/ICIiIDogIiQxIikgKyBlLnRyaW0oKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGUgKyB0OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiByKGUsIHQsIG4sIG8pIHsKICAgICAgICAgICAgdmFyIGkgPSBlICsgIjsiLCBsID0gMiAqIHQgKyAzICogbiArIDQgKiBvOwogICAgICAgICAgICBpZiAoOTQ0ID09PSBsKSB7CiAgICAgICAgICAgICAgICBlID0gaS5pbmRleE9mKCI6IiwgOSkgKyAxOwogICAgICAgICAgICAgICAgdmFyIHUgPSBpLnN1YnN0cmluZyhlLCBpLmxlbmd0aCAtIDEpLnRyaW0oKTsKICAgICAgICAgICAgICAgIHJldHVybiB1ID0gaS5zdWJzdHJpbmcoMCwgZSkudHJpbSgpICsgdSArICI7IiwgMSA9PT0gXyB8fCAyID09PSBfICYmIGEodSwgMSkgPyAiLXdlYmtpdC0iICsgdSArIHUgOiB1OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgwID09PSBfIHx8IDIgPT09IF8gJiYgIWEoaSwgMSkpIHJldHVybiBpOwogICAgICAgICAgICBzd2l0Y2ggKGwpIHsKICAgICAgICAgICAgICBjYXNlIDEwMTU6CiAgICAgICAgICAgICAgICByZXR1cm4gOTcgPT09IGkuY2hhckNvZGVBdCgxMCkgPyAiLXdlYmtpdC0iICsgaSArIGkgOiBpOwoKICAgICAgICAgICAgICBjYXNlIDk1MToKICAgICAgICAgICAgICAgIHJldHVybiAxMTYgPT09IGkuY2hhckNvZGVBdCgzKSA/ICItd2Via2l0LSIgKyBpICsgaSA6IGk7CgogICAgICAgICAgICAgIGNhc2UgOTYzOgogICAgICAgICAgICAgICAgcmV0dXJuIDExMCA9PT0gaS5jaGFyQ29kZUF0KDUpID8gIi13ZWJraXQtIiArIGkgKyBpIDogaTsKCiAgICAgICAgICAgICAgY2FzZSAxMDA5OgogICAgICAgICAgICAgICAgaWYgKDEwMCAhPT0gaS5jaGFyQ29kZUF0KDQpKSBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5Njk6CiAgICAgICAgICAgICAgY2FzZSA5NDI6CiAgICAgICAgICAgICAgICByZXR1cm4gIi13ZWJraXQtIiArIGkgKyBpOwoKICAgICAgICAgICAgICBjYXNlIDk3ODoKICAgICAgICAgICAgICAgIHJldHVybiAiLXdlYmtpdC0iICsgaSArICItbW96LSIgKyBpICsgaTsKCiAgICAgICAgICAgICAgY2FzZSAxMDE5OgogICAgICAgICAgICAgIGNhc2UgOTgzOgogICAgICAgICAgICAgICAgcmV0dXJuICItd2Via2l0LSIgKyBpICsgIi1tb3otIiArIGkgKyAiLW1zLSIgKyBpICsgaTsKCiAgICAgICAgICAgICAgY2FzZSA4ODM6CiAgICAgICAgICAgICAgICBpZiAoNDUgPT09IGkuY2hhckNvZGVBdCg4KSkgcmV0dXJuICItd2Via2l0LSIgKyBpICsgaTsKICAgICAgICAgICAgICAgIGlmICgwIDwgaS5pbmRleE9mKCJpbWFnZS1zZXQoIiwgMTEpKSByZXR1cm4gaS5yZXBsYWNlKE8sICIkMS13ZWJraXQtJDIiKSArIGk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5MzI6CiAgICAgICAgICAgICAgICBpZiAoNDUgPT09IGkuY2hhckNvZGVBdCg0KSkgc3dpdGNoIChpLmNoYXJDb2RlQXQoNSkpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAxMDM6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICItd2Via2l0LWJveC0iICsgaS5yZXBsYWNlKCItZ3JvdyIsICIiKSArICItd2Via2l0LSIgKyBpICsgIi1tcy0iICsgaS5yZXBsYWNlKCJncm93IiwgInBvc2l0aXZlIikgKyBpOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxMTU6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICItd2Via2l0LSIgKyBpICsgIi1tcy0iICsgaS5yZXBsYWNlKCJzaHJpbmsiLCAibmVnYXRpdmUiKSArIGk7CgogICAgICAgICAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAiLXdlYmtpdC0iICsgaSArICItbXMtIiArIGkucmVwbGFjZSgiYmFzaXMiLCAicHJlZmVycmVkLXNpemUiKSArIGk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gIi13ZWJraXQtIiArIGkgKyAiLW1zLSIgKyBpICsgaTsKCiAgICAgICAgICAgICAgY2FzZSA5NjQ6CiAgICAgICAgICAgICAgICByZXR1cm4gIi13ZWJraXQtIiArIGkgKyAiLW1zLWZsZXgtIiArIGkgKyBpOwoKICAgICAgICAgICAgICBjYXNlIDEwMjM6CiAgICAgICAgICAgICAgICBpZiAoOTkgIT09IGkuY2hhckNvZGVBdCg4KSkgYnJlYWs7CiAgICAgICAgICAgICAgICByZXR1cm4gIi13ZWJraXQtYm94LXBhY2siICsgKHUgPSBpLnN1YnN0cmluZyhpLmluZGV4T2YoIjoiLCAxNSkpLnJlcGxhY2UoImZsZXgtIiwgIiIpLnJlcGxhY2UoInNwYWNlLWJldHdlZW4iLCAianVzdGlmeSIpKSArICItd2Via2l0LSIgKyBpICsgIi1tcy1mbGV4LXBhY2siICsgdSArIGk7CgogICAgICAgICAgICAgIGNhc2UgMTAwNToKICAgICAgICAgICAgICAgIHJldHVybiBkLnRlc3QoaSkgPyBpLnJlcGxhY2UoZiwgIjotd2Via2l0LSIpICsgaS5yZXBsYWNlKGYsICI6LW1vei0iKSArIGkgOiBpOwoKICAgICAgICAgICAgICBjYXNlIDFlMzoKICAgICAgICAgICAgICAgIHN3aXRjaCAodCA9ICh1ID0gaS5zdWJzdHJpbmcoMTMpLnRyaW0oKSkuaW5kZXhPZigiLSIpICsgMSwgdS5jaGFyQ29kZUF0KDApICsgdS5jaGFyQ29kZUF0KHQpKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjI2OgogICAgICAgICAgICAgICAgICAgIHUgPSBpLnJlcGxhY2UoeSwgInRiIik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICBjYXNlIDIzMjoKICAgICAgICAgICAgICAgICAgICB1ID0gaS5yZXBsYWNlKHksICJ0Yi1ybCIpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyMjA6CiAgICAgICAgICAgICAgICAgICAgdSA9IGkucmVwbGFjZSh5LCAibHIiKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gIi13ZWJraXQtIiArIGkgKyAiLW1zLSIgKyB1ICsgaTsKCiAgICAgICAgICAgICAgY2FzZSAxMDE3OgogICAgICAgICAgICAgICAgaWYgKC0xID09PSBpLmluZGV4T2YoInN0aWNreSIsIDkpKSBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5NzU6CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQgPSAoaSA9IGUpLmxlbmd0aCAtIDEwLCBsID0gKHUgPSAoMzMgPT09IGkuY2hhckNvZGVBdCh0KSA/IGkuc3Vic3RyaW5nKDAsIHQpIDogaSkuc3Vic3RyaW5nKGUuaW5kZXhPZigiOiIsIDcpICsgMSkudHJpbSgpKS5jaGFyQ29kZUF0KDApICsgKDAgfCB1LmNoYXJDb2RlQXQoNykpKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjAzOgogICAgICAgICAgICAgICAgICAgIGlmICgxMTEgPiB1LmNoYXJDb2RlQXQoOCkpIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgY2FzZSAxMTU6CiAgICAgICAgICAgICAgICAgICAgaSA9IGkucmVwbGFjZSh1LCAiLXdlYmtpdC0iICsgdSkgKyAiOyIgKyBpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgY2FzZSAyMDc6CiAgICAgICAgICAgICAgICAgIGNhc2UgMTAyOgogICAgICAgICAgICAgICAgICAgIGkgPSBpLnJlcGxhY2UodSwgIi13ZWJraXQtIiArICgxMDIgPCBsID8gImlubGluZS0iIDogIiIpICsgImJveCIpICsgIjsiICsgaS5yZXBsYWNlKHUsICItd2Via2l0LSIgKyB1KSArICI7IiArIGkucmVwbGFjZSh1LCAiLW1zLSIgKyB1ICsgImJveCIpICsgIjsiICsgaTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBpICsgIjsiOwoKICAgICAgICAgICAgICBjYXNlIDkzODoKICAgICAgICAgICAgICAgIGlmICg0NSA9PT0gaS5jaGFyQ29kZUF0KDUpKSBzd2l0Y2ggKGkuY2hhckNvZGVBdCg2KSkgewogICAgICAgICAgICAgICAgICBjYXNlIDEwNToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSA9IGkucmVwbGFjZSgiLWl0ZW1zIiwgIiIpLCAiLXdlYmtpdC0iICsgaSArICItd2Via2l0LWJveC0iICsgdSArICItbXMtZmxleC0iICsgdSArIGk7CgogICAgICAgICAgICAgICAgICBjYXNlIDExNToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIi13ZWJraXQtIiArIGkgKyAiLW1zLWZsZXgtaXRlbS0iICsgaS5yZXBsYWNlKHgsICIiKSArIGk7CgogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAiLXdlYmtpdC0iICsgaSArICItbXMtZmxleC1saW5lLXBhY2siICsgaS5yZXBsYWNlKCJhbGlnbi1jb250ZW50IiwgIiIpLnJlcGxhY2UoeCwgIiIpICsgaTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk3MzoKICAgICAgICAgICAgICBjYXNlIDk4OToKICAgICAgICAgICAgICAgIGlmICg0NSAhPT0gaS5jaGFyQ29kZUF0KDMpIHx8IDEyMiA9PT0gaS5jaGFyQ29kZUF0KDQpKSBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5MzE6CiAgICAgICAgICAgICAgY2FzZSA5NTM6CiAgICAgICAgICAgICAgICBpZiAoITAgPT09IFMudGVzdChlKSkgcmV0dXJuIDExNSA9PT0gKHUgPSBlLnN1YnN0cmluZyhlLmluZGV4T2YoIjoiKSArIDEpKS5jaGFyQ29kZUF0KDApID8gcihlLnJlcGxhY2UoInN0cmV0Y2giLCAiZmlsbC1hdmFpbGFibGUiKSwgdCwgbiwgbykucmVwbGFjZSgiOmZpbGwtYXZhaWxhYmxlIiwgIjpzdHJldGNoIikgOiBpLnJlcGxhY2UodSwgIi13ZWJraXQtIiArIHUpICsgaS5yZXBsYWNlKHUsICItbW96LSIgKyB1LnJlcGxhY2UoImZpbGwtIiwgIiIpKSArIGk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5NjI6CiAgICAgICAgICAgICAgICBpZiAoaSA9ICItd2Via2l0LSIgKyBpICsgKDEwMiA9PT0gaS5jaGFyQ29kZUF0KDUpID8gIi1tcy0iICsgaSA6ICIiKSArIGksIDIxMSA9PT0gbiArIG8gJiYgMTA1ID09PSBpLmNoYXJDb2RlQXQoMTMpICYmIDAgPCBpLmluZGV4T2YoInRyYW5zZm9ybSIsIDEwKSkgcmV0dXJuIGkuc3Vic3RyaW5nKDAsIGkuaW5kZXhPZigiOyIsIDI3KSArIDEpLnJlcGxhY2UocCwgIiQxLXdlYmtpdC0kMiIpICsgaTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gZS5pbmRleE9mKDEgPT09IHQgPyAiOiIgOiAieyIpLCByID0gZS5zdWJzdHJpbmcoMCwgMyAhPT0gdCA/IG4gOiAxMCk7CiAgICAgICAgICAgIHJldHVybiBuID0gZS5zdWJzdHJpbmcobiArIDEsIGUubGVuZ3RoIC0gMSksIEEoMiAhPT0gdCA/IHIgOiByLnJlcGxhY2UoRSwgIiQxIiksIG4sIHQpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgICAgICAgdmFyIG4gPSByKHQsIHQuY2hhckNvZGVBdCgwKSwgdC5jaGFyQ29kZUF0KDEpLCB0LmNoYXJDb2RlQXQoMikpOwogICAgICAgICAgICByZXR1cm4gbiAhPT0gdCArICI7IiA/IG4ucmVwbGFjZShrLCAiIG9yICgkMSkiKS5zdWJzdHJpbmcoNCkgOiAiKCIgKyB0ICsgIikiOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBpKGUsIHQsIG4sIHIsIGEsIG8sIGksIGwsIGMsIHMpIHsKICAgICAgICAgICAgZm9yICh2YXIgZiwgZCA9IDAsIHAgPSB0OyBkIDwgTjsgKytkKSBzd2l0Y2ggKGYgPSBJW2RdLmNhbGwodSwgZSwgcCwgbiwgciwgYSwgbywgaSwgbCwgYywgcykpIHsKICAgICAgICAgICAgICBjYXNlIHZvaWQgMDoKICAgICAgICAgICAgICBjYXNlICExOgogICAgICAgICAgICAgIGNhc2UgITA6CiAgICAgICAgICAgICAgY2FzZSBudWxsOgogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBwID0gZjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocCAhPT0gdCkgcmV0dXJuIHA7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSAoZSA9IGUucHJlZml4KSAmJiAoQSA9IG51bGwsIGUgPyAiZnVuY3Rpb24iICE9IHR5cGVvZiBlID8gXyA9IDEgOiAoXyA9IDIsIAogICAgICAgICAgICBBID0gZSkgOiBfID0gMCksIGw7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHUoZSwgbikgewogICAgICAgICAgICB2YXIgbCA9IGU7CiAgICAgICAgICAgIGlmICgzMyA+IGwuY2hhckNvZGVBdCgwKSAmJiAobCA9IGwudHJpbSgpKSwgbCA9IFsgbCBdLCAwIDwgTikgewogICAgICAgICAgICAgICAgdmFyIHUgPSBpKC0xLCBuLCBsLCBsLCBULCBDLCAwLCAwLCAwLCAwKTsKICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gdSAmJiAic3RyaW5nIiA9PSB0eXBlb2YgdSAmJiAobiA9IHUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24gZShuLCBsLCB1LCBmLCBkKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBwLCBnLCBoLCB5LCBrLCB4ID0gMCwgRSA9IDAsIFMgPSAwLCBPID0gMCwgSSA9IDAsIEEgPSAwLCBSID0gaCA9IHAgPSAwLCBNID0gMCwgeiA9IDAsIEwgPSAwLCBGID0gMCwgVSA9IHUubGVuZ3RoLCBXID0gVSAtIDEsIFYgPSAiIiwgJCA9ICIiLCBxID0gIiIsIEIgPSAiIjsgTSA8IFU7ICkgewogICAgICAgICAgICAgICAgICAgIGlmIChnID0gdS5jaGFyQ29kZUF0KE0pLCBNID09PSBXICYmIDAgIT09IEUgKyBPICsgUyArIHggJiYgKDAgIT09IEUgJiYgKGcgPSA0NyA9PT0gRSA/IDEwIDogNDcpLCAKICAgICAgICAgICAgICAgICAgICBPID0gUyA9IHggPSAwLCBVKyssIFcrKyksIDAgPT09IEUgKyBPICsgUyArIHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE0gPT09IFcgJiYgKDAgPCB6ICYmIChWID0gVi5yZXBsYWNlKHMsICIiKSksIDAgPCBWLnRyaW0oKS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWICs9IHUuY2hhckF0KE0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IDU5OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTIzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChwID0gKFYgPSBWLnRyaW0oKSkuY2hhckNvZGVBdCgwKSwgaCA9IDEsIEYgPSArK007IE0gPCBVOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGcgPSB1LmNoYXJDb2RlQXQoTSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTIzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZyA9IHUuY2hhckNvZGVBdChNICsgMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChSID0gTSArIDE7IFIgPCBXOyArK1IpIHN3aXRjaCAodS5jaGFyQ29kZUF0KFIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNDIgPT09IGcgJiYgNDIgPT09IHUuY2hhckNvZGVBdChSIC0gMSkgJiYgTSArIDIgIT09IFIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gPSBSICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDQ3ID09PSBnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNID0gUiArIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0gPSBSOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcrKzsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKys7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO00rKyA8IFcgJiYgdS5jaGFyQ29kZUF0KE0pICE9PSBnOyApIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IGgpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0rKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaCA9IHUuc3Vic3RyaW5nKEYsIE0pLCAwID09PSBwICYmIChwID0gKFYgPSBWLnJlcGxhY2UoYywgIiIpLnRyaW0oKSkuY2hhckNvZGVBdCgwKSksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoMCA8IHogJiYgKFYgPSBWLnJlcGxhY2UocywgIiIpKSwgZyA9IFYuY2hhckNvZGVBdCgxKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeiA9IGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogPSBqOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRiA9IChoID0gZShsLCB6LCBoLCBnLCBkICsgMSkpLmxlbmd0aCwgMCA8IE4gJiYgKGsgPSBpKDMsIGgsIHogPSB0KGosIFYsIEwpLCBsLCBULCBDLCBGLCBnLCBkLCBmKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgViA9IHouam9pbigiIiksIHZvaWQgMCAhPT0gayAmJiAwID09PSAoRiA9IChoID0gay50cmltKCkpLmxlbmd0aCkgJiYgKGcgPSAwLCBoID0gIiIpKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA8IEYpIHN3aXRjaCAoZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFYgPSBWLnJlcGxhY2Uodywgbyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBWICsgInsiICsgaCArICJ9IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSAoViA9IFYucmVwbGFjZShtLCAiJDEgJDIiKSkgKyAieyIgKyBoICsgIn0iLCBoID0gMSA9PT0gXyB8fCAyID09PSBfICYmIGEoIkAiICsgaCwgMykgPyAiQC13ZWJraXQtIiArIGggKyAiQCIgKyBoIDogIkAiICsgaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IFYgKyBoLCAxMTIgPT09IGYgJiYgKCQgKz0gaCwgaCA9ICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gZShsLCB0KGwsIFYsIEwpLCBoLCBmLCBkICsgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxICs9IGgsIGggPSBMID0geiA9IFIgPSBwID0gMCwgViA9ICIiLCBnID0gdS5jaGFyQ29kZUF0KCsrTSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxIDwgKEYgPSAoViA9ICgwIDwgeiA/IFYucmVwbGFjZShzLCAiIikgOiBWKS50cmltKCkpLmxlbmd0aCkpIHN3aXRjaCAoMCA9PT0gUiAmJiAocCA9IFYuY2hhckNvZGVBdCgwKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA0NSA9PT0gcCB8fCA5NiA8IHAgJiYgMTIzID4gcCkgJiYgKEYgPSAoViA9IFYucmVwbGFjZSgiICIsICI6IikpLmxlbmd0aCksIDAgPCBOICYmIHZvaWQgMCAhPT0gKGsgPSBpKDEsIFYsIGwsIG4sIFQsIEMsICQubGVuZ3RoLCBmLCBkLCBmKSkgJiYgMCA9PT0gKEYgPSAoViA9IGsudHJpbSgpKS5sZW5ndGgpICYmIChWID0gIlwwXDAiKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gVi5jaGFyQ29kZUF0KDApLCBnID0gVi5jaGFyQ29kZUF0KDEpLCBwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEwNSA9PT0gZyB8fCA5OSA9PT0gZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCICs9IFYgKyB1LmNoYXJBdChNKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA1OCAhPT0gVi5jaGFyQ29kZUF0KEYgLSAxKSAmJiAoJCArPSByKFYsIHAsIGcsIFYuY2hhckNvZGVBdCgyKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTCA9IHogPSBSID0gcCA9IDAsIFYgPSAiIiwgZyA9IHUuY2hhckNvZGVBdCgrK00pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZykgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgIDQ3ID09PSBFID8gRSA9IDAgOiAwID09PSAxICsgcCAmJiAxMDcgIT09IGYgJiYgMCA8IFYubGVuZ3RoICYmICh6ID0gMSwgViArPSAiXDAiKSwgCiAgICAgICAgICAgICAgICAgICAgICAgIDAgPCBOICogRCAmJiBpKDAsIFYsIGwsIG4sIFQsIEMsICQubGVuZ3RoLCBmLCBkLCBmKSwgQyA9IDEsIFQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OToKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI1OgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gRSArIE8gKyBTICsgeCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKEMrKywgeSA9IHUuY2hhckF0KE0pLCBnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gTyArIHggKyBFKSBzd2l0Y2ggKEkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMzIgIT09IGcgJiYgKHkgPSAiICIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiXFwwIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9ICJcXGYiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gIlxcdiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT09IE8gKyBFICsgeCAmJiAoeiA9IEwgPSAxLCB5ID0gIlxmIiArIHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IE8gKyBFICsgeCArIFAgJiYgMCA8IFIpIHN3aXRjaCAoTSAtIFIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDExMiA9PT0gSSAmJiA1OCA9PT0gdS5jaGFyQ29kZUF0KE0gLSAzKSAmJiAoUCA9IEkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDExMSA9PT0gQSAmJiAoUCA9IEEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBPICsgRSArIHggJiYgKFIgPSBNKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gRSArIFMgKyBPICsgeCAmJiAoeiA9IDEsIHkgKz0gIlxyIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gRSAmJiAoTyA9IE8gPT09IGcgPyAwIDogMCA9PT0gTyA/IGcgOiBPKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gTyArIEUgKyBTICYmIHgrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gTyArIEUgKyBTICYmIHgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gTyArIEUgKyB4ICYmIFMtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IE8gKyBFICsgeCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBwKSBzd2l0Y2ggKDIgKiBJICsgMyAqIEEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTMzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBFICsgUyArIE8gKyB4ICsgUiArIGggJiYgKGggPSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISgwIDwgTyArIHggKyBTKSkgc3dpdGNoIChFKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKDIgKiBnICsgMyAqIHUuY2hhckNvZGVBdChNICsgMSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gNDc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjIwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGID0gTSwgRSA9IDQyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgNDcgPT09IGcgJiYgNDIgPT09IEkgJiYgRiArIDIgIT09IE0gJiYgKDMzID09PSB1LmNoYXJDb2RlQXQoRiArIDIpICYmICgkICs9IHUuc3Vic3RyaW5nKEYsIE0gKyAxKSksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSAiIiwgRSA9IDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIDAgPT09IEUgJiYgKFYgKz0geSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIEEgPSBJLCBJID0gZywgTSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKDAgPCAoRiA9ICQubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgIGlmICh6ID0gbCwgMCA8IE4gJiYgKHZvaWQgMCAhPT0gKGsgPSBpKDIsICQsIHosIG4sIFQsIEMsIEYsIGYsIGQsIGYpKSAmJiAwID09PSAoJCA9IGspLmxlbmd0aCkpIHJldHVybiBCICsgJCArIHE7CiAgICAgICAgICAgICAgICAgICAgaWYgKCQgPSB6LmpvaW4oIiwiKSArICJ7IiArICQgKyAifSIsIDAgIT0gXyAqIFApIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgyICE9PSBfIHx8IGEoJCwgMikgfHwgKFAgPSAwKSwgUCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCA9ICQucmVwbGFjZSh2LCAiOi1tb3otJDEiKSArICQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkID0gJC5yZXBsYWNlKGIsICI6Oi13ZWJraXQtaW5wdXQtJDEiKSArICQucmVwbGFjZShiLCAiOjotbW96LSQxIikgKyAkLnJlcGxhY2UoYiwgIjotbXMtaW5wdXQtJDEiKSArICQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgUCA9IDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIEIgKyAkICsgcTsKICAgICAgICAgICAgfShqLCBsLCBuLCAwLCAwKTsKICAgICAgICAgICAgcmV0dXJuIDAgPCBOICYmICh2b2lkIDAgIT09ICh1ID0gaSgtMiwgZiwgbCwgbCwgVCwgQywgZi5sZW5ndGgsIDAsIDAsIDApKSAmJiAoZiA9IHUpKSwgCiAgICAgICAgICAgICIiLCBQID0gMCwgQyA9IFQgPSAxLCBmOwogICAgICAgIH0KICAgICAgICB2YXIgYyA9IC9eXDArL2csIHMgPSAvW1wwXHJcZl0vZywgZiA9IC86ICovZywgZCA9IC96b298Z3JhLywgcCA9IC8oWyw6IF0pKHRyYW5zZm9ybSkvZywgZyA9IC8sXHIrPy9nLCBoID0gLyhbXHRcclxuIF0pKlxmPyYvZywgbSA9IC9AKGtcdyspXHMqKFxTKilccyovLCBiID0gLzo6KHBsYWNlKS9nLCB2ID0gLzoocmVhZC1vbmx5KS9nLCB5ID0gL1tzdmhdXHcrLVt0YmxyXXsyfS8sIHcgPSAvXChccyooLiopXHMqXCkvZywgayA9IC8oW1xzXFNdKj8pOy9nLCB4ID0gLy1zZWxmfGZsZXgtL2csIEUgPSAvW15dKj8oOltycF1bZWxdYVtcdy1dKylbXl0qLywgUyA9IC9zdHJldGNofDpccypcdytcLSg/OmNvbnRlfGF2YWlsKS8sIE8gPSAvKFteLV0pKGltYWdlLXNldFwoKS8sIEMgPSAxLCBUID0gMSwgUCA9IDAsIF8gPSAxLCBqID0gW10sIEkgPSBbXSwgTiA9IDAsIEEgPSBudWxsLCBEID0gMDsKICAgICAgICByZXR1cm4gdS51c2UgPSBmdW5jdGlvbiBlKHQpIHsKICAgICAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICAgICAgY2FzZSB2b2lkIDA6CiAgICAgICAgICAgICAgY2FzZSBudWxsOgogICAgICAgICAgICAgICAgTiA9IEkubGVuZ3RoID0gMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHQpIElbTisrXSA9IHQ7IGVsc2UgaWYgKCJvYmplY3QiID09IHR5cGVvZiB0KSBmb3IgKHZhciBuID0gMCwgciA9IHQubGVuZ3RoOyBuIDwgcjsgKytuKSBlKHRbbl0pOyBlbHNlIEQgPSAwIHwgISF0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0sIHUuc2V0ID0gbCwgdm9pZCAwICE9PSBlICYmIGwoZSksIHU7CiAgICB9Owp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB0LmEgPSB7CiAgICAgICAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IDEsCiAgICAgICAgYm9yZGVySW1hZ2VPdXRzZXQ6IDEsCiAgICAgICAgYm9yZGVySW1hZ2VTbGljZTogMSwKICAgICAgICBib3JkZXJJbWFnZVdpZHRoOiAxLAogICAgICAgIGJveEZsZXg6IDEsCiAgICAgICAgYm94RmxleEdyb3VwOiAxLAogICAgICAgIGJveE9yZGluYWxHcm91cDogMSwKICAgICAgICBjb2x1bW5Db3VudDogMSwKICAgICAgICBjb2x1bW5zOiAxLAogICAgICAgIGZsZXg6IDEsCiAgICAgICAgZmxleEdyb3c6IDEsCiAgICAgICAgZmxleFBvc2l0aXZlOiAxLAogICAgICAgIGZsZXhTaHJpbms6IDEsCiAgICAgICAgZmxleE5lZ2F0aXZlOiAxLAogICAgICAgIGZsZXhPcmRlcjogMSwKICAgICAgICBncmlkUm93OiAxLAogICAgICAgIGdyaWRSb3dFbmQ6IDEsCiAgICAgICAgZ3JpZFJvd1NwYW46IDEsCiAgICAgICAgZ3JpZFJvd1N0YXJ0OiAxLAogICAgICAgIGdyaWRDb2x1bW46IDEsCiAgICAgICAgZ3JpZENvbHVtbkVuZDogMSwKICAgICAgICBncmlkQ29sdW1uU3BhbjogMSwKICAgICAgICBncmlkQ29sdW1uU3RhcnQ6IDEsCiAgICAgICAgbXNHcmlkUm93OiAxLAogICAgICAgIG1zR3JpZFJvd1NwYW46IDEsCiAgICAgICAgbXNHcmlkQ29sdW1uOiAxLAogICAgICAgIG1zR3JpZENvbHVtblNwYW46IDEsCiAgICAgICAgZm9udFdlaWdodDogMSwKICAgICAgICBsaW5lSGVpZ2h0OiAxLAogICAgICAgIG9wYWNpdHk6IDEsCiAgICAgICAgb3JkZXI6IDEsCiAgICAgICAgb3JwaGFuczogMSwKICAgICAgICB0YWJTaXplOiAxLAogICAgICAgIHdpZG93czogMSwKICAgICAgICB6SW5kZXg6IDEsCiAgICAgICAgem9vbTogMSwKICAgICAgICBXZWJraXRMaW5lQ2xhbXA6IDEsCiAgICAgICAgZmlsbE9wYWNpdHk6IDEsCiAgICAgICAgZmxvb2RPcGFjaXR5OiAxLAogICAgICAgIHN0b3BPcGFjaXR5OiAxLAogICAgICAgIHN0cm9rZURhc2hhcnJheTogMSwKICAgICAgICBzdHJva2VEYXNob2Zmc2V0OiAxLAogICAgICAgIHN0cm9rZU1pdGVybGltaXQ6IDEsCiAgICAgICAgc3Ryb2tlT3BhY2l0eTogMSwKICAgICAgICBzdHJva2VXaWR0aDogMQogICAgfTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgZS5leHBvcnRzID0gbig0MSk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIG4ucih0KSwgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gbig1KSwgciA9IG4ubih0KSwgYSA9IG4oMTEpLCBvID0gbigwKSwgaSA9IG4ubihvKSwgbCA9IG4oMjUpLCB1ID0gbi5uKGwpLCBjID0gbigyOCksIHMgPSBuKDIwKSwgZiA9IG4oOSksIGQgPSBuKDQpLCBwID0gbigxMCksIGcgPSBuKDMwKTsKICAgICAgICBmdW5jdGlvbiBoKGUpIHsKICAgICAgICAgICAgdS5hLnJlbmRlcihpLmEuY3JlYXRlRWxlbWVudChkLmEsIHsKICAgICAgICAgICAgICAgIHN0b3JlOiBwLmEKICAgICAgICAgICAgfSwgaS5hLmNyZWF0ZUVsZW1lbnQoby5TdXNwZW5zZSwgewogICAgICAgICAgICAgICAgZmFsbGJhY2s6IGkuYS5jcmVhdGVFbGVtZW50KCJkaXYiLCBudWxsLCAib24gc3VzcGVuc2luZy4uLi4iKQogICAgICAgICAgICB9LCBpLmEuY3JlYXRlRWxlbWVudChlLCBudWxsKSkpLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjLmEpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbSgpIHsKICAgICAgICAgICAgcmV0dXJuIChtID0gT2JqZWN0KGEuYSkoci5hLm1hcmsoKGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gci5hLndyYXAoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKDs7KSBzd2l0Y2ggKGUucHJldiA9IGUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgiYmVmb3JlZW5kIiwgJzxkaXYgaWQ9IicuY29uY2F0KGMuYSwgJyI+PC9kaXY+JykpLCAKICAgICAgICAgICAgICAgICAgICAgICAgaChnLmEpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwgZSk7CiAgICAgICAgICAgIH0pKSkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIE9iamVjdChmLmEpKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgfSkoKS5jYXRjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdChmLmQpKGUpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfSkpLCBzLmEgJiYgZS5ob3QgJiYgZS5ob3QuYWNjZXB0KCIuL0FwcC50c3giLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGgoZy5hKTsKICAgICAgICB9KSk7CiAgICB9LmNhbGwodGhpcywgbigzMikoZSkpOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICB2YXIgciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAidXNlIHN0cmljdCI7CiAgICAgICAgdmFyIHQgPSBPYmplY3QucHJvdG90eXBlLCBuID0gdC5oYXNPd25Qcm9wZXJ0eSwgciA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCA/IFN5bWJvbCA6IHt9LCBhID0gci5pdGVyYXRvciB8fCAiQEBpdGVyYXRvciIsIG8gPSByLmFzeW5jSXRlcmF0b3IgfHwgIkBAYXN5bmNJdGVyYXRvciIsIGkgPSByLnRvU3RyaW5nVGFnIHx8ICJAQHRvU3RyaW5nVGFnIjsKICAgICAgICBmdW5jdGlvbiBsKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgdmFyIGEgPSB0ICYmIHQucHJvdG90eXBlIGluc3RhbmNlb2YgcyA/IHQgOiBzLCBvID0gT2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksIGkgPSBuZXcgeChyIHx8IFtdKTsKICAgICAgICAgICAgcmV0dXJuIG8uX2ludm9rZSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgIHZhciByID0gInN1c3BlbmRlZFN0YXJ0IjsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihhLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJleGVjdXRpbmciID09PSByKSB0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTsKICAgICAgICAgICAgICAgICAgICBpZiAoImNvbXBsZXRlZCIgPT09IHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ0aHJvdyIgPT09IGEpIHRocm93IG87CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAobi5tZXRob2QgPSBhLCBuLmFyZyA9IG87IDspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuLmRlbGVnYXRlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSB5KGksIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobCA9PT0gYykgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJuZXh0IiA9PT0gbi5tZXRob2QpIG4uc2VudCA9IG4uX3NlbnQgPSBuLmFyZzsgZWxzZSBpZiAoInRocm93IiA9PT0gbi5tZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgic3VzcGVuZGVkU3RhcnQiID09PSByKSB0aHJvdyByID0gImNvbXBsZXRlZCIsIG4uYXJnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5kaXNwYXRjaEV4Y2VwdGlvbihuLmFyZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAicmV0dXJuIiA9PT0gbi5tZXRob2QgJiYgbi5hYnJ1cHQoInJldHVybiIsIG4uYXJnKTsKICAgICAgICAgICAgICAgICAgICAgICAgciA9ICJleGVjdXRpbmciOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHUoZSwgdCwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibm9ybWFsIiA9PT0gcy50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociA9IG4uZG9uZSA/ICJjb21wbGV0ZWQiIDogInN1c3BlbmRlZFlpZWxkIiwgcy5hcmcgPT09IGMpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcy5hcmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogbi5kb25lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICJ0aHJvdyIgPT09IHMudHlwZSAmJiAociA9ICJjb21wbGV0ZWQiLCBuLm1ldGhvZCA9ICJ0aHJvdyIsIG4uYXJnID0gcy5hcmcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oZSwgbiwgaSksIG87CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHUoZSwgdCwgbikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAibm9ybWFsIiwKICAgICAgICAgICAgICAgICAgICBhcmc6IGUuY2FsbCh0LCBuKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAidGhyb3ciLAogICAgICAgICAgICAgICAgICAgIGFyZzogZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlLndyYXAgPSBsOwogICAgICAgIHZhciBjID0ge307CiAgICAgICAgZnVuY3Rpb24gcygpIHt9CiAgICAgICAgZnVuY3Rpb24gZigpIHt9CiAgICAgICAgZnVuY3Rpb24gZCgpIHt9CiAgICAgICAgdmFyIHAgPSB7fTsKICAgICAgICBwW2FdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH07CiAgICAgICAgdmFyIGcgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsIGggPSBnICYmIGcoZyhFKFtdKSkpOwogICAgICAgIGggJiYgaCAhPT0gdCAmJiBuLmNhbGwoaCwgYSkgJiYgKHAgPSBoKTsKICAgICAgICB2YXIgbSA9IGQucHJvdG90eXBlID0gcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHApOwogICAgICAgIGZ1bmN0aW9uIGIoZSkgewogICAgICAgICAgICBbICJuZXh0IiwgInRocm93IiwgInJldHVybiIgXS5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBlW3RdID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UodCwgZSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHYoZSwgdCkgewogICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgdGhpcy5faW52b2tlID0gZnVuY3Rpb24oYSwgbykgewogICAgICAgICAgICAgICAgZnVuY3Rpb24gaSgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHQoKGZ1bmN0aW9uKHIsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIWZ1bmN0aW9uIHIoYSwgbywgaSwgbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB1KGVbYV0sIGUsIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ0aHJvdyIgIT09IGMudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gYy5hcmcsIGYgPSBzLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmICYmICJvYmplY3QiID09IHR5cGVvZiBmICYmIG4uY2FsbChmLCAiX19hd2FpdCIpID8gdC5yZXNvbHZlKGYuX19hd2FpdCkudGhlbigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKCJuZXh0IiwgZSwgaSwgbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoInRocm93IiwgZSwgaSwgbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIDogdC5yZXNvbHZlKGYpLnRoZW4oKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy52YWx1ZSA9IGUsIGkocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKCJ0aHJvdyIsIGUsIGksIGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwoYy5hcmcpOwogICAgICAgICAgICAgICAgICAgICAgICB9KGEsIG8sIHIsIGkpOwogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiByID0gciA/IHIudGhlbihpLCBpKSA6IGkoKTsKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24geShlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gZS5pdGVyYXRvclt0Lm1ldGhvZF07CiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHsKICAgICAgICAgICAgICAgIGlmICh0LmRlbGVnYXRlID0gbnVsbCwgInRocm93IiA9PT0gdC5tZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5pdGVyYXRvci5yZXR1cm4gJiYgKHQubWV0aG9kID0gInJldHVybiIsIHQuYXJnID0gdm9pZCAwLCB5KGUsIHQpLCAidGhyb3ciID09PSB0Lm1ldGhvZCkpIHJldHVybiBjOwogICAgICAgICAgICAgICAgICAgIHQubWV0aG9kID0gInRocm93IiwgdC5hcmcgPSBuZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgciA9IHUobiwgZS5pdGVyYXRvciwgdC5hcmcpOwogICAgICAgICAgICBpZiAoInRocm93IiA9PT0gci50eXBlKSByZXR1cm4gdC5tZXRob2QgPSAidGhyb3ciLCB0LmFyZyA9IHIuYXJnLCB0LmRlbGVnYXRlID0gbnVsbCwgCiAgICAgICAgICAgIGM7CiAgICAgICAgICAgIHZhciBhID0gci5hcmc7CiAgICAgICAgICAgIHJldHVybiBhID8gYS5kb25lID8gKHRbZS5yZXN1bHROYW1lXSA9IGEudmFsdWUsIHQubmV4dCA9IGUubmV4dExvYywgInJldHVybiIgIT09IHQubWV0aG9kICYmICh0Lm1ldGhvZCA9ICJuZXh0IiwgCiAgICAgICAgICAgIHQuYXJnID0gdm9pZCAwKSwgdC5kZWxlZ2F0ZSA9IG51bGwsIGMpIDogYSA6ICh0Lm1ldGhvZCA9ICJ0aHJvdyIsIHQuYXJnID0gbmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSwgCiAgICAgICAgICAgIHQuZGVsZWdhdGUgPSBudWxsLCBjKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdyhlKSB7CiAgICAgICAgICAgIHZhciB0ID0gewogICAgICAgICAgICAgICAgdHJ5TG9jOiBlWzBdCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIDEgaW4gZSAmJiAodC5jYXRjaExvYyA9IGVbMV0pLCAyIGluIGUgJiYgKHQuZmluYWxseUxvYyA9IGVbMl0sIHQuYWZ0ZXJMb2MgPSBlWzNdKSwgCiAgICAgICAgICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKHQpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBrKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBlLmNvbXBsZXRpb24gfHwge307CiAgICAgICAgICAgIHQudHlwZSA9ICJub3JtYWwiLCBkZWxldGUgdC5hcmcsIGUuY29tcGxldGlvbiA9IHQ7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHgoZSkgewogICAgICAgICAgICB0aGlzLnRyeUVudHJpZXMgPSBbIHsKICAgICAgICAgICAgICAgIHRyeUxvYzogInJvb3QiCiAgICAgICAgICAgIH0gXSwgZS5mb3JFYWNoKHcsIHRoaXMpLCB0aGlzLnJlc2V0KCEwKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gRShlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IGVbYV07CiAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHQuY2FsbChlKTsKICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBlLm5leHQpIHJldHVybiBlOwogICAgICAgICAgICAgICAgaWYgKCFpc05hTihlLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IC0xLCBvID0gZnVuY3Rpb24gdCgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7KytyIDwgZS5sZW5ndGg7ICkgaWYgKG4uY2FsbChlLCByKSkgcmV0dXJuIHQudmFsdWUgPSBlW3JdLCB0LmRvbmUgPSAhMSwgdDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudmFsdWUgPSB2b2lkIDAsIHQuZG9uZSA9ICEwLCB0OwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ubmV4dCA9IG87CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG5leHQ6IFMKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gUygpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsCiAgICAgICAgICAgICAgICBkb25lOiAhMAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gZi5wcm90b3R5cGUgPSBtLmNvbnN0cnVjdG9yID0gZCwgZC5jb25zdHJ1Y3RvciA9IGYsIGRbaV0gPSBmLmRpc3BsYXlOYW1lID0gIkdlbmVyYXRvckZ1bmN0aW9uIiwgCiAgICAgICAgZS5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgZS5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgcmV0dXJuICEhdCAmJiAodCA9PT0gZiB8fCAiR2VuZXJhdG9yRnVuY3Rpb24iID09PSAodC5kaXNwbGF5TmFtZSB8fCB0Lm5hbWUpKTsKICAgICAgICB9LCBlLm1hcmsgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSwgZCkgOiAoZS5fX3Byb3RvX18gPSBkLCBpIGluIGUgfHwgKGVbaV0gPSAiR2VuZXJhdG9yRnVuY3Rpb24iKSksIAogICAgICAgICAgICBlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUobSksIGU7CiAgICAgICAgfSwgZS5hd3JhcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIF9fYXdhaXQ6IGUKICAgICAgICAgICAgfTsKICAgICAgICB9LCBiKHYucHJvdG90eXBlKSwgdi5wcm90b3R5cGVbb10gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfSwgZS5Bc3luY0l0ZXJhdG9yID0gdiwgZS5hc3luYyA9IGZ1bmN0aW9uKHQsIG4sIHIsIGEsIG8pIHsKICAgICAgICAgICAgdm9pZCAwID09PSBvICYmIChvID0gUHJvbWlzZSk7CiAgICAgICAgICAgIHZhciBpID0gbmV3IHYobCh0LCBuLCByLCBhKSwgbyk7CiAgICAgICAgICAgIHJldHVybiBlLmlzR2VuZXJhdG9yRnVuY3Rpb24obikgPyBpIDogaS5uZXh0KCkudGhlbigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUuZG9uZSA/IGUudmFsdWUgOiBpLm5leHQoKTsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0sIGIobSksIG1baV0gPSAiR2VuZXJhdG9yIiwgbVthXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9LCBtLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiAiW29iamVjdCBHZW5lcmF0b3JdIjsKICAgICAgICB9LCBlLmtleXMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gW107CiAgICAgICAgICAgIGZvciAodmFyIG4gaW4gZSkgdC5wdXNoKG4pOwogICAgICAgICAgICByZXR1cm4gdC5yZXZlcnNlKCksIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgICAgICBmb3IgKDt0Lmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0LnBvcCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChyIGluIGUpIHJldHVybiBuLnZhbHVlID0gciwgbi5kb25lID0gITEsIG47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbi5kb25lID0gITAsIG47CiAgICAgICAgICAgIH07CiAgICAgICAgfSwgZS52YWx1ZXMgPSBFLCB4LnByb3RvdHlwZSA9IHsKICAgICAgICAgICAgY29uc3RydWN0b3I6IHgsCiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2ID0gMCwgdGhpcy5uZXh0ID0gMCwgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHZvaWQgMCwgdGhpcy5kb25lID0gITEsIAogICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGwsIHRoaXMubWV0aG9kID0gIm5leHQiLCB0aGlzLmFyZyA9IHZvaWQgMCwgdGhpcy50cnlFbnRyaWVzLmZvckVhY2goayksIAogICAgICAgICAgICAgICAgIWUpIGZvciAodmFyIHQgaW4gdGhpcykgInQiID09PSB0LmNoYXJBdCgwKSAmJiBuLmNhbGwodGhpcywgdCkgJiYgIWlzTmFOKCt0LnNsaWNlKDEpKSAmJiAodGhpc1t0XSA9IHZvaWQgMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5kb25lID0gITA7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMudHJ5RW50cmllc1swXS5jb21wbGV0aW9uOwogICAgICAgICAgICAgICAgaWYgKCJ0aHJvdyIgPT09IGUudHlwZSkgdGhyb3cgZS5hcmc7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ydmFsOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9uZSkgdGhyb3cgZTsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpczsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIobiwgcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpLnR5cGUgPSAidGhyb3ciLCBpLmFyZyA9IGUsIHQubmV4dCA9IG4sIHIgJiYgKHQubWV0aG9kID0gIm5leHQiLCB0LmFyZyA9IHZvaWQgMCksIAogICAgICAgICAgICAgICAgICAgICEhcjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgYSA+PSAwOyAtLWEpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMudHJ5RW50cmllc1thXSwgaSA9IG8uY29tcGxldGlvbjsKICAgICAgICAgICAgICAgICAgICBpZiAoInJvb3QiID09PSBvLnRyeUxvYykgcmV0dXJuIHIoImVuZCIpOwogICAgICAgICAgICAgICAgICAgIGlmIChvLnRyeUxvYyA8PSB0aGlzLnByZXYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBuLmNhbGwobywgImNhdGNoTG9jIiksIHUgPSBuLmNhbGwobywgImZpbmFsbHlMb2MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgJiYgdSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IG8uY2F0Y2hMb2MpIHJldHVybiByKG8uY2F0Y2hMb2MsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBvLmZpbmFsbHlMb2MpIHJldHVybiByKG8uZmluYWxseUxvYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IG8uY2F0Y2hMb2MpIHJldHVybiByKG8uY2F0Y2hMb2MsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdSkgdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IG8uZmluYWxseUxvYykgcmV0dXJuIHIoby5maW5hbGx5TG9jKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWJydXB0OiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHIgPj0gMDsgLS1yKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0aGlzLnRyeUVudHJpZXNbcl07CiAgICAgICAgICAgICAgICAgICAgaWYgKGEudHJ5TG9jIDw9IHRoaXMucHJldiAmJiBuLmNhbGwoYSwgImZpbmFsbHlMb2MiKSAmJiB0aGlzLnByZXYgPCBhLmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBvICYmICgiYnJlYWsiID09PSBlIHx8ICJjb250aW51ZSIgPT09IGUpICYmIG8udHJ5TG9jIDw9IHQgJiYgdCA8PSBvLmZpbmFsbHlMb2MgJiYgKG8gPSBudWxsKTsKICAgICAgICAgICAgICAgIHZhciBpID0gbyA/IG8uY29tcGxldGlvbiA6IHt9OwogICAgICAgICAgICAgICAgcmV0dXJuIGkudHlwZSA9IGUsIGkuYXJnID0gdCwgbyA/ICh0aGlzLm1ldGhvZCA9ICJuZXh0IiwgdGhpcy5uZXh0ID0gby5maW5hbGx5TG9jLCAKICAgICAgICAgICAgICAgIGMpIDogdGhpcy5jb21wbGV0ZShpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIGlmICgidGhyb3ciID09PSBlLnR5cGUpIHRocm93IGUuYXJnOwogICAgICAgICAgICAgICAgcmV0dXJuICJicmVhayIgPT09IGUudHlwZSB8fCAiY29udGludWUiID09PSBlLnR5cGUgPyB0aGlzLm5leHQgPSBlLmFyZyA6ICJyZXR1cm4iID09PSBlLnR5cGUgPyAodGhpcy5ydmFsID0gdGhpcy5hcmcgPSBlLmFyZywgCiAgICAgICAgICAgICAgICB0aGlzLm1ldGhvZCA9ICJyZXR1cm4iLCB0aGlzLm5leHQgPSAiZW5kIikgOiAibm9ybWFsIiA9PT0gZS50eXBlICYmIHQgJiYgKHRoaXMubmV4dCA9IHQpLCAKICAgICAgICAgICAgICAgIGM7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbmlzaDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyB0ID49IDA7IC0tdCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy50cnlFbnRyaWVzW3RdOwogICAgICAgICAgICAgICAgICAgIGlmIChuLmZpbmFsbHlMb2MgPT09IGUpIHJldHVybiB0aGlzLmNvbXBsZXRlKG4uY29tcGxldGlvbiwgbi5hZnRlckxvYyksIGsobiksIGM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNhdGNoOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHQgPj0gMDsgLS10KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLnRyeUVudHJpZXNbdF07CiAgICAgICAgICAgICAgICAgICAgaWYgKG4udHJ5TG9jID09PSBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbi5jb21wbGV0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoInRocm93IiA9PT0gci50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHIuYXJnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgayhuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZSA9IHsKICAgICAgICAgICAgICAgICAgICBpdGVyYXRvcjogRShlKSwKICAgICAgICAgICAgICAgICAgICByZXN1bHROYW1lOiB0LAogICAgICAgICAgICAgICAgICAgIG5leHRMb2M6IG4KICAgICAgICAgICAgICAgIH0sICJuZXh0IiA9PT0gdGhpcy5tZXRob2QgJiYgKHRoaXMuYXJnID0gdm9pZCAwKSwgYzsKICAgICAgICAgICAgfQogICAgICAgIH0sIGU7CiAgICB9KGUuZXhwb3J0cyk7CiAgICB0cnkgewogICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZSA9IHI7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgRnVuY3Rpb24oInIiLCAicmVnZW5lcmF0b3JSdW50aW1lID0gciIpKHIpOwogICAgfQp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgciA9IG4oMzMpLCBhID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5mb3IsIG8gPSBhID8gU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpIDogNjAxMDMsIGkgPSBhID8gU3ltYm9sLmZvcigicmVhY3QucG9ydGFsIikgOiA2MDEwNiwgbCA9IGEgPyBTeW1ib2wuZm9yKCJyZWFjdC5mcmFnbWVudCIpIDogNjAxMDcsIHUgPSBhID8gU3ltYm9sLmZvcigicmVhY3Quc3RyaWN0X21vZGUiKSA6IDYwMTA4LCBjID0gYSA/IFN5bWJvbC5mb3IoInJlYWN0LnByb2ZpbGVyIikgOiA2MDExNCwgcyA9IGEgPyBTeW1ib2wuZm9yKCJyZWFjdC5wcm92aWRlciIpIDogNjAxMDksIGYgPSBhID8gU3ltYm9sLmZvcigicmVhY3QuY29udGV4dCIpIDogNjAxMTAsIGQgPSBhID8gU3ltYm9sLmZvcigicmVhY3QuZm9yd2FyZF9yZWYiKSA6IDYwMTEyLCBwID0gYSA/IFN5bWJvbC5mb3IoInJlYWN0LnN1c3BlbnNlIikgOiA2MDExMywgZyA9IGEgPyBTeW1ib2wuZm9yKCJyZWFjdC5tZW1vIikgOiA2MDExNSwgaCA9IGEgPyBTeW1ib2wuZm9yKCJyZWFjdC5sYXp5IikgOiA2MDExNiwgbSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3I7CiAgICBmdW5jdGlvbiBiKGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gImh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9lcnJvci1kZWNvZGVyLmh0bWw/aW52YXJpYW50PSIgKyBlLCBuID0gMTsgbiA8IGFyZ3VtZW50cy5sZW5ndGg7IG4rKykgdCArPSAiJmFyZ3NbXT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1tuXSk7CiAgICAgICAgcmV0dXJuICJNaW5pZmllZCBSZWFjdCBlcnJvciAjIiArIGUgKyAiOyB2aXNpdCAiICsgdCArICIgZm9yIHRoZSBmdWxsIG1lc3NhZ2Ugb3IgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50IGZvciBmdWxsIGVycm9ycyBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLiI7CiAgICB9CiAgICB2YXIgdiA9IHsKICAgICAgICBpc01vdW50ZWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgfSwKICAgICAgICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24oKSB7fSwKICAgICAgICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uKCkge30KICAgIH0sIHkgPSB7fTsKICAgIGZ1bmN0aW9uIHcoZSwgdCwgbikgewogICAgICAgIHRoaXMucHJvcHMgPSBlLCB0aGlzLmNvbnRleHQgPSB0LCB0aGlzLnJlZnMgPSB5LCB0aGlzLnVwZGF0ZXIgPSBuIHx8IHY7CiAgICB9CiAgICBmdW5jdGlvbiBrKCkge30KICAgIGZ1bmN0aW9uIHgoZSwgdCwgbikgewogICAgICAgIHRoaXMucHJvcHMgPSBlLCB0aGlzLmNvbnRleHQgPSB0LCB0aGlzLnJlZnMgPSB5LCB0aGlzLnVwZGF0ZXIgPSBuIHx8IHY7CiAgICB9CiAgICB3LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge30sIHcucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIGlmICgib2JqZWN0IiAhPSB0eXBlb2YgZSAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiBlICYmIG51bGwgIT0gZSkgdGhyb3cgRXJyb3IoYig4NSkpOwogICAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0U3RhdGUodGhpcywgZSwgdCwgInNldFN0YXRlIik7CiAgICB9LCB3LnByb3RvdHlwZS5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUZvcmNlVXBkYXRlKHRoaXMsIGUsICJmb3JjZVVwZGF0ZSIpOwogICAgfSwgay5wcm90b3R5cGUgPSB3LnByb3RvdHlwZTsKICAgIHZhciBFID0geC5wcm90b3R5cGUgPSBuZXcgazsKICAgIEUuY29uc3RydWN0b3IgPSB4LCByKEUsIHcucHJvdG90eXBlKSwgRS5pc1B1cmVSZWFjdENvbXBvbmVudCA9ICEwOwogICAgdmFyIFMgPSB7CiAgICAgICAgY3VycmVudDogbnVsbAogICAgfSwgTyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksIEMgPSB7CiAgICAgICAga2V5OiAhMCwKICAgICAgICByZWY6ICEwLAogICAgICAgIF9fc2VsZjogITAsCiAgICAgICAgX19zb3VyY2U6ICEwCiAgICB9OwogICAgZnVuY3Rpb24gVChlLCB0LCBuKSB7CiAgICAgICAgdmFyIHIsIGEgPSB7fSwgaSA9IG51bGwsIGwgPSBudWxsOwogICAgICAgIGlmIChudWxsICE9IHQpIGZvciAociBpbiB2b2lkIDAgIT09IHQucmVmICYmIChsID0gdC5yZWYpLCB2b2lkIDAgIT09IHQua2V5ICYmIChpID0gIiIgKyB0LmtleSksIAogICAgICAgIHQpIE8uY2FsbCh0LCByKSAmJiAhQy5oYXNPd25Qcm9wZXJ0eShyKSAmJiAoYVtyXSA9IHRbcl0pOwogICAgICAgIHZhciB1ID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7CiAgICAgICAgaWYgKDEgPT09IHUpIGEuY2hpbGRyZW4gPSBuOyBlbHNlIGlmICgxIDwgdSkgewogICAgICAgICAgICBmb3IgKHZhciBjID0gQXJyYXkodSksIHMgPSAwOyBzIDwgdTsgcysrKSBjW3NdID0gYXJndW1lbnRzW3MgKyAyXTsKICAgICAgICAgICAgYS5jaGlsZHJlbiA9IGM7CiAgICAgICAgfQogICAgICAgIGlmIChlICYmIGUuZGVmYXVsdFByb3BzKSBmb3IgKHIgaW4gdSA9IGUuZGVmYXVsdFByb3BzKSB2b2lkIDAgPT09IGFbcl0gJiYgKGFbcl0gPSB1W3JdKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAkJHR5cGVvZjogbywKICAgICAgICAgICAgdHlwZTogZSwKICAgICAgICAgICAga2V5OiBpLAogICAgICAgICAgICByZWY6IGwsCiAgICAgICAgICAgIHByb3BzOiBhLAogICAgICAgICAgICBfb3duZXI6IFMuY3VycmVudAogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBQKGUpIHsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSAmJiBlLiQkdHlwZW9mID09PSBvOwogICAgfQogICAgdmFyIF8gPSAvXC8rL2csIGogPSBbXTsKICAgIGZ1bmN0aW9uIEkoZSwgdCwgbiwgcikgewogICAgICAgIGlmIChqLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgYSA9IGoucG9wKCk7CiAgICAgICAgICAgIHJldHVybiBhLnJlc3VsdCA9IGUsIGEua2V5UHJlZml4ID0gdCwgYS5mdW5jID0gbiwgYS5jb250ZXh0ID0gciwgYS5jb3VudCA9IDAsIGE7CiAgICAgICAgfQogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJlc3VsdDogZSwKICAgICAgICAgICAga2V5UHJlZml4OiB0LAogICAgICAgICAgICBmdW5jOiBuLAogICAgICAgICAgICBjb250ZXh0OiByLAogICAgICAgICAgICBjb3VudDogMAogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBOKGUpIHsKICAgICAgICBlLnJlc3VsdCA9IG51bGwsIGUua2V5UHJlZml4ID0gbnVsbCwgZS5mdW5jID0gbnVsbCwgZS5jb250ZXh0ID0gbnVsbCwgZS5jb3VudCA9IDAsIAogICAgICAgIDEwID4gai5sZW5ndGggJiYgai5wdXNoKGUpOwogICAgfQogICAgZnVuY3Rpb24gQShlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IDAgOiBmdW5jdGlvbiBlKHQsIG4sIHIsIGEpIHsKICAgICAgICAgICAgdmFyIGwgPSB0eXBlb2YgdDsKICAgICAgICAgICAgInVuZGVmaW5lZCIgIT09IGwgJiYgImJvb2xlYW4iICE9PSBsIHx8ICh0ID0gbnVsbCk7CiAgICAgICAgICAgIHZhciB1ID0gITE7CiAgICAgICAgICAgIGlmIChudWxsID09PSB0KSB1ID0gITA7IGVsc2Ugc3dpdGNoIChsKSB7CiAgICAgICAgICAgICAgY2FzZSAic3RyaW5nIjoKICAgICAgICAgICAgICBjYXNlICJudW1iZXIiOgogICAgICAgICAgICAgICAgdSA9ICEwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgIm9iamVjdCI6CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQuJCR0eXBlb2YpIHsKICAgICAgICAgICAgICAgICAgY2FzZSBvOgogICAgICAgICAgICAgICAgICBjYXNlIGk6CiAgICAgICAgICAgICAgICAgICAgdSA9ICEwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh1KSByZXR1cm4gcihhLCB0LCAiIiA9PT0gbiA/ICIuIiArIEQodCwgMCkgOiBuKSwgMTsKICAgICAgICAgICAgaWYgKHUgPSAwLCBuID0gIiIgPT09IG4gPyAiLiIgOiBuICsgIjoiLCBBcnJheS5pc0FycmF5KHQpKSBmb3IgKHZhciBjID0gMDsgYyA8IHQubGVuZ3RoOyBjKyspIHsKICAgICAgICAgICAgICAgIHZhciBzID0gbiArIEQobCA9IHRbY10sIGMpOwogICAgICAgICAgICAgICAgdSArPSBlKGwsIHMsIHIsIGEpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgPT09IHQgfHwgIm9iamVjdCIgIT0gdHlwZW9mIHQgPyBzID0gbnVsbCA6IHMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiAocyA9IG0gJiYgdFttXSB8fCB0WyJAQGl0ZXJhdG9yIl0pID8gcyA6IG51bGwsIAogICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBzKSBmb3IgKHQgPSBzLmNhbGwodCksIGMgPSAwOyAhKGwgPSB0Lm5leHQoKSkuZG9uZTsgKSB1ICs9IGUobCA9IGwudmFsdWUsIHMgPSBuICsgRChsLCBjKyspLCByLCBhKTsgZWxzZSBpZiAoIm9iamVjdCIgPT09IGwpIHRocm93IHIgPSAiIiArIHQsIAogICAgICAgICAgICBFcnJvcihiKDMxLCAiW29iamVjdCBPYmplY3RdIiA9PT0gciA/ICJvYmplY3Qgd2l0aCBrZXlzIHsiICsgT2JqZWN0LmtleXModCkuam9pbigiLCAiKSArICJ9IiA6IHIsICIiKSk7CiAgICAgICAgICAgIHJldHVybiB1OwogICAgICAgIH0oZSwgIiIsIHQsIG4pOwogICAgfQogICAgZnVuY3Rpb24gRChlLCB0KSB7CiAgICAgICAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiBlICYmIG51bGwgIT09IGUgJiYgbnVsbCAhPSBlLmtleSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSB7CiAgICAgICAgICAgICAgICAiPSI6ICI9MCIsCiAgICAgICAgICAgICAgICAiOiI6ICI9MiIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuICIkIiArICgiIiArIGUpLnJlcGxhY2UoL1s9Ol0vZywgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0W2VdOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfShlLmtleSkgOiB0LnRvU3RyaW5nKDM2KTsKICAgIH0KICAgIGZ1bmN0aW9uIFIoZSwgdCkgewogICAgICAgIGUuZnVuYy5jYWxsKGUuY29udGV4dCwgdCwgZS5jb3VudCsrKTsKICAgIH0KICAgIGZ1bmN0aW9uIE0oZSwgdCwgbikgewogICAgICAgIHZhciByID0gZS5yZXN1bHQsIGEgPSBlLmtleVByZWZpeDsKICAgICAgICBlID0gZS5mdW5jLmNhbGwoZS5jb250ZXh0LCB0LCBlLmNvdW50KyspLCBBcnJheS5pc0FycmF5KGUpID8geihlLCByLCBuLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KSkgOiBudWxsICE9IGUgJiYgKFAoZSkgJiYgKGUgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAkJHR5cGVvZjogbywKICAgICAgICAgICAgICAgIHR5cGU6IGUudHlwZSwKICAgICAgICAgICAgICAgIGtleTogdCwKICAgICAgICAgICAgICAgIHJlZjogZS5yZWYsCiAgICAgICAgICAgICAgICBwcm9wczogZS5wcm9wcywKICAgICAgICAgICAgICAgIF9vd25lcjogZS5fb3duZXIKICAgICAgICAgICAgfTsKICAgICAgICB9KGUsIGEgKyAoIWUua2V5IHx8IHQgJiYgdC5rZXkgPT09IGUua2V5ID8gIiIgOiAoIiIgKyBlLmtleSkucmVwbGFjZShfLCAiJCYvIikgKyAiLyIpICsgbikpLCAKICAgICAgICByLnB1c2goZSkpOwogICAgfQogICAgZnVuY3Rpb24geihlLCB0LCBuLCByLCBhKSB7CiAgICAgICAgdmFyIG8gPSAiIjsKICAgICAgICBudWxsICE9IG4gJiYgKG8gPSAoIiIgKyBuKS5yZXBsYWNlKF8sICIkJi8iKSArICIvIiksIEEoZSwgTSwgdCA9IEkodCwgbywgciwgYSkpLCAKICAgICAgICBOKHQpOwogICAgfQogICAgdmFyIEwgPSB7CiAgICAgICAgY3VycmVudDogbnVsbAogICAgfTsKICAgIGZ1bmN0aW9uIEYoKSB7CiAgICAgICAgdmFyIGUgPSBMLmN1cnJlbnQ7CiAgICAgICAgaWYgKG51bGwgPT09IGUpIHRocm93IEVycm9yKGIoMzIxKSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICB2YXIgVSA9IHsKICAgICAgICBSZWFjdEN1cnJlbnREaXNwYXRjaGVyOiBMLAogICAgICAgIFJlYWN0Q3VycmVudEJhdGNoQ29uZmlnOiB7CiAgICAgICAgICAgIHN1c3BlbnNlOiBudWxsCiAgICAgICAgfSwKICAgICAgICBSZWFjdEN1cnJlbnRPd25lcjogUywKICAgICAgICBJc1NvbWVSZW5kZXJlckFjdGluZzogewogICAgICAgICAgICBjdXJyZW50OiAhMQogICAgICAgIH0sCiAgICAgICAgYXNzaWduOiByCiAgICB9OwogICAgdC5DaGlsZHJlbiA9IHsKICAgICAgICBtYXA6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIGU7CiAgICAgICAgICAgIHZhciByID0gW107CiAgICAgICAgICAgIHJldHVybiB6KGUsIHIsIG51bGwsIHQsIG4pLCByOwogICAgICAgIH0sCiAgICAgICAgZm9yRWFjaDogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gZTsKICAgICAgICAgICAgQShlLCBSLCB0ID0gSShudWxsLCBudWxsLCB0LCBuKSksIE4odCk7CiAgICAgICAgfSwKICAgICAgICBjb3VudDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gQShlLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfSksIG51bGwpOwogICAgICAgIH0sCiAgICAgICAgdG9BcnJheTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IFtdOwogICAgICAgICAgICByZXR1cm4geihlLCB0LCBudWxsLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIH0pKSwgdDsKICAgICAgICB9LAogICAgICAgIG9ubHk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKCFQKGUpKSB0aHJvdyBFcnJvcihiKDE0MykpOwogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CiAgICB9LCB0LkNvbXBvbmVudCA9IHcsIHQuRnJhZ21lbnQgPSBsLCB0LlByb2ZpbGVyID0gYywgdC5QdXJlQ29tcG9uZW50ID0geCwgdC5TdHJpY3RNb2RlID0gdSwgCiAgICB0LlN1c3BlbnNlID0gcCwgdC5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRCA9IFUsIHQuY2xvbmVFbGVtZW50ID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgIGlmIChudWxsID09IGUpIHRocm93IEVycm9yKGIoMjY3LCBlKSk7CiAgICAgICAgdmFyIGEgPSByKHt9LCBlLnByb3BzKSwgaSA9IGUua2V5LCBsID0gZS5yZWYsIHUgPSBlLl9vd25lcjsKICAgICAgICBpZiAobnVsbCAhPSB0KSB7CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQucmVmICYmIChsID0gdC5yZWYsIHUgPSBTLmN1cnJlbnQpLCB2b2lkIDAgIT09IHQua2V5ICYmIChpID0gIiIgKyB0LmtleSksIAogICAgICAgICAgICBlLnR5cGUgJiYgZS50eXBlLmRlZmF1bHRQcm9wcykgdmFyIGMgPSBlLnR5cGUuZGVmYXVsdFByb3BzOwogICAgICAgICAgICBmb3IgKHMgaW4gdCkgTy5jYWxsKHQsIHMpICYmICFDLmhhc093blByb3BlcnR5KHMpICYmIChhW3NdID0gdm9pZCAwID09PSB0W3NdICYmIHZvaWQgMCAhPT0gYyA/IGNbc10gOiB0W3NdKTsKICAgICAgICB9CiAgICAgICAgdmFyIHMgPSBhcmd1bWVudHMubGVuZ3RoIC0gMjsKICAgICAgICBpZiAoMSA9PT0gcykgYS5jaGlsZHJlbiA9IG47IGVsc2UgaWYgKDEgPCBzKSB7CiAgICAgICAgICAgIGMgPSBBcnJheShzKTsKICAgICAgICAgICAgZm9yICh2YXIgZiA9IDA7IGYgPCBzOyBmKyspIGNbZl0gPSBhcmd1bWVudHNbZiArIDJdOwogICAgICAgICAgICBhLmNoaWxkcmVuID0gYzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgJCR0eXBlb2Y6IG8sCiAgICAgICAgICAgIHR5cGU6IGUudHlwZSwKICAgICAgICAgICAga2V5OiBpLAogICAgICAgICAgICByZWY6IGwsCiAgICAgICAgICAgIHByb3BzOiBhLAogICAgICAgICAgICBfb3duZXI6IHUKICAgICAgICB9OwogICAgfSwgdC5jcmVhdGVDb250ZXh0ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgKHQgPSBudWxsKSwgKGUgPSB7CiAgICAgICAgICAgICQkdHlwZW9mOiBmLAogICAgICAgICAgICBfY2FsY3VsYXRlQ2hhbmdlZEJpdHM6IHQsCiAgICAgICAgICAgIF9jdXJyZW50VmFsdWU6IGUsCiAgICAgICAgICAgIF9jdXJyZW50VmFsdWUyOiBlLAogICAgICAgICAgICBfdGhyZWFkQ291bnQ6IDAsCiAgICAgICAgICAgIFByb3ZpZGVyOiBudWxsLAogICAgICAgICAgICBDb25zdW1lcjogbnVsbAogICAgICAgIH0pLlByb3ZpZGVyID0gewogICAgICAgICAgICAkJHR5cGVvZjogcywKICAgICAgICAgICAgX2NvbnRleHQ6IGUKICAgICAgICB9LCBlLkNvbnN1bWVyID0gZTsKICAgIH0sIHQuY3JlYXRlRWxlbWVudCA9IFQsIHQuY3JlYXRlRmFjdG9yeSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IFQuYmluZChudWxsLCBlKTsKICAgICAgICByZXR1cm4gdC50eXBlID0gZSwgdDsKICAgIH0sIHQuY3JlYXRlUmVmID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY3VycmVudDogbnVsbAogICAgICAgIH07CiAgICB9LCB0LmZvcndhcmRSZWYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgJCR0eXBlb2Y6IGQsCiAgICAgICAgICAgIHJlbmRlcjogZQogICAgICAgIH07CiAgICB9LCB0LmlzVmFsaWRFbGVtZW50ID0gUCwgdC5sYXp5ID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICQkdHlwZW9mOiBoLAogICAgICAgICAgICBfY3RvcjogZSwKICAgICAgICAgICAgX3N0YXR1czogLTEsCiAgICAgICAgICAgIF9yZXN1bHQ6IG51bGwKICAgICAgICB9OwogICAgfSwgdC5tZW1vID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICQkdHlwZW9mOiBnLAogICAgICAgICAgICB0eXBlOiBlLAogICAgICAgICAgICBjb21wYXJlOiB2b2lkIDAgPT09IHQgPyBudWxsIDogdAogICAgICAgIH07CiAgICB9LCB0LnVzZUNhbGxiYWNrID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiBGKCkudXNlQ2FsbGJhY2soZSwgdCk7CiAgICB9LCB0LnVzZUNvbnRleHQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIEYoKS51c2VDb250ZXh0KGUsIHQpOwogICAgfSwgdC51c2VEZWJ1Z1ZhbHVlID0gZnVuY3Rpb24oKSB7fSwgdC51c2VFZmZlY3QgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIEYoKS51c2VFZmZlY3QoZSwgdCk7CiAgICB9LCB0LnVzZUltcGVyYXRpdmVIYW5kbGUgPSBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIEYoKS51c2VJbXBlcmF0aXZlSGFuZGxlKGUsIHQsIG4pOwogICAgfSwgdC51c2VMYXlvdXRFZmZlY3QgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIEYoKS51c2VMYXlvdXRFZmZlY3QoZSwgdCk7CiAgICB9LCB0LnVzZU1lbW8gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIEYoKS51c2VNZW1vKGUsIHQpOwogICAgfSwgdC51c2VSZWR1Y2VyID0gZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgIHJldHVybiBGKCkudXNlUmVkdWNlcihlLCB0LCBuKTsKICAgIH0sIHQudXNlUmVmID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBGKCkudXNlUmVmKGUpOwogICAgfSwgdC51c2VTdGF0ZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gRigpLnVzZVN0YXRlKGUpOwogICAgfSwgdC52ZXJzaW9uID0gIjE2LjEzLjEiOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgciA9IG4oMCksIGEgPSBuKDMzKSwgbyA9IG4oNDUpOwogICAgZnVuY3Rpb24gaShlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9ICJodHRwczovL3JlYWN0anMub3JnL2RvY3MvZXJyb3ItZGVjb2Rlci5odG1sP2ludmFyaWFudD0iICsgZSwgbiA9IDE7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspIHQgKz0gIiZhcmdzW109IiArIGVuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbbl0pOwogICAgICAgIHJldHVybiAiTWluaWZpZWQgUmVhY3QgZXJyb3IgIyIgKyBlICsgIjsgdmlzaXQgIiArIHQgKyAiIGZvciB0aGUgZnVsbCBtZXNzYWdlIG9yIHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCBmb3IgZnVsbCBlcnJvcnMgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4iOwogICAgfQogICAgaWYgKCFyKSB0aHJvdyBFcnJvcihpKDIyNykpOwogICAgZnVuY3Rpb24gbChlLCB0LCBuLCByLCBhLCBvLCBpLCBsLCB1KSB7CiAgICAgICAgdmFyIGMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDMpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHQuYXBwbHkobiwgYyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB0aGlzLm9uRXJyb3IoZSk7CiAgICAgICAgfQogICAgfQogICAgdmFyIHUgPSAhMSwgYyA9IG51bGwsIHMgPSAhMSwgZiA9IG51bGwsIGQgPSB7CiAgICAgICAgb25FcnJvcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB1ID0gITAsIGMgPSBlOwogICAgICAgIH0KICAgIH07CiAgICBmdW5jdGlvbiBwKGUsIHQsIG4sIHIsIGEsIG8sIGksIHMsIGYpIHsKICAgICAgICB1ID0gITEsIGMgPSBudWxsLCBsLmFwcGx5KGQsIGFyZ3VtZW50cyk7CiAgICB9CiAgICB2YXIgZyA9IG51bGwsIGggPSBudWxsLCBtID0gbnVsbDsKICAgIGZ1bmN0aW9uIGIoZSwgdCwgbikgewogICAgICAgIHZhciByID0gZS50eXBlIHx8ICJ1bmtub3duLWV2ZW50IjsKICAgICAgICBlLmN1cnJlbnRUYXJnZXQgPSBtKG4pLCBmdW5jdGlvbihlLCB0LCBuLCByLCBhLCBvLCBsLCBkLCBnKSB7CiAgICAgICAgICAgIGlmIChwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHUpIHsKICAgICAgICAgICAgICAgIGlmICghdSkgdGhyb3cgRXJyb3IoaSgxOTgpKTsKICAgICAgICAgICAgICAgIHZhciBoID0gYzsKICAgICAgICAgICAgICAgIHUgPSAhMSwgYyA9IG51bGwsIHMgfHwgKHMgPSAhMCwgZiA9IGgpOwogICAgICAgICAgICB9CiAgICAgICAgfShyLCB0LCB2b2lkIDAsIGUpLCBlLmN1cnJlbnRUYXJnZXQgPSBudWxsOwogICAgfQogICAgdmFyIHYgPSBudWxsLCB5ID0ge307CiAgICBmdW5jdGlvbiB3KCkgewogICAgICAgIGlmICh2KSBmb3IgKHZhciBlIGluIHkpIHsKICAgICAgICAgICAgdmFyIHQgPSB5W2VdLCBuID0gdi5pbmRleE9mKGUpOwogICAgICAgICAgICBpZiAoISgtMSA8IG4pKSB0aHJvdyBFcnJvcihpKDk2LCBlKSk7CiAgICAgICAgICAgIGlmICgheFtuXSkgewogICAgICAgICAgICAgICAgaWYgKCF0LmV4dHJhY3RFdmVudHMpIHRocm93IEVycm9yKGkoOTcsIGUpKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4geFtuXSA9IHQsIG4gPSB0LmV2ZW50VHlwZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHZvaWQgMCwgbyA9IG5bcl0sIGwgPSB0LCB1ID0gcjsKICAgICAgICAgICAgICAgICAgICBpZiAoRS5oYXNPd25Qcm9wZXJ0eSh1KSkgdGhyb3cgRXJyb3IoaSg5OSwgdSkpOwogICAgICAgICAgICAgICAgICAgIEVbdV0gPSBvOwogICAgICAgICAgICAgICAgICAgIHZhciBjID0gby5waGFzZWRSZWdpc3RyYXRpb25OYW1lczsKICAgICAgICAgICAgICAgICAgICBpZiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGEgaW4gYykgYy5oYXNPd25Qcm9wZXJ0eShhKSAmJiBrKGNbYV0sIGwsIHUpOwogICAgICAgICAgICAgICAgICAgICAgICBhID0gITA7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG8ucmVnaXN0cmF0aW9uTmFtZSA/IChrKG8ucmVnaXN0cmF0aW9uTmFtZSwgbCwgdSksIGEgPSAhMCkgOiBhID0gITE7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFhKSB0aHJvdyBFcnJvcihpKDk4LCByLCBlKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBrKGUsIHQsIG4pIHsKICAgICAgICBpZiAoU1tlXSkgdGhyb3cgRXJyb3IoaSgxMDAsIGUpKTsKICAgICAgICBTW2VdID0gdCwgT1tlXSA9IHQuZXZlbnRUeXBlc1tuXS5kZXBlbmRlbmNpZXM7CiAgICB9CiAgICB2YXIgeCA9IFtdLCBFID0ge30sIFMgPSB7fSwgTyA9IHt9OwogICAgZnVuY3Rpb24gQyhlKSB7CiAgICAgICAgdmFyIHQsIG4gPSAhMTsKICAgICAgICBmb3IgKHQgaW4gZSkgaWYgKGUuaGFzT3duUHJvcGVydHkodCkpIHsKICAgICAgICAgICAgdmFyIHIgPSBlW3RdOwogICAgICAgICAgICBpZiAoIXkuaGFzT3duUHJvcGVydHkodCkgfHwgeVt0XSAhPT0gcikgewogICAgICAgICAgICAgICAgaWYgKHlbdF0pIHRocm93IEVycm9yKGkoMTAyLCB0KSk7CiAgICAgICAgICAgICAgICB5W3RdID0gciwgbiA9ICEwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIG4gJiYgdygpOwogICAgfQogICAgdmFyIFQgPSAhKCJ1bmRlZmluZWQiID09IHR5cGVvZiB3aW5kb3cgfHwgdm9pZCAwID09PSB3aW5kb3cuZG9jdW1lbnQgfHwgdm9pZCAwID09PSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCksIFAgPSBudWxsLCBfID0gbnVsbCwgaiA9IG51bGw7CiAgICBmdW5jdGlvbiBJKGUpIHsKICAgICAgICBpZiAoZSA9IGgoZSkpIHsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIFApIHRocm93IEVycm9yKGkoMjgwKSk7CiAgICAgICAgICAgIHZhciB0ID0gZS5zdGF0ZU5vZGU7CiAgICAgICAgICAgIHQgJiYgKHQgPSBnKHQpLCBQKGUuc3RhdGVOb2RlLCBlLnR5cGUsIHQpKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBOKGUpIHsKICAgICAgICBfID8gaiA/IGoucHVzaChlKSA6IGogPSBbIGUgXSA6IF8gPSBlOwogICAgfQogICAgZnVuY3Rpb24gQSgpIHsKICAgICAgICBpZiAoXykgewogICAgICAgICAgICB2YXIgZSA9IF8sIHQgPSBqOwogICAgICAgICAgICBpZiAoaiA9IF8gPSBudWxsLCBJKGUpLCB0KSBmb3IgKGUgPSAwOyBlIDwgdC5sZW5ndGg7IGUrKykgSSh0W2VdKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBEKGUsIHQpIHsKICAgICAgICByZXR1cm4gZSh0KTsKICAgIH0KICAgIGZ1bmN0aW9uIFIoZSwgdCwgbiwgciwgYSkgewogICAgICAgIHJldHVybiBlKHQsIG4sIHIsIGEpOwogICAgfQogICAgZnVuY3Rpb24gTSgpIHt9CiAgICB2YXIgeiA9IEQsIEwgPSAhMSwgRiA9ICExOwogICAgZnVuY3Rpb24gVSgpIHsKICAgICAgICBudWxsID09PSBfICYmIG51bGwgPT09IGogfHwgKE0oKSwgQSgpKTsKICAgIH0KICAgIGZ1bmN0aW9uIFcoZSwgdCwgbikgewogICAgICAgIGlmIChGKSByZXR1cm4gZSh0LCBuKTsKICAgICAgICBGID0gITA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHooZSwgdCwgbik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgRiA9ICExLCBVKCk7CiAgICAgICAgfQogICAgfQogICAgdmFyIFYgPSAvXls6QS1aX2Etelx1MDBDMC1cdTAwRDZcdTAwRDgtXHUwMEY2XHUwMEY4LVx1MDJGRlx1MDM3MC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjA3MC1cdTIxOEZcdTJDMDAtXHUyRkVGXHUzMDAxLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkZEXVs6QS1aX2Etelx1MDBDMC1cdTAwRDZcdTAwRDgtXHUwMEY2XHUwMEY4LVx1MDJGRlx1MDM3MC1cdTAzN0RcdTAzN0YtXHUxRkZGXHUyMDBDLVx1MjAwRFx1MjA3MC1cdTIxOEZcdTJDMDAtXHUyRkVGXHUzMDAxLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkZEXC0uMC05XHUwMEI3XHUwMzAwLVx1MDM2Rlx1MjAzRi1cdTIwNDBdKiQvLCAkID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwgcSA9IHt9LCBCID0ge307CiAgICBmdW5jdGlvbiBIKGUsIHQsIG4sIHIsIGEsIG8pIHsKICAgICAgICB0aGlzLmFjY2VwdHNCb29sZWFucyA9IDIgPT09IHQgfHwgMyA9PT0gdCB8fCA0ID09PSB0LCB0aGlzLmF0dHJpYnV0ZU5hbWUgPSByLCB0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZSA9IGEsIAogICAgICAgIHRoaXMubXVzdFVzZVByb3BlcnR5ID0gbiwgdGhpcy5wcm9wZXJ0eU5hbWUgPSBlLCB0aGlzLnR5cGUgPSB0LCB0aGlzLnNhbml0aXplVVJMID0gbzsKICAgIH0KICAgIHZhciBRID0ge307CiAgICAiY2hpbGRyZW4gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgZGVmYXVsdFZhbHVlIGRlZmF1bHRDaGVja2VkIGlubmVySFRNTCBzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmcgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIHN0eWxlIi5zcGxpdCgiICIpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICBRW2VdID0gbmV3IEgoZSwgMCwgITEsIGUsIG51bGwsICExKTsKICAgIH0pKSwgWyBbICJhY2NlcHRDaGFyc2V0IiwgImFjY2VwdC1jaGFyc2V0IiBdLCBbICJjbGFzc05hbWUiLCAiY2xhc3MiIF0sIFsgImh0bWxGb3IiLCAiZm9yIiBdLCBbICJodHRwRXF1aXYiLCAiaHR0cC1lcXVpdiIgXSBdLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGVbMF07CiAgICAgICAgUVt0XSA9IG5ldyBIKHQsIDEsICExLCBlWzFdLCBudWxsLCAhMSk7CiAgICB9KSksIFsgImNvbnRlbnRFZGl0YWJsZSIsICJkcmFnZ2FibGUiLCAic3BlbGxDaGVjayIsICJ2YWx1ZSIgXS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgUVtlXSA9IG5ldyBIKGUsIDIsICExLCBlLnRvTG93ZXJDYXNlKCksIG51bGwsICExKTsKICAgIH0pKSwgWyAiYXV0b1JldmVyc2UiLCAiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZCIsICJmb2N1c2FibGUiLCAicHJlc2VydmVBbHBoYSIgXS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgUVtlXSA9IG5ldyBIKGUsIDIsICExLCBlLCBudWxsLCAhMSk7CiAgICB9KSksICJhbGxvd0Z1bGxTY3JlZW4gYXN5bmMgYXV0b0ZvY3VzIGF1dG9QbGF5IGNvbnRyb2xzIGRlZmF1bHQgZGVmZXIgZGlzYWJsZWQgZGlzYWJsZVBpY3R1cmVJblBpY3R1cmUgZm9ybU5vVmFsaWRhdGUgaGlkZGVuIGxvb3Agbm9Nb2R1bGUgbm9WYWxpZGF0ZSBvcGVuIHBsYXlzSW5saW5lIHJlYWRPbmx5IHJlcXVpcmVkIHJldmVyc2VkIHNjb3BlZCBzZWFtbGVzcyBpdGVtU2NvcGUiLnNwbGl0KCIgIikuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgIFFbZV0gPSBuZXcgSChlLCAzLCAhMSwgZS50b0xvd2VyQ2FzZSgpLCBudWxsLCAhMSk7CiAgICB9KSksIFsgImNoZWNrZWQiLCAibXVsdGlwbGUiLCAibXV0ZWQiLCAic2VsZWN0ZWQiIF0uZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgIFFbZV0gPSBuZXcgSChlLCAzLCAhMCwgZSwgbnVsbCwgITEpOwogICAgfSkpLCBbICJjYXB0dXJlIiwgImRvd25sb2FkIiBdLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICBRW2VdID0gbmV3IEgoZSwgNCwgITEsIGUsIG51bGwsICExKTsKICAgIH0pKSwgWyAiY29scyIsICJyb3dzIiwgInNpemUiLCAic3BhbiIgXS5mb3JFYWNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgUVtlXSA9IG5ldyBIKGUsIDYsICExLCBlLCBudWxsLCAhMSk7CiAgICB9KSksIFsgInJvd1NwYW4iLCAic3RhcnQiIF0uZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgIFFbZV0gPSBuZXcgSChlLCA1LCAhMSwgZS50b0xvd2VyQ2FzZSgpLCBudWxsLCAhMSk7CiAgICB9KSk7CiAgICB2YXIgRyA9IC9bXC06XShbYS16XSkvZzsKICAgIGZ1bmN0aW9uIEsoZSkgewogICAgICAgIHJldHVybiBlWzFdLnRvVXBwZXJDYXNlKCk7CiAgICB9CiAgICAiYWNjZW50LWhlaWdodCBhbGlnbm1lbnQtYmFzZWxpbmUgYXJhYmljLWZvcm0gYmFzZWxpbmUtc2hpZnQgY2FwLWhlaWdodCBjbGlwLXBhdGggY2xpcC1ydWxlIGNvbG9yLWludGVycG9sYXRpb24gY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzIGNvbG9yLXByb2ZpbGUgY29sb3ItcmVuZGVyaW5nIGRvbWluYW50LWJhc2VsaW5lIGVuYWJsZS1iYWNrZ3JvdW5kIGZpbGwtb3BhY2l0eSBmaWxsLXJ1bGUgZmxvb2QtY29sb3IgZmxvb2Qtb3BhY2l0eSBmb250LWZhbWlseSBmb250LXNpemUgZm9udC1zaXplLWFkanVzdCBmb250LXN0cmV0Y2ggZm9udC1zdHlsZSBmb250LXZhcmlhbnQgZm9udC13ZWlnaHQgZ2x5cGgtbmFtZSBnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsIGdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsIGhvcml6LWFkdi14IGhvcml6LW9yaWdpbi14IGltYWdlLXJlbmRlcmluZyBsZXR0ZXItc3BhY2luZyBsaWdodGluZy1jb2xvciBtYXJrZXItZW5kIG1hcmtlci1taWQgbWFya2VyLXN0YXJ0IG92ZXJsaW5lLXBvc2l0aW9uIG92ZXJsaW5lLXRoaWNrbmVzcyBwYWludC1vcmRlciBwYW5vc2UtMSBwb2ludGVyLWV2ZW50cyByZW5kZXJpbmctaW50ZW50IHNoYXBlLXJlbmRlcmluZyBzdG9wLWNvbG9yIHN0b3Atb3BhY2l0eSBzdHJpa2V0aHJvdWdoLXBvc2l0aW9uIHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzIHN0cm9rZS1kYXNoYXJyYXkgc3Ryb2tlLWRhc2hvZmZzZXQgc3Ryb2tlLWxpbmVjYXAgc3Ryb2tlLWxpbmVqb2luIHN0cm9rZS1taXRlcmxpbWl0IHN0cm9rZS1vcGFjaXR5IHN0cm9rZS13aWR0aCB0ZXh0LWFuY2hvciB0ZXh0LWRlY29yYXRpb24gdGV4dC1yZW5kZXJpbmcgdW5kZXJsaW5lLXBvc2l0aW9uIHVuZGVybGluZS10aGlja25lc3MgdW5pY29kZS1iaWRpIHVuaWNvZGUtcmFuZ2UgdW5pdHMtcGVyLWVtIHYtYWxwaGFiZXRpYyB2LWhhbmdpbmcgdi1pZGVvZ3JhcGhpYyB2LW1hdGhlbWF0aWNhbCB2ZWN0b3ItZWZmZWN0IHZlcnQtYWR2LXkgdmVydC1vcmlnaW4teCB2ZXJ0LW9yaWdpbi15IHdvcmQtc3BhY2luZyB3cml0aW5nLW1vZGUgeG1sbnM6eGxpbmsgeC1oZWlnaHQiLnNwbGl0KCIgIikuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5yZXBsYWNlKEcsIEspOwogICAgICAgIFFbdF0gPSBuZXcgSCh0LCAxLCAhMSwgZSwgbnVsbCwgITEpOwogICAgfSkpLCAieGxpbms6YWN0dWF0ZSB4bGluazphcmNyb2xlIHhsaW5rOnJvbGUgeGxpbms6c2hvdyB4bGluazp0aXRsZSB4bGluazp0eXBlIi5zcGxpdCgiICIpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUucmVwbGFjZShHLCBLKTsKICAgICAgICBRW3RdID0gbmV3IEgodCwgMSwgITEsIGUsICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwgITEpOwogICAgfSkpLCBbICJ4bWw6YmFzZSIsICJ4bWw6bGFuZyIsICJ4bWw6c3BhY2UiIF0uZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5yZXBsYWNlKEcsIEspOwogICAgICAgIFFbdF0gPSBuZXcgSCh0LCAxLCAhMSwgZSwgImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSIsICExKTsKICAgIH0pKSwgWyAidGFiSW5kZXgiLCAiY3Jvc3NPcmlnaW4iIF0uZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgIFFbZV0gPSBuZXcgSChlLCAxLCAhMSwgZS50b0xvd2VyQ2FzZSgpLCBudWxsLCAhMSk7CiAgICB9KSksIFEueGxpbmtIcmVmID0gbmV3IEgoInhsaW5rSHJlZiIsIDEsICExLCAieGxpbms6aHJlZiIsICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiwgITApLCAKICAgIFsgInNyYyIsICJocmVmIiwgImFjdGlvbiIsICJmb3JtQWN0aW9uIiBdLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICBRW2VdID0gbmV3IEgoZSwgMSwgITEsIGUudG9Mb3dlckNhc2UoKSwgbnVsbCwgITApOwogICAgfSkpOwogICAgdmFyIFkgPSByLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEOwogICAgZnVuY3Rpb24gWChlLCB0LCBuLCByKSB7CiAgICAgICAgdmFyIGEgPSBRLmhhc093blByb3BlcnR5KHQpID8gUVt0XSA6IG51bGw7CiAgICAgICAgKG51bGwgIT09IGEgPyAwID09PSBhLnR5cGUgOiAhciAmJiAoMiA8IHQubGVuZ3RoICYmICgibyIgPT09IHRbMF0gfHwgIk8iID09PSB0WzBdKSAmJiAoIm4iID09PSB0WzFdIHx8ICJOIiA9PT0gdFsxXSkpKSB8fCAoZnVuY3Rpb24oZSwgdCwgbiwgcikgewogICAgICAgICAgICBpZiAobnVsbCA9PSB0IHx8IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuICYmIDAgPT09IG4udHlwZSkgcmV0dXJuICExOwogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgdCkgewogICAgICAgICAgICAgICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgICAgICAgICAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwoKICAgICAgICAgICAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFyICYmIChudWxsICE9PSBuID8gIW4uYWNjZXB0c0Jvb2xlYW5zIDogImRhdGEtIiAhPT0gKGUgPSBlLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCwgNSkpICYmICJhcmlhLSIgIT09IGUpOwoKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0oZSwgdCwgbiwgcikpIHJldHVybiAhMDsKICAgICAgICAgICAgaWYgKHIpIHJldHVybiAhMTsKICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIHN3aXRjaCAobi50eXBlKSB7CiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmV0dXJuICF0OwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXR1cm4gITEgPT09IHQ7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJldHVybiBpc05hTih0KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHQpIHx8IDEgPiB0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICB9KHQsIG4sIGEsIHIpICYmIChuID0gbnVsbCksIHIgfHwgbnVsbCA9PT0gYSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICEhJC5jYWxsKEIsIGUpIHx8ICEkLmNhbGwocSwgZSkgJiYgKFYudGVzdChlKSA/IEJbZV0gPSAhMCA6IChxW2VdID0gITAsICExKSk7CiAgICAgICAgfSh0KSAmJiAobnVsbCA9PT0gbiA/IGUucmVtb3ZlQXR0cmlidXRlKHQpIDogZS5zZXRBdHRyaWJ1dGUodCwgIiIgKyBuKSkgOiBhLm11c3RVc2VQcm9wZXJ0eSA/IGVbYS5wcm9wZXJ0eU5hbWVdID0gbnVsbCA9PT0gbiA/IDMgIT09IGEudHlwZSAmJiAiIiA6IG4gOiAodCA9IGEuYXR0cmlidXRlTmFtZSwgCiAgICAgICAgciA9IGEuYXR0cmlidXRlTmFtZXNwYWNlLCBudWxsID09PSBuID8gZS5yZW1vdmVBdHRyaWJ1dGUodCkgOiAobiA9IDMgPT09IChhID0gYS50eXBlKSB8fCA0ID09PSBhICYmICEwID09PSBuID8gIiIgOiAiIiArIG4sIAogICAgICAgIHIgPyBlLnNldEF0dHJpYnV0ZU5TKHIsIHQsIG4pIDogZS5zZXRBdHRyaWJ1dGUodCwgbikpKSk7CiAgICB9CiAgICBZLmhhc093blByb3BlcnR5KCJSZWFjdEN1cnJlbnREaXNwYXRjaGVyIikgfHwgKFkuUmVhY3RDdXJyZW50RGlzcGF0Y2hlciA9IHsKICAgICAgICBjdXJyZW50OiBudWxsCiAgICB9KSwgWS5oYXNPd25Qcm9wZXJ0eSgiUmVhY3RDdXJyZW50QmF0Y2hDb25maWciKSB8fCAoWS5SZWFjdEN1cnJlbnRCYXRjaENvbmZpZyA9IHsKICAgICAgICBzdXNwZW5zZTogbnVsbAogICAgfSk7CiAgICB2YXIgWiA9IC9eKC4qKVtcXFwvXS8sIEogPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmZvciwgZWUgPSBKID8gU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpIDogNjAxMDMsIHRlID0gSiA/IFN5bWJvbC5mb3IoInJlYWN0LnBvcnRhbCIpIDogNjAxMDYsIG5lID0gSiA/IFN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50IikgOiA2MDEwNywgcmUgPSBKID8gU3ltYm9sLmZvcigicmVhY3Quc3RyaWN0X21vZGUiKSA6IDYwMTA4LCBhZSA9IEogPyBTeW1ib2wuZm9yKCJyZWFjdC5wcm9maWxlciIpIDogNjAxMTQsIG9lID0gSiA/IFN5bWJvbC5mb3IoInJlYWN0LnByb3ZpZGVyIikgOiA2MDEwOSwgaWUgPSBKID8gU3ltYm9sLmZvcigicmVhY3QuY29udGV4dCIpIDogNjAxMTAsIGxlID0gSiA/IFN5bWJvbC5mb3IoInJlYWN0LmNvbmN1cnJlbnRfbW9kZSIpIDogNjAxMTEsIHVlID0gSiA/IFN5bWJvbC5mb3IoInJlYWN0LmZvcndhcmRfcmVmIikgOiA2MDExMiwgY2UgPSBKID8gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2UiKSA6IDYwMTEzLCBzZSA9IEogPyBTeW1ib2wuZm9yKCJyZWFjdC5zdXNwZW5zZV9saXN0IikgOiA2MDEyMCwgZmUgPSBKID8gU3ltYm9sLmZvcigicmVhY3QubWVtbyIpIDogNjAxMTUsIGRlID0gSiA/IFN5bWJvbC5mb3IoInJlYWN0LmxhenkiKSA6IDYwMTE2LCBwZSA9IEogPyBTeW1ib2wuZm9yKCJyZWFjdC5ibG9jayIpIDogNjAxMjEsIGdlID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvcjsKICAgIGZ1bmN0aW9uIGhlKGUpIHsKICAgICAgICByZXR1cm4gbnVsbCA9PT0gZSB8fCAib2JqZWN0IiAhPSB0eXBlb2YgZSA/IG51bGwgOiAiZnVuY3Rpb24iID09IHR5cGVvZiAoZSA9IGdlICYmIGVbZ2VdIHx8IGVbIkBAaXRlcmF0b3IiXSkgPyBlIDogbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIG1lKGUpIHsKICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGUuZGlzcGxheU5hbWUgfHwgZS5uYW1lIHx8IG51bGw7CiAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSByZXR1cm4gZTsKICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgIGNhc2UgbmU6CiAgICAgICAgICAgIHJldHVybiAiRnJhZ21lbnQiOwoKICAgICAgICAgIGNhc2UgdGU6CiAgICAgICAgICAgIHJldHVybiAiUG9ydGFsIjsKCiAgICAgICAgICBjYXNlIGFlOgogICAgICAgICAgICByZXR1cm4gIlByb2ZpbGVyIjsKCiAgICAgICAgICBjYXNlIHJlOgogICAgICAgICAgICByZXR1cm4gIlN0cmljdE1vZGUiOwoKICAgICAgICAgIGNhc2UgY2U6CiAgICAgICAgICAgIHJldHVybiAiU3VzcGVuc2UiOwoKICAgICAgICAgIGNhc2Ugc2U6CiAgICAgICAgICAgIHJldHVybiAiU3VzcGVuc2VMaXN0IjsKICAgICAgICB9CiAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiBlKSBzd2l0Y2ggKGUuJCR0eXBlb2YpIHsKICAgICAgICAgIGNhc2UgaWU6CiAgICAgICAgICAgIHJldHVybiAiQ29udGV4dC5Db25zdW1lciI7CgogICAgICAgICAgY2FzZSBvZToKICAgICAgICAgICAgcmV0dXJuICJDb250ZXh0LlByb3ZpZGVyIjsKCiAgICAgICAgICBjYXNlIHVlOgogICAgICAgICAgICB2YXIgdCA9IGUucmVuZGVyOwogICAgICAgICAgICByZXR1cm4gdCA9IHQuZGlzcGxheU5hbWUgfHwgdC5uYW1lIHx8ICIiLCBlLmRpc3BsYXlOYW1lIHx8ICgiIiAhPT0gdCA/ICJGb3J3YXJkUmVmKCIgKyB0ICsgIikiIDogIkZvcndhcmRSZWYiKTsKCiAgICAgICAgICBjYXNlIGZlOgogICAgICAgICAgICByZXR1cm4gbWUoZS50eXBlKTsKCiAgICAgICAgICBjYXNlIHBlOgogICAgICAgICAgICByZXR1cm4gbWUoZS5yZW5kZXIpOwoKICAgICAgICAgIGNhc2UgZGU6CiAgICAgICAgICAgIGlmIChlID0gMSA9PT0gZS5fc3RhdHVzID8gZS5fcmVzdWx0IDogbnVsbCkgcmV0dXJuIG1lKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIGJlKGUpIHsKICAgICAgICB2YXIgdCA9ICIiOwogICAgICAgIGRvIHsKICAgICAgICAgICAgZTogc3dpdGNoIChlLnRhZykgewogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHZhciBuID0gIiI7CiAgICAgICAgICAgICAgICBicmVhayBlOwoKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdmFyIHIgPSBlLl9kZWJ1Z093bmVyLCBhID0gZS5fZGVidWdTb3VyY2UsIG8gPSBtZShlLnR5cGUpOwogICAgICAgICAgICAgICAgbiA9IG51bGwsIHIgJiYgKG4gPSBtZShyLnR5cGUpKSwgciA9IG8sIG8gPSAiIiwgYSA/IG8gPSAiIChhdCAiICsgYS5maWxlTmFtZS5yZXBsYWNlKFosICIiKSArICI6IiArIGEubGluZU51bWJlciArICIpIiA6IG4gJiYgKG8gPSAiIChjcmVhdGVkIGJ5ICIgKyBuICsgIikiKSwgCiAgICAgICAgICAgICAgICBuID0gIlxuICAgIGluICIgKyAociB8fCAiVW5rbm93biIpICsgbzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0ICs9IG4sIGUgPSBlLnJldHVybjsKICAgICAgICB9IHdoaWxlIChlKTsKICAgICAgICByZXR1cm4gdDsKICAgIH0KICAgIGZ1bmN0aW9uIHZlKGUpIHsKICAgICAgICBzd2l0Y2ggKHR5cGVvZiBlKSB7CiAgICAgICAgICBjYXNlICJib29sZWFuIjoKICAgICAgICAgIGNhc2UgIm51bWJlciI6CiAgICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgY2FzZSAic3RyaW5nIjoKICAgICAgICAgIGNhc2UgInVuZGVmaW5lZCI6CiAgICAgICAgICAgIHJldHVybiBlOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiB5ZShlKSB7CiAgICAgICAgdmFyIHQgPSBlLnR5cGU7CiAgICAgICAgcmV0dXJuIChlID0gZS5ub2RlTmFtZSkgJiYgImlucHV0IiA9PT0gZS50b0xvd2VyQ2FzZSgpICYmICgiY2hlY2tib3giID09PSB0IHx8ICJyYWRpbyIgPT09IHQpOwogICAgfQogICAgZnVuY3Rpb24gd2UoZSkgewogICAgICAgIGUuX3ZhbHVlVHJhY2tlciB8fCAoZS5fdmFsdWVUcmFja2VyID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IHllKGUpID8gImNoZWNrZWQiIDogInZhbHVlIiwgbiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHQpLCByID0gIiIgKyBlW3RdOwogICAgICAgICAgICBpZiAoIWUuaGFzT3duUHJvcGVydHkodCkgJiYgdm9pZCAwICE9PSBuICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4uZ2V0ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4uc2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IG4uZ2V0LCBvID0gbi5zZXQ7CiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHsKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgciA9ICIiICsgZSwgby5jYWxsKHRoaXMsIGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLCBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgewogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IG4uZW51bWVyYWJsZQogICAgICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2V0VmFsdWU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgciA9ICIiICsgZTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN0b3BUcmFja2luZzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUuX3ZhbHVlVHJhY2tlciA9IG51bGwsIGRlbGV0ZSBlW3RdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9KGUpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGtlKGUpIHsKICAgICAgICBpZiAoIWUpIHJldHVybiAhMTsKICAgICAgICB2YXIgdCA9IGUuX3ZhbHVlVHJhY2tlcjsKICAgICAgICBpZiAoIXQpIHJldHVybiAhMDsKICAgICAgICB2YXIgbiA9IHQuZ2V0VmFsdWUoKSwgciA9ICIiOwogICAgICAgIHJldHVybiBlICYmIChyID0geWUoZSkgPyBlLmNoZWNrZWQgPyAidHJ1ZSIgOiAiZmFsc2UiIDogZS52YWx1ZSksIChlID0gcikgIT09IG4gJiYgKHQuc2V0VmFsdWUoZSksIAogICAgICAgICEwKTsKICAgIH0KICAgIGZ1bmN0aW9uIHhlKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IHQuY2hlY2tlZDsKICAgICAgICByZXR1cm4gYSh7fSwgdCwgewogICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZDogdm9pZCAwLAogICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHZvaWQgMCwKICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCwKICAgICAgICAgICAgY2hlY2tlZDogbnVsbCAhPSBuID8gbiA6IGUuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZAogICAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gRWUoZSwgdCkgewogICAgICAgIHZhciBuID0gbnVsbCA9PSB0LmRlZmF1bHRWYWx1ZSA/ICIiIDogdC5kZWZhdWx0VmFsdWUsIHIgPSBudWxsICE9IHQuY2hlY2tlZCA/IHQuY2hlY2tlZCA6IHQuZGVmYXVsdENoZWNrZWQ7CiAgICAgICAgbiA9IHZlKG51bGwgIT0gdC52YWx1ZSA/IHQudmFsdWUgOiBuKSwgZS5fd3JhcHBlclN0YXRlID0gewogICAgICAgICAgICBpbml0aWFsQ2hlY2tlZDogciwKICAgICAgICAgICAgaW5pdGlhbFZhbHVlOiBuLAogICAgICAgICAgICBjb250cm9sbGVkOiAiY2hlY2tib3giID09PSB0LnR5cGUgfHwgInJhZGlvIiA9PT0gdC50eXBlID8gbnVsbCAhPSB0LmNoZWNrZWQgOiBudWxsICE9IHQudmFsdWUKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gU2UoZSwgdCkgewogICAgICAgIG51bGwgIT0gKHQgPSB0LmNoZWNrZWQpICYmIFgoZSwgImNoZWNrZWQiLCB0LCAhMSk7CiAgICB9CiAgICBmdW5jdGlvbiBPZShlLCB0KSB7CiAgICAgICAgU2UoZSwgdCk7CiAgICAgICAgdmFyIG4gPSB2ZSh0LnZhbHVlKSwgciA9IHQudHlwZTsKICAgICAgICBpZiAobnVsbCAhPSBuKSAibnVtYmVyIiA9PT0gciA/ICgwID09PSBuICYmICIiID09PSBlLnZhbHVlIHx8IGUudmFsdWUgIT0gbikgJiYgKGUudmFsdWUgPSAiIiArIG4pIDogZS52YWx1ZSAhPT0gIiIgKyBuICYmIChlLnZhbHVlID0gIiIgKyBuKTsgZWxzZSBpZiAoInN1Ym1pdCIgPT09IHIgfHwgInJlc2V0IiA9PT0gcikgcmV0dXJuIHZvaWQgZS5yZW1vdmVBdHRyaWJ1dGUoInZhbHVlIik7CiAgICAgICAgdC5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSA/IFRlKGUsIHQudHlwZSwgbikgOiB0Lmhhc093blByb3BlcnR5KCJkZWZhdWx0VmFsdWUiKSAmJiBUZShlLCB0LnR5cGUsIHZlKHQuZGVmYXVsdFZhbHVlKSksIAogICAgICAgIG51bGwgPT0gdC5jaGVja2VkICYmIG51bGwgIT0gdC5kZWZhdWx0Q2hlY2tlZCAmJiAoZS5kZWZhdWx0Q2hlY2tlZCA9ICEhdC5kZWZhdWx0Q2hlY2tlZCk7CiAgICB9CiAgICBmdW5jdGlvbiBDZShlLCB0LCBuKSB7CiAgICAgICAgaWYgKHQuaGFzT3duUHJvcGVydHkoInZhbHVlIikgfHwgdC5oYXNPd25Qcm9wZXJ0eSgiZGVmYXVsdFZhbHVlIikpIHsKICAgICAgICAgICAgdmFyIHIgPSB0LnR5cGU7CiAgICAgICAgICAgIGlmICghKCJzdWJtaXQiICE9PSByICYmICJyZXNldCIgIT09IHIgfHwgdm9pZCAwICE9PSB0LnZhbHVlICYmIG51bGwgIT09IHQudmFsdWUpKSByZXR1cm47CiAgICAgICAgICAgIHQgPSAiIiArIGUuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWUsIG4gfHwgdCA9PT0gZS52YWx1ZSB8fCAoZS52YWx1ZSA9IHQpLCBlLmRlZmF1bHRWYWx1ZSA9IHQ7CiAgICAgICAgfQogICAgICAgICIiICE9PSAobiA9IGUubmFtZSkgJiYgKGUubmFtZSA9ICIiKSwgZS5kZWZhdWx0Q2hlY2tlZCA9ICEhZS5fd3JhcHBlclN0YXRlLmluaXRpYWxDaGVja2VkLCAKICAgICAgICAiIiAhPT0gbiAmJiAoZS5uYW1lID0gbik7CiAgICB9CiAgICBmdW5jdGlvbiBUZShlLCB0LCBuKSB7CiAgICAgICAgIm51bWJlciIgPT09IHQgJiYgZS5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGUgfHwgKG51bGwgPT0gbiA/IGUuZGVmYXVsdFZhbHVlID0gIiIgKyBlLl93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlIDogZS5kZWZhdWx0VmFsdWUgIT09ICIiICsgbiAmJiAoZS5kZWZhdWx0VmFsdWUgPSAiIiArIG4pKTsKICAgIH0KICAgIGZ1bmN0aW9uIFBlKGUsIHQpIHsKICAgICAgICByZXR1cm4gZSA9IGEoewogICAgICAgICAgICBjaGlsZHJlbjogdm9pZCAwCiAgICAgICAgfSwgdCksICh0ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9ICIiOwogICAgICAgICAgICByZXR1cm4gci5DaGlsZHJlbi5mb3JFYWNoKGUsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBudWxsICE9IGUgJiYgKHQgKz0gZSk7CiAgICAgICAgICAgIH0pKSwgdDsKICAgICAgICB9KHQuY2hpbGRyZW4pKSAmJiAoZS5jaGlsZHJlbiA9IHQpLCBlOwogICAgfQogICAgZnVuY3Rpb24gX2UoZSwgdCwgbiwgcikgewogICAgICAgIGlmIChlID0gZS5vcHRpb25zLCB0KSB7CiAgICAgICAgICAgIHQgPSB7fTsKICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBuLmxlbmd0aDsgYSsrKSB0WyIkIiArIG5bYV1dID0gITA7CiAgICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSBhID0gdC5oYXNPd25Qcm9wZXJ0eSgiJCIgKyBlW25dLnZhbHVlKSwgZVtuXS5zZWxlY3RlZCAhPT0gYSAmJiAoZVtuXS5zZWxlY3RlZCA9IGEpLCAKICAgICAgICAgICAgYSAmJiByICYmIChlW25dLmRlZmF1bHRTZWxlY3RlZCA9ICEwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKG4gPSAiIiArIHZlKG4pLCB0ID0gbnVsbCwgYSA9IDA7IGEgPCBlLmxlbmd0aDsgYSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoZVthXS52YWx1ZSA9PT0gbikgcmV0dXJuIGVbYV0uc2VsZWN0ZWQgPSAhMCwgdm9pZCAociAmJiAoZVthXS5kZWZhdWx0U2VsZWN0ZWQgPSAhMCkpOwogICAgICAgICAgICAgICAgbnVsbCAhPT0gdCB8fCBlW2FdLmRpc2FibGVkIHx8ICh0ID0gZVthXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbnVsbCAhPT0gdCAmJiAodC5zZWxlY3RlZCA9ICEwKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBqZShlLCB0KSB7CiAgICAgICAgaWYgKG51bGwgIT0gdC5kYW5nZXJvdXNseVNldElubmVySFRNTCkgdGhyb3cgRXJyb3IoaSg5MSkpOwogICAgICAgIHJldHVybiBhKHt9LCB0LCB7CiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsCiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdm9pZCAwLAogICAgICAgICAgICBjaGlsZHJlbjogIiIgKyBlLl93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlCiAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBJZShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0LnZhbHVlOwogICAgICAgIGlmIChudWxsID09IG4pIHsKICAgICAgICAgICAgaWYgKG4gPSB0LmNoaWxkcmVuLCB0ID0gdC5kZWZhdWx0VmFsdWUsIG51bGwgIT0gbikgewogICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgdGhyb3cgRXJyb3IoaSg5MikpOwogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobikpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoISgxID49IG4ubGVuZ3RoKSkgdGhyb3cgRXJyb3IoaSg5MykpOwogICAgICAgICAgICAgICAgICAgIG4gPSBuWzBdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdCA9IG47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbnVsbCA9PSB0ICYmICh0ID0gIiIpLCBuID0gdDsKICAgICAgICB9CiAgICAgICAgZS5fd3JhcHBlclN0YXRlID0gewogICAgICAgICAgICBpbml0aWFsVmFsdWU6IHZlKG4pCiAgICAgICAgfTsKICAgIH0KICAgIGZ1bmN0aW9uIE5lKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IHZlKHQudmFsdWUpLCByID0gdmUodC5kZWZhdWx0VmFsdWUpOwogICAgICAgIG51bGwgIT0gbiAmJiAoKG4gPSAiIiArIG4pICE9PSBlLnZhbHVlICYmIChlLnZhbHVlID0gbiksIG51bGwgPT0gdC5kZWZhdWx0VmFsdWUgJiYgZS5kZWZhdWx0VmFsdWUgIT09IG4gJiYgKGUuZGVmYXVsdFZhbHVlID0gbikpLCAKICAgICAgICBudWxsICE9IHIgJiYgKGUuZGVmYXVsdFZhbHVlID0gIiIgKyByKTsKICAgIH0KICAgIGZ1bmN0aW9uIEFlKGUpIHsKICAgICAgICB2YXIgdCA9IGUudGV4dENvbnRlbnQ7CiAgICAgICAgdCA9PT0gZS5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSAmJiAiIiAhPT0gdCAmJiBudWxsICE9PSB0ICYmIChlLnZhbHVlID0gdCk7CiAgICB9CiAgICB2YXIgRGUgPSAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsIFJlID0gImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIjsKICAgIGZ1bmN0aW9uIE1lKGUpIHsKICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgIGNhc2UgInN2ZyI6CiAgICAgICAgICAgIHJldHVybiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciOwoKICAgICAgICAgIGNhc2UgIm1hdGgiOgogICAgICAgICAgICByZXR1cm4gImh0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwiOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gemUoZSwgdCkgewogICAgICAgIHJldHVybiBudWxsID09IGUgfHwgImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiID09PSBlID8gTWUodCkgOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciID09PSBlICYmICJmb3JlaWduT2JqZWN0IiA9PT0gdCA/ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiA6IGU7CiAgICB9CiAgICB2YXIgTGUsIEZlID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgTVNBcHAgJiYgTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24gPyBmdW5jdGlvbih0LCBuLCByLCBhKSB7CiAgICAgICAgICAgIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlKHQsIG4pOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfSA6IGU7CiAgICB9KChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgaWYgKGUubmFtZXNwYWNlVVJJICE9PSBSZSB8fCAiaW5uZXJIVE1MIiBpbiBlKSBlLmlubmVySFRNTCA9IHQ7IGVsc2UgewogICAgICAgICAgICBmb3IgKChMZSA9IExlIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5pbm5lckhUTUwgPSAiPHN2Zz4iICsgdC52YWx1ZU9mKCkudG9TdHJpbmcoKSArICI8L3N2Zz4iLCAKICAgICAgICAgICAgdCA9IExlLmZpcnN0Q2hpbGQ7IGUuZmlyc3RDaGlsZDsgKSBlLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgIGZvciAoO3QuZmlyc3RDaGlsZDsgKSBlLmFwcGVuZENoaWxkKHQuZmlyc3RDaGlsZCk7CiAgICAgICAgfQogICAgfSkpOwogICAgZnVuY3Rpb24gVWUoZSwgdCkgewogICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgIHZhciBuID0gZS5maXJzdENoaWxkOwogICAgICAgICAgICBpZiAobiAmJiBuID09PSBlLmxhc3RDaGlsZCAmJiAzID09PSBuLm5vZGVUeXBlKSByZXR1cm4gdm9pZCAobi5ub2RlVmFsdWUgPSB0KTsKICAgICAgICB9CiAgICAgICAgZS50ZXh0Q29udGVudCA9IHQ7CiAgICB9CiAgICBmdW5jdGlvbiBXZShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB7fTsKICAgICAgICByZXR1cm4gbltlLnRvTG93ZXJDYXNlKCldID0gdC50b0xvd2VyQ2FzZSgpLCBuWyJXZWJraXQiICsgZV0gPSAid2Via2l0IiArIHQsIG5bIk1veiIgKyBlXSA9ICJtb3oiICsgdCwgCiAgICAgICAgbjsKICAgIH0KICAgIHZhciBWZSA9IHsKICAgICAgICBhbmltYXRpb25lbmQ6IFdlKCJBbmltYXRpb24iLCAiQW5pbWF0aW9uRW5kIiksCiAgICAgICAgYW5pbWF0aW9uaXRlcmF0aW9uOiBXZSgiQW5pbWF0aW9uIiwgIkFuaW1hdGlvbkl0ZXJhdGlvbiIpLAogICAgICAgIGFuaW1hdGlvbnN0YXJ0OiBXZSgiQW5pbWF0aW9uIiwgIkFuaW1hdGlvblN0YXJ0IiksCiAgICAgICAgdHJhbnNpdGlvbmVuZDogV2UoIlRyYW5zaXRpb24iLCAiVHJhbnNpdGlvbkVuZCIpCiAgICB9LCAkZSA9IHt9LCBxZSA9IHt9OwogICAgZnVuY3Rpb24gQmUoZSkgewogICAgICAgIGlmICgkZVtlXSkgcmV0dXJuICRlW2VdOwogICAgICAgIGlmICghVmVbZV0pIHJldHVybiBlOwogICAgICAgIHZhciB0LCBuID0gVmVbZV07CiAgICAgICAgZm9yICh0IGluIG4pIGlmIChuLmhhc093blByb3BlcnR5KHQpICYmIHQgaW4gcWUpIHJldHVybiAkZVtlXSA9IG5bdF07CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICBUICYmIChxZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlLCAiQW5pbWF0aW9uRXZlbnQiIGluIHdpbmRvdyB8fCAoZGVsZXRlIFZlLmFuaW1hdGlvbmVuZC5hbmltYXRpb24sIAogICAgZGVsZXRlIFZlLmFuaW1hdGlvbml0ZXJhdGlvbi5hbmltYXRpb24sIGRlbGV0ZSBWZS5hbmltYXRpb25zdGFydC5hbmltYXRpb24pLCAiVHJhbnNpdGlvbkV2ZW50IiBpbiB3aW5kb3cgfHwgZGVsZXRlIFZlLnRyYW5zaXRpb25lbmQudHJhbnNpdGlvbik7CiAgICB2YXIgSGUgPSBCZSgiYW5pbWF0aW9uZW5kIiksIFFlID0gQmUoImFuaW1hdGlvbml0ZXJhdGlvbiIpLCBHZSA9IEJlKCJhbmltYXRpb25zdGFydCIpLCBLZSA9IEJlKCJ0cmFuc2l0aW9uZW5kIiksIFllID0gImFib3J0IGNhbnBsYXkgY2FucGxheXRocm91Z2ggZHVyYXRpb25jaGFuZ2UgZW1wdGllZCBlbmNyeXB0ZWQgZW5kZWQgZXJyb3IgbG9hZGVkZGF0YSBsb2FkZWRtZXRhZGF0YSBsb2Fkc3RhcnQgcGF1c2UgcGxheSBwbGF5aW5nIHByb2dyZXNzIHJhdGVjaGFuZ2Ugc2Vla2VkIHNlZWtpbmcgc3RhbGxlZCBzdXNwZW5kIHRpbWV1cGRhdGUgdm9sdW1lY2hhbmdlIHdhaXRpbmciLnNwbGl0KCIgIiksIFhlID0gbmV3ICgiZnVuY3Rpb24iID09IHR5cGVvZiBXZWFrTWFwID8gV2Vha01hcCA6IE1hcCk7CiAgICBmdW5jdGlvbiBaZShlKSB7CiAgICAgICAgdmFyIHQgPSBYZS5nZXQoZSk7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCAmJiAodCA9IG5ldyBNYXAsIFhlLnNldChlLCB0KSksIHQ7CiAgICB9CiAgICBmdW5jdGlvbiBKZShlKSB7CiAgICAgICAgdmFyIHQgPSBlLCBuID0gZTsKICAgICAgICBpZiAoZS5hbHRlcm5hdGUpIGZvciAoO3QucmV0dXJuOyApIHQgPSB0LnJldHVybjsgZWxzZSB7CiAgICAgICAgICAgIGUgPSB0OwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAwICE9ICgxMDI2ICYgKHQgPSBlKS5lZmZlY3RUYWcpICYmIChuID0gdC5yZXR1cm4pLCBlID0gdC5yZXR1cm47CiAgICAgICAgICAgIH0gd2hpbGUgKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMyA9PT0gdC50YWcgPyBuIDogbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIGV0KGUpIHsKICAgICAgICBpZiAoMTMgPT09IGUudGFnKSB7CiAgICAgICAgICAgIHZhciB0ID0gZS5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICBpZiAobnVsbCA9PT0gdCAmJiAobnVsbCAhPT0gKGUgPSBlLmFsdGVybmF0ZSkgJiYgKHQgPSBlLm1lbW9pemVkU3RhdGUpKSwgbnVsbCAhPT0gdCkgcmV0dXJuIHQuZGVoeWRyYXRlZDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiB0dChlKSB7CiAgICAgICAgaWYgKEplKGUpICE9PSBlKSB0aHJvdyBFcnJvcihpKDE4OCkpOwogICAgfQogICAgZnVuY3Rpb24gbnQoZSkgewogICAgICAgIGlmICghKGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gZS5hbHRlcm5hdGU7CiAgICAgICAgICAgIGlmICghdCkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09ICh0ID0gSmUoZSkpKSB0aHJvdyBFcnJvcihpKDE4OCkpOwogICAgICAgICAgICAgICAgcmV0dXJuIHQgIT09IGUgPyBudWxsIDogZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBuID0gZSwgciA9IHQ7IDspIHsKICAgICAgICAgICAgICAgIHZhciBhID0gbi5yZXR1cm47CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gYSkgYnJlYWs7CiAgICAgICAgICAgICAgICB2YXIgbyA9IGEuYWx0ZXJuYXRlOwogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKHIgPSBhLnJldHVybikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChhLmNoaWxkID09PSBvLmNoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gYS5jaGlsZDsgbzsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09PSBuKSByZXR1cm4gdHQoYSksIGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09PSByKSByZXR1cm4gdHQoYSksIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBvLnNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGkoMTg4KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobi5yZXR1cm4gIT09IHIucmV0dXJuKSBuID0gYSwgciA9IG87IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAhMSwgdSA9IGEuY2hpbGQ7IHU7ICkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9PT0gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9ICEwLCBuID0gYSwgciA9IG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9PT0gcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9ICEwLCByID0gYSwgbiA9IG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB1ID0gdS5zaWJsaW5nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh1ID0gby5jaGlsZDsgdTsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA9PT0gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAhMCwgbiA9IG8sIHIgPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgPT09IHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gITAsIHIgPSBvLCBuID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB1LnNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsKSB0aHJvdyBFcnJvcihpKDE4OSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChuLmFsdGVybmF0ZSAhPT0gcikgdGhyb3cgRXJyb3IoaSgxOTApKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoMyAhPT0gbi50YWcpIHRocm93IEVycm9yKGkoMTg4KSk7CiAgICAgICAgICAgIHJldHVybiBuLnN0YXRlTm9kZS5jdXJyZW50ID09PSBuID8gZSA6IHQ7CiAgICAgICAgfShlKSkpIHJldHVybiBudWxsOwogICAgICAgIGZvciAodmFyIHQgPSBlOyA7KSB7CiAgICAgICAgICAgIGlmICg1ID09PSB0LnRhZyB8fCA2ID09PSB0LnRhZykgcmV0dXJuIHQ7CiAgICAgICAgICAgIGlmICh0LmNoaWxkKSB0LmNoaWxkLnJldHVybiA9IHQsIHQgPSB0LmNoaWxkOyBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0ID09PSBlKSBicmVhazsKICAgICAgICAgICAgICAgIGZvciAoOyF0LnNpYmxpbmc7ICkgewogICAgICAgICAgICAgICAgICAgIGlmICghdC5yZXR1cm4gfHwgdC5yZXR1cm4gPT09IGUpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgIHQgPSB0LnJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHQuc2libGluZy5yZXR1cm4gPSB0LnJldHVybiwgdCA9IHQuc2libGluZzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIHJ0KGUsIHQpIHsKICAgICAgICBpZiAobnVsbCA9PSB0KSB0aHJvdyBFcnJvcihpKDMwKSk7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IHQgOiBBcnJheS5pc0FycmF5KGUpID8gQXJyYXkuaXNBcnJheSh0KSA/IChlLnB1c2guYXBwbHkoZSwgdCksIAogICAgICAgIGUpIDogKGUucHVzaCh0KSwgZSkgOiBBcnJheS5pc0FycmF5KHQpID8gWyBlIF0uY29uY2F0KHQpIDogWyBlLCB0IF07CiAgICB9CiAgICBmdW5jdGlvbiBhdChlLCB0LCBuKSB7CiAgICAgICAgQXJyYXkuaXNBcnJheShlKSA/IGUuZm9yRWFjaCh0LCBuKSA6IGUgJiYgdC5jYWxsKG4sIGUpOwogICAgfQogICAgdmFyIG90ID0gbnVsbDsKICAgIGZ1bmN0aW9uIGl0KGUpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgICB2YXIgdCA9IGUuX2Rpc3BhdGNoTGlzdGVuZXJzLCBuID0gZS5fZGlzcGF0Y2hJbnN0YW5jZXM7CiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQpKSBmb3IgKHZhciByID0gMDsgciA8IHQubGVuZ3RoICYmICFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCk7IHIrKykgYihlLCB0W3JdLCBuW3JdKTsgZWxzZSB0ICYmIGIoZSwgdCwgbik7CiAgICAgICAgICAgIGUuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbCwgZS5fZGlzcGF0Y2hJbnN0YW5jZXMgPSBudWxsLCBlLmlzUGVyc2lzdGVudCgpIHx8IGUuY29uc3RydWN0b3IucmVsZWFzZShlKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBsdChlKSB7CiAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgKG90ID0gcnQob3QsIGUpKSwgZSA9IG90LCBvdCA9IG51bGwsIGUpIHsKICAgICAgICAgICAgaWYgKGF0KGUsIGl0KSwgb3QpIHRocm93IEVycm9yKGkoOTUpKTsKICAgICAgICAgICAgaWYgKHMpIHRocm93IGUgPSBmLCBzID0gITEsIGYgPSBudWxsLCBlOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHV0KGUpIHsKICAgICAgICByZXR1cm4gKGUgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQgfHwgd2luZG93KS5jb3JyZXNwb25kaW5nVXNlRWxlbWVudCAmJiAoZSA9IGUuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpLCAKICAgICAgICAzID09PSBlLm5vZGVUeXBlID8gZS5wYXJlbnROb2RlIDogZTsKICAgIH0KICAgIGZ1bmN0aW9uIGN0KGUpIHsKICAgICAgICBpZiAoIVQpIHJldHVybiAhMTsKICAgICAgICB2YXIgdCA9IChlID0gIm9uIiArIGUpIGluIGRvY3VtZW50OwogICAgICAgIHJldHVybiB0IHx8ICgodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKS5zZXRBdHRyaWJ1dGUoZSwgInJldHVybjsiKSwgdCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHRbZV0pLCAKICAgICAgICB0OwogICAgfQogICAgdmFyIHN0ID0gW107CiAgICBmdW5jdGlvbiBmdChlKSB7CiAgICAgICAgZS50b3BMZXZlbFR5cGUgPSBudWxsLCBlLm5hdGl2ZUV2ZW50ID0gbnVsbCwgZS50YXJnZXRJbnN0ID0gbnVsbCwgZS5hbmNlc3RvcnMubGVuZ3RoID0gMCwgCiAgICAgICAgMTAgPiBzdC5sZW5ndGggJiYgc3QucHVzaChlKTsKICAgIH0KICAgIGZ1bmN0aW9uIGR0KGUsIHQsIG4sIHIpIHsKICAgICAgICBpZiAoc3QubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBhID0gc3QucG9wKCk7CiAgICAgICAgICAgIHJldHVybiBhLnRvcExldmVsVHlwZSA9IGUsIGEuZXZlbnRTeXN0ZW1GbGFncyA9IHIsIGEubmF0aXZlRXZlbnQgPSB0LCBhLnRhcmdldEluc3QgPSBuLCAKICAgICAgICAgICAgYTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdG9wTGV2ZWxUeXBlOiBlLAogICAgICAgICAgICBldmVudFN5c3RlbUZsYWdzOiByLAogICAgICAgICAgICBuYXRpdmVFdmVudDogdCwKICAgICAgICAgICAgdGFyZ2V0SW5zdDogbiwKICAgICAgICAgICAgYW5jZXN0b3JzOiBbXQogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBwdChlKSB7CiAgICAgICAgdmFyIHQgPSBlLnRhcmdldEluc3QsIG4gPSB0OwogICAgICAgIGRvIHsKICAgICAgICAgICAgaWYgKCFuKSB7CiAgICAgICAgICAgICAgICBlLmFuY2VzdG9ycy5wdXNoKG4pOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHIgPSBuOwogICAgICAgICAgICBpZiAoMyA9PT0gci50YWcpIHIgPSByLnN0YXRlTm9kZS5jb250YWluZXJJbmZvOyBlbHNlIHsKICAgICAgICAgICAgICAgIGZvciAoO3IucmV0dXJuOyApIHIgPSByLnJldHVybjsKICAgICAgICAgICAgICAgIHIgPSAzICE9PSByLnRhZyA/IG51bGwgOiByLnN0YXRlTm9kZS5jb250YWluZXJJbmZvOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghcikgYnJlYWs7CiAgICAgICAgICAgIDUgIT09ICh0ID0gbi50YWcpICYmIDYgIT09IHQgfHwgZS5hbmNlc3RvcnMucHVzaChuKSwgbiA9IFRuKHIpOwogICAgICAgIH0gd2hpbGUgKG4pOwogICAgICAgIGZvciAobiA9IDA7IG4gPCBlLmFuY2VzdG9ycy5sZW5ndGg7IG4rKykgewogICAgICAgICAgICB0ID0gZS5hbmNlc3RvcnNbbl07CiAgICAgICAgICAgIHZhciBhID0gdXQoZS5uYXRpdmVFdmVudCk7CiAgICAgICAgICAgIHIgPSBlLnRvcExldmVsVHlwZTsKICAgICAgICAgICAgdmFyIG8gPSBlLm5hdGl2ZUV2ZW50LCBpID0gZS5ldmVudFN5c3RlbUZsYWdzOwogICAgICAgICAgICAwID09PSBuICYmIChpIHw9IDY0KTsKICAgICAgICAgICAgZm9yICh2YXIgbCA9IG51bGwsIHUgPSAwOyB1IDwgeC5sZW5ndGg7IHUrKykgewogICAgICAgICAgICAgICAgdmFyIGMgPSB4W3VdOwogICAgICAgICAgICAgICAgYyAmJiAoYyA9IGMuZXh0cmFjdEV2ZW50cyhyLCB0LCBvLCBhLCBpKSkgJiYgKGwgPSBydChsLCBjKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbHQobCk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZ3QoZSwgdCwgbikgewogICAgICAgIGlmICghbi5oYXMoZSkpIHsKICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgY2FzZSAic2Nyb2xsIjoKICAgICAgICAgICAgICAgIEd0KHQsICJzY3JvbGwiLCAhMCk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiZm9jdXMiOgogICAgICAgICAgICAgIGNhc2UgImJsdXIiOgogICAgICAgICAgICAgICAgR3QodCwgImZvY3VzIiwgITApLCBHdCh0LCAiYmx1ciIsICEwKSwgbi5zZXQoImJsdXIiLCBudWxsKSwgbi5zZXQoImZvY3VzIiwgbnVsbCk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiY2FuY2VsIjoKICAgICAgICAgICAgICBjYXNlICJjbG9zZSI6CiAgICAgICAgICAgICAgICBjdChlKSAmJiBHdCh0LCBlLCAhMCk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiaW52YWxpZCI6CiAgICAgICAgICAgICAgY2FzZSAic3VibWl0IjoKICAgICAgICAgICAgICBjYXNlICJyZXNldCI6CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIC0xID09PSBZZS5pbmRleE9mKGUpICYmIFF0KGUsIHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG4uc2V0KGUsIG51bGwpOwogICAgICAgIH0KICAgIH0KICAgIHZhciBodCwgbXQsIGJ0LCB2dCA9ICExLCB5dCA9IFtdLCB3dCA9IG51bGwsIGt0ID0gbnVsbCwgeHQgPSBudWxsLCBFdCA9IG5ldyBNYXAsIFN0ID0gbmV3IE1hcCwgT3QgPSBbXSwgQ3QgPSAibW91c2Vkb3duIG1vdXNldXAgdG91Y2hjYW5jZWwgdG91Y2hlbmQgdG91Y2hzdGFydCBhdXhjbGljayBkYmxjbGljayBwb2ludGVyY2FuY2VsIHBvaW50ZXJkb3duIHBvaW50ZXJ1cCBkcmFnZW5kIGRyYWdzdGFydCBkcm9wIGNvbXBvc2l0aW9uZW5kIGNvbXBvc2l0aW9uc3RhcnQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBpbnB1dCB0ZXh0SW5wdXQgY2xvc2UgY2FuY2VsIGNvcHkgY3V0IHBhc3RlIGNsaWNrIGNoYW5nZSBjb250ZXh0bWVudSByZXNldCBzdWJtaXQiLnNwbGl0KCIgIiksIFR0ID0gImZvY3VzIGJsdXIgZHJhZ2VudGVyIGRyYWdsZWF2ZSBtb3VzZW92ZXIgbW91c2VvdXQgcG9pbnRlcm92ZXIgcG9pbnRlcm91dCBnb3Rwb2ludGVyY2FwdHVyZSBsb3N0cG9pbnRlcmNhcHR1cmUiLnNwbGl0KCIgIik7CiAgICBmdW5jdGlvbiBQdChlLCB0LCBuLCByLCBhKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYmxvY2tlZE9uOiBlLAogICAgICAgICAgICB0b3BMZXZlbFR5cGU6IHQsCiAgICAgICAgICAgIGV2ZW50U3lzdGVtRmxhZ3M6IDMyIHwgbiwKICAgICAgICAgICAgbmF0aXZlRXZlbnQ6IGEsCiAgICAgICAgICAgIGNvbnRhaW5lcjogcgogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBfdChlLCB0KSB7CiAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICBjYXNlICJmb2N1cyI6CiAgICAgICAgICBjYXNlICJibHVyIjoKICAgICAgICAgICAgd3QgPSBudWxsOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJkcmFnZW50ZXIiOgogICAgICAgICAgY2FzZSAiZHJhZ2xlYXZlIjoKICAgICAgICAgICAga3QgPSBudWxsOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJtb3VzZW92ZXIiOgogICAgICAgICAgY2FzZSAibW91c2VvdXQiOgogICAgICAgICAgICB4dCA9IG51bGw7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgInBvaW50ZXJvdmVyIjoKICAgICAgICAgIGNhc2UgInBvaW50ZXJvdXQiOgogICAgICAgICAgICBFdC5kZWxldGUodC5wb2ludGVySWQpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJnb3Rwb2ludGVyY2FwdHVyZSI6CiAgICAgICAgICBjYXNlICJsb3N0cG9pbnRlcmNhcHR1cmUiOgogICAgICAgICAgICBTdC5kZWxldGUodC5wb2ludGVySWQpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGp0KGUsIHQsIG4sIHIsIGEsIG8pIHsKICAgICAgICByZXR1cm4gbnVsbCA9PT0gZSB8fCBlLm5hdGl2ZUV2ZW50ICE9PSBvID8gKGUgPSBQdCh0LCBuLCByLCBhLCBvKSwgbnVsbCAhPT0gdCAmJiAobnVsbCAhPT0gKHQgPSBQbih0KSkgJiYgbXQodCkpLCAKICAgICAgICBlKSA6IChlLmV2ZW50U3lzdGVtRmxhZ3MgfD0gciwgZSk7CiAgICB9CiAgICBmdW5jdGlvbiBJdChlKSB7CiAgICAgICAgdmFyIHQgPSBUbihlLnRhcmdldCk7CiAgICAgICAgaWYgKG51bGwgIT09IHQpIHsKICAgICAgICAgICAgdmFyIG4gPSBKZSh0KTsKICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIGlmICgxMyA9PT0gKHQgPSBuLnRhZykpIHsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAodCA9IGV0KG4pKSkgcmV0dXJuIGUuYmxvY2tlZE9uID0gdCwgdm9pZCBvLnVuc3RhYmxlX3J1bldpdGhQcmlvcml0eShlLnByaW9yaXR5LCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgYnQobik7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoMyA9PT0gdCAmJiBuLnN0YXRlTm9kZS5oeWRyYXRlKSByZXR1cm4gdm9pZCAoZS5ibG9ja2VkT24gPSAzID09PSBuLnRhZyA/IG4uc3RhdGVOb2RlLmNvbnRhaW5lckluZm8gOiBudWxsKTsKICAgICAgICB9CiAgICAgICAgZS5ibG9ja2VkT24gPSBudWxsOwogICAgfQogICAgZnVuY3Rpb24gTnQoZSkgewogICAgICAgIGlmIChudWxsICE9PSBlLmJsb2NrZWRPbikgcmV0dXJuICExOwogICAgICAgIHZhciB0ID0gWnQoZS50b3BMZXZlbFR5cGUsIGUuZXZlbnRTeXN0ZW1GbGFncywgZS5jb250YWluZXIsIGUubmF0aXZlRXZlbnQpOwogICAgICAgIGlmIChudWxsICE9PSB0KSB7CiAgICAgICAgICAgIHZhciBuID0gUG4odCk7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBuICYmIG10KG4pLCBlLmJsb2NrZWRPbiA9IHQsICExOwogICAgICAgIH0KICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgICBmdW5jdGlvbiBBdChlLCB0LCBuKSB7CiAgICAgICAgTnQoZSkgJiYgbi5kZWxldGUodCk7CiAgICB9CiAgICBmdW5jdGlvbiBEdCgpIHsKICAgICAgICBmb3IgKHZ0ID0gITE7IDAgPCB5dC5sZW5ndGg7ICkgewogICAgICAgICAgICB2YXIgZSA9IHl0WzBdOwogICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5ibG9ja2VkT24pIHsKICAgICAgICAgICAgICAgIG51bGwgIT09IChlID0gUG4oZS5ibG9ja2VkT24pKSAmJiBodChlKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB0ID0gWnQoZS50b3BMZXZlbFR5cGUsIGUuZXZlbnRTeXN0ZW1GbGFncywgZS5jb250YWluZXIsIGUubmF0aXZlRXZlbnQpOwogICAgICAgICAgICBudWxsICE9PSB0ID8gZS5ibG9ja2VkT24gPSB0IDogeXQuc2hpZnQoKTsKICAgICAgICB9CiAgICAgICAgbnVsbCAhPT0gd3QgJiYgTnQod3QpICYmICh3dCA9IG51bGwpLCBudWxsICE9PSBrdCAmJiBOdChrdCkgJiYgKGt0ID0gbnVsbCksIG51bGwgIT09IHh0ICYmIE50KHh0KSAmJiAoeHQgPSBudWxsKSwgCiAgICAgICAgRXQuZm9yRWFjaChBdCksIFN0LmZvckVhY2goQXQpOwogICAgfQogICAgZnVuY3Rpb24gUnQoZSwgdCkgewogICAgICAgIGUuYmxvY2tlZE9uID09PSB0ICYmIChlLmJsb2NrZWRPbiA9IG51bGwsIHZ0IHx8ICh2dCA9ICEwLCBvLnVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2soby51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eSwgRHQpKSk7CiAgICB9CiAgICBmdW5jdGlvbiBNdChlKSB7CiAgICAgICAgZnVuY3Rpb24gdCh0KSB7CiAgICAgICAgICAgIHJldHVybiBSdCh0LCBlKTsKICAgICAgICB9CiAgICAgICAgaWYgKDAgPCB5dC5sZW5ndGgpIHsKICAgICAgICAgICAgUnQoeXRbMF0sIGUpOwogICAgICAgICAgICBmb3IgKHZhciBuID0gMTsgbiA8IHl0Lmxlbmd0aDsgbisrKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHl0W25dOwogICAgICAgICAgICAgICAgci5ibG9ja2VkT24gPT09IGUgJiYgKHIuYmxvY2tlZE9uID0gbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yIChudWxsICE9PSB3dCAmJiBSdCh3dCwgZSksIG51bGwgIT09IGt0ICYmIFJ0KGt0LCBlKSwgbnVsbCAhPT0geHQgJiYgUnQoeHQsIGUpLCAKICAgICAgICBFdC5mb3JFYWNoKHQpLCBTdC5mb3JFYWNoKHQpLCBuID0gMDsgbiA8IE90Lmxlbmd0aDsgbisrKSAociA9IE90W25dKS5ibG9ja2VkT24gPT09IGUgJiYgKHIuYmxvY2tlZE9uID0gbnVsbCk7CiAgICAgICAgZm9yICg7MCA8IE90Lmxlbmd0aCAmJiBudWxsID09PSAobiA9IE90WzBdKS5ibG9ja2VkT247ICkgSXQobiksIG51bGwgPT09IG4uYmxvY2tlZE9uICYmIE90LnNoaWZ0KCk7CiAgICB9CiAgICB2YXIgenQgPSB7fSwgTHQgPSBuZXcgTWFwLCBGdCA9IG5ldyBNYXAsIFV0ID0gWyAiYWJvcnQiLCAiYWJvcnQiLCBIZSwgImFuaW1hdGlvbkVuZCIsIFFlLCAiYW5pbWF0aW9uSXRlcmF0aW9uIiwgR2UsICJhbmltYXRpb25TdGFydCIsICJjYW5wbGF5IiwgImNhblBsYXkiLCAiY2FucGxheXRocm91Z2giLCAiY2FuUGxheVRocm91Z2giLCAiZHVyYXRpb25jaGFuZ2UiLCAiZHVyYXRpb25DaGFuZ2UiLCAiZW1wdGllZCIsICJlbXB0aWVkIiwgImVuY3J5cHRlZCIsICJlbmNyeXB0ZWQiLCAiZW5kZWQiLCAiZW5kZWQiLCAiZXJyb3IiLCAiZXJyb3IiLCAiZ290cG9pbnRlcmNhcHR1cmUiLCAiZ290UG9pbnRlckNhcHR1cmUiLCAibG9hZCIsICJsb2FkIiwgImxvYWRlZGRhdGEiLCAibG9hZGVkRGF0YSIsICJsb2FkZWRtZXRhZGF0YSIsICJsb2FkZWRNZXRhZGF0YSIsICJsb2Fkc3RhcnQiLCAibG9hZFN0YXJ0IiwgImxvc3Rwb2ludGVyY2FwdHVyZSIsICJsb3N0UG9pbnRlckNhcHR1cmUiLCAicGxheWluZyIsICJwbGF5aW5nIiwgInByb2dyZXNzIiwgInByb2dyZXNzIiwgInNlZWtpbmciLCAic2Vla2luZyIsICJzdGFsbGVkIiwgInN0YWxsZWQiLCAic3VzcGVuZCIsICJzdXNwZW5kIiwgInRpbWV1cGRhdGUiLCAidGltZVVwZGF0ZSIsIEtlLCAidHJhbnNpdGlvbkVuZCIsICJ3YWl0aW5nIiwgIndhaXRpbmciIF07CiAgICBmdW5jdGlvbiBXdChlLCB0KSB7CiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbiArPSAyKSB7CiAgICAgICAgICAgIHZhciByID0gZVtuXSwgYSA9IGVbbiArIDFdLCBvID0gIm9uIiArIChhWzBdLnRvVXBwZXJDYXNlKCkgKyBhLnNsaWNlKDEpKTsKICAgICAgICAgICAgbyA9IHsKICAgICAgICAgICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7CiAgICAgICAgICAgICAgICAgICAgYnViYmxlZDogbywKICAgICAgICAgICAgICAgICAgICBjYXB0dXJlZDogbyArICJDYXB0dXJlIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyByIF0sCiAgICAgICAgICAgICAgICBldmVudFByaW9yaXR5OiB0CiAgICAgICAgICAgIH0sIEZ0LnNldChyLCB0KSwgTHQuc2V0KHIsIG8pLCB6dFthXSA9IG87CiAgICAgICAgfQogICAgfQogICAgV3QoImJsdXIgYmx1ciBjYW5jZWwgY2FuY2VsIGNsaWNrIGNsaWNrIGNsb3NlIGNsb3NlIGNvbnRleHRtZW51IGNvbnRleHRNZW51IGNvcHkgY29weSBjdXQgY3V0IGF1eGNsaWNrIGF1eENsaWNrIGRibGNsaWNrIGRvdWJsZUNsaWNrIGRyYWdlbmQgZHJhZ0VuZCBkcmFnc3RhcnQgZHJhZ1N0YXJ0IGRyb3AgZHJvcCBmb2N1cyBmb2N1cyBpbnB1dCBpbnB1dCBpbnZhbGlkIGludmFsaWQga2V5ZG93biBrZXlEb3duIGtleXByZXNzIGtleVByZXNzIGtleXVwIGtleVVwIG1vdXNlZG93biBtb3VzZURvd24gbW91c2V1cCBtb3VzZVVwIHBhc3RlIHBhc3RlIHBhdXNlIHBhdXNlIHBsYXkgcGxheSBwb2ludGVyY2FuY2VsIHBvaW50ZXJDYW5jZWwgcG9pbnRlcmRvd24gcG9pbnRlckRvd24gcG9pbnRlcnVwIHBvaW50ZXJVcCByYXRlY2hhbmdlIHJhdGVDaGFuZ2UgcmVzZXQgcmVzZXQgc2Vla2VkIHNlZWtlZCBzdWJtaXQgc3VibWl0IHRvdWNoY2FuY2VsIHRvdWNoQ2FuY2VsIHRvdWNoZW5kIHRvdWNoRW5kIHRvdWNoc3RhcnQgdG91Y2hTdGFydCB2b2x1bWVjaGFuZ2Ugdm9sdW1lQ2hhbmdlIi5zcGxpdCgiICIpLCAwKSwgCiAgICBXdCgiZHJhZyBkcmFnIGRyYWdlbnRlciBkcmFnRW50ZXIgZHJhZ2V4aXQgZHJhZ0V4aXQgZHJhZ2xlYXZlIGRyYWdMZWF2ZSBkcmFnb3ZlciBkcmFnT3ZlciBtb3VzZW1vdmUgbW91c2VNb3ZlIG1vdXNlb3V0IG1vdXNlT3V0IG1vdXNlb3ZlciBtb3VzZU92ZXIgcG9pbnRlcm1vdmUgcG9pbnRlck1vdmUgcG9pbnRlcm91dCBwb2ludGVyT3V0IHBvaW50ZXJvdmVyIHBvaW50ZXJPdmVyIHNjcm9sbCBzY3JvbGwgdG9nZ2xlIHRvZ2dsZSB0b3VjaG1vdmUgdG91Y2hNb3ZlIHdoZWVsIHdoZWVsIi5zcGxpdCgiICIpLCAxKSwgCiAgICBXdChVdCwgMik7CiAgICBmb3IgKHZhciBWdCA9ICJjaGFuZ2Ugc2VsZWN0aW9uY2hhbmdlIHRleHRJbnB1dCBjb21wb3NpdGlvbnN0YXJ0IGNvbXBvc2l0aW9uZW5kIGNvbXBvc2l0aW9udXBkYXRlIi5zcGxpdCgiICIpLCAkdCA9IDA7ICR0IDwgVnQubGVuZ3RoOyAkdCsrKSBGdC5zZXQoVnRbJHRdLCAwKTsKICAgIHZhciBxdCA9IG8udW5zdGFibGVfVXNlckJsb2NraW5nUHJpb3JpdHksIEJ0ID0gby51bnN0YWJsZV9ydW5XaXRoUHJpb3JpdHksIEh0ID0gITA7CiAgICBmdW5jdGlvbiBRdChlLCB0KSB7CiAgICAgICAgR3QodCwgZSwgITEpOwogICAgfQogICAgZnVuY3Rpb24gR3QoZSwgdCwgbikgewogICAgICAgIHZhciByID0gRnQuZ2V0KHQpOwogICAgICAgIHN3aXRjaCAodm9pZCAwID09PSByID8gMiA6IHIpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgciA9IEt0LmJpbmQobnVsbCwgdCwgMSwgZSk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgciA9IFl0LmJpbmQobnVsbCwgdCwgMSwgZSk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHIgPSBYdC5iaW5kKG51bGwsIHQsIDEsIGUpOwogICAgICAgIH0KICAgICAgICBuID8gZS5hZGRFdmVudExpc3RlbmVyKHQsIHIsICEwKSA6IGUuYWRkRXZlbnRMaXN0ZW5lcih0LCByLCAhMSk7CiAgICB9CiAgICBmdW5jdGlvbiBLdChlLCB0LCBuLCByKSB7CiAgICAgICAgTCB8fCBNKCk7CiAgICAgICAgdmFyIGEgPSBYdCwgbyA9IEw7CiAgICAgICAgTCA9ICEwOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFIoYSwgZSwgdCwgbiwgcik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgKEwgPSBvKSB8fCBVKCk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gWXQoZSwgdCwgbiwgcikgewogICAgICAgIEJ0KHF0LCBYdC5iaW5kKG51bGwsIGUsIHQsIG4sIHIpKTsKICAgIH0KICAgIGZ1bmN0aW9uIFh0KGUsIHQsIG4sIHIpIHsKICAgICAgICBpZiAoSHQpIGlmICgwIDwgeXQubGVuZ3RoICYmIC0xIDwgQ3QuaW5kZXhPZihlKSkgZSA9IFB0KG51bGwsIGUsIHQsIG4sIHIpLCB5dC5wdXNoKGUpOyBlbHNlIHsKICAgICAgICAgICAgdmFyIGEgPSBadChlLCB0LCBuLCByKTsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGEpIF90KGUsIHIpOyBlbHNlIGlmICgtMSA8IEN0LmluZGV4T2YoZSkpIGUgPSBQdChhLCBlLCB0LCBuLCByKSwgeXQucHVzaChlKTsgZWxzZSBpZiAoIWZ1bmN0aW9uKGUsIHQsIG4sIHIsIGEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAodCkgewogICAgICAgICAgICAgICAgICBjYXNlICJmb2N1cyI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHd0ID0ganQod3QsIGUsIHQsIG4sIHIsIGEpLCAhMDsKCiAgICAgICAgICAgICAgICAgIGNhc2UgImRyYWdlbnRlciI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGt0ID0ganQoa3QsIGUsIHQsIG4sIHIsIGEpLCAhMDsKCiAgICAgICAgICAgICAgICAgIGNhc2UgIm1vdXNlb3ZlciI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHh0ID0ganQoeHQsIGUsIHQsIG4sIHIsIGEpLCAhMDsKCiAgICAgICAgICAgICAgICAgIGNhc2UgInBvaW50ZXJvdmVyIjoKICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGEucG9pbnRlcklkOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBFdC5zZXQobywganQoRXQuZ2V0KG8pIHx8IG51bGwsIGUsIHQsIG4sIHIsIGEpKSwgITA7CgogICAgICAgICAgICAgICAgICBjYXNlICJnb3Rwb2ludGVyY2FwdHVyZSI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8gPSBhLnBvaW50ZXJJZCwgU3Quc2V0KG8sIGp0KFN0LmdldChvKSB8fCBudWxsLCBlLCB0LCBuLCByLCBhKSksICEwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICB9KGEsIGUsIHQsIG4sIHIpKSB7CiAgICAgICAgICAgICAgICBfdChlLCByKSwgZSA9IGR0KGUsIHIsIG51bGwsIHQpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBXKHB0LCBlKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgZnQoZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBadChlLCB0LCBuLCByKSB7CiAgICAgICAgaWYgKG51bGwgIT09IChuID0gVG4obiA9IHV0KHIpKSkpIHsKICAgICAgICAgICAgdmFyIGEgPSBKZShuKTsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGEpIG4gPSBudWxsOyBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBvID0gYS50YWc7CiAgICAgICAgICAgICAgICBpZiAoMTMgPT09IG8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKG4gPSBldChhKSkpIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgIG4gPSBudWxsOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgzID09PSBvKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGEuc3RhdGVOb2RlLmh5ZHJhdGUpIHJldHVybiAzID09PSBhLnRhZyA/IGEuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8gOiBudWxsOwogICAgICAgICAgICAgICAgICAgIG4gPSBudWxsOwogICAgICAgICAgICAgICAgfSBlbHNlIGEgIT09IG4gJiYgKG4gPSBudWxsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlID0gZHQoZSwgciwgbiwgdCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgVyhwdCwgZSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgZnQoZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdmFyIEp0ID0gewogICAgICAgIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiAhMCwKICAgICAgICBib3JkZXJJbWFnZU91dHNldDogITAsCiAgICAgICAgYm9yZGVySW1hZ2VTbGljZTogITAsCiAgICAgICAgYm9yZGVySW1hZ2VXaWR0aDogITAsCiAgICAgICAgYm94RmxleDogITAsCiAgICAgICAgYm94RmxleEdyb3VwOiAhMCwKICAgICAgICBib3hPcmRpbmFsR3JvdXA6ICEwLAogICAgICAgIGNvbHVtbkNvdW50OiAhMCwKICAgICAgICBjb2x1bW5zOiAhMCwKICAgICAgICBmbGV4OiAhMCwKICAgICAgICBmbGV4R3JvdzogITAsCiAgICAgICAgZmxleFBvc2l0aXZlOiAhMCwKICAgICAgICBmbGV4U2hyaW5rOiAhMCwKICAgICAgICBmbGV4TmVnYXRpdmU6ICEwLAogICAgICAgIGZsZXhPcmRlcjogITAsCiAgICAgICAgZ3JpZEFyZWE6ICEwLAogICAgICAgIGdyaWRSb3c6ICEwLAogICAgICAgIGdyaWRSb3dFbmQ6ICEwLAogICAgICAgIGdyaWRSb3dTcGFuOiAhMCwKICAgICAgICBncmlkUm93U3RhcnQ6ICEwLAogICAgICAgIGdyaWRDb2x1bW46ICEwLAogICAgICAgIGdyaWRDb2x1bW5FbmQ6ICEwLAogICAgICAgIGdyaWRDb2x1bW5TcGFuOiAhMCwKICAgICAgICBncmlkQ29sdW1uU3RhcnQ6ICEwLAogICAgICAgIGZvbnRXZWlnaHQ6ICEwLAogICAgICAgIGxpbmVDbGFtcDogITAsCiAgICAgICAgbGluZUhlaWdodDogITAsCiAgICAgICAgb3BhY2l0eTogITAsCiAgICAgICAgb3JkZXI6ICEwLAogICAgICAgIG9ycGhhbnM6ICEwLAogICAgICAgIHRhYlNpemU6ICEwLAogICAgICAgIHdpZG93czogITAsCiAgICAgICAgekluZGV4OiAhMCwKICAgICAgICB6b29tOiAhMCwKICAgICAgICBmaWxsT3BhY2l0eTogITAsCiAgICAgICAgZmxvb2RPcGFjaXR5OiAhMCwKICAgICAgICBzdG9wT3BhY2l0eTogITAsCiAgICAgICAgc3Ryb2tlRGFzaGFycmF5OiAhMCwKICAgICAgICBzdHJva2VEYXNob2Zmc2V0OiAhMCwKICAgICAgICBzdHJva2VNaXRlcmxpbWl0OiAhMCwKICAgICAgICBzdHJva2VPcGFjaXR5OiAhMCwKICAgICAgICBzdHJva2VXaWR0aDogITAKICAgIH0sIGVuID0gWyAiV2Via2l0IiwgIm1zIiwgIk1veiIsICJPIiBdOwogICAgZnVuY3Rpb24gdG4oZSwgdCwgbikgewogICAgICAgIHJldHVybiBudWxsID09IHQgfHwgImJvb2xlYW4iID09IHR5cGVvZiB0IHx8ICIiID09PSB0ID8gIiIgOiBuIHx8ICJudW1iZXIiICE9IHR5cGVvZiB0IHx8IDAgPT09IHQgfHwgSnQuaGFzT3duUHJvcGVydHkoZSkgJiYgSnRbZV0gPyAoIiIgKyB0KS50cmltKCkgOiB0ICsgInB4IjsKICAgIH0KICAgIGZ1bmN0aW9uIG5uKGUsIHQpIHsKICAgICAgICBmb3IgKHZhciBuIGluIGUgPSBlLnN0eWxlLCB0KSBpZiAodC5oYXNPd25Qcm9wZXJ0eShuKSkgewogICAgICAgICAgICB2YXIgciA9IDAgPT09IG4uaW5kZXhPZigiLS0iKSwgYSA9IHRuKG4sIHRbbl0sIHIpOwogICAgICAgICAgICAiZmxvYXQiID09PSBuICYmIChuID0gImNzc0Zsb2F0IiksIHIgPyBlLnNldFByb3BlcnR5KG4sIGEpIDogZVtuXSA9IGE7CiAgICAgICAgfQogICAgfQogICAgT2JqZWN0LmtleXMoSnQpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICBlbi5mb3JFYWNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHQgPSB0ICsgZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGUuc3Vic3RyaW5nKDEpLCBKdFt0XSA9IEp0W2VdOwogICAgICAgIH0pKTsKICAgIH0pKTsKICAgIHZhciBybiA9IGEoewogICAgICAgIG1lbnVpdGVtOiAhMAogICAgfSwgewogICAgICAgIGFyZWE6ICEwLAogICAgICAgIGJhc2U6ICEwLAogICAgICAgIGJyOiAhMCwKICAgICAgICBjb2w6ICEwLAogICAgICAgIGVtYmVkOiAhMCwKICAgICAgICBocjogITAsCiAgICAgICAgaW1nOiAhMCwKICAgICAgICBpbnB1dDogITAsCiAgICAgICAga2V5Z2VuOiAhMCwKICAgICAgICBsaW5rOiAhMCwKICAgICAgICBtZXRhOiAhMCwKICAgICAgICBwYXJhbTogITAsCiAgICAgICAgc291cmNlOiAhMCwKICAgICAgICB0cmFjazogITAsCiAgICAgICAgd2JyOiAhMAogICAgfSk7CiAgICBmdW5jdGlvbiBhbihlLCB0KSB7CiAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgaWYgKHJuW2VdICYmIChudWxsICE9IHQuY2hpbGRyZW4gfHwgbnVsbCAhPSB0LmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MKSkgdGhyb3cgRXJyb3IoaSgxMzcsIGUsICIiKSk7CiAgICAgICAgICAgIGlmIChudWxsICE9IHQuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpIHsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQuY2hpbGRyZW4pIHRocm93IEVycm9yKGkoNjApKTsKICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiAhPSB0eXBlb2YgdC5kYW5nZXJvdXNseVNldElubmVySFRNTCB8fCAhKCJfX2h0bWwiIGluIHQuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpKSB0aHJvdyBFcnJvcihpKDYxKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG51bGwgIT0gdC5zdHlsZSAmJiAib2JqZWN0IiAhPSB0eXBlb2YgdC5zdHlsZSkgdGhyb3cgRXJyb3IoaSg2MiwgIiIpKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBvbihlLCB0KSB7CiAgICAgICAgaWYgKC0xID09PSBlLmluZGV4T2YoIi0iKSkgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiB0LmlzOwogICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgY2FzZSAiYW5ub3RhdGlvbi14bWwiOgogICAgICAgICAgY2FzZSAiY29sb3ItcHJvZmlsZSI6CiAgICAgICAgICBjYXNlICJmb250LWZhY2UiOgogICAgICAgICAgY2FzZSAiZm9udC1mYWNlLXNyYyI6CiAgICAgICAgICBjYXNlICJmb250LWZhY2UtdXJpIjoKICAgICAgICAgIGNhc2UgImZvbnQtZmFjZS1mb3JtYXQiOgogICAgICAgICAgY2FzZSAiZm9udC1mYWNlLW5hbWUiOgogICAgICAgICAgY2FzZSAibWlzc2luZy1nbHlwaCI6CiAgICAgICAgICAgIHJldHVybiAhMTsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgfQogICAgfQogICAgdmFyIGxuID0gRGU7CiAgICBmdW5jdGlvbiB1bihlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBaZShlID0gOSA9PT0gZS5ub2RlVHlwZSB8fCAxMSA9PT0gZS5ub2RlVHlwZSA/IGUgOiBlLm93bmVyRG9jdW1lbnQpOwogICAgICAgIHQgPSBPW3RdOwogICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgZ3QodFtyXSwgZSwgbik7CiAgICB9CiAgICBmdW5jdGlvbiBjbigpIHt9CiAgICBmdW5jdGlvbiBzbihlKSB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gKGUgPSBlIHx8ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IHZvaWQgMCkpKSByZXR1cm4gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gZS5hY3RpdmVFbGVtZW50IHx8IGUuYm9keTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgIHJldHVybiBlLmJvZHk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZm4oZSkgewogICAgICAgIGZvciAoO2UgJiYgZS5maXJzdENoaWxkOyApIGUgPSBlLmZpcnN0Q2hpbGQ7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICBmdW5jdGlvbiBkbihlLCB0KSB7CiAgICAgICAgdmFyIG4sIHIgPSBmbihlKTsKICAgICAgICBmb3IgKGUgPSAwOyByOyApIHsKICAgICAgICAgICAgaWYgKDMgPT09IHIubm9kZVR5cGUpIHsKICAgICAgICAgICAgICAgIGlmIChuID0gZSArIHIudGV4dENvbnRlbnQubGVuZ3RoLCBlIDw9IHQgJiYgbiA+PSB0KSByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIG5vZGU6IHIsCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiB0IC0gZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGUgPSBuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGU6IHsKICAgICAgICAgICAgICAgIGZvciAoO3I7ICkgewogICAgICAgICAgICAgICAgICAgIGlmIChyLm5leHRTaWJsaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSByLm5leHRTaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByID0gci5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgciA9IHZvaWQgMDsKICAgICAgICAgICAgfQogICAgICAgICAgICByID0gZm4ocik7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcG4oKSB7CiAgICAgICAgZm9yICh2YXIgZSA9IHdpbmRvdywgdCA9IHNuKCk7IHQgaW5zdGFuY2VvZiBlLkhUTUxJRnJhbWVFbGVtZW50OyApIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBuID0gInN0cmluZyIgPT0gdHlwZW9mIHQuY29udGVudFdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBuID0gITE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFuKSBicmVhazsKICAgICAgICAgICAgdCA9IHNuKChlID0gdC5jb250ZW50V2luZG93KS5kb2N1bWVudCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0OwogICAgfQogICAgZnVuY3Rpb24gZ24oZSkgewogICAgICAgIHZhciB0ID0gZSAmJiBlLm5vZGVOYW1lICYmIGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICByZXR1cm4gdCAmJiAoImlucHV0IiA9PT0gdCAmJiAoInRleHQiID09PSBlLnR5cGUgfHwgInNlYXJjaCIgPT09IGUudHlwZSB8fCAidGVsIiA9PT0gZS50eXBlIHx8ICJ1cmwiID09PSBlLnR5cGUgfHwgInBhc3N3b3JkIiA9PT0gZS50eXBlKSB8fCAidGV4dGFyZWEiID09PSB0IHx8ICJ0cnVlIiA9PT0gZS5jb250ZW50RWRpdGFibGUpOwogICAgfQogICAgdmFyIGhuID0gbnVsbCwgbW4gPSBudWxsOwogICAgZnVuY3Rpb24gYm4oZSwgdCkgewogICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgY2FzZSAiYnV0dG9uIjoKICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICBjYXNlICJ0ZXh0YXJlYSI6CiAgICAgICAgICAgIHJldHVybiAhIXQuYXV0b0ZvY3VzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gITE7CiAgICB9CiAgICBmdW5jdGlvbiB2bihlLCB0KSB7CiAgICAgICAgcmV0dXJuICJ0ZXh0YXJlYSIgPT09IGUgfHwgIm9wdGlvbiIgPT09IGUgfHwgIm5vc2NyaXB0IiA9PT0gZSB8fCAic3RyaW5nIiA9PSB0eXBlb2YgdC5jaGlsZHJlbiB8fCAibnVtYmVyIiA9PSB0eXBlb2YgdC5jaGlsZHJlbiB8fCAib2JqZWN0IiA9PSB0eXBlb2YgdC5kYW5nZXJvdXNseVNldElubmVySFRNTCAmJiBudWxsICE9PSB0LmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmIG51bGwgIT0gdC5kYW5nZXJvdXNseVNldElubmVySFRNTC5fX2h0bWw7CiAgICB9CiAgICB2YXIgeW4gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBzZXRUaW1lb3V0ID8gc2V0VGltZW91dCA6IHZvaWQgMCwgd24gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBjbGVhclRpbWVvdXQgPyBjbGVhclRpbWVvdXQgOiB2b2lkIDA7CiAgICBmdW5jdGlvbiBrbihlKSB7CiAgICAgICAgZm9yICg7bnVsbCAhPSBlOyBlID0gZS5uZXh0U2libGluZykgewogICAgICAgICAgICB2YXIgdCA9IGUubm9kZVR5cGU7CiAgICAgICAgICAgIGlmICgxID09PSB0IHx8IDMgPT09IHQpIGJyZWFrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZTsKICAgIH0KICAgIGZ1bmN0aW9uIHhuKGUpIHsKICAgICAgICBlID0gZS5wcmV2aW91c1NpYmxpbmc7CiAgICAgICAgZm9yICh2YXIgdCA9IDA7IGU7ICkgewogICAgICAgICAgICBpZiAoOCA9PT0gZS5ub2RlVHlwZSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoIiQiID09PSBuIHx8ICIkISIgPT09IG4gfHwgIiQ/IiA9PT0gbikgewogICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB0KSByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICB0LS07CiAgICAgICAgICAgICAgICB9IGVsc2UgIi8kIiA9PT0gbiAmJiB0Kys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZSA9IGUucHJldmlvdXNTaWJsaW5nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIHZhciBFbiA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpLCBTbiA9ICJfX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSQiICsgRW4sIE9uID0gIl9fcmVhY3RFdmVudEhhbmRsZXJzJCIgKyBFbiwgQ24gPSAiX19yZWFjdENvbnRhaW5lcmUkIiArIEVuOwogICAgZnVuY3Rpb24gVG4oZSkgewogICAgICAgIHZhciB0ID0gZVtTbl07CiAgICAgICAgaWYgKHQpIHJldHVybiB0OwogICAgICAgIGZvciAodmFyIG4gPSBlLnBhcmVudE5vZGU7IG47ICkgewogICAgICAgICAgICBpZiAodCA9IG5bQ25dIHx8IG5bU25dKSB7CiAgICAgICAgICAgICAgICBpZiAobiA9IHQuYWx0ZXJuYXRlLCBudWxsICE9PSB0LmNoaWxkIHx8IG51bGwgIT09IG4gJiYgbnVsbCAhPT0gbi5jaGlsZCkgZm9yIChlID0geG4oZSk7IG51bGwgIT09IGU7ICkgewogICAgICAgICAgICAgICAgICAgIGlmIChuID0gZVtTbl0pIHJldHVybiBuOwogICAgICAgICAgICAgICAgICAgIGUgPSB4bihlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIG4gPSAoZSA9IG4pLnBhcmVudE5vZGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgZnVuY3Rpb24gUG4oZSkgewogICAgICAgIHJldHVybiAhKGUgPSBlW1NuXSB8fCBlW0NuXSkgfHwgNSAhPT0gZS50YWcgJiYgNiAhPT0gZS50YWcgJiYgMTMgIT09IGUudGFnICYmIDMgIT09IGUudGFnID8gbnVsbCA6IGU7CiAgICB9CiAgICBmdW5jdGlvbiBfbihlKSB7CiAgICAgICAgaWYgKDUgPT09IGUudGFnIHx8IDYgPT09IGUudGFnKSByZXR1cm4gZS5zdGF0ZU5vZGU7CiAgICAgICAgdGhyb3cgRXJyb3IoaSgzMykpOwogICAgfQogICAgZnVuY3Rpb24gam4oZSkgewogICAgICAgIHJldHVybiBlW09uXSB8fCBudWxsOwogICAgfQogICAgZnVuY3Rpb24gSW4oZSkgewogICAgICAgIGRvIHsKICAgICAgICAgICAgZSA9IGUucmV0dXJuOwogICAgICAgIH0gd2hpbGUgKGUgJiYgNSAhPT0gZS50YWcpOwogICAgICAgIHJldHVybiBlIHx8IG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiBObihlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBlLnN0YXRlTm9kZTsKICAgICAgICBpZiAoIW4pIHJldHVybiBudWxsOwogICAgICAgIHZhciByID0gZyhuKTsKICAgICAgICBpZiAoIXIpIHJldHVybiBudWxsOwogICAgICAgIG4gPSByW3RdOwogICAgICAgIGU6IHN3aXRjaCAodCkgewogICAgICAgICAgY2FzZSAib25DbGljayI6CiAgICAgICAgICBjYXNlICJvbkNsaWNrQ2FwdHVyZSI6CiAgICAgICAgICBjYXNlICJvbkRvdWJsZUNsaWNrIjoKICAgICAgICAgIGNhc2UgIm9uRG91YmxlQ2xpY2tDYXB0dXJlIjoKICAgICAgICAgIGNhc2UgIm9uTW91c2VEb3duIjoKICAgICAgICAgIGNhc2UgIm9uTW91c2VEb3duQ2FwdHVyZSI6CiAgICAgICAgICBjYXNlICJvbk1vdXNlTW92ZSI6CiAgICAgICAgICBjYXNlICJvbk1vdXNlTW92ZUNhcHR1cmUiOgogICAgICAgICAgY2FzZSAib25Nb3VzZVVwIjoKICAgICAgICAgIGNhc2UgIm9uTW91c2VVcENhcHR1cmUiOgogICAgICAgICAgY2FzZSAib25Nb3VzZUVudGVyIjoKICAgICAgICAgICAgKHIgPSAhci5kaXNhYmxlZCkgfHwgKHIgPSAhKCJidXR0b24iID09PSAoZSA9IGUudHlwZSkgfHwgImlucHV0IiA9PT0gZSB8fCAic2VsZWN0IiA9PT0gZSB8fCAidGV4dGFyZWEiID09PSBlKSksIAogICAgICAgICAgICBlID0gIXI7CiAgICAgICAgICAgIGJyZWFrIGU7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgZSA9ICExOwogICAgICAgIH0KICAgICAgICBpZiAoZSkgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKG4gJiYgImZ1bmN0aW9uIiAhPSB0eXBlb2YgbikgdGhyb3cgRXJyb3IoaSgyMzEsIHQsIHR5cGVvZiBuKSk7CiAgICAgICAgcmV0dXJuIG47CiAgICB9CiAgICBmdW5jdGlvbiBBbihlLCB0LCBuKSB7CiAgICAgICAgKHQgPSBObihlLCBuLmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3RdKSkgJiYgKG4uX2Rpc3BhdGNoTGlzdGVuZXJzID0gcnQobi5fZGlzcGF0Y2hMaXN0ZW5lcnMsIHQpLCAKICAgICAgICBuLl9kaXNwYXRjaEluc3RhbmNlcyA9IHJ0KG4uX2Rpc3BhdGNoSW5zdGFuY2VzLCBlKSk7CiAgICB9CiAgICBmdW5jdGlvbiBEbihlKSB7CiAgICAgICAgaWYgKGUgJiYgZS5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5fdGFyZ2V0SW5zdCwgbiA9IFtdOyB0OyApIG4ucHVzaCh0KSwgdCA9IEluKHQpOwogICAgICAgICAgICBmb3IgKHQgPSBuLmxlbmd0aDsgMCA8IHQtLTsgKSBBbihuW3RdLCAiY2FwdHVyZWQiLCBlKTsKICAgICAgICAgICAgZm9yICh0ID0gMDsgdCA8IG4ubGVuZ3RoOyB0KyspIEFuKG5bdF0sICJidWJibGVkIiwgZSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gUm4oZSwgdCwgbikgewogICAgICAgIGUgJiYgbiAmJiBuLmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUgJiYgKHQgPSBObihlLCBuLmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpKSAmJiAobi5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBydChuLl9kaXNwYXRjaExpc3RlbmVycywgdCksIAogICAgICAgIG4uX2Rpc3BhdGNoSW5zdGFuY2VzID0gcnQobi5fZGlzcGF0Y2hJbnN0YW5jZXMsIGUpKTsKICAgIH0KICAgIGZ1bmN0aW9uIE1uKGUpIHsKICAgICAgICBlICYmIGUuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSAmJiBSbihlLl90YXJnZXRJbnN0LCBudWxsLCBlKTsKICAgIH0KICAgIGZ1bmN0aW9uIHpuKGUpIHsKICAgICAgICBhdChlLCBEbik7CiAgICB9CiAgICB2YXIgTG4gPSBudWxsLCBGbiA9IG51bGwsIFVuID0gbnVsbDsKICAgIGZ1bmN0aW9uIFduKCkgewogICAgICAgIGlmIChVbikgcmV0dXJuIFVuOwogICAgICAgIHZhciBlLCB0LCBuID0gRm4sIHIgPSBuLmxlbmd0aCwgYSA9ICJ2YWx1ZSIgaW4gTG4gPyBMbi52YWx1ZSA6IExuLnRleHRDb250ZW50LCBvID0gYS5sZW5ndGg7CiAgICAgICAgZm9yIChlID0gMDsgZSA8IHIgJiYgbltlXSA9PT0gYVtlXTsgZSsrKSA7CiAgICAgICAgdmFyIGkgPSByIC0gZTsKICAgICAgICBmb3IgKHQgPSAxOyB0IDw9IGkgJiYgbltyIC0gdF0gPT09IGFbbyAtIHRdOyB0KyspIDsKICAgICAgICByZXR1cm4gVW4gPSBhLnNsaWNlKGUsIDEgPCB0ID8gMSAtIHQgOiB2b2lkIDApOwogICAgfQogICAgZnVuY3Rpb24gVm4oKSB7CiAgICAgICAgcmV0dXJuICEwOwogICAgfQogICAgZnVuY3Rpb24gJG4oKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgfQogICAgZnVuY3Rpb24gcW4oZSwgdCwgbiwgcikgewogICAgICAgIGZvciAodmFyIGEgaW4gdGhpcy5kaXNwYXRjaENvbmZpZyA9IGUsIHRoaXMuX3RhcmdldEluc3QgPSB0LCB0aGlzLm5hdGl2ZUV2ZW50ID0gbiwgCiAgICAgICAgZSA9IHRoaXMuY29uc3RydWN0b3IuSW50ZXJmYWNlKSBlLmhhc093blByb3BlcnR5KGEpICYmICgodCA9IGVbYV0pID8gdGhpc1thXSA9IHQobikgOiAidGFyZ2V0IiA9PT0gYSA/IHRoaXMudGFyZ2V0ID0gciA6IHRoaXNbYV0gPSBuW2FdKTsKICAgICAgICByZXR1cm4gdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSAobnVsbCAhPSBuLmRlZmF1bHRQcmV2ZW50ZWQgPyBuLmRlZmF1bHRQcmV2ZW50ZWQgOiAhMSA9PT0gbi5yZXR1cm5WYWx1ZSkgPyBWbiA6ICRuLCAKICAgICAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gJG4sIHRoaXM7CiAgICB9CiAgICBmdW5jdGlvbiBCbihlLCB0LCBuLCByKSB7CiAgICAgICAgaWYgKHRoaXMuZXZlbnRQb29sLmxlbmd0aCkgewogICAgICAgICAgICB2YXIgYSA9IHRoaXMuZXZlbnRQb29sLnBvcCgpOwogICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsKGEsIGUsIHQsIG4sIHIpLCBhOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IHRoaXMoZSwgdCwgbiwgcik7CiAgICB9CiAgICBmdW5jdGlvbiBIbihlKSB7CiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHRoaXMpKSB0aHJvdyBFcnJvcihpKDI3OSkpOwogICAgICAgIGUuZGVzdHJ1Y3RvcigpLCAxMCA+IHRoaXMuZXZlbnRQb29sLmxlbmd0aCAmJiB0aGlzLmV2ZW50UG9vbC5wdXNoKGUpOwogICAgfQogICAgZnVuY3Rpb24gUW4oZSkgewogICAgICAgIGUuZXZlbnRQb29sID0gW10sIGUuZ2V0UG9vbGVkID0gQm4sIGUucmVsZWFzZSA9IEhuOwogICAgfQogICAgYShxbi5wcm90b3R5cGUsIHsKICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9ICEwOwogICAgICAgICAgICB2YXIgZSA9IHRoaXMubmF0aXZlRXZlbnQ7CiAgICAgICAgICAgIGUgJiYgKGUucHJldmVudERlZmF1bHQgPyBlLnByZXZlbnREZWZhdWx0KCkgOiAidW5rbm93biIgIT0gdHlwZW9mIGUucmV0dXJuVmFsdWUgJiYgKGUucmV0dXJuVmFsdWUgPSAhMSksIAogICAgICAgICAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IFZuKTsKICAgICAgICB9LAogICAgICAgIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5uYXRpdmVFdmVudDsKICAgICAgICAgICAgZSAmJiAoZS5zdG9wUHJvcGFnYXRpb24gPyBlLnN0b3BQcm9wYWdhdGlvbigpIDogInVua25vd24iICE9IHR5cGVvZiBlLmNhbmNlbEJ1YmJsZSAmJiAoZS5jYW5jZWxCdWJibGUgPSAhMCksIAogICAgICAgICAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gVm4pOwogICAgICAgIH0sCiAgICAgICAgcGVyc2lzdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMuaXNQZXJzaXN0ZW50ID0gVm47CiAgICAgICAgfSwKICAgICAgICBpc1BlcnNpc3RlbnQ6ICRuLAogICAgICAgIGRlc3RydWN0b3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSwgdCA9IHRoaXMuY29uc3RydWN0b3IuSW50ZXJmYWNlOwogICAgICAgICAgICBmb3IgKGUgaW4gdCkgdGhpc1tlXSA9IG51bGw7CiAgICAgICAgICAgIHRoaXMubmF0aXZlRXZlbnQgPSB0aGlzLl90YXJnZXRJbnN0ID0gdGhpcy5kaXNwYXRjaENvbmZpZyA9IG51bGwsIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9ICRuLCAKICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2hJbnN0YW5jZXMgPSB0aGlzLl9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7CiAgICAgICAgfQogICAgfSksIHFuLkludGVyZmFjZSA9IHsKICAgICAgICB0eXBlOiBudWxsLAogICAgICAgIHRhcmdldDogbnVsbCwKICAgICAgICBjdXJyZW50VGFyZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSwKICAgICAgICBldmVudFBoYXNlOiBudWxsLAogICAgICAgIGJ1YmJsZXM6IG51bGwsCiAgICAgICAgY2FuY2VsYWJsZTogbnVsbCwKICAgICAgICB0aW1lU3RhbXA6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUudGltZVN0YW1wIHx8IERhdGUubm93KCk7CiAgICAgICAgfSwKICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBudWxsLAogICAgICAgIGlzVHJ1c3RlZDogbnVsbAogICAgfSwgcW4uZXh0ZW5kID0gZnVuY3Rpb24oZSkgewogICAgICAgIGZ1bmN0aW9uIHQoKSB7fQogICAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgIHJldHVybiByLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHZhciByID0gdGhpczsKICAgICAgICB0LnByb3RvdHlwZSA9IHIucHJvdG90eXBlOwogICAgICAgIHZhciBvID0gbmV3IHQ7CiAgICAgICAgcmV0dXJuIGEobywgbi5wcm90b3R5cGUpLCBuLnByb3RvdHlwZSA9IG8sIG4ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gbiwgbi5JbnRlcmZhY2UgPSBhKHt9LCByLkludGVyZmFjZSwgZSksIAogICAgICAgIG4uZXh0ZW5kID0gci5leHRlbmQsIFFuKG4pLCBuOwogICAgfSwgUW4ocW4pOwogICAgdmFyIEduID0gcW4uZXh0ZW5kKHsKICAgICAgICBkYXRhOiBudWxsCiAgICB9KSwgS24gPSBxbi5leHRlbmQoewogICAgICAgIGRhdGE6IG51bGwKICAgIH0pLCBZbiA9IFsgOSwgMTMsIDI3LCAzMiBdLCBYbiA9IFQgJiYgIkNvbXBvc2l0aW9uRXZlbnQiIGluIHdpbmRvdywgWm4gPSBudWxsOwogICAgVCAmJiAiZG9jdW1lbnRNb2RlIiBpbiBkb2N1bWVudCAmJiAoWm4gPSBkb2N1bWVudC5kb2N1bWVudE1vZGUpOwogICAgdmFyIEpuID0gVCAmJiAiVGV4dEV2ZW50IiBpbiB3aW5kb3cgJiYgIVpuLCBlciA9IFQgJiYgKCFYbiB8fCBabiAmJiA4IDwgWm4gJiYgMTEgPj0gWm4pLCB0ciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMzIpLCBuciA9IHsKICAgICAgICBiZWZvcmVJbnB1dDogewogICAgICAgICAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczogewogICAgICAgICAgICAgICAgYnViYmxlZDogIm9uQmVmb3JlSW5wdXQiLAogICAgICAgICAgICAgICAgY2FwdHVyZWQ6ICJvbkJlZm9yZUlucHV0Q2FwdHVyZSIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiBbICJjb21wb3NpdGlvbmVuZCIsICJrZXlwcmVzcyIsICJ0ZXh0SW5wdXQiLCAicGFzdGUiIF0KICAgICAgICB9LAogICAgICAgIGNvbXBvc2l0aW9uRW5kOiB7CiAgICAgICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7CiAgICAgICAgICAgICAgICBidWJibGVkOiAib25Db21wb3NpdGlvbkVuZCIsCiAgICAgICAgICAgICAgICBjYXB0dXJlZDogIm9uQ29tcG9zaXRpb25FbmRDYXB0dXJlIgogICAgICAgICAgICB9LAogICAgICAgICAgICBkZXBlbmRlbmNpZXM6ICJibHVyIGNvbXBvc2l0aW9uZW5kIGtleWRvd24ga2V5cHJlc3Mga2V5dXAgbW91c2Vkb3duIi5zcGxpdCgiICIpCiAgICAgICAgfSwKICAgICAgICBjb21wb3NpdGlvblN0YXJ0OiB7CiAgICAgICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7CiAgICAgICAgICAgICAgICBidWJibGVkOiAib25Db21wb3NpdGlvblN0YXJ0IiwKICAgICAgICAgICAgICAgIGNhcHR1cmVkOiAib25Db21wb3NpdGlvblN0YXJ0Q2FwdHVyZSIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiAiYmx1ciBjb21wb3NpdGlvbnN0YXJ0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgbW91c2Vkb3duIi5zcGxpdCgiICIpCiAgICAgICAgfSwKICAgICAgICBjb21wb3NpdGlvblVwZGF0ZTogewogICAgICAgICAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczogewogICAgICAgICAgICAgICAgYnViYmxlZDogIm9uQ29tcG9zaXRpb25VcGRhdGUiLAogICAgICAgICAgICAgICAgY2FwdHVyZWQ6ICJvbkNvbXBvc2l0aW9uVXBkYXRlQ2FwdHVyZSIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiAiYmx1ciBjb21wb3NpdGlvbnVwZGF0ZSBrZXlkb3duIGtleXByZXNzIGtleXVwIG1vdXNlZG93biIuc3BsaXQoIiAiKQogICAgICAgIH0KICAgIH0sIHJyID0gITE7CiAgICBmdW5jdGlvbiBhcihlLCB0KSB7CiAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICBjYXNlICJrZXl1cCI6CiAgICAgICAgICAgIHJldHVybiAtMSAhPT0gWW4uaW5kZXhPZih0LmtleUNvZGUpOwoKICAgICAgICAgIGNhc2UgImtleWRvd24iOgogICAgICAgICAgICByZXR1cm4gMjI5ICE9PSB0LmtleUNvZGU7CgogICAgICAgICAgY2FzZSAia2V5cHJlc3MiOgogICAgICAgICAgY2FzZSAibW91c2Vkb3duIjoKICAgICAgICAgIGNhc2UgImJsdXIiOgogICAgICAgICAgICByZXR1cm4gITA7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9yKGUpIHsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT0gdHlwZW9mIChlID0gZS5kZXRhaWwpICYmICJkYXRhIiBpbiBlID8gZS5kYXRhIDogbnVsbDsKICAgIH0KICAgIHZhciBpciA9ICExOwogICAgdmFyIGxyID0gewogICAgICAgIGV2ZW50VHlwZXM6IG5yLAogICAgICAgIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgdmFyIGE7CiAgICAgICAgICAgIGlmIChYbikgZTogewogICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNvbXBvc2l0aW9uc3RhcnQiOgogICAgICAgICAgICAgICAgICAgIHZhciBvID0gbnIuY29tcG9zaXRpb25TdGFydDsKICAgICAgICAgICAgICAgICAgICBicmVhayBlOwoKICAgICAgICAgICAgICAgICAgY2FzZSAiY29tcG9zaXRpb25lbmQiOgogICAgICAgICAgICAgICAgICAgIG8gPSBuci5jb21wb3NpdGlvbkVuZDsKICAgICAgICAgICAgICAgICAgICBicmVhayBlOwoKICAgICAgICAgICAgICAgICAgY2FzZSAiY29tcG9zaXRpb251cGRhdGUiOgogICAgICAgICAgICAgICAgICAgIG8gPSBuci5jb21wb3NpdGlvblVwZGF0ZTsKICAgICAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbyA9IHZvaWQgMDsKICAgICAgICAgICAgfSBlbHNlIGlyID8gYXIoZSwgbikgJiYgKG8gPSBuci5jb21wb3NpdGlvbkVuZCkgOiAia2V5ZG93biIgPT09IGUgJiYgMjI5ID09PSBuLmtleUNvZGUgJiYgKG8gPSBuci5jb21wb3NpdGlvblN0YXJ0KTsKICAgICAgICAgICAgcmV0dXJuIG8gPyAoZXIgJiYgImtvIiAhPT0gbi5sb2NhbGUgJiYgKGlyIHx8IG8gIT09IG5yLmNvbXBvc2l0aW9uU3RhcnQgPyBvID09PSBuci5jb21wb3NpdGlvbkVuZCAmJiBpciAmJiAoYSA9IFduKCkpIDogKEZuID0gInZhbHVlIiBpbiAoTG4gPSByKSA/IExuLnZhbHVlIDogTG4udGV4dENvbnRlbnQsIAogICAgICAgICAgICBpciA9ICEwKSksIG8gPSBHbi5nZXRQb29sZWQobywgdCwgbiwgciksIGEgPyBvLmRhdGEgPSBhIDogbnVsbCAhPT0gKGEgPSBvcihuKSkgJiYgKG8uZGF0YSA9IGEpLCAKICAgICAgICAgICAgem4obyksIGEgPSBvKSA6IGEgPSBudWxsLCAoZSA9IEpuID8gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgImNvbXBvc2l0aW9uZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3IodCk7CgogICAgICAgICAgICAgICAgICBjYXNlICJrZXlwcmVzcyI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDMyICE9PSB0LndoaWNoID8gbnVsbCA6IChyciA9ICEwLCB0cik7CgogICAgICAgICAgICAgICAgICBjYXNlICJ0ZXh0SW5wdXQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IHQuZGF0YSkgPT09IHRyICYmIHJyID8gbnVsbCA6IGU7CgogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KGUsIG4pIDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgaWYgKGlyKSByZXR1cm4gImNvbXBvc2l0aW9uZW5kIiA9PT0gZSB8fCAhWG4gJiYgYXIoZSwgdCkgPyAoZSA9IFduKCksIFVuID0gRm4gPSBMbiA9IG51bGwsIAogICAgICAgICAgICAgICAgaXIgPSAhMSwgZSkgOiBudWxsOwogICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgInBhc3RlIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgICAgICAgIGNhc2UgImtleXByZXNzIjoKICAgICAgICAgICAgICAgICAgICBpZiAoISh0LmN0cmxLZXkgfHwgdC5hbHRLZXkgfHwgdC5tZXRhS2V5KSB8fCB0LmN0cmxLZXkgJiYgdC5hbHRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuY2hhciAmJiAxIDwgdC5jaGFyLmxlbmd0aCkgcmV0dXJuIHQuY2hhcjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQud2hpY2gpIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHQud2hpY2gpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgICAgICAgIGNhc2UgImNvbXBvc2l0aW9uZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXIgJiYgImtvIiAhPT0gdC5sb2NhbGUgPyBudWxsIDogdC5kYXRhOwoKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfShlLCBuKSkgPyAoKHQgPSBLbi5nZXRQb29sZWQobnIuYmVmb3JlSW5wdXQsIHQsIG4sIHIpKS5kYXRhID0gZSwgem4odCkpIDogdCA9IG51bGwsIAogICAgICAgICAgICBudWxsID09PSBhID8gdCA6IG51bGwgPT09IHQgPyBhIDogWyBhLCB0IF07CiAgICAgICAgfQogICAgfSwgdXIgPSB7CiAgICAgICAgY29sb3I6ICEwLAogICAgICAgIGRhdGU6ICEwLAogICAgICAgIGRhdGV0aW1lOiAhMCwKICAgICAgICAiZGF0ZXRpbWUtbG9jYWwiOiAhMCwKICAgICAgICBlbWFpbDogITAsCiAgICAgICAgbW9udGg6ICEwLAogICAgICAgIG51bWJlcjogITAsCiAgICAgICAgcGFzc3dvcmQ6ICEwLAogICAgICAgIHJhbmdlOiAhMCwKICAgICAgICBzZWFyY2g6ICEwLAogICAgICAgIHRlbDogITAsCiAgICAgICAgdGV4dDogITAsCiAgICAgICAgdGltZTogITAsCiAgICAgICAgdXJsOiAhMCwKICAgICAgICB3ZWVrOiAhMAogICAgfTsKICAgIGZ1bmN0aW9uIGNyKGUpIHsKICAgICAgICB2YXIgdCA9IGUgJiYgZS5ub2RlTmFtZSAmJiBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgcmV0dXJuICJpbnB1dCIgPT09IHQgPyAhIXVyW2UudHlwZV0gOiAidGV4dGFyZWEiID09PSB0OwogICAgfQogICAgdmFyIHNyID0gewogICAgICAgIGNoYW5nZTogewogICAgICAgICAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczogewogICAgICAgICAgICAgICAgYnViYmxlZDogIm9uQ2hhbmdlIiwKICAgICAgICAgICAgICAgIGNhcHR1cmVkOiAib25DaGFuZ2VDYXB0dXJlIgogICAgICAgICAgICB9LAogICAgICAgICAgICBkZXBlbmRlbmNpZXM6ICJibHVyIGNoYW5nZSBjbGljayBmb2N1cyBpbnB1dCBrZXlkb3duIGtleXVwIHNlbGVjdGlvbmNoYW5nZSIuc3BsaXQoIiAiKQogICAgICAgIH0KICAgIH07CiAgICBmdW5jdGlvbiBmcihlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIChlID0gcW4uZ2V0UG9vbGVkKHNyLmNoYW5nZSwgZSwgdCwgbikpLnR5cGUgPSAiY2hhbmdlIiwgTihuKSwgem4oZSksIGU7CiAgICB9CiAgICB2YXIgZHIgPSBudWxsLCBwciA9IG51bGw7CiAgICBmdW5jdGlvbiBncihlKSB7CiAgICAgICAgbHQoZSk7CiAgICB9CiAgICBmdW5jdGlvbiBocihlKSB7CiAgICAgICAgaWYgKGtlKF9uKGUpKSkgcmV0dXJuIGU7CiAgICB9CiAgICBmdW5jdGlvbiBtcihlLCB0KSB7CiAgICAgICAgaWYgKCJjaGFuZ2UiID09PSBlKSByZXR1cm4gdDsKICAgIH0KICAgIHZhciBiciA9ICExOwogICAgZnVuY3Rpb24gdnIoKSB7CiAgICAgICAgZHIgJiYgKGRyLmRldGFjaEV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIiwgeXIpLCBwciA9IGRyID0gbnVsbCk7CiAgICB9CiAgICBmdW5jdGlvbiB5cihlKSB7CiAgICAgICAgaWYgKCJ2YWx1ZSIgPT09IGUucHJvcGVydHlOYW1lICYmIGhyKHByKSkgaWYgKGUgPSBmcihwciwgZSwgdXQoZSkpLCBMKSBsdChlKTsgZWxzZSB7CiAgICAgICAgICAgIEwgPSAhMDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEQoZ3IsIGUpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgTCA9ICExLCBVKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiB3cihlLCB0LCBuKSB7CiAgICAgICAgImZvY3VzIiA9PT0gZSA/ICh2cigpLCBwciA9IG4sIChkciA9IHQpLmF0dGFjaEV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIiwgeXIpKSA6ICJibHVyIiA9PT0gZSAmJiB2cigpOwogICAgfQogICAgZnVuY3Rpb24ga3IoZSkgewogICAgICAgIGlmICgic2VsZWN0aW9uY2hhbmdlIiA9PT0gZSB8fCAia2V5dXAiID09PSBlIHx8ICJrZXlkb3duIiA9PT0gZSkgcmV0dXJuIGhyKHByKTsKICAgIH0KICAgIGZ1bmN0aW9uIHhyKGUsIHQpIHsKICAgICAgICBpZiAoImNsaWNrIiA9PT0gZSkgcmV0dXJuIGhyKHQpOwogICAgfQogICAgZnVuY3Rpb24gRXIoZSwgdCkgewogICAgICAgIGlmICgiaW5wdXQiID09PSBlIHx8ICJjaGFuZ2UiID09PSBlKSByZXR1cm4gaHIodCk7CiAgICB9CiAgICBUICYmIChiciA9IGN0KCJpbnB1dCIpICYmICghZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHx8IDkgPCBkb2N1bWVudC5kb2N1bWVudE1vZGUpKTsKICAgIHZhciBTciA9IHsKICAgICAgICBldmVudFR5cGVzOiBzciwKICAgICAgICBfaXNJbnB1dEV2ZW50U3VwcG9ydGVkOiBiciwKICAgICAgICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgIHZhciBhID0gdCA/IF9uKHQpIDogd2luZG93LCBvID0gYS5ub2RlTmFtZSAmJiBhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmICgic2VsZWN0IiA9PT0gbyB8fCAiaW5wdXQiID09PSBvICYmICJmaWxlIiA9PT0gYS50eXBlKSB2YXIgaSA9IG1yOyBlbHNlIGlmIChjcihhKSkgaWYgKGJyKSBpID0gRXI7IGVsc2UgewogICAgICAgICAgICAgICAgaSA9IGtyOwogICAgICAgICAgICAgICAgdmFyIGwgPSB3cjsKICAgICAgICAgICAgfSBlbHNlIChvID0gYS5ub2RlTmFtZSkgJiYgImlucHV0IiA9PT0gby50b0xvd2VyQ2FzZSgpICYmICgiY2hlY2tib3giID09PSBhLnR5cGUgfHwgInJhZGlvIiA9PT0gYS50eXBlKSAmJiAoaSA9IHhyKTsKICAgICAgICAgICAgaWYgKGkgJiYgKGkgPSBpKGUsIHQpKSkgcmV0dXJuIGZyKGksIG4sIHIpOwogICAgICAgICAgICBsICYmIGwoZSwgYSwgdCksICJibHVyIiA9PT0gZSAmJiAoZSA9IGEuX3dyYXBwZXJTdGF0ZSkgJiYgZS5jb250cm9sbGVkICYmICJudW1iZXIiID09PSBhLnR5cGUgJiYgVGUoYSwgIm51bWJlciIsIGEudmFsdWUpOwogICAgICAgIH0KICAgIH0sIE9yID0gcW4uZXh0ZW5kKHsKICAgICAgICB2aWV3OiBudWxsLAogICAgICAgIGRldGFpbDogbnVsbAogICAgfSksIENyID0gewogICAgICAgIEFsdDogImFsdEtleSIsCiAgICAgICAgQ29udHJvbDogImN0cmxLZXkiLAogICAgICAgIE1ldGE6ICJtZXRhS2V5IiwKICAgICAgICBTaGlmdDogInNoaWZ0S2V5IgogICAgfTsKICAgIGZ1bmN0aW9uIFRyKGUpIHsKICAgICAgICB2YXIgdCA9IHRoaXMubmF0aXZlRXZlbnQ7CiAgICAgICAgcmV0dXJuIHQuZ2V0TW9kaWZpZXJTdGF0ZSA/IHQuZ2V0TW9kaWZpZXJTdGF0ZShlKSA6ICEhKGUgPSBDcltlXSkgJiYgISF0W2VdOwogICAgfQogICAgZnVuY3Rpb24gUHIoKSB7CiAgICAgICAgcmV0dXJuIFRyOwogICAgfQogICAgdmFyIF9yID0gMCwganIgPSAwLCBJciA9ICExLCBOciA9ICExLCBBciA9IE9yLmV4dGVuZCh7CiAgICAgICAgc2NyZWVuWDogbnVsbCwKICAgICAgICBzY3JlZW5ZOiBudWxsLAogICAgICAgIGNsaWVudFg6IG51bGwsCiAgICAgICAgY2xpZW50WTogbnVsbCwKICAgICAgICBwYWdlWDogbnVsbCwKICAgICAgICBwYWdlWTogbnVsbCwKICAgICAgICBjdHJsS2V5OiBudWxsLAogICAgICAgIHNoaWZ0S2V5OiBudWxsLAogICAgICAgIGFsdEtleTogbnVsbCwKICAgICAgICBtZXRhS2V5OiBudWxsLAogICAgICAgIGdldE1vZGlmaWVyU3RhdGU6IFByLAogICAgICAgIGJ1dHRvbjogbnVsbCwKICAgICAgICBidXR0b25zOiBudWxsLAogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUucmVsYXRlZFRhcmdldCB8fCAoZS5mcm9tRWxlbWVudCA9PT0gZS5zcmNFbGVtZW50ID8gZS50b0VsZW1lbnQgOiBlLmZyb21FbGVtZW50KTsKICAgICAgICB9LAogICAgICAgIG1vdmVtZW50WDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoIm1vdmVtZW50WCIgaW4gZSkgcmV0dXJuIGUubW92ZW1lbnRYOwogICAgICAgICAgICB2YXIgdCA9IF9yOwogICAgICAgICAgICByZXR1cm4gX3IgPSBlLnNjcmVlblgsIElyID8gIm1vdXNlbW92ZSIgPT09IGUudHlwZSA/IGUuc2NyZWVuWCAtIHQgOiAwIDogKElyID0gITAsIAogICAgICAgICAgICAwKTsKICAgICAgICB9LAogICAgICAgIG1vdmVtZW50WTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoIm1vdmVtZW50WSIgaW4gZSkgcmV0dXJuIGUubW92ZW1lbnRZOwogICAgICAgICAgICB2YXIgdCA9IGpyOwogICAgICAgICAgICByZXR1cm4ganIgPSBlLnNjcmVlblksIE5yID8gIm1vdXNlbW92ZSIgPT09IGUudHlwZSA/IGUuc2NyZWVuWSAtIHQgOiAwIDogKE5yID0gITAsIAogICAgICAgICAgICAwKTsKICAgICAgICB9CiAgICB9KSwgRHIgPSBBci5leHRlbmQoewogICAgICAgIHBvaW50ZXJJZDogbnVsbCwKICAgICAgICB3aWR0aDogbnVsbCwKICAgICAgICBoZWlnaHQ6IG51bGwsCiAgICAgICAgcHJlc3N1cmU6IG51bGwsCiAgICAgICAgdGFuZ2VudGlhbFByZXNzdXJlOiBudWxsLAogICAgICAgIHRpbHRYOiBudWxsLAogICAgICAgIHRpbHRZOiBudWxsLAogICAgICAgIHR3aXN0OiBudWxsLAogICAgICAgIHBvaW50ZXJUeXBlOiBudWxsLAogICAgICAgIGlzUHJpbWFyeTogbnVsbAogICAgfSksIFJyID0gewogICAgICAgIG1vdXNlRW50ZXI6IHsKICAgICAgICAgICAgcmVnaXN0cmF0aW9uTmFtZTogIm9uTW91c2VFbnRlciIsCiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyAibW91c2VvdXQiLCAibW91c2VvdmVyIiBdCiAgICAgICAgfSwKICAgICAgICBtb3VzZUxlYXZlOiB7CiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbk5hbWU6ICJvbk1vdXNlTGVhdmUiLAogICAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsgIm1vdXNlb3V0IiwgIm1vdXNlb3ZlciIgXQogICAgICAgIH0sCiAgICAgICAgcG9pbnRlckVudGVyOiB7CiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbk5hbWU6ICJvblBvaW50ZXJFbnRlciIsCiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyAicG9pbnRlcm91dCIsICJwb2ludGVyb3ZlciIgXQogICAgICAgIH0sCiAgICAgICAgcG9pbnRlckxlYXZlOiB7CiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbk5hbWU6ICJvblBvaW50ZXJMZWF2ZSIsCiAgICAgICAgICAgIGRlcGVuZGVuY2llczogWyAicG9pbnRlcm91dCIsICJwb2ludGVyb3ZlciIgXQogICAgICAgIH0KICAgIH0sIE1yID0gewogICAgICAgIGV2ZW50VHlwZXM6IFJyLAogICAgICAgIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIGEpIHsKICAgICAgICAgICAgdmFyIG8gPSAibW91c2VvdmVyIiA9PT0gZSB8fCAicG9pbnRlcm92ZXIiID09PSBlLCBpID0gIm1vdXNlb3V0IiA9PT0gZSB8fCAicG9pbnRlcm91dCIgPT09IGU7CiAgICAgICAgICAgIGlmIChvICYmIDAgPT0gKDMyICYgYSkgJiYgKG4ucmVsYXRlZFRhcmdldCB8fCBuLmZyb21FbGVtZW50KSB8fCAhaSAmJiAhbykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIChvID0gci53aW5kb3cgPT09IHIgPyByIDogKG8gPSByLm93bmVyRG9jdW1lbnQpID8gby5kZWZhdWx0VmlldyB8fCBvLnBhcmVudFdpbmRvdyA6IHdpbmRvdywgCiAgICAgICAgICAgIGkpID8gKGkgPSB0LCBudWxsICE9PSAodCA9ICh0ID0gbi5yZWxhdGVkVGFyZ2V0IHx8IG4udG9FbGVtZW50KSA/IFRuKHQpIDogbnVsbCkgJiYgKHQgIT09IEplKHQpIHx8IDUgIT09IHQudGFnICYmIDYgIT09IHQudGFnKSAmJiAodCA9IG51bGwpKSA6IGkgPSBudWxsOwogICAgICAgICAgICBpZiAoaSA9PT0gdCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGlmICgibW91c2VvdXQiID09PSBlIHx8ICJtb3VzZW92ZXIiID09PSBlKSB2YXIgbCA9IEFyLCB1ID0gUnIubW91c2VMZWF2ZSwgYyA9IFJyLm1vdXNlRW50ZXIsIHMgPSAibW91c2UiOyBlbHNlICJwb2ludGVyb3V0IiAhPT0gZSAmJiAicG9pbnRlcm92ZXIiICE9PSBlIHx8IChsID0gRHIsIAogICAgICAgICAgICB1ID0gUnIucG9pbnRlckxlYXZlLCBjID0gUnIucG9pbnRlckVudGVyLCBzID0gInBvaW50ZXIiKTsKICAgICAgICAgICAgaWYgKGUgPSBudWxsID09IGkgPyBvIDogX24oaSksIG8gPSBudWxsID09IHQgPyBvIDogX24odCksICh1ID0gbC5nZXRQb29sZWQodSwgaSwgbiwgcikpLnR5cGUgPSBzICsgImxlYXZlIiwgCiAgICAgICAgICAgIHUudGFyZ2V0ID0gZSwgdS5yZWxhdGVkVGFyZ2V0ID0gbywgKG4gPSBsLmdldFBvb2xlZChjLCB0LCBuLCByKSkudHlwZSA9IHMgKyAiZW50ZXIiLCAKICAgICAgICAgICAgbi50YXJnZXQgPSBvLCBuLnJlbGF0ZWRUYXJnZXQgPSBlLCBzID0gdCwgKHIgPSBpKSAmJiBzKSBlOiB7CiAgICAgICAgICAgICAgICBmb3IgKGMgPSBzLCBpID0gMCwgZSA9IGwgPSByOyBlOyBlID0gSW4oZSkpIGkrKzsKICAgICAgICAgICAgICAgIGZvciAoZSA9IDAsIHQgPSBjOyB0OyB0ID0gSW4odCkpIGUrKzsKICAgICAgICAgICAgICAgIGZvciAoOzAgPCBpIC0gZTsgKSBsID0gSW4obCksIGktLTsKICAgICAgICAgICAgICAgIGZvciAoOzAgPCBlIC0gaTsgKSBjID0gSW4oYyksIGUtLTsKICAgICAgICAgICAgICAgIGZvciAoO2ktLTsgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGwgPT09IGMgfHwgbCA9PT0gYy5hbHRlcm5hdGUpIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgbCA9IEluKGwpLCBjID0gSW4oYyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsID0gbnVsbDsKICAgICAgICAgICAgfSBlbHNlIGwgPSBudWxsOwogICAgICAgICAgICBmb3IgKGMgPSBsLCBsID0gW107IHIgJiYgciAhPT0gYyAmJiAobnVsbCA9PT0gKGkgPSByLmFsdGVybmF0ZSkgfHwgaSAhPT0gYyk7ICkgbC5wdXNoKHIpLCAKICAgICAgICAgICAgciA9IEluKHIpOwogICAgICAgICAgICBmb3IgKHIgPSBbXTsgcyAmJiBzICE9PSBjICYmIChudWxsID09PSAoaSA9IHMuYWx0ZXJuYXRlKSB8fCBpICE9PSBjKTsgKSByLnB1c2gocyksIAogICAgICAgICAgICBzID0gSW4ocyk7CiAgICAgICAgICAgIGZvciAocyA9IDA7IHMgPCBsLmxlbmd0aDsgcysrKSBSbihsW3NdLCAiYnViYmxlZCIsIHUpOwogICAgICAgICAgICBmb3IgKHMgPSByLmxlbmd0aDsgMCA8IHMtLTsgKSBSbihyW3NdLCAiY2FwdHVyZWQiLCBuKTsKICAgICAgICAgICAgcmV0dXJuIDAgPT0gKDY0ICYgYSkgPyBbIHUgXSA6IFsgdSwgbiBdOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgenIgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBPYmplY3QuaXMgPyBPYmplY3QuaXMgOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIGUgPT09IHQgJiYgKDAgIT09IGUgfHwgMSAvIGUgPT0gMSAvIHQpIHx8IGUgIT0gZSAmJiB0ICE9IHQ7CiAgICB9LCBMciA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CiAgICBmdW5jdGlvbiBGcihlLCB0KSB7CiAgICAgICAgaWYgKHpyKGUsIHQpKSByZXR1cm4gITA7CiAgICAgICAgaWYgKCJvYmplY3QiICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IGUgfHwgIm9iamVjdCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExOwogICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMoZSksIHIgPSBPYmplY3Qua2V5cyh0KTsKICAgICAgICBpZiAobi5sZW5ndGggIT09IHIubGVuZ3RoKSByZXR1cm4gITE7CiAgICAgICAgZm9yIChyID0gMDsgciA8IG4ubGVuZ3RoOyByKyspIGlmICghTHIuY2FsbCh0LCBuW3JdKSB8fCAhenIoZVtuW3JdXSwgdFtuW3JdXSkpIHJldHVybiAhMTsKICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgICB2YXIgVXIgPSBUICYmICJkb2N1bWVudE1vZGUiIGluIGRvY3VtZW50ICYmIDExID49IGRvY3VtZW50LmRvY3VtZW50TW9kZSwgV3IgPSB7CiAgICAgICAgc2VsZWN0OiB7CiAgICAgICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7CiAgICAgICAgICAgICAgICBidWJibGVkOiAib25TZWxlY3QiLAogICAgICAgICAgICAgICAgY2FwdHVyZWQ6ICJvblNlbGVjdENhcHR1cmUiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlcGVuZGVuY2llczogImJsdXIgY29udGV4dG1lbnUgZHJhZ2VuZCBmb2N1cyBrZXlkb3duIGtleXVwIG1vdXNlZG93biBtb3VzZXVwIHNlbGVjdGlvbmNoYW5nZSIuc3BsaXQoIiAiKQogICAgICAgIH0KICAgIH0sIFZyID0gbnVsbCwgJHIgPSBudWxsLCBxciA9IG51bGwsIEJyID0gITE7CiAgICBmdW5jdGlvbiBIcihlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0LndpbmRvdyA9PT0gdCA/IHQuZG9jdW1lbnQgOiA5ID09PSB0Lm5vZGVUeXBlID8gdCA6IHQub3duZXJEb2N1bWVudDsKICAgICAgICByZXR1cm4gQnIgfHwgbnVsbCA9PSBWciB8fCBWciAhPT0gc24obikgPyBudWxsIDogKCJzZWxlY3Rpb25TdGFydCIgaW4gKG4gPSBWcikgJiYgZ24obikgPyBuID0gewogICAgICAgICAgICBzdGFydDogbi5zZWxlY3Rpb25TdGFydCwKICAgICAgICAgICAgZW5kOiBuLnNlbGVjdGlvbkVuZAogICAgICAgIH0gOiBuID0gewogICAgICAgICAgICBhbmNob3JOb2RlOiAobiA9IChuLm93bmVyRG9jdW1lbnQgJiYgbi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IHdpbmRvdykuZ2V0U2VsZWN0aW9uKCkpLmFuY2hvck5vZGUsCiAgICAgICAgICAgIGFuY2hvck9mZnNldDogbi5hbmNob3JPZmZzZXQsCiAgICAgICAgICAgIGZvY3VzTm9kZTogbi5mb2N1c05vZGUsCiAgICAgICAgICAgIGZvY3VzT2Zmc2V0OiBuLmZvY3VzT2Zmc2V0CiAgICAgICAgfSwgcXIgJiYgRnIocXIsIG4pID8gbnVsbCA6IChxciA9IG4sIChlID0gcW4uZ2V0UG9vbGVkKFdyLnNlbGVjdCwgJHIsIGUsIHQpKS50eXBlID0gInNlbGVjdCIsIAogICAgICAgIGUudGFyZ2V0ID0gVnIsIHpuKGUpLCBlKSk7CiAgICB9CiAgICB2YXIgUXIgPSB7CiAgICAgICAgZXZlbnRUeXBlczogV3IsCiAgICAgICAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24oZSwgdCwgbiwgciwgYSwgbykgewogICAgICAgICAgICBpZiAoIShvID0gIShhID0gbyB8fCAoci53aW5kb3cgPT09IHIgPyByLmRvY3VtZW50IDogOSA9PT0gci5ub2RlVHlwZSA/IHIgOiByLm93bmVyRG9jdW1lbnQpKSkpIHsKICAgICAgICAgICAgICAgIGU6IHsKICAgICAgICAgICAgICAgICAgICBhID0gWmUoYSksIG8gPSBPLm9uU2VsZWN0OwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgby5sZW5ndGg7IGkrKykgaWYgKCFhLmhhcyhvW2ldKSkgewogICAgICAgICAgICAgICAgICAgICAgICBhID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGEgPSAhMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG8gPSAhYTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHN3aXRjaCAoYSA9IHQgPyBfbih0KSA6IHdpbmRvdywgZSkgewogICAgICAgICAgICAgIGNhc2UgImZvY3VzIjoKICAgICAgICAgICAgICAgIChjcihhKSB8fCAidHJ1ZSIgPT09IGEuY29udGVudEVkaXRhYmxlKSAmJiAoVnIgPSBhLCAkciA9IHQsIHFyID0gbnVsbCk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiYmx1ciI6CiAgICAgICAgICAgICAgICBxciA9ICRyID0gVnIgPSBudWxsOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgIm1vdXNlZG93biI6CiAgICAgICAgICAgICAgICBCciA9ICEwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgImNvbnRleHRtZW51IjoKICAgICAgICAgICAgICBjYXNlICJtb3VzZXVwIjoKICAgICAgICAgICAgICBjYXNlICJkcmFnZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBCciA9ICExLCBIcihuLCByKTsKCiAgICAgICAgICAgICAgY2FzZSAic2VsZWN0aW9uY2hhbmdlIjoKICAgICAgICAgICAgICAgIGlmIChVcikgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgImtleWRvd24iOgogICAgICAgICAgICAgIGNhc2UgImtleXVwIjoKICAgICAgICAgICAgICAgIHJldHVybiBIcihuLCByKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9LCBHciA9IHFuLmV4dGVuZCh7CiAgICAgICAgYW5pbWF0aW9uTmFtZTogbnVsbCwKICAgICAgICBlbGFwc2VkVGltZTogbnVsbCwKICAgICAgICBwc2V1ZG9FbGVtZW50OiBudWxsCiAgICB9KSwgS3IgPSBxbi5leHRlbmQoewogICAgICAgIGNsaXBib2FyZERhdGE6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICJjbGlwYm9hcmREYXRhIiBpbiBlID8gZS5jbGlwYm9hcmREYXRhIDogd2luZG93LmNsaXBib2FyZERhdGE7CiAgICAgICAgfQogICAgfSksIFlyID0gT3IuZXh0ZW5kKHsKICAgICAgICByZWxhdGVkVGFyZ2V0OiBudWxsCiAgICB9KTsKICAgIGZ1bmN0aW9uIFhyKGUpIHsKICAgICAgICB2YXIgdCA9IGUua2V5Q29kZTsKICAgICAgICByZXR1cm4gImNoYXJDb2RlIiBpbiBlID8gMCA9PT0gKGUgPSBlLmNoYXJDb2RlKSAmJiAxMyA9PT0gdCAmJiAoZSA9IDEzKSA6IGUgPSB0LCAKICAgICAgICAxMCA9PT0gZSAmJiAoZSA9IDEzKSwgMzIgPD0gZSB8fCAxMyA9PT0gZSA/IGUgOiAwOwogICAgfQogICAgdmFyIFpyID0gewogICAgICAgIEVzYzogIkVzY2FwZSIsCiAgICAgICAgU3BhY2ViYXI6ICIgIiwKICAgICAgICBMZWZ0OiAiQXJyb3dMZWZ0IiwKICAgICAgICBVcDogIkFycm93VXAiLAogICAgICAgIFJpZ2h0OiAiQXJyb3dSaWdodCIsCiAgICAgICAgRG93bjogIkFycm93RG93biIsCiAgICAgICAgRGVsOiAiRGVsZXRlIiwKICAgICAgICBXaW46ICJPUyIsCiAgICAgICAgTWVudTogIkNvbnRleHRNZW51IiwKICAgICAgICBBcHBzOiAiQ29udGV4dE1lbnUiLAogICAgICAgIFNjcm9sbDogIlNjcm9sbExvY2siLAogICAgICAgIE1velByaW50YWJsZUtleTogIlVuaWRlbnRpZmllZCIKICAgIH0sIEpyID0gewogICAgICAgIDg6ICJCYWNrc3BhY2UiLAogICAgICAgIDk6ICJUYWIiLAogICAgICAgIDEyOiAiQ2xlYXIiLAogICAgICAgIDEzOiAiRW50ZXIiLAogICAgICAgIDE2OiAiU2hpZnQiLAogICAgICAgIDE3OiAiQ29udHJvbCIsCiAgICAgICAgMTg6ICJBbHQiLAogICAgICAgIDE5OiAiUGF1c2UiLAogICAgICAgIDIwOiAiQ2Fwc0xvY2siLAogICAgICAgIDI3OiAiRXNjYXBlIiwKICAgICAgICAzMjogIiAiLAogICAgICAgIDMzOiAiUGFnZVVwIiwKICAgICAgICAzNDogIlBhZ2VEb3duIiwKICAgICAgICAzNTogIkVuZCIsCiAgICAgICAgMzY6ICJIb21lIiwKICAgICAgICAzNzogIkFycm93TGVmdCIsCiAgICAgICAgMzg6ICJBcnJvd1VwIiwKICAgICAgICAzOTogIkFycm93UmlnaHQiLAogICAgICAgIDQwOiAiQXJyb3dEb3duIiwKICAgICAgICA0NTogIkluc2VydCIsCiAgICAgICAgNDY6ICJEZWxldGUiLAogICAgICAgIDExMjogIkYxIiwKICAgICAgICAxMTM6ICJGMiIsCiAgICAgICAgMTE0OiAiRjMiLAogICAgICAgIDExNTogIkY0IiwKICAgICAgICAxMTY6ICJGNSIsCiAgICAgICAgMTE3OiAiRjYiLAogICAgICAgIDExODogIkY3IiwKICAgICAgICAxMTk6ICJGOCIsCiAgICAgICAgMTIwOiAiRjkiLAogICAgICAgIDEyMTogIkYxMCIsCiAgICAgICAgMTIyOiAiRjExIiwKICAgICAgICAxMjM6ICJGMTIiLAogICAgICAgIDE0NDogIk51bUxvY2siLAogICAgICAgIDE0NTogIlNjcm9sbExvY2siLAogICAgICAgIDIyNDogIk1ldGEiCiAgICB9LCBlYSA9IE9yLmV4dGVuZCh7CiAgICAgICAga2V5OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlLmtleSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBacltlLmtleV0gfHwgZS5rZXk7CiAgICAgICAgICAgICAgICBpZiAoIlVuaWRlbnRpZmllZCIgIT09IHQpIHJldHVybiB0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAia2V5cHJlc3MiID09PSBlLnR5cGUgPyAxMyA9PT0gKGUgPSBYcihlKSkgPyAiRW50ZXIiIDogU3RyaW5nLmZyb21DaGFyQ29kZShlKSA6ICJrZXlkb3duIiA9PT0gZS50eXBlIHx8ICJrZXl1cCIgPT09IGUudHlwZSA/IEpyW2Uua2V5Q29kZV0gfHwgIlVuaWRlbnRpZmllZCIgOiAiIjsKICAgICAgICB9LAogICAgICAgIGxvY2F0aW9uOiBudWxsLAogICAgICAgIGN0cmxLZXk6IG51bGwsCiAgICAgICAgc2hpZnRLZXk6IG51bGwsCiAgICAgICAgYWx0S2V5OiBudWxsLAogICAgICAgIG1ldGFLZXk6IG51bGwsCiAgICAgICAgcmVwZWF0OiBudWxsLAogICAgICAgIGxvY2FsZTogbnVsbCwKICAgICAgICBnZXRNb2RpZmllclN0YXRlOiBQciwKICAgICAgICBjaGFyQ29kZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gImtleXByZXNzIiA9PT0gZS50eXBlID8gWHIoZSkgOiAwOwogICAgICAgIH0sCiAgICAgICAga2V5Q29kZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gImtleWRvd24iID09PSBlLnR5cGUgfHwgImtleXVwIiA9PT0gZS50eXBlID8gZS5rZXlDb2RlIDogMDsKICAgICAgICB9LAogICAgICAgIHdoaWNoOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAia2V5cHJlc3MiID09PSBlLnR5cGUgPyBYcihlKSA6ICJrZXlkb3duIiA9PT0gZS50eXBlIHx8ICJrZXl1cCIgPT09IGUudHlwZSA/IGUua2V5Q29kZSA6IDA7CiAgICAgICAgfQogICAgfSksIHRhID0gQXIuZXh0ZW5kKHsKICAgICAgICBkYXRhVHJhbnNmZXI6IG51bGwKICAgIH0pLCBuYSA9IE9yLmV4dGVuZCh7CiAgICAgICAgdG91Y2hlczogbnVsbCwKICAgICAgICB0YXJnZXRUb3VjaGVzOiBudWxsLAogICAgICAgIGNoYW5nZWRUb3VjaGVzOiBudWxsLAogICAgICAgIGFsdEtleTogbnVsbCwKICAgICAgICBtZXRhS2V5OiBudWxsLAogICAgICAgIGN0cmxLZXk6IG51bGwsCiAgICAgICAgc2hpZnRLZXk6IG51bGwsCiAgICAgICAgZ2V0TW9kaWZpZXJTdGF0ZTogUHIKICAgIH0pLCByYSA9IHFuLmV4dGVuZCh7CiAgICAgICAgcHJvcGVydHlOYW1lOiBudWxsLAogICAgICAgIGVsYXBzZWRUaW1lOiBudWxsLAogICAgICAgIHBzZXVkb0VsZW1lbnQ6IG51bGwKICAgIH0pLCBhYSA9IEFyLmV4dGVuZCh7CiAgICAgICAgZGVsdGFYOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAiZGVsdGFYIiBpbiBlID8gZS5kZWx0YVggOiAid2hlZWxEZWx0YVgiIGluIGUgPyAtZS53aGVlbERlbHRhWCA6IDA7CiAgICAgICAgfSwKICAgICAgICBkZWx0YVk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICJkZWx0YVkiIGluIGUgPyBlLmRlbHRhWSA6ICJ3aGVlbERlbHRhWSIgaW4gZSA/IC1lLndoZWVsRGVsdGFZIDogIndoZWVsRGVsdGEiIGluIGUgPyAtZS53aGVlbERlbHRhIDogMDsKICAgICAgICB9LAogICAgICAgIGRlbHRhWjogbnVsbCwKICAgICAgICBkZWx0YU1vZGU6IG51bGwKICAgIH0pLCBvYSA9IHsKICAgICAgICBldmVudFR5cGVzOiB6dCwKICAgICAgICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgICAgIHZhciBhID0gTHQuZ2V0KGUpOwogICAgICAgICAgICBpZiAoIWEpIHJldHVybiBudWxsOwogICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICBjYXNlICJrZXlwcmVzcyI6CiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gWHIobikpIHJldHVybiBudWxsOwoKICAgICAgICAgICAgICBjYXNlICJrZXlkb3duIjoKICAgICAgICAgICAgICBjYXNlICJrZXl1cCI6CiAgICAgICAgICAgICAgICBlID0gZWE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAiYmx1ciI6CiAgICAgICAgICAgICAgY2FzZSAiZm9jdXMiOgogICAgICAgICAgICAgICAgZSA9IFlyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgImNsaWNrIjoKICAgICAgICAgICAgICAgIGlmICgyID09PSBuLmJ1dHRvbikgcmV0dXJuIG51bGw7CgogICAgICAgICAgICAgIGNhc2UgImF1eGNsaWNrIjoKICAgICAgICAgICAgICBjYXNlICJkYmxjbGljayI6CiAgICAgICAgICAgICAgY2FzZSAibW91c2Vkb3duIjoKICAgICAgICAgICAgICBjYXNlICJtb3VzZW1vdmUiOgogICAgICAgICAgICAgIGNhc2UgIm1vdXNldXAiOgogICAgICAgICAgICAgIGNhc2UgIm1vdXNlb3V0IjoKICAgICAgICAgICAgICBjYXNlICJtb3VzZW92ZXIiOgogICAgICAgICAgICAgIGNhc2UgImNvbnRleHRtZW51IjoKICAgICAgICAgICAgICAgIGUgPSBBcjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlICJkcmFnIjoKICAgICAgICAgICAgICBjYXNlICJkcmFnZW5kIjoKICAgICAgICAgICAgICBjYXNlICJkcmFnZW50ZXIiOgogICAgICAgICAgICAgIGNhc2UgImRyYWdleGl0IjoKICAgICAgICAgICAgICBjYXNlICJkcmFnbGVhdmUiOgogICAgICAgICAgICAgIGNhc2UgImRyYWdvdmVyIjoKICAgICAgICAgICAgICBjYXNlICJkcmFnc3RhcnQiOgogICAgICAgICAgICAgIGNhc2UgImRyb3AiOgogICAgICAgICAgICAgICAgZSA9IHRhOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgInRvdWNoY2FuY2VsIjoKICAgICAgICAgICAgICBjYXNlICJ0b3VjaGVuZCI6CiAgICAgICAgICAgICAgY2FzZSAidG91Y2htb3ZlIjoKICAgICAgICAgICAgICBjYXNlICJ0b3VjaHN0YXJ0IjoKICAgICAgICAgICAgICAgIGUgPSBuYTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIEhlOgogICAgICAgICAgICAgIGNhc2UgUWU6CiAgICAgICAgICAgICAgY2FzZSBHZToKICAgICAgICAgICAgICAgIGUgPSBHcjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIEtlOgogICAgICAgICAgICAgICAgZSA9IHJhOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgInNjcm9sbCI6CiAgICAgICAgICAgICAgICBlID0gT3I7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAid2hlZWwiOgogICAgICAgICAgICAgICAgZSA9IGFhOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgImNvcHkiOgogICAgICAgICAgICAgIGNhc2UgImN1dCI6CiAgICAgICAgICAgICAgY2FzZSAicGFzdGUiOgogICAgICAgICAgICAgICAgZSA9IEtyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgImdvdHBvaW50ZXJjYXB0dXJlIjoKICAgICAgICAgICAgICBjYXNlICJsb3N0cG9pbnRlcmNhcHR1cmUiOgogICAgICAgICAgICAgIGNhc2UgInBvaW50ZXJjYW5jZWwiOgogICAgICAgICAgICAgIGNhc2UgInBvaW50ZXJkb3duIjoKICAgICAgICAgICAgICBjYXNlICJwb2ludGVybW92ZSI6CiAgICAgICAgICAgICAgY2FzZSAicG9pbnRlcm91dCI6CiAgICAgICAgICAgICAgY2FzZSAicG9pbnRlcm92ZXIiOgogICAgICAgICAgICAgIGNhc2UgInBvaW50ZXJ1cCI6CiAgICAgICAgICAgICAgICBlID0gRHI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIGUgPSBxbjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gem4odCA9IGUuZ2V0UG9vbGVkKGEsIHQsIG4sIHIpKSwgdDsKICAgICAgICB9CiAgICB9OwogICAgaWYgKHYpIHRocm93IEVycm9yKGkoMTAxKSk7CiAgICB2ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIlJlc3BvbmRlckV2ZW50UGx1Z2luIFNpbXBsZUV2ZW50UGx1Z2luIEVudGVyTGVhdmVFdmVudFBsdWdpbiBDaGFuZ2VFdmVudFBsdWdpbiBTZWxlY3RFdmVudFBsdWdpbiBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luIi5zcGxpdCgiICIpKSwgCiAgICB3KCksIGcgPSBqbiwgaCA9IFBuLCBtID0gX24sIEMoewogICAgICAgIFNpbXBsZUV2ZW50UGx1Z2luOiBvYSwKICAgICAgICBFbnRlckxlYXZlRXZlbnRQbHVnaW46IE1yLAogICAgICAgIENoYW5nZUV2ZW50UGx1Z2luOiBTciwKICAgICAgICBTZWxlY3RFdmVudFBsdWdpbjogUXIsCiAgICAgICAgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogbHIKICAgIH0pOwogICAgdmFyIGlhID0gW10sIGxhID0gLTE7CiAgICBmdW5jdGlvbiB1YShlKSB7CiAgICAgICAgMCA+IGxhIHx8IChlLmN1cnJlbnQgPSBpYVtsYV0sIGlhW2xhXSA9IG51bGwsIGxhLS0pOwogICAgfQogICAgZnVuY3Rpb24gY2EoZSwgdCkgewogICAgICAgIGxhKyssIGlhW2xhXSA9IGUuY3VycmVudCwgZS5jdXJyZW50ID0gdDsKICAgIH0KICAgIHZhciBzYSA9IHt9LCBmYSA9IHsKICAgICAgICBjdXJyZW50OiBzYQogICAgfSwgZGEgPSB7CiAgICAgICAgY3VycmVudDogITEKICAgIH0sIHBhID0gc2E7CiAgICBmdW5jdGlvbiBnYShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBlLnR5cGUuY29udGV4dFR5cGVzOwogICAgICAgIGlmICghbikgcmV0dXJuIHNhOwogICAgICAgIHZhciByID0gZS5zdGF0ZU5vZGU7CiAgICAgICAgaWYgKHIgJiYgci5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZFVubWFza2VkQ2hpbGRDb250ZXh0ID09PSB0KSByZXR1cm4gci5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1hc2tlZENoaWxkQ29udGV4dDsKICAgICAgICB2YXIgYSwgbyA9IHt9OwogICAgICAgIGZvciAoYSBpbiBuKSBvW2FdID0gdFthXTsKICAgICAgICByZXR1cm4gciAmJiAoKGUgPSBlLnN0YXRlTm9kZSkuX19yZWFjdEludGVybmFsTWVtb2l6ZWRVbm1hc2tlZENoaWxkQ29udGV4dCA9IHQsIAogICAgICAgIGUuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNYXNrZWRDaGlsZENvbnRleHQgPSBvKSwgbzsKICAgIH0KICAgIGZ1bmN0aW9uIGhhKGUpIHsKICAgICAgICByZXR1cm4gbnVsbCAhPSAoZSA9IGUuY2hpbGRDb250ZXh0VHlwZXMpOwogICAgfQogICAgZnVuY3Rpb24gbWEoKSB7CiAgICAgICAgdWEoZGEpLCB1YShmYSk7CiAgICB9CiAgICBmdW5jdGlvbiBiYShlLCB0LCBuKSB7CiAgICAgICAgaWYgKGZhLmN1cnJlbnQgIT09IHNhKSB0aHJvdyBFcnJvcihpKDE2OCkpOwogICAgICAgIGNhKGZhLCB0KSwgY2EoZGEsIG4pOwogICAgfQogICAgZnVuY3Rpb24gdmEoZSwgdCwgbikgewogICAgICAgIHZhciByID0gZS5zdGF0ZU5vZGU7CiAgICAgICAgaWYgKGUgPSB0LmNoaWxkQ29udGV4dFR5cGVzLCAiZnVuY3Rpb24iICE9IHR5cGVvZiByLmdldENoaWxkQ29udGV4dCkgcmV0dXJuIG47CiAgICAgICAgZm9yICh2YXIgbyBpbiByID0gci5nZXRDaGlsZENvbnRleHQoKSkgaWYgKCEobyBpbiBlKSkgdGhyb3cgRXJyb3IoaSgxMDgsIG1lKHQpIHx8ICJVbmtub3duIiwgbykpOwogICAgICAgIHJldHVybiBhKHt9LCBuLCB7fSwgcik7CiAgICB9CiAgICBmdW5jdGlvbiB5YShlKSB7CiAgICAgICAgcmV0dXJuIGUgPSAoZSA9IGUuc3RhdGVOb2RlKSAmJiBlLl9fcmVhY3RJbnRlcm5hbE1lbW9pemVkTWVyZ2VkQ2hpbGRDb250ZXh0IHx8IHNhLCAKICAgICAgICBwYSA9IGZhLmN1cnJlbnQsIGNhKGZhLCBlKSwgY2EoZGEsIGRhLmN1cnJlbnQpLCAhMDsKICAgIH0KICAgIGZ1bmN0aW9uIHdhKGUsIHQsIG4pIHsKICAgICAgICB2YXIgciA9IGUuc3RhdGVOb2RlOwogICAgICAgIGlmICghcikgdGhyb3cgRXJyb3IoaSgxNjkpKTsKICAgICAgICBuID8gKGUgPSB2YShlLCB0LCBwYSksIHIuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNZXJnZWRDaGlsZENvbnRleHQgPSBlLCB1YShkYSksIAogICAgICAgIHVhKGZhKSwgY2EoZmEsIGUpKSA6IHVhKGRhKSwgY2EoZGEsIG4pOwogICAgfQogICAgdmFyIGthID0gby51bnN0YWJsZV9ydW5XaXRoUHJpb3JpdHksIHhhID0gby51bnN0YWJsZV9zY2hlZHVsZUNhbGxiYWNrLCBFYSA9IG8udW5zdGFibGVfY2FuY2VsQ2FsbGJhY2ssIFNhID0gby51bnN0YWJsZV9yZXF1ZXN0UGFpbnQsIE9hID0gby51bnN0YWJsZV9ub3csIENhID0gby51bnN0YWJsZV9nZXRDdXJyZW50UHJpb3JpdHlMZXZlbCwgVGEgPSBvLnVuc3RhYmxlX0ltbWVkaWF0ZVByaW9yaXR5LCBQYSA9IG8udW5zdGFibGVfVXNlckJsb2NraW5nUHJpb3JpdHksIF9hID0gby51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eSwgamEgPSBvLnVuc3RhYmxlX0xvd1ByaW9yaXR5LCBJYSA9IG8udW5zdGFibGVfSWRsZVByaW9yaXR5LCBOYSA9IHt9LCBBYSA9IG8udW5zdGFibGVfc2hvdWxkWWllbGQsIERhID0gdm9pZCAwICE9PSBTYSA/IFNhIDogZnVuY3Rpb24oKSB7fSwgUmEgPSBudWxsLCBNYSA9IG51bGwsIHphID0gITEsIExhID0gT2EoKSwgRmEgPSAxZTQgPiBMYSA/IE9hIDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIE9hKCkgLSBMYTsKICAgIH07CiAgICBmdW5jdGlvbiBVYSgpIHsKICAgICAgICBzd2l0Y2ggKENhKCkpIHsKICAgICAgICAgIGNhc2UgVGE6CiAgICAgICAgICAgIHJldHVybiA5OTsKCiAgICAgICAgICBjYXNlIFBhOgogICAgICAgICAgICByZXR1cm4gOTg7CgogICAgICAgICAgY2FzZSBfYToKICAgICAgICAgICAgcmV0dXJuIDk3OwoKICAgICAgICAgIGNhc2UgamE6CiAgICAgICAgICAgIHJldHVybiA5NjsKCiAgICAgICAgICBjYXNlIElhOgogICAgICAgICAgICByZXR1cm4gOTU7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgRXJyb3IoaSgzMzIpKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBXYShlKSB7CiAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICBjYXNlIDk5OgogICAgICAgICAgICByZXR1cm4gVGE7CgogICAgICAgICAgY2FzZSA5ODoKICAgICAgICAgICAgcmV0dXJuIFBhOwoKICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgIHJldHVybiBfYTsKCiAgICAgICAgICBjYXNlIDk2OgogICAgICAgICAgICByZXR1cm4gamE7CgogICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgcmV0dXJuIElhOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IEVycm9yKGkoMzMyKSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gVmEoZSwgdCkgewogICAgICAgIHJldHVybiBlID0gV2EoZSksIGthKGUsIHQpOwogICAgfQogICAgZnVuY3Rpb24gJGEoZSwgdCwgbikgewogICAgICAgIHJldHVybiBlID0gV2EoZSksIHhhKGUsIHQsIG4pOwogICAgfQogICAgZnVuY3Rpb24gcWEoZSkgewogICAgICAgIHJldHVybiBudWxsID09PSBSYSA/IChSYSA9IFsgZSBdLCBNYSA9IHhhKFRhLCBIYSkpIDogUmEucHVzaChlKSwgTmE7CiAgICB9CiAgICBmdW5jdGlvbiBCYSgpIHsKICAgICAgICBpZiAobnVsbCAhPT0gTWEpIHsKICAgICAgICAgICAgdmFyIGUgPSBNYTsKICAgICAgICAgICAgTWEgPSBudWxsLCBFYShlKTsKICAgICAgICB9CiAgICAgICAgSGEoKTsKICAgIH0KICAgIGZ1bmN0aW9uIEhhKCkgewogICAgICAgIGlmICghemEgJiYgbnVsbCAhPT0gUmEpIHsKICAgICAgICAgICAgemEgPSAhMDsKICAgICAgICAgICAgdmFyIGUgPSAwOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBSYTsKICAgICAgICAgICAgICAgIFZhKDk5LCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICg7ZSA8IHQubGVuZ3RoOyBlKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0W2VdOwogICAgICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbighMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKG51bGwgIT09IG4pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKSwgUmEgPSBudWxsOwogICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBudWxsICE9PSBSYSAmJiAoUmEgPSBSYS5zbGljZShlICsgMSkpLCB4YShUYSwgQmEpLCB0OwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgemEgPSAhMTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIFFhKGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gMTA3Mzc0MTgyMSAtICgxICsgKCgxMDczNzQxODIxIC0gZSArIHQgLyAxMCkgLyAobiAvPSAxMCkgfCAwKSkgKiBuOwogICAgfQogICAgZnVuY3Rpb24gR2EoZSwgdCkgewogICAgICAgIGlmIChlICYmIGUuZGVmYXVsdFByb3BzKSBmb3IgKHZhciBuIGluIHQgPSBhKHt9LCB0KSwgZSA9IGUuZGVmYXVsdFByb3BzKSB2b2lkIDAgPT09IHRbbl0gJiYgKHRbbl0gPSBlW25dKTsKICAgICAgICByZXR1cm4gdDsKICAgIH0KICAgIHZhciBLYSA9IHsKICAgICAgICBjdXJyZW50OiBudWxsCiAgICB9LCBZYSA9IG51bGwsIFhhID0gbnVsbCwgWmEgPSBudWxsOwogICAgZnVuY3Rpb24gSmEoKSB7CiAgICAgICAgWmEgPSBYYSA9IFlhID0gbnVsbDsKICAgIH0KICAgIGZ1bmN0aW9uIGVvKGUpIHsKICAgICAgICB2YXIgdCA9IEthLmN1cnJlbnQ7CiAgICAgICAgdWEoS2EpLCBlLnR5cGUuX2NvbnRleHQuX2N1cnJlbnRWYWx1ZSA9IHQ7CiAgICB9CiAgICBmdW5jdGlvbiB0byhlLCB0KSB7CiAgICAgICAgZm9yICg7bnVsbCAhPT0gZTsgKSB7CiAgICAgICAgICAgIHZhciBuID0gZS5hbHRlcm5hdGU7CiAgICAgICAgICAgIGlmIChlLmNoaWxkRXhwaXJhdGlvblRpbWUgPCB0KSBlLmNoaWxkRXhwaXJhdGlvblRpbWUgPSB0LCBudWxsICE9PSBuICYmIG4uY2hpbGRFeHBpcmF0aW9uVGltZSA8IHQgJiYgKG4uY2hpbGRFeHBpcmF0aW9uVGltZSA9IHQpOyBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICghKG51bGwgIT09IG4gJiYgbi5jaGlsZEV4cGlyYXRpb25UaW1lIDwgdCkpIGJyZWFrOwogICAgICAgICAgICAgICAgbi5jaGlsZEV4cGlyYXRpb25UaW1lID0gdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlID0gZS5yZXR1cm47CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gbm8oZSwgdCkgewogICAgICAgIFlhID0gZSwgWmEgPSBYYSA9IG51bGwsIG51bGwgIT09IChlID0gZS5kZXBlbmRlbmNpZXMpICYmIG51bGwgIT09IGUuZmlyc3RDb250ZXh0ICYmIChlLmV4cGlyYXRpb25UaW1lID49IHQgJiYgKGppID0gITApLCAKICAgICAgICBlLmZpcnN0Q29udGV4dCA9IG51bGwpOwogICAgfQogICAgZnVuY3Rpb24gcm8oZSwgdCkgewogICAgICAgIGlmIChaYSAhPT0gZSAmJiAhMSAhPT0gdCAmJiAwICE9PSB0KSBpZiAoIm51bWJlciIgPT0gdHlwZW9mIHQgJiYgMTA3Mzc0MTgyMyAhPT0gdCB8fCAoWmEgPSBlLCAKICAgICAgICB0ID0gMTA3Mzc0MTgyMyksIHQgPSB7CiAgICAgICAgICAgIGNvbnRleHQ6IGUsCiAgICAgICAgICAgIG9ic2VydmVkQml0czogdCwKICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH0sIG51bGwgPT09IFhhKSB7CiAgICAgICAgICAgIGlmIChudWxsID09PSBZYSkgdGhyb3cgRXJyb3IoaSgzMDgpKTsKICAgICAgICAgICAgWGEgPSB0LCBZYS5kZXBlbmRlbmNpZXMgPSB7CiAgICAgICAgICAgICAgICBleHBpcmF0aW9uVGltZTogMCwKICAgICAgICAgICAgICAgIGZpcnN0Q29udGV4dDogdCwKICAgICAgICAgICAgICAgIHJlc3BvbmRlcnM6IG51bGwKICAgICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgWGEgPSBYYS5uZXh0ID0gdDsKICAgICAgICByZXR1cm4gZS5fY3VycmVudFZhbHVlOwogICAgfQogICAgdmFyIGFvID0gITE7CiAgICBmdW5jdGlvbiBvbyhlKSB7CiAgICAgICAgZS51cGRhdGVRdWV1ZSA9IHsKICAgICAgICAgICAgYmFzZVN0YXRlOiBlLm1lbW9pemVkU3RhdGUsCiAgICAgICAgICAgIGJhc2VRdWV1ZTogbnVsbCwKICAgICAgICAgICAgc2hhcmVkOiB7CiAgICAgICAgICAgICAgICBwZW5kaW5nOiBudWxsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVmZmVjdHM6IG51bGwKICAgICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gaW8oZSwgdCkgewogICAgICAgIGUgPSBlLnVwZGF0ZVF1ZXVlLCB0LnVwZGF0ZVF1ZXVlID09PSBlICYmICh0LnVwZGF0ZVF1ZXVlID0gewogICAgICAgICAgICBiYXNlU3RhdGU6IGUuYmFzZVN0YXRlLAogICAgICAgICAgICBiYXNlUXVldWU6IGUuYmFzZVF1ZXVlLAogICAgICAgICAgICBzaGFyZWQ6IGUuc2hhcmVkLAogICAgICAgICAgICBlZmZlY3RzOiBlLmVmZmVjdHMKICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGxvKGUsIHQpIHsKICAgICAgICByZXR1cm4gKGUgPSB7CiAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiBlLAogICAgICAgICAgICBzdXNwZW5zZUNvbmZpZzogdCwKICAgICAgICAgICAgdGFnOiAwLAogICAgICAgICAgICBwYXlsb2FkOiBudWxsLAogICAgICAgICAgICBjYWxsYmFjazogbnVsbCwKICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH0pLm5leHQgPSBlOwogICAgfQogICAgZnVuY3Rpb24gdW8oZSwgdCkgewogICAgICAgIGlmIChudWxsICE9PSAoZSA9IGUudXBkYXRlUXVldWUpKSB7CiAgICAgICAgICAgIHZhciBuID0gKGUgPSBlLnNoYXJlZCkucGVuZGluZzsKICAgICAgICAgICAgbnVsbCA9PT0gbiA/IHQubmV4dCA9IHQgOiAodC5uZXh0ID0gbi5uZXh0LCBuLm5leHQgPSB0KSwgZS5wZW5kaW5nID0gdDsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjbyhlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBlLmFsdGVybmF0ZTsKICAgICAgICBudWxsICE9PSBuICYmIGlvKG4sIGUpLCBudWxsID09PSAobiA9IChlID0gZS51cGRhdGVRdWV1ZSkuYmFzZVF1ZXVlKSA/IChlLmJhc2VRdWV1ZSA9IHQubmV4dCA9IHQsIAogICAgICAgIHQubmV4dCA9IHQpIDogKHQubmV4dCA9IG4ubmV4dCwgbi5uZXh0ID0gdCk7CiAgICB9CiAgICBmdW5jdGlvbiBzbyhlLCB0LCBuLCByKSB7CiAgICAgICAgdmFyIG8gPSBlLnVwZGF0ZVF1ZXVlOwogICAgICAgIGFvID0gITE7CiAgICAgICAgdmFyIGkgPSBvLmJhc2VRdWV1ZSwgbCA9IG8uc2hhcmVkLnBlbmRpbmc7CiAgICAgICAgaWYgKG51bGwgIT09IGwpIHsKICAgICAgICAgICAgaWYgKG51bGwgIT09IGkpIHsKICAgICAgICAgICAgICAgIHZhciB1ID0gaS5uZXh0OwogICAgICAgICAgICAgICAgaS5uZXh0ID0gbC5uZXh0LCBsLm5leHQgPSB1OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGkgPSBsLCBvLnNoYXJlZC5wZW5kaW5nID0gbnVsbCwgbnVsbCAhPT0gKHUgPSBlLmFsdGVybmF0ZSkgJiYgKG51bGwgIT09ICh1ID0gdS51cGRhdGVRdWV1ZSkgJiYgKHUuYmFzZVF1ZXVlID0gbCkpOwogICAgICAgIH0KICAgICAgICBpZiAobnVsbCAhPT0gaSkgewogICAgICAgICAgICB1ID0gaS5uZXh0OwogICAgICAgICAgICB2YXIgYyA9IG8uYmFzZVN0YXRlLCBzID0gMCwgZiA9IG51bGwsIGQgPSBudWxsLCBwID0gbnVsbDsKICAgICAgICAgICAgaWYgKG51bGwgIT09IHUpIGZvciAodmFyIGcgPSB1OyA7KSB7CiAgICAgICAgICAgICAgICBpZiAoKGwgPSBnLmV4cGlyYXRpb25UaW1lKSA8IHIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IGcuZXhwaXJhdGlvblRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlQ29uZmlnOiBnLnN1c3BlbnNlQ29uZmlnLAogICAgICAgICAgICAgICAgICAgICAgICB0YWc6IGcudGFnLAogICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBnLnBheWxvYWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBnLmNhbGxiYWNrLAogICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBudWxsID09PSBwID8gKGQgPSBwID0gaCwgZiA9IGMpIDogcCA9IHAubmV4dCA9IGgsIGwgPiBzICYmIChzID0gbCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHAgJiYgKHAgPSBwLm5leHQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiAxMDczNzQxODIzLAogICAgICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZUNvbmZpZzogZy5zdXNwZW5zZUNvbmZpZywKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiBnLnRhZywKICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogZy5wYXlsb2FkLAogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZy5jYWxsYmFjaywKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgICAgICAgICAgIH0pLCBvdShsLCBnLnN1c3BlbnNlQ29uZmlnKTsKICAgICAgICAgICAgICAgICAgICBlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gZSwgYiA9IGc7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobCA9IHQsIGggPSBuLCBiLnRhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiAobSA9IGIucGF5bG9hZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbS5jYWxsKGgsIGMsIGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uZWZmZWN0VGFnID0gLTQwOTcgJiBtLmVmZmVjdFRhZyB8IDY0OwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSAobCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIChtID0gYi5wYXlsb2FkKSA/IG0uY2FsbChoLCBjLCBsKSA6IG0pKSBicmVhayBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGEoe30sIGMsIGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW8gPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBnLmNhbGxiYWNrICYmIChlLmVmZmVjdFRhZyB8PSAzMiwgbnVsbCA9PT0gKGwgPSBvLmVmZmVjdHMpID8gby5lZmZlY3RzID0gWyBnIF0gOiBsLnB1c2goZykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IChnID0gZy5uZXh0KSB8fCBnID09PSB1KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IChsID0gby5zaGFyZWQucGVuZGluZykpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGcgPSBpLm5leHQgPSBsLm5leHQsIGwubmV4dCA9IHUsIG8uYmFzZVF1ZXVlID0gaSA9IGwsIG8uc2hhcmVkLnBlbmRpbmcgPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIG51bGwgPT09IHAgPyBmID0gYyA6IHAubmV4dCA9IGQsIG8uYmFzZVN0YXRlID0gZiwgby5iYXNlUXVldWUgPSBwLCBpdShzKSwgZS5leHBpcmF0aW9uVGltZSA9IHMsIAogICAgICAgICAgICBlLm1lbW9pemVkU3RhdGUgPSBjOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGZvKGUsIHQsIG4pIHsKICAgICAgICBpZiAoZSA9IHQuZWZmZWN0cywgdC5lZmZlY3RzID0gbnVsbCwgbnVsbCAhPT0gZSkgZm9yICh0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgdmFyIHIgPSBlW3RdLCBhID0gci5jYWxsYmFjazsKICAgICAgICAgICAgaWYgKG51bGwgIT09IGEpIHsKICAgICAgICAgICAgICAgIGlmIChyLmNhbGxiYWNrID0gbnVsbCwgciA9IGEsIGEgPSBuLCAiZnVuY3Rpb24iICE9IHR5cGVvZiByKSB0aHJvdyBFcnJvcihpKDE5MSwgcikpOwogICAgICAgICAgICAgICAgci5jYWxsKGEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgdmFyIHBvID0gWS5SZWFjdEN1cnJlbnRCYXRjaENvbmZpZywgZ28gPSAobmV3IHIuQ29tcG9uZW50KS5yZWZzOwogICAgZnVuY3Rpb24gaG8oZSwgdCwgbiwgcikgewogICAgICAgIG4gPSBudWxsID09IChuID0gbihyLCB0ID0gZS5tZW1vaXplZFN0YXRlKSkgPyB0IDogYSh7fSwgdCwgbiksIGUubWVtb2l6ZWRTdGF0ZSA9IG4sIAogICAgICAgIDAgPT09IGUuZXhwaXJhdGlvblRpbWUgJiYgKGUudXBkYXRlUXVldWUuYmFzZVN0YXRlID0gbik7CiAgICB9CiAgICB2YXIgbW8gPSB7CiAgICAgICAgaXNNb3VudGVkOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAhIShlID0gZS5fcmVhY3RJbnRlcm5hbEZpYmVyKSAmJiBKZShlKSA9PT0gZTsKICAgICAgICB9LAogICAgICAgIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24oZSwgdCwgbikgewogICAgICAgICAgICBlID0gZS5fcmVhY3RJbnRlcm5hbEZpYmVyOwogICAgICAgICAgICB2YXIgciA9IEhsKCksIGEgPSBwby5zdXNwZW5zZTsKICAgICAgICAgICAgKGEgPSBsbyhyID0gUWwociwgZSwgYSksIGEpKS5wYXlsb2FkID0gdCwgbnVsbCAhPSBuICYmIChhLmNhbGxiYWNrID0gbiksIHVvKGUsIGEpLCAKICAgICAgICAgICAgR2woZSwgcik7CiAgICAgICAgfSwKICAgICAgICBlbnF1ZXVlUmVwbGFjZVN0YXRlOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgIGUgPSBlLl9yZWFjdEludGVybmFsRmliZXI7CiAgICAgICAgICAgIHZhciByID0gSGwoKSwgYSA9IHBvLnN1c3BlbnNlOwogICAgICAgICAgICAoYSA9IGxvKHIgPSBRbChyLCBlLCBhKSwgYSkpLnRhZyA9IDEsIGEucGF5bG9hZCA9IHQsIG51bGwgIT0gbiAmJiAoYS5jYWxsYmFjayA9IG4pLCAKICAgICAgICAgICAgdW8oZSwgYSksIEdsKGUsIHIpOwogICAgICAgIH0sCiAgICAgICAgZW5xdWV1ZUZvcmNlVXBkYXRlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGUgPSBlLl9yZWFjdEludGVybmFsRmliZXI7CiAgICAgICAgICAgIHZhciBuID0gSGwoKSwgciA9IHBvLnN1c3BlbnNlOwogICAgICAgICAgICAociA9IGxvKG4gPSBRbChuLCBlLCByKSwgcikpLnRhZyA9IDIsIG51bGwgIT0gdCAmJiAoci5jYWxsYmFjayA9IHQpLCB1byhlLCByKSwgR2woZSwgbik7CiAgICAgICAgfQogICAgfTsKICAgIGZ1bmN0aW9uIGJvKGUsIHQsIG4sIHIsIGEsIG8sIGkpIHsKICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgKGUgPSBlLnN0YXRlTm9kZSkuc2hvdWxkQ29tcG9uZW50VXBkYXRlID8gZS5zaG91bGRDb21wb25lbnRVcGRhdGUociwgbywgaSkgOiAhdC5wcm90b3R5cGUgfHwgIXQucHJvdG90eXBlLmlzUHVyZVJlYWN0Q29tcG9uZW50IHx8ICghRnIobiwgcikgfHwgIUZyKGEsIG8pKTsKICAgIH0KICAgIGZ1bmN0aW9uIHZvKGUsIHQsIG4pIHsKICAgICAgICB2YXIgciA9ICExLCBhID0gc2EsIG8gPSB0LmNvbnRleHRUeXBlOwogICAgICAgIHJldHVybiAib2JqZWN0IiA9PSB0eXBlb2YgbyAmJiBudWxsICE9PSBvID8gbyA9IHJvKG8pIDogKGEgPSBoYSh0KSA/IHBhIDogZmEuY3VycmVudCwgCiAgICAgICAgbyA9IChyID0gbnVsbCAhPSAociA9IHQuY29udGV4dFR5cGVzKSkgPyBnYShlLCBhKSA6IHNhKSwgdCA9IG5ldyB0KG4sIG8pLCBlLm1lbW9pemVkU3RhdGUgPSBudWxsICE9PSB0LnN0YXRlICYmIHZvaWQgMCAhPT0gdC5zdGF0ZSA/IHQuc3RhdGUgOiBudWxsLCAKICAgICAgICB0LnVwZGF0ZXIgPSBtbywgZS5zdGF0ZU5vZGUgPSB0LCB0Ll9yZWFjdEludGVybmFsRmliZXIgPSBlLCByICYmICgoZSA9IGUuc3RhdGVOb2RlKS5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZFVubWFza2VkQ2hpbGRDb250ZXh0ID0gYSwgCiAgICAgICAgZS5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1hc2tlZENoaWxkQ29udGV4dCA9IG8pLCB0OwogICAgfQogICAgZnVuY3Rpb24geW8oZSwgdCwgbiwgcikgewogICAgICAgIGUgPSB0LnN0YXRlLCAiZnVuY3Rpb24iID09IHR5cGVvZiB0LmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYgdC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG4sIHIpLCAKICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiB0LlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzICYmIHQuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobiwgciksIAogICAgICAgIHQuc3RhdGUgIT09IGUgJiYgbW8uZW5xdWV1ZVJlcGxhY2VTdGF0ZSh0LCB0LnN0YXRlLCBudWxsKTsKICAgIH0KICAgIGZ1bmN0aW9uIHdvKGUsIHQsIG4sIHIpIHsKICAgICAgICB2YXIgYSA9IGUuc3RhdGVOb2RlOwogICAgICAgIGEucHJvcHMgPSBuLCBhLnN0YXRlID0gZS5tZW1vaXplZFN0YXRlLCBhLnJlZnMgPSBnbywgb28oZSk7CiAgICAgICAgdmFyIG8gPSB0LmNvbnRleHRUeXBlOwogICAgICAgICJvYmplY3QiID09IHR5cGVvZiBvICYmIG51bGwgIT09IG8gPyBhLmNvbnRleHQgPSBybyhvKSA6IChvID0gaGEodCkgPyBwYSA6IGZhLmN1cnJlbnQsIAogICAgICAgIGEuY29udGV4dCA9IGdhKGUsIG8pKSwgc28oZSwgbiwgYSwgciksIGEuc3RhdGUgPSBlLm1lbW9pemVkU3RhdGUsICJmdW5jdGlvbiIgPT0gdHlwZW9mIChvID0gdC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMpICYmIChobyhlLCB0LCBvLCBuKSwgCiAgICAgICAgYS5zdGF0ZSA9IGUubWVtb2l6ZWRTdGF0ZSksICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGEuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgYS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ICYmICJmdW5jdGlvbiIgIT0gdHlwZW9mIGEuY29tcG9uZW50V2lsbE1vdW50IHx8ICh0ID0gYS5zdGF0ZSwgCiAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYS5jb21wb25lbnRXaWxsTW91bnQgJiYgYS5jb21wb25lbnRXaWxsTW91bnQoKSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ICYmIGEuVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCgpLCAKICAgICAgICB0ICE9PSBhLnN0YXRlICYmIG1vLmVucXVldWVSZXBsYWNlU3RhdGUoYSwgYS5zdGF0ZSwgbnVsbCksIHNvKGUsIG4sIGEsIHIpLCBhLnN0YXRlID0gZS5tZW1vaXplZFN0YXRlKSwgCiAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYS5jb21wb25lbnREaWRNb3VudCAmJiAoZS5lZmZlY3RUYWcgfD0gNCk7CiAgICB9CiAgICB2YXIga28gPSBBcnJheS5pc0FycmF5OwogICAgZnVuY3Rpb24geG8oZSwgdCwgbikgewogICAgICAgIGlmIChudWxsICE9PSAoZSA9IG4ucmVmKSAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiBlICYmICJvYmplY3QiICE9IHR5cGVvZiBlKSB7CiAgICAgICAgICAgIGlmIChuLl9vd25lcikgewogICAgICAgICAgICAgICAgaWYgKG4gPSBuLl9vd25lcikgewogICAgICAgICAgICAgICAgICAgIGlmICgxICE9PSBuLnRhZykgdGhyb3cgRXJyb3IoaSgzMDkpKTsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4uc3RhdGVOb2RlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFyKSB0aHJvdyBFcnJvcihpKDE0NywgZSkpOwogICAgICAgICAgICAgICAgdmFyIGEgPSAiIiArIGU7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiBudWxsICE9PSB0LnJlZiAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiB0LnJlZiAmJiB0LnJlZi5fc3RyaW5nUmVmID09PSBhID8gdC5yZWYgOiAoKHQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSByLnJlZnM7CiAgICAgICAgICAgICAgICAgICAgdCA9PT0gZ28gJiYgKHQgPSByLnJlZnMgPSB7fSksIG51bGwgPT09IGUgPyBkZWxldGUgdFthXSA6IHRbYV0gPSBlOwogICAgICAgICAgICAgICAgfSkuX3N0cmluZ1JlZiA9IGEsIHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgZSkgdGhyb3cgRXJyb3IoaSgyODQpKTsKICAgICAgICAgICAgaWYgKCFuLl9vd25lcikgdGhyb3cgRXJyb3IoaSgyOTAsIGUpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICBmdW5jdGlvbiBFbyhlLCB0KSB7CiAgICAgICAgaWYgKCJ0ZXh0YXJlYSIgIT09IGUudHlwZSkgdGhyb3cgRXJyb3IoaSgzMSwgIltvYmplY3QgT2JqZWN0XSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSA/ICJvYmplY3Qgd2l0aCBrZXlzIHsiICsgT2JqZWN0LmtleXModCkuam9pbigiLCAiKSArICJ9IiA6IHQsICIiKSk7CiAgICB9CiAgICBmdW5jdGlvbiBTbyhlKSB7CiAgICAgICAgZnVuY3Rpb24gdCh0LCBuKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHQubGFzdEVmZmVjdDsKICAgICAgICAgICAgICAgIG51bGwgIT09IHIgPyAoci5uZXh0RWZmZWN0ID0gbiwgdC5sYXN0RWZmZWN0ID0gbikgOiB0LmZpcnN0RWZmZWN0ID0gdC5sYXN0RWZmZWN0ID0gbiwgCiAgICAgICAgICAgICAgICBuLm5leHRFZmZlY3QgPSBudWxsLCBuLmVmZmVjdFRhZyA9IDg7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbihuLCByKSB7CiAgICAgICAgICAgIGlmICghZSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGZvciAoO251bGwgIT09IHI7ICkgdChuLCByKSwgciA9IHIuc2libGluZzsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHIoZSwgdCkgewogICAgICAgICAgICBmb3IgKGUgPSBuZXcgTWFwOyBudWxsICE9PSB0OyApIG51bGwgIT09IHQua2V5ID8gZS5zZXQodC5rZXksIHQpIDogZS5zZXQodC5pbmRleCwgdCksIAogICAgICAgICAgICB0ID0gdC5zaWJsaW5nOwogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiAoZSA9IEN1KGUsIHQpKS5pbmRleCA9IDAsIGUuc2libGluZyA9IG51bGwsIGU7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG8odCwgbiwgcikgewogICAgICAgICAgICByZXR1cm4gdC5pbmRleCA9IHIsIGUgPyBudWxsICE9PSAociA9IHQuYWx0ZXJuYXRlKSA/IChyID0gci5pbmRleCkgPCBuID8gKHQuZWZmZWN0VGFnID0gMiwgCiAgICAgICAgICAgIG4pIDogciA6ICh0LmVmZmVjdFRhZyA9IDIsIG4pIDogbjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbCh0KSB7CiAgICAgICAgICAgIHJldHVybiBlICYmIG51bGwgPT09IHQuYWx0ZXJuYXRlICYmICh0LmVmZmVjdFRhZyA9IDIpLCB0OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1KGUsIHQsIG4sIHIpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IHQgfHwgNiAhPT0gdC50YWcgPyAoKHQgPSBfdShuLCBlLm1vZGUsIHIpKS5yZXR1cm4gPSBlLCB0KSA6ICgodCA9IGEodCwgbikpLnJldHVybiA9IGUsIAogICAgICAgICAgICB0KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYyhlLCB0LCBuLCByKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIHQuZWxlbWVudFR5cGUgPT09IG4udHlwZSA/ICgociA9IGEodCwgbi5wcm9wcykpLnJlZiA9IHhvKGUsIHQsIG4pLCAKICAgICAgICAgICAgci5yZXR1cm4gPSBlLCByKSA6ICgociA9IFR1KG4udHlwZSwgbi5rZXksIG4ucHJvcHMsIG51bGwsIGUubW9kZSwgcikpLnJlZiA9IHhvKGUsIHQsIG4pLCAKICAgICAgICAgICAgci5yZXR1cm4gPSBlLCByKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcyhlLCB0LCBuLCByKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09PSB0IHx8IDQgIT09IHQudGFnIHx8IHQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8gIT09IG4uY29udGFpbmVySW5mbyB8fCB0LnN0YXRlTm9kZS5pbXBsZW1lbnRhdGlvbiAhPT0gbi5pbXBsZW1lbnRhdGlvbiA/ICgodCA9IGp1KG4sIGUubW9kZSwgcikpLnJldHVybiA9IGUsIAogICAgICAgICAgICB0KSA6ICgodCA9IGEodCwgbi5jaGlsZHJlbiB8fCBbXSkpLnJldHVybiA9IGUsIHQpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT09IHQgfHwgNyAhPT0gdC50YWcgPyAoKHQgPSBQdShuLCBlLm1vZGUsIHIsIG8pKS5yZXR1cm4gPSBlLCB0KSA6ICgodCA9IGEodCwgbikpLnJldHVybiA9IGUsIAogICAgICAgICAgICB0KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZChlLCB0LCBuKSB7CiAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdCB8fCAibnVtYmVyIiA9PSB0eXBlb2YgdCkgcmV0dXJuICh0ID0gX3UoIiIgKyB0LCBlLm1vZGUsIG4pKS5yZXR1cm4gPSBlLCAKICAgICAgICAgICAgdDsKICAgICAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAodC4kJHR5cGVvZikgewogICAgICAgICAgICAgICAgICBjYXNlIGVlOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAobiA9IFR1KHQudHlwZSwgdC5rZXksIHQucHJvcHMsIG51bGwsIGUubW9kZSwgbikpLnJlZiA9IHhvKGUsIG51bGwsIHQpLCBuLnJldHVybiA9IGUsIAogICAgICAgICAgICAgICAgICAgIG47CgogICAgICAgICAgICAgICAgICBjYXNlIHRlOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IGp1KHQsIGUubW9kZSwgbikpLnJldHVybiA9IGUsIHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoa28odCkgfHwgaGUodCkpIHJldHVybiAodCA9IFB1KHQsIGUubW9kZSwgbiwgbnVsbCkpLnJldHVybiA9IGUsIHQ7CiAgICAgICAgICAgICAgICBFbyhlLCB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcChlLCB0LCBuLCByKSB7CiAgICAgICAgICAgIHZhciBhID0gbnVsbCAhPT0gdCA/IHQua2V5IDogbnVsbDsKICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBuIHx8ICJudW1iZXIiID09IHR5cGVvZiBuKSByZXR1cm4gbnVsbCAhPT0gYSA/IG51bGwgOiB1KGUsIHQsICIiICsgbiwgcik7CiAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgbiAmJiBudWxsICE9PSBuKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG4uJCR0eXBlb2YpIHsKICAgICAgICAgICAgICAgICAgY2FzZSBlZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5rZXkgPT09IGEgPyBuLnR5cGUgPT09IG5lID8gZihlLCB0LCBuLnByb3BzLmNoaWxkcmVuLCByLCBhKSA6IGMoZSwgdCwgbiwgcikgOiBudWxsOwoKICAgICAgICAgICAgICAgICAgY2FzZSB0ZToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5rZXkgPT09IGEgPyBzKGUsIHQsIG4sIHIpIDogbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChrbyhuKSB8fCBoZShuKSkgcmV0dXJuIG51bGwgIT09IGEgPyBudWxsIDogZihlLCB0LCBuLCByLCBudWxsKTsKICAgICAgICAgICAgICAgIEVvKGUsIG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnKGUsIHQsIG4sIHIsIGEpIHsKICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiByIHx8ICJudW1iZXIiID09IHR5cGVvZiByKSByZXR1cm4gdSh0LCBlID0gZS5nZXQobikgfHwgbnVsbCwgIiIgKyByLCBhKTsKICAgICAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiByICYmIG51bGwgIT09IHIpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoci4kJHR5cGVvZikgewogICAgICAgICAgICAgICAgICBjYXNlIGVlOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID0gZS5nZXQobnVsbCA9PT0gci5rZXkgPyBuIDogci5rZXkpIHx8IG51bGwsIHIudHlwZSA9PT0gbmUgPyBmKHQsIGUsIHIucHJvcHMuY2hpbGRyZW4sIGEsIHIua2V5KSA6IGModCwgZSwgciwgYSk7CgogICAgICAgICAgICAgICAgICBjYXNlIHRlOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBzKHQsIGUgPSBlLmdldChudWxsID09PSByLmtleSA/IG4gOiByLmtleSkgfHwgbnVsbCwgciwgYSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoa28ocikgfHwgaGUocikpIHJldHVybiBmKHQsIGUgPSBlLmdldChuKSB8fCBudWxsLCByLCBhLCBudWxsKTsKICAgICAgICAgICAgICAgIEVvKHQsIHIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBoKGEsIGksIGwsIHUpIHsKICAgICAgICAgICAgZm9yICh2YXIgYyA9IG51bGwsIHMgPSBudWxsLCBmID0gaSwgaCA9IGkgPSAwLCBtID0gbnVsbDsgbnVsbCAhPT0gZiAmJiBoIDwgbC5sZW5ndGg7IGgrKykgewogICAgICAgICAgICAgICAgZi5pbmRleCA+IGggPyAobSA9IGYsIGYgPSBudWxsKSA6IG0gPSBmLnNpYmxpbmc7CiAgICAgICAgICAgICAgICB2YXIgYiA9IHAoYSwgZiwgbFtoXSwgdSk7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gYikgewogICAgICAgICAgICAgICAgICAgIG51bGwgPT09IGYgJiYgKGYgPSBtKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGUgJiYgZiAmJiBudWxsID09PSBiLmFsdGVybmF0ZSAmJiB0KGEsIGYpLCBpID0gbyhiLCBpLCBoKSwgbnVsbCA9PT0gcyA/IGMgPSBiIDogcy5zaWJsaW5nID0gYiwgCiAgICAgICAgICAgICAgICBzID0gYiwgZiA9IG07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGggPT09IGwubGVuZ3RoKSByZXR1cm4gbihhLCBmKSwgYzsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGYpIHsKICAgICAgICAgICAgICAgIGZvciAoO2ggPCBsLmxlbmd0aDsgaCsrKSBudWxsICE9PSAoZiA9IGQoYSwgbFtoXSwgdSkpICYmIChpID0gbyhmLCBpLCBoKSwgbnVsbCA9PT0gcyA/IGMgPSBmIDogcy5zaWJsaW5nID0gZiwgCiAgICAgICAgICAgICAgICBzID0gZik7CiAgICAgICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGYgPSByKGEsIGYpOyBoIDwgbC5sZW5ndGg7IGgrKykgbnVsbCAhPT0gKG0gPSBnKGYsIGEsIGgsIGxbaF0sIHUpKSAmJiAoZSAmJiBudWxsICE9PSBtLmFsdGVybmF0ZSAmJiBmLmRlbGV0ZShudWxsID09PSBtLmtleSA/IGggOiBtLmtleSksIAogICAgICAgICAgICBpID0gbyhtLCBpLCBoKSwgbnVsbCA9PT0gcyA/IGMgPSBtIDogcy5zaWJsaW5nID0gbSwgcyA9IG0pOwogICAgICAgICAgICByZXR1cm4gZSAmJiBmLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KGEsIGUpOwogICAgICAgICAgICB9KSksIGM7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG0oYSwgbCwgdSwgYykgewogICAgICAgICAgICB2YXIgcyA9IGhlKHUpOwogICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgcykgdGhyb3cgRXJyb3IoaSgxNTApKTsKICAgICAgICAgICAgaWYgKG51bGwgPT0gKHUgPSBzLmNhbGwodSkpKSB0aHJvdyBFcnJvcihpKDE1MSkpOwogICAgICAgICAgICBmb3IgKHZhciBmID0gcyA9IG51bGwsIGggPSBsLCBtID0gbCA9IDAsIGIgPSBudWxsLCB2ID0gdS5uZXh0KCk7IG51bGwgIT09IGggJiYgIXYuZG9uZTsgbSsrLCAKICAgICAgICAgICAgdiA9IHUubmV4dCgpKSB7CiAgICAgICAgICAgICAgICBoLmluZGV4ID4gbSA/IChiID0gaCwgaCA9IG51bGwpIDogYiA9IGguc2libGluZzsKICAgICAgICAgICAgICAgIHZhciB5ID0gcChhLCBoLCB2LnZhbHVlLCBjKTsKICAgICAgICAgICAgICAgIGlmIChudWxsID09PSB5KSB7CiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gaCAmJiAoaCA9IGIpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZSAmJiBoICYmIG51bGwgPT09IHkuYWx0ZXJuYXRlICYmIHQoYSwgaCksIGwgPSBvKHksIGwsIG0pLCBudWxsID09PSBmID8gcyA9IHkgOiBmLnNpYmxpbmcgPSB5LCAKICAgICAgICAgICAgICAgIGYgPSB5LCBoID0gYjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodi5kb25lKSByZXR1cm4gbihhLCBoKSwgczsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGgpIHsKICAgICAgICAgICAgICAgIGZvciAoOyF2LmRvbmU7IG0rKywgdiA9IHUubmV4dCgpKSBudWxsICE9PSAodiA9IGQoYSwgdi52YWx1ZSwgYykpICYmIChsID0gbyh2LCBsLCBtKSwgCiAgICAgICAgICAgICAgICBudWxsID09PSBmID8gcyA9IHYgOiBmLnNpYmxpbmcgPSB2LCBmID0gdik7CiAgICAgICAgICAgICAgICByZXR1cm4gczsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGggPSByKGEsIGgpOyAhdi5kb25lOyBtKyssIHYgPSB1Lm5leHQoKSkgbnVsbCAhPT0gKHYgPSBnKGgsIGEsIG0sIHYudmFsdWUsIGMpKSAmJiAoZSAmJiBudWxsICE9PSB2LmFsdGVybmF0ZSAmJiBoLmRlbGV0ZShudWxsID09PSB2LmtleSA/IG0gOiB2LmtleSksIAogICAgICAgICAgICBsID0gbyh2LCBsLCBtKSwgbnVsbCA9PT0gZiA/IHMgPSB2IDogZi5zaWJsaW5nID0gdiwgZiA9IHYpOwogICAgICAgICAgICByZXR1cm4gZSAmJiBoLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KGEsIGUpOwogICAgICAgICAgICB9KSksIHM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmdW5jdGlvbihlLCByLCBvLCB1KSB7CiAgICAgICAgICAgIHZhciBjID0gIm9iamVjdCIgPT0gdHlwZW9mIG8gJiYgbnVsbCAhPT0gbyAmJiBvLnR5cGUgPT09IG5lICYmIG51bGwgPT09IG8ua2V5OwogICAgICAgICAgICBjICYmIChvID0gby5wcm9wcy5jaGlsZHJlbik7CiAgICAgICAgICAgIHZhciBzID0gIm9iamVjdCIgPT0gdHlwZW9mIG8gJiYgbnVsbCAhPT0gbzsKICAgICAgICAgICAgaWYgKHMpIHN3aXRjaCAoby4kJHR5cGVvZikgewogICAgICAgICAgICAgIGNhc2UgZWU6CiAgICAgICAgICAgICAgICBlOiB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChzID0gby5rZXksIGMgPSByOyBudWxsICE9PSBjOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMua2V5ID09PSBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGMudGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoby50eXBlID09PSBuZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKGUsIGMuc2libGluZyksIChyID0gYShjLCBvLnByb3BzLmNoaWxkcmVuKSkucmV0dXJuID0gZSwgZSA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5lbGVtZW50VHlwZSA9PT0gby50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4oZSwgYy5zaWJsaW5nKSwgKHIgPSBhKGMsIG8ucHJvcHMpKS5yZWYgPSB4byhlLCBjLCBvKSwgci5yZXR1cm4gPSBlLCBlID0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKGUsIGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdChlLCBjKSwgYyA9IGMuc2libGluZzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgby50eXBlID09PSBuZSA/ICgociA9IFB1KG8ucHJvcHMuY2hpbGRyZW4sIGUubW9kZSwgdSwgby5rZXkpKS5yZXR1cm4gPSBlLCBlID0gcikgOiAoKHUgPSBUdShvLnR5cGUsIG8ua2V5LCBvLnByb3BzLCBudWxsLCBlLm1vZGUsIHUpKS5yZWYgPSB4byhlLCByLCBvKSwgCiAgICAgICAgICAgICAgICAgICAgdS5yZXR1cm4gPSBlLCBlID0gdSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbChlKTsKCiAgICAgICAgICAgICAgY2FzZSB0ZToKICAgICAgICAgICAgICAgIGU6IHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSBvLmtleTsgbnVsbCAhPT0gcjsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmtleSA9PT0gYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDQgPT09IHIudGFnICYmIHIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8gPT09IG8uY29udGFpbmVySW5mbyAmJiByLnN0YXRlTm9kZS5pbXBsZW1lbnRhdGlvbiA9PT0gby5pbXBsZW1lbnRhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4oZSwgci5zaWJsaW5nKSwgKHIgPSBhKHIsIG8uY2hpbGRyZW4gfHwgW10pKS5yZXR1cm4gPSBlLCBlID0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbihlLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHQoZSwgciksIHIgPSByLnNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIChyID0ganUobywgZS5tb2RlLCB1KSkucmV0dXJuID0gZSwgZSA9IHI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbChlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIG8gfHwgIm51bWJlciIgPT0gdHlwZW9mIG8pIHJldHVybiBvID0gIiIgKyBvLCBudWxsICE9PSByICYmIDYgPT09IHIudGFnID8gKG4oZSwgci5zaWJsaW5nKSwgCiAgICAgICAgICAgIChyID0gYShyLCBvKSkucmV0dXJuID0gZSwgZSA9IHIpIDogKG4oZSwgciksIChyID0gX3UobywgZS5tb2RlLCB1KSkucmV0dXJuID0gZSwgCiAgICAgICAgICAgIGUgPSByKSwgbChlKTsKICAgICAgICAgICAgaWYgKGtvKG8pKSByZXR1cm4gaChlLCByLCBvLCB1KTsKICAgICAgICAgICAgaWYgKGhlKG8pKSByZXR1cm4gbShlLCByLCBvLCB1KTsKICAgICAgICAgICAgaWYgKHMgJiYgRW8oZSwgbyksIHZvaWQgMCA9PT0gbyAmJiAhYykgc3dpdGNoIChlLnRhZykgewogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aHJvdyBlID0gZS50eXBlLCBFcnJvcihpKDE1MiwgZS5kaXNwbGF5TmFtZSB8fCBlLm5hbWUgfHwgIkNvbXBvbmVudCIpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbihlLCByKTsKICAgICAgICB9OwogICAgfQogICAgdmFyIE9vID0gU28oITApLCBDbyA9IFNvKCExKSwgVG8gPSB7fSwgUG8gPSB7CiAgICAgICAgY3VycmVudDogVG8KICAgIH0sIF9vID0gewogICAgICAgIGN1cnJlbnQ6IFRvCiAgICB9LCBqbyA9IHsKICAgICAgICBjdXJyZW50OiBUbwogICAgfTsKICAgIGZ1bmN0aW9uIElvKGUpIHsKICAgICAgICBpZiAoZSA9PT0gVG8pIHRocm93IEVycm9yKGkoMTc0KSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICBmdW5jdGlvbiBObyhlLCB0KSB7CiAgICAgICAgc3dpdGNoIChjYShqbywgdCksIGNhKF9vLCBlKSwgY2EoUG8sIFRvKSwgZSA9IHQubm9kZVR5cGUpIHsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHQgPSAodCA9IHQuZG9jdW1lbnRFbGVtZW50KSA/IHQubmFtZXNwYWNlVVJJIDogemUobnVsbCwgIiIpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0ID0gemUodCA9IChlID0gOCA9PT0gZSA/IHQucGFyZW50Tm9kZSA6IHQpLm5hbWVzcGFjZVVSSSB8fCBudWxsLCBlID0gZS50YWdOYW1lKTsKICAgICAgICB9CiAgICAgICAgdWEoUG8pLCBjYShQbywgdCk7CiAgICB9CiAgICBmdW5jdGlvbiBBbygpIHsKICAgICAgICB1YShQbyksIHVhKF9vKSwgdWEoam8pOwogICAgfQogICAgZnVuY3Rpb24gRG8oZSkgewogICAgICAgIElvKGpvLmN1cnJlbnQpOwogICAgICAgIHZhciB0ID0gSW8oUG8uY3VycmVudCksIG4gPSB6ZSh0LCBlLnR5cGUpOwogICAgICAgIHQgIT09IG4gJiYgKGNhKF9vLCBlKSwgY2EoUG8sIG4pKTsKICAgIH0KICAgIGZ1bmN0aW9uIFJvKGUpIHsKICAgICAgICBfby5jdXJyZW50ID09PSBlICYmICh1YShQbyksIHVhKF9vKSk7CiAgICB9CiAgICB2YXIgTW8gPSB7CiAgICAgICAgY3VycmVudDogMAogICAgfTsKICAgIGZ1bmN0aW9uIHpvKGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gZTsgbnVsbCAhPT0gdDsgKSB7CiAgICAgICAgICAgIGlmICgxMyA9PT0gdC50YWcpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gdC5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4gJiYgKG51bGwgPT09IChuID0gbi5kZWh5ZHJhdGVkKSB8fCAiJD8iID09PSBuLmRhdGEgfHwgIiQhIiA9PT0gbi5kYXRhKSkgcmV0dXJuIHQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoMTkgPT09IHQudGFnICYmIHZvaWQgMCAhPT0gdC5tZW1vaXplZFByb3BzLnJldmVhbE9yZGVyKSB7CiAgICAgICAgICAgICAgICBpZiAoMCAhPSAoNjQgJiB0LmVmZmVjdFRhZykpIHJldHVybiB0OwogICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT09IHQuY2hpbGQpIHsKICAgICAgICAgICAgICAgIHQuY2hpbGQucmV0dXJuID0gdCwgdCA9IHQuY2hpbGQ7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodCA9PT0gZSkgYnJlYWs7CiAgICAgICAgICAgIGZvciAoO251bGwgPT09IHQuc2libGluZzsgKSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdC5yZXR1cm4gfHwgdC5yZXR1cm4gPT09IGUpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgdCA9IHQucmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHQuc2libGluZy5yZXR1cm4gPSB0LnJldHVybiwgdCA9IHQuc2libGluZzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiBMbyhlLCB0KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgcmVzcG9uZGVyOiBlLAogICAgICAgICAgICBwcm9wczogdAogICAgICAgIH07CiAgICB9CiAgICB2YXIgRm8gPSBZLlJlYWN0Q3VycmVudERpc3BhdGNoZXIsIFVvID0gWS5SZWFjdEN1cnJlbnRCYXRjaENvbmZpZywgV28gPSAwLCBWbyA9IG51bGwsICRvID0gbnVsbCwgcW8gPSBudWxsLCBCbyA9ICExOwogICAgZnVuY3Rpb24gSG8oKSB7CiAgICAgICAgdGhyb3cgRXJyb3IoaSgzMjEpKTsKICAgIH0KICAgIGZ1bmN0aW9uIFFvKGUsIHQpIHsKICAgICAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuICExOwogICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgdC5sZW5ndGggJiYgbiA8IGUubGVuZ3RoOyBuKyspIGlmICghenIoZVtuXSwgdFtuXSkpIHJldHVybiAhMTsKICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgICBmdW5jdGlvbiBHbyhlLCB0LCBuLCByLCBhLCBvKSB7CiAgICAgICAgaWYgKFdvID0gbywgVm8gPSB0LCB0Lm1lbW9pemVkU3RhdGUgPSBudWxsLCB0LnVwZGF0ZVF1ZXVlID0gbnVsbCwgdC5leHBpcmF0aW9uVGltZSA9IDAsIAogICAgICAgIEZvLmN1cnJlbnQgPSBudWxsID09PSBlIHx8IG51bGwgPT09IGUubWVtb2l6ZWRTdGF0ZSA/IGJpIDogdmksIGUgPSBuKHIsIGEpLCB0LmV4cGlyYXRpb25UaW1lID09PSBXbykgewogICAgICAgICAgICBvID0gMDsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgaWYgKHQuZXhwaXJhdGlvblRpbWUgPSAwLCAhKDI1ID4gbykpIHRocm93IEVycm9yKGkoMzAxKSk7CiAgICAgICAgICAgICAgICBvICs9IDEsIHFvID0gJG8gPSBudWxsLCB0LnVwZGF0ZVF1ZXVlID0gbnVsbCwgRm8uY3VycmVudCA9IHlpLCBlID0gbihyLCBhKTsKICAgICAgICAgICAgfSB3aGlsZSAodC5leHBpcmF0aW9uVGltZSA9PT0gV28pOwogICAgICAgIH0KICAgICAgICBpZiAoRm8uY3VycmVudCA9IG1pLCB0ID0gbnVsbCAhPT0gJG8gJiYgbnVsbCAhPT0gJG8ubmV4dCwgV28gPSAwLCBxbyA9ICRvID0gVm8gPSBudWxsLCAKICAgICAgICBCbyA9ICExLCB0KSB0aHJvdyBFcnJvcihpKDMwMCkpOwogICAgICAgIHJldHVybiBlOwogICAgfQogICAgZnVuY3Rpb24gS28oKSB7CiAgICAgICAgdmFyIGUgPSB7CiAgICAgICAgICAgIG1lbW9pemVkU3RhdGU6IG51bGwsCiAgICAgICAgICAgIGJhc2VTdGF0ZTogbnVsbCwKICAgICAgICAgICAgYmFzZVF1ZXVlOiBudWxsLAogICAgICAgICAgICBxdWV1ZTogbnVsbCwKICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIG51bGwgPT09IHFvID8gVm8ubWVtb2l6ZWRTdGF0ZSA9IHFvID0gZSA6IHFvID0gcW8ubmV4dCA9IGUsIHFvOwogICAgfQogICAgZnVuY3Rpb24gWW8oKSB7CiAgICAgICAgaWYgKG51bGwgPT09ICRvKSB7CiAgICAgICAgICAgIHZhciBlID0gVm8uYWx0ZXJuYXRlOwogICAgICAgICAgICBlID0gbnVsbCAhPT0gZSA/IGUubWVtb2l6ZWRTdGF0ZSA6IG51bGw7CiAgICAgICAgfSBlbHNlIGUgPSAkby5uZXh0OwogICAgICAgIHZhciB0ID0gbnVsbCA9PT0gcW8gPyBWby5tZW1vaXplZFN0YXRlIDogcW8ubmV4dDsKICAgICAgICBpZiAobnVsbCAhPT0gdCkgcW8gPSB0LCAkbyA9IGU7IGVsc2UgewogICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkgdGhyb3cgRXJyb3IoaSgzMTApKTsKICAgICAgICAgICAgZSA9IHsKICAgICAgICAgICAgICAgIG1lbW9pemVkU3RhdGU6ICgkbyA9IGUpLm1lbW9pemVkU3RhdGUsCiAgICAgICAgICAgICAgICBiYXNlU3RhdGU6ICRvLmJhc2VTdGF0ZSwKICAgICAgICAgICAgICAgIGJhc2VRdWV1ZTogJG8uYmFzZVF1ZXVlLAogICAgICAgICAgICAgICAgcXVldWU6ICRvLnF1ZXVlLAogICAgICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgICB9LCBudWxsID09PSBxbyA/IFZvLm1lbW9pemVkU3RhdGUgPSBxbyA9IGUgOiBxbyA9IHFvLm5leHQgPSBlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcW87CiAgICB9CiAgICBmdW5jdGlvbiBYbyhlLCB0KSB7CiAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQgPyB0KGUpIDogdDsKICAgIH0KICAgIGZ1bmN0aW9uIFpvKGUpIHsKICAgICAgICB2YXIgdCA9IFlvKCksIG4gPSB0LnF1ZXVlOwogICAgICAgIGlmIChudWxsID09PSBuKSB0aHJvdyBFcnJvcihpKDMxMSkpOwogICAgICAgIG4ubGFzdFJlbmRlcmVkUmVkdWNlciA9IGU7CiAgICAgICAgdmFyIHIgPSAkbywgYSA9IHIuYmFzZVF1ZXVlLCBvID0gbi5wZW5kaW5nOwogICAgICAgIGlmIChudWxsICE9PSBvKSB7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBhKSB7CiAgICAgICAgICAgICAgICB2YXIgbCA9IGEubmV4dDsKICAgICAgICAgICAgICAgIGEubmV4dCA9IG8ubmV4dCwgby5uZXh0ID0gbDsKICAgICAgICAgICAgfQogICAgICAgICAgICByLmJhc2VRdWV1ZSA9IGEgPSBvLCBuLnBlbmRpbmcgPSBudWxsOwogICAgICAgIH0KICAgICAgICBpZiAobnVsbCAhPT0gYSkgewogICAgICAgICAgICBhID0gYS5uZXh0LCByID0gci5iYXNlU3RhdGU7CiAgICAgICAgICAgIHZhciB1ID0gbCA9IG8gPSBudWxsLCBjID0gYTsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgdmFyIHMgPSBjLmV4cGlyYXRpb25UaW1lOwogICAgICAgICAgICAgICAgaWYgKHMgPCBXbykgewogICAgICAgICAgICAgICAgICAgIHZhciBmID0gewogICAgICAgICAgICAgICAgICAgICAgICBleHBpcmF0aW9uVGltZTogYy5leHBpcmF0aW9uVGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2VDb25maWc6IGMuc3VzcGVuc2VDb25maWcsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogYy5hY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIGVhZ2VyUmVkdWNlcjogYy5lYWdlclJlZHVjZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIGVhZ2VyU3RhdGU6IGMuZWFnZXJTdGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gdSA/IChsID0gdSA9IGYsIG8gPSByKSA6IHUgPSB1Lm5leHQgPSBmLCBzID4gVm8uZXhwaXJhdGlvblRpbWUgJiYgKFZvLmV4cGlyYXRpb25UaW1lID0gcywgCiAgICAgICAgICAgICAgICAgICAgaXUocykpOwogICAgICAgICAgICAgICAgfSBlbHNlIG51bGwgIT09IHUgJiYgKHUgPSB1Lm5leHQgPSB7CiAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IDEwNzM3NDE4MjMsCiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2VDb25maWc6IGMuc3VzcGVuc2VDb25maWcsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBjLmFjdGlvbiwKICAgICAgICAgICAgICAgICAgICBlYWdlclJlZHVjZXI6IGMuZWFnZXJSZWR1Y2VyLAogICAgICAgICAgICAgICAgICAgIGVhZ2VyU3RhdGU6IGMuZWFnZXJTdGF0ZSwKICAgICAgICAgICAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgICAgICAgICB9KSwgb3UocywgYy5zdXNwZW5zZUNvbmZpZyksIHIgPSBjLmVhZ2VyUmVkdWNlciA9PT0gZSA/IGMuZWFnZXJTdGF0ZSA6IGUociwgYy5hY3Rpb24pOwogICAgICAgICAgICAgICAgYyA9IGMubmV4dDsKICAgICAgICAgICAgfSB3aGlsZSAobnVsbCAhPT0gYyAmJiBjICE9PSBhKTsKICAgICAgICAgICAgbnVsbCA9PT0gdSA/IG8gPSByIDogdS5uZXh0ID0gbCwgenIociwgdC5tZW1vaXplZFN0YXRlKSB8fCAoamkgPSAhMCksIHQubWVtb2l6ZWRTdGF0ZSA9IHIsIAogICAgICAgICAgICB0LmJhc2VTdGF0ZSA9IG8sIHQuYmFzZVF1ZXVlID0gdSwgbi5sYXN0UmVuZGVyZWRTdGF0ZSA9IHI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBbIHQubWVtb2l6ZWRTdGF0ZSwgbi5kaXNwYXRjaCBdOwogICAgfQogICAgZnVuY3Rpb24gSm8oZSkgewogICAgICAgIHZhciB0ID0gWW8oKSwgbiA9IHQucXVldWU7CiAgICAgICAgaWYgKG51bGwgPT09IG4pIHRocm93IEVycm9yKGkoMzExKSk7CiAgICAgICAgbi5sYXN0UmVuZGVyZWRSZWR1Y2VyID0gZTsKICAgICAgICB2YXIgciA9IG4uZGlzcGF0Y2gsIGEgPSBuLnBlbmRpbmcsIG8gPSB0Lm1lbW9pemVkU3RhdGU7CiAgICAgICAgaWYgKG51bGwgIT09IGEpIHsKICAgICAgICAgICAgbi5wZW5kaW5nID0gbnVsbDsKICAgICAgICAgICAgdmFyIGwgPSBhID0gYS5uZXh0OwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBvID0gZShvLCBsLmFjdGlvbiksIGwgPSBsLm5leHQ7CiAgICAgICAgICAgIH0gd2hpbGUgKGwgIT09IGEpOwogICAgICAgICAgICB6cihvLCB0Lm1lbW9pemVkU3RhdGUpIHx8IChqaSA9ICEwKSwgdC5tZW1vaXplZFN0YXRlID0gbywgbnVsbCA9PT0gdC5iYXNlUXVldWUgJiYgKHQuYmFzZVN0YXRlID0gbyksIAogICAgICAgICAgICBuLmxhc3RSZW5kZXJlZFN0YXRlID0gbzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFsgbywgciBdOwogICAgfQogICAgZnVuY3Rpb24gZWkoZSkgewogICAgICAgIHZhciB0ID0gS28oKTsKICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiAoZSA9IGUoKSksIHQubWVtb2l6ZWRTdGF0ZSA9IHQuYmFzZVN0YXRlID0gZSwgZSA9IChlID0gdC5xdWV1ZSA9IHsKICAgICAgICAgICAgcGVuZGluZzogbnVsbCwKICAgICAgICAgICAgZGlzcGF0Y2g6IG51bGwsCiAgICAgICAgICAgIGxhc3RSZW5kZXJlZFJlZHVjZXI6IFhvLAogICAgICAgICAgICBsYXN0UmVuZGVyZWRTdGF0ZTogZQogICAgICAgIH0pLmRpc3BhdGNoID0gaGkuYmluZChudWxsLCBWbywgZSksIFsgdC5tZW1vaXplZFN0YXRlLCBlIF07CiAgICB9CiAgICBmdW5jdGlvbiB0aShlLCB0LCBuLCByKSB7CiAgICAgICAgcmV0dXJuIGUgPSB7CiAgICAgICAgICAgIHRhZzogZSwKICAgICAgICAgICAgY3JlYXRlOiB0LAogICAgICAgICAgICBkZXN0cm95OiBuLAogICAgICAgICAgICBkZXBzOiByLAogICAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgfSwgbnVsbCA9PT0gKHQgPSBWby51cGRhdGVRdWV1ZSkgPyAodCA9IHsKICAgICAgICAgICAgbGFzdEVmZmVjdDogbnVsbAogICAgICAgIH0sIFZvLnVwZGF0ZVF1ZXVlID0gdCwgdC5sYXN0RWZmZWN0ID0gZS5uZXh0ID0gZSkgOiBudWxsID09PSAobiA9IHQubGFzdEVmZmVjdCkgPyB0Lmxhc3RFZmZlY3QgPSBlLm5leHQgPSBlIDogKHIgPSBuLm5leHQsIAogICAgICAgIG4ubmV4dCA9IGUsIGUubmV4dCA9IHIsIHQubGFzdEVmZmVjdCA9IGUpLCBlOwogICAgfQogICAgZnVuY3Rpb24gbmkoKSB7CiAgICAgICAgcmV0dXJuIFlvKCkubWVtb2l6ZWRTdGF0ZTsKICAgIH0KICAgIGZ1bmN0aW9uIHJpKGUsIHQsIG4sIHIpIHsKICAgICAgICB2YXIgYSA9IEtvKCk7CiAgICAgICAgVm8uZWZmZWN0VGFnIHw9IGUsIGEubWVtb2l6ZWRTdGF0ZSA9IHRpKDEgfCB0LCBuLCB2b2lkIDAsIHZvaWQgMCA9PT0gciA/IG51bGwgOiByKTsKICAgIH0KICAgIGZ1bmN0aW9uIGFpKGUsIHQsIG4sIHIpIHsKICAgICAgICB2YXIgYSA9IFlvKCk7CiAgICAgICAgciA9IHZvaWQgMCA9PT0gciA/IG51bGwgOiByOwogICAgICAgIHZhciBvID0gdm9pZCAwOwogICAgICAgIGlmIChudWxsICE9PSAkbykgewogICAgICAgICAgICB2YXIgaSA9ICRvLm1lbW9pemVkU3RhdGU7CiAgICAgICAgICAgIGlmIChvID0gaS5kZXN0cm95LCBudWxsICE9PSByICYmIFFvKHIsIGkuZGVwcykpIHJldHVybiB2b2lkIHRpKHQsIG4sIG8sIHIpOwogICAgICAgIH0KICAgICAgICBWby5lZmZlY3RUYWcgfD0gZSwgYS5tZW1vaXplZFN0YXRlID0gdGkoMSB8IHQsIG4sIG8sIHIpOwogICAgfQogICAgZnVuY3Rpb24gb2koZSwgdCkgewogICAgICAgIHJldHVybiByaSg1MTYsIDQsIGUsIHQpOwogICAgfQogICAgZnVuY3Rpb24gaWkoZSwgdCkgewogICAgICAgIHJldHVybiBhaSg1MTYsIDQsIGUsIHQpOwogICAgfQogICAgZnVuY3Rpb24gbGkoZSwgdCkgewogICAgICAgIHJldHVybiBhaSg0LCAyLCBlLCB0KTsKICAgIH0KICAgIGZ1bmN0aW9uIHVpKGUsIHQpIHsKICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCA/IChlID0gZSgpLCB0KGUpLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdChudWxsKTsKICAgICAgICB9KSA6IG51bGwgIT0gdCA/IChlID0gZSgpLCB0LmN1cnJlbnQgPSBlLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdC5jdXJyZW50ID0gbnVsbDsKICAgICAgICB9KSA6IHZvaWQgMDsKICAgIH0KICAgIGZ1bmN0aW9uIGNpKGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gbiA9IG51bGwgIT0gbiA/IG4uY29uY2F0KFsgZSBdKSA6IG51bGwsIGFpKDQsIDIsIHVpLmJpbmQobnVsbCwgdCwgZSksIG4pOwogICAgfQogICAgZnVuY3Rpb24gc2koKSB7fQogICAgZnVuY3Rpb24gZmkoZSwgdCkgewogICAgICAgIHJldHVybiBLbygpLm1lbW9pemVkU3RhdGUgPSBbIGUsIHZvaWQgMCA9PT0gdCA/IG51bGwgOiB0IF0sIGU7CiAgICB9CiAgICBmdW5jdGlvbiBkaShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBZbygpOwogICAgICAgIHQgPSB2b2lkIDAgPT09IHQgPyBudWxsIDogdDsKICAgICAgICB2YXIgciA9IG4ubWVtb2l6ZWRTdGF0ZTsKICAgICAgICByZXR1cm4gbnVsbCAhPT0gciAmJiBudWxsICE9PSB0ICYmIFFvKHQsIHJbMV0pID8gclswXSA6IChuLm1lbW9pemVkU3RhdGUgPSBbIGUsIHQgXSwgCiAgICAgICAgZSk7CiAgICB9CiAgICBmdW5jdGlvbiBwaShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBZbygpOwogICAgICAgIHQgPSB2b2lkIDAgPT09IHQgPyBudWxsIDogdDsKICAgICAgICB2YXIgciA9IG4ubWVtb2l6ZWRTdGF0ZTsKICAgICAgICByZXR1cm4gbnVsbCAhPT0gciAmJiBudWxsICE9PSB0ICYmIFFvKHQsIHJbMV0pID8gclswXSA6IChlID0gZSgpLCBuLm1lbW9pemVkU3RhdGUgPSBbIGUsIHQgXSwgCiAgICAgICAgZSk7CiAgICB9CiAgICBmdW5jdGlvbiBnaShlLCB0LCBuKSB7CiAgICAgICAgdmFyIHIgPSBVYSgpOwogICAgICAgIFZhKDk4ID4gciA/IDk4IDogciwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBlKCEwKTsKICAgICAgICB9KSksIFZhKDk3IDwgciA/IDk3IDogciwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgciA9IFVvLnN1c3BlbnNlOwogICAgICAgICAgICBVby5zdXNwZW5zZSA9IHZvaWQgMCA9PT0gdCA/IG51bGwgOiB0OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZSghMSksIG4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIFVvLnN1c3BlbnNlID0gcjsKICAgICAgICAgICAgfQogICAgICAgIH0pKTsKICAgIH0KICAgIGZ1bmN0aW9uIGhpKGUsIHQsIG4pIHsKICAgICAgICB2YXIgciA9IEhsKCksIGEgPSBwby5zdXNwZW5zZTsKICAgICAgICBhID0gewogICAgICAgICAgICBleHBpcmF0aW9uVGltZTogciA9IFFsKHIsIGUsIGEpLAogICAgICAgICAgICBzdXNwZW5zZUNvbmZpZzogYSwKICAgICAgICAgICAgYWN0aW9uOiBuLAogICAgICAgICAgICBlYWdlclJlZHVjZXI6IG51bGwsCiAgICAgICAgICAgIGVhZ2VyU3RhdGU6IG51bGwsCiAgICAgICAgICAgIG5leHQ6IG51bGwKICAgICAgICB9OwogICAgICAgIHZhciBvID0gdC5wZW5kaW5nOwogICAgICAgIGlmIChudWxsID09PSBvID8gYS5uZXh0ID0gYSA6IChhLm5leHQgPSBvLm5leHQsIG8ubmV4dCA9IGEpLCB0LnBlbmRpbmcgPSBhLCBvID0gZS5hbHRlcm5hdGUsIAogICAgICAgIGUgPT09IFZvIHx8IG51bGwgIT09IG8gJiYgbyA9PT0gVm8pIEJvID0gITAsIGEuZXhwaXJhdGlvblRpbWUgPSBXbywgVm8uZXhwaXJhdGlvblRpbWUgPSBXbzsgZWxzZSB7CiAgICAgICAgICAgIGlmICgwID09PSBlLmV4cGlyYXRpb25UaW1lICYmIChudWxsID09PSBvIHx8IDAgPT09IG8uZXhwaXJhdGlvblRpbWUpICYmIG51bGwgIT09IChvID0gdC5sYXN0UmVuZGVyZWRSZWR1Y2VyKSkgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBpID0gdC5sYXN0UmVuZGVyZWRTdGF0ZSwgbCA9IG8oaSwgbik7CiAgICAgICAgICAgICAgICBpZiAoYS5lYWdlclJlZHVjZXIgPSBvLCBhLmVhZ2VyU3RhdGUgPSBsLCB6cihsLCBpKSkgcmV0dXJuOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICBHbChlLCByKTsKICAgICAgICB9CiAgICB9CiAgICB2YXIgbWkgPSB7CiAgICAgICAgcmVhZENvbnRleHQ6IHJvLAogICAgICAgIHVzZUNhbGxiYWNrOiBIbywKICAgICAgICB1c2VDb250ZXh0OiBIbywKICAgICAgICB1c2VFZmZlY3Q6IEhvLAogICAgICAgIHVzZUltcGVyYXRpdmVIYW5kbGU6IEhvLAogICAgICAgIHVzZUxheW91dEVmZmVjdDogSG8sCiAgICAgICAgdXNlTWVtbzogSG8sCiAgICAgICAgdXNlUmVkdWNlcjogSG8sCiAgICAgICAgdXNlUmVmOiBIbywKICAgICAgICB1c2VTdGF0ZTogSG8sCiAgICAgICAgdXNlRGVidWdWYWx1ZTogSG8sCiAgICAgICAgdXNlUmVzcG9uZGVyOiBIbywKICAgICAgICB1c2VEZWZlcnJlZFZhbHVlOiBIbywKICAgICAgICB1c2VUcmFuc2l0aW9uOiBIbwogICAgfSwgYmkgPSB7CiAgICAgICAgcmVhZENvbnRleHQ6IHJvLAogICAgICAgIHVzZUNhbGxiYWNrOiBmaSwKICAgICAgICB1c2VDb250ZXh0OiBybywKICAgICAgICB1c2VFZmZlY3Q6IG9pLAogICAgICAgIHVzZUltcGVyYXRpdmVIYW5kbGU6IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4gPSBudWxsICE9IG4gPyBuLmNvbmNhdChbIGUgXSkgOiBudWxsLCByaSg0LCAyLCB1aS5iaW5kKG51bGwsIHQsIGUpLCBuKTsKICAgICAgICB9LAogICAgICAgIHVzZUxheW91dEVmZmVjdDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICByZXR1cm4gcmkoNCwgMiwgZSwgdCk7CiAgICAgICAgfSwKICAgICAgICB1c2VNZW1vOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gS28oKTsKICAgICAgICAgICAgcmV0dXJuIHQgPSB2b2lkIDAgPT09IHQgPyBudWxsIDogdCwgZSA9IGUoKSwgbi5tZW1vaXplZFN0YXRlID0gWyBlLCB0IF0sIGU7CiAgICAgICAgfSwKICAgICAgICB1c2VSZWR1Y2VyOiBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAgICAgICAgIHZhciByID0gS28oKTsKICAgICAgICAgICAgcmV0dXJuIHQgPSB2b2lkIDAgIT09IG4gPyBuKHQpIDogdCwgci5tZW1vaXplZFN0YXRlID0gci5iYXNlU3RhdGUgPSB0LCBlID0gKGUgPSByLnF1ZXVlID0gewogICAgICAgICAgICAgICAgcGVuZGluZzogbnVsbCwKICAgICAgICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgICAgICAgbGFzdFJlbmRlcmVkUmVkdWNlcjogZSwKICAgICAgICAgICAgICAgIGxhc3RSZW5kZXJlZFN0YXRlOiB0CiAgICAgICAgICAgIH0pLmRpc3BhdGNoID0gaGkuYmluZChudWxsLCBWbywgZSksIFsgci5tZW1vaXplZFN0YXRlLCBlIF07CiAgICAgICAgfSwKICAgICAgICB1c2VSZWY6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgPSB7CiAgICAgICAgICAgICAgICBjdXJyZW50OiBlCiAgICAgICAgICAgIH0sIEtvKCkubWVtb2l6ZWRTdGF0ZSA9IGU7CiAgICAgICAgfSwKICAgICAgICB1c2VTdGF0ZTogZWksCiAgICAgICAgdXNlRGVidWdWYWx1ZTogc2ksCiAgICAgICAgdXNlUmVzcG9uZGVyOiBMbywKICAgICAgICB1c2VEZWZlcnJlZFZhbHVlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gZWkoZSksIHIgPSBuWzBdLCBhID0gblsxXTsKICAgICAgICAgICAgcmV0dXJuIG9pKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gVW8uc3VzcGVuc2U7CiAgICAgICAgICAgICAgICBVby5zdXNwZW5zZSA9IHZvaWQgMCA9PT0gdCA/IG51bGwgOiB0OwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBhKGUpOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICBVby5zdXNwZW5zZSA9IG47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLCBbIGUsIHQgXSksIHI7CiAgICAgICAgfSwKICAgICAgICB1c2VUcmFuc2l0aW9uOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gZWkoITEpLCBuID0gdFswXTsKICAgICAgICAgICAgcmV0dXJuIHQgPSB0WzFdLCBbIGZpKGdpLmJpbmQobnVsbCwgdCwgZSksIFsgdCwgZSBdKSwgbiBdOwogICAgICAgIH0KICAgIH0sIHZpID0gewogICAgICAgIHJlYWRDb250ZXh0OiBybywKICAgICAgICB1c2VDYWxsYmFjazogZGksCiAgICAgICAgdXNlQ29udGV4dDogcm8sCiAgICAgICAgdXNlRWZmZWN0OiBpaSwKICAgICAgICB1c2VJbXBlcmF0aXZlSGFuZGxlOiBjaSwKICAgICAgICB1c2VMYXlvdXRFZmZlY3Q6IGxpLAogICAgICAgIHVzZU1lbW86IHBpLAogICAgICAgIHVzZVJlZHVjZXI6IFpvLAogICAgICAgIHVzZVJlZjogbmksCiAgICAgICAgdXNlU3RhdGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gWm8oWG8pOwogICAgICAgIH0sCiAgICAgICAgdXNlRGVidWdWYWx1ZTogc2ksCiAgICAgICAgdXNlUmVzcG9uZGVyOiBMbywKICAgICAgICB1c2VEZWZlcnJlZFZhbHVlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gWm8oWG8pLCByID0gblswXSwgYSA9IG5bMV07CiAgICAgICAgICAgIHJldHVybiBpaSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IFVvLnN1c3BlbnNlOwogICAgICAgICAgICAgICAgVW8uc3VzcGVuc2UgPSB2b2lkIDAgPT09IHQgPyBudWxsIDogdDsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgYShlKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgVW8uc3VzcGVuc2UgPSBuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwgWyBlLCB0IF0pLCByOwogICAgICAgIH0sCiAgICAgICAgdXNlVHJhbnNpdGlvbjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IFpvKFhvKSwgbiA9IHRbMF07CiAgICAgICAgICAgIHJldHVybiB0ID0gdFsxXSwgWyBkaShnaS5iaW5kKG51bGwsIHQsIGUpLCBbIHQsIGUgXSksIG4gXTsKICAgICAgICB9CiAgICB9LCB5aSA9IHsKICAgICAgICByZWFkQ29udGV4dDogcm8sCiAgICAgICAgdXNlQ2FsbGJhY2s6IGRpLAogICAgICAgIHVzZUNvbnRleHQ6IHJvLAogICAgICAgIHVzZUVmZmVjdDogaWksCiAgICAgICAgdXNlSW1wZXJhdGl2ZUhhbmRsZTogY2ksCiAgICAgICAgdXNlTGF5b3V0RWZmZWN0OiBsaSwKICAgICAgICB1c2VNZW1vOiBwaSwKICAgICAgICB1c2VSZWR1Y2VyOiBKbywKICAgICAgICB1c2VSZWY6IG5pLAogICAgICAgIHVzZVN0YXRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIEpvKFhvKTsKICAgICAgICB9LAogICAgICAgIHVzZURlYnVnVmFsdWU6IHNpLAogICAgICAgIHVzZVJlc3BvbmRlcjogTG8sCiAgICAgICAgdXNlRGVmZXJyZWRWYWx1ZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgbiA9IEpvKFhvKSwgciA9IG5bMF0sIGEgPSBuWzFdOwogICAgICAgICAgICByZXR1cm4gaWkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBVby5zdXNwZW5zZTsKICAgICAgICAgICAgICAgIFVvLnN1c3BlbnNlID0gdm9pZCAwID09PSB0ID8gbnVsbCA6IHQ7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGEoZSk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIFVvLnN1c3BlbnNlID0gbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIFsgZSwgdCBdKSwgcjsKICAgICAgICB9LAogICAgICAgIHVzZVRyYW5zaXRpb246IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBKbyhYbyksIG4gPSB0WzBdOwogICAgICAgICAgICByZXR1cm4gdCA9IHRbMV0sIFsgZGkoZ2kuYmluZChudWxsLCB0LCBlKSwgWyB0LCBlIF0pLCBuIF07CiAgICAgICAgfQogICAgfSwgd2kgPSBudWxsLCBraSA9IG51bGwsIHhpID0gITE7CiAgICBmdW5jdGlvbiBFaShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBTdSg1LCBudWxsLCBudWxsLCAwKTsKICAgICAgICBuLmVsZW1lbnRUeXBlID0gIkRFTEVURUQiLCBuLnR5cGUgPSAiREVMRVRFRCIsIG4uc3RhdGVOb2RlID0gdCwgbi5yZXR1cm4gPSBlLCBuLmVmZmVjdFRhZyA9IDgsIAogICAgICAgIG51bGwgIT09IGUubGFzdEVmZmVjdCA/IChlLmxhc3RFZmZlY3QubmV4dEVmZmVjdCA9IG4sIGUubGFzdEVmZmVjdCA9IG4pIDogZS5maXJzdEVmZmVjdCA9IGUubGFzdEVmZmVjdCA9IG47CiAgICB9CiAgICBmdW5jdGlvbiBTaShlLCB0KSB7CiAgICAgICAgc3dpdGNoIChlLnRhZykgewogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICB2YXIgbiA9IGUudHlwZTsKICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09ICh0ID0gMSAhPT0gdC5ub2RlVHlwZSB8fCBuLnRvTG93ZXJDYXNlKCkgIT09IHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA/IG51bGwgOiB0KSAmJiAoZS5zdGF0ZU5vZGUgPSB0LCAKICAgICAgICAgICAgITApOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgcmV0dXJuIG51bGwgIT09ICh0ID0gIiIgPT09IGUucGVuZGluZ1Byb3BzIHx8IDMgIT09IHQubm9kZVR5cGUgPyBudWxsIDogdCkgJiYgKGUuc3RhdGVOb2RlID0gdCwgCiAgICAgICAgICAgICEwKTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIE9pKGUpIHsKICAgICAgICBpZiAoeGkpIHsKICAgICAgICAgICAgdmFyIHQgPSBraTsKICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gdDsKICAgICAgICAgICAgICAgIGlmICghU2koZSwgdCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0ga24obi5uZXh0U2libGluZykpIHx8ICFTaShlLCB0KSkgcmV0dXJuIGUuZWZmZWN0VGFnID0gLTEwMjUgJiBlLmVmZmVjdFRhZyB8IDIsIAogICAgICAgICAgICAgICAgICAgIHhpID0gITEsIHZvaWQgKHdpID0gZSk7CiAgICAgICAgICAgICAgICAgICAgRWkod2ksIG4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2kgPSBlLCBraSA9IGtuKHQuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgIH0gZWxzZSBlLmVmZmVjdFRhZyA9IC0xMDI1ICYgZS5lZmZlY3RUYWcgfCAyLCB4aSA9ICExLCB3aSA9IGU7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gQ2koZSkgewogICAgICAgIGZvciAoZSA9IGUucmV0dXJuOyBudWxsICE9PSBlICYmIDUgIT09IGUudGFnICYmIDMgIT09IGUudGFnICYmIDEzICE9PSBlLnRhZzsgKSBlID0gZS5yZXR1cm47CiAgICAgICAgd2kgPSBlOwogICAgfQogICAgZnVuY3Rpb24gVGkoZSkgewogICAgICAgIGlmIChlICE9PSB3aSkgcmV0dXJuICExOwogICAgICAgIGlmICgheGkpIHJldHVybiBDaShlKSwgeGkgPSAhMCwgITE7CiAgICAgICAgdmFyIHQgPSBlLnR5cGU7CiAgICAgICAgaWYgKDUgIT09IGUudGFnIHx8ICJoZWFkIiAhPT0gdCAmJiAiYm9keSIgIT09IHQgJiYgIXZuKHQsIGUubWVtb2l6ZWRQcm9wcykpIGZvciAodCA9IGtpOyB0OyApIEVpKGUsIHQpLCAKICAgICAgICB0ID0ga24odC5uZXh0U2libGluZyk7CiAgICAgICAgaWYgKENpKGUpLCAxMyA9PT0gZS50YWcpIHsKICAgICAgICAgICAgaWYgKCEoZSA9IG51bGwgIT09IChlID0gZS5tZW1vaXplZFN0YXRlKSA/IGUuZGVoeWRyYXRlZCA6IG51bGwpKSB0aHJvdyBFcnJvcihpKDMxNykpOwogICAgICAgICAgICBlOiB7CiAgICAgICAgICAgICAgICBmb3IgKGUgPSBlLm5leHRTaWJsaW5nLCB0ID0gMDsgZTsgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDggPT09IGUubm9kZVR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLmRhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiLyQiID09PSBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpID0ga24oZS5uZXh0U2libGluZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQtLTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlICIkIiAhPT0gbiAmJiAiJCEiICE9PSBuICYmICIkPyIgIT09IG4gfHwgdCsrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlID0gZS5uZXh0U2libGluZzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGtpID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBraSA9IHdpID8ga24oZS5zdGF0ZU5vZGUubmV4dFNpYmxpbmcpIDogbnVsbDsKICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgICBmdW5jdGlvbiBQaSgpIHsKICAgICAgICBraSA9IHdpID0gbnVsbCwgeGkgPSAhMTsKICAgIH0KICAgIHZhciBfaSA9IFkuUmVhY3RDdXJyZW50T3duZXIsIGppID0gITE7CiAgICBmdW5jdGlvbiBJaShlLCB0LCBuLCByKSB7CiAgICAgICAgdC5jaGlsZCA9IG51bGwgPT09IGUgPyBDbyh0LCBudWxsLCBuLCByKSA6IE9vKHQsIGUuY2hpbGQsIG4sIHIpOwogICAgfQogICAgZnVuY3Rpb24gTmkoZSwgdCwgbiwgciwgYSkgewogICAgICAgIG4gPSBuLnJlbmRlcjsKICAgICAgICB2YXIgbyA9IHQucmVmOwogICAgICAgIHJldHVybiBubyh0LCBhKSwgciA9IEdvKGUsIHQsIG4sIHIsIG8sIGEpLCBudWxsID09PSBlIHx8IGppID8gKHQuZWZmZWN0VGFnIHw9IDEsIAogICAgICAgIElpKGUsIHQsIHIsIGEpLCB0LmNoaWxkKSA6ICh0LnVwZGF0ZVF1ZXVlID0gZS51cGRhdGVRdWV1ZSwgdC5lZmZlY3RUYWcgJj0gLTUxNywgCiAgICAgICAgZS5leHBpcmF0aW9uVGltZSA8PSBhICYmIChlLmV4cGlyYXRpb25UaW1lID0gMCksIEdpKGUsIHQsIGEpKTsKICAgIH0KICAgIGZ1bmN0aW9uIEFpKGUsIHQsIG4sIHIsIGEsIG8pIHsKICAgICAgICBpZiAobnVsbCA9PT0gZSkgewogICAgICAgICAgICB2YXIgaSA9IG4udHlwZTsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgIT0gdHlwZW9mIGkgfHwgT3UoaSkgfHwgdm9pZCAwICE9PSBpLmRlZmF1bHRQcm9wcyB8fCBudWxsICE9PSBuLmNvbXBhcmUgfHwgdm9pZCAwICE9PSBuLmRlZmF1bHRQcm9wcyA/ICgoZSA9IFR1KG4udHlwZSwgbnVsbCwgciwgbnVsbCwgdC5tb2RlLCBvKSkucmVmID0gdC5yZWYsIAogICAgICAgICAgICBlLnJldHVybiA9IHQsIHQuY2hpbGQgPSBlKSA6ICh0LnRhZyA9IDE1LCB0LnR5cGUgPSBpLCBEaShlLCB0LCBpLCByLCBhLCBvKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBpID0gZS5jaGlsZCwgYSA8IG8gJiYgKGEgPSBpLm1lbW9pemVkUHJvcHMsIChuID0gbnVsbCAhPT0gKG4gPSBuLmNvbXBhcmUpID8gbiA6IEZyKShhLCByKSAmJiBlLnJlZiA9PT0gdC5yZWYpID8gR2koZSwgdCwgbykgOiAodC5lZmZlY3RUYWcgfD0gMSwgCiAgICAgICAgKGUgPSBDdShpLCByKSkucmVmID0gdC5yZWYsIGUucmV0dXJuID0gdCwgdC5jaGlsZCA9IGUpOwogICAgfQogICAgZnVuY3Rpb24gRGkoZSwgdCwgbiwgciwgYSwgbykgewogICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIEZyKGUubWVtb2l6ZWRQcm9wcywgcikgJiYgZS5yZWYgPT09IHQucmVmICYmIChqaSA9ICExLCBhIDwgbykgPyAodC5leHBpcmF0aW9uVGltZSA9IGUuZXhwaXJhdGlvblRpbWUsIAogICAgICAgIEdpKGUsIHQsIG8pKSA6IE1pKGUsIHQsIG4sIHIsIG8pOwogICAgfQogICAgZnVuY3Rpb24gUmkoZSwgdCkgewogICAgICAgIHZhciBuID0gdC5yZWY7CiAgICAgICAgKG51bGwgPT09IGUgJiYgbnVsbCAhPT0gbiB8fCBudWxsICE9PSBlICYmIGUucmVmICE9PSBuKSAmJiAodC5lZmZlY3RUYWcgfD0gMTI4KTsKICAgIH0KICAgIGZ1bmN0aW9uIE1pKGUsIHQsIG4sIHIsIGEpIHsKICAgICAgICB2YXIgbyA9IGhhKG4pID8gcGEgOiBmYS5jdXJyZW50OwogICAgICAgIHJldHVybiBvID0gZ2EodCwgbyksIG5vKHQsIGEpLCBuID0gR28oZSwgdCwgbiwgciwgbywgYSksIG51bGwgPT09IGUgfHwgamkgPyAodC5lZmZlY3RUYWcgfD0gMSwgCiAgICAgICAgSWkoZSwgdCwgbiwgYSksIHQuY2hpbGQpIDogKHQudXBkYXRlUXVldWUgPSBlLnVwZGF0ZVF1ZXVlLCB0LmVmZmVjdFRhZyAmPSAtNTE3LCAKICAgICAgICBlLmV4cGlyYXRpb25UaW1lIDw9IGEgJiYgKGUuZXhwaXJhdGlvblRpbWUgPSAwKSwgR2koZSwgdCwgYSkpOwogICAgfQogICAgZnVuY3Rpb24gemkoZSwgdCwgbiwgciwgYSkgewogICAgICAgIGlmIChoYShuKSkgewogICAgICAgICAgICB2YXIgbyA9ICEwOwogICAgICAgICAgICB5YSh0KTsKICAgICAgICB9IGVsc2UgbyA9ICExOwogICAgICAgIGlmIChubyh0LCBhKSwgbnVsbCA9PT0gdC5zdGF0ZU5vZGUpIG51bGwgIT09IGUgJiYgKGUuYWx0ZXJuYXRlID0gbnVsbCwgdC5hbHRlcm5hdGUgPSBudWxsLCAKICAgICAgICB0LmVmZmVjdFRhZyB8PSAyKSwgdm8odCwgbiwgciksIHdvKHQsIG4sIHIsIGEpLCByID0gITA7IGVsc2UgaWYgKG51bGwgPT09IGUpIHsKICAgICAgICAgICAgdmFyIGkgPSB0LnN0YXRlTm9kZSwgbCA9IHQubWVtb2l6ZWRQcm9wczsKICAgICAgICAgICAgaS5wcm9wcyA9IGw7CiAgICAgICAgICAgIHZhciB1ID0gaS5jb250ZXh0LCBjID0gbi5jb250ZXh0VHlwZTsKICAgICAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIGMgJiYgbnVsbCAhPT0gYyA/IGMgPSBybyhjKSA6IGMgPSBnYSh0LCBjID0gaGEobikgPyBwYSA6IGZhLmN1cnJlbnQpOwogICAgICAgICAgICB2YXIgcyA9IG4uZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzLCBmID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgcyB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiBpLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlOwogICAgICAgICAgICBmIHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIGkuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYgImZ1bmN0aW9uIiAhPSB0eXBlb2YgaS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIHx8IChsICE9PSByIHx8IHUgIT09IGMpICYmIHlvKHQsIGksIHIsIGMpLCAKICAgICAgICAgICAgYW8gPSAhMTsKICAgICAgICAgICAgdmFyIGQgPSB0Lm1lbW9pemVkU3RhdGU7CiAgICAgICAgICAgIGkuc3RhdGUgPSBkLCBzbyh0LCByLCBpLCBhKSwgdSA9IHQubWVtb2l6ZWRTdGF0ZSwgbCAhPT0gciB8fCBkICE9PSB1IHx8IGRhLmN1cnJlbnQgfHwgYW8gPyAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgcyAmJiAoaG8odCwgbiwgcywgciksIAogICAgICAgICAgICB1ID0gdC5tZW1vaXplZFN0YXRlKSwgKGwgPSBhbyB8fCBibyh0LCBuLCBsLCByLCBkLCB1LCBjKSkgPyAoZiB8fCAiZnVuY3Rpb24iICE9IHR5cGVvZiBpLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQgJiYgImZ1bmN0aW9uIiAhPSB0eXBlb2YgaS5jb21wb25lbnRXaWxsTW91bnQgfHwgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGkuY29tcG9uZW50V2lsbE1vdW50ICYmIGkuY29tcG9uZW50V2lsbE1vdW50KCksIAogICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBpLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQgJiYgaS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkpLCAKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgaS5jb21wb25lbnREaWRNb3VudCAmJiAodC5lZmZlY3RUYWcgfD0gNCkpIDogKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGkuY29tcG9uZW50RGlkTW91bnQgJiYgKHQuZWZmZWN0VGFnIHw9IDQpLCAKICAgICAgICAgICAgdC5tZW1vaXplZFByb3BzID0gciwgdC5tZW1vaXplZFN0YXRlID0gdSksIGkucHJvcHMgPSByLCBpLnN0YXRlID0gdSwgaS5jb250ZXh0ID0gYywgCiAgICAgICAgICAgIHIgPSBsKSA6ICgiZnVuY3Rpb24iID09IHR5cGVvZiBpLmNvbXBvbmVudERpZE1vdW50ICYmICh0LmVmZmVjdFRhZyB8PSA0KSwgciA9ICExKTsKICAgICAgICB9IGVsc2UgaSA9IHQuc3RhdGVOb2RlLCBpbyhlLCB0KSwgbCA9IHQubWVtb2l6ZWRQcm9wcywgaS5wcm9wcyA9IHQudHlwZSA9PT0gdC5lbGVtZW50VHlwZSA/IGwgOiBHYSh0LnR5cGUsIGwpLCAKICAgICAgICB1ID0gaS5jb250ZXh0LCAib2JqZWN0IiA9PSB0eXBlb2YgKGMgPSBuLmNvbnRleHRUeXBlKSAmJiBudWxsICE9PSBjID8gYyA9IHJvKGMpIDogYyA9IGdhKHQsIGMgPSBoYShuKSA/IHBhIDogZmEuY3VycmVudCksIAogICAgICAgIChmID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgKHMgPSBuLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcykgfHwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgaS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSkgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgaS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiBpLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgfHwgKGwgIT09IHIgfHwgdSAhPT0gYykgJiYgeW8odCwgaSwgciwgYyksIAogICAgICAgIGFvID0gITEsIHUgPSB0Lm1lbW9pemVkU3RhdGUsIGkuc3RhdGUgPSB1LCBzbyh0LCByLCBpLCBhKSwgZCA9IHQubWVtb2l6ZWRTdGF0ZSwgCiAgICAgICAgbCAhPT0gciB8fCB1ICE9PSBkIHx8IGRhLmN1cnJlbnQgfHwgYW8gPyAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgcyAmJiAoaG8odCwgbiwgcywgciksIAogICAgICAgIGQgPSB0Lm1lbW9pemVkU3RhdGUpLCAocyA9IGFvIHx8IGJvKHQsIG4sIGwsIHIsIHUsIGQsIGMpKSA/IChmIHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIGkuVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUgJiYgImZ1bmN0aW9uIiAhPSB0eXBlb2YgaS5jb21wb25lbnRXaWxsVXBkYXRlIHx8ICgiZnVuY3Rpb24iID09IHR5cGVvZiBpLmNvbXBvbmVudFdpbGxVcGRhdGUgJiYgaS5jb21wb25lbnRXaWxsVXBkYXRlKHIsIGQsIGMpLCAKICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBpLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlICYmIGkuVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUociwgZCwgYykpLCAKICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBpLmNvbXBvbmVudERpZFVwZGF0ZSAmJiAodC5lZmZlY3RUYWcgfD0gNCksICJmdW5jdGlvbiIgPT0gdHlwZW9mIGkuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUgJiYgKHQuZWZmZWN0VGFnIHw9IDI1NikpIDogKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGkuY29tcG9uZW50RGlkVXBkYXRlIHx8IGwgPT09IGUubWVtb2l6ZWRQcm9wcyAmJiB1ID09PSBlLm1lbW9pemVkU3RhdGUgfHwgKHQuZWZmZWN0VGFnIHw9IDQpLCAKICAgICAgICAiZnVuY3Rpb24iICE9IHR5cGVvZiBpLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlIHx8IGwgPT09IGUubWVtb2l6ZWRQcm9wcyAmJiB1ID09PSBlLm1lbW9pemVkU3RhdGUgfHwgKHQuZWZmZWN0VGFnIHw9IDI1NiksIAogICAgICAgIHQubWVtb2l6ZWRQcm9wcyA9IHIsIHQubWVtb2l6ZWRTdGF0ZSA9IGQpLCBpLnByb3BzID0gciwgaS5zdGF0ZSA9IGQsIGkuY29udGV4dCA9IGMsIAogICAgICAgIHIgPSBzKSA6ICgiZnVuY3Rpb24iICE9IHR5cGVvZiBpLmNvbXBvbmVudERpZFVwZGF0ZSB8fCBsID09PSBlLm1lbW9pemVkUHJvcHMgJiYgdSA9PT0gZS5tZW1vaXplZFN0YXRlIHx8ICh0LmVmZmVjdFRhZyB8PSA0KSwgCiAgICAgICAgImZ1bmN0aW9uIiAhPSB0eXBlb2YgaS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSB8fCBsID09PSBlLm1lbW9pemVkUHJvcHMgJiYgdSA9PT0gZS5tZW1vaXplZFN0YXRlIHx8ICh0LmVmZmVjdFRhZyB8PSAyNTYpLCAKICAgICAgICByID0gITEpOwogICAgICAgIHJldHVybiBMaShlLCB0LCBuLCByLCBvLCBhKTsKICAgIH0KICAgIGZ1bmN0aW9uIExpKGUsIHQsIG4sIHIsIGEsIG8pIHsKICAgICAgICBSaShlLCB0KTsKICAgICAgICB2YXIgaSA9IDAgIT0gKDY0ICYgdC5lZmZlY3RUYWcpOwogICAgICAgIGlmICghciAmJiAhaSkgcmV0dXJuIGEgJiYgd2EodCwgbiwgITEpLCBHaShlLCB0LCBvKTsKICAgICAgICByID0gdC5zdGF0ZU5vZGUsIF9pLmN1cnJlbnQgPSB0OwogICAgICAgIHZhciBsID0gaSAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiBuLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvciA/IG51bGwgOiByLnJlbmRlcigpOwogICAgICAgIHJldHVybiB0LmVmZmVjdFRhZyB8PSAxLCBudWxsICE9PSBlICYmIGkgPyAodC5jaGlsZCA9IE9vKHQsIGUuY2hpbGQsIG51bGwsIG8pLCB0LmNoaWxkID0gT28odCwgbnVsbCwgbCwgbykpIDogSWkoZSwgdCwgbCwgbyksIAogICAgICAgIHQubWVtb2l6ZWRTdGF0ZSA9IHIuc3RhdGUsIGEgJiYgd2EodCwgbiwgITApLCB0LmNoaWxkOwogICAgfQogICAgZnVuY3Rpb24gRmkoZSkgewogICAgICAgIHZhciB0ID0gZS5zdGF0ZU5vZGU7CiAgICAgICAgdC5wZW5kaW5nQ29udGV4dCA/IGJhKDAsIHQucGVuZGluZ0NvbnRleHQsIHQucGVuZGluZ0NvbnRleHQgIT09IHQuY29udGV4dCkgOiB0LmNvbnRleHQgJiYgYmEoMCwgdC5jb250ZXh0LCAhMSksIAogICAgICAgIE5vKGUsIHQuY29udGFpbmVySW5mbyk7CiAgICB9CiAgICB2YXIgVWksIFdpLCBWaSwgJGkgPSB7CiAgICAgICAgZGVoeWRyYXRlZDogbnVsbCwKICAgICAgICByZXRyeVRpbWU6IDAKICAgIH07CiAgICBmdW5jdGlvbiBxaShlLCB0LCBuKSB7CiAgICAgICAgdmFyIHIsIGEgPSB0Lm1vZGUsIG8gPSB0LnBlbmRpbmdQcm9wcywgaSA9IE1vLmN1cnJlbnQsIGwgPSAhMTsKICAgICAgICBpZiAoKHIgPSAwICE9ICg2NCAmIHQuZWZmZWN0VGFnKSkgfHwgKHIgPSAwICE9ICgyICYgaSkgJiYgKG51bGwgPT09IGUgfHwgbnVsbCAhPT0gZS5tZW1vaXplZFN0YXRlKSksIAogICAgICAgIHIgPyAobCA9ICEwLCB0LmVmZmVjdFRhZyAmPSAtNjUpIDogbnVsbCAhPT0gZSAmJiBudWxsID09PSBlLm1lbW9pemVkU3RhdGUgfHwgdm9pZCAwID09PSBvLmZhbGxiYWNrIHx8ICEwID09PSBvLnVuc3RhYmxlX2F2b2lkVGhpc0ZhbGxiYWNrIHx8IChpIHw9IDEpLCAKICAgICAgICBjYShNbywgMSAmIGkpLCBudWxsID09PSBlKSB7CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IG8uZmFsbGJhY2sgJiYgT2kodCksIGwpIHsKICAgICAgICAgICAgICAgIGlmIChsID0gby5mYWxsYmFjaywgKG8gPSBQdShudWxsLCBhLCAwLCBudWxsKSkucmV0dXJuID0gdCwgMCA9PSAoMiAmIHQubW9kZSkpIGZvciAoZSA9IG51bGwgIT09IHQubWVtb2l6ZWRTdGF0ZSA/IHQuY2hpbGQuY2hpbGQgOiB0LmNoaWxkLCAKICAgICAgICAgICAgICAgIG8uY2hpbGQgPSBlOyBudWxsICE9PSBlOyApIGUucmV0dXJuID0gbywgZSA9IGUuc2libGluZzsKICAgICAgICAgICAgICAgIHJldHVybiAobiA9IFB1KGwsIGEsIG4sIG51bGwpKS5yZXR1cm4gPSB0LCBvLnNpYmxpbmcgPSBuLCB0Lm1lbW9pemVkU3RhdGUgPSAkaSwgCiAgICAgICAgICAgICAgICB0LmNoaWxkID0gbywgbjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYSA9IG8uY2hpbGRyZW4sIHQubWVtb2l6ZWRTdGF0ZSA9IG51bGwsIHQuY2hpbGQgPSBDbyh0LCBudWxsLCBhLCBuKTsKICAgICAgICB9CiAgICAgICAgaWYgKG51bGwgIT09IGUubWVtb2l6ZWRTdGF0ZSkgewogICAgICAgICAgICBpZiAoYSA9IChlID0gZS5jaGlsZCkuc2libGluZywgbCkgewogICAgICAgICAgICAgICAgaWYgKG8gPSBvLmZhbGxiYWNrLCAobiA9IEN1KGUsIGUucGVuZGluZ1Byb3BzKSkucmV0dXJuID0gdCwgMCA9PSAoMiAmIHQubW9kZSkgJiYgKGwgPSBudWxsICE9PSB0Lm1lbW9pemVkU3RhdGUgPyB0LmNoaWxkLmNoaWxkIDogdC5jaGlsZCkgIT09IGUuY2hpbGQpIGZvciAobi5jaGlsZCA9IGw7IG51bGwgIT09IGw7ICkgbC5yZXR1cm4gPSBuLCAKICAgICAgICAgICAgICAgIGwgPSBsLnNpYmxpbmc7CiAgICAgICAgICAgICAgICByZXR1cm4gKGEgPSBDdShhLCBvKSkucmV0dXJuID0gdCwgbi5zaWJsaW5nID0gYSwgbi5jaGlsZEV4cGlyYXRpb25UaW1lID0gMCwgdC5tZW1vaXplZFN0YXRlID0gJGksIAogICAgICAgICAgICAgICAgdC5jaGlsZCA9IG4sIGE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG4gPSBPbyh0LCBlLmNoaWxkLCBvLmNoaWxkcmVuLCBuKSwgdC5tZW1vaXplZFN0YXRlID0gbnVsbCwgdC5jaGlsZCA9IG47CiAgICAgICAgfQogICAgICAgIGlmIChlID0gZS5jaGlsZCwgbCkgewogICAgICAgICAgICBpZiAobCA9IG8uZmFsbGJhY2ssIChvID0gUHUobnVsbCwgYSwgMCwgbnVsbCkpLnJldHVybiA9IHQsIG8uY2hpbGQgPSBlLCBudWxsICE9PSBlICYmIChlLnJldHVybiA9IG8pLCAKICAgICAgICAgICAgMCA9PSAoMiAmIHQubW9kZSkpIGZvciAoZSA9IG51bGwgIT09IHQubWVtb2l6ZWRTdGF0ZSA/IHQuY2hpbGQuY2hpbGQgOiB0LmNoaWxkLCAKICAgICAgICAgICAgby5jaGlsZCA9IGU7IG51bGwgIT09IGU7ICkgZS5yZXR1cm4gPSBvLCBlID0gZS5zaWJsaW5nOwogICAgICAgICAgICByZXR1cm4gKG4gPSBQdShsLCBhLCBuLCBudWxsKSkucmV0dXJuID0gdCwgby5zaWJsaW5nID0gbiwgbi5lZmZlY3RUYWcgfD0gMiwgby5jaGlsZEV4cGlyYXRpb25UaW1lID0gMCwgCiAgICAgICAgICAgIHQubWVtb2l6ZWRTdGF0ZSA9ICRpLCB0LmNoaWxkID0gbywgbjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHQubWVtb2l6ZWRTdGF0ZSA9IG51bGwsIHQuY2hpbGQgPSBPbyh0LCBlLCBvLmNoaWxkcmVuLCBuKTsKICAgIH0KICAgIGZ1bmN0aW9uIEJpKGUsIHQpIHsKICAgICAgICBlLmV4cGlyYXRpb25UaW1lIDwgdCAmJiAoZS5leHBpcmF0aW9uVGltZSA9IHQpOwogICAgICAgIHZhciBuID0gZS5hbHRlcm5hdGU7CiAgICAgICAgbnVsbCAhPT0gbiAmJiBuLmV4cGlyYXRpb25UaW1lIDwgdCAmJiAobi5leHBpcmF0aW9uVGltZSA9IHQpLCB0byhlLnJldHVybiwgdCk7CiAgICB9CiAgICBmdW5jdGlvbiBIaShlLCB0LCBuLCByLCBhLCBvKSB7CiAgICAgICAgdmFyIGkgPSBlLm1lbW9pemVkU3RhdGU7CiAgICAgICAgbnVsbCA9PT0gaSA/IGUubWVtb2l6ZWRTdGF0ZSA9IHsKICAgICAgICAgICAgaXNCYWNrd2FyZHM6IHQsCiAgICAgICAgICAgIHJlbmRlcmluZzogbnVsbCwKICAgICAgICAgICAgcmVuZGVyaW5nU3RhcnRUaW1lOiAwLAogICAgICAgICAgICBsYXN0OiByLAogICAgICAgICAgICB0YWlsOiBuLAogICAgICAgICAgICB0YWlsRXhwaXJhdGlvbjogMCwKICAgICAgICAgICAgdGFpbE1vZGU6IGEsCiAgICAgICAgICAgIGxhc3RFZmZlY3Q6IG8KICAgICAgICB9IDogKGkuaXNCYWNrd2FyZHMgPSB0LCBpLnJlbmRlcmluZyA9IG51bGwsIGkucmVuZGVyaW5nU3RhcnRUaW1lID0gMCwgaS5sYXN0ID0gciwgCiAgICAgICAgaS50YWlsID0gbiwgaS50YWlsRXhwaXJhdGlvbiA9IDAsIGkudGFpbE1vZGUgPSBhLCBpLmxhc3RFZmZlY3QgPSBvKTsKICAgIH0KICAgIGZ1bmN0aW9uIFFpKGUsIHQsIG4pIHsKICAgICAgICB2YXIgciA9IHQucGVuZGluZ1Byb3BzLCBhID0gci5yZXZlYWxPcmRlciwgbyA9IHIudGFpbDsKICAgICAgICBpZiAoSWkoZSwgdCwgci5jaGlsZHJlbiwgbiksIDAgIT0gKDIgJiAociA9IE1vLmN1cnJlbnQpKSkgciA9IDEgJiByIHwgMiwgdC5lZmZlY3RUYWcgfD0gNjQ7IGVsc2UgewogICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiAwICE9ICg2NCAmIGUuZWZmZWN0VGFnKSkgZTogZm9yIChlID0gdC5jaGlsZDsgbnVsbCAhPT0gZTsgKSB7CiAgICAgICAgICAgICAgICBpZiAoMTMgPT09IGUudGFnKSBudWxsICE9PSBlLm1lbW9pemVkU3RhdGUgJiYgQmkoZSwgbik7IGVsc2UgaWYgKDE5ID09PSBlLnRhZykgQmkoZSwgbik7IGVsc2UgaWYgKG51bGwgIT09IGUuY2hpbGQpIHsKICAgICAgICAgICAgICAgICAgICBlLmNoaWxkLnJldHVybiA9IGUsIGUgPSBlLmNoaWxkOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGUgPT09IHQpIGJyZWFrIGU7CiAgICAgICAgICAgICAgICBmb3IgKDtudWxsID09PSBlLnNpYmxpbmc7ICkgewogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBlLnJldHVybiB8fCBlLnJldHVybiA9PT0gdCkgYnJlYWsgZTsKICAgICAgICAgICAgICAgICAgICBlID0gZS5yZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlLnNpYmxpbmcucmV0dXJuID0gZS5yZXR1cm4sIGUgPSBlLnNpYmxpbmc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgciAmPSAxOwogICAgICAgIH0KICAgICAgICBpZiAoY2EoTW8sIHIpLCAwID09ICgyICYgdC5tb2RlKSkgdC5tZW1vaXplZFN0YXRlID0gbnVsbDsgZWxzZSBzd2l0Y2ggKGEpIHsKICAgICAgICAgIGNhc2UgImZvcndhcmRzIjoKICAgICAgICAgICAgZm9yIChuID0gdC5jaGlsZCwgYSA9IG51bGw7IG51bGwgIT09IG47ICkgbnVsbCAhPT0gKGUgPSBuLmFsdGVybmF0ZSkgJiYgbnVsbCA9PT0gem8oZSkgJiYgKGEgPSBuKSwgCiAgICAgICAgICAgIG4gPSBuLnNpYmxpbmc7CiAgICAgICAgICAgIG51bGwgPT09IChuID0gYSkgPyAoYSA9IHQuY2hpbGQsIHQuY2hpbGQgPSBudWxsKSA6IChhID0gbi5zaWJsaW5nLCBuLnNpYmxpbmcgPSBudWxsKSwgCiAgICAgICAgICAgIEhpKHQsICExLCBhLCBuLCBvLCB0Lmxhc3RFZmZlY3QpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJiYWNrd2FyZHMiOgogICAgICAgICAgICBmb3IgKG4gPSBudWxsLCBhID0gdC5jaGlsZCwgdC5jaGlsZCA9IG51bGw7IG51bGwgIT09IGE7ICkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChlID0gYS5hbHRlcm5hdGUpICYmIG51bGwgPT09IHpvKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgdC5jaGlsZCA9IGE7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlID0gYS5zaWJsaW5nLCBhLnNpYmxpbmcgPSBuLCBuID0gYSwgYSA9IGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgSGkodCwgITAsIG4sIG51bGwsIG8sIHQubGFzdEVmZmVjdCk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgInRvZ2V0aGVyIjoKICAgICAgICAgICAgSGkodCwgITEsIG51bGwsIG51bGwsIHZvaWQgMCwgdC5sYXN0RWZmZWN0KTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdC5tZW1vaXplZFN0YXRlID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHQuY2hpbGQ7CiAgICB9CiAgICBmdW5jdGlvbiBHaShlLCB0LCBuKSB7CiAgICAgICAgbnVsbCAhPT0gZSAmJiAodC5kZXBlbmRlbmNpZXMgPSBlLmRlcGVuZGVuY2llcyk7CiAgICAgICAgdmFyIHIgPSB0LmV4cGlyYXRpb25UaW1lOwogICAgICAgIGlmICgwICE9PSByICYmIGl1KHIpLCB0LmNoaWxkRXhwaXJhdGlvblRpbWUgPCBuKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0LmNoaWxkICE9PSBlLmNoaWxkKSB0aHJvdyBFcnJvcihpKDE1MykpOwogICAgICAgIGlmIChudWxsICE9PSB0LmNoaWxkKSB7CiAgICAgICAgICAgIGZvciAobiA9IEN1KGUgPSB0LmNoaWxkLCBlLnBlbmRpbmdQcm9wcyksIHQuY2hpbGQgPSBuLCBuLnJldHVybiA9IHQ7IG51bGwgIT09IGUuc2libGluZzsgKSBlID0gZS5zaWJsaW5nLCAKICAgICAgICAgICAgKG4gPSBuLnNpYmxpbmcgPSBDdShlLCBlLnBlbmRpbmdQcm9wcykpLnJldHVybiA9IHQ7CiAgICAgICAgICAgIG4uc2libGluZyA9IG51bGw7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0LmNoaWxkOwogICAgfQogICAgZnVuY3Rpb24gS2koZSwgdCkgewogICAgICAgIHN3aXRjaCAoZS50YWlsTW9kZSkgewogICAgICAgICAgY2FzZSAiaGlkZGVuIjoKICAgICAgICAgICAgdCA9IGUudGFpbDsKICAgICAgICAgICAgZm9yICh2YXIgbiA9IG51bGw7IG51bGwgIT09IHQ7ICkgbnVsbCAhPT0gdC5hbHRlcm5hdGUgJiYgKG4gPSB0KSwgdCA9IHQuc2libGluZzsKICAgICAgICAgICAgbnVsbCA9PT0gbiA/IGUudGFpbCA9IG51bGwgOiBuLnNpYmxpbmcgPSBudWxsOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJjb2xsYXBzZWQiOgogICAgICAgICAgICBuID0gZS50YWlsOwogICAgICAgICAgICBmb3IgKHZhciByID0gbnVsbDsgbnVsbCAhPT0gbjsgKSBudWxsICE9PSBuLmFsdGVybmF0ZSAmJiAociA9IG4pLCBuID0gbi5zaWJsaW5nOwogICAgICAgICAgICBudWxsID09PSByID8gdCB8fCBudWxsID09PSBlLnRhaWwgPyBlLnRhaWwgPSBudWxsIDogZS50YWlsLnNpYmxpbmcgPSBudWxsIDogci5zaWJsaW5nID0gbnVsbDsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBZaShlLCB0LCBuKSB7CiAgICAgICAgdmFyIHIgPSB0LnBlbmRpbmdQcm9wczsKICAgICAgICBzd2l0Y2ggKHQudGFnKSB7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gaGEodC50eXBlKSAmJiBtYSgpLCBudWxsOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIEFvKCksIHVhKGRhKSwgdWEoZmEpLCAobiA9IHQuc3RhdGVOb2RlKS5wZW5kaW5nQ29udGV4dCAmJiAobi5jb250ZXh0ID0gbi5wZW5kaW5nQ29udGV4dCwgCiAgICAgICAgICAgIG4ucGVuZGluZ0NvbnRleHQgPSBudWxsKSwgbnVsbCAhPT0gZSAmJiBudWxsICE9PSBlLmNoaWxkIHx8ICFUaSh0KSB8fCAodC5lZmZlY3RUYWcgfD0gNCksIAogICAgICAgICAgICBudWxsOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgUm8odCksIG4gPSBJbyhqby5jdXJyZW50KTsKICAgICAgICAgICAgdmFyIG8gPSB0LnR5cGU7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmIG51bGwgIT0gdC5zdGF0ZU5vZGUpIFdpKGUsIHQsIG8sIHIsIG4pLCBlLnJlZiAhPT0gdC5yZWYgJiYgKHQuZWZmZWN0VGFnIHw9IDEyOCk7IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKCFyKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQuc3RhdGVOb2RlKSB0aHJvdyBFcnJvcihpKDE2NikpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGUgPSBJbyhQby5jdXJyZW50KSwgVGkodCkpIHsKICAgICAgICAgICAgICAgICAgICByID0gdC5zdGF0ZU5vZGUsIG8gPSB0LnR5cGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSB0Lm1lbW9pemVkUHJvcHM7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyW1NuXSA9IHQsIHJbT25dID0gbCwgbykgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiaWZyYW1lIjoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm9iamVjdCI6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbWJlZCI6CiAgICAgICAgICAgICAgICAgICAgICAgIFF0KCJsb2FkIiwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInZpZGVvIjoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImF1ZGlvIjoKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChlID0gMDsgZSA8IFllLmxlbmd0aDsgZSsrKSBRdChZZVtlXSwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInNvdXJjZSI6CiAgICAgICAgICAgICAgICAgICAgICAgIFF0KCJlcnJvciIsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJpbWciOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiaW1hZ2UiOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAibGluayI6CiAgICAgICAgICAgICAgICAgICAgICAgIFF0KCJlcnJvciIsIHIpLCBRdCgibG9hZCIsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJmb3JtIjoKICAgICAgICAgICAgICAgICAgICAgICAgUXQoInJlc2V0IiwgciksIFF0KCJzdWJtaXQiLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGV0YWlscyI6CiAgICAgICAgICAgICAgICAgICAgICAgIFF0KCJ0b2dnbGUiLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgICAgICAgICAgICAgICAgICBFZShyLCBsKSwgUXQoImludmFsaWQiLCByKSwgdW4obiwgIm9uQ2hhbmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHIuX3dyYXBwZXJTdGF0ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhc011bHRpcGxlOiAhIWwubXVsdGlwbGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwgUXQoImludmFsaWQiLCByKSwgdW4obiwgIm9uQ2hhbmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICAgICAgICAgICAgICAgICAgSWUociwgbCksIFF0KCJpbnZhbGlkIiwgciksIHVuKG4sICJvbkNoYW5nZSIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB1IGluIGFuKG8sIGwpLCBlID0gbnVsbCwgbCkgaWYgKGwuaGFzT3duUHJvcGVydHkodSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBsW3VdOwogICAgICAgICAgICAgICAgICAgICAgICAiY2hpbGRyZW4iID09PSB1ID8gInN0cmluZyIgPT0gdHlwZW9mIGMgPyByLnRleHRDb250ZW50ICE9PSBjICYmIChlID0gWyAiY2hpbGRyZW4iLCBjIF0pIDogIm51bWJlciIgPT0gdHlwZW9mIGMgJiYgci50ZXh0Q29udGVudCAhPT0gIiIgKyBjICYmIChlID0gWyAiY2hpbGRyZW4iLCAiIiArIGMgXSkgOiBTLmhhc093blByb3BlcnR5KHUpICYmIG51bGwgIT0gYyAmJiB1bihuLCB1KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvKSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJpbnB1dCI6CiAgICAgICAgICAgICAgICAgICAgICAgIHdlKHIpLCBDZShyLCBsLCAhMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICAgICAgICAgICAgICAgICAgd2UociksIEFlKHIpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3QiOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAib3B0aW9uIjoKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbC5vbkNsaWNrICYmIChyLm9uY2xpY2sgPSBjbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG4gPSBlLCB0LnVwZGF0ZVF1ZXVlID0gbiwgbnVsbCAhPT0gbiAmJiAodC5lZmZlY3RUYWcgfD0gNCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodSA9IDkgPT09IG4ubm9kZVR5cGUgPyBuIDogbi5vd25lckRvY3VtZW50LCBlID09PSBsbiAmJiAoZSA9IE1lKG8pKSwgZSA9PT0gbG4gPyAic2NyaXB0IiA9PT0gbyA/ICgoZSA9IHUuY3JlYXRlRWxlbWVudCgiZGl2IikpLmlubmVySFRNTCA9ICI8c2NyaXB0PjxcL3NjcmlwdD4iLCAKICAgICAgICAgICAgICAgICAgICBlID0gZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpKSA6ICJzdHJpbmciID09IHR5cGVvZiByLmlzID8gZSA9IHUuY3JlYXRlRWxlbWVudChvLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzOiByLmlzCiAgICAgICAgICAgICAgICAgICAgfSkgOiAoZSA9IHUuY3JlYXRlRWxlbWVudChvKSwgInNlbGVjdCIgPT09IG8gJiYgKHUgPSBlLCByLm11bHRpcGxlID8gdS5tdWx0aXBsZSA9ICEwIDogci5zaXplICYmICh1LnNpemUgPSByLnNpemUpKSkgOiBlID0gdS5jcmVhdGVFbGVtZW50TlMoZSwgbyksIAogICAgICAgICAgICAgICAgICAgIGVbU25dID0gdCwgZVtPbl0gPSByLCBVaShlLCB0KSwgdC5zdGF0ZU5vZGUgPSBlLCB1ID0gb24obywgciksIG8pIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImlmcmFtZSI6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW1iZWQiOgogICAgICAgICAgICAgICAgICAgICAgICBRdCgibG9hZCIsIGUpLCBjID0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAidmlkZW8iOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiYXVkaW8iOgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSAwOyBjIDwgWWUubGVuZ3RoOyBjKyspIFF0KFllW2NdLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInNvdXJjZSI6CiAgICAgICAgICAgICAgICAgICAgICAgIFF0KCJlcnJvciIsIGUpLCBjID0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiaW1nIjoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImltYWdlIjoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImxpbmsiOgogICAgICAgICAgICAgICAgICAgICAgICBRdCgiZXJyb3IiLCBlKSwgUXQoImxvYWQiLCBlKSwgYyA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImZvcm0iOgogICAgICAgICAgICAgICAgICAgICAgICBRdCgicmVzZXQiLCBlKSwgUXQoInN1Ym1pdCIsIGUpLCBjID0gcjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZGV0YWlscyI6CiAgICAgICAgICAgICAgICAgICAgICAgIFF0KCJ0b2dnbGUiLCBlKSwgYyA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgICAgICAgICAgICAgICAgRWUoZSwgciksIGMgPSB4ZShlLCByKSwgUXQoImludmFsaWQiLCBlKSwgdW4obiwgIm9uQ2hhbmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm9wdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBQZShlLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgICAgICAgICAgICAgZS5fd3JhcHBlclN0YXRlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FzTXVsdGlwbGU6ICEhci5tdWx0aXBsZQogICAgICAgICAgICAgICAgICAgICAgICB9LCBjID0gYSh7fSwgciwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9KSwgUXQoImludmFsaWQiLCBlKSwgdW4obiwgIm9uQ2hhbmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICAgICAgICAgICAgICAgICAgSWUoZSwgciksIGMgPSBqZShlLCByKSwgUXQoImludmFsaWQiLCBlKSwgdW4obiwgIm9uQ2hhbmdlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSByOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBhbihvLCBjKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGM7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsIGluIHMpIGlmIChzLmhhc093blByb3BlcnR5KGwpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gc1tsXTsKICAgICAgICAgICAgICAgICAgICAgICAgInN0eWxlIiA9PT0gbCA/IG5uKGUsIGYpIDogImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiA9PT0gbCA/IG51bGwgIT0gKGYgPSBmID8gZi5fX2h0bWwgOiB2b2lkIDApICYmIEZlKGUsIGYpIDogImNoaWxkcmVuIiA9PT0gbCA/ICJzdHJpbmciID09IHR5cGVvZiBmID8gKCJ0ZXh0YXJlYSIgIT09IG8gfHwgIiIgIT09IGYpICYmIFVlKGUsIGYpIDogIm51bWJlciIgPT0gdHlwZW9mIGYgJiYgVWUoZSwgIiIgKyBmKSA6ICJzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmciICE9PSBsICYmICJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciICE9PSBsICYmICJhdXRvRm9jdXMiICE9PSBsICYmIChTLmhhc093blByb3BlcnR5KGwpID8gbnVsbCAhPSBmICYmIHVuKG4sIGwpIDogbnVsbCAhPSBmICYmIFgoZSwgbCwgZiwgdSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG8pIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgICAgICAgICAgICAgICAgd2UoZSksIENlKGUsIHIsICExKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAidGV4dGFyZWEiOgogICAgICAgICAgICAgICAgICAgICAgICB3ZShlKSwgQWUoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIm9wdGlvbiI6CiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gci52YWx1ZSAmJiBlLnNldEF0dHJpYnV0ZSgidmFsdWUiLCAiIiArIHZlKHIudmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgICAgICAgICAgICAgZS5tdWx0aXBsZSA9ICEhci5tdWx0aXBsZSwgbnVsbCAhPSAobiA9IHIudmFsdWUpID8gX2UoZSwgISFyLm11bHRpcGxlLCBuLCAhMSkgOiBudWxsICE9IHIuZGVmYXVsdFZhbHVlICYmIF9lKGUsICEhci5tdWx0aXBsZSwgci5kZWZhdWx0VmFsdWUsICEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYy5vbkNsaWNrICYmIChlLm9uY2xpY2sgPSBjbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJuKG8sIHIpICYmICh0LmVmZmVjdFRhZyB8PSA0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG51bGwgIT09IHQucmVmICYmICh0LmVmZmVjdFRhZyB8PSAxMjgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgaWYgKGUgJiYgbnVsbCAhPSB0LnN0YXRlTm9kZSkgVmkoMCwgdCwgZS5tZW1vaXplZFByb3BzLCByKTsgZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIHIgJiYgbnVsbCA9PT0gdC5zdGF0ZU5vZGUpIHRocm93IEVycm9yKGkoMTY2KSk7CiAgICAgICAgICAgICAgICBuID0gSW8oam8uY3VycmVudCksIElvKFBvLmN1cnJlbnQpLCBUaSh0KSA/IChuID0gdC5zdGF0ZU5vZGUsIHIgPSB0Lm1lbW9pemVkUHJvcHMsIAogICAgICAgICAgICAgICAgbltTbl0gPSB0LCBuLm5vZGVWYWx1ZSAhPT0gciAmJiAodC5lZmZlY3RUYWcgfD0gNCkpIDogKChuID0gKDkgPT09IG4ubm9kZVR5cGUgPyBuIDogbi5vd25lckRvY3VtZW50KS5jcmVhdGVUZXh0Tm9kZShyKSlbU25dID0gdCwgCiAgICAgICAgICAgICAgICB0LnN0YXRlTm9kZSA9IG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIHJldHVybiB1YShNbyksIHIgPSB0Lm1lbW9pemVkU3RhdGUsIDAgIT0gKDY0ICYgdC5lZmZlY3RUYWcpID8gKHQuZXhwaXJhdGlvblRpbWUgPSBuLCAKICAgICAgICAgICAgdCkgOiAobiA9IG51bGwgIT09IHIsIHIgPSAhMSwgbnVsbCA9PT0gZSA/IHZvaWQgMCAhPT0gdC5tZW1vaXplZFByb3BzLmZhbGxiYWNrICYmIFRpKHQpIDogKHIgPSBudWxsICE9PSAobyA9IGUubWVtb2l6ZWRTdGF0ZSksIAogICAgICAgICAgICBuIHx8IG51bGwgPT09IG8gfHwgbnVsbCAhPT0gKG8gPSBlLmNoaWxkLnNpYmxpbmcpICYmIChudWxsICE9PSAobCA9IHQuZmlyc3RFZmZlY3QpID8gKHQuZmlyc3RFZmZlY3QgPSBvLCAKICAgICAgICAgICAgby5uZXh0RWZmZWN0ID0gbCkgOiAodC5maXJzdEVmZmVjdCA9IHQubGFzdEVmZmVjdCA9IG8sIG8ubmV4dEVmZmVjdCA9IG51bGwpLCBvLmVmZmVjdFRhZyA9IDgpKSwgCiAgICAgICAgICAgIG4gJiYgIXIgJiYgMCAhPSAoMiAmIHQubW9kZSkgJiYgKG51bGwgPT09IGUgJiYgITAgIT09IHQubWVtb2l6ZWRQcm9wcy51bnN0YWJsZV9hdm9pZFRoaXNGYWxsYmFjayB8fCAwICE9ICgxICYgTW8uY3VycmVudCkgPyBUbCA9PT0gd2wgJiYgKFRsID0ga2wpIDogKFRsICE9PSB3bCAmJiBUbCAhPT0ga2wgfHwgKFRsID0geGwpLCAKICAgICAgICAgICAgMCAhPT0gTmwgJiYgbnVsbCAhPT0gU2wgJiYgKEF1KFNsLCBDbCksIER1KFNsLCBObCkpKSksIChuIHx8IHIpICYmICh0LmVmZmVjdFRhZyB8PSA0KSwgCiAgICAgICAgICAgIG51bGwpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIEFvKCksIG51bGw7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgcmV0dXJuIGVvKHQpLCBudWxsOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIHJldHVybiBoYSh0LnR5cGUpICYmIG1hKCksIG51bGw7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgaWYgKHVhKE1vKSwgbnVsbCA9PT0gKHIgPSB0Lm1lbW9pemVkU3RhdGUpKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgaWYgKG8gPSAwICE9ICg2NCAmIHQuZWZmZWN0VGFnKSwgbnVsbCA9PT0gKGwgPSByLnJlbmRlcmluZykpIHsKICAgICAgICAgICAgICAgIGlmIChvKSBLaShyLCAhMSk7IGVsc2UgaWYgKFRsICE9PSB3bCB8fCBudWxsICE9PSBlICYmIDAgIT0gKDY0ICYgZS5lZmZlY3RUYWcpKSBmb3IgKGwgPSB0LmNoaWxkOyBudWxsICE9PSBsOyApIHsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKGUgPSB6byhsKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0LmVmZmVjdFRhZyB8PSA2NCwgS2kociwgITEpLCBudWxsICE9PSAobyA9IGUudXBkYXRlUXVldWUpICYmICh0LnVwZGF0ZVF1ZXVlID0gbywgCiAgICAgICAgICAgICAgICAgICAgICAgIHQuZWZmZWN0VGFnIHw9IDQpLCBudWxsID09PSByLmxhc3RFZmZlY3QgJiYgKHQuZmlyc3RFZmZlY3QgPSBudWxsKSwgdC5sYXN0RWZmZWN0ID0gci5sYXN0RWZmZWN0LCAKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuY2hpbGQ7IG51bGwgIT09IHI7ICkgbCA9IG4sIChvID0gcikuZWZmZWN0VGFnICY9IDIsIG8ubmV4dEVmZmVjdCA9IG51bGwsIG8uZmlyc3RFZmZlY3QgPSBudWxsLCAKICAgICAgICAgICAgICAgICAgICAgICAgby5sYXN0RWZmZWN0ID0gbnVsbCwgbnVsbCA9PT0gKGUgPSBvLmFsdGVybmF0ZSkgPyAoby5jaGlsZEV4cGlyYXRpb25UaW1lID0gMCwgby5leHBpcmF0aW9uVGltZSA9IGwsIAogICAgICAgICAgICAgICAgICAgICAgICBvLmNoaWxkID0gbnVsbCwgby5tZW1vaXplZFByb3BzID0gbnVsbCwgby5tZW1vaXplZFN0YXRlID0gbnVsbCwgby51cGRhdGVRdWV1ZSA9IG51bGwsIAogICAgICAgICAgICAgICAgICAgICAgICBvLmRlcGVuZGVuY2llcyA9IG51bGwpIDogKG8uY2hpbGRFeHBpcmF0aW9uVGltZSA9IGUuY2hpbGRFeHBpcmF0aW9uVGltZSwgby5leHBpcmF0aW9uVGltZSA9IGUuZXhwaXJhdGlvblRpbWUsIAogICAgICAgICAgICAgICAgICAgICAgICBvLmNoaWxkID0gZS5jaGlsZCwgby5tZW1vaXplZFByb3BzID0gZS5tZW1vaXplZFByb3BzLCBvLm1lbW9pemVkU3RhdGUgPSBlLm1lbW9pemVkU3RhdGUsIAogICAgICAgICAgICAgICAgICAgICAgICBvLnVwZGF0ZVF1ZXVlID0gZS51cGRhdGVRdWV1ZSwgbCA9IGUuZGVwZW5kZW5jaWVzLCBvLmRlcGVuZGVuY2llcyA9IG51bGwgPT09IGwgPyBudWxsIDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IGwuZXhwaXJhdGlvblRpbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdENvbnRleHQ6IGwuZmlyc3RDb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uZGVyczogbC5yZXNwb25kZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLCByID0gci5zaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2EoTW8sIDEgJiBNby5jdXJyZW50IHwgMiksIHQuY2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGwgPSBsLnNpYmxpbmc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoIW8pIGlmIChudWxsICE9PSAoZSA9IHpvKGwpKSkgewogICAgICAgICAgICAgICAgICAgIGlmICh0LmVmZmVjdFRhZyB8PSA2NCwgbyA9ICEwLCBudWxsICE9PSAobiA9IGUudXBkYXRlUXVldWUpICYmICh0LnVwZGF0ZVF1ZXVlID0gbiwgCiAgICAgICAgICAgICAgICAgICAgdC5lZmZlY3RUYWcgfD0gNCksIEtpKHIsICEwKSwgbnVsbCA9PT0gci50YWlsICYmICJoaWRkZW4iID09PSByLnRhaWxNb2RlICYmICFsLmFsdGVybmF0ZSkgcmV0dXJuIG51bGwgIT09ICh0ID0gdC5sYXN0RWZmZWN0ID0gci5sYXN0RWZmZWN0KSAmJiAodC5uZXh0RWZmZWN0ID0gbnVsbCksIAogICAgICAgICAgICAgICAgICAgIG51bGw7CiAgICAgICAgICAgICAgICB9IGVsc2UgMiAqIEZhKCkgLSByLnJlbmRlcmluZ1N0YXJ0VGltZSA+IHIudGFpbEV4cGlyYXRpb24gJiYgMSA8IG4gJiYgKHQuZWZmZWN0VGFnIHw9IDY0LCAKICAgICAgICAgICAgICAgIG8gPSAhMCwgS2kociwgITEpLCB0LmV4cGlyYXRpb25UaW1lID0gdC5jaGlsZEV4cGlyYXRpb25UaW1lID0gbiAtIDEpOwogICAgICAgICAgICAgICAgci5pc0JhY2t3YXJkcyA/IChsLnNpYmxpbmcgPSB0LmNoaWxkLCB0LmNoaWxkID0gbCkgOiAobnVsbCAhPT0gKG4gPSByLmxhc3QpID8gbi5zaWJsaW5nID0gbCA6IHQuY2hpbGQgPSBsLCAKICAgICAgICAgICAgICAgIHIubGFzdCA9IGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSByLnRhaWwgPyAoMCA9PT0gci50YWlsRXhwaXJhdGlvbiAmJiAoci50YWlsRXhwaXJhdGlvbiA9IEZhKCkgKyA1MDApLCAKICAgICAgICAgICAgbiA9IHIudGFpbCwgci5yZW5kZXJpbmcgPSBuLCByLnRhaWwgPSBuLnNpYmxpbmcsIHIubGFzdEVmZmVjdCA9IHQubGFzdEVmZmVjdCwgci5yZW5kZXJpbmdTdGFydFRpbWUgPSBGYSgpLCAKICAgICAgICAgICAgbi5zaWJsaW5nID0gbnVsbCwgdCA9IE1vLmN1cnJlbnQsIGNhKE1vLCBvID8gMSAmIHQgfCAyIDogMSAmIHQpLCBuKSA6IG51bGw7CiAgICAgICAgfQogICAgICAgIHRocm93IEVycm9yKGkoMTU2LCB0LnRhZykpOwogICAgfQogICAgZnVuY3Rpb24gWGkoZSkgewogICAgICAgIHN3aXRjaCAoZS50YWcpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgaGEoZS50eXBlKSAmJiBtYSgpOwogICAgICAgICAgICB2YXIgdCA9IGUuZWZmZWN0VGFnOwogICAgICAgICAgICByZXR1cm4gNDA5NiAmIHQgPyAoZS5lZmZlY3RUYWcgPSAtNDA5NyAmIHQgfCA2NCwgZSkgOiBudWxsOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgaWYgKEFvKCksIHVhKGRhKSwgdWEoZmEpLCAwICE9ICg2NCAmICh0ID0gZS5lZmZlY3RUYWcpKSkgdGhyb3cgRXJyb3IoaSgyODUpKTsKICAgICAgICAgICAgcmV0dXJuIGUuZWZmZWN0VGFnID0gLTQwOTcgJiB0IHwgNjQsIGU7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXR1cm4gUm8oZSksIG51bGw7CgogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcmV0dXJuIHVhKE1vKSwgNDA5NiAmICh0ID0gZS5lZmZlY3RUYWcpID8gKGUuZWZmZWN0VGFnID0gLTQwOTcgJiB0IHwgNjQsIGUpIDogbnVsbDsKCiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICByZXR1cm4gdWEoTW8pLCBudWxsOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIEFvKCksIG51bGw7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgcmV0dXJuIGVvKGUpLCBudWxsOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIFppKGUsIHQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgc291cmNlOiB0LAogICAgICAgICAgICBzdGFjazogYmUodCkKICAgICAgICB9OwogICAgfQogICAgVWkgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgZm9yICh2YXIgbiA9IHQuY2hpbGQ7IG51bGwgIT09IG47ICkgewogICAgICAgICAgICBpZiAoNSA9PT0gbi50YWcgfHwgNiA9PT0gbi50YWcpIGUuYXBwZW5kQ2hpbGQobi5zdGF0ZU5vZGUpOyBlbHNlIGlmICg0ICE9PSBuLnRhZyAmJiBudWxsICE9PSBuLmNoaWxkKSB7CiAgICAgICAgICAgICAgICBuLmNoaWxkLnJldHVybiA9IG4sIG4gPSBuLmNoaWxkOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG4gPT09IHQpIGJyZWFrOwogICAgICAgICAgICBmb3IgKDtudWxsID09PSBuLnNpYmxpbmc7ICkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG4ucmV0dXJuIHx8IG4ucmV0dXJuID09PSB0KSByZXR1cm47CiAgICAgICAgICAgICAgICBuID0gbi5yZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbi5zaWJsaW5nLnJldHVybiA9IG4ucmV0dXJuLCBuID0gbi5zaWJsaW5nOwogICAgICAgIH0KICAgIH0sIFdpID0gZnVuY3Rpb24oZSwgdCwgbiwgciwgbykgewogICAgICAgIHZhciBpID0gZS5tZW1vaXplZFByb3BzOwogICAgICAgIGlmIChpICE9PSByKSB7CiAgICAgICAgICAgIHZhciBsLCB1LCBjID0gdC5zdGF0ZU5vZGU7CiAgICAgICAgICAgIHN3aXRjaCAoSW8oUG8uY3VycmVudCksIGUgPSBudWxsLCBuKSB7CiAgICAgICAgICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgICAgICAgICAgaSA9IHhlKGMsIGkpLCByID0geGUoYywgciksIGUgPSBbXTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlICJvcHRpb24iOgogICAgICAgICAgICAgICAgaSA9IFBlKGMsIGkpLCByID0gUGUoYywgciksIGUgPSBbXTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlICJzZWxlY3QiOgogICAgICAgICAgICAgICAgaSA9IGEoe30sIGksIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwCiAgICAgICAgICAgICAgICB9KSwgciA9IGEoe30sIHIsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwCiAgICAgICAgICAgICAgICB9KSwgZSA9IFtdOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICAgICAgICAgIGkgPSBqZShjLCBpKSwgciA9IGplKGMsIHIpLCBlID0gW107CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgIT0gdHlwZW9mIGkub25DbGljayAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiByLm9uQ2xpY2sgJiYgKGMub25jbGljayA9IGNuKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGwgaW4gYW4obiwgciksIG4gPSBudWxsLCBpKSBpZiAoIXIuaGFzT3duUHJvcGVydHkobCkgJiYgaS5oYXNPd25Qcm9wZXJ0eShsKSAmJiBudWxsICE9IGlbbF0pIGlmICgic3R5bGUiID09PSBsKSBmb3IgKHUgaW4gYyA9IGlbbF0pIGMuaGFzT3duUHJvcGVydHkodSkgJiYgKG4gfHwgKG4gPSB7fSksIAogICAgICAgICAgICBuW3VdID0gIiIpOyBlbHNlICJkYW5nZXJvdXNseVNldElubmVySFRNTCIgIT09IGwgJiYgImNoaWxkcmVuIiAhPT0gbCAmJiAic3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nIiAhPT0gbCAmJiAic3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIiAhPT0gbCAmJiAiYXV0b0ZvY3VzIiAhPT0gbCAmJiAoUy5oYXNPd25Qcm9wZXJ0eShsKSA/IGUgfHwgKGUgPSBbXSkgOiAoZSA9IGUgfHwgW10pLnB1c2gobCwgbnVsbCkpOwogICAgICAgICAgICBmb3IgKGwgaW4gcikgewogICAgICAgICAgICAgICAgdmFyIHMgPSByW2xdOwogICAgICAgICAgICAgICAgaWYgKGMgPSBudWxsICE9IGkgPyBpW2xdIDogdm9pZCAwLCByLmhhc093blByb3BlcnR5KGwpICYmIHMgIT09IGMgJiYgKG51bGwgIT0gcyB8fCBudWxsICE9IGMpKSBpZiAoInN0eWxlIiA9PT0gbCkgaWYgKGMpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHUgaW4gYykgIWMuaGFzT3duUHJvcGVydHkodSkgfHwgcyAmJiBzLmhhc093blByb3BlcnR5KHUpIHx8IChuIHx8IChuID0ge30pLCAKICAgICAgICAgICAgICAgICAgICBuW3VdID0gIiIpOwogICAgICAgICAgICAgICAgICAgIGZvciAodSBpbiBzKSBzLmhhc093blByb3BlcnR5KHUpICYmIGNbdV0gIT09IHNbdV0gJiYgKG4gfHwgKG4gPSB7fSksIG5bdV0gPSBzW3VdKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBuIHx8IChlIHx8IChlID0gW10pLCBlLnB1c2gobCwgbikpLCBuID0gczsgZWxzZSAiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiID09PSBsID8gKHMgPSBzID8gcy5fX2h0bWwgOiB2b2lkIDAsIAogICAgICAgICAgICAgICAgYyA9IGMgPyBjLl9faHRtbCA6IHZvaWQgMCwgbnVsbCAhPSBzICYmIGMgIT09IHMgJiYgKGUgPSBlIHx8IFtdKS5wdXNoKGwsIHMpKSA6ICJjaGlsZHJlbiIgPT09IGwgPyBjID09PSBzIHx8ICJzdHJpbmciICE9IHR5cGVvZiBzICYmICJudW1iZXIiICE9IHR5cGVvZiBzIHx8IChlID0gZSB8fCBbXSkucHVzaChsLCAiIiArIHMpIDogInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyIgIT09IGwgJiYgInN1cHByZXNzSHlkcmF0aW9uV2FybmluZyIgIT09IGwgJiYgKFMuaGFzT3duUHJvcGVydHkobCkgPyAobnVsbCAhPSBzICYmIHVuKG8sIGwpLCAKICAgICAgICAgICAgICAgIGUgfHwgYyA9PT0gcyB8fCAoZSA9IFtdKSkgOiAoZSA9IGUgfHwgW10pLnB1c2gobCwgcykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG4gJiYgKGUgPSBlIHx8IFtdKS5wdXNoKCJzdHlsZSIsIG4pLCBvID0gZSwgKHQudXBkYXRlUXVldWUgPSBvKSAmJiAodC5lZmZlY3RUYWcgfD0gNCk7CiAgICAgICAgfQogICAgfSwgVmkgPSBmdW5jdGlvbihlLCB0LCBuLCByKSB7CiAgICAgICAgbiAhPT0gciAmJiAodC5lZmZlY3RUYWcgfD0gNCk7CiAgICB9OwogICAgdmFyIEppID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgV2Vha1NldCA/IFdlYWtTZXQgOiBTZXQ7CiAgICBmdW5jdGlvbiBlbChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0LnNvdXJjZSwgciA9IHQuc3RhY2s7CiAgICAgICAgbnVsbCA9PT0gciAmJiBudWxsICE9PSBuICYmIChyID0gYmUobikpLCBudWxsICE9PSBuICYmIG1lKG4udHlwZSksIHQgPSB0LnZhbHVlLCAKICAgICAgICBudWxsICE9PSBlICYmIDEgPT09IGUudGFnICYmIG1lKGUudHlwZSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcih0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHRsKGUpIHsKICAgICAgICB2YXIgdCA9IGUucmVmOwogICAgICAgIGlmIChudWxsICE9PSB0KSBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCkgdHJ5IHsKICAgICAgICAgICAgdChudWxsKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgIHZ1KGUsIHQpOwogICAgICAgIH0gZWxzZSB0LmN1cnJlbnQgPSBudWxsOwogICAgfQogICAgZnVuY3Rpb24gbmwoZSwgdCkgewogICAgICAgIHN3aXRjaCAodC50YWcpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgaWYgKDI1NiAmIHQuZWZmZWN0VGFnICYmIG51bGwgIT09IGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZS5tZW1vaXplZFByb3BzLCByID0gZS5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICAgICAgdCA9IChlID0gdC5zdGF0ZU5vZGUpLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlKHQuZWxlbWVudFR5cGUgPT09IHQudHlwZSA/IG4gOiBHYSh0LnR5cGUsIG4pLCByKSwgCiAgICAgICAgICAgICAgICBlLl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90QmVmb3JlVXBkYXRlID0gdDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aHJvdyBFcnJvcihpKDE2MykpOwogICAgfQogICAgZnVuY3Rpb24gcmwoZSwgdCkgewogICAgICAgIGlmIChudWxsICE9PSAodCA9IG51bGwgIT09ICh0ID0gdC51cGRhdGVRdWV1ZSkgPyB0Lmxhc3RFZmZlY3QgOiBudWxsKSkgewogICAgICAgICAgICB2YXIgbiA9IHQgPSB0Lm5leHQ7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIGlmICgobi50YWcgJiBlKSA9PT0gZSkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gbi5kZXN0cm95OwogICAgICAgICAgICAgICAgICAgIG4uZGVzdHJveSA9IHZvaWQgMCwgdm9pZCAwICE9PSByICYmIHIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG4gPSBuLm5leHQ7CiAgICAgICAgICAgIH0gd2hpbGUgKG4gIT09IHQpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGFsKGUsIHQpIHsKICAgICAgICBpZiAobnVsbCAhPT0gKHQgPSBudWxsICE9PSAodCA9IHQudXBkYXRlUXVldWUpID8gdC5sYXN0RWZmZWN0IDogbnVsbCkpIHsKICAgICAgICAgICAgdmFyIG4gPSB0ID0gdC5uZXh0OwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBpZiAoKG4udGFnICYgZSkgPT09IGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4uY3JlYXRlOwogICAgICAgICAgICAgICAgICAgIG4uZGVzdHJveSA9IHIoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG4gPSBuLm5leHQ7CiAgICAgICAgICAgIH0gd2hpbGUgKG4gIT09IHQpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9sKGUsIHQsIG4pIHsKICAgICAgICBzd2l0Y2ggKG4udGFnKSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIHJldHVybiB2b2lkIGFsKDMsIG4pOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgaWYgKGUgPSBuLnN0YXRlTm9kZSwgNCAmIG4uZWZmZWN0VGFnKSBpZiAobnVsbCA9PT0gdCkgZS5jb21wb25lbnREaWRNb3VudCgpOyBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciByID0gbi5lbGVtZW50VHlwZSA9PT0gbi50eXBlID8gdC5tZW1vaXplZFByb3BzIDogR2Eobi50eXBlLCB0Lm1lbW9pemVkUHJvcHMpOwogICAgICAgICAgICAgICAgZS5jb21wb25lbnREaWRVcGRhdGUociwgdC5tZW1vaXplZFN0YXRlLCBlLl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90QmVmb3JlVXBkYXRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdm9pZCAobnVsbCAhPT0gKHQgPSBuLnVwZGF0ZVF1ZXVlKSAmJiBmbyhuLCB0LCBlKSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBpZiAobnVsbCAhPT0gKHQgPSBuLnVwZGF0ZVF1ZXVlKSkgewogICAgICAgICAgICAgICAgaWYgKGUgPSBudWxsLCBudWxsICE9PSBuLmNoaWxkKSBzd2l0Y2ggKG4uY2hpbGQudGFnKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICBlID0gbi5jaGlsZC5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgZSA9IG4uY2hpbGQuc3RhdGVOb2RlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm8obiwgdCwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgcmV0dXJuIGUgPSBuLnN0YXRlTm9kZSwgdm9pZCAobnVsbCA9PT0gdCAmJiA0ICYgbi5lZmZlY3RUYWcgJiYgYm4obi50eXBlLCBuLm1lbW9pemVkUHJvcHMpICYmIGUuZm9jdXMoKSk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIHJldHVybiB2b2lkIChudWxsID09PSBuLm1lbW9pemVkU3RhdGUgJiYgKG4gPSBuLmFsdGVybmF0ZSwgbnVsbCAhPT0gbiAmJiAobiA9IG4ubWVtb2l6ZWRTdGF0ZSwgCiAgICAgICAgICAgIG51bGwgIT09IG4gJiYgKG4gPSBuLmRlaHlkcmF0ZWQsIG51bGwgIT09IG4gJiYgTXQobikpKSkpOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhyb3cgRXJyb3IoaSgxNjMpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGlsKGUsIHQsIG4pIHsKICAgICAgICBzd2l0Y2ggKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHh1ICYmIHh1KHQpLCB0LnRhZykgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgaWYgKG51bGwgIT09IChlID0gdC51cGRhdGVRdWV1ZSkgJiYgbnVsbCAhPT0gKGUgPSBlLmxhc3RFZmZlY3QpKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGUubmV4dDsKICAgICAgICAgICAgICAgIFZhKDk3IDwgbiA/IDk3IDogbiwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gcjsKICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5kZXN0cm95OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2dShhLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5uZXh0OwogICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKGUgIT09IHIpOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgdGwodCksICJmdW5jdGlvbiIgPT0gdHlwZW9mIChuID0gdC5zdGF0ZU5vZGUpLmNvbXBvbmVudFdpbGxVbm1vdW50ICYmIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdC5wcm9wcyA9IGUubWVtb2l6ZWRQcm9wcywgdC5zdGF0ZSA9IGUubWVtb2l6ZWRTdGF0ZSwgdC5jb21wb25lbnRXaWxsVW5tb3VudCgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgIHZ1KGUsIHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KHQsIG4pOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHRsKHQpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHNsKGUsIHQsIG4pOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGxsKGUpIHsKICAgICAgICB2YXIgdCA9IGUuYWx0ZXJuYXRlOwogICAgICAgIGUucmV0dXJuID0gbnVsbCwgZS5jaGlsZCA9IG51bGwsIGUubWVtb2l6ZWRTdGF0ZSA9IG51bGwsIGUudXBkYXRlUXVldWUgPSBudWxsLCBlLmRlcGVuZGVuY2llcyA9IG51bGwsIAogICAgICAgIGUuYWx0ZXJuYXRlID0gbnVsbCwgZS5maXJzdEVmZmVjdCA9IG51bGwsIGUubGFzdEVmZmVjdCA9IG51bGwsIGUucGVuZGluZ1Byb3BzID0gbnVsbCwgCiAgICAgICAgZS5tZW1vaXplZFByb3BzID0gbnVsbCwgZS5zdGF0ZU5vZGUgPSBudWxsLCBudWxsICE9PSB0ICYmIGxsKHQpOwogICAgfQogICAgZnVuY3Rpb24gdWwoZSkgewogICAgICAgIHJldHVybiA1ID09PSBlLnRhZyB8fCAzID09PSBlLnRhZyB8fCA0ID09PSBlLnRhZzsKICAgIH0KICAgIGZ1bmN0aW9uIGNsKGUpIHsKICAgICAgICBlOiB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSBlLnJldHVybjsgbnVsbCAhPT0gdDsgKSB7CiAgICAgICAgICAgICAgICBpZiAodWwodCkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHQgPSB0LnJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBFcnJvcihpKDE2MCkpOwogICAgICAgIH0KICAgICAgICBzd2l0Y2ggKHQgPSBuLnN0YXRlTm9kZSwgbi50YWcpIHsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgdmFyIHIgPSAhMTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICB0ID0gdC5jb250YWluZXJJbmZvLCByID0gITA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IEVycm9yKGkoMTYxKSk7CiAgICAgICAgfQogICAgICAgIDE2ICYgbi5lZmZlY3RUYWcgJiYgKFVlKHQsICIiKSwgbi5lZmZlY3RUYWcgJj0gLTE3KTsKICAgICAgICBlOiB0OiBmb3IgKG4gPSBlOyA7KSB7CiAgICAgICAgICAgIGZvciAoO251bGwgPT09IG4uc2libGluZzsgKSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbi5yZXR1cm4gfHwgdWwobi5yZXR1cm4pKSB7CiAgICAgICAgICAgICAgICAgICAgbiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG4gPSBuLnJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKG4uc2libGluZy5yZXR1cm4gPSBuLnJldHVybiwgbiA9IG4uc2libGluZzsgNSAhPT0gbi50YWcgJiYgNiAhPT0gbi50YWcgJiYgMTggIT09IG4udGFnOyApIHsKICAgICAgICAgICAgICAgIGlmICgyICYgbi5lZmZlY3RUYWcpIGNvbnRpbnVlIHQ7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbi5jaGlsZCB8fCA0ID09PSBuLnRhZykgY29udGludWUgdDsKICAgICAgICAgICAgICAgIG4uY2hpbGQucmV0dXJuID0gbiwgbiA9IG4uY2hpbGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCEoMiAmIG4uZWZmZWN0VGFnKSkgewogICAgICAgICAgICAgICAgbiA9IG4uc3RhdGVOb2RlOwogICAgICAgICAgICAgICAgYnJlYWsgZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByID8gZnVuY3Rpb24gZSh0LCBuLCByKSB7CiAgICAgICAgICAgIHZhciBhID0gdC50YWcsIG8gPSA1ID09PSBhIHx8IDYgPT09IGE7CiAgICAgICAgICAgIGlmIChvKSB0ID0gbyA/IHQuc3RhdGVOb2RlIDogdC5zdGF0ZU5vZGUuaW5zdGFuY2UsIG4gPyA4ID09PSByLm5vZGVUeXBlID8gci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0LCBuKSA6IHIuaW5zZXJ0QmVmb3JlKHQsIG4pIDogKDggPT09IHIubm9kZVR5cGUgPyAobiA9IHIucGFyZW50Tm9kZSkuaW5zZXJ0QmVmb3JlKHQsIHIpIDogKG4gPSByKS5hcHBlbmRDaGlsZCh0KSwgCiAgICAgICAgICAgIG51bGwgIT09IChyID0gci5fcmVhY3RSb290Q29udGFpbmVyKSAmJiB2b2lkIDAgIT09IHIgfHwgbnVsbCAhPT0gbi5vbmNsaWNrIHx8IChuLm9uY2xpY2sgPSBjbikpOyBlbHNlIGlmICg0ICE9PSBhICYmIG51bGwgIT09ICh0ID0gdC5jaGlsZCkpIGZvciAoZSh0LCBuLCByKSwgCiAgICAgICAgICAgIHQgPSB0LnNpYmxpbmc7IG51bGwgIT09IHQ7ICkgZSh0LCBuLCByKSwgdCA9IHQuc2libGluZzsKICAgICAgICB9KGUsIG4sIHQpIDogZnVuY3Rpb24gZSh0LCBuLCByKSB7CiAgICAgICAgICAgIHZhciBhID0gdC50YWcsIG8gPSA1ID09PSBhIHx8IDYgPT09IGE7CiAgICAgICAgICAgIGlmIChvKSB0ID0gbyA/IHQuc3RhdGVOb2RlIDogdC5zdGF0ZU5vZGUuaW5zdGFuY2UsIG4gPyByLmluc2VydEJlZm9yZSh0LCBuKSA6IHIuYXBwZW5kQ2hpbGQodCk7IGVsc2UgaWYgKDQgIT09IGEgJiYgbnVsbCAhPT0gKHQgPSB0LmNoaWxkKSkgZm9yIChlKHQsIG4sIHIpLCAKICAgICAgICAgICAgdCA9IHQuc2libGluZzsgbnVsbCAhPT0gdDsgKSBlKHQsIG4sIHIpLCB0ID0gdC5zaWJsaW5nOwogICAgICAgIH0oZSwgbiwgdCk7CiAgICB9CiAgICBmdW5jdGlvbiBzbChlLCB0LCBuKSB7CiAgICAgICAgZm9yICh2YXIgciwgYSwgbyA9IHQsIGwgPSAhMTsgOykgewogICAgICAgICAgICBpZiAoIWwpIHsKICAgICAgICAgICAgICAgIGwgPSBvLnJldHVybjsKICAgICAgICAgICAgICAgIGU6IGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbCkgdGhyb3cgRXJyb3IoaSgxNjApKTsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHIgPSBsLnN0YXRlTm9kZSwgbC50YWcpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgYSA9ICExOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBlOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHIuY29udGFpbmVySW5mbywgYSA9ICEwOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsID0gbC5yZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsID0gITA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKDUgPT09IG8udGFnIHx8IDYgPT09IG8udGFnKSB7CiAgICAgICAgICAgICAgICBlOiBmb3IgKHZhciB1ID0gZSwgYyA9IG8sIHMgPSBuLCBmID0gYzsgOykgaWYgKGlsKHUsIGYsIHMpLCBudWxsICE9PSBmLmNoaWxkICYmIDQgIT09IGYudGFnKSBmLmNoaWxkLnJldHVybiA9IGYsIAogICAgICAgICAgICAgICAgZiA9IGYuY2hpbGQ7IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChmID09PSBjKSBicmVhayBlOwogICAgICAgICAgICAgICAgICAgIGZvciAoO251bGwgPT09IGYuc2libGluZzsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBmLnJldHVybiB8fCBmLnJldHVybiA9PT0gYykgYnJlYWsgZTsKICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGYucmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmLnNpYmxpbmcucmV0dXJuID0gZi5yZXR1cm4sIGYgPSBmLnNpYmxpbmc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhID8gKHUgPSByLCBjID0gby5zdGF0ZU5vZGUsIDggPT09IHUubm9kZVR5cGUgPyB1LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykgOiB1LnJlbW92ZUNoaWxkKGMpKSA6IHIucmVtb3ZlQ2hpbGQoby5zdGF0ZU5vZGUpOwogICAgICAgICAgICB9IGVsc2UgaWYgKDQgPT09IG8udGFnKSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gby5jaGlsZCkgewogICAgICAgICAgICAgICAgICAgIHIgPSBvLnN0YXRlTm9kZS5jb250YWluZXJJbmZvLCBhID0gITAsIG8uY2hpbGQucmV0dXJuID0gbywgbyA9IG8uY2hpbGQ7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoaWwoZSwgbywgbiksIG51bGwgIT09IG8uY2hpbGQpIHsKICAgICAgICAgICAgICAgIG8uY2hpbGQucmV0dXJuID0gbywgbyA9IG8uY2hpbGQ7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobyA9PT0gdCkgYnJlYWs7CiAgICAgICAgICAgIGZvciAoO251bGwgPT09IG8uc2libGluZzsgKSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gby5yZXR1cm4gfHwgby5yZXR1cm4gPT09IHQpIHJldHVybjsKICAgICAgICAgICAgICAgIDQgPT09IChvID0gby5yZXR1cm4pLnRhZyAmJiAobCA9ICExKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvLnNpYmxpbmcucmV0dXJuID0gby5yZXR1cm4sIG8gPSBvLnNpYmxpbmc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZmwoZSwgdCkgewogICAgICAgIHN3aXRjaCAodC50YWcpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIHJldHVybiB2b2lkIHJsKDMsIHQpOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgdmFyIG4gPSB0LnN0YXRlTm9kZTsKICAgICAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgICAgICAgdmFyIHIgPSB0Lm1lbW9pemVkUHJvcHMsIGEgPSBudWxsICE9PSBlID8gZS5tZW1vaXplZFByb3BzIDogcjsKICAgICAgICAgICAgICAgIGUgPSB0LnR5cGU7CiAgICAgICAgICAgICAgICB2YXIgbyA9IHQudXBkYXRlUXVldWU7CiAgICAgICAgICAgICAgICBpZiAodC51cGRhdGVRdWV1ZSA9IG51bGwsIG51bGwgIT09IG8pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKG5bT25dID0gciwgImlucHV0IiA9PT0gZSAmJiAicmFkaW8iID09PSByLnR5cGUgJiYgbnVsbCAhPSByLm5hbWUgJiYgU2UobiwgciksIAogICAgICAgICAgICAgICAgICAgIG9uKGUsIGEpLCB0ID0gb24oZSwgciksIGEgPSAwOyBhIDwgby5sZW5ndGg7IGEgKz0gMikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IG9bYV0sIHUgPSBvW2EgKyAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgInN0eWxlIiA9PT0gbCA/IG5uKG4sIHUpIDogImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiA9PT0gbCA/IEZlKG4sIHUpIDogImNoaWxkcmVuIiA9PT0gbCA/IFVlKG4sIHUpIDogWChuLCBsLCB1LCB0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJpbnB1dCI6CiAgICAgICAgICAgICAgICAgICAgICAgIE9lKG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJ0ZXh0YXJlYSI6CiAgICAgICAgICAgICAgICAgICAgICAgIE5lKG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJzZWxlY3QiOgogICAgICAgICAgICAgICAgICAgICAgICB0ID0gbi5fd3JhcHBlclN0YXRlLndhc011bHRpcGxlLCBuLl93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGUgPSAhIXIubXVsdGlwbGUsIG51bGwgIT0gKGUgPSByLnZhbHVlKSA/IF9lKG4sICEhci5tdWx0aXBsZSwgZSwgITEpIDogdCAhPT0gISFyLm11bHRpcGxlICYmIChudWxsICE9IHIuZGVmYXVsdFZhbHVlID8gX2UobiwgISFyLm11bHRpcGxlLCByLmRlZmF1bHRWYWx1ZSwgITApIDogX2UobiwgISFyLm11bHRpcGxlLCByLm11bHRpcGxlID8gW10gOiAiIiwgITEpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgaWYgKG51bGwgPT09IHQuc3RhdGVOb2RlKSB0aHJvdyBFcnJvcihpKDE2MikpOwogICAgICAgICAgICByZXR1cm4gdm9pZCAodC5zdGF0ZU5vZGUubm9kZVZhbHVlID0gdC5tZW1vaXplZFByb3BzKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiB2b2lkICgodCA9IHQuc3RhdGVOb2RlKS5oeWRyYXRlICYmICh0Lmh5ZHJhdGUgPSAhMSwgTXQodC5jb250YWluZXJJbmZvKSkpOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBpZiAobiA9IHQsIG51bGwgPT09IHQubWVtb2l6ZWRTdGF0ZSA/IHIgPSAhMSA6IChyID0gITAsIG4gPSB0LmNoaWxkLCBEbCA9IEZhKCkpLCAKICAgICAgICAgICAgbnVsbCAhPT0gbikgZTogZm9yIChlID0gbjsgOykgewogICAgICAgICAgICAgICAgaWYgKDUgPT09IGUudGFnKSBvID0gZS5zdGF0ZU5vZGUsIHIgPyAiZnVuY3Rpb24iID09IHR5cGVvZiAobyA9IG8uc3R5bGUpLnNldFByb3BlcnR5ID8gby5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJub25lIiwgImltcG9ydGFudCIpIDogby5kaXNwbGF5ID0gIm5vbmUiIDogKG8gPSBlLnN0YXRlTm9kZSwgCiAgICAgICAgICAgICAgICBhID0gbnVsbCAhPSAoYSA9IGUubWVtb2l6ZWRQcm9wcy5zdHlsZSkgJiYgYS5oYXNPd25Qcm9wZXJ0eSgiZGlzcGxheSIpID8gYS5kaXNwbGF5IDogbnVsbCwgCiAgICAgICAgICAgICAgICBvLnN0eWxlLmRpc3BsYXkgPSB0bigiZGlzcGxheSIsIGEpKTsgZWxzZSBpZiAoNiA9PT0gZS50YWcpIGUuc3RhdGVOb2RlLm5vZGVWYWx1ZSA9IHIgPyAiIiA6IGUubWVtb2l6ZWRQcm9wczsgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDEzID09PSBlLnRhZyAmJiBudWxsICE9PSBlLm1lbW9pemVkU3RhdGUgJiYgbnVsbCA9PT0gZS5tZW1vaXplZFN0YXRlLmRlaHlkcmF0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSBlLmNoaWxkLnNpYmxpbmcpLnJldHVybiA9IGUsIGUgPSBvOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUuY2hpbGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5jaGlsZC5yZXR1cm4gPSBlLCBlID0gZS5jaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGUgPT09IG4pIGJyZWFrOwogICAgICAgICAgICAgICAgZm9yICg7bnVsbCA9PT0gZS5zaWJsaW5nOyApIHsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZS5yZXR1cm4gfHwgZS5yZXR1cm4gPT09IG4pIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgZSA9IGUucmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZS5zaWJsaW5nLnJldHVybiA9IGUucmV0dXJuLCBlID0gZS5zaWJsaW5nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB2b2lkIGRsKHQpOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJldHVybiB2b2lkIGRsKHQpOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhyb3cgRXJyb3IoaSgxNjMpKTsKICAgIH0KICAgIGZ1bmN0aW9uIGRsKGUpIHsKICAgICAgICB2YXIgdCA9IGUudXBkYXRlUXVldWU7CiAgICAgICAgaWYgKG51bGwgIT09IHQpIHsKICAgICAgICAgICAgZS51cGRhdGVRdWV1ZSA9IG51bGw7CiAgICAgICAgICAgIHZhciBuID0gZS5zdGF0ZU5vZGU7CiAgICAgICAgICAgIG51bGwgPT09IG4gJiYgKG4gPSBlLnN0YXRlTm9kZSA9IG5ldyBKaSksIHQuZm9yRWFjaCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIHIgPSB3dS5iaW5kKG51bGwsIGUsIHQpOwogICAgICAgICAgICAgICAgbi5oYXModCkgfHwgKG4uYWRkKHQpLCB0LnRoZW4ociwgcikpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgfQogICAgdmFyIHBsID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgV2Vha01hcCA/IFdlYWtNYXAgOiBNYXA7CiAgICBmdW5jdGlvbiBnbChlLCB0LCBuKSB7CiAgICAgICAgKG4gPSBsbyhuLCBudWxsKSkudGFnID0gMywgbi5wYXlsb2FkID0gewogICAgICAgICAgICBlbGVtZW50OiBudWxsCiAgICAgICAgfTsKICAgICAgICB2YXIgciA9IHQudmFsdWU7CiAgICAgICAgcmV0dXJuIG4uY2FsbGJhY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgTWwgfHwgKE1sID0gITAsIHpsID0gciksIGVsKGUsIHQpOwogICAgICAgIH0sIG47CiAgICB9CiAgICBmdW5jdGlvbiBobChlLCB0LCBuKSB7CiAgICAgICAgKG4gPSBsbyhuLCBudWxsKSkudGFnID0gMzsKICAgICAgICB2YXIgciA9IGUudHlwZS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHIpIHsKICAgICAgICAgICAgdmFyIGEgPSB0LnZhbHVlOwogICAgICAgICAgICBuLnBheWxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlbChlLCB0KSwgcihhKTsKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgdmFyIG8gPSBlLnN0YXRlTm9kZTsKICAgICAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBvLmNvbXBvbmVudERpZENhdGNoICYmIChuLmNhbGxiYWNrID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICJmdW5jdGlvbiIgIT0gdHlwZW9mIHIgJiYgKG51bGwgPT09IExsID8gTGwgPSBuZXcgU2V0KFsgdGhpcyBdKSA6IExsLmFkZCh0aGlzKSwgCiAgICAgICAgICAgIGVsKGUsIHQpKTsKICAgICAgICAgICAgdmFyIG4gPSB0LnN0YWNrOwogICAgICAgICAgICB0aGlzLmNvbXBvbmVudERpZENhdGNoKHQudmFsdWUsIHsKICAgICAgICAgICAgICAgIGNvbXBvbmVudFN0YWNrOiBudWxsICE9PSBuID8gbiA6ICIiCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLCBuOwogICAgfQogICAgdmFyIG1sLCBibCA9IE1hdGguY2VpbCwgdmwgPSBZLlJlYWN0Q3VycmVudERpc3BhdGNoZXIsIHlsID0gWS5SZWFjdEN1cnJlbnRPd25lciwgd2wgPSAwLCBrbCA9IDMsIHhsID0gNCwgRWwgPSAwLCBTbCA9IG51bGwsIE9sID0gbnVsbCwgQ2wgPSAwLCBUbCA9IHdsLCBQbCA9IG51bGwsIF9sID0gMTA3Mzc0MTgyMywgamwgPSAxMDczNzQxODIzLCBJbCA9IG51bGwsIE5sID0gMCwgQWwgPSAhMSwgRGwgPSAwLCBSbCA9IG51bGwsIE1sID0gITEsIHpsID0gbnVsbCwgTGwgPSBudWxsLCBGbCA9ICExLCBVbCA9IG51bGwsIFdsID0gOTAsIFZsID0gbnVsbCwgJGwgPSAwLCBxbCA9IG51bGwsIEJsID0gMDsKICAgIGZ1bmN0aW9uIEhsKCkgewogICAgICAgIHJldHVybiAwICE9ICg0OCAmIEVsKSA/IDEwNzM3NDE4MjEgLSAoRmEoKSAvIDEwIHwgMCkgOiAwICE9PSBCbCA/IEJsIDogQmwgPSAxMDczNzQxODIxIC0gKEZhKCkgLyAxMCB8IDApOwogICAgfQogICAgZnVuY3Rpb24gUWwoZSwgdCwgbikgewogICAgICAgIGlmICgwID09ICgyICYgKHQgPSB0Lm1vZGUpKSkgcmV0dXJuIDEwNzM3NDE4MjM7CiAgICAgICAgdmFyIHIgPSBVYSgpOwogICAgICAgIGlmICgwID09ICg0ICYgdCkpIHJldHVybiA5OSA9PT0gciA/IDEwNzM3NDE4MjMgOiAxMDczNzQxODIyOwogICAgICAgIGlmICgwICE9ICgxNiAmIEVsKSkgcmV0dXJuIENsOwogICAgICAgIGlmIChudWxsICE9PSBuKSBlID0gUWEoZSwgMCB8IG4udGltZW91dE1zIHx8IDVlMywgMjUwKTsgZWxzZSBzd2l0Y2ggKHIpIHsKICAgICAgICAgIGNhc2UgOTk6CiAgICAgICAgICAgIGUgPSAxMDczNzQxODIzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICBlID0gUWEoZSwgMTUwLCAxMDApOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDk3OgogICAgICAgICAgY2FzZSA5NjoKICAgICAgICAgICAgZSA9IFFhKGUsIDVlMywgMjUwKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgZSA9IDI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IEVycm9yKGkoMzI2KSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsICE9PSBTbCAmJiBlID09PSBDbCAmJiAtLWUsIGU7CiAgICB9CiAgICBmdW5jdGlvbiBHbChlLCB0KSB7CiAgICAgICAgaWYgKDUwIDwgJGwpIHRocm93ICRsID0gMCwgcWwgPSBudWxsLCBFcnJvcihpKDE4NSkpOwogICAgICAgIGlmIChudWxsICE9PSAoZSA9IEtsKGUsIHQpKSkgewogICAgICAgICAgICB2YXIgbiA9IFVhKCk7CiAgICAgICAgICAgIDEwNzM3NDE4MjMgPT09IHQgPyAwICE9ICg4ICYgRWwpICYmIDAgPT0gKDQ4ICYgRWwpID8gSmwoZSkgOiAoWGwoZSksIDAgPT09IEVsICYmIEJhKCkpIDogWGwoZSksIAogICAgICAgICAgICAwID09ICg0ICYgRWwpIHx8IDk4ICE9PSBuICYmIDk5ICE9PSBuIHx8IChudWxsID09PSBWbCA/IFZsID0gbmV3IE1hcChbIFsgZSwgdCBdIF0pIDogKHZvaWQgMCA9PT0gKG4gPSBWbC5nZXQoZSkpIHx8IG4gPiB0KSAmJiBWbC5zZXQoZSwgdCkpOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIEtsKGUsIHQpIHsKICAgICAgICBlLmV4cGlyYXRpb25UaW1lIDwgdCAmJiAoZS5leHBpcmF0aW9uVGltZSA9IHQpOwogICAgICAgIHZhciBuID0gZS5hbHRlcm5hdGU7CiAgICAgICAgbnVsbCAhPT0gbiAmJiBuLmV4cGlyYXRpb25UaW1lIDwgdCAmJiAobi5leHBpcmF0aW9uVGltZSA9IHQpOwogICAgICAgIHZhciByID0gZS5yZXR1cm4sIGEgPSBudWxsOwogICAgICAgIGlmIChudWxsID09PSByICYmIDMgPT09IGUudGFnKSBhID0gZS5zdGF0ZU5vZGU7IGVsc2UgZm9yICg7bnVsbCAhPT0gcjsgKSB7CiAgICAgICAgICAgIGlmIChuID0gci5hbHRlcm5hdGUsIHIuY2hpbGRFeHBpcmF0aW9uVGltZSA8IHQgJiYgKHIuY2hpbGRFeHBpcmF0aW9uVGltZSA9IHQpLCBudWxsICE9PSBuICYmIG4uY2hpbGRFeHBpcmF0aW9uVGltZSA8IHQgJiYgKG4uY2hpbGRFeHBpcmF0aW9uVGltZSA9IHQpLCAKICAgICAgICAgICAgbnVsbCA9PT0gci5yZXR1cm4gJiYgMyA9PT0gci50YWcpIHsKICAgICAgICAgICAgICAgIGEgPSByLnN0YXRlTm9kZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHIgPSByLnJldHVybjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGwgIT09IGEgJiYgKFNsID09PSBhICYmIChpdSh0KSwgVGwgPT09IHhsICYmIEF1KGEsIENsKSksIER1KGEsIHQpKSwgYTsKICAgIH0KICAgIGZ1bmN0aW9uIFlsKGUpIHsKICAgICAgICB2YXIgdCA9IGUubGFzdEV4cGlyZWRUaW1lOwogICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDsKICAgICAgICBpZiAoIU51KGUsIHQgPSBlLmZpcnN0UGVuZGluZ1RpbWUpKSByZXR1cm4gdDsKICAgICAgICB2YXIgbiA9IGUubGFzdFBpbmdlZFRpbWU7CiAgICAgICAgcmV0dXJuIDIgPj0gKGUgPSBuID4gKGUgPSBlLm5leHRLbm93blBlbmRpbmdMZXZlbCkgPyBuIDogZSkgJiYgdCAhPT0gZSA/IDAgOiBlOwogICAgfQogICAgZnVuY3Rpb24gWGwoZSkgewogICAgICAgIGlmICgwICE9PSBlLmxhc3RFeHBpcmVkVGltZSkgZS5jYWxsYmFja0V4cGlyYXRpb25UaW1lID0gMTA3Mzc0MTgyMywgZS5jYWxsYmFja1ByaW9yaXR5ID0gOTksIAogICAgICAgIGUuY2FsbGJhY2tOb2RlID0gcWEoSmwuYmluZChudWxsLCBlKSk7IGVsc2UgewogICAgICAgICAgICB2YXIgdCA9IFlsKGUpLCBuID0gZS5jYWxsYmFja05vZGU7CiAgICAgICAgICAgIGlmICgwID09PSB0KSBudWxsICE9PSBuICYmIChlLmNhbGxiYWNrTm9kZSA9IG51bGwsIGUuY2FsbGJhY2tFeHBpcmF0aW9uVGltZSA9IDAsIAogICAgICAgICAgICBlLmNhbGxiYWNrUHJpb3JpdHkgPSA5MCk7IGVsc2UgewogICAgICAgICAgICAgICAgdmFyIHIgPSBIbCgpOwogICAgICAgICAgICAgICAgaWYgKDEwNzM3NDE4MjMgPT09IHQgPyByID0gOTkgOiAxID09PSB0IHx8IDIgPT09IHQgPyByID0gOTUgOiByID0gMCA+PSAociA9IDEwICogKDEwNzM3NDE4MjEgLSB0KSAtIDEwICogKDEwNzM3NDE4MjEgLSByKSkgPyA5OSA6IDI1MCA+PSByID8gOTggOiA1MjUwID49IHIgPyA5NyA6IDk1LCAKICAgICAgICAgICAgICAgIG51bGwgIT09IG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGUuY2FsbGJhY2tQcmlvcml0eTsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5jYWxsYmFja0V4cGlyYXRpb25UaW1lID09PSB0ICYmIGEgPj0gcikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIG4gIT09IE5hICYmIEVhKG4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZS5jYWxsYmFja0V4cGlyYXRpb25UaW1lID0gdCwgZS5jYWxsYmFja1ByaW9yaXR5ID0gciwgdCA9IDEwNzM3NDE4MjMgPT09IHQgPyBxYShKbC5iaW5kKG51bGwsIGUpKSA6ICRhKHIsIFpsLmJpbmQobnVsbCwgZSksIHsKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAxMCAqICgxMDczNzQxODIxIC0gdCkgLSBGYSgpCiAgICAgICAgICAgICAgICB9KSwgZS5jYWxsYmFja05vZGUgPSB0OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gWmwoZSwgdCkgewogICAgICAgIGlmIChCbCA9IDAsIHQpIHJldHVybiBSdShlLCB0ID0gSGwoKSksIFhsKGUpLCBudWxsOwogICAgICAgIHZhciBuID0gWWwoZSk7CiAgICAgICAgaWYgKDAgIT09IG4pIHsKICAgICAgICAgICAgaWYgKHQgPSBlLmNhbGxiYWNrTm9kZSwgMCAhPSAoNDggJiBFbCkpIHRocm93IEVycm9yKGkoMzI3KSk7CiAgICAgICAgICAgIGlmIChodSgpLCBlID09PSBTbCAmJiBuID09PSBDbCB8fCBudShlLCBuKSwgbnVsbCAhPT0gT2wpIHsKICAgICAgICAgICAgICAgIHZhciByID0gRWw7CiAgICAgICAgICAgICAgICBFbCB8PSAxNjsKICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSBhdSgpOyA7KSB0cnkgewogICAgICAgICAgICAgICAgICAgIHV1KCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcnUoZSwgdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoSmEoKSwgRWwgPSByLCB2bC5jdXJyZW50ID0gYSwgMSA9PT0gVGwpIHRocm93IHQgPSBQbCwgbnUoZSwgbiksIEF1KGUsIG4pLCBYbChlKSwgCiAgICAgICAgICAgICAgICB0OwogICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IE9sKSBzd2l0Y2ggKGEgPSBlLmZpbmlzaGVkV29yayA9IGUuY3VycmVudC5hbHRlcm5hdGUsIGUuZmluaXNoZWRFeHBpcmF0aW9uVGltZSA9IG4sIAogICAgICAgICAgICAgICAgciA9IFRsLCBTbCA9IG51bGwsIHIpIHsKICAgICAgICAgICAgICAgICAgY2FzZSB3bDoKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGkoMzQ1KSk7CgogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgUnUoZSwgMiA8IG4gPyAyIDogbik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICBjYXNlIGtsOgogICAgICAgICAgICAgICAgICAgIGlmIChBdShlLCBuKSwgbiA9PT0gKHIgPSBlLmxhc3RTdXNwZW5kZWRUaW1lKSAmJiAoZS5uZXh0S25vd25QZW5kaW5nTGV2ZWwgPSBmdShhKSksIAogICAgICAgICAgICAgICAgICAgIDEwNzM3NDE4MjMgPT09IF9sICYmIDEwIDwgKGEgPSBEbCArIDUwMCAtIEZhKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlLmxhc3RQaW5nZWRUaW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IG8gfHwgbyA+PSBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5sYXN0UGluZ2VkVGltZSA9IG4sIG51KGUsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwICE9PSAobyA9IFlsKGUpKSAmJiBvICE9PSBuKSBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgIT09IHIgJiYgciAhPT0gbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5sYXN0UGluZ2VkVGltZSA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlLnRpbWVvdXRIYW5kbGUgPSB5bihkdS5iaW5kKG51bGwsIGUpLCBhKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGR1KGUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgY2FzZSB4bDoKICAgICAgICAgICAgICAgICAgICBpZiAoQXUoZSwgbiksIG4gPT09IChyID0gZS5sYXN0U3VzcGVuZGVkVGltZSkgJiYgKGUubmV4dEtub3duUGVuZGluZ0xldmVsID0gZnUoYSkpLCAKICAgICAgICAgICAgICAgICAgICBBbCAmJiAoMCA9PT0gKGEgPSBlLmxhc3RQaW5nZWRUaW1lKSB8fCBhID49IG4pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUubGFzdFBpbmdlZFRpbWUgPSBuLCBudShlLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgwICE9PSAoYSA9IFlsKGUpKSAmJiBhICE9PSBuKSBicmVhazsKICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gciAmJiByICE9PSBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUubGFzdFBpbmdlZFRpbWUgPSByOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKDEwNzM3NDE4MjMgIT09IGpsID8gciA9IDEwICogKDEwNzM3NDE4MjEgLSBqbCkgLSBGYSgpIDogMTA3Mzc0MTgyMyA9PT0gX2wgPyByID0gMCA6IChyID0gMTAgKiAoMTA3Mzc0MTgyMSAtIF9sKSAtIDVlMywgCiAgICAgICAgICAgICAgICAgICAgMCA+IChyID0gKGEgPSBGYSgpKSAtIHIpICYmIChyID0gMCksIChuID0gMTAgKiAoMTA3Mzc0MTgyMSAtIG4pIC0gYSkgPCAociA9ICgxMjAgPiByID8gMTIwIDogNDgwID4gciA/IDQ4MCA6IDEwODAgPiByID8gMTA4MCA6IDE5MjAgPiByID8gMTkyMCA6IDNlMyA+IHIgPyAzZTMgOiA0MzIwID4gciA/IDQzMjAgOiAxOTYwICogYmwociAvIDE5NjApKSAtIHIpICYmIChyID0gbikpLCAKICAgICAgICAgICAgICAgICAgICAxMCA8IHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS50aW1lb3V0SGFuZGxlID0geW4oZHUuYmluZChudWxsLCBlKSwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkdShlKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICBpZiAoMTA3Mzc0MTgyMyAhPT0gX2wgJiYgbnVsbCAhPT0gSWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbyA9IF9sOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IElsOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA+PSAociA9IDAgfCBsLmJ1c3lNaW5EdXJhdGlvbk1zKSA/IHIgPSAwIDogKGEgPSAwIHwgbC5idXN5RGVsYXlNcywgciA9IChvID0gRmEoKSAtICgxMCAqICgxMDczNzQxODIxIC0gbykgLSAoMCB8IGwudGltZW91dE1zIHx8IDVlMykpKSA8PSBhID8gMCA6IGEgKyByIC0gbyksIAogICAgICAgICAgICAgICAgICAgICAgICAxMCA8IHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1KGUsIG4pLCBlLnRpbWVvdXRIYW5kbGUgPSB5bihkdS5iaW5kKG51bGwsIGUpLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGR1KGUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihpKDMyOSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKFhsKGUpLCBlLmNhbGxiYWNrTm9kZSA9PT0gdCkgcmV0dXJuIFpsLmJpbmQobnVsbCwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiBKbChlKSB7CiAgICAgICAgdmFyIHQgPSBlLmxhc3RFeHBpcmVkVGltZTsKICAgICAgICBpZiAodCA9IDAgIT09IHQgPyB0IDogMTA3Mzc0MTgyMywgMCAhPSAoNDggJiBFbCkpIHRocm93IEVycm9yKGkoMzI3KSk7CiAgICAgICAgaWYgKGh1KCksIGUgPT09IFNsICYmIHQgPT09IENsIHx8IG51KGUsIHQpLCBudWxsICE9PSBPbCkgewogICAgICAgICAgICB2YXIgbiA9IEVsOwogICAgICAgICAgICBFbCB8PSAxNjsKICAgICAgICAgICAgZm9yICh2YXIgciA9IGF1KCk7IDspIHRyeSB7CiAgICAgICAgICAgICAgICBsdSgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgIHJ1KGUsIHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChKYSgpLCBFbCA9IG4sIHZsLmN1cnJlbnQgPSByLCAxID09PSBUbCkgdGhyb3cgbiA9IFBsLCBudShlLCB0KSwgQXUoZSwgdCksIFhsKGUpLCAKICAgICAgICAgICAgbjsKICAgICAgICAgICAgaWYgKG51bGwgIT09IE9sKSB0aHJvdyBFcnJvcihpKDI2MSkpOwogICAgICAgICAgICBlLmZpbmlzaGVkV29yayA9IGUuY3VycmVudC5hbHRlcm5hdGUsIGUuZmluaXNoZWRFeHBpcmF0aW9uVGltZSA9IHQsIFNsID0gbnVsbCwgZHUoZSksIAogICAgICAgICAgICBYbChlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiBldShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBFbDsKICAgICAgICBFbCB8PSAxOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBlKHQpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIDAgPT09IChFbCA9IG4pICYmIEJhKCk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gdHUoZSwgdCkgewogICAgICAgIHZhciBuID0gRWw7CiAgICAgICAgRWwgJj0gLTIsIEVsIHw9IDg7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGUodCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgMCA9PT0gKEVsID0gbikgJiYgQmEoKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBudShlLCB0KSB7CiAgICAgICAgZS5maW5pc2hlZFdvcmsgPSBudWxsLCBlLmZpbmlzaGVkRXhwaXJhdGlvblRpbWUgPSAwOwogICAgICAgIHZhciBuID0gZS50aW1lb3V0SGFuZGxlOwogICAgICAgIGlmICgtMSAhPT0gbiAmJiAoZS50aW1lb3V0SGFuZGxlID0gLTEsIHduKG4pKSwgbnVsbCAhPT0gT2wpIGZvciAobiA9IE9sLnJldHVybjsgbnVsbCAhPT0gbjsgKSB7CiAgICAgICAgICAgIHZhciByID0gbjsKICAgICAgICAgICAgc3dpdGNoIChyLnRhZykgewogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIG51bGwgIT0gKHIgPSByLnR5cGUuY2hpbGRDb250ZXh0VHlwZXMpICYmIG1hKCk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgQW8oKSwgdWEoZGEpLCB1YShmYSk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgUm8ocik7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgQW8oKTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICB1YShNbyk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGVvKHIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG4gPSBuLnJldHVybjsKICAgICAgICB9CiAgICAgICAgU2wgPSBlLCBPbCA9IEN1KGUuY3VycmVudCwgbnVsbCksIENsID0gdCwgVGwgPSB3bCwgUGwgPSBudWxsLCBqbCA9IF9sID0gMTA3Mzc0MTgyMywgCiAgICAgICAgSWwgPSBudWxsLCBObCA9IDAsIEFsID0gITE7CiAgICB9CiAgICBmdW5jdGlvbiBydShlLCB0KSB7CiAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKEphKCksIEZvLmN1cnJlbnQgPSBtaSwgQm8pIGZvciAodmFyIG4gPSBWby5tZW1vaXplZFN0YXRlOyBudWxsICE9PSBuOyApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG4ucXVldWU7CiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gciAmJiAoci5wZW5kaW5nID0gbnVsbCksIG4gPSBuLm5leHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoV28gPSAwLCBxbyA9ICRvID0gVm8gPSBudWxsLCBCbyA9ICExLCBudWxsID09PSBPbCB8fCBudWxsID09PSBPbC5yZXR1cm4pIHJldHVybiBUbCA9IDEsIAogICAgICAgICAgICAgICAgUGwgPSB0LCBPbCA9IG51bGw7CiAgICAgICAgICAgICAgICBlOiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBlLCBvID0gT2wucmV0dXJuLCBpID0gT2wsIGwgPSB0OwogICAgICAgICAgICAgICAgICAgIGlmICh0ID0gQ2wsIGkuZWZmZWN0VGFnIHw9IDIwNDgsIGkuZmlyc3RFZmZlY3QgPSBpLmxhc3RFZmZlY3QgPSBudWxsLCBudWxsICE9PSBsICYmICJvYmplY3QiID09IHR5cGVvZiBsICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGwudGhlbikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09ICgyICYgaS5tb2RlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBpLmFsdGVybmF0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPyAoaS51cGRhdGVRdWV1ZSA9IGMudXBkYXRlUXVldWUsIGkubWVtb2l6ZWRTdGF0ZSA9IGMubWVtb2l6ZWRTdGF0ZSwgaS5leHBpcmF0aW9uVGltZSA9IGMuZXhwaXJhdGlvblRpbWUpIDogKGkudXBkYXRlUXVldWUgPSBudWxsLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubWVtb2l6ZWRTdGF0ZSA9IG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gMCAhPSAoMSAmIE1vLmN1cnJlbnQpLCBmID0gbzsKICAgICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA9IDEzID09PSBmLnRhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gZi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBwKSBkID0gbnVsbCAhPT0gcC5kZWh5ZHJhdGVkOyBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBmLm1lbW9pemVkUHJvcHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB2b2lkIDAgIT09IGcuZmFsbGJhY2sgJiYgKCEwICE9PSBnLnVuc3RhYmxlX2F2b2lkVGhpc0ZhbGxiYWNrIHx8ICFzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gZi51cGRhdGVRdWV1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IG5ldyBTZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYWRkKHUpLCBmLnVwZGF0ZVF1ZXVlID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaC5hZGQodSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gKDIgJiBmLm1vZGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmLmVmZmVjdFRhZyB8PSA2NCwgaS5lZmZlY3RUYWcgJj0gLTI5ODEsIDEgPT09IGkudGFnKSBpZiAobnVsbCA9PT0gaS5hbHRlcm5hdGUpIGkudGFnID0gMTc7IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBsbygxMDczNzQxODIzLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIudGFnID0gMiwgdW8oaSwgYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5leHBpcmF0aW9uVGltZSA9IDEwNzM3NDE4MjM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB2b2lkIDAsIGkgPSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gYS5waW5nQ2FjaGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHYgPyAodiA9IGEucGluZ0NhY2hlID0gbmV3IHBsLCBsID0gbmV3IFNldCwgdi5zZXQodSwgbCkpIDogdm9pZCAwID09PSAobCA9IHYuZ2V0KHUpKSAmJiAobCA9IG5ldyBTZXQsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuc2V0KHUsIGwpKSwgIWwuaGFzKGkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwuYWRkKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHl1LmJpbmQobnVsbCwgYSwgdSwgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUudGhlbih5LCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5lZmZlY3RUYWcgfD0gNDA5NiwgZi5leHBpcmF0aW9uVGltZSA9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmLnJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAobnVsbCAhPT0gZik7CiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBFcnJvcigobWUoaS50eXBlKSB8fCAiQSBSZWFjdCBjb21wb25lbnQiKSArICIgc3VzcGVuZGVkIHdoaWxlIHJlbmRlcmluZywgYnV0IG5vIGZhbGxiYWNrIFVJIHdhcyBzcGVjaWZpZWQuXG5cbkFkZCBhIDxTdXNwZW5zZSBmYWxsYmFjaz0uLi4+IGNvbXBvbmVudCBoaWdoZXIgaW4gdGhlIHRyZWUgdG8gcHJvdmlkZSBhIGxvYWRpbmcgaW5kaWNhdG9yIG9yIHBsYWNlaG9sZGVyIHRvIGRpc3BsYXkuIiArIGJlKGkpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgNSAhPT0gVGwgJiYgKFRsID0gMiksIGwgPSBaaShsLCBpKSwgZiA9IG87CiAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGYudGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGwsIGYuZWZmZWN0VGFnIHw9IDQwOTYsIGYuZXhwaXJhdGlvblRpbWUgPSB0LCBjbyhmLCBnbChmLCB1LCB0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gZi50eXBlLCBrID0gZi5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PSAoNjQgJiBmLmVmZmVjdFRhZykgJiYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHcuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yIHx8IG51bGwgIT09IGsgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2Ygay5jb21wb25lbnREaWRDYXRjaCAmJiAobnVsbCA9PT0gTGwgfHwgIUxsLmhhcyhrKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5lZmZlY3RUYWcgfD0gNDA5NiwgZi5leHBpcmF0aW9uVGltZSA9IHQsIGNvKGYsIGhsKGYsIHUsIHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmLnJldHVybjsKICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChudWxsICE9PSBmKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIE9sID0gc3UoT2wpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICB0ID0gZTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGF1KCkgewogICAgICAgIHZhciBlID0gdmwuY3VycmVudDsKICAgICAgICByZXR1cm4gdmwuY3VycmVudCA9IG1pLCBudWxsID09PSBlID8gbWkgOiBlOwogICAgfQogICAgZnVuY3Rpb24gb3UoZSwgdCkgewogICAgICAgIGUgPCBfbCAmJiAyIDwgZSAmJiAoX2wgPSBlKSwgbnVsbCAhPT0gdCAmJiBlIDwgamwgJiYgMiA8IGUgJiYgKGpsID0gZSwgSWwgPSB0KTsKICAgIH0KICAgIGZ1bmN0aW9uIGl1KGUpIHsKICAgICAgICBlID4gTmwgJiYgKE5sID0gZSk7CiAgICB9CiAgICBmdW5jdGlvbiBsdSgpIHsKICAgICAgICBmb3IgKDtudWxsICE9PSBPbDsgKSBPbCA9IGN1KE9sKTsKICAgIH0KICAgIGZ1bmN0aW9uIHV1KCkgewogICAgICAgIGZvciAoO251bGwgIT09IE9sICYmICFBYSgpOyApIE9sID0gY3UoT2wpOwogICAgfQogICAgZnVuY3Rpb24gY3UoZSkgewogICAgICAgIHZhciB0ID0gbWwoZS5hbHRlcm5hdGUsIGUsIENsKTsKICAgICAgICByZXR1cm4gZS5tZW1vaXplZFByb3BzID0gZS5wZW5kaW5nUHJvcHMsIG51bGwgPT09IHQgJiYgKHQgPSBzdShlKSksIHlsLmN1cnJlbnQgPSBudWxsLCAKICAgICAgICB0OwogICAgfQogICAgZnVuY3Rpb24gc3UoZSkgewogICAgICAgIE9sID0gZTsKICAgICAgICBkbyB7CiAgICAgICAgICAgIHZhciB0ID0gT2wuYWx0ZXJuYXRlOwogICAgICAgICAgICBpZiAoZSA9IE9sLnJldHVybiwgMCA9PSAoMjA0OCAmIE9sLmVmZmVjdFRhZykpIHsKICAgICAgICAgICAgICAgIGlmICh0ID0gWWkodCwgT2wsIENsKSwgMSA9PT0gQ2wgfHwgMSAhPT0gT2wuY2hpbGRFeHBpcmF0aW9uVGltZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCByID0gT2wuY2hpbGQ7IG51bGwgIT09IHI7ICkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHIuZXhwaXJhdGlvblRpbWUsIG8gPSByLmNoaWxkRXhwaXJhdGlvblRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGEgPiBuICYmIChuID0gYSksIG8gPiBuICYmIChuID0gbyksIHIgPSByLnNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIE9sLmNoaWxkRXhwaXJhdGlvblRpbWUgPSBuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQpIHJldHVybiB0OwogICAgICAgICAgICAgICAgbnVsbCAhPT0gZSAmJiAwID09ICgyMDQ4ICYgZS5lZmZlY3RUYWcpICYmIChudWxsID09PSBlLmZpcnN0RWZmZWN0ICYmIChlLmZpcnN0RWZmZWN0ID0gT2wuZmlyc3RFZmZlY3QpLCAKICAgICAgICAgICAgICAgIG51bGwgIT09IE9sLmxhc3RFZmZlY3QgJiYgKG51bGwgIT09IGUubGFzdEVmZmVjdCAmJiAoZS5sYXN0RWZmZWN0Lm5leHRFZmZlY3QgPSBPbC5maXJzdEVmZmVjdCksIAogICAgICAgICAgICAgICAgZS5sYXN0RWZmZWN0ID0gT2wubGFzdEVmZmVjdCksIDEgPCBPbC5lZmZlY3RUYWcgJiYgKG51bGwgIT09IGUubGFzdEVmZmVjdCA/IGUubGFzdEVmZmVjdC5uZXh0RWZmZWN0ID0gT2wgOiBlLmZpcnN0RWZmZWN0ID0gT2wsIAogICAgICAgICAgICAgICAgZS5sYXN0RWZmZWN0ID0gT2wpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAodCA9IFhpKE9sKSkpIHJldHVybiB0LmVmZmVjdFRhZyAmPSAyMDQ3LCB0OwogICAgICAgICAgICAgICAgbnVsbCAhPT0gZSAmJiAoZS5maXJzdEVmZmVjdCA9IGUubGFzdEVmZmVjdCA9IG51bGwsIGUuZWZmZWN0VGFnIHw9IDIwNDgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudWxsICE9PSAodCA9IE9sLnNpYmxpbmcpKSByZXR1cm4gdDsKICAgICAgICAgICAgT2wgPSBlOwogICAgICAgIH0gd2hpbGUgKG51bGwgIT09IE9sKTsKICAgICAgICByZXR1cm4gVGwgPT09IHdsICYmIChUbCA9IDUpLCBudWxsOwogICAgfQogICAgZnVuY3Rpb24gZnUoZSkgewogICAgICAgIHZhciB0ID0gZS5leHBpcmF0aW9uVGltZTsKICAgICAgICByZXR1cm4gdCA+IChlID0gZS5jaGlsZEV4cGlyYXRpb25UaW1lKSA/IHQgOiBlOwogICAgfQogICAgZnVuY3Rpb24gZHUoZSkgewogICAgICAgIHZhciB0ID0gVWEoKTsKICAgICAgICByZXR1cm4gVmEoOTksIHB1LmJpbmQobnVsbCwgZSwgdCkpLCBudWxsOwogICAgfQogICAgZnVuY3Rpb24gcHUoZSwgdCkgewogICAgICAgIGRvIHsKICAgICAgICAgICAgaHUoKTsKICAgICAgICB9IHdoaWxlIChudWxsICE9PSBVbCk7CiAgICAgICAgaWYgKDAgIT0gKDQ4ICYgRWwpKSB0aHJvdyBFcnJvcihpKDMyNykpOwogICAgICAgIHZhciBuID0gZS5maW5pc2hlZFdvcmssIHIgPSBlLmZpbmlzaGVkRXhwaXJhdGlvblRpbWU7CiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBudWxsOwogICAgICAgIGlmIChlLmZpbmlzaGVkV29yayA9IG51bGwsIGUuZmluaXNoZWRFeHBpcmF0aW9uVGltZSA9IDAsIG4gPT09IGUuY3VycmVudCkgdGhyb3cgRXJyb3IoaSgxNzcpKTsKICAgICAgICBlLmNhbGxiYWNrTm9kZSA9IG51bGwsIGUuY2FsbGJhY2tFeHBpcmF0aW9uVGltZSA9IDAsIGUuY2FsbGJhY2tQcmlvcml0eSA9IDkwLCBlLm5leHRLbm93blBlbmRpbmdMZXZlbCA9IDA7CiAgICAgICAgdmFyIGEgPSBmdShuKTsKICAgICAgICBpZiAoZS5maXJzdFBlbmRpbmdUaW1lID0gYSwgciA8PSBlLmxhc3RTdXNwZW5kZWRUaW1lID8gZS5maXJzdFN1c3BlbmRlZFRpbWUgPSBlLmxhc3RTdXNwZW5kZWRUaW1lID0gZS5uZXh0S25vd25QZW5kaW5nTGV2ZWwgPSAwIDogciA8PSBlLmZpcnN0U3VzcGVuZGVkVGltZSAmJiAoZS5maXJzdFN1c3BlbmRlZFRpbWUgPSByIC0gMSksIAogICAgICAgIHIgPD0gZS5sYXN0UGluZ2VkVGltZSAmJiAoZS5sYXN0UGluZ2VkVGltZSA9IDApLCByIDw9IGUubGFzdEV4cGlyZWRUaW1lICYmIChlLmxhc3RFeHBpcmVkVGltZSA9IDApLCAKICAgICAgICBlID09PSBTbCAmJiAoT2wgPSBTbCA9IG51bGwsIENsID0gMCksIDEgPCBuLmVmZmVjdFRhZyA/IG51bGwgIT09IG4ubGFzdEVmZmVjdCA/IChuLmxhc3RFZmZlY3QubmV4dEVmZmVjdCA9IG4sIAogICAgICAgIGEgPSBuLmZpcnN0RWZmZWN0KSA6IGEgPSBuIDogYSA9IG4uZmlyc3RFZmZlY3QsIG51bGwgIT09IGEpIHsKICAgICAgICAgICAgdmFyIG8gPSBFbDsKICAgICAgICAgICAgRWwgfD0gMzIsIHlsLmN1cnJlbnQgPSBudWxsLCBobiA9IEh0OwogICAgICAgICAgICB2YXIgbCA9IHBuKCk7CiAgICAgICAgICAgIGlmIChnbihsKSkgewogICAgICAgICAgICAgICAgaWYgKCJzZWxlY3Rpb25TdGFydCIgaW4gbCkgdmFyIHUgPSB7CiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGwuc2VsZWN0aW9uU3RhcnQsCiAgICAgICAgICAgICAgICAgICAgZW5kOiBsLnNlbGVjdGlvbkVuZAogICAgICAgICAgICAgICAgfTsgZWxzZSBlOiB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAodSA9ICh1ID0gbC5vd25lckRvY3VtZW50KSAmJiB1LmRlZmF1bHRWaWV3IHx8IHdpbmRvdykuZ2V0U2VsZWN0aW9uICYmIHUuZ2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGMgJiYgMCAhPT0gYy5yYW5nZUNvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBjLmFuY2hvck5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gYy5hbmNob3JPZmZzZXQsIGYgPSBjLmZvY3VzTm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGMuZm9jdXNPZmZzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Lm5vZGVUeXBlLCBmLm5vZGVUeXBlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAwLCBwID0gLTEsIGcgPSAtMSwgaCA9IDAsIG0gPSAwLCBiID0gbCwgdiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIHQ6IGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHk7IGIgIT09IHUgfHwgMCAhPT0gcyAmJiAzICE9PSBiLm5vZGVUeXBlIHx8IChwID0gZCArIHMpLCBiICE9PSBmIHx8IDAgIT09IGMgJiYgMyAhPT0gYi5ub2RlVHlwZSB8fCAoZyA9IGQgKyBjKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzID09PSBiLm5vZGVUeXBlICYmIChkICs9IGIubm9kZVZhbHVlLmxlbmd0aCksIG51bGwgIT09ICh5ID0gYi5maXJzdENoaWxkKTsgKSB2ID0gYiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0geTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYiA9PT0gbCkgYnJlYWsgdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodiA9PT0gdSAmJiArK2ggPT09IHMgJiYgKHAgPSBkKSwgdiA9PT0gZiAmJiArK20gPT09IGMgJiYgKGcgPSBkKSwgbnVsbCAhPT0gKHkgPSBiLm5leHRTaWJsaW5nKSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IChiID0gdikucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSB5OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAtMSA9PT0gcCB8fCAtMSA9PT0gZyA/IG51bGwgOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB1ID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHUgPSB1IHx8IHsKICAgICAgICAgICAgICAgICAgICBzdGFydDogMCwKICAgICAgICAgICAgICAgICAgICBlbmQ6IDAKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSB1ID0gbnVsbDsKICAgICAgICAgICAgbW4gPSB7CiAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50RGV0YWNoZWQ6IG51bGwsCiAgICAgICAgICAgICAgICBmb2N1c2VkRWxlbTogbCwKICAgICAgICAgICAgICAgIHNlbGVjdGlvblJhbmdlOiB1CiAgICAgICAgICAgIH0sIEh0ID0gITEsIFJsID0gYTsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBndSgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBSbCkgdGhyb3cgRXJyb3IoaSgzMzApKTsKICAgICAgICAgICAgICAgICAgICB2dShSbCwgZSksIFJsID0gUmwubmV4dEVmZmVjdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSB3aGlsZSAobnVsbCAhPT0gUmwpOwogICAgICAgICAgICBSbCA9IGE7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsID0gZSwgdSA9IHQ7IG51bGwgIT09IFJsOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBSbC5lZmZlY3RUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxNiAmIHcgJiYgVWUoUmwuc3RhdGVOb2RlLCAiIiksIDEyOCAmIHcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gUmwuYWx0ZXJuYXRlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGsucmVmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHggJiYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHggPyB4KG51bGwpIDogeC5jdXJyZW50ID0gbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgxMDM4ICYgdykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsKFJsKSwgUmwuZWZmZWN0VGFnICY9IC0zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsKFJsKSwgUmwuZWZmZWN0VGFnICY9IC0zLCBmbChSbC5hbHRlcm5hdGUsIFJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwMjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSbC5lZmZlY3RUYWcgJj0gLTEwMjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDI4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmwuZWZmZWN0VGFnICY9IC0xMDI1LCBmbChSbC5hbHRlcm5hdGUsIFJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbChSbC5hbHRlcm5hdGUsIFJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbChsLCBzID0gUmwsIHUpLCBsbChzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBSbCA9IFJsLm5leHRFZmZlY3Q7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBSbCkgdGhyb3cgRXJyb3IoaSgzMzApKTsKICAgICAgICAgICAgICAgICAgICB2dShSbCwgZSksIFJsID0gUmwubmV4dEVmZmVjdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSB3aGlsZSAobnVsbCAhPT0gUmwpOwogICAgICAgICAgICBpZiAoeCA9IG1uLCBrID0gcG4oKSwgdyA9IHguZm9jdXNlZEVsZW0sIHUgPSB4LnNlbGVjdGlvblJhbmdlLCBrICE9PSB3ICYmIHcgJiYgdy5vd25lckRvY3VtZW50ICYmIGZ1bmN0aW9uIGUodCwgbikgewogICAgICAgICAgICAgICAgcmV0dXJuICEoIXQgfHwgIW4pICYmICh0ID09PSBuIHx8ICghdCB8fCAzICE9PSB0Lm5vZGVUeXBlKSAmJiAobiAmJiAzID09PSBuLm5vZGVUeXBlID8gZSh0LCBuLnBhcmVudE5vZGUpIDogImNvbnRhaW5zIiBpbiB0ID8gdC5jb250YWlucyhuKSA6ICEhdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiAhISgxNiAmIHQuY29tcGFyZURvY3VtZW50UG9zaXRpb24obikpKSk7CiAgICAgICAgICAgIH0ody5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdykpIHsKICAgICAgICAgICAgICAgIG51bGwgIT09IHUgJiYgZ24odykgJiYgKGsgPSB1LnN0YXJ0LCB2b2lkIDAgPT09ICh4ID0gdS5lbmQpICYmICh4ID0gayksICJzZWxlY3Rpb25TdGFydCIgaW4gdyA/ICh3LnNlbGVjdGlvblN0YXJ0ID0gaywgCiAgICAgICAgICAgICAgICB3LnNlbGVjdGlvbkVuZCA9IE1hdGgubWluKHgsIHcudmFsdWUubGVuZ3RoKSkgOiAoeCA9IChrID0gdy5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50KSAmJiBrLmRlZmF1bHRWaWV3IHx8IHdpbmRvdykuZ2V0U2VsZWN0aW9uICYmICh4ID0geC5nZXRTZWxlY3Rpb24oKSwgCiAgICAgICAgICAgICAgICBzID0gdy50ZXh0Q29udGVudC5sZW5ndGgsIGwgPSBNYXRoLm1pbih1LnN0YXJ0LCBzKSwgdSA9IHZvaWQgMCA9PT0gdS5lbmQgPyBsIDogTWF0aC5taW4odS5lbmQsIHMpLCAKICAgICAgICAgICAgICAgICF4LmV4dGVuZCAmJiBsID4gdSAmJiAocyA9IHUsIHUgPSBsLCBsID0gcyksIHMgPSBkbih3LCBsKSwgZiA9IGRuKHcsIHUpLCBzICYmIGYgJiYgKDEgIT09IHgucmFuZ2VDb3VudCB8fCB4LmFuY2hvck5vZGUgIT09IHMubm9kZSB8fCB4LmFuY2hvck9mZnNldCAhPT0gcy5vZmZzZXQgfHwgeC5mb2N1c05vZGUgIT09IGYubm9kZSB8fCB4LmZvY3VzT2Zmc2V0ICE9PSBmLm9mZnNldCkgJiYgKChrID0gay5jcmVhdGVSYW5nZSgpKS5zZXRTdGFydChzLm5vZGUsIHMub2Zmc2V0KSwgCiAgICAgICAgICAgICAgICB4LnJlbW92ZUFsbFJhbmdlcygpLCBsID4gdSA/ICh4LmFkZFJhbmdlKGspLCB4LmV4dGVuZChmLm5vZGUsIGYub2Zmc2V0KSkgOiAoay5zZXRFbmQoZi5ub2RlLCBmLm9mZnNldCksIAogICAgICAgICAgICAgICAgeC5hZGRSYW5nZShrKSkpKSksIGsgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAoeCA9IHc7IHggPSB4LnBhcmVudE5vZGU7ICkgMSA9PT0geC5ub2RlVHlwZSAmJiBrLnB1c2goewogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHgsCiAgICAgICAgICAgICAgICAgICAgbGVmdDogeC5zY3JvbGxMZWZ0LAogICAgICAgICAgICAgICAgICAgIHRvcDogeC5zY3JvbGxUb3AKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZm9yICgiZnVuY3Rpb24iID09IHR5cGVvZiB3LmZvY3VzICYmIHcuZm9jdXMoKSwgdyA9IDA7IHcgPCBrLmxlbmd0aDsgdysrKSAoeCA9IGtbd10pLmVsZW1lbnQuc2Nyb2xsTGVmdCA9IHgubGVmdCwgCiAgICAgICAgICAgICAgICB4LmVsZW1lbnQuc2Nyb2xsVG9wID0geC50b3A7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgSHQgPSAhIWhuLCBtbiA9IGhuID0gbnVsbCwgZS5jdXJyZW50ID0gbiwgUmwgPSBhOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGZvciAodyA9IGU7IG51bGwgIT09IFJsOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEUgPSBSbC5lZmZlY3RUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzNiAmIEUgJiYgb2wodywgUmwuYWx0ZXJuYXRlLCBSbCksIDEyOCAmIEUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUyA9IFJsLnJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBTKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSBSbC5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChSbC50YWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IE87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBPOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTID8gUyhrKSA6IFMuY3VycmVudCA9IGs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgUmwgPSBSbC5uZXh0RWZmZWN0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gUmwpIHRocm93IEVycm9yKGkoMzMwKSk7CiAgICAgICAgICAgICAgICAgICAgdnUoUmwsIGUpLCBSbCA9IFJsLm5leHRFZmZlY3Q7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gd2hpbGUgKG51bGwgIT09IFJsKTsKICAgICAgICAgICAgUmwgPSBudWxsLCBEYSgpLCBFbCA9IG87CiAgICAgICAgfSBlbHNlIGUuY3VycmVudCA9IG47CiAgICAgICAgaWYgKEZsKSBGbCA9ICExLCBVbCA9IGUsIFdsID0gdDsgZWxzZSBmb3IgKFJsID0gYTsgbnVsbCAhPT0gUmw7ICkgdCA9IFJsLm5leHRFZmZlY3QsIAogICAgICAgIFJsLm5leHRFZmZlY3QgPSBudWxsLCBSbCA9IHQ7CiAgICAgICAgaWYgKDAgPT09ICh0ID0gZS5maXJzdFBlbmRpbmdUaW1lKSAmJiAoTGwgPSBudWxsKSwgMTA3Mzc0MTgyMyA9PT0gdCA/IGUgPT09IHFsID8gJGwrKyA6ICgkbCA9IDAsIAogICAgICAgIHFsID0gZSkgOiAkbCA9IDAsICJmdW5jdGlvbiIgPT0gdHlwZW9mIGt1ICYmIGt1KG4uc3RhdGVOb2RlLCByKSwgWGwoZSksIE1sKSB0aHJvdyBNbCA9ICExLCAKICAgICAgICBlID0gemwsIHpsID0gbnVsbCwgZTsKICAgICAgICByZXR1cm4gMCAhPSAoOCAmIEVsKSB8fCBCYSgpLCBudWxsOwogICAgfQogICAgZnVuY3Rpb24gZ3UoKSB7CiAgICAgICAgZm9yICg7bnVsbCAhPT0gUmw7ICkgewogICAgICAgICAgICB2YXIgZSA9IFJsLmVmZmVjdFRhZzsKICAgICAgICAgICAgMCAhPSAoMjU2ICYgZSkgJiYgbmwoUmwuYWx0ZXJuYXRlLCBSbCksIDAgPT0gKDUxMiAmIGUpIHx8IEZsIHx8IChGbCA9ICEwLCAkYSg5NywgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGh1KCksIG51bGw7CiAgICAgICAgICAgIH0pKSksIFJsID0gUmwubmV4dEVmZmVjdDsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBodSgpIHsKICAgICAgICBpZiAoOTAgIT09IFdsKSB7CiAgICAgICAgICAgIHZhciBlID0gOTcgPCBXbCA/IDk3IDogV2w7CiAgICAgICAgICAgIHJldHVybiBXbCA9IDkwLCBWYShlLCBtdSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gbXUoKSB7CiAgICAgICAgaWYgKG51bGwgPT09IFVsKSByZXR1cm4gITE7CiAgICAgICAgdmFyIGUgPSBVbDsKICAgICAgICBpZiAoVWwgPSBudWxsLCAwICE9ICg0OCAmIEVsKSkgdGhyb3cgRXJyb3IoaSgzMzEpKTsKICAgICAgICB2YXIgdCA9IEVsOwogICAgICAgIGZvciAoRWwgfD0gMzIsIGUgPSBlLmN1cnJlbnQuZmlyc3RFZmZlY3Q7IG51bGwgIT09IGU7ICkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlOwogICAgICAgICAgICAgICAgaWYgKDAgIT0gKDUxMiAmIG4uZWZmZWN0VGFnKSkgc3dpdGNoIChuLnRhZykgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICAgICAgcmwoNSwgbiksIGFsKDUsIG4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkgdGhyb3cgRXJyb3IoaSgzMzApKTsKICAgICAgICAgICAgICAgIHZ1KGUsIHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG4gPSBlLm5leHRFZmZlY3QsIGUubmV4dEVmZmVjdCA9IG51bGwsIGUgPSBuOwogICAgICAgIH0KICAgICAgICByZXR1cm4gRWwgPSB0LCBCYSgpLCAhMDsKICAgIH0KICAgIGZ1bmN0aW9uIGJ1KGUsIHQsIG4pIHsKICAgICAgICB1byhlLCB0ID0gZ2woZSwgdCA9IFppKG4sIHQpLCAxMDczNzQxODIzKSksIG51bGwgIT09IChlID0gS2woZSwgMTA3Mzc0MTgyMykpICYmIFhsKGUpOwogICAgfQogICAgZnVuY3Rpb24gdnUoZSwgdCkgewogICAgICAgIGlmICgzID09PSBlLnRhZykgYnUoZSwgZSwgdCk7IGVsc2UgZm9yICh2YXIgbiA9IGUucmV0dXJuOyBudWxsICE9PSBuOyApIHsKICAgICAgICAgICAgaWYgKDMgPT09IG4udGFnKSB7CiAgICAgICAgICAgICAgICBidShuLCBlLCB0KTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgxID09PSBuLnRhZykgewogICAgICAgICAgICAgICAgdmFyIHIgPSBuLnN0YXRlTm9kZTsKICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBuLnR5cGUuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yIHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIuY29tcG9uZW50RGlkQ2F0Y2ggJiYgKG51bGwgPT09IExsIHx8ICFMbC5oYXMocikpKSB7CiAgICAgICAgICAgICAgICAgICAgdW8obiwgZSA9IGhsKG4sIGUgPSBaaSh0LCBlKSwgMTA3Mzc0MTgyMykpLCBudWxsICE9PSAobiA9IEtsKG4sIDEwNzM3NDE4MjMpKSAmJiBYbChuKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBuID0gbi5yZXR1cm47CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24geXUoZSwgdCwgbikgewogICAgICAgIHZhciByID0gZS5waW5nQ2FjaGU7CiAgICAgICAgbnVsbCAhPT0gciAmJiByLmRlbGV0ZSh0KSwgU2wgPT09IGUgJiYgQ2wgPT09IG4gPyBUbCA9PT0geGwgfHwgVGwgPT09IGtsICYmIDEwNzM3NDE4MjMgPT09IF9sICYmIEZhKCkgLSBEbCA8IDUwMCA/IG51KGUsIENsKSA6IEFsID0gITAgOiBOdShlLCBuKSAmJiAoMCAhPT0gKHQgPSBlLmxhc3RQaW5nZWRUaW1lKSAmJiB0IDwgbiB8fCAoZS5sYXN0UGluZ2VkVGltZSA9IG4sIAogICAgICAgIFhsKGUpKSk7CiAgICB9CiAgICBmdW5jdGlvbiB3dShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBlLnN0YXRlTm9kZTsKICAgICAgICBudWxsICE9PSBuICYmIG4uZGVsZXRlKHQpLCAwID09PSAodCA9IDApICYmICh0ID0gUWwodCA9IEhsKCksIGUsIG51bGwpKSwgbnVsbCAhPT0gKGUgPSBLbChlLCB0KSkgJiYgWGwoZSk7CiAgICB9CiAgICBtbCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICB2YXIgciA9IHQuZXhwaXJhdGlvblRpbWU7CiAgICAgICAgaWYgKG51bGwgIT09IGUpIHsKICAgICAgICAgICAgdmFyIGEgPSB0LnBlbmRpbmdQcm9wczsKICAgICAgICAgICAgaWYgKGUubWVtb2l6ZWRQcm9wcyAhPT0gYSB8fCBkYS5jdXJyZW50KSBqaSA9ICEwOyBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChyIDwgbikgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoamkgPSAhMSwgdC50YWcpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgRmkodCksIFBpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERvKHQpLCA0ICYgdC5tb2RlICYmIDEgIT09IG4gJiYgYS5oaWRkZW4pIHJldHVybiB0LmV4cGlyYXRpb25UaW1lID0gdC5jaGlsZEV4cGlyYXRpb25UaW1lID0gMSwgCiAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgaGEodC50eXBlKSAmJiB5YSh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICBObyh0LCB0LnN0YXRlTm9kZS5jb250YWluZXJJbmZvKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQubWVtb2l6ZWRQcm9wcy52YWx1ZSwgYSA9IHQudHlwZS5fY29udGV4dCwgY2EoS2EsIGEuX2N1cnJlbnRWYWx1ZSksIGEuX2N1cnJlbnRWYWx1ZSA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0Lm1lbW9pemVkU3RhdGUpIHJldHVybiAwICE9PSAociA9IHQuY2hpbGQuY2hpbGRFeHBpcmF0aW9uVGltZSkgJiYgciA+PSBuID8gcWkoZSwgdCwgbikgOiAoY2EoTW8sIDEgJiBNby5jdXJyZW50KSwgCiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09ICh0ID0gR2koZSwgdCwgbikpID8gdC5zaWJsaW5nIDogbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhKE1vLCAxICYgTW8uY3VycmVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyID0gdC5jaGlsZEV4cGlyYXRpb25UaW1lID49IG4sIDAgIT0gKDY0ICYgZS5lZmZlY3RUYWcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocikgcmV0dXJuIFFpKGUsIHQsIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lZmZlY3RUYWcgfD0gNjQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChhID0gdC5tZW1vaXplZFN0YXRlKSAmJiAoYS5yZW5kZXJpbmcgPSBudWxsLCBhLnRhaWwgPSBudWxsKSwgY2EoTW8sIE1vLmN1cnJlbnQpLCAKICAgICAgICAgICAgICAgICAgICAgICAgIXIpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2koZSwgdCwgbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBqaSA9ICExOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGppID0gITE7CiAgICAgICAgc3dpdGNoICh0LmV4cGlyYXRpb25UaW1lID0gMCwgdC50YWcpIHsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaWYgKHIgPSB0LnR5cGUsIG51bGwgIT09IGUgJiYgKGUuYWx0ZXJuYXRlID0gbnVsbCwgdC5hbHRlcm5hdGUgPSBudWxsLCB0LmVmZmVjdFRhZyB8PSAyKSwgCiAgICAgICAgICAgIGUgPSB0LnBlbmRpbmdQcm9wcywgYSA9IGdhKHQsIGZhLmN1cnJlbnQpLCBubyh0LCBuKSwgYSA9IEdvKG51bGwsIHQsIHIsIGUsIGEsIG4pLCAKICAgICAgICAgICAgdC5lZmZlY3RUYWcgfD0gMSwgIm9iamVjdCIgPT0gdHlwZW9mIGEgJiYgbnVsbCAhPT0gYSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBhLnJlbmRlciAmJiB2b2lkIDAgPT09IGEuJCR0eXBlb2YpIHsKICAgICAgICAgICAgICAgIGlmICh0LnRhZyA9IDEsIHQubWVtb2l6ZWRTdGF0ZSA9IG51bGwsIHQudXBkYXRlUXVldWUgPSBudWxsLCBoYShyKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0gITA7CiAgICAgICAgICAgICAgICAgICAgeWEodCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgbyA9ICExOwogICAgICAgICAgICAgICAgdC5tZW1vaXplZFN0YXRlID0gbnVsbCAhPT0gYS5zdGF0ZSAmJiB2b2lkIDAgIT09IGEuc3RhdGUgPyBhLnN0YXRlIDogbnVsbCwgb28odCk7CiAgICAgICAgICAgICAgICB2YXIgbCA9IHIuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOwogICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbCAmJiBobyh0LCByLCBsLCBlKSwgYS51cGRhdGVyID0gbW8sIHQuc3RhdGVOb2RlID0gYSwgYS5fcmVhY3RJbnRlcm5hbEZpYmVyID0gdCwgCiAgICAgICAgICAgICAgICB3byh0LCByLCBlLCBuKSwgdCA9IExpKG51bGwsIHQsIHIsICEwLCBvLCBuKTsKICAgICAgICAgICAgfSBlbHNlIHQudGFnID0gMCwgSWkobnVsbCwgdCwgYSwgbiksIHQgPSB0LmNoaWxkOwogICAgICAgICAgICByZXR1cm4gdDsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBlOiB7CiAgICAgICAgICAgICAgICBpZiAoYSA9IHQuZWxlbWVudFR5cGUsIG51bGwgIT09IGUgJiYgKGUuYWx0ZXJuYXRlID0gbnVsbCwgdC5hbHRlcm5hdGUgPSBudWxsLCB0LmVmZmVjdFRhZyB8PSAyKSwgCiAgICAgICAgICAgICAgICBlID0gdC5wZW5kaW5nUHJvcHMsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoLTEgPT09IGUuX3N0YXR1cykgewogICAgICAgICAgICAgICAgICAgICAgICBlLl9zdGF0dXMgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuX2N0b3I7CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0KCksIGUuX3Jlc3VsdCA9IHQsIHQudGhlbigoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PT0gZS5fc3RhdHVzICYmICh0ID0gdC5kZWZhdWx0LCBlLl9zdGF0dXMgPSAxLCBlLl9yZXN1bHQgPSB0KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksIChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBlLl9zdGF0dXMgJiYgKGUuX3N0YXR1cyA9IDIsIGUuX3Jlc3VsdCA9IHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfShhKSwgMSAhPT0gYS5fc3RhdHVzKSB0aHJvdyBhLl9yZXN1bHQ7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGEgPSBhLl9yZXN1bHQsIHQudHlwZSA9IGEsIG8gPSB0LnRhZyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSkgcmV0dXJuIE91KGUpID8gMSA6IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGUgPSBlLiQkdHlwZW9mKSA9PT0gdWUpIHJldHVybiAxMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPT09IGZlKSByZXR1cm4gMTQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAyOwogICAgICAgICAgICAgICAgfShhKSwgZSA9IEdhKGEsIGUpLCBvKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICB0ID0gTWkobnVsbCwgdCwgYSwgZSwgbik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICB0ID0gemkobnVsbCwgdCwgYSwgZSwgbik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKCiAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgdCA9IE5pKG51bGwsIHQsIGEsIGUsIG4pOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CgogICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgIHQgPSBBaShudWxsLCB0LCBhLCBHYShhLnR5cGUsIGUpLCByLCBuKTsKICAgICAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoaSgzMDYsIGEsICIiKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHQ7CgogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gciA9IHQudHlwZSwgYSA9IHQucGVuZGluZ1Byb3BzLCBNaShlLCB0LCByLCBhID0gdC5lbGVtZW50VHlwZSA9PT0gciA/IGEgOiBHYShyLCBhKSwgbik7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICByZXR1cm4gciA9IHQudHlwZSwgYSA9IHQucGVuZGluZ1Byb3BzLCB6aShlLCB0LCByLCBhID0gdC5lbGVtZW50VHlwZSA9PT0gciA/IGEgOiBHYShyLCBhKSwgbik7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBpZiAoRmkodCksIHIgPSB0LnVwZGF0ZVF1ZXVlLCBudWxsID09PSBlIHx8IG51bGwgPT09IHIpIHRocm93IEVycm9yKGkoMjgyKSk7CiAgICAgICAgICAgIGlmIChyID0gdC5wZW5kaW5nUHJvcHMsIGEgPSBudWxsICE9PSAoYSA9IHQubWVtb2l6ZWRTdGF0ZSkgPyBhLmVsZW1lbnQgOiBudWxsLCBpbyhlLCB0KSwgCiAgICAgICAgICAgIHNvKHQsIHIsIG51bGwsIG4pLCAociA9IHQubWVtb2l6ZWRTdGF0ZS5lbGVtZW50KSA9PT0gYSkgUGkoKSwgdCA9IEdpKGUsIHQsIG4pOyBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICgoYSA9IHQuc3RhdGVOb2RlLmh5ZHJhdGUpICYmIChraSA9IGtuKHQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8uZmlyc3RDaGlsZCksIAogICAgICAgICAgICAgICAgd2kgPSB0LCBhID0geGkgPSAhMCksIGEpIGZvciAobiA9IENvKHQsIG51bGwsIHIsIG4pLCB0LmNoaWxkID0gbjsgbjsgKSBuLmVmZmVjdFRhZyA9IC0zICYgbi5lZmZlY3RUYWcgfCAxMDI0LCAKICAgICAgICAgICAgICAgIG4gPSBuLnNpYmxpbmc7IGVsc2UgSWkoZSwgdCwgciwgbiksIFBpKCk7CiAgICAgICAgICAgICAgICB0ID0gdC5jaGlsZDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdDsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJldHVybiBEbyh0KSwgbnVsbCA9PT0gZSAmJiBPaSh0KSwgciA9IHQudHlwZSwgYSA9IHQucGVuZGluZ1Byb3BzLCBvID0gbnVsbCAhPT0gZSA/IGUubWVtb2l6ZWRQcm9wcyA6IG51bGwsIAogICAgICAgICAgICBsID0gYS5jaGlsZHJlbiwgdm4ociwgYSkgPyBsID0gbnVsbCA6IG51bGwgIT09IG8gJiYgdm4ociwgbykgJiYgKHQuZWZmZWN0VGFnIHw9IDE2KSwgCiAgICAgICAgICAgIFJpKGUsIHQpLCA0ICYgdC5tb2RlICYmIDEgIT09IG4gJiYgYS5oaWRkZW4gPyAodC5leHBpcmF0aW9uVGltZSA9IHQuY2hpbGRFeHBpcmF0aW9uVGltZSA9IDEsIAogICAgICAgICAgICB0ID0gbnVsbCkgOiAoSWkoZSwgdCwgbCwgbiksIHQgPSB0LmNoaWxkKSwgdDsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIHJldHVybiBudWxsID09PSBlICYmIE9pKHQpLCBudWxsOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIHJldHVybiBxaShlLCB0LCBuKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBObyh0LCB0LnN0YXRlTm9kZS5jb250YWluZXJJbmZvKSwgciA9IHQucGVuZGluZ1Byb3BzLCBudWxsID09PSBlID8gdC5jaGlsZCA9IE9vKHQsIG51bGwsIHIsIG4pIDogSWkoZSwgdCwgciwgbiksIAogICAgICAgICAgICB0LmNoaWxkOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHJldHVybiByID0gdC50eXBlLCBhID0gdC5wZW5kaW5nUHJvcHMsIE5pKGUsIHQsIHIsIGEgPSB0LmVsZW1lbnRUeXBlID09PSByID8gYSA6IEdhKHIsIGEpLCBuKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIHJldHVybiBJaShlLCB0LCB0LnBlbmRpbmdQcm9wcywgbiksIHQuY2hpbGQ7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgcmV0dXJuIElpKGUsIHQsIHQucGVuZGluZ1Byb3BzLmNoaWxkcmVuLCBuKSwgdC5jaGlsZDsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBlOiB7CiAgICAgICAgICAgICAgICByID0gdC50eXBlLl9jb250ZXh0LCBhID0gdC5wZW5kaW5nUHJvcHMsIGwgPSB0Lm1lbW9pemVkUHJvcHMsIG8gPSBhLnZhbHVlOwogICAgICAgICAgICAgICAgdmFyIHUgPSB0LnR5cGUuX2NvbnRleHQ7CiAgICAgICAgICAgICAgICBpZiAoY2EoS2EsIHUuX2N1cnJlbnRWYWx1ZSksIHUuX2N1cnJlbnRWYWx1ZSA9IG8sIG51bGwgIT09IGwpIGlmICh1ID0gbC52YWx1ZSwgMCA9PT0gKG8gPSB6cih1LCBvKSA/IDAgOiAwIHwgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHIuX2NhbGN1bGF0ZUNoYW5nZWRCaXRzID8gci5fY2FsY3VsYXRlQ2hhbmdlZEJpdHModSwgbykgOiAxMDczNzQxODIzKSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobC5jaGlsZHJlbiA9PT0gYS5jaGlsZHJlbiAmJiAhZGEuY3VycmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICB0ID0gR2koZSwgdCwgbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGZvciAobnVsbCAhPT0gKHUgPSB0LmNoaWxkKSAmJiAodS5yZXR1cm4gPSB0KTsgbnVsbCAhPT0gdTsgKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB1LmRlcGVuZGVuY2llczsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gYykgewogICAgICAgICAgICAgICAgICAgICAgICBsID0gdS5jaGlsZDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IGMuZmlyc3RDb250ZXh0OyBudWxsICE9PSBzOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLmNvbnRleHQgPT09IHIgJiYgMCAhPSAocy5vYnNlcnZlZEJpdHMgJiBvKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgPT09IHUudGFnICYmICgocyA9IGxvKG4sIG51bGwpKS50YWcgPSAyLCB1byh1LCBzKSksIHUuZXhwaXJhdGlvblRpbWUgPCBuICYmICh1LmV4cGlyYXRpb25UaW1lID0gbiksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IChzID0gdS5hbHRlcm5hdGUpICYmIHMuZXhwaXJhdGlvblRpbWUgPCBuICYmIChzLmV4cGlyYXRpb25UaW1lID0gbiksIHRvKHUucmV0dXJuLCBuKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5leHBpcmF0aW9uVGltZSA8IG4gJiYgKGMuZXhwaXJhdGlvblRpbWUgPSBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBzLm5leHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbCA9IDEwID09PSB1LnRhZyAmJiB1LnR5cGUgPT09IHQudHlwZSA/IG51bGwgOiB1LmNoaWxkOwogICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBsKSBsLnJldHVybiA9IHU7IGVsc2UgZm9yIChsID0gdTsgbnVsbCAhPT0gbDsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsID09PSB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAodSA9IGwuc2libGluZykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUucmV0dXJuID0gbC5yZXR1cm4sIGwgPSB1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGwucmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB1ID0gbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIElpKGUsIHQsIGEuY2hpbGRyZW4sIG4pLCB0ID0gdC5jaGlsZDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdDsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIHJldHVybiBhID0gdC50eXBlLCByID0gKG8gPSB0LnBlbmRpbmdQcm9wcykuY2hpbGRyZW4sIG5vKHQsIG4pLCByID0gcihhID0gcm8oYSwgby51bnN0YWJsZV9vYnNlcnZlZEJpdHMpKSwgCiAgICAgICAgICAgIHQuZWZmZWN0VGFnIHw9IDEsIElpKGUsIHQsIHIsIG4pLCB0LmNoaWxkOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIHJldHVybiBvID0gR2EoYSA9IHQudHlwZSwgdC5wZW5kaW5nUHJvcHMpLCBBaShlLCB0LCBhLCBvID0gR2EoYS50eXBlLCBvKSwgciwgbik7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgcmV0dXJuIERpKGUsIHQsIHQudHlwZSwgdC5wZW5kaW5nUHJvcHMsIHIsIG4pOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIHJldHVybiByID0gdC50eXBlLCBhID0gdC5wZW5kaW5nUHJvcHMsIGEgPSB0LmVsZW1lbnRUeXBlID09PSByID8gYSA6IEdhKHIsIGEpLCBudWxsICE9PSBlICYmIChlLmFsdGVybmF0ZSA9IG51bGwsIAogICAgICAgICAgICB0LmFsdGVybmF0ZSA9IG51bGwsIHQuZWZmZWN0VGFnIHw9IDIpLCB0LnRhZyA9IDEsIGhhKHIpID8gKGUgPSAhMCwgeWEodCkpIDogZSA9ICExLCAKICAgICAgICAgICAgbm8odCwgbiksIHZvKHQsIHIsIGEpLCB3byh0LCByLCBhLCBuKSwgTGkobnVsbCwgdCwgciwgITAsIGUsIG4pOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJldHVybiBRaShlLCB0LCBuKTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgRXJyb3IoaSgxNTYsIHQudGFnKSk7CiAgICB9OwogICAgdmFyIGt1ID0gbnVsbCwgeHUgPSBudWxsOwogICAgZnVuY3Rpb24gRXUoZSwgdCwgbiwgcikgewogICAgICAgIHRoaXMudGFnID0gZSwgdGhpcy5rZXkgPSBuLCB0aGlzLnNpYmxpbmcgPSB0aGlzLmNoaWxkID0gdGhpcy5yZXR1cm4gPSB0aGlzLnN0YXRlTm9kZSA9IHRoaXMudHlwZSA9IHRoaXMuZWxlbWVudFR5cGUgPSBudWxsLCAKICAgICAgICB0aGlzLmluZGV4ID0gMCwgdGhpcy5yZWYgPSBudWxsLCB0aGlzLnBlbmRpbmdQcm9wcyA9IHQsIHRoaXMuZGVwZW5kZW5jaWVzID0gdGhpcy5tZW1vaXplZFN0YXRlID0gdGhpcy51cGRhdGVRdWV1ZSA9IHRoaXMubWVtb2l6ZWRQcm9wcyA9IG51bGwsIAogICAgICAgIHRoaXMubW9kZSA9IHIsIHRoaXMuZWZmZWN0VGFnID0gMCwgdGhpcy5sYXN0RWZmZWN0ID0gdGhpcy5maXJzdEVmZmVjdCA9IHRoaXMubmV4dEVmZmVjdCA9IG51bGwsIAogICAgICAgIHRoaXMuY2hpbGRFeHBpcmF0aW9uVGltZSA9IHRoaXMuZXhwaXJhdGlvblRpbWUgPSAwLCB0aGlzLmFsdGVybmF0ZSA9IG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiBTdShlLCB0LCBuLCByKSB7CiAgICAgICAgcmV0dXJuIG5ldyBFdShlLCB0LCBuLCByKTsKICAgIH0KICAgIGZ1bmN0aW9uIE91KGUpIHsKICAgICAgICByZXR1cm4gISghKGUgPSBlLnByb3RvdHlwZSkgfHwgIWUuaXNSZWFjdENvbXBvbmVudCk7CiAgICB9CiAgICBmdW5jdGlvbiBDdShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBlLmFsdGVybmF0ZTsKICAgICAgICByZXR1cm4gbnVsbCA9PT0gbiA/ICgobiA9IFN1KGUudGFnLCB0LCBlLmtleSwgZS5tb2RlKSkuZWxlbWVudFR5cGUgPSBlLmVsZW1lbnRUeXBlLCAKICAgICAgICBuLnR5cGUgPSBlLnR5cGUsIG4uc3RhdGVOb2RlID0gZS5zdGF0ZU5vZGUsIG4uYWx0ZXJuYXRlID0gZSwgZS5hbHRlcm5hdGUgPSBuKSA6IChuLnBlbmRpbmdQcm9wcyA9IHQsIAogICAgICAgIG4uZWZmZWN0VGFnID0gMCwgbi5uZXh0RWZmZWN0ID0gbnVsbCwgbi5maXJzdEVmZmVjdCA9IG51bGwsIG4ubGFzdEVmZmVjdCA9IG51bGwpLCAKICAgICAgICBuLmNoaWxkRXhwaXJhdGlvblRpbWUgPSBlLmNoaWxkRXhwaXJhdGlvblRpbWUsIG4uZXhwaXJhdGlvblRpbWUgPSBlLmV4cGlyYXRpb25UaW1lLCAKICAgICAgICBuLmNoaWxkID0gZS5jaGlsZCwgbi5tZW1vaXplZFByb3BzID0gZS5tZW1vaXplZFByb3BzLCBuLm1lbW9pemVkU3RhdGUgPSBlLm1lbW9pemVkU3RhdGUsIAogICAgICAgIG4udXBkYXRlUXVldWUgPSBlLnVwZGF0ZVF1ZXVlLCB0ID0gZS5kZXBlbmRlbmNpZXMsIG4uZGVwZW5kZW5jaWVzID0gbnVsbCA9PT0gdCA/IG51bGwgOiB7CiAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiB0LmV4cGlyYXRpb25UaW1lLAogICAgICAgICAgICBmaXJzdENvbnRleHQ6IHQuZmlyc3RDb250ZXh0LAogICAgICAgICAgICByZXNwb25kZXJzOiB0LnJlc3BvbmRlcnMKICAgICAgICB9LCBuLnNpYmxpbmcgPSBlLnNpYmxpbmcsIG4uaW5kZXggPSBlLmluZGV4LCBuLnJlZiA9IGUucmVmLCBuOwogICAgfQogICAgZnVuY3Rpb24gVHUoZSwgdCwgbiwgciwgYSwgbykgewogICAgICAgIHZhciBsID0gMjsKICAgICAgICBpZiAociA9IGUsICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUpIE91KGUpICYmIChsID0gMSk7IGVsc2UgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSBsID0gNTsgZWxzZSBlOiBzd2l0Y2ggKGUpIHsKICAgICAgICAgIGNhc2UgbmU6CiAgICAgICAgICAgIHJldHVybiBQdShuLmNoaWxkcmVuLCBhLCBvLCB0KTsKCiAgICAgICAgICBjYXNlIGxlOgogICAgICAgICAgICBsID0gOCwgYSB8PSA3OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIHJlOgogICAgICAgICAgICBsID0gOCwgYSB8PSAxOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIGFlOgogICAgICAgICAgICByZXR1cm4gKGUgPSBTdSgxMiwgbiwgdCwgOCB8IGEpKS5lbGVtZW50VHlwZSA9IGFlLCBlLnR5cGUgPSBhZSwgZS5leHBpcmF0aW9uVGltZSA9IG8sIAogICAgICAgICAgICBlOwoKICAgICAgICAgIGNhc2UgY2U6CiAgICAgICAgICAgIHJldHVybiAoZSA9IFN1KDEzLCBuLCB0LCBhKSkudHlwZSA9IGNlLCBlLmVsZW1lbnRUeXBlID0gY2UsIGUuZXhwaXJhdGlvblRpbWUgPSBvLCAKICAgICAgICAgICAgZTsKCiAgICAgICAgICBjYXNlIHNlOgogICAgICAgICAgICByZXR1cm4gKGUgPSBTdSgxOSwgbiwgdCwgYSkpLmVsZW1lbnRUeXBlID0gc2UsIGUuZXhwaXJhdGlvblRpbWUgPSBvLCBlOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBudWxsICE9PSBlKSBzd2l0Y2ggKGUuJCR0eXBlb2YpIHsKICAgICAgICAgICAgICBjYXNlIG9lOgogICAgICAgICAgICAgICAgbCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWsgZTsKCiAgICAgICAgICAgICAgY2FzZSBpZToKICAgICAgICAgICAgICAgIGwgPSA5OwogICAgICAgICAgICAgICAgYnJlYWsgZTsKCiAgICAgICAgICAgICAgY2FzZSB1ZToKICAgICAgICAgICAgICAgIGwgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrIGU7CgogICAgICAgICAgICAgIGNhc2UgZmU6CiAgICAgICAgICAgICAgICBsID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhayBlOwoKICAgICAgICAgICAgICBjYXNlIGRlOgogICAgICAgICAgICAgICAgbCA9IDE2LCByID0gbnVsbDsKICAgICAgICAgICAgICAgIGJyZWFrIGU7CgogICAgICAgICAgICAgIGNhc2UgcGU6CiAgICAgICAgICAgICAgICBsID0gMjI7CiAgICAgICAgICAgICAgICBicmVhayBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IEVycm9yKGkoMTMwLCBudWxsID09IGUgPyBlIDogdHlwZW9mIGUsICIiKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAodCA9IFN1KGwsIG4sIHQsIGEpKS5lbGVtZW50VHlwZSA9IGUsIHQudHlwZSA9IHIsIHQuZXhwaXJhdGlvblRpbWUgPSBvLCB0OwogICAgfQogICAgZnVuY3Rpb24gUHUoZSwgdCwgbiwgcikgewogICAgICAgIHJldHVybiAoZSA9IFN1KDcsIGUsIHIsIHQpKS5leHBpcmF0aW9uVGltZSA9IG4sIGU7CiAgICB9CiAgICBmdW5jdGlvbiBfdShlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIChlID0gU3UoNiwgZSwgbnVsbCwgdCkpLmV4cGlyYXRpb25UaW1lID0gbiwgZTsKICAgIH0KICAgIGZ1bmN0aW9uIGp1KGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gKHQgPSBTdSg0LCBudWxsICE9PSBlLmNoaWxkcmVuID8gZS5jaGlsZHJlbiA6IFtdLCBlLmtleSwgdCkpLmV4cGlyYXRpb25UaW1lID0gbiwgCiAgICAgICAgdC5zdGF0ZU5vZGUgPSB7CiAgICAgICAgICAgIGNvbnRhaW5lckluZm86IGUuY29udGFpbmVySW5mbywKICAgICAgICAgICAgcGVuZGluZ0NoaWxkcmVuOiBudWxsLAogICAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogZS5pbXBsZW1lbnRhdGlvbgogICAgICAgIH0sIHQ7CiAgICB9CiAgICBmdW5jdGlvbiBJdShlLCB0LCBuKSB7CiAgICAgICAgdGhpcy50YWcgPSB0LCB0aGlzLmN1cnJlbnQgPSBudWxsLCB0aGlzLmNvbnRhaW5lckluZm8gPSBlLCB0aGlzLnBpbmdDYWNoZSA9IHRoaXMucGVuZGluZ0NoaWxkcmVuID0gbnVsbCwgCiAgICAgICAgdGhpcy5maW5pc2hlZEV4cGlyYXRpb25UaW1lID0gMCwgdGhpcy5maW5pc2hlZFdvcmsgPSBudWxsLCB0aGlzLnRpbWVvdXRIYW5kbGUgPSAtMSwgCiAgICAgICAgdGhpcy5wZW5kaW5nQ29udGV4dCA9IHRoaXMuY29udGV4dCA9IG51bGwsIHRoaXMuaHlkcmF0ZSA9IG4sIHRoaXMuY2FsbGJhY2tOb2RlID0gbnVsbCwgCiAgICAgICAgdGhpcy5jYWxsYmFja1ByaW9yaXR5ID0gOTAsIHRoaXMubGFzdEV4cGlyZWRUaW1lID0gdGhpcy5sYXN0UGluZ2VkVGltZSA9IHRoaXMubmV4dEtub3duUGVuZGluZ0xldmVsID0gdGhpcy5sYXN0U3VzcGVuZGVkVGltZSA9IHRoaXMuZmlyc3RTdXNwZW5kZWRUaW1lID0gdGhpcy5maXJzdFBlbmRpbmdUaW1lID0gMDsKICAgIH0KICAgIGZ1bmN0aW9uIE51KGUsIHQpIHsKICAgICAgICB2YXIgbiA9IGUuZmlyc3RTdXNwZW5kZWRUaW1lOwogICAgICAgIHJldHVybiBlID0gZS5sYXN0U3VzcGVuZGVkVGltZSwgMCAhPT0gbiAmJiBuID49IHQgJiYgZSA8PSB0OwogICAgfQogICAgZnVuY3Rpb24gQXUoZSwgdCkgewogICAgICAgIHZhciBuID0gZS5maXJzdFN1c3BlbmRlZFRpbWUsIHIgPSBlLmxhc3RTdXNwZW5kZWRUaW1lOwogICAgICAgIG4gPCB0ICYmIChlLmZpcnN0U3VzcGVuZGVkVGltZSA9IHQpLCAociA+IHQgfHwgMCA9PT0gbikgJiYgKGUubGFzdFN1c3BlbmRlZFRpbWUgPSB0KSwgCiAgICAgICAgdCA8PSBlLmxhc3RQaW5nZWRUaW1lICYmIChlLmxhc3RQaW5nZWRUaW1lID0gMCksIHQgPD0gZS5sYXN0RXhwaXJlZFRpbWUgJiYgKGUubGFzdEV4cGlyZWRUaW1lID0gMCk7CiAgICB9CiAgICBmdW5jdGlvbiBEdShlLCB0KSB7CiAgICAgICAgdCA+IGUuZmlyc3RQZW5kaW5nVGltZSAmJiAoZS5maXJzdFBlbmRpbmdUaW1lID0gdCk7CiAgICAgICAgdmFyIG4gPSBlLmZpcnN0U3VzcGVuZGVkVGltZTsKICAgICAgICAwICE9PSBuICYmICh0ID49IG4gPyBlLmZpcnN0U3VzcGVuZGVkVGltZSA9IGUubGFzdFN1c3BlbmRlZFRpbWUgPSBlLm5leHRLbm93blBlbmRpbmdMZXZlbCA9IDAgOiB0ID49IGUubGFzdFN1c3BlbmRlZFRpbWUgJiYgKGUubGFzdFN1c3BlbmRlZFRpbWUgPSB0ICsgMSksIAogICAgICAgIHQgPiBlLm5leHRLbm93blBlbmRpbmdMZXZlbCAmJiAoZS5uZXh0S25vd25QZW5kaW5nTGV2ZWwgPSB0KSk7CiAgICB9CiAgICBmdW5jdGlvbiBSdShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBlLmxhc3RFeHBpcmVkVGltZTsKICAgICAgICAoMCA9PT0gbiB8fCBuID4gdCkgJiYgKGUubGFzdEV4cGlyZWRUaW1lID0gdCk7CiAgICB9CiAgICBmdW5jdGlvbiBNdShlLCB0LCBuLCByKSB7CiAgICAgICAgdmFyIGEgPSB0LmN1cnJlbnQsIG8gPSBIbCgpLCBsID0gcG8uc3VzcGVuc2U7CiAgICAgICAgbyA9IFFsKG8sIGEsIGwpOwogICAgICAgIGU6IGlmIChuKSB7CiAgICAgICAgICAgIHQ6IHsKICAgICAgICAgICAgICAgIGlmIChKZShuID0gbi5fcmVhY3RJbnRlcm5hbEZpYmVyKSAhPT0gbiB8fCAxICE9PSBuLnRhZykgdGhyb3cgRXJyb3IoaSgxNzApKTsKICAgICAgICAgICAgICAgIHZhciB1ID0gbjsKICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHUudGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB1LnN0YXRlTm9kZS5jb250ZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayB0OwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhKHUudHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB1LnN0YXRlTm9kZS5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1lcmdlZENoaWxkQ29udGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdSA9IHUucmV0dXJuOwogICAgICAgICAgICAgICAgfSB3aGlsZSAobnVsbCAhPT0gdSk7CiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihpKDE3MSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgxID09PSBuLnRhZykgewogICAgICAgICAgICAgICAgdmFyIGMgPSBuLnR5cGU7CiAgICAgICAgICAgICAgICBpZiAoaGEoYykpIHsKICAgICAgICAgICAgICAgICAgICBuID0gdmEobiwgYywgdSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBuID0gdTsKICAgICAgICB9IGVsc2UgbiA9IHNhOwogICAgICAgIHJldHVybiBudWxsID09PSB0LmNvbnRleHQgPyB0LmNvbnRleHQgPSBuIDogdC5wZW5kaW5nQ29udGV4dCA9IG4sICh0ID0gbG8obywgbCkpLnBheWxvYWQgPSB7CiAgICAgICAgICAgIGVsZW1lbnQ6IGUKICAgICAgICB9LCBudWxsICE9PSAociA9IHZvaWQgMCA9PT0gciA/IG51bGwgOiByKSAmJiAodC5jYWxsYmFjayA9IHIpLCB1byhhLCB0KSwgR2woYSwgbyksIAogICAgICAgIG87CiAgICB9CiAgICBmdW5jdGlvbiB6dShlKSB7CiAgICAgICAgaWYgKCEoZSA9IGUuY3VycmVudCkuY2hpbGQpIHJldHVybiBudWxsOwogICAgICAgIHN3aXRjaCAoZS5jaGlsZC50YWcpIHsKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBlLmNoaWxkLnN0YXRlTm9kZTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBMdShlLCB0KSB7CiAgICAgICAgbnVsbCAhPT0gKGUgPSBlLm1lbW9pemVkU3RhdGUpICYmIG51bGwgIT09IGUuZGVoeWRyYXRlZCAmJiBlLnJldHJ5VGltZSA8IHQgJiYgKGUucmV0cnlUaW1lID0gdCk7CiAgICB9CiAgICBmdW5jdGlvbiBGdShlLCB0KSB7CiAgICAgICAgTHUoZSwgdCksIChlID0gZS5hbHRlcm5hdGUpICYmIEx1KGUsIHQpOwogICAgfQogICAgZnVuY3Rpb24gVXUoZSwgdCwgbikgewogICAgICAgIHZhciByID0gbmV3IEl1KGUsIHQsIG4gPSBudWxsICE9IG4gJiYgITAgPT09IG4uaHlkcmF0ZSksIGEgPSBTdSgzLCBudWxsLCBudWxsLCAyID09PSB0ID8gNyA6IDEgPT09IHQgPyAzIDogMCk7CiAgICAgICAgci5jdXJyZW50ID0gYSwgYS5zdGF0ZU5vZGUgPSByLCBvbyhhKSwgZVtDbl0gPSByLmN1cnJlbnQsIG4gJiYgMCAhPT0gdCAmJiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciBuID0gWmUodCk7CiAgICAgICAgICAgIEN0LmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGd0KGUsIHQsIG4pOwogICAgICAgICAgICB9KSksIFR0LmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGd0KGUsIHQsIG4pOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfSgwLCA5ID09PSBlLm5vZGVUeXBlID8gZSA6IGUub3duZXJEb2N1bWVudCksIHRoaXMuX2ludGVybmFsUm9vdCA9IHI7CiAgICB9CiAgICBmdW5jdGlvbiBXdShlKSB7CiAgICAgICAgcmV0dXJuICEoIWUgfHwgMSAhPT0gZS5ub2RlVHlwZSAmJiA5ICE9PSBlLm5vZGVUeXBlICYmIDExICE9PSBlLm5vZGVUeXBlICYmICg4ICE9PSBlLm5vZGVUeXBlIHx8ICIgcmVhY3QtbW91bnQtcG9pbnQtdW5zdGFibGUgIiAhPT0gZS5ub2RlVmFsdWUpKTsKICAgIH0KICAgIGZ1bmN0aW9uIFZ1KGUsIHQsIG4sIHIsIGEpIHsKICAgICAgICB2YXIgbyA9IG4uX3JlYWN0Um9vdENvbnRhaW5lcjsKICAgICAgICBpZiAobykgewogICAgICAgICAgICB2YXIgaSA9IG8uX2ludGVybmFsUm9vdDsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGEpIHsKICAgICAgICAgICAgICAgIHZhciBsID0gYTsKICAgICAgICAgICAgICAgIGEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHp1KGkpOwogICAgICAgICAgICAgICAgICAgIGwuY2FsbChlKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgTXUodCwgaSwgZSwgYSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKG8gPSBuLl9yZWFjdFJvb3RDb250YWluZXIgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICBpZiAodCB8fCAodCA9ICEoISh0ID0gZSA/IDkgPT09IGUubm9kZVR5cGUgPyBlLmRvY3VtZW50RWxlbWVudCA6IGUuZmlyc3RDaGlsZCA6IG51bGwpIHx8IDEgIT09IHQubm9kZVR5cGUgfHwgIXQuaGFzQXR0cmlidXRlKCJkYXRhLXJlYWN0cm9vdCIpKSksIAogICAgICAgICAgICAgICAgIXQpIGZvciAodmFyIG47IG4gPSBlLmxhc3RDaGlsZDsgKSBlLnJlbW92ZUNoaWxkKG4pOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVdShlLCAwLCB0ID8gewogICAgICAgICAgICAgICAgICAgIGh5ZHJhdGU6ICEwCiAgICAgICAgICAgICAgICB9IDogdm9pZCAwKTsKICAgICAgICAgICAgfShuLCByKSwgaSA9IG8uX2ludGVybmFsUm9vdCwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYSkgewogICAgICAgICAgICAgICAgdmFyIHUgPSBhOwogICAgICAgICAgICAgICAgYSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0genUoaSk7CiAgICAgICAgICAgICAgICAgICAgdS5jYWxsKGUpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0dSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBNdSh0LCBpLCBlLCBhKTsKICAgICAgICAgICAgfSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4genUoaSk7CiAgICB9CiAgICBmdW5jdGlvbiAkdShlLCB0LCBuKSB7CiAgICAgICAgdmFyIHIgPSAzIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1szXSA/IGFyZ3VtZW50c1szXSA6IG51bGw7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgJCR0eXBlb2Y6IHRlLAogICAgICAgICAgICBrZXk6IG51bGwgPT0gciA/IG51bGwgOiAiIiArIHIsCiAgICAgICAgICAgIGNoaWxkcmVuOiBlLAogICAgICAgICAgICBjb250YWluZXJJbmZvOiB0LAogICAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogbgogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBxdShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSAyIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IG51bGw7CiAgICAgICAgaWYgKCFXdSh0KSkgdGhyb3cgRXJyb3IoaSgyMDApKTsKICAgICAgICByZXR1cm4gJHUoZSwgdCwgbnVsbCwgbik7CiAgICB9CiAgICBVdS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oZSkgewogICAgICAgIE11KGUsIHRoaXMuX2ludGVybmFsUm9vdCwgbnVsbCwgbnVsbCk7CiAgICB9LCBVdS5wcm90b3R5cGUudW5tb3VudCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBlID0gdGhpcy5faW50ZXJuYWxSb290LCB0ID0gZS5jb250YWluZXJJbmZvOwogICAgICAgIE11KG51bGwsIGUsIG51bGwsIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdFtDbl0gPSBudWxsOwogICAgICAgIH0pKTsKICAgIH0sIGh0ID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmICgxMyA9PT0gZS50YWcpIHsKICAgICAgICAgICAgdmFyIHQgPSBRYShIbCgpLCAxNTAsIDEwMCk7CiAgICAgICAgICAgIEdsKGUsIHQpLCBGdShlLCB0KTsKICAgICAgICB9CiAgICB9LCBtdCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAxMyA9PT0gZS50YWcgJiYgKEdsKGUsIDMpLCBGdShlLCAzKSk7CiAgICB9LCBidCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoMTMgPT09IGUudGFnKSB7CiAgICAgICAgICAgIHZhciB0ID0gSGwoKTsKICAgICAgICAgICAgR2woZSwgdCA9IFFsKHQsIGUsIG51bGwpKSwgRnUoZSwgdCk7CiAgICAgICAgfQogICAgfSwgUCA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgICAgaWYgKE9lKGUsIG4pLCB0ID0gbi5uYW1lLCAicmFkaW8iID09PSBuLnR5cGUgJiYgbnVsbCAhPSB0KSB7CiAgICAgICAgICAgICAgICBmb3IgKG4gPSBlOyBuLnBhcmVudE5vZGU7ICkgbiA9IG4ucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgIGZvciAobiA9IG4ucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT0iICsgSlNPTi5zdHJpbmdpZnkoIiIgKyB0KSArICddW3R5cGU9InJhZGlvIl0nKSwgCiAgICAgICAgICAgICAgICB0ID0gMDsgdCA8IG4ubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG5bdF07CiAgICAgICAgICAgICAgICAgICAgaWYgKHIgIT09IGUgJiYgci5mb3JtID09PSBlLmZvcm0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBqbihyKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhKSB0aHJvdyBFcnJvcihpKDkwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGtlKHIpLCBPZShyLCBhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAidGV4dGFyZWEiOgogICAgICAgICAgICBOZShlLCBuKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgbnVsbCAhPSAodCA9IG4udmFsdWUpICYmIF9lKGUsICEhbi5tdWx0aXBsZSwgdCwgITEpOwogICAgICAgIH0KICAgIH0sIEQgPSBldSwgUiA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIsIGEpIHsKICAgICAgICB2YXIgbyA9IEVsOwogICAgICAgIEVsIHw9IDQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIFZhKDk4LCBlLmJpbmQobnVsbCwgdCwgbiwgciwgYSkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIDAgPT09IChFbCA9IG8pICYmIEJhKCk7CiAgICAgICAgfQogICAgfSwgTSA9IGZ1bmN0aW9uKCkgewogICAgICAgIDAgPT0gKDQ5ICYgRWwpICYmIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKG51bGwgIT09IFZsKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IFZsOwogICAgICAgICAgICAgICAgVmwgPSBudWxsLCBlLmZvckVhY2goKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICBSdSh0LCBlKSwgWGwodCk7CiAgICAgICAgICAgICAgICB9KSksIEJhKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KCksIGh1KCkpOwogICAgfSwgeiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IEVsOwogICAgICAgIEVsIHw9IDI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGUodCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgMCA9PT0gKEVsID0gbikgJiYgQmEoKTsKICAgICAgICB9CiAgICB9OwogICAgdmFyIEJ1LCBIdSwgUXUgPSB7CiAgICAgICAgRXZlbnRzOiBbIFBuLCBfbiwgam4sIEMsIEUsIHpuLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGF0KGUsIE1uKTsKICAgICAgICB9LCBOLCBBLCBYdCwgbHQsIGh1LCB7CiAgICAgICAgICAgIGN1cnJlbnQ6ICExCiAgICAgICAgfSBdCiAgICB9OwogICAgSHUgPSAoQnUgPSB7CiAgICAgICAgZmluZEZpYmVyQnlIb3N0SW5zdGFuY2U6IFRuLAogICAgICAgIGJ1bmRsZVR5cGU6IDAsCiAgICAgICAgdmVyc2lvbjogIjE2LjEzLjEiLAogICAgICAgIHJlbmRlcmVyUGFja2FnZU5hbWU6ICJyZWFjdC1kb20iCiAgICB9KS5maW5kRmliZXJCeUhvc3RJbnN0YW5jZSwgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fKSByZXR1cm4gITE7CiAgICAgICAgdmFyIHQgPSBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX187CiAgICAgICAgaWYgKHQuaXNEaXNhYmxlZCB8fCAhdC5zdXBwb3J0c0ZpYmVyKSByZXR1cm4gITA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIG4gPSB0LmluamVjdChlKTsKICAgICAgICAgICAga3UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHQub25Db21taXRGaWJlclJvb3QobiwgZSwgdm9pZCAwLCA2NCA9PSAoNjQgJiBlLmN1cnJlbnQuZWZmZWN0VGFnKSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICB9LCB4dSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdC5vbkNvbW1pdEZpYmVyVW5tb3VudChuLCBlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIH07CiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0oYSh7fSwgQnUsIHsKICAgICAgICBvdmVycmlkZUhvb2tTdGF0ZTogbnVsbCwKICAgICAgICBvdmVycmlkZVByb3BzOiBudWxsLAogICAgICAgIHNldFN1c3BlbnNlSGFuZGxlcjogbnVsbCwKICAgICAgICBzY2hlZHVsZVVwZGF0ZTogbnVsbCwKICAgICAgICBjdXJyZW50RGlzcGF0Y2hlclJlZjogWS5SZWFjdEN1cnJlbnREaXNwYXRjaGVyLAogICAgICAgIGZpbmRIb3N0SW5zdGFuY2VCeUZpYmVyOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09PSAoZSA9IG50KGUpKSA/IG51bGwgOiBlLnN0YXRlTm9kZTsKICAgICAgICB9LAogICAgICAgIGZpbmRGaWJlckJ5SG9zdEluc3RhbmNlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBIdSA/IEh1KGUpIDogbnVsbDsKICAgICAgICB9LAogICAgICAgIGZpbmRIb3N0SW5zdGFuY2VzRm9yUmVmcmVzaDogbnVsbCwKICAgICAgICBzY2hlZHVsZVJlZnJlc2g6IG51bGwsCiAgICAgICAgc2NoZWR1bGVSb290OiBudWxsLAogICAgICAgIHNldFJlZnJlc2hIYW5kbGVyOiBudWxsLAogICAgICAgIGdldEN1cnJlbnRGaWJlcjogbnVsbAogICAgfSkpLCB0Ll9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID0gUXUsIHQuY3JlYXRlUG9ydGFsID0gcXUsIAogICAgdC5maW5kRE9NTm9kZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoMSA9PT0gZS5ub2RlVHlwZSkgcmV0dXJuIGU7CiAgICAgICAgdmFyIHQgPSBlLl9yZWFjdEludGVybmFsRmliZXI7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgewogICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgZS5yZW5kZXIpIHRocm93IEVycm9yKGkoMTg4KSk7CiAgICAgICAgICAgIHRocm93IEVycm9yKGkoMjY4LCBPYmplY3Qua2V5cyhlKSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZSA9IG51bGwgPT09IChlID0gbnQodCkpID8gbnVsbCA6IGUuc3RhdGVOb2RlOwogICAgfSwgdC5mbHVzaFN5bmMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgaWYgKDAgIT0gKDQ4ICYgRWwpKSB0aHJvdyBFcnJvcihpKDE4NykpOwogICAgICAgIHZhciBuID0gRWw7CiAgICAgICAgRWwgfD0gMTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gVmEoOTksIGUuYmluZChudWxsLCB0KSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgRWwgPSBuLCBCYSgpOwogICAgICAgIH0KICAgIH0sIHQuaHlkcmF0ZSA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICBpZiAoIVd1KHQpKSB0aHJvdyBFcnJvcihpKDIwMCkpOwogICAgICAgIHJldHVybiBWdShudWxsLCBlLCB0LCAhMCwgbik7CiAgICB9LCB0LnJlbmRlciA9IGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICAgICBpZiAoIVd1KHQpKSB0aHJvdyBFcnJvcihpKDIwMCkpOwogICAgICAgIHJldHVybiBWdShudWxsLCBlLCB0LCAhMSwgbik7CiAgICB9LCB0LnVubW91bnRDb21wb25lbnRBdE5vZGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFXdShlKSkgdGhyb3cgRXJyb3IoaSg0MCkpOwogICAgICAgIHJldHVybiAhIWUuX3JlYWN0Um9vdENvbnRhaW5lciAmJiAodHUoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBWdShudWxsLCBudWxsLCBlLCAhMSwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgZS5fcmVhY3RSb290Q29udGFpbmVyID0gbnVsbCwgZVtDbl0gPSBudWxsOwogICAgICAgICAgICB9KSk7CiAgICAgICAgfSkpLCAhMCk7CiAgICB9LCB0LnVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzID0gZXUsIHQudW5zdGFibGVfY3JlYXRlUG9ydGFsID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiBxdShlLCB0LCAyIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IG51bGwpOwogICAgfSwgdC51bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lciA9IGZ1bmN0aW9uKGUsIHQsIG4sIHIpIHsKICAgICAgICBpZiAoIVd1KG4pKSB0aHJvdyBFcnJvcihpKDIwMCkpOwogICAgICAgIGlmIChudWxsID09IGUgfHwgdm9pZCAwID09PSBlLl9yZWFjdEludGVybmFsRmliZXIpIHRocm93IEVycm9yKGkoMzgpKTsKICAgICAgICByZXR1cm4gVnUoZSwgdCwgbiwgITEsIHIpOwogICAgfSwgdC52ZXJzaW9uID0gIjE2LjEzLjEiOwp9LCBmdW5jdGlvbihlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBlLmV4cG9ydHMgPSBuKDQ2KTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIHIsIGEsIG8sIGksIGw7CiAgICBpZiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIHdpbmRvdyB8fCAiZnVuY3Rpb24iICE9IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCkgewogICAgICAgIHZhciB1ID0gbnVsbCwgYyA9IG51bGwsIHMgPSBmdW5jdGlvbiBlKCkgewogICAgICAgICAgICBpZiAobnVsbCAhPT0gdSkgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBuID0gdC51bnN0YWJsZV9ub3coKTsKICAgICAgICAgICAgICAgIHUoITAsIG4pLCB1ID0gbnVsbDsKICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgdGhyb3cgc2V0VGltZW91dChlLCAwKSwgdDsKICAgICAgICAgICAgfQogICAgICAgIH0sIGYgPSBEYXRlLm5vdygpOwogICAgICAgIHQudW5zdGFibGVfbm93ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gZjsKICAgICAgICB9LCByID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICBudWxsICE9PSB1ID8gc2V0VGltZW91dChyLCAwLCBlKSA6ICh1ID0gZSwgc2V0VGltZW91dChzLCAwKSk7CiAgICAgICAgfSwgYSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgYyA9IHNldFRpbWVvdXQoZSwgdCk7CiAgICAgICAgfSwgbyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQoYyk7CiAgICAgICAgfSwgaSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgfSwgbCA9IHQudW5zdGFibGVfZm9yY2VGcmFtZVJhdGUgPSBmdW5jdGlvbigpIHt9OwogICAgfSBlbHNlIHsKICAgICAgICB2YXIgZCA9IHdpbmRvdy5wZXJmb3JtYW5jZSwgcCA9IHdpbmRvdy5EYXRlLCBnID0gd2luZG93LnNldFRpbWVvdXQsIGggPSB3aW5kb3cuY2xlYXJUaW1lb3V0OwogICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgY29uc29sZSkgewogICAgICAgICAgICB2YXIgbSA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZTsKICAgICAgICAgICAgImZ1bmN0aW9uIiAhPSB0eXBlb2Ygd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSAmJiBjb25zb2xlLmVycm9yKCJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHJlcXVlc3RBbmltYXRpb25GcmFtZS4gTWFrZSBzdXJlIHRoYXQgeW91IGxvYWQgYSBwb2x5ZmlsbCBpbiBvbGRlciBicm93c2Vycy4gaHR0cHM6Ly9mYi5tZS9yZWFjdC1wb2x5ZmlsbHMiKSwgCiAgICAgICAgICAgICJmdW5jdGlvbiIgIT0gdHlwZW9mIG0gJiYgY29uc29sZS5lcnJvcigiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBjYW5jZWxBbmltYXRpb25GcmFtZS4gTWFrZSBzdXJlIHRoYXQgeW91IGxvYWQgYSBwb2x5ZmlsbCBpbiBvbGRlciBicm93c2Vycy4gaHR0cHM6Ly9mYi5tZS9yZWFjdC1wb2x5ZmlsbHMiKTsKICAgICAgICB9CiAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiBkICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGQubm93KSB0LnVuc3RhYmxlX25vdyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gZC5ub3coKTsKICAgICAgICB9OyBlbHNlIHsKICAgICAgICAgICAgdmFyIGIgPSBwLm5vdygpOwogICAgICAgICAgICB0LnVuc3RhYmxlX25vdyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHAubm93KCkgLSBiOwogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB2YXIgdiA9ICExLCB5ID0gbnVsbCwgdyA9IC0xLCBrID0gNSwgeCA9IDA7CiAgICAgICAgaSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdC51bnN0YWJsZV9ub3coKSA+PSB4OwogICAgICAgIH0sIGwgPSBmdW5jdGlvbigpIHt9LCB0LnVuc3RhYmxlX2ZvcmNlRnJhbWVSYXRlID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAwID4gZSB8fCAxMjUgPCBlID8gY29uc29sZS5lcnJvcigiZm9yY2VGcmFtZVJhdGUgdGFrZXMgYSBwb3NpdGl2ZSBpbnQgYmV0d2VlbiAwIGFuZCAxMjUsIGZvcmNpbmcgZnJhbWVyYXRlcyBoaWdoZXIgdGhhbiAxMjUgZnBzIGlzIG5vdCB1bnN1cHBvcnRlZCIpIDogayA9IDAgPCBlID8gTWF0aC5mbG9vcigxZTMgLyBlKSA6IDU7CiAgICAgICAgfTsKICAgICAgICB2YXIgRSA9IG5ldyBNZXNzYWdlQ2hhbm5lbCwgUyA9IEUucG9ydDI7CiAgICAgICAgRS5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKG51bGwgIT09IHkpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gdC51bnN0YWJsZV9ub3coKTsKICAgICAgICAgICAgICAgIHggPSBlICsgazsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgeSghMCwgZSkgPyBTLnBvc3RNZXNzYWdlKG51bGwpIDogKHYgPSAhMSwgeSA9IG51bGwpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IFMucG9zdE1lc3NhZ2UobnVsbCksIGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB2ID0gITE7CiAgICAgICAgfSwgciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgeSA9IGUsIHYgfHwgKHYgPSAhMCwgUy5wb3N0TWVzc2FnZShudWxsKSk7CiAgICAgICAgfSwgYSA9IGZ1bmN0aW9uKGUsIG4pIHsKICAgICAgICAgICAgdyA9IGcoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgZSh0LnVuc3RhYmxlX25vdygpKTsKICAgICAgICAgICAgfSksIG4pOwogICAgICAgIH0sIG8gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaCh3KSwgdyA9IC0xOwogICAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBPKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IGUubGVuZ3RoOwogICAgICAgIGUucHVzaCh0KTsKICAgICAgICBlOiBmb3IgKDs7KSB7CiAgICAgICAgICAgIHZhciByID0gbiAtIDEgPj4+IDEsIGEgPSBlW3JdOwogICAgICAgICAgICBpZiAoISh2b2lkIDAgIT09IGEgJiYgMCA8IFAoYSwgdCkpKSBicmVhayBlOwogICAgICAgICAgICBlW3JdID0gdCwgZVtuXSA9IGEsIG4gPSByOwogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIEMoZSkgewogICAgICAgIHJldHVybiB2b2lkIDAgPT09IChlID0gZVswXSkgPyBudWxsIDogZTsKICAgIH0KICAgIGZ1bmN0aW9uIFQoZSkgewogICAgICAgIHZhciB0ID0gZVswXTsKICAgICAgICBpZiAodm9pZCAwICE9PSB0KSB7CiAgICAgICAgICAgIHZhciBuID0gZS5wb3AoKTsKICAgICAgICAgICAgaWYgKG4gIT09IHQpIHsKICAgICAgICAgICAgICAgIGVbMF0gPSBuOwogICAgICAgICAgICAgICAgZTogZm9yICh2YXIgciA9IDAsIGEgPSBlLmxlbmd0aDsgciA8IGE7ICkgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0gMiAqIChyICsgMSkgLSAxLCBpID0gZVtvXSwgbCA9IG8gKyAxLCB1ID0gZVtsXTsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpICYmIDAgPiBQKGksIG4pKSB2b2lkIDAgIT09IHUgJiYgMCA+IFAodSwgaSkgPyAoZVtyXSA9IHUsIGVbbF0gPSBuLCAKICAgICAgICAgICAgICAgICAgICByID0gbCkgOiAoZVtyXSA9IGksIGVbb10gPSBuLCByID0gbyk7IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh2b2lkIDAgIT09IHUgJiYgMCA+IFAodSwgbikpKSBicmVhayBlOwogICAgICAgICAgICAgICAgICAgICAgICBlW3JdID0gdSwgZVtsXSA9IG4sIHIgPSBsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiBQKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IGUuc29ydEluZGV4IC0gdC5zb3J0SW5kZXg7CiAgICAgICAgcmV0dXJuIDAgIT09IG4gPyBuIDogZS5pZCAtIHQuaWQ7CiAgICB9CiAgICB2YXIgXyA9IFtdLCBqID0gW10sIEkgPSAxLCBOID0gbnVsbCwgQSA9IDMsIEQgPSAhMSwgUiA9ICExLCBNID0gITE7CiAgICBmdW5jdGlvbiB6KGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gQyhqKTsgbnVsbCAhPT0gdDsgKSB7CiAgICAgICAgICAgIGlmIChudWxsID09PSB0LmNhbGxiYWNrKSBUKGopOyBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICghKHQuc3RhcnRUaW1lIDw9IGUpKSBicmVhazsKICAgICAgICAgICAgICAgIFQoaiksIHQuc29ydEluZGV4ID0gdC5leHBpcmF0aW9uVGltZSwgTyhfLCB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0ID0gQyhqKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBMKGUpIHsKICAgICAgICBpZiAoTSA9ICExLCB6KGUpLCAhUikgaWYgKG51bGwgIT09IEMoXykpIFIgPSAhMCwgcihGKTsgZWxzZSB7CiAgICAgICAgICAgIHZhciB0ID0gQyhqKTsKICAgICAgICAgICAgbnVsbCAhPT0gdCAmJiBhKEwsIHQuc3RhcnRUaW1lIC0gZSk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gRihlLCBuKSB7CiAgICAgICAgUiA9ICExLCBNICYmIChNID0gITEsIG8oKSksIEQgPSAhMDsKICAgICAgICB2YXIgciA9IEE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICh6KG4pLCBOID0gQyhfKTsgbnVsbCAhPT0gTiAmJiAoIShOLmV4cGlyYXRpb25UaW1lID4gbikgfHwgZSAmJiAhaSgpKTsgKSB7CiAgICAgICAgICAgICAgICB2YXIgbCA9IE4uY2FsbGJhY2s7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbCkgewogICAgICAgICAgICAgICAgICAgIE4uY2FsbGJhY2sgPSBudWxsLCBBID0gTi5wcmlvcml0eUxldmVsOwogICAgICAgICAgICAgICAgICAgIHZhciB1ID0gbChOLmV4cGlyYXRpb25UaW1lIDw9IG4pOwogICAgICAgICAgICAgICAgICAgIG4gPSB0LnVuc3RhYmxlX25vdygpLCAiZnVuY3Rpb24iID09IHR5cGVvZiB1ID8gTi5jYWxsYmFjayA9IHUgOiBOID09PSBDKF8pICYmIFQoXyksIAogICAgICAgICAgICAgICAgICAgIHoobik7CiAgICAgICAgICAgICAgICB9IGVsc2UgVChfKTsKICAgICAgICAgICAgICAgIE4gPSBDKF8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudWxsICE9PSBOKSB2YXIgYyA9ICEwOyBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBzID0gQyhqKTsKICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgYShMLCBzLnN0YXJ0VGltZSAtIG4pLCBjID0gITE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgTiA9IG51bGwsIEEgPSByLCBEID0gITE7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gVShlKSB7CiAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiAtMTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiAyNTA7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXR1cm4gMTA3Mzc0MTgyMzsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiAxZTQ7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIDVlMzsKICAgICAgICB9CiAgICB9CiAgICB2YXIgVyA9IGw7CiAgICB0LnVuc3RhYmxlX0lkbGVQcmlvcml0eSA9IDUsIHQudW5zdGFibGVfSW1tZWRpYXRlUHJpb3JpdHkgPSAxLCB0LnVuc3RhYmxlX0xvd1ByaW9yaXR5ID0gNCwgCiAgICB0LnVuc3RhYmxlX05vcm1hbFByaW9yaXR5ID0gMywgdC51bnN0YWJsZV9Qcm9maWxpbmcgPSBudWxsLCB0LnVuc3RhYmxlX1VzZXJCbG9ja2luZ1ByaW9yaXR5ID0gMiwgCiAgICB0LnVuc3RhYmxlX2NhbmNlbENhbGxiYWNrID0gZnVuY3Rpb24oZSkgewogICAgICAgIGUuY2FsbGJhY2sgPSBudWxsOwogICAgfSwgdC51bnN0YWJsZV9jb250aW51ZUV4ZWN1dGlvbiA9IGZ1bmN0aW9uKCkgewogICAgICAgIFIgfHwgRCB8fCAoUiA9ICEwLCByKEYpKTsKICAgIH0sIHQudW5zdGFibGVfZ2V0Q3VycmVudFByaW9yaXR5TGV2ZWwgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gQTsKICAgIH0sIHQudW5zdGFibGVfZ2V0Rmlyc3RDYWxsYmFja05vZGUgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gQyhfKTsKICAgIH0sIHQudW5zdGFibGVfbmV4dCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBzd2l0Y2ggKEEpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgdmFyIHQgPSAzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0ID0gQTsKICAgICAgICB9CiAgICAgICAgdmFyIG4gPSBBOwogICAgICAgIEEgPSB0OwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBlKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgQSA9IG47CiAgICAgICAgfQogICAgfSwgdC51bnN0YWJsZV9wYXVzZUV4ZWN1dGlvbiA9IGZ1bmN0aW9uKCkge30sIHQudW5zdGFibGVfcmVxdWVzdFBhaW50ID0gVywgdC51bnN0YWJsZV9ydW5XaXRoUHJpb3JpdHkgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGUgPSAzOwogICAgICAgIH0KICAgICAgICB2YXIgbiA9IEE7CiAgICAgICAgQSA9IGU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHQoKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBBID0gbjsKICAgICAgICB9CiAgICB9LCB0LnVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2sgPSBmdW5jdGlvbihlLCBuLCBpKSB7CiAgICAgICAgdmFyIGwgPSB0LnVuc3RhYmxlX25vdygpOwogICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgaSAmJiBudWxsICE9PSBpKSB7CiAgICAgICAgICAgIHZhciB1ID0gaS5kZWxheTsKICAgICAgICAgICAgdSA9ICJudW1iZXIiID09IHR5cGVvZiB1ICYmIDAgPCB1ID8gbCArIHUgOiBsLCBpID0gIm51bWJlciIgPT0gdHlwZW9mIGkudGltZW91dCA/IGkudGltZW91dCA6IFUoZSk7CiAgICAgICAgfSBlbHNlIGkgPSBVKGUpLCB1ID0gbDsKICAgICAgICByZXR1cm4gZSA9IHsKICAgICAgICAgICAgaWQ6IEkrKywKICAgICAgICAgICAgY2FsbGJhY2s6IG4sCiAgICAgICAgICAgIHByaW9yaXR5TGV2ZWw6IGUsCiAgICAgICAgICAgIHN0YXJ0VGltZTogdSwKICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IGkgPSB1ICsgaSwKICAgICAgICAgICAgc29ydEluZGV4OiAtMQogICAgICAgIH0sIHUgPiBsID8gKGUuc29ydEluZGV4ID0gdSwgTyhqLCBlKSwgbnVsbCA9PT0gQyhfKSAmJiBlID09PSBDKGopICYmIChNID8gbygpIDogTSA9ICEwLCAKICAgICAgICBhKEwsIHUgLSBsKSkpIDogKGUuc29ydEluZGV4ID0gaSwgTyhfLCBlKSwgUiB8fCBEIHx8IChSID0gITAsIHIoRikpKSwgZTsKICAgIH0sIHQudW5zdGFibGVfc2hvdWxkWWllbGQgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgZSA9IHQudW5zdGFibGVfbm93KCk7CiAgICAgICAgeihlKTsKICAgICAgICB2YXIgbiA9IEMoXyk7CiAgICAgICAgcmV0dXJuIG4gIT09IE4gJiYgbnVsbCAhPT0gTiAmJiBudWxsICE9PSBuICYmIG51bGwgIT09IG4uY2FsbGJhY2sgJiYgbi5zdGFydFRpbWUgPD0gZSAmJiBuLmV4cGlyYXRpb25UaW1lIDwgTi5leHBpcmF0aW9uVGltZSB8fCBpKCk7CiAgICB9LCB0LnVuc3RhYmxlX3dyYXBDYWxsYmFjayA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IEE7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgbiA9IEE7CiAgICAgICAgICAgIEEgPSB0OwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIEEgPSBuOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH07Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgIGUuZXhwb3J0cyA9IG4oNDgpKCk7Cn0sIGZ1bmN0aW9uKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKICAgIHZhciByID0gbig0OSk7CiAgICBmdW5jdGlvbiBhKCkge30KICAgIGZ1bmN0aW9uIG8oKSB7fQogICAgby5yZXNldFdhcm5pbmdDYWNoZSA9IGEsIGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgewogICAgICAgIGZ1bmN0aW9uIGUoZSwgdCwgbiwgYSwgbywgaSkgewogICAgICAgICAgICBpZiAoaSAhPT0gcikgewogICAgICAgICAgICAgICAgdmFyIGwgPSBuZXcgRXJyb3IoIkNhbGxpbmcgUHJvcFR5cGVzIHZhbGlkYXRvcnMgZGlyZWN0bHkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UuIFVzZSBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoKSB0byBjYWxsIHRoZW0uIFJlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMiKTsKICAgICAgICAgICAgICAgIHRocm93IGwubmFtZSA9ICJJbnZhcmlhbnQgVmlvbGF0aW9uIiwgbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB0KCkgewogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CiAgICAgICAgZS5pc1JlcXVpcmVkID0gZTsKICAgICAgICB2YXIgbiA9IHsKICAgICAgICAgICAgYXJyYXk6IGUsCiAgICAgICAgICAgIGJvb2w6IGUsCiAgICAgICAgICAgIGZ1bmM6IGUsCiAgICAgICAgICAgIG51bWJlcjogZSwKICAgICAgICAgICAgb2JqZWN0OiBlLAogICAgICAgICAgICBzdHJpbmc6IGUsCiAgICAgICAgICAgIHN5bWJvbDogZSwKICAgICAgICAgICAgYW55OiBlLAogICAgICAgICAgICBhcnJheU9mOiB0LAogICAgICAgICAgICBlbGVtZW50OiBlLAogICAgICAgICAgICBlbGVtZW50VHlwZTogZSwKICAgICAgICAgICAgaW5zdGFuY2VPZjogdCwKICAgICAgICAgICAgbm9kZTogZSwKICAgICAgICAgICAgb2JqZWN0T2Y6IHQsCiAgICAgICAgICAgIG9uZU9mOiB0LAogICAgICAgICAgICBvbmVPZlR5cGU6IHQsCiAgICAgICAgICAgIHNoYXBlOiB0LAogICAgICAgICAgICBleGFjdDogdCwKICAgICAgICAgICAgY2hlY2tQcm9wVHlwZXM6IG8sCiAgICAgICAgICAgIHJlc2V0V2FybmluZ0NhY2hlOiBhCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gbi5Qcm9wVHlwZXMgPSBuLCBuOwogICAgfTsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgZS5leHBvcnRzID0gIlNFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEIjsKfSwgZnVuY3Rpb24oZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwogICAgdmFyIHIgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmZvciwgYSA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5lbGVtZW50IikgOiA2MDEwMywgbyA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5wb3J0YWwiKSA6IDYwMTA2LCBpID0gciA/IFN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50IikgOiA2MDEwNywgbCA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5zdHJpY3RfbW9kZSIpIDogNjAxMDgsIHUgPSByID8gU3ltYm9sLmZvcigicmVhY3QucHJvZmlsZXIiKSA6IDYwMTE0LCBjID0gciA/IFN5bWJvbC5mb3IoInJlYWN0LnByb3ZpZGVyIikgOiA2MDEwOSwgcyA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5jb250ZXh0IikgOiA2MDExMCwgZiA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5hc3luY19tb2RlIikgOiA2MDExMSwgZCA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5jb25jdXJyZW50X21vZGUiKSA6IDYwMTExLCBwID0gciA/IFN5bWJvbC5mb3IoInJlYWN0LmZvcndhcmRfcmVmIikgOiA2MDExMiwgZyA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5zdXNwZW5zZSIpIDogNjAxMTMsIGggPSByID8gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2VfbGlzdCIpIDogNjAxMjAsIG0gPSByID8gU3ltYm9sLmZvcigicmVhY3QubWVtbyIpIDogNjAxMTUsIGIgPSByID8gU3ltYm9sLmZvcigicmVhY3QubGF6eSIpIDogNjAxMTYsIHYgPSByID8gU3ltYm9sLmZvcigicmVhY3QuYmxvY2siKSA6IDYwMTIxLCB5ID0gciA/IFN5bWJvbC5mb3IoInJlYWN0LmZ1bmRhbWVudGFsIikgOiA2MDExNywgdyA9IHIgPyBTeW1ib2wuZm9yKCJyZWFjdC5yZXNwb25kZXIiKSA6IDYwMTE4LCBrID0gciA/IFN5bWJvbC5mb3IoInJlYWN0LnNjb3BlIikgOiA2MDExOTsKICAgIGZ1bmN0aW9uIHgoZSkgewogICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBudWxsICE9PSBlKSB7CiAgICAgICAgICAgIHZhciB0ID0gZS4kJHR5cGVvZjsKICAgICAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICAgICAgY2FzZSBhOgogICAgICAgICAgICAgICAgc3dpdGNoIChlID0gZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgZjoKICAgICAgICAgICAgICAgICAgY2FzZSBkOgogICAgICAgICAgICAgICAgICBjYXNlIGk6CiAgICAgICAgICAgICAgICAgIGNhc2UgdToKICAgICAgICAgICAgICAgICAgY2FzZSBsOgogICAgICAgICAgICAgICAgICBjYXNlIGc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7CgogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZSA9IGUgJiYgZS4kJHR5cGVvZikgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSBzOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBwOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBiOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBtOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSBjOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKCiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgbzoKICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gRShlKSB7CiAgICAgICAgcmV0dXJuIHgoZSkgPT09IGQ7CiAgICB9CiAgICB0LkFzeW5jTW9kZSA9IGYsIHQuQ29uY3VycmVudE1vZGUgPSBkLCB0LkNvbnRleHRDb25zdW1lciA9IHMsIHQuQ29udGV4dFByb3ZpZGVyID0gYywgCiAgICB0LkVsZW1lbnQgPSBhLCB0LkZvcndhcmRSZWYgPSBwLCB0LkZyYWdtZW50ID0gaSwgdC5MYXp5ID0gYiwgdC5NZW1vID0gbSwgdC5Qb3J0YWwgPSBvLCAKICAgIHQuUHJvZmlsZXIgPSB1LCB0LlN0cmljdE1vZGUgPSBsLCB0LlN1c3BlbnNlID0gZywgdC5pc0FzeW5jTW9kZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gRShlKSB8fCB4KGUpID09PSBmOwogICAgfSwgdC5pc0NvbmN1cnJlbnRNb2RlID0gRSwgdC5pc0NvbnRleHRDb25zdW1lciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4geChlKSA9PT0gczsKICAgIH0sIHQuaXNDb250ZXh0UHJvdmlkZXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHgoZSkgPT09IGM7CiAgICB9LCB0LmlzRWxlbWVudCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSAmJiBlLiQkdHlwZW9mID09PSBhOwogICAgfSwgdC5pc0ZvcndhcmRSZWYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHgoZSkgPT09IHA7CiAgICB9LCB0LmlzRnJhZ21lbnQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHgoZSkgPT09IGk7CiAgICB9LCB0LmlzTGF6eSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4geChlKSA9PT0gYjsKICAgIH0sIHQuaXNNZW1vID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB4KGUpID09PSBtOwogICAgfSwgdC5pc1BvcnRhbCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4geChlKSA9PT0gbzsKICAgIH0sIHQuaXNQcm9maWxlciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4geChlKSA9PT0gdTsKICAgIH0sIHQuaXNTdHJpY3RNb2RlID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB4KGUpID09PSBsOwogICAgfSwgdC5pc1N1c3BlbnNlID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB4KGUpID09PSBnOwogICAgfSwgdC5pc1ZhbGlkRWxlbWVudFR5cGUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlIHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgfHwgZSA9PT0gaSB8fCBlID09PSBkIHx8IGUgPT09IHUgfHwgZSA9PT0gbCB8fCBlID09PSBnIHx8IGUgPT09IGggfHwgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSAmJiAoZS4kJHR5cGVvZiA9PT0gYiB8fCBlLiQkdHlwZW9mID09PSBtIHx8IGUuJCR0eXBlb2YgPT09IGMgfHwgZS4kJHR5cGVvZiA9PT0gcyB8fCBlLiQkdHlwZW9mID09PSBwIHx8IGUuJCR0eXBlb2YgPT09IHkgfHwgZS4kJHR5cGVvZiA9PT0gdyB8fCBlLiQkdHlwZW9mID09PSBrIHx8IGUuJCR0eXBlb2YgPT09IHYpOwogICAgfSwgdC50eXBlT2YgPSB4Owp9LCBmdW5jdGlvbihlLCB0KSB7CiAgICB2YXIgbiwgciwgYSA9IGUuZXhwb3J0cyA9IHt9OwogICAgZnVuY3Rpb24gbygpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInNldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKTsKICAgIH0KICAgIGZ1bmN0aW9uIGkoKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKTsKICAgIH0KICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgIGlmIChuID09PSBzZXRUaW1lb3V0KSByZXR1cm4gc2V0VGltZW91dChlLCAwKTsKICAgICAgICBpZiAoKG4gPT09IG8gfHwgIW4pICYmIHNldFRpbWVvdXQpIHJldHVybiBuID0gc2V0VGltZW91dCwgc2V0VGltZW91dChlLCAwKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gbihlLCAwKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5jYWxsKG51bGwsIGUsIDApOwogICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5jYWxsKHRoaXMsIGUsIDApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgIWZ1bmN0aW9uKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG4gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBzZXRUaW1lb3V0ID8gc2V0VGltZW91dCA6IG87CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBuID0gbzsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgciA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGNsZWFyVGltZW91dCA/IGNsZWFyVGltZW91dCA6IGk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByID0gaTsKICAgICAgICB9CiAgICB9KCk7CiAgICB2YXIgdSwgYyA9IFtdLCBzID0gITEsIGYgPSAtMTsKICAgIGZ1bmN0aW9uIGQoKSB7CiAgICAgICAgcyAmJiB1ICYmIChzID0gITEsIHUubGVuZ3RoID8gYyA9IHUuY29uY2F0KGMpIDogZiA9IC0xLCBjLmxlbmd0aCAmJiBwKCkpOwogICAgfQogICAgZnVuY3Rpb24gcCgpIHsKICAgICAgICBpZiAoIXMpIHsKICAgICAgICAgICAgdmFyIGUgPSBsKGQpOwogICAgICAgICAgICBzID0gITA7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSBjLmxlbmd0aDsgdDsgKSB7CiAgICAgICAgICAgICAgICBmb3IgKHUgPSBjLCBjID0gW107ICsrZiA8IHQ7ICkgdSAmJiB1W2ZdLnJ1bigpOwogICAgICAgICAgICAgICAgZiA9IC0xLCB0ID0gYy5sZW5ndGg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdSA9IG51bGwsIHMgPSAhMSwgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgaWYgKHIgPT09IGNsZWFyVGltZW91dCkgcmV0dXJuIGNsZWFyVGltZW91dChlKTsKICAgICAgICAgICAgICAgIGlmICgociA9PT0gaSB8fCAhcikgJiYgY2xlYXJUaW1lb3V0KSByZXR1cm4gciA9IGNsZWFyVGltZW91dCwgY2xlYXJUaW1lb3V0KGUpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByKGUpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLmNhbGwobnVsbCwgZSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5jYWxsKHRoaXMsIGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfShlKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBnKGUsIHQpIHsKICAgICAgICB0aGlzLmZ1biA9IGUsIHRoaXMuYXJyYXkgPSB0OwogICAgfQogICAgZnVuY3Rpb24gaCgpIHt9CiAgICBhLm5leHRUaWNrID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTsKICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIGZvciAodmFyIG4gPSAxOyBuIDwgYXJndW1lbnRzLmxlbmd0aDsgbisrKSB0W24gLSAxXSA9IGFyZ3VtZW50c1tuXTsKICAgICAgICBjLnB1c2gobmV3IGcoZSwgdCkpLCAxICE9PSBjLmxlbmd0aCB8fCBzIHx8IGwocCk7CiAgICB9LCBnLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTsKICAgIH0sIGEudGl0bGUgPSAiYnJvd3NlciIsIGEuYnJvd3NlciA9ICEwLCBhLmVudiA9IHt9LCBhLmFyZ3YgPSBbXSwgYS52ZXJzaW9uID0gIiIsIAogICAgYS52ZXJzaW9ucyA9IHt9LCBhLm9uID0gaCwgYS5hZGRMaXN0ZW5lciA9IGgsIGEub25jZSA9IGgsIGEub2ZmID0gaCwgYS5yZW1vdmVMaXN0ZW5lciA9IGgsIAogICAgYS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBoLCBhLmVtaXQgPSBoLCBhLnByZXBlbmRMaXN0ZW5lciA9IGgsIGEucHJlcGVuZE9uY2VMaXN0ZW5lciA9IGgsIAogICAgYS5saXN0ZW5lcnMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgfSwgYS5iaW5kaW5nID0gZnVuY3Rpb24oZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKTsKICAgIH0sIGEuY3dkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICIvIjsKICAgIH0sIGEuY2hkaXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKTsKICAgIH0sIGEudW1hc2sgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gMDsKICAgIH07Cn0gXSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPW1haW4uanMubWFw"}],"settings":{"script_blacklist_server":[{"rules":["/https?:\\/\\/userscripts\\.org\\/scripts\\/(source|version)/(102614).*\\.user\\.js/"],"severity":"2"},{"name":"SaveFrom.net helper","reason":"Shows advertisements","rules":["/https?:\\/\\/sf-addon\\.com\\/.*\\/.*\\.user\\.js/","/https?:\\/\\/.*\\.sf-helper\\.com\\/.*\\.user\\.js/"],"severity":"3"},{"reasons":{"en":"Used for a phishing compain to compromise users of baon-nutrition.com"},"rules":["/https?:\\/\\/files\\.ulysse\\.travel\\/.*\\.user\\.js/"],"severity":"8"}]}}